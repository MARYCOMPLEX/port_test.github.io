{"version":3,"file":"static/js/88.2f74d306.js","mappings":"2IAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACJ,EAAIK,GAAG,yBAAyBH,EAAG,cAAc,CAACI,MAAM,CAAC,UAAY,cAAcC,GAAG,CAAC,QAAUP,EAAIQ,iBAAiB,CAACN,EAAG,OAAO,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACI,MAAM,CAAC,MAAQ,aAAa,CAACN,EAAIK,GAAG,UAAUH,EAAG,IAAI,CAACE,YAAY,wCAAwCF,EAAG,mBAAmB,CAACI,MAAM,CAAC,KAAO,YAAYG,KAAK,YAAY,CAACP,EAAG,mBAAmB,CAACI,MAAM,CAAC,QAAU,qBAAqB,CAACN,EAAIK,GAAG,UAAUH,EAAG,mBAAmB,CAACI,MAAM,CAAC,QAAU,UAAU,CAACN,EAAIK,GAAG,cAAc,IAAI,GAAGH,EAAG,cAAc,CAACI,MAAM,CAAC,UAAY,cAAcC,GAAG,CAAC,QAAUP,EAAIU,gBAAgB,CAACR,EAAG,OAAO,CAACE,YAAY,2BAA2B,CAACF,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,QAAQ,IAAMN,EAAIW,aAAaT,EAAG,IAAI,CAACE,YAAY,uCAAuC,GAAGF,EAAG,mBAAmB,CAACI,MAAM,CAAC,KAAO,YAAYG,KAAK,YAAY,CAACP,EAAG,mBAAmB,CAACI,MAAM,CAAC,QAAU,WAAW,CAACN,EAAIK,GAAG,QAAQH,EAAG,mBAAmB,CAACI,MAAM,CAAC,QAAU,aAAa,CAACN,EAAIK,GAAG,SAAS,IAAI,IAAI,EACplC,EACIO,EAAkB,GCqEtB,G,SAAA,CACAC,OACA,OACAF,UAAA,0FAEA,EACAG,QAAA,CACAN,eAAAO,GACA,qBAAAA,EACA,KAAAC,QAAAC,KAAA,qBACA,SAAAF,EAEA,KAAAC,QAAAC,KAAA,SACA,QAAAF,EACA,KAAAG,MAAA,YACA,UAAAH,GACA,KAAAC,QAAAC,KAAA,SAEA,EACAE,eAAAJ,GACA,mBAAAA,EACA,KAAAC,QAAAC,KAAA,mBACA,mBAAAF,EACA,KAAAC,QAAAC,KAAA,mBACA,gBAAAF,EACA,KAAAC,QAAAC,KAAA,gBACA,uBAAAF,EACA,KAAAC,QAAAC,KAAA,uBACA,qBAAAF,EACA,KAAAC,QAAAC,KAAA,qBACA,sBAAAF,EACA,KAAAC,QAAAC,KAAA,sBACA,4BAAAF,GACA,KAAAC,QAAAC,KAAA,2BAEA,EACAG,eAAAL,GACA,KAAAC,QAAAC,KAAA,eACA,EACAI,eAAAN,GACA,sBAAAA,EACA,KAAAC,QAAAC,KAAA,sBACA,yBAAAF,EACA,KAAAC,QAAAC,KAAA,yBACA,+BAAAF,EACA,KAAAC,QAAAC,KAAA,+BACA,yBAAAF,EACA,KAAAC,QAAAC,KAAA,yBACA,8BAAAF,EACA,KAAAC,QAAAC,KAAA,8BACA,0BAAAF,GACA,KAAAC,QAAAC,KAAA,yBAEA,EACAK,eACA,KAAAN,QAAAC,KAAA,SACA,EACAM,WACA,KAAAP,QAAAC,KAAA,YACA,EACAP,cAAAK,GACA,WAAAA,EACA,KAAAO,eACA,aAAAP,GACA,KAAAQ,UAEA,KCzIqP,I,UCQjPC,GAAY,OACd,EACAzB,EACAa,GACA,EACA,KACA,WACA,MAIF,EAAeY,EAAiB,O,uBCnBhC,IAAIC,EAAWC,EAAQ,OAGnBC,EAAUD,EAAQ,QAEtB,WACE,IAAK,IAAIE,KAAOD,EAAS,CACvB,GAAe,MAAXA,IAAoBA,EAAQE,eAAeD,IAAgB,YAARA,GAA6B,eAARA,EAAsB,OAClGE,EAAQF,GAAOD,EAAQC,EACzB,CACD,EALD,GAOAF,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,MAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,MAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,KAERA,EAAQ,OAERA,EAAQ,KAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,MAERA,EAAQ,MAERA,EAAQ,OAERA,EAAQ,OAER,WACE,IAAK,IAAIE,KAAOH,EAAU,CACxB,GAAgB,MAAZA,IAAqBA,EAASI,eAAeD,IAAgB,YAARA,GAA6B,eAARA,EAAsB,OACpGE,EAAQF,GAAOH,EAASG,EAC1B,CACD,CALD,E,wBChGA,IAAIG,EAASL,EAAQ,OAEjBM,EAA2B,CAAC,EAEhC,SAASC,IACPhC,KAAKiC,mBAAqB,EAC5B,CAEAD,EAAwBE,UAAY,CAClCC,YAAaH,EACbI,OAAQ,SAAUC,EAASC,GACzB,IAAIC,EAAoB,GACxBT,EAAOU,KAAKT,GAA0B,SAAUU,EAASC,GACvD,IAAIC,EAAOF,EAAQL,OAAOC,EAASC,GACnCC,EAAoBA,EAAkBK,OAAOD,GAAQ,GACvD,IACA3C,KAAKiC,mBAAqBM,CAC5B,EACAM,OAAQ,SAAUR,EAASC,GACzBR,EAAOU,KAAKxC,KAAKiC,oBAAoB,SAAUa,GAE7CA,EAASD,QAAUC,EAASD,OAAOR,EAASC,EAC9C,GACF,EACAS,qBAAsB,WACpB,OAAO/C,KAAKiC,mBAAmBe,OACjC,GAGFhB,EAAwBV,SAAW,SAAUoB,EAAMO,GACjDlB,EAAyBW,GAAQO,CACnC,EAEAjB,EAAwBkB,IAAM,SAAUR,GACtC,OAAOX,EAAyBW,EAClC,EAEA,IAAIS,EAAWnB,EACfoB,EAAOvB,QAAUsB,C,wBCtCjB,IAAIrB,EAASL,EAAQ,OAEjB4B,EAAiB,CAAC,SAAU,QAAS,WAAY,YAAa,sBAAuB,iBAAkB,aAAc,KAAM,MAAO,aAAc,sBAAuB,WAAY,YAAa,0BAA2B,wBAE/N,SAASC,EAAaC,GACpBzB,EAAOU,KAAKa,GAAgB,SAAUG,GACpCxD,KAAKwD,GAAQ1B,EAAO2B,KAAKF,EAAcC,GAAOD,EAChD,GAAGvD,KACL,CAEA,IAAImD,EAAWG,EACfF,EAAOvB,QAAUsB,C,wBCXjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAErB,SAAS0B,EAASQ,EAAYC,GAC5B9B,EAAOU,KAAKoB,GAAa,SAAUC,GACjCA,EAAWhB,OAAS,aAOpBa,EAAQI,eAAeD,GAAY,SAAUE,EAAS1B,GACpD,IAAI2B,EAAW,CAAC,EAiBhB,OAhBA3B,EAAQ4B,cAAc,CACpBC,SAAU,SACVC,QAASR,EACTS,MAAOL,IACN,SAAUM,GACPA,EAAYR,EAAWS,SACzBD,EAAYR,EAAWS,QAAQP,EAAQP,KAAMO,EAAQQ,WAGvD,IAAI3D,EAAOyD,EAAYG,UAEvB5D,EAAK4B,MAAK,SAAUiC,GAClB,IAAIjB,EAAO5C,EAAK8D,QAAQD,GACxBT,EAASR,GAAQa,EAAYM,WAAWnB,KAAS,CACnD,GACF,IACO,CACLA,KAAMO,EAAQP,KACdQ,SAAUA,EAEd,GACF,GACF,CAEAZ,EAAOvB,QAAUsB,C,wBCvCjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBmD,EAAcnD,EAAQ,OAEtBoD,EAAsBD,EAAYC,oBAWtCnB,EAAQI,eAAe,CACrBpB,KAAM,UACNoC,MAAO,UACPjC,OAAQ,iBACP,SAAUkB,EAAS1B,GACpB,IAAI0C,EAAgBhB,EAAQgB,eAAiB,SAC7C1C,EAAQ4B,cAAc,CACpBC,SAAUa,EACVX,MAAOL,IACN,SAAUiB,GACX,IAAIC,EAAMD,EAAeE,iBAEzB,GAAiB,QAAbD,EAAIvC,KAAR,CAIA,IAAIyC,EAAMN,EAAoBI,EAAKlB,EAASiB,EAAe9B,IAAI,eAC/D8B,EAAeI,WAAaJ,EAAeI,UAAUD,EAAIE,QACzDL,EAAeM,SAAWN,EAAeM,QAAQH,EAAII,MAG/B,WAAlBR,GACFjD,EAAOU,KAAKwC,EAAeQ,aAAa,SAAUnB,GAChDA,EAAYe,UAAUD,EAAIE,QAC1BhB,EAAYiB,QAAQH,EAAII,KAC1B,GAXF,CAaF,GACF,G,sBCxCA,SAASV,EAAoBY,EAAM1B,EAAS2B,GAC1C,IAAIC,EAAeF,EAAKG,UACpBP,EAASI,EAAKI,YACdN,EAAOxB,EAAQwB,KACfO,EAAQL,EAAKM,YAAYV,GAE7B,GAAkB,MAAdtB,EAAQiC,IAA4B,MAAdjC,EAAQkC,GAAY,CAC5CH,EAAM,IAAM/B,EAAQiC,GACpBF,EAAM,IAAM/B,EAAQkC,GAChBZ,EAASI,EAAKS,YAAYJ,GAC9BL,EAAKL,UAAUC,EACjB,CAEA,GAAY,MAARE,EAAc,CAChB,GAAIG,EAAW,CACb,IAAIS,EAAUT,EAAUU,KAAO,EAC3BC,EAAUX,EAAUY,KAAOC,IAC/BhB,EAAOiB,KAAKF,IAAIE,KAAKJ,IAAIT,EAAeJ,EAAMc,GAAUF,GAAWR,CACrE,CAGAF,EAAKgB,MAAM,IAAMlB,EACjBE,EAAKgB,MAAM,IAAMlB,EACjB,IAAImB,EAAWjB,EAAKiB,SAChBC,GAAQ5C,EAAQ6C,QAAUF,EAAS,KAAOnB,EAAO,GACjDsB,GAAQ9C,EAAQ+C,QAAUJ,EAAS,KAAOnB,EAAO,GACrDmB,EAAS,IAAMC,EACfD,EAAS,IAAMG,EACfpB,EAAKsB,kBAED1B,EAASI,EAAKS,YAAYJ,GAC9BL,EAAKL,UAAUC,GACfI,EAAKH,QAAQC,EAAOI,EACtB,CAEA,MAAO,CACLN,OAAQI,EAAKI,YACbN,KAAME,EAAKG,UAEf,CAEA/D,EAAQgD,oBAAsBA,C,wBC9C9B,IAAInB,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBuF,EAAgBvF,EAAQ,OAE5BA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAGRiC,EAAQuD,eAAenF,EAAOoF,MAAMF,EAAe,QAEnDtD,EAAQyD,gBAAe,SAAU9E,GAC/BA,EAAQ+E,iBAAiB,OAAO,SAAU/C,GACxC,IAAIzD,EAAOyD,EAAYG,UACvB5D,EAAKyG,UAAU,eAAgB,YACjC,GACF,G,wBCtBA,IAAIC,EAAgB7F,EAAQ,OAExB0B,EAAWmE,EAAcC,OAAO,CAClC7E,KAAM,aACN8E,aAAc,CAAC,OAAQ,SACvBC,cAAe,SAGjBrE,EAAOvB,QAAUsB,C,wBCRjB,IAAIuE,EAAUjG,EAAQ,OAIlBiC,GAFUgE,EAAQC,QAERlG,EAAQ,QAElBK,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElBoG,EAAUpG,EAAQ,OAElBqG,EAAWD,EAAQC,SAEnBC,EAAQtG,EAAQ,OAEhBuG,EAAevG,EAAQ,OAEvBwG,EAAyB,CAAC,YAAa,SAAU,kBAGrDnG,EAAOyF,OAAOQ,EAAM7F,UAAW8F,GAE/B,IAAI7E,EAAWO,EAAQwE,gBAAgB,CACrCxF,KAAM,MACN5C,OAAQ,SAAUuE,EAAahC,EAASC,GACtC,IAAI6F,EAAuB9D,EAAYnB,IAAI,oBAM3C,MAJ6B,gBAAzBiF,GAAmE,UAAzBA,GAC5CnI,KAAKoI,QAAQ/D,EAAahC,EAASC,GAG9BtC,KAAKqI,KACd,EACAC,QAASxG,EAAOyG,KAChBH,QAAS,SAAU/D,EAAahC,EAASC,GACvC,IAKIkG,EALAH,EAAQrI,KAAKqI,MACbzH,EAAOyD,EAAYG,UACnBiE,EAAUzI,KAAK0I,MACfC,EAAQtE,EAAYa,iBACpB0D,EAAWD,EAAME,cAGF,gBAAfF,EAAMjG,KACR8F,EAAuBI,EAASE,eACR,UAAfH,EAAMjG,OACf8F,EAAwC,UAAjBI,EAASG,KAGlC,IAAIC,EAAiB3E,EAAY4E,qBAAuB5E,EAAc,KACtEzD,EAAKsI,KAAKT,GAASU,KAAI,SAAU5E,GAC/B,GAAK3D,EAAKwI,SAAS7E,GAAnB,CAIA,IAAI8E,EAAYzI,EAAK0I,aAAa/E,GAC9BgF,EAASC,EAAUb,EAAMjG,MAAM9B,EAAM2D,EAAW8E,GAChDI,EAAKC,EAAef,EAAMjG,MAAM9B,EAAM2D,EAAW8E,EAAWE,EAAQf,EAAsBQ,GAC9FpI,EAAK+I,iBAAiBpF,EAAWkF,GACjCpB,EAAMc,IAAIM,GACVG,EAAYH,EAAI7I,EAAM2D,EAAW8E,EAAWE,EAAQlF,EAAamE,EAAqC,UAAfG,EAAMjG,KAP7F,CAQF,IAAGG,QAAO,SAAUgH,EAAUC,GAC5B,IAAIL,EAAKhB,EAAQsB,iBAAiBD,GAElC,GAAKlJ,EAAKwI,SAASS,GAAnB,CAKA,IAAIR,EAAYzI,EAAK0I,aAAaO,GAC9BN,EAASC,EAAUb,EAAMjG,MAAM9B,EAAMiJ,EAAUR,GAE/CI,EACF7B,EAAQoC,YAAYP,EAAI,CACtBQ,MAAOV,GACNP,EAAgBa,GAEnBJ,EAAKC,EAAef,EAAMjG,MAAM9B,EAAMiJ,EAAUR,EAAWE,EAAQf,EAAsBQ,GAAgB,GAG3GpI,EAAK+I,iBAAiBE,EAAUJ,GAEhCpB,EAAMc,IAAIM,GACVG,EAAYH,EAAI7I,EAAMiJ,EAAUR,EAAWE,EAAQlF,EAAamE,EAAqC,UAAfG,EAAMjG,KAhB5F,MAFE2F,EAAM6B,OAAOT,EAmBjB,IAAGS,QAAO,SAAU3F,GAClB,IAAIkF,EAAKhB,EAAQsB,iBAAiBxF,GAEf,gBAAfoE,EAAMjG,KACR+G,GAAMU,EAAW5F,EAAWyE,EAAgBS,GAE5CA,GAAMW,EAAa7F,EAAWyE,EAAgBS,EAElD,IAAGY,UACHrK,KAAK0I,MAAQ9H,CACf,EACAsJ,OAAQ,SAAU7H,EAASC,GACzB,IAAI+F,EAAQrI,KAAKqI,MACbzH,EAAOZ,KAAK0I,MAEZrG,EAAQa,IAAI,aACVtC,GACFA,EAAK0J,mBAAkB,SAAUb,GACf,WAAZA,EAAG/G,KACL0H,EAAaX,EAAGlF,UAAWlC,EAASoH,GAEpCU,EAAWV,EAAGlF,UAAWlC,EAASoH,EAEtC,IAGFpB,EAAMkC,WAEV,IAGEb,EAAiB,CACnBc,YAAa,SAAU5J,EAAM2D,EAAW8E,EAAWE,EAAQT,EAAcE,EAAgByB,GACvF,IAAIC,EAAO,IAAI9C,EAAQ+C,KAAK,CAC1BV,MAAOnI,EAAOyF,OAAO,CAAC,EAAGgC,KAG3B,GAAIP,EAAgB,CAClB,IAAI4B,EAAYF,EAAKT,MACjBY,EAAkB/B,EAAe,SAAW,QAC5CgC,EAAgB,CAAC,EACrBF,EAAUC,GAAmB,EAC7BC,EAAcD,GAAmBtB,EAAOsB,GACxCjD,EAAQ6C,EAAW,cAAgB,aAAaC,EAAM,CACpDT,MAAOa,GACN9B,EAAgBzE,EACrB,CAEA,OAAOmG,CACT,EACAK,MAAO,SAAUnK,EAAM2D,EAAW8E,EAAWE,EAAQyB,EAAUhC,EAAgByB,GAC7E,IAAIQ,EAAS,IAAIrD,EAAQsD,OAAO,CAC9BjB,MAAOnI,EAAOyF,OAAO,CAAC,EAAGgC,KAG3B,GAAIP,EAAgB,CAClB,IAAImC,EAAcF,EAAOhB,MACrBY,EAAkBG,EAAW,IAAM,WACnCF,EAAgB,CAAC,EACrBK,EAAYN,GAAmBG,EAAW,EAAIzB,EAAO6B,WACrDN,EAAcD,GAAmBtB,EAAOsB,GACxCjD,EAAQ6C,EAAW,cAAgB,aAAaQ,EAAQ,CACtDhB,MAAOa,GACN9B,EAAgBzE,EACrB,CAEA,OAAO0G,CACT,GAGF,SAASd,EAAW5F,EAAWyE,EAAgBS,GAE7CA,EAAG4B,MAAMC,KAAO,KAChB1D,EAAQoC,YAAYP,EAAI,CACtBQ,MAAO,CACLsB,MAAO,IAERvC,EAAgBzE,GAAW,WAC5BkF,EAAG+B,QAAU/B,EAAG+B,OAAOtB,OAAOT,EAChC,GACF,CAEA,SAASW,EAAa7F,EAAWyE,EAAgBS,GAE/CA,EAAG4B,MAAMC,KAAO,KAChB1D,EAAQoC,YAAYP,EAAI,CACtBQ,MAAO,CACLwB,EAAGhC,EAAGQ,MAAMyB,KAEb1C,EAAgBzE,GAAW,WAC5BkF,EAAG+B,QAAU/B,EAAG+B,OAAOtB,OAAOT,EAChC,GACF,CAEA,IAAID,EAAY,CACdgB,YAAa,SAAU5J,EAAM2D,EAAW8E,GACtC,IAAIE,EAAS3I,EAAK+K,cAAcpH,GAC5BqH,EAAiBC,EAAaxC,EAAWE,GAEzCuC,EAAQvC,EAAOgC,MAAQ,EAAI,GAAK,EAChCQ,EAAQxC,EAAOyC,OAAS,EAAI,GAAK,EACrC,MAAO,CACLC,EAAG1C,EAAO0C,EAAIH,EAAQF,EAAiB,EACvCM,EAAG3C,EAAO2C,EAAIH,EAAQH,EAAiB,EACvCL,MAAOhC,EAAOgC,MAAQO,EAAQF,EAC9BI,OAAQzC,EAAOyC,OAASD,EAAQH,EAEpC,EACAb,MAAO,SAAUnK,EAAM2D,EAAW8E,GAChC,IAAIE,EAAS3I,EAAK+K,cAAcpH,GAChC,MAAO,CACL4H,GAAI5C,EAAO4C,GACXC,GAAI7C,EAAO6C,GACXV,GAAInC,EAAOmC,GACXD,EAAGlC,EAAOkC,EACVL,WAAY7B,EAAO6B,WACnBiB,SAAU9C,EAAO8C,SAErB,GAGF,SAASzC,EAAYH,EAAI7I,EAAM2D,EAAW8E,EAAWE,EAAQlF,EAAayE,EAAcwD,GACtF,IAAIC,EAAQ3L,EAAK4L,cAAcjI,EAAW,SACtCkI,EAAU7L,EAAK4L,cAAcjI,EAAW,WACxCmI,EAAiBrD,EAAUsD,SAAS,oBACpCC,EAAavD,EAAUsD,SAAS,sBAAsBE,kBAErDP,GACH7C,EAAGqD,SAAS,IAAKJ,EAAexJ,IAAI,oBAAsB,GAG5DuG,EAAGsD,SAASjL,EAAOkL,SAAS,CAC1BC,KAAMV,EACNE,QAASA,GACRC,EAAeG,oBAClB,IAAIK,EAAc7D,EAAU8D,WAAW,UACvCD,GAAezD,EAAG2D,KAAK,SAAUF,GACjC,IAAIG,EAAuBvE,EAAeS,EAAOyC,OAAS,EAAI,SAAW,MAAQzC,EAAOgC,MAAQ,EAAI,OAAS,QAExGe,GACHxE,EAAS2B,EAAG4B,MAAOuB,EAAYvD,EAAWkD,EAAOlI,EAAaE,EAAW8I,GAG3EzF,EAAQ0F,cAAc7D,EAAImD,EAC5B,CAGA,SAASf,EAAaxC,EAAWkE,GAC/B,IAAIC,EAAYnE,EAAUnG,IAAI+E,IAA2B,EACzD,OAAOzB,KAAKJ,IAAIoH,EAAWhH,KAAKiH,IAAIF,EAAUhC,OAAQ/E,KAAKiH,IAAIF,EAAUvB,QAC3E,CAEA5I,EAAOvB,QAAUsB,C,wBC5OjB,IAAIuK,EAAcjM,EAAQ,OAEtBkM,EAAsBlM,EAAQ,OAE9B0B,EAAWuK,EAAYnG,OAAO,CAChC7E,KAAM,sBACNkL,eAAgB,SAAUC,EAAQxL,GAChC,OAAOsL,EAAoBE,EAAOjN,KAAMZ,KAAMqC,EAChD,EACAyL,kBAAmB,SAAUC,GAC3B,IAAIjL,EAAW9C,KAAKkF,iBAEpB,GAAIpC,EAAU,CAEZ,IAAIkL,EAAKlL,EAASiD,YAAYgI,GAAO,GACjCnN,EAAOZ,KAAKwE,UACZyJ,EAASrN,EAAK4I,UAAU,UACxB0E,EAAOtN,EAAK4I,UAAU,QACtB2E,EAAcrL,EAAS+F,cAAcC,eAAiB,EAAI,EAE9D,OADAkF,EAAGG,IAAgBF,EAASC,EAAO,EAC5BF,CACT,CAEA,MAAO,CAACI,IAAKA,IACf,EACAC,cAAe,CACbC,OAAQ,EAERC,EAAG,EAEHrJ,iBAAkB,cAClBsJ,iBAAiB,EAMjBC,aAAc,EAEdC,YAAa,EAcbC,UAAW,CAGT,KAKNvL,EAAOvB,QAAUsB,C,wBC7DjB,IAAImE,EAAgB7F,EAAQ,OAExBmN,EAAqBtH,EAAcC,OAAO,CAC5C7E,KAAM,sBACN8E,aAAc,CAAC,QACf6G,cAAe,CACbQ,OAAQ,SAERC,WAAY,KAEZC,aAAc,KACdC,eAAgB,KAEhBC,aAAc,KACdC,aAAc,KAGdC,cAAc,EAKdC,sBAAuB,MAEvBC,YAAY,EACZC,mBAAoB,KAEpBC,kBAAmB,IAEnBC,OAAQ,QAIRC,YAAa,EACbC,gBAAgB,GAGlB9B,eAAgB,SAAUC,GAGxB,OADAA,EAAO8B,MAAQ,KACRf,EAAmBgB,WAAW5P,KAAM,iBAAkB6P,UAC/D,IAEE1M,EAAWyL,EACfxL,EAAOvB,QAAUsB,C,iCC5CjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElBqO,EAAUrO,EAAQ,OAElBsO,EAAeD,EAAQC,aAEvBC,EAAUvO,EAAQ,OAElBwO,EAAeD,EAAQC,aACvBC,EAAYF,EAAQE,UAEpBrI,EAAUpG,EAAQ,OAElBqG,EAAWD,EAAQC,SACnBG,EAAyB,CAAC,YAAa,SAAU,eAEjDkI,EAAe,CAAC,CAClBC,GAAI,IACJC,GAAI,QACJC,MAAO,EACPC,QAAS,CAAC,OAAQ,UACjB,CACDH,GAAI,IACJC,GAAI,SACJC,MAAO,EACPC,QAAS,CAAC,MAAO,YAEfC,EAAmB,IAAI5I,EAAQ6I,OAC/BC,EAAUhN,EAAQwE,gBAAgB,CACpCxF,KAAM,eACN5C,OAAQ,SAAUuE,EAAahC,EAASC,GACtC,IAAI+F,EAAQrI,KAAKqI,MACbzH,EAAOyD,EAAYG,UACnBiE,EAAUzI,KAAK0I,MACfiI,EAAYtM,EAAYa,iBACxB0D,EAAW+H,EAAU9H,cACrBC,IAAiBF,EAASE,eAC1B8H,EAAeD,EAAUE,KAAKC,UAC9BC,EAAM,CACRC,OAAQ,CACNzF,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aAEd7M,YAAaA,EACbvB,SAAU6N,EACVQ,eAAgB,CAAC,CAACP,EAAa3E,EAAG2E,EAAa3E,EAAI2E,EAAarF,OAAQ,CAACqF,EAAa1E,EAAG0E,EAAa1E,EAAI0E,EAAa5E,SACvHlD,aAAcA,EACdsI,SAAUjB,GAAcrH,GACxBuI,YAAalB,EAAa,EAAIrH,IA+ChC,OA7CAlI,EAAKsI,KAAKT,GAASU,KAAI,SAAU5E,GAC/B,GAAK3D,EAAKwI,SAAS7E,GAAnB,CAIA,IAAI8E,EAAYC,EAAa1I,EAAM2D,GAC/B+M,EAAaC,EAAc3Q,EAAM2D,EAAW8E,EAAW0H,GACvDS,EAAMC,EAAU7Q,EAAMmQ,EAAKO,GAC/B1Q,EAAK+I,iBAAiBpF,EAAWiN,GACjCnJ,EAAMc,IAAIqI,GACVE,EAAaF,EAAKT,EAAKO,EAPvB,CAQF,IAAGzO,QAAO,SAAUgH,EAAUC,GAC5B,IAAI0H,EAAM/I,EAAQsB,iBAAiBD,GAEnC,GAAKlJ,EAAKwI,SAASS,GAAnB,CAKA,IAAIR,EAAYC,EAAa1I,EAAMiJ,GAC/ByH,EAAaC,EAAc3Q,EAAMiJ,EAAUR,EAAW0H,GACtDY,EAAoBC,EAAYhR,EAAM0Q,GAEtCE,GAAOG,IAAsBH,EAAIK,sBACnCxJ,EAAM6B,OAAOsH,GACb5Q,EAAK+I,iBAAiBE,EAAU,MAChC2H,EAAM,MAGJA,EACFM,EAAUN,EAAKT,EAAKO,GAEpBE,EAAMC,EAAU7Q,EAAMmQ,EAAKO,GAAY,GAGzC1Q,EAAK+I,iBAAiBE,EAAU2H,GAChCA,EAAIO,sBAAwBT,EAE5BjJ,EAAMc,IAAIqI,GACVE,EAAaF,EAAKT,EAAKO,EAtBvB,MAFEjJ,EAAM6B,OAAOsH,EAyBjB,IAAGtH,QAAO,SAAU3F,GAClB,IAAIiN,EAAM/I,EAAQsB,iBAAiBxF,GACnCiN,GAAOQ,EAAUvJ,EAASlE,EAAWiN,EAAIO,sBAAsB/I,eAAgBwI,EACjF,IAAGnH,UACHrK,KAAK0I,MAAQ9H,EACNZ,KAAKqI,KACd,EACAC,QAASxG,EAAOyG,KAChB2B,OAAQ,SAAU7H,EAASC,GACzB,IAAI+F,EAAQrI,KAAKqI,MACbzH,EAAOZ,KAAK0I,MAEZrG,EAAQa,IAAI,aACVtC,GACFA,EAAK0J,mBAAkB,SAAUkH,GAC/BQ,EAAUpR,EAAM4Q,EAAIjN,UAAWlC,EAASmP,EAC1C,IAGFnJ,EAAMkC,WAEV,IAGF,SAASgH,EAAc3Q,EAAM2D,EAAW8E,EAAW0H,GACjD,IAAIxH,EAAS3I,EAAK+K,cAAcpH,GAC5B4K,EAAe9F,EAAUnG,IAAI,gBAC7BmM,EAAahG,EAAUnG,IAAI,cAC3B8L,EAAiB3F,EAAUnG,IAAI,mBAAqB,QACpD6L,EAAe1F,EAAUnG,IAAI,gBAC7B+O,GAAYlD,GAAgB,GAAKvI,KAAK0L,GAAK,KAAO,EAClD3C,EAAoBlG,EAAUnG,IAAI,sBAAwB,EAC1D+F,EAAqBI,EAAUJ,qBAC/BqI,EAAa,CACf/M,UAAWA,EACXgF,OAAQA,EACRF,UAAWA,EACX8I,WAAYvR,EAAK4L,cAAcjI,EAAW,WAAa,SACvDgI,MAAO3L,EAAK4L,cAAcjI,EAAW,SACrC8K,WAAYA,EACZF,aAAcA,EACdC,sBAAuB/F,EAAUnG,IAAI,yBACrCqM,kBAAmBA,EACnB0C,SAAUA,EACVjJ,eAAgBC,EAAqBI,EAAY,KACjDqG,eAAgBzG,GAAsBI,EAAUnG,IAAI,kBACpDkP,GAAI/I,EAAU8D,WAAW,KAAK,IAAS,GAEzCkF,EAAiBhJ,EAAW8F,EAAc5F,EAAQwH,EAAKO,GACvDgB,EAAkB1R,EAAM2D,EAAWgF,EAAQ4F,EAAcE,EAAYiC,EAAWiB,eAAgBjB,EAAWkB,OAAQjD,EAAmBwB,EAAKO,GAC3ImB,EAAiBpJ,EAAWiI,EAAWoB,YAAaT,EAAUlB,EAAKO,GACnE,IAAIxC,EAAawC,EAAWxC,WACxBG,EAAe5F,EAAUnG,IAAI,gBAOjC,OALIpB,EAAO6Q,QAAQ1D,KACjBA,EAAe,CAACgB,EAAahB,EAAa,GAAIH,EAAW,IAAKmB,EAAahB,EAAa,GAAIH,EAAW,MAGzG8D,EAAkBvJ,EAAWyF,EAAYvF,EAAQ4F,EAAcE,EAAYJ,EAAcD,EAAgBsC,EAAWuB,eAAgBvB,EAAWiB,eAAgBjB,EAAWwB,gBAAiB/B,EAAKO,GACzLA,CACT,CAGA,SAASe,EAAiBhJ,EAAW8F,EAAc5F,EAAQwH,EAAKgC,GAC9D,IAKIR,EALAnB,EAAWL,EAAIK,SACf9B,EAAqBjG,EAAUnG,IAAI,sBACnC8P,EAAYjC,EAAIjO,SAASmQ,aAAalC,EAAIjO,SAAS+F,eACnDqK,EAASF,EAAUG,cAAcH,EAAUI,YAAY,IACvDC,EAAY,IAAM9J,EAAO6H,EAASf,KAAO,GAG7C,GAAIvO,EAAO6Q,QAAQrD,GAAqB,CACtC,IAAIgE,EAAuB,CAACC,EAAqBP,EAAW1D,EAAmB,IAAM4D,EAAQK,EAAqBP,EAAW1D,EAAmB,IAAM4D,GACtJI,EAAqB,GAAKA,EAAqB,IAAMA,EAAqBE,UAC1EjB,EAAiBe,EAAqBD,EACxC,MACEd,EAD+B,MAAtBjD,EACQiE,EAAqBP,EAAW1D,GAAsB4D,EAC9D/D,EACQ4B,EAAII,eAAeC,EAASd,OAAO+C,GAAaH,EAEhD3J,EAAO6H,EAASf,IAGnC0C,EAAOR,eAAiBA,EAEpBpD,IACF4D,EAAOD,gBAAkBvJ,EAAO6H,EAASf,KAG3C0C,EAAOP,OAASD,EAAiB,EAAI,EAAIA,EAAiB,GAAK,EAAI,CACrE,CAEA,SAASgB,EAAqBE,EAAM1F,GAClC,OAAO0F,EAAKN,cAAcM,EAAKL,YAAYK,EAAKhN,MAAMiN,MAAM3F,IAC9D,CAGA,SAASuE,EAAkB1R,EAAM2D,EAAWgF,EAAQ4F,EAAcE,EAAYkD,EAAgBC,EAAQjD,EAAmBwB,EAAKgC,GAC5H,IAAI3B,EAAWL,EAAIK,SACfC,EAAcN,EAAIM,YAClBsC,EAAenN,KAAKiH,IAAIlE,EAAO8H,EAAYhB,KAC3CvB,EAAalO,EAAK4L,cAAcjI,EAAW,cAE3CzC,EAAO6Q,QAAQ7D,GACjBA,EAAaA,EAAW9L,SAEN,MAAd8L,IACFA,EAAa,QAGfA,EAAa,CAACA,EAAYA,IAO5BA,EAAWuC,EAAYf,OAASL,EAAanB,EAAWuC,EAAYf,OAAQqD,GAC5E7E,EAAWsC,EAASd,OAASL,EAAanB,EAAWsC,EAASd,OAAQnB,EAAewE,EAAenN,KAAKiH,IAAI8E,IAC7GQ,EAAOjE,WAAaA,EAEpB,IAAI4D,EAAcK,EAAOL,YAAc,CAAC5D,EAAW,GAAKS,EAAmBT,EAAW,GAAKS,GAE3FmD,EAAYtB,EAASd,SAAWS,EAAIjI,cAAgB,EAAI,GAAK0J,CAC/D,CAEA,SAASC,EAAiBpJ,EAAWqJ,EAAaT,EAAUlB,EAAKgC,GAI/D,IAAIF,EAAiBxJ,EAAUnG,IAAI+E,IAA2B,EAE1D4K,IACFrC,EAAiBpD,KAAK,CACpB3G,MAAOiM,EAAY1P,QACnBiP,SAAUA,IAEZzB,EAAiBzJ,kBACjB8L,GAAkBrC,EAAiBoD,eACnCf,GAAkBH,EAAY3B,EAAIK,SAASd,QAG7CyC,EAAOF,eAAiBA,CAC1B,CAEA,SAASD,EAAkBvJ,EAAWyF,EAAYvF,EAAQ4F,EAAcE,EAAYJ,EAAcD,EAAgB6D,EAAgBN,EAAgBO,EAAiB/B,EAAKgC,GACtK,IAAI1B,EAAcN,EAAIM,YAClBD,EAAWL,EAAIK,SACfoB,EAASO,EAAOP,OAChBqB,EAAarN,KAAKF,IAAIwI,EAAWsC,EAASd,OAASuC,EAAgB,GACnEiB,EAAUD,EAId,GAAI1E,EAAc,CAChB,IAAI4E,EAAoBvN,KAAKiH,IAAI8E,GAC7BrD,EAAepN,EAAOkS,SAAS3K,EAAUnG,IAAI,gBAAiB,OAAS,GACvE+Q,GAAY,EAEZ/E,EAAagF,YAAY,OAAShF,EAAaiF,OAAS,IAC1DF,GAAY,EACZ/E,EAAeA,EAAalM,MAAM,EAAGkM,EAAaiF,OAAS,IAG7DjF,EAAee,EAAaf,EAAcJ,EAAWsC,EAASd,QAC9D,IAAI8D,EAAiB5N,KAAKF,IAAIuN,EAA4B,EAAf3E,EAAkB,GAGzDmF,EAASJ,EAAY,EAAmB,EAAf/E,EAGzBoF,EAAkBpE,EAAUf,GAC5BoF,EAAcD,EAAkBnF,EAAeqF,GAAYT,EAAoBM,GAAUD,GAGzFK,EAAQV,EAAoBQ,EAAcV,EAC9C3E,EAAeuF,EAAQ,GAAKR,EAAYM,EAAcA,EAAc,GACpEH,EAAiBP,EAA4B,EAAf3E,EAC9BmF,EAASJ,EAAY,EAAmB,EAAf/E,EAEpBoF,GAAoC,UAAjBnF,IACtBoF,EAAczB,EAAkB0B,GAAYhO,KAAKiH,IAAIqF,GAAmBuB,GAAUD,GAAkB,GAGtGN,EAAUS,EAAcH,EAAiBC,EACzCtB,EAAOwB,YAAcA,EACrBxB,EAAO7D,aAAeA,CACxB,CAEA,IAAIwF,EAAUlC,GAAUsB,EAAU,GAC9Ba,EAAe5B,EAAO4B,aAAe,GACzCA,EAAatD,EAAYf,OAAS/G,EAAO8H,EAAYhB,IAAM,EAC3DsE,EAAavD,EAASd,OAA4B,UAAnBtB,EAA6B0F,EAA6B,QAAnB1F,EAA2BuD,EAAiBmC,EAAUnC,EAAiB,EAEzItD,IACF0F,EAAa,IAAM1F,EAAa,GAChC0F,EAAa,IAAM1F,EAAa,IAGlC,IAAI2F,EAAiB7B,EAAO6B,eAAiB,GAC7CA,EAAevD,EAAYf,OAAS/G,EAAO8H,EAAYjB,IACvDwE,EAAexD,EAASd,OAAS/G,EAAO6H,EAAShB,IACjD,IAAIyE,EAAe9B,EAAO8B,aAAe/S,EAAOyF,OAAO,CAAC,EAAGgC,GAC3DsL,EAAazD,EAASf,IAAMmC,EAAShM,KAAKF,IAAIE,KAAKiH,IAAIlE,EAAO6H,EAASf,KAAM7J,KAAKiH,IAAIkH,EAAavD,EAASd,OAASoE,IACrHG,EAAaxD,EAAYhB,IAAM9G,EAAO8H,EAAYhB,IAClD,IAAIyE,EAAY/B,EAAO+B,UAAY,CAAC,EAEpCA,EAAUzD,EAAYjB,KAAO7G,EAAO8H,EAAYjB,IAChD0E,EAAUzD,EAAYhB,IAAMU,EAAIC,OAAOK,EAAYhB,IACnDyE,EAAU1D,EAAShB,IAAM,EACzB0E,EAAU1D,EAASf,IAAM9G,EAAO6H,EAASf,GAC3C,CAEA,SAAS0E,EAAWzD,GAClB,IAAI/B,EAAoB+B,EAAW/B,kBAC/ByF,EAAOjF,EACXuB,EAAWa,YAAa5C,EAAoB,GAAIA,EAAoB,EAAGA,EAAmBA,EAAmB+B,EAAW/E,OAOxH,OANAyI,EAAK5H,KAAK,CACR6H,SAAS,IAEG,UAAdD,EAAKtS,MAAoBsS,EAAKE,SAAS,CACrCC,eAAe,IAEVH,CACT,CAEA,SAASI,EAA4B5D,EAAKT,EAAKO,EAAY7G,GACzD,IAAI4K,EAAS7D,EAAI8D,kBACbxG,EAAawC,EAAWxC,WACxB+D,EAAiBvB,EAAWuB,eAC5B8B,EAAerD,EAAWqD,aAC1BvD,EAAWL,EAAIK,SACfmD,EAAcjD,EAAWiD,aAAe,EACxCjE,EAAQ,EACRiF,EAAOzG,EAAWiC,EAAIK,SAASd,OAASuC,EAA2C,EAA1BvB,EAAWpC,aAmBxE,IAlBAsG,EAAShE,GAAK,SAAUwD,GACtBA,EAAKS,0BAA4BnF,EACjC0E,EAAKU,uBAAyBnB,EAE1BjE,EAAQiE,EACVoB,EAAWX,EAAM,KAAMY,EAAWtF,GAAQgB,EAAY7G,GAEtDkL,EAAWX,EAAM,KAAM,CACrBvO,MAAO,CAAC,EAAG,IACV6K,EAAY7G,GAAU,WACvB4K,EAAOnL,OAAO8K,EAChB,IAGFa,EAAqBb,EAAM1D,GAC3BhB,GACF,IAEOA,EAAQiE,EAAajE,IAAS,CACnC,IAAI0E,EAAOD,EAAWzD,GACtB0D,EAAKS,0BAA4BnF,EACjC0E,EAAKU,uBAAyBnB,EAC9Bc,EAAOlM,IAAI6L,GACX,IAAIc,EAASF,EAAWtF,GACxBqF,EAAWX,EAAM,CACftO,SAAUoP,EAAOpP,SACjBD,MAAO,CAAC,EAAG,IACV,CACDA,MAAOqP,EAAOrP,MACdwL,SAAU6D,EAAO7D,UAChBX,EAAY7G,GAGfuK,EAAK1U,GAAG,YAAayV,GAAazV,GAAG,WAAY0V,GACjDH,EAAqBb,EAAM1D,EAC7B,CAEA,SAASsE,EAAWtF,GAClB,IAAI5J,EAAWiO,EAAa3R,QAGxBwP,EAASlB,EAAWkB,OACpByD,EAAI3F,EAOR,OALyC,UAArCgB,EAAWlC,sBAAoCoD,EAAS,EAAIA,EAAS,KACvEyD,EAAI1B,EAAc,EAAIjE,GAGxB5J,EAAS0K,EAASd,OAASiF,GAAQU,EAAI1B,EAAc,EAAI,IAAOI,EAAavD,EAASd,OAC/E,CACL5J,SAAUA,EACVD,MAAO6K,EAAWoB,YAAY1P,QAC9BiP,SAAUX,EAAWW,SAEzB,CAEA,SAAS8D,IACPP,EAAShE,GAAK,SAAUwD,GACtBA,EAAKkB,QAAQ,WACf,GACF,CAEA,SAASF,IACPR,EAAShE,GAAK,SAAUwD,GACtBA,EAAKkB,QAAQ,SACf,GACF,CACF,CAEA,SAASC,EAA2B3E,EAAKT,EAAKO,EAAY7G,GACxD,IAAI4K,EAAS7D,EAAI8D,kBACbc,EAAW5E,EAAI6E,oBAuBnB,SAASN,IACP/V,KAAKkW,QAAQ,WACf,CAEA,SAASF,IACPhW,KAAKkW,QAAQ,SACf,CA3BKE,EAYHT,EAAWS,EAAU,KAAM,CACzB1P,SAAU4K,EAAWqD,aAAa3R,QAClCyD,MAAO6K,EAAWoB,YAAY1P,QAC9BiP,SAAUX,EAAWW,UACpBX,EAAY7G,IAff2L,EAAW5E,EAAI6E,oBAAsBtB,EAAWzD,GAChD+D,EAAOlM,IAAIiN,GACXT,EAAWS,EAAU,CACnB1P,SAAU4K,EAAWqD,aAAa3R,QAClCyD,MAAO,CAAC,EAAG,GACXwL,SAAUX,EAAWW,UACpB,CACDxL,MAAO6K,EAAWoB,YAAY1P,SAC7BsO,EAAY7G,GACf2L,EAAS9V,GAAG,YAAayV,GAAazV,GAAG,WAAY0V,IASvDH,EAAqBO,EAAU9E,EASjC,CAGA,SAASgF,EAAsB9E,EAAKF,EAAY7G,GAC9C,IAAIG,EAAY9I,EAAOyF,OAAO,CAAC,EAAG+J,EAAWuD,cACzC0B,EAAU/E,EAAIgF,mBAEbD,EAaHZ,EAAWY,EAAS,KAAM,CACxBtM,MAAOW,GACN0G,EAAY7G,IAdf8L,EAAU/E,EAAIgF,mBAAqB,IAAI5O,EAAQ+C,KAAK,CAClDyH,GAAI,EACJnI,MAAOW,EACP6L,QAAQ,EACRpL,MAAO,CACLqL,OAAQ,cACRzJ,KAAM,cACNO,UAAW,KAGfgE,EAAIrI,IAAIoN,GAMZ,CAEA,SAASI,EAAmBnF,EAAKT,EAAKO,EAAY7G,GAEhD,GAAI6G,EAAWjC,WAAY,CACzB,IAAIuH,EAAWpF,EAAIqF,oBACf/B,EAAYhT,EAAOyF,OAAO,CAAC,EAAG+J,EAAWwD,WACzC1D,EAAWL,EAAIK,SACfpI,EAAiBsI,EAAWtI,eAC5BzE,EAAY+M,EAAW/M,UAE3B,GAAIqS,EACFhP,EAAQoC,YAAY4M,EAAU,CAC5B3M,MAAO6K,GACN9L,EAAgBzE,OACd,CACLuQ,EAAU1D,EAASf,IAAM,EACzBuG,EAAW,IAAIhP,EAAQ+C,KAAK,CAC1BV,MAAO6K,IAGTtD,EAAI8D,kBAAkBwB,YAAYF,GAElCpF,EAAIqF,oBAAsBD,EAC1B,IAAId,EAAS,CAAC,EACdA,EAAO1E,EAASf,IAAMiB,EAAWwD,UAAU1D,EAASf,IACpDzI,EAAQ6C,EAAW,cAAgB,aAAamM,EAAU,CACxD3M,MAAO6L,GACN9M,EAAgBzE,EACrB,CACF,CACF,CAEA,SAAS+E,EAAa1I,EAAM2D,GAC1B,IAAI8E,EAAYzI,EAAK0I,aAAa/E,GAGlC,OAFA8E,EAAU0N,wBAA0BA,EACpC1N,EAAUJ,mBAAqBA,EACxBI,CACT,CAEA,SAAS0N,EAAwB/B,GAE/B,MAAO,CACL1E,MAAO0E,EAAKS,0BACZuB,MAAOhC,EAAKU,uBAEhB,CAEA,SAASzM,IAEP,OAAOjJ,KAAKiX,YAAYhO,wBAA0BjJ,KAAKmN,WAAW,YACpE,CAEA,SAAS0I,EAAqBb,EAAM1D,GAClC0D,EAAKkC,IAAI,YAAYA,IAAI,UACzB,IAAIzQ,EAAQ6K,EAAWoB,YAAY1P,QACnCsO,EAAW5B,gBAAkBsF,EAAK1U,GAAG,YAAY,WAC/CN,KAAKmX,UAAU,CACb1Q,MAAO,CAAY,IAAXA,EAAM,GAAqB,IAAXA,EAAM,KAC7B,IAAK,aACV,IAAGnG,GAAG,UAAU,WACdN,KAAKmX,UAAU,CACb1Q,MAAOA,EAAMzD,SACZ,IAAK,aACV,GACF,CAEA,SAASyO,EAAU7Q,EAAMmQ,EAAKO,EAAY7G,GAExC,IAAI+G,EAAM,IAAI5J,EAAQwP,MAElB/B,EAAS,IAAIzN,EAAQwP,MAezB,OAdA5F,EAAIrI,IAAIkM,GACR7D,EAAI8D,kBAAoBD,EACxBA,EAAOjI,KAAK,WAAYkE,EAAWsD,eAAe5R,SAE9CsO,EAAWnC,aACbiG,EAA4B5D,EAAKT,EAAKO,GAEtC6E,EAA2B3E,EAAKT,EAAKO,GAGvCgF,EAAsB9E,EAAKF,EAAY7G,GACvCkM,EAAmBnF,EAAKT,EAAKO,EAAY7G,GACzC+G,EAAIK,oBAAsBD,EAAYhR,EAAM0Q,GAC5CE,EAAIO,sBAAwBT,EACrBE,CACT,CAEA,SAASM,EAAUN,EAAKT,EAAKO,GAC3B,IAAItI,EAAiBsI,EAAWtI,eAC5BzE,EAAY+M,EAAW/M,UACvB8Q,EAAS7D,EAAI8D,kBACjB1N,EAAQoC,YAAYqL,EAAQ,CAC1B3O,SAAU4K,EAAWsD,eAAe5R,SACnCgG,EAAgBzE,GAEf+M,EAAWnC,aACbiG,EAA4B5D,EAAKT,EAAKO,GAAY,GAElD6E,EAA2B3E,EAAKT,EAAKO,GAAY,GAGnDgF,EAAsB9E,EAAKF,GAAY,GACvCqF,EAAmBnF,EAAKT,EAAKO,GAAY,EAC3C,CAEA,SAASU,EAAUpR,EAAM2D,EAAWyE,EAAgBwI,GAElD,IAAI6F,EAAY7F,EAAIgF,mBACpBa,IAAcA,EAAUhM,MAAMC,KAAO,MACrC,IAAIgM,EAAS,GACb9B,EAAShE,GAAK,SAAUwD,GACtBsC,EAAOtW,KAAKgU,EACd,IACAxD,EAAI6E,qBAAuBiB,EAAOtW,KAAKwQ,EAAI6E,qBAE3C7E,EAAIqF,sBAAwB7N,EAAiB,MAC7ClH,EAAOU,KAAK8U,GAAQ,SAAUtC,GAC5BpN,EAAQoC,YAAYgL,EAAM,CACxBvO,MAAO,CAAC,EAAG,IACVuC,EAAgBzE,GAAW,WAC5BiN,EAAIhG,QAAUgG,EAAIhG,OAAOtB,OAAOsH,EAClC,GACF,IACA5Q,EAAK+I,iBAAiBpF,EAAW,KACnC,CAEA,SAASqN,EAAYhR,EAAM0Q,GACzB,MAAO,CAAC1Q,EAAK4L,cAAc8E,EAAW/M,UAAW,WAAa,SAAU+M,EAAWnC,eAAgBmC,EAAWjC,YAAYkI,KAAK,IACjI,CAEA,SAAS/B,EAAShE,EAAKgG,EAAIC,GAEzB3V,EAAOU,KAAKgP,EAAI8D,kBAAkBoC,YAAY,SAAUjO,GACtDA,IAAO+H,EAAIgF,oBAAsBgB,EAAGG,KAAKF,EAAShO,EACpD,GACF,CAEA,SAASkM,EAAWlM,EAAImO,EAAgBC,EAAgBvG,EAAY7G,EAAU+M,GAC5EI,GAAkBnO,EAAG2D,KAAKwK,GAEtBtG,EAAWjC,aAAe5E,EAC5BoN,GAAkBpO,EAAG2D,KAAKyK,GAE1BA,GAAkBjQ,EAAQ6C,EAAW,cAAgB,aAAahB,EAAIoO,EAAgBvG,EAAWtI,eAAgBsI,EAAW/M,UAAWiT,EAE3I,CAEA,SAAS9F,EAAaF,EAAKT,EAAKO,GAC9B,IAAI/E,EAAQ+E,EAAW/E,MACnBhI,EAAY+M,EAAW/M,UACvB8E,EAAYiI,EAAWjI,UAGvByO,EAAczO,EAAUsD,SAAS,oBAAoBoL,aAAa,CAAC,UACnEnL,EAAavD,EAAUsD,SAAS,sBAAsBoL,eACtD7K,EAAc7D,EAAU8D,WAAW,UACvCqI,EAAShE,GAAK,SAAUwD,GAEtBA,EAAKgD,SAASzL,GACdyI,EAAKE,SAASpT,EAAOkL,SAAS,CAC5BC,KAAMV,EACNE,QAAS6E,EAAW7E,SACnBqL,IACHlQ,EAAQ0F,cAAc0H,EAAMpI,GAC5BM,IAAgB8H,EAAKiD,OAAS/K,GAC9B8H,EAAK5C,GAAKd,EAAWc,EACvB,IACA,IAAI8F,EAAoB,CAAC,EACrBC,EAAqBpH,EAAIK,SAASb,UAAUe,EAAWiB,eAAiB,IACxEgE,EAAU/E,EAAIgF,mBAClB1O,EAASyO,EAAQlL,MAAO6M,EAAmB7O,EAAWkD,EAAOwE,EAAI1M,YAAaE,EAAW4T,GACzFvQ,EAAQ0F,cAAciJ,EAAS2B,EACjC,CAEA,SAAS1D,EAAW4D,GAClB,IAAIC,EAAe7R,KAAK8R,MAAMF,GAE9B,OAAO5R,KAAKiH,IAAI2K,EAAQC,GAAgB,KAAOA,EAAe7R,KAAK+R,KAAKH,EAC1E,CAEA,IAAIjV,EAAWuN,EACftN,EAAOvB,QAAUsB,C,wBC7nBjB,IAAIqV,EAAkB/W,EAAQ,OAE1BoL,EAAkB2L,EAAgB,CAAC,CAAC,OAAQ,SAAU,CAAC,SAAU,eAAgB,CAAC,YAAa,eACnG,CAAC,SAAU,kBAAmB,CAAC,YAAa,kBAAmB,CAAC,WAAY,CAAC,cAAe,CAAC,iBAAkB,CAAC,iBAAkB,CAAC,iBAC/HrV,EAAW,CACb0J,gBAAiB,SAAU4L,GACzB,IAAIpN,EAAQwB,EAAgB7M,KAAMyY,GAElC,GAAIzY,KAAK0Y,kBAAmB,CAC1B,IAAIC,EAAW3Y,KAAK0Y,oBACpBC,IAAatN,EAAMsN,SAAWA,EAChC,CAEA,OAAOtN,CACT,GAEFjI,EAAOvB,QAAUsB,C,wBChBjB,IAAIyE,EAAUnG,EAAQ,OAEtB,SAASqG,EAASgQ,EAAalL,EAAYvD,EAAWkD,EAAOlI,EAAaE,EAAW8I,GACnF,IAAIuL,EAAavP,EAAUsD,SAAS,gBAChCkM,EAAkBxP,EAAUsD,SAAS,kBACzC/E,EAAQkR,cAAchB,EAAalL,EAAYgM,EAAYC,EAAiB,CAC1EE,aAAc1U,EACd2U,eAAgBzU,EAChB0U,YAAa5U,EAAY6U,YAAY3U,GACrC4U,YAAY,EACZC,UAAW7M,IAEb8M,EAAYvB,GACZuB,EAAYzM,EACd,CAEA,SAASyM,EAAYhO,EAAOgC,GACC,YAAvBhC,EAAMiO,eACRjO,EAAMiO,aAAejM,EAEzB,CAEAxL,EAAQiG,SAAWA,C,wBCtBnB,IAAIpE,EAAUjC,EAAQ,OAEtBA,EAAQ,OAERA,EAAQ,OAER,IAAI8X,EAAgB9X,EAAQ,OAExB+X,EAAgB/X,EAAQ,OAE5BiC,EAAQyD,eAAeoS,GACvB7V,EAAQuD,eAAeuS,E,wBCXvB,IAAI1X,EAASL,EAAQ,OAEjBiM,EAAcjM,EAAQ,OAEtBgY,EAAoBhY,EAAQ,OAE5BiY,EAAmBD,EAAkBC,iBACrCC,EAAgBjM,EAAYnG,OAAO,CACrC7E,KAAM,iBACN8E,aAAc,CAAC,QAAS,QAAS,QAUjCoS,uBAAwB,CAAC,MAAO,KAAM,SAAU,KAAM,OAMtDC,WAAY,KAKZxL,cAAe,CACbC,OAAQ,EAERC,EAAG,EAEHrJ,iBAAkB,cAClBsJ,iBAAiB,EACjBkB,gBAAgB,EAGhBnG,OAAQ,KAERuQ,SAAU,CAAC,EAAG,IAEdnL,UAAW,CACToL,OAAQ,CACNxN,MAAO,OACPyN,YAAa,GAEfC,SAAU,CACRD,YAAa,EACbE,WAAY,EACZC,cAAe,EACfC,cAAe,EACfC,YAAa,oBAGjBC,gBAAiB,aACjBC,kBAAmB,OAGvBzY,EAAO0Y,MAAMb,EAAeD,GAAkB,GAC9C,IAAIvW,EAAWwW,EACfvW,EAAOvB,QAAUsB,C,wBC/DjB,IAAIrB,EAASL,EAAQ,OAEjBgZ,EAAYhZ,EAAQ,OAEpBmG,EAAUnG,EAAQ,OAElBgY,EAAoBhY,EAAQ,OAE5BiZ,EAAYjB,EAAkBiB,UAC9BC,EAAcF,EAAUlT,OAAO,CACjC7E,KAAM,UACNkY,gBAAiB,WACf,OAAOhR,CACT,EACAtB,QAASxG,EAAOyG,OAElBzG,EAAO0Y,MAAMG,EAAaD,GAAW,GAErC,IAAIG,EAAwB,CAAC,YAAa,UACtCC,EAA0B,CAAC,YAAa,YAE5C,SAASlR,EAAYmR,EAAWna,EAAM6D,GACpC,IAAI4E,EAAYzI,EAAK0I,aAAa7E,GAC9BuW,EAAuB3R,EAAUsD,SAASkO,GAC1CI,EAAcra,EAAK4L,cAAc/H,EAAK,SAEtCkK,EAAYqM,EAAqBjD,aAAa,CAAC,gBAC/CmD,EAAYH,EAAUI,QAAQJ,EAAUK,cAC5CF,EAAU7P,MAAMgQ,IAAI1M,GACpBuM,EAAU7P,MAAMqL,OAASuE,EACzBC,EAAUI,QACV,IAAIC,EAASR,EAAUI,QAAQJ,EAAUS,WACzCD,EAAOlQ,MAAMgQ,IAAI1M,GACjB4M,EAAOlQ,MAAMqL,OAASuE,EACtBM,EAAOD,QACP,IAAI1O,EAAavD,EAAUsD,SAASmO,GAAyB/C,eAC7DnQ,EAAQ0F,cAAcyN,EAAWnO,EACnC,CAEA,IAAIzJ,EAAWwX,EACfvX,EAAOvB,QAAUsB,C,iCCxCjB,IAAIrB,EAASL,EAAQ,OAEjBuO,EAAUvO,EAAQ,OAElBwO,EAAeD,EAAQC,aACvBzN,EAAOV,EAAOU,KAElB,SAASW,EAASd,GAChB,IAAIoZ,EAAcC,EAAkBrZ,GACpCG,EAAKiZ,GAAa,SAAUE,GAC1B,IAAIC,EAAeD,EAAUC,aAExBA,EAAazH,SAIlB0H,EAAcF,GACdnZ,EAAKoZ,GAAc,SAAUvX,EAAaI,GACxCqX,EAAmBzX,EAAasX,EAAUI,cAActX,GAAMkX,EAAUK,aAAavX,GACvF,IACF,GACF,CAMA,SAASiX,EAAkBrZ,GACzB,IAAI4Z,EAAS,GACTC,EAAW,GAgBf,OAfA7Z,EAAQ+E,iBAAiB,WAAW,SAAU/C,GAC5C,IAAIuE,EAAWvE,EAAYwE,cACvBpE,EAAM3C,EAAOqa,QAAQD,EAAUtT,GAE/BnE,EAAM,IACRA,EAAMyX,EAAS/H,OACf+H,EAASzX,GAAOmE,EAChBqT,EAAOxX,GAAO,CACZgP,KAAM7K,EACNgT,aAAc,KAIlBK,EAAOxX,GAAKmX,aAAa5a,KAAKqD,EAChC,IACO4X,CACT,CAMA,SAASJ,EAAcF,GACrB,IAAIS,EAOAC,EANAzT,EAAW+S,EAAUlI,KACrBmI,EAAeD,EAAUC,aACzBU,EAAcV,EAAazH,OAC3B6H,EAAeL,EAAUK,aAAe,GACxCD,EAAgBJ,EAAUI,cAAgB,GAC1CQ,EAAY,GAGhB,GAAsB,aAAlB3T,EAASlG,KACX2Z,EAAYzT,EAAS4T,mBAChB,CACL,IAAIC,EAAe,EACnBja,EAAKoZ,GAAc,SAAUvX,GAC3BoY,EAAejW,KAAKF,IAAImW,EAAcpY,EAAYG,UAAUwS,QAC9D,IACAoF,EAASxT,EAAS8T,YAAalW,KAAKiH,IAAI2O,EAAO,GAAKA,EAAO,GAC7D,CAEA5Z,EAAKoZ,GAAc,SAAUvX,GAC3B,IAAIsY,EAAgBtY,EAAYnB,IAAI,YAE/BpB,EAAO6Q,QAAQgK,KAClBA,EAAgB,CAACA,EAAeA,IAGlCJ,EAAUvb,KAAK,CAACiP,EAAa0M,EAAc,GAAIN,IAAc,EAAGpM,EAAa0M,EAAc,GAAIN,IAAc,GAC/G,IACA,IAAIO,EAA6B,GAAZP,EAAkB,EACnCQ,EAASD,EAAiBN,EAAc,GACxCxC,GAAY8C,EAAiBC,GAAUP,EAAc,IAAMA,EAC3DQ,EAAOhD,EAAW,EAAI8C,EAAiB,EAC3Cpa,EAAKoZ,GAAc,SAAUvX,EAAaI,GACxCsX,EAAc/a,KAAK8b,GACnBA,GAAQD,EAAS/C,EACjBkC,EAAahb,KAAKwF,KAAKJ,IAAII,KAAKF,IAAIwT,EAAUyC,EAAU9X,GAAK,IAAK8X,EAAU9X,GAAK,IACnF,GACF,CAMA,SAASqX,EAAmBzX,EAAa4J,EAAQ6L,GAC/C,IAQIiD,EARAja,EAAWuB,EAAYa,iBACvBtE,EAAOyD,EAAYG,UACnBwY,EAAYlD,EAAW,EACvBmD,EAAc5Y,EAAYnB,IAAI,UAC9Bga,EAA8B,eAAhBD,EAA+B,EAAI,EACjDE,EAAW,EAAID,EACfE,EAAY,CAAC,IAAK,KAClBC,EAAQ,GAEZvb,EAAOU,KAAK5B,EAAKiZ,YAAY,SAAUyD,GACrC,IAAIC,EAAU3c,EAAK4c,iBAAiBF,GAChCG,EAAWF,EAAQE,SAEnBA,IAAaL,EAAUD,GACzBE,EAAMrc,KAAKsc,GACFG,IAAaL,EAAUF,KAChCH,EAAOO,EAEX,IAEY,MAARP,GAAgBM,EAAMlJ,OAAS,GAInCvT,EAAK4B,KAAK,CAACua,GAAMna,OAAOya,IAAQ,WAC9B,IAAIK,EAAO7N,UACP8N,EAAaD,EAAK,GAClBjZ,EAAMiZ,EAAKL,EAAMlJ,OAAS,GAC1ByJ,EAASC,EAASH,EAAK,IACvBI,EAAOD,EAASH,EAAK,IACrBK,EAAOF,EAASH,EAAK,IACrBM,EAAc,CAAC,CAACF,EAAMD,EAASH,EAAK,KAAM,CAACK,EAAMF,EAASH,EAAK,MACnEO,EAAWH,GACXG,EAAWF,GACXE,EAAWL,GACX,IAAIM,EAAW,GAWf,SAASL,EAASM,GAChB,IAGIrY,EAHAsY,EAAI,GAYR,OAXAA,EAAElB,GAAeS,EACjBS,EAAEjB,GAAYgB,EAGVE,MAAMV,IAAeU,MAAMF,GAC7BrY,EAAQ,CAACsI,IAAKA,MAEdtI,EAAQhD,EAASiD,YAAYqY,GAC7BtY,EAAMoX,IAAgBjP,GAGjBnI,CACT,CAEA,SAASwY,EAAWxY,EAAOyY,GACzB,IAAIC,EAAS1Y,EAAM9C,QACfyb,EAAS3Y,EAAM9C,QACnBwb,EAAOtB,IAAgBF,EACvByB,EAAOvB,IAAgBF,EACvBuB,EAAQL,EAASld,KAAKwd,EAAQC,GAAUP,EAASld,KAAKyd,EAAQD,EAChE,CAEA,SAASP,EAAWS,GAClB,IAAIC,EAAO,CAACD,EAAU1b,QAAS0b,EAAU1b,SACzC2b,EAAK,GAAGzB,IAAgBF,EACxB2B,EAAK,GAAGzB,IAAgBF,EACxBgB,EAAYhd,KAAK2d,EACnB,CAvCAL,EAAWN,EAAY,GAAG,GAAI,GAC9BM,EAAWN,EAAY,GAAG,GAAI,GAC9Bpd,EAAKge,cAAcna,EAAK,CACtBwY,YAAaA,EACb4B,aAAcjB,EAAOT,GACrBS,OAAQA,EACRM,SAAUA,EACVF,YAAaA,GAiCjB,GACF,CAEA5a,EAAOvB,QAAUsB,C,oBChLjB,IAAI2b,EAAmB,CAAC,YAAa,SAAU,eAE/C,SAAS3b,EAASd,EAASC,GACzB,IAAIyc,EAAe1c,EAAQa,IAAI,SAC/Bb,EAAQ2c,oBAAoB,WAAW,SAAU3a,GAC/C,IAAI4a,EAAcF,EAAa1a,EAAY6a,YAAcH,EAAa5K,QAClEvT,EAAOyD,EAAYG,UACvB5D,EAAKyG,UAAU,CACb8X,aAAc,YAGd5S,MAAOlI,EAAYnB,IAAI4b,IAAqBG,IAGzC5c,EAAQ+c,iBAAiB/a,IAC5BzD,EAAK4B,MAAK,SAAUiC,GAClB,IAAI4E,EAAYzI,EAAK0I,aAAa7E,GAClC7D,EAAKye,cAAc5a,EAAK,CACtB8H,MAAOlD,EAAUnG,IAAI4b,GAAkB,IAE3C,GAEJ,GACF,CAEA1b,EAAOvB,QAAUsB,C,wBCzBjB,IAAIO,EAAUjC,EAAQ,OAEtBA,EAAQ,OAERA,EAAQ,OAER,IAAI6d,EAAe7d,EAAQ,OAEvB8d,EAAoB9d,EAAQ,OAE5B+d,EAAoB/d,EAAQ,OAEhCiC,EAAQ+b,qBAAqBH,GAC7B5b,EAAQyD,eAAeoY,GACvB7b,EAAQuD,eAAeuY,E,wBCdvB,IAAI1d,EAASL,EAAQ,OAEjBiM,EAAcjM,EAAQ,OAEtBgY,EAAoBhY,EAAQ,OAE5BiY,EAAmBD,EAAkBC,iBACrCgG,EAAoBhS,EAAYnG,OAAO,CACzC7E,KAAM,qBACN8E,aAAc,CAAC,QAAS,QAAS,QAKjCoS,uBAAwB,CAAC,OAAQ,QAAS,SAAU,WAMpDC,WAAY,KAKZxL,cAAe,CACbC,OAAQ,EAERC,EAAG,EAEHrJ,iBAAkB,cAClBsJ,iBAAiB,EACjBkB,gBAAgB,EAGhBnG,OAAQ,KAERoF,UAAW,CACToL,OAAQ,CACNxN,MAAO,UAEPoT,OAAQ,UAER3F,YAAa,EAGbiB,YAAa,UACb2E,aAAc,WAEhB3F,SAAU,CACRD,YAAa,IAGjB6F,YAAa,KACbC,YAAa,KACbC,SAAU,KACVC,iBAAiB,EACjB1F,gBAAiB,SACjBC,kBAAmB,KAOrB0F,aAAc,WACZ,MAAO,MACT,EACAxY,cAAe,SAAUlD,EAAW3D,EAAMsf,GACxC,IAAIC,EAAavf,EAAK+K,cAAcpH,GACpC,OAAO2b,EAAUxV,KAAKyV,EAAWC,UACnC,IAEFte,EAAO0Y,MAAMkF,EAAmBhG,GAAkB,GAClD,IAAIvW,EAAWuc,EACftc,EAAOvB,QAAUsB,C,wBC3EjB,IAAIrB,EAASL,EAAQ,OAEjBgZ,EAAYhZ,EAAQ,OAEpBmG,EAAUnG,EAAQ,OAElBgY,EAAoBhY,EAAQ,OAE5BiZ,EAAYjB,EAAkBiB,UAC9B2F,EAAkB5F,EAAUlT,OAAO,CACrC7E,KAAM,cACNkY,gBAAiB,WACf,OAAOhR,CACT,EACAtB,QAASxG,EAAOyG,OAElBzG,EAAO0Y,MAAM6F,EAAiB3F,GAAW,GAEzC,IAAIG,EAAwB,CAAC,YAAa,UACtCC,EAA0B,CAAC,YAAa,YAE5C,SAASlR,EAAYmR,EAAWna,EAAM6D,GACpC,IAAI4E,EAAYzI,EAAK0I,aAAa7E,GAC9BuW,EAAuB3R,EAAUsD,SAASkO,GAC1CtO,EAAQ3L,EAAK4L,cAAc/H,EAAK,SAChCwW,EAAcra,EAAK4L,cAAc/H,EAAK,gBAAkB8H,EAGxDoC,EAAYqM,EAAqBjD,aAAa,CAAC,QAAS,SAAU,cAAe,iBACjFmD,EAAYH,EAAUI,QAAQJ,EAAUK,cAC5CF,EAAUnO,SAAS4B,GACnBuM,EAAU7P,MAAMqL,OAASuE,EACzB,IAAIM,EAASR,EAAUI,QAAQJ,EAAUS,WACzCD,EAAOxO,SAAS4B,GAChB4M,EAAOlQ,MAAM4B,KAAOV,EACpBgP,EAAOlQ,MAAMqL,OAASuE,EACtB,IAAIrO,EAAavD,EAAUsD,SAASmO,GAAyB/C,eAC7DnQ,EAAQ0F,cAAcyN,EAAWnO,EACnC,CAEA,IAAIzJ,EAAWkd,EACfjd,EAAOvB,QAAUsB,C,iCCzCjB,IAAIrB,EAASL,EAAQ,OAEjBuO,EAAUvO,EAAQ,OAElBwO,EAAeD,EAAQC,aAEvBqQ,EAAW7e,EAAQ,OAEnB8e,EAAmBD,EAASC,iBAC5BC,EAAY1e,EAAO0e,UAEvB,SAASrd,EAASd,GAChBA,EAAQ+E,iBAAiB,eAAe,SAAU/C,GAChD,IAQI0Y,EARAja,EAAWuB,EAAYa,iBACvBtE,EAAOyD,EAAYG,UACnBic,EAAcC,EAAqBrc,EAAazD,GAChDqc,EAAc5Y,EAAYnB,IAAI,UAC9Bga,EAA8B,eAAhBD,EAA+B,EAAI,EACjDE,EAAW,EAAID,EACfE,EAAY,CAAC,IAAK,KAClBC,EAAQ,GAaZ,GAXAvb,EAAOU,KAAK5B,EAAKiZ,YAAY,SAAUyD,GACrC,IAAIC,EAAU3c,EAAK4c,iBAAiBF,GAChCG,EAAWF,EAAQE,SAEnBA,IAAaL,EAAUD,GACzBE,EAAMrc,KAAKsc,GACFG,IAAaL,EAAUF,KAChCH,EAAOO,EAEX,MAEY,MAARP,GAAgBM,EAAMlJ,OAAS,GAAnC,CAIA,IAAI5P,EAAY,EAChB3D,EAAK4B,KAAK,CAACua,GAAMna,OAAOya,IAAQ,WAC9B,IAiBIsD,EAjBAjD,EAAO7N,UACP8N,EAAaD,EAAK,GAClBjZ,EAAMiZ,EAAKL,EAAMlJ,OAAS,GAC1ByM,EAAUlD,EAAK,GACfmD,EAAWnD,EAAK,GAChBoD,EAAYpD,EAAK,GACjBqD,EAAarD,EAAK,GAClBsD,EAAQxa,KAAKJ,IAAIwa,EAASC,GAC1BI,EAASza,KAAKF,IAAIsa,EAASC,GAC3BK,EAAarD,EAASmD,GACtBG,EAActD,EAASoD,GACvBG,EAAcvD,EAASiD,GACvBO,EAAexD,EAASkD,GACxB/C,EAAc,CAAC,CAACsD,EAAsBD,GAAeC,EAAsBH,IAAe,CAACG,EAAsBF,GAAcE,EAAsBJ,KACrJhD,EAAW,GA8Bf,SAASL,EAASM,GAChB,IAAIC,EAAI,GAGR,OAFAA,EAAElB,GAAeS,EACjBS,EAAEjB,GAAYgB,EACPE,MAAMV,IAAeU,MAAMF,GAAO,CAAC/P,IAAKA,KAAOtL,EAASiD,YAAYqY,EAC7E,CAEA,SAASE,EAAWxY,EAAOyY,GACzB,IAAIC,EAAS1Y,EAAM9C,QACfyb,EAAS3Y,EAAM9C,QACnBwb,EAAOtB,GAAeqD,EAAiB/B,EAAOtB,GAAeuD,EAAc,EAAG,GAAG,GACjFhC,EAAOvB,GAAeqD,EAAiB9B,EAAOvB,GAAeuD,EAAc,EAAG,GAAG,GACjFlC,EAAQL,EAASld,KAAKwd,EAAQC,GAAUP,EAASld,KAAKyd,EAAQD,EAChE,CAEA,SAAS+C,IACP,IAAIC,EAAO3D,EAASrX,KAAKJ,IAAIwa,EAASC,EAAUC,EAAWC,IACvDU,EAAO5D,EAASrX,KAAKF,IAAIsa,EAASC,EAAUC,EAAWC,IAG3D,OAFAS,EAAKtE,IAAgBuD,EAAc,EACnCgB,EAAKvE,IAAgBuD,EAAc,EAC5B,CACLxU,EAAGuV,EAAK,GACRtV,EAAGsV,EAAK,GACRjW,MAAO4R,EAAWsD,EAAcgB,EAAK,GAAKD,EAAK,GAC/CxV,OAAQmR,EAAWsE,EAAK,GAAKD,EAAK,GAAKf,EAE3C,CAEA,SAASa,EAAsBxb,GAE7B,OADAA,EAAMoX,GAAeqD,EAAiBza,EAAMoX,GAAc,GACnDpX,CACT,CA5DAwY,EAAW6C,EAAa,GACxB7C,EAAW4C,EAAY,GAIrBP,EADEC,EAAUC,GACJ,EACCD,EAAUC,EACZ,EAGHtc,EAAY,EACP3D,EAAK0I,aAAa/E,EAAY,GAAGrB,MAAM,IAAM2d,EAAW,GAAK,EAG7D,EAIXjgB,EAAKge,cAAcna,EAAK,CACtBwY,YAAaA,EACb0D,KAAMA,EACN9B,aAAc+B,EAAUC,EAAWM,EAAYhE,GAAY+D,EAAW/D,GAEtEe,SAAUA,EACVF,YAAaA,EACboC,UAAWmB,QAEXhd,CAkCJ,IAAG,EAhFH,CAiFF,GACF,CAEA,SAASmc,EAAqBrc,EAAazD,GACzC,IACIwb,EADAxT,EAAWvE,EAAYwE,cAEvBwT,EAA8B,aAAlBzT,EAASlG,KAAsBkG,EAAS4T,gBAAkBJ,EAASxT,EAAS8T,YAAalW,KAAKiH,IAAI2O,EAAO,GAAKA,EAAO,IAAMxb,EAAKoW,SAC5I6I,EAAc5P,EAAauQ,EAAUnc,EAAYnB,IAAI,eAAgBmZ,GAAYA,GACjFyD,EAAc7P,EAAauQ,EAAUnc,EAAYnB,IAAI,eAAgB,GAAImZ,GACzE0D,EAAW1b,EAAYnB,IAAI,YAC/B,OAAmB,MAAZ6c,EAAmB9P,EAAa8P,EAAU1D,GAC/C7V,KAAKF,IAAIE,KAAKJ,IAAIiW,EAAY,EAAGwD,GAAcC,EACnD,CAEA1c,EAAOvB,QAAUsB,C,oBClIjB,IAAIue,EAA2B,CAAC,YAAa,SAAU,eACnDC,EAA2B,CAAC,YAAa,SAAU,gBACnDC,EAAqB,CAAC,YAAa,SAAU,SAC7CC,EAAqB,CAAC,YAAa,SAAU,UAEjD,SAAS1e,EAASd,EAASC,GACzBD,EAAQ2c,oBAAoB,eAAe,SAAU3a,GACnD,IAAIzD,EAAOyD,EAAYG,UACvB5D,EAAKyG,UAAU,CACb8X,aAAc,cAGX9c,EAAQ+c,iBAAiB/a,IAC5BzD,EAAK4B,MAAK,SAAUiC,GAClB,IAAI4E,EAAYzI,EAAK0I,aAAa7E,GAC9Bkc,EAAO/f,EAAK+K,cAAclH,GAAKkc,KACnC/f,EAAKye,cAAc5a,EAAK,CACtB8H,MAAOlD,EAAUnG,IAAIyd,EAAO,EAAIiB,EAAqBC,GACrD5G,YAAa5R,EAAUnG,IAAIyd,EAAO,EAAIe,EAA2BC,IAErE,GAEJ,GACF,CAEAve,EAAOvB,QAAUsB,C,wBCzBjB,IAAIrB,EAASL,EAAQ,OAErB,SAAS0B,EAAS0K,GACXA,GAAW/L,EAAO6Q,QAAQ9E,EAAOiU,SAKtChgB,EAAOU,KAAKqL,EAAOiU,QAAQ,SAAUC,GAC/BjgB,EAAOkgB,SAASD,IAAmC,MAApBA,EAAWrf,OAC5Cqf,EAAWrf,KAAO,cAEtB,GACF,CAEAU,EAAOvB,QAAUsB,C,wBCfjB,IAAIuE,EAAUjG,EAAQ,OAIlBiC,GAFUgE,EAAQC,QAERlG,EAAQ,QAElBK,EAASL,EAAQ,OAEjBwgB,EAAcxgB,EAAQ,OAEtBygB,EAAezgB,EAAQ,OAEvB0gB,EAAoBD,EAAaC,kBAEjCxU,EAAsBlM,EAAQ,OAE9B2gB,EAAU3gB,EAAQ,OAElB4gB,EAAa5gB,EAAQ,OAErB6gB,EAAqB7gB,EAAQ,OAE7B8gB,EAAa9gB,EAAQ,OAErB+gB,EAAoB/gB,EAAQ,OAE5BghB,EAAehhB,EAAQ,OAEvBihB,EAAkBjhB,EAAQ,OAE1BkhB,EAAyB,CAAC,YAAa,UACvCC,EAA2B,CAAC,YAAa,YACzCC,EAAe,CAAC,QAAS,UACzBC,EAAiB,CAAC,QAAS,YAG3BC,EAAoB,QAapBC,EAAiB,CACnBxY,YAAa8X,EACbrd,IAAKsd,EACLU,WAAYT,EACZzX,MAAO0X,EACPS,SAAUR,GAkEZ,SAASS,EAASC,GAChB,IACI3Z,EADA4Z,EAAcD,EAAS1gB,KAG3B,GAAoB,SAAhB2gB,EAAwB,CAC1B,IAAIpZ,EAAQmZ,EAASnZ,MACrBR,EAAKwY,EAAYqB,SAASrZ,EAAMsZ,SAAU,KAAM,CAC9CtX,EAAGhC,EAAMgC,GAAK,EACdC,EAAGjC,EAAMiC,GAAK,EACdX,MAAOtB,EAAMsB,OAAS,EACtBS,OAAQ/B,EAAM+B,QAAU,GACvB,UACHvC,EAAG+Z,iBAAmBJ,EAASG,QACjC,MAAO,GAAoB,UAAhBF,EACT5Z,EAAK,IAAIwY,EAAYwB,MAAM,CAAC,GAC5Bha,EAAGia,kBAAoBN,EAAS/X,MAAMsY,WACjC,GAAoB,SAAhBN,EACT5Z,EAAK,IAAIwY,EAAY2B,KAAK,CAAC,GAC3Bna,EAAGoa,aAAeT,EAAS/X,MAAMC,SAC5B,CACL,IAAIwY,EAAM7B,EAAYoB,EAAYU,OAAO,GAAGC,cAAgBX,EAAYrgB,MAAM,IAC9EyG,EAAK,IAAIqa,CACX,CAIA,OAFAra,EAAGwa,oBAAsBZ,EACzB5Z,EAAGjG,KAAO4f,EAAS5f,KACZiG,CACT,CAEA,SAASya,EAASza,EAAIlF,EAAW6e,EAAUe,EAAiBvjB,EAAMwjB,GAChE,IAAIC,EAAc,CAAC,EACfC,EAAgBlB,EAAS/X,OAAS,CAAC,EAOvC,GANA+X,EAASnZ,QAAUoa,EAAYpa,MAAQnI,EAAOyiB,MAAMnB,EAASnZ,QAC7DmZ,EAAS1c,WAAa2d,EAAY3d,SAAW0c,EAAS1c,SAAS1D,SAC/DogB,EAAS3c,QAAU4d,EAAY5d,MAAQ2c,EAAS3c,MAAMzD,SACtDogB,EAASoB,SAAWH,EAAYG,OAASpB,EAASoB,OAAOxhB,SACzDogB,EAASnR,WAAaoS,EAAYpS,SAAWmR,EAASnR,UAEtC,UAAZxI,EAAG/G,MAAoB0gB,EAAS/X,MAAO,CACzC,IAAIoZ,EAAcJ,EAAYhZ,MAAQ,CAAC,EACvCvJ,EAAOU,KAAK,CAAC,IAAK,IAAK,QAAS,WAAW,SAAUkiB,GACnDC,EAAuBD,EAAMD,EAAaH,EAAe7a,EAAG4B,MAAO+Y,EACrE,GACF,CAEA,GAAgB,SAAZ3a,EAAG/G,MAAmB0gB,EAAS/X,MAAO,CACpCoZ,EAAcJ,EAAYhZ,MAAQ,CAAC,EACvCvJ,EAAOU,KAAK,CAAC,IAAK,MAAM,SAAUkiB,GAChCC,EAAuBD,EAAMD,EAAaH,EAAe7a,EAAG4B,MAAO+Y,EACrE,KAGCE,EAAc1iB,eAAe,aAAe0iB,EAAcrX,OAASqX,EAAcM,SAAWN,EAAcrX,OAC1GqX,EAAc1iB,eAAe,eAAiB0iB,EAAc5N,SAAW4N,EAAcO,WAAaP,EAAc5N,OACnH,CAEA,GAAgB,UAAZjN,EAAG/G,OACL+G,EAAGsD,SAASuX,GAERF,GAAQ,CACV3a,EAAG4B,MAAMoB,QAAU,EACnB,IAAIqY,EAAgBR,EAAc7X,QACjB,MAAjBqY,IAA0BA,EAAgB,GAC1C7C,EAAY8C,UAAUtb,EAAI,CACxB4B,MAAO,CACLoB,QAASqY,IAEVX,EAAiB5f,EACtB,CAGE6f,EACF3a,EAAG2D,KAAKiX,GAERpC,EAAYjY,YAAYP,EAAI4a,EAAaF,EAAiB5f,GAI5DkF,EAAG2D,KAAK,CACNgF,GAAIgR,EAAShR,IAAM,EACnBqE,OAAQ2M,EAAS3M,UAEQ,IAA3B2M,EAAS4B,eAA2B/C,EAAY3U,cAAc7D,EAAI2Z,EAAS4B,cAC7E,CAEA,SAASL,EAAuBD,EAAMD,EAAaH,EAAeW,EAAYb,GACjD,MAAvBE,EAAcI,IAAkBN,IAClCK,EAAYC,GAAQJ,EAAcI,GAClCJ,EAAcI,GAAQO,EAAWP,GAErC,CAEA,SAASQ,EAAeC,EAAcvkB,EAAMyB,EAASC,GACnD,IAAI8iB,EAAaD,EAAajiB,IAAI,cAC9BJ,EAAWqiB,EAAajgB,iBACxBmgB,EAAgB,CAAC,EAEjBviB,IACFuiB,EAAgBviB,EAASkgB,eAAiBlgB,EAASkgB,iBAAmBA,EAAelgB,EAASJ,MAAMI,IAGtG,IAuBIwiB,EAEAC,EACAC,EACAC,EACAC,EACAC,EA7BAC,EAAU9jB,EAAOkL,SAAS,CAC5BiE,SAAU3O,EAAI2O,SACdC,UAAW5O,EAAI4O,UACf2U,MAAOvjB,EAAIujB,MACXC,oBAAqBxjB,EAAIwjB,oBACzB/X,MAAOA,EACP1C,MAAOA,EACP2Z,cAAeA,EACfe,OAAQA,EACRC,UAAWA,EACXC,qBAAsBA,EACtBC,KAAMA,GACLb,EAAc/iB,KAAO,CAAC,GACrB6jB,EAAa,CACf1O,QAAS,CAAC,EACV2O,SAAUjB,EAAakB,GACvBC,WAAYnB,EAAa3hB,KACzB0b,YAAaiG,EAAajG,YAC1Bpc,SAAUuiB,EAAcviB,SACxByjB,iBAAkB3lB,EAAKoW,QACvBwP,OAAQC,EAActB,EAAa3gB,YAIjCkiB,GAAY,EAMhB,OAAO,SAAUC,GAGf,OAFArB,EAAsBqB,EACtBD,GAAY,EACLtB,GAAcA,EAAWtjB,EAAOkL,SAAS,CAC9C2Z,gBAAiBA,EACjBpiB,UAAW3D,EAAKgmB,YAAYD,IAC3BR,GAAaP,IAAY,CAAC,CAC/B,EAEA,SAASiB,EAAYF,GACA,MAAnBA,IAA4BA,EAAkBrB,GAE1CoB,IACFnB,EAAgB3kB,EAAK0I,aAAaqd,GAClCnB,EAAuBD,EAAc5Y,SAASkW,GAC9C4C,EAAyBF,EAAc5Y,SAASmW,GAChD4C,EAAoBvD,EAAkBvhB,GACtC+kB,EAAkB/kB,EAAK4L,cAAcma,EAAiB,SACtDD,GAAY,EAEhB,CASA,SAAS3Y,EAAMhF,EAAK4d,GAElB,OADmB,MAAnBA,IAA4BA,EAAkBrB,GACvC1kB,EAAKsC,IAAItC,EAAKkmB,aAAa/d,GAAO,GAAI4d,EAC/C,CAYA,SAAStb,EAAM0b,EAAOJ,GACD,MAAnBA,IAA4BA,EAAkBrB,GAC9CuB,EAAYF,GACZ,IAAIhY,EAAY4W,EAAc5Y,SAASgW,GAAwB5K,eAC5C,MAAnB4N,IAA4BhX,EAAU1B,KAAO0Y,GAC7C,IAAIlZ,EAAU7L,EAAK4L,cAAcma,EAAiB,WAYlD,OAXW,MAAXla,IAAoBkC,EAAUlC,QAAUA,GAEf,MAArBiZ,IACFzD,EAAY+E,aAAarY,EAAW6W,EAAsB,KAAM,CAC9DpM,UAAWuM,EACXxM,YAAY,IAEdxK,EAAUrD,KAAOka,EAAqBrY,WAAW,QAAUrL,EAAO0e,UAAU2E,EAAa8B,kBAAkBN,EAAiB,UAAW/lB,EAAKsC,IAAIwiB,EAAmBiB,IAAoB,MAGzLI,GAASjlB,EAAOyF,OAAOoH,EAAWoY,GAC3BpY,CACT,CAQA,SAASqW,EAAc+B,EAAOJ,GACT,MAAnBA,IAA4BA,EAAkBrB,GAC9CuB,EAAYF,GACZ,IAAIhY,EAAY4W,EAAc5Y,SAASiW,GAA0B7K,eAUjE,OARyB,MAArB2N,IACFzD,EAAY+E,aAAarY,EAAW8W,EAAwB,KAAM,CAChEtM,YAAY,IACX,GACHxK,EAAUrD,KAAOma,EAAuBtY,WAAW,QAAUrL,EAAOolB,UAAU/B,EAAa8B,kBAAkBN,EAAiB,YAAaxB,EAAa8B,kBAAkBN,EAAiB,UAAW/lB,EAAKsC,IAAIwiB,EAAmBiB,IAAoB,MAGxPI,GAASjlB,EAAOyF,OAAOoH,EAAWoY,GAC3BpY,CACT,CAQA,SAASoX,EAAOoB,EAAYR,GAE1B,OADmB,MAAnBA,IAA4BA,EAAkBrB,GACvC1kB,EAAK4L,cAAcma,EAAiBQ,EAC7C,CAYA,SAASnB,EAAUjV,GACjB,GAAIjO,EAAS+F,YAAa,CACxB,IAAID,EAAW9F,EAAS+F,cACxB,OAAOuZ,EAAQgF,gBAAgBtlB,EAAOkL,SAAS,CAC7CyG,KAAM7K,GACLmI,GAAMzO,EACX,CACF,CAOA,SAAS2jB,IACP,OAAO5jB,EAAQglB,yBACjB,CAYA,SAASnB,EAAKnV,GACZ,OAAOkR,EAAYqF,QAAQvW,EAAK1O,EAClC,CACF,CAEA,SAASokB,EAAc7lB,GACrB,IAAI2mB,EAAY,CAAC,EAUjB,OATAzlB,EAAOU,KAAK5B,EAAKiZ,YAAY,SAAUyD,EAASkK,GAC9C,IAAIjK,EAAU3c,EAAK4c,iBAAiBF,GAEpC,IAAKC,EAAQkK,aAAc,CACzB,IAAIhK,EAAWF,EAAQE,SACnBiK,EAAWH,EAAU9J,GAAY8J,EAAU9J,IAAa,GAC5DiK,EAASnK,EAAQoK,eAAiBH,CACpC,CACF,IACOD,CACT,CAEA,SAASK,EAAene,EAAIlF,EAAW6e,EAAUe,EAAiB9b,EAAOzH,GACvE6I,EAAKoe,EAAiBpe,EAAIlF,EAAW6e,EAAUe,EAAiB9b,EAAOzH,GACvE6I,GAAM7I,EAAK+I,iBAAiBpF,EAAWkF,EACzC,CAEA,SAASoe,EAAiBpe,EAAIlF,EAAW6e,EAAUe,EAAiB9b,EAAOzH,GACzE,IAAIknB,EAAe1E,EAAS1gB,KAQ5B,IANI+G,GAAMqe,IAAiBre,EAAGwa,qBAAyC,SAAjB6D,GAA2B1E,EAASG,WAAa9Z,EAAG+Z,kBAAuC,UAAjBsE,GAA4B1E,EAAS/X,MAAMsY,QAAUla,EAAGia,mBAAwC,SAAjBoE,GAA2B1E,EAAS/X,MAAMC,OAAS7B,EAAGoa,eACnQxb,EAAM6B,OAAOT,GACbA,EAAK,MAIa,MAAhBqe,EAAJ,CAIA,IAAI1D,GAAU3a,EAId,IAHCA,IAAOA,EAAK0Z,EAASC,IACtBc,EAASza,EAAIlF,EAAW6e,EAAUe,EAAiBvjB,EAAMwjB,GAEpC,UAAjB0D,EAA0B,CAC5B,IAAIC,EAActe,EAAGiO,YAAc,GAC/BsQ,EAAc5E,EAAS1L,UAAY,GAEvC,GAAI0L,EAAS6E,mBAEXC,EAAkB,CAChBH,YAAaA,EACbC,YAAaA,EACbzjB,UAAWA,EACX4f,gBAAiBA,EACjB9b,MAAOoB,EACP7I,KAAMA,QAEH,CAIL,IAFA,IAAI0P,EAAQ,EAELA,EAAQ0X,EAAY7T,OAAQ7D,IACjCuX,EAAiBpe,EAAG0R,QAAQ7K,GAAQ/L,EAAWyjB,EAAY1X,GAAQ6T,EAAiB1a,EAAI7I,GAG1F,KAAO0P,EAAQyX,EAAY5T,OAAQ7D,IACjCyX,EAAYzX,IAAU7G,EAAGS,OAAO6d,EAAYzX,GAEhD,CACF,CAGA,OADAjI,EAAMc,IAAIM,GACHA,CAnCP,CAoCF,CAEA,SAASye,EAAkBzQ,GACzB,IAAI4K,EAAW5K,EAAQsQ,YAAatQ,EAAQuQ,YAAaG,EAAQA,EAAQ1Q,GAAStO,IAAIif,GAAkBvlB,OAAOulB,GAAkBle,OAAOme,GAAehe,SACzJ,CAEA,SAAS8d,EAAOG,EAAM7jB,GACpB,IAAIjB,EAAO8kB,GAAQA,EAAK9kB,KACxB,OAAe,MAARA,EAAeA,EAAOuf,EAAoBte,CACnD,CAEA,SAAS2jB,EAAiBve,EAAUC,GAClC,IAAI2N,EAAUzX,KAAKyX,QACf8Q,EAA0B,MAAZ1e,EAAmB4N,EAAQuQ,YAAYne,GAAY,KACjE2e,EAAoB,MAAZ1e,EAAmB2N,EAAQsQ,YAAYje,GAAY,KAC/D+d,EAAiBW,EAAO/Q,EAAQlT,UAAWgkB,EAAa9Q,EAAQ0M,gBAAiB1M,EAAQpP,MAAOoP,EAAQ7W,KAC1G,CAEA,SAASynB,EAAcve,GACrB,IAAI2N,EAAUzX,KAAKyX,QACf+Q,EAAQ/Q,EAAQsQ,YAAYje,GAChC0e,GAAS/Q,EAAQpP,MAAM6B,OAAOse,EAChC,CApaA9kB,EAAQ+kB,kBAAkB,CACxB/lB,KAAM,gBACN8E,aAAc,CAAC,OAAQ,QAAS,MAAO,aAAc,YACrD6G,cAAe,CACbnJ,iBAAkB,cAElBoJ,OAAQ,EACRC,EAAG,EACHC,iBAAiB,GAWnBZ,eAAgB,SAAUC,EAAQxL,GAChC,OAAOsL,EAAoBE,EAAOjN,KAAMZ,KAAMqC,EAChD,IAKFqB,EAAQwE,gBAAgB,CACtBxF,KAAM,SAMNgG,MAAO,KAKP5I,OAAQ,SAAUqlB,EAAc9iB,EAASC,GACvC,IAAImG,EAAUzI,KAAK0I,MACf9H,EAAOukB,EAAa3gB,UACpB6D,EAAQrI,KAAKqI,MACb+c,EAAaF,EAAeC,EAAcvkB,EAAMyB,EAASC,GAC7D1B,EAAKsI,KAAKT,GAASU,KAAI,SAAUuf,GAC/B9nB,EAAKwI,SAASsf,IAAWd,EAAe,KAAMc,EAAQtD,EAAWsD,GAASvD,EAAc9c,EAAOzH,EACjG,IAAGiC,QAAO,SAAU6lB,EAAQC,GAC1B,IAAIlf,EAAKhB,EAAQsB,iBAAiB4e,GAClC/nB,EAAKwI,SAASsf,GAAUd,EAAene,EAAIif,EAAQtD,EAAWsD,GAASvD,EAAc9c,EAAOzH,GAAQ6I,GAAMpB,EAAM6B,OAAOT,EACzH,IAAGS,QAAO,SAAUye,GAClB,IAAIlf,EAAKhB,EAAQsB,iBAAiB4e,GAClClf,GAAMpB,EAAM6B,OAAOT,EACrB,IAAGY,UACHrK,KAAK0I,MAAQ9H,CACf,EAKA0H,QAASxG,EAAOyG,M,uBCrHlB,IAAI7E,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAErBA,EAAQ,OAERA,EAAQ,OAER,IAAImnB,EAAennB,EAAQ,OAEvBonB,EAAepnB,EAAQ,OAE3BiC,EAAQyD,eAAerF,EAAOoF,MAAM0hB,EAAc,gBAAiB,SAAU,OAC7EllB,EAAQuD,eAAenF,EAAOoF,MAAM2hB,EAAc,iB,wBCblD,IAAIlb,EAAsBlM,EAAQ,OAE9BiM,EAAcjM,EAAQ,OAEtB0B,EAAWuK,EAAYnG,OAAO,CAChC7E,KAAM,uBACN8E,aAAc,CAAC,OAAQ,SACvBoG,eAAgB,SAAUC,EAAQxL,GAChC,IAAIM,EAAOgL,EAAoBE,EAAOjN,KAAMZ,KAAMqC,GAClD,OAAOM,CACT,EACA8E,cAAe,QACf4G,cAAe,CACbnJ,iBAAkB,cAClBoJ,OAAQ,EACRC,EAAG,EACHC,iBAAiB,EACjBsa,WAAY,SACZrZ,YAAa,EAEbsZ,aAAc,SAEdC,aAAc,CACZC,OAAQ,EAERxiB,MAAO,IAEPyiB,UAAW,QAUbpa,WAAY,MAchB1L,EAAOvB,QAAUsB,C,wBCnDjB,IAAIO,EAAUjC,EAAQ,OAElB0nB,EAAa1nB,EAAQ,OAErB2nB,EAAe3nB,EAAQ,OAEvB0B,EAAWO,EAAQwE,gBAAgB,CACrCxF,KAAM,gBACN2mB,KAAM,WACJrpB,KAAKspB,YAAc,IAAIH,EAAWC,EACpC,EACAtpB,OAAQ,SAAUuE,EAAahC,EAASC,GACtC,IAAI1B,EAAOyD,EAAYG,UACnB+kB,EAAmBvpB,KAAKspB,YAC5BC,EAAiBC,WAAW5oB,GAC5BZ,KAAKqI,MAAMc,IAAIogB,EAAiBlhB,MAClC,EACAohB,aAAc,WACZzpB,KAAKspB,YAAYG,cACnB,EACAvf,OAAQ,SAAU7H,EAASC,GACzBtC,KAAKspB,aAAetpB,KAAKspB,YAAYpf,OAAO5H,EAC9C,EACAgG,QAAS,WAAa,IAGxBlF,EAAOvB,QAAUsB,C,wBC1BjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAErBA,EAAQ,OAERA,EAAQ,OAER,IAAIioB,EAAYjoB,EAAQ,OAEpBkoB,EAAeloB,EAAQ,OAEvBmoB,EAAanoB,EAAQ,OAEzBiC,EAAQyD,eAAerF,EAAOoF,MAAMwiB,EAAW,WAC/ChmB,EAAQuD,eAAe0iB,GACvBjmB,EAAQmmB,kBAAkB/nB,EAAOoF,MAAM0iB,EAAY,U,iCChBnD,IAAIlmB,EAAUjC,EAAQ,OAElBqoB,EAAOroB,EAAQ,OAEfsoB,EAAStoB,EAAQ,OAEjBuoB,EAAkBD,EAAOC,gBAEzBC,EAAqBxoB,EAAQ,OAE7ByoB,EAAexmB,EAAQ+kB,kBAAkB,CAC3C/lB,KAAM,gBACN2mB,KAAM,SAAUxb,GACdqc,EAAata,WAAW5P,KAAM,OAAQ6P,WAGtC7P,KAAKmqB,mBAAqB,WACxB,OAAOnqB,KAAKoqB,YACd,EAGApqB,KAAKqqB,kBAAkBxc,EACzB,EACAD,eAAgB,SAAUC,EAAQxL,GAChC,IAAIwX,EAAaoQ,EAAmB,CAAC,SAAUpc,EAAOjN,MAClD+B,EAAO,IAAImnB,EAAKjQ,EAAY7Z,MAEhC,OADA2C,EAAK2nB,SAASzc,EAAOjN,MACd+B,CACT,EACA0nB,kBAAmB,SAAUxc,GAE3Bmc,EAAgBnc,EAAO0c,UAAW,CAAC,SACnC,IAAIC,EAAqB3c,EAAO0c,UAAUxQ,OACtC0Q,EAAuB5c,EAAO0c,UAAUtQ,SAE5CuQ,EAAmBE,KAAOF,EAAmBE,MAAQ7c,EAAO8c,MAAM5Q,OAAO2Q,KACzED,EAAqBC,KAAOD,EAAqBC,MAAQ7c,EAAO8c,MAAM1Q,SAASyQ,IACjF,EAEAE,cAAe,SAAUrmB,GACvB,IAAI3D,EAAOZ,KAAKwE,UACZqmB,EAASX,EAAaY,UAAU9qB,KAAM,gBAAiBuE,GACvDwmB,EAAMnqB,EAAKoqB,OAAO,SAItB,OAFAH,EAAOI,QAAWF,IAAYnqB,EAAKsC,IAAI,QAASqB,GAAawmB,EAAM,KAAKG,QAAQ,GAAxD,EACxBL,EAAOM,MAAMnqB,KAAK,WACX6pB,CACT,EACAxc,cAAe,CACbC,OAAQ,EAERC,EAAG,EAEHC,iBAAiB,EACjB4c,KAAM,GACNC,IAAK,GACLC,MAAO,GACPC,OAAQ,GAMRC,QAAS,KACTC,QAAS,OACTC,KAAM,aAENC,IAAK,EACLC,YAAa,SACbjB,MAAO,CACL5Q,OAAQ,CACN2Q,MAAM,EACNhkB,SAAU,SAGZuT,SAAU,CACRyQ,MAAM,IAGVH,UAAW,CACTxQ,OAAQ,CACN2Q,MAAM,EACNvW,OAAQ,GACR0X,UAAW,CAETtgB,MAAO,EACP7I,KAAM,UAGVuX,SAAU,CAAC,GAEbtL,UAAW,CACToL,OAAQ,CAENkB,YAAa,OACbjB,YAAa,GAEfC,SAAU,CAAC,MAKb9W,EAAW+mB,EACf9mB,EAAOvB,QAAUsB,C,wBCvGjB,IAAIyE,EAAUnG,EAAQ,OAElBK,EAASL,EAAQ,OAEjBgZ,EAAYhZ,EAAQ,OAOxB,SAASqqB,EAAYlrB,EAAM6D,GACzBmD,EAAQwP,MAAMO,KAAK3X,MACnB,IAAI+rB,EAAU,IAAInkB,EAAQokB,QACtBzB,EAAY,IAAI3iB,EAAQqkB,SACxB3gB,EAAO,IAAI1D,EAAQgc,KAMvB,SAASsI,IACP3B,EAAU4B,OAAS5B,EAAU6B,YAC7B9gB,EAAK6gB,OAAS7gB,EAAK8gB,WACrB,CAEA,SAASC,IACP9B,EAAU4B,OAAS5B,EAAU+B,aAC7BhhB,EAAK6gB,OAAS7gB,EAAKghB,YACrB,CAbAtsB,KAAKmJ,IAAI4iB,GACT/rB,KAAKmJ,IAAIohB,GACTvqB,KAAKmJ,IAAImC,GACTtL,KAAKwpB,WAAW5oB,EAAM6D,GAAK,GAY3BzE,KAAKM,GAAG,WAAY4rB,GAAY5rB,GAAG,SAAU+rB,GAAU/rB,GAAG,YAAa4rB,GAAY5rB,GAAG,WAAY+rB,EACpG,CAEA,IAAIE,EAAmBT,EAAY5pB,UAC/BsqB,EAAoB,CAAC,YAAa,SAAU,WAEhDD,EAAiB/C,WAAa,SAAU5oB,EAAM6D,EAAKgoB,GACjD,IAAIV,EAAU/rB,KAAKmb,QAAQ,GACvB9W,EAAczD,EAAK8rB,UACnBrjB,EAAYzI,EAAK0I,aAAa7E,GAC9B8E,EAAS3I,EAAK+K,cAAclH,GAC5BgI,EAAU7L,EAAK0I,aAAa7E,GAAKvB,IAAIspB,GACzC/f,EAAqB,MAAXA,EAAkB,EAAIA,EAEhCsf,EAAQhf,SAAS,CAAC,GAEd0f,GACFV,EAAQjf,SAAS,CACf6f,OAAQpjB,EAAOojB,SAEjBZ,EAAQ7W,SAAS,CACfzI,QAAS,IAEX7E,EAAQmd,UAAUgH,EAAS,CACzB1gB,MAAO,CACLoB,QAASA,IAEVpI,EAAaI,IAEhBmD,EAAQoC,YAAY+hB,EAAS,CAC3B1gB,MAAO,CACLoB,QAASA,GAEXxC,MAAO,CACL0iB,OAAQpjB,EAAOojB,SAEhBtoB,EAAaI,GAIlB,IAAIiI,EAAiBrD,EAAUsD,SAAS,aACpCigB,EAAchsB,EAAK4L,cAAc/H,EAAK,SAC1CsnB,EAAQ7W,SAASpT,EAAOkL,SAAS,CAC/B6f,SAAU,QACV5f,KAAM2f,GACLlgB,EAAeC,SAAS,UAAUoL,aAAa,CAAC,cACnDgU,EAAQnf,WAAaF,EAAeC,SAAS,YAAYoL,eAEzD/X,KAAK8sB,aAAalsB,EAAM6D,GAExBmD,EAAQ0F,cAActN,KACxB,EAEAusB,EAAiBO,aAAe,SAAUlsB,EAAM6D,GAC9C,IAAI8lB,EAAYvqB,KAAKmb,QAAQ,GACzB4R,EAAY/sB,KAAKmb,QAAQ,GACzB9W,EAAczD,EAAK8rB,UACnBrjB,EAAYzI,EAAK0I,aAAa7E,GAC9B8E,EAAS3I,EAAK+K,cAAclH,GAC5BuoB,EAAczjB,EAAOohB,MACrBiC,EAAchsB,EAAK4L,cAAc/H,EAAK,SAC1CmD,EAAQoC,YAAYugB,EAAW,CAC7BtgB,MAAO,CACL0iB,OAAQK,EAAYC,YAAcD,EAAYC,aAE/C5oB,EAAaI,GAChBmD,EAAQoC,YAAY+iB,EAAW,CAC7B1hB,MAAO,CACLY,EAAG+gB,EAAY/gB,EACfC,EAAG8gB,EAAY9gB,IAEhB7H,EAAaI,GAChBsoB,EAAU3f,KAAK,CACb6E,SAAU+a,EAAY/a,SACtBuS,OAAQ,CAACwI,EAAY/gB,EAAG+gB,EAAY9gB,GACpCkG,GAAI,KAEN,IAAIwG,EAAavP,EAAUsD,SAAS,gBAChCugB,EAAkB7jB,EAAUsD,SAAS,kBACrCwgB,EAAiB9jB,EAAUsD,SAAS,oBACpCygB,EAAsB/jB,EAAUsD,SAAS,sBACzCigB,EAAchsB,EAAK4L,cAAc/H,EAAK,SAC1CmD,EAAQkR,cAAciU,EAAU1hB,MAAO0hB,EAAUngB,WAAa,CAAC,EAAGgM,EAAYsU,EAAiB,CAC7FnU,aAAcnY,EAAK8rB,UACnB1T,eAAgBvU,EAChBwU,YAAarY,EAAK8D,QAAQD,GAC1B2U,UAAWwT,EACXS,iBAAkBL,EAAYM,QAC7B,CACDC,UAAWP,EAAYO,UACvBC,kBAAmBR,EAAYS,gBAEjCV,EAAUZ,OAASY,EAAUT,cAAgB1T,EAAW1V,IAAI,QAC5D6pB,EAAUX,aAAec,EAAgBhqB,IAAI,QAC7CqnB,EAAU4B,OAAS5B,EAAU+B,cAAgBa,EAAejqB,IAAI,QAChEqnB,EAAU6B,aAAegB,EAAoBlqB,IAAI,QAEjDqnB,EAAUrV,SAAS,CACjBwB,OAAQkW,IAEVrC,EAAUrV,SAASiY,EAAexgB,SAAS,aAAa+gB,gBACxDnD,EAAU3d,WAAawgB,EAAoBzgB,SAAS,aAAa+gB,cACnE,EAEA5rB,EAAO6rB,SAAS7B,EAAalkB,EAAQwP,OACrC,IAAIwW,EAAanT,EAAUlT,OAAO,CAChC7E,KAAM,SACN5C,OAAQ,SAAUuE,EAAahC,EAASC,GACtC,IAAI1B,EAAOyD,EAAYG,UACnBiE,EAAUzI,KAAK0I,MACfL,EAAQrI,KAAKqI,MACjBzH,EAAKsI,KAAKT,GAASU,KAAI,SAAU1E,GAC/B,IAAIopB,EAAc,IAAI/B,EAAYlrB,EAAM6D,GACxC7D,EAAK+I,iBAAiBlF,EAAKopB,GAC3BxlB,EAAMc,IAAI0kB,EACZ,IAAGhrB,QAAO,SAAU6lB,EAAQC,GAC1B,IAAImF,EAAWrlB,EAAQsB,iBAAiB4e,GACxCmF,EAAStE,WAAW5oB,EAAM8nB,GAC1BrgB,EAAMc,IAAI2kB,GACVltB,EAAK+I,iBAAiB+e,EAAQoF,EAChC,IAAG5jB,QAAO,SAAUzF,GAClB,IAAIqpB,EAAWrlB,EAAQsB,iBAAiBtF,GACxC4D,EAAM6B,OAAO4jB,EACf,IAAGzjB,UACHrK,KAAK0I,MAAQ9H,CACf,EACAsJ,OAAQ,WACNlK,KAAKqI,MAAMkC,YACXvK,KAAK0I,MAAQ,IACf,EACAJ,QAAS,WAAa,IAEpBnF,EAAWyqB,EACfxqB,EAAOvB,QAAUsB,C,wBCpKjB,IAAIoG,EAAS9H,EAAQ,MAEjBuO,EAAUvO,EAAQ,OAElBwO,EAAeD,EAAQC,aACvB8d,EAAY/d,EAAQ+d,UAExB,SAASC,EAAY3pB,EAAa/B,GAChC,OAAOiH,EAAO0kB,cAAc5pB,EAAY6pB,qBAAsB,CAC5D3iB,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aAEhB,CAEA,SAASid,EAAiBvtB,EAAM8qB,GAO9B,IANA,IAAI0C,EAAWxtB,EAAKytB,SAAS,SAAS,SAAUlQ,GAC9C,OAAOA,CACT,IACImQ,EAAU,GACVC,EAAuB,cAAT7C,EAETzV,EAAI,EAAGuY,EAAM5tB,EAAKoW,QAASf,EAAIuY,EAAKvY,IAC3CqY,EAAQrY,GAAKA,EAYf,MARoB,oBAATyV,EACT4C,EAAQ5C,KAAKA,GACK,SAATA,GACT4C,EAAQ5C,MAAK,SAAU+C,EAAGC,GACxB,OAAOH,EAAcH,EAASK,GAAKL,EAASM,GAAKN,EAASM,GAAKN,EAASK,EAC1E,IAGKH,CACT,CAEA,SAAStB,EAAYpsB,GACnBA,EAAK4B,MAAK,SAAUiC,GAClB,IAOI8oB,EACAoB,EACAC,EACA3B,EAVA5jB,EAAYzI,EAAK0I,aAAa7E,GAC9BmU,EAAavP,EAAUsD,SAAS,gBAChCkiB,EAAgBjW,EAAW1V,IAAI,YAC/BiqB,EAAiB9jB,EAAUsD,SAAS,oBACpCpD,EAAS3I,EAAK+K,cAAclH,GAC5BkoB,EAASpjB,EAAOojB,OAChBmC,EAAkC,UAAlBD,GAA+C,WAAlBA,GAAgD,WAAlBA,EAM/E,GAAIC,EACFH,GAAShC,EAAO,GAAG,GAAKA,EAAO,GAAG,GAAKA,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACtEiC,GAASjC,EAAO,GAAG,GAAKA,EAAO,GAAG,GAAKA,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACtEY,EAAY,SACZN,EAAa,CAAC,CAAC0B,EAAOC,GAAQ,CAACD,EAAOC,QACjC,CACL,IAAIG,EACAC,EACAC,EACAC,EAAe/B,EAAejqB,IAAI,UAEhB,SAAlB2rB,GAEFE,GAAMpC,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrCqC,GAAMrC,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrCsC,EAAKF,EAAKG,EACVP,EAAQM,EAAK,EACb1B,EAAY,UAGZwB,GAAMpC,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrCqC,GAAMrC,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrCsC,EAAKF,EAAKG,EACVP,EAAQM,EAAK,EACb1B,EAAY,QAGd,IAAI4B,EAAKH,EACT/B,EAAa,CAAC,CAAC8B,EAAIC,GAAK,CAACC,EAAIE,IAC7BP,EAAQO,CACV,CAEA5lB,EAAOohB,MAAQ,CACbsC,WAAYA,EACZhhB,EAAG0iB,EACHziB,EAAG0iB,EACHnB,cAAe,SACfF,UAAWA,EACXD,OAAQwB,EAEZ,GACF,CAEA,SAAS3rB,EAASd,EAASC,EAAKyB,GAC9B1B,EAAQ+E,iBAAiB,UAAU,SAAU/C,GAC3C,IAAIzD,EAAOyD,EAAYG,UACnBknB,EAAOrnB,EAAYnB,IAAI,QACvBksB,EAAWpB,EAAY3pB,EAAa/B,GACpCgsB,EAAUH,EAAiBvtB,EAAM8qB,GACjC2D,EAAa,CAACpf,EAAa5L,EAAYnB,IAAI,WAAYksB,EAAS7jB,OAAQ0E,EAAa5L,EAAYnB,IAAI,WAAYksB,EAAS7jB,QAC1H+jB,EAAa1uB,EAAK2uB,cAAc,SAChCnpB,EAAM/B,EAAYnB,IAAI,OACtBoD,EAAMjC,EAAYnB,IAAI,OAEf,MAAPkD,IACFA,EAAMI,KAAKJ,IAAIkpB,EAAW,GAAI,IAGrB,MAAPhpB,IACFA,EAAMgpB,EAAW,IAGnB,IAAI1D,EAAcvnB,EAAYnB,IAAI,eAC9ByoB,EAAMtnB,EAAYnB,IAAI,OACtBssB,GAAcJ,EAASpjB,OAAS2f,GAAO/qB,EAAKoW,QAAU,IAAMpW,EAAKoW,QACjE9K,EAAIkjB,EAASljB,EAEbujB,EAAgB,SAAUhrB,EAAKirB,GAEjC,IAEIC,EAFAxR,EAAMvd,EAAKsC,IAAI,QAASuB,IAAQ,EAChCmrB,EAAY7B,EAAU5P,EAAK,CAAC/X,EAAKE,GAAM+oB,GAAY,GAGvD,OAAQzD,GACN,IAAK,OACH+D,EAAKP,EAASnjB,EACd,MAEF,IAAK,SACH0jB,EAAKP,EAASnjB,GAAKmjB,EAAS7jB,MAAQqkB,GAAa,EACjD,MAEF,IAAK,QACHD,EAAKP,EAASnjB,EAAImjB,EAAS7jB,MAAQqkB,EACnC,MAGJ,MAAO,CAAC,CAACD,EAAID,GAAO,CAACC,EAAKC,EAAWF,GACvC,EAEa,cAAThE,IAEF8D,GAAcA,EACd7D,GAAOA,EACPzf,GAAKkjB,EAASpjB,OACdsiB,EAAUA,EAAQ9a,WAGpB,IAAK,IAAIyC,EAAI,EAAGA,EAAIqY,EAAQna,OAAQ8B,IAAK,CACvC,IAAIxR,EAAM6pB,EAAQrY,GACd4Z,EAAUvB,EAAQrY,EAAI,GACtBsI,EAAQkR,EAAchrB,EAAKyH,GAC3B4jB,EAAML,EAAcI,EAAS3jB,EAAIsjB,GACrCtjB,GAAKsjB,EAAa7D,EAClB/qB,EAAKge,cAAcna,EAAK,CACtBkoB,OAAQpO,EAAM3b,OAAOktB,EAAI9sB,QAAQwQ,YAErC,CAEAwZ,EAAYpsB,EACd,GACF,CAEAwC,EAAOvB,QAAUsB,C,wBCpKjB1B,EAAQ,OAERA,EAAQ,M,wBCFR,IAAIqoB,EAAOroB,EAAQ,OAEfiM,EAAcjM,EAAQ,OAEtBK,EAASL,EAAQ,OAEjBsuB,EAAcriB,EAAYnG,OAAO,CACnC7E,KAAM,eACNkL,eAAgB,SAAUC,EAAQxL,GAChC,IAAIM,EAAO,IAAImnB,EAAK,CAAC,SAAU9pB,MAC3BgwB,EAAUniB,EAAOjN,MAAQ,GAQ7B,OANKkB,EAAO6Q,QAAQqd,KAClBA,EAAU,CAACA,IAIbrtB,EAAK2nB,SAAS0F,GACPrtB,CACT,EACA0L,cAAe,CACbC,OAAQ,EACRC,EAAG,EAEHlJ,OAAQ,CAAC,MAAO,OAChBmJ,iBAAiB,EACjByhB,OAAQ,MACR7kB,WAAY,IACZiB,UAAW,GACX6jB,WAAW,EAEX9pB,IAAK,EAELE,IAAK,IAEL6pB,YAAa,GAEbC,SAAU,CAER1F,MAAM,EACNmB,UAAW,CAETtf,MAAO,CAAC,CAAC,GAAK,WAAY,CAAC,GAAK,WAAY,CAAC,EAAG,YAChDhB,MAAO,KAIX8kB,UAAW,CAET3F,MAAM,EAENvW,OAAQ,GAER0X,UAAW,CACTtf,MAAO,OACPhB,MAAO,EACP7I,KAAM,UAIV4tB,SAAU,CAER5F,MAAM,EAENyF,YAAa,EAEbhc,OAAQ,EAER0X,UAAW,CACTtf,MAAO,OACPhB,MAAO,EACP7I,KAAM,UAGV6tB,UAAW,CACT7F,MAAM,EACN8F,SAAU,EAEVjkB,MAAO,QAETkkB,QAAS,CACP/F,MAAM,EACNvW,OAAQ,MACR5I,MAAO,GAEToD,UAAW,CACToL,OAAQ,CACNxN,MAAO,SAGXmkB,MAAO,CACLhG,MAAM,EAENiG,aAAc,CAAC,EAAG,QAElBpkB,MAAO,OACPqkB,SAAU,IAEZC,OAAQ,CACNnG,MAAM,EACNoG,gBAAiB,gBACjB9W,YAAa,EACbiB,YAAa,OACb1P,MAAO,IACPS,OAAQ,KAER+kB,QAAS,CAAC,EAAG,IAEbJ,aAAc,CAAC,EAAG,OAGlBpkB,MAAO,OACPqkB,SAAU,OAIZztB,EAAW4sB,EACf3sB,EAAOvB,QAAUsB,C,wBCrHjB,IAAI6tB,EAAcvvB,EAAQ,OAEtBmG,EAAUnG,EAAQ,OAElBgZ,EAAYhZ,EAAQ,OAEpBuO,EAAUvO,EAAQ,OAElBwO,EAAeD,EAAQC,aACvBqI,EAAQtI,EAAQsI,MAChByV,EAAY/d,EAAQ+d,UAExB,SAASkD,EAAc5sB,EAAa/B,GAClC,IAAI+C,EAAShB,EAAYnB,IAAI,UACzBqI,EAAQjJ,EAAI2O,WACZjF,EAAS1J,EAAI4O,YACbhD,EAAO1H,KAAKJ,IAAImF,EAAOS,GACvBG,EAAK8D,EAAa5K,EAAO,GAAI/C,EAAI2O,YACjC7E,EAAK6D,EAAa5K,EAAO,GAAI/C,EAAI4O,aACjCzF,EAAIwE,EAAa5L,EAAYnB,IAAI,UAAWgL,EAAO,GACvD,MAAO,CACL/B,GAAIA,EACJC,GAAIA,EACJX,EAAGA,EAEP,CAEA,SAASylB,EAAYvG,EAAOwG,GAS1B,OARIA,IAC4B,kBAAnBA,EACTxG,EAAQwG,EAAeC,QAAQ,UAAoB,MAATzG,EAAgBA,EAAQ,IAC/B,oBAAnBwG,IAChBxG,EAAQwG,EAAexG,KAIpBA,CACT,CAEA,IAAI0G,EAAgB,EAAV7qB,KAAK0L,GACXof,EAAY7W,EAAUlT,OAAO,CAC/B7E,KAAM,QACN5C,OAAQ,SAAUuE,EAAahC,EAASC,GACtCtC,KAAKqI,MAAMkC,YACX,IAAIgnB,EAAYltB,EAAYnB,IAAI,4BAC5BsuB,EAAUP,EAAc5sB,EAAa/B,GAEzCtC,KAAKyxB,YAAYptB,EAAahC,EAASC,EAAKivB,EAAWC,EACzD,EACAlpB,QAAS,WAAa,EACtBmpB,YAAa,SAAUptB,EAAahC,EAASC,EAAKivB,EAAWC,GAW3D,IAVA,IAAInpB,EAAQrI,KAAKqI,MACbqpB,EAAgBrtB,EAAYsI,SAAS,YACrCglB,EAAiBD,EAAc/kB,SAAS,aACxCujB,EAAY7rB,EAAYnB,IAAI,aAC5BkI,GAAc/G,EAAYnB,IAAI,cAAgB,IAAMsD,KAAK0L,GACzD7F,GAAYhI,EAAYnB,IAAI,YAAc,IAAMsD,KAAK0L,GACrD0f,GAAkBvlB,EAAWjB,GAAcimB,EAC3CQ,EAAezmB,EACf0mB,EAAgBH,EAAezuB,IAAI,SAE9B+S,EAAI,EAAGA,EAAIsb,EAAUpd,OAAQ8B,IAAK,CAEzC,IAAIgV,EAAUzkB,KAAKJ,IAAII,KAAKF,IAAIirB,EAAUtb,GAAG,GAAI,GAAI,GAEjDhL,GADAoB,EAAWjB,EAAawmB,EAAiB3G,EAChC,IAAIrjB,EAAQsD,OAAO,CAC9BjB,MAAO,CACLmB,WAAYymB,EACZxlB,SAAUA,EACVF,GAAIqlB,EAAQrlB,GACZC,GAAIolB,EAAQplB,GACZ8jB,UAAWA,EACXxkB,GAAI8lB,EAAQ/lB,EAAIqmB,EAChBrmB,EAAG+lB,EAAQ/lB,GAEbgL,QAAQ,KAEVxL,EAAOiK,SAAS,CACdjI,KAAMskB,EAAUtb,GAAG,KAErBhL,EAAOiK,SAASyc,EAAejE,aAE/B,CAAC,QAAS,cAAe,iBACzBrlB,EAAMc,IAAI8B,GACV4mB,EAAexlB,CACjB,CAEA,IAAI0lB,EAAW,SAAU9G,GAEvB,GAAIA,GAAW,EACb,OAAOsG,EAAU,GAAG,GAGtB,IAAK,IAAItb,EAAI,EAAGA,EAAIsb,EAAUpd,OAAQ8B,IACpC,GAAIsb,EAAUtb,GAAG,IAAMgV,IAAkB,IAANhV,EAAU,EAAIsb,EAAUtb,EAAI,GAAG,IAAMgV,EACtE,OAAOsG,EAAUtb,GAAG,GAKxB,OAAOsb,EAAUtb,EAAI,GAAG,EAC1B,EAEA,IAAKia,EAAW,CACd,IAAI8B,EAAM5mB,EACVA,EAAaiB,EACbA,EAAW2lB,CACb,CAEAhyB,KAAKiyB,aAAa5tB,EAAahC,EAASC,EAAKyvB,EAAUP,EAASpmB,EAAYiB,EAAU6jB,GAEtFlwB,KAAKkyB,eAAe7tB,EAAahC,EAASC,EAAKyvB,EAAUP,EAASpmB,EAAYiB,EAAU6jB,GAExFlwB,KAAKmyB,aAAa9tB,EAAahC,EAASC,EAAKyvB,EAAUP,GAEvDxxB,KAAKoyB,cAAc/tB,EAAahC,EAASC,EAAKyvB,EAAUP,EAC1D,EACAS,aAAc,SAAU5tB,EAAahC,EAASC,EAAKyvB,EAAUP,EAASpmB,EAAYiB,EAAU6jB,GAoB1F,IAnBA,IAAI7nB,EAAQrI,KAAKqI,MACb8D,EAAKqlB,EAAQrlB,GACbC,EAAKolB,EAAQplB,GACbX,EAAI+lB,EAAQ/lB,EACZ4mB,GAAUhuB,EAAYnB,IAAI,OAC1BovB,GAAUjuB,EAAYnB,IAAI,OAC1BqvB,EAAiBluB,EAAYsI,SAAS,aACtC6lB,EAAYnuB,EAAYsI,SAAS,YACjCiM,EAAavU,EAAYsI,SAAS,aAClCwjB,EAAc9rB,EAAYnB,IAAI,eAC9BuvB,EAAiBD,EAAUtvB,IAAI,eAC/BwvB,EAAeziB,EAAasiB,EAAervB,IAAI,UAAWuI,GAC1DknB,EAAU1iB,EAAauiB,EAAUtvB,IAAI,UAAWuI,GAChDmnB,EAAQxnB,EACRynB,GAAQxmB,EAAWjB,GAAc+kB,EACjC2C,EAAUD,EAAOJ,EACjBM,EAAiBR,EAAe5lB,SAAS,aAAa+gB,eACtDsF,EAAgBR,EAAU7lB,SAAS,aAAa+gB,eAE3CzX,EAAI,EAAGA,GAAKka,EAAala,IAAK,CACrC,IAAIgd,EAAQzsB,KAAK0sB,IAAIN,GACjBO,EAAQ3sB,KAAK4sB,IAAIR,GAErB,GAAIL,EAAervB,IAAI,QAAS,CAC9B,IAAImtB,EAAY,IAAIzoB,EAAQyrB,KAAK,CAC/BppB,MAAO,CACL8kB,GAAIkE,EAAQxnB,EAAIU,EAChB6iB,GAAImE,EAAQ1nB,EAAIW,EAChB6iB,GAAIgE,GAASxnB,EAAIinB,GAAgBvmB,EACjCgjB,GAAIgE,GAAS1nB,EAAIinB,GAAgBtmB,GAEnCf,MAAO0nB,EACPtc,QAAQ,IAGoB,SAA1Bsc,EAAerc,QACjB2Z,EAAUnb,SAAS,CACjBwB,OAAQqb,EAAS9b,EAAIka,KAIzB9nB,EAAMc,IAAIknB,EACZ,CAGA,GAAIzX,EAAW1V,IAAI,QAAS,CAC1B,IAAIynB,EAAQuG,EAAY5Y,EAAMrC,EAAIka,GAAemC,EAASD,GAAUA,GAASzZ,EAAW1V,IAAI,cACxFstB,EAAW5X,EAAW1V,IAAI,YAC1BkW,EAAY2Y,EAAS9b,EAAIka,GAC7B9nB,EAAMc,IAAI,IAAIvB,EAAQgc,KAAK,CACzBvY,MAAOzD,EAAQof,aAAa,CAAC,EAAGpO,EAAY,CAC1CtN,KAAMqf,EACN1e,EAAGgnB,GAASxnB,EAAIinB,EAAelC,GAAYrkB,EAC3CD,EAAGinB,GAAS1nB,EAAIinB,EAAelC,GAAYpkB,EAC3CohB,kBAAmB2F,GAAS,GAAM,MAAQA,EAAQ,GAAM,SAAW,SACnE5F,UAAW0F,GAAS,GAAM,OAASA,EAAQ,GAAM,QAAU,UAC1D,CACD7Z,UAAWA,IAEb3C,QAAQ,IAEZ,CAGA,GAAI+b,EAAUtvB,IAAI,SAAW+S,IAAMka,EAAa,CAC9C,IAAK,IAAImD,EAAI,EAAGA,GAAKb,EAAgBa,IAAK,CACpCL,EAAQzsB,KAAK0sB,IAAIN,GACjBO,EAAQ3sB,KAAK4sB,IAAIR,GADrB,IAEIW,EAAW,IAAI3rB,EAAQyrB,KAAK,CAC9BppB,MAAO,CACL8kB,GAAIkE,EAAQxnB,EAAIU,EAChB6iB,GAAImE,EAAQ1nB,EAAIW,EAChB6iB,GAAIgE,GAASxnB,EAAIknB,GAAWxmB,EAC5BgjB,GAAIgE,GAAS1nB,EAAIknB,GAAWvmB,GAE9BqK,QAAQ,EACRpL,MAAO2nB,IAGoB,SAAzBA,EAActc,QAChB6c,EAASre,SAAS,CAChBwB,OAAQqb,GAAU9b,EAAIqd,EAAIb,GAAkBtC,KAIhD9nB,EAAMc,IAAIoqB,GACVX,GAASE,CACX,CAEAF,GAASE,CACX,MACEF,GAASC,CAEb,CACF,EACAX,eAAgB,SAAU7tB,EAAahC,EAASC,EAAKyvB,EAAUP,EAASpmB,EAAYiB,EAAU6jB,GAC5F,IAAI7nB,EAAQrI,KAAKqI,MACbI,EAAUzI,KAAK0I,MAEnB,GAAKrE,EAAYnB,IAAI,gBAArB,CAQA,IAAIswB,EAAc,EAAEnvB,EAAYnB,IAAI,QAASmB,EAAYnB,IAAI,QACzDuwB,EAAc,CAACroB,EAAYiB,GAC3BzL,EAAOyD,EAAYG,UACvB5D,EAAKsI,KAAKT,GAASU,KAAI,SAAU1E,GAC/B,IAAIgsB,EAAU,IAAIO,EAAY,CAC5B/mB,MAAO,CACL2oB,MAAOxnB,KAGXxD,EAAQmd,UAAU0L,EAAS,CACzBxmB,MAAO,CACL2oB,MAAO7E,EAAUntB,EAAKsC,IAAI,QAASuB,GAAM+uB,EAAaC,GAAa,KAEpEpvB,GACHgE,EAAMc,IAAIsnB,GACV7vB,EAAK+I,iBAAiBlF,EAAKgsB,EAC7B,IAAG5tB,QAAO,SAAU6lB,EAAQC,GAC1B,IAAI8H,EAAUhoB,EAAQsB,iBAAiB4e,GACvC/gB,EAAQoC,YAAYymB,EAAS,CAC3BxmB,MAAO,CACL2oB,MAAO7E,EAAUntB,EAAKsC,IAAI,QAASwlB,GAAS8K,EAAaC,GAAa,KAEvEpvB,GACHgE,EAAMc,IAAIsnB,GACV7vB,EAAK+I,iBAAiB+e,EAAQ+H,EAChC,IAAGvmB,QAAO,SAAUzF,GAClB,IAAIgsB,EAAUhoB,EAAQsB,iBAAiBtF,GACvC4D,EAAM6B,OAAOumB,EACf,IAAGpmB,UACHzJ,EAAK0J,mBAAkB,SAAUmmB,EAAShsB,GACxC,IAAI4E,EAAYzI,EAAK0I,aAAa7E,GAC9BivB,EAAerqB,EAAUsD,SAAS,WACtC8jB,EAAQ3jB,SAAS,CACfb,EAAGulB,EAAQrlB,GACXD,EAAGslB,EAAQplB,GACXb,MAAO0E,EAAayjB,EAAaxwB,IAAI,SAAUsuB,EAAQ/lB,GACvDA,EAAGwE,EAAayjB,EAAaxwB,IAAI,UAAWsuB,EAAQ/lB,KAEtDglB,EAAQ1jB,SAAS1D,EAAUsD,SAAS,oBAAoBoL,gBAE7B,SAAvB0Y,EAAQplB,MAAM4B,MAChBwjB,EAAQvb,SAAS,OAAQ6c,EAAShE,EAAUntB,EAAKsC,IAAI,QAASuB,GAAM+uB,EAAa,CAAC,EAAG,IAAI,KAG3F5rB,EAAQ0F,cAAcmjB,EAASpnB,EAAUsD,SAAS,sBAAsBoL,eAC1E,IACA/X,KAAK0I,MAAQ9H,CAhDb,MAJE6H,GAAWA,EAAQ6B,mBAAkB,SAAUb,GAC7CpB,EAAM6B,OAAOT,EACf,GAmDJ,EACA0oB,aAAc,SAAU9tB,EAAahC,EAASC,EAAKyvB,EAAUP,GAC3D,IAAImC,EAAatvB,EAAYsI,SAAS,SAEtC,GAAIgnB,EAAWzwB,IAAI,QAAS,CAC1B,IAAIytB,EAAegD,EAAWzwB,IAAI,gBAC9B+I,EAAIulB,EAAQrlB,GAAK8D,EAAa0gB,EAAa,GAAIa,EAAQ/lB,GACvDS,EAAIslB,EAAQplB,GAAK6D,EAAa0gB,EAAa,GAAIa,EAAQ/lB,GACvD4mB,GAAUhuB,EAAYnB,IAAI,OAC1BovB,GAAUjuB,EAAYnB,IAAI,OAC1B6K,EAAQ1J,EAAYG,UAAUtB,IAAI,QAAS,GAC3CkW,EAAY2Y,EAAShE,EAAUhgB,EAAO,CAACskB,EAAQC,GAAS,CAAC,EAAG,IAAI,IACpEtyB,KAAKqI,MAAMc,IAAI,IAAIvB,EAAQgc,KAAK,CAC9BnN,QAAQ,EACRpL,MAAOzD,EAAQof,aAAa,CAAC,EAAG2M,EAAY,CAC1C1nB,EAAGA,EACHC,EAAGA,EAEHZ,KAAMjH,EAAYG,UAAUE,QAAQ,GACpC6oB,UAAW,SACXC,kBAAmB,UAClB,CACDpU,UAAWA,EACXwa,WAAW,MAGjB,CACF,EACAxB,cAAe,SAAU/tB,EAAahC,EAASC,EAAKyvB,EAAUP,GAC5D,IAAIqC,EAAcxvB,EAAYsI,SAAS,UACnC0lB,GAAUhuB,EAAYnB,IAAI,OAC1BovB,GAAUjuB,EAAYnB,IAAI,OAE9B,GAAI2wB,EAAY3wB,IAAI,QAAS,CAC3B,IAAIytB,EAAekD,EAAY3wB,IAAI,gBAC/B+I,EAAIulB,EAAQrlB,GAAK8D,EAAa0gB,EAAa,GAAIa,EAAQ/lB,GACvDS,EAAIslB,EAAQplB,GAAK6D,EAAa0gB,EAAa,GAAIa,EAAQ/lB,GACvDF,EAAQ0E,EAAa4jB,EAAY3wB,IAAI,SAAUsuB,EAAQ/lB,GACvDO,EAASiE,EAAa4jB,EAAY3wB,IAAI,UAAWsuB,EAAQ/lB,GACzDsC,EAAQ1J,EAAYG,UAAUtB,IAAI,QAAS,GAC3CkW,EAAY2Y,EAAShE,EAAUhgB,EAAO,CAACskB,EAAQC,GAAS,CAAC,EAAG,IAAI,IACpEtyB,KAAKqI,MAAMc,IAAI,IAAIvB,EAAQgc,KAAK,CAC9BnN,QAAQ,EACRpL,MAAOzD,EAAQof,aAAa,CAAC,EAAG6M,EAAa,CAC3C5nB,EAAGA,EACHC,EAAGA,EACHZ,KAAM4lB,EACNnjB,EAAO8lB,EAAY3wB,IAAI,cACvB4wB,UAAWzV,MAAM9S,GAAS,KAAOA,EACjCwoB,WAAY1V,MAAMrS,GAAU,KAAOA,EACnCuhB,UAAW,SACXC,kBAAmB,UAClB,CACDpU,UAAWA,EACXwa,WAAW,MAGjB,CACF,IAEEzwB,EAAWmuB,EACfluB,EAAOvB,QAAUsB,C,wBC7UjB,IAAI6wB,EAAOvyB,EAAQ,OAEf0B,EAAW6wB,EAAKzsB,OAAO,CACzB7E,KAAM,sBACNuH,MAAO,CACL2oB,MAAO,EACPrnB,MAAO,GACPE,EAAG,GACHQ,EAAG,EACHC,EAAG,GAEL+nB,UAAW,SAAUC,EAAKjqB,GACxB,IAAIkqB,EAAU3tB,KAAK0sB,IACfkB,EAAU5tB,KAAK4sB,IACf3nB,EAAIxB,EAAMwB,EACVF,EAAQtB,EAAMsB,MACdqnB,EAAQ3oB,EAAM2oB,MACd3mB,EAAIhC,EAAMgC,EAAIkoB,EAAQvB,GAASrnB,GAASA,GAASE,EAAI,EAAI,EAAI,GAC7DS,EAAIjC,EAAMiC,EAAIkoB,EAAQxB,GAASrnB,GAASA,GAASE,EAAI,EAAI,EAAI,GACjEmnB,EAAQ3oB,EAAM2oB,MAAQpsB,KAAK0L,GAAK,EAChCgiB,EAAIG,OAAOpoB,EAAGC,GACdgoB,EAAII,OAAOrqB,EAAMgC,EAAIkoB,EAAQvB,GAASrnB,EAAOtB,EAAMiC,EAAIkoB,EAAQxB,GAASrnB,GACxE2oB,EAAII,OAAOrqB,EAAMgC,EAAIkoB,EAAQlqB,EAAM2oB,OAASnnB,EAAGxB,EAAMiC,EAAIkoB,EAAQnqB,EAAM2oB,OAASnnB,GAChFyoB,EAAII,OAAOrqB,EAAMgC,EAAIkoB,EAAQvB,GAASrnB,EAAOtB,EAAMiC,EAAIkoB,EAAQxB,GAASrnB,GACxE2oB,EAAII,OAAOroB,EAAGC,EAEhB,IAGF9I,EAAOvB,QAAUsB,C,wBC7BjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAErBA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAER,IAAI8yB,EAAiB9yB,EAAQ,OAEzBmnB,EAAennB,EAAQ,OAEvB+yB,EAAiB/yB,EAAQ,OAEzBgzB,EAAahzB,EAAQ,OAErBizB,EAAejzB,EAAQ,OAEvBkzB,EAAiBlzB,EAAQ,OAEzBmzB,EAAcnzB,EAAQ,OAEtBozB,EAAapzB,EAAQ,OAEzBiC,EAAQmmB,kBAAkB0K,GAC1B7wB,EAAQyD,eAAerF,EAAOoF,MAAM0hB,EAAc,QAAS,SAAU,OACrEllB,EAAQyD,eAAeqtB,GACvB9wB,EAAQyD,eAAestB,GACvB/wB,EAAQuD,eAAeytB,GACvBhxB,EAAQuD,eAAe0tB,GACvBjxB,EAAQuD,eAAe2tB,GAEvBlxB,EAAQoxB,yBAAyB,YAAa,CAC5C1yB,OAAQyyB,G,iCCnCV,IAAInxB,EAAUjC,EAAQ,OAElBqoB,EAAOroB,EAAQ,OAEfK,EAASL,EAAQ,OAEjBsoB,EAAStoB,EAAQ,OAEjBuoB,EAAkBD,EAAOC,gBAEzBjiB,EAAQtG,EAAQ,OAEhBszB,EAAUtzB,EAAQ,OAElBuzB,EAAaD,EAAQC,WAErBC,EAA0BxzB,EAAQ,OAElCyzB,EAAcxxB,EAAQ+kB,kBAAkB,CAC1C/lB,KAAM,eACN2mB,KAAM,SAAUxb,GACdqnB,EAAYtlB,WAAW5P,KAAM,OAAQ6P,WAErC7P,KAAKmqB,mBAAqB,WACxB,OAAOnqB,KAAKm1B,eACd,EAEAn1B,KAAKo1B,kBAAkBvnB,EAAOwnB,OAASxnB,EAAOynB,OAE9Ct1B,KAAKu1B,uBACP,EACAC,YAAa,SAAU3nB,GACrBqnB,EAAYtlB,WAAW5P,KAAM,cAAe6P,WAC5C7P,KAAKo1B,kBAAkBvnB,EAAOwnB,OAASxnB,EAAOynB,OAE9Ct1B,KAAKu1B,uBACP,EACAE,qBAAsB,SAAU5nB,GAC9BqnB,EAAYtlB,WAAW5P,KAAM,uBAAwB6P,WACrDma,EAAgBnc,EAAO6nB,UAAW,CAAC,QACrC,EACA9nB,eAAgB,SAAUC,EAAQxL,GAChC,IAAIgzB,EAAQxnB,EAAOwnB,OAASxnB,EAAOynB,OAAS,GACxCK,EAAQ9nB,EAAOjN,MAAQiN,EAAO8nB,OAAS,GACvCC,EAAO51B,KAEX,GAAI21B,GAASN,EACX,OAAOJ,EAAwBU,EAAON,EAAOr1B,MAAM,EAAM61B,GAAYj1B,KAGvE,SAASi1B,EAAWC,EAAUC,GAE5BD,EAASE,WAAW,gBAAgB,SAAUC,GAC5C,IAAIC,EAAmBN,EAAKO,kBACxBC,EAAcH,EAAM9oB,WAAW,YAC/BkpB,EAAgBH,EAAiBE,GAOrC,OALIC,IACFA,EAAcpf,YAAcgf,EAAMhf,YAClCgf,EAAMhf,YAAcof,GAGfJ,CACT,IACA,IAAIK,EAAiBV,EAAKjpB,SAAS,aAE/B4pB,EAAkB,IAAIxuB,EAAM,CAC9B4iB,MAAO2L,EAAezoB,QACrByoB,EAAerf,YAAa5U,GAM/B,SAASm0B,EAAcxhB,GAErB,OADAA,EAAOhV,KAAKy2B,UAAUzhB,GACfA,GAAoB,UAAZA,EAAK,GAAiBuhB,EAAkBv2B,KAAKiX,WAC9D,CARA8e,EAASC,WAAW,gBAAgB,SAAUC,GAE5C,OADAA,EAAMS,mBAAmBF,GAClBP,CACT,GAMF,CACF,EAKAU,SAAU,WACR,OAAO32B,KAAKwE,UAAUoyB,KACxB,EAKAC,YAAa,WACX,OAAO72B,KAAK22B,WAAWZ,QACzB,EAKAe,kBAAmB,WACjB,OAAO92B,KAAKm1B,eACd,EAKA4B,cAAe,SAAUxyB,EAAWyyB,EAAgBC,GAClD,GAAiB,SAAbA,EAAqB,CACvB,IAAInB,EAAW91B,KAAKwE,UAChBqmB,EAAS7qB,KAAK4qB,cAAcrmB,EAAW0yB,GACvCC,EAAOpB,EAASc,MAAMO,eAAe5yB,GACrC6yB,EAAatB,EAASpxB,QAAQwyB,EAAKG,MAAM9yB,WACzC+yB,EAAaxB,EAASpxB,QAAQwyB,EAAKK,MAAMhzB,WACzCizB,EAAO,GASX,OARc,MAAdJ,GAAsBI,EAAKx2B,KAAKo2B,GAClB,MAAdE,GAAsBE,EAAKx2B,KAAKs2B,GAChCE,EAAOxC,EAAWwC,EAAKjgB,KAAK,QAExBsT,EAAO9c,QACTypB,GAAQ,MAAQxC,EAAWnK,EAAO9c,QAG7BypB,CACT,CAEE,OAAOtC,EAAYtlB,WAAW5P,KAAM,gBAAiB6P,UAEzD,EACA0lB,sBAAuB,WACrB,IAAIkC,EAAa31B,EAAO41B,IAAI13B,KAAK6N,OAAO4pB,YAAc,IAAI,SAAUE,GAElE,OAAyB,MAAlBA,EAAS5pB,MAAgB4pB,EAAW71B,EAAOyF,OAAO,CACvDwG,MAAO,GACN4pB,EACL,IACIC,EAAiB,IAAI9N,EAAK,CAAC,SAAU9pB,MACzC43B,EAAetN,SAASmN,GACxBz3B,KAAKm1B,gBAAkByC,EACvB53B,KAAKm2B,kBAAoByB,EAAevJ,UAAS,SAAU5pB,GACzD,OAAOmzB,EAAetuB,aAAa7E,GAAK,EAC1C,GACF,EACAa,QAAS,SAAUC,GACjBvF,KAAK6N,OAAOtI,KAAOA,CACrB,EACAH,UAAW,SAAUC,GACnBrF,KAAK6N,OAAOxI,OAASA,CACvB,EACA4D,mBAAoB,WAClB,OAAOisB,EAAYpK,UAAU9qB,KAAM,yBACP,UAAvBA,KAAKkD,IAAI,WAAyBlD,KAAKkD,IAAI,yBAClD,EACAmL,cAAe,CACbC,OAAQ,EACRC,EAAG,EACHrJ,iBAAkB,OAMlBsJ,iBAAiB,EACjBkB,gBAAgB,EAChBnG,OAAQ,KACRsuB,oBAAoB,EAEpBC,SAAU,CACRC,aAAa,GAGfC,MAAO,CACLC,WAAY,KAEZC,UAAW,CAAC,EAAG,IACfC,QAAS,GAETC,WAAY,GACZC,iBAAiB,GAEnBjN,KAAM,SACNC,IAAK,SAKLxc,OAAQ,SACRC,WAAY,GACZwpB,WAAY,CAAC,OAAQ,QACrBC,eAAgB,GAChB7C,UAAW,CACT3b,OAAQ,CACNrT,SAAU,UAEZuT,SAAU,CAAC,GAEbue,WAAW,EACXC,MAAM,EAENpzB,OAAQ,KACRE,KAAM,EAENmzB,eAAgB,GAUhB/N,MAAO,CACL5Q,OAAQ,CACN2Q,MAAM,EACNiO,UAAW,OAEb1e,SAAU,CACRyQ,MAAM,IAGV/b,UAAW,CACToL,OAAQ,CAAC,EACTE,SAAU,CAAC,GAEb4R,UAAW,CACT9R,OAAQ,CACNxN,MAAO,OACPhB,MAAO,EACPqtB,UAAW,EACXnsB,QAAS,IAEXwN,SAAU,CAAC,MAIb9W,EAAW+xB,EACf9xB,EAAOvB,QAAUsB,C,wBC3OjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjB0nB,EAAa1nB,EAAQ,OAErBo3B,EAAWp3B,EAAQ,OAEnBq3B,EAAiBr3B,EAAQ,OAEzBs3B,EAAat3B,EAAQ,OAErBu3B,EAAgBv3B,EAAQ,OAExBw3B,EAAsBD,EAAcC,oBAEpCrxB,EAAUnG,EAAQ,OAElBy3B,EAAaz3B,EAAQ,OAErB03B,EAAkB,CAAC,YAAa,SAAU,WAC1CC,EAAkB,CAAC,YAAa,SAAU,WAE9C,SAASC,EAAe/Q,EAAMgR,GAC5B,OAAOhR,EAAKiR,UAAU,YAAcjR,EAAK3b,WAAWzJ,IAAIo2B,EAC1D,CAEA,SAASE,EAAYlR,EAAMgR,EAAaG,GACtC,IAAIhwB,EAAK6e,EAAKoR,eACVjtB,EAAU4sB,EAAe/Q,EAAMgR,GAEf,MAAhBG,IACS,MAAXhtB,IAAoBA,EAAU,GAC9BA,GAAWgtB,GAGbhwB,EAAGkwB,UAAYlwB,EAAGkwB,WAClBlwB,EAAGmwB,UAAS,SAAUpR,GACD,UAAfA,EAAM9lB,MACR8lB,EAAMtT,SAAS,UAAWzI,EAE9B,GACF,CAEA,SAASotB,EAAWvR,EAAMgR,GACxB,IAAI7sB,EAAU4sB,EAAe/Q,EAAMgR,GAC/B7vB,EAAK6e,EAAKoR,eACdjwB,EAAGqwB,WAAarwB,EAAGqwB,YACnBrwB,EAAGmwB,UAAS,SAAUpR,GACD,UAAfA,EAAM9lB,MACR8lB,EAAMtT,SAAS,UAAWzI,EAE9B,GACF,CAEA,IAAItJ,EAAWO,EAAQwE,gBAAgB,CACrCxF,KAAM,QACN2mB,KAAM,SAAUhnB,EAASC,GACvB,IAAIy3B,EAAa,IAAI5Q,EACjB6Q,EAAW,IAAInB,EACfxwB,EAAQrI,KAAKqI,MACjBrI,KAAKi6B,YAAc,IAAInB,EAAex2B,EAAIujB,SAC1C7lB,KAAKk6B,gBAAkB,CACrBpkB,OAAQzN,GAEVA,EAAMc,IAAI4wB,EAAW1xB,OACrBA,EAAMc,IAAI6wB,EAAS3xB,OACnBrI,KAAKspB,YAAcyQ,EACnB/5B,KAAKm6B,UAAYH,EACjBh6B,KAAKo6B,cAAe,CACtB,EACAt6B,OAAQ,SAAUuE,EAAahC,EAASC,GACtC,IAAIQ,EAAWuB,EAAYa,iBAC3BlF,KAAK+pB,OAAS1lB,EACdrE,KAAKq6B,gBAAkBh2B,EAAYnB,IAAI,kBACvC,IAAI62B,EAAa/5B,KAAKspB,YAClB0Q,EAAWh6B,KAAKm6B,UAChB9xB,EAAQrI,KAAKqI,MAEjB,GAAsB,SAAlBvF,EAASJ,KAAiB,CAC5B,IAAI43B,EAAe,CACjB5zB,SAAU5D,EAAS4D,SACnBD,MAAO3D,EAAS2D,OAGdzG,KAAKo6B,aACP/xB,EAAM+E,KAAKktB,GAEX1yB,EAAQoC,YAAY3B,EAAOiyB,EAAcj2B,EAE7C,CAGA60B,EAAW70B,EAAYsyB,WAAY32B,KAAKu6B,oBAAoBl2B,IAC5D,IAAIzD,EAAOyD,EAAYG,UACvBu1B,EAAWvQ,WAAW5oB,GACtB,IAAIm1B,EAAW1xB,EAAYwyB,cAC3BmD,EAASxQ,WAAWuM,GAEpB/1B,KAAKw6B,0BAELx6B,KAAKy6B,kBAAkBp2B,EAAahC,EAASC,GAE7Co4B,aAAa16B,KAAK26B,gBAClB,IAAI/F,EAAcvwB,EAAYuwB,YAC1ByD,EAAkBh0B,EAAYnB,IAAI,yBAElC0xB,GACF50B,KAAK46B,2BAA2BhG,EAAayD,GAG/Cz3B,EAAK0J,mBAAkB,SAAUb,EAAIhF,GACnC,IAAI4E,EAAYzI,EAAK0I,aAAa7E,GAElCgF,EAAGyN,IAAI,QAAQA,IAAI,WACnB,IAAIshB,EAAY53B,EAAK0I,aAAa7E,GAAKvB,IAAI,aAEvCs1B,GACF/uB,EAAGnJ,GAAG,QAAQ,WACRs0B,IACFA,EAAYiG,UACX76B,KAAK86B,YAAc96B,KAAK46B,2BAA2BhG,EAAayD,GACjEzD,EAAYmG,SAASt2B,GAErB7D,EAAKge,cAAcna,EAAKgF,EAAG/C,UAE/B,GAAG1G,MAAMM,GAAG,WAAW,WACjBs0B,GACFA,EAAYoG,WAAWv2B,EAE3B,GAAGzE,MAGLyJ,EAAGwxB,aAAazC,GAAa5D,GAC7BnrB,EAAGyN,IAAI,YAAazN,EAAGyxB,sBACvBzxB,EAAGyN,IAAI,WAAYzN,EAAG0xB,wBAElB9xB,EAAUnG,IAAI,wBAChBuG,EAAGnJ,GAAG,YAAamJ,EAAGyxB,qBAAuB,WAC3C54B,EAAI84B,eAAe,CACjB14B,KAAM,qBACN0jB,SAAU/hB,EAAYgiB,GACtB9hB,UAAWkF,EAAGlF,WAElB,GACAkF,EAAGnJ,GAAG,WAAYmJ,EAAG0xB,uBAAyB,WAC5C74B,EAAI84B,eAAe,CACjB14B,KAAM,uBACN0jB,SAAU/hB,EAAYgiB,IAE1B,GAEJ,GAAGrmB,MACHY,EAAKg2B,MAAMyE,UAAS,SAAUnE,GAC5B,IAAIztB,EAAKytB,EAAKwC,eACdjwB,EAAGyN,IAAI,YAAazN,EAAGyxB,sBACvBzxB,EAAGyN,IAAI,WAAYzN,EAAG0xB,wBAElBjE,EAAKvqB,WAAWzJ,IAAI,wBACtBuG,EAAGnJ,GAAG,YAAamJ,EAAGyxB,qBAAuB,WAC3C54B,EAAI84B,eAAe,CACjB14B,KAAM,qBACN0jB,SAAU/hB,EAAYgiB,GACtBiV,cAAepE,EAAK3yB,WAExB,GACAkF,EAAGnJ,GAAG,WAAYmJ,EAAG0xB,uBAAyB,WAC5C74B,EAAI84B,eAAe,CACjB14B,KAAM,uBACN0jB,SAAU/hB,EAAYgiB,IAE1B,GAEJ,IACA,IAAIkV,EAAoD,aAA9Bl3B,EAAYnB,IAAI,WAA4BmB,EAAYnB,IAAI,wBAClFiJ,EAAKvL,EAAK4I,UAAU,MACpB4C,EAAKxL,EAAK4I,UAAU,MACxB5I,EAAK0J,mBAAkB,SAAUb,EAAIhF,GACnC,IAAI+2B,EAAa/xB,EAAGgyB,gBAEpB,GAAIF,EAAqB,CACvB,IAAIG,EAAM96B,EAAK+K,cAAclH,GACzBk3B,EAAMn1B,KAAKo1B,MAAMF,EAAI,GAAKtvB,EAAIsvB,EAAI,GAAKvvB,GAEvCwvB,EAAM,IACRA,EAAgB,EAAVn1B,KAAK0L,GAASypB,GAGtB,IAAIE,EAASH,EAAI,GAAKvvB,EAElB0vB,IACFF,GAAYn1B,KAAK0L,IAGnB,IAAIoH,EAAeuiB,EAAS,OAAS,QACrCL,EAAWtmB,SAAS,CAClB4mB,cAAeH,EACfriB,aAAcA,EACdyiB,WAAY,WAEdP,EAAW5uB,aAAe4uB,EAAW5uB,WAAW0M,aAAeA,EACjE,MACEkiB,EAAWtmB,SAAS,CAClB4mB,aAAc,GAGpB,IACA97B,KAAKo6B,cAAe,CACtB,EACA9xB,QAAS,WACPtI,KAAKi6B,aAAej6B,KAAKi6B,YAAY3xB,UACrCtI,KAAKk6B,gBAAkB,CAAC,CAC1B,EACArC,mBAAoB,SAAUxzB,EAAahC,EAASC,EAAKyB,GACvD,IAAInD,EAAOZ,KAAK+pB,OAAOvlB,UAEnBoyB,EAAQh2B,EAAKg2B,MACbryB,EAAYR,EAAQQ,UACpB+2B,EAAgBv3B,EAAQu3B,cACxBU,EAAOpF,EAAMqF,eAAe13B,GAC5B2yB,EAAON,EAAMO,eAAemE,IAE3BU,GAAS9E,KAIdN,EAAMsF,UAAS,SAAUF,GACvBxC,EAAYwC,EAAM7C,EAAiB,GACrC,IACAvC,EAAMyE,UAAS,SAAUnE,GACvBsC,EAAYtC,EAAMkC,EAAiB,GACrC,IAEI4C,IACFnC,EAAWmC,EAAM7C,GACjBr3B,EAAOU,KAAKw5B,EAAK3G,OAAO,SAAU8G,GAC5BA,EAAa53B,UAAY,IAI7Bs1B,EAAWsC,EAAc/C,GACzBS,EAAWsC,EAAa9E,MAAO8B,GAC/BU,EAAWsC,EAAa5E,MAAO4B,GACjC,KAGEjC,IACF2C,EAAW3C,EAAMkC,GACjBS,EAAW3C,EAAKG,MAAO8B,GACvBU,EAAW3C,EAAKK,MAAO4B,IAE3B,EACAiD,qBAAsB,SAAU/3B,EAAahC,EAASC,EAAKyB,GACzD,IAAI6yB,EAAQ52B,KAAK+pB,OAAOvlB,UAAUoyB,MAElCA,EAAMsF,UAAS,SAAUF,GACvBxC,EAAYwC,EAAM7C,EACpB,IACAvC,EAAMyE,UAAS,SAAUnE,GACvBsC,EAAYtC,EAAMkC,EACpB,GACF,EACAwB,2BAA4B,SAAUhG,EAAayD,GACjD,IAAIzC,EAAO51B,MAEX,SAAU6yB,IACR+B,EAAY/B,MAAK,SAAUwJ,GACzBzG,EAAKnM,aAAamM,EAAK7L,SACtB6L,EAAKkF,YAAcuB,KAAahE,EAAkBzC,EAAK+E,eAAiB2B,WAAWzJ,EAAM,IAAMA,IAClG,GACD,EALD,EAMF,EACA4H,kBAAmB,SAAUp2B,EAAahC,EAASC,GACjD,IAAIi6B,EAAav8B,KAAKi6B,YAClBuC,EAAiBx8B,KAAKk6B,gBACtB7xB,EAAQrI,KAAKqI,MACjBk0B,EAAWE,mBAAkB,SAAUC,EAAGzwB,EAAGC,GAC3C,IAAIxB,EAAOrC,EAAMs0B,kBAEjB,OADAjyB,EAAKkyB,eAAev0B,EAAMw0B,WACnBnyB,EAAKoyB,QAAQ7wB,EAAGC,KAAO+sB,EAAoByD,EAAGp6B,EAAK+B,EAC5D,IAE0C,SAAtCA,EAAYa,iBAAiBxC,MAKjC65B,EAAWQ,OAAO14B,EAAYnB,IAAI,SAClCs5B,EAAe92B,UAAYrB,EAAYnB,IAAI,cAC3Cs5B,EAAej3B,KAAOlB,EAAYa,iBAAiBU,UACnD22B,EAAWrlB,IAAI,OAAOA,IAAI,QAAQ5W,GAAG,OAAO,SAAU0F,EAAIC,GACxD8yB,EAAWiE,gBAAgBR,EAAgBx2B,EAAIC,GAC/C3D,EAAI84B,eAAe,CACjBhV,SAAU/hB,EAAYgiB,GACtB3jB,KAAM,YACNsD,GAAIA,EACJC,GAAIA,GAER,IAAG3F,GAAG,QAAQ,SAAUiF,EAAM03B,EAAQC,GACpCnE,EAAWoE,iBAAiBX,EAAgBj3B,EAAM03B,EAAQC,GAC1D56B,EAAI84B,eAAe,CACjBhV,SAAU/hB,EAAYgiB,GACtB3jB,KAAM,YACN6C,KAAMA,EACNqB,QAASq2B,EACTn2B,QAASo2B,IAGXl9B,KAAKw6B,0BAELtB,EAAW70B,EAAYsyB,WAAY32B,KAAKu6B,oBAAoBl2B,IAE5DrE,KAAKm6B,UAAU1Q,cACjB,GAAGzpB,OA9BDu8B,EAAWa,SA+Bf,EACA5C,wBAAyB,WACvB,IAAIn2B,EAAcrE,KAAK+pB,OACnBnpB,EAAOyD,EAAYG,UAEnB64B,EAAYr9B,KAAKu6B,oBAAoBl2B,GAErCi5B,EAAW,CAACD,EAAWA,GAC3Bz8B,EAAK0J,mBAAkB,SAAUb,EAAIhF,GACnCgF,EAAG2D,KAAK,QAASkwB,EACnB,GACF,EACA/C,oBAAqB,SAAUl2B,GAC7B,IAAIvB,EAAWuB,EAAYa,iBAE3B,GAAsB,SAAlBpC,EAASJ,KACX,OAAO,EAGT,IAAIg2B,EAAiB14B,KAAKq6B,gBACtBkD,EAAaz6B,EAAS2D,MACtB+2B,EAAYD,GAAcA,EAAW,IAAM,EAE3CE,EAAW36B,EAAS8C,UACpBy3B,GAAaI,EAAW,GAAK/E,EAAiB,EAClD,OAAO2E,EAAYG,CACrB,EACA/T,aAAc,SAAUplB,GACtB60B,EAAW70B,EAAYsyB,WAAY32B,KAAKu6B,oBAAoBl2B,IAE5DrE,KAAKspB,YAAYG,eAEjBzpB,KAAKm6B,UAAU1Q,cACjB,EACAvf,OAAQ,SAAU7H,EAASC,GACzBtC,KAAKspB,aAAetpB,KAAKspB,YAAYpf,SACrClK,KAAKm6B,WAAan6B,KAAKm6B,UAAUjwB,QACnC,IAGF9G,EAAOvB,QAAUsB,C,iCClWjB,IAAIu6B,EAAYj8B,EAAQ,OAEpBk8B,EAAOl8B,EAAQ,OAEfm8B,EAAK,GACLC,EAAK,GACLC,EAAK,GACLC,EAAcL,EAAUK,YACxBC,EAAeL,EAAKM,WACpBC,EAAU13B,KAAKiH,IAEnB,SAAS0wB,EAAqBC,EAAa/4B,EAAQ4qB,GASjD,IARA,IAIIoO,EAJAC,EAAKF,EAAY,GACjBG,EAAKH,EAAY,GACjBI,EAAKJ,EAAY,GACjBK,EAAIl4B,IAEJm4B,EAAezO,EAASA,EACxB0O,EAAW,GAENC,EAAK,GAAKA,GAAM,GAAKA,GAAM,GAAK,CACvChB,EAAG,GAAKG,EAAYO,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAII,GACzChB,EAAG,GAAKG,EAAYO,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAII,GACzC,IAAI11B,EAAOg1B,EAAQF,EAAaJ,EAAIv4B,GAAUq5B,GAE1Cx1B,EAAOu1B,IACTA,EAAIv1B,EACJm1B,EAAIO,EAER,CAIA,IAAK,IAAI3oB,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAE3B,IAAI4oB,EAAOR,EAAIM,EAGfd,EAAG,GAAKE,EAAYO,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIH,GACzCR,EAAG,GAAKE,EAAYO,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIH,GACzCP,EAAG,GAAKC,EAAYO,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIK,GACzCf,EAAG,GAAKC,EAAYO,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIK,GACrC31B,EAAO80B,EAAaH,EAAIx4B,GAAUq5B,EAEtC,GAAIR,EAAQh1B,GAAQ,IAClB,MAIF,IAAI41B,EAAWd,EAAaF,EAAIz4B,GAAUq5B,EAC1CC,GAAY,EAERz1B,EAAO,EACL41B,GAAY,EACdT,GAAQM,EAERN,GAAQM,EAGNG,GAAY,EACdT,GAAQM,EAERN,GAAQM,CAGd,CAEA,OAAON,CACT,CAGA,SAASl7B,EAASyzB,EAAOnwB,GACvB,IAAIs4B,EAAO,GACPC,EAAqBtB,EAAUsB,mBAC/BC,EAAM,CAAC,GAAI,GAAI,IACfC,EAAO,CAAC,GAAI,IACZC,EAAI,GAGR,SAASC,EAAcpD,GACrB,IAAIltB,EAAaktB,EAAKzC,UAAU,cAMhC,OAJIzqB,aAAsBuwB,QACxBvwB,GAAcA,EAAW,GAAKA,EAAW,IAAM,GAG1CA,CACT,CAVArI,GAAS,EAYTmwB,EAAMyE,UAAS,SAAUnE,EAAMzyB,GAC7B,IAAIwoB,EAAaiK,EAAK1tB,YAClB81B,EAAapI,EAAKqC,UAAU,cAC5BgG,EAAWrI,EAAKqC,UAAU,YAEzBtM,EAAWuS,aACdvS,EAAWuS,WAAa,CAAC7B,EAAKpZ,MAAM0I,EAAW,IAAK0Q,EAAKpZ,MAAM0I,EAAW,KAEtEA,EAAW,IACbA,EAAWuS,WAAWx+B,KAAK28B,EAAKpZ,MAAM0I,EAAW,MAIrD,IAAIwS,EAAiBxS,EAAWuS,WAEhC,GAAqB,MAAjBvS,EAAW,GAAY,CAKzB,GAJA0Q,EAAK+B,KAAKT,EAAI,GAAIQ,EAAe,IACjC9B,EAAK+B,KAAKT,EAAI,GAAIQ,EAAe,IACjC9B,EAAK+B,KAAKT,EAAI,GAAIQ,EAAe,IAE7BH,GAA4B,QAAdA,EAAsB,CACtC,IAAIxwB,EAAaswB,EAAclI,EAAKG,OAChCgH,EAAIF,EAAqBc,EAAKQ,EAAe,GAAI3wB,EAAarI,GAElEu4B,EAAmBC,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIZ,EAAGU,GACvDE,EAAI,GAAG,GAAKF,EAAK,GACjBE,EAAI,GAAG,GAAKF,EAAK,GACjBC,EAAmBC,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIZ,EAAGU,GACvDE,EAAI,GAAG,GAAKF,EAAK,GACjBE,EAAI,GAAG,GAAKF,EAAK,EACnB,CAEA,GAAIQ,GAAwB,QAAZA,EAAoB,CAC9BzwB,EAAaswB,EAAclI,EAAKK,OAChC8G,EAAIF,EAAqBc,EAAKQ,EAAe,GAAI3wB,EAAarI,GAElEu4B,EAAmBC,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIZ,EAAGU,GACvDE,EAAI,GAAG,GAAKF,EAAK,GACjBE,EAAI,GAAG,GAAKF,EAAK,GACjBC,EAAmBC,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIZ,EAAGU,GACvDE,EAAI,GAAG,GAAKF,EAAK,GACjBE,EAAI,GAAG,GAAKF,EAAK,EACnB,CAGApB,EAAK+B,KAAKzS,EAAW,GAAIgS,EAAI,IAC7BtB,EAAK+B,KAAKzS,EAAW,GAAIgS,EAAI,IAC7BtB,EAAK+B,KAAKzS,EAAW,GAAIgS,EAAI,GAC/B,KACK,CAMD,GALAtB,EAAK+B,KAAKR,EAAK,GAAIO,EAAe,IAClC9B,EAAK+B,KAAKR,EAAK,GAAIO,EAAe,IAClC9B,EAAKgC,IAAIR,EAAGD,EAAK,GAAIA,EAAK,IAC1BvB,EAAKiC,UAAUT,EAAGA,GAEdG,GAA4B,QAAdA,EAAsB,CAClCxwB,EAAaswB,EAAclI,EAAKG,OACpCsG,EAAKkC,YAAYX,EAAK,GAAIA,EAAK,GAAIC,EAAGrwB,EAAarI,EACrD,CAEA,GAAI84B,GAAwB,QAAZA,EAAoB,CAC9BzwB,EAAaswB,EAAclI,EAAKK,OACpCoG,EAAKkC,YAAYX,EAAK,GAAIA,EAAK,GAAIC,GAAIrwB,EAAarI,EACtD,CAEAk3B,EAAK+B,KAAKzS,EAAW,GAAIiS,EAAK,IAC9BvB,EAAK+B,KAAKzS,EAAW,GAAIiS,EAAK,GAChC,CACJ,GACF,CAEA97B,EAAOvB,QAAUsB,C,oBChKjB,SAASA,EAASd,GAChB,IAAIy9B,EAAez9B,EAAQ09B,eAAe,CACxC77B,SAAU,WAGP47B,GAAiBA,EAAa3rB,QAInC9R,EAAQ+E,iBAAiB,SAAS,SAAU44B,GAC1C,IAAIpI,EAAiBoI,EAAYlJ,oBAC7BF,EAAQoJ,EAAYrJ,WACpB/1B,EAAOg2B,EAAMh2B,KACbq/B,EAAgBrI,EAAevJ,SAASuJ,EAAelzB,SAC3D9D,EAAKs/B,YAAW,SAAUz7B,GACxB,IAAIwxB,EAAQr1B,EAAK0I,aAAa7E,GAC1BkzB,EAAW1B,EAAM9oB,WAAW,YAEhC,GAAgB,MAAZwqB,EAAkB,CACI,kBAAbA,IACTA,EAAWsI,EAActI,IAI3B,IAAK,IAAI1hB,EAAI,EAAGA,EAAI6pB,EAAa3rB,OAAQ8B,IACvC,IAAK6pB,EAAa7pB,GAAGtR,WAAWgzB,GAC9B,OAAO,CAGb,CAEA,OAAO,CACT,GACF,GAAG33B,KACL,CAEAoD,EAAOvB,QAAUsB,C,oBCpCjB,SAASA,EAASd,GAChB,IAAI89B,EAAe,CAAC,EACpB99B,EAAQ+E,iBAAiB,SAAS,SAAU/C,GAC1C,IAAIuzB,EAAiBvzB,EAAYyyB,oBAC7Bl2B,EAAOyD,EAAYG,UACnB47B,EAAqB,CAAC,EAC1BxI,EAAep1B,MAAK,SAAUiC,GAC5B,IAAIjB,EAAOo0B,EAAelzB,QAAQD,GAElC27B,EAAmB,MAAQ58B,GAAQiB,EACnC,IAAI4E,EAAYuuB,EAAetuB,aAAa7E,GACxC8H,EAAQlD,EAAUnG,IAAI,2BAA6BmB,EAAYg8B,oBAAoB78B,EAAM28B,GAC7FvI,EAAevY,cAAc5a,EAAK,QAAS8H,EAC7C,IAEIqrB,EAAe5gB,SACjBpW,EAAK4B,MAAK,SAAUiC,GAClB,IAAIwxB,EAAQr1B,EAAK0I,aAAa7E,GAC1BkzB,EAAW1B,EAAM9oB,WAAW,YAEhB,MAAZwqB,IACsB,kBAAbA,IACTA,EAAWyI,EAAmB,MAAQzI,IAGnC/2B,EAAK4L,cAAc/H,EAAK,SAAS,IACpC7D,EAAKye,cAAc5a,EAAK,QAASmzB,EAAeprB,cAAcmrB,EAAU,UAG9E,GAEJ,GACF,CAEAv0B,EAAOvB,QAAUsB,C,wBClCjB,IAAIm9B,EAAwB7+B,EAAQ,OAEhCkzB,EAAiB2L,EAAsB3L,eAE3C,SAASxxB,EAASd,GAChBA,EAAQ+E,iBAAiB,SAAS,SAAU/C,GACR,aAA9BA,EAAYnB,IAAI,WAClByxB,EAAetwB,EAEnB,GACF,CAEAjB,EAAOvB,QAAUsB,C,wBCZjB,IAAIw6B,EAAOl8B,EAAQ,OAEnB,SAASkzB,EAAetwB,GACtB,IAAIvB,EAAWuB,EAAYa,iBAE3B,IAAIpC,GAA8B,SAAlBA,EAASJ,KAAzB,CAIA,IAAIgI,EAAO5H,EAAS65B,kBAChB7G,EAAWzxB,EAAYG,UACvBoyB,EAAQd,EAASc,MACjBhE,EAAQ,EACR7H,EAAM+K,EAAS9K,OAAO,SACtBuV,EAAsB,EAAV/5B,KAAK0L,IAAU6Y,GAAO+K,EAAS9e,SAC3C7K,EAAKzB,EAAKa,MAAQ,EAAIb,EAAKuB,EAC3BG,EAAK1B,EAAKsB,OAAS,EAAItB,EAAKwB,EAC5BT,EAAIjF,KAAKJ,IAAIsE,EAAKa,MAAOb,EAAKsB,QAAU,EAC5C4qB,EAAMsF,UAAS,SAAUF,GACvB,IAAIjuB,EAAQiuB,EAAKwE,SAAS,SAC1B5N,GAAS2N,GAAaxV,EAAMhd,EAAQ,GAAK,EACzCiuB,EAAKyE,UAAU,CAACh1B,EAAIjF,KAAK0sB,IAAIN,GAASzmB,EAAIV,EAAIjF,KAAK4sB,IAAIR,GAASxmB,IAChEwmB,GAAS2N,GAAaxV,EAAMhd,EAAQ,GAAK,CAC3C,IACA+nB,EAAS2K,UAAU,CACjBt0B,GAAIA,EACJC,GAAIA,IAENwqB,EAAMyE,UAAS,SAAUnE,GACvB,IAGIwJ,EAHA9H,EAAY1B,EAAKvqB,WAAWzJ,IAAI,+BAAiC,EACjEq7B,EAAKZ,EAAKpZ,MAAM2S,EAAKG,MAAM7tB,aAC3Bg1B,EAAKb,EAAKpZ,MAAM2S,EAAKK,MAAM/tB,aAE3Bm3B,GAAOpC,EAAG,GAAKC,EAAG,IAAM,EACxBoC,GAAOrC,EAAG,GAAKC,EAAG,IAAM,GAEvB5F,IACHA,GAAa,EACb8H,EAAM,CAACv0B,EAAKysB,EAAY+H,GAAO,EAAI/H,GAAYxsB,EAAKwsB,EAAYgI,GAAO,EAAIhI,KAG7E1B,EAAKuJ,UAAU,CAAClC,EAAIC,EAAIkC,GAC1B,GAnCA,CAoCF,CAEA7+B,EAAQ8yB,eAAiBA,C,iCC7CzB,IAAIkM,EAAOp/B,EAAQ,OAEfq/B,EAAUr/B,EAAQ,MAElBwsB,EAAgB6S,EAAQ7S,cAExB8S,EAAOt/B,EAAQ,MAGnB,SAASusB,EAAY3pB,EAAa/B,EAAK0+B,GACrC,IAAInzB,EAASxJ,EAAY6pB,qBAEzB,OADArgB,EAAOmzB,OAASA,EACT/S,EAAcpgB,EAAQ,CAC3BtC,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aAEhB,CAEA,SAAS/N,EAASd,EAASC,GACzB,IAAI2+B,EAAW,GA+Cf,OA9CA5+B,EAAQ+E,iBAAiB,SAAS,SAAU/C,GAC1C,IAAI68B,EAAe78B,EAAYnB,IAAI,oBAEnC,IAAKg+B,GAAiC,SAAjBA,EAAyB,CAC5C,IAAItgC,EAAOyD,EAAYG,UACnB28B,EAAYvgC,EAAKytB,UAAS,SAAU5pB,GACtC,IAAI4E,EAAYzI,EAAK0I,aAAa7E,GAClC,MAAO,EAAE4E,EAAUnG,IAAI,MAAOmG,EAAUnG,IAAI,KAC9C,IACIkD,EAAM,GACNE,EAAM,GACVy6B,EAAKK,WAAWD,EAAW/6B,EAAKE,GAE5BA,EAAI,GAAKF,EAAI,KAAO,IACtBE,EAAI,IAAM,EACVF,EAAI,IAAM,GAGRE,EAAI,GAAKF,EAAI,KAAO,IACtBE,EAAI,IAAM,EACVF,EAAI,IAAM,GAGZ,IAAI46B,GAAU16B,EAAI,GAAKF,EAAI,KAAOE,EAAI,GAAKF,EAAI,IAE3CgpB,EAAWpB,EAAY3pB,EAAa/B,EAAK0+B,GAEzC3iB,MAAM2iB,KACR56B,EAAM,CAACgpB,EAASnjB,EAAGmjB,EAASljB,GAC5B5F,EAAM,CAAC8oB,EAASnjB,EAAImjB,EAAS7jB,MAAO6jB,EAASljB,EAAIkjB,EAASpjB,SAG5D,IAAIq1B,EAAU/6B,EAAI,GAAKF,EAAI,GACvBk7B,EAAWh7B,EAAI,GAAKF,EAAI,GACxBm7B,EAAYnS,EAAS7jB,MACrBi2B,EAAapS,EAASpjB,OACtBy1B,EAAep9B,EAAYa,iBAAmB,IAAI27B,EACtDY,EAAa/7B,UAAYrB,EAAYnB,IAAI,cACzCu+B,EAAaC,gBAAgBt7B,EAAI,GAAIA,EAAI,GAAIi7B,EAASC,GACtDG,EAAaE,YAAYvS,EAASnjB,EAAGmjB,EAASljB,EAAGq1B,EAAWC,GAE5DC,EAAar8B,UAAUf,EAAYnB,IAAI,WACvCu+B,EAAan8B,QAAQjB,EAAYnB,IAAI,SACrC+9B,EAASjgC,KAAKygC,EAChB,CACF,IACOR,CACT,CAEA79B,EAAOvB,QAAUsB,C,oBCrEjB,SAASy8B,EAAUnR,GAKjB,OAJMA,aAAa4Q,QACjB5Q,EAAI,CAACA,EAAGA,IAGHA,CACT,CAEA,SAAStrB,EAASd,GAChBA,EAAQ+E,iBAAiB,SAAS,SAAU/C,GAC1C,IAAIuyB,EAAQvyB,EAAYsyB,WACpBZ,EAAW1xB,EAAYwyB,cACvB1kB,EAAaytB,EAAUv7B,EAAYnB,IAAI,eACvC4L,EAAa8wB,EAAUv7B,EAAYnB,IAAI,mBACvC0+B,EAAa,yBAAyBC,MAAM,KAC5CC,EAAe,2BAA2BD,MAAM,KACpD9L,EAAS1uB,UAAU,aAAc8K,GAAcA,EAAW,IAC1D4jB,EAAS1uB,UAAU,WAAY8K,GAAcA,EAAW,IACxD4jB,EAAS1uB,UAAU,iBAAkByH,GAAcA,EAAW,IAC9DinB,EAAS1uB,UAAU,eAAgByH,GAAcA,EAAW,IAC5DinB,EAAS1uB,UAAU,QAAShD,EAAYnB,IAAI0+B,IAC5C7L,EAAS1uB,UAAU,UAAWhD,EAAYnB,IAAI4+B,IAC9C/L,EAASvzB,MAAK,SAAUiC,GACtB,IAAI4E,EAAY0sB,EAASzsB,aAAa7E,GAClCyyB,EAAON,EAAMO,eAAe1yB,GAC5B0N,EAAaytB,EAAUv2B,EAAU8D,WAAW,UAAU,IACtD2B,EAAa8wB,EAAUv2B,EAAU8D,WAAW,cAAc,IAE1DZ,EAAQlD,EAAUnG,IAAI0+B,GACtBn1B,EAAUpD,EAAUnG,IAAI4+B,GAE5B,OAAQv1B,GACN,IAAK,SACHA,EAAQ2qB,EAAKG,MAAMkC,UAAU,SAC7B,MAEF,IAAK,SACHhtB,EAAQ2qB,EAAKK,MAAMgC,UAAU,SAC7B,MAGJpnB,EAAW,IAAM+kB,EAAK7vB,UAAU,aAAc8K,EAAW,IACzDA,EAAW,IAAM+kB,EAAK7vB,UAAU,WAAY8K,EAAW,IACvDrD,EAAW,IAAMooB,EAAK7vB,UAAU,iBAAkByH,EAAW,IAC7DA,EAAW,IAAMooB,EAAK7vB,UAAU,eAAgByH,EAAW,IAC3DooB,EAAK7vB,UAAU,QAASkF,GACxB2qB,EAAK7vB,UAAU,UAAWoF,EAC5B,GACF,GACF,CAEArJ,EAAOvB,QAAUsB,C,wBCnDjB,IAAIw6B,EAAOl8B,EAAQ,OAEfo+B,EAAclC,EAAKkC,YAIvB,SAASjL,EAAYe,EAAON,EAAO0M,GAiBjC,IAhBA,IAAIr3B,EAAOq3B,EAAKr3B,KACZa,EAAQb,EAAKa,MACbS,EAAStB,EAAKsB,OACd3G,EAAS,CAACqF,EAAKuB,EAAIV,EAAQ,EAAGb,EAAKwB,EAAIF,EAAS,GAEhDmsB,EAA0B,MAAhB4J,EAAK5J,QAAkB,GAAM4J,EAAK5J,QAWvCliB,EAAI,EAAGA,EAAI0f,EAAMxhB,OAAQ8B,IAAK,CACrC,IAAI+rB,EAAIrM,EAAM1f,GAET+rB,EAAE5jB,IAgBL4jB,EAAE5jB,EAAIuf,EAAKv7B,OAAOmJ,GAAS/E,KAAKy7B,SAAW,IAAO58B,EAAO,GAAI2G,GAAUxF,KAAKy7B,SAAW,IAAO58B,EAAO,KAGvG28B,EAAEE,GAAKvE,EAAKpZ,MAAMyd,EAAE5jB,GACpB4jB,EAAE3M,MAAQ,IACZ,CAKA,IAAI8M,EAAW,GACf,MAAO,CACLtH,OAAQ,WACNsH,EAAW,EACb,EACApH,SAAU,SAAUt2B,GAClBkxB,EAAMlxB,GAAK29B,OAAQ,CACrB,EACApH,WAAY,SAAUv2B,GACpBkxB,EAAMlxB,GAAK29B,OAAQ,CACrB,EACAvP,KAAM,SAAUrb,GAId,IAHA,IAAI6qB,EAAM,GACNC,EAAO3M,EAAMxhB,OAER8B,EAAI,EAAGA,EAAIof,EAAMlhB,OAAQ8B,IAAK,CACrC,IAAIymB,EAAIrH,EAAMpf,GACVssB,EAAK7F,EAAE6F,GACPC,EAAK9F,EAAE8F,GACX7E,EAAKgC,IAAI0C,EAAKG,EAAGpkB,EAAGmkB,EAAGnkB,GACvB,IAAIqgB,EAAId,EAAKnP,IAAI6T,GAAO3F,EAAE+B,EACtBgE,EAAID,EAAGC,GAAKF,EAAGE,EAAID,EAAGC,GAEtBpkB,MAAMokB,KACRA,EAAI,GAGN9E,EAAKiC,UAAUyC,EAAKA,IACnBE,EAAGH,OAASvC,EAAY0C,EAAGnkB,EAAGmkB,EAAGnkB,EAAGikB,EAAKI,EAAIhE,EAAI0D,IACjDK,EAAGJ,OAASvC,EAAY2C,EAAGpkB,EAAGokB,EAAGpkB,EAAGikB,IAAO,EAAII,GAAKhE,EAAI0D,EAC3D,CAGA,IAASlsB,EAAI,EAAGA,EAAIqsB,EAAMrsB,IAAK,CAC7B,IAAI+rB,EAAIrM,EAAM1f,GAET+rB,EAAEI,QACLzE,EAAKgC,IAAI0C,EAAKh9B,EAAQ28B,EAAE5jB,GAIxByhB,EAAYmC,EAAE5jB,EAAG4jB,EAAE5jB,EAAGikB,EAAKlK,EAAUgK,GAEzC,CAIA,IAASlsB,EAAI,EAAGA,EAAIqsB,EAAMrsB,IACxB,CAAIssB,EAAK5M,EAAM1f,GAEf,IAFA,IAESqd,EAAIrd,EAAI,EAAGqd,EAAIgP,EAAMhP,IAAK,CAC7BkP,EAAK7M,EAAMrC,GACfqK,EAAKgC,IAAI0C,EAAKG,EAAGpkB,EAAGmkB,EAAGnkB,GACnBqgB,EAAId,EAAKnP,IAAI6T,GAEP,IAAN5D,IAEFd,EAAKtiB,IAAIgnB,EAAK77B,KAAKy7B,SAAW,GAAKz7B,KAAKy7B,SAAW,IACnDxD,EAAI,GAGN,IAAIiE,GAAWH,EAAGI,IAAMH,EAAGG,KAAOlE,EAAIA,GACrC8D,EAAGH,OAASvC,EAAY0C,EAAGL,GAAIK,EAAGL,GAAIG,EAAKK,IAC3CF,EAAGJ,OAASvC,EAAY2C,EAAGN,GAAIM,EAAGN,GAAIG,GAAMK,EAC/C,CAhBiB,CAmBnB,IAAIvD,EAAI,GAER,IAASlpB,EAAI,EAAGA,EAAIqsB,EAAMrsB,IAAK,CACzB+rB,EAAIrM,EAAM1f,GAET+rB,EAAEI,QACLzE,EAAKgC,IAAIR,EAAG6C,EAAE5jB,EAAG4jB,EAAEE,IACnBrC,EAAYmC,EAAE5jB,EAAG4jB,EAAE5jB,EAAG+gB,EAAGgD,GACzBxE,EAAK+B,KAAKsC,EAAEE,GAAIF,EAAE5jB,GAEtB,CAEA+jB,GAAsB,KACtB3qB,GAAMA,EAAGme,EAAON,EAAO8M,EAAW,IACpC,EAEJ,CAEAtgC,EAAQ+yB,YAAcA,C,wBCzItB,IAAIgO,EAAenhC,EAAQ,OAEvBmzB,EAAcgO,EAAahO,YAE3BiO,EAAsBphC,EAAQ,OAE9BizB,EAAemO,EAAoBnO,aAEnC4L,EAAwB7+B,EAAQ,OAEhCkzB,EAAiB2L,EAAsB3L,eAEvC3kB,EAAUvO,EAAQ,OAElBssB,EAAY/d,EAAQ+d,UAEpB4P,EAAOl8B,EAAQ,OAEfK,EAASL,EAAQ,OAErB,SAAS0B,EAASd,GAChBA,EAAQ+E,iBAAiB,SAAS,SAAU44B,GAC1C,IAAIl9B,EAAWk9B,EAAY96B,iBAE3B,IAAIpC,GAA8B,SAAlBA,EAASJ,KAIzB,GAAkC,UAA9Bs9B,EAAY98B,IAAI,UAAuB,CACzC,IAAI4/B,EAAkB9C,EAAY8C,iBAAmB,CAAC,EAClDlM,EAAQoJ,EAAYrJ,WACpBb,EAAWc,EAAMh2B,KACjBm1B,EAAWa,EAAMb,SACjBgN,EAAa/C,EAAYrzB,SAAS,SAClCsrB,EAAa8K,EAAW7/B,IAAI,cAE5B88B,EAAY8C,gBACdhN,EAAStzB,MAAK,SAAUiC,GACtB,IAAI4hB,EAAKyP,EAASkN,MAAMv+B,GACxBqxB,EAASlX,cAAcna,EAAKq+B,EAAgBzc,IAAO,CAACjY,IAAKA,KAC3D,IACU6pB,GAA6B,SAAfA,EAEA,aAAfA,GACTtD,EAAeqL,GAFftL,EAAasL,GAKf,IAAIiD,EAAiBnN,EAASvG,cAAc,SACxC2T,EAAiBnN,EAASxG,cAAc,SAExC2I,EAAY6K,EAAW7/B,IAAI,aAC3Bk1B,EAAa2K,EAAW7/B,IAAI,cAE3BpB,EAAO6Q,QAAQulB,KAClBA,EAAY,CAACA,EAAWA,IAGrBp2B,EAAO6Q,QAAQylB,KAClBA,EAAa,CAACA,EAAYA,IAI5BA,EAAa,CAACA,EAAW,GAAIA,EAAW,IACxC,IAAIzC,EAAQG,EAASzH,SAAS,SAAS,SAAUtgB,EAAOtJ,GACtD,IAAIqB,EAAQgwB,EAASnqB,cAAclH,GAC/Bk+B,EAAM5U,EAAUhgB,EAAOk1B,EAAgB/K,GAM3C,OAJI7Z,MAAMskB,KACRA,GAAOzK,EAAU,GAAKA,EAAU,IAAM,GAGjC,CACLuK,EAAGE,EACHA,IAAKA,EACLP,MAAOtM,EAASxsB,aAAa7E,GAAKvB,IAAI,SACtCkb,GAAItY,GAASuY,MAAMvY,EAAM,KAAOuY,MAAMvY,EAAM,IAAM,KAAOA,EAE7D,IACIuvB,EAAQU,EAAS1H,SAAS,SAAS,SAAUtgB,EAAOtJ,GACtD,IAAIyyB,EAAON,EAAMO,eAAe1yB,GAC5Bg6B,EAAI1Q,EAAUhgB,EAAOm1B,EAAgB9K,GAMzC,OAJI/Z,MAAMogB,KACRA,GAAKrG,EAAW,GAAKA,EAAW,IAAM,GAGjC,CACLmK,GAAI5M,EAAMuB,EAAKG,MAAM9yB,WACrBi+B,GAAI7M,EAAMuB,EAAKK,MAAMhzB,WACrBk6B,EAAGA,EACH7F,UAAW1B,EAAKvqB,WAAWzJ,IAAI,+BAAiC,EAEpE,IAEIwH,GADA5H,EAAWk9B,EAAY96B,iBAChBpC,EAAS65B,mBAChBwG,EAAgBvO,EAAYe,EAAON,EAAO,CAC5C3qB,KAAMA,EACNytB,QAAS4K,EAAW7/B,IAAI,aAEtBkgC,EAAUD,EAActQ,KAE5BsQ,EAActQ,KAAO,SAAUrb,GAC7B,IAAK,IAAIvB,EAAI,EAAGotB,EAAI1N,EAAMxhB,OAAQ8B,EAAIotB,EAAGptB,IACnC0f,EAAM1f,GAAGmsB,OAEXzE,EAAK+B,KAAK/J,EAAM1f,GAAGmI,EAAGwY,EAAMqF,eAAehmB,GAAGzM,aAIlD45B,GAAQ,SAAUzN,EAAON,EAAOgH,GAC9B,IAAK,IAAIpmB,EAAI,EAAGotB,EAAI1N,EAAMxhB,OAAQ8B,EAAIotB,EAAGptB,IAClC0f,EAAM1f,GAAGmsB,OACZxL,EAAMqF,eAAehmB,GAAGwqB,UAAU9K,EAAM1f,GAAGmI,GAG7C0kB,EAAgBhN,EAASkN,MAAM/sB,IAAM0f,EAAM1f,GAAGmI,EAGhD,IAASnI,EAAI,EAAGotB,EAAIhO,EAAMlhB,OAAQ8B,EAAIotB,EAAGptB,IAAK,CAC5C,IAAIymB,EAAIrH,EAAMpf,GACVihB,EAAON,EAAMO,eAAelhB,GAC5BsoB,EAAK7B,EAAE6F,GAAGnkB,EACVogB,EAAK9B,EAAE8F,GAAGpkB,EACVuO,EAASuK,EAAK1tB,YAClBmjB,EAASA,EAASA,EAAO3pB,QAAU,GACnC2pB,EAAO,GAAKA,EAAO,IAAM,GACzBA,EAAO,GAAKA,EAAO,IAAM,GACzBgR,EAAK+B,KAAK/S,EAAO,GAAI4R,GACrBZ,EAAK+B,KAAK/S,EAAO,GAAI6R,IAEhB9B,EAAE9D,YACLjM,EAAO,GAAK,EAAE4R,EAAG,GAAKC,EAAG,IAAM,GAAKD,EAAG,GAAKC,EAAG,IAAM9B,EAAE9D,WAAY2F,EAAG,GAAKC,EAAG,IAAM,GAAKA,EAAG,GAAKD,EAAG,IAAM7B,EAAE9D,YAG9G1B,EAAKuJ,UAAU9T,EACjB,CAGAnV,GAAMA,EAAG6kB,EACX,GACF,EAEA2D,EAAYpL,YAAcuO,EAC1BnD,EAAY8C,gBAAkBA,EAE9BK,EAActQ,MAChB,MAEEmN,EAAYpL,YAAc,IAE9B,GACF,CAEAxxB,EAAOvB,QAAUsB,C,wBCzJjB,IAAIO,EAAUjC,EAAQ,OAElBmD,EAAcnD,EAAQ,OAEtBoD,EAAsBD,EAAYC,oBAClChB,EAAa,CACfnB,KAAM,YACNoC,MAAO,YACPjC,OAAQ,QAYVa,EAAQI,eAAeD,GAAY,SAAUE,EAAS1B,GACpDA,EAAQ4B,cAAc,CACpBC,SAAU,SACVE,MAAOL,IACN,SAAUM,GACX,IAAIvB,EAAWuB,EAAYa,iBACvBC,EAAMN,EAAoB/B,EAAUiB,GACxCM,EAAYe,WAAaf,EAAYe,UAAUD,EAAIE,QACnDhB,EAAYiB,SAAWjB,EAAYiB,QAAQH,EAAII,KACjD,GACF,IASA7B,EAAQI,eAAe,CACrBpB,KAAM,qBACNoC,MAAO,qBACPjC,OAAQ,oCACP,WAAa,IAQhBa,EAAQI,eAAe,CACrBpB,KAAM,uBACNoC,MAAO,uBACPjC,OAAQ,sCACP,WAAa,G,iCCvDhB,IAAIggC,EAAsBphC,EAAQ,OAE9BizB,EAAemO,EAAoBnO,aACnC4O,EAAmBT,EAAoBS,iBAE3C,SAASngC,EAASd,EAASC,GACzBD,EAAQ+E,iBAAiB,SAAS,SAAU/C,GAC1C,IAAIkF,EAASlF,EAAYnB,IAAI,UACzBJ,EAAWuB,EAAYa,iBAE3B,GAAIpC,GAA8B,SAAlBA,EAASJ,KAAiB,CACxC,IAAI9B,EAAOyD,EAAYG,UACnBqV,EAAa/W,EAAS+W,WAC1BjZ,EAAK4B,KAAKqX,GAAY,WAKpB,IAJA,IAAIzQ,EACAsU,EAAO7N,UACP9B,EAAQ,GAEHkI,EAAI,EAAGA,EAAI4D,EAAW1F,OAAQ8B,IAChCoI,MAAMX,EAAKzH,MACd7M,GAAW,GAGb2E,EAAM/M,KAAK0c,EAAKzH,IAGlB,IAAIxR,EAAMiZ,EAAKA,EAAKvJ,OAAS,GAEzB/K,EACFxI,EAAKge,cAAcna,EAAK3B,EAASiD,YAAYgI,IAG7CnN,EAAKge,cAAcna,EAAK,CAAC2J,IAAKA,KAElC,IACAk1B,EAAiB1iC,EAAKg2B,MACxB,MAAYrtB,GAAqB,SAAXA,GACpBmrB,EAAarwB,EAEjB,GACF,CAEAjB,EAAOvB,QAAUsB,C,iCC1CjB,IAAIw6B,EAAOl8B,EAAQ,OAEnB,SAASizB,EAAarwB,GACpB,IAAIvB,EAAWuB,EAAYa,iBAE3B,IAAIpC,GAA8B,SAAlBA,EAASJ,KAAzB,CAIA,IAAIk0B,EAAQvyB,EAAYsyB,WACxBC,EAAMsF,UAAS,SAAUF,GACvB,IAAI/F,EAAQ+F,EAAKrvB,WACjBqvB,EAAKyE,UAAU,EAAExK,EAAM/yB,IAAI,MAAO+yB,EAAM/yB,IAAI,MAC9C,IACAogC,EAAiB1M,EAPjB,CAQF,CAEA,SAAS0M,EAAiB1M,GACxBA,EAAMyE,UAAS,SAAUnE,GACvB,IAAI0B,EAAY1B,EAAKvqB,WAAWzJ,IAAI,+BAAiC,EACjEq7B,EAAKZ,EAAKpZ,MAAM2S,EAAKG,MAAM7tB,aAC3Bg1B,EAAKb,EAAKpZ,MAAM2S,EAAKK,MAAM/tB,aAC3BmjB,EAAS,CAAC4R,EAAIC,IAEb5F,GACHjM,EAAO3rB,KAAK,EAAEu9B,EAAG,GAAKC,EAAG,IAAM,GAAKD,EAAG,GAAKC,EAAG,IAAM5F,GAAY2F,EAAG,GAAKC,EAAG,IAAM,GAAKA,EAAG,GAAKD,EAAG,IAAM3F,IAG1G1B,EAAKuJ,UAAU9T,EACjB,GACF,CAEA9qB,EAAQ6yB,aAAeA,EACvB7yB,EAAQyhC,iBAAmBA,C,wBCjC3B7hC,EAAQ,OAERA,EAAQ,M,iDCFR,IAAIK,EAASL,EAAQ,OASjB8hC,EAAkB,IAOtB,SAASC,IACP,IAAIC,EAAS3hC,EAAO4hC,eACpB1jC,KAAKyjC,OAASA,EACdzjC,KAAK2jC,SAAW,GAChB3jC,KAAK4jC,UAAY,GACjB5jC,KAAK6jC,WAAa,EAClB7jC,KAAK8jC,WAAa,EAClB9jC,KAAK+jC,gBAAkB,CAAC,CAC1B,CAEAP,EAAQthC,UAAY,CAOlBW,OAAQ,SAAUjC,EAAM2K,EAAOS,EAAQ4zB,EAAWoE,EAAWC,GAC3D,IAAIC,EAAQlkC,KAAKmkC,YAEbC,EAAkBpkC,KAAKqkC,aAAazjC,EAAMojC,EAAW,WAErDM,EAAqBtkC,KAAKqkC,aAAazjC,EAAMojC,EAAW,cAExDv4B,EAAIzL,KAAK4jC,UAAY5jC,KAAK2jC,SAC1BF,EAASzjC,KAAKyjC,OACdvP,EAAMuP,EAAOc,WAAW,MACxB/V,EAAM5tB,EAAKuT,OACfsvB,EAAOl4B,MAAQA,EACfk4B,EAAOz3B,OAASA,EAEhB,IAAK,IAAIiK,EAAI,EAAGA,EAAIuY,IAAOvY,EAAG,CAC5B,IAAImI,EAAIxd,EAAKqV,GACThK,EAAImS,EAAE,GACNlS,EAAIkS,EAAE,GACNrQ,EAAQqQ,EAAE,GAEVomB,EAAQ5E,EAAU7xB,GAEtBmmB,EAAIuQ,YAAcD,EAClBtQ,EAAIwQ,UAAUR,EAAOj4B,EAAIR,EAAGS,EAAIT,EAClC,CAEA,IAAKg4B,EAAOl4B,QAAUk4B,EAAOz3B,OAG3B,OAAOy3B,EAIT,IAAIkB,EAAYzQ,EAAI0Q,aAAa,EAAG,EAAGnB,EAAOl4B,MAAOk4B,EAAOz3B,QACxD64B,EAASF,EAAU/jC,KACnBqN,EAAS,EACT62B,EAAWD,EAAO1wB,OAClB2vB,EAAa9jC,KAAK8jC,WAClBD,EAAa7jC,KAAK6jC,WAClBkB,EAAclB,EAAaC,EAE/B,MAAO71B,EAAS62B,EAAU,CACpBN,EAAQK,EAAO52B,EAAS,GAAK,IAAjC,IACI+2B,EAA6D,EAA5Cx+B,KAAKy+B,MAAMT,GAASjB,EAAkB,IAE3D,GAAIiB,EAAQ,EAAG,CACb,IAAIU,EAAWjB,EAAUO,GAASJ,EAAkBE,EAEpDE,EAAQ,IAAMA,EAAQA,EAAQO,EAAcjB,GAC5Ce,EAAO52B,KAAYi3B,EAASF,GAC5BH,EAAO52B,KAAYi3B,EAASF,EAAiB,GAC7CH,EAAO52B,KAAYi3B,EAASF,EAAiB,GAC7CH,EAAO52B,KAAYi3B,EAASF,EAAiB,GAAKR,EAAQ,GAC5D,MACEv2B,GAAU,CAEd,CAGA,OADAimB,EAAIiR,aAAaR,EAAW,EAAG,GACxBlB,CACT,EAOAU,UAAW,WACT,IAAIiB,EAAcplC,KAAKqlC,eAAiBrlC,KAAKqlC,aAAevjC,EAAO4hC,gBAE/Dj4B,EAAIzL,KAAK4jC,UAAY5jC,KAAK2jC,SAC1BlF,EAAQ,EAAJhzB,EACR25B,EAAY75B,MAAQkzB,EACpB2G,EAAYp5B,OAASyyB,EACrB,IAAIvK,EAAMkR,EAAYb,WAAW,MAejC,OAdArQ,EAAIoR,UAAU,EAAG,EAAG7G,EAAGA,GAIvBvK,EAAI/Z,cAAgBskB,EACpBvK,EAAIha,WAAala,KAAK2jC,SAGtBzP,EAAI7Z,YAAc,OAElB6Z,EAAIqR,YACJrR,EAAIsR,KAAK/5B,EAAGA,EAAGzL,KAAK4jC,UAAW,EAAa,EAAVp9B,KAAK0L,IAAQ,GAC/CgiB,EAAIuR,YACJvR,EAAIjnB,OACGm4B,CACT,EAMAf,aAAc,SAAUzjC,EAAMojC,EAAW0B,GAMvC,IALA,IAAIC,EAAiB3lC,KAAK+jC,gBACtB6B,EAAoBD,EAAeD,KAAWC,EAAeD,GAAS,IAAIG,kBAAkB,OAC5Ft5B,EAAQ,CAAC,EAAG,EAAG,EAAG,GAClB2K,EAAM,EAEDjB,EAAI,EAAGA,EAAI,IAAKA,IACvB+tB,EAAU0B,GAAOzvB,EAAI,KAAK,EAAM1J,GAChCq5B,EAAkB1uB,KAAS3K,EAAM,GACjCq5B,EAAkB1uB,KAAS3K,EAAM,GACjCq5B,EAAkB1uB,KAAS3K,EAAM,GACjCq5B,EAAkB1uB,KAAS3K,EAAM,GAGnC,OAAOq5B,CACT,GAEF,IAAIziC,EAAWqgC,EACfpgC,EAAOvB,QAAUsB,C,wBCnJjB,IAAIuK,EAAcjM,EAAQ,OAEtBkM,EAAsBlM,EAAQ,OAE9B0B,EAAWuK,EAAYnG,OAAO,CAChC7E,KAAM,iBACNkL,eAAgB,SAAUC,EAAQxL,GAChC,OAAOsL,EAAoBE,EAAOjN,KAAMZ,KAAMqC,EAChD,EACAgM,cAAe,CAEbnJ,iBAAkB,cAClBoJ,OAAQ,EACRC,EAAG,EAKHu3B,SAAU,EACVnC,SAAU,GACVC,UAAW,GACXC,WAAY,EACZC,WAAY,KAIhB1gC,EAAOvB,QAAUsB,C,iCC1BjB,IAAIuE,EAAUjG,EAAQ,OAIlBiC,GAFUgE,EAAQC,QAERlG,EAAQ,QAElBmG,EAAUnG,EAAQ,OAElBskC,EAAetkC,EAAQ,MAEvBK,EAASL,EAAQ,OAErB,SAASukC,EAAsB1W,EAAY2W,EAAWjiC,GACpD,IAAIkiC,EAAW5W,EAAW,GAAKA,EAAW,GAC1C2W,EAAYnkC,EAAO41B,IAAIuO,GAAW,SAAUE,GAC1C,MAAO,CACLxH,SAAU,EAAEwH,EAAMxH,SAAS,GAAKrP,EAAW,IAAM4W,GAAWC,EAAMxH,SAAS,GAAKrP,EAAW,IAAM4W,GAErG,IACA,IAAI1X,EAAMyX,EAAU9xB,OAChBiyB,EAAY,EAChB,OAAO,SAAUjoB,GAEf,IAAK,IAAIlI,EAAImwB,EAAWnwB,EAAIuY,EAAKvY,IAAK,CACpC,IAAI0oB,EAAWsH,EAAUhwB,GAAG0oB,SAE5B,GAAIA,EAAS,IAAMxgB,GAAOA,GAAOwgB,EAAS,GAAI,CAC5CyH,EAAYnwB,EACZ,KACF,CACF,CAEA,GAAIA,IAAMuY,EAER,IAASvY,EAAImwB,EAAY,EAAGnwB,GAAK,EAAGA,IAAK,CACnC0oB,EAAWsH,EAAUhwB,GAAG0oB,SAE5B,GAAIA,EAAS,IAAMxgB,GAAOA,GAAOwgB,EAAS,GAAI,CAC5CyH,EAAYnwB,EACZ,KACF,CACF,CAGF,OAAOA,GAAK,GAAKA,EAAIuY,GAAOxqB,EAASiS,EACvC,CACF,CAEA,SAASowB,EAAuB/W,EAAYgX,GAC1C,IAAIJ,EAAW5W,EAAW,GAAKA,EAAW,GAE1C,OADAgX,EAAQ,EAAEA,EAAM,GAAKhX,EAAW,IAAM4W,GAAWI,EAAM,GAAKhX,EAAW,IAAM4W,GACtE,SAAU/nB,GACf,OAAOA,GAAOmoB,EAAM,IAAMnoB,GAAOmoB,EAAM,EACzC,CACF,CAEA,SAASC,EAAczjC,GACrB,IAAI+W,EAAa/W,EAAS+W,WAE1B,MAAyB,QAAlBA,EAAW,IAAkC,QAAlBA,EAAW,EAC/C,CAEA,IAAI1W,EAAWO,EAAQwE,gBAAgB,CACrCxF,KAAM,UACN5C,OAAQ,SAAUuE,EAAahC,EAASC,GACtC,IAAIkkC,EACJnkC,EAAQ4B,cAAc,aAAa,SAAUwiC,GAC3CA,EAAUC,kBAAiB,SAAUC,GAC/BA,IAAiBtiC,IACnBmiC,EAAwBC,EAE5B,GACF,IACAzmC,KAAKqI,MAAMkC,YACX,IAAIzH,EAAWuB,EAAYa,iBAEL,gBAAlBpC,EAASJ,MAA4C,aAAlBI,EAASJ,KAC9C1C,KAAK4mC,8BAA8B9jC,EAAUuB,EAAa/B,GACjDikC,EAAczjC,IACvB9C,KAAK6mC,aAAa/jC,EAAUuB,EAAamiC,EAAuBlkC,EAEpE,EACAgG,QAAS,WAAa,EACtBs+B,8BAA+B,SAAU9jC,EAAUuB,EAAa/B,GAC9D,GAAsB,gBAAlBQ,EAASJ,KACX,IAAIokC,EAAQhkC,EAASikC,QAAQ,KACzBC,EAAQlkC,EAASikC,QAAQ,KACzBx7B,EAAQu7B,EAAMtqB,eACdxQ,EAASg7B,EAAMxqB,eAGrB,IAAInU,EAAQrI,KAAKqI,MACbzH,EAAOyD,EAAYG,UACnByiC,EAAiB,mBACjBC,EAAsB,qBACtBC,EAAa,eACbC,EAAkB,iBAClB/7B,EAAQhH,EAAYsI,SAASs6B,GAAgBlvB,aAAa,CAAC,UAC3DsvB,EAAWhjC,EAAYsI,SAASu6B,GAAqBnvB,eACrDa,EAAavU,EAAYsI,SAAS,gBAClCkM,EAAkBxU,EAAYsI,SAAS,kBACvCu0B,EAAep+B,EAASJ,KACxBglB,EAA4B,gBAAjBwZ,EAAiC,CAAC78B,EAAYijC,kBAAkB,KAAK,GAAIjjC,EAAYijC,kBAAkB,KAAK,GAAIjjC,EAAYijC,kBAAkB,SAAS,IAAM,CAACjjC,EAAYijC,kBAAkB,QAAQ,GAAIjjC,EAAYijC,kBAAkB,SAAS,IAC9P1mC,EAAK4B,MAAK,SAAUiC,GAClB,IAAIiG,EAEJ,GAAqB,gBAAjBw2B,EAAgC,CAElC,GAAI7iB,MAAMzd,EAAKsC,IAAIwkB,EAAS,GAAIjjB,IAC9B,OAGF,IAAIqB,EAAQhD,EAASiD,YAAY,CAACnF,EAAKsC,IAAIwkB,EAAS,GAAIjjB,GAAM7D,EAAKsC,IAAIwkB,EAAS,GAAIjjB,KACpFiG,EAAO,IAAI9C,EAAQ+C,KAAK,CACtBV,MAAO,CACLgC,EAAGnG,EAAM,GAAKyF,EAAQ,EACtBW,EAAGpG,EAAM,GAAKkG,EAAS,EACvBT,MAAOA,EACPS,OAAQA,GAEVX,MAAO,CACL4B,KAAMrM,EAAK4L,cAAc/H,EAAK,SAC9BgI,QAAS7L,EAAK4L,cAAc/H,EAAK,aAGvC,KAAO,CAEL,GAAI4Z,MAAMzd,EAAKsC,IAAIwkB,EAAS,GAAIjjB,IAC9B,OAGFiG,EAAO,IAAI9C,EAAQ+C,KAAK,CACtByH,GAAI,EACJnI,MAAOnH,EAASykC,WAAW,CAAC3mC,EAAKsC,IAAIwkB,EAAS,GAAIjjB,KAAO+iC,aACzDn8B,MAAO,CACL4B,KAAMrM,EAAK4L,cAAc/H,EAAK,SAC9BgI,QAAS7L,EAAK4L,cAAc/H,EAAK,aAGvC,CAEA,IAAI4E,EAAYzI,EAAK0I,aAAa7E,GAE9B7D,EAAK6mC,gBACPp8B,EAAQhC,EAAUsD,SAASs6B,GAAgBlvB,aAAa,CAAC,UACzDsvB,EAAWh+B,EAAUsD,SAASu6B,GAAqBnvB,eACnDa,EAAavP,EAAUsD,SAASw6B,GAChCtuB,EAAkBxP,EAAUsD,SAASy6B,IAGvC,IAAIM,EAAWrjC,EAAY6U,YAAYzU,GACnCwU,EAAc,IAEdyuB,GAA2B,MAAfA,EAAS,KACvBzuB,EAAcyuB,EAAS,IAGzB9/B,EAAQkR,cAAczN,EAAOg8B,EAAUzuB,EAAYC,EAAiB,CAClEE,aAAc1U,EACd2U,eAAgBvU,EAChBwU,YAAaA,EACbE,YAAY,IAEdzO,EAAKwK,SAAS7J,GACdzD,EAAQ0F,cAAc5C,EAAM9J,EAAK6mC,cAAgBJ,EAAWvlC,EAAOyF,OAAO,CAAC,EAAG8/B,IAC9Eh/B,EAAMc,IAAIuB,GACV9J,EAAK+I,iBAAiBlF,EAAKiG,EAC7B,GACF,EACAm8B,aAAc,SAAU5hC,EAAKZ,EAAasjC,EAAgBrlC,GACxD,IAAIslC,EAAiBD,EAAeE,cAAcC,QAC9CC,EAAoBJ,EAAeE,cAAcG,WAIjDpnC,EAAOyD,EAAYG,UACnByjC,EAAUjoC,KAAKkoC,UAAYloC,KAAKkoC,UAAY,IAAInC,EACpDkC,EAAQtE,SAAWt/B,EAAYnB,IAAI,YACnC+kC,EAAQrE,UAAYv/B,EAAYnB,IAAI,aACpC+kC,EAAQnE,WAAaz/B,EAAYnB,IAAI,cACrC+kC,EAAQpE,WAAax/B,EAAYnB,IAAI,cACrC,IAAIwH,EAAOzF,EAAI+oB,cAAczJ,QACzB4jB,EAAgBljC,EAAImjC,mBAAmBvL,UAC3CnyB,EAAKkyB,eAAeuL,GAEpB,IAAIl8B,EAAIzF,KAAKF,IAAIoE,EAAKuB,EAAG,GACrBC,EAAI1F,KAAKF,IAAIoE,EAAKwB,EAAG,GACrB+iB,EAAKzoB,KAAKJ,IAAIsE,EAAKa,MAAQb,EAAKuB,EAAG3J,EAAI2O,YACvCke,EAAK3oB,KAAKJ,IAAIsE,EAAKsB,OAAStB,EAAKwB,EAAG5J,EAAI4O,aACxC3F,EAAQ0jB,EAAKhjB,EACbD,EAASmjB,EAAKjjB,EACdygB,EAAS/rB,EAAKytB,SAAS,CAAC,MAAO,MAAO,UAAU,SAAUga,EAAKC,EAAKv6B,GACtE,IAAIC,EAAK/I,EAAIc,YAAY,CAACsiC,EAAKC,IAI/B,OAHAt6B,EAAG,IAAM/B,EACT+B,EAAG,IAAM9B,EACT8B,EAAGhN,KAAK+M,GACDC,CACT,IACIshB,EAAaqY,EAAejrB,YAC5BunB,EAAoC,yBAAxB0D,EAAejlC,KAAkC2jC,EAAuB/W,EAAYqY,EAAe95B,OAAOy4B,OAASN,EAAsB1W,EAAYqY,EAAeY,eAAgBZ,EAAe95B,OAAO7J,UAC1NikC,EAAQplC,OAAO8pB,EAAQphB,EAAOS,EAAQ47B,EAAer7B,MAAMi8B,gBAAiB,CAC1EV,QAASF,EAAer7B,MAAMk8B,iBAC9BT,WAAYD,EAAkBx7B,MAAMk8B,kBACnCxE,GACH,IAAIyE,EAAM,IAAI9gC,EAAQ6b,MAAM,CAC1BpY,MAAO,CACLE,MAAOA,EACPS,OAAQA,EACRC,EAAGA,EACHC,EAAGA,EACHyX,MAAOskB,EAAQxE,QAEjBhtB,QAAQ,IAEVzW,KAAKqI,MAAMc,IAAIu/B,EACjB,IAGFtlC,EAAOvB,QAAUsB,C,uBC1NjB,IAAIyE,EAAUnG,EAAQ,OAElB4xB,EAAO5xB,EAAQ,OAEfK,EAASL,EAAQ,OAEjBqO,EAAUrO,EAAQ,OAElBsO,EAAeD,EAAQC,aAEvB4tB,EAAOl8B,EAAQ,OAEfknC,EAAYlnC,EAAQ,OAYxB,SAASmnC,EAAWC,EAAUpkC,EAAKqkC,GACjClhC,EAAQwP,MAAMO,KAAK3X,MACnBA,KAAKmJ,IAAInJ,KAAK+oC,WAAWF,EAAUpkC,EAAKqkC,IAExC9oC,KAAKgpC,oBAAoBH,EAAUpkC,EACrC,CAEA,IAAIwkC,EAAkBL,EAAW1mC,UAEjC+mC,EAAgBF,WAAa,SAAUF,EAAUpkC,EAAKqkC,GACpD,OAAO,IAAIzV,EAAKwV,EAAUpkC,EAAKqkC,EACjC,EAEAG,EAAgBD,oBAAsB,SAAUH,EAAUpkC,GACxD,IAAI4E,EAAYw/B,EAASv/B,aAAa7E,GAClCykC,EAAc7/B,EAAUsD,SAAS,UACjCuB,EAAOg7B,EAAYhmC,IAAI,cACvBiP,EAAa+2B,EAAYhmC,IAAI,UAE5BpB,EAAO6Q,QAAQzE,KAClBA,EAAO,CAACA,EAAMA,IAGhB,IAAI3B,EAAQ28B,EAAYhmC,IAAI,UAAY2lC,EAASr8B,cAAc/H,EAAK,SAChEoK,EAAS7O,KAAKmb,QAAQ,GAEtBnb,KAAKmpC,cAAgBh3B,IAEvBnS,KAAKkK,OAAO2E,GACZA,EAASkB,EAAaoC,GAAa,IAAM,GAAK,EAAG,EAAG5F,GACpDsC,EAAOuD,GAAK,IACZvD,EAAOoG,SAAU,EACjBjV,KAAKmJ,IAAI0F,IAINA,IAKLA,EAAOqG,SAAS,cAAe3I,GAC/BsC,EAAOqG,SAASg0B,EAAYnxB,aAAa,CAAC,WAC1ClJ,EAAOzB,KAAK,QAASc,GACrBW,EAAOmJ,SAASzL,GAChBsC,EAAOzB,KAAK,QAASc,GACrBlO,KAAKmpC,YAAch3B,EAEnBnS,KAAKopC,uBAAuBP,EAAUK,EAAazkC,GACrD,EAEAwkC,EAAgBG,uBAAyB,SAAUP,EAAUK,EAAazkC,GACxE,IAAIoK,EAAS7O,KAAKmb,QAAQ,GAE1B,GAAKtM,EAAL,CAIA,IAAI+mB,EAAO51B,KACP2sB,EAASkc,EAASl9B,cAAclH,GAChCwkB,EAAqC,IAA5BigB,EAAYhmC,IAAI,UACzBmmC,EAAOH,EAAYhmC,IAAI,QACvBomC,EAAgBJ,EAAYhmC,IAAI,iBAChCqmC,EAAYznC,EAAOkS,SAASk1B,EAAYhmC,IAAI,UAAU,SAAUuB,GAClE,OAAOA,EAAMokC,EAAS7xB,QAAUiS,EAAS,CAC3C,IACIugB,EAAmC,oBAAdD,EASzB,GAPA16B,EAAOsd,QAAS,EAChBnsB,KAAKypC,sBAAsB56B,EAAQ8d,GAE/B2c,EAAgB,IAClBrgB,EAASjpB,KAAK0pC,cAAc76B,GAAUy6B,EAAgB,KAGpDrgB,IAAWjpB,KAAK2pC,SAAWN,IAASrpC,KAAK4pC,MAAO,CAClD/6B,EAAOg7B,gBACP,IAAIC,EAAQP,EAERC,IACFM,EAAQP,EAAU9kC,IAGhBoK,EAAOk7B,IAAM,IACfD,GAAS7gB,EAASpa,EAAOk7B,KAG3Bl7B,EAAOk7B,IAAM,EACb,IAAIC,EAAWn7B,EAAOo7B,QAAQ,GAAIZ,GAAMa,KAAKjhB,EAAQ,CACnD8gB,IAAK,IACJD,MAAMA,GAAOK,QAAO,WACrBvU,EAAKwU,qBAAqBv7B,EAC5B,IAEKw6B,GACHW,EAASK,MAAK,WACZzU,EAAK1rB,OAAO2E,EACd,IAGFm7B,EAASzrB,OACX,CAEAve,KAAK2pC,QAAU1gB,EACfjpB,KAAK4pC,MAAQP,CAhDb,CAiDF,EAEAJ,EAAgBS,cAAgB,SAAU76B,GAExC,OAAO8uB,EAAK2M,KAAKz7B,EAAO07B,KAAM17B,EAAO27B,OAAS7M,EAAK2M,KAAKz7B,EAAO27B,MAAO37B,EAAO47B,KAC/E,EAEAxB,EAAgBQ,sBAAwB,SAAU56B,EAAQ8d,GACxD9d,EAAO07B,KAAO5d,EAAO,GACrB9d,EAAO47B,KAAO9d,EAAO,GACrB9d,EAAO27B,MAAQ7d,EAAO,IAAM,EAAEA,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,GAAIA,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EAClG,EAEAsc,EAAgBzf,WAAa,SAAUqf,EAAUpkC,EAAKqkC,GACpD9oC,KAAKmb,QAAQ,GAAGqO,WAAWqf,EAAUpkC,EAAKqkC,GAE1C9oC,KAAKgpC,oBAAoBH,EAAUpkC,EACrC,EAEAwkC,EAAgBmB,qBAAuB,SAAUv7B,GAC/C,IAAI0vB,EAAK1vB,EAAO07B,KACZ/L,EAAK3vB,EAAO47B,KACZ/J,EAAM7xB,EAAO27B,MACbnM,EAAIxvB,EAAOk7B,IACXrO,EAAM7sB,EAAOnI,SACbq3B,EAAc4K,EAAU5K,YACxB2M,EAAwB/B,EAAU+B,sBACtChP,EAAI,GAAKqC,EAAYQ,EAAG,GAAImC,EAAI,GAAIlC,EAAG,GAAIH,GAC3C3C,EAAI,GAAKqC,EAAYQ,EAAG,GAAImC,EAAI,GAAIlC,EAAG,GAAIH,GAE3C,IAAIsM,EAAKD,EAAsBnM,EAAG,GAAImC,EAAI,GAAIlC,EAAG,GAAIH,GACjDuM,EAAKF,EAAsBnM,EAAG,GAAImC,EAAI,GAAIlC,EAAG,GAAIH,GACrDxvB,EAAOoD,UAAYzL,KAAKo1B,MAAMgP,EAAID,GAAMnkC,KAAK0L,GAAK,EAClDrD,EAAOsd,QAAS,CAClB,EAEA8c,EAAgBxf,aAAe,SAAUof,EAAUpkC,GACjDzE,KAAKmb,QAAQ,GAAGsO,aAAaof,EAAUpkC,GACvC,IAAIykC,EAAcL,EAASv/B,aAAa7E,GAAKkI,SAAS,UAEtD3M,KAAKopC,uBAAuBP,EAAUK,EAAazkC,EACrD,EAEA3C,EAAO6rB,SAASib,EAAYhhC,EAAQwP,OACpC,IAAIjU,EAAWylC,EACfxlC,EAAOvB,QAAUsB,C,iCC9KjB,IAAI8oB,EAAWxqB,EAAQ,MAEnBK,EAASL,EAAQ,OAEjBmnC,EAAannC,EAAQ,MAErBk8B,EAAOl8B,EAAQ,OAYnB,SAASopC,EAAehC,EAAUpkC,EAAKqkC,GACrCF,EAAWjxB,KAAK3X,KAAM6oC,EAAUpkC,EAAKqkC,GACrC9oC,KAAK8qC,WAAa,EAClB9qC,KAAK+qC,kBAAoB,CAC3B,CAEA,IAAIC,EAAsBH,EAAe3oC,UAEzC8oC,EAAoBjC,WAAa,SAAUF,EAAUpkC,EAAKqkC,GACxD,OAAO,IAAI7c,EAAS4c,EAAUpkC,EAAKqkC,EACrC,EAGAkC,EAAoBvB,sBAAwB,SAAU56B,EAAQ8d,GAC5D3sB,KAAKirC,QAAUte,EAIf,IAHA,IAAIue,EAAY,CAAC,GACb1c,EAAM,EAEDvY,EAAI,EAAGA,EAAI0W,EAAOxY,OAAQ8B,IAAK,CACtC,IAAIsoB,EAAK5R,EAAO1W,EAAI,GAChBuoB,EAAK7R,EAAO1W,GAChBuY,GAAOmP,EAAK2M,KAAK/L,EAAIC,GACrB0M,EAAUlqC,KAAKwtB,EACjB,CAEA,GAAY,IAARA,EAAJ,CAIA,IAASvY,EAAI,EAAGA,EAAIi1B,EAAU/2B,OAAQ8B,IACpCi1B,EAAUj1B,IAAMuY,EAGlBxuB,KAAKmrC,SAAWD,EAChBlrC,KAAKorC,QAAU5c,CAPf,CAQF,EAGAwc,EAAoBtB,cAAgB,SAAU76B,GAC5C,OAAO7O,KAAKorC,OACd,EAGAJ,EAAoBZ,qBAAuB,SAAUv7B,GACnD,IAAIwvB,EAAIxvB,EAAOk7B,IACXpd,EAAS3sB,KAAKirC,QACdI,EAAUrrC,KAAKmrC,SACf3c,EAAM7B,EAAOxY,OAEjB,GAAKk3B,EAAL,CAKA,IAAIC,EAAYtrC,KAAK8qC,WAGrB,GAAIzM,EAAIr+B,KAAK+qC,kBAAmB,CAG9B,IAAIxsB,EAAQ/X,KAAKJ,IAAIklC,EAAY,EAAG9c,EAAM,GAE1C,IAAK+c,EAAQhtB,EAAOgtB,GAAS,EAAGA,IAC9B,GAAIF,EAAQE,IAAUlN,EACpB,MAKJkN,EAAQ/kC,KAAKJ,IAAImlC,EAAO/c,EAAM,EAChC,KAAO,CACL,IAAK,IAAI+c,EAAQD,EAAWC,EAAQ/c,EAAK+c,IACvC,GAAIF,EAAQE,GAASlN,EACnB,MAIJkN,EAAQ/kC,KAAKJ,IAAImlC,EAAQ,EAAG/c,EAAM,EACpC,CAEAmP,EAAK6N,KAAK38B,EAAOnI,SAAUimB,EAAO4e,GAAQ5e,EAAO4e,EAAQ,IAAKlN,EAAIgN,EAAQE,KAAWF,EAAQE,EAAQ,GAAKF,EAAQE,KAClH,IAAIZ,EAAKhe,EAAO4e,EAAQ,GAAG,GAAK5e,EAAO4e,GAAO,GAC1CX,EAAKje,EAAO4e,EAAQ,GAAG,GAAK5e,EAAO4e,GAAO,GAC9C18B,EAAOoD,UAAYzL,KAAKo1B,MAAMgP,EAAID,GAAMnkC,KAAK0L,GAAK,EAClDlS,KAAK8qC,WAAaS,EAClBvrC,KAAK+qC,kBAAoB1M,EACzBxvB,EAAOsd,QAAS,CAlChB,CAmCF,EAEArqB,EAAO6rB,SAASkd,EAAgBjC,GAChC,IAAIzlC,EAAW0nC,EACfznC,EAAOvB,QAAUsB,C,wBC7GjB,IAAIrB,EAASL,EAAQ,OAEjBqO,EAAUrO,EAAQ,OAElBsO,EAAeD,EAAQC,aAEvBuQ,EAAW7e,EAAQ,OAEnB2V,EAAQkJ,EAASlJ,MAEjBpH,EAAUvO,EAAQ,OAElBwO,EAAeD,EAAQC,aAEvBw7B,EAAYhqC,EAAQ,MAMpBiqC,EAAuB,EAE3B,SAASC,EAAoB78B,GAK3B,OAJKhN,EAAO6Q,QAAQ7D,KAClBA,EAAa,EAAEA,GAAaA,IAGvBA,CACT,CAEA,SAAS88B,EAAiBC,EAAaC,GACrCD,EAAYE,WAAU,SAAUC,GAC9BA,EAAW5+B,KAAK,CACdmB,EAAGu9B,EAAUv9B,EACbD,OAAQw9B,EAAUx9B,OAClBjD,MAAO,CACLqL,OAAgC,WAAxBo1B,EAAU5iB,UAAyB4iB,EAAUv/B,MAAQ,KAC7DU,KAA8B,SAAxB6+B,EAAU5iB,UAAuB4iB,EAAUv/B,MAAQ,OAG/D,GACF,CASA,SAAS6c,EAAaxoB,EAAM6D,GAC1B2S,EAAMO,KAAK3X,MACX,IAAI6O,EAAS,IAAI48B,EAAU7qC,EAAM6D,GAC7BonC,EAAc,IAAIz0B,EACtBpX,KAAKmJ,IAAI0F,GACT7O,KAAKmJ,IAAI0iC,GAETA,EAAYI,aAAe,WACzBjsC,KAAKoN,KAAKyB,EAAOq9B,WACnB,EAEAlsC,KAAKwpB,WAAW5oB,EAAM6D,EACxB,CAEA,IAAI0nC,EAAoB/iB,EAAalnB,UAErCiqC,EAAkBC,oBAAsB,WACtCpsC,KAAKmb,QAAQ,GAAG5Q,WAClB,EAEA4hC,EAAkBE,qBAAuB,SAAUP,GAKjD,IAJA,IAAI35B,EAAa25B,EAAU35B,WACvB5F,EAAQu/B,EAAUv/B,MAClBs/B,EAAc7rC,KAAKmb,QAAQ,GAEtBlF,EAAI,EAAGA,EAAIy1B,EAAsBz1B,IAAK,CAO7C,IAAI+1B,EAAaj8B,EAAaoC,GAAa,GAAI,EAAG,EAAG,EAAG5F,GACxDy/B,EAAW5+B,KAAK,CACd/B,MAAO,CACL8J,eAAe,GAEjB/C,GAAI,GACJqE,QAAQ,EACRhQ,MAAO,CAAC,GAAK,MAEf,IAAIqjC,GAAS7zB,EAAIy1B,EAAuBI,EAAU7iB,OAAS6iB,EAAUQ,aAErEN,EAAW/B,QAAQ,IAAI,GAAMC,KAAK4B,EAAU7iB,OAAQ,CAClDxiB,MAAO,CAACqlC,EAAUS,YAAc,EAAGT,EAAUS,YAAc,KAC1DzC,MAAMA,GAAOvrB,QAChBytB,EAAWQ,cAAa,GAAMtC,KAAK4B,EAAU7iB,OAAQ,CACnDxc,QAAS,IACRq9B,MAAMA,GAAOvrB,QAChBstB,EAAY1iC,IAAI6iC,EAClB,CAEAJ,EAAiBC,EAAaC,EAChC,EAMAK,EAAkBM,sBAAwB,SAAUX,GAMlD,IALA,IAAIY,EAAe1sC,KAAK2sC,WACpBd,EAAc7rC,KAAKmb,QAAQ,GAE3ByxB,EAAkB,CAAC,aAAc,SAAU,eAEtC32B,EAAI,EAAGA,EAAI22B,EAAgBz4B,OAAQ8B,IAAK,CAC/C,IAAI42B,EAAWD,EAAgB32B,GAE/B,GAAIy2B,EAAaG,KAAcf,EAAUe,GAGvC,OAFA7sC,KAAKosC,2BACLpsC,KAAKqsC,qBAAqBP,EAG9B,CAEAF,EAAiBC,EAAaC,EAChC,EAMAK,EAAkBrS,UAAY,WAC5B95B,KAAKkW,QAAQ,WACf,EAMAi2B,EAAkBxS,SAAW,WAC3B35B,KAAKkW,QAAQ,SACf,EAQAi2B,EAAkB3iB,WAAa,SAAU5oB,EAAM6D,GAC7C,IAAIJ,EAAczD,EAAK8rB,UACvB1sB,KAAKmb,QAAQ,GAAGqO,WAAW5oB,EAAM6D,GACjC,IAAIonC,EAAc7rC,KAAKmb,QAAQ,GAC3B9R,EAAYzI,EAAK0I,aAAa7E,GAC9B0N,EAAavR,EAAK4L,cAAc/H,EAAK,UACrCqK,EAAa68B,EAAoB/qC,EAAK4L,cAAc/H,EAAK,eACzD8H,EAAQ3L,EAAK4L,cAAc/H,EAAK,SACpConC,EAAYz+B,KAAK,QAAS0B,GAC1B+8B,EAAYjS,UAAS,SAAUoS,GAC7BA,EAAW5+B,KAAK,CACdH,KAAMV,GAEV,IACA,IAAI0C,EAAe5F,EAAU8D,WAAW,gBAExC,GAAI8B,EAAc,CAChB,IAAIysB,EAAMmQ,EAAYnlC,SACtBg1B,EAAI,GAAKzrB,EAAahB,EAAa,GAAIH,EAAW,IAClD4sB,EAAI,GAAKzrB,EAAahB,EAAa,GAAIH,EAAW,GACpD,CAEA+8B,EAAY55B,UAAY5I,EAAU8D,WAAW,iBAAmB,GAAK3G,KAAK0L,GAAK,KAAO,EACtF,IAAI45B,EAAY,CAAC,EAYjB,GAXAA,EAAU/iB,aAAe1kB,EAAYnB,IAAI,gBACzC4oC,EAAUS,YAAcljC,EAAUnG,IAAI,sBACtC4oC,EAAU5iB,UAAY7f,EAAUnG,IAAI,0BACpC4oC,EAAU7iB,OAAgD,IAAvC5f,EAAUnG,IAAI,uBACjC4oC,EAAUQ,aAAe7nC,EAAM7D,EAAKoW,QACpC80B,EAAUv9B,EAAIlF,EAAU8D,WAAW,MAAQ,EAC3C2+B,EAAUx9B,OAASjF,EAAU8D,WAAW,WAAa,EACrD2+B,EAAU35B,WAAaA,EACvB25B,EAAUv/B,MAAQA,EAClBvM,KAAKkX,IAAI,aAAaA,IAAI,YAAYA,IAAI,YAAYA,IAAI,UAE3B,WAA3B40B,EAAU/iB,aACZ/oB,KAAK2sC,WAAa3sC,KAAKysC,sBAAsBX,GAAa9rC,KAAKqsC,qBAAqBP,GACpF9rC,KAAK2sC,WAAab,MACb,CAEL9rC,KAAK2sC,WAAa,KAClB3sC,KAAKosC,sBACL,IAAIv9B,EAAS7O,KAAKmb,QAAQ,GAEtB+Q,EAAa,WACfrd,EAAOirB,YAEwB,WAA3BgS,EAAU/iB,cACZ/oB,KAAKqsC,qBAAqBP,EAE9B,EAEIzf,EAAW,WACbxd,EAAO8qB,WAEwB,WAA3BmS,EAAU/iB,cACZ/oB,KAAKosC,qBAET,EAEApsC,KAAKM,GAAG,YAAa4rB,EAAYlsB,MAAMM,GAAG,WAAY+rB,EAAUrsB,MAAMM,GAAG,WAAY4rB,EAAYlsB,MAAMM,GAAG,SAAU+rB,EAAUrsB,KAChI,CAEAA,KAAK2sC,WAAab,CACpB,EAEAK,EAAkBW,QAAU,SAAUt1B,GACpCxX,KAAKkX,IAAI,aAAaA,IAAI,YAAYA,IAAI,YAAYA,IAAI,UAC1DM,GAAMA,GACR,EAEA1V,EAAO6rB,SAASvE,EAAchS,GAC9B,IAAIjU,EAAWimB,EACfhmB,EAAOvB,QAAUsB,C,wBC/NjB,IAAIyE,EAAUnG,EAAQ,OAElBsrC,EAActrC,EAAQ,OAEtBurC,EAAmBvrC,EAAQ,OAG3BwrC,EAAiBrlC,EAAQslC,YAAY,CACvCjjC,MAAO,CACLkjC,UAAU,EACVC,KAAM,IAERnZ,UAAW,SAAUjf,EAAM/K,GAIzB,IAHA,IAAImjC,EAAOnjC,EAAMmjC,KACbC,EAAapjC,EAAMkjC,SAEdl3B,EAAI,EAAGA,EAAIm3B,EAAKj5B,OAAQ8B,IAAK,CACpC,IAAIq3B,EAAMF,EAAKn3B,GAEf,GAAIo3B,EAAY,CACdr4B,EAAKqf,OAAOiZ,EAAI,GAAG,GAAIA,EAAI,GAAG,IAE9B,IAAK,IAAIha,EAAI,EAAGA,EAAIga,EAAIn5B,OAAQmf,IAC9Bte,EAAKsf,OAAOgZ,EAAIha,GAAG,GAAIga,EAAIha,GAAG,GAElC,MACEte,EAAKqf,OAAOiZ,EAAI,GAAG,GAAIA,EAAI,GAAG,IAE1BA,EAAIn5B,OAAS,EACfa,EAAKu4B,iBAAiBD,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,IAE9Dt4B,EAAKsf,OAAOgZ,EAAI,GAAG,GAAIA,EAAI,GAAG,GAGpC,CACF,EACAE,cAAe,SAAUvhC,EAAGC,GAM1B,IALA,IAAIjC,EAAQjK,KAAKiK,MACbmjC,EAAOnjC,EAAMmjC,KACbC,EAAapjC,EAAMkjC,SACnB3/B,EAAYhH,KAAKF,IAAItG,KAAKqL,MAAMmC,UAAW,GAEtCyI,EAAI,EAAGA,EAAIm3B,EAAKj5B,OAAQ8B,IAAK,CACpC,IAAIq3B,EAAMF,EAAKn3B,GAEf,GAAIo3B,GACF,IAAK,IAAI/Z,EAAI,EAAGA,EAAIga,EAAIn5B,OAAQmf,IAC9B,GAAIyZ,EAAYU,cAAcH,EAAIha,EAAI,GAAG,GAAIga,EAAIha,EAAI,GAAG,GAAIga,EAAIha,GAAG,GAAIga,EAAIha,GAAG,GAAI9lB,EAAWvB,EAAGC,GAC9F,OAAO+J,OAIX,GAAIq3B,EAAIn5B,OAAS,GACf,GAAI64B,EAAiBS,cAAcH,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAI9/B,EAAWvB,EAAGC,GACjH,OAAO+J,OAGT,GAAI82B,EAAYU,cAAcH,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAI9/B,EAAWvB,EAAGC,GACtF,OAAO+J,CAIf,CAEA,OAAQ,CACV,IAGF,SAASy3B,IACP1tC,KAAKqI,MAAQ,IAAIT,EAAQwP,MACzBpX,KAAK2tC,QAAU,IAAIV,CACrB,CAEA,IAAIW,EAAiBF,EAAcxrC,UAMnC0rC,EAAepkB,WAAa,SAAU5oB,GACpCZ,KAAKqI,MAAMkC,YACX,IAAIsjC,EAAS7tC,KAAK2tC,QACdtpC,EAAczD,EAAK8rB,UACvBmhB,EAAO/gC,SAAS,CACdsgC,KAAMxsC,EAAKytB,SAASztB,EAAK+K,eACzBwhC,SAAU9oC,EAAYnB,IAAI,cAE5B2qC,EAAO9gC,SAAS1I,EAAYsI,SAAS,oBAAoB+gB,gBACzD,IAAId,EAAchsB,EAAK24B,UAAU,SAE7B3M,GACFihB,EAAO34B,SAAS,SAAU0X,GAG5BihB,EAAO34B,SAAS,QAGhB24B,EAAO3uB,YAAc7a,EAAY6a,YACjC2uB,EAAOvtC,GAAG,aAAa,SAAUo8B,GAC/BmR,EAAOtpC,UAAY,KACnB,IAAIA,EAAYspC,EAAOL,cAAc9Q,EAAEoR,QAASpR,EAAEqR,SAE9CxpC,EAAY,IAEdspC,EAAOtpC,UAAYA,EAEvB,IAEAvE,KAAKqI,MAAMc,IAAI0kC,EACjB,EAEAD,EAAenkB,aAAe,SAAUplB,GACtC,IAAIzD,EAAOyD,EAAYG,UAEvBxE,KAAK2tC,QAAQ7gC,SAAS,CACpBsgC,KAAMxsC,EAAKytB,SAASztB,EAAK+K,gBAE7B,EAEAiiC,EAAe1jC,OAAS,WACtBlK,KAAKqI,MAAMkC,WACb,EAEA,IAAIpH,EAAWuqC,EACftqC,EAAOvB,QAAUsB,C,wBC5HjB,IAAIyE,EAAUnG,EAAQ,OAElBqO,EAAUrO,EAAQ,OAElBsO,EAAeD,EAAQC,aAEvBi+B,EAAkBpmC,EAAQslC,YAAY,CACxCjjC,MAAO,CACL0iB,OAAQ,KACRshB,MAAO,MAETC,YAAa,KACbja,UAAW,SAAUjf,EAAM/K,GAMzB,IALA,IAAI0iB,EAAS1iB,EAAM0iB,OACfshB,EAAQhkC,EAAMgkC,MACdC,EAAcluC,KAAKkuC,YACnBC,EAAmBD,EAAYjkC,MAE1BgM,EAAI,EAAGA,EAAI0W,EAAOxY,OAAQ8B,IAAK,CACtC,IAAIjI,EAAK2e,EAAO1W,GAEhB,IAAIoI,MAAMrQ,EAAG,MAAOqQ,MAAMrQ,EAAG,IAA7B,CAIA,IAAIE,EAAO+/B,EAAMh4B,GAEb/H,EAAK,GAAK,EAEZ8G,EAAKtK,KAAKsD,EAAG,GAAKE,EAAK,GAAK,EAAGF,EAAG,GAAKE,EAAK,GAAK,EAAGA,EAAK,GAAIA,EAAK,KAElEigC,EAAiBliC,EAAI+B,EAAG,GAAKE,EAAK,GAAK,EACvCigC,EAAiBjiC,EAAI8B,EAAG,GAAKE,EAAK,GAAK,EACvCigC,EAAiB5iC,MAAQ2C,EAAK,GAC9BigC,EAAiBniC,OAASkC,EAAK,GAC/BggC,EAAYja,UAAUjf,EAAMm5B,GAAkB,GAZhD,CAcF,CACF,EACAX,cAAe,SAAUvhC,EAAGC,GAO1B,IANA,IAAIjC,EAAQjK,KAAKiK,MACb0iB,EAAS1iB,EAAM0iB,OACfshB,EAAQhkC,EAAMgkC,MAITh4B,EAAI0W,EAAOxY,OAAS,EAAG8B,GAAK,EAAGA,IAAK,CAC3C,IAAIjI,EAAK2e,EAAO1W,GACZ/H,EAAO+/B,EAAMh4B,GACb0Z,EAAK3hB,EAAG,GAAKE,EAAK,GAAK,EACvBkgC,EAAKpgC,EAAG,GAAKE,EAAK,GAAK,EAE3B,GAAIjC,GAAK0jB,GAAMzjB,GAAKkiC,GAAMniC,GAAK0jB,EAAKzhB,EAAK,IAAMhC,GAAKkiC,EAAKlgC,EAAK,GAE5D,OAAO+H,CAEX,CAEA,OAAQ,CACV,IAGF,SAASo4B,IACPruC,KAAKqI,MAAQ,IAAIT,EAAQwP,MACzBpX,KAAKsuC,UAAY,IAAIN,EAAgB,CACnC,EAEJ,CAEA,IAAIO,EAAmBF,EAAgBnsC,UAMvCqsC,EAAiB/kB,WAAa,SAAU5oB,GACtCZ,KAAKqI,MAAMkC,YACX,IAAIikC,EAAWxuC,KAAKsuC,UAChBjqC,EAAczD,EAAK8rB,UACvB8hB,EAAS1hC,SAAS,CAChB6f,OAAQ/rB,EAAKytB,SAASztB,EAAK+K,eAC3BsiC,MAAOrtC,EAAKytB,UAAS,SAAU5pB,GAC7B,IAAIyJ,EAAOtN,EAAK4L,cAAc/H,EAAK,cAMnC,OAJMyJ,aAAgBmxB,QACpBnxB,EAAO,CAACA,EAAMA,IAGTA,CACT,MAGFsgC,EAASN,YAAcn+B,EAAanP,EAAK24B,UAAU,UAAW,EAAG,EAAG,EAAG,GAEvEiV,EAASx2B,SAAWw2B,EAASN,YAAYl2B,SACzCw2B,EAASzhC,SAAS1I,EAAYsI,SAAS,oBAAoBoL,aAAa,CAAC,WACzE,IAAI6U,EAAchsB,EAAK24B,UAAU,SAE7B3M,GACF4hB,EAASx2B,SAAS4U,GAKpB4hB,EAAStvB,YAAc7a,EAAY6a,YACnCsvB,EAASluC,GAAG,aAAa,SAAUo8B,GACjC8R,EAASjqC,UAAY,KACrB,IAAIA,EAAYiqC,EAAShB,cAAc9Q,EAAEoR,QAASpR,EAAEqR,SAEhDxpC,GAAa,IAEfiqC,EAASjqC,UAAYA,EAEzB,IAEAvE,KAAKqI,MAAMc,IAAIqlC,EACjB,EAEAD,EAAiB9kB,aAAe,SAAUplB,GACxC,IAAIzD,EAAOyD,EAAYG,UAEvBxE,KAAKsuC,UAAUxhC,SAAS,CACtB6f,OAAQ/rB,EAAKytB,SAASztB,EAAK+K,gBAE/B,EAEA4iC,EAAiBrkC,OAAS,WACxBlK,KAAKqI,MAAMkC,WACb,EAEA,IAAIpH,EAAWkrC,EACfjrC,EAAOvB,QAAUsB,C,wBCnIjB,IAAIrB,EAASL,EAAQ,OAEjBgtC,EAAShtC,EAAQ,OAEjBitC,EAAajtC,EAAQ,OAErBktC,EAAWltC,EAAQ,OAEnBmG,EAAUnG,EAAQ,OAElBuO,EAAUvO,EAAQ,OAElB6W,EAAQtI,EAAQsI,MAKhBs2B,EAAoB,CAAC,aAAc,YAEvC,SAASC,EAAkBC,GACzB,MAAO,IAAMA,EAAiB,MAChC,CAMA,SAAS/+B,EAAavM,EAAMqlC,EAAUpkC,GACpC,IAAI8H,EAAQs8B,EAASr8B,cAAc/H,EAAK,SACpC0N,EAAa02B,EAASr8B,cAAc/H,EAAKjB,GACzCsL,EAAa+5B,EAASr8B,cAAc/H,EAAKjB,EAAO,QAEpD,GAAK2O,GAA6B,SAAfA,EAAnB,CAIKrQ,EAAO6Q,QAAQ7D,KAClBA,EAAa,CAACA,EAAYA,IAG5B,IAAI0sB,EAAakT,EAAW3+B,aAAaoC,GAAarD,EAAW,GAAK,GAAIA,EAAW,GAAK,EAAGA,EAAW,GAAIA,EAAW,GAAIvC,GAE3H,OADAivB,EAAWh4B,KAAOA,EACXg4B,CARP,CASF,CAEA,SAASuN,EAAWpc,GAClB,IAAIhO,EAAO,IAAIgwB,EAAS,CACtBnrC,KAAM,SAGR,OADAurC,EAAcpwB,EAAK1U,MAAO0iB,GACnBhO,CACT,CAEA,SAASowB,EAAcC,EAAariB,GAClC,IAAI4R,EAAK5R,EAAO,GACZ6R,EAAK7R,EAAO,GACZ+T,EAAM/T,EAAO,GACjBqiB,EAAYjgB,GAAKwP,EAAG,GACpByQ,EAAYhgB,GAAKuP,EAAG,GACpByQ,EAAY/f,GAAKuP,EAAG,GACpBwQ,EAAY7f,GAAKqP,EAAG,GACpBwQ,EAAY/jB,QAAU,EAElByV,GACFsO,EAAYC,KAAOvO,EAAI,GACvBsO,EAAYE,KAAOxO,EAAI,KAEvBsO,EAAYC,KAAO7gC,IACnB4gC,EAAYE,KAAO9gC,IAEvB,CAEA,SAAS+gC,IACP,IAAIC,EAAYpvC,KACZqvC,EAAaD,EAAUE,YAAY,cACnCC,EAAWH,EAAUE,YAAY,YACjC3kB,EAAQykB,EAAUE,YAAY,SAElC,GAAKD,GAAeE,IAAY5kB,EAAMwB,OAAtC,CAIA,IAAImR,EAAW,EACXkS,EAAaxvC,KAAKwL,OAEtB,MAAOgkC,EACDA,EAAW/oC,QACb62B,GAAYkS,EAAW/oC,MAAM,IAG/B+oC,EAAaA,EAAWhkC,OAG1B,IAAImT,EAAOywB,EAAUE,YAAY,QAGjC,GAAKtvC,KAAKyvC,SAAY9wB,EAAK8wB,QAA3B,CAIA,IAAIxkB,EAAUtM,EAAK1U,MAAMghB,QACrBykB,EAAU/wB,EAAKgxB,QAAQ,GACvBC,EAAQjxB,EAAKgxB,QAAQ1kB,GACrBwT,EAAIgQ,EAAO9O,IAAI,GAAIiQ,EAAOF,GAG9B,GAFAjB,EAAO7O,UAAUnB,EAAGA,GAEhB4Q,EAAY,CACdA,EAAWjiC,KAAK,WAAYsiC,GAC5B,IAAIG,EAAUlxB,EAAKmxB,UAAU,GAC7BT,EAAWjiC,KAAK,WAAY5G,KAAK0L,GAAK,EAAI1L,KAAKo1B,MAAMiU,EAAQ,GAAIA,EAAQ,KACzER,EAAWjiC,KAAK,QAAS,CAACkwB,EAAWrS,EAASqS,EAAWrS,GAC3D,CAEA,GAAIskB,EAAU,CACZA,EAASniC,KAAK,WAAYwiC,GACtBC,EAAUlxB,EAAKmxB,UAAU,GAC7BP,EAASniC,KAAK,YAAa5G,KAAK0L,GAAK,EAAI1L,KAAKo1B,MAAMiU,EAAQ,GAAIA,EAAQ,KACxEN,EAASniC,KAAK,QAAS,CAACkwB,EAAWrS,EAASqS,EAAWrS,GACzD,CAEA,IAAKN,EAAMwB,OAAQ,CAEjB,IAAI7S,EACAiU,EACAC,EAHJ7C,EAAMvd,KAAK,WAAYwiC,GAIvB,IAAIpf,EAAW,EAAI8M,EAEnB,GAAyB,QAArB3S,EAAMolB,WACRz2B,EAAe,CAACmlB,EAAE,GAAKjO,EAAWof,EAAM,GAAInR,EAAE,GAAKjO,EAAWof,EAAM,IACpEriB,EAAYkR,EAAE,GAAK,GAAM,OAASA,EAAE,IAAM,GAAM,QAAU,SAC1DjR,EAAoBiR,EAAE,GAAK,GAAM,MAAQA,EAAE,IAAM,GAAM,SAAW,cAE/D,GAAyB,WAArB9T,EAAMolB,WAAyB,CACpC,IAAIC,EAAc/kB,EAAU,EAExB+W,GADA6N,EAAUlxB,EAAKmxB,UAAUE,GACrB,CAACH,EAAQ,IAAKA,EAAQ,KAC1BI,EAAKtxB,EAAKgxB,QAAQK,GAElBhO,EAAE,GAAK,IACTA,EAAE,IAAMA,EAAE,GACVA,EAAE,IAAMA,EAAE,IAGZ1oB,EAAe,CAAC22B,EAAG,GAAKjO,EAAE,GAAKxR,EAAUyf,EAAG,GAAKjO,EAAE,GAAKxR,GACxDjD,EAAY,SACZC,EAAoB,SACpB,IAAIvb,GAAYzL,KAAKo1B,MAAMiU,EAAQ,GAAIA,EAAQ,IAE3CD,EAAM,GAAKF,EAAQ,KACrBz9B,EAAWzL,KAAK0L,GAAKD,GAGvB0Y,EAAMvd,KAAK,WAAY6E,EACzB,MAEIqH,EAAe,EAAEmlB,EAAE,GAAKjO,EAAWkf,EAAQ,IAAKjR,EAAE,GAAKjO,EAAWkf,EAAQ,IAC1EniB,EAAYkR,EAAE,GAAK,GAAM,QAAUA,EAAE,IAAM,GAAM,OAAS,SAC1DjR,EAAoBiR,EAAE,GAAK,GAAM,SAAWA,EAAE,IAAM,GAAM,MAAQ,SAGxE9T,EAAMvd,KAAK,CACT/B,MAAO,CAELmiB,kBAAmB7C,EAAMulB,iBAAmB1iB,EAC5CD,UAAW5C,EAAMwlB,aAAe5iB,GAElC7mB,SAAU4S,EACV7S,MAAO,CAAC62B,EAAUA,IAEtB,CAvEA,CAlBA,CA0FF,CAQA,SAASjK,EAAKwV,EAAUpkC,EAAKqkC,GAC3BlhC,EAAQwP,MAAMO,KAAK3X,MAEnBA,KAAKowC,YAAYvH,EAAUpkC,EAAKqkC,EAClC,CAEA,IAAIuH,EAAYhd,EAAKnxB,UAErBmuC,EAAUpE,aAAekD,EAEzBkB,EAAUD,YAAc,SAAUvH,EAAUpkC,EAAKqkC,GAC/C,IAAIzkC,EAAcwkC,EAASnc,UACvBO,EAAa4b,EAASl9B,cAAclH,GACpCka,EAAOoqB,EAAW9b,GACtBtO,EAAK1U,MAAMghB,QAAU,EACrBrjB,EAAQmd,UAAUpG,EAAM,CACtB1U,MAAO,CACLghB,QAAS,IAEV5mB,EAAaI,GAChBzE,KAAKmJ,IAAIwV,GACT,IAAIgM,EAAQ,IAAI/iB,EAAQgc,KAAK,CAC3BpgB,KAAM,UAERxD,KAAKmJ,IAAIwhB,GACT7oB,EAAOU,KAAKosC,GAAmB,SAAUE,GACvC,IAAIjgC,EAASkB,EAAa++B,EAAgBjG,EAAUpkC,GAIpDzE,KAAKmJ,IAAI0F,GACT7O,KAAK6uC,EAAkBC,IAAmBjG,EAASr8B,cAAc/H,EAAKqqC,EACxE,GAAG9uC,MAEHA,KAAKswC,iBAAiBzH,EAAUpkC,EAAKqkC,EACvC,EAEAuH,EAAU7mB,WAAa,SAAUqf,EAAUpkC,EAAKqkC,GAC9C,IAAIzkC,EAAcwkC,EAASnc,UACvB/N,EAAO3e,KAAKsvC,YAAY,QACxBriB,EAAa4b,EAASl9B,cAAclH,GACpCqR,EAAS,CACX7L,MAAO,CAAC,GAEV8kC,EAAcj5B,EAAO7L,MAAOgjB,GAC5BrlB,EAAQoC,YAAY2U,EAAM7I,EAAQzR,EAAaI,GAC/C3C,EAAOU,KAAKosC,GAAmB,SAAUE,GACvC,IAAI38B,EAAa02B,EAASr8B,cAAc/H,EAAKqqC,GACzCntC,EAAMktC,EAAkBC,GAE5B,GAAI9uC,KAAK2B,KAASwQ,EAAY,CAC5BnS,KAAKkK,OAAOlK,KAAKsvC,YAAYR,IAC7B,IAAIjgC,EAASkB,EAAa++B,EAAgBjG,EAAUpkC,GACpDzE,KAAKmJ,IAAI0F,EACX,CAEA7O,KAAK2B,GAAOwQ,CACd,GAAGnS,MAEHA,KAAKswC,iBAAiBzH,EAAUpkC,EAAKqkC,EACvC,EAEAuH,EAAUC,iBAAmB,SAAUzH,EAAUpkC,EAAKqkC,GACpD,IAAIzkC,EAAcwkC,EAASnc,UACvB/N,EAAO3e,KAAKsvC,YAAY,QACxBzjB,EAAYid,GAAeA,EAAYjd,UACvC0kB,EAAiBzH,GAAeA,EAAYyH,eAC5C33B,EAAakwB,GAAeA,EAAYlwB,WACxCC,EAAkBiwB,GAAeA,EAAYjwB,gBAEjD,IAAKiwB,GAAeD,EAASpB,cAAe,CAC1C,IAAIp+B,EAAYw/B,EAASv/B,aAAa7E,GACtConB,EAAYxiB,EAAUsD,SAAS,oBAAoB+gB,eACnD6iB,EAAiBlnC,EAAUsD,SAAS,sBAAsB+gB,eAC1D9U,EAAavP,EAAUsD,SAAS,gBAChCkM,EAAkBxP,EAAUsD,SAAS,iBACvC,CAEA,IAAIigB,EAAcic,EAASr8B,cAAc/H,EAAK,SAC1C+rC,EAAgB1uC,EAAOolB,UAAU2hB,EAASr8B,cAAc/H,EAAK,WAAYonB,EAAUpf,QAAS,GAChGkS,EAAK5R,SAASjL,EAAOkL,SAAS,CAC5BmI,eAAe,EACflI,KAAM,OACNyJ,OAAQkW,EACRngB,QAAS+jC,GACR3kB,IACHlN,EAAK/R,WAAa2jC,EAElBzuC,EAAOU,KAAKosC,GAAmB,SAAUE,GACvC,IAAIjgC,EAAS7O,KAAKsvC,YAAYR,GAE1BjgC,IACFA,EAAOmJ,SAAS4U,GAChB/d,EAAOqG,SAAS,CACdzI,QAAS+jC,IAGf,GAAGxwC,MACH,IAGIywC,EACAx3B,EACAy3B,EACAC,EANAC,EAAYh4B,EAAWzL,WAAW,QAClC0jC,EAAiBh4B,EAAgB1L,WAAW,QAC5Cwd,EAAQ3qB,KAAKsvC,YAAY,SAM7B,GAAIsB,GAAaC,EAAgB,CAC/B,IAAIC,EAASzsC,EAAY6U,YAAYzU,GACrCwU,EAAwB,MAAV63B,EAAiB73B,EAAc4vB,EAASnkC,QAAQD,GAAOssC,SAASD,GAAUx4B,EAAMw4B,GAAUA,EACxGL,EAAoB7jB,GAAe,OACnC8jB,EAAa5uC,EAAO0e,UAAUnc,EAAY4iB,kBAAkBxiB,EAAK,SAAUokC,EAAS5R,UAAWhe,GAC/F03B,EAAe7uC,EAAO0e,UAAUnc,EAAY4iB,kBAAkBxiB,EAAK,WAAYokC,EAAS5R,UAAWyZ,EACrG,CAGA,GAAIE,EAAW,CACb,IAAII,EAAappC,EAAQof,aAAa2D,EAAMtf,MAAOuN,EAAY,CAC7DtN,KAAMolC,GACL,CACDt3B,UAAWq3B,IAEb9lB,EAAMwlB,YAAca,EAAWzjB,UAC/B5C,EAAMulB,gBAAkBc,EAAWxjB,kBAEnC7C,EAAMolB,WAAan3B,EAAW1V,IAAI,aAAe,QACnD,MACEynB,EAAMzV,SAAS,OAAQ,MAKvByV,EAAM/d,WAFJikC,EAEiB,CACjBvlC,KAAMqlC,EACN/rB,SAAU/L,EAAgBo4B,cAAa,GAGvCC,UAAWr4B,EAAgB1L,WAAW,aACtCgkC,WAAYt4B,EAAgB1L,WAAW,cACvCyjB,SAAU/X,EAAgB1L,WAAW,YACrCikC,WAAYv4B,EAAgB1L,WAAW,eAGtB,CACjB7B,KAAM,MAIVqf,EAAMwB,QAAUykB,IAAcC,EAC9BjpC,EAAQ0F,cAActN,KACxB,EAEAqwC,EAAUvW,UAAY,WACpB95B,KAAKkW,QAAQ,WACf,EAEAm6B,EAAU1W,SAAW,WACnB35B,KAAKkW,QAAQ,SACf,EAEAm6B,EAAU5mB,aAAe,SAAUof,EAAUpkC,GAC3CzE,KAAK+uC,cAAclG,EAASl9B,cAAclH,GAC5C,EAEA4rC,EAAUtB,cAAgB,SAAUpiB,GAClC,IAAI0kB,EAAWrxC,KAAKsvC,YAAY,QAChCP,EAAcsC,EAASpnC,MAAO0iB,GAC9B0kB,EAAS/1B,OACX,EAEAxZ,EAAO6rB,SAAS0F,EAAMzrB,EAAQwP,OAC9B,IAAIjU,EAAWkwB,EACfjwB,EAAOvB,QAAUsB,C,wBC7VjB,IAAIyE,EAAUnG,EAAQ,OAElB6vC,EAAY7vC,EAAQ,OAKxB,SAAS8vC,EAAWvjC,GAClB,OAAOqQ,MAAMrQ,EAAG,KAAOqQ,MAAMrQ,EAAG,GAClC,CAEA,SAASwjC,EAAcvS,GACrB,OAAQsS,EAAWtS,EAAI,MAAQsS,EAAWtS,EAAI,GAChD,CAOA,SAASpG,EAAS4Y,GAChBzxC,KAAK0xC,MAAQD,GAAQH,EACrBtxC,KAAKqI,MAAQ,IAAIT,EAAQwP,KAC3B,CAEA,IAAIu6B,EAAgB9Y,EAAS32B,UAK7ByvC,EAAcnoB,WAAa,SAAUqf,GACnC,IAAI+I,EAAc5xC,KAAK6xC,UACnBxpC,EAAQrI,KAAKqI,MACbypC,EAAW9xC,KAAK0xC,MAChBhlB,EAAYmc,EAASnc,UACrBoc,EAAc,CAChBjd,UAAWa,EAAU/f,SAAS,oBAAoB+gB,eAClD6iB,eAAgB7jB,EAAU/f,SAAS,sBAAsB+gB,eACzD9U,WAAY8T,EAAU/f,SAAS,gBAC/BkM,gBAAiB6T,EAAU/f,SAAS,mBAEtCk8B,EAAS3/B,KAAK0oC,GAAazoC,KAAI,SAAU1E,GACvC,GAAK+sC,EAAc3I,EAASl9B,cAAclH,IAA1C,CAIA,IAAI2qC,EAAY,IAAI0C,EAASjJ,EAAUpkC,EAAKqkC,GAC5CD,EAASl/B,iBAAiBlF,EAAK2qC,GAC/B/mC,EAAMc,IAAIimC,EAJV,CAKF,IAAGvsC,QAAO,SAAU6lB,EAAQC,GAC1B,IAAIymB,EAAYwC,EAAY7nC,iBAAiB4e,GAExC6oB,EAAc3I,EAASl9B,cAAc+c,KAKrC0mB,EAGHA,EAAU5lB,WAAWqf,EAAUngB,EAAQogB,GAFvCsG,EAAY,IAAI0C,EAASjJ,EAAUngB,EAAQogB,GAK7CD,EAASl/B,iBAAiB+e,EAAQ0mB,GAClC/mC,EAAMc,IAAIimC,IAXR/mC,EAAM6B,OAAOklC,EAYjB,IAAGllC,QAAO,SAAUzF,GAClB4D,EAAM6B,OAAO0nC,EAAY7nC,iBAAiBtF,GAC5C,IAAG4F,UACHrK,KAAK6xC,UAAYhJ,CACnB,EAEA8I,EAAcloB,aAAe,WAC3B,IAAIof,EAAW7oC,KAAK6xC,UACpBhJ,EAASv+B,mBAAkB,SAAUb,EAAIhF,GACvCgF,EAAGggB,aAAaof,EAAUpkC,EAC5B,GAAGzE,KACL,EAEA2xC,EAAcznC,OAAS,WACrBlK,KAAKqI,MAAMkC,WACb,EAEA,IAAIpH,EAAW01B,EACfz1B,EAAOvB,QAAUsB,C,wBCnFjB,IAAIyE,EAAUnG,EAAQ,OAElBk8B,EAAOl8B,EAAQ,OAKfswC,EAAoBnqC,EAAQyrB,KAAKnxB,UACjC8vC,EAAmBpqC,EAAQqqC,YAAY/vC,UAE3C,SAASgwC,EAAOjoC,GACd,OAAOoU,OAAOpU,EAAMglC,OAAS5wB,OAAOpU,EAAMilC,KAC5C,CAEA,IAAI/rC,EAAWyE,EAAQslC,YAAY,CACjCxqC,KAAM,UACN2I,MAAO,CACLqL,OAAQ,OACRzJ,KAAM,MAERhD,MAAO,CACL8kB,GAAI,EACJC,GAAI,EACJC,GAAI,EACJE,GAAI,EACJlE,QAAS,EACTgkB,KAAM,KACNC,KAAM,MAERjb,UAAW,SAAUC,EAAKjqB,IACvBioC,EAAOjoC,GAAS8nC,EAAoBC,GAAkB/d,UAAUC,EAAKjqB,EACxE,EACA0lC,QAAS,SAAUtR,GACjB,OAAO6T,EAAOlyC,KAAKiK,OAAS8nC,EAAkBpC,QAAQh4B,KAAK3X,KAAMq+B,GAAK2T,EAAiBrC,QAAQh4B,KAAK3X,KAAMq+B,EAC5G,EACAyR,UAAW,SAAUzR,GACnB,IAAIp0B,EAAQjK,KAAKiK,MACbmU,EAAI8zB,EAAOjoC,GAAS,CAACA,EAAMglB,GAAKhlB,EAAM8kB,GAAI9kB,EAAMklB,GAAKllB,EAAM+kB,IAAMgjB,EAAiBlC,UAAUn4B,KAAK3X,KAAMq+B,GAC3G,OAAOV,EAAKiC,UAAUxhB,EAAGA,EAC3B,IAGFhb,EAAOvB,QAAUsB,C,uBC1CjB,IAAIyE,EAAUnG,EAAQ,OAElBK,EAASL,EAAQ,OAWrB,SAASwqB,EAAS4c,EAAUpkC,EAAKqkC,GAC/BlhC,EAAQwP,MAAMO,KAAK3X,MAEnBA,KAAKmyC,gBAAgBtJ,EAAUpkC,EAAKqkC,EACtC,CAEA,IAAIsJ,EAAgBnmB,EAAS/pB,UAE7BkwC,EAAcD,gBAAkB,SAAUtJ,EAAUpkC,EAAKqkC,GAEvD,IAAInc,EAASkc,EAASl9B,cAAclH,GAChCka,EAAO,IAAI/W,EAAQqkB,SAAS,CAC9BhiB,MAAO,CACL0iB,OAAQA,KAGZ3sB,KAAKmJ,IAAIwV,GAET3e,KAAKswC,iBAAiBzH,EAAUpkC,EAAKqkC,EACvC,EAEAsJ,EAAc5oB,WAAa,SAAUqf,EAAUpkC,EAAKqkC,GAClD,IAAIzkC,EAAcwkC,EAASnc,UACvB/N,EAAO3e,KAAKmb,QAAQ,GACpBrF,EAAS,CACX7L,MAAO,CACL0iB,OAAQkc,EAASl9B,cAAclH,KAGnCmD,EAAQoC,YAAY2U,EAAM7I,EAAQzR,EAAaI,GAE/CzE,KAAKswC,iBAAiBzH,EAAUpkC,EAAKqkC,EACvC,EAEAsJ,EAAc9B,iBAAmB,SAAUzH,EAAUpkC,EAAKqkC,GACxD,IAAInqB,EAAO3e,KAAKmb,QAAQ,GACpB9R,EAAYw/B,EAASv/B,aAAa7E,GAClCmoB,EAAcic,EAASr8B,cAAc/H,EAAK,SAC1ConB,EAAYid,GAAeA,EAAYjd,UACvC0kB,EAAiBzH,GAAeA,EAAYyH,eAE3CzH,IAAeD,EAASpB,gBAC3B5b,EAAYxiB,EAAUsD,SAAS,oBAAoB+gB,eACnD6iB,EAAiBlnC,EAAUsD,SAAS,sBAAsB+gB,gBAG5D/O,EAAK5R,SAASjL,EAAOkL,SAAS,CAC5BmI,eAAe,EACflI,KAAM,OACNyJ,OAAQkW,GACPf,IACHlN,EAAK/R,WAAa2jC,EAClB3oC,EAAQ0F,cAActN,KACxB,EAEAoyC,EAAc3oB,aAAe,SAAUof,EAAUpkC,GAC/C,IAAI0oC,EAAWntC,KAAKmb,QAAQ,GAC5BgyB,EAASrgC,SAAS,SAAU+7B,EAASl9B,cAAclH,GACrD,EAEA3C,EAAO6rB,SAAS1B,EAAUrkB,EAAQwP,OAClC,IAAIjU,EAAW8oB,EACf7oB,EAAOvB,QAAUsB,C,uBC3EjB,IAAIrB,EAASL,EAAQ,OAEjBqO,EAAUrO,EAAQ,OAElBsO,EAAeD,EAAQC,aAEvBnI,EAAUnG,EAAQ,OAElBuO,EAAUvO,EAAQ,OAElBwO,EAAeD,EAAQC,aAEvBiS,EAAezgB,EAAQ,OAEvB0gB,EAAoBD,EAAaC,kBAKrC,SAASid,EAAcx+B,EAAM6D,GAC3B,IAAIqK,EAAalO,EAAK4L,cAAc/H,EAAK,cACzC,OAAOqK,aAAsBuwB,MAAQvwB,EAAW9L,QAAU,EAAE8L,GAAaA,EAC3E,CAEA,SAASo9B,EAASp9B,GAChB,MAAO,CAACA,EAAW,GAAK,EAAGA,EAAW,GAAK,EAC7C,CAUA,SAAS28B,EAAU7qC,EAAM6D,EAAKqkC,GAC5BlhC,EAAQwP,MAAMO,KAAK3X,MACnBA,KAAKwpB,WAAW5oB,EAAM6D,EAAKqkC,EAC7B,CAEA,IAAIuJ,EAAc5G,EAAUvpC,UAE5B,SAASowC,EAAYtsC,EAAIC,GACvBjG,KAAKwL,OAAO+mC,MAAMvsC,EAAIC,EACxB,CAEAosC,EAAYG,cAAgB,SAAUrgC,EAAYvR,EAAM6D,EAAKqK,GAE3D9O,KAAKuK,YACL,IAAIgC,EAAQ3L,EAAK4L,cAAc/H,EAAK,SAOhC+2B,EAAazrB,EAAaoC,GAAa,GAAI,EAAG,EAAG,EAAG5F,GACxDivB,EAAWpuB,KAAK,CACdgF,GAAI,IACJ6C,SAAS,EACTxO,MAAOylC,EAASp9B,KAGlB0sB,EAAW+W,MAAQD,EACnBtyC,KAAKmpC,YAAch3B,EACnBnS,KAAKmJ,IAAIqyB,EACX,EAOA6W,EAAYI,oBAAsB,SAAUC,GAC1C1yC,KAAKmb,QAAQ,GAAG0uB,cAAc6I,EAChC,EAYAL,EAAY5W,cAAgB,WAC1B,OAAOz7B,KAAKmb,QAAQ,EACtB,EAOAk3B,EAAYnG,SAAW,WACrB,OAAOlsC,KAAKmb,QAAQ,GAAG1U,KACzB,EAMA4rC,EAAYvY,UAAY,WACtB95B,KAAKmb,QAAQ,GAAGjF,QAAQ,WAC1B,EAMAm8B,EAAY1Y,SAAW,WACrB35B,KAAKmb,QAAQ,GAAGjF,QAAQ,SAC1B,EAOAm8B,EAAYM,KAAO,SAAUrkC,EAAQC,GACnC,IAAIitB,EAAax7B,KAAKmb,QAAQ,GAC9BqgB,EAAWltB,OAASA,EACpBktB,EAAWjtB,EAAIA,CACjB,EAEA8jC,EAAYpX,aAAe,SAAUzC,GACnC,IAAIgD,EAAax7B,KAAKmb,QAAQ,GAC9BqgB,EAAWhD,UAAYA,EACvBgD,EAAWvjB,OAASugB,EAAY,OAAS,SAC3C,EAoBA6Z,EAAY7oB,WAAa,SAAU5oB,EAAM6D,EAAKqkC,GAC5C9oC,KAAKyW,QAAS,EACd,IAAItE,EAAavR,EAAK4L,cAAc/H,EAAK,WAAa,SAClDJ,EAAczD,EAAK8rB,UACnB5d,EAAaswB,EAAcx+B,EAAM6D,GACjC2f,EAASjS,IAAenS,KAAKmpC,YAEjC,GAAI/kB,EACFpkB,KAAKwyC,cAAcrgC,EAAYvR,EAAM6D,EAAKqK,OACrC,CACL,IAAI0sB,EAAax7B,KAAKmb,QAAQ,GAC9BqgB,EAAW/kB,QAAS,EACpB7O,EAAQoC,YAAYwxB,EAAY,CAC9B/0B,MAAOylC,EAASp9B,IACfzK,EAAaI,EAClB,CAIA,GAFAzE,KAAK4yC,cAAchyC,EAAM6D,EAAKqK,EAAYg6B,GAEtC1kB,EAAQ,CACNoX,EAAax7B,KAAKmb,QAAQ,GAA9B,IACI03B,EAAS/J,GAAeA,EAAY+J,OACpC/8B,EAAS,CACXrP,MAAO+0B,EAAW/0B,MAAMzD,SAE1B6vC,IAAW/8B,EAAOzK,MAAQ,CACxBoB,QAAS+uB,EAAWnwB,MAAMoB,UAE5B+uB,EAAW/0B,MAAQ,CAAC,EAAG,GACvBosC,IAAWrX,EAAWnwB,MAAMoB,QAAU,GACtC7E,EAAQmd,UAAUyW,EAAY1lB,EAAQzR,EAAaI,EACrD,CAEAzE,KAAK8yC,aAAezuC,CACtB,EAGA,IAAIwW,EAAwB,CAAC,YAAa,UACtCC,EAA0B,CAAC,YAAa,YACxCi4B,EAAwB,CAAC,QAAS,UAClCC,EAA0B,CAAC,QAAS,YAQxCX,EAAYO,cAAgB,SAAUhyC,EAAM6D,EAAKqK,EAAYg6B,GAC3D,IAAItN,EAAax7B,KAAKmb,QAAQ,GAC1B9W,EAAczD,EAAK8rB,UACnBngB,EAAQ3L,EAAK4L,cAAc/H,EAAK,SAEZ,UAApB+2B,EAAW94B,MACb84B,EAAWzuB,SAAS,CAClBoI,eAAe,IAInB,IAAIxG,EAAYm6B,GAAeA,EAAYn6B,UACvCskC,EAAiBnK,GAAeA,EAAYmK,eAC5ClkC,EAAe+5B,GAAeA,EAAY/5B,aAC1CE,EAAe65B,GAAeA,EAAY75B,aAC1C2J,EAAakwB,GAAeA,EAAYlwB,WACxCC,EAAkBiwB,GAAeA,EAAYjwB,gBAC7CnJ,EAAiBo5B,GAAeA,EAAYp5B,eAC5CxC,EAAc47B,GAAeA,EAAY57B,YAE7C,IAAK47B,GAAeloC,EAAK6mC,cAAe,CACtC,IAAIp+B,EAAYy/B,GAAeA,EAAYz/B,UAAYy/B,EAAYz/B,UAAYzI,EAAK0I,aAAa7E,GAGjGkK,EAAYtF,EAAUsD,SAASkO,GAAuB9C,aAAa,CAAC,UACpEk7B,EAAiB5pC,EAAUsD,SAASmO,GAAyB/C,eAC7DhJ,EAAe1F,EAAU8D,WAAW,gBACpC8B,EAAe5F,EAAU8D,WAAW,gBACpCyL,EAAavP,EAAUsD,SAASomC,GAChCl6B,EAAkBxP,EAAUsD,SAASqmC,GACrCtjC,EAAiBrG,EAAU8D,WAAW,kBACtCD,EAAc7D,EAAU8D,WAAW,SACrC,MACE8lC,EAAiBnxC,EAAOyF,OAAO,CAAC,EAAG0rC,GAGrC,IAAIC,EAAU1X,EAAWnwB,MACzBmwB,EAAWpuB,KAAK,YAAa2B,GAAgB,GAAKvI,KAAK0L,GAAK,KAAO,GAE/DjD,GACFusB,EAAWpuB,KAAK,WAAY,CAAC6C,EAAahB,EAAa,GAAIH,EAAW,IAAKmB,EAAahB,EAAa,GAAIH,EAAW,MAGtH5B,GAAesuB,EAAWpuB,KAAK,SAAUF,GAEzCsuB,EAAWxjB,SAASzL,EAAOu8B,GAAeA,EAAYqK,kBACtD3X,EAAWtmB,SAASvG,GACpB,IAAIlC,EAAU7L,EAAK4L,cAAc/H,EAAK,WAEvB,MAAXgI,IACFymC,EAAQzmC,QAAUA,GAGpB,IAAI2mC,EAAetK,GAAeA,EAAYsK,aAC1ChiC,GAAYgiC,GAAgBjxB,EAAkBvhB,IAE9CwyC,GAA4B,MAAZhiC,IAClBxJ,EAAQkR,cAAco6B,EAASD,EAAgBr6B,EAAYC,EAAiB,CAC1EE,aAAc1U,EACd2U,eAAgBvU,EAChBwU,YAAam6B,EAAexyC,EAAK8D,QAAQD,GAAO7D,EAAKsC,IAAIkO,EAAU3M,GACnE0U,YAAY,EACZC,UAAW7M,IAIfivB,EAAWtkB,IAAI,aAAaA,IAAI,YAAYA,IAAI,YAAYA,IAAI,UAChEskB,EAAW5uB,WAAaqmC,EAGxBrrC,EAAQ0F,cAAckuB,GACtB,IAAI/0B,EAAQylC,EAASp9B,GAErB,GAAIY,GAAkBrL,EAAY4E,qBAAsB,CACtD,IAAIijB,EAAa,WACf,IAAImnB,EAAQ5sC,EAAM,GAAKA,EAAM,GAC7BzG,KAAKmX,UAAU,CACb1Q,MAAO,CAACD,KAAKF,IAAe,IAAXG,EAAM,GAAUA,EAAM,GAAK,GAAID,KAAKF,IAAe,IAAXG,EAAM,GAAUA,EAAM,GAAK,EAAI4sC,KACvF,IAAK,aACV,EAEIhnB,EAAW,WACbrsB,KAAKmX,UAAU,CACb1Q,MAAOA,GACN,IAAK,aACV,EAEA+0B,EAAWl7B,GAAG,YAAa4rB,GAAY5rB,GAAG,WAAY+rB,GAAU/rB,GAAG,WAAY4rB,GAAY5rB,GAAG,SAAU+rB,EAC1G,CACF,EAQAgmB,EAAYvF,QAAU,SAAUt1B,EAAIzG,GAClC,IAAIyqB,EAAax7B,KAAKmb,QAAQ,GAE9Bnb,KAAKyW,OAAS+kB,EAAW/kB,QAAS,IAEhC1F,IAAOA,EAAIuiC,aAAe9X,EAAWnwB,MAAMC,KAAO,MACpD1D,EAAQoC,YAAYwxB,EAAY,CAC9BnwB,MAAO,CACLoB,QAAS,GAEXhG,MAAO,CAAC,EAAG,IACVzG,KAAK8yC,aAAc9yC,KAAKuE,UAAWiT,EACxC,EAEA1V,EAAO6rB,SAAS8d,EAAW7jC,EAAQwP,OACnC,IAAIjU,EAAWsoC,EACfroC,EAAOvB,QAAUsB,C,wBCzTjB,IAAIyE,EAAUnG,EAAQ,OAElBgqC,EAAYhqC,EAAQ,MAWxB,SAAS0nB,EAAWoqB,GAClBvzC,KAAKqI,MAAQ,IAAIT,EAAQwP,MACzBpX,KAAKwzC,YAAcD,GAAc9H,CACnC,CAEA,IAAIgI,EAAkBtqB,EAAWjnB,UAEjC,SAASwxC,EAAgB9yC,EAAM6D,EAAKkvC,GAClC,IAAI7tC,EAAQlF,EAAK+K,cAAclH,GAK/B,OAAOqB,IAAUuY,MAAMvY,EAAM,MAAQuY,MAAMvY,EAAM,OAAS6tC,GAAYA,EAASlvC,KAA+C,SAAtC7D,EAAK4L,cAAc/H,EAAK,SAClH,CAQAgvC,EAAgBjqB,WAAa,SAAU5oB,EAAM+yC,GAC3C,IAAItrC,EAAQrI,KAAKqI,MACbhE,EAAczD,EAAK8rB,UACnBjkB,EAAUzI,KAAK0I,MACfkrC,EAAa5zC,KAAKwzC,YAClB1K,EAAc,CAChBn6B,UAAWtK,EAAYsI,SAAS,oBAAoBoL,aAAa,CAAC,UAClEk7B,eAAgB5uC,EAAYsI,SAAS,sBAAsBoL,eAC3DhJ,aAAc1K,EAAYnB,IAAI,gBAC9B+L,aAAc5K,EAAYnB,IAAI,gBAC9BwM,eAAgBrL,EAAYnB,IAAI,kBAChC0V,WAAYvU,EAAYsI,SAAS,gBACjCkM,gBAAiBxU,EAAYsI,SAAS,kBACtCO,YAAa7I,EAAYnB,IAAI,WAE/BtC,EAAKsI,KAAKT,GAASU,KAAI,SAAUuf,GAC/B,IAAI5iB,EAAQlF,EAAK+K,cAAc+c,GAE/B,GAAIgrB,EAAgB9yC,EAAM8nB,EAAQirB,GAAW,CAC3C,IAAInF,EAAW,IAAIoF,EAAWhzC,EAAM8nB,EAAQogB,GAC5C0F,EAASphC,KAAK,WAAYtH,GAC1BlF,EAAK+I,iBAAiB+e,EAAQ8lB,GAC9BnmC,EAAMc,IAAIqlC,EACZ,CACF,IAAG3rC,QAAO,SAAU6lB,EAAQC,GAC1B,IAAI6lB,EAAW/lC,EAAQsB,iBAAiB4e,GACpC7iB,EAAQlF,EAAK+K,cAAc+c,GAE1BgrB,EAAgB9yC,EAAM8nB,EAAQirB,IAK9BnF,GAIHA,EAAShlB,WAAW5oB,EAAM8nB,EAAQogB,GAClClhC,EAAQoC,YAAYwkC,EAAU,CAC5B9nC,SAAUZ,GACTzB,KANHmqC,EAAW,IAAIoF,EAAWhzC,EAAM8nB,GAChC8lB,EAASphC,KAAK,WAAYtH,IAS5BuC,EAAMc,IAAIqlC,GACV5tC,EAAK+I,iBAAiB+e,EAAQ8lB,IAhB5BnmC,EAAM6B,OAAOskC,EAiBjB,IAAGtkC,QAAO,SAAUye,GAClB,IAAIlf,EAAKhB,EAAQsB,iBAAiB4e,GAClClf,GAAMA,EAAGqjC,SAAQ,WACfzkC,EAAM6B,OAAOT,EACf,GACF,IAAGY,UACHrK,KAAK0I,MAAQ9H,CACf,EAEA6yC,EAAgBhqB,aAAe,WAC7B,IAAI7oB,EAAOZ,KAAK0I,MAEZ9H,GAEFA,EAAK0J,mBAAkB,SAAUb,EAAIhF,GACnC,IAAIqB,EAAQlF,EAAK+K,cAAclH,GAC/BgF,EAAG2D,KAAK,WAAYtH,EACtB,GAEJ,EAEA2tC,EAAgBvpC,OAAS,SAAU2pC,GACjC,IAAIxrC,EAAQrI,KAAKqI,MACbzH,EAAOZ,KAAK0I,MAEZ9H,IACEizC,EACFjzC,EAAK0J,mBAAkB,SAAUb,GAC/BA,EAAGqjC,SAAQ,WACTzkC,EAAM6B,OAAOT,EACf,GACF,IAEApB,EAAMkC,YAGZ,EAEA,IAAIpH,EAAWgmB,EACf/lB,EAAOvB,QAAUsB,C,wBCxHjB,IAAIrB,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElBuyB,EAAOvyB,EAAQ,OAKfqyC,EAAc9f,EAAKzsB,OAAO,CAC5B7E,KAAM,eACNuH,MAAO,CAAC,EACRgqB,UAAW,SAAUC,EAAKjqB,GACxB,IAAK,IAAIgM,KAAKhM,EACZ,GAAIA,EAAMrI,eAAeqU,IAA4B,IAAtBA,EAAEkG,QAAQ,QAAe,CACtD,IAAI8iB,EAAMh1B,EAAMgM,GAChBie,EAAIG,OAAO4K,EAAI,GAAG,GAAIA,EAAI,GAAG,IAC7B/K,EAAII,OAAO2K,EAAI,GAAG,GAAIA,EAAI,GAAG,GAC/B,CAEJ,IAYF,SAAS8U,EAAWnzC,EAAM6D,EAAKuvC,EAAc5vB,GAC3Cxc,EAAQwP,MAAMO,KAAK3X,MAMnBA,KAAKwb,UAMLxb,KAAKob,aAKLpb,KAAKg0C,aAAeA,EAEpBh0C,KAAKi0C,eAAerzC,EAAM6D,EAAK2f,GAE/BpkB,KAAKwpB,WAAW5oB,EAAM6D,EAAK2f,GAM3BpkB,KAAK8yC,YACP,CAEA,IAAIoB,EAAkBH,EAAW7xC,UA+BjC,SAASiyC,EAAUxnB,EAAQ5jB,EAAKoX,GAC9B,OAAOre,EAAO41B,IAAI/K,GAAQ,SAAU7mB,GAGlC,OAFAA,EAAQA,EAAM9C,QACd8C,EAAMiD,GAAOoX,EAAWtB,aACjB/Y,CACT,GACF,CAEA,SAASsuC,EAAqBp2B,GAE5B,IAAI/T,EAAQ,CAAC,EAIb,OAHAnI,EAAOU,KAAKwb,GAAa,SAAUq2B,EAAMp+B,GACvChM,EAAM,OAASgM,GAAKo+B,CACtB,IACOpqC,CACT,CA+BA,SAASqqC,EAAeN,GACtBh0C,KAAKqI,MAAQ,IAAIT,EAAQwP,MACzBpX,KAAKg0C,aAAeA,CACtB,CA9EAE,EAAgBD,eAAiB,SAAUrzC,EAAM6D,EAAK2f,GACpD,IAAIjE,EAAavf,EAAK+K,cAAclH,GAChC0Y,EAAsC,eAA3BgD,EAAWlD,YAA+B,EAAI,EACzDjG,EAAQ,EAEZhX,KAAKmJ,IAAI,IAAIvB,EAAQokB,QAAQ,CAC3B/hB,MAAO,CACL0iB,OAAQvI,EAAS+vB,EAAUh0B,EAAWjC,SAAUf,EAAUgD,GAAcA,EAAWjC,UAErF7S,MAAO,CACL8J,eAAe,GAEjB/C,GAAI,OAENpS,KAAKwb,UAAYxE,IAEjB,IAAIgH,EAAclc,EAAO41B,IAAIvX,EAAWnC,aAAa,SAAUq2B,GAC7D,OAAOjwB,EAAS+vB,EAAUE,EAAMl3B,EAAUgD,GAAck0B,CAC1D,IACAr0C,KAAKmJ,IAAI,IAAI2qC,EAAY,CACvB7pC,MAAOmqC,EAAqBp2B,GAC5B3S,MAAO,CACL8J,eAAe,GAEjB/C,GAAI,OAENpS,KAAKob,aAAepE,GACtB,EAyBAk9B,EAAgB1qB,WAAa,SAAU5oB,EAAM6D,EAAK2f,GAChD,IAAI/f,EAAcrE,KAAK8yC,aAAelyC,EAAK8rB,UACvCvM,EAAavf,EAAK+K,cAAclH,GAChC8vC,EAAe3sC,EAAQwc,EAAS,YAAc,eAGlDmwB,EAAav0C,KAAKmb,QAAQnb,KAAKwb,WAAY,CACzCvR,MAAO,CACL0iB,OAAQxM,EAAWjC,WAEpB7Z,EAAaI,GAChB8vC,EAAav0C,KAAKmb,QAAQnb,KAAKob,cAAe,CAC5CnR,MAAOmqC,EAAqBj0B,EAAWnC,cACtC3Z,EAAaI,GAChBzE,KAAKg0C,aAAar8B,KAAK,KAAM3X,KAAMY,EAAM6D,EAC3C,EAEA3C,EAAO6rB,SAASomB,EAAYnsC,EAAQwP,OAWpC,IAAIo9B,EAAsBF,EAAepyC,UAMzCsyC,EAAoBhrB,WAAa,SAAU5oB,GACzC,IAAIyH,EAAQrI,KAAKqI,MACbI,EAAUzI,KAAK0I,MACfsrC,EAAeh0C,KAAKg0C,aACxBpzC,EAAKsI,KAAKT,GAASU,KAAI,SAAUuf,GAC/B,GAAI9nB,EAAKwI,SAASsf,GAAS,CACzB,IAAI8lB,EAAW,IAAIuF,EAAWnzC,EAAM8nB,EAAQsrB,GAAc,GAC1DpzC,EAAK+I,iBAAiB+e,EAAQ8lB,GAC9BnmC,EAAMc,IAAIqlC,EACZ,CACF,IAAG3rC,QAAO,SAAU6lB,EAAQC,GAC1B,IAAI6lB,EAAW/lC,EAAQsB,iBAAiB4e,GAEnC/nB,EAAKwI,SAASsf,IAKd8lB,EAGHA,EAAShlB,WAAW5oB,EAAM8nB,GAF1B8lB,EAAW,IAAIuF,EAAWnzC,EAAM8nB,EAAQsrB,GAM1C3rC,EAAMc,IAAIqlC,GACV5tC,EAAK+I,iBAAiB+e,EAAQ8lB,IAZ5BnmC,EAAM6B,OAAOskC,EAajB,IAAGtkC,QAAO,SAAUye,GAClB,IAAIlf,EAAKhB,EAAQsB,iBAAiB4e,GAClClf,GAAMpB,EAAM6B,OAAOT,EACrB,IAAGY,UACHrK,KAAK0I,MAAQ9H,CACf,EAOA4zC,EAAoBtqC,OAAS,WAC3B,IAAI7B,EAAQrI,KAAKqI,MACbzH,EAAOZ,KAAK0I,MAChB1I,KAAK0I,MAAQ,KACb9H,GAAQA,EAAK0J,mBAAkB,SAAUb,GACvCA,GAAMpB,EAAM6B,OAAOT,EACrB,GACF,EAEA,IAAItG,EAAWmxC,EACflxC,EAAOvB,QAAUsB,C,iCCxMjB,IAAIrB,EAASL,EAAQ,OAEjBqoB,EAAOroB,EAAQ,OAEfgzC,EAAQhzC,EAAQ,KAEhBizC,EAAWjzC,EAAQ,MAEnBwoB,EAAqBxoB,EAAQ,OAE7BkzC,EAAmBlzC,EAAQ,OAE3BkM,EAAsBlM,EAAQ,OAElC,SAAS0B,EAASwyB,EAAON,EAAO3I,EAAWkoB,EAAU/e,GAGnD,IAFA,IAAIe,EAAQ,IAAI6d,EAAMG,GAEb3+B,EAAI,EAAGA,EAAI0f,EAAMxhB,OAAQ8B,IAChC2gB,EAAMie,QAAQ/yC,EAAOkS,SACrB2hB,EAAM1f,GAAGoQ,GAAIsP,EAAM1f,GAAGzS,KAAMyS,GAAIA,GAGlC,IAAI6+B,EAAe,GACfC,EAAa,GACbC,EAAY,EAEhB,IAAS/+B,EAAI,EAAGA,EAAIof,EAAMlhB,OAAQ8B,IAAK,CACrC,IAAIg/B,EAAO5f,EAAMpf,GACbi/B,EAASD,EAAKC,OACdp/B,EAASm/B,EAAKn/B,OAEd8gB,EAAMue,QAAQD,EAAQp/B,EAAQk/B,KAChCD,EAAW/zC,KAAKi0C,GAChBH,EAAa9zC,KAAKc,EAAOkS,SAASihC,EAAK5uB,GAAI6uB,EAAS,MAAQp/B,IAC5Dk/B,IAEJ,CAEA,IACIlf,EADAhzB,EAAW4pB,EAAUxpB,IAAI,oBAG7B,GAAiB,gBAAbJ,GAA2C,UAAbA,EAChCgzB,EAAWnoB,EAAoBgoB,EAAOjJ,EAAWA,EAAUrqB,aACtD,CAEL,IAAI+yC,EAAeT,EAAiBzxC,IAAIJ,GAEpCuyC,EAAiBprB,GAAoBmrB,GAAsC,SAAtBA,EAAa1yC,MAAkB0yC,EAAav7B,YAAmB,IAAIjX,OAAO,CAAC,UAAW+yB,GAC/IG,EAAW,IAAIhM,EAAKurB,EAAgB3oB,GACpCoJ,EAASxL,SAASqL,EACpB,CAEA,IAAII,EAAW,IAAIjM,EAAK,CAAC,SAAU4C,GAkBnC,OAjBAqJ,EAASzL,SAASyqB,EAAYD,GAC9Bjf,GAAcA,EAAWC,EAAUC,GACnC2e,EAAS,CACPY,SAAUxf,EACVyf,OAAQ3e,EACR4e,WAAY,QACZC,MAAO,CACLzZ,KAAMlG,EACNoB,KAAMnB,GAER2f,UAAW,CACT1Z,KAAM,OACN9E,KAAM,cAIVN,EAAM/zB,SACC+zB,CACT,CAEAxzB,EAAOvB,QAAUsB,C,wBCzEjB,IAAIuE,EAAUjG,EAAQ,OAIlBK,GAFU4F,EAAQC,QAETlG,EAAQ,QAEjBqoB,EAAOroB,EAAQ,OAEfwoB,EAAqBxoB,EAAQ,OAE7BsoB,EAAStoB,EAAQ,OAEjBk0C,EAAmB5rB,EAAO4rB,iBAC1BC,EAAkB7rB,EAAO6rB,gBACzBC,EAAmB9rB,EAAO8rB,iBAE1BlB,EAAmBlzC,EAAQ,OAE/B,SAASq0C,EAAiBl1C,GACxB,IAAIqV,EAAI,EAER,MAAOA,EAAIrV,EAAKuT,QAAqB,MAAXvT,EAAKqV,GAC7BA,IAGF,OAAOrV,EAAKqV,EACd,CAEA,SAAS8/B,EAA0Bn1C,GACjC,IAAIo1C,EAAaF,EAAiBl1C,GAClC,OAAqB,MAAdo1C,IAAuBl0C,EAAO6Q,QAAQgjC,EAAiBK,GAChE,CAMA,SAASroC,EAAoB/M,EAAMyD,EAAahC,GAE9CzB,EAAOA,GAAQ,GACf,IAAIq1C,EAAe5xC,EAAYnB,IAAI,oBAC/BgzC,EAAUC,EAASF,GACnBG,EAAqBzB,EAAiBzxC,IAAI+yC,GAC1CI,EAAiB,CACnB9uB,UAAWljB,EAAYnB,IAAI,UAC3BozC,QAASjyC,EAAYnB,IAAI,eAGvBqzC,EAAWL,GAAWA,EAAQt1C,EAAMyD,EAAahC,EAASg0C,GAC1Dx8B,EAAa08B,GAAYA,EAAS18B,WAEjCA,IAEHA,EAAau8B,IAAuBA,EAAmBI,kBAAoBJ,EAAmBI,oBAAsBJ,EAAmBv8B,WAAW7W,UAAY,CAAC,IAAK,KACpK6W,EAAaoQ,EAAmBpQ,EAAYjZ,EAAMy1C,IAGpD,IAAII,EAAgBF,EAAWA,EAASE,eAAiB,EACrD9zC,EAAO,IAAImnB,EAAKjQ,EAAYxV,GAC5BqyC,EAAWC,EAAeJ,EAAU31C,GACpC62B,EAAa,CAAC,EACdmf,EAAiBH,GAAiB,GAAKV,EAA0Bn1C,GAAQ,SAAUi2C,EAASv5B,EAAS/Y,EAAWuyC,GAOlH,OALIjB,EAAiBgB,KACnBl0C,EAAK8kC,eAAgB,GAIhBqP,IAAaL,EAAgBlyC,EAAYqxC,EAAgBD,EAAiBkB,GAAUh9B,EAAWi9B,GACxG,EAAI,SAAUD,EAASv5B,EAAS/Y,EAAWuyC,GACzC,IAAI/oC,EAAQ4nC,EAAiBkB,GACzB14B,EAAMy3B,EAAgB7nC,GAASA,EAAM+oC,GAAWj9B,EAAWi9B,IAE3DjB,EAAiBgB,KACnBl0C,EAAK8kC,eAAgB,GAGvB,IAAIsP,EAAqBR,GAAYA,EAASQ,mBAgB9C,OAdIA,GAAsBA,EAAmBz5B,IAExB,kBAARa,IAETsZ,EAAWna,GAAWma,EAAWna,IAAYy5B,EAAmBz5B,GAAS05B,gBACzE74B,EAAMrc,EAAOqa,QAAQsb,EAAWna,GAAUa,GAEtCA,EAAM,IAAME,MAAMF,KAEpBA,GAAOA,IAKNA,CACT,EAGA,OAFAxb,EAAK8kC,eAAgB,EACrB9kC,EAAK2nB,SAAS1pB,EAAM81C,EAAUE,GACvBj0C,CACT,CAEA,SAASs0C,EAAYC,GACnB,MAAoB,aAAbA,GAAwC,SAAbA,CACpC,CAEA,SAASC,EAAiBD,GACxB,MAAoB,aAAbA,EAA0B,UAAyB,SAAbA,EAAsB,OAAS,OAC9E,CAMA,IAAIf,EAAW,CACb3rC,YAAa,SAAU5J,EAAMyD,EAAahC,EAASg0C,GACjD,IAAIe,EAAat1C,EAAO41B,IAAI,CAAC,QAAS,UAAU,SAAUl0B,GACxD,OAAOnB,EAAQg1C,gBAAgB,CAC7BnzC,SAAUV,EACV8M,MAAOjM,EAAYnB,IAAIM,EAAO,SAC9B6iB,GAAIhiB,EAAYnB,IAAIM,EAAO,QAC1B,EACL,IACI8zC,EAAaF,EAAW,GACxBG,EAAaH,EAAW,GACxBI,EAAYF,EAAWp0C,IAAI,QAC3Bu0C,EAAYF,EAAWr0C,IAAI,QAC3B2W,EAAa,CAAC,CAChBrW,KAAM,IACNd,KAAMy0C,EAAiBK,GACvBE,UAAWT,EAAYO,IACtB,CACDh0C,KAAM,IAENd,KAAMy0C,EAAiBM,GACvBC,UAAWT,EAAYQ,KAErBE,EAAgC,aAAdH,EAClBI,EAAgC,aAAdH,EACtB59B,EAAaoQ,EAAmBpQ,EAAYjZ,EAAMy1C,GAClD,IAAIU,EAAqB,CAAC,EAU1B,OARIY,IACFZ,EAAmB9qC,EAAIqrC,GAGrBM,IACFb,EAAmB7qC,EAAIqrC,GAGlB,CACL19B,WAAYA,EACZ48B,cAAekB,EAAkB,EAAIC,EAAkB,GAAK,EAC5Db,mBAAoBA,EAExB,EACA9zB,WAAY,SAAUriB,EAAMyD,EAAahC,EAASg0C,GAChD,IAAIwB,EAAkBx1C,EAAQg1C,gBAAgB,CAC5CnzC,SAAU,aACVoM,MAAOjM,EAAYnB,IAAI,mBACvBmjB,GAAIhiB,EAAYnB,IAAI,kBACnB,GACC40C,EAAiBD,EAAgB30C,IAAI,QACrC60C,EAAgC,aAAnBD,EACbj+B,EAAa,CAAC,CAChBrW,KAAM,SACNd,KAAMy0C,EAAiBW,GACvBJ,UAAWT,EAAYa,KAEzBj+B,EAAaoQ,EAAmBpQ,EAAYjZ,EAAMy1C,GAClD,IAAIU,EAAqB,CAAC,EAM1B,OAJIgB,IACFhB,EAAmBiB,OAASH,GAGvB,CACLh+B,WAAYA,EACZ48B,cAAesB,EAAa,GAAK,EACjChB,mBAAoBA,EAExB,EACAhsC,MAAO,SAAUnK,EAAMyD,EAAahC,EAASg0C,GAC3C,IAAI4B,EAAa51C,EAAQg1C,gBAAgB,CACvCnzC,SAAU,QACVoM,MAAOjM,EAAYnB,IAAI,cACvBmjB,GAAIhiB,EAAYnB,IAAI,aACnB,GACCg1C,EAAiBD,EAAWE,cAAc,aAC1CC,EAAkBH,EAAWE,cAAc,cAC3CE,EAAiBD,EAAgBl1C,IAAI,QACrCo1C,EAAgBJ,EAAeh1C,IAAI,QACnC2W,EAAa,CAAC,CAChBrW,KAAM,SACNd,KAAMy0C,EAAiBkB,GACvBX,UAAWT,EAAYoB,IACtB,CACD70C,KAAM,QACNd,KAAMy0C,EAAiBmB,GACvBZ,UAAWT,EAAYqB,KAErBC,EAAwC,aAAlBD,EACtBE,EAA0C,aAAnBH,EAC3Bx+B,EAAaoQ,EAAmBpQ,EAAYjZ,EAAMy1C,GAClD,IAAIU,EAAqB,CAAC,EAU1B,OARIyB,IACFzB,EAAmB9mB,OAASmoB,GAG1BG,IACFxB,EAAmBnkB,MAAQslB,GAGtB,CACLr+B,WAAYA,EACZ48B,cAAe8B,EAAsB,EAAIC,EAAuB,GAAK,EACrEzB,mBAAoBA,EAExB,EACA9xC,IAAK,SAAUrE,EAAMyD,EAAahC,EAASg0C,GAGzC,MAAO,CACLx8B,WAAYoQ,EAAmB,CAAC,CAC9BzmB,KAAM,OACL,CACDA,KAAM,QACJ5C,EAAMy1C,GAEd,GAGF,SAASM,EAAe16B,EAAQrb,GAC9B,IAEI63C,EAFA/B,EAAW,GACXrlC,EAAc4K,GAAUA,EAAOpC,WAAWoC,EAAOw6B,eAOrD,GAJIplC,IACFonC,EAAoBx8B,EAAO86B,mBAAmB1lC,EAAY7N,OAGxDi1C,EAAmB,CAErB,IAAIhhB,EAAaghB,EAAkBzB,gBAEnC,GAAIvf,EAAY,CACd,IAAIihB,EAAU93C,EAAKuT,OAKnB,GAAIrS,EAAO6Q,QAAQ/R,EAAK,KAAOA,EAAK,GAAGuT,OAAS,EAAG,CACjDuiC,EAAW,GAEX,IAAK,IAAIzgC,EAAI,EAAGA,EAAIyiC,EAASziC,IAC3BygC,EAASzgC,GAAKwhB,EAAW72B,EAAKqV,GAAGgG,EAAOw6B,eAAiB,GAE7D,MACEC,EAAWjf,EAAWz0B,MAAM,EAEhC,CACF,CAEA,OAAO0zC,CACT,CAEA,IAAIvzC,EAAWwK,EACfvK,EAAOvB,QAAUsB,C,wBC1QjB,IAAI4mB,EAAStoB,EAAQ,OAEjBk3C,EAAoB5uB,EAAO4uB,kBAK/B,SAASx2B,EAAkBvhB,GACzB,IAAIwQ,EACAwnC,EAAYD,EAAkB/3C,EAAM,SAExC,GAAIg4C,EAAUzkC,OACZ/C,EAAWwnC,EAAU,OAChB,CAEL,IACI3hB,EADApd,EAAajZ,EAAKiZ,WAAW7W,QAGjC,MAAO6W,EAAW1F,SAAW/C,EAAWyI,EAAWg/B,MAAO5hB,EAAWr2B,EAAK4c,iBAAiBpM,GAAU1O,KAAmB,YAAbu0B,GAAuC,SAAbA,IAEvI,CAEA,OAAO7lB,CACT,CAEAvP,EAAQsgB,kBAAoBA,C,iCCzB5B,IAAI2H,EAAOroB,EAAQ,OAEfwoB,EAAqBxoB,EAAQ,OAE7B6yC,EAAiB7yC,EAAQ,OAEzBK,EAASL,EAAQ,OAEjBiY,EAAmB,CAKrBo/B,aAAc,KAKdlrC,eAAgB,SAAUC,EAAQxL,GAIhC,IAAIo1B,EAKAshB,EAJAzB,EAAaj1C,EAAQ22C,aAAa,QAASh5C,KAAKkD,IAAI,eACpDq0C,EAAal1C,EAAQ22C,aAAa,QAASh5C,KAAKkD,IAAI,eACpDs0C,EAAYF,EAAWp0C,IAAI,QAC3Bu0C,EAAYF,EAAWr0C,IAAI,QAIb,aAAds0C,GACF3pC,EAAOtE,OAAS,aAChBkuB,EAAa6f,EAAWN,gBACxB+B,GAAa,GACU,aAAdtB,GACT5pC,EAAOtE,OAAS,WAChBkuB,EAAa8f,EAAWP,gBACxB+B,GAAa,GAEblrC,EAAOtE,OAASsE,EAAOtE,QAAU,aAGnC,IAAI6T,EAAY,CAAC,IAAK,KAClB67B,EAAqC,eAAlBprC,EAAOtE,OAA0B,EAAI,EACxD2vC,EAAcl5C,KAAK84C,aAAe17B,EAAU67B,GAC5CE,EAAe/7B,EAAU,EAAI67B,GAC7Br4C,EAAOiN,EAAOjN,KAClBm4C,GAAcj3C,EAAOU,KAAK5B,GAAM,SAAU0nB,EAAMhY,GAC1CgY,EAAKva,OAASjM,EAAO6Q,QAAQ2V,EAAKva,OACpCua,EAAKva,MAAMqrC,QAAQ9oC,GAEnBxO,EAAO6Q,QAAQ2V,IAASA,EAAK8wB,QAAQ9oC,EAEzC,IACA,IAAIsJ,EAAyB5Z,KAAK4Z,uBAC9BC,EAAa,CAAC,CAChBrW,KAAM01C,EACNG,UAAW,CACTC,SAAS,GAEXhD,QAAS,CAAC,SACT,CACD9yC,KAAM21C,EACN7C,QAAS18B,EAAuB5W,UAElC6W,EAAaoQ,EAAmBpQ,EAAYjZ,EAAM,CAChD2mB,UAAWvnB,KAAKkD,IAAI,UACpBozC,QAASt2C,KAAKkD,IAAI,cAElBq2C,SAAU3/B,EAAuBzF,OAAS,IAE5C,IAAIxR,EAAO,IAAImnB,EAAKjQ,EAAY7Z,MAEhC,OADA2C,EAAK2nB,SAAS1pB,EAAM62B,EAAaA,EAAWz0B,QAAU,MAC/CL,CACT,EAMAkG,YAAa,WACX,IAAIE,EAAM/I,KAAK84C,aACf,OAAO94C,KAAKqC,QAAQ22C,aAAajwC,EAAM,OAAQ/I,KAAKkD,IAAI6F,EAAM,cAAc0K,IAC9E,GAEEiH,EAAY,CACd2O,KAAM,WAMJ,IAAImwB,EAAiBx5C,KAAKy5C,gBAAkB,IAAInF,EAAet0C,KAAK4a,mBACpE5a,KAAKqI,MAAMc,IAAIqwC,EAAenxC,MAChC,EACAvI,OAAQ,SAAUuE,EAAahC,EAASC,GACtCtC,KAAKy5C,gBAAgBjwB,WAAWnlB,EAAYG,UAC9C,EACA0F,OAAQ,SAAU7H,GAChBrC,KAAKy5C,gBAAgBvvC,QACvB,GAEFrI,EAAQ6X,iBAAmBA,EAC3B7X,EAAQ6Y,UAAYA,C,wBCvGpB,IAAIhX,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAErBA,EAAQ,OAERA,EAAQ,OAER,IAAImnB,EAAennB,EAAQ,OAEvBonB,EAAepnB,EAAQ,OAEvBi4C,EAAaj4C,EAAQ,OAEzBA,EAAQ,OAGRiC,EAAQyD,eAAerF,EAAOoF,MAAM0hB,EAAc,OAAQ,SAAU,SACpEllB,EAAQuD,eAAenF,EAAOoF,MAAM2hB,EAAc,SAElDnlB,EAAQmmB,kBAAkBnmB,EAAQi2C,SAASC,UAAUC,UAAW/3C,EAAOoF,MAAMwyC,EAAY,Q,wBCpBzF,IAAIhyC,EAAUjG,EAAQ,OAIlBkM,GAFUjG,EAAQC,QAEIlG,EAAQ,QAE9BiM,EAAcjM,EAAQ,OAEtB0B,EAAWuK,EAAYnG,OAAO,CAChC7E,KAAM,cACN8E,aAAc,CAAC,OAAQ,SACvBoG,eAAgB,SAAUC,EAAQxL,GAChC,OAAOsL,EAAoBE,EAAOjN,KAAMZ,KAAMqC,EAChD,EACAgM,cAAe,CACbC,OAAQ,EAERC,EAAG,EAEHrJ,iBAAkB,cAClBsJ,iBAAiB,EACjBkB,gBAAgB,EAMhBoqC,cAAc,EAEdnvB,MAAO,CACL5Q,OAAQ,CACNrT,SAAU,QAOdmlB,UAAW,CACT9R,OAAQ,CACNxO,MAAO,EACP7I,KAAM,UAKVmwB,MAAM,EAENknB,QAAQ,EACRC,eAAgB,KAEhBnrC,OAAQ,cAERC,WAAY,EAEZC,aAAc,KAEdkrC,YAAY,EAEZC,eAAe,EAEfC,cAAc,EAEdC,SAAU,OACV9/B,gBAAiB,SAEjB7K,YAAa,EACb4qC,oBAAqB9zC,OAIzBnD,EAAOvB,QAAUsB,C,0CCvEjB,IAAIuE,EAAUjG,EAAQ,OAIlBK,GAFU4F,EAAQC,QAETlG,EAAQ,QAEjB0nB,EAAa1nB,EAAQ,OAErBgqC,EAAYhqC,EAAQ,MAEpB64C,EAAoB74C,EAAQ,OAE5BmG,EAAUnG,EAAQ,OAElB84C,EAAY94C,EAAQ,OAEpB+4C,EAAQ/4C,EAAQ,MAEhBwqB,EAAWuuB,EAAMvuB,SACjBD,EAAUwuB,EAAMxuB,QAEhBvR,EAAYhZ,EAAQ,OAGxB,SAASg5C,EAAaC,EAASC,GAC7B,GAAID,EAAQvmC,SAAWwmC,EAAQxmC,OAA/B,CAIA,IAAK,IAAI8B,EAAI,EAAGA,EAAIykC,EAAQvmC,OAAQ8B,IAAK,CACvC,IAAIsoB,EAAKmc,EAAQzkC,GACbuoB,EAAKmc,EAAQ1kC,GAEjB,GAAIsoB,EAAG,KAAOC,EAAG,IAAMD,EAAG,KAAOC,EAAG,GAClC,MAEJ,CAEA,OAAO,CAXP,CAYF,CAEA,SAASoc,EAAUb,GACjB,MAAyB,kBAAXA,EAAsBA,EAASA,EAAS,GAAM,CAC9D,CAEA,SAASc,EAAqBpnC,GAC5B,IAAI2I,EAAS3I,EAAKqnC,kBAElB,GAAIrnC,EAAKsnC,OAAQ,CAEf,IAAIC,EAAgBvnC,EAAK+I,eAAiB,EAAI,EAC1Cy+B,EAAM7+B,EAAO,GAAKA,EAAO,GAAK,GAAK,EACvCA,EAAO,IAAM6+B,EAAMD,EACnB5+B,EAAO,IAAM6+B,EAAMD,CACrB,CAEA,OAAO5+B,CACT,CAEA,SAASuE,EAAKxC,GACZ,OAAOA,GAAO,EAAI,GAAK,CACzB,CASA,SAAS+8B,EAAmBp4C,EAAUlC,GACpC,IAAIgI,EAAW9F,EAAS+F,cACpBmK,EAAYlQ,EAASmQ,aAAarK,GAClCuyC,EAAa,EAEjB,IAAKvyC,EAASwyC,OAAQ,CACpB,IAAIh/B,EAASpJ,EAAUvM,MAAMiW,YAEzBN,EAAO,GAAK,EAEd++B,EAAa/+B,EAAO,GACXA,EAAO,GAAK,IAErB++B,EAAa/+B,EAAO,GAGxB,CAEA,IAAIhL,EAAW4B,EAAUjK,IACrBsyC,EAA8B,MAAbjqC,GAAiC,WAAbA,EAAwB,EAAI,EACrE,OAAOxQ,EAAKytB,SAAS,CAACjd,IAAW,SAAU+M,EAAK1Z,GAC9C,IAAI62C,EACAC,EAAY36C,EAAK26C,UAErB,MAAOA,GAAa56B,EAAK46B,EAAUr4C,IAAIkO,EAAU3M,MAAUkc,EAAKxC,GAAM,CACpEm9B,EAAoBC,EACpB,KACF,CAEA,IAAIC,EAAc,GAGlB,OAFAA,EAAYH,GAAkBz6C,EAAKsC,IAAI0F,EAASG,IAAKtE,GACrD+2C,EAAY,EAAIH,GAAkBC,EAAoBA,EAAkBp4C,IAAIkO,EAAU3M,GAAK,GAAQ02C,EAC5Fr4C,EAASiD,YAAYy1C,EAC9B,IAAG,EACL,CAEA,SAASC,EAAoB9qC,EAAW+qC,EAAcr3C,GACpD,IAAIs3C,EAAUd,EAAqBlqC,EAAUo2B,QAAQ,MACjD6U,EAAUf,EAAqBlqC,EAAUo2B,QAAQ,MACjDj+B,EAAe6H,EAAU9H,cAAcC,eACvCmD,EAAIzF,KAAKJ,IAAIu1C,EAAQ,GAAIA,EAAQ,IACjCzvC,EAAI1F,KAAKJ,IAAIw1C,EAAQ,GAAIA,EAAQ,IACjCrwC,EAAQ/E,KAAKF,IAAIq1C,EAAQ,GAAIA,EAAQ,IAAM1vC,EAC3CD,EAASxF,KAAKF,IAAIs1C,EAAQ,GAAIA,EAAQ,IAAM1vC,EAC5CsB,EAAYnJ,EAAYnB,IAAI,2BAA6B,EAEzD24C,EAAax3C,EAAYnB,IAAI,gBAAkBsK,EAAY,EAAIhH,KAAKF,IAAIiF,EAAOS,GAE/ElD,GACFoD,GAAK2vC,EACL7vC,GAAuB,EAAb6vC,IAEV5vC,GAAK4vC,EACLtwC,GAAsB,EAAbswC,GAGX,IAAIjlC,EAAW,IAAIhP,EAAQ+C,KAAK,CAC9BV,MAAO,CACLgC,EAAGA,EACHC,EAAGA,EACHX,MAAOA,EACPS,OAAQA,KAcZ,OAVI0vC,IACF9kC,EAAS3M,MAAMnB,EAAe,QAAU,UAAY,EACpDlB,EAAQmd,UAAUnO,EAAU,CAC1B3M,MAAO,CACLsB,MAAOA,EACPS,OAAQA,IAET3H,IAGEuS,CACT,CAEA,SAASklC,EAAqB/wC,EAAO2wC,EAAcr3C,GACjD,IAAI03C,EAAYhxC,EAAMixC,eAClBC,EAAalxC,EAAMmxC,gBACnBC,EAAeF,EAAWv/B,YAC1B+W,EAAcsoB,EAAUr/B,YACxB0/B,EAAS51C,KAAK0L,GAAK,IACnB0E,EAAW,IAAIhP,EAAQsD,OAAO,CAChCjB,MAAO,CACLkC,GAAIpB,EAAMoB,GACVC,GAAIrB,EAAMqB,GACVV,GAAIywC,EAAa,GACjB1wC,EAAG0wC,EAAa,GAChB/wC,YAAaqoB,EAAY,GAAK2oB,EAC9B/vC,UAAWonB,EAAY,GAAK2oB,EAC5BlsB,UAAW6rB,EAAUM,WAazB,OATIX,IACF9kC,EAAS3M,MAAMoC,UAAYonB,EAAY,GAAK2oB,EAC5Cx0C,EAAQmd,UAAUnO,EAAU,CAC1B3M,MAAO,CACLoC,UAAWonB,EAAY,GAAK2oB,IAE7B/3C,IAGEuS,CACT,CAEA,SAAS0lC,EAAgBx5C,EAAU44C,EAAcr3C,GAC/C,MAAyB,UAAlBvB,EAASJ,KAAmBo5C,EAAqBh5C,EAAU44C,EAAcr3C,GAAeo3C,EAAoB34C,EAAU44C,EAAcr3C,EAC7I,CAEA,SAASk4C,EAAmB5vB,EAAQ7pB,EAAU05C,GAK5C,IAJA,IAAI5zC,EAAW9F,EAAS+F,cACpB4zC,EAA6B,MAAjB7zC,EAASG,KAAgC,WAAjBH,EAASG,IAAmB,EAAI,EACpE2zC,EAAa,GAERzmC,EAAI,EAAGA,EAAI0W,EAAOxY,OAAS,EAAG8B,IAAK,CAC1C,IAAI0mC,EAAShwB,EAAO1W,EAAI,GACpBjI,EAAK2e,EAAO1W,GAChBymC,EAAW17C,KAAKgN,GAChB,IAAI4uC,EAAS,GAEb,OAAQJ,GACN,IAAK,MACHI,EAAOH,GAAaE,EAAOF,GAC3BG,EAAO,EAAIH,GAAazuC,EAAG,EAAIyuC,GAE/BC,EAAW17C,KAAK47C,GAChB,MAEF,IAAK,SAEH,IAAIC,GAAU7uC,EAAGyuC,GAAaE,EAAOF,IAAc,EAC/CK,EAAU,GACdF,EAAOH,GAAaK,EAAQL,GAAaI,EACzCD,EAAO,EAAIH,GAAazuC,EAAG,EAAIyuC,GAC/BK,EAAQ,EAAIL,GAAaE,EAAO,EAAIF,GACpCC,EAAW17C,KAAK47C,GAChBF,EAAW17C,KAAK87C,GAChB,MAEF,QACEF,EAAOH,GAAazuC,EAAGyuC,GACvBG,EAAO,EAAIH,GAAaE,EAAO,EAAIF,GAEnCC,EAAW17C,KAAK47C,GAEtB,CAIA,OADAjwB,EAAO1W,IAAMymC,EAAW17C,KAAK2rB,EAAO1W,IAC7BymC,CACT,CAEA,SAASK,EAAkBn8C,EAAMkC,GAC/B,IAAIk6C,EAAiBp8C,EAAK24B,UAAU,cAEpC,GAAKyjB,GAAmBA,EAAe7oC,QAAWvT,EAAKoW,QAAvD,CAOA,IAFA,IAAIimC,EAEKhnC,EAAI+mC,EAAe7oC,OAAS,EAAG8B,GAAK,EAAGA,IAE9C,GAAI+mC,EAAe/mC,GAAGinC,UAAY,EAAG,CACnCD,EAAaD,EAAe/mC,GAC5B,KACF,CAGF,GAAKgnC,GAAgC,gBAAlBn6C,EAASJ,KAA5B,CAUA,IAAIw6C,EAAYD,EAAWC,UACvB5/B,EAAU1c,EAAKiZ,WAAWqjC,GAC1BzpC,EAAO3Q,EAASikC,QAAQzpB,GAExB6/B,EAAar7C,EAAO41B,IAAIulB,EAAWG,OAAO,SAAUC,GACtD,MAAO,CACL10C,MAAO8K,EAAKN,cAAcM,EAAKL,YAAYiqC,EAAKtvC,QAChDxB,MAAO8wC,EAAK9wC,MAEhB,IACI+wC,EAAUH,EAAWhpC,OACrBopC,EAAcN,EAAWM,YAAYv6C,QAErCs6C,GAAWH,EAAW,GAAGx0C,MAAQw0C,EAAWG,EAAU,GAAG30C,QAC3Dw0C,EAAW3pC,UACX+pC,EAAY/pC,WAGd,IAAIgqC,EAAa,GAEbC,EAAWN,EAAW,GAAGx0C,MAAQ60C,EACjCE,EAAWP,EAAWG,EAAU,GAAG30C,MAAQ60C,EAC3CG,EAAYD,EAAWD,EAE3B,GAAIE,EAAY,KACd,MAAO,cAGT77C,EAAOU,KAAK26C,GAAY,SAAUE,GAChCA,EAAKpvC,QAAUovC,EAAK10C,MAAQ80C,GAAYE,CAC1C,IACAR,EAAWn8C,KAAK,CACdiN,OAAQqvC,EAAUH,EAAWG,EAAU,GAAGrvC,OAAS,GACnD1B,MAAOgxC,EAAY,IAAM,gBAE3BJ,EAAW/D,QAAQ,CAEjBnrC,OAAQqvC,EAAUH,EAAW,GAAGlvC,OAAS,GACzC1B,MAAOgxC,EAAY,IAAM,gBAM3B,IAAIrY,EAAW,IAAIt9B,EAAQg2C,eAAe,EAAG,EAAG,EAAG,EAAGT,GAAY,GAGlE,OAFAjY,EAAS5nB,GAAWmgC,EACpBvY,EAAS5nB,EAAU,KAAOogC,EACnBxY,CAvDP,CAdA,CAsEF,CAEA,IAAI/hC,EAAWsX,EAAUlT,OAAO,CAC9B7E,KAAM,OACN2mB,KAAM,WACJ,IAAI+lB,EAAY,IAAIxnC,EAAQwP,MACxB2iB,EAAa,IAAI5Q,EACrBnpB,KAAKqI,MAAMc,IAAI4wB,EAAW1xB,OAC1BrI,KAAKspB,YAAcyQ,EACnB/5B,KAAK69C,WAAazO,CACpB,EACAtvC,OAAQ,SAAUuE,EAAahC,EAASC,GACtC,IAAIQ,EAAWuB,EAAYa,iBACvBmD,EAAQrI,KAAKqI,MACbzH,EAAOyD,EAAYG,UACnBmtB,EAAiBttB,EAAYsI,SAAS,oBACtCmxC,EAAiBz5C,EAAYsI,SAAS,oBACtCggB,EAAS/rB,EAAKytB,SAASztB,EAAK+K,eAAe,GAC3CoyC,EAAoC,UAAlBj7C,EAASJ,KAC3Bs7C,EAAeh+C,KAAKi+C,UACpBlkB,EAAa/5B,KAAKspB,YAClB6jB,EAAWntC,KAAKk+C,UAChBnyB,EAAU/rB,KAAKm+C,SACf/O,EAAYpvC,KAAK69C,WACjBnC,EAAer3C,EAAYnB,IAAI,aAC/Bk7C,GAAeN,EAAeO,UAC9BC,EAAkBpD,EAAmBp4C,EAAUlC,GAC/Cq5C,EAAa51C,EAAYnB,IAAI,cAE7Bq7C,EAAiBtE,IAAe8D,IAAoB15C,EAAYnB,IAAI,kBAAoBlD,KAAKw+C,qBAAqB59C,EAAMkC,GAGxH2F,EAAUzI,KAAK0I,MACnBD,GAAWA,EAAQ6B,mBAAkB,SAAUb,EAAIhF,GAC7CgF,EAAGg1C,SACLp2C,EAAM6B,OAAOT,GACbhB,EAAQkB,iBAAiBlF,EAAK,MAElC,IAEKw1C,GACHlgB,EAAW7vB,SAGb7B,EAAMc,IAAIimC,GAEV,IAAIvc,GAAQkrB,GAAmB15C,EAAYnB,IAAI,QAEzCiqC,GAAY6Q,EAAat7C,OAASI,EAASJ,MAAQmwB,IAAS7yB,KAAK0+C,OAiBjEN,IAAgBryB,EAElBA,EAAU/rB,KAAK2+C,YAAYhyB,EAAQ2xB,EAAiBx7C,EAAU44C,GACrD3vB,IAAYqyB,IAErBhP,EAAUllC,OAAO6hB,GACjBA,EAAU/rB,KAAKm+C,SAAW,MAI5B/O,EAAUt4B,YAAYwlC,EAAgBx5C,GAAU,EAAOuB,IAGvD41C,GAAclgB,EAAWvQ,WAAW5oB,EAAM29C,GAG1C39C,EAAK0J,mBAAkB,SAAUb,GAC/BA,EAAGogC,eAAc,EACnB,IAGK4Q,EAAaz6C,KAAK4+C,iBAAkBN,IAAqB7D,EAAaz6C,KAAKirC,QAASte,KACnF+uB,EACF17C,KAAK6+C,iBAAiBj+C,EAAM09C,EAAiBx7C,EAAUR,EAAKuwB,IAGxDA,IAEFlG,EAAS4vB,EAAmB5vB,EAAQ7pB,EAAU+vB,GAC9CyrB,EAAkB/B,EAAmB+B,EAAiBx7C,EAAU+vB,IAGlEsa,EAASrgC,SAAS,CAChB6f,OAAQA,IAEVZ,GAAWA,EAAQjf,SAAS,CAC1B6f,OAAQA,EACR2xB,gBAAiBA,QArDvBrE,GAAclgB,EAAWvQ,WAAW5oB,EAAM29C,GAEtC1rB,IAEFlG,EAAS4vB,EAAmB5vB,EAAQ7pB,EAAU+vB,GAC9CyrB,EAAkB/B,EAAmB+B,EAAiBx7C,EAAU+vB,IAGlEsa,EAAWntC,KAAK8+C,aAAanyB,EAAQ7pB,EAAU44C,GAE3C0C,IACFryB,EAAU/rB,KAAK2+C,YAAYhyB,EAAQ2xB,EAAiBx7C,EAAU44C,IAGhEtM,EAAUt4B,YAAYwlC,EAAgBx5C,GAAU,EAAMuB,KA6CxD,IAAIuoB,EAAcmwB,EAAkBn8C,EAAMkC,IAAalC,EAAK24B,UAAU,SACtE4T,EAASpgC,SAASjL,EAAOkL,SACzB2kB,EAAejE,eAAgB,CAC7BzgB,KAAM,OACNyJ,OAAQkW,EACRC,SAAU,WAEZ,IAAIktB,EAAS11C,EAAYnB,IAAI,UAQ7B,GAPA62C,EAASa,EAAUv2C,EAAYnB,IAAI,WACnCiqC,EAASrgC,SAAS,CAChBitC,OAAQA,EACRC,eAAgB31C,EAAYnB,IAAI,kBAChCi3C,aAAc91C,EAAYnB,IAAI,kBAG5B6oB,EAAS,CACX,IAAIwvB,EAAY36C,EAAK26C,UACjBwD,EAAkB,EAOtB,GANAhzB,EAAQhf,SAASjL,EAAOkL,SAAS8wC,EAAekB,eAAgB,CAC9D/xC,KAAM2f,EACNngB,QAAS,GACTogB,SAAU,WAGR0uB,EAAW,CACb,IAAI0D,EAAkB1D,EAAU7uB,UAChCqyB,EAAkBnE,EAAUqE,EAAgB/7C,IAAI,UAClD,CAEA6oB,EAAQjf,SAAS,CACfitC,OAAQA,EACRgF,gBAAiBA,EACjB/E,eAAgB31C,EAAYnB,IAAI,kBAChCi3C,aAAc91C,EAAYnB,IAAI,iBAElC,CAEAlD,KAAK0I,MAAQ9H,EAEbZ,KAAKi+C,UAAYn7C,EACjB9C,KAAK4+C,iBAAmBN,EACxBt+C,KAAKirC,QAAUte,EACf3sB,KAAK0+C,MAAQ7rB,CACf,EACAvqB,QAAS,WAAa,EACtBwxB,UAAW,SAAUz1B,EAAahC,EAASC,EAAKyB,GAC9C,IAAInD,EAAOyD,EAAYG,UACnBD,EAAYg2C,EAAU2E,eAAet+C,EAAMmD,GAE/C,KAAMQ,aAAqB86B,QAAuB,MAAb96B,GAAqBA,GAAa,EAAG,CACxE,IAAIsK,EAASjO,EAAKmJ,iBAAiBxF,GAEnC,IAAKsK,EAAQ,CAEX,IAAIb,EAAKpN,EAAK+K,cAAcpH,GAE5B,IAAKyJ,EAEH,OAGFa,EAAS,IAAI48B,EAAU7qC,EAAM2D,GAC7BsK,EAAOnI,SAAWsH,EAClBa,EAAO8jC,KAAKtuC,EAAYnB,IAAI,UAAWmB,EAAYnB,IAAI,MACvD2L,EAAOsd,OAAS9N,MAAMrQ,EAAG,KAAOqQ,MAAMrQ,EAAG,IACzCa,EAAO4vC,QAAS,EAChB79C,EAAK+I,iBAAiBpF,EAAWsK,GAEjCA,EAAO4jC,qBAAoB,GAC3BzyC,KAAKqI,MAAMc,IAAI0F,EACjB,CAEAA,EAAOirB,WACT,MAEErf,EAAUvY,UAAU43B,UAAUniB,KAAK3X,KAAMqE,EAAahC,EAASC,EAAKyB,EAExE,EACA41B,SAAU,SAAUt1B,EAAahC,EAASC,EAAKyB,GAC7C,IAAInD,EAAOyD,EAAYG,UACnBD,EAAYg2C,EAAU2E,eAAet+C,EAAMmD,GAE/C,GAAiB,MAAbQ,GAAqBA,GAAa,EAAG,CACvC,IAAIsK,EAASjO,EAAKmJ,iBAAiBxF,GAE/BsK,IACEA,EAAO4vC,QACT79C,EAAK+I,iBAAiBpF,EAAW,MACjCvE,KAAKqI,MAAM6B,OAAO2E,IAElBA,EAAO8qB,WAGb,MAIElf,EAAUvY,UAAUy3B,SAAShiB,KAAK3X,KAAMqE,EAAahC,EAASC,EAAKyB,EAEvE,EAOA+6C,aAAc,SAAUnyB,GACtB,IAAIwgB,EAAWntC,KAAKk+C,UAiBpB,OAfI/Q,GACFntC,KAAK69C,WAAW3zC,OAAOijC,GAGzBA,EAAW,IAAIlhB,EAAS,CACtBhiB,MAAO,CACL0iB,OAAQA,GAEVlW,QAAQ,EACRrE,GAAI,KAGNpS,KAAK69C,WAAW10C,IAAIgkC,GAEpBntC,KAAKk+C,UAAY/Q,EACVA,CACT,EAQAwR,YAAa,SAAUhyB,EAAQ2xB,GAC7B,IAAIvyB,EAAU/rB,KAAKm+C,SAiBnB,OAfIpyB,GACF/rB,KAAK69C,WAAW3zC,OAAO6hB,GAGzBA,EAAU,IAAIC,EAAQ,CACpB/hB,MAAO,CACL0iB,OAAQA,EACR2xB,gBAAiBA,GAEnB7nC,QAAQ,IAGVzW,KAAK69C,WAAW10C,IAAI4iB,GAEpB/rB,KAAKm+C,SAAWpyB,EACTA,CACT,EAKAyyB,qBAAsB,SAAU59C,EAAMkC,GACpC,IAAIq8C,EAAer8C,EAASs8C,eAAe,WAAW,GAEtD,GAAID,GAAgBA,EAAaE,eAC/B,OAAOv9C,EAAO2B,KAAK07C,EAAaE,eAAgBF,EAEpD,EAMAN,iBAAkB,SAAUj+C,EAAM09C,EAAiBx7C,EAAUR,EAAKuwB,GAChE,IAAIsa,EAAWntC,KAAKk+C,UAChBnyB,EAAU/rB,KAAKm+C,SACf95C,EAAczD,EAAK8rB,UACnBxjB,EAAOoxC,EAAkBt6C,KAAK0I,MAAO9H,EAAMZ,KAAK4+C,iBAAkBN,EAAiBt+C,KAAKi+C,UAAWn7C,GACnGw8C,EAAUp2C,EAAKo2C,QACfC,EAAmBr2C,EAAKq2C,iBACxB1gB,EAAO31B,EAAK21B,KACZ2gB,EAAgBt2C,EAAKs2C,cAErB3sB,IAEFysB,EAAU/C,EAAmBrzC,EAAKo2C,QAASx8C,EAAU+vB,GACrD0sB,EAAmBhD,EAAmBrzC,EAAKq2C,iBAAkBz8C,EAAU+vB,GACvEgM,EAAO0d,EAAmBrzC,EAAK21B,KAAM/7B,EAAU+vB,GAC/C2sB,EAAgBjD,EAAmBrzC,EAAKs2C,cAAe18C,EAAU+vB,IAMnEsa,EAASljC,MAAMw1C,SAAWv2C,EAAKo2C,QAC/BnS,EAASljC,MAAM0iB,OAAS2yB,EACxB13C,EAAQoC,YAAYmjC,EAAU,CAC5BljC,MAAO,CACL0iB,OAAQkS,IAETx6B,GAEC0nB,IACFA,EAAQjf,SAAS,CACf6f,OAAQ2yB,EACRhB,gBAAiBiB,IAEnB33C,EAAQoC,YAAY+hB,EAAS,CAC3B9hB,MAAO,CACL0iB,OAAQkS,EACRyf,gBAAiBkB,IAElBn7C,IAML,IAHA,IAAIq7C,EAAkB,GAClBC,EAAaz2C,EAAK02C,OAEb3pC,EAAI,EAAGA,EAAI0pC,EAAWxrC,OAAQ8B,IAAK,CAC1C,IAAI4pC,EAAMF,EAAW1pC,GAAG4pC,IAExB,GAAY,MAARA,EAAa,CACf,IAAIp2C,EAAK7I,EAAKmJ,iBAAiB41C,EAAW1pC,GAAG6pC,MAEzCr2C,GACFi2C,EAAgB1+C,KAAK,CACnByI,GAAIA,EACJs2C,MAAO9pC,GAIb,CACF,CAEIk3B,EAAS6S,WAAa7S,EAAS6S,UAAU7rC,QAC3Cg5B,EAAS6S,UAAU,GAAG7V,QAAO,WAC3B,IAAK,IAAIl0B,EAAI,EAAGA,EAAIypC,EAAgBvrC,OAAQ8B,IAAK,CAC/C,IAAIxM,EAAKi2C,EAAgBzpC,GAAGxM,GAC5BA,EAAG2D,KAAK,WAAY+/B,EAASljC,MAAMw1C,SAASC,EAAgBzpC,GAAG8pC,OACjE,CACF,GAEJ,EACA71C,OAAQ,SAAU7H,GAChB,IAAIgG,EAAQrI,KAAKqI,MACbI,EAAUzI,KAAK0I,MAEnB1I,KAAK69C,WAAWtzC,YAEhBvK,KAAKspB,YAAYpf,QAAO,GAGxBzB,GAAWA,EAAQ6B,mBAAkB,SAAUb,EAAIhF,GAC7CgF,EAAGg1C,SACLp2C,EAAM6B,OAAOT,GACbhB,EAAQkB,iBAAiBlF,EAAK,MAElC,IACAzE,KAAKk+C,UAAYl+C,KAAKm+C,SAAWn+C,KAAKi+C,UAAYj+C,KAAKirC,QAAUjrC,KAAK4+C,iBAAmB5+C,KAAK0I,MAAQ,IACxG,IAGFtF,EAAOvB,QAAUsB,C,wBCxpBjB,SAASwd,EAAKxC,GACZ,OAAOA,GAAO,EAAI,GAAK,CACzB,CAEA,SAAS8hC,EAAkBn9C,EAAUlC,EAAM6D,GACzC,IAKI62C,EALA1yC,EAAW9F,EAAS+F,cACpBmK,EAAYlQ,EAASmQ,aAAarK,GAClCuyC,EAAavyC,EAASwyC,OAAS,EAAIpoC,EAAUvM,MAAMiW,YAAY,GAC/DtL,EAAW4B,EAAUjK,IACrBsyC,EAA8B,MAAbjqC,GAAiC,WAAbA,EAAwB,EAAI,EAEjEmqC,EAAY36C,EAAK26C,UACjBp9B,EAAMvd,EAAKsC,IAAIkO,EAAU3M,GAE7B,MAAO82C,GAAa56B,EAAK46B,EAAUr4C,IAAIkO,EAAU3M,MAAUkc,EAAKxC,GAAM,CACpEm9B,EAAoBC,EACpB,KACF,CAEA,IAAIC,EAAc,GAGlB,OAFAA,EAAYH,GAAkBz6C,EAAKsC,IAAI0F,EAASG,IAAKtE,GACrD+2C,EAAY,EAAIH,GAAkBC,EAAoBA,EAAkBp4C,IAAIkO,EAAU3M,GAAK,GAAQ02C,EAC5Fr4C,EAASiD,YAAYy1C,EAC9B,CAuBA,SAAS0E,EAASz3C,EAAS03C,GACzB,IAAIC,EAAa,GAkBjB,OAjBAD,EAAQj3C,KAAKT,GAASU,KAAI,SAAU1E,GAClC27C,EAAWp/C,KAAK,CACd6+C,IAAK,IACLp7C,IAAKA,GAET,IAAG5B,QAAO,SAAU6lB,EAAQC,GAC1By3B,EAAWp/C,KAAK,CACd6+C,IAAK,IACLp7C,IAAKkkB,EACLm3B,KAAMp3B,GAEV,IAAGxe,QAAO,SAAUzF,GAClB27C,EAAWp/C,KAAK,CACd6+C,IAAK,IACLp7C,IAAKA,GAET,IAAG4F,UACI+1C,CACT,CAEA,SAASj9C,EAASsF,EAAS03C,EAASE,EAAoBC,EAAoBC,EAAaC,GAiBvF,IAhBA,IAAIt3C,EAAOg3C,EAASz3C,EAAS03C,GAMzBM,EAAa,GACbC,EAAa,GAEbC,EAAoB,GACpBC,EAAoB,GACpBhB,EAAS,GACTiB,EAAgB,GAChBC,EAAa,GACbC,EAAOP,EAAY3mC,WAEd5D,EAAI,EAAGA,EAAI/M,EAAKiL,OAAQ8B,IAAK,CACpC,IAAI+qC,EAAW93C,EAAK+M,GAChBgrC,GAAa,EAGjB,OAAQD,EAASnB,KACf,IAAK,IACH,IAAIqB,EAAYz4C,EAAQkD,cAAcq1C,EAASv8C,KAC3Ck4C,EAASwD,EAAQx0C,cAAcq1C,EAASlB,OAExCzhC,MAAM6iC,EAAU,KAAO7iC,MAAM6iC,EAAU,OACzCA,EAAYvE,EAAO35C,SAGrBy9C,EAAWz/C,KAAKkgD,GAChBR,EAAW1/C,KAAK27C,GAChBgE,EAAkB3/C,KAAKq/C,EAAmBW,EAASv8C,MACnDm8C,EAAkB5/C,KAAKs/C,EAAmBU,EAASlB,OACnDgB,EAAW9/C,KAAKm/C,EAAQv5B,YAAYo6B,EAASlB,OAC7C,MAEF,IAAK,IACH,IAAIr7C,EAAMu8C,EAASv8C,IACnBg8C,EAAWz/C,KAAKu/C,EAAYx6C,YAAY,CAACo6C,EAAQj9C,IAAI69C,EAAK,GAAIt8C,GAAK,GAAO07C,EAAQj9C,IAAI69C,EAAK,GAAIt8C,GAAK,MACpGi8C,EAAW1/C,KAAKm/C,EAAQx0C,cAAclH,GAAKzB,SAC3C29C,EAAkB3/C,KAAKi/C,EAAkBM,EAAaJ,EAAS17C,IAC/Dm8C,EAAkB5/C,KAAKs/C,EAAmB77C,IAC1Cq8C,EAAW9/C,KAAKm/C,EAAQv5B,YAAYniB,IACpC,MAEF,IAAK,IACCA,EAAMu8C,EAASv8C,IAAnB,IACI08C,EAAW14C,EAAQme,YAAYniB,GAG/B08C,IAAa18C,GACfg8C,EAAWz/C,KAAKyH,EAAQkD,cAAclH,IACtCi8C,EAAW1/C,KAAKw/C,EAAYz6C,YAAY,CAAC0C,EAAQvF,IAAI69C,EAAK,GAAIt8C,GAAK,GAAOgE,EAAQvF,IAAI69C,EAAK,GAAIt8C,GAAK,MACpGk8C,EAAkB3/C,KAAKq/C,EAAmB57C,IAC1Cm8C,EAAkB5/C,KAAKi/C,EAAkBO,EAAa/3C,EAAShE,IAC/Dq8C,EAAW9/C,KAAKmgD,IAEhBF,GAAa,EAMfA,IACFrB,EAAO5+C,KAAKggD,GACZH,EAAc7/C,KAAK6/C,EAAc1sC,QAErC,CAIA0sC,EAAcn1B,MAAK,SAAU+C,EAAGC,GAC9B,OAAOoyB,EAAWryB,GAAKqyB,EAAWpyB,EACpC,IACA,IAAI0yB,EAAmB,GACnBC,EAAmB,GACnBC,EAA0B,GAC1BC,EAA0B,GAC1BC,EAAe,GAEnB,IAASvrC,EAAI,EAAGA,EAAI4qC,EAAc1sC,OAAQ8B,IAAK,CACzCxR,EAAMo8C,EAAc5qC,GACxBmrC,EAAiBnrC,GAAKwqC,EAAWh8C,GACjC48C,EAAiBprC,GAAKyqC,EAAWj8C,GACjC68C,EAAwBrrC,GAAK0qC,EAAkBl8C,GAC/C88C,EAAwBtrC,GAAK2qC,EAAkBn8C,GAC/C+8C,EAAavrC,GAAK2pC,EAAOn7C,EAC3B,CAEA,MAAO,CACL66C,QAAS8B,EACTviB,KAAMwiB,EACN9B,iBAAkB+B,EAClB9B,cAAe+B,EACf3B,OAAQ4B,EAEZ,C,SAEAp+C,EAAOvB,QAAUsB,C,uBC3KjB,IAAI6wB,EAAOvyB,EAAQ,OAEfk8B,EAAOl8B,EAAQ,OAEfggD,EAAoBhgD,EAAQ,OAG5BigD,EAAU/jB,EAAKv3B,IACfu7C,EAAUhkB,EAAKr3B,IACfu5B,EAAclC,EAAKkC,YACnB+hB,EAASjkB,EAAK+B,KAEdP,EAAI,GACJ0iB,EAAM,GACNnhB,EAAM,GAEV,SAASohB,EAAY1jC,GACnB,OAAOC,MAAMD,EAAE,KAAOC,MAAMD,EAAE,GAChC,CAEA,SAAS2jC,EAAY7tB,EAAKvH,EAAQpO,EAAOyjC,EAAQC,EAAQhH,EAAKiH,EAAWC,EAAWpI,EAAQC,EAAgBG,GAI1G,IAHA,IAAIiI,EAAU,EACV39C,EAAM8Z,EAED8jC,EAAI,EAAGA,EAAIL,EAAQK,IAAK,CAC/B,IAAIjkC,EAAIuO,EAAOloB,GAEf,GAAIA,GAAOw9C,GAAUx9C,EAAM,EACzB,MAGF,GAAIq9C,EAAY1jC,GAAI,CAClB,GAAI+7B,EAAc,CAChB11C,GAAOw2C,EACP,QACF,CAEA,KACF,CAEA,GAAIx2C,IAAQ8Z,EACV2V,EAAI+mB,EAAM,EAAI,SAAW,UAAU78B,EAAE,GAAIA,EAAE,IAC3CwjC,EAAOC,EAAKzjC,QAEZ,GAAI27B,EAAS,EAAG,CACd,IAAIlqB,EAAUprB,EAAMw2C,EAChBqH,EAAQ31B,EAAOkD,GAEnB,GAAIsqB,EAEF,MAAOmI,GAASR,EAAYn1B,EAAOkD,IACjCA,GAAWorB,EACXqH,EAAQ31B,EAAOkD,GAInB,IAAI0yB,EAAe,GACfC,EAAQ71B,EAAOy1B,GACfE,EAAQ31B,EAAOkD,GAEnB,IAAKyyB,GAASR,EAAYQ,GACxBV,EAAOlhB,EAAKtiB,OACP,CAOL,IAAIqkC,EACAC,EAEJ,GARIZ,EAAYQ,KAAWnI,IACzBmI,EAAQlkC,GAGVuf,EAAKgC,IAAIR,EAAGmjB,EAAOE,GAII,MAAnBxI,GAA6C,MAAnBA,EAAwB,CACpD,IAAIjxC,EAAyB,MAAnBixC,EAAyB,EAAI,EACvCyI,EAAaj8C,KAAKiH,IAAI2Q,EAAErV,GAAOy5C,EAAMz5C,IACrC25C,EAAal8C,KAAKiH,IAAI2Q,EAAErV,GAAOu5C,EAAMv5C,GACvC,MACE05C,EAAa9kB,EAAK2M,KAAKlsB,EAAGokC,GAC1BE,EAAa/kB,EAAK2M,KAAKlsB,EAAGkkC,GAI5BC,EAAeG,GAAcA,EAAaD,GAC1C5iB,EAAYa,EAAKtiB,EAAG+gB,GAAI4a,GAAU,EAAIwI,GACxC,CAGAb,EAAQG,EAAKA,EAAKM,GAClBR,EAAQE,EAAKA,EAAKK,GAClBR,EAAQhhB,EAAKA,EAAKyhB,GAClBR,EAAQjhB,EAAKA,EAAKwhB,GAClBhuB,EAAIyuB,cAAcd,EAAI,GAAIA,EAAI,GAAInhB,EAAI,GAAIA,EAAI,GAAItiB,EAAE,GAAIA,EAAE,IAE1DyhB,EAAYgiB,EAAKzjC,EAAG+gB,EAAG4a,EAASwI,EAClC,MACEruB,EAAII,OAAOlW,EAAE,GAAIA,EAAE,IAIvBgkC,EAAU39C,EACVA,GAAOw2C,CACT,CAEA,OAAOoH,CACT,CAEA,SAASO,EAAej2B,EAAQk2B,GAC9B,IAAIC,EAAQ,CAACv8C,IAAUA,KACnBw8C,EAAQ,EAAEx8C,KAAWA,KAEzB,GAAIs8C,EACF,IAAK,IAAI5sC,EAAI,EAAGA,EAAI0W,EAAOxY,OAAQ8B,IAAK,CACtC,IAAIjI,EAAK2e,EAAO1W,GAEZjI,EAAG,GAAK80C,EAAM,KAChBA,EAAM,GAAK90C,EAAG,IAGZA,EAAG,GAAK80C,EAAM,KAChBA,EAAM,GAAK90C,EAAG,IAGZA,EAAG,GAAK+0C,EAAM,KAChBA,EAAM,GAAK/0C,EAAG,IAGZA,EAAG,GAAK+0C,EAAM,KAChBA,EAAM,GAAK/0C,EAAG,GAElB,CAGF,MAAO,CACL5H,IAAKy8C,EAAmBC,EAAQC,EAChCz8C,IAAKu8C,EAAmBE,EAAQD,EAEpC,CAEA,IAAI72B,EAAW+H,EAAKzsB,OAAO,CACzB7E,KAAM,cACNuH,MAAO,CACL0iB,OAAQ,GACRotB,OAAQ,EACR8I,kBAAkB,EAClB7I,eAAgB,KAChBG,cAAc,GAEhB9uC,MAAO,CACL4B,KAAM,KACNyJ,OAAQ,QAEVwtB,MAAOud,EAAkBztB,EAAK9xB,UAAUgiC,OACxCjQ,UAAW,SAAUC,EAAKjqB,GACxB,IAAI0iB,EAAS1iB,EAAM0iB,OACf1W,EAAI,EACJuY,EAAM7B,EAAOxY,OACb8H,EAAS2mC,EAAej2B,EAAQ1iB,EAAM44C,kBAE1C,GAAI54C,EAAMkwC,aAAc,CAEtB,KAAO3rB,EAAM,EAAGA,IACd,IAAKszB,EAAYn1B,EAAO6B,EAAM,IAC5B,MAIJ,KAAOvY,EAAIuY,EAAKvY,IACd,IAAK6rC,EAAYn1B,EAAO1W,IACtB,KAGN,CAEA,MAAOA,EAAIuY,EACTvY,GAAK8rC,EAAY7tB,EAAKvH,EAAQ1W,EAAGuY,EAAKA,EAAK,EAAGvS,EAAO7V,IAAK6V,EAAO3V,IAAK2D,EAAM8vC,OAAQ9vC,EAAM+vC,eAAgB/vC,EAAMkwC,cAAgB,CAEpI,IAEEnuB,EAAUgI,EAAKzsB,OAAO,CACxB7E,KAAM,aACNuH,MAAO,CACL0iB,OAAQ,GAER2xB,gBAAiB,GACjBvE,OAAQ,EACRgF,gBAAiB,EACjB8D,kBAAkB,EAClB7I,eAAgB,KAChBG,cAAc,GAEhBjW,MAAOud,EAAkBztB,EAAK9xB,UAAUgiC,OACxCjQ,UAAW,SAAUC,EAAKjqB,GACxB,IAAI0iB,EAAS1iB,EAAM0iB,OACf2xB,EAAkBr0C,EAAMq0C,gBACxBroC,EAAI,EACJuY,EAAM7B,EAAOxY,OACb6lC,EAAiB/vC,EAAM+vC,eACvBjZ,EAAO6hB,EAAej2B,EAAQ1iB,EAAM44C,kBACpCG,EAAgBJ,EAAetE,EAAiBr0C,EAAM44C,kBAE1D,GAAI54C,EAAMkwC,aAAc,CAEtB,KAAO3rB,EAAM,EAAGA,IACd,IAAKszB,EAAYn1B,EAAO6B,EAAM,IAC5B,MAIJ,KAAOvY,EAAIuY,EAAKvY,IACd,IAAK6rC,EAAYn1B,EAAO1W,IACtB,KAGN,CAEA,MAAOA,EAAIuY,EAAK,CACd,IAAI6zB,EAAIN,EAAY7tB,EAAKvH,EAAQ1W,EAAGuY,EAAKA,EAAK,EAAGuS,EAAK36B,IAAK26B,EAAKz6B,IAAK2D,EAAM8vC,OAAQC,EAAgB/vC,EAAMkwC,cACzG4H,EAAY7tB,EAAKoqB,EAAiBroC,EAAIosC,EAAI,EAAGA,EAAG7zB,GAAM,EAAGw0B,EAAc58C,IAAK48C,EAAc18C,IAAK2D,EAAM80C,gBAAiB/E,EAAgB/vC,EAAMkwC,cAC5IlkC,GAAKosC,EAAI,EACTnuB,EAAIuR,WACN,CACF,IAEF5jC,EAAQoqB,SAAWA,EACnBpqB,EAAQmqB,QAAUA,C,wBChOlB,IAAItoB,EAAUjC,EAAQ,OAEtBA,EAAQ,OAERA,EAAQ,MAER,IAAIwhD,EAAcxhD,EAAQ,OAEtByhD,EAAczhD,EAAQ,OAE1BiC,EAAQuD,eAAeg8C,GACvBv/C,EAAQyD,eAAe+7C,E,iCCXvB,IAAIx7C,EAAUjG,EAAQ,OAIlBiM,GAFUhG,EAAQC,QAEJlG,EAAQ,QAEtBqoB,EAAOroB,EAAQ,OAEfK,EAASL,EAAQ,OAEjBszB,EAAUtzB,EAAQ,OAElBuzB,EAAaD,EAAQC,WAEFvzB,EAAQ,OAI/B,SAAS0hD,EAAiBC,GACxB,IAAIxiD,EAAOwiD,EAAUxiD,KAEjBA,GAAQA,EAAK,IAAMA,EAAK,GAAG,IAAMA,EAAK,GAAG,GAAG+H,QAC9Cy6C,EAAUxiD,KAAOkB,EAAO41B,IAAI92B,GAAM,SAAUi2C,GAC1C,IAAIwM,EAAS,CAACxM,EAAQ,GAAGluC,MAAOkuC,EAAQ,GAAGluC,OACvCmN,EAAS,CACXutC,OAAQA,GAWV,OARIxM,EAAQ,GAAGrzC,OACbsS,EAAOwtC,SAAWzM,EAAQ,GAAGrzC,MAG3BqzC,EAAQ,GAAGrzC,OACbsS,EAAOytC,OAAS1M,EAAQ,GAAGrzC,MAGtB1B,EAAO0hD,SAAS,CAAC1tC,EAAQ+gC,EAAQ,GAAIA,EAAQ,IACtD,IAEJ,CAEA,IAAI4M,EAAc/1C,EAAYnG,OAAO,CACnC7E,KAAM,eACN8E,aAAc,CAAC,OAAQ,SACvBk8C,sBAAuB,yBACvBr6B,KAAM,SAAUxb,GAEds1C,EAAiBt1C,GACjB41C,EAAY7zC,WAAW5P,KAAM,OAAQ6P,UACvC,EACA2lB,YAAa,SAAU3nB,GACrBs1C,EAAiBt1C,GACjB41C,EAAY7zC,WAAW5P,KAAM,cAAe6P,UAC9C,EACAjC,eAAgB,SAAUC,EAAQxL,GAChC,IAAIwmC,EAAW,IAAI/e,EAAK,CAAC,SAAU9pB,MAenC,OAdA6oC,EAASpB,eAAgB,EACzBoB,EAASve,SAASzc,EAAOjN,KAAM,IAAI,SAAU+iD,EAAUrmC,EAAS/Y,EAAWuyC,GAEzE,GAAI6M,aAAoBtkB,MACtB,OAAOjxB,IAEPy6B,EAASpB,eAAgB,EACzB,IAAI15B,EAAQ41C,EAAS51C,MAErB,OAAa,MAATA,EACKA,aAAiBsxB,MAAQtxB,EAAM+oC,GAAY/oC,OADpD,CAIJ,IACO86B,CACT,EACA9R,cAAe,SAAUxyB,GACvB,IAAI3D,EAAOZ,KAAKwE,UACZ6E,EAAYzI,EAAK0I,aAAa/E,GAC9Bf,EAAO6F,EAAUnG,IAAI,QAEzB,GAAIM,EACF,OAAOA,EAGT,IAAI8/C,EAAWj6C,EAAUnG,IAAI,YACzBqgD,EAASl6C,EAAUnG,IAAI,UACvBs0B,EAAO,GAGX,OAFY,MAAZ8rB,GAAoB9rB,EAAKx2B,KAAKsiD,GACpB,MAAVC,GAAkB/rB,EAAKx2B,KAAKuiD,GACrBvuB,EAAWwC,EAAKjgB,KAAK,OAC9B,EACAlJ,cAAe,CACbnJ,iBAAkB,MAClBoJ,OAAQ,EACRC,EAAG,EACHC,iBAAiB,EACjBkB,gBAAgB,EAEhBk0C,WAAY,EACZC,WAAY,EACZh1C,OAAQ,CAAC,OAAQ,QACjBC,WAAY,CAAC,GAAI,IAEjBg3B,SAAU,EACVge,OAAQ,CACNp5B,MAAM,EACNzB,OAAQ,EAKRqgB,cAAe,EACfz6B,OAAQ,SACRC,WAAY,EACZu6B,MAAM,EAEN0a,YAAa,IAIfC,OAAO,EAEPC,eAAgB,IAGhB9W,UAAU,EACVxiB,MAAO,CACL5Q,OAAQ,CACN2Q,MAAM,EACNhkB,SAAU,QAKdmlB,UAAW,CACT9R,OAAQ,CACNtN,QAAS,QAKbtJ,EAAWsgD,EACfrgD,EAAOvB,QAAUsB,C,uBC3IjB,IAAIuE,EAAUjG,EAAQ,OAIlBiC,GAFUgE,EAAQC,QAERlG,EAAQ,QAElBo3B,EAAWp3B,EAAQ,OAEnBmnC,EAAannC,EAAQ,MAErB4xB,EAAO5xB,EAAQ,OAEfwqB,EAAWxqB,EAAQ,MAEnBopC,EAAiBppC,EAAQ,OAEzBisC,EAAgBjsC,EAAQ,OAExB0B,EAAWO,EAAQwE,gBAAgB,CACrCxF,KAAM,QACN2mB,KAAM,WAAa,EACnBvpB,OAAQ,SAAUuE,EAAahC,EAASC,GACtC,IAAI1B,EAAOyD,EAAYG,UACnBw1B,EAAWh6B,KAAKm6B,UAChB+pB,EAAY7/C,EAAYnB,IAAI,eAC5BmqC,EAAahpC,EAAYnB,IAAI,YAC7BihD,EAAU9/C,EAAYnB,IAAI,UAAYtC,EAAKoW,SAAW3S,EAAYnB,IAAI,kBAEtEghD,IAAclkD,KAAKokD,WAAa/W,IAAertC,KAAKqkD,aAAeF,IAAYnkD,KAAKskD,WAClFtqB,GACFA,EAAS9vB,SAGX8vB,EAAWh6B,KAAKm6B,UAAYgqB,EAAU,IAAIzW,EAAkB,IAAI7U,EAASwU,EAAa6W,EAAYrZ,EAAiB5e,EAAWi4B,EAAYtb,EAAavV,GACvJrzB,KAAKokD,UAAYF,EACjBlkD,KAAKqkD,YAAchX,EACnBrtC,KAAKskD,SAAWH,GAGlB,IAAI71C,EAASjK,EAAYnB,IAAI,UACzB6gD,EAAc1/C,EAAYnB,IAAI,sBAC9BqhD,EAAKjiD,EAAIujB,QAIT2+B,EAAiC,QAAzBD,EAAGE,QAAQC,UAElBF,GACHD,EAAGE,QAAQE,SAASr2C,GAAQs2C,OAAM,GAIZ,MAApB5kD,KAAK6kD,aAAwBL,GAC/BD,EAAGO,YAAY9kD,KAAK6kD,YAAa,CAC/BE,YAAY,IAIZb,GAAaH,IACVS,GACHD,EAAGO,YAAYx2C,EAAQ,CACrBy2C,YAAY,EACZC,eAAgBx+C,KAAKF,IAAIE,KAAKJ,IAAI29C,EAAc,GAAK,GAAK,GAAI,MAKpE/jD,KAAKqI,MAAMc,IAAI6wB,EAAS3xB,OACxB2xB,EAASxQ,WAAW5oB,GACpBZ,KAAK6kD,YAAcv2C,CACrB,EACAmb,aAAc,SAAUplB,EAAahC,EAASC,GAC5CtC,KAAKm6B,UAAU1Q,aAAaplB,GAG5B,IAAIkgD,EAAKjiD,EAAIujB,QACT2+B,EAAiC,QAAzBD,EAAGE,QAAQC,UAElBF,GACHD,EAAGE,QAAQE,SAAS3kD,KAAK6kD,aAAaD,OAAM,EAEhD,EACA16C,OAAQ,SAAU7H,EAASC,GACzBtC,KAAKm6B,WAAan6B,KAAKm6B,UAAUjwB,OAAO5H,GAAK,GAE7C,IAAIiiD,EAAKjiD,EAAIujB,QACT2+B,EAAiC,QAAzBD,EAAGE,QAAQC,UAElBF,GACHD,EAAGE,QAAQE,SAAS3kD,KAAK6kD,aAAaD,OAAM,EAEhD,EACAt8C,QAAS,WAAa,IAGxBlF,EAAOvB,QAAUsB,C,iCC/FjB,IAAIuE,EAAUjG,EAAQ,OAERiG,EAAQC,QAEtB,SAASxE,EAASd,GAChBA,EAAQ+E,iBAAiB,SAAS,SAAU/C,GAC1C,IAAIvB,EAAWuB,EAAYa,iBACvB2jC,EAAWxkC,EAAYG,UAE3BqkC,EAASrmC,MAAK,SAAUiC,GACtB,IAAI4E,EAAYw/B,EAASv/B,aAAa7E,GAClC4+C,EAASh6C,EAAUwE,kBAAkBwxB,MAAQh2B,EAAUwE,OAASxE,EAAUnG,IAAI,UAC9E+7B,EAAM,GAEV,GAAI56B,EAAYnB,IAAI,YAClB,IAAK,IAAI+S,EAAI,EAAGA,EAAIotC,EAAOlvC,OAAQ8B,IACjCgpB,EAAIj+B,KAAK8B,EAASiD,YAAYs9C,EAAOptC,SAElC,CACLgpB,EAAI,GAAKn8B,EAASiD,YAAYs9C,EAAO,IACrCpkB,EAAI,GAAKn8B,EAASiD,YAAYs9C,EAAO,IACrC,IAAIzqB,EAAYvvB,EAAUnG,IAAI,+BAEzB01B,IACHqG,EAAI,GAAK,EAAEA,EAAI,GAAG,GAAKA,EAAI,GAAG,IAAM,GAAKA,EAAI,GAAG,GAAKA,EAAI,GAAG,IAAMrG,GAAYqG,EAAI,GAAG,GAAKA,EAAI,GAAG,IAAM,GAAKA,EAAI,GAAG,GAAKA,EAAI,GAAG,IAAMrG,GAEzI,CAEAiQ,EAASjqB,cAAcna,EAAKw6B,EAC9B,GACF,GACF,CAEA77B,EAAOvB,QAAUsB,C,oBCjCjB,SAASy8B,EAAUnR,GAKjB,OAJMA,aAAa4Q,QACjB5Q,EAAI,CAACA,EAAGA,IAGHA,CACT,CAEA,SAAStrB,EAASd,GAChBA,EAAQ+E,iBAAiB,SAAS,SAAU/C,GAC1C,IAAIzD,EAAOyD,EAAYG,UACnB2N,EAAaytB,EAAUv7B,EAAYnB,IAAI,WACvC4L,EAAa8wB,EAAUv7B,EAAYnB,IAAI,eACvC4+B,EAAe,2BAA2BD,MAAM,KACpDjhC,EAAKyG,UAAU,aAAc8K,GAAcA,EAAW,IACtDvR,EAAKyG,UAAU,WAAY8K,GAAcA,EAAW,IACpDvR,EAAKyG,UAAU,iBAAkByH,GAAcA,EAAW,IAC1DlO,EAAKyG,UAAU,eAAgByH,GAAcA,EAAW,IACxDlO,EAAKyG,UAAU,UAAWhD,EAAYnB,IAAI4+B,IAC1ClhC,EAAK4B,MAAK,SAAUiC,GAClB,IAAI4E,EAAYzI,EAAK0I,aAAa7E,GAC9B0N,EAAaytB,EAAUv2B,EAAU8D,WAAW,UAAU,IACtD2B,EAAa8wB,EAAUv2B,EAAU8D,WAAW,cAAc,IAC1DV,EAAUpD,EAAUnG,IAAI4+B,GAC5B3vB,EAAW,IAAMvR,EAAKye,cAAc5a,EAAK,aAAc0N,EAAW,IAClEA,EAAW,IAAMvR,EAAKye,cAAc5a,EAAK,WAAY0N,EAAW,IAChErD,EAAW,IAAMlO,EAAKye,cAAc5a,EAAK,iBAAkBqK,EAAW,IACtEA,EAAW,IAAMlO,EAAKye,cAAc5a,EAAK,eAAgBqK,EAAW,IACpElO,EAAKye,cAAc5a,EAAK,UAAWgI,EACrC,GACF,GACF,CAEArJ,EAAOvB,QAAUsB,C,wBCjCjB,IAAIO,EAAUjC,EAAQ,OAEtBA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAER,IAAIwjD,EAAkBxjD,EAAQ,OAE1ByjD,EAAYzjD,EAAQ,OAEpB0jD,EAAmB1jD,EAAQ,OAE3B2jD,EAAiB3jD,EAAQ,OAEzB4jD,EAAyB5jD,EAAQ,OAErCiC,EAAQuD,eAAeg+C,GACvBvhD,EAAQyD,eAAe+9C,GACvBxhD,EAAQmmB,kBAAkBnmB,EAAQi2C,SAASC,UAAUC,UAAWsL,GAChEzhD,EAAQ+b,qBAAqB2lC,GAC7BC,EAAuB,MAAO,CAAC,CAC7B3iD,KAAM,kBACNoC,MAAO,mBACPR,OAAQ,kBACP,CACD5B,KAAM,YACNoC,MAAO,cACPR,OAAQ,UACP,CACD5B,KAAM,cACNoC,MAAO,gBACPR,OAAQ,a,iCCnCV,IAAIxC,EAASL,EAAQ,OAEjBqoB,EAAOroB,EAAQ,OAEfiM,EAAcjM,EAAQ,OAEtBwoB,EAAqBxoB,EAAQ,OAE7BszB,EAAUtzB,EAAQ,OAElBuzB,EAAaD,EAAQC,WACrBswB,EAAYvwB,EAAQuwB,UAEpBC,EAAsB9jD,EAAQ,OAE9B+jD,EAAa/jD,EAAQ,OAErBgkD,EAAY/3C,EAAYnG,OAAO,CACjC7E,KAAM,aACN8E,aAAc,CAAC,OACfk+C,WAAY,MAMZC,cAAc,EAMdngD,YAAa,GACb6jB,KAAM,SAAUxb,GACd7N,KAAK4lD,YAAY/3C,EAAQ7N,KAAK6lD,cAG9BJ,EAAU71C,WAAW5P,KAAM,OAAQ6P,WACnC7P,KAAK8lD,kBAAkBj4C,EAAOjN,KAChC,EACAgN,eAAgB,SAAUC,GACxB,IAAIgM,EAAaoQ,EAAmB,CAAC,SAAUpc,EAAOjN,MAAQ,IAC1D+B,EAAO,IAAImnB,EAAKjQ,EAAY7Z,MAEhC,OADA2C,EAAK2nB,SAASzc,EAAOjN,MACd+B,CACT,EACA6yB,YAAa,SAAUuwB,GACrB/lD,KAAK4lD,YAAYG,EAAW/lD,KAAK6lD,cAEjCJ,EAAU71C,WAAW5P,KAAM,cAAe6P,WAC1C7P,KAAK8lD,kBAAkB9lD,KAAK6N,OAAOjN,KACrC,EAMAolD,gBAAiB,WACf,IAAIlgB,EAAW9lC,KAAK6N,OAAOi4B,SAC3B,OAAmB,MAAZA,EAAmB9lC,KAAKimD,gBAAgBhhD,IAAI6gC,GAAY,IACjE,EACA+f,WAAY,WACV,OAAQ7lD,KAAKgmD,mBAAqBhmD,MAAM6N,OAAO6pB,GACjD,EACAkuB,YAAa,SAAU/3C,EAAQq4C,GAG7Br4C,EAAOjN,KAAO4kD,EAAWW,iBAAiBt4C,EAAOjN,KAAMslD,EAASr4C,EAAOu4C,QACzE,EACAltC,YAAa,SAAU3U,GAGrB,OAAOvE,KAAKwE,UAAUtB,IAAI,QAASqB,EACrC,EAOA8hD,eAAgB,SAAUC,GACxB,IAAI1lD,EAAOZ,KAAKwE,UAChB,OAAO5D,EAAK0I,aAAa1I,EAAK2lD,YAAYD,GAC5C,EAOAvvB,cAAe,SAAUxyB,GAQvB,IANA,IAAI3D,EAAOZ,KAAKwE,UACZgiD,EAAiBlB,EAAUtlD,KAAKkZ,YAAY3U,IAC5Cf,EAAO5C,EAAK8D,QAAQH,GACpBiB,EAAcxF,KAAKwF,YACnBihD,EAAc,GAETxwC,EAAI,EAAGA,EAAIzQ,EAAY2O,OAAQ8B,IAAK,CAC3C,IAAIywC,EAAalhD,EAAYyQ,GAAG0wC,aAAaJ,YAAY/iD,GAEpD6a,MAAM7Y,EAAYyQ,GAAG0wC,aAAazjD,IAAI,QAASwjD,KAClDD,EAAYzlD,KAAKg0B,EAAWxvB,EAAYyQ,GAAGzS,MAE/C,CAEA,OAAOijD,EAAYlvC,KAAK,MAAQ,SAAWyd,EAAWxxB,EAAO,MAAQgjD,EACvE,EAKAI,mBAAoB,SAAUriD,GAC5B,GAAiB,MAAbA,EAAmB,CACrB,IAAIf,EAAOxD,KAAKwE,UAAUE,QAAQH,GAC9BU,EAAMjF,KAAKkF,iBACX2hD,EAAS5hD,EAAI6hD,UAAUtjD,GAC3B,OAAOqjD,GAAU5hD,EAAIc,YAAY8gD,EAAOxhD,OAC1C,CACF,EACAC,QAAS,SAAUC,GACjBvF,KAAK6N,OAAOtI,KAAOA,CACrB,EACAH,UAAW,SAAUC,GACnBrF,KAAK6N,OAAOxI,OAASA,CACvB,EACAgJ,cAAe,CAEbC,OAAQ,EAERC,EAAG,EACHrJ,iBAAkB,MAElBwyB,IAAK,GAMLtM,KAAM,SAENC,IAAK,SAOL07B,YAAa,IAYbC,kBAAkB,EAGlBC,oBAAoB,EAMpBC,eAAgB,KAEhB7hD,OAAQ,KACRE,KAAM,EACN4hD,WAAY,KACZx8B,MAAO,CACL5Q,OAAQ,CACN2Q,MAAM,EACNne,MAAO,QAET0N,SAAU,CACRyQ,MAAM,EACNne,MAAO,iBAIXoC,UAAW,CACToL,OAAQ,CAENC,YAAa,GACbiB,YAAa,OACbmsC,UAAW,QAGbntC,SAAU,CACRmtC,UAAW,2BAKnBtlD,EAAO0Y,MAAMirC,EAAWF,GACxB,IAAIpiD,EAAWsiD,EACfriD,EAAOvB,QAAUsB,C,wBCzMjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElB4lD,EAAU5lD,EAAQ,OAElB0B,EAAWO,EAAQwE,gBAAgB,CACrCxF,KAAM,MACN5C,OAAQ,SAAUwnD,EAAUjlD,EAASC,EAAKyB,GAExC,IAAIA,GAA4B,oBAAjBA,EAAQrB,MAA8BqB,EAAQwjD,OAASvnD,KAAKwnD,IAA3E,CAIA,IAAIn/C,EAAQrI,KAAKqI,MAGjB,GAFAA,EAAMkC,aAEF+8C,EAAStB,kBAAb,CAKA,GAAMjiD,GAA4B,YAAjBA,EAAQrB,MAAgD,WAA1BqB,EAAQgB,eAA8BhB,EAAQqiB,WAAakhC,EAASjhC,GAW5G,CACDohC,EAAUznD,KAAK0nD,SACnBD,GAAWp/C,EAAMc,IAAIs+C,EAAQp/C,MAC/B,MAbE,GAAIi/C,EAAS3B,aAAc,CACzB,IAAI8B,EAAUznD,KAAK0nD,UAAY,IAAIL,EAAQ/kD,GAAK,GAChD+F,EAAMc,IAAIs+C,EAAQp/C,OAClBo/C,EAAQE,KAAKL,EAAUjlD,EAASC,EAAKtC,KAAM+D,GAC3C/D,KAAK0nD,SAAWD,CAClB,MAEEznD,KAAK0nD,UAAY1nD,KAAK0nD,SAASx9C,SAC/BlK,KAAK0nD,SAAW,KAOpBJ,EAASpkD,IAAI,qBAAuBb,EAAQ22C,aAAa,WAAah5C,KAAK4nD,eAAeN,EAAUjlD,EAASC,EAnB7G,CAPA,CA2BF,EACA4H,OAAQ,WACNlK,KAAK0nD,UAAY1nD,KAAK0nD,SAASx9C,SAC/BlK,KAAK0nD,SAAW,KAChB1nD,KAAKqI,MAAMkC,WACb,EACAjC,QAAS,WACPtI,KAAK0nD,UAAY1nD,KAAK0nD,SAASx9C,SAC/BlK,KAAK0nD,SAAW,IAClB,EACAE,eAAgB,SAAUN,EAAUjlD,EAASC,GAC3C,IAAIqkD,EAAeW,EAASX,aACxBt+C,EAAQrI,KAAKqI,MACjBs+C,EAAankD,KAAK,SAAS,SAAUuL,EAAOtJ,GAC1C,IAAI4Z,MAAMtQ,GAAV,CAIA,IAAIxE,EAASo9C,EAAah7C,cAAclH,GAExC,GAAK8E,GAAWA,EAAOzD,MAAvB,CAKA,IAAIA,EAAQyD,EAAOzD,MACfmI,EAAS1E,EAAO0E,OAChB45C,EAAS,IAAIjgD,EAAQ6I,OAAO,CAC9BpF,MAAO,CAML4B,KAAMq6C,EAAS9iD,UAAU+0B,UAAU,UAErCtvB,MAAO,CACLkC,GAAIrG,EAAM,GAAc,EAATmI,EACf7B,GAAItG,EAAM,GACV2F,EAAG,GAELgL,QAAQ,EAERrE,GAAKnE,EAAc,EAAL,KAGhB,IAAKA,EAAQ,CACX,IAAI65C,EAAWR,EAASS,WAAWvjD,UAC/BhB,EAAOmjD,EAAajiD,QAAQD,GAC5BujD,EAAYF,EAASvB,YAAY/iD,GACjC6F,EAAYs9C,EAAar9C,aAAa7E,GACtCmU,EAAavP,EAAUsD,SAAS,gBAChCkM,EAAkBxP,EAAUsD,SAAS,kBACrCs7C,EAAgBH,EAAS/9C,iBAAiBi+C,GAC1CtX,EAAa5uC,EAAO0e,UAAU8mC,EAASrgC,kBAAkBxiB,EAAK,UAAWjB,GACzEmtC,EAAe7uC,EAAO0e,UAAU8mC,EAASrgC,kBAAkBxiB,EAAK,YAAaisC,GAE7ExkB,EAAa,WACf,IAAItf,EAAahF,EAAQof,aAAa,CAAC,EAAGnO,EAAiB,CACzDvN,KAAMuN,EAAgB3V,IAAI,QAAUytC,EAAe,MAClD,CACDx3B,YAAY,EACZkU,gBAAgB,IACf,GACHw6B,EAAOx8C,MAAM68C,WAAWt7C,GAExBi7C,EAAOM,gBAAkBN,EAAOz1C,GAChCy1C,EAAOz1C,IAAM,CACf,EAEIia,EAAW,WACbzkB,EAAQof,aAAa6gC,EAAOx8C,MAAOuN,EAAY,CAC7CtN,KAAMsN,EAAW1V,IAAI,QAAUwtC,EAAa,KAC5Cp3B,aAAcV,EAAWzL,WAAW,aAAe,UAClD,CACDgM,YAAY,EACZkU,gBAAgB,IAGY,MAA1Bw6B,EAAOM,kBACTN,EAAOz1C,GAAKy1C,EAAOM,gBACnBN,EAAOM,gBAAkB,KAE7B,EAEAF,EAAc3nD,GAAG,YAAa4rB,GAAY5rB,GAAG,WAAY+rB,GAAU/rB,GAAG,WAAY4rB,GAAY5rB,GAAG,SAAU+rB,GAC3GA,GACF,CAEAhkB,EAAMc,IAAI0+C,EAlEV,CAPA,CA0EF,GACF,IAGFzkD,EAAOvB,QAAUsB,C,iCCvIjB,IAAIrB,EAASL,EAAQ,OAErB,SAAS0B,EAAS0K,GAEhB,IAAIu6C,EAAY,GAChBtmD,EAAOU,KAAKqL,EAAOiU,QAAQ,SAAUshC,GAC/BA,GAAgC,QAAnBA,EAAU1gD,OACzB0lD,EAAUpnD,KAAKoiD,GACfA,EAAU1rB,IAAM0rB,EAAU1rB,KAAO0rB,EAAUiF,QAE3CvmD,EAAOkL,SAASo2C,EAAWA,EAAUkF,aAEzC,GACF,CAEAllD,EAAOvB,QAAUsB,C,iCCfjB,IAAIrB,EAASL,EAAQ,OASrB,SAAS8mD,EAAe9S,EAAO+S,GAC7B,IAAIC,EAAc,CAAC,EACf1H,EAAO,CAAC,SAYZ,OAXAj/C,EAAOU,KAAKizC,GAAO,SAAU70C,GAC3BA,EAAK4B,KAAKu+C,GAAM,SAAUhzC,EAAOtJ,GAE/B,IAAIikD,EAAS,MAAQ9nD,EAAK8D,QAAQD,GAClCgkD,EAAYC,GAAUD,EAAYC,IAAW,GAExCrqC,MAAMtQ,IACT06C,EAAYC,GAAQ1nD,KAAK+M,EAE7B,GACF,IACO0nC,EAAM,GAAG/d,IAAIqpB,GAAM,SAAUhzC,EAAOtJ,GAOzC,IANA,IAYIwX,EAZAysC,EAAS,MAAQjT,EAAM,GAAG/wC,QAAQD,GAClCsmB,EAAM,EACN3kB,EAAMG,IACND,GAAOC,IACPioB,EAAMi6B,EAAYC,GAAQv0C,OAErB8B,EAAI,EAAGA,EAAIuY,EAAKvY,IACvB7P,EAAMI,KAAKJ,IAAIA,EAAKqiD,EAAYC,GAAQzyC,IACxC3P,EAAME,KAAKF,IAAIA,EAAKmiD,EAAYC,GAAQzyC,IACxC8U,GAAO09B,EAAYC,GAAQzyC,GAe7B,OATEgG,EADoB,QAAlBusC,EACOpiD,EACkB,QAAlBoiD,EACAliD,EACkB,YAAlBkiD,EACAz9B,EAAMyD,EAENzD,EAGI,IAARyD,EAAYpgB,IAAM6N,CAC3B,GACF,CAEA,SAAS9Y,EAASd,GAChB,IAAIsmD,EAAe,CAAC,EACpBtmD,EAAQ+E,iBAAiB,OAAO,SAAU/C,GACxC,IAAIukD,EAAevkD,EAAY2hD,kBAC3BrkD,EAAMinD,EAAe,IAAMA,EAAaviC,GAAK,IAAMhiB,EAAYwhD,cAClE8C,EAAahnD,GAAOgnD,EAAahnD,IAAQ,IAAIX,KAAKqD,EACrD,IACAvC,EAAOU,KAAKmmD,GAAc,SAAUE,EAAYlnD,GAK9C,IAJA,IAAIf,EAAO2nD,EAAezmD,EAAO41B,IAAImxB,GAAY,SAAUxkD,GACzD,OAAOA,EAAYG,SACrB,IAAIqkD,EAAW,GAAG3lD,IAAI,wBAEb+S,EAAI,EAAGA,EAAI4yC,EAAW10C,OAAQ8B,IACrC4yC,EAAW5yC,GAAG0wC,aAAekC,EAAW5yC,GAAGzR,UAI7C,IAASyR,EAAI,EAAGA,EAAI4yC,EAAW10C,OAAQ8B,IACrC4yC,EAAW5yC,GAAGzQ,YAAcqjD,EAC5BA,EAAW5yC,GAAG0vC,aAAqB,IAAN1vC,IAAY4yC,EAAW5yC,GAAG+vC,kBACvD6C,EAAW5yC,GAAG6yC,QAAQloD,EAAKmoD,gBAC3BF,EAAW5yC,GAAG8xC,WAAac,EAAW,EAE1C,GACF,CAEAzlD,EAAOvB,QAAUsB,C,wBC9EjB,IAAIrB,EAASL,EAAQ,OAErB,SAAS0B,EAASd,GAChB,IAAI2mD,EAAmB,CAAC,EACxB3mD,EAAQ+E,iBAAiB,OAAO,SAAUghD,GACxC,IAAIC,EAAUD,EAAUvC,aAExB,IAAIuC,EAAUpC,oBAAqBgD,EAAiBX,GAApD,CAIA,IAAIY,EAAmB,CAAC,EACxBnnD,EAAOU,KAAK4lD,EAAU5iD,aAAa,SAAU0jD,GAC3C,IAAIjkD,EAAMikD,EAAahkD,iBACnBtE,EAAOsoD,EAAavC,aAEpBuC,EAAahmD,IAAI,qBAAuBb,EAAQ22C,aAAa,WAC/Dp4C,EAAK4B,KAAK,SAAS,SAAUuL,EAAOtJ,GAClC,IAAIjB,EAAO5C,EAAK8D,QAAQD,GACpBoiD,EAAS5hD,EAAI6hD,UAAUtjD,GAI3B,GAAKqjD,IAAUxoC,MAAMtQ,GAArB,CAIA,IAAIE,EAASg7C,EAAiBzlD,IAAS,EACnCsC,EAAQb,EAAIc,YAAY8gD,EAAOxhD,QACnC4jD,EAAiBzlD,GAAQyK,EAAS,EAClCrN,EAAKge,cAAcna,EAAK,CACtBqB,MAAOA,EACPmI,OAAQA,GAPV,CASF,GAEJ,IAEA,IAAIrN,EAAOwnD,EAAU5jD,UACrB5D,EAAK4B,MAAK,SAAUiC,GAClB,IAAIjB,EAAO5C,EAAK8D,QAAQD,GACpB8E,EAAS3I,EAAK+K,cAAclH,IAAQ,CAAC,EACzC8E,EAAOqnC,WAAaqY,EAAiBzlD,GACrC5C,EAAKge,cAAcna,EAAK8E,EAC1B,IACAy/C,EAAiBX,IAAW,CApC5B,CAqCF,GACF,CAEAjlD,EAAOvB,QAAUsB,C,oBCjDjB,SAASA,EAASd,GAChBA,EAAQ+E,iBAAiB,OAAO,SAAU/C,GACxC,IAAIktB,EAAYltB,EAAYnB,IAAI,SAC5BwJ,EAAiBrI,EAAYsI,SAAS,oBACtCy6C,EAAY16C,EAAexJ,IAAI,aAC/BqJ,EAAQG,EAAexJ,IAAI,UAAYquB,EAAUltB,EAAY6a,YAAcqS,EAAUpd,QACzF9P,EAAYG,UAAU6C,UAAU,CAC9B,UAAa+/C,EACb,MAAS76C,GAEb,GACF,CAEAnJ,EAAOvB,QAAUsB,C,wBCbjB,IAAIO,EAAUjC,EAAQ,OAEtBA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAER,IAAI0nD,EAAiB1nD,EAAQ,OAE7BiC,EAAQyD,eAAegiD,E,iCCVvB,IAAIr/B,EAAOroB,EAAQ,OAEfK,EAASL,EAAQ,OAEjBiM,EAAcjM,EAAQ,OAEtBwoB,EAAqBxoB,EAAQ,OAE7B0B,EAAWuK,EAAYnG,OAAO,CAChC7E,KAAM,kBACN8E,aAAc,CAAC,YACfk8C,sBAAuB,yBACvB91C,eAAgB,SAAUC,EAAQxL,GAChC,IAAI+mD,EAAgB/mD,EAAQ22C,aAAa,WAAYh5C,KAAKkD,IAAI,kBAC1DmmD,EAAsBD,EAAcE,kBACpCC,EAAU17C,EAAOjN,KACjB4oD,EAAYJ,EAAcvvC,WAC1B6N,EAAW+hC,EAAiBD,EAAWD,GACvCG,EAAe5nD,EAAO41B,IAAIhQ,GAAU,SAAU3e,EAAK+tC,GACrD,IAAI6S,EAAiB7nD,EAAOqa,QAAQqtC,EAAWzgD,GAC3C6gD,EAAYD,GAAkB,GAAKtnD,EAAQ22C,aAAa,eAAgBqQ,EAAoBM,IAEhG,OAAIC,GAAuC,aAA1BA,EAAU1mD,IAAI,SAC7B2mD,EAAuBD,EAAW7gD,EAAKwgD,GAChC,CACL/lD,KAAMuF,EACNrG,KAAM,YAECinD,EAAiB,GACnB1/B,EAAmB6/B,aAAaP,EAASzS,GAAY,CAC1DtzC,KAAMuF,EACNrG,KAAM,WAGDqG,CAEX,IACIpG,EAAO,IAAImnB,EAAK4/B,EAAc1pD,MAOlC,OANA2C,EAAK2nB,SAASi/B,GAEVvpD,KAAK6N,OAAO4B,cACdzP,KAAK6N,OAAOk8C,WAAY,GAGnBpnD,CACT,EASAqnD,2BAA4B,SAAUC,GACpC,IAAInnD,EAAW9C,KAAKkF,iBAChBtE,EAAOZ,KAAKwE,UACZ8pB,EAAU,GAMd,OALAxrB,EAASonD,gBAAgBtpD,GAAM,SAAUupD,EAAgB5lD,GACnD0lD,IAAgBE,GAClB77B,EAAQttB,KAAKJ,EAAKgmB,YAAYriB,GAElC,IACO+pB,CACT,EACAjgB,cAAe,CACbC,OAAQ,EAERC,EAAG,EAEHrJ,iBAAkB,WAClBklD,cAAe,EACfz/B,MAAO,CACL5Q,OAAQ,CACN2Q,MAAM,GAERzQ,SAAU,CACRyQ,MAAM,IAGV2/B,gBAAiB,IACjBC,cAAe,EACfz+B,UAAW,CACT9R,OAAQ,CACNxO,MAAO,EACPkB,QAAS,IACT/J,KAAM,UAGV+M,aAAa,EAEbsqC,QAAQ,EACRz/B,gBAAiB,YAIrB,SAASuvC,EAAuBD,EAAW7gD,EAAKwgD,GAC9C,IAAIgB,EAAWX,EAAU1mD,IAAI,QACzBsnD,EAAYC,EAAuB1hD,GAEnCwhD,GAAYA,EAASp2C,QACvBrS,EAAOU,KAAK+mD,GAAS,SAAU5F,GAC7B,GAAKA,EAAL,CAMA,IAAIrzC,EAAQxO,EAAOqa,QAAQouC,EAAU5G,EAAS6G,IAC9C7G,EAAS6G,GAAal6C,GAAS,EAAIA,EAAQlC,GAL3C,CAMF,GAIJ,CAEA,SAASq8C,EAAuBntC,GAC9B,OAAQA,EAAQ8T,QAAQ,MAAO,GACjC,CAEA,SAASq4B,EAAiBD,EAAWD,GAKnC,IAAImB,EAAY,EAChB5oD,EAAOU,KAAKgnD,GAAW,SAAUlsC,GAC/B,IAAIktC,EAAYC,EAAuBntC,GACvCktC,EAAYE,IAAcA,EAAYF,EACxC,IACA,IAAIG,EAAYpB,EAAQ,GAEpBoB,GAAaA,EAAUx2C,OAAS,EAAIu2C,IACtCA,EAAYC,EAAUx2C,OAAS,GAKjC,IAFA,IAAIuT,EAAW,GAENzR,EAAI,EAAGA,GAAKy0C,EAAWz0C,IAC9ByR,EAAS1mB,KAAK,MAAQiV,GAGxB,OAAOyR,CACT,CAEAtkB,EAAOvB,QAAUsB,C,iCCjJjB,IAAIyE,EAAUnG,EAAQ,OAElBK,EAASL,EAAQ,OAEjBgZ,EAAYhZ,EAAQ,OAEpBmpD,EAAS,GACTC,EAAepwC,EAAUlT,OAAO,CAClC7E,KAAM,WACN2mB,KAAM,WAKJrpB,KAAK8qD,WAAa,IAAIljD,EAAQwP,MAC9BpX,KAAKqI,MAAMc,IAAInJ,KAAK8qD,YAKpB9qD,KAAK0I,KACP,EAKA5I,OAAQ,SAAUuE,EAAahC,EAASC,EAAKyB,GAC3C/D,KAAK+qD,iBAAiB1mD,EAAaN,EAMrC,EACAuE,QAAS,WAAa,EAKtByiD,iBAAkB,SAAU1mD,EAAaN,GACvC,IAAIinD,EAAYhrD,KAAK8qD,WACjBlqD,EAAOyD,EAAYG,UACnBiE,EAAUzI,KAAK0I,MACf5F,EAAWuB,EAAYa,iBACvB2U,EAAa/W,EAAS+W,WACtBhM,EAASxJ,EAAYwJ,OACrBksC,EAASlsC,EAAOksC,OAAS6Q,EAAS,KAOtC,GAJAhqD,EAAKsI,KAAKT,GAASU,IAAIA,GAAKtG,OAAOA,GAAQqH,OAAOA,GAAQG,UAE1D4gD,EAAerqD,EAAMm5C,IAEhB/5C,KAAK0I,MAAO,CACf,IAAIkO,EAAW6kC,EAAoB34C,EAAUuB,GAAa,WAExDi4B,YAAW,WACT0uB,EAAUE,gBACZ,GACF,IACAF,EAAUl0C,YAAYF,EACxB,CAIA,SAASzN,EAAIgiD,GACXC,EAAMxqD,EAAMoqD,EAAWG,EAActxC,EAAY/W,EAAU,KAAMi3C,EACnE,CAEA,SAASl3C,EAAOsoD,EAAcE,GAC5B,IAAI1sC,EAAOlW,EAAQsB,iBAAiBshD,GAChC1+B,EAAS2+B,EAAiB1qD,EAAMuqD,EAActxC,EAAY/W,GAC9DlC,EAAK+I,iBAAiBwhD,EAAcxsC,GACpC,IAAI3V,EAAiBjF,IAAiC,IAAtBA,EAAQgmD,UAAsB,KAAO1lD,EACrEuD,EAAQoC,YAAY2U,EAAM,CACxB1U,MAAO,CACL0iB,OAAQA,IAET3jB,EAAgBmiD,EACrB,CAEA,SAASjhD,EAAOmhD,GACd,IAAI1sC,EAAOlW,EAAQsB,iBAAiBshD,GACpCL,EAAU9gD,OAAOyU,EACnB,CArBA3e,KAAK0I,MAAQ9H,CAsBf,EAkCAsJ,OAAQ,WACNlK,KAAK8qD,YAAc9qD,KAAK8qD,WAAWvgD,YACnCvK,KAAK0I,MAAQ,IACf,IAGF,SAAS+yC,EAAoB34C,EAAUuB,EAAamT,GAClD,IAAI4xC,EAAgBtmD,EAASmzB,MACzBvrB,EAAO5H,EAASgO,UAChBy6C,EAAS,IAAI3jD,EAAQ+C,KAAK,CAC5BV,MAAO,CACLgC,EAAGvB,EAAKuB,EACRC,EAAGxB,EAAKwB,EACRX,MAAOb,EAAKa,MACZS,OAAQtB,EAAKsB,UAGbjD,EAAsC,eAAhCqgD,EAAclmD,IAAI,UAA6B,QAAU,SAQnE,OAPAqoD,EAAOz+C,SAAS/D,EAAK,GACrBnB,EAAQmd,UAAUwmC,EAAQ,CACxBthD,MAAO,CACLsB,MAAOb,EAAKa,MACZS,OAAQtB,EAAKsB,SAEd3H,EAAamT,GACT+zC,CACT,CAEA,SAASD,EAAiB1qD,EAAM2D,EAAWsV,EAAY/W,GAGrD,IAFA,IAAI6pB,EAAS,GAEJ1W,EAAI,EAAGA,EAAI4D,EAAW1F,OAAQ8B,IAAK,CAC1C,IAAIqH,EAAUzD,EAAW5D,GACrBlI,EAAQnN,EAAKsC,IAAIoa,EAAS/Y,GAEzBinD,EAAaz9C,EAAOjL,EAASikC,QAAQzpB,GAAS5a,OACjDiqB,EAAO3rB,KAAK8B,EAASiD,YAAYgI,EAAOuP,GAE5C,CAEA,OAAOqP,CACT,CAEA,SAASy+B,EAAMxqD,EAAMoqD,EAAWzmD,EAAWsV,EAAY/W,GACrD,IAAI6pB,EAAS2+B,EAAiB1qD,EAAM2D,EAAWsV,EAAY/W,GACvD6b,EAAO,IAAI/W,EAAQqkB,SAAS,CAC9BhiB,MAAO,CACL0iB,OAAQA,GAEVlW,QAAQ,EACRrE,GAAI,KAEN44C,EAAU7hD,IAAIwV,GACd/d,EAAK+I,iBAAiBpF,EAAWoa,EACnC,CAEA,SAASssC,EAAerqD,EAAMm5C,GAC5B,IAAI0R,EAAmB7qD,EAAK8rB,UAAU/f,SAAS,oBAC3Ckf,EAAY4/B,EAAiB/9B,eACjC9sB,EAAK0J,mBAAkB,SAAUqU,EAAMpa,GACrC,GAAI3D,EAAK6mC,cAAe,CACtB,IAAIp+B,EAAYzI,EAAK0I,aAAa/E,GAC9BotB,EAAiBtoB,EAAUsD,SAAS,mBAAoB8+C,GAC5D5/B,EAAY8F,EAAejE,aAAa,CAAC,QAAS,UACpD,CAEA/O,EAAK5R,SAASjL,EAAOyF,OAAOskB,EAAW,CACrC5e,KAAM,KAENyJ,OAAQ9V,EAAK4L,cAAcjI,EAAW,SAEtCkI,QAAS7L,EAAK4L,cAAcjI,EAAW,cAEzCoa,EAAK1U,MAAM8vC,OAASA,CACtB,GACF,CAsBA,SAASyR,EAAartC,EAAK+4B,GACzB,MAAoB,aAAbA,EAAiC,MAAP/4B,EAAqB,MAAPA,GAAeE,MAAMF,EACtE,CAEA,IAAIhb,EAAW0nD,EACfznD,EAAOvB,QAAUsB,C,oBC7NjB,IAAIqpB,EAAoB,CAAC,YAAa,SAAU,WAEhD,SAASrpB,EAASd,GAChBA,EAAQ+E,iBAAiB,YAAY,SAAU/C,GAC7C,IAAIqI,EAAiBrI,EAAYsI,SAAS,oBACtCglB,EAAiBttB,EAAYsI,SAAS,oBACtCoS,EAAe1c,EAAQa,IAAI,SAC3BqJ,EAAQolB,EAAezuB,IAAI,UAAYwJ,EAAexJ,IAAI,UAAY6b,EAAa1a,EAAY6a,YAAcH,EAAa5K,QAC1Hk2C,EAAkBhmD,EAAYnB,IAAI,mBAClConD,EAAgBjmD,EAAYnB,IAAI,iBAChC2oB,EAAYxnB,EAAYsI,SAAS,oBAAoB+gB,eACrD5qB,EAAWuB,EAAYa,iBACvBtE,EAAOyD,EAAYG,UACnBknD,EAAa,CACf3xC,OAAQ8R,EAAUpf,QAClBk/C,OAAQrB,EACRsB,SAAUvB,GAEZvnD,EAASonD,gBAAgBtpD,GAAM,SAAUqpD,EAAa1lD,GACpD,IAAI8E,EAAYzI,EAAK0I,aAAa/E,GAC9BkI,EAAUi/C,EAAWzB,GAEzB,GAAoB,WAAhBA,EAA0B,CAC5B,IAAI4B,EAAcxiD,EAAUnG,IAAIspB,GAAmB,GACpC,MAAfq/B,IAAwBp/C,EAAUo/C,EACpC,CAEAjrD,EAAKye,cAAc9a,EAAW,UAAWkI,EAC3C,IACA7L,EAAKyG,UAAU,QAASkF,EAC1B,GACF,CAEAnJ,EAAOvB,QAAUsB,C,wBCjCjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAErBA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAER,IAAIuF,EAAgBvF,EAAQ,OAExBmnB,EAAennB,EAAQ,OAE3BA,EAAQ,OAGRiC,EAAQuD,eAAenF,EAAOoF,MAAMF,EAAe,iBACnDtD,EAAQyD,eAAerF,EAAOoF,MAAM0hB,EAAc,eAAgB,YAAa,M,wBClB/E,IAAIllB,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAErBA,EAAQ,OAERA,EAAQ,OAER,IAAI4jD,EAAyB5jD,EAAQ,OAEjCioB,EAAYjoB,EAAQ,OAEpBqqD,EAAYrqD,EAAQ,MAEpBmoB,EAAanoB,EAAQ,OAEzB4jD,EAAuB,MAAO,CAAC,CAC7B3iD,KAAM,kBACNoC,MAAO,mBACPR,OAAQ,kBACP,CACD5B,KAAM,YACNoC,MAAO,cACPR,OAAQ,UACP,CACD5B,KAAM,cACNoC,MAAO,gBACPR,OAAQ,cAEVZ,EAAQyD,eAAerF,EAAOoF,MAAMwiB,EAAW,QAC/ChmB,EAAQuD,eAAenF,EAAOoF,MAAM4kD,EAAW,QAC/CpoD,EAAQmmB,kBAAkB/nB,EAAOoF,MAAM0iB,EAAY,O,iCC/BnD,IAAIlmB,EAAUjC,EAAQ,OAElBqoB,EAAOroB,EAAQ,OAEfK,EAASL,EAAQ,OAEjB84C,EAAY94C,EAAQ,OAEpBuO,EAAUvO,EAAQ,OAElBsqD,EAA0B/7C,EAAQ+7C,wBAElC9hC,EAAqBxoB,EAAQ,OAE7B8jD,EAAsB9jD,EAAQ,OAE9BuqD,EAAYtoD,EAAQ+kB,kBAAkB,CACxC/lB,KAAM,aAEN2mB,KAAM,SAAUxb,GACdm+C,EAAUp8C,WAAW5P,KAAM,OAAQ6P,WAGnC7P,KAAKmqB,mBAAqB,WACxB,OAAOnqB,KAAKoqB,YACd,EAEApqB,KAAK8lD,kBAAkBj4C,EAAOjN,MAE9BZ,KAAKqqB,kBAAkBxc,EACzB,EAEA2nB,YAAa,SAAUuwB,GACrBiG,EAAUlhC,UAAU9qB,KAAM,cAAe+lD,GACzC/lD,KAAK8lD,kBAAkB9lD,KAAK6N,OAAOjN,KACrC,EACAgN,eAAgB,SAAUC,EAAQxL,GAChC,IAAIwX,EAAaoQ,EAAmB,CAAC,SAAUpc,EAAOjN,MAClD+B,EAAO,IAAImnB,EAAKjQ,EAAY7Z,MAEhC,OADA2C,EAAK2nB,SAASzc,EAAOjN,MACd+B,CACT,EAEAioB,cAAe,SAAUrmB,GACvB,IAAI3D,EAAOZ,KAAKwE,UACZqmB,EAASmhC,EAAUlhC,UAAU9qB,KAAM,gBAAiBuE,GAEpD0nD,EAAY,GAMhB,OALArrD,EAAK4B,KAAK,SAAS,SAAUuL,GAC3Bk+C,EAAUjrD,KAAK+M,EACjB,IACA8c,EAAOI,QAAU8gC,EAAwBE,EAAW1nD,EAAW3D,EAAK8rB,UAAUxpB,IAAI,qBAClF2nB,EAAOM,MAAMnqB,KAAK,WACX6pB,CACT,EACAR,kBAAmB,SAAUxc,GAE3B0sC,EAAUvwB,gBAAgBnc,EAAO0c,UAAW,CAAC,SAC7C,IAAIC,EAAqB3c,EAAO0c,UAAUxQ,OACtC0Q,EAAuB5c,EAAO0c,UAAUtQ,SAE5CuQ,EAAmBE,KAAOF,EAAmBE,MAAQ7c,EAAO8c,MAAM5Q,OAAO2Q,KACzED,EAAqBC,KAAOD,EAAqBC,MAAQ7c,EAAO8c,MAAM1Q,SAASyQ,IACjF,EACArc,cAAe,CACbC,OAAQ,EACRC,EAAG,EACHC,iBAAiB,EACjBkB,gBAAgB,EAEhBrK,OAAQ,CAAC,MAAO,OAChB4qB,OAAQ,CAAC,EAAG,OAEZC,WAAW,EACX9kB,WAAY,GAEZ8gD,SAAU,EAEVC,eAAgB,GAEhBC,YAAa,GAEbC,mBAAmB,EAKnBC,iBAAkB,EAElBC,kBAAkB,EAElB5hC,MAAO,CACL5Q,OAAQ,CAENyyC,QAAQ,EACR9hC,MAAM,EAENhkB,SAAU,SAKZuT,SAAU,CAAC,GAGbsQ,UAAW,CACTxQ,OAAQ,CACN2Q,MAAM,EAENvW,OAAQ,GAERs4C,QAAS,GACT1S,QAAQ,EACRluB,UAAW,CAETtgB,MAAO,EACP7I,KAAM,WAIZiM,UAAW,CACToL,OAAQ,CACNC,YAAa,GAEfC,SAAU,CAAC,GAGbyyC,cAAe,YACfpyC,gBAAiB,WACjB1Z,KAAM,MAGVkB,EAAO0Y,MAAMwxC,EAAWzG,GACxB,IAAIpiD,EAAW6oD,EACf5oD,EAAOvB,QAAUsB,C,wBCtIjB,IAAIrB,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElBgZ,EAAYhZ,EAAQ,OAOxB,SAASkrD,EAAmBnF,EAAKnjD,EAAaq3C,EAAcp5C,GAC1D,IAAI1B,EAAOyD,EAAYG,UACnBD,EAAYvE,KAAKuE,UACjBf,EAAO5C,EAAK8D,QAAQH,GACpB4nD,EAAiB9nD,EAAYnB,IAAI,kBACrCZ,EAAI84B,eAAe,CACjB14B,KAAM,kBACN6kD,KAAMC,EACNhkD,KAAMA,EACN4iB,SAAU/hB,EAAYgiB,KAExBzlB,EAAK4B,MAAK,SAAUiC,GAClBmoD,EAAmBhsD,EAAKmJ,iBAAiBtF,GAAM7D,EAAK+K,cAAclH,GAAMJ,EAAYM,WAAW/D,EAAK8D,QAAQD,IAAO0nD,EAAgBzQ,EACrI,GACF,CAWA,SAASkR,EAAmBnjD,EAAIF,EAAQ5E,EAAYwnD,EAAgBzQ,GAClE,IAAImR,GAAYtjD,EAAO6B,WAAa7B,EAAO8C,UAAY,EACnDrG,EAAKQ,KAAK0sB,IAAI25B,GACd5mD,EAAKO,KAAK4sB,IAAIy5B,GACd5+C,EAAStJ,EAAawnD,EAAiB,EACvCzlD,EAAW,CAACV,EAAKiI,EAAQhI,EAAKgI,GAClCytC,EACEjyC,EAAGwgC,UAAUC,KAAK,IAAK,CACvBxjC,SAAUA,IACT6X,MAAM,aAAe9U,EAAG2D,KAAK,WAAY1G,EAC9C,CAQA,SAASomD,EAASlsD,EAAM6D,GACtBmD,EAAQwP,MAAMO,KAAK3X,MACnB,IAAIiL,EAAS,IAAIrD,EAAQsD,OAAO,CAC9BkH,GAAI,IAEF+6B,EAAW,IAAIvlC,EAAQqkB,SACvB3gB,EAAO,IAAI1D,EAAQgc,KAMvB,SAASsI,IACPihB,EAAShhB,OAASghB,EAAS/gB,YAC3B9gB,EAAK6gB,OAAS7gB,EAAK8gB,WACrB,CAEA,SAASC,IACP8gB,EAAShhB,OAASghB,EAAS7gB,aAC3BhhB,EAAK6gB,OAAS7gB,EAAKghB,YACrB,CAbAtsB,KAAKmJ,IAAI8B,GACTjL,KAAKmJ,IAAIgkC,GACTntC,KAAKmJ,IAAImC,GACTtL,KAAKwpB,WAAW5oB,EAAM6D,GAAK,GAY3BzE,KAAKM,GAAG,WAAY4rB,GAAY5rB,GAAG,SAAU+rB,GAAU/rB,GAAG,YAAa4rB,GAAY5rB,GAAG,WAAY+rB,EACpG,CAEA,IAAI0gC,EAAgBD,EAAS5qD,UAE7B6qD,EAAcvjC,WAAa,SAAU5oB,EAAM6D,EAAKgoB,GAC9C,IAAIxhB,EAASjL,KAAKmb,QAAQ,GACtB9W,EAAczD,EAAK8rB,UACnBrjB,EAAYzI,EAAK0I,aAAa7E,GAC9B8E,EAAS3I,EAAK+K,cAAclH,GAC5B0G,EAAcrJ,EAAOyF,OAAO,CAAC,EAAGgC,GAGpC,GAFA4B,EAAYwf,MAAQ,KAEhB8B,EAAa,CACfxhB,EAAO6B,SAAS3B,GAChB,IAAIuhD,EAAgBroD,EAAY8I,WAAW,iBAErB,UAAlBu/C,GACFzhD,EAAOhB,MAAMwB,EAAIlC,EAAOmC,GACxB9D,EAAQmd,UAAU9Z,EAAQ,CACxBhB,MAAO,CACLwB,EAAGlC,EAAOkC,IAEXpH,EAAaI,KAGdwG,EAAOhB,MAAMoC,SAAW9C,EAAO6B,WAC/BxD,EAAQoC,YAAYiB,EAAQ,CAC1BhB,MAAO,CACLoC,SAAU9C,EAAO8C,WAElBhI,EAAaI,GAEtB,MACEmD,EAAQoC,YAAYiB,EAAQ,CAC1BhB,MAAOkB,GACN9G,EAAaI,GAIlB,IAAIiI,EAAiBrD,EAAUsD,SAAS,aACpCigB,EAAchsB,EAAK4L,cAAc/H,EAAK,SAC1CwG,EAAO8B,SAASjL,EAAOkL,SAAS,CAC9B6f,SAAU,QACV5f,KAAM2f,GACLlgB,EAAeC,SAAS,UAAUoL,iBACrC9M,EAAO2B,WAAaF,EAAeC,SAAS,YAAYoL,eACxD,IAAI7K,EAAc7D,EAAU8D,WAAW,UAKvC,SAAS+e,IAGPjhB,EAAO4+B,eAAc,GACrB5+B,EAAOkM,UAAU,CACflN,MAAO,CACLwB,EAAGlC,EAAOkC,EAAIpH,EAAYnB,IAAI,iBAE/B,IAAK,aACV,CAEA,SAASmpB,IACPphB,EAAO4+B,eAAc,GACrB5+B,EAAOkM,UAAU,CACflN,MAAO,CACLwB,EAAGlC,EAAOkC,IAEX,IAAK,aACV,CAtBAyB,GAAejC,EAAOmC,KAAK,SAAUF,GAErC0/C,EAAmB5sD,KAAMY,EAAK+K,cAAclH,GAAM4E,EAAUnG,IAAI,YAAamB,EAAYnB,IAAI,kBAAmBmB,EAAYnB,IAAI,cAsBhI+H,EAAOiM,IAAI,aAAaA,IAAI,YAAYA,IAAI,YAAYA,IAAI,UAExD7N,EAAUnG,IAAI,mBAAqBmB,EAAY4E,sBACjDgC,EAAO3K,GAAG,YAAa4rB,GAAY5rB,GAAG,WAAY+rB,GAAU/rB,GAAG,WAAY4rB,GAAY5rB,GAAG,SAAU+rB,GAGtGrsB,KAAK8sB,aAAalsB,EAAM6D,GAExBmD,EAAQ0F,cAActN,KACxB,EAEA+sD,EAAcjgC,aAAe,SAAUlsB,EAAM6D,GAC3C,IAAI8lB,EAAYvqB,KAAKmb,QAAQ,GACzB4R,EAAY/sB,KAAKmb,QAAQ,GACzB9W,EAAczD,EAAK8rB,UACnBrjB,EAAYzI,EAAK0I,aAAa7E,GAC9B8E,EAAS3I,EAAK+K,cAAclH,GAC5BuoB,EAAczjB,EAAOohB,MACrBiC,EAAchsB,EAAK4L,cAAc/H,EAAK,SAC1CmD,EAAQoC,YAAYugB,EAAW,CAC7BtgB,MAAO,CACL0iB,OAAQK,EAAYC,YAAc,CAAC,CAACD,EAAY/gB,EAAG+gB,EAAY9gB,GAAI,CAAC8gB,EAAY/gB,EAAG+gB,EAAY9gB,GAAI,CAAC8gB,EAAY/gB,EAAG+gB,EAAY9gB,MAEhI7H,EAAaI,GAChBmD,EAAQoC,YAAY+iB,EAAW,CAC7B1hB,MAAO,CACLY,EAAG+gB,EAAY/gB,EACfC,EAAG8gB,EAAY9gB,IAEhB7H,EAAaI,GAChBsoB,EAAU3f,KAAK,CACb6E,SAAU+a,EAAY/a,SACtBuS,OAAQ,CAACwI,EAAY/gB,EAAG+gB,EAAY9gB,GACpCkG,GAAI,KAEN,IAAIwG,EAAavP,EAAUsD,SAAS,gBAChCugB,EAAkB7jB,EAAUsD,SAAS,kBACrCwgB,EAAiB9jB,EAAUsD,SAAS,oBACpCygB,EAAsB/jB,EAAUsD,SAAS,sBACzCigB,EAAchsB,EAAK4L,cAAc/H,EAAK,SAC1CmD,EAAQkR,cAAciU,EAAU1hB,MAAO0hB,EAAUngB,WAAa,CAAC,EAAGgM,EAAYsU,EAAiB,CAC7FnU,aAAcnY,EAAK8rB,UACnB1T,eAAgBvU,EAChBwU,YAAarY,EAAK8D,QAAQD,GAC1B2U,UAAWwT,EACXS,iBAAkBL,EAAYM,QAC7B,CACDC,UAAWP,EAAYO,UACvBC,kBAAmBR,EAAYS,cAC/BhhB,QAAS7L,EAAK4L,cAAc/H,EAAK,aAEnCsoB,EAAUZ,OAASY,EAAUT,cAAgB1T,EAAW1V,IAAI,QAC5D6pB,EAAUX,aAAec,EAAgBhqB,IAAI,QAC7CqnB,EAAU4B,OAAS5B,EAAU+B,cAAgBa,EAAejqB,IAAI,QAChEqnB,EAAU6B,aAAegB,EAAoBlqB,IAAI,QAEjDqnB,EAAUrV,SAAS,CACjBwB,OAAQkW,EACRngB,QAAS7L,EAAK4L,cAAc/H,EAAK,aAEnC8lB,EAAUrV,SAASiY,EAAexgB,SAAS,aAAa+gB,gBACxDnD,EAAU3d,WAAawgB,EAAoBzgB,SAAS,aAAa+gB,eACjE,IAAIqsB,EAAS5sB,EAAejqB,IAAI,UAE5B62C,IAAqB,IAAXA,IACZA,EAAS,IAGXxvB,EAAUzd,SAAS,CACjBitC,OAAQA,GAEZ,EAEAj4C,EAAO6rB,SAASm/B,EAAUllD,EAAQwP,OAElC,IAAI41C,EAAUvyC,EAAUlT,OAAO,CAC7B7E,KAAM,MACN2mB,KAAM,WACJ,IAAI4jC,EAAc,IAAIrlD,EAAQwP,MAC9BpX,KAAKktD,aAAeD,CACtB,EACAntD,OAAQ,SAAUuE,EAAahC,EAASC,EAAKyB,GAC3C,IAAIA,GAAWA,EAAQwjD,OAASvnD,KAAKwnD,IAArC,CAIA,IAAI5mD,EAAOyD,EAAYG,UACnBiE,EAAUzI,KAAK0I,MACfL,EAAQrI,KAAKqI,MACbqzC,EAAer5C,EAAQa,IAAI,aAC3BiqD,GAAiB1kD,EACjBikD,EAAgBroD,EAAYnB,IAAI,iBAChCkqD,EAAgBtrD,EAAOoF,MAAMylD,EAAoB3sD,KAAKwnD,IAAKnjD,EAAaq3C,EAAcp5C,GACtF+qD,EAAehpD,EAAYnB,IAAI,gBAyBnC,GAxBAtC,EAAKsI,KAAKT,GAASU,KAAI,SAAU1E,GAC/B,IAAIqpB,EAAW,IAAIg/B,EAASlsD,EAAM6D,GAE9B0oD,GAAmC,UAAlBT,GACnB5+B,EAASie,WAAU,SAAUvjB,GAC3BA,EAAMqhB,eAAc,EACtB,IAGFwjB,GAAgBv/B,EAASxtB,GAAG,QAAS8sD,GACrCxsD,EAAK+I,iBAAiBlF,EAAKqpB,GAC3BzlB,EAAMc,IAAI2kB,EACZ,IAAGjrB,QAAO,SAAU6lB,EAAQC,GAC1B,IAAImF,EAAWrlB,EAAQsB,iBAAiB4e,GACxCmF,EAAStE,WAAW5oB,EAAM8nB,GAC1BoF,EAAS5W,IAAI,SACbm2C,GAAgBv/B,EAASxtB,GAAG,QAAS8sD,GACrC/kD,EAAMc,IAAI2kB,GACVltB,EAAK+I,iBAAiB+e,EAAQoF,EAChC,IAAG5jB,QAAO,SAAUzF,GAClB,IAAIqpB,EAAWrlB,EAAQsB,iBAAiBtF,GACxC4D,EAAM6B,OAAO4jB,EACf,IAAGzjB,UAECqxC,GAAgByR,GAAiBvsD,EAAKoW,QAAU,GAC/B,UAAlB01C,EAA2B,CAC5B,IAAIziD,EAAQrJ,EAAK+K,cAAc,GAC3BF,EAAIjF,KAAKF,IAAIhE,EAAI2O,WAAY3O,EAAI4O,aAAe,EAChDg6C,EAAiBppD,EAAO2B,KAAK4E,EAAM6iD,eAAgB7iD,GACvDA,EAAMyO,YAAY9W,KAAKstD,gBAAgBrjD,EAAMkC,GAAIlC,EAAMmC,GAAIX,EAAGxB,EAAMmB,WAAYnB,EAAMimB,UAAWg7B,EAAgB7mD,GACnH,CAEArE,KAAK0I,MAAQ9H,CA1Cb,CA2CF,EACA0H,QAAS,WAAa,EACtBglD,gBAAiB,SAAUnhD,EAAIC,EAAIX,EAAGL,EAAY8kB,EAAW1Y,EAAInT,GAC/D,IAAIuS,EAAW,IAAIhP,EAAQsD,OAAO,CAChCjB,MAAO,CACLkC,GAAIA,EACJC,GAAIA,EACJV,GAAI,EACJD,EAAGA,EACHL,WAAYA,EACZiB,SAAUjB,EACV8kB,UAAWA,KAQf,OALAtoB,EAAQmd,UAAUnO,EAAU,CAC1B3M,MAAO,CACLoC,SAAUjB,GAAc8kB,EAAY,GAAK,GAAK1pB,KAAK0L,GAAK,IAEzD7N,EAAamT,GACTZ,CACT,EAKA22C,aAAc,SAAUznD,EAAOzB,GAC7B,IAAIzD,EAAOyD,EAAYG,UACnB2b,EAAavf,EAAK+K,cAAc,GAEpC,GAAIwU,EAAY,CACd,IAAIna,EAAKF,EAAM,GAAKqa,EAAWhU,GAC3BlG,EAAKH,EAAM,GAAKqa,EAAW/T,GAC3B6jB,EAASzpB,KAAKgnD,KAAKxnD,EAAKA,EAAKC,EAAKA,GACtC,OAAOgqB,GAAU9P,EAAW1U,GAAKwkB,GAAU9P,EAAWzU,EACxD,CACF,IAEEvI,EAAW6pD,EACf5pD,EAAOvB,QAAUsB,C,iCCzTjB,IAAIsqD,EAAchsD,EAAQ,MAG1B,SAASisD,EAAiB/qD,EAAMwJ,EAAIC,EAAIX,EAAGwvC,EAAK1Z,EAAWC,GAKzD,SAASmsB,EAAUpvC,EAAOuR,EAAK89B,EAAO3S,GACpC,IAAK,IAAI3nB,EAAI/U,EAAO+U,EAAIxD,EAAKwD,IAG3B,GAFA3wB,EAAK2wB,GAAGpnB,GAAK0hD,EAETt6B,EAAI/U,GAAS+U,EAAI,EAAIxD,GAAOntB,EAAK2wB,EAAI,GAAGpnB,EAAIvJ,EAAK2wB,GAAGpnB,EAAIvJ,EAAK2wB,GAAGtnB,OAElE,YADA6hD,EAAQv6B,EAAGs6B,EAAQ,GAKvBC,EAAQ/9B,EAAM,EAAG89B,EAAQ,EAC3B,CAGA,SAASC,EAAQ/9B,EAAK89B,GACpB,IAAK,IAAIt6B,EAAIxD,EAAKwD,GAAK,EAAGA,IAGxB,GAFA3wB,EAAK2wB,GAAGpnB,GAAK0hD,EAETt6B,EAAI,GAAK3wB,EAAK2wB,GAAGpnB,EAAIvJ,EAAK2wB,EAAI,GAAGpnB,EAAIvJ,EAAK2wB,EAAI,GAAGtnB,OACnD,KAGN,CAEA,SAAS8hD,EAAQnrD,EAAMorD,EAAY5hD,EAAIC,EAAIX,EAAGwvC,GAQ5C,IAPA,IAAI+S,EAAuBD,EACzBE,OAAOC,UACP,EAKOj4C,EAAI,EAAGotB,EAAI1gC,EAAKwR,OAAQ8B,EAAIotB,EAAGptB,IAEtC,GAAyB,WAArBtT,EAAKsT,GAAGvP,SAAZ,CAIA,IAAIynD,EAAS3nD,KAAKiH,IAAI9K,EAAKsT,GAAG/J,EAAIE,GAC9B+H,EAASxR,EAAKsT,GAAGuY,IACjBi+B,EAAU9pD,EAAKsT,GAAGm4C,KAClBC,EAASF,EAAS1iD,EAAI0I,EAAS3N,KAAKgnD,MAAM/hD,EAAI0I,EAASs4C,IAAYhhD,EAAI0I,EAASs4C,GAAW0B,EAASA,GAAU3nD,KAAKiH,IAAI9K,EAAKsT,GAAGhK,EAAIE,GAEnI4hD,GAAcM,GAAUL,IAE1BK,EAASL,EAAa,KAGnBD,GAAcM,GAAUL,IAE3BK,EAASL,EAAa,IAGxBrrD,EAAKsT,GAAGhK,EAAIE,EAAKkiD,EAASpT,EAC1B+S,EAAaK,CAlBb,CAoBJ,CA5DA1rD,EAAK+oB,MAAK,SAAU+C,EAAGC,GACrB,OAAOD,EAAEviB,EAAIwiB,EAAExiB,CACjB,IAkEA,IANA,IACI0hD,EADAU,EAAQ,EAER9/B,EAAM7rB,EAAKwR,OACXo6C,EAAS,GACTC,EAAW,GAENv4C,EAAI,EAAGA,EAAIuY,EAAKvY,IACvB23C,EAAQjrD,EAAKsT,GAAG/J,EAAIoiD,EAEhBV,EAAQ,GACVD,EAAU13C,EAAGuY,GAAMo/B,EAAO3S,GAG5BqT,EAAQ3rD,EAAKsT,GAAG/J,EAAIvJ,EAAKsT,GAAGjK,OAG1Bw1B,EAAa8sB,EAAQ,GACvBT,EAAQr/B,EAAM,EAAG8/B,EAAQ9sB,GAG3B,IAASvrB,EAAI,EAAGA,EAAIuY,EAAKvY,IACnBtT,EAAKsT,GAAG/J,GAAKE,EACfoiD,EAASxtD,KAAK2B,EAAKsT,IAEnBs4C,EAAOvtD,KAAK2B,EAAKsT,IAIrB63C,EAAQS,GAAQ,EAAOpiD,EAAIC,EAAIX,EAAGwvC,GAClC6S,EAAQU,GAAU,EAAMriD,EAAIC,EAAIX,EAAGwvC,EACrC,CAEA,SAASwT,EAAaC,EAAiBviD,EAAIC,EAAIX,EAAG81B,EAAWC,GAI3D,IAHA,IAAImtB,EAAW,GACXC,EAAY,GAEP34C,EAAI,EAAGA,EAAIy4C,EAAgBv6C,OAAQ8B,IACtCy4C,EAAgBz4C,GAAGhK,EAAIE,EACzBwiD,EAAS3tD,KAAK0tD,EAAgBz4C,IAE9B24C,EAAU5tD,KAAK0tD,EAAgBz4C,IAInCy3C,EAAiBkB,EAAWziD,EAAIC,EAAIX,EAAG,EAAG81B,EAAWC,GACrDksB,EAAiBiB,EAAUxiD,EAAIC,EAAIX,GAAI,EAAG81B,EAAWC,GAErD,IAASvrB,EAAI,EAAGA,EAAIy4C,EAAgBv6C,OAAQ8B,IAAK,CAC/C,IAAIgX,EAAayhC,EAAgBz4C,GAAGgX,WAEpC,GAAIA,EAAY,CACd,IAAIqd,EAAOrd,EAAW,GAAG,GAAKA,EAAW,GAAG,GAExCyhC,EAAgBz4C,GAAGhK,EAAIE,EACzB8gB,EAAW,GAAG,GAAKyhC,EAAgBz4C,GAAGhK,EAAI,EAE1CghB,EAAW,GAAG,GAAKyhC,EAAgBz4C,GAAGhK,EAAI,EAG5CghB,EAAW,GAAG,GAAKA,EAAW,GAAG,GAAKyhC,EAAgBz4C,GAAG/J,EACzD+gB,EAAW,GAAG,GAAKA,EAAW,GAAG,GAAKqd,CACxC,CACF,CACF,CAEA,SAASnnC,EAASkB,EAAaoH,EAAG81B,EAAWC,GAC3C,IAEIr1B,EACAC,EAHAxL,EAAOyD,EAAYG,UACnBkqD,EAAkB,GAGlBG,GAAiB,EACrBjuD,EAAK4B,MAAK,SAAUiC,GAClB,IAWIkqB,EACAC,EACA3B,EACAM,EAdAhkB,EAAS3I,EAAK+K,cAAclH,GAC5B4E,EAAYzI,EAAK0I,aAAa7E,GAC9BmU,EAAavP,EAAUsD,SAAS,gBAEhCkiB,EAAgBjW,EAAW1V,IAAI,aAAemG,EAAUnG,IAAI,2BAC5DiqB,EAAiB9jB,EAAUsD,SAAS,oBACpCuiB,EAAe/B,EAAejqB,IAAI,UAClC4rD,EAAgB3hC,EAAejqB,IAAI,WACnC2pD,GAAYtjD,EAAO6B,WAAa7B,EAAO8C,UAAY,EACnDrG,EAAKQ,KAAK0sB,IAAI25B,GACd5mD,EAAKO,KAAK4sB,IAAIy5B,GAKlB1gD,EAAK5C,EAAO4C,GACZC,EAAK7C,EAAO6C,GACZ,IAAI0iB,EAAkC,WAAlBD,GAAgD,UAAlBA,EAElD,GAAsB,WAAlBA,EACFF,EAAQplB,EAAO4C,GACfyiB,EAAQrlB,EAAO6C,GACfmhB,EAAY,aACP,CACL,IAAIwB,GAAMD,GAAiBvlB,EAAOkC,EAAIlC,EAAOmC,IAAM,EAAI1F,EAAKuD,EAAOkC,EAAIzF,GAAMmG,EACzE6iB,GAAMF,GAAiBvlB,EAAOkC,EAAIlC,EAAOmC,IAAM,EAAIzF,EAAKsD,EAAOkC,EAAIxF,GAAMmG,EAI7E,GAHAuiB,EAAQI,EAAU,EAAL/oB,EACb4oB,EAAQI,EAAU,EAAL/oB,GAER6oB,EAAe,CAElB,IAAIG,EAAKF,EAAK/oB,GAAMkpB,EAAezjB,EAAIlC,EAAOkC,GAC1C0jB,EAAKH,EAAK/oB,GAAMipB,EAAezjB,EAAIlC,EAAOkC,GAC1CsjD,EAAK9/B,GAAMjpB,EAAK,GAAK,EAAI,GAAK8oD,EAC9BE,EAAK7/B,EACTR,EAAQogC,GAAM/oD,EAAK,GAAK,EAAI,GAC5B4oB,EAAQogC,EACR/hC,EAAa,CAAC,CAAC8B,EAAIC,GAAK,CAACC,EAAIE,GAAK,CAAC4/B,EAAIC,GACzC,CAEAzhC,EAAYuB,EAAgB,SAAW9oB,EAAK,EAAI,OAAS,OAC3D,CAEA,IAAIkgB,EAAOtN,EAAW0O,UAClB2nC,EAAcr2C,EAAW1V,IAAI,UAAY8C,EAAK,GAAK6mD,EAAWrmD,KAAK0L,IAAM26C,EAAW,EACpFvhD,EAAOjH,EAAY4iB,kBAAkBxiB,EAAK,WAAa7D,EAAK8D,QAAQD,GACpEyqD,EAAWzB,EAAY9wB,gBAAgBrxB,EAAM4a,EAAMqH,EAAW,OAClEshC,IAAmBI,EACnB1lD,EAAOohB,MAAQ,CACb1e,EAAG0iB,EACHziB,EAAG0iB,EACHloB,SAAUmoB,EACV7iB,OAAQkjD,EAASljD,OACjBwiB,IAAKU,EACLk/B,KAAMU,EACN7hC,WAAYA,EACZM,UAAWA,EACXE,cAAe,SACfxb,SAAUg9C,EACV3hC,OAAQwB,GAGLA,GACH4/B,EAAgB1tD,KAAKuI,EAAOohB,MAEhC,KAEKkkC,GAAkBxqD,EAAYnB,IAAI,sBACrCurD,EAAaC,EAAiBviD,EAAIC,EAAIX,EAAG81B,EAAWC,EAExD,CAEAp+B,EAAOvB,QAAUsB,C,uBClNjB,IAAI6M,EAAUvO,EAAQ,OAElBwO,EAAeD,EAAQC,aACvB8d,EAAY/d,EAAQ+d,UAEpBf,EAAcvrB,EAAQ,OAEtBK,EAASL,EAAQ,OAEjB4vB,EAAgB,EAAV7qB,KAAK0L,GACXkqC,EAAS51C,KAAK0L,GAAK,IAEvB,SAAS/O,EAASQ,EAAYtB,EAASC,EAAKyB,GAC1C1B,EAAQ+E,iBAAiBzD,GAAY,SAAUU,GAC7C,IAAIgB,EAAShB,EAAYnB,IAAI,UACzB+sB,EAAS5rB,EAAYnB,IAAI,UAExBpB,EAAO6Q,QAAQsd,KAClBA,EAAS,CAAC,EAAGA,IAGVnuB,EAAO6Q,QAAQtN,KAClBA,EAAS,CAACA,EAAQA,IAGpB,IAAIkG,EAAQjJ,EAAI2O,WACZjF,EAAS1J,EAAI4O,YACbhD,EAAO1H,KAAKJ,IAAImF,EAAOS,GACvBG,EAAK8D,EAAa5K,EAAO,GAAIkG,GAC7Ba,EAAK6D,EAAa5K,EAAO,GAAI2G,GAC7BN,EAAKuE,EAAaggB,EAAO,GAAI/hB,EAAO,GACpCzC,EAAIwE,EAAaggB,EAAO,GAAI/hB,EAAO,GACnCtN,EAAOyD,EAAYG,UACnB4G,GAAc/G,EAAYnB,IAAI,cAAgBk5C,EAC9C8P,EAAW7nD,EAAYnB,IAAI,YAAck5C,EACzC+S,EAAiB,EACrBvuD,EAAK4B,KAAK,SAAS,SAAUuL,IAC1BsQ,MAAMtQ,IAAUohD,GACnB,IACA,IAAIpkC,EAAMnqB,EAAKoqB,OAAO,SAElBokC,EAAa5oD,KAAK0L,IAAM6Y,GAAOokC,GAAkB,EACjDj/B,EAAY7rB,EAAYnB,IAAI,aAC5BmsD,EAAWhrD,EAAYnB,IAAI,YAC3BqpD,EAAmBloD,EAAYnB,IAAI,oBAEnCkZ,EAASxb,EAAK2uB,cAAc,SAChCnT,EAAO,GAAK,EAEZ,IAAIkzC,EAAYj+B,EACZk+B,EAA6B,EAC7BC,EAAepkD,EACf6vC,EAAM/qB,EAAY,GAAK,EA+C3B,GA9CAtvB,EAAK4B,KAAK,SAAS,SAAUuL,EAAOtJ,GAClC,IAAImuB,EAEJ,GAAIvU,MAAMtQ,GACRnN,EAAKge,cAAcna,EAAK,CACtBmuB,MAAOxkB,IACPhD,WAAYgD,IACZ/B,SAAU+B,IACV8hB,UAAWA,EACX/jB,GAAIA,EACJC,GAAIA,EACJV,GAAIA,EACJD,EAAG4jD,EAAWjhD,IAAM3C,QATxB,CAgBEmnB,EADe,SAAby8B,EACc,IAARtkC,GAAawhC,EAAmB6C,EAAarhD,EAAQqhD,EAErD/9B,EAAM89B,EAGZv8B,EAAQs5B,GACVt5B,EAAQs5B,EACRoD,GAAapD,GAEbqD,GAA8BxhD,EAGhC,IAAI1B,EAAWmjD,EAAevU,EAAMroB,EACpChyB,EAAKge,cAAcna,EAAK,CACtBmuB,MAAOA,EACPxnB,WAAYokD,EACZnjD,SAAUA,EACV6jB,UAAWA,EACX/jB,GAAIA,EACJC,GAAIA,EACJV,GAAIA,EACJD,EAAG4jD,EAAWthC,EAAUhgB,EAAOqO,EAAQ,CAAC1Q,EAAID,IAAMA,IAEpD+jD,EAAenjD,CA3Bf,CA4BF,IAAG,GAGCijD,EAAYj+B,GAAO89B,EAGrB,GAAIG,GAAa,KAAM,CACrB,IAAI18B,EAAQvB,EAAM89B,EAClBvuD,EAAK4B,KAAK,SAAS,SAAUuL,EAAOtJ,GAClC,IAAK4Z,MAAMtQ,GAAQ,CACjB,IAAIxE,EAAS3I,EAAK+K,cAAclH,GAChC8E,EAAOqpB,MAAQA,EACfrpB,EAAO6B,WAAaA,EAAa6vC,EAAMx2C,EAAMmuB,EAC7CrpB,EAAO8C,SAAWjB,EAAa6vC,GAAOx2C,EAAM,GAAKmuB,CACnD,CACF,GACF,MACEw8B,EAAaE,EAAYC,EACzBC,EAAepkD,EACfxK,EAAK4B,KAAK,SAAS,SAAUuL,EAAOtJ,GAClC,IAAK4Z,MAAMtQ,GAAQ,CACjB,IAAIxE,EAAS3I,EAAK+K,cAAclH,GAC5BmuB,EAAQrpB,EAAOqpB,QAAUs5B,EAAWA,EAAWn+C,EAAQqhD,EAC3D7lD,EAAO6B,WAAaokD,EACpBjmD,EAAO8C,SAAWmjD,EAAevU,EAAMroB,EACvC48B,GAAgBvU,EAAMroB,CACxB,CACF,IAIJ5F,EAAY3oB,EAAaoH,EAAGF,EAAOS,EACrC,GACF,CAEA5I,EAAOvB,QAAUsB,C,wBCnIjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAErBA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAER,IAAIioB,EAAYjoB,EAAQ,OAEpBmnB,EAAennB,EAAQ,OAEvBguD,EAAchuD,EAAQ,MAEtBmoB,EAAanoB,EAAQ,OAErB2jD,EAAiB3jD,EAAQ,MAG7BiC,EAAQyD,eAAerF,EAAOoF,MAAMwiB,EAAW,UAC/ChmB,EAAQyD,eAAerF,EAAOoF,MAAM0hB,EAAc,QAAS,SAAU,OACrEllB,EAAQuD,eAAewoD,GACvB/rD,EAAQmmB,kBAAkB/nB,EAAOoF,MAAM0iB,EAAY,UACnDlmB,EAAQ+b,qBAAqB2lC,E,wBCzB7B,IAAI13C,EAAcjM,EAAQ,OAEtBqoB,EAAOroB,EAAQ,OAEfwoB,EAAqBxoB,EAAQ,OAE7BK,EAASL,EAAQ,OAEjBszB,EAAUtzB,EAAQ,OAElBuzB,EAAaD,EAAQC,WACrB06B,EAAchiD,EAAYnG,OAAO,CACnC7E,KAAM,eACN8E,aAAc,CAAC,SAEf6hB,KAAM,SAAUxb,GACd6hD,EAAY9/C,WAAW5P,KAAM,OAAQ6P,WAGrC7P,KAAKmqB,mBAAqB,WACxB,OAAOnqB,KAAKoqB,YACd,CACF,EACAxc,eAAgB,SAAUC,EAAQxL,GAChC,IAAIzB,EAAOiN,EAAOjN,MAAQ,GACtBiZ,EAAaoQ,EAAmB,GAAIrpB,EAAM,CAC5C+uD,YAAa,aACbC,eAAe,IAEbjtD,EAAO,IAAImnB,EAAKjQ,EAAY7Z,MAEhC,OADA2C,EAAK2nB,SAAS1pB,GACP+B,CACT,EACAo0B,cAAe,SAAUxyB,GACvB,IAAIwJ,EAAQ/N,KAAKkZ,YAAY3U,GACzBzB,EAAW9C,KAAKkF,iBAChB2qD,EAAgB/sD,EAASgtD,mBACzBtsD,EAAOxD,KAAKwE,UAAUE,QAAQH,GAClC,OAAOywB,EAAoB,KAATxxB,EAAcxD,KAAKwD,KAAOA,GAAQ,QAAU1B,EAAO41B,IAAIm4B,GAAe,SAAUp8C,EAAMhP,GACtG,OAAOuwB,EAAWvhB,EAAKjQ,KAAO,MAAQuK,EAAMtJ,GAC9C,IAAG8S,KAAK,SACV,EACAlJ,cAAe,CACbC,OAAQ,EACRC,EAAG,EACHrJ,iBAAkB,QAClBsJ,iBAAiB,EACjBuhD,WAAY,EACZlkC,UAAW,CACT9R,OAAQ,CACNxO,MAAO,EACP7I,KAAM,UAGVioB,MAAO,CACL5Q,OAAQ,CACNrT,SAAU,QAMdmI,OAAQ,cACRC,WAAY,KAIZ3L,EAAWusD,EACftsD,EAAOvB,QAAUsB,C,wBCpEjB,IAAIO,EAAUjC,EAAQ,OAElBmG,EAAUnG,EAAQ,OAElBK,EAASL,EAAQ,OAEjBitC,EAAajtC,EAAQ,OAEzB,SAASkqC,EAAoB78B,GAK3B,OAJKhN,EAAO6Q,QAAQ7D,KAClBA,EAAa,EAAEA,GAAaA,IAGvBA,CACT,CAEA,IAAI3L,EAAWO,EAAQwE,gBAAgB,CACrCxF,KAAM,QACN5C,OAAQ,SAAUuE,EAAahC,EAASC,GACtC,IAAIyI,EAAQ1G,EAAYa,iBACpBmD,EAAQrI,KAAKqI,MACbzH,EAAOyD,EAAYG,UACnBiE,EAAUzI,KAAK0I,MAEnB,SAASqH,EAAanP,EAAM6D,GAC1B,IAAI0N,EAAavR,EAAK4L,cAAc/H,EAAK,WAAa,SAClD8H,EAAQ3L,EAAK4L,cAAc/H,EAAK,SAEpC,GAAmB,SAAf0N,EAAJ,CAIA,IAAIrD,EAAa68B,EAAoB/qC,EAAK4L,cAAc/H,EAAK,eACzD+2B,EAAakT,EAAW3+B,aAAaoC,GAAa,GAAI,EAAG,EAAG,EAAG5F,GAQnE,OAPAivB,EAAWpuB,KAAK,CACd/B,MAAO,CACL8J,eAAe,GAEjB/C,GAAI,IACJ3L,MAAO,CAACqI,EAAW,GAAK,EAAGA,EAAW,GAAK,KAEtC0sB,CAXP,CAYF,CAEA,SAASw0B,EAAcC,EAAWC,EAAWC,EAAavvD,EAAM6D,EAAK2f,GAEnE+rC,EAAY5lD,YAEZ,IAAK,IAAI0L,EAAI,EAAGA,EAAIi6C,EAAU/7C,OAAS,EAAG8B,IAAK,CAC7C,IAAIulB,EAAazrB,EAAanP,EAAM6D,GAEhC+2B,IACFA,EAAW40B,SAAWn6C,EAElBg6C,EAAUh6C,IACZulB,EAAWpuB,KAAK,WAAY6iD,EAAUh6C,IACtCrO,EAAQwc,EAAS,YAAc,eAAeoX,EAAY,CACxD90B,SAAUwpD,EAAUj6C,IACnB5R,EAAaI,IAEhB+2B,EAAWpuB,KAAK,WAAY8iD,EAAUj6C,IAGxCk6C,EAAYhnD,IAAIqyB,GAEpB,CACF,CAEA,SAAS60B,EAAiB1jC,GACxB,OAAO7qB,EAAO41B,IAAI/K,GAAQ,SAAU3e,GAClC,MAAO,CAACjD,EAAMoB,GAAIpB,EAAMqB,GAC1B,GACF,CAEAxL,EAAKsI,KAAKT,GAASU,KAAI,SAAU1E,GAC/B,IAAIkoB,EAAS/rB,EAAK+K,cAAclH,GAEhC,GAAKkoB,EAAL,CAIA,IAAIZ,EAAU,IAAInkB,EAAQokB,QACtBmhB,EAAW,IAAIvlC,EAAQqkB,SACvBnW,EAAS,CACX7L,MAAO,CACL0iB,OAAQA,IAGZZ,EAAQ9hB,MAAM0iB,OAAS0jC,EAAiB1jC,GACxCwgB,EAASljC,MAAM0iB,OAAS0jC,EAAiB1jC,GACzC/kB,EAAQmd,UAAUgH,EAASjW,EAAQzR,EAAaI,GAChDmD,EAAQmd,UAAUooB,EAAUr3B,EAAQzR,EAAaI,GACjD,IAAIsW,EAAY,IAAInT,EAAQwP,MACxB+4C,EAAc,IAAIvoD,EAAQwP,MAC9B2D,EAAU5R,IAAIgkC,GACdpyB,EAAU5R,IAAI4iB,GACdhR,EAAU5R,IAAIgnD,GACdH,EAAc7iB,EAASljC,MAAM0iB,OAAQA,EAAQwjC,EAAavvD,EAAM6D,GAAK,GACrE7D,EAAK+I,iBAAiBlF,EAAKsW,EAnB3B,CAoBF,IAAGlY,QAAO,SAAU6lB,EAAQC,GAC1B,IAAI5N,EAAYtS,EAAQsB,iBAAiB4e,GACrCwkB,EAAWpyB,EAAUI,QAAQ,GAC7B4Q,EAAUhR,EAAUI,QAAQ,GAC5Bg1C,EAAcp1C,EAAUI,QAAQ,GAChCrF,EAAS,CACX7L,MAAO,CACL0iB,OAAQ/rB,EAAK+K,cAAc+c,KAI1B5S,EAAO7L,MAAM0iB,SAIlBqjC,EAAc7iB,EAASljC,MAAM0iB,OAAQ7W,EAAO7L,MAAM0iB,OAAQwjC,EAAavvD,EAAM8nB,GAAQ,GACrF9gB,EAAQoC,YAAYmjC,EAAUr3B,EAAQzR,GACtCuD,EAAQoC,YAAY+hB,EAASjW,EAAQzR,GACrCzD,EAAK+I,iBAAiB+e,EAAQ3N,GAChC,IAAG7Q,QAAO,SAAUzF,GAClB4D,EAAM6B,OAAOzB,EAAQsB,iBAAiBtF,GACxC,IAAG4F,UACHzJ,EAAK0J,mBAAkB,SAAUyQ,EAAWtW,GAC1C,IAAI4E,EAAYzI,EAAK0I,aAAa7E,GAC9B0oC,EAAWpyB,EAAUI,QAAQ,GAC7B4Q,EAAUhR,EAAUI,QAAQ,GAC5Bg1C,EAAcp1C,EAAUI,QAAQ,GAChC5O,EAAQ3L,EAAK4L,cAAc/H,EAAK,SACpC4D,EAAMc,IAAI4R,GACVoyB,EAASpgC,SAASjL,EAAOkL,SAAS3D,EAAUsD,SAAS,oBAAoB+gB,eAAgB,CACvFzgB,KAAM,OACNyJ,OAAQnK,KAEV4gC,EAASvgC,WAAavD,EAAUsD,SAAS,sBAAsB+gB,eAC/D,IAAIowB,EAAiBz0C,EAAUsD,SAAS,oBACpC2jD,EAAsBjnD,EAAUsD,SAAS,sBACzC4jD,EAAgBzS,EAAeO,WAAaP,EAAe7mC,YAAYonC,UACvEmS,EAAqBF,EAAoBjS,WAAaiS,EAAoBr5C,YAAYonC,UAC1FmS,EAAqBA,GAAsBD,EAC3CxkC,EAAQI,OAASokC,EACjBxkC,EAAQhf,SAASjL,EAAOkL,SAAS8wC,EAAekB,eAAgB,CAC9D/xC,KAAMV,EACNE,QAAS,MAEXsf,EAAQnf,WAAa0jD,EAAoBtR,eACzC,IAAIrwC,EAAYtF,EAAUsD,SAAS,oBAAoBoL,aAAa,CAAC,UACjE04C,EAAiBpnD,EAAUsD,SAAS,sBAAsBoL,eAC1Da,EAAavP,EAAUsD,SAAS,gBAChCugB,EAAkB7jB,EAAUsD,SAAS,kBAczC,SAASuf,IACPH,EAAQ3e,KAAK,SAAUojD,EACzB,CAEA,SAASnkC,IACPN,EAAQ3e,KAAK,SAAUmjD,EACzB,CAnBAJ,EAAYpkB,WAAU,SAAUvQ,GAC9BA,EAAWtmB,SAASvG,GACpB6sB,EAAW5uB,WAAa9K,EAAOyiB,MAAMksC,GACrC7oD,EAAQkR,cAAc0iB,EAAWnwB,MAAOmwB,EAAW5uB,WAAYgM,EAAYsU,EAAiB,CAC1FnU,aAAcnY,EAAK8rB,UACnB1T,eAAgBvU,EAChBisD,cAAel1B,EAAW40B,SAC1Bn3C,YAAarY,EAAKsC,IAAItC,EAAKiZ,WAAW2hB,EAAW40B,UAAW3rD,GAC5D2U,UAAW7M,EACX4M,YAAY,GAEhB,IAUA4B,EAAU7D,IAAI,aAAaA,IAAI,YAAYA,IAAI,UAAUA,IAAI,YAC7D6D,EAAUza,GAAG,WAAY4rB,GAAY5rB,GAAG,YAAa4rB,GAAY5rB,GAAG,SAAU+rB,GAAU/rB,GAAG,WAAY+rB,GACvGzkB,EAAQ0F,cAAcyN,EACxB,IACA/a,KAAK0I,MAAQ9H,CACf,EACAsJ,OAAQ,WACNlK,KAAKqI,MAAMkC,YACXvK,KAAK0I,MAAQ,IACf,EACAJ,QAAS,WAAa,IAGxBlF,EAAOvB,QAAUsB,C,gCCtLjB,IAAIrB,EAASL,EAAQ,OAGrB,SAAS0B,EAAS0K,GAChB,IAAI8iD,EAAc9iD,EAAO9C,MAEzB,GAAI4lD,EAAa,CACV7uD,EAAO6Q,QAAQg+C,KAClBA,EAAc,CAACA,IAGjB,IAAIC,EAAgB,GACpB9uD,EAAOU,KAAKmuD,GAAa,SAAUE,EAAUpsD,GACvCosD,EAASC,WACPD,EAASnuD,OAASmuD,EAAS5mD,QAC7B4mD,EAAS5mD,MAAQ4mD,EAASnuD,MAG5BmL,EAAOkjD,MAAQljD,EAAOkjD,OAAS,GAE1BjvD,EAAO6Q,QAAQ9E,EAAOkjD,SACzBljD,EAAOkjD,MAAQ,CAACljD,EAAOkjD,QAGzBljD,EAAOkjD,MAAM/vD,KAAK6vD,IAElBD,EAAc5vD,KAAK6vD,EAEvB,IACAhjD,EAAO9C,MAAQ6lD,CACjB,CAEA9uD,EAAOU,KAAKqL,EAAOiU,QAAQ,SAAUshC,GAC/BA,GAAgC,UAAnBA,EAAU1gD,MAAoB0gD,EAAU4N,aACvD5N,EAAU2M,WAAa3M,EAAU4N,WAErC,GACF,CAEA5tD,EAAOvB,QAAUsB,C,uBCvCjB,SAASA,EAASd,GAChBA,EAAQ+E,iBAAiB,SAAS,SAAU/C,GAC1C,IAAIzD,EAAOyD,EAAYG,UACnBmoB,EAAS,GACT7pB,EAAWuB,EAAYa,iBAE3B,GAAKpC,EAAL,CASA,IAAK,IAAImT,EAAI,EAAGA,EAAInT,EAASgtD,mBAAmB37C,OAAQ8B,IAAK,CAC3D,IAAIlN,EAAMnI,EAAKiZ,WAAW5D,GAC1BrV,EAAK4B,KAAKuG,EAAKkoD,EACjB,CAEArwD,EAAK4B,MAAK,SAAUiC,GAElBkoB,EAAOloB,GAAK,IAAMkoB,EAAOloB,GAAKzD,KAAK2rB,EAAOloB,GAAK,GAAGzB,SAClDpC,EAAKge,cAAcna,EAAKkoB,EAAOloB,GACjC,GAhBA,CAEA,SAASwsD,EAAgB9yC,EAAK1Z,GAC5BkoB,EAAOloB,GAAOkoB,EAAOloB,IAAQ,GAC7BkoB,EAAOloB,GAAKwR,GAAKnT,EAASiD,YAAYoY,EAAKlI,EAC7C,CAYF,GACF,C,SAEA7S,EAAOvB,QAAUsB,C,wBC5BjB,IAAIO,EAAUjC,EAAQ,OAEtBA,EAAQ,OAERA,EAAQ,OAER,IAAIyvD,EAAezvD,EAAQ,OAEvB0vD,EAAe1vD,EAAQ,OAE3BiC,EAAQuD,eAAeiqD,GACvBxtD,EAAQyD,eAAegqD,E,wBCXvB,IAAIzjD,EAAcjM,EAAQ,OAEtBwzB,EAA0BxzB,EAAQ,OAElCszB,EAAUtzB,EAAQ,OAElBuzB,EAAaD,EAAQC,WAMrBo8B,EAAe1jD,EAAYnG,OAAO,CACpC7E,KAAM,gBACN2uD,WAAY,KAQZzjD,eAAgB,SAAUC,GACxB,IAAIynB,EAAQznB,EAAOwnB,OAASxnB,EAAOynB,MAC/BK,EAAQ9nB,EAAOjN,MAAQiN,EAAO8nB,MAElC,GAAIA,GAASL,EAAO,CAClB,IAAIsB,EAAQ3B,EAAwBU,EAAOL,EAAOt1B,MAAM,GACxD,OAAO42B,EAAMh2B,IACf,CACF,EAOA+1B,SAAU,WACR,OAAO32B,KAAKwE,UAAUoyB,KACxB,EAOAC,YAAa,WACX,OAAO72B,KAAK22B,WAAWZ,QACzB,EAKAgB,cAAe,SAAUxyB,EAAWyyB,EAAgBC,GAElD,GAAiB,SAAbA,EAAqB,CACvB,IAAIpM,EAAS7qB,KAAK4qB,cAAcrmB,EAAW0yB,GACvCq6B,EAAazmC,EAAOjqB,KACpB42B,EAAO85B,EAAWpc,OAAS,OAASoc,EAAWx7C,OAMnD,OAJI+U,EAAO9c,QACTypB,GAAQ,MAAQ3M,EAAO9c,OAGlBinB,EAAWwC,EACpB,CAEA,OAAO45B,EAAatmC,UAAU9qB,KAAM,gBAAiBuE,EAAWyyB,EAClE,EACA3oB,cAAe,CACbC,OAAQ,EACRC,EAAG,EACHrJ,iBAAkB,OAClBqE,OAAQ,KAER6hB,KAAM,KACNC,IAAK,KACLC,MAAO,MACPC,OAAQ,KAERgmC,UAAW,GAEXC,QAAS,EAETC,iBAAkB,GAClB9mC,MAAO,CACL5Q,OAAQ,CACN2Q,MAAM,EACNhkB,SAAU,QACV6F,MAAO,OACPqkB,SAAU,IAEZ3W,SAAU,CACRyQ,MAAM,IAGV/b,UAAW,CACToL,OAAQ,CACNC,YAAa,EACbiB,YAAa,SAGjB4Q,UAAW,CACT9R,OAAQ,CACNxN,MAAO,UACPE,QAAS,GACTmsB,UAAW,IAEb3e,SAAU,CACRxN,QAAS,KAGb6N,gBAAiB,SACjBC,kBAAmB,OAGnBpX,EAAWiuD,EACfhuD,EAAOvB,QAAUsB,C,wBCrHjB,IAAIyE,EAAUnG,EAAQ,OAElBiC,EAAUjC,EAAQ,OAMlBiwD,EAAc9pD,EAAQslC,YAAY,CACpCjjC,MAAO,CACL8kB,GAAI,EACJC,GAAI,EACJC,GAAI,EACJE,GAAI,EACJ8f,KAAM,EACNC,KAAM,EACNyiB,KAAM,EACNC,KAAM,EACNx1C,OAAQ,GAEV6X,UAAW,SAAUC,EAAKjqB,GACxB,IAAI4nD,EAAa5nD,EAAMmS,OAAS,EAChC8X,EAAIG,OAAOpqB,EAAM8kB,GAAI9kB,EAAM+kB,GAAK6iC,GAChC39B,EAAIyuB,cAAc14C,EAAMglC,KAAMhlC,EAAMilC,KAAO2iB,EAAY5nD,EAAM0nD,KAAM1nD,EAAM2nD,KAAOC,EAAY5nD,EAAMglB,GAAIhlB,EAAMklB,GAAK0iC,GACjH39B,EAAII,OAAOrqB,EAAMglB,GAAIhlB,EAAMklB,GAAK0iC,GAChC39B,EAAIyuB,cAAc14C,EAAM0nD,KAAM1nD,EAAM2nD,KAAOC,EAAY5nD,EAAMglC,KAAMhlC,EAAMilC,KAAO2iB,EAAY5nD,EAAM8kB,GAAI9kB,EAAM+kB,GAAK6iC,GACjH39B,EAAIuR,WACN,IAGEtiC,EAAWO,EAAQwE,gBAAgB,CACrCxF,KAAM,SAMNqnB,OAAQ,KACRjqB,OAAQ,SAAUuE,EAAahC,EAASC,GACtC,IAAIs0B,EAAQvyB,EAAYsyB,WACpBtuB,EAAQrI,KAAKqI,MACbgpD,EAAahtD,EAAYgtD,WACzBv7B,EAAWzxB,EAAYG,UACvBuxB,EAAW1xB,EAAYG,QAAQ,QACnCxE,KAAK+pB,OAAS1lB,EACdgE,EAAMkC,YACNlC,EAAM+E,KAAK,WAAY,CAACikD,EAAWplD,EAAGolD,EAAWnlD,IAEjD0qB,EAAMyE,UAAS,SAAUnE,GACvB,IAAI46B,EAAQ,IAAIJ,EAChBI,EAAMvtD,UAAY2yB,EAAK3yB,UACvButD,EAAM5yC,YAAc7a,EAAY6a,YAChC4yC,EAAM76B,SAAW,OACjB,IAAItF,EAAiBuF,EAAKvqB,SAAS,oBAC/BolD,EAAYpgC,EAAezuB,IAAI,aAC/B8uD,EAAW96B,EAAKG,MAAM7tB,YACtByoD,EAAW/6B,EAAKK,MAAM/tB,YACtB0oD,EAAah7B,EAAK1tB,YACtBsoD,EAAM7nD,MAAMmS,OAAS5V,KAAKF,IAAI,EAAG4rD,EAAWjsD,IAC5C,IAAI8oB,EAAKijC,EAAS/lD,EAAI+lD,EAAShsD,GAC3BgpB,EAAKgjC,EAAS9lD,EAAIgmD,EAAWC,GAAKD,EAAWjsD,GAAK,EAClDgpB,EAAKgjC,EAAShmD,EACdkjB,EAAK8iC,EAAS/lD,EAAIgmD,EAAWtnB,GAAKsnB,EAAWjsD,GAAK,EAClDgpC,EAAOlgB,GAAM,EAAIgjC,GAAa9iC,EAAK8iC,EACnC7iB,EAAOlgB,EACP2iC,EAAO5iC,EAAKgjC,EAAY9iC,GAAM,EAAI8iC,GAClCH,EAAOziC,EAaX,OAZA2iC,EAAMhlD,SAAS,CACbiiB,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJE,GAAIA,EACJ8f,KAAMA,EACNC,KAAMA,EACNyiB,KAAMA,EACNC,KAAMA,IAERE,EAAM58C,SAASyc,EAAe5Z,gBAEtB+5C,EAAMzmD,MAAM4B,MAClB,IAAK,SACH6kD,EAAMzmD,MAAM4B,KAAOiqB,EAAKG,MAAMkC,UAAU,SACxC,MAEF,IAAK,SACHu4B,EAAMzmD,MAAM4B,KAAOiqB,EAAKK,MAAMgC,UAAU,SACxC,MAGJ3xB,EAAQ0F,cAAcwkD,EAAO56B,EAAKvqB,SAAS,sBAAsBoL,gBACjE1P,EAAMc,IAAI2oD,GACV/7B,EAASpsB,iBAAiButB,EAAK3yB,UAAWutD,EAC5C,IAEAl7B,EAAMsF,UAAS,SAAUF,GACvB,IAAIzyB,EAASyyB,EAAKxyB,YACdH,EAAY2yB,EAAKrvB,WACjBiM,EAAavP,EAAUsD,SAAS,gBAChCugB,EAAkB7jB,EAAUsD,SAAS,kBACrCjC,EAAO,IAAI9C,EAAQ+C,KAAK,CAC1BV,MAAO,CACLgC,EAAG1C,EAAO0C,EACVC,EAAG3C,EAAO2C,EACVX,MAAOywB,EAAKxyB,YAAYxD,GACxBgG,OAAQgwB,EAAKxyB,YAAYvD,IAE3BoF,MAAOhC,EAAUsD,SAAS,oBAAoBoL,iBAE5CnL,EAAaovB,EAAKrvB,SAAS,sBAAsBoL,eACrDnQ,EAAQkR,cAAcpO,EAAKW,MAAOuB,EAAYgM,EAAYsU,EAAiB,CACzEnU,aAAc1U,EACd2U,eAAgBgjB,EAAKz3B,UACrB0U,YAAa+iB,EAAK3V,GAClBlN,YAAY,IAEdzO,EAAKwK,SAAS,OAAQ8mB,EAAKzC,UAAU,UACrC3xB,EAAQ0F,cAAc5C,EAAMkC,GAC5BvE,EAAMc,IAAIuB,GACVorB,EAASnsB,iBAAiBqyB,EAAKz3B,UAAWmG,GAC1CA,EAAKusB,SAAW,MAClB,KAEKj3B,KAAK0I,OAASrE,EAAYnB,IAAI,cACjCmF,EAAMyO,YAAY2kC,EAAoBpzC,EAAMs0B,kBAAmBt4B,GAAa,WAC1EgE,EAAM6iD,gBACR,KAGFlrD,KAAK0I,MAAQrE,EAAYG,SAC3B,EACA8D,QAAS,WAAa,IAIxB,SAASmzC,EAAoB/wC,EAAMrG,EAAamT,GAC9C,IAAI+zC,EAAS,IAAI3jD,EAAQ+C,KAAK,CAC5BV,MAAO,CACLgC,EAAGvB,EAAKuB,EAAI,GACZC,EAAGxB,EAAKwB,EAAI,GACZX,MAAO,EACPS,OAAQtB,EAAKsB,OAAS,MAS1B,OANApE,EAAQmd,UAAUwmC,EAAQ,CACxBthD,MAAO,CACLsB,MAAOb,EAAKa,MAAQ,GACpBS,OAAQtB,EAAKsB,OAAS,KAEvB3H,EAAamT,GACT+zC,CACT,CAEAnoD,EAAOvB,QAAUsB,C,iCCxJjB,IAAIoG,EAAS9H,EAAQ,MAEjB2wD,EAAO3wD,EAAQ,OAEfK,EAASL,EAAQ,OAMrB,SAAS0B,EAASd,EAASC,EAAKyB,GAC9B1B,EAAQ+E,iBAAiB,UAAU,SAAU/C,GAC3C,IAAIktD,EAAYltD,EAAYnB,IAAI,aAC5BsuD,EAAUntD,EAAYnB,IAAI,WAC1BmuD,EAAarjC,EAAY3pB,EAAa/B,GAC1C+B,EAAYgtD,WAAaA,EACzB,IAAI9lD,EAAQ8lD,EAAW9lD,MACnBS,EAASqlD,EAAWrlD,OACpB4qB,EAAQvyB,EAAYsyB,WACpBhB,EAAQiB,EAAMjB,MACdN,EAAQuB,EAAMvB,MAClBg9B,EAAkB18B,GAClB,IAAI28B,EAAgBxwD,EAAOywD,OAAO58B,GAAO,SAAUqG,GACjD,OAAkC,IAA3BA,EAAKxyB,YAAYuE,KAC1B,IACIykD,EAAsC,IAAzBF,EAAcn+C,OAAe,EAAI9P,EAAYnB,IAAI,oBAClEuvD,EAAa98B,EAAON,EAAOk8B,EAAWC,EAASjmD,EAAOS,EAAQwmD,EAChE,GACF,CAUA,SAASxkC,EAAY3pB,EAAa/B,GAChC,OAAOiH,EAAO0kB,cAAc5pB,EAAY6pB,qBAAsB,CAC5D3iB,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aAEhB,CAEA,SAASuhD,EAAa98B,EAAON,EAAOk8B,EAAWC,EAASjmD,EAAOS,EAAQwmD,GACrEE,EAAoB/8B,EAAO47B,EAAWhmD,GACtConD,EAAkBh9B,EAAON,EAAOrpB,EAAQwlD,EAASgB,GACjDI,EAAkBj9B,EACpB,CAQA,SAAS08B,EAAkB18B,GACzB7zB,EAAOU,KAAKmzB,GAAO,SAAUqG,GAC3B,IAAI62B,EAAS9nC,EAAIiR,EAAK82B,SAAUC,GAC5BC,EAASjoC,EAAIiR,EAAKi3B,QAASF,GAC3BhlD,EAAQvH,KAAKF,IAAIusD,EAAQG,GAC7Bh3B,EAAKyE,UAAU,CACb1yB,MAAOA,IACN,EACL,GACF,CAUA,SAAS2kD,EAAoB/8B,EAAO47B,EAAWhmD,GAC7C,IAAI2nD,EAAcv9B,EACdw9B,EAAW,KACXlnD,EAAI,EACJmnD,EAAK,EAET,MAAOF,EAAY/+C,OAAQ,CACzBg/C,EAAW,GAEX,IAAK,IAAIl9C,EAAI,EAAGuY,EAAM0kC,EAAY/+C,OAAQ8B,EAAIuY,EAAKvY,IAAK,CACtD,IAAI+lB,EAAOk3B,EAAYj9C,GACvB+lB,EAAKyE,UAAU,CACbx0B,EAAGA,IACF,GACH+vB,EAAKyE,UAAU,CACbz6B,GAAIurD,IACH,GAEH,IAAK,IAAIj+B,EAAI,EAAG+/B,EAAOr3B,EAAK82B,SAAS3+C,OAAQmf,EAAI+/B,EAAM//B,IACrD6/B,EAASnyD,KAAKg7B,EAAK82B,SAASx/B,GAAGiE,MAEnC,CAEA27B,EAAcC,IACZlnD,CACJ,CAEAqnD,EAAe39B,EAAO1pB,GACtBmnD,GAAM7nD,EAAQgmD,IAActlD,EAAI,GAChCsnD,EAAkB59B,EAAOy9B,EAC3B,CAWA,SAASE,EAAe39B,EAAO1pB,GAC7BnK,EAAOU,KAAKmzB,GAAO,SAAUqG,GACtBA,EAAK82B,SAAS3+C,QACjB6nB,EAAKyE,UAAU,CACbx0B,EAAGA,EAAI,IACN,EAEP,GACF,CASA,SAASsnD,EAAkB59B,EAAOy9B,GAChCtxD,EAAOU,KAAKmzB,GAAO,SAAUqG,GAC3B,IAAIw3B,EAAQx3B,EAAKxyB,YAAYyC,EAAImnD,EACjCp3B,EAAKyE,UAAU,CACbx0B,EAAGunD,IACF,EACL,GACF,CAaA,SAASb,EAAkBh9B,EAAON,EAAOrpB,EAAQwlD,EAASgB,GACxD,IAAIiB,EAAiBrB,IAAOzwD,KAAI,SAAU88B,GACxC,OAAOA,EAAEj1B,YAAYyC,CACvB,IAAGynD,SAASC,GAAWC,QAAQj+B,GAAO+B,KAAI,SAAU+G,GAClD,OAAOA,EAAEo1B,MACX,IACAC,EAAoBn+B,EAAO89B,EAAgBp+B,EAAOrpB,EAAQwlD,GAC1DuC,EAAkBN,EAAgBjC,EAASxlD,GAE3C,IAAK,IAAIw4B,EAAQ,EAAGguB,EAAa,EAAGA,IAGlChuB,GAAS,IACTwvB,EAAiBP,EAAgBjvB,GACjCuvB,EAAkBN,EAAgBjC,EAASxlD,GAC3CioD,EAAiBR,EAAgBjvB,GACjCuvB,EAAkBN,EAAgBjC,EAASxlD,EAE/C,CAaA,SAAS8nD,EAAoBn+B,EAAO89B,EAAgBp+B,EAAOrpB,EAAQwlD,GACjE,IAAI0C,EAAU,GACdpyD,EAAOU,KAAKixD,GAAgB,SAAU99B,GACpC,IAAIqM,EAAIrM,EAAMxhB,OACV4W,EAAM,EACVjpB,EAAOU,KAAKmzB,GAAO,SAAUqG,GAC3BjR,GAAOiR,EAAKxyB,YAAYuE,KAC1B,IACA,IAAIomD,GAAMnoD,GAAUg2B,EAAI,GAAKwvB,GAAWzmC,EACxCmpC,EAAQlzD,KAAKmzD,EACf,IACAD,EAAQxoC,MAAK,SAAU+C,EAAGC,GACxB,OAAOD,EAAIC,CACb,IACA,IAAI0lC,EAAMF,EAAQ,GAClBpyD,EAAOU,KAAKixD,GAAgB,SAAU99B,GACpC7zB,EAAOU,KAAKmzB,GAAO,SAAUqG,EAAM/lB,GACjC+lB,EAAKyE,UAAU,CACbv0B,EAAG+J,IACF,GACH,IAAIo+C,EAASr4B,EAAKxyB,YAAYuE,MAAQqmD,EACtCp4B,EAAKyE,UAAU,CACbx6B,GAAIouD,IACH,EACL,GACF,IACAvyD,EAAOU,KAAK6yB,GAAO,SAAU6B,GAC3B,IAAIo9B,GAAUp9B,EAAKsJ,WAAa4zB,EAChCl9B,EAAKuJ,UAAU,CACbx6B,GAAIquD,IACH,EACL,GACF,CAWA,SAASP,EAAkBN,EAAgBjC,EAASxlD,GAClDlK,EAAOU,KAAKixD,GAAgB,SAAU99B,GACpC,IAAIqG,EACA/1B,EAGAgQ,EAFAm4B,EAAK,EACLpM,EAAIrM,EAAMxhB,OAId,IAFAwhB,EAAMjK,KAAK6oC,GAENt+C,EAAI,EAAGA,EAAI+rB,EAAG/rB,IAAK,CAItB,GAHA+lB,EAAOrG,EAAM1f,GACbhQ,EAAKmoC,EAAKpS,EAAKxyB,YAAY0C,EAEvBjG,EAAK,EAAG,CACV,IAAIuuD,EAAQx4B,EAAKxyB,YAAY0C,EAAIjG,EACjC+1B,EAAKyE,UAAU,CACbv0B,EAAGsoD,IACF,EACL,CAEApmB,EAAKpS,EAAKxyB,YAAY0C,EAAI8vB,EAAKxyB,YAAYvD,GAAKurD,CAClD,CAKA,GAFAvrD,EAAKmoC,EAAKojB,EAAUxlD,EAEhB/F,EAAK,EAAG,CACNuuD,EAAQx4B,EAAKxyB,YAAY0C,EAAIjG,EAMjC,IALA+1B,EAAKyE,UAAU,CACbv0B,EAAGsoD,IACF,GACHpmB,EAAKpS,EAAKxyB,YAAY0C,EAEjB+J,EAAI+rB,EAAI,EAAG/rB,GAAK,IAAKA,EACxB+lB,EAAOrG,EAAM1f,GACbhQ,EAAK+1B,EAAKxyB,YAAY0C,EAAI8vB,EAAKxyB,YAAYvD,GAAKurD,EAAUpjB,EAEtDnoC,EAAK,IACPuuD,EAAQx4B,EAAKxyB,YAAY0C,EAAIjG,EAC7B+1B,EAAKyE,UAAU,CACbv0B,EAAGsoD,IACF,IAGLpmB,EAAKpS,EAAKxyB,YAAY0C,CAE1B,CACF,GACF,CAUA,SAAS8nD,EAAiBP,EAAgBjvB,GACxC1iC,EAAOU,KAAKixD,EAAezwD,QAAQwQ,WAAW,SAAUmiB,GACtD7zB,EAAOU,KAAKmzB,GAAO,SAAUqG,GAC3B,GAAIA,EAAK82B,SAAS3+C,OAAQ,CACxB,IAAIjI,EAAI6e,EAAIiR,EAAK82B,SAAU2B,GAAkB1pC,EAAIiR,EAAK82B,SAAUC,GAC5DyB,EAAQx4B,EAAKxyB,YAAY0C,GAAKA,EAAI7G,EAAO22B,IAASwI,EACtDxI,EAAKyE,UAAU,CACbv0B,EAAGsoD,IACF,EACL,CACF,GACF,GACF,CAEA,SAASC,EAAev9B,GACtB,OAAO7xB,EAAO6xB,EAAKK,OAASL,EAAKsJ,UACnC,CAUA,SAASyzB,EAAiBR,EAAgBjvB,GACxC1iC,EAAOU,KAAKixD,GAAgB,SAAU99B,GACpC7zB,EAAOU,KAAKmzB,GAAO,SAAUqG,GAC3B,GAAIA,EAAKi3B,QAAQ9+C,OAAQ,CACvB,IAAIjI,EAAI6e,EAAIiR,EAAKi3B,QAASyB,GAAkB3pC,EAAIiR,EAAKi3B,QAASF,GAC1DyB,EAAQx4B,EAAKxyB,YAAY0C,GAAKA,EAAI7G,EAAO22B,IAASwI,EACtDxI,EAAKyE,UAAU,CACbv0B,EAAGsoD,IACF,EACL,CACF,GACF,GACF,CAEA,SAASE,EAAex9B,GACtB,OAAO7xB,EAAO6xB,EAAKG,OAASH,EAAKsJ,UACnC,CAQA,SAASoyB,EAAkBj9B,GACzB7zB,EAAOU,KAAKmzB,GAAO,SAAUqG,GAC3BA,EAAK82B,SAASpnC,KAAKipC,GACnB34B,EAAKi3B,QAAQvnC,KAAKkpC,EACpB,IACA9yD,EAAOU,KAAKmzB,GAAO,SAAUqG,GAC3B,IAAIm2B,EAAK,EACLvnB,EAAK,EACT9oC,EAAOU,KAAKw5B,EAAK82B,UAAU,SAAU57B,GACnCA,EAAKuJ,UAAU,CACb0xB,GAAIA,IACH,GACHA,GAAMj7B,EAAK1tB,YAAYvD,EACzB,IACAnE,EAAOU,KAAKw5B,EAAKi3B,SAAS,SAAU/7B,GAClCA,EAAKuJ,UAAU,CACbmK,GAAIA,IACH,GACHA,GAAM1T,EAAK1tB,YAAYvD,EACzB,GACF,GACF,CAEA,SAAS0uD,EAAqBlmC,EAAGC,GAC/B,OAAOD,EAAE8I,MAAM/tB,YAAY0C,EAAIwiB,EAAE6I,MAAM/tB,YAAY0C,CACrD,CAEA,SAAS0oD,EAAqBnmC,EAAGC,GAC/B,OAAOD,EAAE4I,MAAM7tB,YAAY0C,EAAIwiB,EAAE2I,MAAM7tB,YAAY0C,CACrD,CAEA,SAAS6e,EAAI8pC,EAAOC,GAClB,IAAI/pC,EAAM,EACNyD,EAAMqmC,EAAM1gD,OACZ8B,GAAK,EAET,QAASA,EAAIuY,EAAK,CAChB,IAAIzgB,GAAS+mD,EAAEn9C,KAAKk9C,EAAOA,EAAM5+C,GAAIA,GAEhCoI,MAAMtQ,KACTgd,GAAOhd,EAEX,CAEA,OAAOgd,CACT,CAEA,SAAS1lB,EAAO22B,GACd,OAAOA,EAAKxyB,YAAY0C,EAAI8vB,EAAKxyB,YAAYvD,GAAK,CACpD,CAEA,SAASsuD,EAAe9lC,EAAGC,GACzB,OAAOD,EAAEjlB,YAAY0C,EAAIwiB,EAAEllB,YAAY0C,CACzC,CAEA,SAASynD,EAAUllC,EAAGC,GACpB,OAAOD,EAAIC,GAAK,EAAID,EAAIC,EAAI,EAAID,IAAMC,EAAI,EAAItgB,GAChD,CAEA,SAAS2kD,EAAa77B,GACpB,OAAOA,EAAKsJ,UACd,CAEAp9B,EAAOvB,QAAUsB,C,wBC/YjB,IAAI4xD,EAAgBtzD,EAAQ,OAExBK,EAASL,EAAQ,OAMrB,SAAS0B,EAASd,EAAS0B,GACzB1B,EAAQ+E,iBAAiB,UAAU,SAAU/C,GAC3C,IAAIuyB,EAAQvyB,EAAYsyB,WACpBhB,EAAQiB,EAAMjB,MAClBA,EAAMjK,MAAK,SAAU+C,EAAGC,GACtB,OAAOD,EAAEjlB,YAAYuE,MAAQ2gB,EAAEllB,YAAYuE,KAC7C,IACA,IAAIinD,EAAWr/B,EAAM,GAAGnsB,YAAYuE,MAChCknD,EAAWt/B,EAAMA,EAAMxhB,OAAS,GAAG3K,YAAYuE,MACnDjM,EAAOU,KAAKmzB,GAAO,SAAUqG,GAC3B,IAAIk5B,EAAU,IAAIH,EAAc,CAC9BryD,KAAM,QACNyyD,cAAe,SACf7lC,WAAY,CAAC0lC,EAAUC,GACvBlvC,OAAQ1hB,EAAYnB,IAAI,WAEtBkyD,EAAkBF,EAAQG,iBAAiBr5B,EAAKxyB,YAAYuE,OAChEiuB,EAAK30B,UAAU,QAAS+tD,GAExB,IAAI/rD,EAAY2yB,EAAKrvB,WACjB2oD,EAAcjsD,EAAUnG,IAAI,0BAEb,MAAfoyD,GACFt5B,EAAK30B,UAAU,QAASiuD,EAE5B,GACF,GACF,CAEAlyD,EAAOvB,QAAUsB,C,wBCrCjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAErBA,EAAQ,OAERA,EAAQ,OAER,IAAImnB,EAAennB,EAAQ,OAEvBonB,EAAepnB,EAAQ,OAE3BA,EAAQ,OAGRiC,EAAQyD,eAAerF,EAAOoF,MAAM0hB,EAAc,UAAW,SAAU,OACvEllB,EAAQuD,eAAenF,EAAOoF,MAAM2hB,EAAc,W,wBChBlD,IAAIlb,EAAsBlM,EAAQ,OAE9BiM,EAAcjM,EAAQ,OAEtB0B,EAAWuK,EAAYnG,OAAO,CAChC7E,KAAM,iBACN8E,aAAc,CAAC,OAAQ,QAAS,MAAO,aAAc,YACrDoG,eAAgB,SAAUC,EAAQxL,GAChC,OAAOsL,EAAoBE,EAAOjN,KAAMZ,KAAMqC,EAChD,EACAoF,cAAe,QACf4G,cAAe,CACbnJ,iBAAkB,cAClBoJ,OAAQ,EACRC,EAAG,EACHC,iBAAiB,EACjBkB,gBAAgB,EAShBZ,WAAY,GAGZk1C,OAAO,EAEPC,eAAgB,IAYhBt1C,UAAW,CACToL,OAAQ,CACNtN,QAAS,QAOjBrJ,EAAOvB,QAAUsB,C,wBCnDjB,IAAIO,EAAUjC,EAAQ,OAElB0nB,EAAa1nB,EAAQ,OAErB4sC,EAAkB5sC,EAAQ,OAE9BiC,EAAQwE,gBAAgB,CACtBxF,KAAM,UACN2mB,KAAM,WACJrpB,KAAKu1D,kBAAoB,IAAIpsC,EAC7BnpB,KAAKw1D,iBAAmB,IAAInnB,CAC9B,EACAvuC,OAAQ,SAAUuE,EAAahC,EAASC,GACtC,IAAI1B,EAAOyD,EAAYG,UACnBixD,EAAkBz1D,KAAKw1D,iBACvBE,EAAmB11D,KAAKu1D,kBACxBltD,EAAQrI,KAAKqI,MACb0xB,EAAa11B,EAAYnB,IAAI,UAAYtC,EAAKoW,QAAU3S,EAAYnB,IAAI,kBAAoBuyD,EAAkBC,EAClH11D,KAAKspB,YAAcyQ,EACnBA,EAAWvQ,WAAW5oB,GACtByH,EAAMc,IAAI4wB,EAAW1xB,OACrBA,EAAM6B,OAAO6vB,IAAe07B,EAAkBC,EAAiBrtD,MAAQotD,EAAgBptD,MACzF,EACAohB,aAAc,SAAUplB,GACtBrE,KAAKspB,YAAYG,aAAaplB,EAChC,EACA6F,OAAQ,SAAU7H,EAASC,GACzBtC,KAAKspB,aAAetpB,KAAKspB,YAAYpf,OAAO5H,GAAK,EACnD,EACAgG,QAAS,WAAa,G,wBC7BxB,IAAI5E,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAErBA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAER,IAAIk0D,EAAmBl0D,EAAQ,OAE3Bm0D,EAAmBn0D,EAAQ,OAE3BmoB,EAAanoB,EAAQ,OAEzBiC,EAAQuD,eAAe0uD,GACvBjyD,EAAQyD,eAAeyuD,GACvBlyD,EAAQmmB,kBAAkB/nB,EAAOoF,MAAM0iB,EAAY,c,iCClBnD,IAAIK,EAAqBxoB,EAAQ,OAE7BiM,EAAcjM,EAAQ,OAEtBqoB,EAAOroB,EAAQ,OAEfK,EAASL,EAAQ,OAEjBszB,EAAUtzB,EAAQ,OAElBuzB,EAAaD,EAAQC,WAErBo9B,EAAO3wD,EAAQ,OAMfo0D,EAAkB,EAClBC,EAAmBpoD,EAAYnG,OAAO,CACxC7E,KAAM,oBACN8E,aAAc,CAAC,cAMf4+C,QAAS,KAKT/8B,KAAM,SAAUxb,GACdioD,EAAiBlmD,WAAW5P,KAAM,OAAQ6P,WAI1C7P,KAAKmqB,mBAAqB,WACxB,OAAOnqB,KAAKoqB,YACd,CACF,EAQA2rC,QAAS,SAAUn1D,GAiBjB,IAhBA,IAAIo1D,EAAgBp1D,EAAKuT,OAErB8hD,EAAa7D,IAAOzwD,KAAI,SAAUgiD,GACpC,OAAOA,EAAS,EAClB,IAAGiQ,QAAQhzD,GAEPs1D,EAAUp0D,EAAO41B,IAAIu+B,GAAY,SAAUx3B,GAC7C,MAAO,CACLj7B,KAAMi7B,EAAE98B,IACRw0D,SAAU13B,EAAEo1B,OAEhB,IACIuC,EAAWF,EAAQ/hD,OACnBkiD,GAAgB,EAChB/lD,GAAS,EAEJ2F,EAAI,EAAGA,EAAImgD,IAAYngD,EAAG,CACjC,IAAIuY,EAAM0nC,EAAQjgD,GAAGkgD,SAAShiD,OAE1Bqa,EAAM6nC,IACRA,EAAe7nC,EACfle,EAAQ2F,EAEZ,CAEA,IAAK,IAAIosC,EAAI,EAAGA,EAAI+T,IAAY/T,EAC9B,GAAIA,IAAM/xC,EAMV,IAFA,IAAI9M,EAAO0yD,EAAQ7T,GAAG7+C,KAEb8vB,EAAI,EAAGA,EAAI+iC,IAAgB/iC,EAAG,CAKrC,IAJA,IAAIgjC,EAAYJ,EAAQ5lD,GAAO6lD,SAAS7iC,GAAG,GACvCnf,EAAS+hD,EAAQ7T,GAAG8T,SAAShiD,OAC7BoiD,GAAY,EAEPlzB,EAAI,EAAGA,EAAIlvB,IAAUkvB,EAAG,CAC/B,IAAIt1B,EAAQmoD,EAAQ7T,GAAG8T,SAAS9yB,GAAG,GAEnC,GAAIt1B,IAAUuoD,EAAW,CACvBC,EAAWlzB,EACX,KACF,CACF,EAEkB,IAAdkzB,IACF31D,EAAKo1D,GAAiB,GACtBp1D,EAAKo1D,GAAe,GAAKM,EACzB11D,EAAKo1D,GAAe,GAAK,EACzBp1D,EAAKo1D,GAAe,GAAKxyD,EACzBwyD,IAEJ,CAGF,OAAOp1D,CACT,EAQAgN,eAAgB,SAAUC,EAAQxL,GAChC,IAAIwX,EAAa,GACbg+B,EAAkBx1C,EAAQg1C,gBAAgB,CAC5CnzC,SAAU,aACVoM,MAAOtQ,KAAKkD,IAAI,mBAChBmjB,GAAIrmB,KAAKkD,IAAI,kBACZ,GACCg0C,EAAWW,EAAgB30C,IAAI,QACnC2W,EAAa,CAAC,CACZrW,KAAM,OAENd,KAAmB,aAAbw0C,EAA0B,UAAyB,SAAbA,EAAsB,OAAS,SAC1E,CACD1zC,KAAM,QACNd,KAAM,SACL,CACDc,KAAM,OACNd,KAAM,YAWR,IARA,IAAI8zD,EAAa10D,EAAOywD,OAAO1kD,EAAOjN,MAAM,SAAU+iD,GACpD,YAAuB8S,IAAhB9S,EAAS,EAClB,IACI/iD,EAAOZ,KAAK+1D,QAAQS,GAAc,IAClC9f,EAAW,GACX0P,EAAUpmD,KAAKomD,QAAUtkD,EAAO40D,gBAChC1/C,EAAQ,EAEHf,EAAI,EAAGA,EAAIrV,EAAKuT,SAAU8B,EACjCygC,EAAS11C,KAAKJ,EAAKqV,GAAG4/C,IAEjBzP,EAAQljD,IAAItC,EAAKqV,GAAG4/C,MACvBzP,EAAQ/qC,IAAIza,EAAKqV,GAAG4/C,GAAkB7+C,GACtCA,KAIJ6C,EAAaoQ,EAAmBpQ,EAAYjZ,GAC5C,IAAI+B,EAAO,IAAImnB,EAAKjQ,EAAY7Z,MAEhC,OADA2C,EAAK2nB,SAAS1pB,EAAM81C,GACb/zC,CACT,EAQA2kC,kBAAmB,SAAUqvB,GAC3B,MAAO,CAAC,OACV,EAQAC,eAAgB,WAKd,IAJA,IAAIh2D,EAAOZ,KAAKwE,UACZqyD,EAAWj2D,EAAKoW,QAChB8/C,EAAW,GAEN7gD,EAAI,EAAGA,EAAI4gD,IAAY5gD,EAC9B6gD,EAAS7gD,GAAKA,EAchB,IAVA,IAAIggD,EAAa7D,IAAOzwD,KAAI,SAAU2O,GACpC,OAAO1P,EAAKsC,IAAI,OAAQoN,EAC1B,IAAGsjD,QAAQkD,GACPC,EAAcj1D,EAAO41B,IAAIu+B,GAAY,SAAUx3B,GACjD,MAAO,CACLj7B,KAAMi7B,EAAE98B,IACR2sB,QAASmQ,EAAEo1B,OAEf,IAESvgC,EAAI,EAAGA,EAAIyjC,EAAY5iD,SAAUmf,EACxCyjC,EAAYzjC,GAAGhF,QAAQ5C,KAAKsrC,GAG9B,SAASA,EAASC,EAAQC,GACxB,OAAOt2D,EAAKsC,IAAI,OAAQ+zD,GAAUr2D,EAAKsC,IAAI,OAAQg0D,EACrD,CAEA,OAAOH,CACT,EAWAI,mBAAoB,SAAUpuD,EAAKgF,EAAOnF,GACnC9G,EAAO6Q,QAAQ5J,KAClBA,EAAMA,EAAM,CAACA,GAAO,IAStB,IANA,IAIIquD,EAJAx2D,EAAOZ,KAAKwE,UACZuyD,EAAc/2D,KAAK42D,iBACnBtoC,EAAU,GACV8nC,EAAWW,EAAY5iD,OAGlB8B,EAAI,EAAGA,EAAImgD,IAAYngD,EAAG,CAKjC,IAJA,IAAIohD,EAAUpJ,OAAOC,UACjBoJ,GAAc,EACdC,EAAWR,EAAY9gD,GAAGqY,QAAQna,OAE7Bmf,EAAI,EAAGA,EAAIikC,IAAYjkC,EAAG,CACjC,IAAIkkC,EAAW52D,EAAKsC,IAAI6F,EAAI,GAAIguD,EAAY9gD,GAAGqY,QAAQgF,IACnDgX,EAAO9jC,KAAKiH,IAAI+pD,EAAWzpD,GAE3Bu8B,GAAQ+sB,IACVD,EAAeI,EACfH,EAAU/sB,EACVgtB,EAAaP,EAAY9gD,GAAGqY,QAAQgF,GAExC,CAEAhF,EAAQttB,KAAKs2D,EACf,CAEA,MAAO,CACLG,YAAanpC,EACb8oC,aAAcA,EAElB,EAMArgC,cAAe,SAAUxyB,GACvB,IAAI3D,EAAOZ,KAAKwE,UACZkzD,EAAW92D,EAAKsC,IAAI,OAAQqB,GAC5BozD,EAAY/2D,EAAKsC,IAAI,QAASqB,GAMlC,OAJI8Z,MAAMs5C,IAA2B,MAAbA,KACtBA,EAAY,KAGP3iC,EAAW0iC,EAAW,MAAQC,EACvC,EACAtpD,cAAe,CACbC,OAAQ,EACRC,EAAG,EACHrJ,iBAAkB,aAElB0yD,YAAa,CAAC,MAAO,OAErBC,gBAAiB,EACjBv9C,gBAAiB,SACjBqQ,MAAO,CACL5Q,OAAQ,CACN+9C,OAAQ,EACRvqC,UAAW,QACX7C,MAAM,EACNhkB,SAAU,OACV6F,MAAO,OACPqkB,SAAU,IAEZ3W,SAAU,CACRyQ,MAAM,OAKVvnB,EAAW2yD,EACf1yD,EAAOvB,QAAUsB,C,iCCjSjB,IAAIO,EAAUjC,EAAQ,OAElB+4C,EAAQ/4C,EAAQ,MAEhBuqB,EAAUwuB,EAAMxuB,QAEhBpkB,EAAUnG,EAAQ,OAElBs2D,EAAQt2D,EAAQ,OAEhBgC,EAAOs0D,EAAMt0D,KACb8D,EAASwwD,EAAMxwD,OAEf8a,EAAa5gB,EAAQ,OAMrB0B,EAAWO,EAAQwE,gBAAgB,CACrCxF,KAAM,aACN2mB,KAAM,WACJrpB,KAAKg4D,QAAU,EACjB,EACAl4D,OAAQ,SAAUuE,EAAahC,EAASC,GACtC,IAAI1B,EAAOyD,EAAYG,UACnB6D,EAAQrI,KAAKqI,MACb0uD,EAAc1yD,EAAYuyD,iBAC1BvF,EAAazwD,EAAK4I,UAAU,cAC5BkB,EAAO2mD,EAAW3mD,KAClBktD,EAAcvG,EAAWuG,YAG7B,SAASK,EAAU3vC,GACjB,OAAOA,EAAK9kB,IACd,CAJA6E,EAAM+E,KAAK,WAAY,CAAC,EAAG1C,EAAKwB,EAAI0rD,EAAY,KAMhD,IAAIM,EAAa,IAAI71C,EAAWriB,KAAKm4D,eAAiB,GAAIpB,EAAakB,EAAWA,GAC9EG,EAAkB,CAAC,EAGvB,SAASC,EAAQzY,EAAQn7C,EAAKkkB,GAC5B,IAAI2vC,EAAkBt4D,KAAKg4D,QAE3B,GAAe,WAAXpY,EAAJ,CAUA,IALA,IAEIrzC,EAaAwf,EACAzgB,EAhBAitD,EAAU,GACV7d,EAAU,GAEVpsB,EAAUyoC,EAAYtyD,GAAK6pB,QAEtBgF,EAAI,EAAGA,EAAIhF,EAAQna,OAAQmf,IAAK,CACvC,IAAI/pB,EAAS3I,EAAK+K,cAAc2iB,EAAQgF,IACpCrnB,EAAI1C,EAAO0C,EACXmiC,EAAK7kC,EAAO6kC,GACZliC,EAAI3C,EAAO2C,EACfqsD,EAAQv3D,KAAK,CAACiL,EAAGmiC,IACjBsM,EAAQ15C,KAAK,CAACiL,EAAGmiC,EAAKliC,IACtBK,EAAQ3L,EAAK4L,cAAc8hB,EAAQgF,GAAI,QACzC,CAIA,IAAIklC,EAAa53D,EAAK+K,cAAc2iB,EAAQ,IACxCjlB,EAAYzI,EAAK0I,aAAaglB,EAAQgF,EAAI,IAC1C1a,EAAavP,EAAUsD,SAAS,gBAChCmrD,EAASl/C,EAAW1V,IAAI,UAE5B,GAAe,QAAX08C,EAAkB,CACpB,IAAI6Y,EAAaL,EAAgB3zD,GAAO,IAAImD,EAAQwP,MACpD2U,EAAU,IAAIC,EAAQ,CACpB/hB,MAAO,CACL0iB,OAAQ4rC,EACRja,gBAAiB5D,EACjBX,OAAQ,GACRgF,gBAAiB,GACjB8D,kBAAkB,GAEpBzwC,GAAI,IAEN9G,EAAO,IAAI1D,EAAQgc,KAAK,CACtBvY,MAAO,CACLY,EAAGusD,EAAWvsD,EAAI6rD,EAClB5rD,EAAGssD,EAAWpqB,GAAKoqB,EAAWtsD,EAAI,KAGtCusD,EAAWtvD,IAAI4iB,GACf0sC,EAAWtvD,IAAImC,GACfjD,EAAMc,IAAIsvD,GACV1sC,EAAQjV,YAAY2kC,EAAoB1vB,EAAQ4Q,kBAAmBt4B,GAAa,WAC9E0nB,EAAQm/B,gBACV,IACF,KAAO,CACDuN,EAAaH,EAAgB3vC,GACjCoD,EAAU0sC,EAAWt9C,QAAQ,GAC7B7P,EAAOmtD,EAAWt9C,QAAQ,GAC1B9S,EAAMc,IAAIsvD,GACVL,EAAgB3zD,GAAOg0D,EACvB7wD,EAAQoC,YAAY+hB,EAAS,CAC3B9hB,MAAO,CACL0iB,OAAQ4rC,EACRja,gBAAiB5D,IAElBr2C,GACHuD,EAAQoC,YAAYsB,EAAM,CACxBD,MAAO,CACLY,EAAGusD,EAAWvsD,EAAI6rD,EAClB5rD,EAAGssD,EAAWpqB,GAAKoqB,EAAWtsD,EAAI,IAEnC7H,EACL,CAEA,IAAIq0D,EAAsBrvD,EAAUsD,SAAS,sBACzCD,EAAiBrD,EAAUsD,SAAS,oBACxC/E,EAAQof,aAAa1b,EAAKD,MAAOuN,EAAY,CAC3CtN,KAAMsN,EAAW1V,IAAI,QAAUmB,EAAY4iB,kBAAkBqH,EAAQgF,EAAI,GAAI,WAAa1yB,EAAK8D,QAAQ4pB,EAAQgF,EAAI,IAAM,KACzH9F,kBAAmB,WAErBzB,EAAQ7W,SAAS3N,EAAO,CACtB0F,KAAMV,GACLG,EAAeqL,aAAa,CAAC,YAChCnQ,EAAQ0F,cAAcye,EAAS2sC,EAAoB3gD,eA7EnD,MAFE1P,EAAM6B,OAAOouD,EAAgB7zD,GAgFjC,CAtFAyzD,EAAW/uD,IAAI1F,EAAK40D,EAASr4D,KAAM,QAAQ6C,OAAOY,EAAK40D,EAASr4D,KAAM,WAAWkK,OAAOzG,EAAK40D,EAASr4D,KAAM,WAAWqK,UAwFvHrK,KAAKm4D,cAAgBpB,EACrB/2D,KAAKg4D,QAAUI,CACjB,EACA9vD,QAAS,WAAa,IAIxB,SAASmzC,EAAoB/wC,EAAMrG,EAAamT,GAC9C,IAAI+zC,EAAS,IAAI3jD,EAAQ+C,KAAK,CAC5BV,MAAO,CACLgC,EAAGvB,EAAKuB,EAAI,GACZC,EAAGxB,EAAKwB,EAAI,GACZX,MAAO,EACPS,OAAQtB,EAAKsB,OAAS,MAS1B,OANApE,EAAQmd,UAAUwmC,EAAQ,CACxBthD,MAAO,CACLsB,MAAOb,EAAKa,MAAQ,GACpBS,OAAQtB,EAAKsB,OAAS,KAEvB3H,EAAamT,GACT+zC,CACT,CAEAnoD,EAAOvB,QAAUsB,C,iCCxJjB,IAAIrB,EAASL,EAAQ,OAEjBk3D,EAAal3D,EAAQ,OAMzB,SAAS0B,EAASd,EAASC,GACzBD,EAAQ+E,iBAAiB,cAAc,SAAU/C,GAC/C,IAAIzD,EAAOyD,EAAYG,UACnBwzC,EAAS3zC,EAAYa,iBACrBmsD,EAAa,CAAC,EAEd3mD,EAAOstC,EAAOlnC,UAClBugD,EAAW3mD,KAAOA,EAClB,IAAIktD,EAAcvzD,EAAYnB,IAAI,eAC9BuQ,EAAOukC,EAAOjR,UAGlB,GAFAsqB,EAAWuG,YAAcA,EAEL,eAAhBnkD,EAAKmlD,OAAyB,CAChChB,EAAY,GAAKe,EAAW1oD,aAAa2nD,EAAY,GAAIltD,EAAKsB,QAC9D4rD,EAAY,GAAKe,EAAW1oD,aAAa2nD,EAAY,GAAIltD,EAAKsB,QAC9D,IAAIA,EAAStB,EAAKsB,OAAS4rD,EAAY,GAAKA,EAAY,GACxDjC,EAAiB/0D,EAAMyD,EAAa2H,EACtC,KAAO,CACL4rD,EAAY,GAAKe,EAAW1oD,aAAa2nD,EAAY,GAAIltD,EAAKa,OAC9DqsD,EAAY,GAAKe,EAAW1oD,aAAa2nD,EAAY,GAAIltD,EAAKa,OAC9D,IAAIA,EAAQb,EAAKa,MAAQqsD,EAAY,GAAKA,EAAY,GACtDjC,EAAiB/0D,EAAMyD,EAAakH,EACtC,CAEA3K,EAAK6/B,UAAU,aAAc4wB,EAC/B,GACF,CAUA,SAASsE,EAAiB/0D,EAAMyD,EAAa2H,GAC3C,GAAKpL,EAAKoW,QAuBV,IAnBA,IAiBI6hD,EAjBA/1D,EAAWuB,EAAYa,iBAEvB6xD,EAAc1yD,EAAYuyD,iBAE1BkC,EAAch3D,EAAO41B,IAAIq/B,GAAa,SAAUgC,GAClD,OAAOj3D,EAAO41B,IAAIqhC,EAAYzqC,SAAS,SAAU7pB,GAC/C,IAAIuJ,EAAKlL,EAASiD,YAAYnF,EAAKsC,IAAI,OAAQuB,IAE/C,OADAuJ,EAAG,GAAKpN,EAAKsC,IAAI,QAASuB,GACnBuJ,CACT,GACF,IACI8O,EAAOk8C,EAAgBF,GACvBG,EAAWn8C,EAAKsxB,GAChB+lB,EAAKnoD,EAAS8Q,EAAKxW,IAEnB07B,EAAI+0B,EAAY5iD,OAChB+kD,EAAInC,EAAY,GAAGzoC,QAAQna,OAGtBmf,EAAI,EAAGA,EAAI4lC,IAAK5lC,EAAG,CAC1BulC,EAASI,EAAS3lC,GAAK6gC,EACvBvzD,EAAKge,cAAcm4C,EAAY,GAAGzoC,QAAQgF,GAAI,CAC5C6lC,WAAY,EACZltD,EAAG6sD,EAAY,GAAGxlC,GAAG,GACrB8a,GAAIyqB,EACJ3sD,EAAG4sD,EAAY,GAAGxlC,GAAG,GAAK6gC,IAG5B,IAAK,IAAIl+C,EAAI,EAAGA,EAAI+rB,IAAK/rB,EACvB4iD,GAAUC,EAAY7iD,EAAI,GAAGqd,GAAG,GAAK6gC,EACrCvzD,EAAKge,cAAcm4C,EAAY9gD,GAAGqY,QAAQgF,GAAI,CAC5C6lC,WAAYljD,EACZhK,EAAG6sD,EAAY7iD,GAAGqd,GAAG,GACrB8a,GAAIyqB,EACJ3sD,EAAG4sD,EAAY7iD,GAAGqd,GAAG,GAAK6gC,GAGhC,CACF,CAUA,SAAS6E,EAAgBp4D,GASvB,IARA,IAAIw1D,EAAWx1D,EAAKuT,OAChBojD,EAAW32D,EAAK,GAAGuT,OACnBilD,EAAO,GACPhrB,EAAK,GACL9nC,EAAM,EAENwW,EAAO,CAAC,EAEH7G,EAAI,EAAGA,EAAIshD,IAAYthD,EAAG,CACjC,IAAK,IAAIqd,EAAI,EAAG+lC,EAAO,EAAG/lC,EAAI8iC,IAAY9iC,EACxC+lC,GAAQz4D,EAAK0yB,GAAGrd,GAAG,GAGjBojD,EAAO/yD,IACTA,EAAM+yD,GAGRD,EAAKp4D,KAAKq4D,EACZ,CAEA,IAAK,IAAIhX,EAAI,EAAGA,EAAIkV,IAAYlV,EAC9BjU,EAAGiU,IAAM/7C,EAAM8yD,EAAK/W,IAAM,EAG5B/7C,EAAM,EAEN,IAAK,IAAI+8B,EAAI,EAAGA,EAAIk0B,IAAYl0B,EAAG,CACjC,IAAItY,EAAMquC,EAAK/1B,GAAK+K,EAAG/K,GAEnBtY,EAAMzkB,IACRA,EAAMykB,EAEV,CAIA,OAFAjO,EAAKsxB,GAAKA,EACVtxB,EAAKxW,IAAMA,EACJwW,CACT,CAEA1Z,EAAOvB,QAAUsB,C,wBCzIjB,IAAI40D,EAAQt2D,EAAQ,OAEhBi1D,EAAgBqB,EAAMrB,cAM1B,SAASvzD,EAASd,GAChBA,EAAQ+E,iBAAiB,cAAc,SAAU/C,GAC/C,IAAIzD,EAAOyD,EAAYG,UACnB+kD,EAAUllD,EAAY+lB,aACtBmH,EAAYltB,EAAYnB,IAAI,SAC5Bo2D,EAAS5C,IACb91D,EAAK4B,MAAK,SAAUiC,GAClB60D,EAAOj+C,IAAIza,EAAKgmB,YAAYniB,GAAMA,EACpC,IACA8kD,EAAQ/mD,MAAK,SAAU2+C,GACrB,IAAI39C,EAAO+lD,EAAQ7kD,QAAQy8C,GACvB50C,EAAQglB,GAAWltB,EAAY+hD,QAAQljD,IAAIM,GAAQ,GAAK+tB,EAAUpd,QACtEo1C,EAAQlqC,cAAc8hC,EAAU,QAAS50C,GACzC,IAAI9H,EAAM60D,EAAOp2D,IAAIi+C,GAEV,MAAP18C,GACF7D,EAAKye,cAAc5a,EAAK,QAAS8H,EAErC,GACF,GACF,CAEAnJ,EAAOvB,QAAUsB,C,wBC9BjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAErBA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAER,IAAImnB,EAAennB,EAAQ,OAEvB83D,EAAmB93D,EAAQ,OAE3B+3D,EAAe/3D,EAAQ,OAE3BiC,EAAQyD,eAAerF,EAAOoF,MAAM0hB,EAAc,OAAQ,SAAU,OACpEllB,EAAQuD,eAAesyD,GACvB71D,EAAQuD,eAAeuyD,E,wBClBvB,IAAI9rD,EAAcjM,EAAQ,OAEtBg4D,EAAOh4D,EAAQ,OAEfszB,EAAUtzB,EAAQ,OAElBuzB,EAAaD,EAAQC,WAKrB7xB,EAAWuK,EAAYnG,OAAO,CAChC7E,KAAM,cACN2uD,WAAY,KAGZ3L,WAAY,MAOZ93C,eAAgB,SAAUC,GAExB,IAAI6rD,EAAO,CACTl2D,KAAMqK,EAAOrK,KACbkU,SAAU7J,EAAOjN,MAEf+4D,EAAS9rD,EAAO8rD,QAAU,CAAC,EAC3BC,EAAa,CAAC,EAClBA,EAAWD,OAASA,EACpB,IAAIE,EAAOJ,EAAKK,WAAWJ,EAAM15D,KAAM45D,GACnCG,EAAY,EAChBF,EAAK39B,SAAS,YAAY,SAAUF,GAC9BA,EAAKg+B,MAAQD,IACfA,EAAY/9B,EAAKg+B,MAErB,IACA,IAAIC,EAAoBpsD,EAAOosD,kBAC3BC,EAAkBD,GAAqBpsD,EAAOssD,kBAAoB,EAAItsD,EAAOssD,iBAAmBJ,EAKpG,OAJAF,EAAKH,KAAKx9B,SAAS,YAAY,SAAUF,GACvC,IAAI1T,EAAO0T,EAAKo+B,SAASx5D,KAAKy5D,eAAer+B,EAAKz3B,WAClDy3B,EAAKs+B,SAAWhyC,GAA0B,MAAlBA,EAAKiyC,WAAqBjyC,EAAKiyC,UAAYv+B,EAAKg+B,OAASE,CACnF,IACOL,EAAKj5D,IACd,EAMAm2B,cAAe,SAAUxyB,GACvB,IAAIs1D,EAAO75D,KAAKwE,UAAUq1D,KACtBW,EAAWX,EAAKH,KAAKhiD,SAAS,GAC9BskB,EAAO69B,EAAKY,mBAAmBl2D,GAC/BwJ,EAAQiuB,EAAKwE,WACbh9B,EAAOw4B,EAAKx4B,KAEhB,MAAOw4B,GAAQA,IAASw+B,EACtBh3D,EAAOw4B,EAAKwT,WAAWhsC,KAAO,IAAMA,EACpCw4B,EAAOA,EAAKwT,WAGd,OAAOxa,EAAWxxB,GAAQ6a,MAAMtQ,IAAmB,MAATA,EAAgB,GAAK,MAAQA,GACzE,EACAM,cAAe,CACbC,OAAQ,EACRC,EAAG,EAEH6c,KAAM,MACNC,IAAK,MACLC,MAAO,MACPC,OAAQ,MAERhiB,OAAQ,aAERqvD,OAAQ,aACR/pD,OAAQ,cACRC,WAAY,EACZmrD,mBAAmB,EACnBE,iBAAkB,EAClBtuC,UAAW,CACT9R,OAAQ,CACNxN,MAAO,OACPhB,MAAO,IACPqtB,UAAW,KAGfjqB,UAAW,CACToL,OAAQ,CACNxN,MAAO,iBACP0O,YAAa,UACbjB,YAAa,MAGjB2Q,MAAO,CACL5Q,OAAQ,CACN2Q,MAAM,EACNne,MAAO,SAGXotD,OAAQ,CACNhvC,MAAO,CACL5Q,OAAQ,CACN2Q,MAAM,KAIZpQ,gBAAiB,SACjBC,kBAAmB,IACnBmgD,wBAAyB,OAI7Bt3D,EAAOvB,QAAUsB,C,wBCnHjB,IAAIrB,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElBgqC,EAAYhqC,EAAQ,MAEpBk5D,EAAgBl5D,EAAQ,OAExBm5D,EAAmBD,EAAcC,iBAEjCl3D,EAAUjC,EAAQ,OAKlB0B,EAAWO,EAAQwE,gBAAgB,CACrCxF,KAAM,OAQN2mB,KAAM,SAAUhnB,EAASC,GAKvBtC,KAAK66D,SAML76D,KAAK86D,WAAa,IAAIlzD,EAAQwP,MAC9BpX,KAAKqI,MAAMc,IAAInJ,KAAK86D,WACtB,EACAh7D,OAAQ,SAAUuE,EAAahC,EAASC,EAAKyB,GAC3C,IAAInD,EAAOyD,EAAYG,UACnB6sD,EAAahtD,EAAYgtD,WACzBhpD,EAAQrI,KAAK86D,WACbvxD,EAASlF,EAAYnB,IAAI,UAEd,WAAXqG,EACFlB,EAAM+E,KAAK,WAAY,CAACikD,EAAWplD,EAAIolD,EAAW9lD,MAAQ,EAAG8lD,EAAWnlD,EAAImlD,EAAWrlD,OAAS,IAEhG3D,EAAM+E,KAAK,WAAY,CAACikD,EAAWplD,EAAGolD,EAAWnlD,IAGnD,IAAIzD,EAAUzI,KAAK0I,MACfogC,EAAc,CAChBmxB,kBAAmB51D,EAAYnB,IAAI,qBACnCqG,OAAQA,EACRqvD,OAAQv0D,EAAYnB,IAAI,UACxB6uD,UAAW1tD,EAAYnB,IAAI,8BAC3B6L,aAAc1K,EAAYnB,IAAI,gBAC9B+L,aAAc5K,EAAYnB,IAAI,gBAC9BwM,eAAgBrL,EAAYnB,IAAI,kBAChCkwC,cAAc,EACdP,QAAQ,GAEVjyC,EAAKsI,KAAKT,GAASU,KAAI,SAAUuf,GAC3BgrB,EAAgB9yC,EAAM8nB,IAExBqyC,EAAWn6D,EAAM8nB,EAAQ,KAAMrgB,EAAOhE,EAAaykC,EAEvD,IAAGjmC,QAAO,SAAU6lB,EAAQC,GAC1B,IAAI6lB,EAAW/lC,EAAQsB,iBAAiB4e,GAEnC+qB,EAAgB9yC,EAAM8nB,GAM3BqyC,EAAWn6D,EAAM8nB,EAAQ8lB,EAAUnmC,EAAOhE,EAAaykC,GALrD0F,GAAYwsB,EAAWp6D,EAAM8nB,EAAQ8lB,EAAUnmC,EAAOhE,EAAaykC,EAMvE,IAAG5+B,QAAO,SAAUye,GAClB,IAAI6lB,EAAW/lC,EAAQsB,iBAAiB4e,GACxCqyC,EAAWp6D,EAAM+nB,EAAQ6lB,EAAUnmC,EAAOhE,EAAaykC,EACzD,IAAGz+B,WAEmC,IAAlCy+B,EAAYmxB,mBACdr5D,EAAK0J,mBAAkB,SAAUb,EAAIlF,GACnCkF,EAAGyN,IAAI,SAAS5W,GAAG,SAAS,WAC1BgC,EAAI84B,eAAe,CACjB14B,KAAM,wBACN0jB,SAAU/hB,EAAYgiB,GACtB9hB,UAAWA,GAEf,GACF,IAGFvE,KAAK0I,MAAQ9H,CACf,EACA0H,QAAS,WAAa,EACtB4B,OAAQ,WACNlK,KAAK86D,WAAWvwD,YAEhBvK,KAAK0I,MAAQ,IACf,IAGF,SAASgrC,EAAgB9yC,EAAM2D,GAC7B,IAAIgF,EAAS3I,EAAK+K,cAAcpH,GAChC,OAAOgF,IAAW8U,MAAM9U,EAAO0C,KAAOoS,MAAM9U,EAAO2C,IAAkD,SAA5CtL,EAAK4L,cAAcjI,EAAW,SACzF,CAEA,SAAS02D,EAAiBj/B,EAAM3yB,EAAWy/B,GAczC,OAbAA,EAAYz/B,UAAYA,EACxBy/B,EAAYn6B,UAAYtF,EAAUsD,SAAS,oBAAoBoL,eAC/D+wB,EAAYmK,eAAiB5pC,EAAUsD,SAAS,sBAAsBoL,eACtE+wB,EAAYjd,UAAYxiB,EAAUsD,SAAS,oBAAoB+gB,eAC/Dob,EAAYlwB,WAAavP,EAAUsD,SAAS,gBAC5Cm8B,EAAYjwB,gBAAkBxP,EAAUsD,SAAS,mBAE3B,IAAlBqvB,EAAKs+B,UAA+C,IAAzBt+B,EAAKtkB,SAASvD,OAC3C20B,EAAYqK,iBAAmBrK,EAAYn6B,UAAU1B,KAErD67B,EAAYqK,iBAAmB,OAG1BrK,CACT,CAEA,SAASiyB,EAAWn6D,EAAM2D,EAAWiqC,EAAUnmC,EAAOhE,EAAaykC,GACjE,IAAI1kB,GAAUoqB,EACVxS,EAAOp7B,EAAKi5D,KAAKY,mBAAmBl2D,GACpC8E,EAAY2yB,EAAKrvB,WAEjBuuD,GADApyB,EAAcmyB,EAAiBj/B,EAAM3yB,EAAWy/B,GAClCloC,EAAKi5D,KAAKH,MACxBxkB,EAASlZ,EAAKwT,aAAe0rB,EAAcl/B,EAAOA,EAAKwT,YAAcxT,EACrEm/B,EAAiBv6D,EAAKmJ,iBAAiBmrC,EAAO3wC,WAC9C62D,EAAelmB,EAAO1rC,YACtB6xD,EAAkBF,EAAiB,CACrClvD,EAAGkvD,EAAez0D,SAAS,GAC3BwF,EAAGivD,EAAez0D,SAAS,GAC3B40D,KAAMH,EAAeI,gBACrBC,KAAML,EAAeM,iBACnBL,EACAM,EAAe1/B,EAAKxyB,YAEpB4a,GACFoqB,EAAW,IAAI/C,EAAU7qC,EAAM2D,EAAWukC,GAC1C0F,EAASphC,KAAK,WAAY,CAACiuD,EAAgBpvD,EAAGovD,EAAgBnvD,KAE9DsiC,EAAShlB,WAAW5oB,EAAM2D,EAAWukC,GAGvC0F,EAAS+sB,gBAAkB/sB,EAASmtB,aACpCntB,EAASitB,gBAAkBjtB,EAASotB,aACpCptB,EAASmtB,aAAeD,EAAaJ,KACrC9sB,EAASotB,aAAeF,EAAaF,KACrCnzD,EAAMc,IAAIqlC,GACV5tC,EAAK+I,iBAAiBpF,EAAWiqC,GACjC5mC,EAAQoC,YAAYwkC,EAAU,CAC5B9nC,SAAU,CAACg1D,EAAazvD,EAAGyvD,EAAaxvD,IACvC7H,GACH,IAAIm3B,EAAagT,EAAS/S,gBAE1B,GAA2B,WAAvBqN,EAAYv/B,OAAqB,CACnC,IAGIoyB,EACAE,EAJA2+B,EAAWU,EAAYxjD,SAAS,GAChCmkD,EAAarB,EAAShxD,YACtB2K,EAASqmD,EAAS9iD,SAASvD,OAI/B,GAAIunD,EAAazvD,IAAM4vD,EAAW5vD,IAAuB,IAAlB+vB,EAAKs+B,SAAmB,CAC7D,IAAIj1D,EAAS,CAAC,EACdA,EAAO4G,GAAKuuD,EAAS9iD,SAAS,GAAGlO,YAAYyC,EAAIuuD,EAAS9iD,SAASvD,EAAS,GAAG3K,YAAYyC,GAAK,EAChG5G,EAAO6G,GAAKsuD,EAAS9iD,SAAS,GAAGlO,YAAY0C,EAAIsuD,EAAS9iD,SAASvD,EAAS,GAAG3K,YAAY0C,GAAK,EAChGyvB,EAAMn1B,KAAKo1B,MAAMv2B,EAAO6G,EAAI2vD,EAAW3vD,EAAG7G,EAAO4G,EAAI4vD,EAAW5vD,GAE5D0vB,EAAM,IACRA,EAAgB,EAAVn1B,KAAK0L,GAASypB,GAGtBE,EAASx2B,EAAO4G,EAAI4vD,EAAW5vD,EAE3B4vB,IACFF,GAAYn1B,KAAK0L,GAErB,MACEypB,EAAMn1B,KAAKo1B,MAAM8/B,EAAaxvD,EAAI2vD,EAAW3vD,EAAGwvD,EAAazvD,EAAI4vD,EAAW5vD,GAExE0vB,EAAM,IACRA,EAAgB,EAAVn1B,KAAK0L,GAASypB,GAGO,IAAzBK,EAAKtkB,SAASvD,QAAyC,IAAzB6nB,EAAKtkB,SAASvD,SAAkC,IAAlB6nB,EAAKs+B,UACnEz+B,EAAS6/B,EAAazvD,EAAI4vD,EAAW5vD,EAEjC4vB,IACFF,GAAYn1B,KAAK0L,MAGnB2pB,EAAS6/B,EAAazvD,EAAI4vD,EAAW5vD,EAEhC4vB,IACHF,GAAYn1B,KAAK0L,KAKvB,IAAIoH,EAAeuiB,EAAS,OAAS,QACrCL,EAAWtmB,SAAS,CAClBoE,aAAcA,EACdwiB,cAAeH,EACfI,WAAY,SACZtO,cAAe,UAEnB,CAEA,GAAIuO,EAAKwT,YAAcxT,EAAKwT,aAAe0rB,EAAa,CACtD,IAAIhkC,EAAOsX,EAASstB,OAEf5kC,IACHA,EAAOsX,EAASstB,OAAS,IAAIl0D,EAAQqqC,YAAY,CAC/ChoC,MAAO8xD,EAAajzB,EAAauyB,EAAiBA,GAClDhwD,MAAOvJ,EAAOkL,SAAS,CACrBP,QAAS,GACRq8B,EAAYjd,cAInBjkB,EAAQoC,YAAYktB,EAAM,CACxBjtB,MAAO8xD,EAAajzB,EAAasyB,EAAcM,GAC/CrwD,MAAO,CACLoB,QAAS,IAEVpI,GACHgE,EAAMc,IAAI+tB,EACZ,CACF,CAEA,SAAS8jC,EAAWp6D,EAAM2D,EAAWiqC,EAAUnmC,EAAOhE,EAAaykC,GACjE,IAKIsyB,EALAp/B,EAAOp7B,EAAKi5D,KAAKY,mBAAmBl2D,GACpC22D,EAAct6D,EAAKi5D,KAAKH,KACxBrwD,EAAY2yB,EAAKrvB,WAEjBuoC,GADApM,EAAcmyB,EAAiBj/B,EAAM3yB,EAAWy/B,GACvC9M,EAAKwT,aAAe0rB,EAAcl/B,EAAOA,EAAKwT,YAAcxT,GAGzE,MAAOo/B,EAAelmB,EAAO1rC,YAA6B,MAAhB4xD,EACxClmB,EAASA,EAAO1F,aAAe0rB,EAAchmB,EAASA,EAAO1F,YAAc0F,EAG7EttC,EAAQoC,YAAYwkC,EAAU,CAC5B9nC,SAAU,CAAC00D,EAAanvD,EAAI,EAAGmvD,EAAalvD,EAAI,IAC/C7H,GAAa,WACdgE,EAAM6B,OAAOskC,GACb5tC,EAAK+I,iBAAiBpF,EAAW,KACnC,IACAiqC,EAAS1B,QAAQ,KAAM,CACrBwG,WAAW,IAEb,IAAIpc,EAAOsX,EAASstB,OAEhB5kC,GACFtvB,EAAQoC,YAAYktB,EAAM,CACxBjtB,MAAO8xD,EAAajzB,EAAasyB,EAAcA,GAC/C/vD,MAAO,CACLoB,QAAS,IAEVpI,GAAa,WACdgE,EAAM6B,OAAOgtB,EACf,GAEJ,CAEA,SAAS6kC,EAAajzB,EAAasyB,EAAcM,GAC/C,IAAIzsB,EACAC,EACAyiB,EACAC,EACAgH,EAAS9vB,EAAY8vB,OAEzB,GAA2B,WAAvB9vB,EAAYv/B,OAAqB,CACnC,IAAIwlB,EAAKqsC,EAAaE,KAClBtsC,EAAKosC,EAAaI,KAClBvsC,EAAKysC,EAAaJ,KAClBnsC,EAAKusC,EAAaF,KAClBQ,EAAcpB,EAAiB7rC,EAAIC,GACnCitC,EAAcrB,EAAiB7rC,EAAIC,GAAMG,EAAKH,GAAM8Z,EAAYipB,WAChEmK,EAActB,EAAiB3rC,EAAIE,GAAMH,EAAKG,GAAM2Z,EAAYipB,WAChEoK,EAAcvB,EAAiB3rC,EAAIE,GACvC,MAAO,CACLJ,GAAIitC,EAAY/vD,EAChB+iB,GAAIgtC,EAAY9vD,EAChB+iB,GAAIktC,EAAYlwD,EAChBkjB,GAAIgtC,EAAYjwD,EAChB+iC,KAAMgtB,EAAYhwD,EAClBijC,KAAM+sB,EAAY/vD,EAClBylD,KAAMuK,EAAYjwD,EAClB2lD,KAAMsK,EAAYhwD,EAEtB,CACM6iB,EAAKqsC,EAAanvD,EAClB+iB,EAAKosC,EAAalvD,EAClB+iB,EAAKysC,EAAazvD,EAClBkjB,EAAKusC,EAAaxvD,EAgBtB,MAde,eAAX0sD,IACF3pB,EAAOlgB,GAAME,EAAKF,GAAM+Z,EAAYipB,UACpC7iB,EAAOlgB,EACP2iC,EAAO1iC,GAAMF,EAAKE,GAAM6Z,EAAYipB,UACpCH,EAAOziC,GAGM,aAAXypC,IACF3pB,EAAOlgB,EACPmgB,EAAOlgB,GAAMG,EAAKH,GAAM8Z,EAAYipB,UACpCJ,EAAO1iC,EACP2iC,EAAOziC,GAAMH,EAAKG,GAAM2Z,EAAYipB,WAG/B,CACLhjC,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJE,GAAIA,EACJ8f,KAAMA,EACNC,KAAMA,EACNyiB,KAAMA,EACNC,KAAMA,EAGZ,CAEAxuD,EAAOvB,QAAUsB,C,wBC1UjB,IAAIi5D,EAAmB36D,EAAQ,OAE3B46D,EAAYD,EAAiBC,UAC7BC,EAAaF,EAAiBE,WAE9B3B,EAAgBl5D,EAAQ,OAExB4nB,EAAOsxC,EAActxC,KACrBkzC,EAAY5B,EAAc4B,UAC1BC,EAAa7B,EAAc6B,WAC3BC,EAAM9B,EAAc+B,WACpB9B,EAAmBD,EAAcC,iBACjC5sC,EAAc2sC,EAAc3sC,YAEhC,SAAS7qB,EAASkB,EAAa/B,GAC7B,IAAI+uD,EAAarjC,EAAY3pB,EAAa/B,GAC1C+B,EAAYgtD,WAAaA,EACzB,IAAI9nD,EAASlF,EAAYnB,IAAI,UACzBqI,EAAQ,EACRS,EAAS,EACT0wD,EAAa,KAEF,WAAXnzD,GACFgC,EAAQ,EAAI/E,KAAK0L,GACjBlG,EAASxF,KAAKJ,IAAIirD,EAAWrlD,OAAQqlD,EAAW9lD,OAAS,EACzDmxD,EAAaD,GAAI,SAAUplC,EAAOE,GAChC,OAAQF,EAAMmY,aAAejY,EAAMiY,WAAa,EAAI,GAAKnY,EAAM2iC,KACjE,MAEAzuD,EAAQ8lD,EAAW9lD,MACnBS,EAASqlD,EAAWrlD,OACpB0wD,EAAaD,KAGf,IAAIvB,EAAc72D,EAAYG,UAAUq1D,KAAKH,KACzCc,EAAWU,EAAYxjD,SAAS,GACpC2R,EAAK6xC,GACLmB,EAAU7B,EAAU+B,EAAWG,GAC/BxB,EAAYyB,SAASC,UAAYpC,EAASmC,SAASE,OACnDP,EAAW9B,EAAUgC,GACrB,IAAIpxC,EAAOovC,EACPlvC,EAAQkvC,EACRjvC,EAASivC,EACb8B,EAAW9B,GAAU,SAAUx+B,GAC7B,IAAI/vB,EAAI+vB,EAAKxyB,YAAYyC,EAErBA,EAAImf,EAAK5hB,YAAYyC,IACvBmf,EAAO4Q,GAGL/vB,EAAIqf,EAAM9hB,YAAYyC,IACxBqf,EAAQ0Q,GAGNA,EAAKg+B,MAAQzuC,EAAOyuC,QACtBzuC,EAASyQ,EAEb,IACA,IAAI4xB,EAAQxiC,IAASE,EAAQ,EAAIoxC,EAAWtxC,EAAME,GAAS,EACvDqf,EAAKijB,EAAQxiC,EAAK5hB,YAAYyC,EAC9BmnD,EAAK,EACLe,EAAK,EACL2I,EAAQ,EACRC,EAAQ,EAEG,WAAXxzD,GACF6pD,EAAK7nD,GAAS+f,EAAM9hB,YAAYyC,EAAI2hD,EAAQjjB,GAE5CwpB,EAAKnoD,GAAUuf,EAAOyuC,MAAQ,GAAK,GACnCsC,EAAW9B,GAAU,SAAUx+B,GAC7B8gC,GAAS9gC,EAAKxyB,YAAYyC,EAAI0+B,GAAMyoB,EACpC2J,GAAS/gC,EAAKg+B,MAAQ,GAAK7F,EAC3B,IAAI6I,EAAYpC,EAAiBkC,EAAOC,GACxC/gC,EAAKyE,UAAU,CACbx0B,EAAG+wD,EAAU/wD,EACbC,EAAG8wD,EAAU9wD,EACbovD,KAAMwB,EACNtB,KAAMuB,IACL,EACL,KAEkC,eAA9B14D,EAAYnB,IAAI,WAClBixD,EAAKnoD,GAAUsf,EAAM9hB,YAAYyC,EAAI2hD,EAAQjjB,GAC7CyoB,EAAK7nD,GAASggB,EAAOyuC,MAAQ,GAAK,GAClCsC,EAAW9B,GAAU,SAAUx+B,GAC7B+gC,GAAS/gC,EAAKxyB,YAAYyC,EAAI0+B,GAAMwpB,EACpC2I,GAAS9gC,EAAKg+B,MAAQ,GAAK5G,EAC3Bp3B,EAAKyE,UAAU,CACbx0B,EAAG6wD,EACH5wD,EAAG6wD,IACF,EACL,MAEA3J,EAAK7nD,GAAS+f,EAAM9hB,YAAYyC,EAAI2hD,EAAQjjB,GAC5CwpB,EAAKnoD,GAAUuf,EAAOyuC,MAAQ,GAAK,GACnCsC,EAAW9B,GAAU,SAAUx+B,GAC7B8gC,GAAS9gC,EAAKxyB,YAAYyC,EAAI0+B,GAAMyoB,EACpC2J,GAAS/gC,EAAKg+B,MAAQ,GAAK7F,EAC3Bn4B,EAAKyE,UAAU,CACbx0B,EAAG6wD,EACH5wD,EAAG6wD,IACF,EACL,IAGN,CAEA35D,EAAOvB,QAAUsB,C,iCC3GjB,IAAIoG,EAAS9H,EAAQ,MAYrB,SAAS4nB,EAAKqwC,GACZA,EAAKiD,SAAW,CACdM,gBAAiB,KACjBC,SAAUxD,EACVmD,OAAQ,EACRD,SAAU,EACVO,OAAQ,EACRC,MAAO,EACPnnD,EAAG,EACHonD,OAAQ,MAEV,IACIrhC,EACAtkB,EAFAie,EAAQ,CAAC+jC,GAIb,MAAO19B,EAAOrG,EAAMkjB,MAIlB,GAFAnhC,EAAWskB,EAAKtkB,SAEZskB,EAAKs+B,UAAY5iD,EAASvD,OAG5B,IAFA,IAAI6tB,EAAItqB,EAASvD,OAER8B,EAAI+rB,EAAI,EAAG/rB,GAAK,EAAGA,IAAK,CAC/B,IAAIuS,EAAQ9Q,EAASzB,GACrBuS,EAAMm0C,SAAW,CACfM,gBAAiB,KACjBC,SAAU10C,EACVq0C,OAAQ,EACRD,SAAU,EACVO,OAAQ,EACRC,MAAO,EACPnnD,EAAGA,EACHonD,OAAQ,MAEV1nC,EAAM30B,KAAKwnB,EACb,CAGN,CAWA,SAAS+zC,EAAUvgC,EAAM0gC,GACvB,IAAIhlD,EAAWskB,EAAKs+B,SAAWt+B,EAAKtkB,SAAW,GAC3C4lD,EAAWthC,EAAKwT,WAAW93B,SAC3B6lD,EAAWvhC,EAAK2gC,SAAS1mD,EAAIqnD,EAASthC,EAAK2gC,SAAS1mD,EAAI,GAAK,KAEjE,GAAIyB,EAASvD,OAAQ,CACnBqpD,EAAcxhC,GACd,IAAIyhC,GAAY/lD,EAAS,GAAGilD,SAASE,OAASnlD,EAASA,EAASvD,OAAS,GAAGwoD,SAASE,QAAU,EAE3FU,GACFvhC,EAAK2gC,SAASE,OAASU,EAASZ,SAASE,OAASH,EAAW1gC,EAAMuhC,GACnEvhC,EAAK2gC,SAASC,SAAW5gC,EAAK2gC,SAASE,OAASY,GAEhDzhC,EAAK2gC,SAASE,OAASY,CAE3B,MAAWF,IACTvhC,EAAK2gC,SAASE,OAASU,EAASZ,SAASE,OAASH,EAAW1gC,EAAMuhC,IAGrEvhC,EAAKwT,WAAWmtB,SAASM,gBAAkBS,EAAU1hC,EAAMuhC,EAAUvhC,EAAKwT,WAAWmtB,SAASM,iBAAmBK,EAAS,GAAIZ,EAChI,CAOA,SAASF,EAAWxgC,GAClB,IAAIw3B,EAAQx3B,EAAK2gC,SAASE,OAAS7gC,EAAKwT,WAAWmtB,SAASC,SAC5D5gC,EAAKyE,UAAU,CACbx0B,EAAGunD,IACF,GACHx3B,EAAK2gC,SAASC,UAAY5gC,EAAKwT,WAAWmtB,SAASC,QACrD,CAEA,SAASF,EAAWllD,GAClB,OAAO3H,UAAUsE,OAASqD,EAAKmmD,CACjC,CASA,SAAS/C,EAAiB3uD,EAAGC,GAC3B,IAAI0xD,EAAa,CAAC,EAIlB,OAHA3xD,GAAKzF,KAAK0L,GAAK,EACf0rD,EAAW3xD,EAAIC,EAAI1F,KAAK0sB,IAAIjnB,GAC5B2xD,EAAW1xD,EAAIA,EAAI1F,KAAK4sB,IAAInnB,GACrB2xD,CACT,CASA,SAAS5vC,EAAY3pB,EAAa/B,GAChC,OAAOiH,EAAO0kB,cAAc5pB,EAAY6pB,qBAAsB,CAC5D3iB,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aAEhB,CAQA,SAASssD,EAAcxhC,GACrB,IAAItkB,EAAWskB,EAAKtkB,SAChBsqB,EAAItqB,EAASvD,OACbipD,EAAQ,EACRD,EAAS,EAEb,QAASn7B,GAAK,EAAG,CACf,IAAIxZ,EAAQ9Q,EAASsqB,GACrBxZ,EAAMm0C,SAASE,QAAUO,EACzB50C,EAAMm0C,SAASC,UAAYQ,EAC3BD,GAAU30C,EAAMm0C,SAASQ,OACzBC,GAAS50C,EAAMm0C,SAASS,MAAQD,CAClC,CACF,CAiBA,SAASO,EAAUG,EAAUN,EAAUL,EAAUR,GAC/C,GAAIa,EAAU,CACZ,IAAIO,EAAeD,EACfE,EAAcF,EACdG,EAAcD,EAAYvuB,WAAW93B,SAAS,GAC9CumD,EAAaV,EACbW,EAAcJ,EAAanB,SAASC,SACpCuB,EAAaJ,EAAYpB,SAASC,SAClCwB,EAAaJ,EAAYrB,SAASC,SAClCyB,EAAYJ,EAAWtB,SAASC,SAEpC,MAAOqB,EAAaK,EAAUL,GAAaF,EAAcQ,EAASR,GAAcE,GAAcF,EAAa,CACzGD,EAAeQ,EAAUR,GACzBE,EAAcO,EAASP,GACvBF,EAAanB,SAASO,SAAWW,EACjC,IAAIT,EAAQa,EAAWtB,SAASE,OAASwB,EAAYN,EAAYpB,SAASE,OAASsB,EAAazB,EAAWuB,EAAYF,GAEnHX,EAAQ,IACVoB,EAAYC,EAAaR,EAAYJ,EAAUX,GAAWW,EAAUT,GACpEe,GAAcf,EACdc,GAAed,GAGjBiB,GAAaJ,EAAWtB,SAASC,SACjCuB,GAAcJ,EAAYpB,SAASC,SACnCsB,GAAeJ,EAAanB,SAASC,SACrCwB,GAAcJ,EAAYrB,SAASC,QACrC,CAEIqB,IAAeK,EAAUR,KAC3BA,EAAanB,SAASU,OAASY,EAC/BH,EAAanB,SAASC,UAAYyB,EAAYH,GAG5CH,IAAgBQ,EAASP,KAC3BA,EAAYrB,SAASU,OAASU,EAC9BC,EAAYrB,SAASC,UAAYuB,EAAaC,EAC9ClB,EAAWW,EAEf,CAEA,OAAOX,CACT,CAUA,SAASoB,EAAUtiC,GACjB,IAAItkB,EAAWskB,EAAKtkB,SACpB,OAAOA,EAASvD,QAAU6nB,EAAKs+B,SAAW5iD,EAASA,EAASvD,OAAS,GAAK6nB,EAAK2gC,SAASU,MAC1F,CAUA,SAASkB,EAASviC,GAChB,IAAItkB,EAAWskB,EAAKtkB,SACpB,OAAOA,EAASvD,QAAU6nB,EAAKs+B,SAAW5iD,EAAS,GAAKskB,EAAK2gC,SAASU,MACxE,CAWA,SAASoB,EAAaR,EAAYjiC,EAAMkhC,GACtC,OAAOe,EAAWtB,SAASO,SAAS1tB,aAAexT,EAAKwT,WAAayuB,EAAWtB,SAASO,SAAWA,CACtG,CASA,SAASsB,EAAYE,EAAIC,EAAIvB,GAC3B,IAAID,EAASC,GAASuB,EAAGhC,SAAS1mD,EAAIyoD,EAAG/B,SAAS1mD,GAClD0oD,EAAGhC,SAASQ,QAAUA,EACtBwB,EAAGhC,SAASS,OAASA,EACrBuB,EAAGhC,SAASC,UAAYQ,EACxBuB,EAAGhC,SAASE,QAAUO,EACtBsB,EAAG/B,SAASQ,QAAUA,CACxB,CAEA,SAASQ,EAAkBtmC,EAAOE,GAChC,OAAOF,EAAMmY,aAAejY,EAAMiY,WAAa,EAAI,CACrD,CAEA3tC,EAAQwnB,KAAOA,EACfxnB,EAAQ06D,UAAYA,EACpB16D,EAAQ26D,WAAaA,EACrB36D,EAAQ66D,WAAaA,EACrB76D,EAAQ+4D,iBAAmBA,EAC3B/4D,EAAQmsB,YAAcA,C,wBCjRtB,IAAI4wC,EAAen9D,EAAQ,OAE3B,SAAS0B,EAASd,EAASC,GACzBD,EAAQ+E,iBAAiB,QAAQ,SAAU/C,GACzCu6D,EAAav6D,EAAa/B,EAC5B,GACF,CAEAc,EAAOvB,QAAUsB,C,wBCRjB,IAAIy7D,EAAen9D,EAAQ,OAE3B,SAAS0B,EAASd,EAASC,GACzBD,EAAQ+E,iBAAiB,QAAQ,SAAU/C,GACzCu6D,EAAav6D,EAAa/B,EAC5B,GACF,CAEAc,EAAOvB,QAAUsB,C,wBCHjB,SAASk5D,EAAU3C,EAAMmF,EAAUnC,GACjC,IAEI1gC,EAFArG,EAAQ,CAAC+jC,GACT76B,EAAO,GAGX,MAAO7C,EAAOrG,EAAMkjB,MAIlB,GAFAha,EAAK79B,KAAKg7B,GAENA,EAAKs+B,SAAU,CACjB,IAAI5iD,EAAWskB,EAAKtkB,SAEpB,GAAIA,EAASvD,OACX,IAAK,IAAI8B,EAAI,EAAGA,EAAIyB,EAASvD,OAAQ8B,IACnC0f,EAAM30B,KAAK0W,EAASzB,GAG1B,CAGF,MAAO+lB,EAAO6C,EAAKga,MAEjBgmB,EAAS7iC,EAAM0gC,EAEnB,CAQA,SAASJ,EAAW5C,EAAMmF,GACxB,IACI7iC,EADArG,EAAQ,CAAC+jC,GAGb,MAAO19B,EAAOrG,EAAMkjB,MAIlB,GAFAgmB,EAAS7iC,GAELA,EAAKs+B,SAAU,CACjB,IAAI5iD,EAAWskB,EAAKtkB,SAEpB,GAAIA,EAASvD,OACX,IAAK,IAAI8B,EAAIyB,EAASvD,OAAS,EAAG8B,GAAK,EAAGA,IACxC0f,EAAM30B,KAAK0W,EAASzB,GAG1B,CAEJ,C,SAEApU,EAAQw6D,UAAYA,EACpBx6D,EAAQy6D,WAAaA,C,wBC1DrB,IAAI54D,EAAUjC,EAAQ,OAEtBiC,EAAQI,eAAe,CACrBpB,KAAM,wBACNoC,MAAO,wBACPjC,OAAQ,WACP,SAAUkB,EAAS1B,GACpBA,EAAQ4B,cAAc,CACpBC,SAAU,SACVC,QAAS,OACTC,MAAOL,IACN,SAAUM,GACX,IAAIE,EAAYR,EAAQQ,UACpBs1D,EAAOx1D,EAAYG,UAAUq1D,KAC7B79B,EAAO69B,EAAKY,mBAAmBl2D,GACnCy3B,EAAKs+B,UAAYt+B,EAAKs+B,QACxB,GACF,G,wBCjBA,IAAI52D,EAAUjC,EAAQ,OAEtBA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAER,IAAIq9D,EAAgBr9D,EAAQ,OAExBs9D,EAAgBt9D,EAAQ,OAE5BiC,EAAQyD,eAAe23D,GACvBp7D,EAAQuD,eAAe83D,E,iCCbvB,IAAIn3D,EAAUnG,EAAQ,OAElB8H,EAAS9H,EAAQ,MAEjBK,EAASL,EAAQ,OAEjBoG,EAAUpG,EAAQ,OAElBu9D,EAAmBn3D,EAAQm3D,iBAC3BC,EAAe,EACfC,EAAW,EACXC,EAAe,EAEnB,SAASC,EAAWC,GAKlBr/D,KAAKqI,MAAQ,IAAIT,EAAQwP,MACzBioD,EAAel2D,IAAInJ,KAAKqI,MAC1B,CA4GA,SAASi3D,EAAerzD,EAAGC,EAAG0jB,EAAWJ,EAAY+vC,EAAMC,GACzD,IAAI7yC,EAAS,CAAC,CAAC4yC,EAAOtzD,EAAIA,EAAIkzD,EAAcjzD,GAAI,CAACD,EAAI2jB,EAAW1jB,GAAI,CAACD,EAAI2jB,EAAW1jB,EAAIsjB,GAAa,CAAC+vC,EAAOtzD,EAAIA,EAAIkzD,EAAcjzD,EAAIsjB,IAGvI,OAFCgwC,GAAQ7yC,EAAO8yC,OAAO,EAAG,EAAG,CAACxzD,EAAI2jB,EAAYuvC,EAAcjzD,EAAIsjB,EAAa,KAC5E+vC,GAAQ5yC,EAAO3rB,KAAK,CAACiL,EAAGC,EAAIsjB,EAAa,IACnC7C,CACT,CAGA,SAAS+yC,EAAcj2D,EAAIpF,EAAas7D,GACtCl2D,EAAGm2D,UAAY,CACb76D,cAAe,SACf86D,iBAAkB,UAClB3gD,YAAa7a,EAAYy7D,eACzBx5C,WAAYjiB,EAAYb,KACxBG,WAAY,UACZo8D,SAAU,aAEVjqC,SAAU,CACRvxB,UAAWo7D,GAAYA,EAASp7D,UAChCf,KAAMm8D,GAAYA,EAASn8D,MAE7Bw8D,aAAcL,GAAYX,EAAiBW,EAAUt7D,GAEzD,CAjIA+6D,EAAWl9D,UAAY,CACrBC,YAAai9D,EACbt/D,OAAQ,SAAUuE,EAAa/B,EAAK29D,EAAYC,GAC9C,IAAIjqC,EAAQ5xB,EAAYsI,SAAS,cAC7BwzD,EAAYngE,KAAKqI,MAGrB,GAFA83D,EAAU51D,YAEL0rB,EAAM/yB,IAAI,SAAY+8D,EAA3B,CAIA,IAAIG,EAAmBnqC,EAAMtpB,SAAS,oBAElC0zD,EAAiBD,EAAiBzzD,SAAS,aAC3C2zD,EAAc,CAChB5kC,IAAK,CACHtQ,KAAM6K,EAAM/yB,IAAI,QAChBooB,MAAO2K,EAAM/yB,IAAI,SACjBmoB,IAAK4K,EAAM/yB,IAAI,OACfqoB,OAAQ0K,EAAM/yB,IAAI,WAEpBq9D,IAAK,CACHh1D,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aAEdsvD,eAAgBvqC,EAAM/yB,IAAI,kBAC1Bu9D,WAAY,EACZC,WAAY,IAGd1gE,KAAK2gE,SAASV,EAAYK,EAAaD,GAEvCrgE,KAAK4gE,eAAev8D,EAAai8D,EAAaF,EAAkBC,EAAgBH,GAEhF32D,EAAOs3D,gBAAgBV,EAAWG,EAAY5kC,IAAK4kC,EAAYC,IAzB/D,CA0BF,EAMAI,SAAU,SAAUV,EAAYK,EAAaD,GAC3C,IAAK,IAAIrkC,EAAOikC,EAAYjkC,EAAMA,EAAOA,EAAKwT,WAAY,CACxD,IAAIlkC,EAAO0wB,EAAKrvB,WAAWzJ,IAAI,QAC3BgsD,EAAWmR,EAAeS,YAAYx1D,GACtCskB,EAAYppB,KAAKF,IAAI4oD,EAAS3jD,MAAuB,EAAf0zD,EAAkBqB,EAAYE,gBACxEF,EAAYG,YAAc7wC,EAAYsvC,EACtCoB,EAAYI,WAAW1/D,KAAK,CAC1Bg7B,KAAMA,EACN1wB,KAAMA,EACNC,MAAOqkB,GAEX,CACF,EAKAgxC,eAAgB,SAAUv8D,EAAai8D,EAAaF,EAAkBC,EAAgBH,GASpF,IAPA,IAAIa,EAAQ,EACRP,EAAiBF,EAAYE,eAC7Bx0D,EAAS3H,EAAYnB,IAAI,qBACzB89D,EAAgBz3D,EAAO03D,iBAAiBX,EAAY5kC,IAAK4kC,EAAYC,KACrEE,EAAaH,EAAYG,WACzBC,EAAaJ,EAAYI,WAEpBzqD,EAAIyqD,EAAWvsD,OAAS,EAAG8B,GAAK,EAAGA,IAAK,CAC/C,IAAIqS,EAAOo4C,EAAWzqD,GAClB0pD,EAAWr3C,EAAK0T,KAChBpM,EAAYtH,EAAK/c,MACjBD,EAAOgd,EAAKhd,KAEZm1D,EAAaO,EAAcz1D,QAC7Bk1D,GAAc7wC,EAAY4wC,EAC1B5wC,EAAY4wC,EACZl1D,EAAO,MAGT,IAAI7B,EAAK,IAAI7B,EAAQokB,QAAQ,CAC3B/hB,MAAO,CACL0iB,OAAQ2yC,EAAeyB,EAAO,EAAGnxC,EAAW5jB,EAAQiK,IAAMyqD,EAAWvsD,OAAS,EAAS,IAAN8B,IAEnF5K,MAAOvJ,EAAOkL,SAASozD,EAAiBroD,eAAgB,CACtD8U,SAAU,QACVvhB,KAAMA,EACNsZ,SAAUy7C,EAAepvB,eACzBiwB,SAAUb,EAAe/4C,YAE3B/Y,EAAG,GACH4yD,QAASr/D,EAAOoF,MAAMg5D,EAAUP,KAElC3/D,KAAKqI,MAAMc,IAAIM,GACfi2D,EAAcj2D,EAAIpF,EAAas7D,GAC/BoB,GAASnxC,EAAYsvC,CACvB,CACF,EAKAh1D,OAAQ,WACNlK,KAAKqI,MAAMkC,WACb,GA4BF,IAAIpH,EAAWi8D,EACfh8D,EAAOvB,QAAUsB,C,wBC1JjB,IAAIrB,EAASL,EAAQ,OAEjBiM,EAAcjM,EAAQ,OAEtBg4D,EAAOh4D,EAAQ,OAEfsG,EAAQtG,EAAQ,OAEhBszB,EAAUtzB,EAAQ,OAElBuzB,EAAaD,EAAQC,WACrBswB,EAAYvwB,EAAQuwB,UAEpBz9C,EAAUpG,EAAQ,OAElBu9D,EAAmBn3D,EAAQm3D,iBAE3B77D,EAAWuK,EAAYnG,OAAO,CAChC7E,KAAM,iBACNgjD,WAAY,MACZl+C,aAAc,CAAC,OAAQ,SAKvB45D,UAAW,KACX/yD,cAAe,CAEboB,YAAa,EACb4qC,oBAAqB9zC,IAGrB6kB,KAAM,SACNC,IAAK,SACLC,MAAO,KACPC,OAAQ,KACRhgB,MAAO,MACPS,OAAQ,MACR0f,MAAM,EAGN21C,WAAY,SAEZC,YAAa,IAAO,EAAI96D,KAAKgnD,KAAK,IAElC+T,UAAW,KAGXC,cAAe,IAGfC,gBAAiB,MAGjBhpC,MAAM,EAENipC,UAAW,aAKX3X,WAAW,EACX2Q,wBAAyB,IACzBpgD,gBAAiB,eACjBqnD,WAAY,CACVj3C,MAAM,EACN1e,OAAQ,GACRof,KAAM,SACNC,IAAK,SAGLm1C,eAAgB,GAEhB7xD,UAAW,CACToL,OAAQ,CACNxN,MAAO,kBAEP0O,YAAa,wBACbjB,YAAa,EACbK,YAAa,sBACbH,WAAY,EACZC,cAAe,EACfC,cAAe,EACfwnD,UAAW,CACTr1D,MAAO,SAGX0N,SAAU,CACR2nD,UAAW,CAAC,KAIlBj3C,MAAO,CACL5Q,OAAQ,CACN2Q,MAAM,EAEN8F,SAAU,EACVO,QAAS,EACTrqB,SAAU,SAGV6F,MAAO,OACPs1D,UAAU,IAKdC,WAAY,CAEV/nD,OAAQ,CACN2Q,MAAM,EACNhkB,SAAU,CAAC,EAAG,OACdsF,OAAQ,GAERO,MAAO,OACPs1D,UAAU,EAEVp0C,cAAe,UAEjBxT,SAAU,CACRyQ,MAAM,EACNhkB,SAAU,CAAC,EAAG,OACd6F,MAAO,OACPs1D,UAAU,EACVp0C,cAAe,WAGnB9e,UAAW,CACToL,OAAQ,CACNxN,MAAO,KAEPw1D,WAAY,KAEZC,gBAAiB,KAEjBhoD,YAAa,EACbioD,SAAU,EACVhnD,YAAa,OACbinD,sBAAuB,MAKzBjoD,SAAU,CAAC,GAEbkoD,gBAAiB,EAEjBC,UAAW,KACXC,UAAW,KACX91D,MAAO,GAWPw1D,WAAY,KAEZC,gBAAiB,KAEjBM,eAAgB,QAEhBC,WAAY,GAGZC,mBAAoB,KAMpBC,OAAQ,IAeV70D,eAAgB,SAAUC,EAAQxL,GAEhC,IAAIq3D,EAAO,CACTl2D,KAAMqK,EAAOrK,KACbkU,SAAU7J,EAAOjN,MAEnB8hE,EAAkBhJ,GAClB,IAAI+I,EAAS50D,EAAO40D,QAAU,GAC9BA,EAAS50D,EAAO40D,OAASE,EAAWF,EAAQpgE,GAC5C,IAAIu3D,EAAa,CAAC,EAKlB,OAJAA,EAAW6I,OAASA,EAIbhJ,EAAKK,WAAWJ,EAAM15D,KAAM45D,GAAYh5D,IACjD,EACAgiE,cAAe,WACb5iE,KAAK6iE,eACP,EAOA9rC,cAAe,SAAUxyB,GACvB,IAAI3D,EAAOZ,KAAKwE,UACZuJ,EAAQ/N,KAAKkZ,YAAY3U,GACzBiiD,EAAiB1kD,EAAO6Q,QAAQ5E,GAASu3C,EAAUv3C,EAAM,IAAMu3C,EAAUv3C,GACzEvK,EAAO5C,EAAK8D,QAAQH,GACxB,OAAOywB,EAAWxxB,EAAO,KAAOgjD,EAClC,EASA57B,cAAe,SAAUrmB,GACvB,IAAIsmB,EAASnd,EAAYxL,UAAU0oB,cAAck4C,MAAM9iE,KAAM6P,WACzDmsB,EAAOh8B,KAAKwE,UAAUq1D,KAAKY,mBAAmBl2D,GAElD,OADAsmB,EAAOm1C,aAAehB,EAAiBhjC,EAAMh8B,MACtC6qB,CACT,EAWAk4C,cAAe,SAAU1R,GAKvBrxD,KAAKqxD,WAAarxD,KAAKqxD,YAAc,CAAC,EACtCvvD,EAAOyF,OAAOvH,KAAKqxD,WAAYA,EACjC,EAMA2R,aAAc,SAAU38C,GAatB,IAAI48C,EAAajjE,KAAKkjE,YAEjBD,IACHA,EAAajjE,KAAKkjE,YAAcphE,EAAO40D,gBAMvC12D,KAAKmjE,iBAAmB,GAG1B,IAAI7yD,EAAQ2yD,EAAW//D,IAAImjB,GAM3B,OAJa,MAAT/V,GACF2yD,EAAW5nD,IAAIgL,EAAI/V,EAAQtQ,KAAKmjE,oBAG3B7yD,CACT,EACA8yD,YAAa,WACX,OAAOpjE,KAAKohE,SACd,EAKAyB,cAAe,SAAUQ,GACvBA,EAAWrjE,KAAKohE,UAAYiC,EAAWA,EAAWrjE,KAAKohE,UACvD,IAAI1H,EAAO15D,KAAKwE,UAAUq1D,KAAKH,KAE1B2J,IAAYA,IAAa3J,GAASA,EAAK4J,SAASD,MACnDrjE,KAAKohE,UAAY1H,EAErB,IAOF,SAASgJ,EAAkBa,GAIzB,IAAIx4C,EAAM,EACVjpB,EAAOU,KAAK+gE,EAAS7rD,UAAU,SAAU8Q,GACvCk6C,EAAkBl6C,GAClB,IAAIg7C,EAAah7C,EAAMza,MACvBjM,EAAO6Q,QAAQ6wD,KAAgBA,EAAaA,EAAW,IACvDz4C,GAAOy4C,CACT,IACA,IAAIC,EAAYF,EAASx1D,MAErBjM,EAAO6Q,QAAQ8wD,KACjBA,EAAYA,EAAU,KAGP,MAAbA,GAAqBplD,MAAMolD,MAC7BA,EAAY14C,GAIV04C,EAAY,IACdA,EAAY,GAGd3hE,EAAO6Q,QAAQ4wD,EAASx1D,OAASw1D,EAASx1D,MAAM,GAAK01D,EAAYF,EAASx1D,MAAQ01D,CACpF,CAMA,SAASd,EAAWF,EAAQpgE,GAC1B,IAAIqhE,EAAkBrhE,EAAQa,IAAI,SAElC,GAAKwgE,EAAL,CAKA,IAAIC,EAUJ,GAXAlB,EAASA,GAAU,GAEnB3gE,EAAOU,KAAKigE,GAAQ,SAAUmB,GAC5B,IAAI3tC,EAAQ,IAAIluB,EAAM67D,GAClBC,EAAa5tC,EAAM/yB,IAAI,UAEvB+yB,EAAM/yB,IAAI,2BAA6B2gE,GAA6B,SAAfA,KACvDF,GAAiB,EAErB,KAEKA,EAAgB,CACnB,IAAIG,EAASrB,EAAO,KAAOA,EAAO,GAAK,CAAC,GACxCqB,EAAOv3D,MAAQm3D,EAAgB1gE,OACjC,CAEA,OAAOy/D,CAlBP,CAmBF,CAEAr/D,EAAOvB,QAAUsB,C,iCCpXjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElB4gB,EAAa5gB,EAAQ,OAErBsiE,EAAStiE,EAAQ,OAEjB29D,EAAa39D,EAAQ,OAErBq3B,EAAiBr3B,EAAQ,OAEzBuiE,EAAeviE,EAAQ,OAEvBwiE,EAASxiE,EAAQ,OAEjByiE,EAAgBziE,EAAQ,OAExB+W,EAAkB/W,EAAQ,OAE1BgC,EAAO3B,EAAO2B,KACd2T,EAAQxP,EAAQwP,MAChBzM,EAAO/C,EAAQ+C,KACfnI,EAAOV,EAAOU,KACd2hE,EAAiB,EACjBC,EAAoB,CAAC,QAAS,UAC9BC,EAAsB,CAAC,QAAS,YAChCC,EAAyB,CAAC,aAAc,UACxCC,EAA2B,CAAC,aAAc,YAC1CC,EAAS,GAETC,EAAO,EACPC,EAAY,EACZC,EAAuBnsD,EAAgB,CAAC,CAAC,OAAQ,SAErD,CAAC,SAAU,eAAgB,CAAC,YAAa,eAAgB,CAAC,cAAe,CAAC,iBAAkB,CAAC,iBAAkB,CAAC,iBAE5GosD,EAAqB,SAAU3uC,GAEjC,IAAItnB,EAAYg2D,EAAqB1uC,GAGrC,OADAtnB,EAAU+H,OAAS/H,EAAU1B,KAAO0B,EAAUnB,UAAY,KACnDmB,CACT,EAEIxL,EAAWO,EAAQwE,gBAAgB,CACrCxF,KAAM,UAKN2mB,KAAM,SAAUw7C,EAAGviE,GAKjBtC,KAAK8kE,gBAML9kE,KAAK+kE,SAAWC,IAMhBhlE,KAAK66D,SAML76D,KAAKilE,YAMLjlE,KAAKi6B,YAMLj6B,KAAKklE,OAAS,OAChB,EAKAplE,OAAQ,SAAUuE,EAAahC,EAASC,EAAKyB,GAC3C,IAAIohE,EAAS9iE,EAAQ09B,eAAe,CAClC77B,SAAU,SACVC,QAAS,UACTC,MAAOL,IAGT,KAAIjC,EAAOqa,QAAQgpD,EAAQ9gE,GAAe,GAA1C,CAIArE,KAAKqE,YAAcA,EACnBrE,KAAKsC,IAAMA,EACXtC,KAAKqC,QAAUA,EACf,IAAI+iE,EAAarB,EAAOsB,mBAAmBthE,EAASM,GAChDihE,EAAcvhE,GAAWA,EAAQrB,KACjC2uD,EAAahtD,EAAYgtD,WACzBjtC,GAAUpkB,KAAK66D,SACf0K,EAAcvlE,KAAK+kE,SAEnBS,EAAyB,sBAAhBF,GAAuCF,GAAcG,EAAc,CAC9EE,cAAeF,EAAYG,UAAUN,EAAWppC,KAAKpV,eACrD++C,UAAW5hE,EAAQ4hE,WACjB,KAEAtG,EAAiBr/D,KAAK4lE,oBAAoBvU,GAE1CwU,EAAe7lE,KAAK8lE,UAAUzG,EAAgBh7D,EAAamhE,GAE9DphD,GAAYkhD,GAA+B,sBAAhBA,GAAuD,sBAAhBA,EAA8GO,EAAaE,gBAApF/lE,KAAKgmE,aAAa3G,EAAgBwG,EAAcxhE,EAAamhE,GAEvKxlE,KAAKimE,iBAAiB3jE,GAEtBtC,KAAKkmE,kBAAkB7hE,EAAa/B,EAAK8iE,EAxBzC,CAyBF,EAKAQ,oBAAqB,SAAUvU,GAC7B,IAAIgO,EAAiBr/D,KAAK8kE,gBAa1B,OAXKzF,IAGHA,EAAiBr/D,KAAK8kE,gBAAkB,IAAI1tD,EAE5CpX,KAAKmmE,YAAY9G,GAEjBr/D,KAAKqI,MAAMc,IAAIk2D,IAGjBA,EAAejyD,KAAK,WAAY,CAACikD,EAAWplD,EAAGolD,EAAWnlD,IACnDmzD,CACT,EAKAyG,UAAW,SAAUzG,EAAgBh7D,EAAamhE,GAChD,IAAIY,EAAW/hE,EAAYG,UAAUq1D,KACjCwM,EAAUrmE,KAAK66D,SAEfyL,EAAoBtB,IACpBO,EAAcP,IACduB,EAAavmE,KAAK+kE,SAClByB,EAAmB,GACnBC,EAAe3kE,EAAOoF,MAAMw/D,EAAYriE,EAAakhE,EAAagB,EAAYf,EAAQc,EAAmBE,GAK7GG,EAAWP,EAAS1M,KAAO,CAAC0M,EAAS1M,MAAQ,GAAI2M,GAAWA,EAAQ3M,KAAO,CAAC2M,EAAQ3M,MAAQ,GAAI2F,EAAgB+G,IAAaC,IAAYA,EAAS,GAElJ,IAAIO,EAAgBC,EAAaN,GAGjC,OAFAvmE,KAAK66D,SAAWuL,EAChBpmE,KAAK+kE,SAAWQ,EACT,CACLe,kBAAmBA,EACnBM,cAAeA,EACfb,cAAeA,GAGjB,SAASY,EAAWG,EAAkBC,EAAiBC,EAAaC,EAAUjN,GAe5E,SAAS7xC,EAAO6T,GAEd,OAAOA,EAAKgH,OACd,CAEA,SAASkkC,EAAYr9D,EAAUC,GAC7B,IAAIq9D,EAAuB,MAAZt9D,EAAmBi9D,EAAiBj9D,GAAY,KAC3Du9D,EAAsB,MAAZt9D,EAAmBi9D,EAAgBj9D,GAAY,KACzDzB,EAAQo+D,EAAaU,EAAUC,EAASJ,EAAahN,GACzD3xD,GAASs+D,EAAWQ,GAAYA,EAASE,cAAgB,GAAID,GAAWA,EAAQC,cAAgB,GAAIh/D,EAAO4+D,EAAUjN,EAAQ,EAC/H,CArBIiN,GACFF,EAAkBD,EAClBtkE,EAAKskE,GAAkB,SAAUt+C,EAAOlY,IACrCkY,EAAM8+C,aAAeJ,EAAY52D,EAAOA,EAC3C,KAIE,IAAI+R,EAAW0kD,EAAiBD,EAAkB3+C,EAAQA,GAAQhf,IAAI+9D,GAAarkE,OAAOqkE,GAAah9D,OAAOpI,EAAOoF,MAAMggE,EAAa,OAAO78D,SAcrJ,CAEA,SAASw8D,EAAaU,GACpB,IAAIX,EAAgB5B,IAOpB,OANAuC,GAAW/kE,EAAK+kE,GAAS,SAAUC,EAAOC,GACxC,IAAIC,EAASd,EAAca,GAC3BjlE,EAAKglE,GAAO,SAAU/9D,GACpBA,IAAOi+D,EAAO1mE,KAAKyI,GAAKA,EAAGk+D,eAAiB,EAC9C,GACF,IACOf,CACT,CAEA,SAASb,IACPvjE,EAAKokE,GAAe,SAAUgB,GAC5BplE,EAAKolE,GAAK,SAAUn+D,GAClBA,EAAG+B,QAAU/B,EAAG+B,OAAOtB,OAAOT,EAChC,GACF,IACAjH,EAAKgkE,GAAkB,SAAU/8D,GAC/BA,EAAGo+D,WAAY,EAGfp+D,EAAG6R,OACL,GACF,CACF,EAKA0qD,aAAc,SAAU3G,EAAgBwG,EAAcxhE,EAAamhE,GACjE,GAAKnhE,EAAYnB,IAAI,aAArB,CAIA,IAAI4kE,EAAWzjE,EAAYnB,IAAI,2BAC3B6kE,EAAS1jE,EAAYnB,IAAI,mBACzB8kE,EAAgB9D,EAAc+D,aAElCzlE,EAAKqjE,EAAae,eAAe,SAAUY,EAAOC,GAChDjlE,EAAKglE,GAAO,SAAU/9D,EAAI03C,GACxB,IAAI13C,EAAGo+D,UAAP,CAIA,IAEI/xD,EAFAtK,EAAS/B,EAAG+B,OAIhB,GAAIg6D,GAA+B,cAArBA,EAAOG,UACnB7vD,EAAStK,IAAWg6D,EAAOC,cAGzB,CACAx7D,MAAO,CACLgC,EAAG,EACHC,EAAG,EACHX,MAAOC,EAAO08D,cACdl8D,OAAQR,EAAO28D,gBAEjB98D,MAAO,CACLoB,QAAS,IAGT,CACFpB,MAAO,CACLoB,QAAS,QAGR,CACL,IAAI27D,EAAU,EACVC,EAAU,EAET78D,EAAOm8D,iBAIVS,EAAU58D,EAAO08D,cAAgB,EACjCG,EAAU78D,EAAO28D,eAAiB,GAGpCryD,EAAyB,cAAhB2xD,EAA8B,CACrC/gE,SAAU,CAAC0hE,EAASC,GACpBh9D,MAAO,CACLoB,QAAS,IAET,CACFxC,MAAO,CACLgC,EAAGm8D,EACHl8D,EAAGm8D,EACH98D,MAAO,EACPS,OAAQ,GAEVX,MAAO,CACLoB,QAAS,GAGf,CAEAqJ,GAAUkyD,EAAc7+D,IAAIM,EAAIqM,EAAQgyD,EAAUC,EAxDlD,CAyDF,GACF,IAEAvlE,EAAKxC,KAAK+kE,UAAU,SAAUyC,EAAOC,GACnCjlE,EAAKglE,GAAO,SAAU/9D,EAAI03C,GACxB,IAAImnB,EAAOzC,EAAaS,kBAAkBmB,GAAatmB,GACnDrrC,EAAS,CAAC,EAETwyD,IAIe,cAAhBb,EACEa,EAAKC,MACPzyD,EAAOpP,SAAW+C,EAAG/C,SAAS1D,QAC9ByG,EAAG2D,KAAK,WAAYk7D,EAAKC,OAGvBD,EAAKC,MACPzyD,EAAO7L,MAAQnI,EAAOyF,OAAO,CAAC,EAAGkC,EAAGQ,OACpCR,EAAGqD,SAASw7D,EAAKC,MAGfD,EAAKE,QACP/+D,EAAGyL,SAAS,UAAW,GACvBY,EAAOzK,MAAQ,CACboB,QAAS,IAIiB,IAArBhD,EAAG4B,MAAMoB,UACdqJ,EAAOzK,MAAQ,CACboB,QAAS,KAKjBu7D,EAAc7+D,IAAIM,EAAIqM,EAAQgyD,EAAUC,GAC1C,GACF,GAAG/nE,MACHA,KAAKklE,OAAS,YACd8C,EAAc39B,KAAK5mC,GAAK,WACtBzD,KAAKklE,OAAS,QACdW,EAAaE,eACf,GAAG/lE,OAAOue,OA/GV,CAgHF,EAKA0nD,iBAAkB,SAAU3jE,GAC1B,IAAIi6B,EAAav8B,KAAKi6B,YAEjBsC,IACHA,EAAav8B,KAAKi6B,YAAc,IAAInB,EAAex2B,EAAIujB,SACvD0W,EAAWQ,OAAO/8B,KAAKqE,YAAYnB,IAAI,SACvCq5B,EAAWj8B,GAAG,MAAOmD,EAAKzD,KAAKyoE,OAAQzoE,OACvCu8B,EAAWj8B,GAAG,OAAQmD,EAAKzD,KAAK0oE,QAAS1oE,QAG3C,IAAI0K,EAAO,IAAIs5D,EAAa,EAAG,EAAG1hE,EAAI2O,WAAY3O,EAAI4O,aACtDqrB,EAAWE,mBAAkB,SAAUC,EAAGzwB,EAAGC,GAC3C,OAAOxB,EAAKoyB,QAAQ7wB,EAAGC,EACzB,GACF,EAKAy8D,iBAAkB,WAChB,IAAIpsC,EAAav8B,KAAKi6B,YAElBsC,IACFA,EAAWj0B,UACXi0B,EAAa,KAEjB,EAKAksC,OAAQ,SAAUziE,EAAIC,GACpB,GAAoB,cAAhBjG,KAAKklE,SAA2B1+D,KAAKiH,IAAIzH,GAAMm+D,GAAkB39D,KAAKiH,IAAIxH,GAAMk+D,GAAiB,CAEnG,IAAIzK,EAAO15D,KAAKqE,YAAYG,UAAUq1D,KAAKH,KAE3C,IAAKA,EACH,OAGF,IAAImC,EAAanC,EAAKlwD,YAEtB,IAAKqyD,EACH,OAGF77D,KAAKsC,IAAI84B,eAAe,CACtB14B,KAAM,cACN6kD,KAAMvnD,KAAKwnD,IACXphC,SAAUpmB,KAAKqE,YAAYgiB,GAC3BuiD,SAAU,CACR38D,EAAG4vD,EAAW5vD,EAAIjG,EAClBkG,EAAG2vD,EAAW3vD,EAAIjG,EAClBsF,MAAOswD,EAAWtwD,MAClBS,OAAQ6vD,EAAW7vD,SAGzB,CACF,EAKA08D,QAAS,SAAUjiE,EAAOw2B,EAAQC,GAChC,GAAoB,cAAhBl9B,KAAKklE,OAAwB,CAE/B,IAAIxL,EAAO15D,KAAKqE,YAAYG,UAAUq1D,KAAKH,KAE3C,IAAKA,EACH,OAGF,IAAImC,EAAanC,EAAKlwD,YAEtB,IAAKqyD,EACH,OAGF,IAAInxD,EAAO,IAAIs5D,EAAanI,EAAW5vD,EAAG4vD,EAAW3vD,EAAG2vD,EAAWtwD,MAAOswD,EAAW7vD,QACjFqlD,EAAarxD,KAAKqE,YAAYgtD,WAElCp0B,GAAUo0B,EAAWplD,EACrBixB,GAAUm0B,EAAWnlD,EAErB,IAAIgtD,EAAI+K,EAAO7hE,SACf6hE,EAAO4E,UAAU3P,EAAGA,EAAG,EAAEj8B,GAASC,IAClC+mC,EAAOx9D,MAAMyyD,EAAGA,EAAG,CAACzyD,EAAOA,IAC3Bw9D,EAAO4E,UAAU3P,EAAGA,EAAG,CAACj8B,EAAQC,IAChCxyB,EAAKkyB,eAAes8B,GACpBl5D,KAAKsC,IAAI84B,eAAe,CACtB14B,KAAM,gBACN6kD,KAAMvnD,KAAKwnD,IACXphC,SAAUpmB,KAAKqE,YAAYgiB,GAC3BuiD,SAAU,CACR38D,EAAGvB,EAAKuB,EACRC,EAAGxB,EAAKwB,EACRX,MAAOb,EAAKa,MACZS,OAAQtB,EAAKsB,SAGnB,CACF,EAKAm6D,YAAa,SAAU9G,GACrBA,EAAe/+D,GAAG,SAAS,SAAUo8B,GACnC,GAAoB,UAAhB18B,KAAKklE,OAAT,CAIA,IAAIxD,EAAY1hE,KAAKqE,YAAYnB,IAAI,aAAa,GAElD,GAAKw+D,EAAL,CAIA,IAAI0D,EAAaplE,KAAK8oE,WAAWpsC,EAAEoR,QAASpR,EAAEqR,SAE9C,GAAKq3B,EAAL,CAIA,IAAIppC,EAAOopC,EAAWppC,KAEtB,GAAIA,EAAKxyB,YAAYu/D,WACnB/oE,KAAKgpE,YAAY5D,QAEjB,GAAkB,eAAd1D,EACF1hE,KAAKipE,YAAY7D,QACZ,GAAkB,SAAd1D,EAAsB,CAC/B,IAAIr4D,EAAY2yB,EAAKo+B,SAASx5D,KAAK0I,aAAa0yB,EAAKz3B,WACjD0wC,EAAO5rC,EAAUnG,IAAI,QAAQ,GAC7BgmE,EAAa7/D,EAAUnG,IAAI,UAAU,IAAS,QAClD+xC,GAAQk0B,OAAOC,KAAKn0B,EAAMi0B,EAC5B,CAdF,CANA,CANA,CA4BF,GAAGlpE,KACL,EAKAkmE,kBAAmB,SAAU7hE,EAAa/B,EAAK8iE,GAkB7C,SAASlF,EAASlkC,GACI,cAAhBh8B,KAAKklE,SACPnB,EAAOsF,cAAchlE,EAAY++D,cAAepnC,GAAQh8B,KAAKgpE,YAAY,CACvEhtC,KAAMA,IACHh8B,KAAKipE,YAAY,CACpBjtC,KAAMA,IAGZ,CAzBKopC,IACHA,EAAmD,MAAtC/gE,EAAYnB,IAAI,aAAa,GAAgB,CACxD84B,KAAM33B,EAAY++D,eAIhBpjE,KAAK8oE,WAAWxmE,EAAI2O,WAAa,EAAG3O,EAAI4O,YAAc,GAErDk0D,IACHA,EAAa,CACXppC,KAAM33B,EAAYG,UAAUq1D,KAAKH,SAKtC15D,KAAKilE,cAAgBjlE,KAAKilE,YAAc,IAAI7F,EAAWp/D,KAAKqI,SAASvI,OAAOuE,EAAa/B,EAAK8iE,EAAWppC,KAAMv4B,EAAKy8D,EAAUlgE,MAWjI,EAKAkK,OAAQ,WACNlK,KAAK2oE,mBAEL3oE,KAAK8kE,iBAAmB9kE,KAAK8kE,gBAAgBv6D,YAC7CvK,KAAK+kE,SAAWC,IAChBhlE,KAAKklE,OAAS,QACdllE,KAAKilE,aAAejlE,KAAKilE,YAAY/6D,QACvC,EACA5B,QAAS,WACPtI,KAAK2oE,kBACP,EAKAM,YAAa,SAAU7D,GACrBplE,KAAKsC,IAAI84B,eAAe,CACtB14B,KAAM,oBACN6kD,KAAMvnD,KAAKwnD,IACXphC,SAAUpmB,KAAKqE,YAAYgiB,GAC3B45C,WAAYmF,EAAWppC,MAE3B,EAKAgtC,YAAa,SAAU5D,GACrBplE,KAAKsC,IAAI84B,eAAe,CACtB14B,KAAM,oBACN6kD,KAAMvnD,KAAKwnD,IACXphC,SAAUpmB,KAAKqE,YAAYgiB,GAC3B45C,WAAYmF,EAAWppC,MAE3B,EAWA8sC,WAAY,SAAU78D,EAAGC,GACvB,IAAIk5D,EACA/B,EAAWrjE,KAAKqE,YAAY++D,cAuBhC,OAtBAC,EAASnnC,SAAS,CAChB9uB,KAAM,eACNk8D,MAAO,aACN,SAAUttC,GACX,IAAIutC,EAAOvpE,KAAK+kE,SAASyE,WAAWxtC,EAAKpV,eAGzC,GAAI2iD,EAAM,CACR,IAAIzjE,EAAQyjE,EAAKE,sBAAsBx9D,EAAGC,GACtCjC,EAAQs/D,EAAKt/D,MAEjB,KAAIA,EAAMgC,GAAKnG,EAAM,IAAMA,EAAM,IAAMmE,EAAMgC,EAAIhC,EAAMsB,OAAStB,EAAMiC,GAAKpG,EAAM,IAAMA,EAAM,IAAMmE,EAAMiC,EAAIjC,EAAM+B,QAOjH,OAAO,EANPo5D,EAAa,CACXppC,KAAMA,EACN8R,QAAShoC,EAAM,GACfioC,QAASjoC,EAAM,GAKrB,CACF,GAAG9F,MACIolE,CACT,IAOF,SAASJ,IACP,MAAO,CACLU,UAAW,GACX8D,WAAY,GACZE,QAAS,GAEb,CAOA,SAAShD,EAAWriE,EAAakhE,EAAagB,EAAYf,EAAQc,EAAmBE,EAAkBW,EAAUC,EAASJ,EAAahN,GAErI,GAAKmN,EAAL,CASA,IAAIwC,EAAaxC,EAAS39D,YAE1B,GAAKmgE,GAAeA,EAAWC,SAA/B,CAIA,IAAIC,EAAYF,EAAWp+D,MACvBu+D,EAAaH,EAAW39D,OACxBgO,EAAc2vD,EAAW3vD,YACzB+vD,EAAgBJ,EAAW9B,UAC3BmC,EAAe7C,EAASvgD,cACxBqjD,EAAc7C,GAAWA,EAAQxgD,cACjCkgD,EAAmBK,EAASE,aAC5B6C,EAAcP,EAAWO,YACzBC,EAAWrD,GAAoBA,EAAiB3yD,OAChDi2D,EAAuBjD,EAASx6D,SAAS,oBACzC09D,EAAyBlD,EAASx6D,SAAS,sBAI3CtE,EAAQiiE,EAAY,YAAalzD,GAErC,GAAK/O,EAAL,CAUA,GANA2+D,EAAY79D,IAAId,GAEhBA,EAAM+E,KAAK,WAAY,CAACu8D,EAAW19D,GAAK,EAAG09D,EAAWz9D,GAAK,IAC3D7D,EAAM6/D,cAAgB2B,EACtBxhE,EAAM8/D,eAAiB2B,EAEnBH,EAAWY,gBACb,OAAOliE,EAIT,IAAImiE,EAAKF,EAAY,aAAc3/D,EAAMqvD,EAAOyK,GAGhD,GAFA+F,GAAMC,EAAiBpiE,EAAOmiE,EAAIL,GAAYR,EAAWO,cAEpDC,EAAU,CACb,IAAIT,EAAUY,EAAY,UAAW3/D,EAAMqvD,EAAO0K,GAClDgF,GAAWgB,EAAcriE,EAAOqhE,EAClC,CAEA,OAAOrhE,CArBP,CApBA,CARA,CAqDA,SAASoiE,EAAiBpiE,EAAOmiE,EAAIG,GAEnCH,EAAGjmE,UAAY4iE,EAAS5iE,UACxBimE,EAAGtrD,YAAc7a,EAAY6a,YAC7BsrD,EAAG19D,SAAS,CACVb,EAAG,EACHC,EAAG,EACHX,MAAOs+D,EACP79D,OAAQ89D,IAEV,IAAIc,EAAoBzD,EAAS5tC,UAAU,eAAe,GACtDsxC,EAAsBR,EAAuBnnE,IAAI,eACrD0G,EAAY4gE,GAAI,WACd,IAAI1yD,EAAc8sD,EAAmBwF,GACrCtyD,EAAY7K,KAAO29D,EACnB,IAAIE,EAAgBnG,EAAqB0F,GAGzC,GAFAS,EAAc79D,KAAO49D,EAEjBF,EAAe,CACjB,IAAII,EAAkBlB,EAAY,EAAI7vD,EACtCgxD,EAAYlzD,EAAagzD,EAAeF,EAAmBG,EAAiBb,EAAa,CACvFj+D,EAAG+N,EACH9N,EAAG,EACHX,MAAOw/D,EACP/+D,OAAQk+D,GAEZ,MAEIpyD,EAAYxM,KAAOw/D,EAAcx/D,KAAO,KAG5Ck/D,EAAGt1D,SAAS4C,GACZlQ,EAAQ0F,cAAck9D,EAAIM,EAC5B,IACAziE,EAAMc,IAAIqhE,EACZ,CAEA,SAASE,EAAcriE,EAAOqhE,GAE5BA,EAAQnlE,UAAY4iE,EAAS5iE,UAC7BmlE,EAAQxqD,YAAc7a,EAAY6a,YAClC,IAAI+rD,EAAezkE,KAAKF,IAAIujE,EAAY,EAAI7vD,EAAa,GACrDkxD,EAAgB1kE,KAAKF,IAAIwjE,EAAa,EAAI9vD,EAAa,GAC3D0vD,EAAQz0D,SAAU,EAClBy0D,EAAQ58D,SAAS,CACfb,EAAG+N,EACH9N,EAAG8N,EACHzO,MAAO0/D,EACPj/D,OAAQk/D,IAEV,IAAIt+C,EAAcu6C,EAAS5tC,UAAU,SAAS,GAC9C3vB,EAAY8/D,GAAS,WACnB,IAAI5xD,EAAc8sD,EAAmBwF,GACrCtyD,EAAY7K,KAAO2f,EACnB,IAAIk+C,EAAgBnG,EAAqB0F,GACzCW,EAAYlzD,EAAagzD,EAAel+C,EAAaq+C,EAAcC,GACnExB,EAAQx0D,SAAS4C,GACjBlQ,EAAQ0F,cAAco8D,EAASoB,EACjC,IACAziE,EAAMc,IAAIugE,EACZ,CAEA,SAAS9/D,EAAYuhE,EAAS3zD,GACvBuyD,GAYFoB,EAAQtD,WAAarB,EAAiBxlE,KAAKmqE,IAR5C3zD,IAEK2zD,EAAQC,kBACXD,EAAQtD,WAAY,GAO1B,CAEA,SAASmD,EAAYlzD,EAAagzD,EAAel+C,EAAarhB,EAAOS,EAAQq/D,GAC3E,IAAIC,EAAYnE,EAASx6D,WACrBrB,EAAOxJ,EAAOkS,SAAS3P,EAAY4iB,kBAAkBkgD,EAAS5iE,UAAW,SAAU,KAAM,KAAM8mE,EAAiB,aAAe,SAAUC,EAAUpoE,IAAI,SAE3J,IAAKmoE,GAAkB1B,EAAWZ,WAAY,CAC5C,IAAIwC,EAAWlnE,EAAYnB,IAAI,iBAAiB,GAChDoI,EAAOigE,EAAWA,EAAW,IAAMjgE,EAAOA,CAC5C,CAEA,IAAIkgE,EAAmBF,EAAU3+D,SAAS0+D,EAAiB/G,EAAyBF,GAChFqH,EAAqBH,EAAU3+D,SAAS0+D,EAAiB9G,EAA2BF,GACpFqH,EAASF,EAAiBr+D,WAAW,QACzCvF,EAAQkR,cAAchB,EAAagzD,EAAeU,EAAkBC,EAAoB,CACtFxyD,YAAayyD,EAASpgE,EAAO,KAC7B8N,UAAWwT,EACXzT,YAAY,IAEdkyD,IAAmBvzD,EAAYo3C,SAAWptD,EAAOyiB,MAAM8mD,IACvDvzD,EAAY6zD,SAAWD,GAAUF,EAAiBtoE,IAAI,YAAc,CAClE0oE,WAAYrgE,EACZsgE,YAAa7/D,EACb8/D,QAAS,GACP,IACN,CAEA,SAASxB,EAAY7C,EAAasE,EAAM/R,EAAOzrD,GAC7C,IAAI48D,EAAyB,MAAflB,GAAuB1D,EAAWkB,GAAawC,GACzD+B,EAAQ1F,EAAkBmB,GAiB9B,OAfI0D,GAEF5E,EAAWkB,GAAawC,GAAe,KACvCgC,EAA2BD,EAAOb,EAAS1D,IAEnCsC,IACNoB,EAAU,IAAIY,EAAK,CACjBx9D,EAAG29D,EAAWlS,EAAOzrD,KAEvB48D,EAAQgB,UAAYnS,EACpBmR,EAAQiB,gBAAkB3E,EAC1B4E,EAA0BL,EAAOb,EAAS1D,IAIvClC,EAAYkC,GAAauC,GAAgBmB,CAClD,CAEA,SAASc,EAA2BD,EAAOb,EAAS1D,GAClD,IAAI6E,EAAUN,EAAMhC,GAAgB,CAAC,EACrCsC,EAAQ/D,IAAsB,cAAhBd,EAA8B0D,EAAQzkE,SAAS1D,QAAUlB,EAAOyF,OAAO,CAAC,EAAG4jE,EAAQlhE,MACnG,CAIA,SAASoiE,EAA0BL,EAAOb,EAAS1D,GACjD,IAAI6E,EAAUN,EAAMhC,GAAgB,CAAC,EACjCx6B,EAAa23B,EAAS33B,WAE1B,GAAIA,KAAgBg2B,GAA+B,cAArBA,EAAOG,WAA4B,CAC/D,IAAI4G,EAAa,EACbC,EAAa,EAGbC,EAAcnG,EAAkBkD,WAAWh6B,EAAW5oB,gBAErD4+C,GAAUiH,GAAeA,EAAYlE,MACxCgE,EAAaE,EAAYlE,IAAIh9D,MAC7BihE,EAAaC,EAAYlE,IAAIv8D,QAK/BsgE,EAAQ/D,IAAsB,cAAhBd,EAA8B,CAAC,EAAG+E,GAAc,CAC5DvgE,EAAGsgE,EACHrgE,EAAGsgE,EACHjhE,MAAO,EACPS,OAAQ,EAEZ,CAGAsgE,EAAQ9D,OAAyB,cAAhBf,CACnB,CACF,CAQA,SAASyE,EAAWlS,EAAO0S,GACzB,IAAIC,EAAK3S,EAAQwK,EAASkI,EAC1B,OAAQC,EAAK,GAAKA,CACpB,CAEAvpE,EAAOvB,QAAUsB,C,iCCx1BjB,IAAIrB,EAASL,EAAQ,OAErB,SAAS4jE,EAAmBthE,EAASM,GACnC,GAAIN,IAA6B,sBAAjBA,EAAQrB,MAAiD,sBAAjBqB,EAAQrB,MAA+B,CAC7F,IAAIg3D,EAAOr1D,EAAYG,UAAUq1D,KAAKH,KAClCuG,EAAal8D,EAAQk8D,WAEzB,GAAIA,GAAcvG,EAAK4J,SAASrD,GAC9B,MAAO,CACLjkC,KAAMikC,GAIV,IAAI2M,EAAe7oE,EAAQ6oE,aAE3B,GAAoB,MAAhBA,IAAyB3M,EAAavG,EAAKmT,YAAYD,IACzD,MAAO,CACL5wC,KAAMikC,EAGZ,CACF,CAGA,SAAS6M,EAAc9wC,GACrB,IAAIhnB,EAAO,GAEX,MAAOgnB,EACLA,EAAOA,EAAKwT,WACZxT,GAAQhnB,EAAKhU,KAAKg7B,GAGpB,OAAOhnB,EAAKxB,SACd,CAEA,SAAS61D,EAAchG,EAAUrnC,GAC/B,IAAI+wC,EAAWD,EAAczJ,GAC7B,OAAOvhE,EAAOqa,QAAQ4wD,EAAU/wC,IAAS,CAC3C,CAGA,SAASgjC,EAAiBhjC,EAAM33B,GAC9B,IAAI27D,EAAe,GAEnB,MAAOhkC,EAAM,CACX,IAAIgxC,EAAgBhxC,EAAKz3B,UACzBy7D,EAAah/D,KAAK,CAChBwC,KAAMw4B,EAAKx4B,KACXe,UAAWyoE,EACXj/D,MAAO1J,EAAY6U,YAAY8zD,KAEjChxC,EAAOA,EAAKwT,UACd,CAGA,OADAwwB,EAAaxsD,UACNwsD,CACT,CAEAn+D,EAAQwjE,mBAAqBA,EAC7BxjE,EAAQirE,cAAgBA,EACxBjrE,EAAQwnE,cAAgBA,EACxBxnE,EAAQm9D,iBAAmBA,C,wBClD3B,IAXA,IAAIt7D,EAAUjC,EAAQ,OAElBsiE,EAAStiE,EAAQ,OAKjB8G,EAAO,WAAa,EAEpB0kE,EAAc,CAAC,oBAAqB,gBAAiB,eAEhDh3D,EAAI,EAAGA,EAAIg3D,EAAY94D,OAAQ8B,IACtCvS,EAAQI,eAAe,CACrBpB,KAAMuqE,EAAYh3D,GAClBpT,OAAQ,cACP0F,GAGL7E,EAAQI,eAAe,CACrBpB,KAAM,oBACNG,OAAQ,eACP,SAAUkB,EAAS1B,GAOpB,SAAS6qE,EAAiBj3C,EAAO3lB,GAC/B,IAAI80D,EAAarB,EAAOsB,mBAAmBthE,EAASkyB,GAEpD,GAAImvC,EAAY,CACd,IAAI+H,EAAiBl3C,EAAMmtC,cAEvB+J,IACFppE,EAAQ4hE,UAAY5B,EAAOsF,cAAc8D,EAAgB/H,EAAWppC,MAAQ,SAAW,aAGzF/F,EAAM4sC,cAAcuC,EAAWppC,KACjC,CACF,CAlBA35B,EAAQ4B,cAAc,CACpBC,SAAU,SACVC,QAAS,UACTC,MAAOL,GACNmpE,EAeL,G,iCCzCA,IAAIprE,EAASL,EAAQ,OAEjBuiE,EAAeviE,EAAQ,OAEvBuO,EAAUvO,EAAQ,OAElBwO,EAAeD,EAAQC,aACvBm9D,EAAmBp9D,EAAQo9D,iBAE3B7jE,EAAS9H,EAAQ,MAEjBsiE,EAAStiE,EAAQ,OAEjB4rE,EAAU7mE,KAAKF,IACfgnE,EAAU9mE,KAAKJ,IACfmnE,EAAgBzrE,EAAOkS,SACvBxR,EAAOV,EAAOU,KACdgrE,EAAoB,CAAC,YAAa,SAAU,eAC5CC,EAAiB,CAAC,YAAa,SAAU,YACzCC,EAAwB,CAAC,aAAc,SAAU,QACjDC,EAA0B,CAAC,aAAc,SAAU,UAKvD,SAASxqE,EAASd,EAASC,EAAKyB,GAG9B,IAAI6pE,EAAY,CACd1pE,SAAU,SACVC,QAAS,UACTC,MAAOL,GAET1B,EAAQ4B,cAAc2pE,GAAW,SAAUvpE,GACzC,IAAIwpE,EAAUvrE,EAAI2O,WACd68D,EAAWxrE,EAAI4O,YACf68D,EAAe1pE,EAAYwJ,OAC3BwjD,EAAa9nD,EAAO0kB,cAAc5pB,EAAY6pB,qBAAsB,CACtE3iB,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,cAEVhD,EAAO6/D,EAAa7/D,MAAQ,GAE5B8/D,EAAiB/9D,EAAas9D,EAAclc,EAAW9lD,MAAO2C,EAAK,IAAK2/D,GACxEI,EAAkBh+D,EAAas9D,EAAclc,EAAWrlD,OAAQkC,EAAK,IAAK4/D,GAE1ExI,EAAcvhE,GAAWA,EAAQrB,KACjC0iE,EAAarB,EAAOsB,mBAAmBthE,EAASM,GAChDukE,EAA2B,kBAAhBtD,GAAmD,gBAAhBA,EAAgCvhE,EAAQ6kE,SAAW,KACjGvF,EAAWh/D,EAAY++D,cACvB8K,EAAgBnK,EAAO+I,cAAczJ,GAEzC,GAAoB,gBAAhBiC,EAA+B,CACjC,IAAI6I,EAA2B,sBAAhB7I,EAAsC8I,EAAiB/pE,EAAa+gE,EAAY/B,EAAU2K,EAAgBC,GAAmBrF,EAAW,CAACA,EAASr9D,MAAOq9D,EAAS58D,QAAU,CAACgiE,EAAgBC,GACxMviD,EAAOqiD,EAAariD,KAEpBA,GAAiB,QAATA,GAA2B,SAATA,IAC5BA,EAAO,QAGT,IAAI2iD,EAAU,CACZ/M,YAAayM,EAAazM,YAC1B51C,KAAMA,EACN61C,UAAWwM,EAAaxM,WAG1B8B,EAASjJ,SAASkU,eAKlB,IAAIC,EAAiB,CACnBtiE,EAAG,EACHC,EAAG,EACHX,MAAO4iE,EAAS,GAChBniE,OAAQmiE,EAAS,GACjBK,KAAML,EAAS,GAAKA,EAAS,IAE/B9K,EAAS5iC,UAAU8tC,GACnBE,EAASpL,EAAUgL,GAAS,EAAO,GAE/BE,EAAiBlL,EAAS75D,YAC9BhH,EAAK0rE,GAAe,SAAUlyC,EAAM1rB,GAClC,IAAIkzD,GAAc0K,EAAc59D,EAAQ,IAAM+yD,GAAU7iC,WACxDxE,EAAKyE,UAAU3+B,EAAOyF,OAAO,CAC3B+nB,WAAY,CAACk0C,EAAYA,GACzBxpD,YAAa,EACbkwD,YAAa,GACZqE,GACL,GACF,CAEA,IAAIG,EAAWrqE,EAAYG,UAAUq1D,KAAKH,KAC1CgV,EAASjuC,UAAUkuC,EAAsBtd,EAAYuX,EAAUxD,IAAa,GAC5E/gE,EAAY0+D,cAAc1R,GAG1Bud,EAASF,EACT,IAAI1K,GAAc3S,EAAWplD,GAAIolD,EAAWnlD,EAAG2hE,EAASC,GAAWI,EAAe7K,EAAU,EAC9F,GACF,CAgBA,SAASoL,EAASzyC,EAAMqyC,EAASQ,EAAc7U,GAC7C,IAAIzuD,EACAS,EAEJ,IAAIgwB,EAAKsrC,YAAT,CAIA,IAAIqC,EAAa3tC,EAAKxyB,YACtB+B,EAAQo+D,EAAWp+D,MACnBS,EAAS29D,EAAW39D,OAEpB,IAAIs/D,EAAYtvC,EAAKrvB,WACjBqN,EAAcsxD,EAAUpoE,IAAIsqE,GAC5BsB,EAAexD,EAAUpoE,IAAIuqE,GAAkB,EAC/CsB,EAAmBC,EAAoB1D,GACvCpB,EAAc1jE,KAAKF,IAAI0T,EAAa+0D,GACpCE,EAAej1D,EAAc80D,EAC7BI,EAAoBhF,EAAc4E,EAClCxD,EAAYtvC,EAAKrvB,WACrBqvB,EAAKyE,UAAU,CACbzmB,YAAaA,EACbkwD,YAAaA,EACb6E,iBAAkBA,IACjB,GACHxjE,EAAQ8hE,EAAQ9hE,EAAQ,EAAI0jE,EAAc,GAC1CjjE,EAASqhE,EAAQrhE,EAASijE,EAAeC,EAAmB,GAC5D,IAAIC,EAAY5jE,EAAQS,EACpBq7D,EAAe+H,EAAapzC,EAAMsvC,EAAW6D,EAAWd,EAASQ,EAAc7U,GAEnF,GAAKqN,EAAalzD,OAAlB,CAIA,IAAIzJ,EAAO,CACTuB,EAAGgjE,EACH/iE,EAAGgjE,EACH3jE,MAAOA,EACPS,OAAQA,GAENqjE,EAAiB/B,EAAQ/hE,EAAOS,GAChCsjE,EAAO/oE,IAEPgpE,EAAM,GACVA,EAAIf,KAAO,EAEX,IAAK,IAAIv4D,EAAI,EAAGuY,EAAM64C,EAAalzD,OAAQ8B,EAAIuY,GAAM,CACnD,IAAIhG,EAAQ6+C,EAAapxD,GACzBs5D,EAAIvuE,KAAKwnB,GACT+mD,EAAIf,MAAQhmD,EAAMhf,YAAYglE,KAC9B,IAAIgB,EAAQC,EAAMF,EAAKF,EAAgBhB,EAAQ/M,aAE3CkO,GAASF,GACXr5D,IACAq5D,EAAOE,IAGLD,EAAIf,MAAQe,EAAI12B,MAAMrvC,YAAYglE,KAClC9nE,EAAS6oE,EAAKF,EAAgB3kE,EAAMokE,GAAc,GAClDO,EAAiB/B,EAAQ5iE,EAAKa,MAAOb,EAAKsB,QAC1CujE,EAAIp7D,OAASo7D,EAAIf,KAAO,EACxBc,EAAO/oE,IAEb,CAMA,GAJIgpE,EAAIp7D,QACNzN,EAAS6oE,EAAKF,EAAgB3kE,EAAMokE,GAAc,IAG/CD,EAAc,CACjB,IAAIrM,EAAqB8I,EAAUpoE,IAAI,sBAEb,MAAtBs/D,GAA8B2M,EAAY3M,IAC5CqM,GAAe,EAEnB,CAEA,IAAS54D,EAAI,EAAGuY,EAAM64C,EAAalzD,OAAQ8B,EAAIuY,EAAKvY,IAClDw4D,EAASpH,EAAapxD,GAAIo4D,EAASQ,EAAc7U,EAAQ,EA9C3D,CA1BA,CA0EF,CAMA,SAASoV,EAAapzC,EAAMsvC,EAAW6D,EAAWd,EAASQ,EAAc7U,GACvE,IAAIqN,EAAerrC,EAAKtkB,UAAY,GAChCg4D,EAAUrB,EAAQ3iD,KACV,QAAZgkD,GAAiC,SAAZA,IAAuBA,EAAU,MACtD,IAAIC,EAAqC,MAArBtB,EAAQ9M,WAAqB8M,EAAQ9M,WAAavH,EAEtE,GAAI6U,IAAiBc,EACnB,OAAO3zC,EAAKqrC,aAAe,GAI7BA,EAAevlE,EAAOywD,OAAO8U,GAAc,SAAU7+C,GACnD,OAAQA,EAAM8+C,WAChB,IACA57C,EAAK27C,EAAcqI,GACnB,IAAIE,EAAOC,EAAUvE,EAAWjE,EAAcqI,GAE9C,GAAiB,IAAbE,EAAK7kD,IACP,OAAOiR,EAAKqrC,aAAe,GAK7B,GAFAuI,EAAK7kD,IAAM+kD,EAAkBxE,EAAW6D,EAAWS,EAAK7kD,IAAK2kD,EAASrI,GAErD,IAAbuI,EAAK7kD,IACP,OAAOiR,EAAKqrC,aAAe,GAI7B,IAAK,IAAIpxD,EAAI,EAAGuY,EAAM64C,EAAalzD,OAAQ8B,EAAIuY,EAAKvY,IAAK,CACvD,IAAIu4D,EAAOnH,EAAapxD,GAAGuqB,WAAaovC,EAAK7kD,IAAMokD,EAEnD9H,EAAapxD,GAAGwqB,UAAU,CACxB+tC,KAAMA,GAEV,CAaA,OAXImB,IACFtI,EAAalzD,QAAU6nB,EAAKyE,UAAU,CACpCsoC,YAAY,IACX,GACH1B,EAAalzD,OAAS,GAGxB6nB,EAAKqrC,aAAeA,EACpBrrC,EAAKyE,UAAU,CACbnR,WAAYsgD,EAAKtgD,aAChB,GACI+3C,CACT,CAMA,SAASyI,EAAkBxE,EAAW6D,EAAWpkD,EAAK2kD,EAASK,GAE7D,IAAKL,EACH,OAAO3kD,EAOT,IAJA,IAAIw3C,EAAa+I,EAAUpoE,IAAI,cAC3BsrB,EAAMuhD,EAAgB57D,OACtB67D,EAAcxhD,EAETvY,EAAIuY,EAAM,EAAGvY,GAAK,EAAGA,IAAK,CACjC,IAAIlI,EAAQgiE,EAA4B,QAAZL,EAAoBlhD,EAAMvY,EAAI,EAAIA,GAAGuqB,WAE7DzyB,EAAQgd,EAAMokD,EAAY5M,IAC5ByN,EAAc/5D,EACd8U,GAAOhd,EAEX,CAGA,MADY,QAAZ2hE,EAAoBK,EAAgBtQ,OAAO,EAAGjxC,EAAMwhD,GAAeD,EAAgBtQ,OAAOuQ,EAAaxhD,EAAMwhD,GACtGjlD,CACT,CAMA,SAASW,EAAK27C,EAAcqI,GAQ1B,OAPIA,GACFrI,EAAa37C,MAAK,SAAU+C,EAAGC,GAC7B,IAAIxlB,EAAmB,QAAZwmE,EAAoBjhD,EAAE+R,WAAa9R,EAAE8R,WAAa9R,EAAE8R,WAAa/R,EAAE+R,WAC9E,OAAgB,IAATt3B,EAAyB,QAAZwmE,EAAoBjhD,EAAElqB,UAAYmqB,EAAEnqB,UAAYmqB,EAAEnqB,UAAYkqB,EAAElqB,UAAY2E,CAClG,IAGKm+D,CACT,CAMA,SAASwI,EAAUvE,EAAW5zD,EAAUg4D,GAItC,IAFA,IAAI3kD,EAAM,EAED9U,EAAI,EAAGuY,EAAM9W,EAASvD,OAAQ8B,EAAIuY,EAAKvY,IAC9C8U,GAAOrT,EAASzB,GAAGuqB,WAOrB,IAAI0c,EAAYouB,EAAUpoE,IAAI,mBAG9B,GAAKwU,GAAaA,EAASvD,OAEpB,GAAkB,UAAd+oC,GAAyBwyB,EAClCpgD,EAAa,CAAC5X,EAASA,EAASvD,OAAS,GAAGqsB,WAAY9oB,EAAS,GAAG8oB,YACxD,QAAZkvC,GAAqBpgD,EAAW9b,cAE7B,CACD,IAAI8b,EAAa,CAAC/oB,KAAWA,KAC7B/D,EAAKkV,GAAU,SAAU8Q,GACvB,IAAIza,EAAQya,EAAMgY,SAAS0c,GAC3BnvC,EAAQuhB,EAAW,KAAOA,EAAW,GAAKvhB,GAC1CA,EAAQuhB,EAAW,KAAOA,EAAW,GAAKvhB,EAC5C,GACF,MAZAuhB,EAAa,CAAClhB,IAAKA,KAcrB,MAAO,CACL2c,IAAKA,EACLuE,WAAYA,EAEhB,CAOA,SAASmgD,EAAMF,EAAKF,EAAgBh8B,GAIlC,IAHA,IAGgBm7B,EAHZyB,EAAU,EACVC,EAAU3pE,IAEL0P,EAAI,EAASuY,EAAM+gD,EAAIp7D,OAAQ8B,EAAIuY,EAAKvY,IAC/Cu4D,EAAOe,EAAIt5D,GAAGzM,YAAYglE,KAEtBA,IACFA,EAAO0B,IAAYA,EAAU1B,GAC7BA,EAAOyB,IAAYA,EAAUzB,IAIjC,IAAI2B,EAAaZ,EAAIf,KAAOe,EAAIf,KAC5B1Z,EAAIua,EAAiBA,EAAiBh8B,EAC1C,OAAO88B,EAAa9C,EAAQvY,EAAImb,EAAUE,EAAYA,GAAcrb,EAAIob,IAAY3pE,GACtF,CAMA,SAASG,EAAS6oE,EAAKF,EAAgB3kE,EAAMokE,EAAcsB,GASzD,IAAIC,EAAYhB,IAAmB3kE,EAAKa,MAAQ,EAAI,EAChD+kE,EAAY,EAAID,EAChBjgE,EAAK,CAAC,IAAK,KACXC,EAAK,CAAC,QAAS,UACfi4D,EAAO59D,EAAK0F,EAAGigE,IACfE,EAAiBlB,EAAiBE,EAAIf,KAAOa,EAAiB,GAE9De,GAASG,EAAiB7lE,EAAK2F,EAAGigE,OACpCC,EAAiB7lE,EAAK2F,EAAGigE,KAG3B,IAAK,IAAIr6D,EAAI,EAAGu6D,EAASjB,EAAIp7D,OAAQ8B,EAAIu6D,EAAQv6D,IAAK,CACpD,IAAI+lB,EAAOuzC,EAAIt5D,GACXw6D,EAAa,CAAC,EACd59C,EAAO09C,EAAiBv0C,EAAKxyB,YAAYglE,KAAO+B,EAAiB,EACjEG,EAAMD,EAAWpgE,EAAGigE,IAAcjD,EAAQkD,EAAiB,EAAIzB,EAAc,GAE7E6B,EAASjmE,EAAK0F,EAAGigE,IAAc3lE,EAAK2F,EAAGggE,IAAc/H,EACrDsI,EAAQ36D,IAAMu6D,EAAS,GAAKG,EAAS99C,EAAO89C,EAAS99C,EACrDg+C,EAAMJ,EAAWpgE,EAAGggE,IAAchD,EAAQuD,EAAQ,EAAI9B,EAAc,GACxE2B,EAAWrgE,EAAGkgE,IAAc5lE,EAAK0F,EAAGkgE,IAAchD,EAAQwB,EAAc4B,EAAM,GAC9ED,EAAWrgE,EAAGigE,IAAc/H,EAAOgF,EAAQwB,EAAc+B,EAAM,GAC/DvI,GAAQsI,EACR50C,EAAKyE,UAAUgwC,GAAY,EAC7B,CAEA/lE,EAAK0F,EAAGkgE,KAAeC,EACvB7lE,EAAK2F,EAAGigE,KAAeC,CACzB,CAGA,SAASnC,EAAiB/pE,EAAa+gE,EAAY/B,EAAU2K,EAAgBC,GAG3E,IAOIziE,EAPAslE,GAAY1L,GAAc,CAAC,GAAGppC,KAC9B+0C,EAAc,CAAC/C,EAAgBC,GAEnC,IAAK6C,GAAYA,IAAazN,EAC5B,OAAO0N,EAIT,IAAIC,EAAWhD,EAAiBC,EAC5BO,EAAOwC,EAAW3sE,EAAYwJ,OAAO4zD,gBAEzC,MAAOj2D,EAASslE,EAASthC,WAAY,CAKnC,IAHA,IAAIzkB,EAAM,EACNuyC,EAAW9xD,EAAOkM,SAEbzB,EAAI,EAAGuY,EAAM8uC,EAASnpD,OAAQ8B,EAAIuY,EAAKvY,IAC9C8U,GAAOuyC,EAASrnD,GAAGuqB,WAGrB,IAAIywC,EAAgBH,EAAStwC,WAE7B,GAAsB,IAAlBywC,EACF,OAAOF,EAGTvC,GAAQzjD,EAAMkmD,EAEd,IAAIh6D,EAAczL,EAAOmB,WACrBqN,EAAc/C,EAAY/T,IAAIsqE,GAC9BtD,EAAc1jE,KAAKF,IAAI0T,EAAag1D,EAAoB/3D,EAAa+C,IACzEw0D,GAAQ,EAAIx0D,EAAcA,GAAe,EAAIA,EAAckwD,GAAe1jE,KAAK0qE,IAAI1C,EAAM,IACzFA,EAAOpB,IAAqBoB,EAAOpB,GACnC0D,EAAWtlE,CACb,CAEAgjE,EAAOwC,IAAaxC,EAAOwC,GAC3B,IAAIvqE,EAAQD,KAAK0qE,IAAI1C,EAAOwC,EAAU,IACtC,MAAO,CAAChD,EAAiBvnE,EAAOwnE,EAAkBxnE,EACpD,CAGA,SAASkoE,EAAsBtd,EAAYuX,EAAUxD,GACnD,GAAIwD,EACF,MAAO,CACL38D,EAAG28D,EAAS38D,EACZC,EAAG08D,EAAS18D,GAIhB,IAAIilE,EAAkB,CACpBllE,EAAG,EACHC,EAAG,GAGL,IAAKk5D,EACH,OAAO+L,EAMT,IAAIlR,EAAamF,EAAWppC,KACxBzyB,EAAS02D,EAAWz2D,YAExB,IAAKD,EACH,OAAO4nE,EAIT,IAAIC,EAAe,CAAC7nE,EAAOgC,MAAQ,EAAGhC,EAAOyC,OAAS,GAClDgwB,EAAOikC,EAEX,MAAOjkC,EAAM,CACX,IAAIy0C,EAAaz0C,EAAKxyB,YACtB4nE,EAAa,IAAMX,EAAWxkE,EAC9BmlE,EAAa,IAAMX,EAAWvkE,EAC9B8vB,EAAOA,EAAKwT,UACd,CAEA,MAAO,CACLvjC,EAAGolD,EAAW9lD,MAAQ,EAAI6lE,EAAa,GACvCllE,EAAGmlD,EAAWrlD,OAAS,EAAIolE,EAAa,GAE5C,CAIA,SAASxC,EAAS5yC,EAAMq1C,EAAUnD,EAAe7K,EAAUrJ,GACzD,IAAIyW,EAAaz0C,EAAKxyB,YAClB8nE,EAAsBpD,EAAclU,GACpCuQ,EAAkB+G,GAAuBA,IAAwBt1C,EAErE,KAAIs1C,IAAwB/G,GAAmBvQ,IAAUkU,EAAc/5D,QAAU6nB,IAASqnC,GAA1F,CAIArnC,EAAKyE,UAAU,CAEbmpC,UAAU,EAGV/B,WAAY0C,IAAoB8G,EAASE,UAAUd,GACnDlG,gBAAiBA,IAChB,GAEH,IAAIiH,EAAgB,IAAIxN,EAAaqN,EAASplE,EAAIwkE,EAAWxkE,EAAGolE,EAASnlE,EAAIukE,EAAWvkE,EAAGmlE,EAAS9lE,MAAO8lE,EAASrlE,QACpHxJ,EAAKw5B,EAAKqrC,cAAgB,IAAI,SAAU7+C,GACtComD,EAASpmD,EAAOgpD,EAAetD,EAAe7K,EAAUrJ,EAAQ,EAClE,GAdA,CAeF,CAEA,SAASgV,EAAoB/4C,GAC3B,OAAOA,EAAM/yB,IAAIwqE,GAAyBz3C,EAAM/yB,IAAIyqE,GAA2B,CACjF,CAEAvqE,EAAOvB,QAAUsB,C,wBCxgBjB,IAAI4xD,EAAgBtzD,EAAQ,OAExBgwE,EAAUhwE,EAAQ,MAElBK,EAASL,EAAQ,OAEjBkR,EAAU7Q,EAAO6Q,QACjB++D,EAAoB,mBAExB,SAASvuE,EAASd,EAASC,EAAKyB,GAC9B,IAAI6pE,EAAY,CACd1pE,SAAU,SACVC,QAAS,UACTC,MAAOL,GAET1B,EAAQ4B,cAAc2pE,GAAW,SAAUvpE,GACzC,IAAIw1D,EAAOx1D,EAAYG,UAAUq1D,KAC7BH,EAAOG,EAAKH,KACZiY,EAAuBttE,EAAYsI,SAAS+kE,GAEhD,IAAIhY,EAAK4N,YAAT,CAIA,IAAIsK,EAAkB9vE,EAAO41B,IAAImiC,EAAKgY,aAAa,SAAUC,GAC3D,OAAOA,EAAaA,EAAW5uE,IAAIwuE,GAAqB,IAC1D,IACAK,EAAWrY,EACX,CAAC,EAAGkY,EAAiBD,EAAsBttE,EAAY++D,cAAc4O,eAAgB3tE,EANrF,CAOF,GACF,CAEA,SAAS0tE,EAAW/1C,EAAMi2C,EAAkBL,EAAiBD,EAAsBO,EAAmB7tE,GACpG,IAAIinE,EAAYtvC,EAAKrvB,WACjB8jE,EAAaz0C,EAAKxyB,YAEtB,GAAKinE,IAAcA,EAAW5I,WAAc4I,EAAW7G,SAAvD,CAIA,IAMIuI,EANAC,EAAqBp2C,EAAKrvB,SAAS+kE,GACnCW,EAAiBT,EAAgB51C,EAAKg+B,OACtCsY,EAAUC,EAAaH,EAAoBH,EAAkBI,EAAgBV,GAE7E12D,EAAcm3D,EAAmBlvE,IAAI,eACrCg/D,EAAwBkQ,EAAmBlvE,IAAI,yBAGtB,MAAzBg/D,IAEFiQ,EAAgBK,EAAeF,EAASt2C,GACxC/gB,EAAcw3D,EAAqBvQ,EAAuBiQ,IAG5Dn2C,EAAK30B,UAAU,cAAe4T,GAC9B,IAAIosD,EAAerrC,EAAKqrC,aAExB,GAAKA,GAAiBA,EAAalzD,OAI5B,CACL,IAAI+gD,EAAUwd,EAAmB12C,EAAMsvC,EAAWmF,EAAY2B,EAAoBE,EAASjL,GAE3FvlE,EAAOU,KAAK6kE,GAAc,SAAU7+C,EAAOlY,GAEzC,GAAIkY,EAAMwxC,OAASkY,EAAkB/9D,QAAUqU,IAAU0pD,EAAkB1pD,EAAMwxC,OAAQ,CACvF,IAAI2Y,EAAcztB,EAAUomB,EAAWgH,EAAS9pD,EAAOlY,EAAO4kD,EAAS7wD,GACvE0tE,EAAWvpD,EAAOmqD,EAAaf,EAAiBD,EAAsBO,EAAmB7tE,EAC3F,CACF,GACF,MAbE8tE,EAAgBK,EAAeF,EAASt2C,GAExCA,EAAK30B,UAAU,QAAS8qE,EAtB1B,CAkCF,CAEA,SAASI,EAAaH,EAAoBH,EAAkBI,EAAgBV,GAC1E,IAAIW,EAAUxwE,EAAOyF,OAAO,CAAC,EAAG0qE,GAUhC,OATAnwE,EAAOU,KAAK,CAAC,QAAS,aAAc,oBAAoB,SAAUowE,GAEhE,IAAIz0D,EAAMi0D,EAAmBlvE,IAAI0vE,GAAY,GAEtC,MAAPz0D,GAAek0D,IAAmBl0D,EAAMk0D,EAAeO,IAChD,MAAPz0D,IAAgBA,EAAM8zD,EAAiBW,IAChC,MAAPz0D,IAAgBA,EAAMwzD,EAAqBzuE,IAAI0vE,IACxC,MAAPz0D,IAAgBm0D,EAAQM,GAAcz0D,EACxC,IACOm0D,CACT,CAEA,SAASE,EAAeF,GACtB,IAAI/lE,EAAQsmE,EAAqBP,EAAS,SAE1C,GAAI/lE,EAAO,CACT,IAAIw1D,EAAa8Q,EAAqBP,EAAS,cAC3CtQ,EAAkB6Q,EAAqBP,EAAS,mBAUpD,OARItQ,IACFz1D,EAAQklE,EAAQqB,UAAUvmE,EAAO,KAAM,KAAMy1D,IAG3CD,IACFx1D,EAAQklE,EAAQsB,YAAYxmE,EAAOw1D,IAG9Bx1D,CACT,CACF,CAEA,SAASkmE,EAAqBvQ,EAAuBiQ,GACnD,OAAwB,MAAjBA,EAAwBV,EAAQqB,UAAUX,EAAe,KAAM,KAAMjQ,GAAyB,IACvG,CAEA,SAAS2Q,EAAqBP,EAAS9uE,GACrC,IAAIuK,EAAQukE,EAAQ9uE,GAEpB,GAAa,MAATuK,GAA2B,SAAVA,EACnB,OAAOA,CAEX,CAEA,SAAS2kE,EAAmB12C,EAAMsvC,EAAWmF,EAAY2B,EAAoBE,EAASjL,GACpF,GAAKA,GAAiBA,EAAalzD,OAAnC,CAIA,IAAI6+D,EAAcC,EAAe3H,EAAW,UAA6B,MAAjBgH,EAAQ/lE,OAAmC,SAAlB+lE,EAAQ/lE,QAAqB0mE,EAAe3H,EAAW,eAAiB2H,EAAe3H,EAAW,oBAEnL,GAAK0H,EAAL,CAIA,IAAI5Q,EAAYkJ,EAAUpoE,IAAI,aAC1Bm/D,EAAYiJ,EAAUpoE,IAAI,aAC1BosB,EAAamhD,EAAWnhD,WAAWtsB,QAC1B,MAAbo/D,GAAqBA,EAAY9yC,EAAW,KAAOA,EAAW,GAAK8yC,GACtD,MAAbC,GAAqBA,EAAY/yC,EAAW,KAAOA,EAAW,GAAK+yC,GACnE,IAAIC,EAAiBgJ,EAAUpoE,IAAI,kBAC/B6N,EAAM,CACRrO,KAAMswE,EAAYxvE,KAClB8rB,WAAYA,EACZvJ,OAAQitD,EAAY1sC,OAGL,UAAbv1B,EAAIrO,MAAwC,UAAnB4/D,GAAiD,OAAnBA,EAIzDvxD,EAAIokD,cAAgB,UAHpBpkD,EAAIokD,cAAgB,WACpBpkD,EAAIs4B,MAAO,GAKb,IAAI6rB,EAAU,IAAIH,EAAchkD,GAEhC,OADAmkD,EAAQge,mBAAqB5Q,EACtBpN,CAvBP,CANA,CA8BF,CASA,SAAS+d,EAAe3H,EAAW9nE,GAGjC,IAAI8iC,EAAQglC,EAAUpoE,IAAIM,GAC1B,OAAOmP,EAAQ2zB,IAAUA,EAAMnyB,OAAS,CACtC3Q,KAAMA,EACN8iC,MAAOA,GACL,IACN,CAEA,SAAS4e,EAAUomB,EAAWgH,EAAS9pD,EAAOlY,EAAO4kD,EAAS7wD,GAC5D,IAAI8uE,EAAerxE,EAAOyF,OAAO,CAAC,EAAG+qE,GAErC,GAAIpd,EAAS,CACX,IAAIke,EAAcle,EAAQxyD,KACtB4/D,EAAiC,UAAhB8Q,GAA2Ble,EAAQge,mBACpDnlE,EAA2B,UAAnBu0D,EAA6BhyD,EAA2B,OAAnBgyD,EAA0Bj+D,EAAY2+D,aAAax6C,EAAMwa,SAAWxa,EAAMgY,SAAS8qC,EAAUpoE,IAAI,oBAClJiwE,EAAaC,GAAele,EAAQG,iBAAiBtnD,EACvD,CAEA,OAAOolE,CACT,CAEA/vE,EAAOvB,QAAUsB,C,wBCxLjB1B,EAAQ,OAERA,EAAQ,M,wBCFRA,EAAQ,OAERA,EAAQ,M,wBCFR,IAAIiC,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjB4xE,EAAyB5xE,EAAQ,OAEjC6xE,EAAc7xE,EAAQ,OAE1BA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAKRiC,EAAQ+b,sBAAqB,SAAU5R,GAErC,GAAIA,EAAQ,GACRA,EAAO0lE,aAA6C,IAA9B1lE,EAAO0lE,YAAYp/D,UAAkBtG,EAAO0lE,YAAc,CAAC,GACnF,IAAIt+B,EAAOpnC,EAAO0lE,YAAYt+B,KAI1BA,IAASnzC,EAAO6Q,QAAQsiC,KAC1BpnC,EAAO0lE,YAAYt+B,KAAO,CAACA,GAE/B,CACF,IAGAvxC,EAAQmmB,kBAAkBnmB,EAAQi2C,SAASC,UAAUC,WAAW,SAAUx3C,EAASC,GAGjFD,EAAQ22C,aAAa,eAAew6B,iBAAmBH,EAAuBI,QAAQpxE,EAASC,EACjG,IAEAoB,EAAQI,eAAe,CACrBpB,KAAM,oBACNoC,MAAO,oBACPjC,OAAQ,sBACPywE,E,wBC1CH,IAAI5vE,EAAUjC,EAAQ,OAElBiyE,EAAmBhwE,EAAQiwE,qBAAqB,CAClDjxE,KAAM,cACN8wE,iBAAkB,KAClBnlE,cAAe,CAEbqc,KAAM,OAENkpD,UAAW,KAEXtlE,OAAQ,EACRC,EAAG,GACH7L,KAAM,OAGNmxE,MAAM,EACNC,gBAAgB,EAChB/lE,MAAO,KACP6xC,OAAQ,KAaR3K,KAAM,GAGN8U,UAAW,KACX2Q,wBAAyB,IACzB7uC,UAAW,CACTtf,MAAO,OACPhB,MAAO,EACP7I,KAAM,SAERqxE,YAAa,CACXxnE,MAAO,yBAEToe,MAAO,CACLD,MAAM,EACNiO,UAAW,KAEXq7C,UAAW,OAEXlc,OAAQ,EACRvrD,MAAO,OACPwkB,QAAS,CAAC,EAAG,EAAG,EAAG,GACnBD,gBAAiB,OAEjB7V,YAAa,KACbjB,YAAa,EACbE,WAAY,EACZG,YAAa,QAMf45D,OAAQ,CACNvpD,MAAM,EACNwpD,KAAM,2MAENhmE,KAAM,GAEN4pD,OAAQ,GAGRvrD,MAAO,OACP2N,WAAY,EACZG,YAAa,OACbF,cAAe,EACfC,cAAe,EAEf+5D,SAAU,OAIZhxE,EAAWuwE,EACftwE,EAAOvB,QAAUsB,C,wBCrFjB,IAAIO,EAAUjC,EAAQ,OAElB2yE,EAAiB3yE,EAAQ,OAEzB4yE,EAAkB3wE,EAAQ4wE,oBAAoB,CAChD5xE,KAAM,cACN5C,OAAQ,SAAUy0E,EAAwBlyE,EAASC,GACjD,IAAIkyE,EAAqBnyE,EAAQ22C,aAAa,WAC1C46B,EAAYW,EAAuBrxE,IAAI,cAAgBsxE,GAAsBA,EAAmBtxE,IAAI,cAAgB,kBAGxHkxE,EAAe9yE,SAAS,cAAegB,GAAK,SAAUmyE,EAAa/3C,EAAGtB,GAElD,SAAdw4C,IAAyC,UAAhBa,GAA2Bb,EAAUz3D,QAAQs4D,IAAgB,IACxFr5C,EAAe,CACb14B,KAAM,oBACN+xE,YAAaA,EACbxoE,EAAGywB,GAAKA,EAAEoR,QACV5hC,EAAGwwB,GAAKA,EAAEqR,SAGhB,GACF,EAKA7jC,OAAQ,SAAU7H,EAASC,GACzB8xE,EAAeM,WAAWpyE,EAAIujB,QAAS,eACvCwuD,EAAgBzkE,WAAW5P,KAAK+pB,OAAQ,SAAUla,UACpD,EAKAvH,QAAS,SAAUjG,EAASC,GAC1B8xE,EAAeM,WAAW,cAAepyE,GACzC+xE,EAAgBzkE,WAAW5P,KAAK+pB,OAAQ,UAAWla,UACrD,IAEE1M,EAAWkxE,EACfjxE,EAAOvB,QAAUsB,C,wBCzCjB,IAAIrB,EAASL,EAAQ,OAEjBkzE,EAAYlzE,EAAQ,MAEpBmG,EAAUnG,EAAQ,OAElB4xE,EAAyB5xE,EAAQ,OAEjCmzE,EAAYnzE,EAAQ,OAEpBozE,EAAepzE,EAAQ,OAEvB84C,EAAY94C,EAAQ,OAEpByB,EAAMq3C,EAAUu6B,aAChBvwD,EAAQziB,EAAOyiB,MACf9gB,EAAO3B,EAAO2B,KAMlB,SAASsxE,IAAmB,CAma5B,SAAS/qE,EAAYhB,EAAgBgsE,EAAevrE,EAAIwrE,GAEjDC,EAAWhyE,EAAIuG,GAAI0rE,SAAUF,KAChC/xE,EAAIuG,GAAI0rE,SAAWF,EACnBD,EAAgBptE,EAAQoC,YAAYP,EAAIwrE,EAAOjsE,IAAmBS,EAAGogC,gBAAiBpgC,EAAG2D,KAAK6nE,IAElG,CAEA,SAASC,EAAWE,EAAWC,GAC7B,GAAIvzE,EAAOkgB,SAASozD,IAActzE,EAAOkgB,SAASqzD,GAAW,CAC3D,IAAIC,GAAS,EAIb,OAHAxzE,EAAOU,KAAK6yE,GAAU,SAAU/sD,EAAM3mB,GACpC2zE,EAASA,GAAUJ,EAAWE,EAAUzzE,GAAM2mB,EAChD,MACSgtD,CACX,CACE,OAAOF,IAAcC,CAEzB,CAEA,SAASE,EAAoBC,EAASC,GACpCD,EAAQC,EAAiBvyE,IAAI,cAAgB,OAAS,SACxD,CAEA,SAASwyE,EAAoBC,GAC3B,MAAO,CACLjvE,SAAUivE,EAAMjvE,SAAS1D,QACzBiP,SAAU0jE,EAAM1jE,UAAY,EAEhC,CAEA,SAAS2jE,EAAqBvtE,EAAOotE,EAAkBh/D,GACrD,IAAIlI,EAAIknE,EAAiBvyE,IAAI,KACzBoL,EAASmnE,EAAiBvyE,IAAI,UAClCmF,GAASA,EAAMuxB,UAAS,SAAUnwB,GAChB,UAAZA,EAAG/G,OACA,MAAL6L,IAAc9E,EAAG8E,EAAIA,GACX,MAAVD,IAAmB7E,EAAG6E,OAASA,GAC/B7E,EAAGgN,OAASA,EAEhB,GACF,CA1cAs+D,EAAgB7yE,UAAY,CAI1B2zE,OAAQ,KAKRC,gBAAiB,KAKjBC,QAAS,KAKTC,WAAW,EAKXC,WAAY,KAKZC,YAAa,KAKbC,aAAc,KAOdC,mBAAoB,GAKpBt2E,OAAQ,SAAU8pD,EAAW6rB,EAAkBnzE,EAAK+zE,GAClD,IAAItoE,EAAQ0nE,EAAiBvyE,IAAI,SAC7B08C,EAAS61B,EAAiBvyE,IAAI,UASlC,GANAlD,KAAKs2E,WAAa1sB,EAClB5pD,KAAKu2E,kBAAoBd,EACzBz1E,KAAKw2E,KAAOl0E,EAIP+zE,GAAer2E,KAAKi2E,aAAeloE,GAAS/N,KAAKk2E,cAAgBt2B,EAAtE,CAIA5/C,KAAKi2E,WAAaloE,EAClB/N,KAAKk2E,YAAct2B,EACnB,IAAIv3C,EAAQrI,KAAK61E,OACb5B,EAASj0E,KAAK+1E,QAElB,IAAKn2B,GAAqB,SAAXA,EAIb,OAFAv3C,GAASA,EAAMouE,YACfxC,GAAUA,EAAOwC,QAInBpuE,GAASA,EAAMqiB,OACfupD,GAAUA,EAAOvpD,OAEjB,IAAItH,EAAW,CAAC,EAChBpjB,KAAK02E,aAAatzD,EAAUrV,EAAO67C,EAAW6rB,EAAkBnzE,GAEhE,IAAIq0E,EAAavzD,EAASuzD,WAEtBA,IAAe32E,KAAK81E,iBACtB91E,KAAK4kD,MAAMtiD,GAGbtC,KAAK81E,gBAAkBa,EACvB,IAAI3B,EAAgBh1E,KAAK42E,eAAiB52E,KAAK62E,mBAAmBjtB,EAAW6rB,GAE7E,GAAKptE,EAKE,CACL,IAAIyuE,EAAgBh1E,EAAOoF,MAAM8C,EAAayrE,EAAkBT,GAChEh1E,KAAK+2E,gBAAgB1uE,EAAO+a,EAAU0zD,EAAerB,GACrDz1E,KAAKg3E,cAAc3uE,EAAO+a,EAAU0zD,EAAerB,EACrD,MAREptE,EAAQrI,KAAK61E,OAAS,IAAIjuE,EAAQwP,MAClCpX,KAAKi3E,gBAAgB5uE,EAAO+a,EAAUwmC,EAAW6rB,GACjDz1E,KAAKk3E,cAAc7uE,EAAO+a,EAAUwmC,EAAW6rB,GAC/CnzE,EAAIujB,QAAQ1c,IAAId,GAOlButE,EAAqBvtE,EAAOotE,GAAkB,GAE9Cz1E,KAAKm3E,cAAcppE,EA1CnB,CA2CF,EAKA7D,OAAQ,SAAU5H,GAChBtC,KAAK4kD,MAAMtiD,EACb,EAKAgG,QAAS,SAAUhG,GACjBtC,KAAK4kD,MAAMtiD,EACb,EAKAu0E,mBAAoB,SAAUjtB,EAAW6rB,GACvC,IAAI1rB,EAAY0rB,EAAiBvyE,IAAI,aACjCuQ,EAAOm2C,EAAUn2C,KACjB2jE,EAA+B,aAAd3jE,EAAK/Q,KACtB20E,EAAU5B,EAAiBvyE,IAAI,QAEnC,IAAKm0E,IAAYD,EACf,OAAO,EAGT,GAAkB,SAAdrtB,GAAqC,MAAbA,EAAmB,CAC7C,IAAIqsB,EAAqBp2E,KAAKo2E,mBAE9B,GAAIgB,GAAkB3jE,EAAK+I,eAAiB45D,EAC1C,OAAO,EAMT,GAAIiB,EAAS,CACX,IAAIC,EAAkBjE,EAAuBkE,YAAY3tB,GAAW0tB,gBAChEE,EAAa/jE,EAAKiJ,YAEtB,OAAOlW,KAAKiH,IAAI+pE,EAAW,GAAKA,EAAW,IAAMF,EAAkBlB,CACrE,CAEA,OAAO,CACT,CAEA,OAAqB,IAAdrsB,CACT,EAMA2sB,aAAc,SAAUtzD,EAAUrV,EAAO67C,EAAW6rB,EAAkBnzE,GAAM,EAM5E20E,gBAAiB,SAAU5uE,EAAO+a,EAAUwmC,EAAW6rB,GACrD,IAAIgC,EAAgBr0D,EAASqN,QAE7B,GAAIgnD,EAAe,CACjB,IAAIC,EAAYx0E,EAAImF,GAAOqvE,UAAY,IAAI9vE,EAAQ6vE,EAAc/0E,MAAM6hB,EAAMnB,EAASqN,UACtFpoB,EAAMc,IAAIuuE,EACZ,CACF,EAKAR,cAAe,SAAU7uE,EAAO+a,EAAUwmC,EAAW6rB,GACnD,GAAIryD,EAASuH,MAAO,CAClB,IAAI6qD,EAAUtyE,EAAImF,GAAOmtE,QAAU,IAAI5tE,EAAQ+C,KAAK4Z,EAAMnB,EAASuH,QACnEtiB,EAAMc,IAAIqsE,GACVD,EAAoBC,EAASC,EAC/B,CACF,EAKAsB,gBAAiB,SAAU1uE,EAAO+a,EAAUpZ,GAC1C,IAAI0tE,EAAYx0E,EAAImF,GAAOqvE,UAEvBA,IACFA,EAAUxiE,SAASkO,EAASqN,QAAQplB,OACpCrB,EAAY0tE,EAAW,CACrBztE,MAAOmZ,EAASqN,QAAQxmB,QAG9B,EAKA+sE,cAAe,SAAU3uE,EAAO+a,EAAUpZ,EAAayrE,GACrD,IAAID,EAAUtyE,EAAImF,GAAOmtE,QAErBA,IACFA,EAAQtgE,SAASkO,EAASuH,MAAMtf,OAChCrB,EAAYwrE,EAAS,CAGnBvrE,MAAOmZ,EAASuH,MAAM1gB,MACtBvD,SAAU0c,EAASuH,MAAMjkB,WAE3B6uE,EAAoBC,EAASC,GAEjC,EAKA0B,cAAe,SAAUppE,GACvB,IAAI/N,KAAKg2E,WAAch2E,KAAK23E,sBAA5B,CAIA,IAcIvzD,EAdAqxD,EAAmBz1E,KAAKu2E,kBAExBhyB,EAAKvkD,KAAKw2E,KAAK3wD,QAEfouD,EAASj0E,KAAK+1E,QACd6B,EAAcnC,EAAiB9oE,SAAS,UACxCizC,EAAS61B,EAAiBvyE,IAAI,UAElC,IAAK00E,EAAY10E,IAAI,UAAY08C,GAAqB,SAAXA,EAGzC,OAFAq0B,GAAU1vB,EAAGr6C,OAAO+pE,QACpBj0E,KAAK+1E,QAAU,MAMZ/1E,KAAK+1E,UACR3xD,GAAS,EACT6vD,EAASj0E,KAAK+1E,QAAUnuE,EAAQiwE,WAAWD,EAAY10E,IAAI,QAAS,CAClE+U,OAAQ,OACRugB,WAAW,EACXs/C,YAAa,SAAUp7C,GAErBk4C,EAAUv3B,KAAK3gB,EAAE53B,MACnB,EACAizE,YAAat0E,EAAKzD,KAAKg4E,kBAAmBh4E,KAAM,EAAG,GACnDuyC,MAAO9uC,EAAKzD,KAAKg4E,kBAAmBh4E,MACpCi4E,UAAWx0E,EAAKzD,KAAKk4E,iBAAkBl4E,QAEzCukD,EAAGp7C,IAAI8qE,IAGT2B,EAAqB3B,EAAQwB,GAAkB,GAE/C,IAAI0C,EAAgB,CAAC,QAAS,cAAe,cAAe,UAAW,cAAe,aAAc,gBAAiB,iBACrHlE,EAAO/+D,SAAS0iE,EAAY7/D,aAAa,KAAMogE,IAE/C,IAAIC,EAAaR,EAAY10E,IAAI,QAE5BpB,EAAO6Q,QAAQylE,KAClBA,EAAa,CAACA,EAAYA,IAG5BnE,EAAO7mE,KAAK,QAAS,CAACgrE,EAAW,GAAK,EAAGA,EAAW,GAAK,IACzDvD,EAAajtD,eAAe5nB,KAAM,yBAA0B43E,EAAY10E,IAAI,aAAe,EAAG,WAE9FlD,KAAKq4E,mBAAmBtqE,EAAOqW,EAhD/B,CAiDF,EAKAi0D,mBAAoB,SAAUtqE,EAAOqW,GACnCpa,EAAYhK,KAAKu2E,mBAAoBnyD,GAAUpkB,KAAK42E,eAAgB52E,KAAK+1E,QAASL,EAAoB11E,KAAKs4E,mBAAmBvqE,EAAO/N,KAAKs2E,WAAYt2E,KAAKu2E,oBAC7J,EAKAyB,kBAAmB,SAAUhyE,EAAIC,GAC/B,IAAIguE,EAASj0E,KAAK+1E,QAElB,GAAK9B,EAAL,CAIAj0E,KAAKg2E,WAAY,EAEjB,IAAIL,EAAQ31E,KAAK23E,sBAAsBjC,EAAoBzB,GAAS,CAACjuE,EAAIC,GAAKjG,KAAKs2E,WAAYt2E,KAAKu2E,mBACpGv2E,KAAKm2E,aAAeR,EACpB1B,EAAOpqC,gBACPoqC,EAAO7mE,KAAKsoE,EAAoBC,IAChCzyE,EAAI+wE,GAAQkB,SAAW,KAEvBn1E,KAAKu4E,wBAVL,CAWF,EAMAA,uBAAwB,WACtB,IAAItE,EAASj0E,KAAK+1E,QAElB,GAAK9B,EAAL,CAIA,IAAIuE,EAAcx4E,KAAKm2E,aACnBvsB,EAAY5pD,KAAKs2E,WAErBt2E,KAAKw2E,KAAKp7C,eAAe,CACvB14B,KAAM,oBACNuJ,EAAGusE,EAAYC,YAAY,GAC3BvsE,EAAGssE,EAAYC,YAAY,GAC3BC,cAAeF,EAAYE,cAC3BniC,SAAU,CAAC,CACTogB,QAAS/M,EAAUn2C,KAAK1K,IACxB4vE,UAAW/uB,EAAUkW,kBAZzB,CAeF,EAKAoY,iBAAkB,SAAUlD,GAC1Bh1E,KAAKg2E,WAAY,EACjB,IAAI/B,EAASj0E,KAAK+1E,QAElB,GAAK9B,EAAL,CAIA,IAAIlmE,EAAQ/N,KAAKu2E,kBAAkBrzE,IAAI,SAKvClD,KAAKq4E,mBAAmBtqE,GAIxB/N,KAAKw2E,KAAKp7C,eAAe,CACvB14B,KAAM,WAZR,CAcF,EAUA41E,mBAAoB,KAWpBX,sBAAuB,KAKvB/yB,MAAO,SAAUtiD,GACftC,KAAKi2E,WAAa,KAClBj2E,KAAKk2E,YAAc,KACnB,IAAI3xB,EAAKjiD,EAAIujB,QACTxd,EAAQrI,KAAK61E,OACb5B,EAASj0E,KAAK+1E,QAEdxxB,GAAMl8C,IACRrI,KAAK81E,gBAAkB,KACvBztE,GAASk8C,EAAGr6C,OAAO7B,GACnB4rE,GAAU1vB,EAAGr6C,OAAO+pE,GACpBj0E,KAAK61E,OAAS,KACd71E,KAAK+1E,QAAU,KACf/1E,KAAKm2E,aAAe,KAExB,EAKAyC,QAAS,WAAa,EAStBC,WAAY,SAAUzoE,EAAIC,EAAIyoE,GAE5B,OADAA,EAAYA,GAAa,EAClB,CACL7sE,EAAGmE,EAAG0oE,GACN5sE,EAAGkE,EAAG,EAAI0oE,GACVvtE,MAAO8E,EAAGyoE,GACV9sE,OAAQqE,EAAG,EAAIyoE,GAEnB,GAEF/D,EAAgB7yE,UAAUC,YAAc4yE,EA6CxCJ,EAAUoE,kBAAkBhE,GAC5B,IAAI5xE,EAAW4xE,EACf3xE,EAAOvB,QAAUsB,C,wBCtejB,IAAIyE,EAAUnG,EAAQ,OAElBszE,EAAkBtzE,EAAQ,OAE1Bu3E,EAAav3E,EAAQ,MAErBw3E,EAAsBx3E,EAAQ,OAE9By3E,EAAWz3E,EAAQ,OAEnB03E,EAAuBpE,EAAgBxtE,OAAO,CAIhDmvE,aAAc,SAAUtzD,EAAUrV,EAAO67C,EAAW6rB,EAAkBnzE,GACpE,IAAImR,EAAOm2C,EAAUn2C,KACjB5C,EAAO4C,EAAK5C,KACZuoE,EAAkB3D,EAAiBvyE,IAAI,QACvCm2E,EAAcC,EAAazoE,EAAM4C,GAAMR,aAAaQ,GAAMqnC,kBAC1Dy+B,EAAa9lE,EAAKN,cAAcM,EAAKL,YAAYrF,GAAO,IAE5D,GAAIqrE,GAAuC,SAApBA,EAA4B,CACjD,IAAIlmC,EAAU8lC,EAAWQ,aAAa/D,GAClCgC,EAAgBgC,EAAoBL,GAAiB3lE,EAAM8lE,EAAYF,EAAanmC,GACxFukC,EAAcpsE,MAAQ6nC,EACtB9vB,EAASuzD,WAAac,EAAc/0E,KACpC0gB,EAASqN,QAAUgnD,CACrB,CAEA,IAAIpmB,EAAa4nB,EAAoB1vE,OAAOsH,EAAKolB,MAAO2zB,GACxDovB,EAAWU,kCAAkC3rE,EAAOqV,EAAUiuC,EAAYzH,EAAW6rB,EAAkBnzE,EACzG,EAKAg2E,mBAAoB,SAAUvqE,EAAO67C,EAAW6rB,GAC9C,IAAIpkB,EAAa4nB,EAAoB1vE,OAAOqgD,EAAUn2C,KAAK5C,KAAKolB,MAAO2zB,EAAW,CAChF+vB,aAAa,IAGf,OADAtoB,EAAWuoB,YAAcnE,EAAiBvyE,IAAI,iBACvC,CACLwD,SAAUsyE,EAAWa,uBAAuBjwB,EAAUn2C,KAAM1F,EAAOsjD,GACnEp/C,SAAUo/C,EAAWp/C,UAAYo/C,EAAWyoB,eAAiB,EAAItzE,KAAK0L,GAAK,GAE/E,EAKAylE,sBAAuB,SAAU96C,EAAW+wB,EAAOhE,EAAW6rB,GAC5D,IAAIhiE,EAAOm2C,EAAUn2C,KACjB5C,EAAO4C,EAAK5C,KACZ2mE,EAAa/jE,EAAKqnC,iBAAgB,GAClCu+B,EAAcC,EAAazoE,EAAM4C,GAAMR,aAAaQ,GAAMqnC,kBAC1DhE,EAAwB,MAAbrjC,EAAK1K,IAAc,EAAI,EAClCgxE,EAAel9C,EAAUn2B,SAC7BqzE,EAAajjC,IAAa8W,EAAM9W,GAChCijC,EAAajjC,GAAYtwC,KAAKJ,IAAIoxE,EAAW,GAAIuC,EAAajjC,IAC9DijC,EAAajjC,GAAYtwC,KAAKF,IAAIkxE,EAAW,GAAIuC,EAAajjC,IAC9D,IAAIkjC,GAAoBX,EAAY,GAAKA,EAAY,IAAM,EACvDZ,EAAc,CAACuB,EAAkBA,GACrCvB,EAAY3hC,GAAYijC,EAAajjC,GAErC,IAAImjC,EAAiB,CAAC,CACpBxsD,cAAe,UACd,CACDysD,MAAO,WAET,MAAO,CACLxzE,SAAUqzE,EACV9nE,SAAU4qB,EAAU5qB,SACpBwmE,YAAaA,EACbC,cAAeuB,EAAenjC,GAElC,IAGF,SAASwiC,EAAazoE,EAAM4C,GAC1B,IAAI1C,EAAM,CAAC,EAEX,OADAA,EAAI0C,EAAK1K,IAAM,aAAe0K,EAAKnD,MAC5BO,EAAKyoE,aAAavoE,EAC3B,CAEA,IAAI0oE,EAAsB,CACxB96D,KAAM,SAAUlL,EAAM8lE,EAAYF,EAAanmC,GAC7C,IAAIlE,EAAcgqC,EAAWmB,cAAc,CAACZ,EAAYF,EAAY,IAAK,CAACE,EAAYF,EAAY,IAAKe,EAAgB3mE,IAKvH,OAJA7L,EAAQyyE,qBAAqB,CAC3BpwE,MAAO+kC,EACP3jC,MAAO6nC,IAEF,CACLxwC,KAAM,OACNuH,MAAO+kC,EAEX,EACAsrC,OAAQ,SAAU7mE,EAAM8lE,EAAYF,EAAanmC,GAC/C,IAAI72B,EAAY5I,EAAK+I,eACjB+9D,EAAOlB,EAAY,GAAKA,EAAY,GACxC,MAAO,CACL32E,KAAM,OACNuH,MAAO+uE,EAAWwB,cAAc,CAACjB,EAAal9D,EAAY,EAAGg9D,EAAY,IAAK,CAACh9D,EAAWk+D,GAAOH,EAAgB3mE,IAErH,GAGF,SAAS2mE,EAAgB3mE,GACvB,MAAoB,MAAbA,EAAK1K,IAAc,EAAI,CAChC,CAEAmwE,EAASuB,yBAAyB,uBAAwBtB,GAC1D,IAAIh2E,EAAWg2E,EACf/1E,EAAOvB,QAAUsB,C,wBChHjB,IAAIu3E,EAAaj5E,EAAQ,OAErBszE,EAAkBtzE,EAAQ,OAE1BmG,EAAUnG,EAAQ,OAElBu3E,EAAav3E,EAAQ,MAErBwiE,EAASxiE,EAAQ,OAEjBk5E,EAAcl5E,EAAQ,OAEtBy3E,EAAWz3E,EAAQ,OAEnBm5E,EAAmB7F,EAAgBxtE,OAAO,CAI5CmvE,aAAc,SAAUtzD,EAAUrV,EAAO67C,EAAW6rB,EAAkBnzE,GACpE,IAAImR,EAAOm2C,EAAUn2C,KAEJ,UAAbA,EAAK1K,MACP/I,KAAKo2E,mBAAqB5vE,KAAK0L,GAAK,IAGtC,IAGI2oE,EAHA9vE,EAAQ0I,EAAK1I,MACb+vE,EAAY/vE,EAAMkI,aAAaQ,GAC/B4lE,EAAcyB,EAAUp+D,YAE5Bm+D,EAAapnE,EAAK,SAAWinE,EAAWK,aAAatnE,EAAK1K,MAAMgF,GAChE,IAAIqrE,EAAkB3D,EAAiBvyE,IAAI,QAE3C,GAAIk2E,GAAuC,SAApBA,EAA4B,CACjD,IAAIlmC,EAAU8lC,EAAWQ,aAAa/D,GAClCgC,EAAgBgC,EAAoBL,GAAiB3lE,EAAM1I,EAAO8vE,EAAYxB,EAAanmC,GAC/FukC,EAAcpsE,MAAQ6nC,EACtB9vB,EAASuzD,WAAac,EAAc/0E,KACpC0gB,EAASqN,QAAUgnD,CACrB,CAEA,IAAImC,EAAcnE,EAAiBvyE,IAAI,gBACnC83E,EAAWC,EAAiBltE,EAAO67C,EAAW6rB,EAAkB1qE,EAAO6uE,GAC3EZ,EAAWkC,mBAAmB93D,EAAUwmC,EAAW6rB,EAAkBnzE,EAAK04E,EAC5E,IAIF,SAASC,EAAiBltE,EAAO67C,EAAW6rB,EAAkB1qE,EAAO6uE,GACnE,IAAInmE,EAAOm2C,EAAUn2C,KACjB9K,EAAQ8K,EAAKL,YAAYrF,GACzBotE,EAAYpwE,EAAMixC,eAAet/B,YAAY,GACjDy+D,EAAYA,EAAY,IAAM30E,KAAK0L,GACnC,IACIxL,EACAwzE,EACAzsD,EAHA0uB,EAAepxC,EAAMmxC,gBAAgBx/B,YAKzC,GAAiB,WAAbjJ,EAAK1K,IAAkB,CACzB,IAAI8zB,EAAYonC,EAAO7hE,SACvB6hE,EAAOzX,OAAO3vB,EAAWA,EAAWs+C,GACpClX,EAAO4E,UAAUhsC,EAAWA,EAAW,CAAC9xB,EAAMoB,GAAIpB,EAAMqB,KACxD1F,EAAWkB,EAAQg1B,eAAe,CAACj0B,GAAQixE,GAAc/8C,GACzD,IAAIu+C,EAAgBxxB,EAAUj9C,SAAS,aAAazJ,IAAI,WAAa,EACjE8pB,EAAc2tD,EAAYU,gBAAgBF,EAAWC,EAAgB50E,KAAK0L,GAAK,KAAM,GACzFgoE,EAAQltD,EAAYO,UACpBE,EAAgBT,EAAYQ,iBAC9B,KAAO,CAEL,IAAI/hB,EAAI0wC,EAAa,GACrBz1C,EAAWqE,EAAMuwE,aAAa,CAAC7vE,EAAImuE,EAAajxE,IAChD,IAAIwD,EAAKpB,EAAMoB,GACXC,EAAKrB,EAAMqB,GACf8tE,EAAQ1zE,KAAKiH,IAAI/G,EAAS,GAAKyF,GAAMV,EAAI,GAAM,SAAW/E,EAAS,GAAKyF,EAAK,OAAS,QACtFshB,EAAgBjnB,KAAKiH,IAAI/G,EAAS,GAAK0F,GAAMX,EAAI,GAAM,SAAW/E,EAAS,GAAK0F,EAAK,MAAQ,QAC/F,CAEA,MAAO,CACL1F,SAAUA,EACVwzE,MAAOA,EACPzsD,cAAeA,EAEnB,CAEA,IAAIgsD,EAAsB,CACxB96D,KAAM,SAAUlL,EAAM1I,EAAO8vE,EAAYxB,EAAanmC,GACpD,MAAoB,UAAbz/B,EAAK1K,IAAkB,CAC5BrG,KAAM,OACNuH,MAAO+uE,EAAWmB,cAAcpvE,EAAMuwE,aAAa,CAACjC,EAAY,GAAIwB,IAAc9vE,EAAMuwE,aAAa,CAACjC,EAAY,GAAIwB,MACpH,CACFn4E,KAAM,SACNuH,MAAO,CACLkC,GAAIpB,EAAMoB,GACVC,GAAIrB,EAAMqB,GACVX,EAAGovE,GAGT,EACAP,OAAQ,SAAU7mE,EAAM1I,EAAO8vE,EAAYxB,EAAanmC,GACtD,IAAI72B,EAAY5I,EAAK+I,eACjB++D,EAAS/0E,KAAK0L,GAAK,IACvB,MAAoB,UAAbuB,EAAK1K,IAAkB,CAC5BrG,KAAM,SACNuH,MAAO+uE,EAAWwC,gBAAgBzwE,EAAMoB,GAAIpB,EAAMqB,GAAIitE,EAAY,GAAIA,EAAY,KAChFwB,EAAax+D,EAAY,GAAKk/D,GAAuBl/D,EAAY,EAAzBw+D,GAA8BU,IACtE,CACF74E,KAAM,SACNuH,MAAO+uE,EAAWwC,gBAAgBzwE,EAAMoB,GAAIpB,EAAMqB,GAAIyuE,EAAax+D,EAAY,EAAGw+D,EAAax+D,EAAY,EAAG,EAAa,EAAV7V,KAAK0L,IAE1H,GAEFgnE,EAASuB,yBAAyB,mBAAoBG,GACtD,IAAIz3E,EAAWy3E,EACfx3E,EAAOvB,QAAUsB,C,wBChHjB,IAAIyE,EAAUnG,EAAQ,OAElBszE,EAAkBtzE,EAAQ,OAE1Bu3E,EAAav3E,EAAQ,MAErBg6E,EAAmBh6E,EAAQ,MAE3By3E,EAAWz3E,EAAQ,OAEnBi6E,EAAK,CAAC,IAAK,KACXC,EAAK,CAAC,QAAS,UACfC,EAAoB7G,EAAgBxtE,OAAO,CAI7CmvE,aAAc,SAAUtzD,EAAUrV,EAAO67C,EAAW6rB,EAAkBnzE,GACpE,IAAImR,EAAOm2C,EAAUn2C,KACjB3Q,EAAW2Q,EAAKvO,iBAChBm0E,EAAcv+B,EAAgBh4C,EAAU,EAAI+4E,EAAiBpoE,IAC7D8lE,EAAaz2E,EAASiD,YAAYgI,GAAO,GACzCqrE,EAAkB3D,EAAiBvyE,IAAI,QAE3C,GAAIk2E,GAAuC,SAApBA,EAA4B,CACjD,IAAIlmC,EAAU8lC,EAAWQ,aAAa/D,GAClCgC,EAAgBgC,EAAoBL,GAAiB3lE,EAAM8lE,EAAYF,EAAanmC,GACxFukC,EAAcpsE,MAAQ6nC,EACtB9vB,EAASuzD,WAAac,EAAc/0E,KACpC0gB,EAASqN,QAAUgnD,CACrB,CAEA,IAAIpmB,EAAaoqB,EAAiBlyE,OAAOqgD,GACzCovB,EAAWU,kCAAkC3rE,EAAOqV,EAAUiuC,EAAYzH,EAAW6rB,EAAkBnzE,EACzG,EAKAg2E,mBAAoB,SAAUvqE,EAAO67C,EAAW6rB,GAC9C,IAAIpkB,EAAaoqB,EAAiBlyE,OAAOqgD,EAAW,CAClD+vB,aAAa,IAGf,OADAtoB,EAAWuoB,YAAcnE,EAAiBvyE,IAAI,iBACvC,CACLwD,SAAUsyE,EAAWa,uBAAuBjwB,EAAUn2C,KAAM1F,EAAOsjD,GACnEp/C,SAAUo/C,EAAWp/C,UAAYo/C,EAAWyoB,eAAiB,EAAItzE,KAAK0L,GAAK,GAE/E,EAKAylE,sBAAuB,SAAU96C,EAAW+wB,EAAOhE,EAAW6rB,GAC5D,IAAIhiE,EAAOm2C,EAAUn2C,KACjB3Q,EAAW2Q,EAAKvO,iBAChB4xC,EAAW+kC,EAAiBpoE,GAC5B+jE,EAAa18B,EAAgBh4C,EAAUg0C,GACvCijC,EAAel9C,EAAUn2B,SAC7BqzE,EAAajjC,IAAa8W,EAAM9W,GAChCijC,EAAajjC,GAAYtwC,KAAKJ,IAAIoxE,EAAW,GAAIuC,EAAajjC,IAC9DijC,EAAajjC,GAAYtwC,KAAKF,IAAIkxE,EAAW,GAAIuC,EAAajjC,IAC9D,IAAIuiC,EAAcv+B,EAAgBh4C,EAAU,EAAIg0C,GAC5CkjC,GAAoBX,EAAY,GAAKA,EAAY,IAAM,EACvDZ,EAAc,CAACuB,EAAkBA,GAErC,OADAvB,EAAY3hC,GAAYijC,EAAajjC,GAC9B,CACLpwC,SAAUqzE,EACV9nE,SAAU4qB,EAAU5qB,SACpBwmE,YAAaA,EACbC,cAAe,CACbjrD,cAAe,UAGrB,IAEEgsD,EAAsB,CACxB96D,KAAM,SAAUlL,EAAM8lE,EAAYF,EAAanmC,GAC7C,IAAIlE,EAAcgqC,EAAWmB,cAAc,CAACZ,EAAYF,EAAY,IAAK,CAACE,EAAYF,EAAY,IAAKwC,EAAiBpoE,IAKxH,OAJA7L,EAAQyyE,qBAAqB,CAC3BpwE,MAAO+kC,EACP3jC,MAAO6nC,IAEF,CACLxwC,KAAM,OACNuH,MAAO+kC,EAEX,EACAsrC,OAAQ,SAAU7mE,EAAM8lE,EAAYF,EAAanmC,GAC/C,IAAI72B,EAAY5I,EAAK+I,eACjB+9D,EAAOlB,EAAY,GAAKA,EAAY,GACxC,MAAO,CACL32E,KAAM,OACNuH,MAAO+uE,EAAWwB,cAAc,CAACjB,EAAal9D,EAAY,EAAGg9D,EAAY,IAAK,CAACh9D,EAAWk+D,GAAOsB,EAAiBpoE,IAEtH,GAGF,SAASooE,EAAiBpoE,GACxB,OAAOA,EAAK3K,eAAiB,EAAI,CACnC,CAEA,SAASgyC,EAAgBh4C,EAAUg0C,GACjC,IAAIpsC,EAAO5H,EAASgO,UACpB,MAAO,CAACpG,EAAKgxE,EAAG5kC,IAAYpsC,EAAKgxE,EAAG5kC,IAAapsC,EAAKixE,EAAG7kC,IAC3D,CAEAoiC,EAASuB,yBAAyB,oBAAqBmB,GACvD,IAAIz4E,EAAWy4E,EACfx4E,EAAOvB,QAAUsB,C,iCC5GjB,IAAIrB,EAASL,EAAQ,OAEjB84C,EAAY94C,EAAQ,OAEpBq6E,EAAcr6E,EAAQ,OAEtBs6E,EAAsBt6E,EAAQ,OAE9Be,EAAOV,EAAOU,KACd0E,EAAQpF,EAAOoF,MACfhE,EAAMq3C,EAAUu6B,aA6BpB,SAAS3xE,EAASY,EAAS1B,EAASC,GAClC,IAAImyE,EAAc1wE,EAAQ0wE,YACtB3uE,EAAQ,CAAC/B,EAAQkI,EAAGlI,EAAQmI,GAC5B8vE,EAASj4E,EACTq3B,EAAiBr3B,EAAQq3B,gBAAkBt5B,EAAO2B,KAAKnB,EAAI84B,eAAgB94B,GAC3EkxE,EAAmBnxE,EAAQ22C,aAAa,eAAew6B,iBAG3D,GAAKA,EAAL,CAIIyI,EAAan2E,KAGfA,EAAQi2E,EAAoB,CAC1B78D,YAAa88D,EAAO98D,YAGpB3a,UAAWy3E,EAAOz3E,WACjBlC,GAASyD,OAGd,IAAIo2E,EAAiBD,EAAan2E,GAK9Bq2E,EAAgBH,EAAOzlC,SACvBA,EAAWi9B,EAAiBj9B,SAC5B6lC,EAA6B,UAAhB3H,GAA2BwH,EAAan2E,GACrDu2E,EAAe,CAAC,EAChBC,EAAe,CAAC,EAChBC,EAAiB,CACnB55E,KAAM,GACN+0B,IAAK,CAAC,GAEJ8kD,EAAW,CACbC,YAAav1E,EAAMu1E,EAAaH,GAChCI,YAAax1E,EAAMw1E,EAAaH,IAGlC/5E,EAAKgxE,EAAiBmJ,aAAa,SAAU75E,EAAU85E,GAErD,IAAIC,EAAwBX,GAAkBp5E,EAASyqD,aAAaznD,GACpEtD,EAAKgxE,EAAiBA,iBAAiBoJ,IAAc,SAAUE,EAAUn7E,GACvE,IAAI8R,EAAOqpE,EAASrpE,KAChBspE,EAAgBC,EAAkBb,EAAeW,GAErD,IAAKV,GAAcS,KAA2BV,GAAiBY,GAAgB,CAC7E,IAAI5+D,EAAM4+D,GAAiBA,EAAchvE,MAE9B,MAAPoQ,GAAgB+9D,IAClB/9D,EAAM1K,EAAKvN,YAAYJ,IAGlB,MAAPqY,GAAe8+D,EAAcH,EAAU3+D,EAAKq+D,GAAU,EAAOH,EAC/D,CACF,GACF,IAEA,IAAIa,EAAe,CAAC,EAsBpB,OArBA16E,EAAK+zC,GAAU,SAAU4mC,EAAaC,GACpC,IAAIC,EAAYF,EAAYE,UAExBA,IAAcf,EAAac,IAC7B56E,EAAK66E,EAAU9mC,UAAU,SAAU+mC,EAAaC,GAC9C,IAAIC,EAAalB,EAAaiB,GAE9B,GAAID,IAAgBH,GAAeK,EAAY,CAC7C,IAAIr/D,EAAMq/D,EAAWzvE,MACrBsvE,EAAUI,SAAWt/D,EAAMg/D,EAAY1pE,KAAKhN,MAAMiN,MAAM2pE,EAAUI,OAAOt/D,EAAKu/D,EAAgBJ,GAAcI,EAAgBP,MAC5HD,EAAaC,EAAYx7E,KAAOwc,CAClC,CACF,GAEJ,IACA3b,EAAK06E,GAAc,SAAU/+D,EAAKi/D,GAChCH,EAAc1mC,EAAS6mC,GAASj/D,EAAKq+D,GAAU,EAAMH,EACvD,IACAsB,EAAoBrB,EAAc/lC,EAAU8lC,GAC5CuB,EAAwBrB,EAAgBz2E,EAAO/B,EAASq3B,GACxDyiD,EAAyBtnC,EAAUnb,EAAgB94B,GAC5C+5E,CAzEP,CA0EF,CAEA,SAASY,EAAcH,EAAUgB,EAAUtB,EAAUuB,EAAU1B,GAC7D,IAAI5oE,EAAOqpE,EAASrpE,KAEpB,IAAIA,EAAKhN,MAAMu3E,WAAcvqE,EAAKwqE,YAAYH,GAI9C,GAAKhB,EAASoB,cAAd,CAMA,IAAI1F,EAAc2F,EAAsBL,EAAUhB,GAC9CsB,EAAe5F,EAAY4F,aAC3BC,EAAc7F,EAAY6F,YAG1BD,EAAa,IAAkC,MAA5B/B,EAAan9D,aAClCpd,EAAOyF,OAAO80E,EAAc+B,EAAa,KAKtCL,GAAYjB,EAASjJ,MACpBpgE,EAAKwqE,YAAYI,IAA+B,MAAfA,IACnCP,EAAWO,GAIf7B,EAASC,YAAYK,EAAUgB,EAAUM,EAAc/B,GAGvDG,EAASE,YAAYI,EAAUtE,EAAa6F,EAvB5C,MAFE7B,EAASC,YAAYK,EAAUgB,EA0BnC,CAEA,SAASK,EAAsBpwE,EAAO+uE,GACpC,IAAIrpE,EAAOqpE,EAASrpE,KAChB1K,EAAM0K,EAAK1K,IACXs1E,EAActwE,EACdqwE,EAAe,GACf/mB,EAAUpJ,OAAOC,UACjBowB,GAAW,EA8Cf,OA7CA97E,EAAKs6E,EAASlhE,cAAc,SAAUkG,EAAQrd,GAC5C,IACI85E,EACA9mB,EAFA+mB,EAAU18D,EAAOwlB,kBAAkBv+B,GAIvC,GAAI+Y,EAAOq1C,mBAAoB,CAC7B,IAAIl7C,EAAS6F,EAAOq1C,mBAAmBqnB,EAASzwE,EAAO0F,GACvDgkD,EAAcx7C,EAAOw7C,YACrB8mB,EAAqBtiE,EAAOm7C,YAC9B,KAAO,CAKL,GAJAK,EAAc31C,EAAOtd,UAAUi6E,iBAAiBD,EAAQ,GAAIzwE,GAE5D,EAAqB,aAAd0F,EAAK/Q,KAAsB,GAAM,OAEnC+0D,EAAYtjD,OACf,OAGFoqE,EAAqBz8D,EAAOtd,UAAUtB,IAAIs7E,EAAQ,GAAI/mB,EAAY,GACpE,CAEA,GAA0B,MAAtB8mB,GAA+BxtC,SAASwtC,GAA5C,CAIA,IAAIr1E,EAAO6E,EAAQwwE,EACfj0C,EAAO9jC,KAAKiH,IAAIvE,GAEhBohC,GAAQ+sB,KACN/sB,EAAO+sB,GAAWnuD,GAAQ,GAAKo1E,EAAU,KAC3CjnB,EAAU/sB,EACVg0C,EAAUp1E,EACVm1E,EAAcE,EACdH,EAAajqE,OAAS,GAGxB3R,EAAKi1D,GAAa,SAAUlzD,GAC1B65E,EAAap9E,KAAK,CAChBke,YAAa4C,EAAO5C,YACpByH,gBAAiBpiB,EACjBA,UAAWud,EAAOtd,UAAUoiB,YAAYriB,IAE5C,IAnBF,CAqBF,IACO,CACL65E,aAAcA,EACdC,YAAaA,EAEjB,CAEA,SAAS5B,EAAYH,EAAcQ,EAAU/uE,EAAOqwE,GAClD9B,EAAaQ,EAASn7E,KAAO,CAC3BoM,MAAOA,EACPqwE,aAAcA,EAElB,CAEA,SAAS1B,EAAYH,EAAgBO,EAAUtE,EAAazqE,GAC1D,IAAIqwE,EAAe5F,EAAY4F,aAC3B3qE,EAAOqpE,EAASrpE,KAChBm2C,EAAYn2C,EAAKwiB,MACjBw/C,EAAmBqH,EAASrH,iBAGhC,GAAKqH,EAAShJ,gBAAmBsK,EAAajqE,OAA9C,CAIA,IAAIuqE,EAAgB5B,EAASh6E,SAASmzB,MAClC2mD,EAAcd,EAAY6C,QAAQD,GAClCE,EAAerC,EAAe7kD,IAAIklD,GAEjCgC,IACHA,EAAerC,EAAe7kD,IAAIklD,GAAe,CAC/CiC,WAAYH,EAAcr4D,GAC1By4D,cAAeJ,EAAc5e,eAC7B5+B,aAAcw9C,EAAch8E,KAC5Bq8E,iBAAkBL,EAAcx6E,SAChC86E,WAAY,IAEdzC,EAAe55E,KAAK3B,KAAK49E,IAG3BA,EAAaI,WAAWh+E,KAAK,CAC3B21D,QAASljD,EAAK1K,IACd4vE,UAAW/uB,EAAUkW,eACrB5oB,SAAU0S,EAAUlnD,KACpBu8E,OAAQr1B,EAAUvjC,GAClBtY,MAAOA,EAKPmxE,cAAe,CACblL,UAAWyB,EAAiBvyE,IAAI,mBAChCy1B,UAAW88C,EAAiBvyE,IAAI,oBAElCi8E,kBAAmBf,EAAap7E,SA/BlC,CAiCF,CAEA,SAAS26E,EAAoBrB,EAAc/lC,EAAU8lC,GACnD,IAAI+C,EAAiB/C,EAAa9lC,SAAW,GAE7C/zC,EAAK+zC,GAAU,SAAUumC,EAAUn7E,GACjC,IAAIkM,EAASivE,EAASrH,iBAAiB5nE,OACnCwxE,EAAU/C,EAAa36E,GAEvB09E,IACDvC,EAASwC,YAAczxE,EAAO+xC,OAAS,QACxC/xC,EAAOE,MAAQsxE,EAAQtxE,MAEvBF,EAAOsxE,mBAAqBE,EAAQjB,cAAgB,IAAIp7E,UAMrD85E,EAASwC,YAAczxE,EAAO+xC,OAAS,QAI1B,SAAlB/xC,EAAO+xC,QAAqBw/B,EAAep+E,KAAK,CAC9C21D,QAASmmB,EAASrpE,KAAK1K,IACvB4vE,UAAWmE,EAASrpE,KAAKwiB,MAAM6pC,eAC/B/xD,MAAOF,EAAOE,OAElB,GACF,CAEA,SAAS6vE,EAAwBrB,EAAgBz2E,EAAO/B,EAASq3B,GAE/D,IAAI6gD,EAAan2E,IAAWy2E,EAAe55E,KAAKwR,OAAhD,CAWA,IAAI6hC,IAAeumC,EAAe55E,KAAK,GAAGq8E,WAAW,IAAM,CAAC,GAAGG,mBAAqB,IAAI,IAAM,CAAC,EAC/F/jD,EAAe,CACb14B,KAAM,UACN68E,eAAe,EACftzE,EAAGnG,EAAM,GACToG,EAAGpG,EAAM,GACT4yE,cAAe30E,EAAQ20E,cACvBhyE,SAAU3C,EAAQ2C,SAClBigB,gBAAiBqvB,EAAWrvB,gBAC5BpiB,UAAWyxC,EAAWzxC,UACtB2a,YAAa82B,EAAW92B,YACxBq9D,eAAgBA,EAAe55E,MAjBjC,MAJEy4B,EAAe,CACb14B,KAAM,WAsBZ,CAEA,SAASm7E,EAAyBtnC,EAAUnb,EAAgB94B,GAI1D,IAAIiiD,EAAKjiD,EAAIujB,QACT25D,EAAc,4BACdC,EAAiBv8E,EAAIqhD,GAAIi7B,IAAgB,CAAC,EAC1CE,EAAgBx8E,EAAIqhD,GAAIi7B,GAAe,CAAC,EAG5Ch9E,EAAK+zC,GAAU,SAAUumC,EAAUn7E,GACjC,IAAIkM,EAASivE,EAASrH,iBAAiB5nE,OACrB,SAAlBA,EAAO+xC,QAAqBp9C,EAAKqL,EAAOsxE,mBAAmB,SAAUQ,GACnE,IAAIh+E,EAAMg+E,EAAUzgE,YAAc,MAAQygE,EAAUp7E,UACpDm7E,EAAc/9E,GAAOg+E,CACvB,GACF,IAEA,IAAIC,EAAc,GACdC,EAAa,GACjB/9E,EAAOU,KAAKi9E,GAAgB,SAAUE,EAAWh+E,IAC9C+9E,EAAc/9E,IAAQk+E,EAAW7+E,KAAK2+E,EACzC,IACA79E,EAAOU,KAAKk9E,GAAe,SAAUC,EAAWh+E,IAC7C89E,EAAe99E,IAAQi+E,EAAY5+E,KAAK2+E,EAC3C,IACAE,EAAW1rE,QAAU7R,EAAI84B,eAAe,CACtC14B,KAAM,WACN68E,eAAe,EACfO,MAAOD,IAETD,EAAYzrE,QAAU7R,EAAI84B,eAAe,CACvC14B,KAAM,YACN68E,eAAe,EACfO,MAAOF,GAEX,CAEA,SAAS5C,EAAkBb,EAAeW,GACxC,IAAK,IAAI7mE,EAAI,EAAGA,GAAKkmE,GAAiB,IAAIhoE,OAAQ8B,IAAK,CACrD,IAAI8mE,EAAgBZ,EAAclmE,GAElC,GAAI6mE,EAASrpE,KAAK1K,MAAQg0E,EAAcpmB,SAAWmmB,EAASrpE,KAAKwiB,MAAM6pC,iBAAmBid,EAAcpE,UACtG,OAAOoE,CAEX,CACF,CAEA,SAASW,EAAgBZ,GACvB,IAAIlzB,EAAYkzB,EAASrpE,KAAKwiB,MAC1B3N,EAAO,CAAC,EACRvf,EAAMuf,EAAKquC,QAAUmmB,EAASrpE,KAAK1K,IAIvC,OAHAuf,EAAKqwD,UAAYrwD,EAAKvf,EAAM,aAAe6gD,EAAUkW,eACrDx3C,EAAKy3D,SAAWz3D,EAAKvf,EAAM,YAAc6gD,EAAUpmD,KACnD8kB,EAAK22D,OAAS32D,EAAKvf,EAAM,UAAY6gD,EAAUvjC,GACxCiC,CACT,CAEA,SAAS2zD,EAAan2E,GACpB,OAAQA,GAAqB,MAAZA,EAAM,IAAcuY,MAAMvY,EAAM,KAAmB,MAAZA,EAAM,IAAcuY,MAAMvY,EAAM,GAC1F,CAEA1C,EAAOvB,QAAUsB,C,wBCrYjB,IAAIrB,EAASL,EAAQ,OAEjB84C,EAAY94C,EAAQ,OAOxB,SAAS0B,EAAS64E,EAAQ35E,GACxB,IAEIgC,EAFAyB,EAAQ,GACRoZ,EAAc88D,EAAO98D,YAGzB,GAAmB,MAAfA,KAAyB7a,EAAchC,EAAQ29E,iBAAiB9gE,IAClE,MAAO,CACLpZ,MAAO,IAIX,IAAIlF,EAAOyD,EAAYG,UACnBD,EAAYg2C,EAAU2E,eAAet+C,EAAMo7E,GAE/C,GAAiB,MAAbz3E,GAAqBzC,EAAO6Q,QAAQpO,GACtC,MAAO,CACLuB,MAAO,IAIX,IAAI2D,EAAK7I,EAAKmJ,iBAAiBxF,GAC3BzB,EAAWuB,EAAYa,iBAE3B,GAAIb,EAAYuiD,mBACd9gD,EAAQzB,EAAYuiD,mBAAmBriD,IAAc,QAChD,GAAIzB,GAAYA,EAASiD,YAC9BD,EAAQhD,EAASiD,YAAYnF,EAAKq/E,UAAUn+E,EAAO41B,IAAI50B,EAAS+W,YAAY,SAAU9Q,GACpF,OAAO1E,EAAYijC,kBAAkBv+B,GAAK,EAC5C,IAAIxE,GAAW,KAAU,QACpB,GAAIkF,EAAI,CAEb,IAAIiB,EAAOjB,EAAGkzB,kBAAkBpY,QAChC7Z,EAAKkyB,eAAenzB,EAAGozB,WACvB/2B,EAAQ,CAAC4E,EAAKuB,EAAIvB,EAAKa,MAAQ,EAAGb,EAAKwB,EAAIxB,EAAKsB,OAAS,EAC3D,CAEA,MAAO,CACLlG,MAAOA,EACP2D,GAAIA,EAER,CAEArG,EAAOvB,QAAUsB,C,iCCnDjB,IAAIrB,EAASL,EAAQ,OAEjBy+E,EAAMz+E,EAAQ,OAEd84C,EAAY94C,EAAQ,OAEpByB,EAAMq3C,EAAUu6B,aAChBtyE,EAAOV,EAAOU,KASlB,SAASlB,EAASK,EAAKW,EAAK69E,GAC1B,IAAID,EAAIlkD,KAAR,CAIA,IAAIuoB,EAAKjiD,EAAIujB,QACb3iB,EAAIqhD,GAAI67B,UAAYl9E,EAAIqhD,GAAI67B,QAAU,CAAC,GACvCC,EAAoB97B,EAAIjiD,GACxB,IAAIg+E,EAASp9E,EAAIqhD,GAAI67B,QAAQz+E,KAASuB,EAAIqhD,GAAI67B,QAAQz+E,GAAO,CAAC,GAC9D2+E,EAAOH,QAAUA,CANjB,CAOF,CAEA,SAASE,EAAoB97B,EAAIjiD,GAW/B,SAASi+E,EAAWC,EAAWhpE,GAC7B+sC,EAAGjkD,GAAGkgF,GAAW,SAAU9jD,GACzB,IAAI+jD,EAAMC,EAAmBp+E,GAC7BE,EAAKU,EAAIqhD,GAAI67B,SAAS,SAAUE,GAC9BA,GAAU9oE,EAAG8oE,EAAQ5jD,EAAG+jD,EAAIrlD,eAC9B,IACAulD,EAAuBF,EAAIG,SAAUt+E,EACvC,GACF,CAlBIY,EAAIqhD,GAAIs8B,cAIZ39E,EAAIqhD,GAAIs8B,aAAc,EACtBN,EAAW,QAASz+E,EAAOoF,MAAM45E,EAAS,UAC1CP,EAAW,YAAaz+E,EAAOoF,MAAM45E,EAAS,cAE9CP,EAAW,YAAaQ,GAW1B,CAEA,SAASJ,EAAuBC,EAAUt+E,GACxC,IAEI0+E,EAFAC,EAAUL,EAASM,QAAQ/sE,OAC3BgtE,EAAUP,EAASQ,QAAQjtE,OAG3B8sE,EACFD,EAAkBJ,EAASM,QAAQD,EAAU,GACpCE,IACTH,EAAkBJ,EAASQ,QAAQD,EAAU,IAG3CH,IACFA,EAAgB5lD,eAAiB,KACjC94B,EAAI84B,eAAe4lD,GAEvB,CAEA,SAASD,EAAQT,EAAQ5jD,EAAGtB,GAC1BklD,EAAOH,QAAQ,QAAS,KAAM/kD,EAChC,CAEA,SAAS0lD,EAAQrM,EAAa6L,EAAQ5jD,EAAGtB,GACvCklD,EAAOH,QAAQ1L,EAAa/3C,EAAGtB,EACjC,CAEA,SAASslD,EAAmBp+E,GAC1B,IAAIs+E,EAAW,CACbM,QAAS,GACTE,QAAS,IAOPhmD,EAAiB,SAAUr3B,GAC7B,IAAIs9E,EAAcT,EAAS78E,EAAQrB,MAE/B2+E,EACFA,EAAYrgF,KAAK+C,IAEjBA,EAAQq3B,eAAiBA,EACzB94B,EAAI84B,eAAer3B,GAEvB,EAEA,MAAO,CACLq3B,eAAgBA,EAChBwlD,SAAUA,EAEd,CAOA,SAASlM,EAAW/yE,EAAKW,GACvB,IAAI49E,EAAIlkD,KAAR,CAIA,IAAIuoB,EAAKjiD,EAAIujB,QACTy6D,GAAUp9E,EAAIqhD,GAAI67B,SAAW,CAAC,GAAGz+E,GAEjC2+E,IACFp9E,EAAIqhD,GAAI67B,QAAQz+E,GAAO,KANzB,CAQF,CAEAE,EAAQP,SAAWA,EACnBO,EAAQ6yE,WAAaA,C,iCCzHrB,IAAI5yE,EAASL,EAAQ,OAEjBsG,EAAQtG,EAAQ,OAEhBe,EAAOV,EAAOU,KACd0E,EAAQpF,EAAOoF,MAGnB,SAASusE,EAAQpxE,EAASC,GACxB,IAAI2Z,EAAS,CAcXs6B,SAAU,CAAC,EACX+qC,gBAAgB,EAMhB9N,iBAAkB,CAAC,EACnBmJ,YAAa,CAAC,GAKhB,OAHA4E,EAAgBtlE,EAAQ5Z,EAASC,GAEjC2Z,EAAOqlE,gBAAkBE,EAAkBvlE,EAAQ5Z,GAC5C4Z,CACT,CAEA,SAASslE,EAAgBtlE,EAAQ5Z,EAASC,GACxC,IAAIkyE,EAAqBnyE,EAAQ22C,aAAa,WAC1Cu7B,EAAyBlyE,EAAQ22C,aAAa,eAE9CyoC,EAAclN,EAAuBrxE,IAAI,QAAQ,IAAS,GAC1Dw+E,EAAa,GAEjBl/E,EAAKF,EAAIS,wBAAwB,SAAUD,GAEzC,GAAKA,EAAS6+E,mBAAd,CAIA,IAAI/E,EAAc+B,EAAQ77E,EAASmzB,OAC/B2rD,EAAqB3lE,EAAOu3D,iBAAiBoJ,GAAe,CAAC,EACjE3gE,EAAO0gE,YAAYC,GAAe95E,EAGlC,IAAI47E,EAAgB57E,EAASmzB,MACzB4rD,EAAmBnD,EAAc/xE,SAAS,UAAW6nE,GAIzD,GAHAhyE,EAAKM,EAASg/E,UAAW56E,EAAM66E,GAAqB,EAAO,OAGvDj/E,EAASk/E,gBAAkBxN,GAE5BqN,EAAiB3+E,IAAI,QAAS,CAG/B,IAAI++E,EAAkD,SAApCJ,EAAiB3+E,IAAI,WACnCg/E,EAAqD,UAA7CL,EAAiB3+E,IAAI,oBAC7Bi/E,EAAcr/E,EAASk/E,eAAeH,EAAiB3+E,IAAI,sBAE3D++E,GAAeC,IACjB1/E,EAAK2/E,EAAYC,SAAUl7E,EAAM66E,GAAqBG,GAAQ,QAAgBD,IAG5EC,GACF1/E,EAAK2/E,EAAYE,UAAWn7E,EAAM66E,EAAqB,SAAS,GAEpE,CA5BA,CAgCA,SAASA,EAAoBO,EAAaxO,EAAgBrgE,GACxD,IAAIgiE,EAAmBhiE,EAAKwiB,MAAMtpB,SAAS,cAAe4nE,GACtDgO,EAAkB9M,EAAiBvyE,IAAI,QAE3C,GAAKq/E,IAAuC,SAApBA,GAA+BD,GAAgBE,EAAgB/M,IAAvF,CAIsB,MAAlB3B,IACFA,EAAiB2B,EAAiBvyE,IAAI,mBAGxCuyE,EAAmB6M,EAAcG,EAAqBhvE,EAAMouE,EAAkBtN,EAAwBlyE,EAASigF,EAAaxO,GAAkB2B,EAC9I,IAAI5B,EAAO4B,EAAiBvyE,IAAI,QAC5BvB,EAAMg9E,EAAQlrE,EAAKwiB,OACnBioD,EAAgBpK,GAAkBD,GAAsB,aAAdpgE,EAAK/Q,KAE/Co6E,EAAW7gE,EAAOs6B,SAAS50C,GAAO,CACpCA,IAAKA,EACL8R,KAAMA,EACN3Q,SAAUA,EACV2yE,iBAAkBA,EAClB3B,eAAgBA,EAChBoK,cAAeA,EACfrK,KAAMA,EACNyL,UAAWkD,EAAgB/M,GAC3B75D,aAAc,IAEhBgmE,EAAmBjgF,GAAOm7E,EAC1B7gE,EAAOqlE,gBAAkBpD,EACzB,IAAIwE,EAAaC,EAAkBlB,EAAahuE,GAEhD,GAAkB,MAAdivE,EAAoB,CACtB,IAAIrF,EAAYqE,EAAWgB,KAAgBhB,EAAWgB,GAAc,CAClEnsC,SAAU,CAAC,IAEb8mC,EAAU9mC,SAAS50C,GAAOm7E,EAC1BO,EAAUI,OAASgE,EAAYiB,GAAYjF,OAC3CX,EAASO,UAAYA,CACvB,CAjCA,CAkCF,CACF,GACF,CAEA,SAASoF,EAAqBhvE,EAAMouE,EAAkBtN,EAAwBlyE,EAASigF,EAAaxO,GAClG,IAAI8O,EAA0Bf,EAAiBl1E,SAAS,eACpDk2E,EAAiB,CAAC,EACtBrgF,EAAK,CAAC,OAAQ,OAAQ,YAAa,cAAe,QAAS,YAAa,0BAA2B,wBAAyB,MAAM,SAAUsgF,GAC1ID,EAAeC,GAAShhF,EAAOyiB,MAAMq+D,EAAwB1/E,IAAI4/E,GACnE,IAIAD,EAAehP,KAAqB,aAAdpgE,EAAK/Q,QAAyBoxE,EAGR,UAAxC8O,EAAwB1/E,IAAI,UAC9B2/E,EAAengF,KAAO,QAGxB,IAAIqgF,EAAcF,EAAel4D,QAAUk4D,EAAel4D,MAAQ,CAAC,GAInE,GAFoB,MAApBo4D,EAAYr4D,OAAiBq4D,EAAYr4D,MAAO,GAE5B,UAAhB43D,IAEFS,EAAYr4D,MAAO,GAGdopD,GAAgB,CACnB,IAAIkP,EAAaH,EAAeh3D,UAAY+2D,EAAwB1/E,IAAI,cACxE8/E,GAAclhF,EAAOkL,SAAS+1E,EAAaC,EAAWphB,UACxD,CAGF,OAAOnuD,EAAKwiB,MAAMtpB,SAAS,cAAe,IAAI5E,EAAM86E,EAAgBtO,EAAwBlyE,GAC9F,CAEA,SAASm/E,EAAkBvlE,EAAQ5Z,GAEjCA,EAAQ4gF,YAAW,SAAU5+E,GAE3B,IAAIvB,EAAWuB,EAAYa,iBACvBg+E,EAAuB7+E,EAAYnB,IAAI,mBAAmB,GAC1DigF,EAAoB9+E,EAAYnB,IAAI,gBAAgB,GAEnDJ,GAAqC,SAAzBogF,IAA4D,IAAzBA,GAA2D,SAAzBA,IAAyD,IAAtBC,IAA6E,IAA9C9+E,EAAYnB,IAAI,oBAAoB,IAI5LV,EAAKyZ,EAAOu3D,iBAAiBmL,EAAQ77E,EAASmzB,SAAS,SAAU6mD,GAC/D,IAAIrpE,EAAOqpE,EAASrpE,KAEhB3Q,EAASikC,QAAQtzB,EAAK1K,OAAS0K,IACjCqpE,EAASlhE,aAAa5a,KAAKqD,GACC,MAA5By4E,EAASxF,kBAA4BwF,EAASxF,gBAAkB,GAChEwF,EAASxF,iBAAmBjzE,EAAYG,UAAUwS,QAEtD,GACF,GAAGhX,KACL,CAiBA,SAAS2iF,EAAkBlB,EAAahuE,GAItC,IAHA,IAAIm2C,EAAYn2C,EAAKwiB,MACjBltB,EAAM0K,EAAK1K,IAENkN,EAAI,EAAGA,EAAIwrE,EAAYttE,OAAQ8B,IAAK,CAC3C,IAAImtE,EAAa3B,EAAYxrE,IAAM,CAAC,EAEpC,GAAIotE,EAAgBD,EAAWr6E,EAAM,UAAW6gD,EAAUvjC,KAAOg9D,EAAgBD,EAAWr6E,EAAM,aAAc6gD,EAAUkW,iBAAmBujB,EAAgBD,EAAWr6E,EAAM,YAAa6gD,EAAUpmD,MACnM,OAAOyS,CAEX,CACF,CAEA,SAASotE,EAAgBC,EAAeC,GACtC,MAAyB,QAAlBD,GAA2BxhF,EAAO6Q,QAAQ2wE,IAAkBxhF,EAAOqa,QAAQmnE,EAAeC,IAAkB,GAAKD,IAAkBC,CAC5I,CAEA,SAASC,EAAS55B,GAChB,IAAIkzB,EAAWvF,EAAY3tB,GAE3B,GAAKkzB,EAAL,CAIA,IAAIrH,EAAmBqH,EAASrH,iBAC5BhvE,EAAQq2E,EAASrpE,KAAKhN,MACtBoH,EAAS4nE,EAAiB5nE,OAC1B+xC,EAAS61B,EAAiBvyE,IAAI,UAC9B6K,EAAQ0nE,EAAiBvyE,IAAI,SAEpB,MAAT6K,IACFA,EAAQtH,EAAMiN,MAAM3F,IAGtB,IAAIuxE,EAAYkD,EAAgB/M,GAGlB,MAAV71B,IACF/xC,EAAO+xC,OAAS0/B,EAAY,OAAS,QAGvC,IAAIljE,EAAS3V,EAAMiW,YAAY1Z,QAC/BoZ,EAAO,GAAKA,EAAO,IAAMA,EAAO5I,WAGvB,MAATzF,GAEGA,EAAQqO,EAAO,MAEhBrO,EAAQqO,EAAO,IAGbrO,EAAQqO,EAAO,KACjBrO,EAAQqO,EAAO,IAGjBvO,EAAOE,MAAQA,EAEXuxE,IACFzxE,EAAO+xC,OAASk9B,EAASrpE,KAAKhN,MAAMu3E,UAAY,OAAS,OArC3D,CAuCF,CAEA,SAASzG,EAAY3tB,GACnB,IAAI4pB,GAAoB5pB,EAAUvnD,QAAQ22C,aAAa,gBAAkB,CAAC,GAAGw6B,iBAC7E,OAAOA,GAAoBA,EAAiBj9B,SAASooC,EAAQ/0B,GAC/D,CAEA,SAAS65B,EAAoB75B,GAC3B,IAAIkzB,EAAWvF,EAAY3tB,GAC3B,OAAOkzB,GAAYA,EAASrH,gBAC9B,CAEA,SAAS+M,EAAgB/M,GACvB,QAASA,EAAiBvyE,IAAI,cAChC,CAOA,SAASy7E,EAAQ1oD,GACf,OAAOA,EAAMvzB,KAAO,KAAOuzB,EAAM5P,EACnC,CAEAxkB,EAAQ4xE,QAAUA,EAClB5xE,EAAQ2hF,SAAWA,EACnB3hF,EAAQ01E,YAAcA,EACtB11E,EAAQ4hF,oBAAsBA,EAC9B5hF,EAAQ88E,QAAUA,C,gCCjSlB,IAAI78E,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElBgsD,EAAchsD,EAAQ,MAEtBi5E,EAAaj5E,EAAQ,OAErBwiE,EAASxiE,EAAQ,OAEjBiiF,EAAajiF,EAAQ,MAErBk5E,EAAcl5E,EAAQ,OAK1B,SAAS+3E,EAAa/D,GACpB,IAEIpqE,EAFA+tE,EAAkB3D,EAAiBvyE,IAAI,QACvCygF,EAAalO,EAAiB9oE,SAASysE,EAAkB,SAW7D,MARwB,SAApBA,GACF/tE,EAAQs4E,EAAWj2D,eACnBriB,EAAM4B,KAAO,MACgB,WAApBmsE,IACT/tE,EAAQs4E,EAAW3kC,eACnB3zC,EAAMqL,OAAS,MAGVrL,CACT,CAMA,SAAS6vE,EAAmB93D,EAAUwmC,EAAW6rB,EAAkBnzE,EAAK04E,GACtE,IAAIjtE,EAAQ0nE,EAAiBvyE,IAAI,SAC7BoI,EAAOs4E,EAAc71E,EAAO67C,EAAUn2C,KAAMm2C,EAAUvnD,QAASozE,EAAiBvyE,IAAI,qBAAsB,CAC5G8wE,UAAWyB,EAAiBvyE,IAAI,mBAChCy1B,UAAW88C,EAAiBvyE,IAAI,qBAE9B0V,EAAa68D,EAAiB9oE,SAAS,SACvCk3E,EAAWnJ,EAAWoJ,kBAAkBlrE,EAAW1V,IAAI,YAAc,GACrEgjB,EAAOtN,EAAW0O,UAClB4nC,EAAWzB,EAAY9wB,gBAAgBrxB,EAAM4a,GAC7Cxf,EAAWs0E,EAASt0E,SACpB6E,EAAQ2jD,EAAS3jD,MAAQs4E,EAAS,GAAKA,EAAS,GAChD73E,EAASkjD,EAASljD,OAAS63E,EAAS,GAAKA,EAAS,GAElD3J,EAAQc,EAASd,MACX,UAAVA,IAAsBxzE,EAAS,IAAM6E,GAC3B,WAAV2uE,IAAuBxzE,EAAS,IAAM6E,EAAQ,GAC9C,IAAIkiB,EAAgButD,EAASvtD,cACX,WAAlBA,IAA+B/mB,EAAS,IAAMsF,GAC5B,WAAlByhB,IAA+B/mB,EAAS,IAAMsF,EAAS,GAEvD+3E,EAAmBr9E,EAAU6E,EAAOS,EAAQ1J,GAC5C,IAAI0hF,EAAUprE,EAAW1V,IAAI,mBAExB8gF,GAAuB,SAAZA,IACdA,EAAUp6B,EAAU1mD,IAAI,6BAG1BkgB,EAASuH,MAAQ,CACf1gB,MAAO,CACLgC,EAAG,EACHC,EAAG,EACHX,MAAOA,EACPS,OAAQA,EACRP,EAAGmN,EAAW1V,IAAI,iBAEpBwD,SAAUA,EAAS1D,QAEnBqI,MAAO,CACLC,KAAMA,EACN41D,SAAUh7C,EACVtB,SAAUhM,EAAWq4B,eACrB33B,aAAc,SACdrM,KAAM+2E,EACNttE,OAAQkC,EAAW1V,IAAI,gBAAkB,cACzCsK,UAAWoL,EAAW1V,IAAI,gBAAkB,EAC5CgX,WAAYtB,EAAW1V,IAAI,cAC3BmX,YAAazB,EAAW1V,IAAI,eAC5BiX,cAAevB,EAAW1V,IAAI,iBAC9BkX,cAAexB,EAAW1V,IAAI,kBAGhCkP,GAAI,GAER,CAGA,SAAS2xE,EAAmBr9E,EAAU6E,EAAOS,EAAQ1J,GACnD,IAAIi/B,EAAYj/B,EAAI2O,WAChBuwB,EAAal/B,EAAI4O,YACrBxK,EAAS,GAAKF,KAAKJ,IAAIM,EAAS,GAAK6E,EAAOg2B,GAAah2B,EACzD7E,EAAS,GAAKF,KAAKJ,IAAIM,EAAS,GAAKsF,EAAQw1B,GAAcx1B,EAC3DtF,EAAS,GAAKF,KAAKF,IAAII,EAAS,GAAI,GACpCA,EAAS,GAAKF,KAAKF,IAAII,EAAS,GAAI,EACtC,CAYA,SAASk9E,EAAc71E,EAAO0F,EAAMpR,EAAS88E,EAAmBpuE,GAC9D,IAAIzF,EAAOmI,EAAKhN,MAAMw9E,SAEtBl2E,EAAO,CACLimE,UAAWjjE,EAAIijE,YAEbr7C,EAAY5nB,EAAI4nB,UAEpB,GAAIA,EAAW,CACb,IAAI9N,EAAS,CACX9c,MAAO21E,EAAWQ,gBAAgBzwE,EAAM1F,GACxCo2E,WAAY,IAEdriF,EAAOU,KAAK28E,GAAmB,SAAUiF,GACvC,IAAItiE,EAASzf,EAAQ29E,iBAAiBoE,EAAQllE,aAC1C3a,EAAY6/E,EAAQz9D,gBACpB09D,EAAaviE,GAAUA,EAAO8I,cAAcrmB,GAChD8/E,GAAcx5D,EAAOs5D,WAAWnjF,KAAKqjF,EACvC,IAEIviF,EAAOwiF,SAAS3rD,GAClBrtB,EAAOqtB,EAAUvH,QAAQ,UAAW9lB,GAC3BxJ,EAAOyiF,WAAW5rD,KAC3BrtB,EAAOqtB,EAAU9N,GAErB,CAEA,OAAOvf,CACT,CAUA,SAASuuE,EAAuBpmE,EAAM1F,EAAOsjD,GAC3C,IAAIx0B,EAAYonC,EAAO7hE,SAGvB,OAFA6hE,EAAOzX,OAAO3vB,EAAWA,EAAWw0B,EAAWp/C,UAC/CgyD,EAAO4E,UAAUhsC,EAAWA,EAAWw0B,EAAW3qD,UAC3CkB,EAAQg1B,eAAe,CAACnpB,EAAKL,YAAYrF,IAASsjD,EAAWmzB,aAAe,IAAMnzB,EAAWyoB,gBAAkB,IAAMzoB,EAAWuoB,aAAe,IAAK/8C,EAC7J,CAEA,SAAS68C,EAAkC3rE,EAAOqV,EAAUiuC,EAAYzH,EAAW6rB,EAAkBnzE,GACnG,IAAIk2D,EAAamiB,EAAYU,gBAAgBhqB,EAAWp/C,SAAU,EAAGo/C,EAAWyoB,gBAChFzoB,EAAWuoB,YAAcnE,EAAiBvyE,IAAI,gBAC9Cg4E,EAAmB93D,EAAUwmC,EAAW6rB,EAAkBnzE,EAAK,CAC7DoE,SAAUmzE,EAAuBjwB,EAAUn2C,KAAM1F,EAAOsjD,GACxD6oB,MAAO1hB,EAAWjrC,UAClBE,cAAe+qC,EAAWhrC,mBAE9B,CAQA,SAAS2sD,EAAc57C,EAAIC,EAAIs6C,GAE7B,OADAA,EAAYA,GAAa,EAClB,CACL/pD,GAAIwP,EAAGu6C,GACP9pD,GAAIuP,EAAG,EAAIu6C,GACX7pD,GAAIuP,EAAGs6C,GACP3pD,GAAIqP,EAAG,EAAIs6C,GAEf,CAQA,SAAS0B,EAAcpqE,EAAIC,EAAIyoE,GAE7B,OADAA,EAAYA,GAAa,EAClB,CACL7sE,EAAGmE,EAAG0oE,GACN5sE,EAAGkE,EAAG,EAAI0oE,GACVvtE,MAAO8E,EAAGyoE,GACV9sE,OAAQqE,EAAG,EAAIyoE,GAEnB,CAEA,SAAS0C,EAAgBrvE,EAAIC,EAAIV,EAAID,EAAGL,EAAYiB,GAClD,MAAO,CACLF,GAAIA,EACJC,GAAIA,EACJV,GAAIA,EACJD,EAAGA,EACHL,WAAYA,EACZiB,SAAUA,EACV6jB,WAAW,EAEf,CAEAruB,EAAQ23E,aAAeA,EACvB33E,EAAQq5E,mBAAqBA,EAC7Br5E,EAAQ+hF,cAAgBA,EACxB/hF,EAAQg4E,uBAAyBA,EACjCh4E,EAAQ63E,kCAAoCA,EAC5C73E,EAAQs4E,cAAgBA,EACxBt4E,EAAQ24E,cAAgBA,EACxB34E,EAAQ25E,gBAAkBA,C,iCC3N1B,IAAI15E,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElBsG,EAAQtG,EAAQ,OAEhBy3E,EAAWz3E,EAAQ,OAEnBgjF,EAAc,CAAC,WAAY,YAAa,WAAY,YAAa,aAErE,SAASC,EAAiB35E,EAAO45E,EAAS/xD,GACxC+xD,EAAQ,GAAKA,EAAQ,KAAOA,EAAUA,EAAQ3hF,QAAQwQ,WACtD,IAAI+K,EAAQxT,EAAMuwE,aAAa,CAACqJ,EAAQ,GAAI/xD,IACxC9C,EAAM/kB,EAAMuwE,aAAa,CAACqJ,EAAQ,GAAI/xD,IAC1C,MAAO,CACL7D,GAAIxQ,EAAM,GACVyQ,GAAIzQ,EAAM,GACV0Q,GAAIa,EAAI,GACRX,GAAIW,EAAI,GAEZ,CAEA,SAAS80D,EAAa75E,GACpB,IAAIkxC,EAAalxC,EAAMmxC,gBACvB,OAAOD,EAAWI,QAAU,EAAI,CAClC,CAEA,IAAIl5C,EAAW+1E,EAAS3xE,OAAO,CAC7B7E,KAAM,YACNmiF,iBAAkB,mBAClB/kF,OAAQ,SAAUo4C,EAAgB71C,GAGhC,GAFArC,KAAKqI,MAAMkC,YAEN2tC,EAAeh1C,IAAI,QAAxB,CAIA,IAAI64C,EAAY7D,EAAezkC,KAC3B1I,EAAQgxC,EAAUhxC,MAClBoxC,EAAepxC,EAAMmxC,gBAAgBx/B,YACrCooE,EAAc/oC,EAAUgpC,iBAEL,aAAnBhpC,EAAUr5C,MAEZoiF,EAAYjsC,MAGd/2C,EAAOU,KAAKiiF,GAAa,SAAUjhF,IAC7B00C,EAAeh1C,IAAIM,EAAO,UAAcu4C,EAAUt1C,MAAMu3E,WAAsB,aAATx6E,GACvExD,KAAK,IAAMwD,GAAM00C,EAAgBntC,EAAO+5E,EAAa3oC,EAEzD,GAAGn8C,KAhBH,CAiBF,EAKAglF,UAAW,SAAU9sC,EAAgBntC,EAAO+5E,EAAa3oC,GACvD,IAAIxqB,EAAiBumB,EAAevrC,SAAS,sBACzCk7C,EAAS,IAAIjgD,EAAQ6I,OAAO,CAC9BxG,MAAO,CACLkC,GAAIpB,EAAMoB,GACVC,GAAIrB,EAAMqB,GACVX,EAAG0wC,EAAayoC,EAAa75E,KAE/BM,MAAOsmB,EAAejE,eACtBtb,GAAI,EACJqE,QAAQ,IAEVoxC,EAAOx8C,MAAM4B,KAAO,KACpBjN,KAAKqI,MAAMc,IAAI0+C,EACjB,EAKAo9B,UAAW,SAAU/sC,EAAgBntC,EAAO+5E,EAAa3oC,GACvD,IAAI3pB,EAAY0lB,EAAevrC,SAAS,YACpCgmB,GAAWH,EAAUtvB,IAAI,WAAa,EAAI,GAAKsvB,EAAUtvB,IAAI,UAC7D+sB,EAASksB,EAAayoC,EAAa75E,IACnCm6E,EAAQpjF,EAAO41B,IAAIotD,GAAa,SAAUK,GAC5C,OAAO,IAAIv9E,EAAQyrB,KAAK,CACtBppB,MAAOy6E,EAAiB35E,EAAO,CAACklB,EAAQA,EAAS0C,GAAUwyD,IAE/D,IACAnlF,KAAKqI,MAAMc,IAAIvB,EAAQw9E,UAAUF,EAAO,CACtC75E,MAAOvJ,EAAOkL,SAASwlB,EAAU7lB,SAAS,aAAa+gB,eAAgB,CACrEhX,OAAQwhC,EAAeh1C,IAAI,gCAGjC,EAKAmiF,WAAY,SAAUntC,EAAgBntC,EAAO+5E,EAAa3oC,GAQxD,IAPA,IAAI1oC,EAAOykC,EAAezkC,KACtB6xE,EAAeptC,EAAeh1C,IAAI,QAClC0V,EAAas/B,EAAevrC,SAAS,aACrC44E,EAASrtC,EAAestC,qBACxB5L,EAAchhE,EAAW1V,IAAI,UAC7BuiF,EAAehyE,EAAKiyE,kBAEfzvE,EAAI,EAAGA,EAAI6uE,EAAY3wE,OAAQ8B,IAAK,CAC3C,IAAIxK,EAAI0wC,EAAayoC,EAAa75E,IAC9BqT,EAAIrT,EAAMuwE,aAAa,CAAC7vE,EAAImuE,EAAa6L,EAAaxvE,KACtD9J,EAAKpB,EAAMoB,GACXC,EAAKrB,EAAMqB,GACXu5E,EAAiBn/E,KAAKiH,IAAI2Q,EAAE,GAAKjS,GAAMV,EAAI,GAAM,SAAW2S,EAAE,GAAKjS,EAAK,OAAS,QACjFy5E,EAAyBp/E,KAAKiH,IAAI2Q,EAAE,GAAKhS,GAAMX,EAAI,GAAM,SAAW2S,EAAE,GAAKhS,EAAK,MAAQ,SAExFk5E,GAAgBA,EAAarvE,IAAMqvE,EAAarvE,GAAG2rD,YACrDhpD,EAAa,IAAI7Q,EAAMu9E,EAAarvE,GAAG2rD,UAAWhpD,EAAYA,EAAWvW,UAG3E,IAAIwjF,EAAS,IAAIj+E,EAAQgc,KAAK,CAC5BnN,QAAQ,IAEVzW,KAAKqI,MAAMc,IAAI08E,GACfj+E,EAAQof,aAAa6+D,EAAOx6E,MAAOuN,EAAY,CAC7C3M,EAAGmS,EAAE,GACLlS,EAAGkS,EAAE,GACLwG,SAAUhM,EAAWq4B,gBAAkBiH,EAAeh1C,IAAI,4BAC1DoI,KAAMi6E,EAAOtvE,GACbsX,UAAWo4D,EACXn4D,kBAAmBo4D,GAEvB,CACF,EAKAE,WAAY,SAAU5tC,EAAgBntC,EAAO+5E,EAAa3oC,GACxD,IAAI5pB,EAAiB2lB,EAAevrC,SAAS,aACzCglB,EAAiBY,EAAe5lB,SAAS,aACzCo5E,EAAap0D,EAAezuB,IAAI,SAChC8iF,EAAY,EAChBD,EAAaA,aAAsB1mD,MAAQ0mD,EAAa,CAACA,GAGzD,IAFA,IAAIE,EAAa,GAERhwE,EAAI,EAAGA,EAAI6uE,EAAY3wE,OAAQ8B,IAAK,CAC3C,IAAIiwE,EAAaF,IAAcD,EAAW5xE,OAC1C8xE,EAAWC,GAAcD,EAAWC,IAAe,GACnDD,EAAWC,GAAYllF,KAAK,IAAI4G,EAAQyrB,KAAK,CAC3CppB,MAAOy6E,EAAiB35E,EAAOoxC,EAAc2oC,EAAY7uE,MAE7D,CAIA,IAASA,EAAI,EAAGA,EAAIgwE,EAAW9xE,OAAQ8B,IACrCjW,KAAKqI,MAAMc,IAAIvB,EAAQw9E,UAAUa,EAAWhwE,GAAI,CAC9C5K,MAAOvJ,EAAOkL,SAAS,CACrB0J,OAAQqvE,EAAW9vE,EAAI8vE,EAAW5xE,SACjCwd,EAAejE,gBAClBjX,QAAQ,EACRlI,EAAG2pC,EAAeh1C,IAAI,OAG5B,EAKAijF,WAAY,SAAUjuC,EAAgBntC,EAAO+5E,EAAa3oC,GACxD,IAAIiqC,EAAiBluC,EAAevrC,SAAS,aACzCmxC,EAAiBsoC,EAAez5E,SAAS,aACzC05E,EAAavoC,EAAe56C,IAAI,SAChC8iF,EAAY,EAChBK,EAAaA,aAAsBhnD,MAAQgnD,EAAa,CAACA,GAQzD,IAPA,IAAIC,EAAa,GACblqC,EAAS51C,KAAK0L,GAAK,IACnBq0E,GAAazB,EAAY,GAAK1oC,EAC9B1wC,EAAKlF,KAAKJ,IAAI+1C,EAAa,GAAIA,EAAa,IAC5CqqC,EAAKhgF,KAAKF,IAAI61C,EAAa,GAAIA,EAAa,IAC5CjsB,EAAYgoB,EAAeh1C,IAAI,aAE1B+S,EAAI,EAAGA,EAAI6uE,EAAY3wE,OAAQ8B,IAAK,CAC3C,IAAIiwE,EAAaF,IAAcK,EAAWlyE,OAC1CmyE,EAAWJ,GAAcI,EAAWJ,IAAe,GACnDI,EAAWJ,GAAYllF,KAAK,IAAI4G,EAAQsD,OAAO,CAC7CjB,MAAO,CACLkC,GAAIpB,EAAMoB,GACVC,GAAIrB,EAAMqB,GACVV,GAAIA,EACJD,EAAG+6E,EACHp7E,WAAYm7E,EACZl6E,UAAWy4E,EAAY7uE,GAAKmmC,EAC5BlsB,UAAWA,GAEbzZ,QAAQ,KAEV8vE,GAAazB,EAAY7uE,GAAKmmC,CAChC,CAIA,IAASnmC,EAAI,EAAGA,EAAIqwE,EAAWnyE,OAAQ8B,IACrCjW,KAAKqI,MAAMc,IAAIvB,EAAQw9E,UAAUkB,EAAWrwE,GAAI,CAC9C5K,MAAOvJ,EAAOkL,SAAS,CACrBC,KAAMo5E,EAAWpwE,EAAIowE,EAAWlyE,SAC/B2pC,EAAekB,gBAClBvoC,QAAQ,IAGd,IAGFrT,EAAOvB,QAAUsB,C,iCCjNjB,IAAI40D,EAAQt2D,EAAQ,OAEhBuS,EAAW+jD,EAAM/jD,SACjBhH,EAAW+qD,EAAM/qD,SACjBzF,EAASwwD,EAAMxwD,OACf/E,EAAOu1D,EAAMv1D,KAEbk4E,EAAaj5E,EAAQ,OAErBmG,EAAUnG,EAAQ,OAElBsG,EAAQtG,EAAQ,OAEhBuO,EAAUvO,EAAQ,OAElBglF,EAAqBz2E,EAAQy2E,mBAC7BC,EAAY12E,EAAQ02E,UAEpB52E,EAAUrO,EAAQ,OAElBsO,EAAeD,EAAQC,aAEvB42E,EAAallF,EAAQ,OAErBmlF,EAAUnlF,EAAQ,OAElBolF,EAAmBD,EAAQhqD,eAC3B1qB,EAAK1L,KAAK0L,GAEd,SAAS40E,EAAsBl9B,GAC7B,IAAIgW,EAAY,CACd76D,cAAe6kD,EAAU1lD,UAG3B,OADA07D,EAAUhW,EAAU1lD,SAAW,SAAW0lD,EAAUkW,eAC7CF,CACT,CA2CA,IAAI+a,EAAc,SAAU/wB,EAAW74C,GAIrC/Q,KAAK+Q,IAAMA,EAKX/Q,KAAK4pD,UAAYA,EAEjB58C,EAAS+D,EAAK,CACZyzE,YAAa,EACbuC,cAAe,EACfC,cAAe,EACflN,eAAgB,EAChBrjE,QAAQ,IAMVzW,KAAKqI,MAAQ,IAAIT,EAAQwP,MAEzB,IAAI6vE,EAAY,IAAIr/E,EAAQwP,MAAM,CAChC1Q,SAAUqK,EAAIrK,SAAS1D,QACvBiP,SAAUlB,EAAIkB,WAIhBg1E,EAAUlgF,kBACV/G,KAAKknF,WAAaD,EAAUpqD,UAC5B78B,KAAKmnF,WAAaF,CACpB,EAEAtM,EAAYz4E,UAAY,CACtBC,YAAaw4E,EACbyM,WAAY,SAAU5jF,GACpB,QAAS6jF,EAAS7jF,EACpB,EACA2F,IAAK,SAAU3F,GACb6jF,EAAS7jF,GAAMmU,KAAK3X,KACtB,EACAsnF,SAAU,WACR,OAAOtnF,KAAKqI,KACd,GAEF,IAAIg/E,EAAW,CAIbj3D,SAAU,WACR,IAAIrf,EAAM/Q,KAAK+Q,IACX64C,EAAY5pD,KAAK4pD,UAErB,GAAKA,EAAU1mD,IAAI,iBAAnB,CAIA,IAAIkZ,EAASpc,KAAK4pD,UAAUn2C,KAAKiJ,YAC7BunD,EAASjkE,KAAKknF,WACdK,EAAM,CAACnrE,EAAO,GAAI,GAClBorE,EAAM,CAACprE,EAAO,GAAI,GAElB6nD,IACF4iB,EAAiBU,EAAKA,EAAKtjB,GAC3B4iB,EAAiBW,EAAKA,EAAKvjB,IAG7B,IAAIp4C,EAAYtkB,EAAO,CACrBkgF,QAAS,SACR79B,EAAUj9C,SAAS,sBAAsB+gB,gBAC5C1tB,KAAKqI,MAAMc,IAAI,IAAIvB,EAAQyrB,KAAKzrB,EAAQyyE,qBAAqB,CAE3DqN,KAAM,OACNz9E,MAAO,CACL8kB,GAAIw4D,EAAI,GACRv4D,GAAIu4D,EAAI,GACRt4D,GAAIu4D,EAAI,GACRr4D,GAAIq4D,EAAI,IAEVn8E,MAAOwgB,EACP87D,uBAAwB52E,EAAI42E,wBAA0B,EACtDlxE,QAAQ,EACRrE,GAAI,MAEN,IAAIw1E,EAASh+B,EAAU1mD,IAAI,mBACvB2kF,EAAYj+B,EAAU1mD,IAAI,uBAE9B,GAAc,MAAV0kF,EAAgB,CACI,kBAAXA,IAETA,EAAS,CAACA,EAAQA,IAGK,kBAAdC,GAA+C,kBAAdA,IAE1CA,EAAY,CAACA,EAAWA,IAG1B,IAAIC,EAAcD,EAAU,GACxBE,EAAeF,EAAU,GAC7BrlF,EAAK,CAAC,CAACuO,EAAIkB,SAAWzL,KAAK0L,GAAK,EAAGq1E,GAAM,CAACx2E,EAAIkB,SAAWzL,KAAK0L,GAAK,EAAGs1E,KAAO,SAAUl/D,EAAMhY,GAC3F,GAAsB,SAAlBs3E,EAAOt3E,IAAsC,MAAjBs3E,EAAOt3E,GAAgB,CACrD,IAAIzB,EAASkB,EAAa63E,EAAOt3E,IAASw3E,EAAc,GAAIC,EAAe,EAAGD,EAAaC,EAAcl8D,EAAUnV,QAAQ,GAC3H7H,EAAOzB,KAAK,CACV6E,SAAUqW,EAAK,GACf5hB,SAAU4hB,EAAK,GACf7R,QAAQ,IAEVzW,KAAKqI,MAAMc,IAAI0F,EACjB,CACF,GAAG7O,KACL,CAxDA,CAyDF,EAKAgoF,cAAe,WACb,IAAIp+B,EAAY5pD,KAAK4pD,UACjB74C,EAAM/Q,KAAK+Q,IACXk3E,EAAUC,EAAcloF,KAAM4pD,EAAW74C,GACzCo3E,EAAWC,EAAepoF,KAAM4pD,EAAW74C,GAC/Cs3E,EAAmBz+B,EAAWu+B,EAAUF,EAC1C,EAKAlI,SAAU,WACR,IAAIhvE,EAAM/Q,KAAK+Q,IACX64C,EAAY5pD,KAAK4pD,UACjBpmD,EAAOwQ,EAASjD,EAAIgvE,SAAUn2B,EAAU1mD,IAAI,SAEhD,GAAKM,EAAL,CAIA,IASIwpB,EAOAs7D,EAhBAC,EAAe3+B,EAAU1mD,IAAI,gBAC7B6jF,EAAgBh2E,EAAIg2E,cACpB1mB,EAAiBzW,EAAUj9C,SAAS,iBACpCgf,EAAMi+B,EAAU1mD,IAAI,YAAc,EAClCkZ,EAASpc,KAAK4pD,UAAUn2C,KAAKiJ,YAC7B8rE,EAAYpsE,EAAO,GAAKA,EAAO,IAAM,EAAI,EACzCsf,EAAM,CAAkB,UAAjB6sD,EAA2BnsE,EAAO,GAAKosE,EAAY78D,EAAuB,QAAjB48D,EAAyBnsE,EAAO,GAAKosE,EAAY78D,GAAOvP,EAAO,GAAKA,EAAO,IAAM,EAErJqsE,EAAqBF,GAAgBx3E,EAAIyzE,YAAcuC,EAAgBp7D,EAAM,GAEzE+8D,EAAe9+B,EAAU1mD,IAAI,cAEb,MAAhBwlF,IACFA,EAAeA,EAAex2E,EAAK,KAKjCu2E,EAAqBF,GACvBv7D,EAAcquD,EAAgBtqE,EAAIkB,SAA0B,MAAhBy2E,EAAuBA,EAAe33E,EAAIkB,SACtF80E,IAEA/5D,EAAc27D,EAAc53E,EAAKw3E,EAAcG,GAAgB,EAAGtsE,GAClEksE,EAAyBv3E,EAAIu3E,uBAEC,MAA1BA,IACFA,EAAyB9hF,KAAKiH,IAAI66E,EAAyB9hF,KAAK4sB,IAAIpG,EAAY/a,YAC/E8+B,SAASu3C,KAA4BA,EAAyB,QAInE,IAAIpnB,EAAWb,EAAe/4C,UAC1BshE,EAAch/B,EAAU1mD,IAAI,gBAAgB,IAAS,CAAC,EACtD2+D,EAAW+mB,EAAY/mB,SACvBgnB,EAAW70E,EAASjD,EAAI+3E,qBAAsBF,EAAYC,SAAUP,GAGpES,EAA4B,MAAZlnB,GAAgC,MAAZgnB,EAAmBnO,EAAWsO,aAAaxlF,EAAMqlF,EAAU3nB,EAAUW,EAAU,CACrHiK,QAAS,EACTmd,YAAaL,EAAYK,cACtBzlF,EACD0lF,EAAat/B,EAAU1mD,IAAI,WAAW,GACtCgB,EAAW0lD,EAAU1lD,SACrBilF,EAAkB,CACpBpkF,cAAeb,EACfV,KAAMA,EACN2nB,MAAO,CAAC,SAEVg+D,EAAgBjlF,EAAW,SAAW0lD,EAAUkW,eAChD,IAAI+lB,EAAS,IAAIj+E,EAAQgc,KAAK,CAE5B8jE,KAAM,OACN0B,WAAY5lF,EACZ6lF,gBAAiBN,EACjBriF,SAAUg1B,EACVzpB,SAAU+a,EAAY/a,SACtBwE,OAAQ6yE,EAAS1/B,GACjBx3C,GAAI,EACJknC,QAAS4vC,GAAcA,EAAWx+D,KAAOnjB,EAAO,CAC9CmiE,QAASlmE,EACTm1B,UAAW,WACT,OAAOn1B,CACT,EACA2lF,gBAAiBA,GAChBD,GAAc,OAEnBthF,EAAQof,aAAa6+D,EAAOx6E,MAAOg1D,EAAgB,CACjD/0D,KAAMy9E,EACN7nB,SAAUA,EACVt8C,SAAUy7C,EAAepvB,gBAAkB2Y,EAAU1mD,IAAI,4BACzDqqB,UAAWP,EAAYO,UACvBC,kBAAmBR,EAAYQ,oBAG7Bo8B,EAAU1mD,IAAI,kBAChB2iF,EAAOjmB,UAAYknB,EAAsBl9B,GACzCi8B,EAAOjmB,UAAU2pB,WAAa,WAC9B1D,EAAOjmB,UAAUp8D,KAAOA,GAI1BxD,KAAKmnF,WAAWh+E,IAAI08E,GAEpBA,EAAO9+E,kBACP/G,KAAKqI,MAAMc,IAAI08E,GACfA,EAAO2D,oBAvFP,CAwFF,GAgBEnO,EAAkBV,EAAYU,gBAAkB,SAAUoO,EAAc3tD,EAAc6pC,GACxF,IACIp4C,EACAC,EAFAk8D,EAAehD,EAAU5qD,EAAe2tD,GAsB5C,OAlBIhD,EAAmBiD,IAErBl8D,EAAoBm4C,EAAY,EAAI,MAAQ,SAC5Cp4C,EAAY,UACHk5D,EAAmBiD,EAAex3E,IAE3Csb,EAAoBm4C,EAAY,EAAI,SAAW,MAC/Cp4C,EAAY,WAEZC,EAAoB,SAGlBD,EADEm8D,EAAe,GAAKA,EAAex3E,EACzByzD,EAAY,EAAI,QAAU,OAE1BA,EAAY,EAAI,OAAS,SAIlC,CACL1zD,SAAUy3E,EACVn8D,UAAWA,EACXC,kBAAmBA,EAEvB,EAEA,SAASm7D,EAAc53E,EAAKuI,EAAcqwE,EAAYvtE,GACpD,IACImR,EACAC,EAFAk8D,EAAehD,EAAUiD,EAAa54E,EAAIkB,UAG1CoqC,EAAUjgC,EAAO,GAAKA,EAAO,GAC7BwtE,EAA0B,UAAjBtwE,IAA6B+iC,GAA4B,UAAjB/iC,GAA4B+iC,EAkBjF,OAhBIoqC,EAAmBiD,EAAex3E,EAAK,IACzCsb,EAAoBo8D,EAAS,SAAW,MACxCr8D,EAAY,UACHk5D,EAAmBiD,EAAoB,IAALx3E,IAC3Csb,EAAoBo8D,EAAS,MAAQ,SACrCr8D,EAAY,WAEZC,EAAoB,SAGlBD,EADEm8D,EAAoB,IAALx3E,GAAYw3E,EAAex3E,EAAK,EACrC03E,EAAS,OAAS,QAElBA,EAAS,QAAU,QAI5B,CACL33E,SAAUy3E,EACVn8D,UAAWA,EACXC,kBAAmBA,EAEvB,CAEA,SAAS87D,EAAS1/B,GAChB,IAAIs/B,EAAat/B,EAAU1mD,IAAI,WAC/B,OAAO0mD,EAAU1mD,IAAI,aAChB0mD,EAAU1mD,IAAI,iBAAmBgmF,GAAcA,EAAWx+D,KACjE,CAEA,SAAS29D,EAAmBz+B,EAAWu+B,EAAUF,GAI/C,IAAI4B,EAAejgC,EAAU1mD,IAAI,0BAC7B4mF,EAAelgC,EAAU1mD,IAAI,0BAGjCilF,EAAWA,GAAY,GACvBF,EAAUA,GAAW,GACrB,IAAI8B,EAAa5B,EAAS,GACtB6B,EAAY7B,EAAS,GACrB8B,EAAY9B,EAASA,EAASh0E,OAAS,GACvC+1E,EAAY/B,EAASA,EAASh0E,OAAS,GACvCg2E,EAAYlC,EAAQ,GACpBmC,EAAWnC,EAAQ,GACnBoC,EAAWpC,EAAQA,EAAQ9zE,OAAS,GACpCm2E,EAAWrC,EAAQA,EAAQ9zE,OAAS,IAEnB,IAAjB01E,GACFU,EAASR,GACTQ,EAASJ,IACAK,EAAqBT,EAAYC,KACtCH,GACFU,EAASP,GACTO,EAASH,KAETG,EAASR,GACTQ,EAASJ,MAIQ,IAAjBL,GACFS,EAASN,GACTM,EAASF,IACAG,EAAqBN,EAAWD,KACrCH,GACFS,EAASL,GACTK,EAASD,KAETC,EAASN,GACTM,EAASF,IAGf,CAEA,SAASE,EAAS9gF,GAChBA,IAAOA,EAAG0iB,QAAS,EACrB,CAEA,SAASq+D,EAAqBlrC,EAASzgB,EAAM7R,GAE3C,IAAIy9D,EAAYnrC,GAAWA,EAAQ3iB,kBAAkBpY,QACjDmmE,EAAW7rD,GAAQA,EAAKlC,kBAAkBpY,QAE9C,GAAKkmE,GAAcC,EAAnB,CAMA,IAAIC,EAAgBhE,EAAWiE,SAAS,IAIxC,OAHAjE,EAAWn6B,OAAOm+B,EAAeA,GAAgBrrC,EAAQrtC,UACzDw4E,EAAU7tD,eAAe+pD,EAAWkE,IAAI,GAAIF,EAAerrC,EAAQwrC,sBACnEJ,EAAS9tD,eAAe+pD,EAAWkE,IAAI,GAAIF,EAAe9rD,EAAKisD,sBACxDL,EAAUlZ,UAAUmZ,EAR3B,CASF,CAEA,SAASjC,EAAqBF,GAC5B,MAAwB,WAAjBA,GAA8C,WAAjBA,CACtC,CAMA,IAAIwC,EAAiBpQ,EAAYoQ,eAAiB,SAAUt3E,EAAMwC,EAAG0oB,EAAUqsD,EAAUnB,EAAcC,GACrG,GAAU,IAAN7zE,GAAW4zE,GAAgB5zE,IAAM+0E,EAAW,GAAKlB,EACnD,OAAO,EAKT,IAAImB,EACAxkF,EAAQgN,EAAKhN,MACjB,MAAsB,YAAfA,EAAM/D,OAA2C,oBAAbi8B,GAA2BssD,EAAUxkF,EAAMykF,WAAWj1E,IAAK0oB,EAASssD,EAASxkF,EAAMw9E,SAASgH,KAAah1E,GAAK0oB,EAAW,GACtK,EAMIwsD,EAAcxQ,EAAYwQ,YAAc,SAAUl1D,EAAOm1D,GAC3D,IAAIzsD,EAAW1I,EAAM/yB,IAAI,YAMzB,OAJgB,MAAZy7B,GAAgC,QAAZA,IACtBA,EAAWysD,GAGNzsD,CACT,EAEA,SAASupD,EAAcmD,EAAazhC,EAAW74C,GAC7C,IAAI0C,EAAOm2C,EAAUn2C,KAErB,GAAKm2C,EAAU1mD,IAAI,mBAAoBuQ,EAAKhN,MAAMu3E,UAAlD,CAoBA,IAhBA,IAAIxrD,EAAYo3B,EAAUj9C,SAAS,YAC/BglB,EAAiBa,EAAU7lB,SAAS,aACpCgmB,EAAUH,EAAUtvB,IAAI,UACxBooF,EAAeH,EAAY34D,EAAWzhB,EAAIq6E,eAC1CG,EAAc93E,EAAKsxE,eAAevyD,EAAUtvB,IAAI,mBAGhDsoF,EAAQ/3E,EAAKhN,MAAMykF,WACnBrB,EAAejgC,EAAU1mD,IAAI,0BAC7B4mF,EAAelgC,EAAU1mD,IAAI,0BAC7BqkF,EAAM,GACNC,EAAM,GACNvjB,EAASonB,EAAYnE,WACrBe,EAAU,GACV+C,EAAWO,EAAYp3E,OAElB8B,EAAI,EAAGA,EAAI+0E,EAAU/0E,IAE5B,IAAI80E,EAAet3E,EAAMwC,EAAGq1E,EAAcN,EAAUnB,EAAcC,GAAlE,CAIA,IAAI2B,EAAYF,EAAYt1E,GAC5BsxE,EAAI,GAAKkE,EACTlE,EAAI,GAAK,EACTC,EAAI,GAAKiE,EACTjE,EAAI,GAAKz2E,EAAIi2E,cAAgBr0D,EAEzBsxC,IACF4iB,EAAiBU,EAAKA,EAAKtjB,GAC3B4iB,EAAiBW,EAAKA,EAAKvjB,IAI7B,IAAIynB,EAAS,IAAI9jF,EAAQyrB,KAAKzrB,EAAQyyE,qBAAqB,CAEzDqN,KAAM,QAAU8D,EAAMv1E,GACtBhM,MAAO,CACL8kB,GAAIw4D,EAAI,GACRv4D,GAAIu4D,EAAI,GACRt4D,GAAIu4D,EAAI,GACRr4D,GAAIq4D,EAAI,IAEVn8E,MAAO2B,EAAS2kB,EAAejE,eAAgB,CAC7ChX,OAAQkzC,EAAU1mD,IAAI,8BAExBkP,GAAI,EACJqE,QAAQ,KAEV40E,EAAYhjF,MAAMc,IAAIuiF,GACtBzD,EAAQjnF,KAAK0qF,EA9Bb,CAiCF,OAAOzD,CAvDP,CAwDF,CAEA,SAASG,EAAeiD,EAAazhC,EAAW74C,GAC9C,IAAI0C,EAAOm2C,EAAUn2C,KACjBiX,EAAO1W,EAASjD,EAAI46E,cAAe/hC,EAAU1mD,IAAI,mBAErD,GAAKwnB,IAAQjX,EAAKhN,MAAMu3E,UAAxB,CAIA,IAAIplE,EAAagxC,EAAUj9C,SAAS,aAChCitE,EAAchhE,EAAW1V,IAAI,UAC7BsoF,EAAQ/3E,EAAKhN,MAAMykF,WACnB3F,EAAS37B,EAAU47B,qBAEnBpK,GAAiBpnE,EAASjD,EAAIk+C,YAAar2C,EAAW1V,IAAI,YAAc,GAAKgP,EAAK,IAClF8a,EAAcquD,EAAgBtqE,EAAIkB,SAAUmpE,EAAerqE,EAAI+oE,gBAC/DwL,EAAe17B,EAAU1mD,IAAI,QAC7BilF,EAAW,GACX1xE,EAAS6yE,EAAS1/B,GAClBgiC,EAAehiC,EAAU1mD,IAAI,gBAC7B2mF,EAAejgC,EAAU1mD,IAAI,0BAC7B4mF,EAAelgC,EAAU1mD,IAAI,0BAoDjC,OAnDAV,EAAKgpF,GAAO,SAAUK,EAASv7E,GAC7B,IAAIy6E,EAAet3E,EAAMnD,EAAOS,EAAIq6E,cAAeI,EAAMr3E,OAAQ01E,EAAcC,GAA/E,CAIA,IAAIgC,EAAiBlzE,EAEjB0sE,GAAgBA,EAAauG,IAAYvG,EAAauG,GAASjqB,YACjEkqB,EAAiB,IAAI/jF,EAAMu9E,EAAauG,GAASjqB,UAAWhpD,EAAYgxC,EAAUvnD,UAGpF,IAAI0pF,EAAYD,EAAe76C,gBAAkB2Y,EAAU1mD,IAAI,4BAC3DuoF,EAAYh4E,EAAKL,YAAYy4E,GAC7BnwD,EAAM,CAAC+vD,EAAW16E,EAAIyzE,YAAczzE,EAAI+oE,eAAiBF,GACzDoS,EAAWv4E,EAAKhN,MAAMw9E,SAAS4H,GAC/BhG,EAAS,IAAIj+E,EAAQgc,KAAK,CAE5B8jE,KAAM,SAAWmE,EACjBnlF,SAAUg1B,EACVzpB,SAAU+a,EAAY/a,SACtBwE,OAAQA,EACRrE,GAAI,KAENxK,EAAQof,aAAa6+D,EAAOx6E,MAAOygF,EAAgB,CACjDxgF,KAAMi6E,EAAOj1E,GACbid,UAAWu+D,EAAe3+E,WAAW,SAAS,IAAS6f,EAAYO,UACnEC,kBAAmBs+D,EAAe3+E,WAAW,iBAAiB,IAAS2+E,EAAe3+E,WAAW,YAAY,IAAS6f,EAAYQ,kBAClI5I,SAA+B,oBAAdmnE,EAA2BA,EAO9B,aAAdt4E,EAAK/Q,KAAsBspF,EAAyB,UAAdv4E,EAAK/Q,KAAmBmpF,EAAU,GAAKA,EAASv7E,GAASy7E,IAG7FH,IACF/F,EAAOjmB,UAAYknB,EAAsBl9B,GACzCi8B,EAAOjmB,UAAU2pB,WAAa,YAC9B1D,EAAOjmB,UAAU7xD,MAAQi+E,GAI3BX,EAAYlE,WAAWh+E,IAAI08E,GAE3BA,EAAO9+E,kBACPohF,EAASnnF,KAAK6kF,GACdwF,EAAYhjF,MAAMc,IAAI08E,GACtBA,EAAO2D,oBA9CP,CA+CF,IACOrB,CAlEP,CAmEF,CAEA,IAAIhlF,EAAWw3E,EACfv3E,EAAOvB,QAAUsB,C,wBClnBjB,IAAIuE,EAAUjG,EAAQ,OAIlBiC,GAFUgE,EAAQC,QAERlG,EAAQ,QAElB4xE,EAAyB5xE,EAAQ,OAKjCy3E,EAAWx1E,EAAQ4wE,oBAAoB,CACzC5xE,KAAM,OAKNupF,aAAc,KAMdpH,iBAAkB,KAKlB/kF,OAAQ,SAAU8pD,EAAWvnD,EAASC,EAAKyB,GAMzC/D,KAAK6kF,kBAAoBxR,EAAuBmQ,SAAS55B,GACzDsvB,EAAStpE,WAAW5P,KAAM,SAAU6P,WACpCq8E,EAAkBlsF,KAAM4pD,EAAWvnD,EAASC,EAAKyB,GAAS,EAC5D,EAUAmoF,kBAAmB,SAAUtiC,EAAWvnD,EAASC,EAAKyB,EAASi0B,GAC7Dk0D,EAAkBlsF,KAAM4pD,EAAWvnD,EAASC,EAAKyB,GAAS,EAC5D,EAKAmG,OAAQ,SAAU7H,EAASC,GACzB,IAAIixE,EAAcvzE,KAAKisF,aACvB1Y,GAAeA,EAAYrpE,OAAO5H,GAClC42E,EAAStpE,WAAW5P,KAAM,SAAU6P,UACtC,EAKAvH,QAAS,SAAUjG,EAASC,GAC1B6pF,EAAmBnsF,KAAMsC,GACzB42E,EAAStpE,WAAW5P,KAAM,UAAW6P,UACvC,IAGF,SAASq8E,EAAkBE,EAAUxiC,EAAWvnD,EAASC,EAAKyB,EAASsyE,GACrE,IAAIgW,EAAQnT,EAASoT,oBAAoBF,EAASvH,kBAElD,GAAKwH,EAAL,CAIA,IAAI5W,EAAmBpC,EAAuBoQ,oBAAoB75B,GAClE6rB,GAAoB2W,EAASH,eAAiBG,EAASH,aAAe,IAAII,IAAUvsF,OAAO8pD,EAAW6rB,EAAkBnzE,EAAK+zE,GAAe8V,EAAmBC,EAAU9pF,EAHzK,CAIF,CAEA,SAAS6pF,EAAmBC,EAAU/pF,EAASC,GAC7C,IAAIixE,EAAc6Y,EAASH,aAC3B1Y,GAAeA,EAAYjrE,QAAQjG,EAASC,GAC5C8pF,EAASH,aAAe,IAC1B,CAEA,IAAIM,EAAmB,GAEvBrT,EAASuB,yBAA2B,SAAU/3E,EAAM8pF,GAClDD,EAAiB7pF,GAAQ8pF,CAC3B,EAEAtT,EAASoT,oBAAsB,SAAU5pF,GACvC,OAAOA,GAAQ6pF,EAAiB7pF,EAClC,EAEA,IAAIS,EAAW+1E,EACf91E,EAAOvB,QAAUsB,C,wBCjGjB,IAAIrB,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElBk5E,EAAcl5E,EAAQ,OAEtBy3E,EAAWz3E,EAAQ,OAEnBw3E,EAAsBx3E,EAAQ,OAE9BspF,EAAiBpQ,EAAYoQ,eAC7BI,EAAcxQ,EAAYwQ,YAC1BsB,EAAmB,CAAC,WAAY,gBAAiB,YACjDC,EAAmB,CAAC,YAAa,aAQjCC,EAAoBzT,EAAS3xE,OAAO,CACtC7E,KAAM,gBACNmiF,iBAAkB,uBAKlB/kF,OAAQ,SAAU8pD,EAAWvnD,EAASC,EAAKyB,GACzC/D,KAAKqI,MAAMkC,YACX,IAAIqiF,EAAe5sF,KAAK6sF,WAIxB,GAHA7sF,KAAK6sF,WAAa,IAAIjlF,EAAQwP,MAC9BpX,KAAKqI,MAAMc,IAAInJ,KAAK6sF,YAEfjjC,EAAU1mD,IAAI,QAAnB,CAIA,IAAI4pF,EAAYljC,EAAUmjC,mBACtBxjF,EAAS0vE,EAAoB1vE,OAAOujF,EAAWljC,GAC/CyhC,EAAc,IAAI1Q,EAAY/wB,EAAWrgD,GAC7CzH,EAAOU,KAAKiqF,EAAkBpB,EAAYliF,IAAKkiF,GAE/CrrF,KAAK6sF,WAAW1jF,IAAIkiF,EAAY/D,YAEhCxlF,EAAOU,KAAKkqF,GAAkB,SAAUlpF,GAClComD,EAAU1mD,IAAIM,EAAO,UACvBxD,KAAK,IAAMwD,GAAMomD,EAAWkjC,EAAWvjF,EAAO6hF,cAElD,GAAGprF,MACH4H,EAAQolF,gBAAgBJ,EAAc5sF,KAAK6sF,WAAYjjC,GACvD+iC,EAAkB7hE,UAAU9qB,KAAM,SAAU4pD,EAAWvnD,EAASC,EAAKyB,EAfrE,CAgBF,EAQA+hF,WAAY,SAAUl8B,EAAWkjC,EAAW1B,GAC1C,IAAI33E,EAAOm2C,EAAUn2C,KAErB,IAAIA,EAAKhN,MAAMu3E,UAAf,CAIA,IAAIzrD,EAAiBq3B,EAAUj9C,SAAS,aACpCglB,EAAiBY,EAAe5lB,SAAS,aACzCo5E,EAAap0D,EAAezuB,IAAI,SAChC+pF,EAAe9B,EAAY54D,EAAgB64D,GAC/CrF,EAAajkF,EAAO6Q,QAAQozE,GAAcA,EAAa,CAACA,GAcxD,IAbA,IAAImH,EAAWJ,EAAU5nF,iBAAiB4L,UACtChI,EAAe2K,EAAK3K,eACpBk9E,EAAY,EACZuF,EAAc93E,EAAKsxE,iBACnByG,EAAQ/3E,EAAKhN,MAAMykF,WACnBrB,EAAejgC,EAAU1mD,IAAI,0BAC7B4mF,EAAelgC,EAAU1mD,IAAI,0BAC7Bq7B,EAAK,GACLC,EAAK,GAGL3S,EAAY8F,EAAejE,eAEtBzX,EAAI,EAAGA,EAAIs1E,EAAYp3E,OAAQ8B,IACtC,IAAI80E,EAAet3E,EAAMwC,EAAGg3E,EAAc1B,EAAYp3E,OAAQ01E,EAAcC,GAA5E,CAIA,IAAI2B,EAAYh4E,EAAKN,cAAco4E,EAAYt1E,IAE3CnN,GACFy1B,EAAG,GAAKktD,EACRltD,EAAG,GAAK2uD,EAAShhF,EACjBsyB,EAAG,GAAKitD,EACRjtD,EAAG,GAAK0uD,EAAShhF,EAAIghF,EAASlhF,SAE9BuyB,EAAG,GAAK2uD,EAASjhF,EACjBsyB,EAAG,GAAKktD,EACRjtD,EAAG,GAAK0uD,EAASjhF,EAAIihF,EAAS3hF,MAC9BizB,EAAG,GAAKitD,GAGV,IAAIvF,EAAaF,IAAcD,EAAW5xE,OAE1CnU,KAAK6sF,WAAW1jF,IAAI,IAAIvB,EAAQyrB,KAAKzrB,EAAQyyE,qBAAqB,CAChEqN,KAAM,QAAU8D,EAAMv1E,GACtBhM,MAAO,CACL8kB,GAAIwP,EAAG,GACPvP,GAAIuP,EAAG,GACPtP,GAAIuP,EAAG,GACPrP,GAAIqP,EAAG,IAETnzB,MAAOvJ,EAAOkL,SAAS,CACrB0J,OAAQqvE,EAAWG,IAClBr6D,GACHpV,QAAQ,KA7BV,CAvBF,CAuDF,EAQA0vE,WAAY,SAAUv8B,EAAWkjC,EAAW1B,GAC1C,IAAI33E,EAAOm2C,EAAUn2C,KAErB,IAAIA,EAAKhN,MAAMu3E,UAAf,CAIA,IAAIoI,EAAiBx8B,EAAUj9C,SAAS,aACpCmxC,EAAiBsoC,EAAez5E,SAAS,aACzC05E,EAAavoC,EAAe56C,IAAI,SAChCgqF,EAAWJ,EAAU5nF,iBAAiB4L,UACtCy6E,EAAc93E,EAAKsxE,iBACnByG,EAAQ/3E,EAAKhN,MAAMykF,WACnBiC,EAAQ15E,EAAKN,cAAco4E,EAAY,IACvC6B,EAAQ35E,EAAKN,cAAco4E,EAAY,IACvCv0E,EAAQ,EACRq2E,EAAelC,EAAY/E,EAAgBgF,GAC3CkC,EAAYxvC,EAAekB,eAC/BqnC,EAAavkF,EAAO6Q,QAAQ0zE,GAAcA,EAAa,CAACA,GAIxD,IAHA,IAAIwD,EAAejgC,EAAU1mD,IAAI,0BAC7B4mF,EAAelgC,EAAU1mD,IAAI,0BAExB+S,EAAI,EAAGA,EAAIs1E,EAAYp3E,OAAQ8B,IACtC,IAAI80E,EAAet3E,EAAMwC,EAAGo3E,EAAc9B,EAAYp3E,OAAQ01E,EAAcC,GAA5E,CAIA,IACI79E,EACAC,EACAX,EACAS,EAJAy/E,EAAYh4E,EAAKN,cAAco4E,EAAYt1E,IAM3CxC,EAAK3K,gBACPmD,EAAIkhF,EACJjhF,EAAIghF,EAAShhF,EACbX,EAAQkgF,EAAYx/E,EACpBD,EAASkhF,EAASlhF,SAElBC,EAAIihF,EAASjhF,EACbC,EAAIkhF,EACJ7hF,EAAQ2hF,EAAS3hF,MACjBS,EAASy/E,EAAYv/E,GAGvB,IAAIg6E,EAAalvE,IAAUqvE,EAAWlyE,OAEtCnU,KAAK6sF,WAAW1jF,IAAI,IAAIvB,EAAQ+C,KAAK,CACnC+8E,KAAM,QAAU8D,EAAMv1E,GACtBhM,MAAO,CACLgC,EAAGA,EACHC,EAAGA,EACHX,MAAOA,EACPS,OAAQA,GAEVX,MAAOvJ,EAAOkL,SAAS,CACrBC,KAAMo5E,EAAWH,IAChBoH,GACH72E,QAAQ,KAGV02E,EAAQlhF,EAAIV,EACZ6hF,EAAQlhF,EAAIF,CArCZ,CApBF,CA2DF,IAEF2gF,EAAkBplF,OAAO,CACvB7E,KAAM,UAERiqF,EAAkBplF,OAAO,CACvB7E,KAAM,S,wBCtMR,IAAIgB,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBk5E,EAAcl5E,EAAQ,OAEtB8rF,EAAkB9rF,EAAQ,OAE1B+rF,EAAc/rF,EAAQ,OAEtBmG,EAAUnG,EAAQ,OAElBgjF,EAAc,CAAC,WAAY,gBAAiB,YAC5CvL,EAAWx1E,EAAQ4wE,oBAAoB,CACzC5xE,KAAM,eAKN2mB,KAAM,SAAUhnB,EAASC,GACvB42E,EAAStpE,WAAW5P,KAAM,OAAQ6P,YAKjC7P,KAAKytF,iBAAmB,IAAIF,EAAgBjrF,EAAIujB,UAAUvlB,GAAG,QAASwB,EAAO2B,KAAKzD,KAAK0tF,SAAU1tF,MACpG,EAKAF,OAAQ,SAAU8pD,EAAWvnD,EAASC,EAAKyB,GACzC,IAAI4pF,EAAmB/jC,EAAWvnD,EAAS0B,GAA3C,CAIA/D,KAAK4pD,UAAYA,EACjB5pD,KAAKsC,IAAMA,EACXtC,KAAKqI,MAAMkC,YACX,IAAIqiF,EAAe5sF,KAAK6sF,WAIxB,GAHA7sF,KAAK6sF,WAAa,IAAIjlF,EAAQwP,MAC9BpX,KAAKqI,MAAMc,IAAInJ,KAAK6sF,YAEfjjC,EAAU1mD,IAAI,QAAnB,CAIA,IAAIw7E,EAAgBqO,EAAiBnjC,EAAWvnD,GAC5CS,EAAW47E,EAAcx5E,iBACzB0oF,EAAkBhkC,EAAUikC,qBAC5BC,EAAYF,EAAgBriF,MAC5BxC,EAAM6gD,EAAUn2C,KAAK1K,IACrBglF,EAAajrF,EAASkrF,cAAcjlF,GACpCklF,EAAansF,EAAOyF,OAAO,CAC7BogF,uBAAwBmG,GACvBC,GACC1C,EAAc,IAAI1Q,EAAY/wB,EAAWqkC,GAC7CnsF,EAAOU,KAAKiiF,EAAa4G,EAAYliF,IAAKkiF,GAE1CrrF,KAAK6sF,WAAW1jF,IAAIkiF,EAAY/D,YAEhCtnF,KAAKkuF,wBAAwBD,EAAYL,EAAiBhkC,EAAW80B,EAAeoP,EAAWxrF,GAE/F,IAAI0G,EAAiBjF,IAAiC,IAAtBA,EAAQgmD,UAAsB,KAAOH,EACrEhiD,EAAQolF,gBAAgBJ,EAAc5sF,KAAK6sF,WAAY7jF,EAnBvD,CAXA,CA+BF,EAKAmlF,aAAc,SAAUvkC,EAAWvnD,EAASC,EAAKyB,GAC/C/D,KAAKytF,kBAAoBztF,KAAKytF,iBAAiBW,aAAaC,EAAiBzkC,GAC/E,EACAskC,wBAAyB,SAAUD,EAAYL,EAAiBhkC,EAAW80B,EAAeoP,EAAWxrF,GAEnG,IAAI8Z,EAASwtC,EAAUn2C,KAAKiJ,YACxB4xE,EAAYlyE,EAAO,GAAKA,EAAO,GAC/B2K,EAAQvgB,KAAKJ,IAAI,GAA0B,GAAtBI,KAAKiH,IAAI6gF,IAI9B5jF,EAAO9C,EAAQo8D,aAAa5hE,OAAO,CACrC6J,EAAGmQ,EAAO,GACVlQ,GAAI4hF,EAAY,EAChBviF,MAAO+iF,EACPtiF,OAAQ8hF,IAEVpjF,EAAKuB,GAAK8a,EACVrc,EAAKa,OAAS,EAAIwb,EAElB/mB,KAAKytF,iBAAiBc,MAAM,CAC1BC,iBAAiB,EACjBv8E,SAAUg8E,EAAWh8E,SACrBvL,SAAUunF,EAAWvnF,WACpB+nF,UAAU,CAAC,CACZC,QAAS,KACT93E,SAAU42E,EAAYmB,sBAAsBjkF,GAC5CkkF,iBAAkBpB,EAAYqB,yBAAyBnkF,EAAMpI,EAAKo8E,GAClEoQ,0BAA2BtB,EAAYuB,2BAA2BrkF,EAAM,MACtEskF,YAAY,CACd9lE,UAAW,QACX+lE,WAAYrB,EACZsB,eAAe,IACdd,aAAaC,EAAiBzkC,GACnC,EACA8jC,SAAU,SAAUyB,EAAep+E,GAEjC,IAAI64C,EAAY5pD,KAAK4pD,UACjBn2C,EAAOm2C,EAAUn2C,KACjB27E,EAAYttF,EAAO41B,IAAIy3D,GAAe,SAAUE,GAClD,MAAO,CAAC57E,EAAK67E,YAAYD,EAAU/oD,MAAM,IAAI,GAAO7yB,EAAK67E,YAAYD,EAAU/oD,MAAM,IAAI,GAC3F,MAIKsjB,EAAU/7C,OAAO0hF,WAAax+E,EAAIy+E,OAASz+E,EAAIm+E,gBAElDlvF,KAAKsC,IAAI84B,eAAe,CACtB14B,KAAM,iBACN+sF,eAAgB7lC,EAAUvjC,GAC1B+oE,UAAWA,GAGjB,EAKA9mF,QAAS,WACPtI,KAAKytF,iBAAiBnlF,SACxB,IAGF,SAASqlF,EAAmB/jC,EAAWvnD,EAAS0B,GAC9C,OAAOA,GAA4B,mBAAjBA,EAAQrB,MAA6BL,EAAQ09B,eAAe,CAC5E77B,SAAU,eACVE,MAAOL,IACN,KAAO6lD,CACZ,CAEA,SAASykC,EAAiBzkC,GACxB,IAAIn2C,EAAOm2C,EAAUn2C,KACrB,OAAO3R,EAAO41B,IAAIkyB,EAAU8lC,iBAAiB,SAAU/wD,GACrD,MAAO,CACLzV,UAAW,QACXwlE,QAAS,KACTpoD,MAAO,CAAC7yB,EAAKL,YAAYurB,EAAS,IAAI,GAAOlrB,EAAKL,YAAYurB,EAAS,IAAI,IAE/E,GACF,CAEA,SAASouD,EAAiBnjC,EAAWvnD,GACnC,OAAOA,EAAQ22C,aAAa,WAAY4Q,EAAU1mD,IAAI,iBACxD,CAEA,IAAIC,EAAW+1E,EACf91E,EAAOvB,QAAUsB,C,iCC5JjB,IAAIrB,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElBk5E,EAAcl5E,EAAQ,OAEtBy3E,EAAWz3E,EAAQ,OAEnBgrF,EAAmB,CAAC,WAAY,gBAAiB,YACjDC,EAAmB,CAAC,YAAa,aAEjCvpF,EAAW+1E,EAAS3xE,OAAO,CAC7B7E,KAAM,aACNmiF,iBAAkB,mBAClB/kF,OAAQ,SAAUs4C,EAAiB/1C,GAGjC,GAFArC,KAAKqI,MAAMkC,YAEN6tC,EAAgBl1C,IAAI,QAAzB,CAIA,IAAI+4C,EAAa7D,EAAgB3kC,KAC7B1I,EAAQkxC,EAAWlxC,MACnBgxC,EAAYhxC,EAAMixC,eAClBuvC,EAActvC,EAAW8oC,iBACzB5J,EAAYp/B,EAAUr/B,YAAY,GAClCy/B,EAAeF,EAAWv/B,YAC1BnT,EAASomF,EAAW5kF,EAAOqtC,EAAiB+iC,GAC5CkQ,EAAc,IAAI1Q,EAAYviC,EAAiB7uC,GACnDzH,EAAOU,KAAKiqF,EAAkBpB,EAAYliF,IAAKkiF,GAC/CrrF,KAAKqI,MAAMc,IAAIkiF,EAAY/D,YAC3BxlF,EAAOU,KAAKkqF,GAAkB,SAAUlpF,GAClC40C,EAAgBl1C,IAAIM,EAAO,WAAay4C,EAAWx1C,MAAMu3E,WAC3Dh+E,KAAK,IAAMwD,GAAM40C,EAAiBrtC,EAAOowE,EAAWh/B,EAAcovC,EAEtE,GAAGvrF,KAhBH,CAiBF,EAKA8lF,WAAY,SAAU1tC,EAAiBrtC,EAAOowE,EAAWh/B,EAAcovC,GACrE,IAAIh5D,EAAiB6lB,EAAgBzrC,SAAS,aAC1CglB,EAAiBY,EAAe5lB,SAAS,aACzCo5E,EAAap0D,EAAezuB,IAAI,SAChC8iF,EAAY,EAChBD,EAAaA,aAAsB1mD,MAAQ0mD,EAAa,CAACA,GAGzD,IAFA,IAAIE,EAAa,GAERhwE,EAAI,EAAGA,EAAIs1E,EAAYp3E,OAAQ8B,IAAK,CAC3C,IAAIiwE,EAAaF,IAAcD,EAAW5xE,OAC1C8xE,EAAWC,GAAcD,EAAWC,IAAe,GACnDD,EAAWC,GAAYllF,KAAK,IAAI4G,EAAQ6I,OAAO,CAC7CxG,MAAO,CACLkC,GAAIpB,EAAMoB,GACVC,GAAIrB,EAAMqB,GACVX,EAAG8/E,EAAYt1E,IAEjBQ,QAAQ,IAEZ,CAIA,IAASR,EAAI,EAAGA,EAAIgwE,EAAW9xE,OAAQ8B,IACrCjW,KAAKqI,MAAMc,IAAIvB,EAAQw9E,UAAUa,EAAWhwE,GAAI,CAC9C5K,MAAOvJ,EAAOkL,SAAS,CACrB0J,OAAQqvE,EAAW9vE,EAAI8vE,EAAW5xE,QAClClH,KAAM,MACL0kB,EAAejE,gBAClBjX,QAAQ,IAGd,EAKA0vE,WAAY,SAAU/tC,EAAiBrtC,EAAOowE,EAAWh/B,EAAcovC,GACrE,IAAInF,EAAiBhuC,EAAgBzrC,SAAS,aAC1CmxC,EAAiBsoC,EAAez5E,SAAS,aACzC05E,EAAavoC,EAAe56C,IAAI,SAChC8iF,EAAY,EAChBK,EAAaA,aAAsBhnD,MAAQgnD,EAAa,CAACA,GAIzD,IAHA,IAAIC,EAAa,GACbsJ,EAAarE,EAAY,GAEpBt1E,EAAI,EAAGA,EAAIs1E,EAAYp3E,OAAQ8B,IAAK,CAC3C,IAAIiwE,EAAaF,IAAcK,EAAWlyE,OAC1CmyE,EAAWJ,GAAcI,EAAWJ,IAAe,GACnDI,EAAWJ,GAAYllF,KAAK,IAAI4G,EAAQsD,OAAO,CAC7CjB,MAAO,CACLkC,GAAIpB,EAAMoB,GACVC,GAAIrB,EAAMqB,GACVV,GAAIkkF,EACJnkF,EAAG8/E,EAAYt1E,GACf7K,WAAY,EACZiB,SAAoB,EAAV7F,KAAK0L,IAEjBuE,QAAQ,KAEVm5E,EAAarE,EAAYt1E,EAC3B,CAIA,IAASA,EAAI,EAAGA,EAAIqwE,EAAWnyE,OAAQ8B,IACrCjW,KAAKqI,MAAMc,IAAIvB,EAAQw9E,UAAUkB,EAAWrwE,GAAI,CAC9C5K,MAAOvJ,EAAOkL,SAAS,CACrBC,KAAMo5E,EAAWpwE,EAAIowE,EAAWlyE,SAC/B2pC,EAAekB,gBAClBvoC,QAAQ,IAGd,IAOF,SAASk5E,EAAW5kF,EAAOqtC,EAAiB+iC,GAC1C,MAAO,CACLz0E,SAAU,CAACqE,EAAMoB,GAAIpB,EAAMqB,IAC3B6F,SAAUkpE,EAAY,IAAM30E,KAAK0L,GACjC4nE,gBAAiB,EACjBkN,eAAgB,EAChBD,cAAe,EACf93B,YAAa7W,EAAgBzrC,SAAS,aAAazJ,IAAI,UAEvDkP,GAAI,EAER,CAEAhP,EAAOvB,QAAUsB,C,iCCtIjB,IAAIrB,EAASL,EAAQ,OAEjBk5E,EAAcl5E,EAAQ,OAEtBmG,EAAUnG,EAAQ,OAElBg6E,EAAmBh6E,EAAQ,MAE3By3E,EAAWz3E,EAAQ,OAEnB0pF,EAAcxQ,EAAYwQ,YAC1BJ,EAAiBpQ,EAAYoQ,eAC7B0B,EAAmB,CAAC,WAAY,gBAAiB,YACjDoD,EAAkB,YAClBC,EAAiB5W,EAAS3xE,OAAO,CACnC7E,KAAM,aACNmiF,iBAAkB,oBAClB/kF,OAAQ,SAAU8pD,EAAWvnD,EAASC,EAAKyB,GACzC,IAAIsE,EAAQrI,KAAKqI,MACjBA,EAAMkC,YACN,IAAIhB,EAASkyE,EAAiBlyE,OAAOqgD,GACjCyhC,EAAc,IAAI1Q,EAAY/wB,EAAWrgD,GAC7CzH,EAAOU,KAAKiqF,EAAkBpB,EAAYliF,IAAKkiF,GAC/ChjF,EAAMc,IAAIkiF,EAAY/D,YAElB19B,EAAU1mD,IAAI2sF,EAAkB,UAClC7vF,KAAK,IAAM6vF,GAAiBjmC,EAAWrgD,EAAO6hF,eAGhD0E,EAAehlE,UAAU9qB,KAAM,SAAU4pD,EAAWvnD,EAASC,EAAKyB,EACpE,EACA+hF,WAAY,SAAUl8B,EAAWwhC,GAC/B,IAAI33E,EAAOm2C,EAAUn2C,KAErB,IAAIA,EAAKhN,MAAMu3E,UAAf,CAIA,IAAIzrD,EAAiBq3B,EAAUj9C,SAAS,aACpCglB,EAAiBY,EAAe5lB,SAAS,aACzCa,EAAYmkB,EAAezuB,IAAI,SAC/B6iF,EAAap0D,EAAezuB,IAAI,SAChC+pF,EAAe9B,EAAY54D,EAAgB64D,GAC/CrF,EAAaA,aAAsB1mD,MAAQ0mD,EAAa,CAACA,GAWzD,IAVA,IAAImH,EAAWtjC,EAAU1kD,iBAAiB4L,UACtChI,EAAe2K,EAAK3K,eACpBm9E,EAAa,GACbD,EAAY,EACZuF,EAAc93E,EAAKsxE,iBACnBxmD,EAAK,GACLC,EAAK,GACLqrD,EAAejgC,EAAU1mD,IAAI,0BAC7B4mF,EAAelgC,EAAU1mD,IAAI,0BAExB+S,EAAI,EAAGA,EAAIs1E,EAAYp3E,SAAU8B,EACxC,IAAI80E,EAAet3E,EAAMwC,EAAGg3E,EAAc1B,EAAYp3E,OAAQ01E,EAAcC,GAA5E,CAIA,IAAI2B,EAAYh4E,EAAKN,cAAco4E,EAAYt1E,IAE3CnN,GACFy1B,EAAG,GAAKktD,EACRltD,EAAG,GAAK2uD,EAAShhF,EACjBsyB,EAAG,GAAKitD,EACRjtD,EAAG,GAAK0uD,EAAShhF,EAAIghF,EAASlhF,SAE9BuyB,EAAG,GAAK2uD,EAASjhF,EACjBsyB,EAAG,GAAKktD,EACRjtD,EAAG,GAAK0uD,EAASjhF,EAAIihF,EAAS3hF,MAC9BizB,EAAG,GAAKitD,GAGV,IAAIvF,EAAaF,IAAcD,EAAW5xE,OAC1C8xE,EAAWC,GAAcD,EAAWC,IAAe,GACnDD,EAAWC,GAAYllF,KAAK,IAAI4G,EAAQyrB,KAAKzrB,EAAQyyE,qBAAqB,CACxEpwE,MAAO,CACL8kB,GAAIwP,EAAG,GACPvP,GAAIuP,EAAG,GACPtP,GAAIuP,EAAG,GACPrP,GAAIqP,EAAG,IAETnzB,MAAO,CACLmC,UAAWA,GAEbiJ,QAAQ,KA5BV,CAgCF,IAASR,EAAI,EAAGA,EAAIgwE,EAAW9xE,SAAU8B,EACvCjW,KAAKqI,MAAMc,IAAIvB,EAAQw9E,UAAUa,EAAWhwE,GAAI,CAC9C5K,MAAO,CACLqL,OAAQqvE,EAAW9vE,EAAI8vE,EAAW5xE,QAClCwE,SAAUgZ,EAAeo+D,YAAYviF,GACrCA,UAAWA,GAEbiJ,QAAQ,IA5DZ,CA+DF,IAEEtT,EAAW2sF,EACf1sF,EAAOvB,QAAUsB,C,wBCtGjB,IAAIrB,EAASL,EAAQ,OASrB,SAAS8H,EAAOujF,EAAWljC,EAAW74C,GACpCA,EAAMA,GAAO,CAAC,EACd,IAAIF,EAAOi8E,EAAU5nF,iBACjBuO,EAAOm2C,EAAUn2C,KACjBlK,EAAS,CAAC,EACVymF,EAAkBv8E,EAAK/M,SACvBupF,EAAex8E,EAAK2nC,OAAS,SAAW40C,EACxCr5B,EAAUljD,EAAK1K,IACf2B,EAAOmG,EAAKC,UACZo/E,EAAY,CAACxlF,EAAKuB,EAAGvB,EAAKuB,EAAIvB,EAAKa,MAAOb,EAAKwB,EAAGxB,EAAKwB,EAAIxB,EAAKsB,QAChEvH,EAAM,CACR2mB,KAAM,EACNE,MAAO,EACPD,IAAK,EACLE,OAAQ,EACR6vB,OAAQ,GAEN+0C,EAAavmC,EAAU1mD,IAAI,WAAa,EACxCktF,EAAuB,MAAZz5B,EAAkB,CAACu5B,EAAU,GAAKC,EAAYD,EAAU,GAAKC,GAAc,CAACD,EAAU,GAAKC,EAAYD,EAAU,GAAKC,GAErI,GAAI18E,EAAK2nC,OAAQ,CACf,IAAI0/B,EAAYjqE,EAAKk2B,QAAoB,MAAZ4vB,EAAkB,IAAM,IAAKljD,EAAK48E,iBAC3DC,EAAcxV,EAAU3nE,cAAc2nE,EAAU1nE,YAAY,IAChEg9E,EAAS3rF,EAAI,WAAa+B,KAAKF,IAAIE,KAAKJ,IAAIkqF,EAAaF,EAAS,IAAKA,EAAS,GAClF,CAGA7mF,EAAO7C,SAAW,CAAa,MAAZiwD,EAAkBy5B,EAAS3rF,EAAIwrF,IAAiBC,EAAU,GAAgB,MAAZv5B,EAAkBy5B,EAAS3rF,EAAIwrF,IAAiBC,EAAU,IAE3I3mF,EAAO0I,SAAWzL,KAAK0L,GAAK,GAAiB,MAAZykD,EAAkB,EAAI,GAEvD,IAAI45B,EAAS,CACXllE,KAAM,EACNE,OAAQ,EACRH,MAAO,EACPE,MAAO,GAET/hB,EAAOuwE,eAAiBvwE,EAAOy9E,cAAgBz9E,EAAOw9E,cAAgBwJ,EAAOP,GAC7EzmF,EAAOi7E,YAAc/wE,EAAK2nC,OAASg1C,EAAS3rF,EAAIurF,IAAoBI,EAAS3rF,EAAI,WAAa,EAE1FmlD,EAAU1mD,IAAI,qBAChBqG,EAAOy9E,eAAiBz9E,EAAOy9E,eAG7BllF,EAAOkS,SAASjD,EAAI4oE,YAAa/vB,EAAU1mD,IAAI,uBACjDqG,EAAOuwE,gBAAkBvwE,EAAOuwE,gBAIlC,IAAI7qB,EAAcrF,EAAU1mD,IAAI,oBAMhC,OALAqG,EAAO0lD,YAA+B,QAAjBghC,GAA0BhhC,EAAcA,EAE7D1lD,EAAO6hF,cAAgB33E,EAAK+8E,mBAE5BjnF,EAAO6I,GAAK,EACL7I,CACT,CAEA1H,EAAQ0H,OAASA,C,wBCnEjB,IAAI7F,EAAUjC,EAAQ,OAOlBoC,EAAa,CACfnB,KAAM,iBACNoC,MAAO,mBACPjC,OAAQ,gBAEVa,EAAQI,eAAeD,GAAY,SAAUE,EAAS1B,GACpDA,EAAQ4B,cAAc,CACpBC,SAAU,eACVE,MAAOL,IACN,SAAU0sF,GACXA,EAAkBh9E,KAAKwiB,MAAMy6D,mBAAmB3sF,EAAQqrF,UAC1D,GACF,IAKA1rF,EAAQI,eAAe,sBAAsB,SAAUC,EAAS1B,GAC9DA,EAAQ4B,cAAc,CACpBC,SAAU,WACVE,MAAOL,IACN,SAAUqlD,GACXA,EAAcunC,cAAc5sF,EAC9B,GACF,G,uBC/BA,IAAIjC,EAASL,EAAQ,OASrB,SAAS8H,EAAOqgD,EAAW74C,GACzBA,EAAMA,GAAO,CAAC,EACd,IAAIinC,EAAS4R,EAAU1kD,iBACnBuO,EAAOm2C,EAAUn2C,KACjBlK,EAAS,CAAC,EACV0mF,EAAex8E,EAAK/M,SACpBkyD,EAASnlD,EAAKmlD,OACdluD,EAAOstC,EAAOlnC,UACdo/E,EAAY,CAACxlF,EAAKuB,EAAGvB,EAAKuB,EAAIvB,EAAKa,MAAOb,EAAKwB,EAAGxB,EAAKwB,EAAIxB,EAAKsB,QAChE4kF,EAAc,CAChBC,WAAY,CACVxlE,IAAK6kE,EAAU,GACf3kE,OAAQ2kE,EAAU,IAEpBY,SAAU,CACR1lE,KAAM8kE,EAAU,GAChB5kE,MAAO4kE,EAAU,KAGrB3mF,EAAO7C,SAAW,CAAY,aAAXkyD,EAAwBg4B,EAAYE,SAASb,GAAgBC,EAAU,GAAe,eAAXt3B,EAA0Bg4B,EAAYC,WAAWZ,GAAgBC,EAAU,IACzK,IAAIzkF,EAAI,CACNolF,WAAY,EACZC,SAAU,GAEZvnF,EAAO0I,SAAWzL,KAAK0L,GAAK,EAAIzG,EAAEmtD,GAClC,IAAIm4B,EAAe,CACjB1lE,KAAM,EACNE,OAAQ,EACRD,MAAO,EACPF,MAAO,GAET7hB,EAAOuwE,eAAiBvwE,EAAOy9E,cAAgBz9E,EAAOw9E,cAAgBgK,EAAad,GAE/ErmC,EAAU1mD,IAAI,qBAChBqG,EAAOy9E,eAAiBz9E,EAAOy9E,eAG7BllF,EAAOkS,SAASjD,EAAI4oE,YAAa/vB,EAAU1mD,IAAI,uBACjDqG,EAAOuwE,gBAAkBvwE,EAAOuwE,gBAGlC,IAAIsB,EAAgBrqE,EAAIy7C,OAKxB,OAJiB,MAAjB4uB,IAA0BA,EAAgBxxB,EAAU1mD,IAAI,qBACxDqG,EAAO6xE,cAAiC,QAAjB6U,GAA0B7U,EAAgBA,EACjE7xE,EAAO6hF,cAAgB33E,EAAK+8E,mBAC5BjnF,EAAO6I,GAAK,EACL7I,CACT,CAEA1H,EAAQ0H,OAASA,C,wBC1DjB,IAAI7F,EAAUjC,EAAQ,OAElB6d,EAAe7d,EAAQ,KAE3BA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAKRiC,EAAQ+b,qBAAqBH,E,wBCjB7B,IAAI5X,EAAUjG,EAAQ,OAIlBiC,GAFUgE,EAAQC,QAERlG,EAAQ,QAElBK,EAASL,EAAQ,OAEjBuvF,EAAiBvvF,EAAQ,OAEzBsG,EAAQtG,EAAQ,OAEhBwvF,EAA6B,CAAC,QAC9BC,EAAaxtF,EAAQiwE,qBAAqB,CAC5CjxE,KAAM,QACN8E,aAAc,CAAC,MAAO,OAAQ,QAAS,QAAS,WAAY,UAK5D6G,cAAe,CAGb8iF,QAAS,KAETC,UAAW,KAGXlyE,YAAa,MAEb4mB,SAAU,KAEV8d,WAAY,KACZC,WAAY,KACZ36B,UAAW,OAEXmoE,UAAW,SAEXC,eAAe,EAEfrC,WAAY,CAEVj1E,YAAa,EACbzN,MAAO,wBACP0O,YAAa,yBAEfs2E,aAAc,UAGdC,cAAe,EAIftC,eAAe,EACf3gF,EAAG,KAOLkjF,MAAO,GASPvoE,UAAW,KAQXwoE,YAAa,CAAC,EAMdC,cAAe,GACf/uB,cAAe,SAAU7c,EAAW3hC,GAClC,IAAIwtE,EAAa5xF,KAAK6N,QACrBuW,GAAU4sE,EAAea,oBAAoBD,EAAY7rC,EAAW,CAAC,UAAW,eACjF6rC,EAAWE,QAAUF,EAAWE,SAAW,CAAC,EAE5CF,EAAWG,WAAaH,EAAWG,YAAc,CAC/CxlF,MAAO0kF,EAEX,EAOAe,SAAU,SAAUP,GAIbA,IAILzxF,KAAKyxF,MAAQ3vF,EAAO41B,IAAI+5D,GAAO,SAAUjjB,GACvC,OAAOyjB,EAAoBjyF,KAAK6N,OAAQ2gE,EAC1C,GAAGxuE,MACL,EAMAkyF,eAAgB,SAAUR,GACxB1xF,KAAK0xF,YAAcO,EAAoBjyF,KAAK6N,OAAQ6jF,GACpD1xF,KAAKkpB,UAAYlpB,KAAK0xF,YAAYxoE,SACpC,IAGF,SAAS+oE,EAAoBpkF,EAAQ6jF,GACnC,OAAO5vF,EAAOqwF,MAAM,CAClBjpE,UAAWrb,EAAOqb,UAClBmoE,UAAWxjF,EAAOwjF,UAClBC,cAAezjF,EAAOyjF,cACtBrC,WAAY,IAAIlnF,EAAM8F,EAAOohF,YAAYl3E,eACzCm3E,cAAerhF,EAAOqhF,cACtB3gF,EAAGV,EAAOU,GACTmjF,GAAa,EAClB,CAEA,IAAIvuF,EAAW+tF,EACf9tF,EAAOvB,QAAUsB,C,wBCvIjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjB8rF,EAAkB9rF,EAAQ,OAE1B0B,EAAWO,EAAQ4wE,oBAAoB,CACzC5xE,KAAM,QACN2mB,KAAM,SAAUhnB,EAASC,GAKvBtC,KAAKqC,QAAUA,EAMfrC,KAAKsC,IAAMA,EAMXtC,KAAKi2B,OAMJj2B,KAAKytF,iBAAmB,IAAIF,EAAgBjrF,EAAIujB,UAAUvlB,GAAG,QAASwB,EAAO2B,KAAKzD,KAAK0tF,SAAU1tF,OAAOuuF,OAC3G,EAKAzuF,OAAQ,SAAUsyF,GAEhB,OADApyF,KAAKi2B,MAAQm8D,EACNC,EAAiBvvB,MAAM9iE,KAAM6P,UACtC,EAKAyiF,WAAYD,EAKZ5oE,aAAc4oE,EAKdlE,aAAckE,EAKd/pF,QAAS,WACPtI,KAAKytF,iBAAiBnlF,SACxB,EAKAolF,SAAU,SAAU+D,EAAO1gF,GACzB,IAAIwhF,EAAUvyF,KAAKi2B,MAAM5P,GACzBrmB,KAAKi2B,MAAMu8D,mBAAmBC,gBAAgBhB,EAAOzxF,KAAKqC,WAKxD0O,EAAIy+E,OAASz+E,EAAIm+E,gBAAkBlvF,KAAKsC,IAAI84B,eAAe,CAC3D14B,KAAM,QACNgwF,QAASH,EACTd,MAAO3vF,EAAOyiB,MAAMktE,GACpBkB,MAAOJ,GAEX,IAGF,SAASF,EAAiBD,EAAY/vF,EAASC,EAAKyB,KAEhDA,GAAWA,EAAQ4uF,QAAUP,EAAW/rE,KAAOrmB,KAAKytF,iBAAiBgB,UAAU2D,EAAWI,mBAAmBI,cAActwF,IAAM0sF,YAAYoD,EAAWV,aAAatD,aAAagE,EAAWX,MAAMzuF,QACvM,CAEAI,EAAOvB,QAAUsB,C,wBCxFjB,IAAIO,EAAUjC,EAAQ,OAUtBiC,EAAQI,eAAe,CACrBpB,KAAM,QACNoC,MAAO,QACPjC,OAAQ,eACP,SAAUkB,EAAS1B,GACpBA,EAAQ4B,cAAc,CACpBC,SAAU,QACVE,MAAOL,IACN,SAAUquF,GACXA,EAAWJ,SAASjuF,EAAQ0tF,MAC9B,GACF,IAuBA/tF,EAAQI,eAAe,CACrBpB,KAAM,cACNoC,MAAO,gBACPjC,OAAQ,SACP,WAAa,G,+BChDhB,IAAIf,EAASL,EAAQ,OAEjBoxF,EAAuB,CAAC,OAAQ,UAAW,OAAQ,SAEvD,SAAS1vF,EAAS0K,EAAQilF,GACxB,IAAIC,EAAkBllF,GAAUA,EAAOq2B,MAMvC,GAJKpiC,EAAO6Q,QAAQogF,KAClBA,EAAkBA,EAAkB,CAACA,GAAmB,IAGrDA,EAAgB5+E,OAArB,CAIA,IAAI6+E,EAA8B,GAClClxF,EAAOU,KAAKuwF,GAAiB,SAAUE,GACrC,IAAIC,EAAMD,EAASrxF,eAAe,WAAaqxF,EAAS9B,QAAU,GAE9D+B,aAAe7zD,QACjB2zD,EAA8BA,EAA4BpwF,OAAOswF,GAErE,IACA,IAAI/B,EAAUtjF,GAAUA,EAAOsjF,QAE3BrvF,EAAO6Q,QAAQw+E,KACjBA,EAAUA,EAAQ,IAGfA,IACHA,EAAU,CACRgC,QAAS,CAAC,GAEZtlF,EAAOsjF,QAAU,CAACA,IAGpB,IAAIiC,EAAiBjC,EAAQgC,UAAYhC,EAAQgC,QAAU,CAAC,GACxDE,EAAeD,EAAelvD,QAAUkvD,EAAelvD,MAAQ,CAAC,GAChEovD,EAAaD,EAAa3wF,OAAS2wF,EAAa3wF,KAAO,IAC3D4wF,EAAWtyF,KAAK8hE,MAAMwwB,EAAYN,GAClCO,EAAgBD,GAEZR,IAAUQ,EAAWn/E,QACvBm/E,EAAWtyF,KAAK8hE,MAAMwwB,EAAYT,EA9BpC,CAgCF,CAEA,SAASU,EAAgBC,GACvB,IAAI97D,EAAM,CAAC,EACX51B,EAAOU,KAAKgxF,GAAK,SAAUr1E,GACzBuZ,EAAIvZ,GAAO,CACb,IACAq1E,EAAIr/E,OAAS,EACbrS,EAAOU,KAAKk1B,GAAK,SAAU+7D,EAAMt1E,GAC/Bq1E,EAAIxyF,KAAKmd,EACX,GACF,CAEA/a,EAAOvB,QAAUsB,C,wBC1DjB,IAAIuwF,EAAiBjyF,EAAQ,IAEzBuiE,EAAeviE,EAAQ,OAWvBkyF,EAAW,CACbC,MAAOC,EAAiB,GACxBC,MAAOD,EAAiB,GACxBnpF,KAAM,CACJ5E,MAAO,SAAUqa,EAAYD,EAAWsuD,GACtC,OAAOruD,GAAcquD,EAAKulB,aAAaj3D,QAAQ3c,EAAW,GAAIA,EAAW,GAC3E,EACAzV,KAAM,SAAUyV,EAAYD,EAAWsuD,GACrC,OAAOruD,GAAcquD,EAAKulB,aAAaxiB,UAAUpxD,EACnD,GAEF4L,QAAS,CACPjmB,MAAO,SAAUqa,EAAYD,EAAWsuD,GACtC,OAAOruD,GAAcquD,EAAKulB,aAAaj3D,QAAQ3c,EAAW,GAAIA,EAAW,KAAOuzE,EAAe52D,QAAQ0xC,EAAKloC,MAAOnmB,EAAW,GAAIA,EAAW,GAC/I,EACAzV,KAAM,SAAUyV,EAAYD,EAAWsuD,GACrC,IAAI7hD,EAAS6hD,EAAKloC,MAElB,IAAKnmB,GAAcwM,EAAOxY,QAAU,EAClC,OAAO,EAGT,IAAIlI,EAAIkU,EAAWlU,EACfC,EAAIiU,EAAWjU,EACfX,EAAQ4U,EAAW5U,MACnBS,EAASmU,EAAWnU,OACpBoS,EAAIuO,EAAO,GAEf,SAAI+mE,EAAe52D,QAAQnQ,EAAQ1gB,EAAGC,IAAMwnF,EAAe52D,QAAQnQ,EAAQ1gB,EAAIV,EAAOW,IAAMwnF,EAAe52D,QAAQnQ,EAAQ1gB,EAAGC,EAAIF,IAAW0nF,EAAe52D,QAAQnQ,EAAQ1gB,EAAIV,EAAOW,EAAIF,IAAWg4D,EAAa5hE,OAAO+d,GAAY2c,QAAQ1e,EAAE,GAAIA,EAAE,KAAO41E,EAAqB/nF,EAAGC,EAAGD,EAAIV,EAAOW,EAAGygB,IAAWqnE,EAAqB/nF,EAAGC,EAAGD,EAAGC,EAAIF,EAAQ2gB,IAAWqnE,EAAqB/nF,EAAIV,EAAOW,EAAGD,EAAIV,EAAOW,EAAIF,EAAQ2gB,IAAWqnE,EAAqB/nF,EAAGC,EAAIF,EAAQC,EAAIV,EAAOW,EAAIF,EAAQ2gB,UAAte,CAGF,IAIJ,SAASknE,EAAiBI,GACxB,IAAI7jF,EAAK,CAAC,IAAK,KACXC,EAAK,CAAC,QAAS,UACnB,MAAO,CACLvK,MAAO,SAAUqa,EAAYD,EAAWsuD,GACtC,GAAIruD,EAAY,CACd,IAAImmB,EAAQkoC,EAAKloC,MACbloB,EAAI+B,EAAW8zE,GACnB,OAAOC,EAAY91E,EAAGkoB,EACxB,CACF,EACA57B,KAAM,SAAUyV,EAAYD,EAAWsuD,GACrC,GAAIruD,EAAY,CACd,IAAImmB,EAAQkoC,EAAKloC,MACb6tD,EAAc,CAACh0E,EAAW/P,EAAG6jF,IAAW9zE,EAAW/P,EAAG6jF,IAAY9zE,EAAW9P,EAAG4jF,KAEpF,OADAE,EAAY,GAAKA,EAAY,IAAMA,EAAY3gF,UACxC0gF,EAAYC,EAAY,GAAI7tD,IAAU4tD,EAAYC,EAAY,GAAI7tD,IAAU4tD,EAAY5tD,EAAM,GAAI6tD,IAAgBD,EAAY5tD,EAAM,GAAI6tD,EACjJ,CACF,EAEJ,CAEA,SAASD,EAAY91E,EAAGkoB,GACtB,OAAOA,EAAM,IAAMloB,GAAKA,GAAKkoB,EAAM,EACrC,CAEA,SAAS0tD,EAAqBI,EAAIC,EAAIC,EAAKC,EAAK5nE,GAC9C,IAAK,IAAI1W,EAAI,EAAGuoB,EAAK7R,EAAOA,EAAOxY,OAAS,GAAI8B,EAAI0W,EAAOxY,OAAQ8B,IAAK,CACtE,IAAImI,EAAIuO,EAAO1W,GAEf,GAAIu+E,EAAcJ,EAAIC,EAAIC,EAAKC,EAAKn2E,EAAE,GAAIA,EAAE,GAAIogB,EAAG,GAAIA,EAAG,IACxD,OAAO,EAGTA,EAAKpgB,CACP,CACF,CAIA,SAASo2E,EAAcC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACxD,IAAIpnC,EAAQqnC,EAAYN,EAAMF,EAAKI,EAAME,EAAKH,EAAMF,EAAKI,EAAME,GAE/D,GAAIE,EAAStnC,GAEX,OAAO,EAGT,IAAIunC,EAAUF,EAAYJ,EAAMJ,EAAKI,EAAME,EAAKD,EAAMJ,EAAKI,EAAME,GAAOpnC,EAExE,GAAIunC,EAAU,GAAKA,EAAU,EAC3B,OAAO,EAGT,IAAIC,EAAMH,EAAYN,EAAMF,EAAKI,EAAMJ,EAAKG,EAAMF,EAAKI,EAAMJ,GAAO9mC,EAEpE,QAAIwnC,EAAM,GAAKA,EAAM,EAKvB,CAEA,SAASF,EAAS/2E,GAChB,OAAOA,GAAO,MAAQA,IAAQ,IAChC,CAEA,SAAS82E,EAAYr3D,EAAIC,EAAIC,EAAIu3D,GAC/B,OAAOz3D,EAAKy3D,EAAKx3D,EAAKC,CACxB,CAEA,IAAI36B,EAAWwwF,EACfvwF,EAAOvB,QAAUsB,C,iCCxHjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBuiE,EAAeviE,EAAQ,OAEvBuvF,EAAiBvvF,EAAQ,OAEzBkyF,EAAWlyF,EAAQ,OAEnBozE,EAAepzE,EAAQ,OAEvB6zF,EAAqB7zF,EAAQ,OAE7B8zF,EAAa,CAAC,UAAW,cACzBC,EAAkB,kBAClBC,EAAgB,yBAChBC,EAAiBhyF,EAAQi2C,SAASg8C,OAAOC,MAoJ7C,SAASx6D,EAAe94B,EAAKivF,EAAcC,EAAeqE,EAAe9xF,GASvE,GAAKA,EAAL,CAIA,IAAIwgD,EAAKjiD,EAAIujB,QAEb,IAAI0+B,EAAGkxC,GAAP,CAIKlxC,EAAGixC,KACNjxC,EAAGixC,GAAmBM,GAGxB,IAAIC,EAAKlhB,EAAajtD,eAAe28B,EAAIixC,EAAiBhE,EAAeD,GACzEwE,EAAGzzF,EAAKuzF,EAPR,CANA,CAcF,CAEA,SAASC,EAAWxzF,EAAKuzF,GACvB,IAAKvzF,EAAI0zF,aAAc,CACrB,IAAIzxC,EAAKjiD,EAAIujB,QACb0+B,EAAGkxC,IAAiB,EACpBnzF,EAAI84B,eAAe,CACjB14B,KAAM,cACNo9E,MAAO+V,IAETtxC,EAAGkxC,IAAiB,CACtB,CACF,CAEA,SAASQ,EAAaC,EAAsBC,EAAev1F,EAAM2D,GAC/D,IAAK,IAAI0R,EAAI,EAAGuY,EAAM2nE,EAAchiF,OAAQ8B,EAAIuY,EAAKvY,IAAK,CACxD,IAAIu4D,EAAO2nB,EAAclgF,GAEzB,GAAIigF,EAAqB1nB,EAAKtlD,WAAW3kB,EAAW3D,EAAM4tE,EAAKtuD,UAAWsuD,GACxE,OAAO,CAEX,CACF,CAEA,SAAS4nB,EAAwB/xF,GAC/B,IAAIoD,EAAgBpD,EAAYoD,cAEhC,GAAI3F,EAAOwiF,SAAS78E,GAAgB,CAClC,IAAI4uF,EAAO,GAOX,OANAv0F,EAAOU,KAAKmxF,GAAU,SAAU2C,EAAwBptE,GACtDmtE,EAAKntE,GAAa,SAAU3kB,EAAW3D,EAAMsf,EAAWsuD,GACtD,IAAIruD,EAAavf,EAAK+K,cAAcpH,GACpC,OAAO+xF,EAAuB7uF,GAAe0Y,EAAYD,EAAWsuD,EACtE,CACF,IACO6nB,CACT,CAAO,GAAIv0F,EAAOyiF,WAAW98E,GAAgB,CAC3C,IAAI8uF,EAAY,CAAC,EAIjB,OAHAz0F,EAAOU,KAAKmxF,GAAU,SAAU6C,EAAKttE,GACnCqtE,EAAUrtE,GAAazhB,CACzB,IACO8uF,CACT,CAEA,OAAO9uF,CACT,CAEA,SAASgvF,EAAsBrE,EAAYlzE,GACzC,IAAIw3E,EAAgBtE,EAAWvkF,OAAOqR,YACtC,OAAwB,MAAjBw3E,GAA2C,QAAlBA,IAA4B50F,EAAO6Q,QAAQ+jF,GAAiB50F,EAAOqa,QAAQu6E,EAAex3E,GAAe,EAAIA,IAAgBw3E,EAC/J,CAEA,SAASC,EAAanoB,GACpB,IAAItuD,EAAYsuD,EAAKtuD,UAAY,CAAC,EAOlC,OANApe,EAAOU,KAAKmxF,EAASnlB,EAAKtlD,YAAY,SAAU0tE,EAAOC,GAErD32E,EAAU22E,GAAU,SAAU12E,GAC5B,OAAOy2E,EAAMz2E,EAAYD,EAAWsuD,EACtC,CACF,IACOA,CACT,CArOA9qE,EAAQuD,eAAeyuF,GAAgB,SAAUrzF,EAASC,EAAKyB,GAC7D1B,EAAQ4B,cAAc,CACpBC,SAAU,UACT,SAAUkuF,GACXruF,GAA4B,qBAAjBA,EAAQrB,MAA+B0vF,EAAWF,eAA+B,UAAhBnuF,EAAQpC,IAAkBoC,EAAQ2tF,YAAc,CAC1HxoE,WAAW,IAEb,IAAIspE,EAAqBJ,EAAWI,mBAAqB,IAAI8C,EAAmBlD,EAAWvkF,OAAQxL,GACnGmwF,EAAmBsE,eAAe1E,EAAWX,MAAOpvF,EACtD,GACF,IAKAqB,EAAQyD,eAAeuuF,GAAgB,SAAUrzF,EAASC,EAAKyB,GAC7D,IACIwtF,EACAC,EAFAqE,EAAgB,GAGpBxzF,EAAQ4B,cAAc,CACpBC,SAAU,UACT,SAAUkuF,EAAY2E,GACvB,IAAIC,EAAoB,CACtBtE,QAASN,EAAW/rE,GACpB0wE,WAAYA,EACZE,UAAW7E,EAAW5uF,KACtBiuF,MAAO3vF,EAAOyiB,MAAM6tE,EAAWX,OAC/BztF,SAAU,IAIZ6xF,EAAc70F,KAAKg2F,GACnB,IAAItF,EAAcU,EAAWvkF,OACzBujF,EAAYM,EAAYN,UACxB8F,EAAkB,GAClBC,EAA2B,GAC3BC,EAAoB,GACpBC,EAAiB,EAEhBN,IAEHxF,EAAeG,EAAYH,aAC3BC,EAAgBE,EAAYF,eAI9B,IAAIC,EAAQ3vF,EAAO41B,IAAI06D,EAAWX,OAAO,SAAUjjB,GACjD,OAAOmoB,EAAa70F,EAAOkL,SAAS,CAClC+mF,aAAcuD,EAAqB9oB,EAAKtlD,WAAWslD,IAClDA,GACL,IACI+oB,EAAiBvG,EAAewG,qBAAqBpF,EAAWvkF,OAAQ0nF,GAAY,SAAUkC,GAChGA,EAActiC,cAAgB,OAChC,IAKA,SAASuiC,EAAWx4E,GAClB,MAAqB,QAAdkyE,GAAuB8F,EAAgBh4E,EAChD,CAIA,SAASy4E,EAAQxB,GACf,QAASA,EAAchiF,MACzB,CAqBA,SAASyjF,EAAcvzF,EAAa6a,GAClC,IAAIpc,EAAWuB,EAAYa,iBAC3BmyF,GAAkBv0F,EAAS+0F,iBAC3BH,EAAWx4E,IAAgBpc,EAASonD,gBAAgB7lD,EAAYG,WAAW,SAAUylD,EAAa1lD,GAChF,WAAhB0lD,IAA6BktC,EAAyB5yF,GAAa,EACrE,GACF,CAEA,SAASuzF,EAAYzzF,EAAa6a,EAAai3E,GAC7C,IAAID,EAAuBE,EAAwB/xF,GAEnD,GAAK6xF,IAAwBO,EAAsBrE,EAAYlzE,KAI/Dpd,EAAOU,KAAKivF,GAAO,SAAUjjB,GAC3B0nB,EAAqB1nB,EAAKtlD,YAAckpE,EAAWI,mBAAmBuF,cAAcvpB,EAAMnqE,EAAahC,IAAY8zF,EAAcn1F,KAAKwtE,GACtI6oB,GAAkBM,EAAQxB,EAC5B,IAEIuB,EAAWx4E,IAAgBy4E,EAAQxB,IAAgB,CACrD,IAAIv1F,EAAOyD,EAAYG,UACvB5D,EAAK4B,MAAK,SAAU+B,GACd0xF,EAAaC,EAAsBC,EAAev1F,EAAM2D,KAC1D4yF,EAAyB5yF,GAAa,EAE1C,GACF,CACF,CA7DAzC,EAAO6Q,QAAQy+E,IAActvF,EAAOU,KAAK4uF,GAAW,SAAUlyE,GAC5Dg4E,EAAgBh4E,GAAe,CACjC,IA0BA7c,EAAQ4gF,YAAW,SAAU5+E,EAAa6a,GACxC,IAAIi3E,EAAgBiB,EAAkBl4E,GAAe,GAC7B,aAAxB7a,EAAYF,QAAyByzF,EAAcvzF,EAAa6a,EAAai3E,GAAiB2B,EAAYzzF,EAAa6a,EAAai3E,EACtI,IAiCA9zF,EAAQ4gF,YAAW,SAAU5+E,EAAa6a,GACxC,IAAI84E,EAAsB,CACxB5xE,SAAU/hB,EAAYgiB,GACtBnH,YAAaA,EACboH,WAAYjiB,EAAYb,KACxBe,UAAW,IAIbyyF,EAAkBhzF,SAAShD,KAAKg3F,GAChC,IAAI9B,EAAuBE,EAAwB/xF,GAC/C8xF,EAAgBiB,EAAkBl4E,GAClCte,EAAOyD,EAAYG,UACnByzF,EAAgBP,EAAWx4E,GAAe,SAAU3a,GACtD,OAAO4yF,EAAyB5yF,IAAcyzF,EAAoBzzF,UAAUvD,KAAKJ,EAAKgmB,YAAYriB,IAAa,WAAa,YAC9H,EAAI,SAAUA,GACZ,OAAO0xF,EAAaC,EAAsBC,EAAev1F,EAAM2D,IAAcyzF,EAAoBzzF,UAAUvD,KAAKJ,EAAKgmB,YAAYriB,IAAa,WAAa,YAC7J,GAECmzF,EAAWx4E,GAAem4E,EAAiBM,EAAQxB,KAAmBnF,EAAekH,YAAY3C,EAAYgC,EAAgB32F,EAAMq3F,EACtI,GACF,IACA78D,EAAe94B,EAAKivF,EAAcC,EAAeqE,EAAe9xF,EAClE,IA0FA,IAAIuzF,EAAuB,CACzB1D,MAAO9xF,EAAOyG,KACdurF,MAAOhyF,EAAOyG,KACdmC,KAAM,SAAU8jE,GACd,OAAO2pB,EAA0B3pB,EAAKloC,MACxC,EACAva,QAAS,SAAUyiD,GAIjB,IAHA,IAAI4pB,EACA9xD,EAAQkoC,EAAKloC,MAERrwB,EAAI,EAAGuY,EAAM8X,EAAMnyB,OAAQ8B,EAAIuY,EAAKvY,IAAK,CAChDmiF,EAASA,GAAU,CAAC,CAAC7xF,KAAWA,KAAW,CAACA,KAAWA,MACvD,IAAI8xF,EAAK/xD,EAAMrwB,GACfoiF,EAAG,GAAKD,EAAO,GAAG,KAAOA,EAAO,GAAG,GAAKC,EAAG,IAC3CA,EAAG,GAAKD,EAAO,GAAG,KAAOA,EAAO,GAAG,GAAKC,EAAG,IAC3CA,EAAG,GAAKD,EAAO,GAAG,KAAOA,EAAO,GAAG,GAAKC,EAAG,IAC3CA,EAAG,GAAKD,EAAO,GAAG,KAAOA,EAAO,GAAG,GAAKC,EAAG,GAC7C,CAEA,OAAOD,GAAUD,EAA0BC,EAC7C,GAGF,SAASD,EAA0BC,GACjC,OAAO,IAAIp0B,EAAao0B,EAAO,GAAG,GAAIA,EAAO,GAAG,GAAIA,EAAO,GAAG,GAAKA,EAAO,GAAG,GAAIA,EAAO,GAAG,GAAKA,EAAO,GAAG,GAC5G,C,wBCtRA32F,EAAQ,OAERA,EAAQ,OAERA,EAAQ,M,iCCJR,IAAIiC,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElBi5E,EAAaj5E,EAAQ,OAErBk3D,EAAal3D,EAAQ,OAErB62F,EAAa,CACfC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClFC,GAAI,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,QAEtEC,EAAY,CACdF,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACnCC,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAGjCr1F,EAAWO,EAAQ4wE,oBAAoB,CACzC5xE,KAAM,WAMNg2F,UAAW,KAMXC,UAAW,KAMXC,iBAAkB,KAMlBC,gBAAiB,KACjB/4F,OAAQ,SAAUg5F,EAAez2F,EAASC,GACxC,IAAI+F,EAAQrI,KAAKqI,MACjBA,EAAMkC,YACN,IAAIzH,EAAWg2F,EAAc5zF,iBAEzB6zF,EAAYj2F,EAASk2F,eACrBpgC,EAAS91D,EAASm2F,YAEtBj5F,KAAKk5F,eAAeJ,EAAeC,EAAW1wF,GAG9CrI,KAAKm5F,aAAaL,EAAeC,EAAWngC,EAAQvwD,GAEpDrI,KAAKo5F,gBAAgBN,EAAeC,EAAWngC,EAAQvwD,GAEvDrI,KAAKq5F,iBAAiBP,EAAelgC,EAAQvwD,GAE7CrI,KAAKs5F,gBAAgBR,EAAeC,EAAWngC,EAAQvwD,EACzD,EAEA6wF,eAAgB,SAAUJ,EAAeC,EAAW1wF,GAMlD,IALA,IAAIvF,EAAWg2F,EAAc5zF,iBACzBq0F,EAAqBT,EAAcnsF,SAAS,oBAAoBoL,eAChEyhF,EAAK12F,EAAS22F,eACdC,EAAK52F,EAAS62F,gBAET1jF,EAAI8iF,EAAUx6E,MAAMq7E,KAAM3jF,GAAK8iF,EAAUjpE,IAAI8pE,KAAM3jF,EAAInT,EAAS+2F,YAAY5jF,EAAG,GAAG2jF,KAAM,CAC/F,IAAI9zF,EAAQhD,EAASykC,WAAW,CAACtxB,IAAI,GAAO6jF,GAExCpvF,EAAO,IAAI9C,EAAQ+C,KAAK,CAC1BV,MAAO,CACLgC,EAAGnG,EAAM,GACToG,EAAGpG,EAAM,GACTyF,MAAOiuF,EACPxtF,OAAQ0tF,GAEVzhF,OAAQ,UACR5M,MAAOkuF,IAETlxF,EAAMc,IAAIuB,EACZ,CACF,EAEAyuF,aAAc,SAAUL,EAAeC,EAAWngC,EAAQvwD,GACxD,IAAIutB,EAAO51B,KACP8C,EAAWg2F,EAAc5zF,iBACzBysB,EAAiBmnE,EAAcnsF,SAAS,uBAAuB+gB,eAC/DhD,EAAOouE,EAAc51F,IAAI,kBACzBsK,EAAYmkB,EAAenkB,UAC/BxN,KAAK04F,UAAY,GACjB14F,KAAK24F,UAAY,GACjB34F,KAAK44F,iBAAmB,GACxB54F,KAAK64F,gBAAkB,GAGvB,IAFA,IAAIkB,EAAWhB,EAAUx6E,MAEhBtI,EAAI,EAAG8jF,EAASH,MAAQb,EAAUjpE,IAAI8pE,KAAM3jF,IAAK,CACxD+jF,EAAUD,EAASE,cAET,IAANhkF,IACF8jF,EAAWj3F,EAASo3F,YAAYnB,EAAUx6E,MAAMrS,EAAI,IAAM6sF,EAAUx6E,MAAM26C,IAG5E,IAAIihC,EAAOJ,EAASI,KACpBA,EAAKC,SAASD,EAAKE,WAAa,GAChCN,EAAWj3F,EAASo3F,YAAYC,EAClC,CAIA,SAASH,EAAUG,GACjBvkE,EAAKgjE,iBAAiB53F,KAAK8B,EAASo3F,YAAYC,IAEhDvkE,EAAKijE,gBAAgB73F,KAAK8B,EAASykC,WAAW,CAAC4yD,IAAO,GAAOL,IAE7D,IAAIntE,EAASiJ,EAAK0kE,wBAAwBxB,EAAeqB,EAAMvhC,GAE/DhjC,EAAK8iE,UAAU13F,KAAK2rB,EAAO,IAE3BiJ,EAAK+iE,UAAU33F,KAAK2rB,EAAOA,EAAOxY,OAAS,IAE3CuW,GAAQkL,EAAK2kE,eAAe5tE,EAAQgF,EAAgBtpB,EACtD,CAdA2xF,EAAUl3F,EAAS+2F,YAAYd,EAAUjpE,IAAI8pE,KAAM,GAAGK,cAiBtDvvE,GAAQ1qB,KAAKu6F,eAAe3kE,EAAK4kE,gBAAgB5kE,EAAK8iE,UAAWlrF,EAAWorD,GAASjnC,EAAgBtpB,GAErGqiB,GAAQ1qB,KAAKu6F,eAAe3kE,EAAK4kE,gBAAgB5kE,EAAK+iE,UAAWnrF,EAAWorD,GAASjnC,EAAgBtpB,EACvG,EAEAmyF,gBAAiB,SAAU7tE,EAAQnf,EAAWorD,GAC5C,IAAI6hC,EAAK,CAAC9tE,EAAO,GAAG3pB,QAAS2pB,EAAOA,EAAOxY,OAAS,GAAGnR,SACnDyB,EAAiB,eAAXm0D,EAA0B,EAAI,EAIxC,OAFA6hC,EAAG,GAAGh2F,GAAOg2F,EAAG,GAAGh2F,GAAO+I,EAAY,EACtCitF,EAAG,GAAGh2F,GAAOg2F,EAAG,GAAGh2F,GAAO+I,EAAY,EAC/BitF,CACT,EAEAF,eAAgB,SAAU5tE,EAAQgF,EAAgBtpB,GAChD,IAAIqyF,EAAU,IAAI9yF,EAAQqkB,SAAS,CACjC7Z,GAAI,GACJnI,MAAO,CACL0iB,OAAQA,GAEVthB,MAAOsmB,IAETtpB,EAAMc,IAAIuxF,EACZ,EAEAJ,wBAAyB,SAAUxB,EAAeqB,EAAMvhC,GACtD,IAAI91D,EAAWg2F,EAAc5zF,iBAC7Bi1F,EAAOr3F,EAASo3F,YAAYC,GAG5B,IAFA,IAAIxtE,EAAS,GAEJ1W,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAI0kF,EAAO73F,EAAS+2F,YAAYM,EAAKP,KAAM3jF,GACvCnQ,EAAQhD,EAASykC,WAAW,CAACozD,EAAKf,OAAO,GAC7CjtE,EAAO,EAAIguE,EAAKC,KAAO90F,EAAMg0F,GAC7BntE,EAAO,EAAIguE,EAAKC,IAAM,GAAK90F,EAAiB,eAAX8yD,EAA0B,KAAO,KACpE,CAEA,OAAOjsC,CACT,EACAkuE,gBAAiB,SAAUliE,EAAW9N,GACpC,MAAyB,kBAAd8N,GAA0BA,EAC5B+hD,EAAWogB,gBAAgBniE,EAAW9N,GAGtB,oBAAd8N,EACFA,EAAU9N,GAGZA,EAAOu7B,OAChB,EACA20C,yBAA0B,SAAUlV,EAAQ//E,EAAO8yD,EAAQlyD,EAAUoxD,GACnEhyD,EAAQA,EAAM9C,QACd,IAAIg4F,EAAS,CAAC,SAAU,UAEP,WAAbt0F,GACFZ,EAAM,IAAMgyD,EACZkjC,EAAS,CAAC,SAAU,QACE,SAAbt0F,EACTZ,EAAM,IAAMgyD,EACU,UAAbpxD,GACTZ,EAAM,IAAMgyD,EACZkjC,EAAS,CAAC,SAAU,QAGpBl1F,EAAM,IAAMgyD,EAGd,IAAItL,EAAS,EAMb,MAJiB,SAAb9lD,GAAoC,UAAbA,IACzB8lD,EAAShmD,KAAK0L,GAAK,GAGd,CACLD,SAAUu6C,EACV9lD,SAAUZ,EACVuF,MAAO,CACLkiB,UAAWytE,EAAO,GAClBxtE,kBAAmBwtE,EAAO,IAGhC,EAEA5B,gBAAiB,SAAUN,EAAeC,EAAWngC,EAAQvwD,GAC3D,IAAI4yF,EAAYnC,EAAcnsF,SAAS,aAEvC,GAAKsuF,EAAU/3F,IAAI,QAAnB,CAIA,IAAI40D,EAASmjC,EAAU/3F,IAAI,UACvBw4B,EAAMu/D,EAAU/3F,IAAI,YAEnBw4B,IACHA,EAAiB,eAAXk9B,EAA0B,MAAQ,QAG1C,IAAIjsC,EAAS,CAAC3sB,KAAK04F,UAAU14F,KAAK04F,UAAUvkF,OAAS,GAAInU,KAAK24F,UAAU,IACpEuC,GAAMvuE,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrCwuE,GAAMxuE,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrCloB,EAAiB,eAAXm0D,EAA0B,EAAI,EACpCwiC,EAAY,CACd/vE,IAAK,CAAC6vE,EAAIvuE,EAAOloB,GAAK,IACtB8mB,OAAQ,CAAC2vE,EAAIvuE,EAAO,EAAIloB,GAAK,IAC7B2mB,KAAM,CAACuB,EAAO,EAAIloB,GAAK,GAAI02F,GAC3B7vE,MAAO,CAACqB,EAAOloB,GAAK,GAAI02F,IAEtB33F,EAAOu1F,EAAUx6E,MAAMrS,GAEtB6sF,EAAUjpE,IAAI5jB,GAAK6sF,EAAUx6E,MAAMrS,IACtC1I,EAAOA,EAAO,IAAMu1F,EAAUjpE,IAAI5jB,GAGpC,IAAIysB,EAAYsiE,EAAU/3F,IAAI,aAC1B2nB,EAAS,CACXtM,MAAOw6E,EAAUx6E,MAAMrS,EACvB4jB,IAAKipE,EAAUjpE,IAAI5jB,EACnBk6C,QAAS5iD,GAGPkmE,EAAU1pE,KAAK66F,gBAAgBliE,EAAW9N,GAE1CwwE,EAAW,IAAIzzF,EAAQgc,KAAK,CAC9BxR,GAAI,KAENxK,EAAQof,aAAaq0E,EAAShwF,MAAO4vF,EAAW,CAC9C3vF,KAAMo+D,IACJ2xB,EAASjuF,KAAKpN,KAAK+6F,yBAAyBM,EAAUD,EAAU1/D,GAAMk9B,EAAQl9B,EAAKo8B,IACvFzvD,EAAMc,IAAIkyF,EAxCV,CAyCF,EACAC,0BAA2B,SAAUx1F,EAAOy1F,EAAU3iC,EAAQlyD,EAAUoxD,GACtE,IAAIoiB,EAAQ,OACRshB,EAAS,MACTvvF,EAAInG,EAAM,GACVoG,EAAIpG,EAAM,GAwBd,MAtBe,eAAX8yD,GACF1sD,GAAQ4rD,EAEJyjC,IACFrhB,EAAQ,UAGO,UAAbxzE,IACF80F,EAAS,YAGXvvF,GAAQ6rD,EAEJyjC,IACFC,EAAS,UAGM,UAAb90F,IACFwzE,EAAQ,UAIL,CACLjuE,EAAGA,EACHC,EAAGA,EACHqhB,UAAW2sD,EACX1sD,kBAAmBguE,EAEvB,EAEAnC,iBAAkB,SAAUP,EAAelgC,EAAQvwD,GACjD,IAAIozF,EAAa3C,EAAcnsF,SAAS,cAExC,GAAK8uF,EAAWv4F,IAAI,QAApB,CAIA,IAAIkjD,EAAUq1C,EAAWv4F,IAAI,WACzB40D,EAAS2jC,EAAWv4F,IAAI,UACxBw4B,EAAM+/D,EAAWv4F,IAAI,YACrBg3E,EAAQuhB,EAAWv4F,IAAI,SACvBw4F,EAAa,CAAC17F,KAAK04F,UAAW14F,KAAK24F,WAEnC72F,EAAOwiF,SAASl+B,KAClBA,EAAUkyC,EAAWlyC,EAAQpiC,gBAAkB,IAGjD,IAAIvf,EAAc,UAARi3B,EAAkB,EAAI,EAC5BjoB,EAAkB,eAAXmlD,EAA0B,EAAI,EACzCd,EAAiB,UAARp8B,GAAmBo8B,EAASA,EAGrC,IAFA,IAAIyjC,EAAqB,WAAVrhB,EAENjkE,EAAI,EAAGA,EAAIylF,EAAWj3F,GAAK0P,OAAS,EAAG8B,IAAK,CACnD,IAAI+b,EAAM0pE,EAAWj3F,GAAKwR,GAAGjT,QACzB+2F,EAAW/5F,KAAK44F,iBAAiB3iF,GAErC,GAAIslF,EAAU,CACZ,IAAII,EAAiB37F,KAAK64F,gBAAgB5iF,GAC1C+b,EAAIve,IAASkoF,EAAeloF,GAAQioF,EAAW,GAAGzlF,EAAI,GAAGxC,IAAS,CACpE,CAEA,IAAIklB,EAAY8iE,EAAWv4F,IAAI,aAC3BM,EAAO4iD,GAAS2zC,EAAS7gC,EAAI,GAC7BruC,EAAS,CACX+wE,KAAM7B,EAAS7tF,EACf2vF,IAAK9B,EAAS7tF,EAAI,IAAIlJ,MAAM,GAC5B84F,GAAI/B,EAAS7gC,EACb6iC,GAAIhC,EAAS7gC,EACb9S,QAAS5iD,GAGPkmE,EAAU1pE,KAAK66F,gBAAgBliE,EAAW9N,GAE1CmxE,EAAY,IAAIp0F,EAAQgc,KAAK,CAC/BxR,GAAI,KAENtQ,EAAOyF,OAAOK,EAAQof,aAAag1E,EAAU3wF,MAAOowF,EAAY,CAC9DnwF,KAAMo+D,IACJ1pE,KAAKs7F,0BAA0BtpE,EAAKupE,EAAU3iC,EAAQl9B,EAAKo8B,IAC/DzvD,EAAMc,IAAI6yF,EACZ,CA7CA,CA8CF,EACAC,yBAA0B,SAAUn2F,EAAO8yD,EAAQlyD,EAAUoxD,EAAQokC,GACnE,IAAIhiB,EAAQ,SACRshB,EAAS,SACTvvF,EAAInG,EAAM,GACVoG,EAAIpG,EAAM,GACVq2F,EAAuB,UAAbz1F,EAUd,MARe,eAAXkyD,GACF3sD,EAAIA,EAAI6rD,GAAUqkC,EAAU,GAAK,GAAKD,EAAS,GAAK,EACpDhiB,EAAQiiB,EAAU,QAAU,SAE5BjwF,EAAIA,EAAI4rD,GAAUqkC,EAAU,GAAK,GAAKD,EAAS,GAAK,EACpDV,EAASW,EAAU,SAAW,OAGzB,CACLlwF,EAAGA,EACHC,EAAGA,EACHqhB,UAAW2sD,EACX1sD,kBAAmBguE,EAEvB,EAEAlC,gBAAiB,SAAUR,EAAeC,EAAWngC,EAAQvwD,GAC3D,IAAI+zF,EAAWtD,EAAcnsF,SAAS,YAEtC,GAAKyvF,EAASl5F,IAAI,QAAlB,CAIA,IAAIJ,EAAWg2F,EAAc5zF,iBACzBw2B,EAAM0gE,EAASl5F,IAAI,YACnBkjD,EAAUg2C,EAASl5F,IAAI,WACvB40D,EAASskC,EAASl5F,IAAI,UACtBm5F,EAAiBv5F,EAASw5F,oBAE1Bx6F,EAAOwiF,SAASl+B,KAClBA,EAAUqyC,EAAUryC,EAAQpiC,gBAAkB,IAGhD,IAAIzF,EAAQzb,EAAS+2F,YAAYd,EAAUjpE,IAAI8pE,KAAM,EAAIb,EAAUwD,OAAO3C,KACtEsC,EAAW,CAACp5F,EAAS22F,eAAgB32F,EAAS62F,iBAClD7hC,EAASa,EAAW1oD,aAAa6nD,EAAQokC,EAAoB,eAAXtjC,EAA0B,EAAI,IAEpE,UAARl9B,IACFnd,EAAQzb,EAAS+2F,YAAYd,EAAUx6E,MAAMq7E,OAAQ,EAAIb,EAAUyD,QAAQ5C,KAC3E9hC,GAAUA,GAGZ,IAAK,IAAI7hD,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAI0kF,EAAO73F,EAAS+2F,YAAYt7E,EAAOtI,GACnCnQ,EAAQhD,EAASykC,WAAW,CAACozD,EAAKf,OAAO,GAAOv0F,OAChDu1F,EAAM3kF,EACV2kF,EAAMp0F,KAAKiH,KAAKwI,EAAIomF,GAAkB,GACtC,IAAII,EAAW,IAAI70F,EAAQgc,KAAK,CAC9BxR,GAAI,KAENtQ,EAAOyF,OAAOK,EAAQof,aAAay1E,EAASpxF,MAAO+wF,EAAU,CAC3D9wF,KAAM86C,EAAQw0C,KACZ56F,KAAKi8F,yBAAyBn2F,EAAO8yD,EAAQl9B,EAAKo8B,EAAQokC,IAC9D7zF,EAAMc,IAAIszF,EACZ,CAjCA,CAkCF,IAGFr5F,EAAOvB,QAAUsB,C,wBC5ZjB1B,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,M,uBChBRA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,M,iCCZR,IAAIK,EAASL,EAAQ,OAEjBk3D,EAAal3D,EAAQ,OAErBsiE,EAAStiE,EAAQ,MAEjBe,EAAOV,EAAOU,KACdk6F,EAAM/jC,EAAW+jC,IAWjBC,EAAY,SAAUr/E,EAASq7D,EAAWikB,EAAev6F,GAK3DrC,KAAK68F,SAAWv/E,EAKhBtd,KAAK88F,WAAankB,EAMlB34E,KAAK+8F,aAML/8F,KAAKg9F,eAMLh9F,KAAKi9F,YAOLj9F,KAAKk9F,YAMLl9F,KAAKqC,QAAUA,EAMfrC,KAAKm9F,eAAiBP,CACxB,EAoQA,SAASQ,EAAoBC,EAAW1mC,EAAS/6C,GAC/C,IAAI0T,EAAa,CAAC/oB,KAAWA,KA2B7B,OA1BA/D,EAAKoZ,GAAc,SAAUvX,GAC3B,IAAI8/E,EAAa9/E,EAAYG,UAEzB2/E,GACF3hF,EAAK6B,EAAYijC,kBAAkBqvB,IAAU,SAAU5tD,GACrD,IAAIu0F,EAAenZ,EAAW50D,cAAcxmB,GAC5Cu0F,EAAa,GAAKhuE,EAAW,KAAOA,EAAW,GAAKguE,EAAa,IACjEA,EAAa,GAAKhuE,EAAW,KAAOA,EAAW,GAAKguE,EAAa,GACnE,GAEJ,IAEIhuE,EAAW,GAAKA,EAAW,KAC7BA,EAAa,CAAClhB,IAAKA,MAYrBmvF,EAAgBF,EAAW/tE,GACpBA,CACT,CAEA,SAASiuE,EAAgBF,EAAW/tE,GAClC,IAAIs6B,EAAYyzC,EAAUG,eACtBp3F,EAAMwjD,EAAU6zC,QAAO,GAGvBrmB,EAA2C,aAA1BxtB,EAAU1mD,IAAI,QAC/Bw6F,EAActmB,IAAmBxtB,EAAU1mD,IAAI,SAAW,IAAIiR,OAEvD,MAAP/N,GAAuB,YAARA,GAAoC,oBAARA,EAC7CkpB,EAAW,GAAKlpB,EACPgxE,IACT9nD,EAAW,GAAKouE,EAAc,EAAI,EAAItvF,KAGxC,IAAI9H,EAAMsjD,EAAU+zC,QAAO,GAiB3B,OAfW,MAAPr3F,GAAuB,YAARA,GAAoC,oBAARA,EAC7CgpB,EAAW,GAAKhpB,EACP8wE,IACT9nD,EAAW,GAAKouE,EAAc,EAAIA,EAAc,EAAItvF,KAGjDw7C,EAAU1mD,IAAI,SAAS,KAC1BosB,EAAW,GAAK,IAAMA,EAAW,GAAK,GACtCA,EAAW,GAAK,IAAMA,EAAW,GAAK,IAOjCA,CACT,CAEA,SAASsuE,EAAaP,EAAWQ,GAC/B,IAAIj0C,EAAYyzC,EAAUG,eACtBM,EAAgBT,EAAUL,eAC1Be,EAAcV,EAAUN,aAE5B,GAAKe,EAAL,CAKA,IAAI9pB,EAAYrb,EAAWqlC,kBAAkBD,EAAa,CAAC,EAAG,MAC9D/pB,EAAYxtE,KAAKJ,IAAI4tE,EAAW,IAEhC,IAAIiqB,EAAYJ,GAAkC,IAArBC,EAAc,IAAiC,MAArBA,EAAc,GACrEl0C,EAAUs0C,SAASD,EAAY,MAAQF,EAAY,GAAG7yE,QAAQ8oD,GAAYiqB,EAAY,MAAQF,EAAY,GAAG7yE,QAAQ8oD,GAPrH,CAQF,CAEA,SAASmqB,EAAcd,GACrB,IAAIe,EAAaf,EAAUH,YAAc,CAAC,EACtCN,EAAgBS,EAAUF,eAC9B36F,EAAK,CAAC,MAAO,QAAQ,SAAU41F,GAC7BgG,EAAWhG,EAAS,QAAUwE,EAAc15F,IAAIk1F,EAAS,QAEzD,IAAIiG,EAAYzB,EAAc15F,IAAIk1F,EAAS,aAE3C,GAAiB,MAAbiG,IACFD,EAAWhG,EAAS,aAAeiG,EACnCA,EAAYhB,EAAUG,eAAe/pF,KAAKhN,MAAMiN,MAAM2qF,GAErC,MAAbA,GAAmB,CACrB,IAAI/uE,EAAa+tE,EAAUJ,YAC3BmB,EAAWhG,EAAS,QAAUz/B,EAAW5qC,UAAUuB,EAAW,GAAK+uE,EAAW/uE,EAAY,CAAC,EAAG,MAAM,EACtG,CAEJ,GACF,CAtWAqtE,EAAUz6F,UAAY,CACpBC,YAAaw6F,EASb2B,SAAU,SAAU1B,GAClB,OAAO58F,KAAKm9F,iBAAmBP,CACjC,EAKA2B,mBAAoB,WAClB,OAAOv+F,KAAK+8F,aAAa/5F,OAC3B,EAKAw7F,qBAAsB,WACpB,OAAOx+F,KAAKg9F,eAAeh6F,OAC7B,EAOAy7F,sBAAuB,WACrB,IAAI7iF,EAAe,GACfvZ,EAAUrC,KAAKqC,QAenB,OAdAA,EAAQ4gF,YAAW,SAAU5+E,GAC3B,GAAI0/D,EAAO26B,iBAAiBr6F,EAAYnB,IAAI,qBAAsB,CAChE,IAAIoa,EAAUtd,KAAK68F,SACfjzC,EAAYvnD,EAAQg1C,gBAAgB,CACtCnzC,SAAUoZ,EAAU,OACpBhN,MAAOjM,EAAYnB,IAAIoa,EAAU,aACjC+I,GAAIhiB,EAAYnB,IAAIoa,EAAU,YAC7B,GAECtd,KAAK88F,cAAgBlzC,GAAaA,EAAUkW,iBAC9ClkD,EAAa5a,KAAKqD,EAEtB,CACF,GAAGrE,MACI4b,CACT,EACA4hF,aAAc,WACZ,OAAOx9F,KAAKqC,QAAQ22C,aAAah5C,KAAK68F,SAAW,OAAQ78F,KAAK88F,WAChE,EACA6B,kBAAmB,WACjB,IAIIxlD,EACAylD,EAUAC,EAfAloC,EAAU32D,KAAK68F,SACfx6F,EAAUrC,KAAKqC,QACfunD,EAAY5pD,KAAKw9F,eACjBsB,EAA0B,MAAZnoC,GAA+B,MAAZA,EAkBrC,OAdImoC,GACFF,EAAoB,YACpBzlD,EAA2B,MAAZwd,EAAkB,IAAM,MAEvCioC,EAAoB,aACpBzlD,EAA2B,UAAZwd,EAAsB,SAAW,SAIlDt0D,EAAQ4B,cAAck1C,EAAe,QAAQ,SAAU4lD,IAChDA,EAAe77F,IAAI07F,IAAsB,MAAQh1C,EAAU1mD,IAAI07F,IAAsB,KACxFC,EAAsBE,EAE1B,IACOF,CACT,EACAG,cAAe,WACb,OAAOl9F,EAAOyiB,MAAMvkB,KAAKk9F,YAC3B,EAWA+B,oBAAqB,SAAUluF,GAC7B,IAAIue,EAAatvB,KAAKi9F,YAClBrzC,EAAY5pD,KAAKw9F,eACjB/2F,EAAQmjD,EAAUn2C,KAAKhN,MAEvBy4F,EAAgBl/F,KAAKm9F,eAAegC,mBAEpCC,EAAgB,CAAC,EAAG,KACpBtB,EAAgB,CAAC/sF,EAAIwN,MAAOxN,EAAI+e,KAChCiuE,EAAc,GAsClB,OArCAv7F,EAAK,CAAC,aAAc,aAAa,SAAUkiB,GACzCq5E,EAAY/8F,KAAkB,MAAb+P,EAAI2T,GAAgBje,EAAMiN,MAAM3C,EAAI2T,IAAS,KAChE,IAEAliB,EAAK,CAAC,EAAG,IAAI,SAAUiC,GACrB,IAAI46F,EAAatB,EAAYt5F,GACzB66F,EAAexB,EAAcr5F,GAYN,YAAvBy6F,EAAcz6F,IACI,MAAhB66F,IACFA,EAAeF,EAAc36F,IAI/B46F,EAAa54F,EAAMiN,MAAMilD,EAAW5qC,UAAUuxE,EAAcF,EAAe9vE,GAAY,KAKvFgwE,EAAe3mC,EAAW5qC,UAAUsxE,EAAY/vE,EAAY8vE,GAAe,GAK7ErB,EAAYt5F,GAAO46F,EACnBvB,EAAcr5F,GAAO66F,CACvB,IACO,CACLvB,YAAarB,EAAIqB,GACjBD,cAAepB,EAAIoB,GAEvB,EASAyB,MAAO,SAAU3C,GACf,GAAIA,IAAkB58F,KAAKm9F,eAA3B,CAKAn9F,KAAKi9F,YAAcG,EAAoBp9F,KAAMA,KAAK68F,SAAU78F,KAAKy+F,yBACjE,IAAIe,EAAax/F,KAAKi/F,oBAAoBrC,EAAc/uF,QACxD7N,KAAK+8F,aAAeyC,EAAWzB,YAC/B/9F,KAAKg9F,eAAiBwC,EAAW1B,cACjCK,EAAcn+F,MAEd49F,EAAa59F,KATb,CAUF,EAKAy/F,QAAS,SAAU7C,GACbA,IAAkB58F,KAAKm9F,iBAI3Bn9F,KAAK+8F,aAAe/8F,KAAKg9F,eAAiB,KAC1CY,EAAa59F,MAAM,GACrB,EAKAw2D,WAAY,SAAUomC,GACpB,GAAIA,IAAkB58F,KAAKm9F,eAA3B,CAIA,IAAIxmC,EAAU32D,KAAK68F,SACfjhF,EAAe5b,KAAKy+F,wBACpBiB,EAAa9C,EAAc15F,IAAI,cAC/B66F,EAAc/9F,KAAK+8F,aAEvB,GAAmB,SAAf2C,EAAJ,CAYA,IAAIX,EAAiB/+F,KAAK2+F,oBAEtB/B,EAAc15F,IAAI,iBAAmB67F,GAAiD,aAA/BA,EAAe77F,IAAI,UAC5Ew8F,EAAa,SAIfl9F,EAAKoZ,GAAc,SAAUvX,GAC3B,IAAI8/E,EAAa9/E,EAAYG,UACzBkjB,EAAWrjB,EAAYijC,kBAAkBqvB,GAE1B,eAAf+oC,EACFvb,GAAcA,EAAWjkD,YAAW,SAAU37B,GAK5C,IAJA,IAAIo7F,EACAC,EACAx2F,EAEK6M,EAAI,EAAGA,EAAIyR,EAASvT,OAAQ8B,IAAK,CACxC,IAAIlI,EAAQo2E,EAAWjhF,IAAIwkB,EAASzR,GAAI1R,GACpCs7F,GAAgBxhF,MAAMtQ,GACtB+xF,EAAc/xF,EAAQgwF,EAAY,GAClCgC,EAAehyF,EAAQgwF,EAAY,GAEvC,GAAI8B,IAAiBC,IAAgBC,EACnC,OAAO,EAGTF,IAAiBz2F,GAAW,GAC5B02F,IAAgBH,GAAU,GAC1BI,IAAiBH,GAAW,EAC9B,CAGA,OAAOx2F,GAAYu2F,GAAWC,CAChC,IAEAzb,GAAc3hF,EAAKklB,GAAU,SAAU3e,GAClB,UAAf22F,EACFr7F,EAAYykD,QAAQq7B,EAAWzsD,IAAI3uB,GAAK,SAAUgF,GAChD,OAAQiyF,EAAWjyF,GAAeA,EAANK,GAC9B,KAEA+1E,EAAWjkD,WAAWn3B,EAAKi3F,EAE/B,GAEJ,GAxDA,CATA,CAmEA,SAASA,EAAWjyF,GAClB,OAAOA,GAASgwF,EAAY,IAAMhwF,GAASgwF,EAAY,EACzD,CACF,GAyGF,IAAI56F,EAAWw5F,EACfv5F,EAAOvB,QAAUsB,C,iCC7ajB,IAAIuE,EAAUjG,EAAQ,OAIlBiC,GAFUgE,EAAQC,QAERlG,EAAQ,QAElBK,EAASL,EAAQ,OAEjBy+E,EAAMz+E,EAAQ,OAEd84C,EAAY94C,EAAQ,OAEpBsiE,EAAStiE,EAAQ,MAEjBk7F,EAAYl7F,EAAQ,OAEpBe,EAAOV,EAAOU,KACdy9F,EAAcl8B,EAAOk8B,YACrBC,EAAgBx8F,EAAQiwE,qBAAqB,CAC/CjxE,KAAM,WACN8E,aAAc,CAAC,QAAS,QAAS,QAAS,aAAc,YAAa,aAAc,UAKnF6G,cAAe,CACbC,OAAQ,EACRC,EAAG,EAEHqqD,OAAQ,KAERhV,WAAY,KAEZC,WAAY,KAEZ67C,WAAY,SAgBZvrB,SAAU,KAKV51D,MAAO,EAEPuR,IAAK,IAELqwE,WAAY,KAEZC,SAAU,KAEVC,QAAS,KAETC,QAAS,KAETC,aAAc,KAEdC,aAAc,KAEdC,UAAW,MAObp3E,KAAM,SAAUxb,EAAQoJ,EAAa5U,GAMnCrC,KAAK0gG,oBAAsB,CAAC,EAK5B1gG,KAAK2gG,UAAY,CAAC,EAMlB3gG,KAAK4gG,aAAe,CAAC,EAKrB5gG,KAAKqgE,eAKLrgE,KAAK6gG,eAAgB,EAMrB7gG,KAAK8gG,eAAiB,CAAC,UAAW,WAClC,IAAIC,EAAYC,EAAYnzF,GAC5B7N,KAAKy1B,qBAAqB5nB,EAAQxL,GAClCrC,KAAKihG,OAAOF,EACd,EAKAvrE,YAAa,SAAUuwB,GACrB,IAAIg7C,EAAYC,EAAYj7C,GAE5BjkD,EAAOqwF,MAAMnyF,KAAK6N,OAAQk4C,GAAW,GACrC/lD,KAAKihG,OAAOF,EACd,EAKAE,OAAQ,SAAUF,GAChB,IAAInP,EAAa5xF,KAAK6N,OAEjBqyE,EAAIghB,kBACPtP,EAAWrC,UAAW,GAGxBvvF,KAAKmhG,oBAAoBJ,GAEzBK,EAAephG,KAAM+gG,GACrBv+F,EAAK,CAAC,CAAC,QAAS,cAAe,CAAC,MAAO,cAAc,SAAU6+F,EAAO/wF,GAIjC,UAA/BtQ,KAAK8gG,eAAexwF,KACtBshF,EAAWyP,EAAM,IAAM,KAG3B,GAAGrhG,MACHA,KAAKqgE,eAAiBrgE,KAAK2M,SAAS,aAEpC3M,KAAKshG,eAELthG,KAAKuhG,kBACP,EAKAA,iBAAkB,WAChB,IAAIC,EAAcxhG,KAAK4gG,aACvB5gG,KAAKyhG,gBAAe,SAAUC,EAAU/oB,EAAWikB,EAAev6F,GAChE,IAAIunD,EAAY5pD,KAAKimD,gBAAgBy7C,EAASjuF,MAAMklE,GAEhD0kB,EAAYzzC,EAAU+3C,gBAC1B/3C,EAAU+3C,cAAgB,IAAIhF,EAAU+E,EAASl+F,KAAMm1E,EAAW34E,KAAMqC,IAGxEm/F,EAAYE,EAASl+F,KAAO,IAAMm1E,GAAa0kB,CACjD,GAAGr9F,KACL,EAKAshG,aAAc,WACZ,IAAI1P,EAAa5xF,KAAK6N,OAElB+zF,EAAW5hG,KAAK6hG,iBAEpB5B,GAAY,SAAUyB,GACpB,IAAII,EAAgBJ,EAAS/oB,UAC7BiZ,EAAWkQ,GAAiBvnD,EAAUwnD,iBAAiBnQ,EAAWkQ,GACpE,GAAG9hG,MAEc,cAAb4hG,EACF5hG,KAAKgiG,oBACiB,WAAbJ,GACT5hG,KAAKiiG,gBAET,EAKAJ,eAAgB,WAId,IAAIjQ,EAAa5xF,KAAK6N,OAClBq0F,GAAoB,EACxBjC,GAAY,SAAUyB,GAIkB,MAAlC9P,EAAW8P,EAAS/oB,aACtBupB,GAAoB,EAExB,GAAGliG,MACH,IAAI44D,EAASg5B,EAAWh5B,OAExB,OAAc,MAAVA,GAAkBspC,EACb,SACGA,OAAL,GACS,MAAVtpC,IACFg5B,EAAWh5B,OAAS,cAGf,YAEX,EAKAopC,kBAAmB,WACjB,IAAIG,GAAgB,EAChBvpC,EAAS54D,KAAKkD,IAAI,UAAU,GAC5B0uF,EAAa5xF,KAAK6N,OAClBo4C,EAAkBjmD,KAAKimD,gBAE3B,GAAIk8C,EAAe,CAEjB,IAAI7kF,EAAqB,aAAXs7C,EAAwB,IAAM,IAExC3S,EAAgB3oC,EAAU,QAAQnJ,QACpCy9E,EAAWt0E,EAAU,aAAe,CAAC,GACrC6kF,GAAgB,GAEhB3/F,EAAKyjD,EAAgBhjC,YAAY,SAAU40B,GACrCsqD,GAAiBtqD,EAAgB30C,IAAI,UAAU,KAAU01D,IAC3Dg5B,EAAW/5B,gBAAkB,CAAChgB,EAAgBioB,gBAC9CqiC,GAAgB,EAEpB,GAEJ,CAEIA,GAEFlC,GAAY,SAAUyB,GACpB,GAAKS,EAAL,CAIA,IAAIC,EAAc,GACdC,EAAariG,KAAKimD,gBAAgBy7C,EAASjuF,MAE/C,GAAI4uF,EAAWluF,SAAWiuF,EAAYjuF,OACpC,IAAK,IAAI8B,EAAI,EAAGuY,EAAM6zE,EAAWluF,OAAQ8B,EAAIuY,EAAKvY,IACd,aAA9BosF,EAAWpsF,GAAG/S,IAAI,SACpBk/F,EAAYphG,KAAKiV,GAKvB27E,EAAW8P,EAAS/oB,WAAaypB,EAE7BA,EAAYjuF,SACdguF,GAAgB,EAhBlB,CAkBF,GAAGniG,MAGDmiG,GAOFniG,KAAKqC,QAAQ4gF,YAAW,SAAU5+E,GAC5BrE,KAAKsiG,0BAA0Bj+F,EAAa,UAC9C47F,GAAY,SAAUyB,GACpB,IAAIU,EAAcxQ,EAAW8P,EAAS/oB,WAClCA,EAAYt0E,EAAYnB,IAAIw+F,EAAS/oB,WACrCsG,EAAS56E,EAAYnB,IAAIw+F,EAASziB,QAClCr1B,EAAYvlD,EAAYhC,QAAQg1C,gBAAgB,CAClDnzC,SAAUw9F,EAASjuF,KACnBnD,MAAOqoE,EACPtyD,GAAI44D,IACH,GACHtG,EAAY/uB,EAAUkW,eAElBh+D,EAAOqa,QAAQimF,EAAazpB,GAAa,GAC3CypB,EAAYphG,KAAK23E,EAErB,GAEJ,GAAG34E,KAEP,EAKAiiG,eAAgB,WACd,IAAIl5F,EAEJ/I,KAAKyhG,gBAAe,SAAUC,IAC3B34F,IAAQA,EAAM24F,EAASl+F,KAC1B,GAAGxD,MACHA,KAAK6N,OAAO+qD,OAAiB,MAAR7vD,EAAc,WAAa,YAClD,EAKAu5F,0BAA2B,SAAUj+F,EAAa6yC,GAIhD,IAAIqrD,GAAK,EAST,OARAtC,GAAY,SAAUyB,GACpB,IAAIc,EAAkBn+F,EAAYnB,IAAIw+F,EAAS/oB,WAC3C/uB,EAAY5pD,KAAKimD,gBAAgBy7C,EAASjuF,MAAM+uF,GAE/C54C,GAAaA,EAAU1mD,IAAI,UAAYg0C,IAC1CqrD,GAAK,EAET,GAAGviG,MACIuiG,CACT,EAKApB,oBAAqB,SAAUJ,GAM7B,GAJIA,EAAUn/F,eAAe,cAC3B5B,KAAK6gG,eAAgB,GAGnB7gG,KAAK6gG,cAAe,CACtB,IAAI4B,EAAeziG,KAAKqC,QAAQwL,OAChC7N,KAAK6N,OAAOsmE,SAAWsuB,EAAa14C,WAAa04C,EAAa/nC,wBAA0B,EAAI,IAAM,EACpG,CACF,EAKAgoC,wBAAyB,WACvB,IAAIC,EAUJ,OATA1C,GAAY,SAAUyB,GACpB,GAAsB,MAAlBiB,EAAwB,CAC1B,IAAIr0E,EAAUtuB,KAAKkD,IAAIw+F,EAAS/oB,WAE5BrqD,EAAQna,SACVwuF,EAAiB3iG,KAAKimD,gBAAgBy7C,EAASjuF,MAAM6a,EAAQ,IAEjE,CACF,GAAGtuB,MACI2iG,CACT,EAMAlB,eAAgB,SAAU5iC,EAAUpnD,GAClC,IAAIpV,EAAUrC,KAAKqC,QACnB49F,GAAY,SAAUyB,GACpBl/F,EAAKxC,KAAKkD,IAAIw+F,EAAS/oB,YAAY,SAAUA,GAC3C9Z,EAASlnD,KAAKF,EAASiqF,EAAU/oB,EAAW34E,KAAMqC,EACpD,GAAGrC,KACL,GAAGA,KACL,EAOA4iG,aAAc,SAAUtlF,EAASq7D,GAC/B,OAAO34E,KAAK4gG,aAAatjF,EAAU,IAAMq7D,EAC3C,EAOA6kB,aAAc,SAAUlgF,EAASq7D,GAC/B,IAAI0kB,EAAYr9F,KAAK4iG,aAAatlF,EAASq7D,GAC3C,OAAO0kB,GAAaA,EAAUG,cAChC,EAaAqF,YAAa,SAAU9xF,EAAK+xF,GAC1B,IAAIj1F,EAAS7N,KAAK6N,OAClBrL,EAAK,CAAC,CAAC,QAAS,cAAe,CAAC,MAAO,cAAc,SAAU6+F,GAMxC,MAAjBtwF,EAAIswF,EAAM,KAAgC,MAAjBtwF,EAAIswF,EAAM,MACrCxzF,EAAOwzF,EAAM,IAAMtwF,EAAIswF,EAAM,IAC7BxzF,EAAOwzF,EAAM,IAAMtwF,EAAIswF,EAAM,IAEjC,GAAGrhG,OACF8iG,GAAwB1B,EAAephG,KAAM+Q,EAChD,EAMAgyF,gBAAiB,WACf,IAAI1F,EAAYr9F,KAAKgjG,8BAErB,GAAI3F,EACF,OAAOA,EAAUmB,sBAErB,EAUAyE,cAAe,SAAUC,EAAavqB,GACpC,GAAmB,MAAfuqB,GAAoC,MAAbvqB,EAOzB,OAAO34E,KAAK4iG,aAAaM,EAAavqB,GAAW4lB,qBANjD,IAAIlB,EAAYr9F,KAAKgjG,8BAErB,OAAI3F,EACKA,EAAUkB,0BADnB,CAMJ,EAQAyE,4BAA6B,SAAUp5C,GACrC,GAAIA,EACF,OAAOA,EAAU+3C,cAInB,IAAIH,EAAcxhG,KAAK4gG,aAEvB,IAAK,IAAIj/F,KAAO6/F,EACd,GAAIA,EAAY5/F,eAAeD,IAAQ6/F,EAAY7/F,GAAK28F,SAASt+F,MAC/D,OAAOwhG,EAAY7/F,GASvB,IAAK,IAAIA,KAAO6/F,EACd,GAAIA,EAAY5/F,eAAeD,KAAS6/F,EAAY7/F,GAAK28F,SAASt+F,MAChE,OAAOwhG,EAAY7/F,EAGzB,EAKAw9F,iBAAkB,WAChB,OAAOn/F,KAAK8gG,eAAe99F,OAC7B,IAGF,SAASg+F,EAAYnzF,GACnB,IAAIs1F,EAAM,CAAC,EAIX,OAHA3gG,EAAK,CAAC,QAAS,MAAO,aAAc,WAAY,aAAa,SAAUgB,GACrEqK,EAAOjM,eAAe4B,KAAU2/F,EAAI3/F,GAAQqK,EAAOrK,GACrD,IACO2/F,CACT,CAEA,SAAS/B,EAAexE,EAAemE,GACrC,IAAI7B,EAAgBtC,EAAckE,eAC9BsC,EAAoBxG,EAAc15F,IAAI,aAC1CV,EAAK,CAAC,CAAC,QAAS,cAAe,CAAC,MAAO,cAAc,SAAU6+F,EAAO/wF,GACpE,IAAI+yF,EAA0C,MAAvBtC,EAAUM,EAAM,IACnCiC,EAAwC,MAAvBvC,EAAUM,EAAM,IAEjCgC,IAAqBC,EACvBpE,EAAc5uF,GAAS,WACb+yF,GAAoBC,EAC9BpE,EAAc5uF,GAAS,QACd8yF,EACTlE,EAAc5uF,GAAS8yF,EAAkB9yF,GAChC+yF,IAETnE,EAAc5uF,GAAS,UAG3B,GACF,CAEA,IAAInN,EAAW+8F,EACf98F,EAAOvB,QAAUsB,C,iCChhBjB,IAAIogG,EAAgB9hG,EAAQ,OAExB0B,EAAWogG,EAAch8F,OAAO,CAClC7E,KAAM,WACN5C,OAAQ,SAAU88F,EAAev6F,EAASC,EAAKyB,GAC7C/D,KAAK48F,cAAgBA,EACrB58F,KAAKqC,QAAUA,EACfrC,KAAKsC,IAAMA,CACb,EAoBAkhG,mBAAoB,WAClB,IAAI5G,EAAgB58F,KAAK48F,cACrBv6F,EAAUrC,KAAKqC,QACfohG,EAAgB,CAAC,EAUrB,SAASC,EAAKC,EAAY/5C,EAAW4d,EAAOo8B,GAG1C,IAFA,IAAIt7E,EAEKrS,EAAI,EAAGA,EAAIuxD,EAAMrzD,OAAQ8B,IAChC,GAAIuxD,EAAMvxD,GAAGggB,QAAU0tE,EAAY,CACjCr7E,EAAOk/C,EAAMvxD,GACb,KACF,CAGGqS,GACHk/C,EAAMxmE,KAAKsnB,EAAO,CAChB2N,MAAO0tE,EACPtB,WAAY,GACZuB,WAAYA,IAIhBt7E,EAAK+5E,WAAWrhG,KAAK4oD,EACvB,CAEA,OA9BAgzC,EAAc6E,gBAAe,SAAUC,EAAU/oB,GAC/C,IAAI/uB,EAAYvnD,EAAQ22C,aAAa0oD,EAASjuF,KAAMklE,GAEpD,GAAI/uB,EAAW,CACb,IAAI+5C,EAAa/5C,EAAUmjC,mBAC3B4W,GAAcD,EAAKC,EAAY/5C,EAAW65C,EAAcE,EAAWz/F,YAAcu/F,EAAcE,EAAWz/F,UAAY,IAAKy/F,EAAW7jC,eACxI,CACF,GAAG9/D,MAuBIyjG,CACT,IAGFrgG,EAAOvB,QAAUsB,C,wBClEjB,IAAI+8F,EAAgBz+F,EAAQ,OAExB0B,EAAW+8F,EAAc34F,OAAO,CAClC7E,KAAM,kBAKN2L,cAAe,CACbw1F,UAAU,EAEVC,UAAU,EAEVC,kBAAkB,EAElBC,iBAAiB,EAEjBC,yBAAyB,KAI7B7gG,EAAOvB,QAAUsB,C,wBCrBjB,IAAIrB,EAASL,EAAQ,OAEjByiG,EAAeziG,EAAQ,OAEvB0iG,EAAa1iG,EAAQ,OAErB2iG,EAAQ3iG,EAAQ,OAEhBgC,EAAO3B,EAAO2B,KACd4gG,EAAiBH,EAAa38F,OAAO,CACvC7E,KAAM,kBAKN2mB,KAAM,SAAUhnB,EAASC,GAOvBtC,KAAKskG,MACP,EAKAxkG,OAAQ,SAAU88F,EAAev6F,EAASC,EAAKyB,GAC7CsgG,EAAez0F,WAAW5P,KAAM,SAAU6P,WAItCu0F,EAAMG,kBAAkBxgG,EAAS64F,EAAcv2E,MACjDrmB,KAAKskG,OAAS1H,EAAcmG,mBAI9BjhG,EAAOU,KAAKxC,KAAKwjG,sBAAsB,SAAU7R,EAAe17C,GAC9D,IAAIuuD,EAAc1iG,EAAO41B,IAAIi6D,GAAe,SAAU8S,GACpD,OAAOL,EAAMM,gBAAgBD,EAAUxuE,MACzC,IACAn0B,EAAOU,KAAKmvF,GAAe,SAAU8S,GACnC,IAAId,EAAac,EAAUxuE,MACvB0uE,EAAiB/H,EAAc/uF,OACnCu2F,EAAM9iG,SAASgB,EAAK,CAClBsiG,QAASR,EAAMM,gBAAgBf,GAC/Ba,YAAaA,EACbK,cAAe,SAAUnoE,EAAGzwB,EAAGC,GAC7B,OAAOy3F,EAAWz+F,iBAAiBqoD,aAAa,CAACthD,EAAGC,GACtD,EACA44F,WAAYlI,EAAcv2E,GAC1B0+E,aAAcnI,EAAc15F,IAAI,YAAY,GAC5C8hG,YAAavhG,EAAKzD,KAAKyoE,OAAQzoE,KAAMykG,EAAWxuD,GAChDgvD,aAAcxhG,EAAKzD,KAAK0oE,QAAS1oE,KAAMykG,EAAWxuD,GAClD6tD,SAAUa,EAAeb,SACzBD,SAAUc,EAAed,SACzBqB,kBAAmB,CACjBnB,iBAAkBY,EAAeZ,iBACjCC,gBAAiBW,EAAeX,gBAChCC,wBAAyBU,EAAeV,0BAG9C,GAAGjkG,KACL,GAAGA,KACL,EAKAsI,QAAS,WACP87F,EAAM1vB,WAAW10E,KAAKsC,IAAKtC,KAAK48F,cAAcv2E,IAC9Cg+E,EAAez0F,WAAW5P,KAAM,UAAW6P,WAC3C7P,KAAKskG,OAAS,IAChB,EAKA77B,OAAQ,SAAUg8B,EAAWxuD,EAAc1Z,EAAYv2B,EAAIC,EAAIk/F,EAAMC,EAAMC,EAAMC,GAC/E,IAAIh/D,EAAQtmC,KAAKskG,OAAOthG,QAGpB4mD,EAAY66C,EAAUpC,WAAW,GAErC,GAAKz4C,EAAL,CAIA,IAAI27C,EAAgBC,EAAiBvvD,GAAc,CAACkvD,EAAMC,GAAO,CAACC,EAAMC,GAAO17C,EAAWrtB,EAAYkoE,GAClGgB,EAAeF,EAAcG,QAAUp/D,EAAM,GAAKA,EAAM,IAAMi/D,EAAcI,MAAQJ,EAAcK,YAEtG,OADAzB,EAAWsB,EAAcn/D,EAAO,CAAC,EAAG,KAAM,OACnCtmC,KAAKskG,OAASh+D,CALrB,CAMF,EAKAoiC,QAAS,SAAU+7B,EAAWxuD,EAAc1Z,EAAY91B,EAAOw2B,EAAQC,GACrE,IAAIoJ,EAAQtmC,KAAKskG,OAAOthG,QAGpB4mD,EAAY66C,EAAUpC,WAAW,GAErC,GAAKz4C,EAAL,CAIA,IAAI27C,EAAgBC,EAAiBvvD,GAAc,KAAM,CAAChZ,EAAQC,GAAS0sB,EAAWrtB,EAAYkoE,GAC9FoB,GAAgBN,EAAcG,OAAS,EAAIH,EAAcO,WAAaP,EAAcK,YAAcL,EAAcI,MAAQJ,EAAcI,MAAQJ,EAAcO,YAAcP,EAAcK,aAAet/D,EAAM,GAAKA,EAAM,IAAMA,EAAM,GACxO7/B,EAAQD,KAAKF,IAAI,EAAIG,EAAO,GAC5B6/B,EAAM,IAAMA,EAAM,GAAKu/D,GAAgBp/F,EAAQo/F,EAC/Cv/D,EAAM,IAAMA,EAAM,GAAKu/D,GAAgBp/F,EAAQo/F,EAE/C,IAAIzH,EAAap+F,KAAK48F,cAAcoG,8BAA8BhE,gBAElE,OADAmF,EAAW,EAAG79D,EAAO,CAAC,EAAG,KAAM,EAAG83D,EAAWiC,QAASjC,EAAWkC,SAC1DtgG,KAAKskG,OAASh+D,CAVrB,CAWF,IAEEk/D,EAAmB,CACrB30F,KAAM,SAAUk1F,EAAUC,EAAUp8C,EAAWrtB,EAAYkoE,GACzD,IAAIhxF,EAAOm2C,EAAUn2C,KACjB0vF,EAAM,CAAC,EACPz4F,EAAO+5F,EAAUxuE,MAAM/wB,iBAAiB4L,UAgB5C,OAfAi1F,EAAWA,GAAY,CAAC,EAAG,GAEV,MAAbtyF,EAAK1K,KACPo6F,EAAIwC,MAAQK,EAAS,GAAKD,EAAS,GACnC5C,EAAIyC,YAAcl7F,EAAKa,MACvB43F,EAAI2C,WAAap7F,EAAKuB,EACtBk3F,EAAIuC,OAASjyF,EAAK4oC,QAAU,GAAK,IAGjC8mD,EAAIwC,MAAQK,EAAS,GAAKD,EAAS,GACnC5C,EAAIyC,YAAcl7F,EAAKsB,OACvBm3F,EAAI2C,WAAap7F,EAAKwB,EACtBi3F,EAAIuC,OAASjyF,EAAK4oC,SAAW,EAAI,GAG5B8mD,CACT,EACAp4F,MAAO,SAAUg7F,EAAUC,EAAUp8C,EAAWrtB,EAAYkoE,GAC1D,IAAIhxF,EAAOm2C,EAAUn2C,KACjB0vF,EAAM,CAAC,EACPp4F,EAAQ05F,EAAUxuE,MAAM/wB,iBACxBi3C,EAAepxC,EAAMmxC,gBAAgBx/B,YACrC+W,EAAc1oB,EAAMixC,eAAet/B,YAqBvC,OApBAqpF,EAAWA,EAAWh7F,EAAMk7F,aAAaF,GAAY,CAAC,EAAG,GACzDC,EAAWj7F,EAAMk7F,aAAaD,GAEH,eAAvBp8C,EAAU1lD,UACZi/F,EAAIwC,MAAQK,EAAS,GAAKD,EAAS,GAGnC5C,EAAIyC,YAAczpD,EAAa,GAAKA,EAAa,GACjDgnD,EAAI2C,WAAa3pD,EAAa,GAC9BgnD,EAAIuC,OAASjyF,EAAK4oC,QAAU,GAAK,IAGjC8mD,EAAIwC,MAAQK,EAAS,GAAKD,EAAS,GAGnC5C,EAAIyC,YAAcnyE,EAAY,GAAKA,EAAY,GAC/C0vE,EAAI2C,WAAaryE,EAAY,GAC7B0vE,EAAIuC,OAASjyF,EAAK4oC,SAAW,EAAI,GAG5B8mD,CACT,EACAlgF,WAAY,SAAU8iF,EAAUC,EAAUp8C,EAAWrtB,EAAYkoE,GAC/D,IAAIhxF,EAAOm2C,EAAUn2C,KACjB/I,EAAO+5F,EAAUxuE,MAAM/wB,iBAAiB4L,UACxCqyF,EAAM,CAAC,EAgBX,OAfA4C,EAAWA,GAAY,CAAC,EAAG,GAEP,eAAhBtyF,EAAKmlD,QACPuqC,EAAIwC,MAAQK,EAAS,GAAKD,EAAS,GACnC5C,EAAIyC,YAAcl7F,EAAKa,MACvB43F,EAAI2C,WAAap7F,EAAKuB,EACtBk3F,EAAIuC,OAASjyF,EAAK4oC,QAAU,GAAK,IAGjC8mD,EAAIwC,MAAQK,EAAS,GAAKD,EAAS,GACnC5C,EAAIyC,YAAcl7F,EAAKsB,OACvBm3F,EAAI2C,WAAap7F,EAAKwB,EACtBi3F,EAAIuC,OAASjyF,EAAK4oC,SAAW,EAAI,GAG5B8mD,CACT,GAEEhgG,EAAWkhG,EACfjhG,EAAOvB,QAAUsB,C,wBChMjB,IAAI+8F,EAAgBz+F,EAAQ,OAExB0B,EAAW+8F,EAAc34F,OAAO,CAClC7E,KAAM,oBAGRU,EAAOvB,QAAUsB,C,wBCNjB,IAAI+gG,EAAeziG,EAAQ,OAEvB0B,EAAW+gG,EAAa38F,OAAO,CACjC7E,KAAM,oBAGRU,EAAOvB,QAAUsB,C,wBCNjB,IAAI+8F,EAAgBz+F,EAAQ,OAExBykG,EAAkBhG,EAAc34F,OAAO,CACzC7E,KAAM,kBACNgjD,WAAY,MAKZr3C,cAAe,CACbqc,MAAM,EAGNY,MAAO,KAEPD,IAAK,KAEL9f,MAAO,KAEPS,OAAQ,KAERof,KAAM,KAENG,OAAQ,KAERuF,gBAAiB,mBAKjBq1E,eAAgB,CACdt6E,UAAW,CACTtf,MAAO,UACPhB,MAAO,GACPkB,QAAS,IAEX6gF,UAAW,CACT/gF,MAAO,qBACPE,QAAS,KAGbwO,YAAa,OAIbmrF,YAAa,wBAIbC,WAAY,0HAEZjuB,WAAY,OACZkuB,YAAa,CACX/5F,MAAO,WAETg6F,eAAgB,KAChBp1E,eAAgB,KAChBq1E,YAAY,EACZC,eAAgB,OAEhBlX,UAAU,EACVuU,UAAU,EAEVliC,UAAW,CACTr1D,MAAO,WAITpJ,EAAW+iG,EACf9iG,EAAOvB,QAAUsB,C,iCCrEjB,IAAIrB,EAASL,EAAQ,OAEjBmzE,EAAYnzE,EAAQ,OAEpBmG,EAAUnG,EAAQ,OAElB0yE,EAAW1yE,EAAQ,OAEnByiG,EAAeziG,EAAQ,OAEvBk3D,EAAal3D,EAAQ,OAErB8H,EAAS9H,EAAQ,MAEjB0iG,EAAa1iG,EAAQ,OAErBkJ,EAAO/C,EAAQ+C,KACfojB,EAAY4qC,EAAW5qC,UACvB2uE,EAAM/jC,EAAW+jC,IACjBj5F,EAAO3B,EAAO2B,KACdjB,EAAOV,EAAOU,KAEdkkG,EAA4B,EAC5BC,EAA6B,EAC7BC,EAAsB,GACtBC,EAAa,aACbC,EAAW,WACXC,EAAY,EACZC,EAA+B,CAAC,OAAQ,MAAO,cAAe,WAC9DC,EAAiB/C,EAAa38F,OAAO,CACvC7E,KAAM,kBACN2mB,KAAM,SAAUhnB,EAASC,GAKvBtC,KAAKknG,cAAgB,CAAC,EAMtBlnG,KAAKmnG,QAMLnnG,KAAKskG,OAMLtkG,KAAKonG,YAOLpnG,KAAKqnG,MAMLrnG,KAAKsnG,aAMLtnG,KAAKunG,cAKLvnG,KAAKwnG,UAKLxnG,KAAKg2E,UAKLh2E,KAAKynG,gBACLznG,KAAKsC,IAAMA,CACb,EAKAxC,OAAQ,SAAU88F,EAAev6F,EAASC,EAAKyB,GAC7CkjG,EAAer3F,WAAW5P,KAAM,SAAU6P,WAC1CskE,EAASvsD,eAAe5nB,KAAM,sBAAuBA,KAAK48F,cAAc15F,IAAI,YAAa,WACzFlD,KAAKmnG,QAAUvK,EAAc15F,IAAI,WAEM,IAAnClD,KAAK48F,cAAc15F,IAAI,SAQtBa,GAA4B,aAAjBA,EAAQrB,MAAuBqB,EAAQwjD,OAASvnD,KAAKwnD,KACnExnD,KAAK0nG,aAGP1nG,KAAK2nG,eAXH3nG,KAAKqI,MAAMkC,WAYf,EAKAL,OAAQ,WACN+8F,EAAer3F,WAAW5P,KAAM,SAAU6P,WAC1CskE,EAASvvB,MAAM5kD,KAAM,sBACvB,EAKAsI,QAAS,WACP2+F,EAAer3F,WAAW5P,KAAM,UAAW6P,WAC3CskE,EAASvvB,MAAM5kD,KAAM,sBACvB,EACA0nG,WAAY,WACV,IAAIvnC,EAAYngE,KAAKqI,MACrB83D,EAAU51D,YAEVvK,KAAK4nG,iBAEL5nG,KAAK6nG,iBAEL,IAAIC,EAAW9nG,KAAKknG,cAAcY,SAAW,IAAIlgG,EAAQwP,MAEzDpX,KAAK+nG,oBAEL/nG,KAAKm3E,gBAELn3E,KAAKgoG,oBAEL7nC,EAAUh3D,IAAI2+F,GAEd9nG,KAAKioG,gBACP,EAKAL,eAAgB,WACd,IAAIhL,EAAgB58F,KAAK48F,cACrBt6F,EAAMtC,KAAKsC,IAGX4lG,EAAYloG,KAAKmoG,iBAEjBn3F,EAAS,CACXzF,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aAGVk3F,EAAepoG,KAAKmnG,UAAYN,EAAa,CAG/Cv7E,MAAOta,EAAOzF,MAAQ28F,EAAUj8F,EAAIi8F,EAAU38F,MAC9C8f,IAAKra,EAAOhF,OAAS46F,EAAsBF,EAC3Cn7F,MAAO28F,EAAU38F,MACjBS,OAAQ46F,GACN,CAEFt7E,MAAOo7E,EACPr7E,IAAK68E,EAAUh8F,EACfX,MAAOq7F,EACP56F,OAAQk8F,EAAUl8F,QAIhBq8F,EAAe9+F,EAAO++F,gBAAgB1L,EAAc/uF,QAExD/L,EAAOU,KAAK,CAAC,QAAS,MAAO,QAAS,WAAW,SAAUgB,GAC9B,OAAvB6kG,EAAa7kG,KACf6kG,EAAa7kG,GAAQ4kG,EAAa5kG,GAEtC,IACA,IAAI+kG,EAAah/F,EAAO0kB,cAAco6E,EAAcr3F,EAAQ4rF,EAAc7rE,SAC1E/wB,KAAKwnG,UAAY,CACfv7F,EAAGs8F,EAAWt8F,EACdC,EAAGq8F,EAAWr8F,GAEhBlM,KAAKqnG,MAAQ,CAACkB,EAAWh9F,MAAOg9F,EAAWv8F,QAC3ChM,KAAKmnG,UAAYL,GAAY9mG,KAAKqnG,MAAM7zF,SAC1C,EAKAy0F,eAAgB,WACd,IAAI9nC,EAAYngE,KAAKqI,MACjBmgG,EAAWxoG,KAAKwnG,UAChB5uC,EAAS54D,KAAKmnG,QAEdsB,EAAkBzoG,KAAK48F,cAAc8F,0BACrCrmD,EAAUosD,GAAmBA,EAAgBvlG,IAAI,WACjD4kG,EAAW9nG,KAAKknG,cAAcY,SAC9BY,GAAoB1oG,KAAKynG,iBAAmB,CAAC,GAAGiB,iBAEpDZ,EAAS16F,KAAKwrD,IAAWiuC,GAAexqD,EAEpCuc,IAAWiuC,GAAcxqD,EAAU,CACrC51C,MAAOiiG,EAAmB,EAAE,EAAG,GAAK,EAAE,GAAI,IACxC9vC,IAAWkuC,GAAazqD,EAIxB,CACF51C,MAAOiiG,EAAmB,EAAE,GAAI,GAAK,EAAE,EAAG,GAC1Cz2F,SAAUzL,KAAK0L,GAAK,GANgB,CACpCzL,MAAOiiG,EAAmB,CAAC,GAAI,GAAK,CAAC,EAAG,GACxCz2F,SAAUzL,KAAK0L,GAAK,GAN4B,CAChDzL,MAAOiiG,EAAmB,CAAC,EAAG,GAAK,CAAC,GAAI,KAY1C,IAAIh+F,EAAOy1D,EAAUxjC,gBAAgB,CAACmrE,IACtC3nC,EAAU/yD,KAAK,WAAY,CAACo7F,EAASv8F,EAAIvB,EAAKuB,EAAGu8F,EAASt8F,EAAIxB,EAAKwB,GACrE,EAKAy8F,eAAgB,WACd,MAAO,CAAC,EAAG3oG,KAAKqnG,MAAM,GACxB,EACAU,kBAAmB,WACjB,IAAInL,EAAgB58F,KAAK48F,cACrB1uF,EAAOlO,KAAKqnG,MACZS,EAAW9nG,KAAKknG,cAAcY,SAClCA,EAAS3+F,IAAI,IAAIwB,EAAK,CACpB8L,QAAQ,EACRxM,MAAO,CACLgC,EAAG,EACHC,EAAG,EACHX,MAAO2C,EAAK,GACZlC,OAAQkC,EAAK,IAEf7C,MAAO,CACL4B,KAAM2vF,EAAc15F,IAAI,oBAE1BkP,IAAK,MAGP01F,EAAS3+F,IAAI,IAAIwB,EAAK,CACpBV,MAAO,CACLgC,EAAG,EACHC,EAAG,EACHX,MAAO2C,EAAK,GACZlC,OAAQkC,EAAK,IAEf7C,MAAO,CACL4B,KAAM,eAERmF,GAAI,EACJ+uD,QAASr/D,EAAO2B,KAAKzD,KAAK4oG,mBAAoB5oG,QAElD,EACAgoG,kBAAmB,WACjB,IAAIp4B,EAAO5vE,KAAKynG,gBAAkBznG,KAAK6oG,yBAEvC,GAAKj5B,EAAL,CAIA,IAAI1hE,EAAOlO,KAAKqnG,MACZhjG,EAAcurE,EAAK9tD,OACnBlhB,EAAOyD,EAAY+lB,aACnB0+E,EAAWzkG,EAAY4b,aAAe5b,EAAY4b,eACpD2vD,EAAKk5B,SAEP,GAAgB,MAAZA,EAAJ,CAIA,IAAIC,EAAkBnoG,EAAK2uB,cAAcu5E,GAErCE,EAA0D,IAA3CD,EAAgB,GAAKA,EAAgB,IACxDA,EAAkB,CAACA,EAAgB,GAAKC,EAAaD,EAAgB,GAAKC,GAC1E,IAQIC,EARAC,EAAoB,CAAC,EAAGh7F,EAAK,IAC7Bi7F,EAAmB,CAAC,EAAGj7F,EAAK,IAC5Bk7F,EAAa,CAAC,CAACl7F,EAAK,GAAI,GAAI,CAAC,EAAG,IAChC+e,EAAa,GACb4F,EAAOs2E,EAAiB,IAAMvoG,EAAKoW,QAAU,GAC7CqyF,EAAY,EAEZC,EAAS9iG,KAAK8R,MAAM1X,EAAKoW,QAAU9I,EAAK,IAE5CtN,EAAK4B,KAAK,CAACsmG,IAAW,SAAU/6F,EAAOuC,GACrC,GAAIg5F,EAAS,GAAKh5F,EAAQg5F,EACxBD,GAAax2E,MADf,CASA,IAAIwrB,EAAmB,MAATtwC,GAAiBsQ,MAAMtQ,IAAoB,KAAVA,EAE3Cw7F,EAAalrD,EAAU,EAAItwB,EAAUhgB,EAAOg7F,EAAiBG,GAAmB,GAEhF7qD,IAAY4qD,GAAe34F,GAC7B84F,EAAWpoG,KAAK,CAACooG,EAAWA,EAAWj1F,OAAS,GAAG,GAAI,IACvD8Y,EAAWjsB,KAAK,CAACisB,EAAWA,EAAW9Y,OAAS,GAAG,GAAI,MAC7CkqC,GAAW4qD,IACrBG,EAAWpoG,KAAK,CAACqoG,EAAW,IAC5Bp8E,EAAWjsB,KAAK,CAACqoG,EAAW,KAG9BD,EAAWpoG,KAAK,CAACqoG,EAAWE,IAC5Bt8E,EAAWjsB,KAAK,CAACqoG,EAAWE,IAC5BF,GAAax2E,EACbo2E,EAAc5qD,CArBd,CAsBF,IACA,IAAIu+C,EAAgB58F,KAAK48F,cAEzB58F,KAAKknG,cAAcY,SAAS3+F,IAAI,IAAIvB,EAAQokB,QAAQ,CAClD/hB,MAAO,CACL0iB,OAAQy8E,GAEV/9F,MAAOvJ,EAAOkL,SAAS,CACrBC,KAAM2vF,EAAc15F,IAAI,wBACvB05F,EAAcjwF,SAAS,4BAA4BqyC,gBACtDvoC,QAAQ,EACRrE,IAAK,MAGPpS,KAAKknG,cAAcY,SAAS3+F,IAAI,IAAIvB,EAAQqkB,SAAS,CACnDhiB,MAAO,CACL0iB,OAAQM,GAEV5hB,MAAOuxF,EAAcjwF,SAAS,4BAA4B+gB,eAC1DjX,QAAQ,EACRrE,IAAK,KA7DP,CAVA,CAyEF,EACAy2F,uBAAwB,WACtB,IAAIjM,EAAgB58F,KAAK48F,cACrB6J,EAAiB7J,EAAc15F,IAAI,kBAEvC,IAAuB,IAAnBujG,EAAJ,CAKA,IAAIxqF,EACA5Z,EAAUrC,KAAKqC,QA8BnB,OA7BAu6F,EAAc6E,gBAAe,SAAUC,EAAU/oB,GAC/C,IAAI/8D,EAAeghF,EAAcgG,aAAalB,EAASl+F,KAAMm1E,GAAW8lB,wBACxE38F,EAAOU,KAAKoZ,GAAc,SAAUvX,GAClC,IAAI4X,MAImB,IAAnBwqF,GAA2B3kG,EAAOqa,QAAQ6qF,EAA8B3iG,EAAYnB,IAAI,SAAW,GAAvG,CAIA,IAEIwlG,EAFAc,EAAWnnG,EAAQ22C,aAAa0oD,EAASjuF,KAAMklE,GAAWllE,KAC1Dq1F,EAAWW,EAAY/H,EAASl+F,MAEhCV,EAAWuB,EAAYa,iBAEX,MAAZ4jG,GAAoBhmG,EAASmQ,eAC/By1F,EAAmB5lG,EAASmQ,aAAau2F,GAAUntD,SAGrDpgC,EAAS,CACPutF,SAAUA,EACV1nF,OAAQzd,EACRqlG,QAAShI,EAASl+F,KAClBslG,SAAUA,EACVJ,iBAAkBA,EAhBpB,CAkBF,GAAG1oG,KACL,GAAGA,MACIic,CAlCP,CAmCF,EACAk7D,cAAe,WACb,IAAIwyB,EAAc3pG,KAAKknG,cACnB0C,EAAUD,EAAYC,QAAU,GAChCC,EAAeF,EAAYE,aAAe,GAC1C/B,EAAW9nG,KAAKknG,cAAcY,SAC9B55F,EAAOlO,KAAKqnG,MACZzK,EAAgB58F,KAAK48F,cACzBkL,EAAS3+F,IAAIwgG,EAAYG,OAAS,IAAIn/F,EAAK,CACzC6tB,WAAW,EACXvgB,OAAQ8xF,EAAU/pG,KAAKmnG,SACvB50D,MAAO9uC,EAAKzD,KAAKgqG,YAAahqG,KAAM,OACpC83E,YAAa,SAAUp7C,GAErBk4C,EAAUv3B,KAAK3gB,EAAE53B,MACnB,EACAmlG,YAAaxmG,EAAKzD,KAAKkqG,cAAelqG,MAAM,GAC5Ci4E,UAAWx0E,EAAKzD,KAAKmqG,WAAYnqG,MACjCoqG,YAAa3mG,EAAKzD,KAAKkqG,cAAelqG,MAAM,GAC5CqqG,WAAY5mG,EAAKzD,KAAKkqG,cAAelqG,MAAM,GAC3CqL,MAAO,CACL4B,KAAM2vF,EAAc15F,IAAI,eACxBoW,aAAc,aAIlBwuF,EAAS3+F,IAAI,IAAIwB,EAAK/C,EAAQ0iG,qBAAqB,CACjD7zF,QAAQ,EACRxM,MAAO,CACLgC,EAAG,EACHC,EAAG,EACHX,MAAO2C,EAAK,GACZlC,OAAQkC,EAAK,IAEf7C,MAAO,CACLqL,OAAQkmF,EAAc15F,IAAI,wBAA0B05F,EAAc15F,IAAI,eACtEsK,UAAWm5F,EACX15F,KAAM,qBAGVzK,EAAK,CAAC,EAAG,IAAI,SAAU+nG,GACrB,IAAIv1F,EAAOpN,EAAQiwE,WAAW+kB,EAAc15F,IAAI,cAAe,CAC7D+U,OAAQ8xF,EAAU/pG,KAAKmnG,SACvB3uE,WAAW,EACX+Z,MAAO9uC,EAAKzD,KAAKgqG,YAAahqG,KAAMuqG,GACpCzyB,YAAa,SAAUp7C,GAErBk4C,EAAUv3B,KAAK3gB,EAAE53B,MACnB,EACAmzE,UAAWx0E,EAAKzD,KAAKmqG,WAAYnqG,MACjCoqG,YAAa3mG,EAAKzD,KAAKkqG,cAAelqG,MAAM,GAC5CqqG,WAAY5mG,EAAKzD,KAAKkqG,cAAelqG,MAAM,IAC1C,CACDiM,GAAI,EACJC,EAAG,EACHX,MAAO,EACPS,OAAQ,IAENw+F,EAAQx1F,EAAK2nB,kBACjB38B,KAAKunG,cAAgB5uC,EAAW1oD,aAAa2sF,EAAc15F,IAAI,cAAelD,KAAKqnG,MAAM,IACzFrnG,KAAKsnG,aAAekD,EAAMj/F,MAAQi/F,EAAMx+F,OAAShM,KAAKunG,cACtDvyF,EAAKE,SAAS0nF,EAAcjwF,SAAS,eAAeoL,gBACpD,IAAI0yF,EAAc7N,EAAc15F,IAAI,eAEjB,MAAfunG,IACFz1F,EAAK3J,MAAM4B,KAAOw9F,GAGpB3C,EAAS3+F,IAAIygG,EAAQW,GAAev1F,GACpC,IAAIqrD,EAAiBu8B,EAAcv8B,eACnCrgE,KAAKqI,MAAMc,IAAI0gG,EAAaU,GAAe,IAAI3iG,EAAQgc,KAAK,CAC1DnN,QAAQ,EACRoxD,WAAW,EACXx8D,MAAO,CACLY,EAAG,EACHC,EAAG,EACHZ,KAAM,GACNkiB,kBAAmB,SACnBD,UAAW,SACX3I,SAAUy7C,EAAepvB,eACzBiwB,SAAUb,EAAe/4C,WAE3BlV,GAAI,KAER,GAAGpS,KACL,EAKA6nG,eAAgB,WACd,IAAIvhE,EAAQtmC,KAAKskG,OAAStkG,KAAK48F,cAAcmG,kBAEzC2H,EAAa1qG,KAAK2oG,iBAEtB3oG,KAAKonG,YAAc,CAACr5E,EAAUuY,EAAM,GAAI,CAAC,EAAG,KAAMokE,GAAY,GAAO38E,EAAUuY,EAAM,GAAI,CAAC,EAAG,KAAMokE,GAAY,GACjH,EAOAC,gBAAiB,SAAUJ,EAAa38C,GACtC,IAAIgvC,EAAgB58F,KAAK48F,cACrBgO,EAAa5qG,KAAKonG,YAElByD,EAAa7qG,KAAK2oG,iBAElBvK,EAAaxB,EAAcoG,8BAA8BhE,gBACzDI,EAAgB,CAAC,EAAG,KACxB+E,EAAWv2C,EAAOg9C,EAAYC,EAAYjO,EAAc15F,IAAI,YAAc,MAAQqnG,EAAmC,MAAtBnM,EAAWiC,QAAkBtyE,EAAUqwE,EAAWiC,QAASjB,EAAeyL,GAAY,GAAQ,KAA4B,MAAtBzM,EAAWkC,QAAkBvyE,EAAUqwE,EAAWkC,QAASlB,EAAeyL,GAAY,GAAQ,MACjS7qG,KAAKskG,OAAS5H,EAAI,CAAC3uE,EAAU68E,EAAW,GAAIC,EAAYzL,GAAe,GAAOrxE,EAAU68E,EAAW,GAAIC,EAAYzL,GAAe,IACpI,EAKAuI,YAAa,SAAUmD,GACrB,IAAInB,EAAc3pG,KAAKknG,cACnB0D,EAAa5qG,KAAKonG,YAClB2D,EAAiBrO,EAAIkO,EAAW5nG,SAChCkL,EAAOlO,KAAKqnG,MAChB7kG,EAAK,CAAC,EAAG,IAAI,SAAU+nG,GAErB,IAAIt2B,EAAS01B,EAAYC,QAAQW,GAC7BS,EAAehrG,KAAKunG,cACxBtzB,EAAO7mE,KAAK,CACV3G,MAAO,CAACukG,EAAe,EAAGA,EAAe,GACzCtkG,SAAU,CAACkkG,EAAWL,GAAcr8F,EAAK,GAAK,EAAI88F,EAAe,IAErE,GAAGhrG,MAEH2pG,EAAYG,OAAOh9F,SAAS,CAC1Bb,EAAG8+F,EAAe,GAClB7+F,EAAG,EACHX,MAAOw/F,EAAe,GAAKA,EAAe,GAC1C/+F,OAAQkC,EAAK,KAGflO,KAAKirG,gBAAgBH,EACvB,EAKAG,gBAAiB,SAAUH,GACzB,IAAIlO,EAAgB58F,KAAK48F,cACrB+M,EAAc3pG,KAAKknG,cACnB2C,EAAeF,EAAYE,aAC3BjxC,EAAS54D,KAAKmnG,QACd+D,EAAa,CAAC,GAAI,IAGtB,GAAItO,EAAc15F,IAAI,cAAe,CACnC,IAAIm6F,EAAYT,EAAcoG,8BAE9B,GAAI3F,EAAW,CACb,IAAI5pF,EAAO4pF,EAAUG,eAAe/pF,KAChC6yB,EAAQtmC,KAAKskG,OACb6G,EAAeL,EACjBzN,EAAU4B,oBAAoB,CAC9B1gF,MAAO+nB,EAAM,GACbxW,IAAKwW,EAAM,KACVy3D,YAAcV,EAAUkB,qBAC3B2M,EAAa,CAAClrG,KAAKorG,aAAaD,EAAa,GAAI13F,GAAOzT,KAAKorG,aAAaD,EAAa,GAAI13F,GAC7F,CACF,CAEA,IAAI43F,EAAoB3O,EAAI18F,KAAKonG,YAAYpkG,SAI7C,SAAS8E,EAASyiG,GAIhB,IAAIe,EAAe1jG,EAAQ2jG,aAAa5B,EAAYC,QAAQW,GAAa/+F,OAAQxL,KAAKqI,OAClFs9D,EAAY/9D,EAAQ4jG,mBAAmC,IAAhBjB,EAAoB,QAAU,OAAQe,GAC7Er9F,EAASjO,KAAKsnG,aAAe,EAAIP,EACjC0E,EAAY7jG,EAAQg1B,eAAe,CAACyuE,EAAkBd,IAAgC,IAAhBA,GAAqBt8F,EAASA,GAASjO,KAAKqnG,MAAM,GAAK,GAAIiE,GACrIzB,EAAaU,GAAar1F,SAAS,CACjCjJ,EAAGw/F,EAAU,GACbv/F,EAAGu/F,EAAU,GACbj+E,kBAAmBorC,IAAWiuC,EAAa,SAAWlhC,EACtDp4C,UAAWqrC,IAAWiuC,EAAalhC,EAAY,SAC/Cr6D,KAAM4/F,EAAWX,IAErB,CAlBAziG,EAAS6P,KAAK3X,KAAM,GACpB8H,EAAS6P,KAAK3X,KAAM,EAkBtB,EAKAorG,aAAc,SAAUr9F,EAAO0F,GAC7B,IAAImpF,EAAgB58F,KAAK48F,cACrBzrE,EAAiByrE,EAAc15F,IAAI,kBACnCqjG,EAAiB3J,EAAc15F,IAAI,kBAEjB,MAAlBqjG,GAA6C,SAAnBA,IAC5BA,EAAiB9yF,EAAKuqF,qBAGxB,IAAI0N,EAAoB,MAAT39F,GAAiBsQ,MAAMtQ,GAAS,GAC/B,aAAd0F,EAAK/Q,MAAqC,SAAd+Q,EAAK/Q,KAAkB+Q,EAAKhN,MAAMw9E,SAASz9E,KAAK8R,MAAMvK,IAClFA,EAAMmd,QAAQ1kB,KAAKJ,IAAImgG,EAAgB,KACzC,OAAOzkG,EAAOyiF,WAAWpzD,GAAkBA,EAAepjB,EAAO29F,GAAY5pG,EAAOwiF,SAASnzD,GAAkBA,EAAeC,QAAQ,UAAWs6E,GAAYA,CAC/J,EAMAxB,cAAe,SAAUyB,GAEvBA,EAAa3rG,KAAKg2E,WAAa21B,EAC/B,IAAI9B,EAAe7pG,KAAKknG,cAAc2C,aACtCA,EAAa,GAAGz8F,KAAK,aAAcu+F,GACnC9B,EAAa,GAAGz8F,KAAK,aAAcu+F,EACrC,EACA3B,YAAa,SAAUO,EAAavkG,EAAIC,GACtCjG,KAAKg2E,WAAY,EAEjB,IAAIs1B,EAAetrG,KAAKknG,cAAcY,SAAShd,oBAE3C8gB,EAAShkG,EAAQg1B,eAAe,CAAC52B,EAAIC,GAAKqlG,GAAc,GAE5DtrG,KAAK2qG,gBAAgBJ,EAAaqB,EAAO,IAEzC,IAAIrc,EAAWvvF,KAAK48F,cAAc15F,IAAI,YAEtClD,KAAK2nG,aAAapY,GAEdA,GACFA,GAAYvvF,KAAK6rG,qBAErB,EACA1B,WAAY,WACVnqG,KAAKg2E,WAAY,EAEjBh2E,KAAKkqG,eAAc,GAEnBlqG,KAAK6rG,qBACP,EACAjD,mBAAoB,SAAUlsE,GAC5B,IAAIxuB,EAAOlO,KAAKqnG,MAEZyE,EAAa9rG,KAAKknG,cAAcY,SAASr+B,sBAAsB/sC,EAAEoR,QAASpR,EAAEqR,SAEhF,KAAI+9D,EAAW,GAAK,GAAKA,EAAW,GAAK59F,EAAK,IAAM49F,EAAW,GAAK,GAAKA,EAAW,GAAK59F,EAAK,IAA9F,CAIA,IAAI08F,EAAa5qG,KAAKonG,YAClB/hG,GAAUulG,EAAW,GAAKA,EAAW,IAAM,EAE/C5qG,KAAK2qG,gBAAgB,MAAOmB,EAAW,GAAKzmG,GAE5CrF,KAAK2nG,cAEL3nG,KAAK6rG,qBATL,CAUF,EAMAA,oBAAqB,WACnB,IAAIvlE,EAAQtmC,KAAKskG,OACjBtkG,KAAKsC,IAAI84B,eAAe,CACtB14B,KAAM,WACN6kD,KAAMvnD,KAAKwnD,IACXs9C,WAAY9kG,KAAK48F,cAAcv2E,GAC/B9H,MAAO+nB,EAAM,GACbxW,IAAKwW,EAAM,IAEf,EAKA6hE,eAAgB,WAEd,IAAIz9F,EAQJ,GAPAlI,EAAKxC,KAAKwjG,sBAAsB,SAAU7R,GACxC,IAAKjnF,GAAQinF,EAAcx9E,OAAQ,CACjC,IAAIrR,EAAW6uF,EAAc,GAAG17D,MAAM/wB,iBACtCwF,EAAO5H,EAASgO,SAAWhO,EAASgO,SACtC,CACF,KAEKpG,EAAM,CACT,IAAIa,EAAQvL,KAAKsC,IAAI2O,WACjBjF,EAAShM,KAAKsC,IAAI4O,YACtBxG,EAAO,CACLuB,EAAW,GAARV,EACHW,EAAY,GAATF,EACHT,MAAe,GAARA,EACPS,OAAiB,GAATA,EAEZ,CAEA,OAAOtB,CACT,IAGF,SAAS++F,EAAYC,GAGnB,IAAIhyE,EAAM,CACRzrB,EAAG,IACHC,EAAG,IACH+jB,OAAQ,QACR2C,MAAO,UAET,OAAO8E,EAAIgyE,EACb,CAEA,SAASK,EAAUnxC,GACjB,MAAkB,aAAXA,EAAwB,YAAc,WAC/C,CAEA,IAAIz1D,EAAW8jG,EACf7jG,EAAOvB,QAAUsB,C,iCCrsBjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBsiE,EAAStiE,EAAQ,MAErBiC,EAAQI,eAAe,YAAY,SAAUC,EAAS1B,GACpD,IAAI0pG,EAAoBhoC,EAAOioC,wBAAwBlqG,EAAO2B,KAAKpB,EAAQ4B,cAAe5B,EAAS,YAAa0hE,EAAOk8B,aAAa,SAAUhqE,EAAOyrE,GACnJ,OAAOzrE,EAAM/yB,IAAIw+F,EAAS/oB,UAC5B,IACIszB,EAAiB,GACrB5pG,EAAQ4B,cAAc,CACpBC,SAAU,WACVE,MAAOL,IACN,SAAUkyB,EAAO3lB,GAClB27F,EAAejrG,KAAK8hE,MAAMmpC,EAAgBF,EAAkB91E,GAAON,MACrE,IACA7zB,EAAOU,KAAKypG,GAAgB,SAAUrP,EAAetsF,GACnDssF,EAAciG,YAAY,CACxBtkF,MAAOxa,EAAQwa,MACfuR,IAAK/rB,EAAQ+rB,IACbqwE,WAAYp8F,EAAQo8F,WACpBC,SAAUr8F,EAAQq8F,UAEtB,GACF,G,wBCzBA,IAAI18F,EAAUjC,EAAQ,OAuCtB,SAASyqG,EAAgBxK,EAAU/oB,EAAWikB,GAC5CA,EAAcgG,aAAalB,EAASl+F,KAAMm1E,GAAW4mB,MAAM3C,EAC7D,CAEA,SAASuP,EAAiBzK,EAAU/oB,EAAWikB,GAC7CA,EAAcgG,aAAalB,EAASl+F,KAAMm1E,GAAWniB,WAAWomC,EAClE,CA3CAl5F,EAAQmmB,mBAAkB,SAAUxnB,EAASC,GAC3CD,EAAQ4B,cAAc,YAAY,SAAU24F,GAI1CA,EAAc6E,eAAeyK,GAe7BtP,EAAc6E,eAAe0K,EAC/B,IACA9pG,EAAQ4B,cAAc,YAAY,SAAU24F,GAG1C,IAAIS,EAAYT,EAAcoG,8BAC1BoJ,EAAe/O,EAAUmB,uBACzB6N,EAAahP,EAAUkB,qBAC3B3B,EAAciG,YAAY,CACxBtkF,MAAO6tF,EAAa,GACpBt8E,IAAKs8E,EAAa,GAClBjM,WAAYkM,EAAW,GACvBjM,SAAUiM,EAAW,KACpB,EACL,GACF,G,gCCrCA,IAAIvqG,EAASL,EAAQ,OAEjBi5E,EAAaj5E,EAAQ,OAErB6qG,EAAY,CAAC,IAAK,IAAK,IAAK,SAAU,QAAS,UAE/CC,EAAS,CAAC,cAAe,QAAS,cAMtC,SAAS7N,EAAiB8N,GACxB,OAAO1qG,EAAOqa,QAAQowF,EAAQC,IAAc,CAC9C,CAWA,SAASC,EAAepL,EAAOhhG,GAC7BghG,EAAQA,EAAMr+F,QACd,IAAI0pG,EAAe5qG,EAAO41B,IAAI2pE,EAAO3mB,EAAWK,cAChD16E,GAASA,GAAS,IAAI2C,QACtB,IAAI2pG,EAAe7qG,EAAO41B,IAAIr3B,EAAOq6E,EAAWK,cAChD,OAAO,SAAUlc,EAAUpnD,GACzB3V,EAAOU,KAAK6+F,GAAO,SAAU79F,EAAM8M,GAMjC,IALA,IAAIs8F,EAAU,CACZppG,KAAMA,EACNqpG,QAASH,EAAap8F,IAGfgjB,EAAI,EAAGA,EAAIjzB,EAAM8T,OAAQmf,IAChCs5E,EAAQvsG,EAAMizB,IAAM9vB,EAAOmpG,EAAar5E,GAG1CurC,EAASlnD,KAAKF,EAASm1F,EACzB,GACF,CACF,CAiBA,IAAI3M,EAAcwM,EAAeH,EAAW,CAAC,YAAa,OAAQ,QAAS,OAa3E,SAASN,EAAwBc,EAAaC,EAAiBC,GAC7D,OAAO,SAAUC,GACf,IAcIC,EAdAjxF,EAAS,CACX0Z,MAAO,GACPyqD,QAAS,CAAC,GAOZ,GAJA2sB,GAAgB,SAAUI,GACxBlxF,EAAOmkE,QAAQ+sB,EAAS3pG,MAAQ,CAAC,CACnC,KAEKypG,EACH,OAAOhxF,EAGTmxF,EAAOH,EAAYhxF,GAGnB,GACEixF,GAAa,EACbJ,EAAYO,SACLH,GAET,SAASG,EAAkBrxE,IACpBsxE,EAAetxE,EAAM/f,IAAWsxF,EAASvxE,EAAM/f,KAClDmxF,EAAOpxE,EAAM/f,GACbixF,GAAa,EAEjB,CAEA,OAAOjxF,CACT,EAEA,SAASqxF,EAAetxE,EAAM/f,GAC5B,OAAOna,EAAOqa,QAAQF,EAAO0Z,MAAOqG,IAAS,CAC/C,CAEA,SAASuxE,EAASvxE,EAAM/f,GACtB,IAAIuxF,GAAU,EAMd,OALAT,GAAgB,SAAUI,GACxBrrG,EAAOU,KAAKwqG,EAAahxE,EAAMmxE,IAAa,IAAI,SAAUM,GACxDxxF,EAAOmkE,QAAQ+sB,EAAS3pG,MAAMiqG,KAAYD,GAAU,EACtD,GACF,IACOA,CACT,CAEA,SAASJ,EAAOpxE,EAAM/f,GACpBA,EAAO0Z,MAAM30B,KAAKg7B,GAClB+wE,GAAgB,SAAUI,GACxBrrG,EAAOU,KAAKwqG,EAAahxE,EAAMmxE,IAAa,IAAI,SAAUM,GACxDxxF,EAAOmkE,QAAQ+sB,EAAS3pG,MAAMiqG,IAAU,CAC1C,GACF,GACF,CACF,CAEA5rG,EAAQ68F,iBAAmBA,EAC3B78F,EAAQ4qG,eAAiBA,EACzB5qG,EAAQo+F,YAAcA,EACtBp+F,EAAQmqG,wBAA0BA,C,iCCtIlC,IAAIlqG,EAASL,EAAQ,OAEjBe,EAAOV,EAAOU,KACdkrG,EAAO,mBAMX,SAAS1sG,EAAKqB,EAASsrG,GACrB,IAAInmC,EAAQomC,EAAUvrG,GAGtBG,EAAKmrG,GAAa,SAAUhuB,EAAWmlB,GAGrC,IAFA,IAAI7uF,EAAIuxD,EAAMrzD,OAAS,EAEhB8B,GAAK,EAAGA,IAAK,CAClB,IAAI43F,EAAWrmC,EAAMvxD,GAErB,GAAI43F,EAAS/I,GACX,KAEJ,CAEA,GAAI7uF,EAAI,EAAG,CAET,IAAI2mF,EAAgBv6F,EAAQg1C,gBAAgB,CAC1CnzC,SAAU,WACVC,QAAS,SACTkiB,GAAIy+E,IACH,GAEH,GAAIlI,EAAe,CACjB,IAAIwP,EAAexP,EAAcmG,kBACjCv7B,EAAM,GAAGs9B,GAAc,CACrBA,WAAYA,EACZvmF,MAAO6tF,EAAa,GACpBt8E,IAAKs8E,EAAa,GAEtB,CACF,CACF,IACA5kC,EAAMxmE,KAAK2sG,EACb,CAOA,SAAS90D,EAAIx2C,GACX,IAAImlE,EAAQomC,EAAUvrG,GAClBk9D,EAAOiI,EAAMA,EAAMrzD,OAAS,GAChCqzD,EAAMrzD,OAAS,GAAKqzD,EAAM3uB,MAE1B,IAAIg1D,EAAW,CAAC,EAWhB,OAVArrG,EAAK+8D,GAAM,SAAUogB,EAAWmlB,GAC9B,IAAK,IAAI7uF,EAAIuxD,EAAMrzD,OAAS,EAAG8B,GAAK,EAAGA,IAAK,CACtC0pE,EAAYnY,EAAMvxD,GAAG6uF,GAEzB,GAAInlB,EAAW,CACbkuB,EAAS/I,GAAcnlB,EACvB,KACF,CACF,CACF,IACOkuB,CACT,CAMA,SAASjpD,EAAMviD,GACbA,EAAQqrG,GAAQ,IAClB,CAOA,SAAS12F,EAAM3U,GACb,OAAOurG,EAAUvrG,GAAS8R,MAC5B,CASA,SAASy5F,EAAUvrG,GACjB,IAAImlE,EAAQnlE,EAAQqrG,GAMpB,OAJKlmC,IACHA,EAAQnlE,EAAQqrG,GAAQ,CAAC,CAAC,IAGrBlmC,CACT,CAEA3lE,EAAQb,KAAOA,EACfa,EAAQg3C,IAAMA,EACdh3C,EAAQ+iD,MAAQA,EAChB/iD,EAAQmV,MAAQA,C,iCC1GhB,IAAIlV,EAASL,EAAQ,OAEjBq3B,EAAiBr3B,EAAQ,OAEzBozE,EAAepzE,EAAQ,OAOvByF,EAAQpF,EAAOoF,MACfwmG,EAAO,uBAgBX,SAASpsG,EAASgB,EAAKwrG,GACrB,IAAItmC,EAAQomC,EAAUtrG,GAClByrG,EAAgBD,EAAahJ,WAC7BkJ,EAAaF,EAAalJ,QAG9B9iG,EAAOU,KAAKglE,GAAO,SAAU8Y,EAAQskB,GACnC,IAAIqJ,EAAgB3tB,EAAO2tB,cAEvBA,EAAcF,IAAkBjsG,EAAOqa,QAAQ2xF,EAAatJ,YAAawJ,GAAc,WAClFC,EAAcF,GACrBztB,EAAOtpE,QAEX,IACAk3F,EAAW1mC,GACX,IAAI8Y,EAAS9Y,EAAMwmC,GAEd1tB,IACHA,EAAS9Y,EAAMwmC,GAAc,CAC3BpJ,QAASoJ,EACTC,cAAe,CAAC,EAChBj3F,MAAO,GAETspE,EAAO/jD,WAAa4xE,EAAiB7rG,EAAKg+E,GAC1CA,EAAOllD,eAAiBt5B,EAAOoF,MAAMk0B,EAAgB94B,KAItDg+E,EAAO2tB,cAAcF,IAAkBztB,EAAOtpE,QAC/CspE,EAAO2tB,cAAcF,GAAiBD,EACtC,IAAIM,EAAmBC,EAAsB/tB,EAAO2tB,eACpD3tB,EAAO/jD,WAAWQ,OAAOqxE,EAAiBE,YAAaF,EAAiBr9F,KAExEuvE,EAAO/jD,WAAWE,kBAAkBqxE,EAAajJ,eAEjDhwB,EAAajtD,eAAe04D,EAAQ,iBAAkBwtB,EAAa/I,aAAc,UACnF,CAQA,SAASrwB,EAAWpyE,EAAKwiG,GACvB,IAAIt9B,EAAQomC,EAAUtrG,GACtBR,EAAOU,KAAKglE,GAAO,SAAU8Y,GAC3BA,EAAO/jD,WAAWj0B,UAClB,IAAI2lG,EAAgB3tB,EAAO2tB,cAEvBA,EAAcnJ,YACTmJ,EAAcnJ,GACrBxkB,EAAOtpE,QAEX,IACAk3F,EAAW1mC,EACb,CAMA,SAAS+8B,EAAkBxgG,EAAS+gG,GAClC,GAAI/gG,GAA4B,aAAjBA,EAAQrB,MAAuBqB,EAAQ+7E,MACpD,IAAK,IAAI7pE,EAAI,EAAGuY,EAAMzqB,EAAQ+7E,MAAM3rE,OAAQ8B,EAAIuY,EAAKvY,IACnD,GAAIlS,EAAQ+7E,MAAM7pE,GAAG6uF,aAAeA,EAClC,OAAO,EAKb,OAAO,CACT,CAMA,SAASJ,EAAgBf,GACvB,OAAOA,EAAWjhG,KAAO,MAAQihG,EAAWt9E,EAC9C,CAOA,SAASunF,EAAUtrG,GAGjB,IAAIiiD,EAAKjiD,EAAIujB,QACb,OAAO0+B,EAAGmpD,KAAUnpD,EAAGmpD,GAAQ,CAAC,EAClC,CAEA,SAASS,EAAiB7rG,EAAKisG,GAC7B,IAAIhyE,EAAa,IAAIzD,EAAex2B,EAAIujB,SAGxC,OAFA0W,EAAWj8B,GAAG,MAAO4G,EAAMsnG,EAAOD,IAClChyE,EAAWj8B,GAAG,OAAQ4G,EAAMunG,EAAQF,IAC7BhyE,CACT,CAEA,SAAS2xE,EAAW1mC,GAClB1lE,EAAOU,KAAKglE,GAAO,SAAU8Y,EAAQskB,GAC9BtkB,EAAOtpE,QACVspE,EAAO/jD,WAAWj0B,iBACXk/D,EAAMo9B,GAEjB,GACF,CAEA,SAAS4J,EAAMluB,EAAQt6E,EAAIC,EAAIk/F,EAAMC,EAAMC,EAAMC,GAC/CoJ,EAAgBpuB,GAAQ,SAAU1Q,GAChC,OAAOA,EAAKo1B,YAAY1kB,EAAO/jD,WAAYv2B,EAAIC,EAAIk/F,EAAMC,EAAMC,EAAMC,EACvE,GACF,CAEA,SAASmJ,EAAOnuB,EAAQ75E,EAAOw2B,EAAQC,GACrCwxE,EAAgBpuB,GAAQ,SAAU1Q,GAChC,OAAOA,EAAKq1B,aAAa3kB,EAAO/jD,WAAY91B,EAAOw2B,EAAQC,EAC7D,GACF,CAEA,SAASwxE,EAAgBpuB,EAAQquB,GAC/B,IAAI7uB,EAAQ,GACZh+E,EAAOU,KAAK89E,EAAO2tB,eAAe,SAAUr+B,GAC1C,IAAItpC,EAAQqoE,EAAS/+B,IACpBA,EAAKi0B,UAAYv9D,GAASw5C,EAAM9+E,KAAK,CACpC8jG,WAAYl1B,EAAKk1B,WACjBvmF,MAAO+nB,EAAM,GACbxW,IAAKwW,EAAM,IAEf,IACAg6C,EAAOllD,eAAe0kD,EACxB,CAMA,SAAS1kD,EAAe94B,EAAKw9E,GAC3Bx9E,EAAI84B,eAAe,CACjB14B,KAAM,WACNo9E,MAAOA,GAEX,CAMA,SAASuuB,EAAsBJ,GAC7B,IAAIK,EACAv9F,EAAM,CAAC,EACP69F,EAAe,CACjB,KAAQ,EACR,KAAQ,EACR,MAAS,EACT,WAAc,GAQhB,OANA9sG,EAAOU,KAAKyrG,GAAe,SAAUH,GACnC,IAAIe,GAAUf,EAAajK,YAAmBiK,EAAahK,UAAW,QACtE8K,EAAaC,GAAWD,EAAaN,KAAiBA,EAAcO,GAEpE/sG,EAAOyF,OAAOwJ,EAAK+8F,EAAa5I,kBAClC,IACO,CACLoJ,YAAaA,EACbv9F,IAAKA,EAET,CAEAlP,EAAQP,SAAWA,EACnBO,EAAQ6yE,WAAaA,EACrB7yE,EAAQ0iG,kBAAoBA,EAC5B1iG,EAAQ6iG,gBAAkBA,C,wBC1M1B,IAAIoK,EAAYrtG,EAAQ,OAExBqtG,EAAUC,yBAAyB,YAAY,WAE7C,MAAO,QACT,G,wBCLA,IAAIrrG,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAUrB,SAASutG,EAAW1qG,EAAQT,GAC1BA,EAAWhB,OAAS,aACpBa,EAAQI,eAAeD,GAAY,SAAUE,EAAS1B,GACpD,IAAI2B,EAAW,CAAC,EAWhB,OAVA3B,EAAQ4B,cAAc,CACpBC,SAAU,MACVE,MAAOL,IACN,SAAUkrG,GACXA,EAAS3qG,GAAQP,EAAQP,MACzB,IAAIyB,EAAMgqG,EAAS/pG,iBACnBpD,EAAOU,KAAKyC,EAAIiqG,SAAS,SAAUroD,GACjC7iD,EAAS6iD,EAAOrjD,MAAQyrG,EAAStqG,WAAWkiD,EAAOrjD,QAAS,CAC9D,GACF,IACO,CACLQ,SAAUA,EACVR,KAAMO,EAAQP,KAElB,GACF,CA3BA/B,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAuBRutG,EAAW,iBAAkB,CAC3BtsG,KAAM,kBACNoC,MAAO,qBAETkqG,EAAW,SAAU,CACnBtsG,KAAM,YACNoC,MAAO,gBAETkqG,EAAW,WAAY,CACrBtsG,KAAM,cACNoC,MAAO,iB,wBC3CT,IAAIuiD,EAAU5lD,EAAQ,OAElBiC,EAAUjC,EAAQ,OAElB0B,EAAWO,EAAQ4wE,oBAAoB,CACzC5xE,KAAM,MACN2mB,KAAM,SAAUhnB,EAASC,GACvB,IAAImlD,EAAU,IAAIJ,EAAQ/kD,GAAK,GAC/BtC,KAAK0nD,SAAWD,EAChBznD,KAAKqI,MAAMc,IAAIs+C,EAAQp/C,MACzB,EACAvI,OAAQ,SAAUmvG,EAAU5sG,EAASC,EAAKyB,GAExC,IAAIA,GAA4B,oBAAjBA,EAAQrB,MAA8BqB,EAAQwjD,OAASvnD,KAAKwnD,IAA3E,CAIA,IAAIC,EAAUznD,KAAK0nD,SAEfunD,EAAS/rG,IAAI,QACfukD,EAAQE,KAAKsnD,EAAU5sG,EAASC,EAAKtC,KAAM+D,GAE3C/D,KAAK0nD,SAASr/C,MAAMkC,YAGtBvK,KAAKqI,MAAMoO,OAASw4F,EAAS/rG,IAAI,SAVjC,CAWF,EACAoF,QAAS,WACPtI,KAAK0nD,UAAY1nD,KAAK0nD,SAASx9C,QACjC,IAGF9G,EAAOvB,QAAUsB,C,iCChCjB,IAAIuE,EAAUjG,EAAQ,OAIlBiC,GAFUgE,EAAQC,QAERlG,EAAQ,QAElBK,EAASL,EAAQ,OAEjB84C,EAAY94C,EAAQ,OAEpBwgB,EAAcxgB,EAAQ,OAEtB0tG,EAAa1tG,EAAQ,MAKzBiC,EAAQ+b,sBAAqB,SAAU5R,GACrC,IAAIuhG,EAAgBvhG,EAAOjG,QAOvB9F,EAAO6Q,QAAQy8F,GACZA,EAAc,IAAOA,EAAc,GAAGC,SAOzCxhG,EAAOjG,QAAU,CAACiG,EAAOjG,QAAQ,IANjCiG,EAAOjG,QAAU,CAAC,CAChBynG,SAAUD,IAOLA,IAAkBA,EAAcC,WACzCxhG,EAAOjG,QAAU,CAAC,CAChBynG,SAAU,CAACD,KAGjB,IAIA,IAAIE,EAAe5rG,EAAQiwE,qBAAqB,CAC9CjxE,KAAM,UACN2L,cAAe,CAyBbghG,SAAU,GACVE,SAAU,MAUZC,mBAAoB,KAKpBh6E,YAAa,SAAU3nB,GAErB,IAAIwhG,EAAWrvG,KAAK6N,OAAOwhG,SAC3BrvG,KAAK6N,OAAOwhG,SAAW,KACvBC,EAAa1/F,WAAW5P,KAAM,cAAe6P,WAC7C7P,KAAK6N,OAAOwhG,SAAWA,CACzB,EAKAzsC,cAAe,SAAU7c,EAAW3hC,GAClC,IAAIwtE,EAAa5xF,KAAK6N,OAClB4hG,GAAWrrF,EAASwtE,EAAa7rC,GAAWspD,SAC5CK,EAAY9d,EAAWyd,SAAWjrF,EAAS,GAAKwtE,EAAWyd,SAC3DM,EAAgB,GAEpB3vG,KAAK4vG,SAASH,EAASE,GAEvB,IAAIE,EAAgBt1D,EAAUu1D,gBAAgBJ,EAAWC,GACzDp1D,EAAUw1D,cAAcF,GAExB,IAAIG,EAAoBhwG,KAAKwvG,mBAAqB,GAClD1tG,EAAOU,KAAKqtG,GAAe,SAAUI,EAAY3/F,GAC/C,IAAI4/F,EAAcD,EAAWpiG,OAExBqiG,IAILF,EAAkBhvG,KAAKkvG,GACvBC,EAAwBF,EAAYC,GACpCE,EAAwBV,EAAWp/F,EAAO4/F,GAC1CG,EAAqBX,EAAUp/F,GAAQ4/F,GACzC,GAAGlwG,MAEH,IAAK,IAAIiW,EAAIy5F,EAAUv7F,OAAS,EAAG8B,GAAK,EAAGA,IACrB,MAAhBy5F,EAAUz5F,GACZy5F,EAAUjwC,OAAOxpD,EAAG,UAIby5F,EAAUz5F,GAAGq6F,OAG1B,EAqBAV,SAAU,SAAUW,EAAYt0F,EAAQu0F,GACtC1uG,EAAOU,KAAK+tG,GAAY,SAAU1iG,GAChC,GAAKA,EAAL,CAII2iG,IACF3iG,EAAO2iG,aAAeA,GAGxBv0F,EAAOjb,KAAK6M,GACZ,IAAI6J,EAAW7J,EAAO6J,SAEF,UAAhB7J,EAAOnL,MAAoBgV,GAC7B1X,KAAK4vG,SAASl4F,EAAUuE,EAAQpO,UAI3BA,EAAO6J,QAdd,CAeF,GAAG1X,KACL,EAGAywG,qBAAsB,WACpB,IAAI7oC,EAAM5nE,KAAKwvG,mBAGf,OADAxvG,KAAKwvG,mBAAqB,KACnB5nC,CACT,IAqKF,SAASzkD,EAASkD,EAAIqqF,EAAgBttF,EAAUutF,GAC9C,IAAIttF,EAAcD,EAAS1gB,KACvBohB,EAAM7B,EAAYoB,EAAYU,OAAO,GAAGC,cAAgBX,EAAYrgB,MAAM,IAC1EyG,EAAK,IAAIqa,EAAIV,GACjBstF,EAAevnG,IAAIM,GACnBknG,EAAMt1F,IAAIgL,EAAI5c,GACdA,EAAGmnG,cAAgBvqF,CACrB,CAEA,SAASwqF,EAASC,EAASH,GACzB,IAAII,EAAgBD,GAAWA,EAAQtlG,OAEnCulG,IACe,UAAjBD,EAAQpuG,MAAoBouG,EAAQl3E,UAAS,SAAUnwB,GACrDonG,EAASpnG,EAAIknG,EACf,IACAA,EAAMK,UAAUF,EAAQF,eACxBG,EAAc7mG,OAAO4mG,GAEzB,CAGA,SAASG,EAAmB7tF,GAK1B,OAJAA,EAAWthB,EAAOyF,OAAO,CAAC,EAAG6b,GAC7BthB,EAAOU,KAAK,CAAC,KAAM,WAAY,UAAW,KAAM,YAAYI,OAAOusG,EAAW+B,kBAAkB,SAAU1tG,UACjG4f,EAAS5f,EAClB,IACO4f,CACT,CAEA,SAAS+tF,EAASC,EAAKn8B,GACrB,IAAIo8B,EAIJ,OAHAvvG,EAAOU,KAAKyyE,GAAO,SAAUvwD,GACd,MAAb0sF,EAAI1sF,IAA+B,SAAd0sF,EAAI1sF,KAAqB2sF,GAAQ,EACxD,IACOA,CACT,CAEA,SAASlB,EAAwBF,EAAYC,GAC3C,IAAIoB,EAAgBrB,EAAWsB,MAK/B,GAHArB,EAAY7pF,GAAK4pF,EAAWuB,QAAQnrF,IACnC6pF,EAAYxtG,MAAQ4uG,IAAkBpB,EAAYxtG,KAAO4uG,EAAc5uG,MAE5C,MAAxBwtG,EAAYX,SAAkB,CAChC,IAAIkC,EAAoBvB,EAAYM,aAEhCiB,EACFvB,EAAYX,SAAWkC,EAAkBprF,GAChCirF,IACTpB,EAAYX,SAAW+B,EAAc/B,SAEzC,CAGAW,EAAYM,aAAe,IAC7B,CAEA,SAASJ,EAAwBV,EAAWp/F,EAAO4/F,GAEjD,IAAIwB,EAAe5vG,EAAOyF,OAAO,CAAC,EAAG2oG,GACjCoB,EAAgB5B,EAAUp/F,GAC1BggG,EAAUJ,EAAYI,SAAW,QAErB,UAAZA,EACEgB,GAGFxvG,EAAOqwF,MAAMmf,EAAeI,GAAc,GAE1CvC,EAAWwC,iBAAiBL,EAAeI,EAAc,CACvDE,YAAY,IAGdzC,EAAW0C,iBAAiB3B,EAAaoB,IAEzC5B,EAAUp/F,GAASohG,EAEA,YAAZpB,EACTZ,EAAUp/F,GAASohG,EACE,WAAZpB,GAETgB,IAAkB5B,EAAUp/F,GAAS,KAEzC,CAEA,SAAS+/F,EAAqByB,EAAW5B,GAClC4B,IAILA,EAAUC,GAAK7B,EAAY6B,GAAK,CAChCZ,EAASjB,EAAa,CAAC,OAAQ,UAC/BiB,EAASjB,EAAa,CAAC,MAAO,YAEP,UAAnB4B,EAAUpvG,OACO,MAAnBovG,EAAUvmG,QAAkBumG,EAAUvmG,MAAQ2kG,EAAY3kG,MAAQ,GAC9C,MAApBumG,EAAU9lG,SAAmB8lG,EAAU9lG,OAASkkG,EAAYlkG,OAAS,IAEzE,CAnQAtI,EAAQ4wE,oBAAoB,CAC1B5xE,KAAM,UAKN2mB,KAAM,SAAUhnB,EAASC,GAKvBtC,KAAKgyG,OAASlwG,EAAO40D,gBAMrB12D,KAAKiyG,iBACP,EAKAnyG,OAAQ,SAAUoyG,EAAc7vG,EAASC,GAUnC4vG,IAAiBlyG,KAAKiyG,mBACxBjyG,KAAKmyG,SAGPnyG,KAAKiyG,kBAAoBC,EAEzBlyG,KAAKoyG,gBAAgBF,EAAc5vG,GAEnCtC,KAAKqyG,UAAUH,EAAc5vG,EAC/B,EASA8vG,gBAAiB,SAAUF,EAAc5vG,GACvC,IAAI0tG,EAAoBkC,EAAazB,uBAErC,GAAKT,EAAL,CAIA,IAAIW,EAAQ3wG,KAAKgyG,OACbM,EAAYtyG,KAAKqI,MAErBvG,EAAOU,KAAKwtG,GAAmB,SAAU5sF,GACvC,IAAIktF,EAAUltF,EAASktF,QACnBjqF,EAAKjD,EAASiD,GACdyqF,EAAUH,EAAMztG,IAAImjB,GACpBkpF,EAAWnsF,EAASmsF,SACpBmB,EAA6B,MAAZnB,EAAmBoB,EAAMztG,IAAIqsG,GAAY+C,EAE9D,GAAsB,SAAlBlvF,EAAS1gB,KAAiB,CAC5B,IAAI4hB,EAAgBlB,EAAS/X,MAGzB+X,EAAS2uF,IAAM3uF,EAAS2uF,GAAG,KAC7BztF,EAAckJ,kBAAoBlJ,EAAciuF,aAAe,OAKhEjuF,EAAc1iB,eAAe,aAAe0iB,EAAcrX,OAASqX,EAAcM,SAAWN,EAAcrX,OAC1GqX,EAAc1iB,eAAe,eAAiB0iB,EAAc5N,SAAW4N,EAAcO,WAAaP,EAAc5N,OACnH,CAGA,IAAI87F,EAAkBvB,EAAmB7tF,GAEpCktF,GAAuB,UAAZA,EAEO,YAAZA,GACTO,EAASC,EAASH,GAClBxtF,EAASkD,EAAIqqF,EAAgB8B,EAAiB7B,IACzB,WAAZL,GACTO,EAASC,EAASH,GALlBG,EAAUA,EAAQ1jG,KAAKolG,GAAmBrvF,EAASkD,EAAIqqF,EAAgB8B,EAAiB7B,GAQ1F,IAAIlnG,EAAKknG,EAAMztG,IAAImjB,GAEf5c,IACFA,EAAGgpG,iBAAmBrvF,EAAS7X,MAC/B9B,EAAGipG,kBAAoBtvF,EAASpX,OAEpC,GA5CA,CA6CF,EASAqmG,UAAW,SAAUH,EAAc5vG,GAKjC,IAJA,IAAIqwG,EAAYT,EAAarkG,OAAOwhG,SAChCiD,EAAYtyG,KAAKqI,MACjBsoG,EAAQ3wG,KAAKgyG,OAER/7F,EAAI08F,EAAUx+F,OAAS,EAAG8B,GAAK,EAAGA,IAAK,CAC9C,IAAImN,EAAWuvF,EAAU18F,GACrBxM,EAAKknG,EAAMztG,IAAIkgB,EAASiD,IAE5B,GAAK5c,EAAL,CAIA,IAAImpG,EAAWnpG,EAAG+B,OACdqnG,EAAgBD,IAAaN,EAAY,CAC3C/mG,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aACV,CAEF3F,MAAOqnG,EAASH,kBAAoB,EACpCzmG,OAAQ4mG,EAASF,mBAAqB,GAExCvD,EAAWtuC,gBAAgBp3D,EAAI2Z,EAAUyvF,EAAe,KAAM,CAC5Dd,GAAI3uF,EAAS2uF,GACbe,aAAc1vF,EAAS2vF,UAbzB,CAeF,CACF,EAOAZ,OAAQ,WACN,IAAIxB,EAAQ3wG,KAAKgyG,OACjBrB,EAAMnuG,MAAK,SAAUiH,GACnBonG,EAASpnG,EAAIknG,EACf,IACA3wG,KAAKgyG,OAASlwG,EAAO40D,eACvB,EAKApuD,QAAS,WACPtI,KAAKmyG,QACP,G,uBCvVF1wG,EAAQ,OAERA,EAAQ,OAERA,EAAQ,M,wBCJR,IAAIiC,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAEtBA,EAAQ,OAERA,EAAQ,OAGRiC,EAAQ4wE,oBAAoB,CAC1B5xE,KAAM,OACN5C,OAAQ,SAAUgtF,EAAWzqF,GAC3BrC,KAAKqI,MAAMkC,YAEPuiF,EAAU5pF,IAAI,SAChBlD,KAAKqI,MAAMc,IAAI,IAAIvB,EAAQ+C,KAAK,CAC9BV,MAAO6iF,EAAU5nF,iBAAiB4L,UAClCzF,MAAOvJ,EAAOkL,SAAS,CACrBC,KAAM6/E,EAAU5pF,IAAI,oBACnB4pF,EAAU/0E,gBACbtB,QAAQ,EACRrE,IAAK,IAGX,IAEF1O,EAAQ+b,sBAAqB,SAAU5R,GAEjCA,EAAOi5B,OAASj5B,EAAOm5B,QAAUn5B,EAAOgD,OAC1ChD,EAAOgD,KAAO,CAAC,EAEnB,G,iCCjCA,IAAInJ,EAAUjG,EAAQ,OAIlBK,GAFU4F,EAAQC,QAETlG,EAAQ,QAEjBuxG,EAAWvxG,EAAQ,OAEnBmG,EAAUnG,EAAQ,OAElBwxG,EAAmBxxG,EAAQ,MAE3B4gB,EAAa5gB,EAAQ,OAErByF,EAAQpF,EAAOoF,MACf1E,EAAOV,EAAOU,KACdk1B,EAAM51B,EAAO41B,IACb41C,EAAU9mE,KAAKJ,IACfinE,EAAU7mE,KAAKF,IACf4sG,EAAU1sG,KAAK0qE,IACfiiC,EAAU,IACVC,EAAqB,EACrBC,EAAwB,EACxBC,EAAqB,YACrBC,EAAgB,CAClB9wE,EAAG,CAAC,EAAG,GACP/F,EAAG,CAAC,EAAG,GACPsF,EAAG,CAAC,EAAG,GACPwxE,EAAG,CAAC,EAAG,IAELC,EAAa,CACfhxE,EAAG,KACH/F,EAAG,KACHsF,EAAG,KACHwxE,EAAG,KACHE,GAAI,OACJla,GAAI,OACJma,GAAI,OACJC,GAAI,QAEFC,EAAoB,CACtB5kB,WAAY,CACVzhF,UAAW,EACXkJ,OAAQ,kBACRzJ,KAAM,mBAERqkF,eAAe,EACfD,UAAW,SACXnC,eAAe,GAEb4kB,EAAU,EAiBd,SAASvmB,EAAgBhpC,GACvByuD,EAASr7F,KAAK3X,MAMdA,KAAK+zG,IAAMxvD,EAMXvkD,KAAKqI,MAAQ,IAAIT,EAAQwP,MAUzBpX,KAAKg0G,WAQLh0G,KAAKi0G,aAMLj0G,KAAKk0G,QAMLl0G,KAAKm0G,OAAS,GAMdn0G,KAAKg2E,UAMLh2E,KAAKo0G,QAAU,GAMfp0G,KAAKq0G,eAOLr0G,KAAKs0G,eAMLt0G,KAAKu0G,iBAULv0G,KAAKw0G,KAAO,mBAAqBV,IAMjC9zG,KAAKy0G,UAAY,CAAC,EAClBjyG,EAAKkyG,IAAe,SAAUv0B,EAASw0B,GACrC30G,KAAKy0G,UAAUE,GAAa7yG,EAAO2B,KAAK08E,EAASngF,KACnD,GAAGA,KACL,CA6IA,SAAS40G,EAAcr4E,EAAYm1D,GACjC,IAAIntC,EAAKhoB,EAAWw3E,IAEfx3E,EAAWg4E,kBACdtB,EAAiB4B,KAAKtwD,EAAI+uD,EAAoB/2E,EAAWi4E,MAG3DhyG,EAAK+5B,EAAWk4E,WAAW,SAAUt0B,EAASw0B,GAC5CpwD,EAAGjkD,GAAGq0G,EAAWx0B,EACnB,IACA5jD,EAAWy3E,WAAatiB,EAAYxoE,UACpCqT,EAAW03E,aAAenyG,EAAOqwF,MAAMrwF,EAAOyiB,MAAMsvF,GAAoBniB,GAAa,EACvF,CAEA,SAASojB,EAAev4E,GACtB,IAAIgoB,EAAKhoB,EAAWw3E,IACpBd,EAAiB8B,QAAQxwD,EAAI+uD,EAAoB/2E,EAAWi4E,MAC5DhyG,EAAK+5B,EAAWk4E,WAAW,SAAUt0B,EAASw0B,GAC5CpwD,EAAGrtC,IAAIy9F,EAAWx0B,EACpB,IACA5jD,EAAWy3E,WAAaz3E,EAAW03E,aAAe,IACpD,CAEA,SAASe,EAAYz4E,EAAYm1D,GAC/B,IAAIujB,EAAQC,GAAexjB,EAAYxoE,WAAW8rF,YAAYz4E,EAAYm1D,GAI1E,OAHAujB,EAAME,cAAgBzjB,EACtB0jB,EAAQH,EAAOvjB,GACfn1D,EAAWl0B,MAAMc,IAAI8rG,GACdA,CACT,CAEA,SAASI,EAAY94E,EAAY+4E,GAC/B,IAAIC,EAAgBC,EAAiBF,GAOrC,OALIC,EAAcF,cAChBE,EAAcF,YAAY94E,EAAY+4E,GACtCF,EAAQE,EAAeA,EAAcH,gBAGhCG,CACT,CAEA,SAASG,EAAiBl5E,EAAY04E,GACpC,IAAIvjB,EAAcujB,EAAME,cACxBK,EAAiBP,GAAOQ,iBAAiBl5E,EAAY04E,EAAOvjB,EAAYprD,MAAOorD,EACjF,CAEA,SAAS0jB,EAAQH,EAAOvjB,GACtB,IAAInjF,EAAImjF,EAAYnjF,EACf,MAALA,IAAcA,EAAI4kG,GAClB8B,EAAMr7E,UAAS,SAAUnwB,GACvBA,EAAG8E,EAAIA,EACP9E,EAAG2I,GAAK7D,CACV,GACF,CAEA,SAASmnG,EAAyBn5E,EAAY04E,GAC5CO,EAAiBP,GAAOvjG,aAAa6qB,EAAY04E,GACjDQ,EAAiBl5E,EAAY04E,EAC/B,CAEA,SAASO,EAAiBP,GACxB,OAAOC,GAAeD,EAAME,cAAcjsF,UAC5C,CAGA,SAASysF,EAAgBp5E,EAAYG,EAAGk5E,GACtC,IAMIC,EANAC,EAASv5E,EAAW23E,QAExB,IAAK4B,EACH,OAAO,EAIT,IAAIj5E,EAAYN,EAAW2qD,WAI3B,OAHA1kF,EAAKszG,GAAQ,SAAUC,GACrBA,EAAGnnB,iBAAiBlyD,EAAGk5E,EAAkB/4E,KAAeg5E,EAAQE,EAClE,IACOF,CACT,CAGA,SAASG,EAAgBz5E,EAAY04E,GACnC,IAAIa,EAASv5E,EAAW23E,QAExB,IAAK4B,EACH,OAAO,EAGT,IAAIpnB,EAAUumB,EAAME,cAAczmB,QAGlC,OAAkB,MAAXA,GAAkBonB,EAAOpnB,EAClC,CAEA,SAASunB,EAAY15E,GACnB,IAAI25E,EAAS35E,EAAW63E,QACpB+B,EAAiBD,EAAO/hG,OAK5B,OAJA3R,EAAK0zG,GAAQ,SAAUjB,GACrB14E,EAAWl0B,MAAM6B,OAAO+qG,EAC1B,GAAG14E,GACH25E,EAAO/hG,OAAS,IACPgiG,CACX,CAEA,SAASjgG,EAAQqmB,EAAYxrB,GAC3B,IAAI0gF,EAAQ/5D,EAAI6E,EAAW63E,SAAS,SAAUa,GAC5C,IAAIvjB,EAAcujB,EAAME,cACpB7uE,EAAQxkC,EAAOyiB,MAAMmtE,EAAYprD,OACrC,MAAO,CACLpd,UAAWwoE,EAAYxoE,UACvBwlE,QAASgD,EAAYhD,QACrBpoD,MAAOA,EAEX,IACA/J,EAAWrmB,QAAQ,QAASu7E,EAAO,CACjCjC,QAASz+E,EAAIy+E,MACbN,gBAAiBn+E,EAAIm+E,eAEzB,CAEA,SAASknB,EAAgB75E,GACvB,IAAI85E,EAAQ95E,EAAW43E,OAEvB,IAAKkC,EAAMliG,OACT,OAAO,EAGT,IAAIqqB,EAAK63E,EAAMA,EAAMliG,OAAS,GAC1BoqB,EAAK83E,EAAM,GACXrwG,EAAKw4B,EAAG,GAAKD,EAAG,GAChBt4B,EAAKu4B,EAAG,GAAKD,EAAG,GAChB+L,EAAO4oE,EAAQltG,EAAKA,EAAKC,EAAKA,EAAI,IACtC,OAAOqkC,EAAO8oE,CAChB,CAEA,SAASkD,EAAaD,GACpB,IAAI72C,EAAO62C,EAAMliG,OAAS,EAE1B,OADAqrD,EAAO,IAAMA,EAAO,GACb,CAAC62C,EAAM,GAAIA,EAAM72C,GAC1B,CAEA,SAAS+2C,EAAoBC,EAASj6E,EAAYm1D,EAAa+kB,GAC7D,IAAIxB,EAAQ,IAAIrtG,EAAQwP,MA2BxB,OA1BA69F,EAAM9rG,IAAI,IAAIvB,EAAQ+C,KAAK,CACzBnH,KAAM,OACN6H,MAAOqrG,EAAUhlB,GACjBj7E,QAAQ,EACR+hB,WAAW,EACXvgB,OAAQ,OACRs6B,MAAOrrC,EAAMsvG,EAASj6E,EAAY04E,EAAO,QACzCh9B,UAAW/wE,EAAMgP,EAASqmB,EAAY,CACpCizD,OAAO,OAGXhtF,EAAKi0G,GAAW,SAAUjzG,GACxByxG,EAAM9rG,IAAI,IAAIvB,EAAQ+C,KAAK,CACzBnH,KAAMA,EACN6H,MAAO,CACLoB,QAAS,GAEX+rB,WAAW,EACX/hB,QAAQ,EACRoxD,WAAW,EACXt1B,MAAOrrC,EAAMsvG,EAASj6E,EAAY04E,EAAOzxG,GACzCy0E,UAAW/wE,EAAMgP,EAASqmB,EAAY,CACpCizD,OAAO,MAGb,IACOylB,CACT,CAEA,SAAS0B,EAAep6E,EAAY04E,EAAO2B,EAAYllB,GACrD,IAAIlkF,EAAYkkF,EAAYzC,WAAWzhF,WAAa,EAChD4qE,EAAa/K,EAAQ7/D,EAAW6lG,GAChCpnG,EAAI2qG,EAAW,GAAG,GAClB1qG,EAAI0qG,EAAW,GAAG,GAClBC,EAAK5qG,EAAIuB,EAAY,EACrBspG,EAAK5qG,EAAIsB,EAAY,EACrByhB,EAAK2nF,EAAW,GAAG,GACnBznF,EAAKynF,EAAW,GAAG,GACnBG,EAAM9nF,EAAKmpD,EAAa5qE,EAAY,EACpCwpG,EAAM7nF,EAAKipD,EAAa5qE,EAAY,EACpCjC,EAAQ0jB,EAAKhjB,EACbD,EAASmjB,EAAKjjB,EACd+qG,EAAS1rG,EAAQiC,EACjB0pG,EAAUlrG,EAASwB,EACvB2pG,EAAgB56E,EAAY04E,EAAO,OAAQhpG,EAAGC,EAAGX,EAAOS,GAEpD0lF,EAAYJ,gBACd6lB,EAAgB56E,EAAY04E,EAAO,IAAK4B,EAAIC,EAAI1+B,EAAY8+B,GAC5DC,EAAgB56E,EAAY04E,EAAO,IAAK8B,EAAKD,EAAI1+B,EAAY8+B,GAC7DC,EAAgB56E,EAAY04E,EAAO,IAAK4B,EAAIC,EAAIG,EAAQ7+B,GACxD++B,EAAgB56E,EAAY04E,EAAO,IAAK4B,EAAIG,EAAKC,EAAQ7+B,GACzD++B,EAAgB56E,EAAY04E,EAAO,KAAM4B,EAAIC,EAAI1+B,EAAYA,GAC7D++B,EAAgB56E,EAAY04E,EAAO,KAAM8B,EAAKD,EAAI1+B,EAAYA,GAC9D++B,EAAgB56E,EAAY04E,EAAO,KAAM4B,EAAIG,EAAK5+B,EAAYA,GAC9D++B,EAAgB56E,EAAY04E,EAAO,KAAM8B,EAAKC,EAAK5+B,EAAYA,GAEnE,CAEA,SAAS1mE,EAAa6qB,EAAY04E,GAChC,IAAIvjB,EAAcujB,EAAME,cACpB7jB,EAAgBI,EAAYJ,cAC5B8lB,EAASnC,EAAM95F,QAAQ,GAC3Bi8F,EAAOrqG,SAAS2pG,EAAUhlB,IAC1B0lB,EAAOhqG,KAAK,CACVqJ,QAAS66E,EACTr5E,OAAQq5E,EAAgB,OAAS,YAEnC9uF,EAAK,CAAC,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,KAAM,OAAO,SAAUgB,GAC3D,IAAIiG,EAAKwrG,EAAM3lE,YAAY9rC,GACvB6zG,EAAYC,EAAmB/6E,EAAY/4B,GAC/CiG,GAAMA,EAAG2D,KAAK,CACZqJ,QAAS66E,EACTzpB,WAAYypB,EACZr5E,OAAQq5E,EAAgBmiB,EAAW4D,GAAa,UAAY,MAEhE,GACF,CAEA,SAASF,EAAgB56E,EAAY04E,EAAOzxG,EAAMyI,EAAGC,EAAGu2B,EAAG80E,GACzD,IAAI9tG,EAAKwrG,EAAM3lE,YAAY9rC,GAC3BiG,GAAMA,EAAGqD,SAAS0qG,EAAaC,EAAYl7E,EAAY04E,EAAO,CAAC,CAAChpG,EAAGC,GAAI,CAACD,EAAIw2B,EAAGv2B,EAAIqrG,MACrF,CAEA,SAASb,EAAUhlB,GACjB,OAAO5vF,EAAOkL,SAAS,CACrBmI,eAAe,GACdu8E,EAAYzC,WACjB,CAEA,SAASyoB,EAAgBzrG,EAAGC,EAAG+iB,EAAIE,GACjC,IAAI/oB,EAAM,CAACknE,EAAQrhE,EAAGgjB,GAAKq+C,EAAQphE,EAAGijB,IAClC7oB,EAAM,CAAC+mE,EAAQphE,EAAGgjB,GAAKo+C,EAAQnhE,EAAGijB,IACtC,MAAO,CAAC,CAAC/oB,EAAI,GAAIE,EAAI,IACrB,CAACF,EAAI,GAAIE,EAAI,IAEf,CAEA,SAASilG,EAAahvE,GACpB,OAAO30B,EAAQ2jG,aAAahvE,EAAWl0B,MACzC,CAEA,SAASivG,EAAmB/6E,EAAYo7E,GACtC,GAAIA,EAAexjG,OAAS,EAAG,CAC7BwjG,EAAiBA,EAAe91E,MAAM,IACtC,IAAIw1E,EAAY,CAACC,EAAmB/6E,EAAYo7E,EAAe,IAAKL,EAAmB/6E,EAAYo7E,EAAe,KAElH,OADkB,MAAjBN,EAAU,IAA+B,MAAjBA,EAAU,KAAeA,EAAU7jG,UACrD6jG,EAAU9/F,KAAK,GACxB,CACE,IAAImgB,EAAM,CACR+K,EAAG,OACH/F,EAAG,QACHsF,EAAG,MACHwxE,EAAG,UAEDoE,EAAa,CACfxsF,KAAM,IACNE,MAAO,IACPD,IAAK,IACLE,OAAQ,KAEN8rF,EAAYzvG,EAAQ4jG,mBAAmB9zE,EAAIigF,GAAiBpM,EAAahvE,IAC7E,OAAOq7E,EAAWP,EAEtB,CAEA,SAASQ,EAAUC,EAAaC,EAAex7E,EAAY04E,EAAOzxG,EAAMwC,EAAIC,EAAIy2B,GAC9E,IAAIg1D,EAAcujB,EAAME,cACpB6C,EAAYF,EAAYpmB,EAAYprD,OACpC2xE,EAAaC,EAAa37E,EAAYv2B,EAAIC,GAC9CzD,EAAKgB,EAAKq+B,MAAM,KAAK,SAAUs2E,GAC7B,IAAIC,EAAM7E,EAAc4E,GACxBH,EAAUI,EAAI,IAAIA,EAAI,KAAOH,EAAWG,EAAI,GAC9C,IACA1mB,EAAYprD,MAAQyxE,EAAcL,EAAgBM,EAAU,GAAG,GAAIA,EAAU,GAAG,GAAIA,EAAU,GAAG,GAAIA,EAAU,GAAG,KAClHtC,EAAyBn5E,EAAY04E,GACrC/+F,EAAQqmB,EAAY,CAClBizD,OAAO,GAEX,CAEA,SAAS6oB,EAAa97E,EAAY04E,EAAOjvG,EAAIC,EAAIy2B,GAC/C,IAAI4J,EAAQ2uE,EAAME,cAAc7uE,MAC5B2xE,EAAaC,EAAa37E,EAAYv2B,EAAIC,GAC9CzD,EAAK8jC,GAAO,SAAUxgC,GACpBA,EAAM,IAAMmyG,EAAW,GACvBnyG,EAAM,IAAMmyG,EAAW,EACzB,IACAvC,EAAyBn5E,EAAY04E,GACrC/+F,EAAQqmB,EAAY,CAClBizD,OAAO,GAEX,CAEA,SAAS0oB,EAAa37E,EAAYv2B,EAAIC,GACpC,IAAIk6D,EAAY5jC,EAAWl0B,MACvBiwG,EAASn4C,EAAUsJ,sBAAsBzjE,EAAIC,GAC7CsyG,EAAYp4C,EAAUsJ,sBAAsB,EAAG,GACnD,MAAO,CAAC6uC,EAAO,GAAKC,EAAU,GAAID,EAAO,GAAKC,EAAU,GAC1D,CAEA,SAASd,EAAYl7E,EAAY04E,EAAOr0G,GACtC,IAAIi1G,EAAQG,EAAgBz5E,EAAY04E,GACxC,OAAOY,IAAmB,IAAVA,EAAiBA,EAAMj/F,SAAShW,EAAM27B,EAAW2qD,YAAcplF,EAAOyiB,MAAM3jB,EAC9F,CAEA,SAAS42G,EAAa7qF,GACpB,IAAI6rF,EAAOlrC,EAAQ3gD,EAAO,GAAG,GAAIA,EAAO,GAAG,IACvC8rF,EAAOnrC,EAAQ3gD,EAAO,GAAG,GAAIA,EAAO,GAAG,IACvC+rF,EAAOrrC,EAAQ1gD,EAAO,GAAG,GAAIA,EAAO,GAAG,IACvCgsF,EAAOtrC,EAAQ1gD,EAAO,GAAG,GAAIA,EAAO,GAAG,IAC3C,MAAO,CACL1gB,EAAGusG,EACHtsG,EAAGusG,EACHltG,MAAOmtG,EAAOF,EACdxsG,OAAQ2sG,EAAOF,EAEnB,CAEA,SAASG,EAAYr8E,EAAYG,EAAGk5E,GAElC,GAAKr5E,EAAWy3E,WAAhB,CAIA,IAAIzvD,EAAKhoB,EAAWw3E,IAChBmC,EAAS35E,EAAW63E,QACpByE,EAAYlD,EAAgBp5E,EAAYG,EAAGk5E,GAE/C,IAAKr5E,EAAWy5C,UACd,IAAK,IAAI//D,EAAI,EAAGA,EAAIigG,EAAO/hG,OAAQ8B,IAAK,CACtC,IAAIy7E,EAAcwkB,EAAOjgG,GAAGk/F,cAE5B,GAAI0D,KAA4B,IAAdA,GAAsBnnB,EAAYhD,UAAYmqB,EAAUnqB,UAAYwmB,GAAexjB,EAAYxoE,WAAW4T,QAAQo5E,EAAOjgG,GAAI2/F,EAAiB,GAAIA,EAAiB,IAEnL,MAEJ,CAGFiD,GAAat0D,EAAGu0D,eAAe,YAjB/B,CAkBF,CAEA,SAASC,EAAer8E,GACtB,IAAIs8E,EAAOt8E,EAAE53B,MACbk0G,EAAKD,gBAAkBC,EAAKD,gBAC9B,CAEA,SAASE,EAAiBhE,EAAOhpG,EAAGC,GAClC,OAAO+oG,EAAM3lE,YAAY,QAAQxS,QAAQ7wB,EAAGC,EAC9C,CAEA,SAASgtG,GAAmB38E,EAAYG,EAAGk5E,EAAkBpmB,GAC3D,IAGI2pB,EAHA7D,EAAgB/4E,EAAW83E,eAC3BwB,EAAQt5E,EAAW+3E,eACnB8E,EAAkB78E,EAAW03E,aAKjC,GAFA13E,EAAW43E,OAAOnzG,KAAK40G,EAAiB5yG,SAEpCozG,EAAgB75E,IAAe+4E,EAAe,CAChD,GAAIO,IAAUP,EAAe,CACG,WAA9B8D,EAAgB/nB,WAA0B4kB,EAAY15E,GACtD,IAAIm1D,EAAc5vF,EAAOyiB,MAAM60F,GAC/B1nB,EAAYxoE,UAAYmwF,GAAmB3nB,EAAYxoE,UAAW2sF,GAClEnkB,EAAYhD,SAAoB,IAAVmnB,EAAiB,KAAOA,EAAMnnB,QACpD4mB,EAAgB/4E,EAAW83E,eAAiBW,EAAYz4E,EAAYm1D,GAEpEn1D,EAAW63E,QAAQpzG,KAAKs0G,EAC1B,CAEA,GAAIA,EAAe,CACjB,IAAIC,EAAgBL,GAAemE,GAAmB98E,EAAWy3E,WAAY6B,IACzEyD,EAAmBhE,EAAcH,cACrCmE,EAAiBhzE,MAAQivE,EAAcgE,iBAAiB9B,EAAYl7E,EAAY+4E,EAAe/4E,EAAW43E,SAEtG3kB,IACF6lB,EAAY94E,EAAY+4E,GACxBC,EAAc7jG,aAAa6qB,EAAY+4E,IAGzCG,EAAiBl5E,EAAY+4E,GAC7B6D,EAAc,CACZ3pB,MAAOA,EAEX,CACF,MAAWA,GAAuC,WAA9B4pB,EAAgB/nB,WAA0B+nB,EAAgBlqB,eAMxEymB,EAAgBp5E,EAAYG,EAAGk5E,IAAqBK,EAAY15E,KAClE48E,EAAc,CACZ3pB,MAAOA,EACPN,eAAe,IAKrB,OAAOiqB,CACT,CAEA,SAASE,GAAmBnwF,EAAW2sF,GACrC,MAAkB,SAAd3sF,EACK2sF,EAAM2D,iBAGRtwF,CACT,CAviBAqkE,EAAgBrrF,UAAY,CAC1BC,YAAaorF,EAmBbyB,YAAa,SAAU0C,GAGrB,OAFA1xF,KAAKg0G,YAAcc,EAAe90G,MAClC0xF,EAAYxoE,WAAa0rF,EAAc50G,KAAM0xF,GACtC1xF,IACT,EAYAyuF,UAAW,SAAUgrB,GACnB,GAAIA,GAAaA,EAAUtlG,OAAQ,CACjC,IAAI2hG,EAAS91G,KAAKk0G,QAAU,CAAC,EAC7BpyG,EAAOU,KAAKi3G,GAAW,SAAUA,GAC/B3D,EAAO2D,EAAU/qB,SAAW5sF,EAAOyiB,MAAMk1F,EAC3C,GACF,MACEz5G,KAAKk0G,QAAU,KAGjB,OAAOl0G,IACT,EAMAuuF,MAAO,SAAUx9E,GACfA,EAAMA,GAAO,CAAC,EACd/Q,KAAKu0G,iBAAmBxjG,EAAIy9E,gBAC5B,IAAIruB,EAAYngE,KAAKqI,MAUrB,OARArI,KAAK+zG,IAAI5qG,IAAIg3D,GAEbA,EAAU/yD,KAAK,CACb1G,SAAUqK,EAAIrK,UAAY,CAAC,EAAG,GAC9BuL,SAAUlB,EAAIkB,UAAY,EAC1BxL,MAAOsK,EAAItK,OAAS,CAAC,EAAG,KAE1BzG,KAAKknF,WAAa/mB,EAAU2qB,oBACrB9qF,IACT,EACA05G,UAAW,SAAUliG,EAAIC,GACvBjV,EAAKxC,KAAKo0G,QAAS58F,EAAIC,EACzB,EAeA22E,aAAc,SAAUurB,GACtBA,EAAkB73G,EAAO41B,IAAIiiF,GAAiB,SAAUjoB,GACtD,OAAO5vF,EAAOqwF,MAAMrwF,EAAOyiB,MAAMsvF,GAAoBniB,GAAa,EACpE,IACA,IAAIkoB,EAAc,kBACdC,EAAY75G,KAAKo0G,QACjB0F,EAAY95G,KAAKo0G,QAAU,GAC3B73E,EAAav8B,KACbs1G,EAAgBt1G,KAAKq0G,eAEzB,OADA,IAAIhyF,EAAWw3F,EAAWF,EAAiBI,EAAW5xF,GAAQhf,IAAI6wG,GAAan3G,OAAOm3G,GAAa9vG,OAAOA,GAAQG,UAC3GrK,KAEP,SAASmoB,EAAOupE,EAAaphF,GAC3B,OAA0B,MAAlBohF,EAAYrrE,GAAaqrE,EAAYrrE,GAAKuzF,EAActpG,GAAS,IAAMohF,EAAYxoE,SAC7F,CAEA,SAAS6wF,EAAU9E,EAAO3kG,GACxB,OAAO6X,EAAO8sF,EAAME,cAAe7kG,EACrC,CAEA,SAAS0pG,EAAYnwG,EAAUC,GAC7B,IAAImwG,EAAiBN,EAAgB9vG,GAGrC,GAAgB,MAAZC,GAAoB+vG,EAAU/vG,KAAcwrG,EAC9CwE,EAAUjwG,GAAYgwG,EAAU/vG,OAC3B,CACL,IAAImrG,EAAQ6E,EAAUjwG,GAAwB,MAAZC,GAAoB+vG,EAAU/vG,GAAUqrG,cAAgB8E,EAAgBJ,EAAU/vG,IAAaurG,EAAY94E,EAAYy4E,EAAYz4E,EAAY09E,IACjLvE,EAAyBn5E,EAAY04E,EACvC,CACF,CAEA,SAAS/qG,EAAOJ,GACV+vG,EAAU/vG,KAAcwrG,GAC1B/4E,EAAWl0B,MAAM6B,OAAO2vG,EAAU/vG,GAEtC,CACF,EACAowG,QAAS,WAOP,OANAl6G,KAAKgvF,aAAY,GAEjBinB,EAAYj2G,MAEZA,KAAK+zG,IAAI7pG,OAAOlK,KAAKqI,OAEdrI,IACT,EACAsI,QAAS,WACPtI,KAAKk6G,UACLl6G,KAAKkX,KACP,GAEFpV,EAAO0Y,MAAM+yE,EAAiBylB,GAga9B,IAAI0B,GAAgB,CAClByF,UAAW,SAAUz9E,GACnB,GAAI18B,KAAKg2E,UAGPokC,GAAcziG,KAAK3X,KAAM08B,QACpB,IAAKA,EAAE5mB,SAAW4mB,EAAE5mB,OAAO0iB,UAAW,CAC3CugF,EAAer8E,GACf,IAAIk5E,EAAmB51G,KAAKqI,MAAMohE,sBAAsB/sC,EAAEoR,QAASpR,EAAEqR,SACrE/tC,KAAKq0G,eAAiB,KACtB,IAAIwB,EAAQ71G,KAAKs0G,eAAiBqB,EAAgB31G,KAAM08B,EAAGk5E,GAEvDC,IACF71G,KAAKg2E,WAAY,EACjBh2E,KAAKm0G,OAAS,CAACyB,EAAiB5yG,SAEpC,CACF,EACAq3G,UAAW,SAAU39E,GACnB,IAAIk5E,EAAmB51G,KAAKqI,MAAMohE,sBAAsB/sC,EAAEoR,QAASpR,EAAEqR,SAGrE,GAFA6qE,EAAY54G,KAAM08B,EAAGk5E,GAEjB51G,KAAKg2E,UAAW,CAClB+iC,EAAer8E,GACf,IAAIy8E,EAAcD,GAAmBl5G,KAAM08B,EAAGk5E,GAAkB,GAChEuD,GAAejjG,EAAQlW,KAAMm5G,EAC/B,CACF,EACAmB,QAASF,IAOX,SAASA,GAAc19E,GACrB,GAAI18B,KAAKg2E,UAAW,CAClB+iC,EAAer8E,GACf,IAAIk5E,EAAmB51G,KAAKqI,MAAMohE,sBAAsB/sC,EAAEoR,QAASpR,EAAEqR,SACjEorE,EAAcD,GAAmBl5G,KAAM08B,EAAGk5E,GAAkB,GAChE51G,KAAKg2E,WAAY,EACjBh2E,KAAKm0G,OAAS,GACdn0G,KAAKq0G,eAAiB,KAEtB8E,GAAejjG,EAAQlW,KAAMm5G,EAC/B,CACF,CAOA,IAAIjE,GAAiB,CACnBthB,MAAO2mB,GAAgB,GACvBzmB,MAAOymB,GAAgB,GACvB7vG,KAAM,CACJsqG,YAAa,SAAUz4E,EAAYm1D,GACjC,OAAO6kB,EAAoBrvG,EAAM2wG,GAAW,SAAUvxE,GACpD,OAAOA,CACT,IAAG,SAAUA,GACX,OAAOA,CACT,IAAI/J,EAAYm1D,EAAa,CAAC,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,KAAM,MACtE,EACA6nB,iBAAkB,SAAUiB,GAC1B,IAAInmE,EAAOiiE,EAAakE,GACxB,OAAO9C,EAAgBrjE,EAAK,GAAG,GAAIA,EAAK,GAAG,GAAIA,EAAK,GAAG,GAAIA,EAAK,GAAG,GACrE,EACAohE,iBAAkB,SAAUl5E,EAAY04E,EAAO2B,EAAYllB,GACzDilB,EAAep6E,EAAY04E,EAAO2B,EAAYllB,EAChD,EACAhgF,aAAcA,EACdorB,QAASm8E,GAEXltF,QAAS,CACPipF,YAAa,SAAUz4E,EAAYm1D,GACjC,IAAIujB,EAAQ,IAAIrtG,EAAQwP,MAQxB,OALA69F,EAAM9rG,IAAI,IAAIvB,EAAQqkB,SAAS,CAC7BzoB,KAAM,OACN6H,MAAOqrG,EAAUhlB,GACjBj7E,QAAQ,KAEHw+F,CACT,EACAsE,iBAAkB,SAAUiB,GAC1B,OAAOA,CACT,EACAnF,YAAa,SAAU94E,EAAY04E,GACjCA,EAAM/qG,OAAO+qG,EAAM95F,QAAQ,IAE3B85F,EAAM9rG,IAAI,IAAIvB,EAAQokB,QAAQ,CAC5BxoB,KAAM,OACNg1B,WAAW,EACX+Z,MAAOrrC,EAAMmxG,EAAc97E,EAAY04E,GACvCh9B,UAAW/wE,EAAMgP,EAASqmB,EAAY,CACpCizD,OAAO,MAGb,EACAimB,iBAAkB,SAAUl5E,EAAY04E,EAAO2B,EAAYllB,GACzDujB,EAAM95F,QAAQ,GAAGrO,SAAS,CACxB6f,OAAQ8qF,EAAYl7E,EAAY04E,EAAO2B,IAE3C,EACAllG,aAAcA,EACdorB,QAASm8E,IAIb,SAASsB,GAAgBtmB,GACvB,MAAO,CACL+gB,YAAa,SAAUz4E,EAAYm1D,GACjC,OAAO6kB,EAAoBrvG,EAAM2wG,GAAW,SAAUvxE,GACpD,IAAI0xE,EAAY,CAAC1xE,EAAO,CAAC,EAAG,MAE5B,OADA2tD,GAAW+jB,EAAUxkG,UACdwkG,CACT,IAAG,SAAUA,GACX,OAAOA,EAAU/jB,EACnB,IAAI13D,EAAYm1D,EAAa,CAAC,CAAC,IAAK,KAAM,CAAC,IAAK,MAAMuC,GACxD,EACAslB,iBAAkB,SAAUiB,GAC1B,IAAInmE,EAAOiiE,EAAakE,GACpBp0G,EAAMknE,EAAQj5B,EAAK,GAAG4/C,GAAU5/C,EAAK,GAAG4/C,IACxC3tF,EAAM+mE,EAAQh5B,EAAK,GAAG4/C,GAAU5/C,EAAK,GAAG4/C,IAC5C,MAAO,CAAC7tF,EAAKE,EACf,EACAmvG,iBAAkB,SAAUl5E,EAAY04E,EAAO2B,EAAYllB,GACzD,IAAIrY,EAEAw8B,EAAQG,EAAgBz5E,EAAY04E,GAExC,IAAc,IAAVY,GAAkBA,EAAM/mB,0BAC1BzV,EAAcw8B,EAAM/mB,0BAA0BmF,EAAS13D,EAAW2qD,gBAC7D,CACL,IAAI3iC,EAAKhoB,EAAWw3E,IACpB16B,EAAc,CAAC,EAAG,CAAC90B,EAAGtzC,WAAYszC,EAAGrzC,aAAa,EAAI+iF,GACxD,CAEA,IAAI+jB,EAAY,CAACpB,EAAYv9B,GAC7B4a,GAAW+jB,EAAUxkG,UACrBmjG,EAAep6E,EAAY04E,EAAO+C,EAAWtmB,EAC/C,EACAhgF,aAAcA,EACdorB,QAASm8E,EAEb,CAEA,IAAI91G,GAAWoqF,EACfnqF,EAAOvB,QAAUsB,E,iCCl2BjB,IAAIuE,EAAUjG,EAAQ,OAIlBK,GAFU4F,EAAQC,QAETlG,EAAQ,QAEjBmG,EAAUnG,EAAQ,OAElB84C,EAAY94C,EAAQ,OAEpB+rF,EAAc/rF,EAAQ,OAEtBe,EAAOV,EAAOU,KACd2Z,EAAUra,EAAOqa,QACjBjV,EAAQpF,EAAOoF,MACfuzG,EAAiB,CAAC,cAAe,eAGjCC,EAA4B,CAAC,OAAQ,QAAS,QAAS,MAAO,QAAS,QAAS,aAAc,YAAa,QA4D/G,SAASplB,EAAmBznF,EAAQxL,EAAS0O,GAK3C,IAAI4pG,EAAiB36G,KAAK46G,gBAAkB,GACxChrC,EAAO,CAAC,EACRirC,EAAYC,EAAYz4G,EAASwL,GACrCrL,EAAKu4G,GAAoB,SAAUC,EAASt4G,KACrCqO,IAAQA,EAAIkqG,SAAW9+F,EAAQpL,EAAIkqG,QAASv4G,IAAS,IACxDs4G,EAAQH,EAAWF,EAAgB/qC,EAEvC,GACF,CAEA,IAAIsrC,EAAQ5lB,EAAmBpzF,UA6G/B,SAASi5G,EAAa/iB,GAEpB,OADAA,EAAO,GAAKA,EAAO,IAAMA,EAAO5kF,UACzB4kF,CACT,CAEA,SAAS0iB,EAAYz4G,EAASwL,GAC5B,OAAO0sC,EAAUugE,YAAYz4G,EAASwL,EAAQ,CAC5CutG,iBAAkBV,GAEtB,CApHAQ,EAAMzoB,gBAAkB,SAAUhB,EAAOpvF,GACvCrC,KAAKq7G,kBAAkB5pB,EAAOpvF,GAAS,SAAUmsE,EAAM8sC,EAAYx4G,GAGjE,IAFC0rE,EAAK+sC,cAAgB/sC,EAAK+sC,YAAc,KAAKv6G,KAAKs6G,IAE9C9sC,EAAK8sC,WAAY,CACpB9sC,EAAK8sC,WAAaA,EAMlB,IAAIr/F,EAASu/F,EAAahtC,EAAKtlD,WAAW,EAAGpmB,EAAUw4G,GACvD9sC,EAAKitC,cAAgB,CACnBxtG,OAAQytG,EAAcltC,EAAKtlD,WAAWjN,EAAO43C,OAAQ2a,EAAKloC,MAAO,CAAC,EAAG,IACrEq1E,SAAU1/F,EAAO0/F,SAErB,CACF,GACF,EAEAT,EAAMG,kBAAoB,SAAU5pB,EAAOpvF,EAASmV,GAClDhV,EAAKivF,GAAO,SAAUjjB,GACpB,IAAIpJ,EAAaplE,KAAK47G,eAAeptC,EAAMnsE,GAEvC+iE,IAA6B,IAAfA,GAChBtjE,EAAOU,KAAK4iE,EAAWy2C,YAAY,SAAU/4G,GAC3C,IAAImZ,EAASu/F,EAAahtC,EAAKtlD,WAAW,EAAGpmB,EAAU0rE,EAAKloC,OAC5D9uB,EAAGg3D,EAAMvyD,EAAO43C,OAAQ/wD,EAAUT,EACpC,GAEJ,GAAGrC,KACL,EAEAk7G,EAAMpkB,eAAiB,SAAUrF,EAAOpvF,GACtCG,EAAKivF,GAAO,SAAUjjB,GACpB,IAAIpJ,EAAaplE,KAAK47G,eAAeptC,EAAMnsE,GAG3C,GAFAmsE,EAAKloC,MAAQkoC,EAAKloC,OAAS,GAEvB8+B,IAA6B,IAAfA,EAAqB,CACrCoJ,EAAKkgB,QAAUtpB,EAAWspB,QAO1B,IAAIzyE,EAASu/F,EAAahtC,EAAKtlD,WAAW,EAAGk8C,EAAWtiE,SAAU0rE,EAAK8sC,YACnEQ,EAActtC,EAAKitC,cACvBjtC,EAAKloC,MAAQw1E,EAAcJ,EAAcltC,EAAKtlD,WAAWjN,EAAO43C,OAAQioD,EAAY7tG,OAAQ8tG,EAAU9/F,EAAO0/F,SAAUG,EAAYH,WAAa1/F,EAAO43C,MACzJ,CACF,GAAG7zD,KACL,EAEAk7G,EAAMtoB,cAAgB,SAAUtwF,EAAK05G,GACnC,OAAOl6G,EAAO41B,IAAI13B,KAAK46G,iBAAiB,SAAUx1C,GAChD,IAAI16D,EAAO06D,EAAW62C,eACtB,MAAO,CACLvtB,QAAStpB,EAAWspB,QACpB8qB,iBAAkBwC,GAAuBA,EAAoB52C,GAC7DxuD,SAAU42E,EAAYmB,sBAAsBjkF,GAC5CkkF,iBAAkBpB,EAAYqB,yBAAyBnkF,EAAMpI,EAAK8iE,EAAWsZ,eAC7EoQ,0BAA2BtB,EAAYuB,2BAA2BrkF,GAEtE,GACF,EAEAwwG,EAAMnjB,cAAgB,SAAUvpB,EAAMnqE,EAAahC,GAGjD,IAAI+iE,EAAaplE,KAAK47G,eAAeptC,EAAMnsE,GAC3C,OAAsB,IAAf+iE,GAAuBA,GAAcjpD,EAAQipD,EAAWy2C,WAAYx3G,EAAYa,mBAAqB,CAC9G,EAYAg2G,EAAMU,eAAiB,SAAUptC,EAAMnsE,GAIrC,IAHA,IAAIs4G,EAAiB36G,KAAK46G,gBACtBC,EAAYC,EAAYz4G,EAASmsE,GAE5Bv4D,EAAI,EAAGA,EAAI0kG,EAAexmG,OAAQ8B,IAAK,CAC9C,IAAImvD,EAAau1C,EAAe1kG,GAC5BimG,EAAc1tC,EAAKkgB,QAEvB,GAAIwtB,GACF,GAAI92C,EAAWspB,UAAYwtB,EACzB,OAAO92C,OAGT,IAASnvD,EAAI,EAAGA,EAAIkmG,EAAmBhoG,OAAQ8B,IAC7C,GAAIkmG,EAAmBlmG,GAAG4kG,EAAWz1C,GACnC,OAAOA,CAIf,CAEA,OAAO,CACT,EAaA,IAAI21C,EAAqB,CACvBlqG,KAAM,SAAUgqG,EAAWF,GACzB,IAAIyB,EAAcvB,EAAUuB,YACxBC,EAAcxB,EAAUwB,YACxBC,EAAazB,EAAUyB,WAEvBC,EAAez6G,EAAO40D,gBACtB8lD,EAAW,CAAC,EACZC,EAAW,CAAC,GAEXL,GAAgBC,GAAgBC,KAIrC95G,EAAK45G,GAAa,SAAUxyD,GAC1B,IAAIkjC,EAAYljC,EAAUn2C,KAAK5C,KAAKolB,MACpCsmF,EAAalhG,IAAIyxE,EAAUzmE,GAAIymE,GAC/B0vB,EAAS1vB,EAAUzmE,KAAM,CAC3B,IACA7jB,EAAK65G,GAAa,SAAUzyD,GAC1B,IAAIkjC,EAAYljC,EAAUn2C,KAAK5C,KAAKolB,MACpCsmF,EAAalhG,IAAIyxE,EAAUzmE,GAAIymE,GAC/B2vB,EAAS3vB,EAAUzmE,KAAM,CAC3B,IACA7jB,EAAK85G,GAAY,SAAUxvB,GACzByvB,EAAalhG,IAAIyxE,EAAUzmE,GAAIymE,GAC/B0vB,EAAS1vB,EAAUzmE,KAAM,EACzBo2F,EAAS3vB,EAAUzmE,KAAM,CAC3B,IACAk2F,EAAa/5G,MAAK,SAAUsqF,GAC1B,IAAIj8E,EAAOi8E,EAAU5nF,iBACjBw3G,EAAa,GACjBl6G,EAAKqO,EAAK8rG,iBAAiB,SAAUhsG,EAAWL,IAC1C6L,EAAQigG,EAAazrG,EAAUo2B,QAAQ,KAAK9Q,QAAU,GAAK9Z,EAAQkgG,EAAa1rG,EAAUo2B,QAAQ,KAAK9Q,QAAU,IACnHymF,EAAW17G,KAAK2P,EAEpB,IACAgqG,EAAe35G,KAAK,CAClB0tF,QAAS,SAAW5B,EAAUzmE,GAC9BymE,UAAWA,EACXpO,cAAeoO,EAEfhqF,SAAU45G,EAAW,GACrBb,WAAYa,EACZT,aAAcW,EAAiB/rG,KAC/BgsG,cAAeL,EAAS1vB,EAAUzmE,IAClCy2F,cAAeL,EAAS3vB,EAAUzmE,KAEtC,IACF,EACAphB,IAAK,SAAU41G,EAAWF,GACxBn4G,EAAKq4G,EAAUkC,WAAW,SAAU9N,GAClC,IAAInsG,EAAWmsG,EAAS/pG,iBACxBy1G,EAAe35G,KAAK,CAClB0tF,QAAS,QAAUugB,EAAS5oF,GAC5B4oF,SAAUA,EACVvwB,cAAeuwB,EACfnsG,SAAUA,EACV+4G,WAAY,CAAC/4G,GACbm5G,aAAcW,EAAiB33G,KAEnC,GACF,GAEEk3G,EAAqB,CACzB,SAAUtB,EAAWz1C,GACnB,IAAI9tB,EAAaujE,EAAUvjE,WACvBC,EAAasjE,EAAUtjE,WACvBu1C,EAAY+tB,EAAU/tB,UAG1B,OAFCA,GAAax1C,IAAew1C,EAAYx1C,EAAW7jC,KAAK5C,KAAKolB,QAC7D62D,GAAav1C,IAAeu1C,EAAYv1C,EAAW9jC,KAAK5C,KAAKolB,OACvD62D,GAAaA,IAAc1nB,EAAW0nB,SAC/C,EACA,SAAU+tB,EAAWz1C,GACnB,IAAI6pC,EAAW4L,EAAU5L,SACzB,OAAOA,GAAYA,IAAa7pC,EAAW6pC,QAC7C,GACI2N,EAAmB,CACrB/rG,KAAM,WAEJ,OAAO7Q,KAAK8C,SAAS+N,KAAKC,UAAUyT,OACtC,EACAtf,IAAK,WACH,IAAInC,EAAW9C,KAAK8C,SAChB4H,EAAO5H,EAAS65B,kBAAkBpY,QAGtC,OADA7Z,EAAKkyB,eAAeh1B,EAAQ2jG,aAAazoG,IAClC4H,CACT,GAEE8wG,EAAe,CACjB5nB,MAAO1sF,EAAM81G,EAAa,GAC1BlpB,MAAO5sF,EAAM81G,EAAa,GAC1BtyG,KAAM,SAAUuyG,EAAIn6G,EAAUo6G,GAC5B,IAAIC,EAAWr6G,EAAS23G,EAAewC,IAAK,CAACC,EAAkB,GAAG,GAAIA,EAAkB,GAAG,KACvFE,EAAWt6G,EAAS23G,EAAewC,IAAK,CAACC,EAAkB,GAAG,GAAIA,EAAkB,GAAG,KACvFrpD,EAAS,CAACsnD,EAAa,CAACgC,EAAS,GAAIC,EAAS,KAAMjC,EAAa,CAACgC,EAAS,GAAIC,EAAS,MAC5F,MAAO,CACLvpD,OAAQA,EACR8nD,SAAU9nD,EAEd,EACA9nC,QAAS,SAAUkxF,EAAIn6G,EAAUo6G,GAC/B,IAAIvB,EAAW,CAAC,CAACp1G,KAAWA,KAAW,CAACA,KAAWA,MAC/CstD,EAAS/xD,EAAO41B,IAAIwlF,GAAmB,SAAU50F,GACnD,IAAIlK,EAAItb,EAAS23G,EAAewC,IAAK30F,GAKrC,OAJAqzF,EAAS,GAAG,GAAKn1G,KAAKJ,IAAIu1G,EAAS,GAAG,GAAIv9F,EAAE,IAC5Cu9F,EAAS,GAAG,GAAKn1G,KAAKJ,IAAIu1G,EAAS,GAAG,GAAIv9F,EAAE,IAC5Cu9F,EAAS,GAAG,GAAKn1G,KAAKF,IAAIq1G,EAAS,GAAG,GAAIv9F,EAAE,IAC5Cu9F,EAAS,GAAG,GAAKn1G,KAAKF,IAAIq1G,EAAS,GAAG,GAAIv9F,EAAE,IACrCA,CACT,IACA,MAAO,CACLy1C,OAAQA,EACR8nD,SAAUA,EAEd,GAGF,SAASqB,EAAYK,EAAeJ,EAAIn6G,EAAUo6G,GAChD,IAAIzpG,EAAO3Q,EAASikC,QAAQ,CAAC,IAAK,KAAKs2E,IACnCxpD,EAASsnD,EAAar5G,EAAO41B,IAAI,CAAC,EAAG,IAAI,SAAUzhB,GACrD,OAAOgnG,EAAKxpG,EAAK67E,YAAY77E,EAAK6pG,aAAaJ,EAAkBjnG,KAAOxC,EAAKN,cAAcM,EAAKL,YAAY8pG,EAAkBjnG,IAChI,KACI0lG,EAAW,GAGf,OAFAA,EAAS0B,GAAiBxpD,EAC1B8nD,EAAS,EAAI0B,GAAiB,CAACjvG,IAAKA,KAC7B,CACLylD,OAAQA,EACR8nD,SAAUA,EAEd,CAEA,IAAID,EAAgB,CAClB9nB,MAAO1sF,EAAMq2G,EAAmB,GAChCzpB,MAAO5sF,EAAMq2G,EAAmB,GAChC7yG,KAAM,SAAUmpD,EAAQ2pD,EAAOC,GAC7B,MAAO,CAAC,CAAC5pD,EAAO,GAAG,GAAK4pD,EAAO,GAAKD,EAAM,GAAG,GAAI3pD,EAAO,GAAG,GAAK4pD,EAAO,GAAKD,EAAM,GAAG,IAAK,CAAC3pD,EAAO,GAAG,GAAK4pD,EAAO,GAAKD,EAAM,GAAG,GAAI3pD,EAAO,GAAG,GAAK4pD,EAAO,GAAKD,EAAM,GAAG,IACzK,EACAzxF,QAAS,SAAU8nC,EAAQ2pD,EAAOC,GAChC,OAAO37G,EAAO41B,IAAIm8B,GAAQ,SAAUvrC,EAAM7jB,GACxC,MAAO,CAAC6jB,EAAK,GAAKm1F,EAAO,GAAKD,EAAM/4G,GAAK,GAAI6jB,EAAK,GAAKm1F,EAAO,GAAKD,EAAM/4G,GAAK,GAChF,GACF,GAGF,SAAS84G,EAAkBF,EAAexpD,EAAQ2pD,EAAOC,GACvD,MAAO,CAAC5pD,EAAO,GAAK4pD,EAAOJ,GAAiBG,EAAM,GAAI3pD,EAAO,GAAK4pD,EAAOJ,GAAiBG,EAAM,GAClG,CAIA,SAASzB,EAAU2B,EAAcC,GAC/B,IAAIC,EAAWC,EAAQH,GACnBI,EAAaD,EAAQF,GACrBF,EAAS,CAACG,EAAS,GAAKE,EAAW,GAAIF,EAAS,GAAKE,EAAW,IAGpE,OAFAz/F,MAAMo/F,EAAO,MAAQA,EAAO,GAAK,GACjCp/F,MAAMo/F,EAAO,MAAQA,EAAO,GAAK,GAC1BA,CACT,CAEA,SAASI,EAAQlC,GACf,OAAOA,EAAW,CAACA,EAAS,GAAG,GAAKA,EAAS,GAAG,GAAIA,EAAS,GAAG,GAAKA,EAAS,GAAG,IAAM,CAACvtG,IAAKA,IAC/F,CAEA,IAAIjL,EAAWmyF,EACflyF,EAAOvB,QAAUsB,C,iCC3XjB,IAAIrB,EAASL,EAAQ,OAEjBq3B,EAAiBr3B,EAAQ,OAEzBs3B,EAAat3B,EAAQ,OAErBu3B,EAAgBv3B,EAAQ,OAExBw3B,EAAsBD,EAAcC,oBAEpCrxB,EAAUnG,EAAQ,OAEtB,SAASs8G,EAAkB9nF,EAAOxvB,GAChC,IAAIkI,EAAYsnB,EAAMle,eAClBqvC,EAAYnxB,EAAM/yB,IAAI,aAO1B,OAJiB,MAAbkkD,IACFz4C,EAAU1B,KAAOm6C,GAGZz4C,CACT,CAEA,SAASqvG,EAAuBv2D,EAASw2D,EAAe51G,EAAO/F,EAAK47G,GAClE71G,EAAM6O,IAAI,SACV7O,EAAM6O,IAAI,aAEN+mG,EAAc/6G,IAAI,kBACpBmF,EAAM/H,GAAG,aAAa,WACpBmnD,EAAQ02D,gBAAiB,CAC3B,IACA91G,EAAM/H,GAAG,SAAS,SAAUo8B,GAC1B,GAAK+qB,EAAQ02D,eAAb,CAIA12D,EAAQ02D,gBAAiB,EACzB,IAAI10G,EAAKizB,EAAE5mB,OAEX,OAAQrM,EAAG20G,UACT30G,EAAKA,EAAG+B,OAGV,GAAK/B,EAAL,CAIA,IAAI40G,EAAS,CACX37G,MAAkC,QAA3Bu7G,EAAc/5G,SAAqB,MAAQ,OAAS,eAC3D47E,MAAOh+E,EAAO41B,IAAIjuB,EAAG20G,WAAW,SAAUv3D,GACxC,MAAO,CACLrjD,KAAMqjD,EAAOrjD,KACb+jD,KAAM22D,EAAS12D,IAEnB,KAEF62D,EAAOJ,EAAc/5G,SAAW,MAAQ+5G,EAAc53F,GACtD/jB,EAAI84B,eAAeijF,GACnBC,EAAkBL,EAAe51G,EAbjC,CAXA,CAyBF,IAEJ,CAEA,SAASi2G,EAAkBL,EAAe51G,GAExCA,EAAM0jC,WAAU,SAAUwyE,GACxBz8G,EAAOU,KAAK+7G,EAAcH,WAAW,SAAUv3D,GAC7C03D,EAAcroG,QAAQ+nG,EAAct5G,WAAWkiD,EAAOrjD,MAAQ,WAAa,SAC7E,GACF,GACF,CAQA,SAAS6jD,EAAQ/kD,EAAKk8G,GACpB,IAAIn2G,EAAQ,IAAIT,EAAQwP,MAMxBpX,KAAKi6B,YAAc,IAAInB,EAAex2B,EAAIujB,SAM1C7lB,KAAKk6B,gBAAkB,CACrBpkB,OAAQ0oG,EAAcn2G,EAAQ,MAOhCrI,KAAKqI,MAAQA,EAMbrI,KAAKy+G,aAAeD,EAQpBx+G,KAAKm+G,cACP,CAEA92D,EAAQnlD,UAAY,CAClBC,YAAaklD,EACbM,KAAM,SAAUs2D,EAAe57G,EAASC,EAAK47G,EAAUn6G,GACrD,IAAI26G,EAAmC,QAA3BT,EAAc/5G,SAGtBtD,EAAOq9G,EAAcz5G,SAAWy5G,EAAcz5G,UAClDk6G,GAASr8G,EAAQ4B,cAAc,CAC7BC,SAAU,SACVC,QAAS,QACR,SAAUikD,GACNxnD,GAAQwnD,EAAUpC,oBAAsBi4D,IAC3Cr9G,EAAOwnD,EAAU5jD,UAErB,IACA,IAAIS,EAAMg5G,EAAc/4G,iBACpBmD,EAAQrI,KAAKqI,MACb5B,EAAQxB,EAAIwB,MACZ6zB,EAAe,CACjB5zB,SAAUzB,EAAIyB,SACdD,MAAOA,IAGJ4B,EAAM8S,QAAQ,IAAMpX,EACvBsE,EAAM+E,KAAKktB,GAEX1yB,EAAQoC,YAAY3B,EAAOiyB,EAAc2jF,GAG3C51G,EAAMkC,YACN,IAAIo0G,EAAsB,CAAC,YAAa,UACpCC,EAA2B,CAAC,YAAa,YACzCC,EAAkB,CAAC,QAAS,UAC5BC,EAAuB,CAAC,QAAS,YACjC14D,EAAUtkD,EAAO40D,gBACrB50D,EAAOU,KAAKyC,EAAIiqG,SAAS,SAAUroD,GAMjC,IAAIk4D,EAAc34D,EAAQljD,IAAI2jD,EAAOrjD,OAAS4iD,EAAQ/qC,IAAIwrC,EAAOrjD,KAAM,IAAIoE,EAAQwP,OAC/E4nG,EAAe,IAAIp3G,EAAQq3G,aAAa,CAC1Ch1G,MAAO,CACLi1G,MAAO,MAGXH,EAAY51G,IAAI61G,GAChB,IAOIG,EAPAC,EAAcnB,EAAc53D,eAAeQ,EAAOrjD,OAASy6G,EAC3DvxG,EAAiB0yG,EAAYzyG,SAASgyG,GACtCjmD,EAAsB0mD,EAAYzyG,SAASiyG,GAC3CjwG,EAAYovG,EAAkBrxG,EAAgBjG,GAC9CwsC,EAAiB8qE,EAAkBrlD,EAAqBjyD,GACxDmS,EAAawmG,EAAYzyG,SAASkyG,GAClChmG,EAAkBumG,EAAYzyG,SAASmyG,GAG3C,GAAIl+G,EAAM,CACRu+G,EAAUv+G,EAAK2lD,YAAYM,EAAOrjD,MAKlC,IAAIopB,EAAchsB,EAAK4L,cAAc2yG,EAAS,SAAS,GAEnDvyF,IACFje,EAAU1B,KAAO2f,EAErB,CAEA9qB,EAAOU,KAAKqkD,EAAOw4D,YAAY,SAAUC,GACvC,GAAsB,YAAlBA,EAAS58G,KAAb,CAIAs8G,EAAa/0G,MAAMi1G,MAAMl+G,KAAK,IAAI4G,EAAQokB,QAAQ,CAChD/hB,MAAO,CACL0iB,OAAQ2yF,EAASC,aAIrB,IAAK,IAAItpG,EAAI,EAAGA,GAAKqpG,EAASE,UAAYF,EAASE,UAAUrrG,OAAS,GAAI8B,IACxE+oG,EAAa/0G,MAAMi1G,MAAMl+G,KAAK,IAAI4G,EAAQokB,QAAQ,CAChD/hB,MAAO,CACL0iB,OAAQ2yF,EAASE,UAAUvpG,MAXjC,CAeF,IACA+oG,EAAa9pG,SAASvG,GACtBqwG,EAAa3zG,MAAM8J,eAAgB,EACnC6pG,EAAa/pG,SAAU,EAEvB,IAAI27B,EAAYh4B,EAAW1V,IAAI,QAC3B2tC,EAAiBh4B,EAAgB3V,IAAI,QACrCu8G,EAAY7+G,GAAQyd,MAAMzd,EAAKsC,IAAI,QAASi8G,IAC5Ch/F,EAAavf,GAAQA,EAAK+K,cAAcwzG,GAK5C,GAAIT,GAASe,IAAc7uE,GAAaC,IAAmB1wB,GAAcA,EAAWywB,UAAW,CAC7F,IACI73B,EADA3U,EAASs6G,EAAkB73D,EAAOrjD,KAAjB27G,IAGhBv+G,GAAQu+G,GAAW,KACtBpmG,EAAeklG,GAGjB,IAAIp4B,EAAS,IAAIj+E,EAAQgc,KAAK,CAC5Bld,SAAUmgD,EAAOxhD,OAAOrC,QACxByD,MAAO,CAAC,EAAIA,EAAM,GAAI,EAAIA,EAAM,IAChC2L,GAAI,GACJqE,QAAQ,IAEV7O,EAAQkR,cAAc+sE,EAAOx6E,MAAOw6E,EAAOj5E,WAAa,CAAC,EAAGgM,EAAYC,EAAiB,CACvFE,aAAcA,EACdC,eAAgB5U,EAChB6U,YAAa4tC,EAAOrjD,KACpB6pB,gBAAgB,GACf,CACDE,UAAW,SACXC,kBAAmB,WAErBuxF,EAAY51G,IAAI08E,EAClB,CAIA,GAAIjlF,EACFA,EAAK+I,iBAAiBw1G,EAASJ,OAC1B,CACDK,EAAcnB,EAAc53D,eAAeQ,EAAOrjD,MAEtDw7G,EAAap/C,UAAY,CACvB76D,cAAe,MACf+gC,SAAUm4E,EAAcn+C,eACxBt8D,KAAMqjD,EAAOrjD,KACbqjD,OAAQu4D,GAAeA,EAAYvxG,QAAU,CAAC,EAElD,CAEA,IAAI6xG,EAAeX,EAAYX,YAAcW,EAAYX,UAAY,IACrEsB,EAAa1+G,KAAK6lD,GAClBj/C,EAAQ0F,cAAcyxG,EAAa9rE,EAAgB,CACjD0sE,qBAAsB1B,EAAc/6G,IAAI,kBAE1CmF,EAAMc,IAAI41G,EACZ,IAEA/+G,KAAKy6B,kBAAkBwjF,EAAe57G,EAASC,GAE/C07G,EAAuBh+G,KAAMi+G,EAAe51G,EAAO/F,EAAK47G,GACxDI,EAAkBL,EAAe51G,EACnC,EACA6B,OAAQ,WACNlK,KAAKqI,MAAMkC,YAEXvK,KAAKi6B,YAAY3xB,UAEjBtI,KAAKk6B,gBAAkB,CAAC,CAC1B,EACAO,kBAAmB,SAAUwjF,EAAe57G,EAASC,GACnD,IAAI2C,EAAMg5G,EAAc/4G,iBACpBq3B,EAAav8B,KAAKi6B,YAClBuC,EAAiBx8B,KAAKk6B,gBAC1BsC,EAAe92B,UAAYu4G,EAAc/6G,IAAI,cAC7Cs5B,EAAej3B,KAAON,EAAIW,UAE1B22B,EAAWQ,OAAOkhF,EAAc/6G,IAAI,UAAW,GAC/C,IAAIgB,EAAW+5G,EAAc/5G,SAE7B,SAAS07G,IACP,IAAIvB,EAAS,CACX37G,KAAM,UACNqC,cAAeb,GAGjB,OADAm6G,EAAOn6G,EAAW,MAAQ+5G,EAAc53F,GACjCg4F,CACT,CAEA9hF,EAAWrlB,IAAI,OAAO5W,GAAG,OAAO,SAAU0F,EAAIC,GAC5CjG,KAAKm+G,gBAAiB,EACtBplF,EAAWiE,gBAAgBR,EAAgBx2B,EAAIC,GAC/C3D,EAAI84B,eAAet5B,EAAOyF,OAAOq4G,IAAkB,CACjD55G,GAAIA,EACJC,GAAIA,IAER,GAAGjG,MACHu8B,EAAWrlB,IAAI,QAAQ5W,GAAG,QAAQ,SAAUiF,EAAM03B,EAAQC,GASxD,GARAl9B,KAAKm+G,gBAAiB,EACtBplF,EAAWoE,iBAAiBX,EAAgBj3B,EAAM03B,EAAQC,GAC1D56B,EAAI84B,eAAet5B,EAAOyF,OAAOq4G,IAAkB,CACjDr6G,KAAMA,EACNqB,QAASq2B,EACTn2B,QAASo2B,KAGPl9B,KAAKy+G,aAAc,CACrB,IAAIp2G,EAAQrI,KAAKqI,MACb5B,EAAQ4B,EAAM5B,MAClB4B,EAAMuxB,UAAS,SAAUnwB,GACP,SAAZA,EAAG/G,MACL+G,EAAG2D,KAAK,QAAS,CAAC,EAAI3G,EAAM,GAAI,EAAIA,EAAM,IAE9C,GACF,CACF,GAAGzG,MACHu8B,EAAWE,mBAAkB,SAAUC,EAAGzwB,EAAGC,GAC3C,OAAOjH,EAAI46G,uBAAuB/iF,QAAQ7wB,EAAGC,KAAO+sB,EAAoByD,EAAGp6B,EAAK27G,EAClF,GACF,GAEF,IAAI96G,EAAWkkD,EACfjkD,EAAOvB,QAAUsB,C,wBC3UjB,IAAIrB,EAASL,EAAQ,OAEjBuxG,EAAWvxG,EAAQ,OAEnBmzE,EAAYnzE,EAAQ,OAEpBwxG,EAAmBxxG,EAAQ,MAS/B,SAASq3B,EAAeyrB,GAItBvkD,KAAK8/G,eAKL9/G,KAAK+zG,IAAMxvD,EAKXvkD,KAAK+/G,KAAO,CAAC,EAEb,IAAIt8G,EAAO3B,EAAO2B,KACdu8G,EAAmBv8G,EAAK02G,EAAWn6G,MACnCigH,EAAmBx8G,EAAK42G,EAAWr6G,MACnCkgH,EAAiBz8G,EAAK62G,EAASt6G,MAC/BmgH,EAAoB18G,EAAK28G,EAAYpgH,MACrCqgH,EAAe58G,EAAK68G,EAAOtgH,MAC/BgzG,EAASr7F,KAAK3X,MAOdA,KAAKy8B,kBAAoB,SAAUqjF,GACjC9/G,KAAK8/G,eAAiBA,CACxB,EAgBA9/G,KAAK+8B,OAAS,SAAUuxE,EAAav9F,GAEnC/Q,KAAKo9B,UACLp9B,KAAK+/G,KAAOj+G,EAAOkL,SAASlL,EAAOyiB,MAAMxT,IAAQ,CAAC,EAAG,CACnDgzF,kBAAkB,EAClBC,iBAAiB,EACjBC,yBAAyB,IAGR,MAAfqK,IACFA,GAAc,IAGI,IAAhBA,GAAwC,SAAhBA,GAA0C,QAAhBA,IACpD/pD,EAAGjkD,GAAG,YAAa0/G,GACnBz7D,EAAGjkD,GAAG,YAAa2/G,GACnB17D,EAAGjkD,GAAG,UAAW4/G,KAGC,IAAhB5R,GAAwC,UAAhBA,GAA2C,SAAhBA,IACrD/pD,EAAGjkD,GAAG,aAAc6/G,GACpB57D,EAAGjkD,GAAG,QAAS+/G,GAEnB,EAEArgH,KAAKo9B,QAAU,WACbmnB,EAAGrtC,IAAI,YAAa8oG,GACpBz7D,EAAGrtC,IAAI,YAAa+oG,GACpB17D,EAAGrtC,IAAI,UAAWgpG,GAClB37D,EAAGrtC,IAAI,aAAcipG,GACrB57D,EAAGrtC,IAAI,QAASmpG,EAClB,EAEArgH,KAAKsI,QAAUtI,KAAKo9B,QAEpBp9B,KAAKugH,WAAa,WAChB,OAAOvgH,KAAKg2E,SACd,EAEAh2E,KAAKwgH,WAAa,WAChB,OAAOxgH,KAAKygH,SACd,CACF,CAIA,SAAStG,EAAUz9E,GACjB,KAAIk4C,EAAU8rC,aAAahkF,IAAMA,EAAE5mB,QAAU4mB,EAAE5mB,OAAO0iB,WAAtD,CAIA,IAAIvsB,EAAIywB,EAAEoR,QACN5hC,EAAIwwB,EAAEqR,QAGN/tC,KAAK8/G,gBAAkB9/G,KAAK8/G,eAAepjF,EAAGzwB,EAAGC,KACnDlM,KAAK2gH,GAAK10G,EACVjM,KAAK4gH,GAAK10G,EACVlM,KAAKg2E,WAAY,EATnB,CAWF,CAEA,SAASqkC,EAAU39E,GACjB,IAAIk4C,EAAU8rC,aAAahkF,IAAOmkF,EAAgB7gH,KAAM,kBAAmB08B,IAAO18B,KAAKg2E,WAAgC,UAAnBt5C,EAAEokF,eAA4B7N,EAAiB8N,QAAQ/gH,KAAK+zG,IAAK,aAArK,CAIA,IAAI9nG,EAAIywB,EAAEoR,QACN5hC,EAAIwwB,EAAEqR,QACNo3D,EAAOnlG,KAAK2gH,GACZvb,EAAOplG,KAAK4gH,GACZ56G,EAAKiG,EAAIk5F,EACTl/F,EAAKiG,EAAIk5F,EACbplG,KAAK2gH,GAAK10G,EACVjM,KAAK4gH,GAAK10G,EACVlM,KAAK+/G,KAAK9b,yBAA2BrvB,EAAUv3B,KAAK3gB,EAAE53B,OACtD9E,KAAKkW,QAAQ,MAAOlQ,EAAIC,EAAIk/F,EAAMC,EAAMn5F,EAAGC,EAX3C,CAYF,CAEA,SAASouG,EAAQ59E,GACVk4C,EAAU8rC,aAAahkF,KAC1B18B,KAAKg2E,WAAY,EAErB,CAEA,SAASoqC,EAAW1jF,GAElB,GAAKmkF,EAAgB7gH,KAAM,mBAAoB08B,IAAuB,IAAjBA,EAAEskF,WAAvD,CAOA,IAAIC,EAAYvkF,EAAEskF,WAAa,EAAI,IAAM,EAAI,IAC7Cz7G,EAAKoS,KAAK3X,KAAM08B,EAAGukF,EAAWvkF,EAAEoR,QAASpR,EAAEqR,QAN3C,CAOF,CAEA,SAASuyE,EAAM5jF,GACb,IAAIu2E,EAAiB8N,QAAQ/gH,KAAK+zG,IAAK,aAAvC,CAIA,IAAIkN,EAAYvkF,EAAEwkF,WAAa,EAAI,IAAM,EAAI,IAC7C37G,EAAKoS,KAAK3X,KAAM08B,EAAGukF,EAAWvkF,EAAEykF,OAAQzkF,EAAE0kF,OAH1C,CAIF,CAEA,SAAS77G,EAAKm3B,EAAGukF,EAAWI,EAAOC,GAC7BthH,KAAK8/G,gBAAkB9/G,KAAK8/G,eAAepjF,EAAG2kF,EAAOC,KAIvD1sC,EAAUv3B,KAAK3gB,EAAE53B,OACjB9E,KAAKkW,QAAQ,OAAQ+qG,EAAWI,EAAOC,GAE3C,CAEA,SAAST,EAAgBU,EAAgB78F,EAAMgY,GAC7C,IAAI8kF,EAAUD,EAAexB,KAAKr7F,GAClC,OAAO88F,KAAa1/G,EAAOwiF,SAASk9B,IAAY9kF,EAAE53B,MAAM08G,EAAU,OACpE,CA5EA1/G,EAAO0Y,MAAMse,EAAgBk6E,GA8E7B,IAAI7vG,EAAW21B,EACf11B,EAAOvB,QAAUsB,C,wBCzLjB,IAAI6gE,EAAeviE,EAAQ,OAEvBu3B,EAAgBv3B,EAAQ,OAExBw3B,EAAsBD,EAAcC,oBAEpChX,EAAcxgB,EAAQ,OAE1B,SAASktF,EAAsBjkF,GAE7B,OADAA,EAAO+2G,EAAc/2G,GACd,SAAUg3G,EAAa7kF,GAC5B,OAAO5a,EAAY0/F,iBAAiBD,EAAah3G,EACnD,CACF,CAEA,SAASqkF,EAA2BrkF,EAAMk3G,GAExC,OADAl3G,EAAO+2G,EAAc/2G,GACd,SAAUupF,GACf,IAAIxvF,EAA0B,MAApBm9G,EAA2BA,EAAmB3tB,EACpD4tB,EAAap9G,EAAMiG,EAAKa,MAAQb,EAAKsB,OACrC8Q,EAAOrY,EAAMiG,EAAKuB,EAAIvB,EAAKwB,EAC/B,MAAO,CAAC4Q,EAAMA,GAAQ+kG,GAAc,GACtC,CACF,CAEA,SAAShzB,EAAyBnkF,EAAMpI,EAAKw/G,GAE3C,OADAp3G,EAAO+2G,EAAc/2G,GACd,SAAUgyB,EAAGk5E,EAAkB/4E,GACpC,OAAOnyB,EAAKoyB,QAAQ84E,EAAiB,GAAIA,EAAiB,MAAQ38E,EAAoByD,EAAGp6B,EAAKw/G,EAChG,CACF,CAGA,SAASL,EAAc/2G,GACrB,OAAOs5D,EAAa5hE,OAAOsI,EAC7B,CAEA7I,EAAQ8sF,sBAAwBA,EAChC9sF,EAAQktF,2BAA6BA,EACrCltF,EAAQgtF,yBAA2BA,C,sBCvCnC,IAAIkzB,EAAsB,CACxB,YAAe,EACf,QAAW,EACX,MAAS,GAOX,SAAS9oF,EAAoByD,EAAGp6B,EAAK0/G,GACnC,IAAI/rF,EAAQ3zB,EAAI2/G,sBAAsBvlF,EAAEwlF,WAEpCp/G,EAAWmzB,GAASA,EAAM/wB,iBAC9B,OAAO+wB,GAASA,IAAU+rF,IAAwBD,EAAoB9rF,EAAM/xB,WAAapB,GAAYA,EAASmzB,QAAU+rF,CAC1H,CAEAngH,EAAQo3B,oBAAsBA,C,uBCjB9B,IAAIv1B,EAAUjC,EAAQ,OAElBisG,EAAO,0BAEX,SAASmH,EAAKtwD,EAAI49D,EAAaC,GAC7B,IAAI56C,EAAQ66C,EAAS99D,GACrBijB,EAAM26C,GAAeC,CACvB,CAEA,SAASrN,EAAQxwD,EAAI49D,EAAaC,GAChC,IAAI56C,EAAQ66C,EAAS99D,GACjB+9D,EAAO96C,EAAM26C,GAEbG,IAASF,IACX56C,EAAM26C,GAAe,KAEzB,CAEA,SAASpB,EAAQx8D,EAAI49D,GACnB,QAASE,EAAS99D,GAAI49D,EACxB,CAEA,SAASE,EAAS99D,GAChB,OAAOA,EAAGmpD,KAAUnpD,EAAGmpD,GAAQ,CAAC,EAClC,CAUAhqG,EAAQI,eAAe,CACrBpB,KAAM,mBACNoC,MAAO,oBACPjC,OAAQ,WACP,WAAa,IAChBhB,EAAQgzG,KAAOA,EACfhzG,EAAQkzG,QAAUA,EAClBlzG,EAAQk/G,QAAUA,C,wBCzClB,IAAIjgF,EAAUr/B,EAAQ,MAElBwsB,EAAgB6S,EAAQ7S,cACxBs0F,EAAYzhF,EAAQy/B,IACpBM,EAAkB//B,EAAQ+/B,gBAE1B6Z,EAAaj5E,EAAQ,OAErBmG,EAAUnG,EAAQ,OAStB,SAAS8H,EAAOlB,EAAOrD,EAAgB1C,GACrC,IAAIkgH,EAAkBx9G,EAAekpB,qBACjC6C,EAAU/rB,EAAe9B,IAAI,WAC7Bu/G,EAAe,CACjBl3G,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aAEVxG,EAAOujB,EAAcu0F,EAAiBC,EAAc1xF,GACxDwxF,EAAUv9G,EAAe9B,IAAI,UAAWmF,EAAOrD,EAAe9B,IAAI,WAAYwH,EAAKa,MAAOb,EAAKsB,QAC/F60D,EAAgBx4D,EAAOm6G,EAAiBC,EAAc1xF,EACxD,CAEA,SAAS2xF,EAAeh4G,EAAM1F,GAC5B,IAAI+rB,EAAU2pD,EAAWoJ,kBAAkB9+E,EAAe9B,IAAI,YAC1DmI,EAAQrG,EAAe+S,aAAa,CAAC,QAAS,YAClD1M,EAAM4B,KAAOjI,EAAe9B,IAAI,mBAC5BwH,EAAO,IAAI9C,EAAQ+C,KAAK,CAC1BV,MAAO,CACLgC,EAAGvB,EAAKuB,EAAI8kB,EAAQ,GACpB7kB,EAAGxB,EAAKwB,EAAI6kB,EAAQ,GACpBxlB,MAAOb,EAAKa,MAAQwlB,EAAQ,GAAKA,EAAQ,GACzC/kB,OAAQtB,EAAKsB,OAAS+kB,EAAQ,GAAKA,EAAQ,GAC3CtlB,EAAGzG,EAAe9B,IAAI,iBAExBmI,MAAOA,EACPoL,QAAQ,EACRrE,IAAK,IAMP,OAAO1H,CACT,CAEA7I,EAAQ0H,OAASA,EACjB1H,EAAQ6gH,eAAiBA,C,sBC/CzB,SAAS1lF,EAAgBR,EAAgBx2B,EAAIC,GAC3C,IAAI6P,EAAS0mB,EAAe1mB,OACxB4lB,EAAM5lB,EAAOpP,SACjBg1B,EAAI,IAAM11B,EACV01B,EAAI,IAAMz1B,EACV6P,EAAOwF,OACT,CAWA,SAAS6hB,EAAiBX,EAAgBykF,EAAWI,EAAOC,GAC1D,IAAIxrG,EAAS0mB,EAAe1mB,OACxBpQ,EAAY82B,EAAe92B,UAC3Bg2B,EAAM5lB,EAAOpP,SACbD,EAAQqP,EAAOrP,MACfk8G,EAAUnmF,EAAej3B,KAAOi3B,EAAej3B,MAAQ,EAG3D,GAFAo9G,GAAW1B,EAEPv7G,EAAW,CACb,IAAIS,EAAUT,EAAUU,KAAO,EAC3BC,EAAUX,EAAUY,KAAOC,IAC/Bo8G,EAAUn8G,KAAKF,IAAIE,KAAKJ,IAAIC,EAASs8G,GAAUx8G,EACjD,CAEA,IAAIy8G,EAAYD,EAAUnmF,EAAej3B,KACzCi3B,EAAej3B,KAAOo9G,EAEtBjnF,EAAI,KAAO2lF,EAAQ3lF,EAAI,KAAOknF,EAAY,GAC1ClnF,EAAI,KAAO4lF,EAAQ5lF,EAAI,KAAOknF,EAAY,GAC1Cn8G,EAAM,IAAMm8G,EACZn8G,EAAM,IAAMm8G,EACZ9sG,EAAOwF,OACT,CAEAzZ,EAAQm7B,gBAAkBA,EAC1Bn7B,EAAQs7B,iBAAmBA,C,wBChD3B,IAAIr7B,EAASL,EAAQ,OAOjB0B,EAAW,CACb2iD,kBAAmB,SAAU+8D,GAC3B7iH,KAAK8iH,YAAcD,EAAW7/G,QAC9BhD,KAAK+iH,iBAAmBjhH,EAAOkhH,OAAOH,GAAc,IAAI,SAAUI,EAAWntG,GAE3E,OADAmtG,EAAU5nG,IAAIvF,EAAOtS,KAAMsS,GACpBmtG,CACT,GAAGnhH,EAAO40D,gBACZ,EAUAwsD,OAAQ,SAAU1/G,EAAM6iB,GACtB,IAAIvQ,EAAe,MAANuQ,EAAarmB,KAAK8iH,YAAYz8F,GAAMrmB,KAAK+iH,iBAAiB7/G,IAAIM,GACvE6pD,EAAertD,KAAKkD,IAAI,gBAEP,WAAjBmqD,GACFrtD,KAAK+iH,iBAAiBvgH,MAAK,SAAUsT,GACnCA,EAAO9R,UAAW,CACpB,IAGF8R,IAAWA,EAAO9R,UAAW,EAC/B,EASAm/G,SAAU,SAAU3/G,EAAM6iB,GACxB,IAAIvQ,EAAe,MAANuQ,EAAarmB,KAAK8iH,YAAYz8F,GAAMrmB,KAAK+iH,iBAAiB7/G,IAAIM,GAG3EsS,IAAWA,EAAO9R,UAAW,EAC/B,EASAo/G,eAAgB,SAAU5/G,EAAM6iB,GAC9B,IAAIvQ,EAAe,MAANuQ,EAAarmB,KAAK8iH,YAAYz8F,GAAMrmB,KAAK+iH,iBAAiB7/G,IAAIM,GAE3E,GAAc,MAAVsS,EAEF,OADA9V,KAAK8V,EAAO9R,SAAW,WAAa,UAAUR,EAAM6iB,GAC7CvQ,EAAO9R,QAElB,EASAW,WAAY,SAAUnB,EAAM6iB,GAC1B,IAAIvQ,EAAe,MAANuQ,EAAarmB,KAAK8iH,YAAYz8F,GAAMrmB,KAAK+iH,iBAAiB7/G,IAAIM,GAC3E,OAAOsS,GAAUA,EAAO9R,QAC1B,GAEFZ,EAAOvB,QAAUsB,C,oBC1DjB,SAASA,EAASyqD,EAAOg9C,EAAYxuF,EAAQmuF,EAAalK,EAASC,GAEjEsK,EAAW,GAAKyY,EAASzY,EAAW,GAAIxuF,GACxCwuF,EAAW,GAAKyY,EAASzY,EAAW,GAAIxuF,GACxCwxC,EAAQA,GAAS,EACjB,IAAI01D,EAAalnG,EAAO,GAAKA,EAAO,GAErB,MAAXikF,IACFA,EAAUgjB,EAAShjB,EAAS,CAAC,EAAGijB,KAGnB,MAAXhjB,IACFA,EAAU95F,KAAKF,IAAIg6F,EAAoB,MAAXD,EAAkBA,EAAU,IAGtC,QAAhBkK,IACFlK,EAAUC,EAAU95F,KAAKiH,IAAIm9F,EAAW,GAAKA,EAAW,IACxDL,EAAc,GAGhB,IAAIgZ,EAAmBC,EAAY5Y,EAAYL,GAC/CK,EAAWL,IAAgB38C,EAE3B,IAAI61D,EAAgBpjB,GAAW,EAC3BqjB,EAAatnG,EAAOpZ,QACxBugH,EAAiB5iG,KAAO,EAAI+iG,EAAW,IAAMD,EAAgBC,EAAW,IAAMD,EAC9E7Y,EAAWL,GAAe8Y,EAASzY,EAAWL,GAAcmZ,GAE5D,IAAIC,EAAeH,EAAY5Y,EAAYL,GAE5B,MAAXlK,IAAoBsjB,EAAahjG,OAAS4iG,EAAiB5iG,MAAQgjG,EAAappC,KAAO8lB,KAEzFuK,EAAW,EAAIL,GAAeK,EAAWL,GAAegZ,EAAiB5iG,KAAO0/E,GAI9EsjB,EAAeH,EAAY5Y,EAAYL,GAM3C,OAJe,MAAXjK,GAAmBqjB,EAAappC,KAAO+lB,IACzCsK,EAAW,EAAIL,GAAeK,EAAWL,GAAeoZ,EAAahjG,KAAO2/E,GAGvEsK,CACT,CAEA,SAAS4Y,EAAY5Y,EAAYL,GAC/B,IAAIjgE,EAAOsgE,EAAWL,GAAeK,EAAW,EAAIL,GAGpD,MAAO,CACLhwB,KAAM/zE,KAAKiH,IAAI68B,GACf3pB,KAAM2pB,EAAO,GAAK,EAAIA,EAAO,EAAI,EAAIigE,GAAe,EAAI,EAE5D,CAEA,SAAS8Y,EAASt1G,EAAOxG,GACvB,OAAOf,KAAKJ,IAAImB,EAAO,GAAIf,KAAKF,IAAIiB,EAAO,GAAIwG,GACjD,CAEA3K,EAAOvB,QAAUsB,C,uBChFjB,IAAIO,EAAUjC,EAAQ,OAEtBA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAER,IAAImiH,EAAeniH,EAAQ,MAEvBqtG,EAAYrtG,EAAQ,OAIxBiC,EAAQmmB,kBAAkB+5F,GAC1B9U,EAAUC,yBAAyB,UAAU,WAE3C,MAAO,OACT,G,wBClBAttG,EAAQ,MAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,M,wBCNR,IAAIiC,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBsG,EAAQtG,EAAQ,OAEhBoiH,EAAcngH,EAAQiwE,qBAAqB,CAC7CjxE,KAAM,eACN8E,aAAc,CAAC,UACfk+C,WAAY,CACVhjD,KAAM,MAQNkvG,YAAY,GAEdvoF,KAAM,SAAUxb,EAAQoJ,EAAa5U,GACnCrC,KAAKy1B,qBAAqB5nB,EAAQxL,GAClCwL,EAAO7J,SAAW6J,EAAO7J,UAAY,CAAC,CACxC,EACAwxB,YAAa,SAAU3nB,GACrBg2G,EAAY/4F,UAAU9qB,KAAM,cAAe6N,EAC7C,EACA+0D,cAAe,WACb5iE,KAAK8jH,YAAY9jH,KAAKqC,SAEtB,IAAI0hH,EAAa/jH,KAAK0I,MAEtB,GAAIq7G,EAAW,IAAmC,WAA7B/jH,KAAKkD,IAAI,gBAA8B,CAG1D,IAFA,IAAI8gH,GAAc,EAET/tG,EAAI,EAAGA,EAAI8tG,EAAW5vG,OAAQ8B,IAAK,CAC1C,IAAIzS,EAAOugH,EAAW9tG,GAAG/S,IAAI,QAE7B,GAAIlD,KAAK2E,WAAWnB,GAAO,CAEzBxD,KAAKkjH,OAAO1/G,GACZwgH,GAAc,EACd,KACF,CACF,EAGCA,GAAehkH,KAAKkjH,OAAOa,EAAW,GAAG7gH,IAAI,QAChD,CACF,EACA4gH,YAAa,SAAUzhH,GACrB,IAAI0hH,EAAajiH,EAAO41B,IAAI13B,KAAKkD,IAAI,SAAW,IAAI,SAAUygD,GAQ5D,MANwB,kBAAbA,GAA6C,kBAAbA,IACzCA,EAAW,CACTngD,KAAMmgD,IAIH,IAAI57C,EAAM47C,EAAU3jD,KAAMA,KAAKqC,QACxC,GAAGrC,MACHA,KAAK0I,MAAQq7G,EACb,IAAIE,EAAiBniH,EAAO41B,IAAIr1B,EAAQ6hH,aAAa,SAAUpiG,GAC7D,OAAOA,EAAOte,IAChB,IACAnB,EAAQ4gF,YAAW,SAAU5+E,GAC3B,GAAIA,EAAY8lB,mBAAoB,CAClC,IAAIvpB,EAAOyD,EAAY8lB,qBACvB85F,EAAiBA,EAAerhH,OAAOhC,EAAKytB,SAASztB,EAAK8D,SAC5D,CACF,IAMA1E,KAAKmkH,gBAAkBF,CACzB,EAKAz/G,QAAS,WACP,OAAOxE,KAAK0I,KACd,EAKAw6G,OAAQ,SAAU1/G,GAChB,IAAIQ,EAAWhE,KAAK6N,OAAO7J,SACvBqpD,EAAertD,KAAKkD,IAAI,gBAE5B,GAAqB,WAAjBmqD,EAA2B,CAC7B,IAAIzsD,EAAOZ,KAAK0I,MAChB5G,EAAOU,KAAK5B,GAAM,SAAU+iD,GAC1B3/C,EAAS2/C,EAASzgD,IAAI,UAAW,CACnC,GACF,CAEAc,EAASR,IAAQ,CACnB,EAKA2/G,SAAU,SAAU3/G,GACe,WAA7BxD,KAAKkD,IAAI,kBACXlD,KAAK6N,OAAO7J,SAASR,IAAQ,EAEjC,EAKA4/G,eAAgB,SAAU5/G,GACxB,IAAIQ,EAAWhE,KAAK6N,OAAO7J,SAEtBA,EAASpC,eAAe4B,KAC3BQ,EAASR,IAAQ,GAGnBxD,KAAKgE,EAASR,GAAQ,WAAa,UAAUA,EAC/C,EAKAmB,WAAY,SAAUnB,GACpB,IAAIQ,EAAWhE,KAAK6N,OAAO7J,SAC3B,QAASA,EAASpC,eAAe4B,KAAUQ,EAASR,KAAU1B,EAAOqa,QAAQnc,KAAKmkH,gBAAiB3gH,IAAS,CAC9G,EACA6K,cAAe,CAEbC,OAAQ,EAERC,EAAG,EACHmc,MAAM,EAGNkuC,OAAQ,aACRxtC,KAAM,SAENC,IAAK,EAKL6uD,MAAO,OACPppD,gBAAiB,gBAEjB7V,YAAa,OACbmpG,aAAc,EAEdpqG,YAAa,EAGb+W,QAAS,EAGTszF,QAAS,GAETz0F,UAAW,GAEXJ,WAAY,GAEZ80F,cAAe,OACf1iD,UAAW,CAETr1D,MAAO,QAIT8gD,cAAc,EAMd/T,QAAS,CACP5uB,MAAM,MAIRvnB,EAAW0gH,EACfzgH,EAAOvB,QAAUsB,C,wBCzLjB,IAAIuE,EAAUjG,EAAQ,OAIlBiC,GAFUgE,EAAQC,QAERlG,EAAQ,QAElBK,EAASL,EAAQ,OAEjBqO,EAAUrO,EAAQ,OAElBsO,EAAeD,EAAQC,aAEvBnI,EAAUnG,EAAQ,OAElB8iH,EAAiB9iH,EAAQ,OAEzBihH,EAAiB6B,EAAe7B,eAEhCvT,EAAa1tG,EAAQ,MAErByF,EAAQpF,EAAOoF,MACf1E,EAAOV,EAAOU,KACd4U,EAAQxP,EAAQwP,MAEhBjU,EAAWO,EAAQ4wE,oBAAoB,CACzC5xE,KAAM,eACN8hH,iBAAiB,EAKjBn7F,KAAM,WAKJrpB,KAAKqI,MAAMc,IAAInJ,KAAKykH,cAAgB,IAAIrtG,GAMxCpX,KAAK0kH,aACP,EAKAC,gBAAiB,WACf,OAAO3kH,KAAKykH,aACd,EAKA3kH,OAAQ,SAAU8kH,EAAaviH,EAASC,GAGtC,GAFAtC,KAAK6kH,aAEAD,EAAY1hH,IAAI,QAAQ,GAA7B,CAIA,IAAI4hH,EAAYF,EAAY1hH,IAAI,SAE3B4hH,GAA2B,SAAdA,IAChBA,EAAwC,UAA5BF,EAAY1hH,IAAI,SAAqD,aAA9B0hH,EAAY1hH,IAAI,UAA2B,QAAU,QAG1GlD,KAAK+kH,YAAYD,EAAWF,EAAaviH,EAASC,GAElD,IAAI8lG,EAAewc,EAAY12F,qBAC3Bu0F,EAAe,CACjBl3G,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aAEV6f,EAAU6zF,EAAY1hH,IAAI,WAC1BuoB,EAAU0jF,EAAWlhF,cAAcm6E,EAAcqa,EAAc1xF,GAC/Di0F,EAAWhlH,KAAKilH,YAAYL,EAAaE,EAAWr5F,GAEpD88E,EAAa4G,EAAWlhF,cAAcnsB,EAAOkL,SAAS,CACxDzB,MAAOy5G,EAASz5G,MAChBS,OAAQg5G,EAASh5G,QAChBo8F,GAAeqa,EAAc1xF,GAChC/wB,KAAKqI,MAAM+E,KAAK,WAAY,CAACm7F,EAAWt8F,EAAI+4G,EAAS/4G,EAAGs8F,EAAWr8F,EAAI84G,EAAS94G,IAEhFlM,KAAKqI,MAAMc,IAAInJ,KAAK0kH,cAAgBhC,EAAesC,EAAUJ,GAzB7D,CA0BF,EAKAC,WAAY,WACV7kH,KAAK2kH,kBAAkBp6G,YACvBvK,KAAK0kH,eAAiB1kH,KAAKqI,MAAM6B,OAAOlK,KAAK0kH,cAC/C,EAKAK,YAAa,SAAUD,EAAWF,EAAaviH,EAASC,GACtD,IAAI4iH,EAAellH,KAAK2kH,kBACpBQ,EAAiBrjH,EAAO40D,gBACxB0uD,EAAaR,EAAY1hH,IAAI,gBACjCV,EAAKoiH,EAAYpgH,WAAW,SAAU6E,EAAW9E,GAC/C,IAAIf,EAAO6F,EAAUnG,IAAI,QAEzB,GAAKlD,KAAKwkH,iBAA6B,KAAThhH,GAAwB,OAATA,EAA7C,CAOA,IAAIa,EAAchC,EAAQgjH,gBAAgB7hH,GAAM,GAEhD,IAAI2hH,EAAejiH,IAAIM,GAMvB,GAAIa,EAAa,CACf,IAAIzD,EAAOyD,EAAYG,UACnB+H,EAAQ3L,EAAK24B,UAAU,SAEN,oBAAVhtB,IAETA,EAAQA,EAAMlI,EAAYumB,cAAc,KAI1C,IAAI06F,EAAmB1kH,EAAK24B,UAAU,iBAAmB,YACrDpnB,EAAavR,EAAK24B,UAAU,UAE5Bxe,EAAY/a,KAAKulH,YAAY/hH,EAAMe,EAAW8E,EAAWu7G,EAAaU,EAAkBnzG,EAAY2yG,EAAWv4G,EAAO64G,GAE1HrqG,EAAUza,GAAG,QAAS4G,EAAMs+G,EAAsBhiH,EAAMlB,IAAMhC,GAAG,YAAa4G,EAAMu+G,EAAyBphH,EAAa,KAAM/B,IAAMhC,GAAG,WAAY4G,EAAMw+G,EAAwBrhH,EAAa,KAAM/B,IACtM6iH,EAAe9pG,IAAI7X,GAAM,EAC3B,MAEEnB,EAAQsjH,eAAc,SAAUthH,GAE9B,IAAI8gH,EAAejiH,IAAIM,IAInBa,EAAY8lB,mBAAoB,CAClC,IAAIvpB,EAAOyD,EAAY8lB,qBACnB1lB,EAAM7D,EAAK2lD,YAAY/iD,GAE3B,GAAIiB,EAAM,EACR,OAGF,IAAI8H,EAAQ3L,EAAK4L,cAAc/H,EAAK,SAChC6gH,EAAmB,YAEnBvqG,EAAY/a,KAAKulH,YAAY/hH,EAAMe,EAAW8E,EAAWu7G,EAAaU,EAAkB,KAAMR,EAAWv4G,EAAO64G,GAEpHrqG,EAAUza,GAAG,QAAS4G,EAAMs+G,EAAsBhiH,EAAMlB,IACvDhC,GAAG,YAAa4G,EAAMu+G,EAAyBphH,EAAab,EAAMlB,IAAMhC,GAAG,WAAY4G,EAAMw+G,EAAwBrhH,EAAab,EAAMlB,IACzI6iH,EAAe9pG,IAAI7X,GAAM,EAC3B,CACF,GAAGxD,KApDL,MAJEklH,EAAa/7G,IAAI,IAAIiO,EAAM,CACzBwuG,SAAS,IAyDf,GAAG5lH,KACL,EACAulH,YAAa,SAAU/hH,EAAMe,EAAW8E,EAAWu7G,EAAaU,EAAkBnzG,EAAY2yG,EAAWv4G,EAAO64G,GAC9G,IAAIx1F,EAAYg1F,EAAY1hH,IAAI,aAC5BssB,EAAao1F,EAAY1hH,IAAI,cAC7BohH,EAAgBM,EAAY1hH,IAAI,iBAChCyB,EAAaigH,EAAYjgH,WAAWnB,GACpCuX,EAAY,IAAI3D,EAChBipD,EAAiBh3D,EAAUsD,SAAS,aACpCk5G,EAAWx8G,EAAUnG,IAAI,QACzB4iH,EAAez8G,EAAUsD,SAAS,WAClCo5G,EAA2BD,EAAa7uG,YAM5C,GAJAquG,EAAmBO,GAAYP,EAC/BvqG,EAAU5R,IAAI4G,EAAau1G,EAAkB,EAAG,EAAG11F,EAAWJ,EAAY7qB,EAAa4H,EAAQ+3G,GAAe,KAGzGuB,GAAY1zG,IACbA,IAAemzG,GAAkC,QAAdnzG,GAAuB,CAC5D,IAAIjE,EAAoB,GAAbshB,EAEQ,SAAfrd,IACFA,EAAa,UAIf4I,EAAU5R,IAAI4G,EAAaoC,GAAayd,EAAY1hB,GAAQ,GAAIshB,EAAathB,GAAQ,EAAGA,EAAMA,EAAMvJ,EAAa4H,EAAQ+3G,GAC3H,CAEA,IAAI31F,EAAsB,SAAdm2F,EAAuBl1F,EAAY,GAAK,EAChDrC,EAAYu3F,EACZnsF,EAAYisF,EAAY1hH,IAAI,aAC5BwmE,EAAUlmE,EAEW,kBAAdm1B,GAA0BA,EACnC+wC,EAAU/wC,EAAUvH,QAAQ,SAAkB,MAAR5tB,EAAeA,EAAO,IAC9B,oBAAdm1B,IAChB+wC,EAAU/wC,EAAUn1B,IAGtBuX,EAAU5R,IAAI,IAAIvB,EAAQgc,KAAK,CAC7BvY,MAAOzD,EAAQof,aAAa,CAAC,EAAGq5C,EAAgB,CAC9C/0D,KAAMo+D,EACNz9D,EAAG0iB,EACHziB,EAAGsjB,EAAa,EAChB5K,SAAUjgB,EAAa07D,EAAepvB,eAAiBqzE,EACvD/2F,UAAWA,EACXC,kBAAmB,cAIvB,IAAIw4F,EAAU,IAAIp+G,EAAQ+C,KAAK,CAC7BV,MAAO8Q,EAAU4hB,kBACjBkrC,WAAW,EACXvuB,QAASwsE,EAAa5iH,IAAI,QAAUpB,EAAOyF,OAAO,CAChDmiE,QAASlmE,EAETm1B,UAAWotF,EAAyB7iH,IAAI,aAAa,IAAS,WAC5D,OAAOM,CACT,EACA2lF,gBAAiB,CACfpkF,cAAe,SACfkhH,YAAarB,EAAY9kD,eACzBt8D,KAAMA,EACN2nB,MAAO,CAAC,UAET26F,EAAaj4G,QAAU,OAU5B,OARAkN,EAAU5R,IAAI68G,GACdjrG,EAAUgxB,WAAU,SAAUvjB,GAC5BA,EAAM/R,QAAS,CACjB,IACAuvG,EAAQvvG,QAAU2uG,EAClBplH,KAAK2kH,kBAAkBx7G,IAAI4R,GAC3BnT,EAAQ0F,cAAcyN,GACtBA,EAAUmrG,kBAAoB3hH,EACvBwW,CACT,EAKAkqG,YAAa,SAAUL,EAAaE,EAAWr5F,GAC7C,IAAIy5F,EAAellH,KAAK2kH,kBAExBxV,EAAW5uC,IAAIqkD,EAAY1hH,IAAI,UAAWgiH,EAAcN,EAAY1hH,IAAI,WAAYuoB,EAAQlgB,MAAOkgB,EAAQzf,QAC3G,IAAIm6G,EAAcjB,EAAavoF,kBAE/B,OADAuoF,EAAa93G,KAAK,WAAY,EAAE+4G,EAAYl6G,GAAIk6G,EAAYj6G,IACrDlM,KAAKqI,MAAMs0B,iBACpB,IAGF,SAAS6oF,EAAqBhiH,EAAMlB,GAClCA,EAAI84B,eAAe,CACjB14B,KAAM,qBACNc,KAAMA,GAEV,CAEA,SAASiiH,EAAwBphH,EAAa+hH,EAAU9jH,GAEtD,IAAImH,EAAKnH,EAAIujB,QAAQ0hD,QAAQ8+C,iBAAiB,GAExC58G,GAAMA,EAAG68G,eACbjiH,EAAYnB,IAAI,oBAAsBZ,EAAI84B,eAAe,CACvD14B,KAAM,YACN4jB,WAAYjiB,EAAYb,KACxBA,KAAM4iH,GAGZ,CAEA,SAASV,EAAuBrhH,EAAa+hH,EAAU9jH,GAErD,IAAImH,EAAKnH,EAAIujB,QAAQ0hD,QAAQ8+C,iBAAiB,GAExC58G,GAAMA,EAAG68G,eACbjiH,EAAYnB,IAAI,oBAAsBZ,EAAI84B,eAAe,CACvD14B,KAAM,WACN4jB,WAAYjiB,EAAYb,KACxBA,KAAM4iH,GAGZ,CAEAhjH,EAAOvB,QAAUsB,C,wBClSjB,IAAI0gH,EAAcpiH,EAAQ,OAEtBq/B,EAAUr/B,EAAQ,MAElBkwG,EAAmB7wE,EAAQ6wE,iBAC3BrJ,EAAkBxnE,EAAQwnE,gBAC1Bie,EAAwB1C,EAAYt8G,OAAO,CAC7C7E,KAAM,gBAKN8jH,mBAAoB,SAAUC,GAC5BzmH,KAAK6N,OAAO44G,gBAAkBA,CAChC,EACAp4G,cAAe,CACbo4G,gBAAiB,EACjBC,kBAAmB,EACnBC,cAAe,KACfC,mBAAoB,MAEpBC,cAAe,oBAEfC,UAAW,CACTj2B,WAAY,CAAC,qBAAsB,wBACnCC,SAAU,CAAC,oBAAqB,qBAElCi2B,cAAe,UACfC,sBAAuB,OACvBC,aAAc,GAEdC,cAAe,CACb36G,MAAO,QAETmuD,wBAAyB,KAM3BrxC,KAAM,SAAUxb,EAAQoJ,EAAa5U,EAAS8kH,GAC5C,IAAIC,EAAsB9e,EAAgBz6F,GAC1C04G,EAAsBz7F,UAAU9qB,KAAM,OAAQ6N,EAAQoJ,EAAa5U,EAAS8kH,GAC5EE,EAA8BrnH,KAAM6N,EAAQu5G,EAC9C,EAKA5xF,YAAa,SAAU3nB,EAAQs5G,GAC7BZ,EAAsBz7F,UAAU9qB,KAAM,cAAe6N,EAAQs5G,GAC7DE,EAA8BrnH,KAAMA,KAAK6N,OAAQA,EACnD,EACAorF,UAAW,WACT,MAA8B,aAAvBj5F,KAAKkD,IAAI,UAA2B,CACzCoN,MAAO,EACP9M,KAAM,YACJ,CACF8M,MAAO,EACP9M,KAAM,aAEV,IAGF,SAAS6jH,EAA8BzC,EAAa9uG,EAAQwxG,GAC1D,IAAI1uD,EAASgsD,EAAY3rB,YACrB2Y,EAAa,CAAC,EAAG,GACrBA,EAAWh5C,EAAOtoD,OAAS,EAC3BqhG,EAAiB77F,EAAQwxG,EAAK,CAC5B5kH,KAAM,MACNkvG,WAAYA,GAEhB,CAEA,IAAIzuG,EAAWojH,EACfnjH,EAAOvB,QAAUsB,C,wBC3EjB,IAAIrB,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElB0tG,EAAa1tG,EAAQ,MAErB8lH,EAAa9lH,EAAQ,OAKrB2V,EAAQxP,EAAQwP,MAChBukE,EAAK,CAAC,QAAS,UACfD,EAAK,CAAC,IAAK,KACX8rC,EAAuBD,EAAWhgH,OAAO,CAC3C7E,KAAM,gBACN8hH,iBAAiB,EACjBn7F,KAAM,WACJm+F,EAAqB18F,UAAU9qB,KAAM,QAMrCA,KAAKynH,cAAgB,EAMrBznH,KAAKqI,MAAMc,IAAInJ,KAAK8kE,gBAAkB,IAAI1tD,GAE1CpX,KAAK8kE,gBAAgB37D,IAAInJ,KAAK2kH,mBAO9B3kH,KAAKqI,MAAMc,IAAInJ,KAAK0nH,iBAAmB,IAAItwG,GAM3CpX,KAAK2nH,eACP,EAKA9C,WAAY,WACV2C,EAAqB18F,UAAU9qB,KAAM,cAErCA,KAAK0nH,iBAAiBn9G,YAEtBvK,KAAK8kE,gBAAgB5Z,iBAErBlrD,KAAK8kE,gBAAgB8iD,WAAa,IACpC,EAKA7C,YAAa,SAAUD,EAAWF,EAAaviH,EAASC,GACtD,IAAIulH,EAAK7nH,KAETwnH,EAAqB18F,UAAU9qB,KAAM,cAAe8kH,EAAWF,EAAaviH,EAASC,GACrF,IAAIwlH,EAAkB9nH,KAAK0nH,iBACvBT,EAAerC,EAAY1hH,IAAI,gBAAgB,GAE9CpB,EAAO6Q,QAAQs0G,KAClBA,EAAe,CAACA,EAAcA,IAGhCc,EAAiB,WAAY,GAC7B,IAAIC,EAAqBpD,EAAYj4G,SAAS,iBAa9C,SAASo7G,EAAiBvkH,EAAMykH,GAC9B,IAAIC,EAAoB1kH,EAAO,YAC3B0wE,EAAOtsE,EAAQiwE,WAAW+sC,EAAY1hH,IAAI,aAAa,GAAM0hH,EAAY3rB,YAAYz1F,MAAMykH,GAAU,CAGvG9mD,QAASr/D,EAAO2B,KAAKokH,EAAGM,QAASN,EAAIK,EAAmBtD,EAAatiH,IACpE,CACD2J,GAAIg7G,EAAa,GAAK,EACtB/6G,GAAI+6G,EAAa,GAAK,EACtB17G,MAAO07G,EAAa,GACpBj7G,OAAQi7G,EAAa,KAEvB/yC,EAAK1wE,KAAOA,EACZskH,EAAgB3+G,IAAI+qE,EACtB,CA1BA4zC,EAAgB3+G,IAAI,IAAIvB,EAAQgc,KAAK,CACnCpgB,KAAM,WACN6H,MAAO,CACLuZ,SAAUojG,EAAmB/2E,eAC7B/qB,KAAM8hG,EAAmB1gG,UACzBkG,kBAAmB,SACnBD,UAAW,UAEb9W,QAAQ,KAEVsxG,EAAiB,WAAY,EAiB/B,EAKA9C,YAAa,SAAUL,EAAaE,EAAWr5F,GAC7C,IAAIy5F,EAAellH,KAAK2kH,kBACpBtlD,EAAiBr/D,KAAK8kE,gBACtBgjD,EAAkB9nH,KAAK0nH,iBACvBU,EAAYxD,EAAY3rB,YAAY3oF,MACpCD,EAAKsrE,EAAGysC,GACRC,EAAK1sC,EAAG,EAAIysC,GACZE,EAAK5sC,EAAG,EAAI0sC,GAEhBjZ,EAAW5uC,IAAIqkD,EAAY1hH,IAAI,UAAWgiH,EAAcN,EAAY1hH,IAAI,WAAaklH,EAAmB38F,EAAQlgB,MAAf,KAAsB68G,EAAY,KAAO38F,EAAQzf,QAClJmjG,EAAW5uC,IACX,aAAcunD,EAAiBlD,EAAY1hH,IAAI,qBAAqB,IACpE,IAAIijH,EAAcjB,EAAavoF,kBAC3B4rF,EAAiBT,EAAgBnrF,kBACjC6rF,EAAiBxoH,KAAK2nH,gBAAkBxB,EAAY91G,GAAMob,EAAQpb,GAClEo4G,EAAa,EAAEtC,EAAYl6G,GAAIk6G,EAAYj6G,GAE/Cu8G,EAAWL,GAAalD,EAAax+G,SAAS0hH,GAE9C,IAAIM,EAAe,CAAC,EAAG,GACnBC,EAAgB,EAAEJ,EAAet8G,GAAIs8G,EAAer8G,GACpDy6G,EAAgB7kH,EAAO0e,UAAUokG,EAAY1hH,IAAI,iBAAiB,GAAO0hH,EAAY1hH,IAAI,WAAW,IAExG,GAAIslH,EAAgB,CAClB,IAAI5B,EAAqBhC,EAAY1hH,IAAI,sBAAsB,GAEpC,QAAvB0jH,EACF+B,EAAcP,IAAc38F,EAAQpb,GAAMk4G,EAAel4G,GAGvDq4G,EAAaN,IAAcG,EAAel4G,GAAMs2G,CAEtD,CAGAgC,EAAc,EAAIP,IAAcjC,EAAYkC,GAAM,EAAIE,EAAeF,GAAM,EAC3EnD,EAAa93G,KAAK,WAAYq7G,GAC9BppD,EAAejyD,KAAK,WAAYs7G,GAChCZ,EAAgB16G,KAAK,WAAYu7G,GAIjC,IAAI3D,EAAWhlH,KAAKqI,MAAMs0B,kBACtBqoF,EAAW,CACb/4G,EAAG,EACHC,EAAG,GASL,GANA84G,EAAS30G,GAAMm4G,EAAiB/8F,EAAQpb,GAAM81G,EAAY91G,GAC1D20G,EAASqD,GAAM7hH,KAAKF,IAAI6/G,EAAYkC,GAAKE,EAAeF,IAExDrD,EAASsD,GAAM9hH,KAAKJ,IAAI,EAAGmiH,EAAeD,GAAMK,EAAc,EAAIP,IAClE/oD,EAAeuoD,WAAan8F,EAAQpb,GAEhCm4G,EAAgB,CAClB,IAAI1zG,EAAY,CACd7I,EAAG,EACHC,EAAG,GAEL4I,EAAUzE,GAAM7J,KAAKF,IAAImlB,EAAQpb,GAAMk4G,EAAel4G,GAAMs2G,EAAe,GAC3E7xG,EAAUuzG,GAAMrD,EAASqD,GACzBhpD,EAAevoD,YAAY,IAAIlP,EAAQ+C,KAAK,CAC1CV,MAAO6K,KAITuqD,EAAeuoD,WAAa9yG,EAAUzE,EACxC,MAEEy3G,EAAgB/7E,WAAU,SAAUvjB,GAClCA,EAAMpb,KAAK,CACTy6D,WAAW,EACXpxD,QAAQ,GAEZ,IAIF,IAAImyG,EAAW5oH,KAAK6oH,aAAajE,GAUjC,OARsB,MAAtBgE,EAASE,WAAqBlhH,EAAQoC,YAAYk7G,EAAc,CAC9Dx+G,SAAUkiH,EAASG,mBAGrBP,GAAiB5D,GAEjB5kH,KAAKgpH,oBAAoBpE,EAAagE,GAE/B5D,CACT,EACAmD,QAAS,SAAUlL,EAAI2H,EAAatiH,GAClC,IAAImkH,EAAkBzmH,KAAK6oH,aAAajE,GAAa3H,GAElC,MAAnBwJ,GAA2BnkH,EAAI84B,eAAe,CAC5C14B,KAAM,eACN+jH,gBAAiBA,EACjBwC,SAAUrE,EAAYv+F,IAE1B,EACA2iG,oBAAqB,SAAUpE,EAAagE,GAC1C,IAAId,EAAkB9nH,KAAK0nH,iBAC3B5lH,EAAOU,KAAK,CAAC,WAAY,aAAa,SAAUgB,GAC9C,IAAI0lH,EAA0C,MAAhCN,EAASplH,EAAO,aAC1B0wE,EAAO4zC,EAAgBx4E,YAAY9rC,GAEnC0wE,IACFA,EAAKh/D,SAAS,OAAQg0G,EAAUtE,EAAY1hH,IAAI,iBAAiB,GAAQ0hH,EAAY1hH,IAAI,yBAAyB,IAClHgxE,EAAKj8D,OAASixG,EAAU,UAAY,UAExC,IACA,IAAIC,EAAWrB,EAAgBx4E,YAAY,YACvCu3E,EAAgBjC,EAAY1hH,IAAI,iBAChC4lH,EAAYF,EAASE,UACrBxpE,EAAuB,MAAbwpE,EAAoBA,EAAY,EAAI,EAC9CM,EAAQR,EAASS,UACrBF,GAAYtC,GAAiBsC,EAASj0G,SAAS,OAAQpT,EAAOwiF,SAASuiC,GAAiBA,EAAcz1F,QAAQ,YAAakuB,GAASluB,QAAQ,UAAWg4F,GAASvC,EAAc,CAC5KvnE,QAASA,EACT8pE,MAAOA,IAEX,EAYAP,aAAc,SAAUjE,GAEtB,IASIkE,EACAQ,EACAC,EACAC,EAZAC,EAAgB7E,EAAY1hH,IAAI,mBAAmB,GACnDgiH,EAAellH,KAAK2kH,kBACpBwB,EAAcjB,EAAavoF,kBAC3B+sF,EAAoB1pH,KAAK8kE,gBAAgB8iD,WACzCQ,EAAYxD,EAAY3rB,YAAY3oF,MACpCD,EAAKsrE,EAAGysC,GACRC,EAAK1sC,EAAG,EAAIysC,GACZh4G,EAAKsrE,EAAG0sC,GACRK,EAAavD,EAAax+G,SAAS1D,QAMnChD,KAAK2nH,gBACPzC,EAAan5E,WAAU,SAAUvjB,GAC3BA,EAAM09F,oBAAsBuD,IAC9BD,EAAkBhhG,EAEtB,IAEAghG,EAAkBtE,EAAa/pG,QAAQ,GAGzC,IAAIkuG,EAAYK,EAAoBljH,KAAK+R,KAAK4tG,EAAY91G,GAAMq5G,GAAqB,EAErF,GAAIF,EAAiB,CACnB,IAAIG,EAAWH,EAAgB7sF,kBAC3BitF,EAAUJ,EAAgB9iH,SAAS0hH,GAAauB,EAASv5G,GAC7Dq4G,EAAWL,IAAcwB,EAAUzD,EAAY/1G,GAC/C04G,EAAYtiH,KAAKy+B,MAAMokF,GAAaO,EAAUD,EAASv5G,GAAMs5G,EAAoB,GAAKvD,EAAY91G,IAClGy4G,EAAY3C,EAAY91G,IAAOg5G,EAAY7iH,KAAKF,IAAI,EAAGE,KAAKJ,IAAIijH,EAAY,EAAGP,KAAe,EAC9F,IAOIe,EAPAC,EAAU,CACZ79G,EAAG,EACHC,EAAG,GAEL49G,EAAQz5G,GAAMq5G,EACdI,EAAQzB,GAAMlC,EAAYkC,GAC1ByB,EAAQ15G,IAAOq4G,EAAWL,GAAajC,EAAY/1G,GAEnD,IAAIsH,EAAWwtG,EAAaxtG,WAkB5B,GAjBAwtG,EAAan5E,WAAU,SAAUvjB,EAAOlY,GACtC,IAAIq5G,EAAWI,EAAYvhG,GAEvBmhG,EAASp4C,UAAUu4C,KACT,MAAZD,IAAqBA,EAAWv5G,GAGhCi5G,EAAoB/gG,EAAM09F,mBAIxB51G,IAAUoH,EAASvD,OAAS,GAAKw1G,EAASv5G,GAAMu5G,EAASt5G,IAAOy5G,EAAQ15G,GAAM05G,EAAQz5G,KACxFk5G,EAAoB,KAExB,IAGgB,MAAZM,EAAkB,CACpB,IAAIG,EAAYtyG,EAASmyG,GACrBI,EAAYF,EAAYC,GAG5B,GAFAF,EAAQ15G,GAAM65G,EAAU75G,GAAM65G,EAAU55G,GAAMy5G,EAAQz5G,GAElDw5G,GAAY,GAAKI,EAAU75G,IAAO05G,EAAQ15G,GAC5Ck5G,EAAoB,SACf,CACL,MAAOO,EAAW,GAAKE,EAAYryG,EAASmyG,EAAW,IAAIt4C,UAAUu4C,GACnED,IAGFP,EAAoB5xG,EAASmyG,GAAU3D,iBACzC,CACF,CACF,CAEA,MAAO,CACL6C,gBAAiBN,EACjBK,UAAWA,EACXO,UAAWA,EACXC,kBAAmBA,EACnBC,kBAAmBA,GAGrB,SAASQ,EAAYtgH,GACnB,IAAIkgH,EAAWlgH,EAAGkzB,kBAAkBpY,QAEpC,OADAolG,EAASv5G,IAAO3G,EAAG/C,SAAS0hH,GACrBuB,CACT,CACF,IAEExmH,EAAWqkH,EACfpkH,EAAOvB,QAAUsB,C,wBC7UjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAErB,SAASyoH,EAA0BC,EAAYpmH,EAAS1B,GACtD,IAEIsC,EAFAylH,EAAc,CAAC,EACfC,EAAgC,mBAAfF,EAkCrB,OA/BA9nH,EAAQ4B,cAAc,UAAU,SAAU2gH,GACpCyF,GAAgC,MAAd1lH,EAKpBigH,EAAYjgH,EAAa,SAAW,YAAYZ,EAAQP,OAExDohH,EAAYuF,GAAYpmH,EAAQP,MAChCmB,EAAaigH,EAAYjgH,WAAWZ,EAAQP,OAG9C,IAAIugH,EAAaa,EAAYpgH,UAC7B1C,EAAOU,KAAKuhH,GAAY,SAAU9tF,GAChC,IAAIzyB,EAAOyyB,EAAM/yB,IAAI,QAErB,GAAa,OAATM,GAA0B,KAATA,EAArB,CAIA,IAAI8mH,EAAiB1F,EAAYjgH,WAAWnB,GAExC4mH,EAAYxoH,eAAe4B,GAE7B4mH,EAAY5mH,GAAQ4mH,EAAY5mH,IAAS8mH,EAEzCF,EAAY5mH,GAAQ8mH,CARtB,CAUF,GACF,IAEO,CACL9mH,KAAMO,EAAQP,KACdQ,SAAUomH,EAEd,CAUA1mH,EAAQI,eAAe,qBAAsB,sBAAuBhC,EAAOoF,MAAMgjH,EAA2B,mBAQ5GxmH,EAAQI,eAAe,eAAgB,iBAAkBhC,EAAOoF,MAAMgjH,EAA2B,WAQjGxmH,EAAQI,eAAe,iBAAkB,mBAAoBhC,EAAOoF,MAAMgjH,EAA2B,Y,mBCtErG,SAAS/mH,EAASd,GAChB,IAAIy9B,EAAez9B,EAAQ09B,eAAe,CACxC77B,SAAU,WAGR47B,GAAgBA,EAAa3rB,QAC/B9R,EAAQkoH,cAAa,SAAUzoG,GAG7B,IAAK,IAAI7L,EAAI,EAAGA,EAAI6pB,EAAa3rB,OAAQ8B,IACvC,IAAK6pB,EAAa7pB,GAAGtR,WAAWmd,EAAOte,MACrC,OAAO,EAIX,OAAO,CACT,GAEJ,CAEAJ,EAAOvB,QAAUsB,C,wBCpBjB,IAAIO,EAAUjC,EAAQ,OAQtBiC,EAAQI,eAAe,eAAgB,gBAAgB,SAAUC,EAAS1B,GACxE,IAAIokH,EAAkB1iH,EAAQ0iH,gBACX,MAAnBA,GAA2BpkH,EAAQ4B,cAAc,CAC/CC,SAAU,SACVC,QAAS,SACTC,MAAOL,IACN,SAAU6gH,GACXA,EAAY4B,mBAAmBC,EACjC,GACF,G,wBCjBA,IAAI/iH,EAAUjC,EAAQ,OAEtBA,EAAQ,OAERA,EAAQ,OAERiC,EAAQ+b,sBAAqB,SAAU1O,GAErCA,EAAIy5G,SAAWz5G,EAAIy5G,UAAY,CAAC,CAClC,G,wBCTA,IAAI9mH,EAAUjC,EAAQ,OAEtBA,EAAQ,OAERA,EAAQ,OAERiC,EAAQ+b,sBAAqB,SAAU1O,GAErCA,EAAI05G,SAAW15G,EAAI05G,UAAY,CAAC,CAClC,G,wBCTA,IAAI/mH,EAAUjC,EAAQ,OAEtBA,EAAQ,OAERA,EAAQ,OAGRiC,EAAQ+b,sBAAqB,SAAU1O,GAErCA,EAAI25G,UAAY35G,EAAI25G,WAAa,CAAC,CACpC,G,wBCVA,IAAIC,EAAclpH,EAAQ,OAEtB0B,EAAWwnH,EAAYpjH,OAAO,CAChC7E,KAAM,WACN2L,cAAe,CACbC,OAAQ,EAERC,EAAG,EACH+qC,QAAS,CACPpjC,QAAS,QAGX6zC,WAAW,EACXp/B,MAAO,CACL5Q,OAAQ,CACN2Q,MAAM,EACNhkB,SAAU,OAEZuT,SAAU,CACRyQ,MAAM,EACNhkB,SAAU,QAGdiI,UAAW,CACToL,OAAQ,CAINC,YAAa,OAMrB5W,EAAOvB,QAAUsB,C,wBClCjB,IAAIrB,EAASL,EAAQ,OAEjBmpH,EAAYnpH,EAAQ,MAEpBqoB,EAAOroB,EAAQ,OAEfk3D,EAAal3D,EAAQ,OAErBmG,EAAUnG,EAAQ,OAElBopH,EAAeppH,EAAQ,OAEvBqpH,EAAarpH,EAAQ,OAGrBspH,EAAoB,SAAU1mH,EAAavB,EAAUkoH,EAAS1iG,GAChE,IAAI2iG,EAAKJ,EAAaK,cAAc7mH,EAAaikB,EAAK,IAClD6iG,EAAKN,EAAaK,cAAc7mH,EAAaikB,EAAK,IAClDtU,EAAWlS,EAAOkS,SAElBo3G,EAAUH,EAAGtiH,MACb0iH,EAAUF,EAAGxiH,MACjByiH,EAAQ,GAAKp3G,EAASo3G,EAAQ,IAAK7kH,KACnC6kH,EAAQ,GAAKp3G,EAASo3G,EAAQ,IAAK7kH,KACnC8kH,EAAQ,GAAKr3G,EAASq3G,EAAQ,GAAI9kH,KAClC8kH,EAAQ,GAAKr3G,EAASq3G,EAAQ,GAAI9kH,KAElC,IAAI0V,EAASna,EAAO0hD,SAAS,CAAC,CAAC,EAAGynE,EAAIE,IAMtC,OALAlvG,EAAOtT,MAAQ,CAACsiH,EAAGtiH,MAAOwiH,EAAGxiH,OAC7BsT,EAAO0T,GAAKs7F,EAAGh/G,EACfgQ,EAAOmyB,GAAK68E,EAAG/+G,EACf+P,EAAO8S,GAAKo8F,EAAGl/G,EACfgQ,EAAO+S,GAAKm8F,EAAGj/G,EACR+P,CACT,EAEA,SAASqvG,EAAYntG,GACnB,OAAQE,MAAMF,KAAS4yB,SAAS5yB,EAClC,CAGA,SAASotG,EAAqBz0E,EAAU00E,EAAWC,EAAS3oH,GAC1D,IAAI4oH,EAAgB,EAAI50E,EACxB,OAAOw0E,EAAYE,EAAUE,KAAmBJ,EAAYG,EAAQC,GACtE,CAEA,SAASC,EAAe7oH,EAAUwlB,GAChC,IAAIkjG,EAAYljG,EAAK3f,MAAM,GACvB8iH,EAAUnjG,EAAK3f,MAAM,GAEzB,QAAsB,gBAAlB7F,EAASJ,OAOP8oH,IAAaC,IAAYF,EAAqB,EAAGC,EAAWC,EAAS3oH,KAAayoH,EAAqB,EAAGC,EAAWC,EAAS3oH,MAK7H+nH,EAAajhG,WAAW9mB,EAAU,CACvC6F,MAAO6iH,EACPv/G,EAAGqc,EAAKqH,GACRzjB,EAAGoc,EAAK8lB,MACJy8E,EAAajhG,WAAW9mB,EAAU,CACtC6F,MAAO8iH,EACPx/G,EAAGqc,EAAKyG,GACR7iB,EAAGoc,EAAK0G,KAEZ,CAGA,SAAS48F,EAAwBhrH,EAAM6D,EAAKs8C,EAAM18C,EAAa/B,GAC7D,IAEIwD,EAFAhD,EAAWuB,EAAYa,iBACvBmE,EAAYzI,EAAK0I,aAAa7E,GAE9BonH,EAAMlzD,EAAW1oD,aAAa5G,EAAUnG,IAAI69C,EAAK,IAAKz+C,EAAI2O,YAC1D66G,EAAMnzD,EAAW1oD,aAAa5G,EAAUnG,IAAI69C,EAAK,IAAKz+C,EAAI4O,aAE9D,GAAKmN,MAAMwtG,IAASxtG,MAAMytG,GAEnB,CAEL,GAAIznH,EAAYyJ,kBAEdhI,EAAQzB,EAAYyJ,kBAAkBlN,EAAKq/E,UAAUl/B,EAAMt8C,QACtD,CACL,IAAIwH,EAAIrL,EAAKsC,IAAI69C,EAAK,GAAIt8C,GACtByH,EAAItL,EAAKsC,IAAI69C,EAAK,GAAIt8C,GAC1BqB,EAAQhD,EAASiD,YAAY,CAACkG,EAAGC,IAAI,EACvC,CAEA,GAAsB,gBAAlBpJ,EAASJ,KAAwB,CACnC,IAAIokC,EAAQhkC,EAASikC,QAAQ,KACzBC,EAAQlkC,EAASikC,QAAQ,KACzB96B,EAAIrL,EAAKsC,IAAI69C,EAAK,GAAIt8C,GACtByH,EAAItL,EAAKsC,IAAI69C,EAAK,GAAIt8C,GAEtB6mH,EAAYr/G,GACdnG,EAAM,GAAKghC,EAAM3zB,cAAc2zB,EAAMpqB,YAAwB,OAAZqkC,EAAK,GAAc,EAAI,IAC/DuqE,EAAYp/G,KACrBpG,EAAM,GAAKkhC,EAAM7zB,cAAc6zB,EAAMtqB,YAAwB,OAAZqkC,EAAK,GAAc,EAAI,IAE5E,CAGK1iC,MAAMwtG,KACT/lH,EAAM,GAAK+lH,GAGRxtG,MAAMytG,KACThmH,EAAM,GAAKgmH,EAEf,MAjCEhmH,EAAQ,CAAC+lH,EAAKC,GAmChB,OAAOhmH,CACT,CAEA,IAAIimH,EAAkB,CAAC,CAAC,KAAM,MAAO,CAAC,KAAM,MAAO,CAAC,KAAM,MAAO,CAAC,KAAM,OAmGxE,SAASC,EAAWlpH,EAAUuB,EAAa2mH,GACzC,IAAIiB,EACAC,EACAnrE,EAAO,CAAC,KAAM,KAAM,KAAM,MAE1Bj+C,GACFmpH,EAAiBnqH,EAAO41B,IAAI50B,GAAYA,EAAS+W,YAAY,SAAU4D,GACrE,IAAImyD,EAAOvrE,EAAYG,UAAUgZ,iBAAiBnZ,EAAYijC,kBAAkB7pB,GAAU,KAAO,CAAC,EAGlG,OADAmyD,EAAKpsE,KAAOia,EACLmyD,CACT,IACAs8C,EAAW,IAAIpiG,EAAKhoB,EAAO41B,IAAIqpB,GAAM,SAAUh4C,EAAKtE,GAClD,MAAO,CACLjB,KAAMuF,EACNrG,KAAMupH,EAAexnH,EAAM,GAAG/B,KAElC,IAAIsoH,KAEJiB,EAAiB,CAAC,CAChBzoH,KAAM,QACNd,KAAM,UAERwpH,EAAW,IAAIpiG,EAAKmiG,EAAgBjB,IAGtC,IAAImB,EAAUrqH,EAAO41B,IAAIszF,EAAQ9nH,IAAI,QAASpB,EAAOoF,MAAM6jH,EAAmB1mH,EAAavB,EAAUkoH,IAEjGloH,IACFqpH,EAAUrqH,EAAOywD,OAAO45D,EAASrqH,EAAOoF,MAAMykH,EAAgB7oH,KAGhE,IAAI8zC,EAAiB9zC,EAAW,SAAUwlB,EAAMhL,EAAS/Y,EAAWuyC,GAClE,OAAOxuB,EAAK3f,MAAMnC,KAAKy+B,MAAM6R,EAAW,IAAIA,EAAW,EACzD,EAAI,SAAUxuB,GACZ,OAAOA,EAAKva,KACd,EAGA,OAFAm+G,EAAS5hG,SAAS6hG,EAAS,KAAMv1E,GACjCs1E,EAASzkF,eAAgB,EAClBykF,CACT,CA1IApB,EAAWvjH,OAAO,CAChB7E,KAAM,WACN+mB,aAAc,SAAU2iG,EAAe/pH,EAASC,GAC9CD,EAAQ4gF,YAAW,SAAU5+E,GAC3B,IAAI2mH,EAAU3mH,EAAY+nH,cAE1B,GAAIpB,EAAS,CACX,IAAIkB,EAAWlB,EAAQxmH,UACvB0nH,EAAS1pH,MAAK,SAAUiC,GACtB,IAAIkoB,EAAS7qB,EAAO41B,IAAIq0F,GAAiB,SAAUhjH,GACjD,OAAO6iH,EAAwBM,EAAUznH,EAAKsE,EAAK1E,EAAa/B,EAClE,IAEA4pH,EAASttG,cAAcna,EAAKkoB,GAC5B,IAAIljB,EAAKyiH,EAASniH,iBAAiBtF,GACnCgF,EAAGqD,SAAS,SAAU6f,EACxB,GACF,CACF,GAAG3sB,KACL,EACAqsH,aAAc,SAAUhoH,EAAa2mH,EAAS3oH,EAASC,GACrD,IAAIQ,EAAWuB,EAAYa,iBACvBohB,EAAajiB,EAAYb,KACzB2gF,EAAa9/E,EAAYG,UACzB8nH,EAAetsH,KAAKusH,eACpBC,EAAeF,EAAappH,IAAIojB,IAAegmG,EAAajxG,IAAIiL,EAAY,CAC9Eje,MAAO,IAAIT,EAAQwP,QAErBpX,KAAKqI,MAAMc,IAAIqjH,EAAankH,OAC5BmkH,EAAaC,QAAS,EACtB,IAAIP,EAAWF,EAAWlpH,EAAUuB,EAAa2mH,GAEjDA,EAAQliE,QAAQojE,GAEhBA,EAAS1pH,MAAK,SAAUiC,GAEtBynH,EAASttG,cAAcna,EAAK3C,EAAO41B,IAAIq0F,GAAiB,SAAUhjH,GAChE,OAAO6iH,EAAwBM,EAAUznH,EAAKsE,EAAK1E,EAAa/B,EAClE,KAEA4pH,EAAS7sG,cAAc5a,EAAK,CAC1B8H,MAAO43E,EAAW5qD,UAAU,UAEhC,IACA2yF,EAAShjH,KAAKsjH,EAAaE,QAAQvjH,KAAI,SAAU1E,GAC/C,IAAIsnB,EAAU,IAAInkB,EAAQokB,QAAQ,CAChC/hB,MAAO,CACL0iB,OAAQu/F,EAASvgH,cAAclH,MAGnCynH,EAASviH,iBAAiBlF,EAAKsnB,GAC/BygG,EAAankH,MAAMc,IAAI4iB,EACzB,IAAGlpB,QAAO,SAAU6lB,EAAQC,GAC1B,IAAIoD,EAAUygG,EAAaE,OAAO3iH,iBAAiB4e,GAEnD/gB,EAAQoC,YAAY+hB,EAAS,CAC3B9hB,MAAO,CACL0iB,OAAQu/F,EAASvgH,cAAc+c,KAEhCsiG,EAAStiG,GACZ8jG,EAAankH,MAAMc,IAAI4iB,GACvBmgG,EAASviH,iBAAiB+e,EAAQqD,EACpC,IAAG7hB,QAAO,SAAUzF,GAClB,IAAIsnB,EAAUygG,EAAaE,OAAO3iH,iBAAiBtF,GAEnD+nH,EAAankH,MAAM6B,OAAO6hB,EAC5B,IAAG1hB,UACH6hH,EAAS5hH,mBAAkB,SAAUyhB,EAAStnB,GAC5C,IAAI4E,EAAY6iH,EAAS5iH,aAAa7E,GAClCmU,EAAavP,EAAUsD,SAAS,gBAChCugB,EAAkB7jB,EAAUsD,SAAS,kBACrCJ,EAAQ2/G,EAAS1/G,cAAc/H,EAAK,SACxCsnB,EAAQhf,SAASjL,EAAOkL,SAAS3D,EAAUsD,SAAS,oBAAoBoL,eAAgB,CACtF9K,KAAM29G,EAAU73C,YAAYxmE,EAAO,IACnCmK,OAAQnK,KAEVwf,EAAQnf,WAAavD,EAAUsD,SAAS,sBAAsBoL,eAC9DnQ,EAAQkR,cAAciT,EAAQ1gB,MAAO0gB,EAAQnf,WAAYgM,EAAYsU,EAAiB,CACpFnU,aAAciyG,EACdhyG,eAAgBvU,EAChBwU,YAAaizG,EAASxnH,QAAQD,IAAQ,GACtC0U,YAAY,EACZC,UAAW7M,IAEb3E,EAAQ0F,cAAcye,EAAS,CAAC,GAChCA,EAAQ4gG,UAAY3B,CACtB,IACAwB,EAAaE,OAASR,EACtBM,EAAankH,MAAMoO,OAASu0G,EAAQ9nH,IAAI,WAAamB,EAAYnB,IAAI,SACvE,G,wBClNF,IAAIynH,EAAclpH,EAAQ,OAEtB0B,EAAWwnH,EAAYpjH,OAAO,CAChC7E,KAAM,WACN2L,cAAe,CACbC,OAAQ,EACRC,EAAG,EACHM,OAAQ,CAAC,SAAU,SACnBC,WAAY,CAAC,EAAG,IAEhBklE,UAAW,EACX16B,QAAS,CACPpjC,QAAS,QAEXyU,MAAO,CACL5Q,OAAQ,CACN2Q,MAAM,EACNhkB,SAAU,OAEZuT,SAAU,CACRyQ,MAAM,IAGVmB,UAAW,CACT9R,OAAQ,CACNrX,KAAM,UAERuX,SAAU,CACR1O,MAAO,IAGX+O,gBAAiB,YAIrBlX,EAAOvB,QAAUsB,C,wBCnCjB,IAAIrB,EAASL,EAAQ,OAEjBqoB,EAAOroB,EAAQ,OAEfk3D,EAAal3D,EAAQ,OAErBopH,EAAeppH,EAAQ,OAEvBo3B,EAAWp3B,EAAQ,OAEnBqpH,EAAarpH,EAAQ,OAErBmrH,EAAoB,SAAUvoH,EAAavB,EAAU+pH,EAASvkG,GAChE,IAAI1nB,EAAOyD,EAAYG,UAEnBsoH,EAASxkG,EAAK5lB,KAElB,IAAKZ,EAAO6Q,QAAQ2V,KAAqB,QAAXwkG,GAA+B,QAAXA,GAA+B,YAAXA,GAIrD,MAAdxkG,EAAKwe,OAA+B,MAAdxe,EAAK0e,OAAgB,CAC5C,IACI+lF,EACAh/G,EAEJ,GAAkB,MAAdua,EAAK0e,OAA+B,MAAd1e,EAAKwe,MAC7BimF,EAA6B,MAAdzkG,EAAK0e,MAAgB,IAAM,IAC9BlkC,EAASikC,QAAQgmF,GAC7Bh/G,EAAQjM,EAAOkS,SAASsU,EAAK0e,MAAO1e,EAAKwe,WACpC,CACL,IAAIg2C,EAAW+tC,EAAatzC,YAAYjvD,EAAM1nB,EAAMkC,EAAUuB,GAC9D0oH,EAAejwC,EAASiwC,aACZjwC,EAAS9pE,UACrBjF,EAAQ88G,EAAamC,aAAapsH,EAAMmsH,EAAcD,EACxD,CAEA,IAAIG,EAA8B,MAAjBF,EAAuB,EAAI,EACxCtwE,EAAY,EAAIwwE,EAChBC,EAASprH,EAAOyiB,MAAM+D,GACtB6kG,EAAO,CAAC,EACZD,EAAOxqH,KAAO,KACdwqH,EAAOvkH,MAAQ,GACfwkH,EAAKxkH,MAAQ,GACbukH,EAAOvkH,MAAM8zC,IAAcl2C,IAC3B4mH,EAAKxkH,MAAM8zC,GAAal2C,IACxB,IAAIytE,EAAY64C,EAAQ3pH,IAAI,aAExB8wE,GAAa,GAAsB,kBAAVjmE,IAC3BA,GAASA,EAAMmd,QAAQ1kB,KAAKJ,IAAI4tE,EAAW,MAG7Ck5C,EAAOvkH,MAAMskH,GAAcE,EAAKxkH,MAAMskH,GAAcl/G,EACpDua,EAAO,CAAC4kG,EAAQC,EAAM,CAEpBzqH,KAAMoqH,EACNG,WAAY3kG,EAAK2kG,WAEjBl/G,MAAOA,GAEX,CAQA,OANAua,EAAO,CAACuiG,EAAaK,cAAc7mH,EAAaikB,EAAK,IAAKuiG,EAAaK,cAAc7mH,EAAaikB,EAAK,IAAKxmB,EAAOyF,OAAO,CAAC,EAAG+gB,EAAK,KAEnIA,EAAK,GAAG5lB,KAAO4lB,EAAK,GAAG5lB,MAAQ,GAE/BZ,EAAOqwF,MAAM7pE,EAAK,GAAIA,EAAK,IAC3BxmB,EAAOqwF,MAAM7pE,EAAK,GAAIA,EAAK,IACpBA,CACT,EAEA,SAASgjG,EAAYntG,GACnB,OAAQE,MAAMF,KAAS4yB,SAAS5yB,EAClC,CAGA,SAASotG,EAAqBz0E,EAAU00E,EAAWC,EAAS3oH,GAC1D,IAAI4oH,EAAgB,EAAI50E,EACpBx5B,EAAUxa,EAAS+W,WAAWi9B,GAClC,OAAOw0E,EAAYE,EAAUE,KAAmBJ,EAAYG,EAAQC,KAAmBF,EAAU10E,KAAc20E,EAAQ30E,IAAah0C,EAASikC,QAAQzpB,GAAS2gE,YAAYutC,EAAU10E,GACtL,CAEA,SAASs2E,EAAetqH,EAAUwlB,GAChC,GAAsB,gBAAlBxlB,EAASJ,KAAwB,CACnC,IAAI8oH,EAAYljG,EAAK,GAAG3f,MACpB8iH,EAAUnjG,EAAK,GAAG3f,MAOtB,GAAI6iH,GAAaC,IAAYF,EAAqB,EAAGC,EAAWC,EAAS3oH,IAAayoH,EAAqB,EAAGC,EAAWC,EAAS3oH,IAChI,OAAO,CAEX,CAEA,OAAO+nH,EAAajhG,WAAW9mB,EAAUwlB,EAAK,KAAOuiG,EAAajhG,WAAW9mB,EAAUwlB,EAAK,GAC9F,CAEA,SAAS+kG,EAA4BzsH,EAAM6D,EAAK6oH,EAAQjpH,EAAa/B,GACnE,IAEIwD,EAFAhD,EAAWuB,EAAYa,iBACvBmE,EAAYzI,EAAK0I,aAAa7E,GAE9BonH,EAAMlzD,EAAW1oD,aAAa5G,EAAUnG,IAAI,KAAMZ,EAAI2O,YACtD66G,EAAMnzD,EAAW1oD,aAAa5G,EAAUnG,IAAI,KAAMZ,EAAI4O,aAE1D,GAAKmN,MAAMwtG,IAASxtG,MAAMytG,GAEnB,CAEL,GAAIznH,EAAYyJ,kBAEdhI,EAAQzB,EAAYyJ,kBAAkBlN,EAAKq/E,UAAUr/E,EAAKiZ,WAAYpV,QACjE,CACL,IAAIs8C,EAAOj+C,EAAS+W,WAChB5N,EAAIrL,EAAKsC,IAAI69C,EAAK,GAAIt8C,GACtByH,EAAItL,EAAKsC,IAAI69C,EAAK,GAAIt8C,GAC1BqB,EAAQhD,EAASiD,YAAY,CAACkG,EAAGC,GACnC,CAWA,GAAsB,gBAAlBpJ,EAASJ,KAAwB,CACnC,IAAIokC,EAAQhkC,EAASikC,QAAQ,KACzBC,EAAQlkC,EAASikC,QAAQ,KACzBga,EAAOj+C,EAAS+W,WAEhByxG,EAAY1qH,EAAKsC,IAAI69C,EAAK,GAAIt8C,IAChCqB,EAAM,GAAKghC,EAAM3zB,cAAc2zB,EAAMpqB,YAAY4wG,EAAS,EAAI,IACrDhC,EAAY1qH,EAAKsC,IAAI69C,EAAK,GAAIt8C,MACvCqB,EAAM,GAAKkhC,EAAM7zB,cAAc6zB,EAAMtqB,YAAY4wG,EAAS,EAAI,IAElE,CAGKjvG,MAAMwtG,KACT/lH,EAAM,GAAK+lH,GAGRxtG,MAAMytG,KACThmH,EAAM,GAAKgmH,EAEf,MA1CEhmH,EAAQ,CAAC+lH,EAAKC,GA4ChBlrH,EAAKge,cAAcna,EAAKqB,EAC1B,CAEA,IAAI3C,EAAW2nH,EAAWvjH,OAAO,CAC/B7E,KAAM,WACN+mB,aAAc,SAAU8jG,EAAelrH,EAASC,GAC9CD,EAAQ4gF,YAAW,SAAU5+E,GAC3B,IAAIwoH,EAAUxoH,EAAYkpH,cAE1B,GAAIV,EAAS,CACX,IAAIW,EAASX,EAAQroH,UACjBipH,EAAWZ,EAAQa,OACnBC,EAASd,EAAQe,KAErBH,EAASjrH,MAAK,SAAUiC,GACtB4oH,EAA4BI,EAAUhpH,GAAK,EAAMJ,EAAa/B,GAC9D+qH,EAA4BM,EAAQlpH,GAAK,EAAOJ,EAAa/B,EAC/D,IAEAkrH,EAAOhrH,MAAK,SAAUiC,GACpB+oH,EAAO5uG,cAAcna,EAAK,CAACgpH,EAAS9hH,cAAclH,GAAMkpH,EAAOhiH,cAAclH,IAC/E,IACAzE,KAAKusH,eAAerpH,IAAImB,EAAYgiB,IAAIoD,cAC1C,CACF,GAAGzpB,KACL,EACAqsH,aAAc,SAAUhoH,EAAawoH,EAASxqH,EAASC,GACrD,IAAIQ,EAAWuB,EAAYa,iBACvBkhB,EAAW/hB,EAAYgiB,GACvB89D,EAAa9/E,EAAYG,UACzBqpH,EAAc7tH,KAAKusH,eACnBvyF,EAAW6zF,EAAY3qH,IAAIkjB,IAAaynG,EAAYxyG,IAAI+K,EAAU,IAAIyS,GAC1E74B,KAAKqI,MAAMc,IAAI6wB,EAAS3xB,OACxB,IAAImlH,EAASxB,EAAWlpH,EAAUuB,EAAawoH,GAC3CY,EAAWD,EAAOjmE,KAClBomE,EAASH,EAAOvQ,GAChBp0E,EAAW2kF,EAAO7uG,KACtBkuG,EAAQa,OAASD,EACjBZ,EAAQe,KAAOD,EAEfd,EAAQ/jE,QAAQjgB,GAChB,IAAI12B,EAAa06G,EAAQ3pH,IAAI,UACzB4L,EAAa+9G,EAAQ3pH,IAAI,cAsC7B,SAAS4qH,EAA0BltH,EAAM6D,EAAK6oH,GAC5C,IAAIjkH,EAAYzI,EAAK0I,aAAa7E,GAClC4oH,EAA4BzsH,EAAM6D,EAAK6oH,EAAQjpH,EAAa/B,GAC5D1B,EAAKye,cAAc5a,EAAK,CACtBqK,WAAYzF,EAAUnG,IAAI,eAAiB4L,EAAWw+G,EAAS,EAAI,GACnEz+G,OAAQxF,EAAUnG,IAAI,UAAU,IAASiP,EAAWm7G,EAAS,EAAI,GACjE/gH,MAAOlD,EAAUnG,IAAI,2BAA6BihF,EAAW5qD,UAAU,UAE3E,CA5CKz3B,EAAO6Q,QAAQR,KAClBA,EAAa,CAACA,EAAYA,IAGF,kBAAfrD,IACTA,EAAa,CAACA,EAAYA,IAI5B0+G,EAAOjmE,KAAK/kD,MAAK,SAAUiC,GACzBqpH,EAA0BL,EAAUhpH,GAAK,GACzCqpH,EAA0BH,EAAQlpH,GAAK,EACzC,IAEAokC,EAASrmC,MAAK,SAAUiC,GACtB,IAAIspH,EAAYllF,EAASv/B,aAAa7E,GAAKvB,IAAI,0BAC/C2lC,EAASxpB,cAAc5a,EAAK,CAC1B8H,MAAOwhH,GAAaN,EAASjhH,cAAc/H,EAAK,WAElDokC,EAASjqB,cAAcna,EAAK,CAACgpH,EAAS9hH,cAAclH,GAAMkpH,EAAOhiH,cAAclH,KAC/EokC,EAASxpB,cAAc5a,EAAK,CAC1B,eAAkBgpH,EAASjhH,cAAc/H,EAAK,cAC9C,WAAcgpH,EAASjhH,cAAc/H,EAAK,UAC1C,aAAgBkpH,EAAOnhH,cAAc/H,EAAK,cAC1C,SAAYkpH,EAAOnhH,cAAc/H,EAAK,WAE1C,IACAu1B,EAASxQ,WAAWqf,GAGpB2kF,EAAO7uG,KAAKrU,mBAAkB,SAAUb,EAAIhF,GAC1CgF,EAAGmwB,UAAS,SAAUpR,GACpBA,EAAMmkG,UAAYE,CACpB,GACF,IAYA7yF,EAASyyF,QAAS,EAClBzyF,EAAS3xB,MAAMoO,OAASo2G,EAAQ3pH,IAAI,WAAamB,EAAYnB,IAAI,SACnE,IAUF,SAAS8oH,EAAWlpH,EAAUuB,EAAawoH,GACzC,IAAIZ,EAGFA,EADEnpH,EACehB,EAAO41B,IAAI50B,GAAYA,EAAS+W,YAAY,SAAU4D,GACrE,IAAImyD,EAAOvrE,EAAYG,UAAUgZ,iBAAiBnZ,EAAYijC,kBAAkB7pB,GAAU,KAAO,CAAC,EAGlG,OADAmyD,EAAKpsE,KAAOia,EACLmyD,CACT,IAEiB,CAAC,CAChBpsE,KAAM,QACNd,KAAM,UAIV,IAAI+qH,EAAW,IAAI3jG,EAAKmiG,EAAgBY,GACpCc,EAAS,IAAI7jG,EAAKmiG,EAAgBY,GAElChkF,EAAW,IAAI/e,EAAK,GAAI+iG,GACxBV,EAAUrqH,EAAO41B,IAAIm1F,EAAQ3pH,IAAI,QAASpB,EAAOoF,MAAM0lH,EAAmBvoH,EAAavB,EAAU+pH,IAEjG/pH,IACFqpH,EAAUrqH,EAAOywD,OAAO45D,EAASrqH,EAAOoF,MAAMkmH,EAAgBtqH,KAGhE,IAAI8zC,EAAiB9zC,EAAW+nH,EAAaj0E,eAAiB,SAAUtuB,GACtE,OAAOA,EAAKva,KACd,EAWA,OAVA0/G,EAASnjG,SAASxoB,EAAO41B,IAAIy0F,GAAS,SAAU7jG,GAC9C,OAAOA,EAAK,EACd,IAAI,KAAMsuB,GACV+2E,EAAOrjG,SAASxoB,EAAO41B,IAAIy0F,GAAS,SAAU7jG,GAC5C,OAAOA,EAAK,EACd,IAAI,KAAMsuB,GACV/N,EAASve,SAASxoB,EAAO41B,IAAIy0F,GAAS,SAAU7jG,GAC9C,OAAOA,EAAK,EACd,KACAugB,EAASpB,eAAgB,EAClB,CACL8f,KAAMkmE,EACNxQ,GAAI0Q,EACJhvG,KAAMkqB,EAEV,CAEAzlC,EAAOvB,QAAUsB,C,wBC7SjB,IAAIwnH,EAAclpH,EAAQ,OAEtB0B,EAAWwnH,EAAYpjH,OAAO,CAChC7E,KAAM,YACN2L,cAAe,CACbC,OAAQ,EACRC,EAAG,EACHM,OAAQ,MACRC,WAAY,GAGZwqC,QAAS,CACPpjC,QAAS,QAEXyU,MAAO,CACL5Q,OAAQ,CACN2Q,MAAM,EACNhkB,SAAU,UAEZuT,SAAU,CACRyQ,MAAM,IAGV/b,UAAW,CACToL,OAAQ,CACNC,YAAa,OAMrB5W,EAAOvB,QAAUsB,C,wBC/BjB,IAAIrB,EAASL,EAAQ,OAEjB0nB,EAAa1nB,EAAQ,OAErBk3D,EAAal3D,EAAQ,OAErBqoB,EAAOroB,EAAQ,OAEfopH,EAAeppH,EAAQ,OAEvBqpH,EAAarpH,EAAQ,OAEzB,SAASusH,EAAmBC,EAAQ5pH,EAAa/B,GAC/C,IAAIQ,EAAWuB,EAAYa,iBAC3B+oH,EAAOzrH,MAAK,SAAUiC,GACpB,IACIqB,EADAuD,EAAY4kH,EAAO3kH,aAAa7E,GAEhConH,EAAMlzD,EAAW1oD,aAAa5G,EAAUnG,IAAI,KAAMZ,EAAI2O,YACtD66G,EAAMnzD,EAAW1oD,aAAa5G,EAAUnG,IAAI,KAAMZ,EAAI4O,aAE1D,GAAKmN,MAAMwtG,IAASxtG,MAAMytG,IAGrB,GAAIznH,EAAYyJ,kBAEjBhI,EAAQzB,EAAYyJ,kBAAkBmgH,EAAOhuC,UAAUguC,EAAOp0G,WAAYpV,SACrE,GAAI3B,EAAU,CACnB,IAAImJ,EAAIgiH,EAAO/qH,IAAIJ,EAAS+W,WAAW,GAAIpV,GACvCyH,EAAI+hH,EAAO/qH,IAAIJ,EAAS+W,WAAW,GAAIpV,GAC3CqB,EAAQhD,EAASiD,YAAY,CAACkG,EAAGC,GACnC,OATApG,EAAQ,CAAC+lH,EAAKC,GAYXztG,MAAMwtG,KACT/lH,EAAM,GAAK+lH,GAGRxtG,MAAMytG,KACThmH,EAAM,GAAKgmH,GAGbmC,EAAOrvG,cAAcna,EAAKqB,EAC5B,GACF,CAEA,IAAI3C,EAAW2nH,EAAWvjH,OAAO,CAC/B7E,KAAM,YACN+mB,aAAc,SAAUykG,EAAgB7rH,EAASC,GAC/CD,EAAQ4gF,YAAW,SAAU5+E,GAC3B,IAAI8pH,EAAU9pH,EAAY6pH,eAEtBC,IACFH,EAAmBG,EAAQ3pH,UAAWH,EAAa/B,GACnDtC,KAAKusH,eAAerpH,IAAImB,EAAYgiB,IAAIoD,aAAa0kG,GAEzD,GAAGnuH,KACL,EACAqsH,aAAc,SAAUhoH,EAAa8pH,EAAS9rH,EAASC,GACrD,IAAIQ,EAAWuB,EAAYa,iBACvBkhB,EAAW/hB,EAAYgiB,GACvB89D,EAAa9/E,EAAYG,UACzB4pH,EAAgBpuH,KAAKusH,eACrBxyF,EAAaq0F,EAAclrH,IAAIkjB,IAAagoG,EAAc/yG,IAAI+K,EAAU,IAAI+C,GAC5E8kG,EAASjC,EAAWlpH,EAAUuB,EAAa8pH,GAE/CA,EAAQrlE,QAAQmlE,GAChBD,EAAmBG,EAAQ3pH,UAAWH,EAAa/B,GACnD2rH,EAAOzrH,MAAK,SAAUiC,GACpB,IAAI4E,EAAY4kH,EAAO3kH,aAAa7E,GAChCqK,EAAazF,EAAU8D,WAAW,cAEZ,oBAAf2B,IAETA,EAAaA,EAAWq/G,EAAQj1G,YAAYzU,GAAM0pH,EAAQvjG,cAAcnmB,KAG1EwpH,EAAO5uG,cAAc5a,EAAK,CACxBqK,WAAYA,EACZvC,MAAOlD,EAAUnG,IAAI,2BAA6BihF,EAAW5qD,UAAU,SACvE1qB,OAAQxF,EAAU8D,WAAW,WAEjC,IAEA4sB,EAAWvQ,WAAWykG,GACtBjuH,KAAKqI,MAAMc,IAAI4wB,EAAW1xB,OAG1B4lH,EAAO3jH,mBAAkB,SAAUb,GACjCA,EAAGmwB,UAAS,SAAUpR,GACpBA,EAAMmkG,UAAYwB,CACpB,GACF,IACAp0F,EAAW0yF,QAAS,EACpB1yF,EAAW1xB,MAAMoO,OAAS03G,EAAQjrH,IAAI,WAAamB,EAAYnB,IAAI,SACrE,IAUF,SAAS8oH,EAAWlpH,EAAUuB,EAAa8pH,GACzC,IAAIlC,EAGFA,EADEnpH,EACehB,EAAO41B,IAAI50B,GAAYA,EAAS+W,YAAY,SAAU4D,GACrE,IAAImyD,EAAOvrE,EAAYG,UAAUgZ,iBAAiBnZ,EAAYijC,kBAAkB7pB,GAAU,KAAO,CAAC,EAGlG,OADAmyD,EAAKpsE,KAAOia,EACLmyD,CACT,IAEiB,CAAC,CAChBpsE,KAAM,QACNd,KAAM,UAIV,IAAIurH,EAAS,IAAInkG,EAAKmiG,EAAgBkC,GAClCn+F,EAAUluB,EAAO41B,IAAIy2F,EAAQjrH,IAAI,QAASpB,EAAOoF,MAAM2jH,EAAaK,cAAe7mH,IASvF,OAPIvB,IACFktB,EAAUluB,EAAOywD,OAAOviC,EAASluB,EAAOoF,MAAM2jH,EAAajhG,WAAY9mB,KAGzEmrH,EAAO3jG,SAAS0F,EAAS,KAAMltB,EAAW+nH,EAAaj0E,eAAiB,SAAUtuB,GAChF,OAAOA,EAAKva,KACd,GACOkgH,CACT,CAEA7qH,EAAOvB,QAAUsB,C,wBCtIjB,IAAIuE,EAAUjG,EAAQ,OAIlBiC,GAFUgE,EAAQC,QAERlG,EAAQ,QAElBK,EAASL,EAAQ,OAEjBy+E,EAAMz+E,EAAQ,OAEd84C,EAAY94C,EAAQ,OAEpBi5E,EAAaj5E,EAAQ,OAErB6jD,EAAYo1B,EAAWp1B,UACvBtwB,EAAa0lD,EAAW1lD,WAE5B,SAASq5F,EAAUt9G,GACjBwpC,EAAUvwB,gBAAgBjZ,EAAI4Z,MAAO,CAAC,QACxC,CAEA,IAAIggG,EAAcjnH,EAAQiwE,qBAAqB,CAC7CjxE,KAAM,SACN8E,aAAc,CAAC,SAAU,OAAQ,QAAS,OAK1C6hB,KAAM,SAAUxb,EAAQoJ,EAAa5U,EAAS8kH,GAC5CnnH,KAAKy1B,qBAAqB5nB,EAAQxL,GAClCrC,KAAKw1B,YAAY3nB,EAAQxL,EAAS8kH,EAASmH,eAAe,EAC5D,EAKArlH,mBAAoB,WAClB,GAAIi3E,EAAIlkD,KACN,OAAO,EAGT,IAAIuyF,EAAavuH,KAAKwuH,aACtB,OAAOxuH,KAAKmN,WAAW,cAAgBohH,GAAcA,EAAWtlH,oBAClE,EACAusB,YAAa,SAAUi5F,EAAQpsH,EAASisH,EAAelqG,GACrD,IAAIumG,EAAc3qH,KAAKmC,YACnBusH,EAAgB1uH,KAAKkE,SAAW,QAE/BoqH,GACHjsH,EAAQ4gF,YAAW,SAAU5+E,GAC3B,IAAIsqH,EAAYtqH,EAAYnB,IAAIlD,KAAKkE,UACjC0qH,EAAcvqH,EAAYqqH,GAEzBC,GAAcA,EAAU/tH,MAKxBguH,EAyBHA,EAAYp5F,YAAYm5F,EAAWtsH,GAAS,IAxBxC+hB,GAEFiqG,EAAUM,GAGZ7sH,EAAOU,KAAKmsH,EAAU/tH,MAAM,SAAU0nB,GAEhCA,aAAgB+W,OAClBgvF,EAAU/lG,EAAK,IACf+lG,EAAU/lG,EAAK,KAEf+lG,EAAU/lG,EAEd,IACAsmG,EAAc,IAAIjE,EAAYgE,EAAW3uH,KAAMqC,GAC/CP,EAAOyF,OAAOqnH,EAAa,CACzB1qH,SAAUlE,KAAKkE,SAEfgb,YAAa7a,EAAY6a,YACzB1b,KAAMa,EAAYb,KAClB8qH,eAAe,IAEjBM,EAAYJ,aAAenqH,GAK7BA,EAAYqqH,GAAiBE,GAhC3BvqH,EAAYqqH,GAAiB,IAiCjC,GAAG1uH,KAEP,EACA+2B,cAAe,SAAUxyB,GACvB,IAAI3D,EAAOZ,KAAKwE,UACZuJ,EAAQ/N,KAAKkZ,YAAY3U,GACzBiiD,EAAiB1kD,EAAO6Q,QAAQ5E,GAASjM,EAAO41B,IAAI3pB,EAAOu3C,GAAW/tC,KAAK,MAAQ+tC,EAAUv3C,GAC7FvK,EAAO5C,EAAK8D,QAAQH,GACpBizB,EAAOxC,EAAWh1B,KAAKwD,MAkB3B,OAhBa,MAATuK,GAAiBvK,KACnBg0B,GAAQ,UAGNh0B,IACFg0B,GAAQxC,EAAWxxB,GAEN,MAATuK,IACFypB,GAAQ,QAIC,MAATzpB,IACFypB,GAAQxC,EAAWwxB,IAGdhvB,CACT,EACAhzB,QAAS,WACP,OAAOxE,KAAK0I,KACd,EACAogD,QAAS,SAAUloD,GACjBZ,KAAK0I,MAAQ9H,CACf,IAEFkB,EAAO0Y,MAAMmwG,EAAapwE,EAAUs0E,iBACpC,IAAI1rH,EAAWwnH,EACfvnH,EAAOvB,QAAUsB,C,wBC5HjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjB0B,EAAWO,EAAQ4wE,oBAAoB,CACzC5xE,KAAM,SACN2mB,KAAM,WAMJrpB,KAAKusH,eAAiBzqH,EAAO40D,eAC/B,EACA52D,OAAQ,SAAU8uH,EAAavsH,EAASC,GACtC,IAAIiqH,EAAiBvsH,KAAKusH,eAC1BA,EAAe/pH,MAAK,SAAU8lB,GAC5BA,EAAKmkG,QAAS,CAChB,IACA,IAAIqC,EAAiB9uH,KAAK0C,KAAO,QACjCL,EAAQ4gF,YAAW,SAAU5+E,GAC3B,IAAIuqH,EAAcvqH,EAAYyqH,GAC9BF,GAAe5uH,KAAKqsH,aAAahoH,EAAauqH,EAAavsH,EAASC,EACtE,GAAGtC,MACHusH,EAAe/pH,MAAK,SAAU8lB,IAC3BA,EAAKmkG,QAAUzsH,KAAKqI,MAAM6B,OAAOoe,EAAKjgB,MACzC,GAAGrI,KACL,EACAqsH,aAAc,WAAa,IAG7BjpH,EAAOvB,QAAUsB,C,wBC/BjB,IAAIrB,EAASL,EAAQ,OAEjBk3D,EAAal3D,EAAQ,OAErB0a,EAAUra,EAAOqa,QAErB,SAAS4yG,EAAQzmG,GACf,QAASjK,MAAM2wG,WAAW1mG,EAAKrc,KAAOoS,MAAM2wG,WAAW1mG,EAAKpc,IAC9D,CAEA,SAAS+iH,EAAS3mG,GAChB,OAAQjK,MAAM2wG,WAAW1mG,EAAKrc,MAAQoS,MAAM2wG,WAAW1mG,EAAKpc,GAC9D,CAEA,SAASgjH,EAAatuH,EAAMuuH,EAAc5qH,GACxC,IAAIyvE,GAAa,EAEjB,GACEA,EAAYxtE,KAAKF,IAAIqyD,EAAWu2D,aAAatuH,EAAKsC,IAAIisH,EAAc5qH,IAAayvE,GACjFpzE,EAAOA,EAAK26C,gBACL36C,GAET,OAAOozE,CACT,CAEA,SAASo7C,EAA+BtC,EAAQlsH,EAAMyuH,EAAcC,EAAeC,EAAiBC,GAClG,IAAIC,EAAW,GACX1hH,EAAQi/G,EAAapsH,EAAM0uH,EAAexC,GAC1CvoH,EAAY3D,EAAK69E,iBAAiB6wC,EAAevhH,GAAO,GAAM,GAClE0hH,EAASF,GAAmB3uH,EAAKsC,IAAImsH,EAAc9qH,GAAW,GAC9DkrH,EAASD,GAAoB5uH,EAAKsC,IAAIosH,EAAe/qH,GAAW,GAChE,IAAIyvE,EAAYk7C,EAAatuH,EAAM0uH,EAAe/qH,GAOlD,OANAyvE,EAAYxtE,KAAKJ,IAAI4tE,EAAW,IAE5BA,GAAa,IACfy7C,EAASD,IAAqBC,EAASD,GAAkBtkG,QAAQ8oD,IAG5Dy7C,CACT,CAEA,IAAIvoH,EAAQpF,EAAOoF,MAEfwoH,EAAuB,CAOzBtpH,IAAKc,EAAMkoH,EAAgC,OAQ3C9oH,IAAKY,EAAMkoH,EAAgC,OAQ3CO,QAASzoH,EAAMkoH,EAAgC,YAYjD,SAASlE,EAAc7mH,EAAaikB,GAClC,IAAI1nB,EAAOyD,EAAYG,UACnB1B,EAAWuB,EAAYa,iBAK3B,GAAIojB,IAAS2mG,EAAS3mG,KAAUxmB,EAAO6Q,QAAQ2V,EAAK3f,QAAU7F,EAAU,CACtE,IAAIi+C,EAAOj+C,EAAS+W,WAChBijE,EAAWvF,EAAYjvD,EAAM1nB,EAAMkC,EAAUuB,GAKjD,GAFAikB,EAAOxmB,EAAOyiB,MAAM+D,GAEhBA,EAAK5lB,MAAQgtH,EAAqBpnG,EAAK5lB,OAASo6E,EAASl0E,UAAYk0E,EAAS9pE,UAAW,CAC3F,IAAIu8G,EAAkBpzG,EAAQ4kC,EAAM+7B,EAASl0E,SAASG,KAClDymH,EAAmBrzG,EAAQ4kC,EAAM+7B,EAAS9pE,UAAUjK,KACxDuf,EAAK3f,MAAQ+mH,EAAqBpnG,EAAK5lB,MAAM9B,EAAMk8E,EAAS8yC,YAAa9yC,EAASiwC,aAAcwC,EAAiBC,GAEjHlnG,EAAKva,MAAQua,EAAK3f,MAAM6mH,EAC1B,KAAO,CAIL,IAFA,IAAI7mH,EAAQ,CAAe,MAAd2f,EAAKwe,MAAgBxe,EAAKwe,MAAQxe,EAAK2zB,WAA0B,MAAd3zB,EAAK0e,MAAgB1e,EAAK0e,MAAQ1e,EAAKyzB,WAE9F9lC,EAAI,EAAGA,EAAI,EAAGA,IACrB,GAAIy5G,EAAqB/mH,EAAMsN,IAAK,CAClC,IAAIuoE,EAAUn6E,EAAYijC,kBAAkByZ,EAAK9qC,IAAI,GACrDtN,EAAMsN,GAAK+2G,EAAapsH,EAAM49E,EAAS71E,EAAMsN,GAC/C,CAGFqS,EAAK3f,MAAQA,CACf,CACF,CAEA,OAAO2f,CACT,CAEA,SAASivD,EAAYjvD,EAAM1nB,EAAMkC,EAAUuB,GACzC,IAAI8+F,EAAM,CAAC,EAcX,OAZuB,MAAnB76E,EAAK2kG,YAAuC,MAAjB3kG,EAAKlX,UAClC+xF,EAAI4pB,aAAkC,MAAnBzkG,EAAK2kG,WAAqBrsH,EAAKkmB,aAAawB,EAAK2kG,YAAc3kG,EAAKlX,SACvF+xF,EAAInwF,UAAYlQ,EAASikC,QAAQ1iC,EAAYwrH,kBAAkB1sB,EAAI4pB,eACnE5pB,EAAIv6F,SAAW9F,EAASmQ,aAAakwF,EAAInwF,WACzCmwF,EAAIysB,YAAcvrH,EAAYijC,kBAAkB67D,EAAIv6F,SAASG,KAAK,KAElEo6F,EAAIv6F,SAAWvE,EAAYwE,cAC3Bs6F,EAAInwF,UAAYlQ,EAASmQ,aAAakwF,EAAIv6F,UAC1Cu6F,EAAIysB,YAAcvrH,EAAYijC,kBAAkB67D,EAAIv6F,SAASG,KAAK,GAClEo6F,EAAI4pB,aAAe1oH,EAAYijC,kBAAkB67D,EAAInwF,UAAUjK,KAAK,IAG/Do6F,CACT,CAUA,SAASv5E,EAAW9mB,EAAUwlB,GAE5B,QAAOxlB,GAAYA,EAASm7E,aAAe31D,EAAK3f,QAAUomH,EAAQzmG,KAAQxlB,EAASm7E,YAAY31D,EAAK3f,MACtG,CAEA,SAASiuC,EAAetuB,EAAMhL,EAAS/Y,EAAWuyC,GAEhD,OAAIA,EAAW,EACNxuB,EAAK3f,OAAS2f,EAAK3f,MAAMmuC,GAG3BxuB,EAAKva,KACd,CAEA,SAASi/G,EAAapsH,EAAMmsH,EAAcrqH,GACxC,GAAa,YAATA,EAAoB,CACtB,IAAIqoB,EAAM,EACN/T,EAAQ,EAOZ,OANApW,EAAK4B,KAAKuqH,GAAc,SAAU5uG,EAAK1Z,GAChC4Z,MAAMF,KACT4M,GAAO5M,EACPnH,IAEJ,IAAG,GACI+T,EAAM/T,CACf,CACE,OAAOpW,EAAK2uB,cAAcw9F,GAAc,GAAe,QAATrqH,EAAiB,EAAI,EAEvE,CAEAb,EAAQqpH,cAAgBA,EACxBrpH,EAAQ01E,YAAcA,EACtB11E,EAAQ+nB,WAAaA,EACrB/nB,EAAQ+0C,eAAiBA,EACzB/0C,EAAQmrH,aAAeA,C,wBChLvB,IAAItpH,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBozE,EAAepzE,EAAQ,OAEvBquH,EAAuBruH,EAAQ,OAEnCA,EAAQ,MAERA,EAAQ,OAERA,EAAQ,OAER,IAAIsuH,EAAkB,EAGtBrsH,EAAQ4wE,oBAAoB,CAC1B5xE,KAAM,WACN5C,OAAQ,SAAUspD,EAAe/mD,EAASC,GACxCtC,KAAK+pB,OAASq/B,EACdppD,KAAKw2E,KAAOl0E,EAEPtC,KAAKy0G,YACRz0G,KAAKy0G,UAAY,CAAC,EAClB3yG,EAAOU,KAAKwtH,GAAU,SAAU7vC,EAASw0B,GACvCryG,EAAIujB,QAAQvlB,GAAGq0G,EAAW30G,KAAKy0G,UAAUE,GAAa7yG,EAAO2B,KAAK08E,EAASngF,MAC7E,GAAGA,OAGL60E,EAAajtD,eAAe5nB,KAAM,2BAA4BopD,EAAclmD,IAAI,kBAAmB,UACrG,EACAoF,QAAS,SAAUjG,EAASC,GAC1BR,EAAOU,KAAKxC,KAAKy0G,WAAW,SAAUt0B,EAASw0B,GAC7CryG,EAAIujB,QAAQ3O,IAAIy9F,EAAWx0B,EAC7B,IACAngF,KAAKy0G,UAAY,IACnB,EAKAwb,yBAA0B,SAAUl/G,GAClC/Q,KAAKkwH,gBAAgBn/G,EACvB,EACAm/G,gBAAiB,SAAUn/G,GACzBA,GAAO/Q,KAAKw2E,KAAKp7C,eAAet5B,EAAOyF,OAAO,CAC5C7E,KAAM,sBACLqO,GACL,IAEF,IAAIi/G,EAAW,CACb7V,UAAW,SAAUz9E,GACfyzF,EAAanwH,KAAM,WACrBA,KAAKowH,gBAAkB,CAAC1zF,EAAEoR,QAASpR,EAAEqR,SAEzC,EACAusE,QAAS,SAAU59E,GACjB,IAAI2zF,EAAiBrwH,KAAKowH,gBAE1B,GAAID,EAAanwH,KAAM,UAAYqwH,EAAgB,CACjD,IAAIvqH,EAAQ,CAAC42B,EAAEoR,QAASpR,EAAEqR,SACtBzD,EAAO9jC,KAAK0qE,IAAIm/C,EAAe,GAAKvqH,EAAM,GAAI,GAAKU,KAAK0qE,IAAIm/C,EAAe,GAAKvqH,EAAM,GAAI,GAE9F,GAAIwkC,EAAOylF,EACT,OAGF,IAAI9zG,EAASjc,KAAK+pB,OAAO7kB,iBAAiBorH,0BAA0B,CAAC5zF,EAAEoR,QAASpR,EAAEqR,UAE9D,SAApB9xB,EAAOs0G,UAAuBvwH,KAAKkwH,gBAAgB,CACjDM,iBAAkBv0G,EAAOu0G,kBAE7B,CAEAxwH,KAAKowH,gBAAkB,IACzB,EACA/V,UAAW,SAAU39E,GAEnB,IAAI18B,KAAKowH,iBAAoBD,EAAanwH,KAAM,aAAhD,CAIA,IAAIi2B,EAAQj2B,KAAK+pB,OACb9N,EAASga,EAAM/wB,iBAAiBorH,0BAA0B,CAAC5zF,EAAEoR,QAASpR,EAAEqR,UACxEwiF,EAAWt0G,EAAOs0G,SACT,SAAbA,GAAuBvwH,KAAKiwH,yBAAyBQ,iBAAiBx6F,EAAM/yB,IAAI,uBAEhFlD,KAAKiwH,yBAAsC,SAAbM,EAAsB,KAClD,CACAC,iBAAkBv0G,EAAOu0G,iBAEzBzmE,UAAwB,SAAbwmE,GAAsB,MAXnC,CAaF,GAGF,SAASJ,EAAa1qH,EAAMmuE,GAC1B,IAAI39C,EAAQxwB,EAAKskB,OACjB,OAAOkM,EAAM/yB,IAAI,mBAAqB+yB,EAAM/yB,IAAI,yBAA2B0wE,CAC7E,CAEAlwE,EAAQ+b,qBAAqBqwG,E,wBCtG7BruH,EAAQ,MAERA,EAAQ,OAERA,EAAQ,M,wBCJR,IAAIiC,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBivH,EAAWjvH,EAAQ,OAEvBA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAGRiC,EAAQuD,eAAenF,EAAOoF,MAAMwpH,EAAU,QAE9ChtH,EAAQ4wE,oBAAoB,CAC1B5xE,KAAM,S,wBCpBRjB,EAAQ,OAERA,EAAQ,OAERA,EAAQ,M,iCCJR,IAAIiG,EAAUjG,EAAQ,OAIlBiC,GAFUgE,EAAQC,QAERlG,EAAQ,QAElBK,EAASL,EAAQ,OAEjBk5E,EAAcl5E,EAAQ,OAEtBmG,EAAUnG,EAAQ,OAElBgrF,EAAmB,CAAC,WAAY,gBAAiB,YAEjDtpF,EAAWO,EAAQ4wE,oBAAoB,CACzC5xE,KAAM,QACN5C,OAAQ,SAAU6wH,EAAYtuH,EAASC,GACrC,IAAI+F,EAAQrI,KAAKqI,MACjBA,EAAMkC,YAENvK,KAAK4wH,WAAWD,GAEhB3wH,KAAK6wH,uBAAuBF,EAC9B,EACAC,WAAY,SAAUD,GACpB,IAAI5/D,EAAQ4/D,EAAWzrH,iBACnB2qD,EAAgBkB,EAAMjB,mBACtBghE,EAAehvH,EAAO41B,IAAIm4B,GAAe,SAAUkhE,GACrD,IAAI1lC,EAAc,IAAI1Q,EAAYo2C,EAAc96F,MAAO,CACrDvvB,SAAU,CAACqqD,EAAM5kD,GAAI4kD,EAAM3kD,IAC3B6F,SAAU8+G,EAAcn+F,MACxBknD,gBAAiB,EACjBkN,eAAgB,EAChBD,cAAe,IAEjB,OAAOsE,CACT,IACAvpF,EAAOU,KAAKsuH,GAAc,SAAUzlC,GAClCvpF,EAAOU,KAAKiqF,EAAkBpB,EAAYliF,IAAKkiF,GAC/CrrF,KAAKqI,MAAMc,IAAIkiF,EAAY/D,WAC7B,GAAGtnF,KACL,EACA6wH,uBAAwB,SAAUF,GAChC,IAAI5/D,EAAQ4/D,EAAWzrH,iBACnB2qD,EAAgBkB,EAAMjB,mBAE1B,GAAKD,EAAc17C,OAAnB,CAIA,IAAIlK,EAAQ0mH,EAAWztH,IAAI,SACvBqvB,EAAiBo+F,EAAWhkH,SAAS,aACrCy5E,EAAiBuqC,EAAWhkH,SAAS,aACrCglB,EAAiBY,EAAe5lB,SAAS,aACzCmxC,EAAiBsoC,EAAez5E,SAAS,aACzCqkH,EAAgBz+F,EAAervB,IAAI,QACnC+tH,EAAgB7qC,EAAeljF,IAAI,QACnCguH,EAAkBv/F,EAAezuB,IAAI,SACrCiuH,EAAkBrzE,EAAe56C,IAAI,SACzCguH,EAAkBpvH,EAAO6Q,QAAQu+G,GAAmBA,EAAkB,CAACA,GACvEC,EAAkBrvH,EAAO6Q,QAAQw+G,GAAmBA,EAAkB,CAACA,GACvE,IAAIlrC,EAAa,GACbK,EAAa,GAQjB,GAAc,WAAVr8E,EAKF,IAJA,IAAImnH,EAAcvhE,EAAc,GAAGk1B,iBAC/B54E,EAAK4kD,EAAM5kD,GACXC,EAAK2kD,EAAM3kD,GAEN6J,EAAI,EAAGA,EAAIm7G,EAAYj9G,OAAQ8B,IAAK,CAC3C,GAAI+6G,EAAe,CACjB,IAAI9qC,EAAamrC,EAAcprC,EAAYirC,EAAiBj7G,GAC5DgwE,EAAWC,GAAYllF,KAAK,IAAI4G,EAAQ6I,OAAO,CAC7CxG,MAAO,CACLkC,GAAIA,EACJC,GAAIA,EACJX,EAAG2lH,EAAYn7G,MAGrB,CAEA,GAAIg7G,GAAiBh7G,EAAIm7G,EAAYj9G,OAAS,EAAG,CAC3C+xE,EAAamrC,EAAc/qC,EAAY6qC,EAAiBl7G,GAC5DqwE,EAAWJ,GAAYllF,KAAK,IAAI4G,EAAQ0pH,KAAK,CAC3CrnH,MAAO,CACLkC,GAAIA,EACJC,GAAIA,EACJV,GAAI0lH,EAAYn7G,GAChBxK,EAAG2lH,EAAYn7G,EAAI,MAGzB,CACF,KAGE,KAAIs7G,EACAC,EAAkB1vH,EAAO41B,IAAIm4B,GAAe,SAAUkhE,EAAetsH,GACvE,IAAI8mF,EAAcwlC,EAAchsC,iBAEhC,OADAwsC,EAAqC,MAAnBA,EAA0BhmC,EAAYp3E,OAAS,EAAI3N,KAAKJ,IAAImlF,EAAYp3E,OAAS,EAAGo9G,GAC/FzvH,EAAO41B,IAAI6zD,GAAa,SAAUE,GACvC,OAAO16B,EAAMuqB,aAAamQ,EAAWhnF,EACvC,GACF,IACIgtH,EAAa,GAEjB,IAASx7G,EAAI,EAAGA,GAAKs7G,EAAiBt7G,IAAK,CAGzC,IAFA,IAAI0W,EAAS,GAEJ2G,EAAI,EAAGA,EAAIu8B,EAAc17C,OAAQmf,IACxC3G,EAAO3rB,KAAKwwH,EAAgBl+F,GAAGrd,IAQjC,GAJI0W,EAAO,IACTA,EAAO3rB,KAAK2rB,EAAO,GAAG3pB,SAGpBguH,EAAe,CACb9qC,EAAamrC,EAAcprC,EAAYirC,EAAiBj7G,GAC5DgwE,EAAWC,GAAYllF,KAAK,IAAI4G,EAAQqkB,SAAS,CAC/ChiB,MAAO,CACL0iB,OAAQA,KAGd,CAEA,GAAIskG,GAAiBQ,EAAY,CAC3BvrC,EAAamrC,EAAc/qC,EAAY6qC,EAAiBl7G,EAAI,GAChEqwE,EAAWJ,GAAYllF,KAAK,IAAI4G,EAAQokB,QAAQ,CAC9C/hB,MAAO,CACL0iB,OAAQA,EAAO/pB,OAAO6uH,MAG5B,CAEAA,EAAa9kG,EAAO3pB,QAAQwQ,SAC9B,CAzCmB,CA4CvB,IAAIqY,EAAY8F,EAAejE,eAC3B4/D,EAAYxvC,EAAekB,eAE/Bl9C,EAAOU,KAAK8jF,GAAY,SAAUA,EAAY7hF,GAC5CzE,KAAKqI,MAAMc,IAAIvB,EAAQw9E,UAAUkB,EAAY,CAC3Cj7E,MAAOvJ,EAAOkL,SAAS,CACrB0J,OAAQ,OACRzJ,KAAMkkH,EAAgB1sH,EAAM0sH,EAAgBh9G,SAC3Cm5E,GACH72E,QAAQ,IAEZ,GAAGzW,MACH8B,EAAOU,KAAKyjF,GAAY,SAAUA,EAAYxhF,GAC5CzE,KAAKqI,MAAMc,IAAIvB,EAAQw9E,UAAUa,EAAY,CAC3C56E,MAAOvJ,EAAOkL,SAAS,CACrBC,KAAM,OACNyJ,OAAQw6G,EAAgBzsH,EAAMysH,EAAgB/8G,SAC7C0X,GACHpV,QAAQ,IAEZ,GAAGzW,KArHH,CAgBA,SAASqxH,EAAcK,EAAYC,EAAqBltH,GACtD,IAAIyhF,EAAazhF,EAAMktH,EAAoBx9G,OAE3C,OADAu9G,EAAWxrC,GAAcwrC,EAAWxrC,IAAe,GAC5CA,CACT,CAkGF,IAGF9iF,EAAOvB,QAAUsB,C,wBCzKjB1B,EAAQ,OAERA,EAAQ,M,wBCFR,IAAIiC,EAAUjC,EAAQ,OAEtBA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERiC,EAAQ4wE,oBAAoB,CAC1B5xE,KAAM,U,uBCbR,IAAIgB,EAAUjC,EAAQ,OAElB6d,EAAe7d,EAAQ,OAE3BA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAKRiC,EAAQ+b,qBAAqBH,E,wBCf7B,IAAIxd,EAASL,EAAQ,OAEjBmwH,EAAgBnwH,EAAQ,OAExB84C,EAAY94C,EAAQ,OAEpBowH,EAAsBD,EAAcrqH,OAAO,CAC7C7E,KAAM,kBAKN2L,cAAe,CACbyiB,gBAAiB,gBAEjB7V,YAAa,OAEbjB,YAAa,EAEb4+C,OAAQ,aAERvc,SAAS,EACT/C,QAAS,CAEPpjC,QAAS,QAGXrH,OAAQ,cACRC,WAAY,GACZ+c,UAAW,CACTnB,MAAM,EACNnf,MAAO,EACPgB,MAAO,WAEToe,MAAO,CAELjkB,SAAU,OAKVqT,OAAQ,CACN2Q,MAAM,EACNiU,SAAU,OACV6tB,OAAQ,EAGRjgD,MAAO,WAET0N,SAAU,CACRyQ,MAAM,EAENne,MAAO,YAGXoC,UAAW,CACToL,OAAQ,CACNxN,MAAO,UACPyN,YAAa,GAEfC,SAAU,CACR1N,MAAO,YAGXulH,gBAAiB,CACfjjH,OAAQ,SACRC,WAAY,GACZvC,MAAO,UACPyN,YAAa,EACbiB,YAAa,uBACb8uC,WAAW,EACXxvC,kBAAmB,IACnBD,gBAAiB,gBAEnBy3G,aAAc,CACZrnG,MAAM,EACNsnG,aAAa,EACbC,aAAa,EACbC,aAAa,EACbC,SAAU,GACV9N,QAAS,GACT39G,SAAU,OAEV0rH,SAAU,4UAEVC,SAAU,idAEVC,SAAU,sTAEVC,SAAU,iTAEVx4G,OAAQ,CACNxN,MAAO,UACP0O,YAAa,UACbjB,YAAa,GAEfC,SAAU,CACR1N,MAAO,UACP0O,YAAa,UACbjB,YAAa,IAGjBpZ,KAAM,MAGVkB,EAAO0Y,MAAMq3G,EAAqBt3E,EAAUs0E,iBAC5C,IAAI1rH,EAAW0uH,EACfzuH,EAAOvB,QAAUsB,C,wBC3GjB,IAAIrB,EAASL,EAAQ,OAEjBuiE,EAAeviE,EAAQ,OAEvBwiE,EAASxiE,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElB8H,EAAS9H,EAAQ,MAEjB+wH,EAAe/wH,EAAQ,OAEvBgxH,EAAehxH,EAAQ,OAEvBqO,EAAUrO,EAAQ,OAElBsO,EAAeD,EAAQC,aAEvB2zE,EAAajiF,EAAQ,MAErBk3D,EAAal3D,EAAQ,OAErBszB,EAAUtzB,EAAQ,OAElBuzB,EAAaD,EAAQC,WACrBvxB,EAAO3B,EAAO2B,KACdjB,EAAOV,EAAOU,KACd0P,EAAK1L,KAAK0L,GAEV/O,EAAWqvH,EAAajrH,OAAO,CACjC7E,KAAM,kBACN2mB,KAAM,SAAUhnB,EAASC,GACvBtC,KAAKsC,IAAMA,EAMXtC,KAAK0yH,MAML1yH,KAAK2yH,UAKL3yH,KAAK4yH,OAKL5yH,KAAK6yH,gBAKL7yH,KAAK86D,WAKL96D,KAAK8yH,WACP,EAKAhzH,OAAQ,SAAUizH,EAAe1wH,EAASC,EAAKyB,GAM7C,GALA/D,KAAKi2B,MAAQ88F,EACb/yH,KAAKsC,IAAMA,EACXtC,KAAKqC,QAAUA,EACfrC,KAAKqI,MAAMkC,YAEPwoH,EAAc7vH,IAAI,QAAQ,GAAO,CACnC,IAAImuD,EAAarxD,KAAK8gC,QAAQiyF,EAAezwH,GAEzC0wH,EAAYhzH,KAAKizH,aAAa,aAE9BC,EAAalzH,KAAKizH,aAAa,cAO/Bx/G,EAAOzT,KAAK0yH,MAAQ1yH,KAAKmzH,YAAY9hE,EAAY0hE,GAErDA,EAAch8F,cAAgB,SAAUxyB,GACtC,OAAOywB,EAAWvhB,EAAKhN,MAAMw9E,SAAS1/E,GACxC,EAEA/B,EAAK,CAAC,WAAY,WAAY,UAAW,mBAAmB,SAAUgB,GACpExD,KAAK,UAAYwD,GAAM6tD,EAAY2hE,EAAWv/G,EAAMs/G,EACtD,GAAG/yH,MAEHA,KAAKozH,iBAAiB/hE,EAAY6hE,EAAYz/G,EAAMs/G,GAEpD/yH,KAAKqzH,UAAUhiE,EAAY0hE,EAC7B,CAEA/yH,KAAKszH,aACP,EAKAppH,OAAQ,WACNlK,KAAKuzH,cAELvzH,KAAKqI,MAAMkC,WACb,EAKAjC,QAAS,WACPtI,KAAKuzH,aACP,EACAzyF,QAAS,SAAUiyF,EAAezwH,GAChC,IAAIkxH,EAAcT,EAAc7vH,IAAI,yBAChC01D,EAASm6D,EAAc7vH,IAAI,UAC3BksB,EAAWpB,EAAY+kG,EAAezwH,GAEvB,MAAfkxH,GAAuC,SAAhBA,EACzBA,EAAyB,eAAX56D,EAA0BxpC,EAASljB,EAAIkjB,EAASpjB,OAAS,EAAI1J,EAAI4O,YAAc,EAAI,IAAM,IAAMke,EAASnjB,EAAImjB,EAAS7jB,MAAQ,EAAIjJ,EAAI2O,WAAa,EAAI,IAAM,IACjKoN,MAAMm1G,KACfA,EAAc,CACZ3iC,WAAY,CACVxlE,IAAK,IACLE,OAAQ,KAEVulE,SAAU,CACR1lE,KAAM,IACNE,MAAO,MAETstC,GAAQ46D,IAGZ,IAuBIC,EACAC,EACAC,EACAn8C,EA1BAo8C,EAAgB,CAClB/iC,WAAY,SACZC,SAAU0iC,GAAe,GAAqB,MAAhBA,EAAsB,OAAS,SAE3DK,EAAmB,CACrBhjC,WAAY2iC,GAAe,GAAqB,MAAhBA,EAAsB,MAAQ,SAC9D1iC,SAAU,UAERgjC,EAAc,CAChBjjC,WAAY,EACZC,SAAU5+E,EAAK,GAGb6hH,EAAwB,aAAXn7D,EAAwBxpC,EAASpjB,OAASojB,EAAS7jB,MAChEyoH,EAAejB,EAAcpmH,SAAS,gBACtCsnH,EAAcD,EAAa9wH,IAAI,QAC/BgxH,EAAcD,EAAcD,EAAa9wH,IAAI,YAAc,EAC3DixH,EAAaF,EAAcD,EAAa9wH,IAAI,WAAa,EACzDkxH,EAAcF,EAAcC,EAE5B/4C,EAAgB23C,EAAc7vH,IAAI,wBAA0B,EAChEk4E,EAAgBA,EAAgBlpE,EAAK,IAMrC,IAAImiH,EAAkBL,EAAa9wH,IAAI,YAAY,GAE/C8uH,GADAiC,EAAcD,EAAa9wH,IAAI,QAAQ,GACzB+wH,GAAeD,EAAa9wH,IAAI,eAAe,IAC7D+uH,EAAcgC,GAAeD,EAAa9wH,IAAI,eAAe,GAC7DgvH,EAAc+B,GAAeD,EAAa9wH,IAAI,eAAe,GAC7DoxH,EAAQ,EACRC,EAASR,EAmBb,MAjBwB,SAApBM,GAAkD,WAApBA,GAChCrC,IAAgByB,EAAe,CAAC,EAAG,GAAIa,GAASF,GAChDnC,IAAgByB,EAAkB,CAACY,EAAO,GAAIA,GAASF,GACvDlC,IAAgByB,EAAkB,CAACY,EAASL,EAAa,GAAIK,GAAUH,KAGvEpC,IAAgByB,EAAe,CAACc,EAASL,EAAa,GAAIK,GAAUH,GACpEnC,IAAgByB,EAAkB,CAAC,EAAG,GAAIY,GAASF,GACnDlC,IAAgByB,EAAkB,CAACY,EAASL,EAAa,GAAIK,GAAUH,IAGzE58C,EAAa,CAAC88C,EAAOC,GAEjBxB,EAAc7vH,IAAI,YACpBs0E,EAAWhkE,UAGN,CACL4b,SAAUA,EACV2kG,WAAYA,EACZn7D,OAAQA,EACR3mD,SAAU6hH,EAAYl7D,GACtBwiB,cAAeA,EACfo4C,YAAaA,EACbgB,WAAYzB,EAAc7vH,IAAI,uBAAyB0wH,EAAch7D,GACrE67D,cAAe1B,EAAc7vH,IAAI,+BAAiC6vH,EAAc7vH,IAAI,0BAA4B2wH,EAAiBj7D,GAEjI66D,aAAcA,EACdC,gBAAiBA,EACjBC,gBAAiBA,EACjBn8C,WAAYA,EACZ08C,YAAaA,EACbC,WAAYA,EAEhB,EACAd,UAAW,SAAUhiE,EAAY0hE,GAM/B,IAAIC,EAAYhzH,KAAK86D,WACjBo4D,EAAalzH,KAAK8yH,YAClB1jG,EAAWiiC,EAAWjiC,SAE1B,GAA0B,aAAtBiiC,EAAWuH,OAAuB,CAEpC,IAAIM,EAAI+K,EAAO7hE,SACXsyH,EAAgBtlG,EAASnjB,EACzB0oH,EAAgBvlG,EAASljB,EAAIkjB,EAASpjB,OAC1Ci4D,EAAO4E,UAAU3P,EAAGA,EAAG,EAAEw7D,GAAgBC,IACzC1wD,EAAOzX,OAAO0M,EAAGA,GAAIhnD,EAAK,GAC1B+xD,EAAO4E,UAAU3P,EAAGA,EAAG,CAACw7D,EAAeC,IACvCvlG,EAAWA,EAAS7K,QACpB6K,EAASwN,eAAes8B,EAC1B,CAEA,IAAI07D,EAAYC,EAASzlG,GACrB0lG,EAAYD,EAAS7B,EAAUr2F,mBAC/Bo4F,EAAaF,EAAS3B,EAAWv2F,mBACjCq4F,EAAehC,EAAUtsH,SACzBuuH,EAAiB/B,EAAWxsH,SAChCuuH,EAAe,GAAKD,EAAa,GAAKJ,EAAU,GAAG,GACnD,IAAIpB,EAAcniE,EAAWmiE,YAE7B,GAAIn1G,MAAMm1G,GAAc,CAEtB,IAAI0B,EAA+B,MAAhB1B,EAAsB,EAAI,EAC7C2B,EAAQH,EAAcF,EAAWF,EAAW,EAAGM,GAC/CC,EAAQF,EAAgBF,EAAYH,EAAW,EAAG,EAAIM,EACxD,KAAO,CACDA,EAAe1B,GAAe,EAAI,EAAI,EAC1C2B,EAAQH,EAAcF,EAAWF,EAAW,EAAGM,GAC/CD,EAAe,GAAKD,EAAa,GAAKxB,CACxC,CAQA,SAAS4B,EAAUC,GACjB,IAAI35F,EAAM25F,EAAY3uH,SACtB2uH,EAAY7wG,OAAS,CAACowG,EAAU,GAAG,GAAKl5F,EAAI,GAAIk5F,EAAU,GAAG,GAAKl5F,EAAI,GACxE,CAEA,SAASm5F,EAASnqH,GAEhB,MAAO,CAAC,CAACA,EAAKuB,EAAGvB,EAAKuB,EAAIvB,EAAKa,OAAQ,CAACb,EAAKwB,EAAGxB,EAAKwB,EAAIxB,EAAKsB,QAChE,CAEA,SAASmpH,EAAQzlF,EAAS6X,EAAM01D,EAAIqY,EAAQC,GAC1C7lF,EAAQ4lF,IAAWrY,EAAGqY,GAAQC,GAAYhuE,EAAK+tE,GAAQC,EACzD,CAlBAvC,EAAU5lH,KAAK,WAAY4nH,GAC3B9B,EAAW9lH,KAAK,WAAY6nH,GAC5BjC,EAAU/gH,SAAWihH,EAAWjhH,SAAWo/C,EAAWp/C,SACtDmjH,EAAUpC,GACVoC,EAAUlC,EAeZ,EACAC,YAAa,SAAU9hE,EAAY0hE,GACjC,IAAInyH,EAAOmyH,EAAcvuH,UACrB0yC,EAAW67E,EAAc7vH,IAAI,YAC7BuD,EAAQi9E,EAAW8xC,mBAAmBzC,EAAe77E,GACrD5nB,EAAa1uB,EAAK2uB,cAAc,SACpC9oB,EAAMgvH,UAAUnmG,EAAW,GAAIA,EAAW,IAE1CtvB,KAAK01H,gBAAgBjvH,EAAO7F,GAE5B6F,EAAMkvH,YACN,IAAIliH,EAAO,IAAIg/G,EAAa,QAAShsH,EAAO4qD,EAAWmmB,WAAYtgC,GAEnE,OADAzjC,EAAKwiB,MAAQ88F,EACNt/G,CACT,EACAiiH,gBAAiB,SAAUjvH,EAAO7F,GAChC6F,EAAMykF,SAAW,WACf,OAAOtqF,EAAKytB,SAAS,CAAC,UAAU,SAAUtgB,GACxC,OAAOA,CACT,GACF,EAEAtH,EAAMmvH,eAAiB,WACrB,OAAO9zH,EAAO41B,IAAI13B,KAAKkrF,WAAYzkF,EAAMw9E,SAAUx9E,EACrD,CACF,EACAwsH,aAAc,SAAUzvH,GACtB,IAAIqyH,EAAW71H,KAAK,IAAMwD,GAAQ,IAAIoE,EAAQwP,MAE9C,OADApX,KAAKqI,MAAMc,IAAI0sH,GACRA,CACT,EACAC,gBAAiB,SAAUzkE,EAAYhpD,EAAOoL,EAAMs/G,GAClD,IAAIv7C,EAAa/jE,EAAKiJ,YAEjBq2G,EAAc7vH,IAAI,mBAIvBmF,EAAMc,IAAI,IAAIvB,EAAQyrB,KAAK,CACzBppB,MAAO,CACL8kB,GAAIyoD,EAAW,GACfxoD,GAAI,EACJC,GAAIuoD,EAAW,GACfroD,GAAI,GAEN9jB,MAAOvJ,EAAOyF,OAAO,CACnBkgF,QAAS,SACRsrC,EAAcpmH,SAAS,aAAa+gB,gBACvCjX,QAAQ,EACRrE,GAAI,IAER,EAKA2jH,gBAAiB,SAAU1kE,EAAYhpD,EAAOoL,EAAMs/G,GAClD,IAAInyH,EAAOmyH,EAAcvuH,UACrBgnF,EAAQ/3E,EAAKhN,MAAMykF,WACvB1oF,EAAKgpF,GAAO,SAAUz9E,EAAOxJ,GAC3B,IAAIknF,EAAYh4E,EAAKL,YAAYrF,GAC7B1E,EAAYzI,EAAK0I,aAAa/E,GAC9BmI,EAAiBrD,EAAUsD,SAAS,oBACpCqpH,EAAkB3sH,EAAUsD,SAAS,sBACrCspH,EAAY,CACdvvH,SAAU,CAAC+kF,EAAW,GACtBtqB,QAAS19D,EAAKzD,KAAKk2H,gBAAiBl2H,KAAMuE,IAExCkF,EAAK0sH,EAAW9sH,EAAWqD,EAAgBrE,EAAO4tH,GACtDruH,EAAQ0F,cAAc7D,EAAIusH,EAAgBj+G,gBAEtC1O,EAAUnG,IAAI,YAChBuG,EAAGlF,UAAYA,EACfkF,EAAGkjH,UAAYoG,GAEftpH,EAAGlF,UAAYkF,EAAGkjH,UAAY,IAElC,GAAG3sH,KACL,EAKAozH,iBAAkB,SAAU/hE,EAAYhpD,EAAOoL,EAAMs/G,GACnD,IAAIn6G,EAAam6G,EAAcpmH,SAAS,gBAExC,GAAKiM,EAAW1V,IAAI,QAApB,CAIA,IAAItC,EAAOmyH,EAAcvuH,UACrBgnF,EAAQ/3E,EAAKhN,MAAMykF,WACnB3F,EAAS7B,EAAW8B,mBAAmB/xE,EAAMmF,EAAW1V,IAAI,cAC5DkoF,EAAgB33E,EAAK+8E,mBACzBhuF,EAAKgpF,GAAO,SAAU4qC,EAAM7xH,GAC1B,IAAIkP,EAAK4rC,eAAe96C,EAAW6mF,GAAnC,CAIA,IAAI/hF,EAAYzI,EAAK0I,aAAa/E,GAC9BinE,EAAmBniE,EAAUsD,SAAS,gBACtCkM,EAAkBxP,EAAUsD,SAAS,kBACrC8+E,EAAYh4E,EAAKL,YAAYgjH,GAC7BvwC,EAAS,IAAIj+E,EAAQgc,KAAK,CAC5Bld,SAAU,CAAC+kF,EAAW,GACtBx5E,SAAUo/C,EAAW+pB,cAAgB/pB,EAAWp/C,SAChDkvD,QAAS19D,EAAKzD,KAAKk2H,gBAAiBl2H,KAAMuE,GAC1CkS,QAAQ,IAEV7O,EAAQof,aAAa6+D,EAAOx6E,MAAOmgE,EAAkB,CACnDlgE,KAAMi6E,EAAOhhF,GACbgpB,UAAW8jC,EAAWmjE,WACtBhnG,kBAAmB6jC,EAAWojE,gBAEhCpsH,EAAMc,IAAI08E,GACVj+E,EAAQ0F,cAAcu4E,EAAQj+E,EAAQof,aAAa,CAAC,EAAGnO,GAlBvD,CAmBF,GAAG7Y,KA5BH,CA6BF,EAKAq2H,eAAgB,SAAUhlE,EAAYhpD,EAAOoL,EAAMs/G,GACjD,IAAImB,EAAc7iE,EAAW6iE,YACzBjiH,EAAWo/C,EAAWp/C,SACtBtD,EAAYokH,EAAcpmH,SAAS,uBAAuBoL,eAC1DnL,EAAammH,EAAcpmH,SAAS,yBAAyBoL,eAC7DrN,EAAO,CAAC,GAAIwpH,EAAc,EAAGA,EAAaA,GAC1CoC,EAAYvD,EAAcwD,eAC1Bl6E,EAAU02E,EAAc7vH,IAAI,WAAW,GAK3C,SAASszH,EAAQ9vH,EAAU+vH,EAAUt1D,EAASu1D,GAC5C,GAAKhwH,EAAL,CAIA,IAAIqK,EAAM,CACRrK,SAAUA,EACV8d,OAAQ,CAAC0vG,EAAc,EAAG,GAC1BjiH,SAAUykH,GAAczkH,EAAW,EACnC0kH,WAAW,EACXtrH,MAAOsD,EACPwyD,QAASA,GAEPy1D,EAAMC,EAAS9D,EAAe0D,EAAU/rH,EAAMqG,GAClD1I,EAAMc,IAAIytH,GACVhvH,EAAQ0F,cAAcspH,EAAKhqH,EAZ3B,CAaF,CApBA4pH,EAAQnlE,EAAWsiE,gBAAiB,wBAAyBlwH,EAAKzD,KAAKk2H,gBAAiBl2H,KAAMq8C,EAAU,IAAM,MAC9Gm6E,EAAQnlE,EAAWqiE,gBAAiB,wBAAyBjwH,EAAKzD,KAAKk2H,gBAAiBl2H,KAAMq8C,EAAU,IAAM,MAC9Gm6E,EAAQnlE,EAAWoiE,aAAc,iBAAmB6C,EAAY,WAAa,YAAa7yH,EAAKzD,KAAK82H,iBAAkB92H,MAAOs2H,IAAY,EAmB3I,EACAS,sBAAuB,SAAU1lE,EAAYhpD,EAAOoL,EAAMs/G,GACxD,IAAInyH,EAAOmyH,EAAcvuH,UACrBwyH,EAAejE,EAAckE,kBAC7BvjG,EAAe9yB,EAAK0I,aAAa0tH,GAAcrqH,SAAS,mBACxDk7G,EAAK7nH,KACL6+D,EAAW,CACbq4D,SAAU,SAAUzmG,GAClBA,EAAQ+H,WAAY,EACpB/H,EAAQ8hB,MAAQ9uC,EAAKokH,EAAGsP,mBAAoBtP,GAC5Cp3F,EAAQwnD,UAAYx0E,EAAKokH,EAAGuP,sBAAuBvP,GACnDwP,EAAc5mG,EAASumG,EAAcvjH,EAAMs/G,GAAe,EAC5D,EACAuE,SAAU,SAAU7mG,GAClB4mG,EAAc5mG,EAASumG,EAAcvjH,EAAMs/G,EAC7C,GAGF/yH,KAAK6yH,gBAAkBsD,EAAWziG,EAAcA,EAAc1zB,KAAK86D,WAAY,CAAC,EAAG96D,KAAK6yH,gBAAiBh0D,EAC3G,EACAi4D,iBAAkB,SAAUS,GAC1Bv3H,KAAKuzH,cAELvzH,KAAKsC,IAAI84B,eAAe,CACtB14B,KAAM,qBACN4zH,UAAWiB,EACXhwE,KAAMvnD,KAAKwnD,KAEf,EACA2vE,mBAAoB,SAAUnxH,EAAIC,EAAIy2B,GACpC18B,KAAKuzH,cAELvzH,KAAKw3H,uBAAuB,CAAC96F,EAAEoR,QAASpR,EAAEqR,SAC5C,EACAqpF,sBAAuB,SAAU16F,GAC/B18B,KAAKw3H,uBAAuB,CAAC96F,EAAEoR,QAASpR,EAAEqR,UAAU,EACtD,EACAypF,uBAAwB,SAAUC,EAAUvhH,GAC1C,IAAIu1G,EAAUzrH,KAAK03H,aAAaD,GAAU,GAEtChkH,EAAOzT,KAAK0yH,MACZl7C,EAAa7e,EAAW+jC,IAAIjpF,EAAKiJ,YAAY1Z,SACjDyoH,EAAUj0C,EAAW,KAAOi0C,EAAUj0C,EAAW,IACjDi0C,EAAUj0C,EAAW,KAAOi0C,EAAUj0C,EAAW,IACjDx3E,KAAK6yH,gBAAgBnsH,SAAS,GAAK+kH,EAEnCzrH,KAAK6yH,gBAAgBv3G,QAErB,IAAIq8G,EAAkB33H,KAAK43H,iBAAiBnM,GAExCsH,EAAgB/yH,KAAKi2B,OAErB/f,GAAWyhH,IAAoB5E,EAAckE,mBAAqBlE,EAAc7vH,IAAI,cACtFlD,KAAKk2H,gBAAgByB,EAEzB,EACArE,YAAa,WAOX,SAASuE,IAEP,IAAI9E,EAAgB/yH,KAAKi2B,MAEzBj2B,KAAKk2H,gBAAgBnD,EAAckE,mBAAqBlE,EAAc7vH,IAAI,UAAU,IAAS,EAAI,GACnG,CAXAlD,KAAKuzH,cAEDvzH,KAAKi2B,MAAMsgG,iBACbv2H,KAAK4yH,OAASt2F,WAAW74B,EAAKo0H,EAAa73H,MAAOA,KAAKi2B,MAAM/yB,IAAI,iBASrE,EACAw0H,aAAc,SAAU9rB,GACtB,IAAIj2B,EAAQ31E,KAAK86D,WAAWgwB,oBAE5B,OAAOljF,EAAQg1B,eAAegvE,EAAQj2B,GAAO,EAC/C,EACAiiD,iBAAkB,SAAUE,GAC1B,IAEIH,EAFA/2H,EAAOZ,KAAKi2B,MAAMzxB,UAClB8lC,EAAO/jC,IAEPkN,EAAOzT,KAAK0yH,MAUhB,OATA9xH,EAAK4B,KAAK,CAAC,UAAU,SAAUuL,EAAOxJ,GACpC,IAAIoE,EAAQ8K,EAAKL,YAAYrF,GACzB0wB,EAAIj4B,KAAKiH,IAAI9E,EAAQmvH,GAErBr5F,EAAI6L,IACNA,EAAO7L,EACPk5F,EAAkBpzH,EAEtB,IACOozH,CACT,EACApE,YAAa,WACPvzH,KAAK4yH,SACPl4F,aAAa16B,KAAK4yH,QAClB5yH,KAAK4yH,OAAS,KAElB,EACAsD,gBAAiB,SAAU6B,GACzB,IAAIf,EAAeh3H,KAAKi2B,MAAMghG,kBAEZ,MAAdc,EACFA,EAAYf,EAAe,EACJ,MAAde,IACTA,EAAYf,EAAe,GAG7Bh3H,KAAKsC,IAAI84B,eAAe,CACtB14B,KAAM,iBACNs0H,aAAce,EACdxwE,KAAMvnD,KAAKwnD,KAEf,IAGF,SAASx5B,EAAYiI,EAAO3zB,GAC1B,OAAOiH,EAAO0kB,cAAcgI,EAAM/H,qBAAsB,CACtD3iB,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aACX+kB,EAAM/yB,IAAI,WACf,CAEA,SAAS2zH,EAAS9D,EAAeiF,EAASttH,EAAMq3B,GAC9C,IAAImyC,EAAOtsE,EAAQ0b,SAASyvG,EAAc7vH,IAAI80H,GAAS5mG,QAAQ,aAAc,IAAKtvB,EAAOyiB,MAAMwd,GAAQ,CAAC,GAAI,IAAIiiC,EAAat5D,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAAK,UAClK,OAAOwpE,CACT,CAOA,SAASiiD,EAAWzpG,EAAWhgB,EAAgBrE,EAAO0I,EAAKlC,EAAQgwD,GACjE,IAAItyD,EAAQG,EAAexJ,IAAI,SAE/B,GAAK2L,EAOHA,EAAOmJ,SAASzL,GAChBlE,EAAMc,IAAI0F,GAEVgwD,GAAYA,EAASy4D,SAASzoH,OAVnB,CACX,IAAIsD,EAAaua,EAAUxpB,IAAI,UAC/B2L,EAASkB,EAAaoC,GAAa,GAAI,EAAG,EAAG,EAAG5F,GAChDsC,EAAOqG,SAAS,iBAAiB,GACjC7M,EAAMc,IAAI0F,GACVgwD,GAAYA,EAASq4D,SAASroH,EAChC,CAQA,IAAIF,EAAYjC,EAAeqL,aAAa,CAAC,QAAS,SAAU,eAChElJ,EAAOqG,SAASvG,GAEhBoC,EAAMjP,EAAOqwF,MAAM,CACjBwkC,WAAW,EACXvkH,GAAI,KACHrB,GAAK,GACR,IAAIjC,EAAa4d,EAAUxpB,IAAI,cAC/B4L,EAAaA,aAAsBuwB,MAAQvwB,EAAW9L,QAAU,EAAE8L,GAAaA,GAC/EA,EAAW,IAAM,EACjBA,EAAW,IAAM,EACjBiC,EAAItK,MAAQqI,EACZ,IAAIG,EAAeyd,EAAUxpB,IAAI,gBAEjC,GAAI+L,EAAc,CAChB,IAAIysB,EAAM3qB,EAAIrK,SAAWqK,EAAIrK,UAAY,CAAC,EAAG,GAC7Cg1B,EAAI,IAAMi9B,EAAW1oD,aAAahB,EAAa,GAAIH,EAAW,IAC9D4sB,EAAI,IAAMi9B,EAAW1oD,aAAahB,EAAa,GAAIH,EAAW,GAChE,CAEA,IAAIC,EAAe2d,EAAUxpB,IAAI,gBAUjC,OATA6N,EAAIkB,UAAYlD,GAAgB,GAAKvI,KAAK0L,GAAK,KAAO,EACtDrD,EAAOzB,KAAK2D,GAOZlC,EAAO9H,kBACA8H,CACT,CAEA,SAASwoH,EAAc5mG,EAASlsB,EAAWkP,EAAMs/G,EAAekF,GAC9D,IAAIxnG,EAAQynG,SAAZ,CAIA,IAAIxkG,EAAeq/F,EAAcpmH,SAAS,mBACtC8+G,EAAUh4G,EAAKL,YAAY2/G,EAAcvuH,UAAUtB,IAAI,CAAC,SAAUqB,IAElE0zH,IAAgBvkG,EAAaxwB,IAAI,aAAa,GAChDutB,EAAQrjB,KAAK,CACX1G,SAAU,CAAC+kH,EAAS,MAGtBh7F,EAAQoZ,eAAc,GACtBpZ,EAAQtZ,UAAU,CAChBzQ,SAAU,CAAC+kH,EAAS,IACnB/3F,EAAaxwB,IAAI,qBAAqB,GAAOwwB,EAAaxwB,IAAI,mBAAmB,IAbtF,CAeF,CAEAE,EAAOvB,QAAUsB,C,wBC/mBjB,IAAIrB,EAASL,EAAQ,OAEjB02H,EAAO12H,EAAQ,OAEfiiF,EAAajiF,EAAQ,MAYrBgxH,EAAe,SAAU1pH,EAAKtC,EAAO2xH,EAAalhF,GACpDihF,EAAKxgH,KAAK3X,KAAM+I,EAAKtC,EAAO2xH,GAU5Bp4H,KAAK0C,KAAOw0C,GAAY,QAMxBl3C,KAAKq4H,mBAMLr4H,KAAKi2B,MAAQ,IACf,EAEAw8F,EAAavwH,UAAY,CACvBC,YAAaswH,EAMbjiC,iBAAkB,WAChB,IAAIuiC,EAAgB/yH,KAAKi2B,MACrBrd,EAAam6G,EAAcpmH,SAAS,gBACpCy+E,EAAgBxyE,EAAW1V,IAAI,YAEnC,GAAqB,MAAjBkoF,GAA0C,QAAjBA,EAC3B,OAAOA,EAGLA,EAAgBprF,KAAKq4H,mBAMzB,OAJKjtC,IACHA,EAAgBprF,KAAKq4H,mBAAqB30C,EAAW40C,qBAAqBx2H,EAAO41B,IAAI13B,KAAKyG,MAAMykF,WAAYlrF,KAAKoT,YAAapT,MAAO0jF,EAAW8B,mBAAmBxlF,KAAM4Y,EAAW1V,IAAI,cAAe0V,EAAW0O,UAA2C,eAAhCyrG,EAAc7vH,IAAI,UAA6B,EAAI,GAAI0V,EAAW1V,IAAI,YAG9RkoF,CACT,EASA/rC,eAAgB,SAAU56C,GACxB,GAAkB,aAAdzE,KAAK0C,KAAqB,CAC5B,IAAI0oF,EAAgBprF,KAAKwwF,mBACzB,MAAgC,oBAAlBpF,IAAiCA,EAAc3mF,EAAKzE,KAAKyG,MAAMw9E,SAASx/E,KAASA,GAAO2mF,EAAgB,EACxH,CACF,GAEFtpF,EAAO6rB,SAAS8kG,EAAc0F,GAC9B,IAAIh1H,EAAWsvH,EACfrvH,EAAOvB,QAAUsB,C,iCCnFjB,IAAIrB,EAASL,EAAQ,OAEjB82H,EAAiB92H,EAAQ,OAEzBqoB,EAAOroB,EAAQ,OAEf84C,EAAY94C,EAAQ,OAEpBmwH,EAAgB2G,EAAehxH,OAAO,CACxC7E,KAAM,WACNgjD,WAAY,MAKZr3C,cAAe,CACbC,OAAQ,EAERC,EAAG,EAEHmc,MAAM,EACNwsB,SAAU,OAEVq4C,UAAU,EACVnkE,KAAM,MACNC,IAAK,KACLC,MAAO,MACPC,OAAQ,EACRhgB,MAAO,KACPS,OAAQ,GACR+kB,QAAS,EACTsjG,gBAAiB,OAEjBmE,UAAU,EACVC,QAAQ,EAERpvF,MAAM,EACNqvF,aAAc,IAEd1B,aAAc,EACdroH,UAAW,CACToL,OAAQ,CAAC,EACTE,SAAU,CAAC,GAEb0Q,MAAO,CACL5Q,OAAQ,CACNxN,MAAO,QAET0N,SAAU,CAAC,GAEbrZ,KAAM,IAMRyoB,KAAM,SAAUxb,EAAQoJ,EAAa5U,GAKnCrC,KAAK0I,MAML1I,KAAK24H,OACL34H,KAAKy1B,qBAAqB5nB,EAAQxL,GAElCrC,KAAK44H,WACP,EAKApjG,YAAa,SAAU3nB,GACrB+jH,EAAchiH,WAAW5P,KAAM,cAAe6P,WAE9C7P,KAAK44H,WACP,EAKAC,gBAAiB,SAAU7B,GACL,MAAhBA,IACFA,EAAeh3H,KAAK6N,OAAOmpH,cAG7B,IAAIhgH,EAAQhX,KAAK0I,MAAMsO,QAEnBhX,KAAK6N,OAAOw7B,KACd2tF,GAAgBA,EAAehgH,EAAQA,GAASA,GAEhDggH,GAAgBhgH,IAAUggH,EAAehgH,EAAQ,GACjDggH,EAAe,IAAMA,EAAe,IAGtCh3H,KAAK6N,OAAOmpH,aAAeA,CAC7B,EAKAC,gBAAiB,WACf,OAAOj3H,KAAK6N,OAAOmpH,YACrB,EAKA8B,WAAY,WACV,OAAO94H,KAAKi3H,mBAAqBj3H,KAAK0I,MAAMsO,QAAU,CACxD,EAKA+hH,aAAc,SAAUrzF,GACtB1lC,KAAK6N,OAAO2qH,WAAa9yF,CAC3B,EAKA6wF,aAAc,WACZ,QAASv2H,KAAK6N,OAAO2qH,QACvB,EAKAI,UAAW,WACT,IAAIhnC,EAAa5xF,KAAK6N,OAClBmrH,EAAUpnC,EAAWhxF,MAAQ,GAC7Bs2C,EAAW06C,EAAW16C,SACtBmqD,EAAQrhG,KAAK24H,OAAS,GAE1B,GAAiB,aAAbzhF,EAAyB,CAC3B,IAAI+hF,EAAS,GACbn3H,EAAOU,KAAKw2H,GAAS,SAAU1wG,EAAMhY,GACnC,IACI4oH,EADAnrH,EAAQwsC,EAAU5E,iBAAiBrtB,GAGnCxmB,EAAOkgB,SAASsG,IAClB4wG,EAAUp3H,EAAOyiB,MAAM+D,GACvB4wG,EAAQnrH,MAAQuC,GAEhB4oH,EAAU5oH,EAGZ2oH,EAAOj4H,KAAKk4H,GAEPp3H,EAAOwiF,SAASv2E,IAAoB,MAATA,IAAiBsQ,MAAMtQ,KACrDA,EAAQ,IAGVszF,EAAMrgG,KAAK+M,EAAQ,GACrB,IACAirH,EAAUC,CACZ,CAEA,IAAIE,EAAU,CACZxhG,SAAU,UACViiE,KAAM,QACN1iD,IAAa,SACXt2C,EAAOZ,KAAK0I,MAAQ,IAAIohB,EAAK,CAAC,CAChCtmB,KAAM,QACNd,KAAMy2H,IACJn5H,MACJY,EAAK0pB,SAAS0uG,EAAS33B,EACzB,EACA78F,QAAS,WACP,OAAOxE,KAAK0I,KACd,EAMAsuC,cAAe,WACb,GAA6B,aAAzBh3C,KAAKkD,IAAI,YACX,OAAOlD,KAAK24H,OAAO31H,OAEvB,IAEEG,EAAWyuH,EACfxuH,EAAOvB,QAAUsB,C,wBC5LjB,IAAIogG,EAAgB9hG,EAAQ,OAExB0B,EAAWogG,EAAch8F,OAAO,CAClC7E,KAAM,aAGRU,EAAOvB,QAAUsB,C,wBCNjB,IAAIrB,EAASL,EAAQ,OAErB,SAAS0B,EAAS0K,GAChB,IAAIurH,EAAcvrH,GAAUA,EAAOwrH,SAE9Bv3H,EAAO6Q,QAAQymH,KAClBA,EAAcA,EAAc,CAACA,GAAe,IAG9Ct3H,EAAOU,KAAK42H,GAAa,SAAUroH,GAC5BA,GAILuoH,EAAcvoH,EAChB,GACF,CAEA,SAASuoH,EAAcvoH,GACrB,IAAIrO,EAAOqO,EAAIrO,KACX62H,EAAW,CACb,OAAU,QACV,KAAQ,QAUV,GAPIA,EAAS72H,KACXqO,EAAImmC,SAAWqiF,EAAS72H,UACjBqO,EAAIrO,MAGb82H,EAAazoH,GAET0oH,EAAI1oH,EAAK,mBAAoB,CAC/B,IAAIghH,EAAehhH,EAAIghH,eAAiBhhH,EAAIghH,aAAe,CAAC,GAEvD0H,EAAI1H,EAAc,cACrBA,EAAarrH,SAAWqK,EAAIsjH,iBAGA,SAA1BtC,EAAarrH,UAAwB+yH,EAAI1H,EAAc,UACzDA,EAAarnG,MAAO,SACbqnG,EAAarrH,iBAGfqK,EAAIsjH,eACb,CAEAvyH,EAAOU,KAAKuO,EAAInQ,MAAQ,IAAI,SAAU+iD,GAChC7hD,EAAOkgB,SAAS2hC,KAAc7hD,EAAO6Q,QAAQgxC,MAC1C81E,EAAI91E,EAAU,UAAY81E,EAAI91E,EAAU,UAE3CA,EAAS51C,MAAQ41C,EAASngD,MAG5Bg2H,EAAa71E,GAEjB,GACF,CAEA,SAAS61E,EAAazoH,GACpB,IAAIpC,EAAYoC,EAAIpC,YAAcoC,EAAIpC,UAAY,CAAC,GAC/C+qH,EAAoB/qH,EAAUsL,WAAatL,EAAUsL,SAAW,CAAC,GAEjE0Q,EAAQ5Z,EAAI4Z,OAAS5Z,EAAI4Z,OAAS,CAAC,EACnCgvG,EAAchvG,EAAM5Q,SAAW4Q,EAAM5Q,OAAS,CAAC,GAC/C6/G,EAAmB,CACrB7/G,OAAQ,EACRE,SAAU,GAEZnY,EAAOU,KAAKmoB,GAAO,SAAU5c,EAAOvK,GAC7Bo2H,EAAiBp2H,IAAUi2H,EAAIE,EAAan2H,KAC/Cm2H,EAAYn2H,GAAQuK,EAExB,IAEI2rH,EAAkB/uG,QAAU8uG,EAAI9uG,EAAO,cACzCA,EAAM1Q,SAAWy/G,EAAkB/uG,aAC5B+uG,EAAkB/uG,MAE7B,CAEA,SAAS8uG,EAAIroB,EAAKhkG,GAChB,OAAOgkG,EAAIxvG,eAAewL,EAC5B,CAEAhK,EAAOvB,QAAUsB,C,wBCrFjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAErBiC,EAAQI,eAAe,CACrBpB,KAAM,iBACNoC,MAAO,kBACPjC,OAAQ,qBACP,SAAUkB,EAAS1B,GACpB,IAAI0wH,EAAgB1wH,EAAQ22C,aAAa,YAYzC,OAVI+5E,GAAyC,MAAxBhvH,EAAQizH,eAC3BjE,EAAc8F,gBAAgB90H,EAAQizH,eAEjCjE,EAAc7vH,IAAI,QAAQ,IAAS6vH,EAAc+F,cACpD/F,EAAcgG,cAAa,IAK/B12H,EAAQw3H,YAAY,YACb/3H,EAAOkL,SAAS,CACrBgqH,aAAcjE,EAAcllH,OAAOmpH,cAClCjzH,EACL,IACAL,EAAQI,eAAe,CACrBpB,KAAM,qBACNoC,MAAO,sBACPjC,OAAQ,WACP,SAAUkB,EAAS1B,GACpB,IAAI0wH,EAAgB1wH,EAAQ22C,aAAa,YAErC+5E,GAAsC,MAArBhvH,EAAQuyH,WAC3BvD,EAAcgG,aAAah1H,EAAQuyH,UAEvC,G,wBCnCA,IAAIxnB,EAAYrtG,EAAQ,OAExBqtG,EAAUC,yBAAyB,YAAY,WAE7C,MAAO,QACT,G,sBCLA,IAAIrrG,EAAUjC,EAAQ,OAElBmG,EAAUnG,EAAQ,OAElBq/B,EAAUr/B,EAAQ,MAElBwsB,EAAgB6S,EAAQ7S,cAE5BvqB,EAAQiwE,qBAAqB,CAC3BjxE,KAAM,QACNgjD,WAAY,CACVhjD,KAAM,MACNkvG,YAAY,GAEdvjG,cAAe,CAEbC,OAAQ,EAERC,EAAG,EACHmc,MAAM,EACNpf,KAAM,GAINwK,OAAQ,QACRgkH,QAAS,GAITC,UAAW,QAGX3uG,KAAM,EAGNC,IAAK,EAULyF,gBAAiB,gBAEjB7V,YAAa,OAEbjB,YAAa,EAGb+W,QAAS,EAETszF,QAAS,GACTziD,UAAW,CACThxC,SAAU,GACVugB,WAAY,SACZ5kC,MAAO,QAETytH,aAAc,CACZztH,MAAO,WAKb7I,EAAQ4wE,oBAAoB,CAC1B5xE,KAAM,QACN5C,OAAQ,SAAU6zB,EAAYtxB,EAASC,GAGrC,GAFAtC,KAAKqI,MAAMkC,YAENopB,EAAWzwB,IAAI,QAApB,CAIA,IAAImF,EAAQrI,KAAKqI,MACbg4D,EAAiB1sC,EAAWhnB,SAAS,aACrCstH,EAAoBtmG,EAAWhnB,SAAS,gBACxC4gB,EAAYoG,EAAWzwB,IAAI,aAC3BqvG,EAAe5+E,EAAWzwB,IAAI,gBAC9B2iF,EAAS,IAAIj+E,EAAQgc,KAAK,CAC5BvY,MAAOzD,EAAQof,aAAa,CAAC,EAAGq5C,EAAgB,CAC9C/0D,KAAMqoB,EAAWzwB,IAAI,QACrB0hB,SAAUy7C,EAAepvB,gBACxB,CACDipF,YAAY,IAEd9nH,GAAI,KAEF88C,EAAW22B,EAAOlpD,kBAClBw9F,EAAUxmG,EAAWzwB,IAAI,WACzBk3H,EAAY,IAAIxyH,EAAQgc,KAAK,CAC/BvY,MAAOzD,EAAQof,aAAa,CAAC,EAAGizG,EAAmB,CACjD3uH,KAAM6uH,EACNv1G,SAAUq1G,EAAkBhpF,eAC5B/kC,EAAGgjD,EAASljD,OAAS2nB,EAAWzwB,IAAI,WACpCsqB,kBAAmB,OAClB,CACD0sG,YAAY,IAEd9nH,GAAI,KAEF6iC,EAAOthB,EAAWzwB,IAAI,QACtBm3H,EAAU1mG,EAAWzwB,IAAI,WAC7B2iF,EAAOpvE,QAAUw+B,EACjBmlF,EAAU3jH,QAAU4jH,EAEhBplF,GACF4wC,EAAOvlF,GAAG,SAAS,WACjB6oE,OAAOC,KAAKn0B,EAAM,IAAMthB,EAAWzwB,IAAI,UACzC,IAGEm3H,GACFD,EAAU95H,GAAG,SAAS,WACpB6oE,OAAOC,KAAKixD,EAAS,IAAM1mG,EAAWzwB,IAAI,aAC5C,IAGFmF,EAAMc,IAAI08E,GACVs0C,GAAW9xH,EAAMc,IAAIixH,GAErB,IAAIE,EAAYjyH,EAAMs0B,kBAClB49F,EAAe5mG,EAAWzF,qBAC9BqsG,EAAahvH,MAAQ+uH,EAAU/uH,MAC/BgvH,EAAavuH,OAASsuH,EAAUtuH,OAChC,IAAIu8F,EAAat6E,EAAcssG,EAAc,CAC3ChvH,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aACXyiB,EAAWzwB,IAAI,YAEbqqB,IAEHA,EAAYoG,EAAWzwB,IAAI,SAAWywB,EAAWzwB,IAAI,SAEnC,WAAdqqB,IACFA,EAAY,UAII,UAAdA,EACFg7E,EAAWt8F,GAAKs8F,EAAWh9F,MACJ,WAAdgiB,IACTg7E,EAAWt8F,GAAKs8F,EAAWh9F,MAAQ,IAIlCgnG,IACHA,EAAe5+E,EAAWzwB,IAAI,QAAUywB,EAAWzwB,IAAI,UAElC,WAAjBqvG,IACFA,EAAe,UAGI,WAAjBA,EACFhK,EAAWr8F,GAAKq8F,EAAWv8F,OACD,WAAjBumG,IACThK,EAAWr8F,GAAKq8F,EAAWv8F,OAAS,GAGtCumG,EAAeA,GAAgB,OAGjClqG,EAAM+E,KAAK,WAAY,CAACm7F,EAAWt8F,EAAGs8F,EAAWr8F,IACjD,IAAIsuH,EAAa,CACfjtG,UAAWA,EACXC,kBAAmB+kF,GAErB1sB,EAAO3wE,SAASslH,GAChBJ,EAAUllH,SAASslH,GAGnBF,EAAYjyH,EAAMs0B,kBAClB,IAAI5L,EAAUw3E,EAAWzwC,OACrBzsD,EAAQsoB,EAAW5b,aAAa,CAAC,QAAS,YAC9C1M,EAAM4B,KAAO0mB,EAAWzwB,IAAI,mBAC5B,IAAIwH,EAAO,IAAI9C,EAAQ+C,KAAK,CAC1BV,MAAO,CACLgC,EAAGquH,EAAUruH,EAAI8kB,EAAQ,GACzB7kB,EAAGouH,EAAUpuH,EAAI6kB,EAAQ,GACzBxlB,MAAO+uH,EAAU/uH,MAAQwlB,EAAQ,GAAKA,EAAQ,GAC9C/kB,OAAQsuH,EAAUtuH,OAAS+kB,EAAQ,GAAKA,EAAQ,GAChDtlB,EAAGkoB,EAAWzwB,IAAI,iBAEpBmI,MAAOA,EACPoL,QAAQ,IAEV7O,EAAQ0iG,qBAAqB5/F,GAC7BrC,EAAMc,IAAIuB,EAnHV,CAoHF,G,uBC7LFjJ,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,MAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,M,wBCZR,IAAIiC,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBg5H,EAAiBh5H,EAAQ,OAEzBi5H,EAAeh3H,EAAQiwE,qBAAqB,CAC9CjxE,KAAM,UACNgjD,WAAY,CACVhjD,KAAM,MACNkvG,YAAY,GAEdn8E,qBAAsB,SAAU5nB,GAC9B6sH,EAAa9qH,WAAW5P,KAAM,uBAAwB6P,WACtD/N,EAAOU,KAAKxC,KAAK6N,OAAOslF,SAAS,SAAUwnC,EAAYC,GACrD,IAAIC,EAAUJ,EAAev3H,IAAI03H,GACjCC,GAAW/4H,EAAOqwF,MAAMwoC,EAAYE,EAAQxsH,cAC9C,GACF,EACAA,cAAe,CACbqc,MAAM,EACNnc,EAAG,EACHD,OAAQ,EACRsqD,OAAQ,aACRxtC,KAAM,QACNC,IAAK,MAGLyF,gBAAiB,cACjB7V,YAAa,OACbmpG,aAAc,EACdpqG,YAAa,EACb+W,QAAS,EACTohG,SAAU,GACV9N,QAAS,EACTyW,WAAW,EACXC,UAAW,CACThhH,OAAQ,CACNkB,YAAa,OACb1O,MAAO,QAET0N,SAAU,CACRgB,YAAa,eAOjB9X,EAAWu3H,EACft3H,EAAOvB,QAAUsB,C,iCClDjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBgsD,EAAchsD,EAAQ,MAEtBg5H,EAAiBh5H,EAAQ,OAEzBmG,EAAUnG,EAAQ,OAElBsG,EAAQtG,EAAQ,OAEhB4gB,EAAa5gB,EAAQ,OAErBu5H,EAAsBv5H,EAAQ,OAE9B0B,EAAWO,EAAQ4wE,oBAAoB,CACzC5xE,KAAM,UACN5C,OAAQ,SAAUm7H,EAAc54H,EAASC,EAAKyB,GAC5C,IAAIsE,EAAQrI,KAAKqI,MAGjB,GAFAA,EAAMkC,YAED0wH,EAAa/3H,IAAI,QAAtB,CAIA,IAAIivH,GAAY8I,EAAa/3H,IAAI,YAC7Bg4H,EAAcD,EAAa/3H,IAAI,YAAc,CAAC,EAC9Ci4H,EAAWn7H,KAAKo7H,YAAcp7H,KAAKo7H,UAAY,CAAC,GAChDC,EAAe,GACnBv5H,EAAOU,KAAK04H,GAAa,SAAUnqH,EAAKvN,GACtC63H,EAAar6H,KAAKwC,EACpB,IACA,IAAI6e,EAAWriB,KAAKs7H,eAAiB,GAAID,GAAclyH,IAAIoyH,GAAgB14H,OAAO04H,GAAgBrxH,OAAOpI,EAAOoF,MAAMq0H,EAAgB,OAAOlxH,UAE7IrK,KAAKs7H,cAAgBD,EAgIrBL,EAAoBzxH,OAAOlB,EAAO4yH,EAAc34H,GAGhD+F,EAAMc,IAAI6xH,EAAoBtY,eAAer6G,EAAMs0B,kBAAmBs+F,IAEtE5yH,EAAM0jC,WAAU,SAAUmoC,GACxB,IAAIsnD,EAAYtnD,EAAKunD,QACjB7uH,EAAasnE,EAAKtnE,WAEtB,GAAIA,GAAc4uH,EAAW,CAC3B,IAAI9wH,EAAO+iD,EAAY9wB,gBAAgB6+F,EAAW/tE,EAAYiuE,SAAS9uH,IACnEkhC,EAAUomC,EAAKxtE,SAAS,GAAK2B,EAAM3B,SAAS,GAC5CqnC,EAAUmmC,EAAKxtE,SAAS,GAAK2B,EAAM3B,SAAS,GAAKyrH,EACjDwJ,GAAe,EAEf5tF,EAAUrjC,EAAKsB,OAAS1J,EAAI4O,cAC9BtE,EAAW0M,aAAe,MAC1BqiH,GAAe,GAGjB,IAAIC,EAAYD,GAAgB,EAAIjxH,EAAKsB,OAASmmH,EAAW,EAEzDrkF,EAAUpjC,EAAKa,MAAQ,EAAIjJ,EAAI2O,YACjCrE,EAAW0M,aAAe,CAAC,OAAQsiH,GACnChvH,EAAW2gB,UAAY,SACdugB,EAAUpjC,EAAKa,MAAQ,EAAI,IACpCqB,EAAW0M,aAAe,CAAC,EAAGsiH,GAC9BhvH,EAAW2gB,UAAY,OAE3B,CACF,GAzKA,CAaA,SAASguG,EAAe1xH,EAAUC,GAChC,IAIIqpF,EAJAynC,EAAcS,EAAaxxH,GAC3BgyH,EAAUR,EAAavxH,GACvB6wH,EAAaO,EAAYN,GACzBkB,EAAe,IAAI/zH,EAAM4yH,EAAYM,EAAcA,EAAa54H,SAGpE,GAAIu4H,IAAgBiB,EAAS,CAE3B,GAAIE,EAAkBnB,GACpBznC,EAAU,CACRl9D,MAAO6lG,EACP36D,QAAS26D,EAAajuH,OAAOszD,QAC7By5D,YAAaA,OAEV,CACL,IAAIC,EAAUJ,EAAev3H,IAAI03H,GAEjC,IAAKC,EACH,OAGF1nC,EAAU,IAAI0nC,EAAQiB,EAAcz5H,EAASC,EAC/C,CAEA64H,EAASP,GAAeznC,CAC1B,KAAO,CAGL,GAFAA,EAAUgoC,EAASU,IAEd1oC,EACH,OAGFA,EAAQl9D,MAAQ6lG,EAChB3oC,EAAQ9wF,QAAUA,EAClB8wF,EAAQ7wF,IAAMA,CAChB,CAEKs4H,IAAeiB,EAKfC,EAAa54H,IAAI,UAAWiwF,EAAQ6oC,UAKzCC,EAAgBH,EAAc3oC,EAASynC,GAEvCkB,EAAaI,cAAgB,SAAUC,EAAUv8E,GAC/C,IAAI/xC,EAAS7N,KAAK6N,OACduuH,EAAYp8H,KAAKo8H,UACrBvuH,EAAOwuH,WAAaxuH,EAAOwuH,YAAc,CAAC,EAC1CxuH,EAAOwuH,WAAWF,GAAYv8E,EAE9Bw8E,EAAUD,IAAaC,EAAUD,GAAUjmH,QAAQ0pC,EACrD,EAEIuzC,EAAQrzF,QACVqzF,EAAQrzF,OAAOg8H,EAAcz5H,EAASC,EAAKyB,IAhB3CovF,EAAQjpF,QAAUipF,EAAQjpF,OAAO7H,EAASC,GAL1C6wF,EAAQ7qF,SAAW6qF,EAAQ7qF,QAAQjG,EAASC,EAuBhD,CAEA,SAAS25H,EAAgBH,EAAc3oC,EAASynC,GAC9C,IAAI0B,EAAiBR,EAAanvH,SAAS,aAYvC4vH,EAAQppC,EAAQqpC,SAAWrpC,EAAQqpC,WAAaV,EAAa54H,IAAI,QACjEu5H,EAASX,EAAa54H,IAAI,UAAY,CAAC,EAE3C,GAAqB,kBAAVq5H,EAAoB,CAC7B,IAAIroD,EAAOqoD,EACP7rG,EAAQ+rG,EACZF,EAAQ,CAAC,EACTE,EAAS,CAAC,EACVF,EAAM3B,GAAe1mD,EACrBuoD,EAAO7B,GAAelqG,CACxB,CAEA,IAAI0rG,EAAYN,EAAaM,UAAY,CAAC,EAC1Ct6H,EAAOU,KAAK+5H,GAAO,SAAUG,EAASP,GACpC,IAAInnH,EAAOpN,EAAQiwE,WAAW6kD,EAAS,CAAC,EAAG,CACzCzwH,GAAIkmH,EAAW,EACfjmH,GAAIimH,EAAW,EACf5mH,MAAO4mH,EACPnmH,OAAQmmH,IAEVn9G,EAAKE,SAASonH,EAAe3vH,SAAS,UAAUoL,gBAChD/C,EAAKpI,WAAa0vH,EAAe3vH,SAAS,YAAYoL,eACtDnQ,EAAQ0F,cAAc0H,GAElBimH,EAAa/3H,IAAI,eACnB8R,EAAKymH,QAAUgB,EAAON,GACtBnnH,EAAK1U,GAAG,aAAa,WAEnB,IAAIsM,EAAa0vH,EAAe3vH,SAAS,YAAYoL,eACrD/C,EAAKE,SAAS,CACZ5J,KAAMmxH,EAAON,GACb7iH,aAAc1M,EAAW0M,cAAgB,SACzCsL,SAAUhY,EAAWK,MAAQL,EAAW8J,QAAU,OAClD6W,UAAW3gB,EAAW2gB,WAAa,UAEvC,IAAGjtB,GAAG,YAAY,WAChB0U,EAAKE,SAAS,CACZ0P,SAAU,MAEd,KAGF5P,EAAKkB,QAAQ4lH,EAAa54H,IAAI,cAAgBi5H,IAAa,UAC3D9zH,EAAMc,IAAI6L,GACVA,EAAK1U,GAAG,QAASwB,EAAO2B,KAAK0vF,EAAQhyB,QAASgyB,EAAS9wF,EAASC,EAAK65H,IACrEC,EAAUD,GAAYnnH,CACxB,GACF,CAiCF,EACAs9E,WAAY,SAAU2oC,EAAc54H,EAASC,EAAKyB,GAChDjC,EAAOU,KAAKxC,KAAKo7H,WAAW,SAAUjoC,GACpCA,EAAQb,YAAca,EAAQb,WAAWa,EAAQl9D,MAAO5zB,EAASC,EAAKyB,EACxE,GACF,EACA0lB,aAAc,SAAUwxG,EAAc54H,EAASC,EAAKyB,GAClDjC,EAAOU,KAAKxC,KAAKo7H,WAAW,SAAUjoC,GACpCA,EAAQ1pE,cAAgB0pE,EAAQ1pE,aAAa0pE,EAAQl9D,MAAO5zB,EAASC,EAAKyB,EAC5E,GACF,EACAmG,OAAQ,SAAU7H,EAASC,GACzBR,EAAOU,KAAKxC,KAAKo7H,WAAW,SAAUjoC,GACpCA,EAAQjpF,QAAUipF,EAAQjpF,OAAO7H,EAASC,EAC5C,IACAtC,KAAKqI,MAAMkC,WACb,EACAjC,QAAS,SAAUjG,EAASC,GAC1BR,EAAOU,KAAKxC,KAAKo7H,WAAW,SAAUjoC,GACpCA,EAAQ7qF,SAAW6qF,EAAQ7qF,QAAQjG,EAASC,EAC9C,GACF,IAGF,SAASy5H,EAAkBnB,GACzB,OAAqC,IAA9BA,EAAYz+G,QAAQ,KAC7B,CAEA/Y,EAAOvB,QAAUsB,C,sBC9NjB,IAAIg4H,EAAW,CAAC,EAEhB,SAAS75H,EAASkC,EAAMiuC,GACtB0pF,EAAS33H,GAAQiuC,CACnB,CAEA,SAASvuC,EAAIM,GACX,OAAO23H,EAAS33H,EAClB,CAEA3B,EAAQP,SAAWA,EACnBO,EAAQqB,IAAMA,C,wBCXd,IAAIpB,EAASL,EAAQ,OAEjBg5H,EAAiBh5H,EAAQ,OAEzBk7H,EAAOl7H,EAAQ,OAEfm7H,EAAYD,EAAKxrC,QAAQjtD,MAE7B,SAAS24F,EAAM5mG,EAAO5zB,EAASC,GAC7BtC,KAAKi2B,MAAQA,EACbj2B,KAAKqC,QAAUA,EACfrC,KAAKsC,IAAMA,EAMXtC,KAAKg0G,WAMLh0G,KAAK88H,UACP,CAEAD,EAAMxuH,cAAgB,CACpBqc,MAAM,EACNhoB,KAAM,CAAC,OAAQ,UAAW,QAAS,QAAS,OAAQ,SACpDwxE,KAAM,CACJxpE,KAAM,iQAENqhB,QAAS,ubAET6nE,MAAO,iNAEPE,MAAO,gMAEPipC,KAAM,4KAENn4E,MAAO,0MAITl0B,MAAO5uB,EAAOyiB,MAAMq4G,EAAUlsG,QAEhC,IAAIwqF,EAAQ2hB,EAAM36H,UAElBg5G,EAAMp7G,OAASo7G,EAAM5oB,WAAa4oB,EAAMzxF,aAAe,SAAUqyG,EAAcz5H,EAASC,GACtF,IAAI4mB,EACAmoE,EACA2rC,EACJ36H,EAAQ4B,cAAc,CACpBC,SAAU,UACT,SAAUkuF,GACXlpE,EAAYkpE,EAAWlpE,UACvBmoE,EAAYe,EAAWV,YAAYL,WAAa,SAChD2rC,GAAa5qC,EAAWX,MAAMt9E,MAChC,IACAnU,KAAKg0G,WAAa9qF,EAClBlpB,KAAK88H,WAAazrC,EAClBvvF,EAAOU,KAAKs5H,EAAa54H,IAAI,QAAQ,IAAO,SAAUR,GACpDo5H,EAAaI,cAAcx5H,GAAgB,SAATA,EAAgC,aAAd2uF,EAAoC,UAAT3uF,EAAmBs6H,EAAYt6H,IAASwmB,GAAa,WAAa,SACnJ,GACF,EAEAgyF,EAAMshB,SAAW,WACf,IAAIvmG,EAAQj2B,KAAKi2B,MACbgnG,EAAiBhnG,EAAM/yB,IAAI,QAAQ,GACnCq5H,EAAQ,CAAC,EAMb,OALAz6H,EAAOU,KAAKyzB,EAAM/yB,IAAI,QAAQ,IAAO,SAAUR,GACzCu6H,EAAev6H,KACjB65H,EAAM75H,GAAQu6H,EAAev6H,GAEjC,IACO65H,CACT,EAEArhB,EAAM/5C,QAAU,SAAU9+D,EAASC,EAAKI,GACtC,IAAIwmB,EAAYlpB,KAAKg0G,WACjB3iB,EAAYrxF,KAAK88H,WAER,UAATp6H,GAEFJ,EAAI84B,eAAe,CACjB14B,KAAM,iBACN0sF,UAAW,KAEb9sF,EAAI84B,eAAe,CACjB14B,KAAM,QACN5B,QAAS,QAET2wF,MAAO,MAGTnvF,EAAI84B,eAAe,CACjB14B,KAAM,mBACNf,IAAK,QACL+vF,YAAa,CACXxoE,UAAoB,SAATxmB,EAAkBwmB,EAAYA,IAAcxmB,GAAeA,EACtE2uF,UAAoB,SAAT3uF,EAAgC,aAAd2uF,EAA2B,SAAW,WAAaA,IAIxF,EAEAopC,EAAen5H,SAAS,QAASu7H,GACjC,IAAI15H,EAAW05H,EACfz5H,EAAOvB,QAAUsB,C,iCC5GjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBmzE,EAAYnzE,EAAQ,OAEpBk7H,EAAOl7H,EAAQ,OAEfg5H,EAAiBh5H,EAAQ,OAEzBy7H,EAAeP,EAAKxrC,QAAQgsC,SAC5BC,EAAgB,IAAI/9F,MAAM,IAAI9nB,KAAK,KACnC8lH,EAAe,KAUnB,SAASC,EAAYj7H,GACnB,IAAIk7H,EAA4B,CAAC,EAC7BC,EAAc,GACdC,EAAO,GA8BX,OA7BAp7H,EAAQsjH,eAAc,SAAUthH,GAC9B,IAAIvB,EAAWuB,EAAYa,iBAE3B,IAAIpC,GAA+B,gBAAlBA,EAASJ,MAA4C,UAAlBI,EAASJ,KAuB3D86H,EAAYx8H,KAAKqD,OAvB6D,CAC9E,IAAIuE,EAAW9F,EAAS+F,cAExB,GAAsB,aAAlBD,EAASlG,KAAqB,CAChC,IAAIf,EAAMiH,EAASG,IAAM,IAAMH,EAAS0H,MAEnCitH,EAA0B57H,KAC7B47H,EAA0B57H,GAAO,CAC/Bw9C,aAAcv2C,EACdoK,UAAWlQ,EAASmQ,aAAarK,GACjCkZ,OAAQ,IAEV27G,EAAKz8H,KAAK,CACR21D,QAAS/tD,EAASG,IAClB4vE,UAAW/vE,EAAS0H,SAIxBitH,EAA0B57H,GAAKmgB,OAAO9gB,KAAKqD,EAC7C,MACEm5H,EAAYx8H,KAAKqD,EAErB,CAGF,IACO,CACLk5H,0BAA2BA,EAC3BG,MAAOF,EACPC,KAAMA,EAEV,CASA,SAASE,EAA+B77G,GACtC,IAAI87G,EAAS,GA6Bb,OA5BA97H,EAAOU,KAAKsf,GAAQ,SAAUzZ,EAAO1G,GACnC,IAAIw9C,EAAe92C,EAAM82C,aACrBnsC,EAAY3K,EAAM2K,UAClBm8G,EAAen8G,EAAUjK,IACzB80H,EAAU,CAAC,KAAKj7H,OAAOd,EAAO41B,IAAIrvB,EAAMyZ,QAAQ,SAAUA,GAC5D,OAAOA,EAAOte,IAChB,KACIs6H,EAAU,CAAC3+E,EAAalpB,MAAM+gB,iBAClCl1C,EAAOU,KAAK6F,EAAMyZ,QAAQ,SAAUA,GAClCg8G,EAAQ98H,KAAK8gB,EAAOsI,aAAaiE,SAAS8gG,GAAc,SAAUhxG,GAChE,OAAOA,CACT,IACF,IAIA,IAFA,IAAI+mE,EAAQ,CAAC24C,EAAQtmH,KAAK8lH,IAEjBpnH,EAAI,EAAGA,EAAI6nH,EAAQ,GAAG3pH,OAAQ8B,IAAK,CAG1C,IAFA,IAAI8nH,EAAQ,GAEHzqG,EAAI,EAAGA,EAAIwqG,EAAQ3pH,OAAQmf,IAClCyqG,EAAM/8H,KAAK88H,EAAQxqG,GAAGrd,IAGxBivE,EAAMlkF,KAAK+8H,EAAMxmH,KAAK8lH,GACxB,CAEAO,EAAO58H,KAAKkkF,EAAM3tE,KAAK,MACzB,IACOqmH,EAAOrmH,KAAK,OAAS6lH,EAAgB,OAC9C,CASA,SAASY,EAAoBl8G,GAC3B,OAAOhgB,EAAO41B,IAAI5V,GAAQ,SAAUA,GAClC,IAAIlhB,EAAOkhB,EAAOsI,aACd86D,EAAQ,CAACpjE,EAAOte,MAChBy6H,EAAO,GAYX,OAXAr9H,EAAK4B,KAAK5B,EAAKiZ,YAAY,WAKzB,IAJA,IAAIqkH,EAASruH,UAAUsE,OACnB5P,EAAYsL,UAAUquH,EAAS,GAC/B16H,EAAO5C,EAAK8D,QAAQH,GAEf0R,EAAI,EAAGA,EAAIioH,EAAS,EAAGjoH,IAC9BgoH,EAAKhoH,GAAKpG,UAAUoG,GAGtBivE,EAAMlkF,MAAMwC,EAAOA,EAAO65H,EAAe,IAAMY,EAAK1mH,KAAK8lH,GAC3D,IACOn4C,EAAM3tE,KAAK,KACpB,IAAGA,KAAK,OAAS6lH,EAAgB,OACnC,CAQA,SAASe,EAAoB97H,GAC3B,IAAI4Z,EAASqhH,EAAYj7H,GACzB,MAAO,CACL0L,MAAOjM,EAAOywD,OAAO,CAACorE,EAA+B1hH,EAAOshH,2BAA4BS,EAAoB/hH,EAAOyhH,SAAS,SAAUU,GACpI,OAAOA,EAAIhtG,QAAQ,YAAa,GAClC,IAAG7Z,KAAK,OAAS6lH,EAAgB,QACjCK,KAAMxhH,EAAOwhH,KAEjB,CAEA,SAASY,EAAKD,GACZ,OAAOA,EAAIhtG,QAAQ,SAAU,IAAIA,QAAQ,SAAU,GACrD,CAMA,SAASktG,EAAYC,GAEnB,IAAIC,EAAYD,EAAMv7H,MAAM,EAAGu7H,EAAMpiH,QAAQ,OAE7C,GAAIqiH,EAAUriH,QAAQkhH,IAAiB,EACrC,OAAO,CAEX,CAEA,IAAIoB,EAAiB,IAAIC,OAAO,IAAMrB,EAAe,KAAM,KAM3D,SAASsB,EAAiBC,GAWxB,IAVA,IAAIC,EAAWD,EAAI/8F,MAAM,QACrBg8F,EAAUQ,EAAKQ,EAASzhE,SAASv7B,MAAM48F,GACvChnG,EAAa,GACb3V,EAAShgB,EAAO41B,IAAImmG,GAAS,SAAUiB,GACzC,MAAO,CACLt7H,KAAMs7H,EACNl+H,KAAM,GAEV,IAESqV,EAAI,EAAGA,EAAI4oH,EAAS1qH,OAAQ8B,IAAK,CACxC,IAAI8nH,EAAQM,EAAKQ,EAAS5oH,IAAI4rB,MAAM48F,GACpChnG,EAAWz2B,KAAK+8H,EAAM3gE,SAEtB,IAAK,IAAI9pC,EAAI,EAAGA,EAAIyqG,EAAM5pH,OAAQmf,IAChCxR,EAAOwR,KAAOxR,EAAOwR,GAAG1yB,KAAKqV,GAAK8nH,EAAMzqG,GAE5C,CAEA,MAAO,CACLxR,OAAQA,EACR2V,WAAYA,EAEhB,CAQA,SAASsnG,EAAkBX,GAKzB,IAJA,IAAIl5C,EAAQk5C,EAAIv8F,MAAM,QAClBvb,EAAa+3G,EAAKn5C,EAAM9nB,SACxBx8D,EAAO,GAEFqV,EAAI,EAAGA,EAAIivE,EAAM/wE,OAAQ8B,IAAK,CACrC,IAEIlI,EAFAgwH,EAAQM,EAAKn5C,EAAMjvE,IAAI4rB,MAAM48F,GAC7Bj7H,EAAO,GAEPw7H,GAAU,EAEV3gH,MAAM0/G,EAAM,KAEdiB,GAAU,EACVx7H,EAAOu6H,EAAM,GACbA,EAAQA,EAAM/6H,MAAM,GACpBpC,EAAKqV,GAAK,CACRzS,KAAMA,EACNuK,MAAO,IAETA,EAAQnN,EAAKqV,GAAGlI,OAEhBA,EAAQnN,EAAKqV,GAAK,GAGpB,IAAK,IAAIqd,EAAI,EAAGA,EAAIyqG,EAAM5pH,OAAQmf,IAChCvlB,EAAM/M,MAAM+8H,EAAMzqG,IAGC,IAAjBvlB,EAAMoG,SACR6qH,EAAUp+H,EAAKqV,GAAGlI,MAAQA,EAAM,GAAKnN,EAAKqV,GAAKlI,EAAM,GAEzD,CAEA,MAAO,CACLvK,KAAM8iB,EACN1lB,KAAMA,EAEV,CASA,SAASq+H,EAAcb,EAAKc,GAC1B,IAAIC,EAASf,EAAIv8F,MAAM,IAAI68F,OAAO,MAAQtB,EAAgB,MAAO,MAC7Dr3E,EAAY,CACdjkC,OAAQ,IAoBV,OAlBAhgB,EAAOU,KAAK28H,GAAQ,SAAUZ,EAAO95H,GACnC,GAAI65H,EAAYC,GAAQ,CACtB,IAAItiH,EAAS0iH,EAAiBJ,GAC1Ba,EAAYF,EAAcz6H,GAC1B46H,EAAUD,EAAUzoE,QAAU,OAE9ByoE,IACFr5E,EAAUs5E,GAAWt5E,EAAUs5E,IAAY,GAC3Ct5E,EAAUs5E,GAASD,EAAUzmD,WAAa,CACxC/3E,KAAMqb,EAAOwb,YAEfsuB,EAAUjkC,OAASikC,EAAUjkC,OAAOlf,OAAOqZ,EAAO6F,QAEtD,KAAO,CACD7F,EAAS8iH,EAAkBR,GAC/Bx4E,EAAUjkC,OAAO9gB,KAAKib,EACxB,CACF,IACO8pC,CACT,CAQA,SAASu5E,EAASrpG,GAChBj2B,KAAKu/H,KAAO,KACZv/H,KAAKi2B,MAAQA,CACf,CA6IA,SAASupG,EAAmBr/E,EAASwG,GACnC,OAAO7kD,EAAO41B,IAAIyoB,GAAS,SAAUs/E,EAAQh7H,GAC3C,IAAIi7H,EAAW/4E,GAAgBA,EAAaliD,GAE5C,OAAI3C,EAAOkgB,SAAS09G,KAAc59H,EAAO6Q,QAAQ+sH,IAC3C59H,EAAOkgB,SAASy9G,KAAY39H,EAAO6Q,QAAQ8sH,KAC7CA,EAASA,EAAO1xH,OAIXjM,EAAOkL,SAAS,CACrBe,MAAO0xH,GACNC,IAEID,CAEX,GACF,CA5JAH,EAASjxH,cAAgB,CACvBqc,MAAM,EACNi1G,UAAU,EACVC,gBAAiB,KACjBC,gBAAiB,KACjB3rD,KAAM,8GACNxjD,MAAO5uB,EAAOyiB,MAAM24G,EAAaxsG,OACjCisG,KAAM76H,EAAOyiB,MAAM24G,EAAaP,MAChC7rG,gBAAiB,OACjBi7D,UAAW,OACX+zC,cAAe,OACfC,oBAAqB,OACrBC,YAAa,UACbC,gBAAiB,QAGnBX,EAASp9H,UAAUi/D,QAAU,SAAU9+D,EAASC,GAC9C,IAAI49H,EAAY59H,EAAI69H,SAChBlqG,EAAQj2B,KAAKi2B,MAEbj2B,KAAKu/H,MACPW,EAAUE,YAAYpgI,KAAKu/H,MAG7B,IAAI7lE,EAAO2mE,SAASC,cAAc,OAClC5mE,EAAKruD,MAAMk1H,QAAU,2DACrB7mE,EAAKruD,MAAMylB,gBAAkBmF,EAAM/yB,IAAI,oBAAsB,OAE7D,IAAI47H,EAASuB,SAASC,cAAc,MAChC3D,EAAO1mG,EAAM/yB,IAAI,SAAW,GAChC47H,EAAO0B,UAAY7D,EAAK,IAAM1mG,EAAM/yB,IAAI,SACxC47H,EAAOzzH,MAAMk1H,QAAU,qBACvBzB,EAAOzzH,MAAMkB,MAAQ0pB,EAAM/yB,IAAI,aAC/B,IAAIu9H,EAAWJ,SAASC,cAAc,OAClCI,EAAWL,SAASC,cAAc,YACtCG,EAASp1H,MAAMk1H,QAAU,0CACzB,IAAIX,EAAkB3pG,EAAM/yB,IAAI,mBAC5B28H,EAAkB5pG,EAAM/yB,IAAI,mBAC5B+Y,EAASkiH,EAAoB97H,GAEjC,GAA+B,oBAApBu9H,EAAgC,CACzC,IAAIe,EAAYf,EAAgBt9H,EAAIs+H,aAEX,kBAAdD,EACTF,EAASD,UAAYG,EACZ7+H,EAAO++H,MAAMF,IACtBF,EAASK,YAAYH,EAEzB,MAEEF,EAASK,YAAYJ,GACrBA,EAASf,SAAW1pG,EAAM/yB,IAAI,YAC9Bw9H,EAASr1H,MAAMk1H,QAAU,kFACzBG,EAASr1H,MAAMkB,MAAQ0pB,EAAM/yB,IAAI,aACjCw9H,EAASr1H,MAAM4P,YAAcgb,EAAM/yB,IAAI,uBACvCw9H,EAASr1H,MAAMylB,gBAAkBmF,EAAM/yB,IAAI,iBAC3Cw9H,EAAS3yH,MAAQkO,EAAOlO,MAG1B,IAAImxH,EAAgBjjH,EAAOwhH,KACvBsD,EAAkBV,SAASC,cAAc,OAC7CS,EAAgB11H,MAAMk1H,QAAU,6CAChC,IAAIS,EAAc,4GACdC,EAAcZ,SAASC,cAAc,OACrCY,EAAgBb,SAASC,cAAc,OAC3CU,GAAe,qBAAuB/qG,EAAM/yB,IAAI,eAChD89H,GAAe,UAAY/qG,EAAM/yB,IAAI,mBACrC,IAAI0yB,EAAO51B,KAEX,SAASmhI,IACPjB,EAAUE,YAAY1mE,GACtB9jC,EAAK2pG,KAAO,IACd,CAEA3qD,EAAUwsD,iBAAiBH,EAAa,QAASE,GACjDvsD,EAAUwsD,iBAAiBF,EAAe,SAAS,WACjD,IAAIn7E,EAEJ,IAEIA,EAD6B,oBAApB85E,EACGA,EAAgBY,EAAUn+H,EAAIs+H,aAE9B3B,EAAcyB,EAAS3yH,MAAOmxH,EAE9C,CAAE,MAAOxiG,GAEP,MADAykG,IACM,IAAIE,MAAM,0BAA4B3kG,EAC9C,CAEIqpB,GACFzjD,EAAI84B,eAAe,CACjB14B,KAAM,iBACNqjD,UAAWA,IAIfo7E,GACF,IACAF,EAAYT,UAAY7D,EAAK,GAC7BuE,EAAcV,UAAY7D,EAAK,GAC/BuE,EAAc71H,MAAMk1H,QAAUS,EAC9BC,EAAY51H,MAAMk1H,QAAUS,GAC3B/qG,EAAM/yB,IAAI,aAAe69H,EAAgBD,YAAYI,GACtDH,EAAgBD,YAAYG,GAE5BrsD,EAAUwsD,iBAAiBV,EAAU,WAAW,SAAUhkG,GACxD,GAA+B,KAA1BA,EAAE4kG,SAAW5kG,EAAE6kG,OAAc,CAEhC,IAAIpjH,EAAMne,KAAK+N,MACXwQ,EAAQve,KAAKwhI,eACb1xG,EAAM9vB,KAAKyhI,aAEfzhI,KAAK+N,MAAQoQ,EAAIujH,UAAU,EAAGnjH,GAAS8+G,EAAel/G,EAAIujH,UAAU5xG,GAEpE9vB,KAAKwhI,eAAiBxhI,KAAKyhI,aAAeljH,EAAQ,EAElDq2D,EAAUv3B,KAAK3gB,EACjB,CACF,IACAg9B,EAAKonE,YAAYhC,GACjBplE,EAAKonE,YAAYL,GACjB/mE,EAAKonE,YAAYC,GACjBN,EAASp1H,MAAMW,OAASk0H,EAAUyB,aAAe,GAAK,KACtDzB,EAAUY,YAAYpnE,GACtB15D,KAAKu/H,KAAO7lE,CACd,EAEA4lE,EAASp9H,UAAUgI,OAAS,SAAU7H,EAASC,GAC7CtC,KAAKu/H,MAAQj9H,EAAI69H,SAASC,YAAYpgI,KAAKu/H,KAC7C,EAEAD,EAASp9H,UAAUoG,QAAU,SAAUjG,EAASC,GAC9CtC,KAAKkK,OAAO7H,EAASC,EACvB,EAyBAm4H,EAAen5H,SAAS,WAAYg+H,GACpC57H,EAAQI,eAAe,CACrBpB,KAAM,iBACNoC,MAAO,kBACPjC,OAAQ,qBACP,SAAUkB,EAAS1B,GACpB,IAAIu/H,EAAmB,GACvB9/H,EAAOU,KAAKuB,EAAQgiD,UAAUjkC,QAAQ,SAAUshC,GAC9C,IAAI/+C,EAAchC,EAAQgjH,gBAAgBjiE,EAAU5/C,MAAM,GAE1D,GAAKa,EAOE,CACL,IAAIsiD,EAAetiD,EAAYnB,IAAI,QACnC0+H,EAAiB5gI,KAAK,CACpBwC,KAAM4/C,EAAU5/C,KAChB5C,KAAM4+H,EAAmBp8E,EAAUxiD,KAAM+lD,IAE7C,MAVEi7E,EAAiB5gI,KAAKc,EAAOyF,OAAO,CAElC7E,KAAM,WACL0gD,GAQP,IACA/gD,EAAQmzB,YAAY1zB,EAAOkL,SAAS,CAClC8U,OAAQ8/G,GACP79H,EAAQgiD,WACb,IACA,IAAI5iD,EAAWm8H,EACfl8H,EAAOvB,QAAUsB,C,iCCxdjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjB8rF,EAAkB9rF,EAAQ,OAE1B6zF,EAAqB7zF,EAAQ,OAE7BogI,EAAUpgI,EAAQ,OAElB0iG,EAAa1iG,EAAQ,OAErBk7H,EAAOl7H,EAAQ,OAEfg5H,EAAiBh5H,EAAQ,OAE7BA,EAAQ,MAGR,IAAIqgI,EAAenF,EAAKxrC,QAAQ4wC,SAC5Bv/H,EAAOV,EAAOU,KAEdw/H,EAAoB,4BAExB,SAASC,EAAShsG,EAAO5zB,EAASC,IAK/BtC,KAAKytF,iBAAmB,IAAIF,EAAgBjrF,EAAIujB,UAAUvlB,GAAG,QAASwB,EAAO2B,KAAKzD,KAAK0tF,SAAU1tF,OAAOuuF,QAMzGvuF,KAAKkiI,aACP,CAEAD,EAAS5zH,cAAgB,CACvBqc,MAAM,EAENwpD,KAAM,CACJ3uE,KAAM,wDACN48H,KAAM,6DAGRzxG,MAAO5uB,EAAOyiB,MAAMu9G,EAAapxG,QAEnC,IAAIwqF,EAAQ+mB,EAAS//H,UAErBg5G,EAAMp7G,OAAS,SAAUg8H,EAAcz5H,EAASC,EAAKyB,GACnD/D,KAAKi2B,MAAQ6lG,EACb97H,KAAKqC,QAAUA,EACfrC,KAAKsC,IAAMA,EACX8/H,EAAoBtG,EAAcz5H,EAASrC,KAAM+D,EAASzB,GAC1D+/H,EAAoBvG,EAAcz5H,EACpC,EAEA64G,EAAM/5C,QAAU,SAAU9+D,EAASC,EAAKI,GACtCstH,EAASttH,GAAMiV,KAAK3X,KACtB,EAEAk7G,EAAMhxG,OAAS,SAAU7H,EAASC,GAChCtC,KAAKytF,iBAAiBysB,SACxB,EAEAgB,EAAM5yG,QAAU,SAAUjG,EAASC,GACjCtC,KAAKytF,iBAAiBnlF,SACxB,EAMA,IAAI0nH,EAAW,CACbzqH,KAAM,WACJ,IAAI+8H,GAActiI,KAAKkiI,cACvBliI,KAAKsC,IAAI84B,eAAe,CACtB14B,KAAM,mBACNf,IAAK,iBACL4gI,qBAAsBD,GAE1B,EACAH,KAAM,WACJniI,KAAK6rG,oBAAoBg2B,EAAQhpF,IAAI74C,KAAKqC,SAC5C,GAyFF,SAASmgI,EAAoB30H,GAC3B,IAAI2zG,EAAU,CAAC,EAOf,OALA1/G,EAAOU,KAAK,CAAC,aAAc,eAAe,SAAUgB,GAClDg+G,EAAQh+G,GAAQqK,EAAOrK,GACN,MAAjBg+G,EAAQh+G,KAAkBg+G,EAAQh+G,GAAQ,SACvB,IAAlBg+G,EAAQh+G,IAAqC,SAAlBg+G,EAAQh+G,MAAsBg+G,EAAQh+G,GAAQ,GAC5E,IACOg+G,CACT,CAEA,SAAS6gB,EAAoBvG,EAAcz5H,GACzCy5H,EAAaI,cAAc,OAAQ2F,EAAQ7qH,MAAM3U,GAAW,EAAI,WAAa,SAC/E,CAEA,SAAS+/H,EAAoBtG,EAAcz5H,EAASoD,EAAM1B,EAASzB,GACjE,IAAImgI,EAAah9H,EAAKy8H,cAElBn+H,GAA4B,qBAAjBA,EAAQrB,OACrB+/H,EAA6B,mBAAhB1+H,EAAQpC,KAA2BoC,EAAQw+H,sBAG1D98H,EAAKy8H,cAAgBO,EACrB3G,EAAaI,cAAc,OAAQuG,EAAa,WAAa,UAC7D,IAAIjwC,EAAqB,IAAI8C,EAAmBktC,EAAoB1G,EAAajuH,QAASxL,EAAS,CACjG44G,QAAS,CAAC,UAGZx1G,EAAKgoF,iBAAiBgB,UAAU+D,EAAmBI,cAActwF,GAAK,SAAU8iE,GAC9E,OAAOA,EAAWy3C,gBAAkBz3C,EAAW03C,cAAgB,SAAW13C,EAAWy3C,eAAiBz3C,EAAW03C,cAAgB,QAAU,MAC7I,KAAI9tB,cAAYyzC,GAAa,CAC3Bv5G,UAAW,OACX+lE,WAAY,CAEVzhF,UAAW,EACXP,KAAM,oBAGZ,CAzHAiuG,EAAMxtB,SAAW,SAAU+D,EAAO1gF,GAChC,GAAKA,EAAIy+E,OAAUiC,EAAMt9E,OAAzB,CAIA,IAAI05F,EAAW,CAAC,EACZxrG,EAAUrC,KAAKqC,QAEnBrC,KAAKytF,iBAAiBW,aAAa,IAGnC,IAAIoE,EAAqB,IAAI8C,EAAmBktC,EAAoBxiI,KAAKi2B,MAAMpoB,QAASxL,EAAS,CAC/F44G,QAAS,CAAC,UAEZzoB,EAAmB6oB,kBAAkB5pB,EAAOpvF,GAAS,SAAUmsE,EAAM8sC,EAAYx4G,GAC/E,GAAsB,gBAAlBA,EAASJ,KAAb,CAIA,IAAIwmB,EAAYslD,EAAKtlD,UAEH,SAAdA,GACFw5G,EAAS,IAAK5/H,EAAUw4G,EAAW,IACnConB,EAAS,IAAK5/H,EAAUw4G,EAAW,KAEnConB,EAAS,CACP9uC,MAAO,IACPE,MAAO,KACP5qE,GAAYpmB,EAAUw4G,EAX1B,CAaF,IACAumB,EAAQ7gI,KAAKqB,EAASwrG,GAEtB7tG,KAAK6rG,oBAAoBgC,EA9BzB,CAgCA,SAAS60B,EAASplH,EAASxa,EAAUs1F,GACnC,IAAI3kF,EAAO3Q,EAASikC,QAAQzpB,GACxBssC,EAAYn2C,EAAKwiB,MACjB2mE,EAAgB+lC,EAAarlH,EAASssC,EAAWvnD,GAEjD+7F,EAAaxB,EAAcoG,4BAA4Bp5C,GAAWo1C,gBAEvC,MAA3BZ,EAAWmC,cAAmD,MAA3BnC,EAAWoC,eAChDpI,EAAS+L,EAAW,EAAG/L,EAAOp1F,QAASyQ,EAAKhN,MAAMiW,YAAa,EAAG0hF,EAAWmC,aAAcnC,EAAWoC,eAGxG5D,IAAkBiR,EAASjR,EAAcv2E,IAAM,CAC7Cy+E,WAAYlI,EAAcv2E,GAC1B85E,WAAY/H,EAAO,GACnBgI,SAAUhI,EAAO,IAErB,CAEA,SAASuqC,EAAarlH,EAASssC,EAAWvnD,GACxC,IAAIugI,EAQJ,OAPAvgI,EAAQ4B,cAAc,CACpBC,SAAU,WACVC,QAAS,WACR,SAAU0+H,GACX,IAAIpJ,EAAMoJ,EAAQrlC,aAAalgF,EAASssC,EAAUkW,gBAClD25D,IAAQmJ,EAAQC,EAClB,IACOD,CACT,CACF,EAMA1nB,EAAMrP,oBAAsB,SAAUgC,GACpC,IAAI/tB,EAAQ,GAEZt9E,EAAKqrG,GAAU,SAAUluB,EAAWmlB,GAClChlB,EAAM9+E,KAAKc,EAAOyiB,MAAMo7D,GAC1B,IACAG,EAAM3rE,QAAUnU,KAAKsC,IAAI84B,eAAe,CACtC14B,KAAM,WACN6kD,KAAMvnD,KAAKwnD,IACXs4B,MAAOA,GAEX,EA0CA26C,EAAen5H,SAAS,WAAY2gI,GAEpCv+H,EAAQ+b,sBAAqB,SAAU5R,GACrC,GAAKA,EAAL,CAIA,IAAIi1H,EAAej1H,EAAOk0H,WAAal0H,EAAOk0H,SAAW,IAEpDjgI,EAAO6Q,QAAQmwH,KAClBj1H,EAAOk0H,SAAWe,EAAe,CAACA,IAGpC,IAAIC,EAAal1H,EAAOsjF,QAExB,GAAI4xC,IAEEjhI,EAAO6Q,QAAQowH,KACjBA,EAAaA,EAAW,IAGtBA,GAAcA,EAAW5vC,SAAS,CACpC,IAAI6vC,EAAcD,EAAW5vC,QAAQ4uC,SACrCkB,EAAW,QAASD,GACpBC,EAAW,QAASD,EACtB,CApBF,CAuBA,SAASC,EAAWljD,EAAUijD,GAC5B,GAAKA,EAAL,CAKA,IAAIE,EAAkBnjD,EAAW,QAC7BojD,EAAmBH,EAAYE,GAEX,MAApBC,GAAgD,OAApBA,GAA8BrhI,EAAO6Q,QAAQwwH,KAC3EA,GAAwC,IAArBA,GAAmD,SAArBA,EAA8B,GAAK,CAACA,IAGvFC,EAAiBrjD,GAAU,SAAUsjD,EAAS1qD,GAC5C,GAAwB,MAApBwqD,GAAgD,OAApBA,IAA8E,IAAjDrhI,EAAOqa,QAAQgnH,EAAkBxqD,GAA9F,CAIA,IAAI81C,EAAS,CACX/rH,KAAM,SACN4gI,cAAc,EAEdj9G,GAAI27G,EAAoBjiD,EAAWpH,GAIrC81C,EAAOyU,GAAmBvqD,EAC1BmqD,EAAa9hI,KAAKytH,EAXlB,CAYF,GAzBA,CA0BF,CAEA,SAAS2U,EAAiBl/H,EAAUsT,GAClC,IAAIuqB,EAAOl0B,EAAO3J,GAEbpC,EAAO6Q,QAAQovB,KAClBA,EAAOA,EAAO,CAACA,GAAQ,IAGzBv/B,EAAKu/B,EAAMvqB,EACb,CACF,IACA,IAAIrU,EAAW8+H,EACf7+H,EAAOvB,QAAUsB,C,gCC5RjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBk7H,EAAOl7H,EAAQ,OAEfg5H,EAAiBh5H,EAAQ,OAEzB8hI,EAAgB5G,EAAKxrC,QAAQqyC,UAEjC,SAASC,EAAUxtG,GACjBj2B,KAAKi2B,MAAQA,CACf,CAEAwtG,EAAUp1H,cAAgB,CACxBqc,MAAM,EACNhoB,KAAM,GAENwxE,KAAM,CACJv1D,KAAM,+DACNnN,IAAK,kFACL7B,MAAO,mYAEP+zH,MAAO,sGAGThzG,MAAO5uB,EAAOyiB,MAAMg/G,EAAc7yG,OAClC7iB,OAAQ,CAAC,EACTqR,YAAa,CAAC,GAEhB,IAAIg8F,EAAQuoB,EAAUvhI,UAEtBg5G,EAAMshB,SAAW,WACf,IAAIvmG,EAAQj2B,KAAKi2B,MACbgnG,EAAiBhnG,EAAM/yB,IAAI,QAC3Bq5H,EAAQ,CAAC,EAMb,OALAz6H,EAAOU,KAAKyzB,EAAM/yB,IAAI,SAAS,SAAUR,GACnCu6H,EAAev6H,KACjB65H,EAAM75H,GAAQu6H,EAAev6H,GAEjC,IACO65H,CACT,EAEA,IAAIoH,EAAqB,CACvB,KAAQ,SAAUhgI,EAAYyiB,EAAU/hB,EAAa4xB,GACnD,GAAmB,QAAftyB,EACF,OAAO7B,EAAOqwF,MAAM,CAClB9rE,GAAID,EACJ1jB,KAAM,OAEN9B,KAAMyD,EAAYnB,IAAI,QACtByM,MAAOtL,EAAYnB,IAAI,SACvBwnH,UAAWrmH,EAAYnB,IAAI,aAC3BunH,SAAUpmH,EAAYnB,IAAI,aACzB+yB,EAAM/yB,IAAI,gBAAkB,CAAC,GAAG,EAEvC,EACA,IAAO,SAAUS,EAAYyiB,EAAU/hB,EAAa4xB,GAClD,GAAmB,SAAftyB,EACF,OAAO7B,EAAOqwF,MAAM,CAClB9rE,GAAID,EACJ1jB,KAAM,MAEN9B,KAAMyD,EAAYnB,IAAI,QACtByM,MAAOtL,EAAYnB,IAAI,SACvBwnH,UAAWrmH,EAAYnB,IAAI,aAC3BunH,SAAUpmH,EAAYnB,IAAI,aACzB+yB,EAAM/yB,IAAI,eAAiB,CAAC,GAAG,EAEtC,EACA,MAAS,SAAUS,EAAYyiB,EAAU/hB,EAAa4xB,GACpD,GAAmB,SAAftyB,GAAwC,QAAfA,EAC3B,OAAO7B,EAAOqwF,MAAM,CAClB9rE,GAAID,EACJzW,MAAO,0BACNsmB,EAAM/yB,IAAI,iBAAmB,CAAC,GAAG,EAExC,EACA,MAAS,SAAUS,EAAYyiB,EAAU/hB,EAAa4xB,GACpD,GAAmB,SAAftyB,GAAwC,QAAfA,EAC3B,OAAO7B,EAAOqwF,MAAM,CAClB9rE,GAAID,EACJzW,MAAO,IACNsmB,EAAM/yB,IAAI,iBAAmB,CAAC,GAAG,EAExC,GAEE0gI,EAAa,CAAC,CAAC,OAAQ,OAAQ,CAAC,QAAS,UAE7C1oB,EAAM/5C,QAAU,SAAU9+D,EAASC,EAAKI,GACtC,IAAIuzB,EAAQj2B,KAAKi2B,MACb/W,EAAc+W,EAAM/yB,IAAI,eAAiBR,GAE7C,GAAKihI,EAAmBjhI,GAAxB,CAIA,IAAIqjD,EAAY,CACdjkC,OAAQ,IAGN+hH,EAAyB,SAAUx/H,GACrC,IAAIV,EAAaU,EAAYF,QACzBiiB,EAAW/hB,EAAYgiB,GACvBy9G,EAAeH,EAAmBjhI,GAAMiB,EAAYyiB,EAAU/hB,EAAa4xB,GAE3E6tG,IAEFhiI,EAAOkL,SAAS82H,EAAcz/H,EAAYwJ,QAC1Ck4C,EAAUjkC,OAAO9gB,KAAK8iI,IAIxB,IAAIhhI,EAAWuB,EAAYa,iBAE3B,GAAIpC,GAA8B,gBAAlBA,EAASJ,OAAoC,SAATA,GAA4B,QAATA,GAAiB,CACtF,IAAIy8C,EAAer8C,EAASs8C,eAAe,WAAW,GAEtD,GAAID,EAAc,CAChB,IAAIwX,EAAUxX,EAAap2C,IACvBmuC,EAAWyf,EAAU,OACrB/M,EAAYvnD,EAAQg1C,gBAAgB,CACtCnzC,SAAUgzC,EACV5mC,MAAOjM,EAAYnB,IAAIM,KAAO,SAC9B6iB,GAAIhiB,EAAYnB,IAAIM,KAAO,QAC1B,GACCm1E,EAAY/uB,EAAUkW,eAC1B/Z,EAAU7O,GAAY6O,EAAU7O,IAAa,GAE7C,IAAK,IAAIjhC,EAAI,EAAGA,GAAK0iE,EAAW1iE,IAC9B8vC,EAAU7O,GAAUyhC,GAAa5yB,EAAU7O,GAAUyhC,IAAc,CAAC,EAGtE5yB,EAAU7O,GAAUyhC,GAAW/gB,YAAuB,QAATl1D,CAC/C,CACF,CACF,EAEAZ,EAAOU,KAAKohI,GAAY,SAAUG,GAC5BjiI,EAAOqa,QAAQ4nH,EAAOrhI,IAAS,GACjCZ,EAAOU,KAAKuhI,GAAO,SAAUz7G,GAC3B2N,EAAMimG,cAAc5zG,EAAM,SAC5B,GAEJ,IACA2N,EAAMimG,cAAcx5H,EAAM,YAC1BL,EAAQ4B,cAAc,CACpBC,SAAU,SACVE,MAAsB,MAAf8a,EAAsB,KAAO,CAClCA,YAAaA,IAEd2kH,GACHvhI,EAAI84B,eAAe,CACjB14B,KAAM,kBACNshI,YAAathI,EACbqjD,UAAWA,GA5Db,CA8DF,EAEAriD,EAAQI,eAAe,CACrBpB,KAAM,kBACNoC,MAAO,mBACPjC,OAAQ,qBACP,SAAUkB,EAAS1B,GACpBA,EAAQmzB,YAAYzxB,EAAQgiD,UAC9B,IACA00E,EAAen5H,SAAS,YAAamiI,GACrC,IAAItgI,EAAWsgI,EACfrgI,EAAOvB,QAAUsB,C,wBCzKjB,IAAIO,EAAUjC,EAAQ,OAElBogI,EAAUpgI,EAAQ,OAElBk7H,EAAOl7H,EAAQ,OAEfg5H,EAAiBh5H,EAAQ,OAEzBwiI,EAActH,EAAKxrC,QAAQsO,QAE/B,SAASykC,EAAQjuG,GACfj2B,KAAKi2B,MAAQA,CACf,CAEAiuG,EAAQ71H,cAAgB,CACtBqc,MAAM,EACNwpD,KAAM,kLACNxjD,MAAOuzG,EAAYvzG,OAErB,IAAIwqF,EAAQgpB,EAAQhiI,UAEpBg5G,EAAM/5C,QAAU,SAAU9+D,EAASC,EAAKI,GACtCm/H,EAAQj9E,MAAMviD,GACdC,EAAI84B,eAAe,CACjB14B,KAAM,UACN6kD,KAAMvnD,KAAKwnD,KAEf,EAEAizE,EAAen5H,SAAS,UAAW4iI,GACnCxgI,EAAQI,eAAe,CACrBpB,KAAM,UACNoC,MAAO,UACPjC,OAAQ,qBACP,SAAUkB,EAAS1B,GACpBA,EAAQw3H,YAAY,WACtB,IACA,IAAI12H,EAAW+gI,EACf9gI,EAAOvB,QAAUsB,C,2DCtCjB,IAAI+8E,EAAMz+E,EAAQ,OAEdk7H,EAAOl7H,EAAQ,OAEfg5H,EAAiBh5H,EAAQ,OAEzB0iI,EAAkBxH,EAAKxrC,QAAQizC,YAEnC,SAASC,EAAYpuG,GACnBj2B,KAAKi2B,MAAQA,CACf,CAEAouG,EAAYh2H,cAAgB,CAC1Bqc,MAAM,EACNwpD,KAAM,mFACNxjD,MAAOyzG,EAAgBzzG,MACvBhuB,KAAM,MAGNc,KAAM,GACN8gI,kBAAmB,CAAC,WACpBC,WAAY,EACZ5H,KAAMwH,EAAgBxH,KAAK35H,SAE7BqhI,EAAYniI,UAAU85H,UAAY97C,EAAIghB,gBACtC,IAAIga,EAAQmpB,EAAYniI,UAExBg5G,EAAM/5C,QAAU,SAAU9+D,EAASC,GACjC,IAAI2zB,EAAQj2B,KAAKi2B,MACbvF,EAAQuF,EAAM/yB,IAAI,SAAWb,EAAQa,IAAI,iBAAmB,UAC5DshI,EAAKnE,SAASC,cAAc,KAC5B59H,EAAOuzB,EAAM/yB,IAAI,QAAQ,IAAS,MACtCshI,EAAGC,SAAW/zG,EAAQ,IAAMhuB,EAC5B8hI,EAAG1uH,OAAS,SACZ,IAAI4uH,EAAMpiI,EAAIqiI,oBAAoB,CAChCjiI,KAAMA,EACNouB,gBAAiBmF,EAAM/yB,IAAI,mBAAmB,IAASb,EAAQa,IAAI,oBAAsB,OACzFohI,kBAAmBruG,EAAM/yB,IAAI,qBAC7BqhI,WAAYtuG,EAAM/yB,IAAI,gBAIxB,GAFAshI,EAAGI,KAAOF,EAEgB,oBAAfG,YAA8B3kD,EAAI4kD,QAAQC,IAAO7kD,EAAI4kD,QAAQ5tG,KASpE,GAAIiyC,OAAO67D,UAAUC,iBAAkB,CACrC,IAAIC,EAAOC,KAAKT,EAAI7iG,MAAM,KAAK,IAC3BG,EAAIkjG,EAAK/wH,OACTixH,EAAQ,IAAIC,WAAWrjG,GAE3B,MAAOA,IACLojG,EAAMpjG,GAAKkjG,EAAKI,WAAWtjG,GAG7B,IAAIujG,EAAO,IAAIC,KAAK,CAACJ,IACrBj8D,OAAO67D,UAAUC,iBAAiBM,EAAM70G,EAAQ,IAAMhuB,EACxD,KAAO,CACL,IAAIi6H,EAAO1mG,EAAM/yB,IAAI,QACjBs0B,EAAO,qCAAiDktG,EAAM,qCAAuC/H,GAAQA,EAAK,IAAM,IAAjH,cACP8I,EAAMt8D,OAAOC,OACjBq8D,EAAIpF,SAASqF,MAAMluG,EACrB,KAzB0E,CAC5E,IAAImuG,EAAM,IAAId,WAAW,QAAS,CAChCp/H,KAAM0jE,OACNy8D,SAAS,EACTC,YAAY,IAEdrB,EAAGsB,cAAcH,EACnB,CAoBF,EAEAlL,EAAen5H,SAAS,cAAe+iI,GACvC,IAAIlhI,EAAWkhI,EACfjhI,EAAOvB,QAAUsB,C,wBCzEjB,IAAIO,EAAUjC,EAAQ,OAEtBA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,OAYRiC,EAAQI,eAAe,CACrBpB,KAAM,UACNoC,MAAO,UACPjC,OAAQ,4BAEV,WAAa,IACba,EAAQI,eAAe,CACrBpB,KAAM,UACNoC,MAAO,UACPjC,OAAQ,4BAEV,WAAa,G,iCC7Bb,IAAIf,EAASL,EAAQ,OAEjBgwE,EAAUhwE,EAAQ,MAElBskI,EAAYtkI,EAAQ,OAEpBy+E,EAAMz+E,EAAQ,OAEdi5E,EAAaj5E,EAAQ,OAErBe,EAAOV,EAAOU,KACdwjI,EAActrD,EAAWsrD,YACzBC,EAAU,CAAC,GAAI,WAAY,QAAS,OACpCC,EAAW,yFAOf,SAASC,EAAmBr+D,GAC1B,IAAIs+D,EAAkB,iCAClBC,EAAiB,QAAUv+D,EAAW,KAAOs+D,EAA5B,QAA6Dt+D,EAAW,KAAOs+D,EACpG,OAAOtkI,EAAO41B,IAAIuuG,GAAS,SAAUK,GACnC,OAAOA,EAAe,cAAgBD,CACxC,IAAG9uH,KAAK,IACV,CAQA,SAASgvH,EAAalmE,GACpB,IAAIkgE,EAAU,GACV3vG,EAAWyvC,EAAen9D,IAAI,YAC9BqJ,EAAQ8zD,EAAepvB,eAQ3B,OAPA1kC,GAASg0H,EAAQv/H,KAAK,SAAWuL,GACjCg0H,EAAQv/H,KAAK,QAAUq/D,EAAe/4C,WACtCsJ,GAAY2vG,EAAQv/H,KAAK,eAAiBwF,KAAK8R,MAAiB,EAAXsY,EAAe,GAAK,MACzEpuB,EAAK,CAAC,aAAc,UAAU,SAAUgB,GACtC,IAAI2a,EAAMkiD,EAAen9D,IAAIM,GAC7B2a,GAAOoiH,EAAQv/H,KAAK,QAAUwC,EAAO,IAAM2a,EAC7C,IACOoiH,EAAQhpH,KAAK,IACtB,CAQA,SAASivH,EAAgB1gB,GACvB,IAAIya,EAAU,GACVkG,EAAqB3gB,EAAa5iH,IAAI,sBACtC4tB,EAAkBg1F,EAAa5iH,IAAI,mBACnCm9D,EAAiBylD,EAAan5G,SAAS,aACvCokB,EAAU+0F,EAAa5iH,IAAI,WA4B/B,OA1BAujI,GAAsBlG,EAAQv/H,KAAKmlI,EAAmBM,IAElD31G,IACEovD,EAAIghB,gBACNq/B,EAAQv/H,KAAK,oBAAsB8vB,IAGnCyvG,EAAQv/H,KAAK,qBAAuBywE,EAAQi1D,MAAM51G,IAClDyvG,EAAQv/H,KAAK,8BAKjBwB,EAAK,CAAC,QAAS,QAAS,WAAW,SAAUgB,GAC3C,IAAImjI,EAAa,UAAYnjI,EACzBojI,EAAYZ,EAAYW,GACxBxoH,EAAM2nG,EAAa5iH,IAAI0jI,GACpB,MAAPzoH,GAAeoiH,EAAQv/H,KAAK2lI,EAAa,IAAMxoH,GAAgB,UAAT3a,EAAmB,GAAK,MAChF,IAEA+8H,EAAQv/H,KAAKulI,EAAalmE,IAEX,MAAXtvC,GACFwvG,EAAQv/H,KAAK,WAAa05E,EAAWoJ,kBAAkB/yD,GAASxZ,KAAK,OAAS,MAGzEgpH,EAAQhpH,KAAK,KAAO,GAC7B,CAOA,SAASsvH,EAAe3G,EAAW59H,GACjC,IAAImH,EAAK42H,SAASC,cAAc,OAC5B/7E,EAAKvkD,KAAK+zG,IAAMzxG,EAAIujB,QACxB7lB,KAAKyJ,GAAKA,EACVzJ,KAAK2gH,GAAKr+G,EAAI2O,WAAa,EAC3BjR,KAAK4gH,GAAKt+G,EAAI4O,YAAc,EAC5BgvH,EAAUY,YAAYr3H,GACtBzJ,KAAK8mI,WAAa5G,EAClBlgI,KAAK+mI,OAAQ,EAKb/mI,KAAKgnI,aACL,IAAIpxG,EAAO51B,KAEXyJ,EAAGw9H,aAAe,WAEZrxG,EAAKsxG,aACPxsG,aAAa9E,EAAKoxG,cAClBpxG,EAAKmxG,OAAQ,GAGfnxG,EAAKuxG,YAAa,CACpB,EAEA19H,EAAGquE,YAAc,SAAUp7C,GAGzB,GAFAA,EAAIA,GAAKysC,OAAOrkE,OAEX8wB,EAAKsxG,WAAY,CAGpB,IAAI/mD,EAAU57B,EAAG47B,QACjB4lD,EAAUqB,eAAelH,EAAWxjG,GAAG,GACvCyjD,EAAQknD,SAAS,YAAa3qG,EAChC,CACF,EAEAjzB,EAAG69H,aAAe,WACZ1xG,EAAKsxG,YACHtxG,EAAKmxG,OACPnxG,EAAK2xG,UAAU3xG,EAAK4xG,YAIxB5xG,EAAKuxG,YAAa,CACpB,CACF,CAEAN,EAAe3kI,UAAY,CACzBC,YAAa0kI,EAMbK,YAAY,EAKZrkI,OAAQ,WAGN,IAAIq9H,EAAYlgI,KAAK8mI,WACjBW,EAAMvH,EAAUwH,cAAgBrH,SAASsH,YAAYC,iBAAiB1H,GACtE2H,EAAW3H,EAAU70H,MAEC,aAAtBw8H,EAASnhI,UAA4C,aAAjB+gI,EAAI/gI,WAC1CmhI,EAASnhI,SAAW,WAKxB,EACAgkB,KAAM,SAAUo7F,GACdprF,aAAa16B,KAAKgnI,cAClB,IAAIv9H,EAAKzJ,KAAKyJ,GACdA,EAAG4B,MAAMk1H,QAAU2F,EAAWM,EAAgB1gB,GAC5C,SAAW9lH,KAAK2gH,GAAK,UAAY3gH,KAAK4gH,GAAK,OAASkF,EAAa5iH,IAAI,iBAAmB,IAC1FuG,EAAG4B,MAAMy8H,QAAUr+H,EAAG+2H,UAAY,QAAU,OAC5CxgI,KAAK+mI,OAAQ,CACf,EACAgB,WAAY,SAAUr+D,GACpB1pE,KAAKyJ,GAAG+2H,UAAuB,MAAX92D,EAAkB,GAAKA,CAC7C,EACAs+D,aAAc,SAAUC,GACtBjoI,KAAKknI,WAAae,CACpB,EACApqB,QAAS,WACP,IAAIp0G,EAAKzJ,KAAKyJ,GACd,MAAO,CAACA,EAAGy+H,YAAaz+H,EAAGk4H,aAC7B,EACAttG,OAAQ,SAAUpoB,EAAGC,GAInB,IACIi8H,EADA5jF,EAAKvkD,KAAK+zG,IAGVxvD,GAAMA,EAAGE,UAAY0jF,EAAqB5jF,EAAGE,QAAQ2jF,2BACvDn8H,GAAKk8H,EAAmBE,WACxBn8H,GAAKi8H,EAAmBG,WAG1B,IAAIj9H,EAAQrL,KAAKyJ,GAAG4B,MACpBA,EAAM+f,KAAOnf,EAAI,KACjBZ,EAAMggB,IAAMnf,EAAI,KAChBlM,KAAK2gH,GAAK10G,EACVjM,KAAK4gH,GAAK10G,CACZ,EACAuqE,KAAM,WACJz2E,KAAKyJ,GAAG4B,MAAMy8H,QAAU,OACxB9nI,KAAK+mI,OAAQ,CACf,EACAQ,UAAW,SAAU3tC,IACf55F,KAAK+mI,OAAW/mI,KAAKmnI,YAAcnnI,KAAKknI,aACtCttC,GACF55F,KAAKwnI,WAAa5tC,EAElB55F,KAAK+mI,OAAQ,EACb/mI,KAAKgnI,aAAe1qG,WAAWx6B,EAAO2B,KAAKzD,KAAKy2E,KAAMz2E,MAAO45F,IAE7D55F,KAAKy2E,OAGX,EACA/K,OAAQ,WACN,OAAO1rE,KAAK+mI,KACd,GAEF,IAAI5jI,EAAW0jI,EACfzjI,EAAOvB,QAAUsB,C,wBCnOjB,IAAIO,EAAUjC,EAAQ,OAElB0B,EAAWO,EAAQiwE,qBAAqB,CAC1CjxE,KAAM,UACN8E,aAAc,CAAC,eACf6G,cAAe,CACbC,OAAQ,EACRC,EAAG,EACHmc,MAAM,EAEN69G,aAAa,EAGbryH,QAAS,OAET09D,UAAW,kBACX40D,mBAAmB,EACnBC,YAAa,SAQbC,SAAS,EAGTC,UAAW,EAEXC,UAAW,IAEXnC,mBAAoB,GACpBwB,WAAW,EAEXn3G,gBAAiB,qBAEjB7V,YAAa,OAEbmpG,aAAc,EAEdpqG,YAAa,EAGb+W,QAAS,EAET83G,aAAc,GAEdt1D,YAAa,CAGX7wE,KAAM,OAKN+Q,KAAM,OACNs2C,UAAW,OACX2Q,wBAAyB,IACzBouE,sBAAuB,iBACvB9lD,WAAY,CACVz2E,MAAO,OACPhB,MAAO,EACP7I,KAAM,SAENk/D,UAAW,CAAC,IAKhBA,UAAW,CACTr1D,MAAO,OACPqkB,SAAU,OAKhBxtB,EAAOvB,QAAUsB,C,iCC7EjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBy+E,EAAMz+E,EAAQ,OAEdolI,EAAiBplI,EAAQ,OAEzBi5E,EAAaj5E,EAAQ,OAErBk3D,EAAal3D,EAAQ,OAErBmG,EAAUnG,EAAQ,OAElBs6E,EAAsBt6E,EAAQ,OAE9B0tG,EAAa1tG,EAAQ,MAErBsG,EAAQtG,EAAQ,OAEhB2yE,EAAiB3yE,EAAQ,OAEzBiiF,EAAajiF,EAAQ,MAErBsnI,EAAwBtnI,EAAQ,MAEhCgC,EAAO3B,EAAO2B,KACdjB,EAAOV,EAAOU,KACdyN,EAAe0oD,EAAW1oD,aAC1B+4H,EAAY,IAAIphI,EAAQ+C,KAAK,CAC/BV,MAAO,CACLgC,GAAI,EACJC,GAAI,EACJX,MAAO,EACPS,OAAQ,KAIR7I,EAAWO,EAAQ4wE,oBAAoB,CACzC5xE,KAAM,UACN2mB,KAAM,SAAUhnB,EAASC,GACvB,IAAI49E,EAAIlkD,KAAR,CAIA,IAAIitG,EAAiB,IAAIpC,EAAevkI,EAAI69H,SAAU79H,GACtDtC,KAAKkpI,gBAAkBD,CAHvB,CAIF,EACAnpI,OAAQ,SAAUgmH,EAAczjH,EAASC,GACvC,IAAI49E,EAAIlkD,KAAR,CAKAh8B,KAAKqI,MAAMkC,YAMXvK,KAAKmpI,cAAgBrjB,EAMrB9lH,KAAKopI,SAAW/mI,EAMhBrC,KAAKw2E,KAAOl0E,EAOZtC,KAAKqpI,oBAAsB,KAM3BrpI,KAAKspI,mBAAqBxjB,EAAa5iH,IAAI,qBAC3C,IAAI+lI,EAAiBjpI,KAAKkpI,gBAC1BD,EAAepmI,SACfomI,EAAejB,aAAaliB,EAAa5iH,IAAI,cAE7ClD,KAAKupI,sBAELvpI,KAAKwpI,WAzCL,CA0CF,EACAD,oBAAqB,WACnB,IAAIzjB,EAAe9lH,KAAKmpI,cACpBv1D,EAAYkyC,EAAa5iH,IAAI,aACjCkxE,EAAe9yE,SAAS,cAAetB,KAAKw2E,KAAM/yE,GAAK,SAAUgxE,EAAa/3C,EAAGtB,GAE7D,SAAdw4C,IACEA,EAAUz3D,QAAQs4D,IAAgB,EACpCz0E,KAAKypI,SAAS/sG,EAAGtB,GACQ,UAAhBq5C,GACTz0E,KAAK0pI,MAAMtuG,GAGjB,GAAGp7B,MACL,EACAwpI,UAAW,WACT,IAAI1jB,EAAe9lH,KAAKmpI,cACpB9mI,EAAUrC,KAAKopI,SACf9mI,EAAMtC,KAAKw2E,KAEf,GAAmB,MAAfx2E,KAAK2pI,QAAiC,MAAf3pI,KAAK4pI,QAGK,SAAlC9jB,EAAa5iH,IAAI,aAAyB,CAC3C,IAAI0yB,EAAO51B,KACX06B,aAAa16B,KAAK6pI,uBAClB7pI,KAAK6pI,sBAAwBvtG,YAAW,WAItC1G,EAAKk0G,gBAAgBhkB,EAAczjH,EAASC,EAAK,CAC/C2J,EAAG2pB,EAAK+zG,OACRz9H,EAAG0pB,EAAKg0G,QAEZ,GACF,CACF,EAkBAE,gBAAiB,SAAUhkB,EAAczjH,EAASC,EAAKyB,GACrD,GAAIA,EAAQwjD,OAASvnD,KAAKwnD,MAAO04B,EAAIlkD,KAArC,CAIA,IAAIZ,EAAiBslD,EAAmB38E,EAASzB,GAEjDtC,KAAK+pI,QAAU,GAEf,IAAIxtD,EAAiBx4E,EAAQw4E,eAE7B,GAAIx4E,EAAQu1C,SAAwB,MAAbv1C,EAAQkI,GAA0B,MAAblI,EAAQmI,EAAW,CAC7D,IAAIzC,EAAKu/H,EACTv/H,EAAG/C,SAAW,CAAC3C,EAAQkI,EAAGlI,EAAQmI,GAClCzC,EAAG5G,SACH4G,EAAG6vC,QAAUv1C,EAAQu1C,QAErBt5C,KAAKypI,SAAS,CACZ37F,QAAS/pC,EAAQkI,EACjB8hC,QAAShqC,EAAQmI,EACjB4J,OAAQrM,GACP2xB,EACL,MAAO,GAAImhD,EACTv8E,KAAKypI,SAAS,CACZ37F,QAAS/pC,EAAQkI,EACjB8hC,QAAShqC,EAAQmI,EACjBxF,SAAU3C,EAAQ2C,SAClB5B,MAAO,CAAC,EACRy3E,eAAgBx4E,EAAQw4E,eACxB7D,cAAe30E,EAAQ20E,eACtBt9C,QACE,GAA2B,MAAvBr3B,EAAQmb,YAAqB,CACtC,GAAIlf,KAAKgqI,qBAAqBlkB,EAAczjH,EAASC,EAAKyB,GACxD,OAGF,IAAIkmI,EAAYluD,EAAoBh4E,EAAS1B,GACzC8J,EAAK89H,EAAUnkI,MAAM,GACrBsG,EAAK69H,EAAUnkI,MAAM,GAEf,MAANqG,GAAoB,MAANC,GAChBpM,KAAKypI,SAAS,CACZ37F,QAAS3hC,EACT4hC,QAAS3hC,EACT1F,SAAU3C,EAAQ2C,SAClBoP,OAAQm0H,EAAUxgI,GAClB3E,MAAO,CAAC,GACPs2B,EAEP,MAAwB,MAAbr3B,EAAQkI,GAA0B,MAAblI,EAAQmI,IAGtC5J,EAAI84B,eAAe,CACjB14B,KAAM,oBACNuJ,EAAGlI,EAAQkI,EACXC,EAAGnI,EAAQmI,IAGblM,KAAKypI,SAAS,CACZ37F,QAAS/pC,EAAQkI,EACjB8hC,QAAShqC,EAAQmI,EACjBxF,SAAU3C,EAAQ2C,SAClBoP,OAAQxT,EAAIujB,QAAQqkH,UAAUnmI,EAAQkI,EAAGlI,EAAQmI,GAAG4J,OACpDhR,MAAO,CAAC,GACPs2B,GA7DL,CA+DF,EACA+uG,gBAAiB,SAAUrkB,EAAczjH,EAASC,EAAKyB,GACrD,IAAIklI,EAAiBjpI,KAAKkpI,gBAErBlpI,KAAKspI,oBACRL,EAAe1B,UAAUvnI,KAAKmpI,cAAcjmI,IAAI,cAGlDlD,KAAK2pI,OAAS3pI,KAAK4pI,OAAS,KAExB7lI,EAAQwjD,OAASvnD,KAAKwnD,KACxBxnD,KAAK0pI,MAAMhpD,EAAmB38E,EAASzB,GAE3C,EAIA0nI,qBAAsB,SAAUlkB,EAAczjH,EAASC,EAAKyB,GAC1D,IAAImb,EAAcnb,EAAQmb,YACtB3a,EAAYR,EAAQQ,UACpBivE,EAAmBnxE,EAAQ22C,aAAa,eAAew6B,iBAE3D,GAAmB,MAAft0D,GAAoC,MAAb3a,GAAyC,MAApBivE,EAAhD,CAIA,IAAInvE,EAAchC,EAAQ29E,iBAAiB9gE,GAE3C,GAAK7a,EAAL,CAIA,IAAIzD,EAAOyD,EAAYG,UACnBshH,EAAeskB,EAAkB,CAACxpI,EAAK0I,aAAa/E,GAAYF,GAAcA,EAAYa,kBAAoB,CAAC,GAAG+wB,MAAO6vF,IAE7H,GAAoC,SAAhCA,EAAa5iH,IAAI,WAUrB,OANAZ,EAAI84B,eAAe,CACjB14B,KAAM,oBACNwc,YAAaA,EACb3a,UAAWA,EACXmC,SAAU3C,EAAQ2C,YAEb,CAfP,CANA,CAsBF,EACA+iI,SAAU,SAAU/sG,EAAGtB,GACrB,IAAI3xB,EAAKizB,EAAE5mB,OACPgwG,EAAe9lH,KAAKmpI,cAExB,GAAKrjB,EAAL,CAKA9lH,KAAK2pI,OAASjtG,EAAEoR,QAChB9tC,KAAK4pI,OAASltG,EAAEqR,QAChB,IAAIwuC,EAAiB7/C,EAAE6/C,eAEnBA,GAAkBA,EAAepoE,OACnCnU,KAAKqqI,iBAAiB9tD,EAAgB7/C,GAE/BjzB,GAAsB,MAAhBA,EAAGlF,WACdvE,KAAKqpI,oBAAsB,KAE3BrpI,KAAKsqI,uBAAuB5tG,EAAGjzB,EAAI2xB,IAE5B3xB,GAAMA,EAAG6vC,SACdt5C,KAAKqpI,oBAAsB,KAE3BrpI,KAAKuqI,0BAA0B7tG,EAAGjzB,EAAI2xB,KAEtCp7B,KAAKqpI,oBAAsB,KAE3BrpI,KAAK0pI,MAAMtuG,GAtBjB,CAwBF,EACAovG,YAAa,SAAU1kB,EAActuG,GAKnC,IAAIsyB,EAAQg8E,EAAa5iH,IAAI,aAC7BsU,EAAK1V,EAAO2B,KAAK+T,EAAIxX,MACrB06B,aAAa16B,KAAKyqI,aAClB3gG,EAAQ,EAAI9pC,KAAKyqI,YAAcnuG,WAAW9kB,EAAIsyB,GAAStyB,GACzD,EACA6yH,iBAAkB,SAAU9tD,EAAgB7/C,GAC1C,IAAIr6B,EAAUrC,KAAKopI,SACf50D,EAAqBx0E,KAAKmpI,cAC1BrjI,EAAQ,CAAC42B,EAAEoR,QAASpR,EAAEqR,SACtB28F,EAAoB,GACpBC,EAAmB,GACnBC,EAAqBR,EAAkB,CAAC1tG,EAAEg8C,cAAelE,IAC7DhyE,EAAK+5E,GAAgB,SAAUsuD,GAW7BroI,EAAKqoI,EAAa7rD,YAAY,SAAU12D,GACtC,IAAIshC,EAAYvnD,EAAQ22C,aAAa1wB,EAAKquC,QAAU,OAAQruC,EAAKqwD,WAC7DmyD,EAAYxiH,EAAKva,MACjBg9H,EAAoB,GAExB,GAAKnhF,GAA0B,MAAbkhF,EAAlB,CAIA,IAAIE,EAAajC,EAAsBnlD,cAAcknD,EAAWlhF,EAAUn2C,KAAMpR,EAASimB,EAAK62D,kBAAmB72D,EAAK42D,eACtHp9E,EAAOU,KAAK8lB,EAAK62D,mBAAmB,SAAUiF,GAC5C,IAAItiE,EAASzf,EAAQ29E,iBAAiBoE,EAAQllE,aAC1C3a,EAAY6/E,EAAQz9D,gBACpB09D,EAAaviE,GAAUA,EAAO8I,cAAcrmB,GAChD8/E,EAAW1tB,QAAUruC,EAAKquC,QAC1B0tB,EAAW1L,UAAYrwD,EAAKqwD,UAC5B0L,EAAWntC,SAAW5uB,EAAK4uB,SAC3BmtC,EAAWpF,OAAS32D,EAAK22D,OACzBoF,EAAWymD,UAAYpnD,EAAWQ,gBAAgBt6B,EAAUn2C,KAAMq3H,GAClEzmD,EAAW4mD,eAAiBD,EAExB3mD,IACFsmD,EAAiB3pI,KAAKqjF,GACtB0mD,EAAkB/pI,KAAK8gB,EAAOiV,cAAcxyB,GAAW,IAE3D,IAKA,IAAIi6H,EAAYwM,EAChBN,EAAkB1pI,MAAMw9H,EAAY9jD,EAAW1lD,WAAWwpG,GAAa,SAAW,IAAMuM,EAAkBxzH,KAAK,UAxB/G,CAyBF,GACF,GAAGvX,MAEH0qI,EAAkBl3H,UAClBk3H,EAAoBA,EAAkBnzH,KAAK,gBAC3C,IAAI2zH,EAAexuG,EAAEh2B,SAErB1G,KAAKwqI,YAAYI,GAAoB,WAC/B5qI,KAAKmrI,+BAA+B5uD,GACtCv8E,KAAKorI,gBAAgBR,EAAoBM,EAAcplI,EAAM,GAAIA,EAAM,GAAI9F,KAAKkpI,gBAAiByB,GAEjG3qI,KAAKqrI,oBAAoBT,EAAoBF,EAAmBC,EAAkBnkI,KAAKy7B,SAAUn8B,EAAM,GAAIA,EAAM,GAAIolI,EAEzH,GAGF,EACAZ,uBAAwB,SAAU5tG,EAAGjzB,EAAI2xB,GACvC,IAAI/4B,EAAUrC,KAAKopI,SAIflqH,EAAczV,EAAGyV,YACjB7a,EAAchC,EAAQ29E,iBAAiB9gE,GAEvCytG,EAAYljH,EAAGkjH,WAAatoH,EAC5BE,EAAYkF,EAAGlF,UACf0yB,EAAWxtB,EAAGwtB,SACdr2B,EAAO+rH,EAAUnoH,UACjBshH,EAAeskB,EAAkB,CAACxpI,EAAK0I,aAAa/E,GAAYooH,EAAWtoH,IAAgBA,EAAYa,kBAAoB,CAAC,GAAG+wB,MAAOj2B,KAAKmpI,gBAC3ImC,EAAiBxlB,EAAa5iH,IAAI,WAEtC,GAAsB,MAAlBooI,GAA6C,SAAnBA,EAA9B,CAIA,IAAIzgH,EAAS8hG,EAAU/hG,cAAcrmB,EAAW0yB,GAC5Cs0G,EAAc5e,EAAU51F,cAAcxyB,GAAW,EAAO0yB,GACxDu0G,EAAc,QAAU7e,EAAUnpH,KAAO,IAAMe,EAEnDvE,KAAKwqI,YAAY1kB,GAAc,WAC7B9lH,KAAKqrI,oBAAoBvlB,EAAcylB,EAAa1gH,EAAQ2gH,EAAa9uG,EAAEoR,QAASpR,EAAEqR,QAASrR,EAAEh2B,SAAUg2B,EAAE5mB,OAC/G,IAIAslB,EAAe,CACb14B,KAAM,UACNikB,gBAAiBpiB,EACjBA,UAAW3D,EAAKgmB,YAAYriB,GAC5B2a,YAAaA,EACbqoC,KAAMvnD,KAAKwnD,KAjBb,CAmBF,EACA+iF,0BAA2B,SAAU7tG,EAAGjzB,EAAI2xB,GAC1C,IAAI8tD,EAAaz/E,EAAG6vC,QAEpB,GAA0B,kBAAf4vC,EAAyB,CAClC,IAAIxf,EAAUwf,EACdA,EAAa,CACXxf,QAASA,EAET/wC,UAAW+wC,EAEf,CAEA,IAAI+hE,EAAkB,IAAI1jI,EAAMmhF,EAAYlpF,KAAKmpI,cAAenpI,KAAKopI,UACjEmC,EAAcE,EAAgBvoI,IAAI,WAClCsoI,EAAchlI,KAAKy7B,SAIvBjiC,KAAKwqI,YAAYiB,GAAiB,WAChCzrI,KAAKqrI,oBAAoBI,EAAiBF,EAAaE,EAAgBvoI,IAAI,oBAAsB,CAAC,EAAGsoI,EAAa9uG,EAAEoR,QAASpR,EAAEqR,QAASrR,EAAEh2B,SAAU+C,EACtJ,IAGA2xB,EAAe,CACb14B,KAAM,UACN6kD,KAAMvnD,KAAKwnD,KAEf,EACA6jF,oBAAqB,SAAUvlB,EAAcylB,EAAa1gH,EAAQ2gH,EAAav/H,EAAGC,EAAGg/H,EAAczhI,GAIjG,GAFAzJ,KAAK+pI,QAAU,GAEVjkB,EAAa5iH,IAAI,gBAAmB4iH,EAAa5iH,IAAI,QAA1D,CAIA,IAAI+lI,EAAiBjpI,KAAKkpI,gBACtBvwG,EAAYmtF,EAAa5iH,IAAI,aACjCgoI,EAAeA,GAAgBplB,EAAa5iH,IAAI,YAChD,IAAIs0B,EAAO+zG,EAEX,GAAI5yG,GAAkC,kBAAdA,EACtBnB,EAAOkjD,EAAWgxD,UAAU/yG,EAAW9N,GAAQ,QAC1C,GAAyB,oBAAd8N,EAA0B,CAC1C,IAAIkmC,EAAWp7D,GAAK,SAAUkoI,EAAUn0G,GAClCm0G,IAAa3rI,KAAK+pI,UACpBd,EAAelB,WAAWvwG,GAE1Bx3B,KAAKorI,gBAAgBtlB,EAAcolB,EAAcj/H,EAAGC,EAAG+8H,EAAgBp+G,EAAQphB,GAEnF,GAAGzJ,MACHA,KAAK+pI,QAAUyB,EACfh0G,EAAOmB,EAAU9N,EAAQ2gH,EAAa3sE,EACxC,CAEAoqE,EAAelB,WAAWvwG,GAC1ByxG,EAAev+G,KAAKo7F,GAEpB9lH,KAAKorI,gBAAgBtlB,EAAcolB,EAAcj/H,EAAGC,EAAG+8H,EAAgBp+G,EAAQphB,EAxB/E,CAyBF,EAYA2hI,gBAAiB,SAAUtlB,EAAcolB,EAAcj/H,EAAGC,EAAGw9D,EAAS7+C,EAAQphB,GAC5E,IAAI83B,EAAYvhC,KAAKw2E,KAAKvlE,WAEtBuwB,EAAaxhC,KAAKw2E,KAAKtlE,YAE3Bg6H,EAAeA,GAAgBplB,EAAa5iH,IAAI,YAChD,IAAI0oI,EAAcliE,EAAQm0C,UACtB3jC,EAAQ4rC,EAAa5iH,IAAI,SACzBs4F,EAASsqB,EAAa5iH,IAAI,iBAC1BwH,EAAOjB,GAAMA,EAAGkzB,kBAAkBpY,QAWtC,GAVA9a,GAAMiB,EAAKkyB,eAAenzB,EAAGozB,WAED,oBAAjBquG,IAETA,EAAeA,EAAa,CAACj/H,EAAGC,GAAI2e,EAAQ6+C,EAAQjgE,GAAIiB,EAAM,CAC5DmhI,SAAU,CAACtqG,EAAWC,GACtBoqG,YAAaA,EAAY5oI,WAIzBlB,EAAO6Q,QAAQu4H,GACjBj/H,EAAIgE,EAAai7H,EAAa,GAAI3pG,GAClCr1B,EAAI+D,EAAai7H,EAAa,GAAI1pG,QAC7B,GAAI1/B,EAAOkgB,SAASkpH,GAAe,CACxCA,EAAa3/H,MAAQqgI,EAAY,GACjCV,EAAal/H,OAAS4/H,EAAY,GAClC,IAAIrjC,EAAa4G,EAAWlhF,cAAci9G,EAAc,CACtD3/H,MAAOg2B,EACPv1B,OAAQw1B,IAEVv1B,EAAIs8F,EAAWt8F,EACfC,EAAIq8F,EAAWr8F,EACfguE,EAAQ,KAGRshB,EAAS,IACX,MACK,GAA4B,kBAAjB0vC,GAA6BzhI,EAAI,CAC7C,IAAIiyB,EAAMowG,EAAoBZ,EAAcxgI,EAAMkhI,GAClD3/H,EAAIyvB,EAAI,GACRxvB,EAAIwvB,EAAI,EACV,KAAO,CACDA,EAAMqwG,EAAqB9/H,EAAGC,EAAGw9D,EAAQjgE,GAAI83B,EAAWC,EAAY04C,EAAQ,KAAO,GAAIshB,EAAS,KAAO,IAC3GvvF,EAAIyvB,EAAI,GACRxvB,EAAIwvB,EAAI,EACV,CAKF,GAHAw+C,IAAUjuE,GAAK+/H,EAAc9xD,GAAS0xD,EAAY,GAAK,EAAc,UAAV1xD,EAAoB0xD,EAAY,GAAK,GAChGpwC,IAAWtvF,GAAK8/H,EAAcxwC,GAAUowC,EAAY,GAAK,EAAe,WAAXpwC,EAAsBowC,EAAY,GAAK,GAEhG9lB,EAAa5iH,IAAI,WAAY,CAC3Bw4B,EAAMuwG,EAAuBhgI,EAAGC,EAAGw9D,EAAQjgE,GAAI83B,EAAWC,GAC9Dv1B,EAAIyvB,EAAI,GACRxvB,EAAIwvB,EAAI,EACV,CAEAguC,EAAQr1C,OAAOpoB,EAAGC,EACpB,EAGAi/H,+BAAgC,SAAU5uD,GACxC,IAAI2vD,EAAelsI,KAAKqpI,oBACpB8C,IAAsBD,GAAgBA,EAAa/3H,SAAWooE,EAAepoE,OAkBjF,OAjBAg4H,GAAqB3pI,EAAK0pI,GAAc,SAAUE,EAAkBC,GAClE,IAAIC,EAAiBF,EAAiBptD,YAAc,CAAC,EACjDutD,EAAmBhwD,EAAe8vD,IAAkB,CAAC,EACrDG,EAAiBD,EAAiBvtD,YAAc,GACpDmtD,GAAqBG,EAAen4H,SAAWq4H,EAAer4H,OAC9Dg4H,GAAqB3pI,EAAK8pI,GAAgB,SAAUG,EAAUC,GAC5D,IAAIC,EAAWH,EAAeE,IAAc,CAAC,EACzCE,EAAcH,EAASttD,mBAAqB,GAC5C0tD,EAAaF,EAASxtD,mBAAqB,GAC/CgtD,GAAqBM,EAAS1+H,QAAU4+H,EAAS5+H,OAAS0+H,EAASv1F,WAAay1F,EAASz1F,UAAYu1F,EAASxtD,SAAW0tD,EAAS1tD,QAAU2tD,EAAYz4H,SAAW04H,EAAW14H,OAC9Kg4H,GAAqB3pI,EAAKoqI,GAAa,SAAUE,EAAax5G,GAC5D,IAAIy5G,EAAaF,EAAWv5G,GAC5B64G,GAAqBW,EAAY5tH,cAAgB6tH,EAAW7tH,aAAe4tH,EAAYvoI,YAAcwoI,EAAWxoI,SAClH,GACF,GACF,IACAvE,KAAKqpI,oBAAsB9sD,IAClB4vD,CACX,EACAzC,MAAO,SAAUtuG,GAKfp7B,KAAKqpI,oBAAsB,KAC3BjuG,EAAe,CACb14B,KAAM,UACN6kD,KAAMvnD,KAAKwnD,KAEf,EACAl/C,QAAS,SAAUjG,EAASC,GACtB49E,EAAIlkD,OAIRh8B,KAAKkpI,gBAAgBzyD,OAErBrC,EAAeM,WAAW,cAAepyE,GAC3C,IAQF,SAAS8nI,EAAkB4C,GACzB,IAAIC,EAAcD,EAAan0F,MAE/B,MAAOm0F,EAAa74H,OAAQ,CAC1B,IAAI+0E,EAAa8jD,EAAan0F,MAE1BqwC,IACEA,aAAsBnhF,IACxBmhF,EAAaA,EAAWhmF,IAAI,WAAW,IAQf,kBAAfgmF,IACTA,EAAa,CACXvwD,UAAWuwD,IAIf+jD,EAAc,IAAIllI,EAAMmhF,EAAY+jD,EAAaA,EAAY5qI,SAEjE,CAEA,OAAO4qI,CACT,CAEA,SAASvsD,EAAmB38E,EAASzB,GACnC,OAAOyB,EAAQq3B,gBAAkBt5B,EAAO2B,KAAKnB,EAAI84B,eAAgB94B,EACnE,CAEA,SAASypI,EAAqB9/H,EAAGC,EAAGzC,EAAI83B,EAAWC,EAAY0rG,EAAMC,GACnE,IAAIj/H,EAAOk/H,EAAa3jI,GACpB8B,EAAQ2C,EAAK3C,MACbS,EAASkC,EAAKlC,OAkBlB,OAhBY,MAARkhI,IACEjhI,EAAIV,EAAQ2hI,EAAO3rG,EACrBt1B,GAAKV,EAAQ2hI,EAEbjhI,GAAKihI,GAIG,MAARC,IACEjhI,EAAIF,EAASmhI,EAAO3rG,EACtBt1B,GAAKF,EAASmhI,EAEdjhI,GAAKihI,GAIF,CAAClhI,EAAGC,EACb,CAEA,SAAS+/H,EAAuBhgI,EAAGC,EAAGzC,EAAI83B,EAAWC,GACnD,IAAItzB,EAAOk/H,EAAa3jI,GACpB8B,EAAQ2C,EAAK3C,MACbS,EAASkC,EAAKlC,OAKlB,OAJAC,EAAIzF,KAAKJ,IAAI6F,EAAIV,EAAOg2B,GAAah2B,EACrCW,EAAI1F,KAAKJ,IAAI8F,EAAIF,EAAQw1B,GAAcx1B,EACvCC,EAAIzF,KAAKF,IAAI2F,EAAG,GAChBC,EAAI1F,KAAKF,IAAI4F,EAAG,GACT,CAACD,EAAGC,EACb,CAEA,SAASkhI,EAAa3jI,GACpB,IAAI8B,EAAQ9B,EAAGy+H,YACXl8H,EAASvC,EAAGk4H,aAGhB,GAAItB,SAASsH,aAAetH,SAASsH,YAAYC,iBAAkB,CACjE,IAAIH,EAAMpH,SAASsH,YAAYC,iBAAiBn+H,GAE5Cg+H,IACFl8H,GAAS8hI,SAAS5F,EAAI6F,YAAa,IAAMD,SAAS5F,EAAI8F,aAAc,IAAMF,SAAS5F,EAAI+F,gBAAiB,IAAMH,SAAS5F,EAAIgG,iBAAkB,IAC7IzhI,GAAUqhI,SAAS5F,EAAIiG,WAAY,IAAML,SAAS5F,EAAIkG,cAAe,IAAMN,SAAS5F,EAAImG,eAAgB,IAAMP,SAAS5F,EAAIoG,kBAAmB,IAElJ,CAEA,MAAO,CACLtiI,MAAOA,EACPS,OAAQA,EAEZ,CAEA,SAAS8/H,EAAoBplI,EAAUgE,EAAMkhI,GAC3C,IAAIkC,EAAWlC,EAAY,GACvBmC,EAAYnC,EAAY,GACxBjgH,EAAM,EACN1f,EAAI,EACJC,EAAI,EACJ8hI,EAAYtjI,EAAKa,MACjB0iI,EAAavjI,EAAKsB,OAEtB,OAAQtF,GACN,IAAK,SACHuF,EAAIvB,EAAKuB,EAAI+hI,EAAY,EAAIF,EAAW,EACxC5hI,EAAIxB,EAAKwB,EAAI+hI,EAAa,EAAIF,EAAY,EAC1C,MAEF,IAAK,MACH9hI,EAAIvB,EAAKuB,EAAI+hI,EAAY,EAAIF,EAAW,EACxC5hI,EAAIxB,EAAKwB,EAAI6hI,EAAYpiH,EACzB,MAEF,IAAK,SACH1f,EAAIvB,EAAKuB,EAAI+hI,EAAY,EAAIF,EAAW,EACxC5hI,EAAIxB,EAAKwB,EAAI+hI,EAAatiH,EAC1B,MAEF,IAAK,OACH1f,EAAIvB,EAAKuB,EAAI6hI,EAAWniH,EACxBzf,EAAIxB,EAAKwB,EAAI+hI,EAAa,EAAIF,EAAY,EAC1C,MAEF,IAAK,QACH9hI,EAAIvB,EAAKuB,EAAI+hI,EAAYriH,EACzBzf,EAAIxB,EAAKwB,EAAI+hI,EAAa,EAAIF,EAAY,EAG9C,MAAO,CAAC9hI,EAAGC,EACb,CAEA,SAAS8/H,EAAc9xD,GACrB,MAAiB,WAAVA,GAAgC,WAAVA,CAC/B,CAEA92E,EAAOvB,QAAUsB,C,sBC3sBjB1B,EAAQ,OAERA,EAAQ,K,wBCFR,IAAIiC,EAAUjC,EAAQ,OAElB6d,EAAe7d,EAAQ,OAE3BA,EAAQ,OAERA,EAAQ,MAERA,EAAQ,MAERA,EAAQ,OAERA,EAAQ,MAKRiC,EAAQ+b,qBAAqBH,E,uBCjB7B,IAAI5b,EAAUjC,EAAQ,OAElB6d,EAAe7d,EAAQ,OAE3BA,EAAQ,OAERA,EAAQ,MAERA,EAAQ,OAERA,EAAQ,OAERA,EAAQ,MAKRiC,EAAQ+b,qBAAqBH,E,gCCjB7B,IAAIxd,EAASL,EAAQ,OAEjBysI,EAAiBzsI,EAAQ,OAEzBk3D,EAAal3D,EAAQ,OAGrB0sI,EAAoB,CAAC,GAAI,KACzBC,EAAkBF,EAAe3mI,OAAO,CAC1C7E,KAAM,uBAKN2L,cAAe,CACb6rE,MAAO,OAEPm0D,YAAY,EAGZ/nG,MAAO,KAIPipD,UAAU,EAEV//D,WAAY,KAEZI,UAAW,KAEX0+G,WAAW,EAEXC,kBAAmB,KAEnBC,kBAAmB,MAQrB5rE,cAAe,SAAU7c,EAAW3hC,GAClCgqH,EAAgBx+H,WAAW5P,KAAM,gBAAiB6P,WAClD7P,KAAKyuI,cACLzuI,KAAK0uI,aAAY,SAAUj3C,GACzBA,EAActiC,cAAgB,SAC9BsiC,EAAcnoE,WAAatvB,KAAK0c,WAClC,IAEA1c,KAAK2uI,aACP,EAMAC,cAAe,WACbR,EAAgBx+H,WAAW5P,KAAM,gBAAiB6P,WAClD,IAAIsiH,EAAWnyH,KAAKmyH,SACH,eAAjBnyH,KAAKmnG,SAA4BgrB,EAAS3+G,WAC1B,MAAf2+G,EAAS,IAAc9zG,MAAM8zG,EAAS,OAASA,EAAS,GAAKgc,EAAkB,KAChE,MAAfhc,EAAS,IAAc9zG,MAAM8zG,EAAS,OAASA,EAAS,GAAKgc,EAAkB,GAClF,EAKAQ,YAAa,WACX,IAAIr/G,EAAatvB,KAAK0c,YAClB4pB,EAAQtmC,KAAK6N,OAAOy4B,OAEnBA,GAASA,EAAMuoG,MAGlBv/G,EAAWu/G,KAAO,EAClB7uI,KAAK6N,OAAOy4B,MAAQhX,GACXxtB,EAAO6Q,QAAQ2zB,KACpBA,EAAM,GAAKA,EAAM,IACnBA,EAAM9yB,UAGR8yB,EAAM,GAAK9/B,KAAKF,IAAIggC,EAAM,GAAIhX,EAAW,IACzCgX,EAAM,GAAK9/B,KAAKJ,IAAIkgC,EAAM,GAAIhX,EAAW,IAE7C,EAMAw/G,qBAAsB,WACpBZ,EAAehsI,UAAU4sI,qBAAqBhsE,MAAM9iE,KAAM6P,WAC1D/N,EAAOU,KAAKxC,KAAK+uI,WAAW,SAAUrpG,GACpC,IAAI52B,EAAa9O,KAAK6N,OAAO0uB,WAAWmJ,GAAO52B,WAE3CA,GAAcA,EAAW,KAAOA,EAAW,KAC7CA,EAAW,GAAK,EAEpB,GAAG9O,KACL,EAKAgvI,YAAa,SAAUhrI,GACrBhE,KAAK6N,OAAOy4B,MAAQtiC,EAAShB,QAE7BhD,KAAK2uI,aACP,EAKAM,YAAa,WACX,IAAI3/G,EAAatvB,KAAK0c,YAClByuF,EAAexyC,EAAW+jC,KAAK18F,KAAKkD,IAAI,UAAY,IAAIF,SAM5D,OAJAmoG,EAAa,GAAK77E,EAAW,KAAO67E,EAAa,GAAK77E,EAAW,IACjE67E,EAAa,GAAK77E,EAAW,KAAO67E,EAAa,GAAK77E,EAAW,IACjE67E,EAAa,GAAK77E,EAAW,KAAO67E,EAAa,GAAK77E,EAAW,IACjE67E,EAAa,GAAK77E,EAAW,KAAO67E,EAAa,GAAK77E,EAAW,IAC1D67E,CACT,EAKAlT,cAAe,SAAUlqF,GACvB,IAAIu4B,EAAQtmC,KAAK6N,OAAOy4B,MACpBhX,EAAatvB,KAAK0c,YAGtB,OAAQ4pB,EAAM,IAAMhX,EAAW,IAAMgX,EAAM,IAAMv4B,KAAWu4B,EAAM,IAAMhX,EAAW,IAAMvhB,GAASu4B,EAAM,IAAM,UAAY,YAC5H,EAMA4oG,sBAAuB,SAAU5oG,GAC/B,IAAIrqB,EAAS,GAYb,OAXAjc,KAAK0mC,kBAAiB,SAAUriC,GAC9B,IAAIozD,EAAc,GACd72D,EAAOyD,EAAYG,UACvB5D,EAAK4B,KAAKxC,KAAKmvI,iBAAiBvuI,IAAO,SAAUmN,EAAOxJ,GACtD+hC,EAAM,IAAMv4B,GAASA,GAASu4B,EAAM,IAAMmxB,EAAYz2D,KAAKuD,EAC7D,IAAG,EAAMvE,MACTic,EAAOjb,KAAK,CACVolB,SAAU/hB,EAAYgiB,GACtB9hB,UAAWkzD,GAEf,GAAGz3D,MACIic,CACT,EAKAmzH,cAAe,SAAUC,GACvB,IAAIC,EAAQC,EAAmBvvI,KAAM,aAAcA,KAAK0c,aACpD8yH,EAAQD,EAAmBvvI,KAAM,UAAWA,KAAK6N,OAAOy4B,MAAMtjC,SAC9Do6C,EAAQ,GAEZ,SAASqyF,EAAQ1hI,EAAO2hI,GACtBtyF,EAAMp8C,KAAK,CACT+M,MAAOA,EACPxB,MAAO8iI,EAAethI,EAAO2hI,IAEjC,CAQA,IALA,IAAIC,EAAO,EACPC,EAAO,EACPC,EAAOL,EAAMr7H,OACb27H,EAAOR,EAAMn7H,OAEVy7H,EAAOE,KAAUN,EAAMr7H,QAAUm7H,EAAMM,IAASJ,EAAM,IAAKI,IAE5DN,EAAMM,GAAQJ,EAAMG,IACtBF,EAAQH,EAAMM,GAAO,cAIzB,IAAK,IAAIG,EAAQ,EAAGJ,EAAOE,EAAMF,IAAQI,EAAQ,EAG/CA,GAAS3yF,EAAMjpC,QAAUs7H,EAAQD,EAAMG,GAAO,cAC9CF,EAAQD,EAAMG,GAAO,WAGvB,IAASI,EAAQ,EAAGH,EAAOE,EAAMF,MAC1BJ,EAAMr7H,QAAUq7H,EAAMA,EAAMr7H,OAAS,GAAKm7H,EAAMM,MAE/CG,IACF3yF,EAAMjpC,QAAUs7H,EAAQryF,EAAMA,EAAMjpC,OAAS,GAAGpG,MAAO,cACvDgiI,EAAQ,GAGVN,EAAQH,EAAMM,GAAO,eAIzB,IAAII,EAAW5yF,EAAMjpC,OACrB,MAAO,CACLipC,MAAOA,EACPG,YAAa,CAACyyF,EAAW5yF,EAAM,GAAG7wC,MAAQ,cAAeyjI,EAAW5yF,EAAM4yF,EAAW,GAAGzjI,MAAQ,eAEpG,IAGF,SAASgjI,EAAmB5nG,EAAgB+nG,EAAYpgH,GACtD,GAAIA,EAAW,KAAOA,EAAW,GAC/B,OAAOA,EAAWtsB,QAYpB,IALA,IAAIgU,EAAQ,IACR6b,GAAQvD,EAAW,GAAKA,EAAW,IAAMtY,EACzCjJ,EAAQuhB,EAAW,GACnB2gH,EAAa,GAERh6H,EAAI,EAAGA,GAAKe,GAASjJ,EAAQuhB,EAAW,GAAIrZ,IACnDg6H,EAAWjvI,KAAK+M,GAChBA,GAAS8kB,EAIX,OADAo9G,EAAWjvI,KAAKsuB,EAAW,IACpB2gH,CACT,CAEA,IAAI9sI,EAAWirI,EACfhrI,EAAOvB,QAAUsB,C,iCC3OjB,IAAIrB,EAASL,EAAQ,OAEjBm8C,EAAiBn8C,EAAQ,OAEzBmzE,EAAYnzE,EAAQ,OAEpByuI,EAAgBzuI,EAAQ,MAExBmG,EAAUnG,EAAQ,OAElBk3D,EAAal3D,EAAQ,OAErB0iG,EAAa1iG,EAAQ,OAErBsiE,EAAStiE,EAAQ,OAEjB84C,EAAY94C,EAAQ,OAEpBssB,EAAY4qC,EAAW5qC,UACvBvrB,EAAOV,EAAOU,KACd8qE,EAAU9mE,KAAKJ,IACfinE,EAAU7mE,KAAKF,IAEf6pI,EAAkB,GAClBC,EAAiB,EAQjBC,EAAiBH,EAAc3oI,OAAO,CACxC7E,KAAM,uBAKN2mB,KAAM,WACJgnH,EAAezgI,WAAW5P,KAAM,OAAQ6P,WAKxC7P,KAAKswI,QAAU,CAAC,EAKhBtwI,KAAKuwI,cAAgB,GAKrBvwI,KAAKonG,YAAc,GAKnBpnG,KAAKmnG,QAKLnnG,KAAKwwI,WAKLxwI,KAAKywI,sBAAwB,GAK7BzwI,KAAKg2E,UAKLh2E,KAAK0wI,SACP,EAMAC,SAAU,SAAUhpG,EAAgBtlC,EAASC,EAAKyB,GAC3CA,GAA4B,oBAAjBA,EAAQrB,MAA8BqB,EAAQwjD,OAASvnD,KAAKwnD,KAC1ExnD,KAAK0nG,YAET,EAKAA,WAAY,WACV1nG,KAAKqI,MAAMkC,YACX,IAAIo9B,EAAiB3nC,KAAK2nC,eACtBw4B,EAAYngE,KAAKqI,MACrBrI,KAAKmnG,QAAUx/D,EAAezkC,IAAI,UAClClD,KAAKwwI,WAAa7oG,EAAezkC,IAAI,cAErClD,KAAK6nG,iBAEL7nG,KAAK4wI,WAAWzwE,GAEhB,IAAI0wE,EAAgBlpG,EAAezkC,IAAI,QAEvClD,KAAK8wI,gBAAgB3wE,EAAW0wE,EAAe,GAE/C7wI,KAAK8wI,gBAAgB3wE,EAAW0wE,EAAe,GAG/C7wI,KAAK2nG,aAAY,GAIjB3nG,KAAKyqE,iBAAiBtK,GAEtBngE,KAAK2nG,cAEL3nG,KAAK+wI,2BAEL/wI,KAAKgxI,6BAELhxI,KAAKixI,cAAc9wE,EACrB,EAKA2wE,gBAAiB,SAAUzoI,EAAOwoI,EAAeK,GAC/C,GAAKL,EAAL,CAKA,IAAIvlI,EAAOulI,EAAc,EAAIK,GAC7B5lI,EAAe,MAARA,EAAeA,EAAO,GAAK,GAClC,IAAIq8B,EAAiB3nC,KAAK2nC,eACtBwpG,EAAUxpG,EAAezkC,IAAI,WAC7BivH,EAAWxqF,EAAewqF,SAC1BrqB,EAAW9nG,KAAKswI,QAAQxoC,SAExBphG,EAAW1G,KAAKoxI,gBAAgB,CAACjf,EAAS,GAAK,EAAiB,IAAd+e,GAAmBC,EAAUhf,EAAS,GAAKgf,GAAUrpC,GAEvG5tB,EAAQl6E,KAAKoxI,gBAA8B,IAAdF,EAAkB,SAAW,MAAOppC,GAEjElvC,EAAS54D,KAAKmnG,QACd9mC,EAAiBrgE,KAAK2nC,eAAe04B,eACzCrgE,KAAKqI,MAAMc,IAAI,IAAIvB,EAAQgc,KAAK,CAC9BvY,MAAO,CACLY,EAAGvF,EAAS,GACZwF,EAAGxF,EAAS,GACZ8mB,kBAA8B,eAAXorC,EAA0B,SAAWshB,EACxD3sD,UAAsB,eAAXqrC,EAA0BshB,EAAQ,SAC7C5uE,KAAMA,EACN41D,SAAUb,EAAe/4C,UACzB1C,SAAUy7C,EAAepvB,kBAxB7B,CA2BF,EAKA2/F,WAAY,SAAUvb,GACpB,IAAI1tF,EAAiB3nC,KAAK2nC,eACtB0pG,EAASrxI,KAAKswI,QACdne,EAAWxqF,EAAewqF,SAC1Bv5D,EAAS54D,KAAKmnG,QACd7nB,EAAYt/E,KAAKwwI,WACjB1rB,EAAY/gD,EAAOutE,aAAa3pG,EAAgB3nC,KAAKsC,IAAK6vH,GAE1DrqB,EAAWupC,EAAOvpC,SAAW9nG,KAAKuxI,gBAAgBzsB,GAGtDhd,EAAS3+F,IAAIkoI,EAAOrpG,WAAawpG,KACjC1pC,EAAS3+F,IAAIkoI,EAAOvpG,QAAU0pG,EAAc,KAAMlyD,EAAYyqB,EAAU/pG,KAAKmnG,SAAW,KAAMrlG,EAAO2B,KAAKzD,KAAKyxI,YAAazxI,KAAM,OAAO,GAAQ8B,EAAO2B,KAAKzD,KAAKyxI,YAAazxI,KAAM,OAAO,KAC5L,IAAIkvD,EAAWvnB,EAAe04B,eAAeS,YAAY,KACrD4wE,EAAWrkE,EAAQne,EAAS3jD,MAAO2jD,EAASljD,QAE5CszE,IACF+xD,EAAOM,aAAe,GACtBN,EAAOxnC,aAAe,GACtBwnC,EAAOO,kBAAoB,GAE3B5xI,KAAK6xI,cAAc/pC,EAAU,EAAGqqB,EAAUuf,EAAU94E,EAAQksD,GAE5D9kH,KAAK6xI,cAAc/pC,EAAU,EAAGqqB,EAAUuf,EAAU94E,EAAQksD,IAG9D9kH,KAAK8xI,iBAAiBhqC,EAAUqqB,EAAUuf,EAAU94E,GAEpDy8D,EAAYlsH,IAAI2+F,EAClB,EAKA+pC,cAAe,SAAU/pC,EAAUyC,EAAa4nB,EAAUuf,EAAU94E,GAClE,IAAIm5E,EAAUjwI,EAAO2B,KAAKzD,KAAKyxI,YAAazxI,KAAMuqG,GAAa,GAC3DynC,EAAYlwI,EAAO2B,KAAKzD,KAAKyxI,YAAazxI,KAAMuqG,GAAa,GAC7D0nC,EAAcT,EAAcU,EAAmB3nC,EAAamnC,GAAW3nC,EAAU/pG,KAAKmnG,SAAU4qC,EAASC,GAC7GC,EAAYvrI,SAAS,GAAKyrH,EAAS,GACnCrqB,EAAS3+F,IAAI8oI,GAKb,IAAI5xE,EAAiBrgE,KAAK2nC,eAAe04B,eACrC8xE,EAAc,IAAIvqI,EAAQgc,KAAK,CACjC4U,WAAW,EACX+Z,MAAOw/F,EACPj6D,YAAa,SAAUp7C,GAErBk4C,EAAUv3B,KAAK3gB,EAAE53B,MACnB,EACAmzE,UAAW+5D,EACX3mI,MAAO,CACLY,EAAG,EACHC,EAAG,EACHZ,KAAM,GACN41D,SAAUb,EAAe/4C,UACzB1C,SAAUy7C,EAAepvB,kBAG7BjxC,KAAKqI,MAAMc,IAAIgpI,GACf,IAAIC,EAAmB,CAAY,eAAXx5E,EAA0B84E,EAAW,EAAe,IAAXA,EAA2B,eAAX94E,EAA0C,IAAhB2xC,GAAiC,IAAXmnC,EAA6B,IAAXA,EAAiC,IAAhBnnC,GAAqBmnC,EAAW,EAAIA,EAAW,GAC/ML,EAASrxI,KAAKswI,QAClBe,EAAOM,aAAapnC,GAAe0nC,EACnCZ,EAAOO,kBAAkBrnC,GAAe6nC,EACxCf,EAAOxnC,aAAaU,GAAe4nC,CACrC,EAKAL,iBAAkB,SAAUhqC,EAAUqqB,EAAUuf,EAAU94E,GACxD,IAAI9H,EAAY0gF,EAAc,CAAC,CAAC,EAAG,IAAK,QACxC1gF,EAAUpqD,SAAS,GAAKyrH,EAAS,GACjCrhE,EAAU1jD,KAAK,CACby6D,WAAW,EACXpxD,QAAQ,IAEVqxF,EAAS3+F,IAAI2nD,GACb,IAAIuP,EAAiBrgE,KAAK2nC,eAAe04B,eACrCgyE,EAAiB,IAAIzqI,EAAQgc,KAAK,CACpCnN,QAAQ,EACRoxD,WAAW,EACXx8D,MAAO,CACLY,EAAG,EACHC,EAAG,EACHZ,KAAM,GACN41D,SAAUb,EAAe/4C,UACzB1C,SAAUy7C,EAAepvB,kBAG7BjxC,KAAKqI,MAAMc,IAAIkpI,GACf,IAAIC,EAAsB,CAAY,eAAX15E,EAA0B84E,EAAW,EAAItB,EAAiB,EAAG,GACpFiB,EAASrxI,KAAKswI,QAClBe,EAAOvgF,UAAYA,EACnBugF,EAAOgB,eAAiBA,EACxBhB,EAAOiB,oBAAsBA,CAC/B,EAKAb,YAAa,SAAUlnC,EAAa/a,EAAOxpF,EAAIC,GAC7C,GAAKjG,KAAKwwI,WAAV,CAMA,GAFAxwI,KAAKg2E,WAAawZ,GAEbA,EAAO,CAEV,IAAIoc,EAAS5rG,KAAKoxI,gBAAgB,CAACprI,EAAIC,GAAKjG,KAAKswI,QAAQxoC,UAAU,GAEnE9nG,KAAK2qG,gBAAgBJ,EAAaqB,EAAO,IAIzC5rG,KAAK2nG,aACP,CAGInY,KAAWxvF,KAAK2nC,eAAezkC,IAAI,aAErClD,KAAKsC,IAAI84B,eAAe,CACtB14B,KAAM,kBACN6kD,KAAMvnD,KAAKwnD,IACX+qF,YAAavyI,KAAK2nC,eAAethB,GACjCriB,SAAUhE,KAAKuwI,cAAcvtI,UAI7BwsF,GACDxvF,KAAK0wI,WAAa1wI,KAAKwyI,0BACfC,EAAqBzyI,KAAK2nC,iBACnC3nC,KAAK0yI,qBAAqB1yI,KAAKonG,YAAYmD,IAAc,EA7B3D,CA+BF,EAKA1C,eAAgB,WACd,IAAIlgE,EAAiB3nC,KAAK2nC,eACtBwjE,EAAenrG,KAAKuwI,cAAgB5oG,EAAesnG,cACnD3/G,EAAaqY,EAAejrB,YAC5B2S,EAAa,CAAC,EAAGsY,EAAewqF,SAAS,IAC7CnyH,KAAKonG,YAAc,CAACr5E,EAAUo9E,EAAa,GAAI77E,EAAYD,GAAY,GAAOtB,EAAUo9E,EAAa,GAAI77E,EAAYD,GAAY,GACnI,EAQAs7E,gBAAiB,SAAUJ,EAAa38C,GACtCA,EAAQA,GAAS,EACjB,IAAIjmB,EAAiB3nC,KAAK2nC,eACtBijE,EAAa5qG,KAAKonG,YAClB/3E,EAAa,CAAC,EAAGsY,EAAewqF,SAAS,IAC7ChuB,EAAWv2C,EAAOg9C,EAAYv7E,EAAYk7E,EAC1C,GACA,IAAIj7E,EAAaqY,EAAejrB,YAEhC1c,KAAKuwI,cAAgB,CAACxiH,EAAU68E,EAAW,GAAIv7E,EAAYC,GAAY,GAAOvB,EAAU68E,EAAW,GAAIv7E,EAAYC,GAAY,GACjI,EAKAq4E,YAAa,SAAUgrC,GACrB,IAAIhrG,EAAiB3nC,KAAK2nC,eACtBrY,EAAaqY,EAAejrB,YAC5B20H,EAASrxI,KAAKswI,QACdsC,EAAuB,CAAC,EAAGjrG,EAAewqF,SAAS,IACnD0gB,EAAoBF,EAAYC,EAAuB5yI,KAAKonG,YAE5D0rC,EAAgB9yI,KAAK+yI,iBAAiB/yI,KAAKuwI,cAAejhH,EAAYujH,EAAmB,WAEzFG,EAAmBhzI,KAAK+yI,iBAAiBzjH,EAAYA,EAAYsjH,EAAsB,cAE3FvB,EAAOvpG,QAAQ5yB,SAAS,CACtBjI,KAAM6lI,EAAcG,SACpBxmI,QAASqmI,EAAcrmI,UACtBK,SAAS,SAAUgmI,EAAcI,WACpC7B,EAAOrpG,WAAW9yB,SAAS,CACzBjI,KAAM+lI,EAAiBC,SACvBxmI,QAASumI,EAAiBvmI,UACzBK,SAAS,SAAUkmI,EAAiBE,WAEvClzI,KAAKmzI,cAAcN,EAAmBC,EACxC,EAKAC,iBAAkB,SAAU5nC,EAAc77E,EAAYs7E,EAAYwoC,GAChE,IAAIrxG,EAAO,CACTqxG,WAAYA,EACZC,uBAAuB,GAGrBl2F,EAAan9C,KAAKszI,mBAAmBnoC,EAAcppE,GAEnDwxG,EAAc,CAACvzI,KAAKwzI,oBAAoBroC,EAAa,GAAI,aAAcppE,GAAO/hC,KAAKwzI,oBAAoBroC,EAAa,GAAI,aAAcppE,IAEtImxG,EAAYlzI,KAAKyzI,iBAAiB7oC,EAAY2oC,GAElD,MAAO,CACLN,SAAU,IAAIr1F,EAAe,EAAG,EAAG,EAAG,EAAGT,GACzC+1F,UAAWA,EACXQ,aAAc,CAACv2F,EAAW,GAAG5wC,MAAO4wC,EAAWA,EAAWhpC,OAAS,GAAG5H,OAE1E,EAKA+mI,mBAAoB,SAAUnoC,EAAcppE,GAI1C,IAAI4xG,EAAe,IAEfx2F,EAAa,GACbtqB,GAAQs4E,EAAa,GAAKA,EAAa,IAAMwoC,EACjDx2F,EAAWn8C,KAAK,CACduL,MAAOvM,KAAKwzI,oBAAoBroC,EAAa,GAAI,QAASppE,GAC1D9zB,OAAQ,IAGV,IAAK,IAAIgI,EAAI,EAAGA,EAAI09H,EAAc19H,IAAK,CACrC,IAAI29H,EAAYzoC,EAAa,GAAKt4E,EAAO5c,EAEzC,GAAI29H,EAAYzoC,EAAa,GAC3B,MAGFhuD,EAAWn8C,KAAK,CACduL,MAAOvM,KAAKwzI,oBAAoBI,EAAW,QAAS7xG,GACpD9zB,OAAQgI,EAAI09H,GAEhB,CAMA,OAJAx2F,EAAWn8C,KAAK,CACduL,MAAOvM,KAAKwzI,oBAAoBroC,EAAa,GAAI,QAASppE,GAC1D9zB,OAAQ,IAEHkvC,CACT,EAKAs2F,iBAAkB,SAAU7oC,EAAY2oC,GACtC,IAAIphB,EAAWnyH,KAAK2nC,eAAewqF,SACnC,MAAO,CAAC,CAACA,EAAS,GAAKohB,EAAY,GAAI3oC,EAAW,IAAK,CAACunB,EAAS,GAAIvnB,EAAW,IAAK,CAACunB,EAAS,GAAIvnB,EAAW,IAAK,CAACunB,EAAS,GAAKohB,EAAY,GAAI3oC,EAAW,IAC/J,EAKA2mC,gBAAiB,SAAUzsB,GACzB,IAAIlsD,EAAS54D,KAAKmnG,QACd9qD,EAAUr8C,KAAK2nC,eAAezkC,IAAI,WACtC,OAAO,IAAI0E,EAAQwP,MAAiB,eAAXwhD,GAA4Bvc,EAGtC,eAAXuc,GAA2Bvc,EAAU,CACvC51C,MAAqB,WAAdq+G,EAAyB,EAAE,EAAG,GAAK,CAAC,EAAG,GAC9C7yG,UAAWzL,KAAK0L,GAAK,GACR,aAAX0mD,GAA0Bvc,EAE1B,CACF51C,MAAqB,SAAdq+G,EAAuB,CAAC,EAAG,GAAK,EAAE,EAAG,IAHN,CACtCr+G,MAAqB,SAAdq+G,EAAuB,CAAC,GAAI,GAAK,EAAE,GAAI,IAPe,CAC7Dr+G,MAAqB,WAAdq+G,EAAyB,CAAC,EAAG,GAAK,EAAE,EAAG,GAC9C7yG,SAAUzL,KAAK0L,GAAK,GASxB,EAKAihI,cAAe,SAAUvoC,EAAYkoC,GACnC,GAAK9yI,KAAKwwI,WAAV,CAIA,IAAIa,EAASrxI,KAAKswI,QACd3oG,EAAiB3nC,KAAK2nC,eACtBgqG,EAAeN,EAAOM,aACtB9nC,EAAewnC,EAAOxnC,aAC1BrnG,EAAK,CAAC,EAAG,IAAI,SAAU+nG,GACrB,IAAI0nC,EAAcN,EAAapnC,GAC/B0nC,EAAY/8H,SAAS,OAAQ49H,EAAcY,aAAanpC,IACxD0nC,EAAYvrI,SAAS,GAAKkkG,EAAWL,GAErC,IAAIkB,EAAY7jG,EAAQg1B,eAAey0G,EAAOO,kBAAkBrnC,GAAc3iG,EAAQ2jG,aAAa0mC,EAAajyI,KAAKqI,QACrHwhG,EAAaU,GAAar1F,SAAS,CACjCjJ,EAAGw/F,EAAU,GACbv/F,EAAGu/F,EAAU,GACbngG,KAAMq8B,EAAeksG,gBAAgB7zI,KAAKuwI,cAAchmC,IACxD/8E,kBAAmB,SACnBD,UAAWvtB,KAAKoxI,gBAAiC,eAAjBpxI,KAAKmnG,QAA2C,IAAhBoD,EAAoB,SAAW,MAAQ,OAAQ8mC,EAAOvpC,WAE1H,GAAG9nG,KAnBH,CAoBF,EASA8zI,eAAgB,SAAUC,EAAaC,EAAWC,EAAaC,GAC7D,IAAIvsG,EAAiB3nC,KAAK2nC,eACtBrY,EAAaqY,EAAejrB,YAC5By1G,EAAWxqF,EAAewqF,SAC1B9iG,EAAa,CAAC,EAAG8iG,EAAS,IAC1Bz2F,EAAM3N,EAAUgmH,EAAazkH,EAAYD,GAAY,GACrDgiH,EAASrxI,KAAKswI,QACdx/E,EAAYugF,EAAOvgF,UAEvB,GAAKA,EAAL,CAIAA,EAAUpqD,SAAS,GAAKg1B,EACxBo1B,EAAU1jD,KAAK,aAAa,GAC5B0jD,EAAUhkD,SAAS,SAAUqnI,IAAwBF,EAAaC,EAAmBx4G,EAAKy2F,EAAS,KACnG,IAAIpwF,EAAO,CACTsxG,uBAAuB,GAErB9mI,EAAQvM,KAAKwzI,oBAAoBO,EAAa,QAAShyG,GAC3D+uB,EAAU57C,SAAS,OAAQ3I,GAE3B,IAAIk/F,EAAY7jG,EAAQg1B,eAAey0G,EAAOiB,oBAAqB1qI,EAAQ2jG,aAAaz6C,EAAW9wD,KAAKqI,QACpGgqI,EAAiBhB,EAAOgB,eAC5BA,EAAejlI,KAAK,aAAa,GAEjC,IAAI8sE,EAAQl6E,KAAKoxI,gBAAgB,OAAQC,EAAOvpC,UAE5ClvC,EAAS54D,KAAKmnG,QAClBkrC,EAAen9H,SAAS,CACtB5J,MAAO2oI,GAA4B,IAAMtsG,EAAeksG,gBAAgBG,GACxExmH,kBAA8B,eAAXorC,EAA0BshB,EAAQ,SACrD3sD,UAAsB,eAAXqrC,EAA0B,SAAWshB,EAChDjuE,EAAGw/F,EAAU,GACbv/F,EAAGu/F,EAAU,IAvBf,CAyBF,EAKAslC,yBAA0B,WACxB,IAAIn7G,EAAO51B,KAEXA,KAAKswI,QAAQxoC,SAASxnG,GAAG,aAAa,SAAUo8B,GAG9C,GAFA9G,EAAK86G,WAAY,GAEZ96G,EAAKogD,UAAW,CACnB,IAAIm8C,EAAWv8F,EAAK+R,eAAewqF,SAE/Bz2F,EAAM9F,EAAKw7G,gBAAgB,CAAC10G,EAAEoR,QAASpR,EAAEqR,SAAUnY,EAAK06G,QAAQxoC,UAAU,GAAM,GAIpFpsE,EAAI,GAAK4xC,EAAQD,EAAQ,EAAG3xC,EAAI,IAAKy2F,EAAS,IAE9Cv8F,EAAK88G,qBAAqBh3G,EAAI,GAAI,GAAKA,EAAI,IAAMA,EAAI,IAAMy2F,EAAS,GACtE,CACF,IAAG7xH,GAAG,YAAY,WAGhBs1B,EAAK86G,WAAY,GAChB96G,EAAKogD,WAAapgD,EAAK48G,yBAC1B,GACF,EAKAxB,2BAA4B,WAC1B,IAAIzsF,EAAKvkD,KAAKsC,IAAIujB,QAEd7lB,KAAK2nC,eAAe95B,OAAOygI,WAC7B/pF,EAAGjkD,GAAG,YAAaN,KAAKo0I,8BAA+Bp0I,MACvDukD,EAAGjkD,GAAG,WAAYN,KAAKq0I,eAAgBr0I,OAEvCA,KAAKs0I,2BAET,EAKA5B,qBAAsB,SAAU6B,EAAWC,GACzC,IAAI7sG,EAAiB3nC,KAAK2nC,eACtBwqF,EAAWxqF,EAAewqF,SAE9B,GAAKxqF,EAAe95B,OAAOygI,UAA3B,CAIA,IAAIj/G,EAAa,CAAC,EAAG8iG,EAAS,IAC1B7iG,EAAaqY,EAAejrB,YAEhC63H,EAAYjnE,EAAQD,EAAQh+C,EAAW,GAAIklH,GAAYllH,EAAW,IAClE,IAAI6kH,EAAoBO,EAAqB9sG,EAAgBrY,EAAYD,GACrEqlH,EAAa,CAACH,EAAYL,EAAmBK,EAAYL,GACzDH,EAAchmH,EAAUwmH,EAAWllH,EAAYC,GAAY,GAC3D+8E,EAAa,CAACt+E,EAAU2mH,EAAW,GAAIrlH,EAAYC,GAAY,GAAOvB,EAAU2mH,EAAW,GAAIrlH,EAAYC,GAAY,IAG3HolH,EAAW,GAAKrlH,EAAW,KAAOg9E,EAAW,IAAM9lG,KACnDmuI,EAAW,GAAKrlH,EAAW,KAAOg9E,EAAW,GAAK9lG,KAG9CiuI,IACEnoC,EAAW,MAAQ9lG,IACrBvG,KAAK8zI,eAAeC,EAAa1nC,EAAW,GAAI,KAAM6nC,GAC7C7nC,EAAW,KAAO9lG,IAC3BvG,KAAK8zI,eAAeC,EAAa1nC,EAAW,GAAI,KAAM6nC,GAEtDl0I,KAAK8zI,eAAeC,EAAaA,EAAa,KAAMG,IAUxD,IAAIS,EAAW30I,KAAKywI,sBAChBmE,EAAW,IAEXJ,GAAc/B,EAAqB9qG,MACrCitG,EAAW50I,KAAKywI,sBAAwB9oG,EAAeunG,sBAAsB7iC,IAG/E,IAAIwoC,EAAgBt6F,EAAUu6F,gBAAgBH,EAAUC,GAExD50I,KAAK+0I,kBAAkB,WAAYhxE,EAAOixE,iBAAiBH,EAAc,KAEzE70I,KAAK+0I,kBAAkB,YAAahxE,EAAOixE,iBAAiBH,EAAc,IA3C1E,CA4CF,EAKAT,8BAA+B,SAAU13G,GACvC,IAAIjzB,EAAKizB,EAAE5mB,OACP6xB,EAAiB3nC,KAAK2nC,eAE1B,GAAKl+B,GAAsB,MAAhBA,EAAGlF,UAAd,CAIA,IAAIooH,EAAY3sH,KAAKqC,QAAQ29E,iBAAiBv2E,EAAGyV,aAEjD,GAAKyoB,EAAestG,eAAetoB,GAAnC,CAIA,IAAI/rH,EAAO+rH,EAAUnoH,QAAQiF,EAAGwtB,UAC5BluB,EAAMnI,EAAKkmB,aAAa6gB,EAAewnG,iBAAiBvuI,IACxDmN,EAAQnN,EAAKsC,IAAI6F,EAAKU,EAAGlF,WAAW,GAEnC8Z,MAAMtQ,IACT/N,KAAK8zI,eAAe/lI,EAAOA,EAP7B,CANA,CAeF,EAKAsmI,eAAgB,WACd,IAAIhD,EAASrxI,KAAKswI,QAClBe,EAAOvgF,WAAaugF,EAAOvgF,UAAU1jD,KAAK,aAAa,GACvDikI,EAAOgB,gBAAkBhB,EAAOgB,eAAejlI,KAAK,aAAa,EACnE,EAKAolI,wBAAyB,WACvBxyI,KAAKq0I,iBAEL,IAAI/lH,EAAUtuB,KAAKywI,sBAEnBzwI,KAAK+0I,kBAAkB,WAAYhxE,EAAOixE,iBAAiB1mH,IAE3DA,EAAQna,OAAS,CACnB,EAKAmgI,0BAA2B,WACzBt0I,KAAKq0I,iBAEL,IAAI9vF,EAAKvkD,KAAKsC,IAAIujB,QAClB0+B,EAAGrtC,IAAI,YAAalX,KAAKo0I,+BACzB7vF,EAAGrtC,IAAI,WAAYlX,KAAKq0I,eAC1B,EAKAjD,gBAAiB,SAAUxlC,EAAQzgC,EAAS9uB,EAAS64F,GACnD,IAAIr4G,EAAYj1B,EAAQ2jG,aAAapgC,EAAS+pE,EAAS,KAAOl1I,KAAKqI,OACnE,OAAOT,EAAQ9F,EAAO6Q,QAAQi5F,GAAU,iBAAmB,sBAAsBA,EAAQ/uE,EAAWwf,EACtG,EAKA04F,kBAAmB,SAAUryI,EAAMo9E,GACjCA,GAASA,EAAM3rE,QAAUnU,KAAKsC,IAAI84B,eAAe,CAC/C14B,KAAMA,EACNo9E,MAAOA,GAEX,EAKAx3E,QAAS,WACPtI,KAAKs0I,4BAELt0I,KAAKwyI,yBACP,EAKAtoI,OAAQ,WACNlK,KAAKs0I,4BAELt0I,KAAKwyI,yBACP,IAGF,SAAShB,EAAc7kH,EAAQ1U,EAAQ85H,EAASC,GAC9C,OAAO,IAAIpqI,EAAQokB,QAAQ,CACzB/hB,MAAO,CACL0iB,OAAQA,GAEV6L,YAAau5G,EACb95H,OAAQA,EACRs6B,MAAOw/F,EACPj6D,YAAa,SAAUp7C,GAErBk4C,EAAUv3B,KAAK3gB,EAAE53B,MACnB,EACAmzE,UAAW+5D,GAEf,CAEA,SAASE,EAAmB3nC,EAAamnC,GACvC,OAAuB,IAAhBnnC,EAAoB,CAAC,CAAC,EAAG,GAAI,CAACmnC,EAAU,GAAI,CAACA,GAAWA,IAAa,CAAC,CAAC,EAAG,GAAI,CAACA,EAAU,GAAI,CAACA,EAAUA,GACjH,CAEA,SAASyC,EAAsBgB,EAASjB,EAAmBx4G,EAAK05G,GAC9D,OAAOD,EAAU,CACjB,CAAC,GAAI7nE,EAAQ4mE,EAAmB7mE,EAAQ3xC,EAAK,KAAM,CAAC00G,EAAgB,GAAI,CAAC,EAAG9iE,EAAQ4mE,EAAmB7mE,EAAQ+nE,EAAY15G,EAAK,MAAQ,CACxI,CAAC,EAAG,GAAI,CAAC,GAAI,GAAI,CAAC,EAAG,GACvB,CAEA,SAAS+4G,EAAqB9sG,EAAgBrY,EAAYD,GACxD,IAAI6kH,EAAoB/D,EAAkB,EACtC5B,EAAoB5mG,EAAezkC,IAAI,qBAM3C,OAJIqrI,IACF2F,EAAoBnmH,EAAUwgH,EAAmBj/G,EAAYD,GAAY,GAAQ,GAG5E6kH,CACT,CAEA,SAASzB,EAAqB9qG,GAC5B,IAAI6mG,EAAoB7mG,EAAezkC,IAAI,qBAC3C,SAA+B,MAArBsrI,EAA4B7mG,EAAezkC,IAAI,YAAcsrI,EACzE,CAEA,SAASzkC,EAAUnxC,GACjB,MAAkB,aAAXA,EAAwB,YAAc,WAC/C,CAEA,IAAIz1D,EAAWktI,EACfjtI,EAAOvB,QAAUsB,C,0CCtvBjB,IAAIuE,EAAUjG,EAAQ,OAIlBK,GAFU4F,EAAQC,QAETlG,EAAQ,QAEjBysI,EAAiBzsI,EAAQ,OAEzBszD,EAAgBtzD,EAAQ,OAExB4zI,EAAgB5zI,EAAQ,OAExBuO,EAAUvO,EAAQ,OAElB6zI,EAAkBtlI,EAAQslI,gBAC1BC,EAAiBrH,EAAe3mI,OAAO,CACzC7E,KAAM,sBAyBN2L,cAAe,CACbrK,SAAU,KAKVwxI,SAAS,EAETC,SAAS,EAETv7D,MAAO,OAEPtqD,UAAW,GAGXJ,WAAY,GAGZkmH,WAAY,YACZzvG,UAAW,KAMXxO,WAAY,KAGZtH,YAAa,EAKbk9B,aAAc,WAEdg3D,QAAS,GAETiqB,WAAW,EAEX19F,UAAW,MAQbgyB,cAAe,SAAU7c,EAAW3hC,GAClCmxH,EAAe3lI,WAAW5P,KAAM,gBAAiB6P,WAQjD7P,KAAK21I,WAAa,GAClB31I,KAAKyuI,cAML,IAAImH,EAAO51I,KAAK61I,MAAQ71I,KAAK81I,iBAE7BC,EAAa/1I,KAAK61I,OAAOl+H,KAAK3X,MAE9BA,KAAKg2I,eAAejwF,EAAW3hC,GAE/B,IAAIqT,EAAaz3B,KAAK6N,OAAO4pB,WAC7Bz3B,KAAK0uI,aAAY,SAAUj3C,EAAe/xD,GAC3B,eAATkwG,GACFn+C,EAActiC,cAAgB,WAC9BsiC,EAAchgE,WAAa31B,EAAOyiB,MAAMkT,KAExCggE,EAAcnoE,WAAatvB,KAAK0c,YAChC+6E,EAActiC,cAAgB,YAC9BsiC,EAAcxxD,UAAYnkC,EAAO41B,IAAI13B,KAAK21I,YAAY,SAAUxvG,GAC1DA,EAAQrkC,EAAOyiB,MAAM4hB,GAQzB,MANc,YAAVT,IAGFS,EAAMpgB,OAAS,MAGVogB,CACT,IAEJ,GACF,EAMA2oG,qBAAsB,WAQpB,IAAIjhI,EAAS7N,KAAK6N,OACdooI,EAAsB,CAAC,EACvBC,EAAcnhF,EAAcohF,kBAC5Bp+F,EAAa/3C,KAAK+3C,aAkBtB,SAAS0hF,EAAIroB,EAAK1rE,EAAOve,GACvB,OAAOiqF,GAAOA,EAAI1rE,KAAW5jC,EAAOkgB,SAASovF,EAAI1rE,IAAU0rE,EAAI1rE,GAAO9jC,eAAeulB,GAAciqF,EAAI1rE,KAAWve,EAEpH,CApBArlB,EAAOU,KAAKqL,EAAOuoI,QAAQ,SAAUjwG,GACnCrkC,EAAOU,KAAK0zI,GAAa,SAAU/uH,GAC7Bgf,EAAMvkC,eAAeulB,KACvB8uH,EAAoB9uH,GAAc,EAEtC,GACF,IACArlB,EAAOU,KAAKyzI,GAAqB,SAAU92G,EAAGhY,GAC5C,IAAIkvH,EAAS,EACbv0I,EAAOU,KAAKxC,KAAK+uI,WAAW,SAAUrpG,GACpC2wG,GAAU5c,EAAI5rH,EAAQ63B,EAAOve,IAAesyG,EAAI5rH,EAAOiI,OAAQ4vB,EAAOve,EACxE,GAAGnnB,OACFq2I,GAAUv0I,EAAOU,KAAKxC,KAAK+uI,WAAW,SAAUrpG,IAC9C73B,EAAO63B,KAAW73B,EAAO63B,GAAS,CAAC,IAAIve,GAAckuH,EAAcnyI,IAAIikB,EAAsB,YAAVue,EAAsB,SAAW,WAAYqS,EACnI,GACF,GAAG/3C,MAOHkuI,EAAehsI,UAAU4sI,qBAAqBhsE,MAAM9iE,KAAM6P,UAC5D,EACAmmI,eAAgB,SAAUjwF,EAAW3hC,GACnC,IAAIwtE,EAAa5xF,KAAK6N,OAClBo4B,EAAYjmC,KAAK21I,WAEjB3xI,GAAYogB,EAASwtE,EAAa7rC,GAAW/hD,UAAY,CAAC,EAW9D,GAVA4tF,EAAW5tF,SAAWA,EAEtBlC,EAAOU,KAAKyjC,GAAW,SAAUE,EAAO71B,GACtC,IAAI3O,EAAM3B,KAAKs2I,kBAAkBnwG,GAE5BniC,EAASpC,eAAeD,KAC3BqC,EAASrC,IAAO,EAEpB,GAAG3B,MAE6B,WAA5B4xF,EAAWvkC,aAA2B,CAExC,IAAIkpF,GAAS,EACbz0I,EAAOU,KAAKyjC,GAAW,SAAUE,EAAO71B,GACtC,IAAI3O,EAAM3B,KAAKs2I,kBAAkBnwG,GAE7BniC,EAASrC,KACX40I,EAASvyI,EAASrC,IAAO,EAAQ40I,GAAS,EAE9C,GAAGv2I,KACL,CAEF,EAKAs2I,kBAAmB,SAAUnwG,GAC3B,MAAsB,eAAfnmC,KAAK61I,MAAyB1vG,EAAMp4B,MAAQ,GAAKo4B,EAAM71B,MAAQ,EACxE,EAKAi4B,aAAc,WACZ,OAAOvoC,KAAK21I,UACd,EAMAG,eAAgB,WACd,IAAIjoI,EAAS7N,KAAK6N,OAClB,OAAOA,EAAOuoI,QAAUvoI,EAAOuoI,OAAOjiI,OAAS,EAAI,SAAWnU,KAAK6N,OAAO4pB,WAAa,aAAe,aACxG,EAMAu3G,YAAa,SAAUhrI,GACrBhE,KAAK6N,OAAO7J,SAAWlC,EAAOyiB,MAAMvgB,EACtC,EAMAi0F,cAAe,SAAUlqF,GACvB,IAAIuC,EAAQykD,EAAcyhF,eAAezoI,EAAO/N,KAAK21I,YACrD,OAAgB,MAATrlI,GAAgBtQ,KAAK6N,OAAO7J,SAAShE,KAAKs2I,kBAAkBt2I,KAAK21I,WAAWrlI,KAAW,UAA2B,YAC3H,EAOA4+H,sBAAuB,SAAUuH,GAC/B,IAAIx6H,EAAS,GAcb,OAbAjc,KAAK0mC,kBAAiB,SAAUriC,GAC9B,IAAIozD,EAAc,GACd72D,EAAOyD,EAAYG,UACvB5D,EAAK4B,KAAKxC,KAAKmvI,iBAAiBvuI,IAAO,SAAUmN,EAAOxJ,GAEtD,IAAImyI,EAAO3hF,EAAcyhF,eAAezoI,EAAO/N,KAAK21I,YACpDe,IAASD,GAAch/E,EAAYz2D,KAAKuD,EAC1C,IAAG,EAAMvE,MACTic,EAAOjb,KAAK,CACVolB,SAAU/hB,EAAYgiB,GACtB9hB,UAAWkzD,GAEf,GAAGz3D,MACIic,CACT,EAOA06H,kBAAmB,SAAUxwG,GAC3B,IAAIywG,EAEJ,GAAI52I,KAAK+3C,aACP6+F,EAAiBzwG,EAAMp4B,WAEvB,GAAmB,MAAfo4B,EAAMp4B,MACR6oI,EAAiBzwG,EAAMp4B,UAClB,CACL,IAAI8oI,EAAgB1wG,EAAMxH,UAAY,GACtCi4G,EAAiBC,EAAc,MAAQtwI,KAAYswI,EAAc,KAAOtwI,IAAW,GAAKswI,EAAc,GAAKA,EAAc,IAAM,CACjI,CAGF,OAAOD,CACT,EACAxH,cAAe,SAAUC,GAEvB,IAAIrvI,KAAK+3C,aAAT,CAIA,IAAIqF,EAAQ,GACRG,EAAc,GACd5V,EAAiB3nC,KA6BjBimC,EAAYjmC,KAAK21I,WAAW3yI,QAEhC,GAAKijC,EAAU9xB,OAIR,CACL,IAAI+iB,EAAO+O,EAAU,GAAGtH,SAAS,GACjCzH,KAAU3wB,KAAY0/B,EAAUmT,QAAQ,CACtCza,SAAU,EAAEp4B,IAAU2wB,KAExBA,EAAO+O,EAAUA,EAAU9xB,OAAS,GAAGwqB,SAAS,GAChDzH,IAAS3wB,KAAY0/B,EAAUjlC,KAAK,CAClC29B,SAAU,CAACzH,EAAM3wB,MAErB,MAZE0/B,EAAUjlC,KAAK,CACb29B,SAAU,EAAEp4B,IAAUA,OAa1B,IAAIuwI,GAAQvwI,IAWZ,OAVAzE,EAAOU,KAAKyjC,GAAW,SAAUE,GAC/B,IAAIxH,EAAWwH,EAAMxH,SAEjBA,IAEFA,EAAS,GAAKm4G,GAAQrH,EAAQ,CAACqH,EAAMn4G,EAAS,IAAK,cACnD8wG,EAAQ9wG,EAAS37B,SACjB8zI,EAAOn4G,EAAS,GAEpB,GAAG3+B,MACI,CACLo9C,MAAOA,EACPG,YAAaA,EA/Df,CAMA,SAASkyF,EAAQ9wG,EAAU+wG,GACzB,IAAIkH,EAAiBjvG,EAAegvG,kBAAkB,CACpDh4G,SAAUA,IAGP+wG,IACHA,EAAa/nG,EAAeswD,cAAc2+C,IAG5C,IAAIrqI,EAAQ8iI,EAAeuH,EAAgBlH,GAEvC/wG,EAAS,MAAQp4B,IACnBg3C,EAAY,GAAKhxC,EACRoyB,EAAS,KAAOp4B,IACzBg3C,EAAY,GAAKhxC,EAEjB6wC,EAAMp8C,KAAK,CACT+M,MAAO4wB,EAAS,GAChBpyB,MAAOA,GACN,CACDwB,MAAO4wB,EAAS,GAChBpyB,MAAOA,GAGb,CAmCF,IAQEwpI,EAAe,CACjB5lH,YAAa,WACX,IAAIyhE,EAAa5xF,KAAK6N,OAClBo4B,EAAYjmC,KAAK21I,WACjB3hE,EAAYxtE,KAAKJ,IAAIwrF,EAAW5d,UAAW,IAC3C1kD,EAAatvB,KAAK0c,YAClByT,EAAcyhE,EAAWzhE,YAC7BA,EAAc3pB,KAAKF,IAAI+mI,SAASl9G,EAAa,IAAK,GAClDyhE,EAAWzhE,YAAcA,EACzB,IAAI4mH,GAAaznH,EAAW,GAAKA,EAAW,IAAMa,EAElD,OAAQ4mH,EAAU7rH,QAAQ8oD,KAAe+iE,GAAa/iE,EAAY,EAChEA,IAGF4d,EAAW5d,UAAYA,EACvB+iE,GAAaA,EAAU7rH,QAAQ8oD,GAC/B,IAAI1jE,EAAQ,EAERshF,EAAW4jD,SACbvvG,EAAUjlC,KAAK,CACbsP,MAAOA,IACPquB,SAAU,EAAEp4B,IAAU+oB,EAAW,IACjC6xG,MAAO,CAAC,EAAG,KAIf,IAAK,IAAI2V,EAAOxnH,EAAW,GAAId,EAAMle,EAAQ6f,EAAa7f,EAAQke,EAAKsoH,GAAQC,EAAW,CACxF,IAAIzwI,EAAMgK,IAAU6f,EAAc,EAAIb,EAAW,GAAKwnH,EAAOC,EAC7D9wG,EAAUjlC,KAAK,CACbsP,MAAOA,IACPquB,SAAU,CAACm4G,EAAMxwI,GACjB66H,MAAO,CAAC,EAAG,IAEf,CAEIvvC,EAAW6jD,SACbxvG,EAAUjlC,KAAK,CACbsP,MAAOA,IACPquB,SAAU,CAACrP,EAAW,GAAI/oB,KAC1B46H,MAAO,CAAC,EAAG,KAIfmU,EAAgBrvG,GAChBnkC,EAAOU,KAAKyjC,GAAW,SAAUE,GAC/BA,EAAM76B,KAAOtL,KAAK6zI,gBAAgB1tG,EAAMxH,SAC1C,GAAG3+B,KACL,EACAy3B,WAAY,WACV,IAAIm6D,EAAa5xF,KAAK6N,OACtB/L,EAAOU,KAAKovF,EAAWn6D,YAAY,SAAUu/G,GAG3Ch3I,KAAK21I,WAAW30I,KAAK,CACnBsK,KAAMtL,KAAK6zI,gBAAgBmD,GAAM,GACjCjpI,MAAOipI,GAEX,GAAGh3I,MAEHi3I,EAAiBrlD,EAAY5xF,KAAK21I,WACpC,EACAS,OAAQ,WACN,IAAIxkD,EAAa5xF,KAAK6N,OAClBo4B,EAAYjmC,KAAK21I,WACrB7zI,EAAOU,KAAKovF,EAAWwkD,QAAQ,SAAUc,EAAe5mI,GACjDxO,EAAOkgB,SAASk1H,KACnBA,EAAgB,CACdnpI,MAAOmpI,IAIX,IAAI5uH,EAAO,CACThd,KAAM,GACNgF,MAAOA,GAOT,GAJ2B,MAAvB4mI,EAAcvsH,QAChBrC,EAAKhd,KAAO4rI,EAAcvsH,OAGxBusH,EAAct1I,eAAe,SAAU,CACzC,IAAImM,EAAQua,EAAKva,MAAQmpI,EAAcnpI,MACvCua,EAAKqW,SAAW,CAAC5wB,EAAOA,GACxBua,EAAK64G,MAAQ,CAAC,EAAG,EACnB,KAAO,CASL,IANA,IAAIxiG,EAAWrW,EAAKqW,SAAW,GAC3BwiG,EAAQ74G,EAAK64G,MAAQ,CAAC,EAAG,GACzBgW,EAAY,CAAC,EAAG,EAAG,GACnBC,EAAe,EAAE7wI,IAAUA,KAC3B8wI,EAAY,GAEPC,EAAK,EAAGA,EAAK,EAAGA,IAAM,CAG7B,IAFA,IAAIj2C,EAAQ,CAAC,CAAC,MAAO,KAAM,OAAQ,CAAC,MAAO,KAAM,QAAQi2C,GAEhDrhI,EAAI,EAAGA,EAAI,GAAqB,MAAhB0oB,EAAS24G,GAAarhI,IAC7C0oB,EAAS24G,GAAMJ,EAAc71C,EAAMprF,IACnCkrH,EAAMmW,GAAMH,EAAUlhI,GACtBohI,EAAUC,GAAY,IAANrhI,EAGF,MAAhB0oB,EAAS24G,KAAgB34G,EAAS24G,GAAMF,EAAaE,GACvD,CAEAD,EAAU,IAAM14G,EAAS,KAAOp4B,MAAa46H,EAAM,GAAK,GACxDkW,EAAU,IAAM14G,EAAS,MAAQp4B,MAAa46H,EAAM,GAAK,GAErDxiG,EAAS,KAAOA,EAAS,IAAMwiG,EAAM,IAAMA,EAAM,KAGnD74G,EAAKva,MAAQ4wB,EAAS,GAE1B,CAEArW,EAAKvC,OAASgvC,EAAcwiF,gBAAgBL,GAC5CjxG,EAAUjlC,KAAKsnB,EACjB,GAAGtoB,MAEHi3I,EAAiBrlD,EAAY3rD,GAE7BqvG,EAAgBrvG,GAChBnkC,EAAOU,KAAKyjC,GAAW,SAAUE,GAC/B,IAAIg7F,EAAQh7F,EAAMg7F,MACdqW,EAAc,CAAC,CAAC,IAAK,KAAKrW,EAAM,IAAK,CAAC,IAAK,KAAKA,EAAM,KAC1Dh7F,EAAM76B,KAAO66B,EAAM76B,MAAQtL,KAAK6zI,gBAA+B,MAAf1tG,EAAMp4B,MAAgBo4B,EAAMp4B,MAAQo4B,EAAMxH,UAAU,EAAO64G,EAC7G,GAAGx3I,KACL,GAGF,SAASi3I,EAAiBrlD,EAAY3rD,GACpC,IAAIoW,EAAUu1C,EAAWv1C,SAEC,aAAtBu1C,EAAWh5B,QAAyBvc,EAAUA,IAChDpW,EAAUzyB,SAEd,CAEA,IAAIrQ,EAAWoyI,EACfnyI,EAAOvB,QAAUsB,C,wBCvfjB,IAAIrB,EAASL,EAAQ,OAEjByuI,EAAgBzuI,EAAQ,MAExBmG,EAAUnG,EAAQ,OAElBqO,EAAUrO,EAAQ,OAElBsO,EAAeD,EAAQC,aAEvBxG,EAAS9H,EAAQ,MAEjBsiE,EAAStiE,EAAQ,OAEjBg2I,EAAyBvH,EAAc3oI,OAAO,CAChD7E,KAAM,sBAMNiuI,SAAU,WACR,IAAIxwE,EAAYngE,KAAKqI,MACrB83D,EAAU51D,YACV,IAAIo9B,EAAiB3nC,KAAK2nC,eACtBwpG,EAAUxpG,EAAezkC,IAAI,WAC7Bm9D,EAAiB14B,EAAe04B,eAChCa,EAAWb,EAAe/4C,UAC1B1C,EAAWy7C,EAAepvB,eAE1B6zE,EAAY9kH,KAAK03I,gBAEjBvlB,EAAWxqF,EAAewqF,SAE1BwlB,EAAW33I,KAAK43I,eAEhBC,EAAWF,EAASE,SACpBjnG,EAAY9uC,EAAOkS,SAAS2zB,EAAezkC,IAAI,aAAa,IAAQ20I,GAQxE,SAASzyH,EAAWkD,GAClB,IAAI6d,EAAQ7d,EAAK6d,MACbprB,EAAY,IAAInT,EAAQwP,MAC5B2D,EAAUomD,QAAUr/D,EAAO2B,KAAKzD,KAAK83I,aAAc93I,KAAMmmC,GAEzDnmC,KAAK+3I,iBAAiBh9H,EAAWuN,EAAK0vH,uBAEtC,IAAIpB,EAAiBjvG,EAAegvG,kBAAkBxwG,GAItD,GAFAnmC,KAAKi4I,kBAAkBl9H,EAAW67H,EAAgB,CAAC,EAAG,EAAGzkB,EAAS,GAAIA,EAAS,KAE3EvhF,EAAW,CACb,IAAIsnG,EAAcl4I,KAAK2nC,eAAeswD,cAAc2+C,GACpD77H,EAAU5R,IAAI,IAAIvB,EAAQgc,KAAK,CAC7BvY,MAAO,CACLY,EAAiB,UAAd64G,GAAyBqsB,EAAUhf,EAAS,GAAKgf,EACpDjlI,EAAGimH,EAAS,GAAK,EACjB7mH,KAAM66B,EAAM76B,KACZkiB,kBAAmB,SACnBD,UAAWu3F,EACX5jD,SAAUA,EACVt8C,SAAUA,EACVnY,QAAyB,eAAhByrI,EAA+B,GAAM,KAGpD,CAEA/3E,EAAUh3D,IAAI4R,EAChB,CAnCA88H,GAAY73I,KAAK8wI,gBAAgB3wE,EAAW03E,EAAS,GAAI1lB,EAAUvhF,EAAWk0E,GAC9EhjH,EAAOU,KAAKm1I,EAASQ,cAAe/yH,EAAYplB,MAChD63I,GAAY73I,KAAK8wI,gBAAgB3wE,EAAW03E,EAAS,GAAI1lB,EAAUvhF,EAAWk0E,GAC9Ev7G,EAAOg3D,IAAI54B,EAAezkC,IAAI,UAAWi9D,EAAWx4B,EAAezkC,IAAI,YACvElD,KAAKyqE,iBAAiBtK,GACtBngE,KAAKixI,cAAc9wE,EA+BrB,EAKA43E,iBAAkB,SAAUh9H,EAAW07H,GAGrC,SAAS2B,EAAY9zI,GACnB,IAAIqjC,EAAiB3nC,KAAK2nC,eAC1BA,EAAe95B,OAAOygI,WAAatuI,KAAKsC,IAAI84B,eAAe,CACzD14B,KAAM4B,EACNw7E,MAAO/b,EAAOixE,iBAAiBrtG,EAAeunG,sBAAsBuH,KAExE,CARA17H,EAAUza,GAAG,YAAawB,EAAO2B,KAAK20I,EAAap4I,KAAM,cAAcM,GAAG,WAAYwB,EAAO2B,KAAK20I,EAAap4I,KAAM,YASvH,EAKA03I,cAAe,WACb,IAAI/vG,EAAiB3nC,KAAK2nC,eACtB0wG,EAAc1wG,EAAe95B,OAEjC,GAA2B,aAAvBwqI,EAAYz/E,OACd,OAAOmL,EAAOutE,aAAa3pG,EAAgB3nC,KAAKsC,IAAKqlC,EAAewqF,UAGpE,IAAIj4C,EAAQm+D,EAAYn+D,MAMxB,OAJKA,GAAmB,SAAVA,IACZA,EAAQ,QAGHA,CAEX,EAKA42D,gBAAiB,SAAUzoI,EAAOiD,EAAM6mH,EAAUvhF,EAAWk0E,GAC3D,GAAKx5G,EAAL,CAIA,IAAIyP,EAAY,IAAInT,EAAQwP,MACxBipD,EAAiBrgE,KAAK2nC,eAAe04B,eACzCtlD,EAAU5R,IAAI,IAAIvB,EAAQgc,KAAK,CAC7BvY,MAAO,CACLY,EAAG2kC,EAA0B,UAAdk0E,EAAwBqN,EAAS,GAAK,EAAIA,EAAS,GAAK,EACvEjmH,EAAGimH,EAAS,GAAK,EACjB3kG,kBAAmB,SACnBD,UAAWqjB,EAAYk0E,EAAY,SACnCx5G,KAAMA,EACN41D,SAAUb,EAAe/4C,UACzB1C,SAAUy7C,EAAepvB,mBAG7B5oC,EAAMc,IAAI4R,EAfV,CAgBF,EAMA68H,aAAc,WACZ,IAAIjwG,EAAiB3nC,KAAK2nC,eACtBwwG,EAAgBr2I,EAAO41B,IAAIiQ,EAAeY,gBAAgB,SAAUpC,EAAO71B,GAC7E,MAAO,CACL61B,MAAOA,EACP6xG,sBAAuB1nI,EAE3B,IACIunI,EAAWlwG,EAAezkC,IAAI,QAE9B01D,EAASjxB,EAAezkC,IAAI,UAC5Bm5C,EAAU1U,EAAezkC,IAAI,WASjC,OAPe,eAAX01D,EAA0Bvc,GAAWA,GACvC87F,EAAc3kI,UAEPqkI,IACLA,EAAWA,EAAS70I,QAAQwQ,WAGzB,CACL2kI,cAAeA,EACfN,SAAUA,EAEd,EAKAI,kBAAmB,SAAU5vI,EAAOuuI,EAAgB0B,GAClDjwI,EAAMc,IAAI4G,EAAa/P,KAAKwzI,oBAAoBoD,EAAgB,UAAW0B,EAAW,GAAIA,EAAW,GAAIA,EAAW,GAAIA,EAAW,GAAIt4I,KAAKwzI,oBAAoBoD,EAAgB,UAClL,EAKAkB,aAAc,SAAU3xG,GACtB,IAAIwB,EAAiB3nC,KAAK2nC,eACtB95B,EAAS85B,EAAe95B,OACxB7J,EAAWlC,EAAOyiB,MAAM1W,EAAO7J,UAC/Bu0I,EAAS5wG,EAAe2uG,kBAAkBnwG,GAElB,WAAxBt4B,EAAOw/C,cACTrpD,EAASu0I,IAAU,EACnBz2I,EAAOU,KAAKwB,GAAU,SAAU6gE,EAAGljE,GACjCqC,EAASrC,GAAOA,IAAQ42I,CAC1B,KAEAv0I,EAASu0I,IAAWv0I,EAASu0I,GAG/Bv4I,KAAKsC,IAAI84B,eAAe,CACtB14B,KAAM,kBACN6kD,KAAMvnD,KAAKwnD,IACX+qF,YAAavyI,KAAK2nC,eAAethB,GACjCriB,SAAUA,GAEd,IAEEb,EAAWs0I,EACfr0I,EAAOvB,QAAUsB,C,iCCxMjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBy+E,EAAMz+E,EAAQ,OAEd4zI,EAAgB5zI,EAAQ,OAExBszD,EAAgBtzD,EAAQ,OAExBuvF,EAAiBvvF,EAAQ,OAEzB84C,EAAY94C,EAAQ,OAEpBk3D,EAAal3D,EAAQ,OAErByjD,EAAY6P,EAAc7P,UAC1BszF,EAAazjF,EAAcyjF,WAC3B7lI,EAAU7Q,EAAO6Q,QACjBnQ,EAAOV,EAAOU,KACdk6F,EAAM/jC,EAAW+jC,IACjB3uE,EAAY4qC,EAAW5qC,UACvBxlB,EAAOzG,EAAOyG,KACdkwI,EAAgB,CAAC,UAAW,UAAW,WACvCvK,EAAiBxqI,EAAQiwE,qBAAqB,CAChDjxE,KAAM,YACN8E,aAAc,CAAC,UAMfunI,UAAW,CAAC,UAAW,cAMvB2J,qBAAsB,CAAC,UAAW,aAAc,SAAU,aAAc,SAQxEC,UAAW,EAAEpyI,IAAUA,KAMvBm/C,WAAY,CACVhjD,KAAM,MACNkvG,YAAY,GAMdvjG,cAAe,CACbqc,MAAM,EACNpc,OAAQ,EACRC,EAAG,EACH2Q,YAAa,MAKb9Y,IAAK,EAELE,IAAK,IAEL42C,UAAW,KACXpV,QAAS,KAGTE,WAAY,KAIZ5c,KAAM,EAENE,MAAO,KAEPD,IAAK,KAELE,OAAQ,EAERqE,UAAW,KACXJ,WAAY,KACZ6sB,SAAS,EACTuc,OAAQ,WAER9nC,gBAAiB,gBACjB7V,YAAa,OAEb29H,aAAc,UACdt0B,cAAe,OACftqG,YAAa,EAEb+W,QAAS,EAGTogH,QAAS,GAETn9D,UAAW,EAEXznE,MAAO,KAEPosB,UAAW,KACXrtB,KAAM,KAENs2D,UAAW,CACTr1D,MAAO,SAQX8c,KAAM,SAAUxb,EAAQoJ,EAAa5U,GAKnCrC,KAAKi9F,YAKLj9F,KAAK6nC,cAAgB,CAAC,EAKtB7nC,KAAK64I,kBAAoB,CAAC,EAK1B74I,KAAKqgE,eAOLrgE,KAAKmyH,SACLnyH,KAAKy1B,qBAAqB5nB,EAAQxL,EACpC,EAKAugE,cAAe,SAAU7c,EAAW3hC,GAClC,IAAIwtE,EAAa5xF,KAAK6N,OAIjBqyE,EAAIghB,kBACPtP,EAAWrC,UAAW,IAGvBnrE,GAAU4sE,EAAea,oBAAoBD,EAAY7rC,EAAW/lD,KAAK04I,sBAC1E14I,KAAKqgE,eAAiBrgE,KAAK2M,SAAS,aACpC3M,KAAK4uI,gBACL5uI,KAAK8uI,sBACP,EAKAJ,YAAa,SAAUoK,GACrB,IAAI/J,EAAY/uI,KAAK+uI,UACrB+J,EAAyBh3I,EAAO2B,KAAKq1I,EAAwB94I,MAC7DA,KAAK64I,kBAAoB7nD,EAAewG,qBAAqBx3F,KAAK6N,OAAO0uB,WAAYwyG,EAAW+J,GAChG94I,KAAK6nC,cAAgBmpD,EAAewG,qBAAqBx3F,KAAK6N,OAAOiI,OAAQi5H,EAAW+J,EAC1F,EAMAC,uBAAwB,WACtB,IAAIC,EAAoBh5I,KAAK6N,OAAOqR,YAChCw3E,EAAgB,GAUpB,OARyB,MAArBsiD,GAAmD,QAAtBA,EAC/Bh5I,KAAKqC,QAAQ4gF,YAAW,SAAU5+E,EAAaiM,GAC7ComF,EAAc11F,KAAKsP,EACrB,IAEAomF,EAAgBn8C,EAAUwnD,iBAAiBi3C,GAGtCtiD,CACT,EAKAhwD,iBAAkB,SAAUm4B,EAAUpnD,GACpC3V,EAAOU,KAAKxC,KAAK+4I,0BAA0B,SAAU75H,GACnD2/C,EAASlnD,KAAKF,EAASzX,KAAKqC,QAAQ29E,iBAAiB9gE,GACvD,GAAGlf,KACL,EAKAi1I,eAAgB,SAAU5wI,GACxB,IAAIk+F,GAAK,EAIT,OAHAviG,KAAK0mC,kBAAiB,SAAUzQ,GAC9BA,IAAU5xB,IAAgBk+F,GAAK,EACjC,IACOA,CACT,EAgBAsxC,gBAAiB,SAAU9lI,EAAOgqC,EAAYy/F,GAC5C,IAIIyB,EACAjF,EALAnmI,EAAS7N,KAAK6N,OACdmmE,EAAYnmE,EAAOmmE,UACnB2kE,EAAY34I,KAAK24I,UACjBhgH,EAAY9qB,EAAO8qB,UAYvB,OATA6+G,EAAcA,GAAe,CAAC,IAAK,KAE/B11I,EAAO6Q,QAAQ5E,KACjBA,EAAQA,EAAM/K,QACdi2I,GAAW,GAGbjF,EAAYj8F,EAAahqC,EAAQkrI,EAAW,CAAC/tH,EAAQnd,EAAM,IAAKmd,EAAQnd,EAAM,KAAOmd,EAAQnd,GAEzFjM,EAAOwiF,SAAS3rD,GACXA,EAAUvH,QAAQ,UAAW6nH,EAAWjF,EAAU,GAAKA,GAAW5iH,QAAQ,WAAY6nH,EAAWjF,EAAU,GAAKA,GAC9GlyI,EAAOyiF,WAAW5rD,GACpBsgH,EAAWtgH,EAAU5qB,EAAM,GAAIA,EAAM,IAAM4qB,EAAU5qB,GAG1DkrI,EACElrI,EAAM,KAAO4qI,EAAU,GAClBnB,EAAY,GAAK,IAAMxD,EAAU,GAC/BjmI,EAAM,KAAO4qI,EAAU,GACzBnB,EAAY,GAAK,IAAMxD,EAAU,GAEjCA,EAAU,GAAK,MAAQA,EAAU,GAInCA,EAGT,SAAS9oH,EAAQ/M,GACf,OAAOA,IAAQw6H,EAAU,GAAK,MAAQx6H,IAAQw6H,EAAU,GAAK,QAAUx6H,GAAK+M,QAAQ1kB,KAAKJ,IAAI4tE,EAAW,IAC1G,CACF,EAKAy6D,YAAa,WACX,IAAI78C,EAAa5xF,KAAK6N,OAIlBuO,EAASsgF,EAAI,CAAC9K,EAAWxrF,IAAKwrF,EAAWtrF,MAC7CtG,KAAKi9F,YAAc7gF,CACrB,EAQA+yH,iBAAkB,SAAUxsI,GAC1B,IAAIu2I,EAASl5I,KAAK6N,OAAOqvC,UACzB,OAAiB,MAAVg8F,EAAiBA,EAASv2I,EAAKkX,WAAW1F,OAAS,CAC5D,EAMAuI,UAAW,WACT,OAAO1c,KAAKi9F,YAAYj6F,OAC1B,EAKA8rI,qBAAsB,WACpB,IAAIl9C,EAAa5xF,KAAK6N,OAClBiP,EAAO,CACTgrB,QAAS8pD,EAAW9pD,QACpBE,WAAY4pD,EAAW5pD,YAErBlyB,EAAS87E,EAAW97E,SAAW87E,EAAW97E,OAAS,CAAC,GACpDymB,EAAaq1D,EAAWr1D,aAAeq1D,EAAWr1D,WAAa,CAAC,GACpEz6B,EAAOqwF,MAAMr8E,EAAQgH,GAErBhb,EAAOqwF,MAAM51D,EAAYzf,GAEzB,IAAIi7B,EAAa/3C,KAAK+3C,aAOtB,SAASohG,EAAer8H,GAKlBnK,EAAQi/E,EAAWrlF,SAEnBuQ,EAAKgrB,UACPhrB,EAAKgrB,QAAU,CACbv7B,MAAOqlF,EAAWrlF,MAAMvJ,QAAQwQ,YAUpCsJ,EAAKgrB,QAAUhrB,EAAKgrB,SAAW,CAC7Bv7B,MAAOksI,GAGTj2I,EAAKxC,KAAK+uI,WAAW,SAAUrpG,GAC7B,IAAIve,EAAarK,EAAK4oB,GAEtB,GAAI5jC,EAAOwiF,SAASn9D,GAAa,CAC/B,IAAIiyH,EAAO/D,EAAcnyI,IAAIikB,EAAY,SAAU4wB,GAE/CqhG,GACFt8H,EAAK4oB,GAAS,CAAC,EACf5oB,EAAK4oB,GAAOve,GAAciyH,UAGnBt8H,EAAK4oB,EAEhB,CACF,GAAG1lC,KACL,CAEA,SAASq5I,EAAiBv8H,EAAMw8H,EAAYC,GAC1C,IAAIC,EAAW18H,EAAKw8H,GAChBG,EAAY38H,EAAKy8H,GAEjBC,IAAaC,IACfA,EAAY38H,EAAKy8H,GAAe,CAAC,EACjC/2I,EAAKg3I,GAAU,SAAUE,EAAYvyH,GACnC,GAAK4tC,EAAc4kF,YAAYxyH,GAA/B,CAIA,IAAIiyH,EAAO/D,EAAcnyI,IAAIikB,EAAY,WAAY4wB,GAEzC,MAARqhG,IACFK,EAAUtyH,GAAciyH,EAIL,UAAfjyH,GAA2BsyH,EAAU73I,eAAe,YAAe63I,EAAU73I,eAAe,gBAC9F63I,EAAUhtI,QAAU,CAAC,EAAG,IAV5B,CAaF,IAEJ,CAEA,SAASmtI,EAAmBr9G,GAC1B,IAAIs9G,GAAgBt9G,EAAWuL,SAAW,CAAC,GAAGj5B,SAAW0tB,EAAWyL,YAAc,CAAC,GAAGn5B,OAClFirI,GAAoBv9G,EAAWuL,SAAW,CAAC,GAAGh5B,aAAeytB,EAAWyL,YAAc,CAAC,GAAGl5B,WAC1Fw1G,EAAgBtkH,KAAKkD,IAAI,iBAC7BV,EAAKxC,KAAK+uI,WAAW,SAAUrpG,GAC7B,IAAIysF,EAAWnyH,KAAKmyH,SAChB7/C,EAAU/1C,EAAWmJ,GAGpB4sC,IACHA,EAAU/1C,EAAWmJ,GAAS,CAC5Bn5B,MAAOwrC,EAAausE,EAAgB,CAACA,KAKnB,MAAlBhyC,EAAQzjE,SACVyjE,EAAQzjE,OAASgrI,GAAgB/3I,EAAOyiB,MAAMs1H,KAAkB9hG,EAAa,YAAc,CAAC,eAGpE,MAAtBu6B,EAAQxjE,aACVwjE,EAAQxjE,WAAagrI,GAAoBh4I,EAAOyiB,MAAMu1H,KAAsB/hG,EAAao6E,EAAS,GAAK,CAACA,EAAS,GAAIA,EAAS,MAIhI7/C,EAAQzjE,OAASq2C,EAAUotB,EAAQzjE,QAAQ,SAAUA,GACnD,MAAkB,SAAXA,GAAgC,WAAXA,EAAsB,YAAcA,CAClE,IAEA,IAAIC,EAAawjE,EAAQxjE,WAEzB,GAAkB,MAAdA,EAAoB,CACtB,IAAIxI,GAAOC,IAEXiyI,EAAW1pI,GAAY,SAAUf,GAC/BA,EAAQzH,IAAQA,EAAMyH,EACxB,IACAukE,EAAQxjE,WAAao2C,EAAUp2C,GAAY,SAAUf,GACnD,OAAOggB,EAAUhgB,EAAO,CAAC,EAAGzH,GAAM,CAAC,EAAG6rH,EAAS,KAAK,EACtD,GACF,CACF,GAAGnyH,KACL,CAlHAm5I,EAAexhI,KAAK3X,KAAM8V,GAC1BqjI,EAAexhI,KAAK3X,KAAMu8B,GAC1B88G,EAAiB1hI,KAAK3X,KAAM8V,EAAQ,UAAW,cAE/C8jI,EAAmBjiI,KAAK3X,KAAMu8B,EA+GhC,EAKAqyG,cAAe,WACb5uI,KAAKmyH,SAAW,CAACnD,WAAWhvH,KAAKkD,IAAI,cAAe8rH,WAAWhvH,KAAKkD,IAAI,eAC1E,EAKA60C,WAAY,WACV,QAAS/3C,KAAK6N,OAAO4pB,UACvB,EAMAu3G,YAAazmI,EASb0vF,cAAe1vF,EAiBf6mI,cAAe7mI,IAEbpF,EAAW+qI,EACf9qI,EAAOvB,QAAUsB,C,uBCrejB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElBi5E,EAAaj5E,EAAQ,OAErB8H,EAAS9H,EAAQ,MAEjBszD,EAAgBtzD,EAAQ,OAExB0B,EAAWO,EAAQ4wE,oBAAoB,CACzC5xE,KAAM,YAMNq3I,mBAAoB,CAClB3uH,KAAM,EACNE,MAAO,EACPD,IAAK,EACLE,OAAQ,GAEVlC,KAAM,SAAUhnB,EAASC,GAKvBtC,KAAKqC,QAAUA,EAMfrC,KAAKsC,IAAMA,EAMXtC,KAAK2nC,cACP,EAKA7nC,OAAQ,SAAU6nC,EAAgBtlC,EAASC,EAAKyB,GAC9C/D,KAAK2nC,eAAiBA,GAEa,IAA/BA,EAAezkC,IAAI,QAKvBlD,KAAK2wI,SAAS7tE,MAAM9iE,KAAM6P,WAJxB7P,KAAKqI,MAAMkC,WAKf,EAKAkgE,iBAAkB,SAAUpiE,GAC1B,IAAIs/B,EAAiB3nC,KAAK2nC,eACtB5W,EAAU2pD,EAAWoJ,kBAAkBn8C,EAAezkC,IAAI,YAAc,GACxEwH,EAAOrC,EAAMs0B,kBACjBt0B,EAAMc,IAAI,IAAIvB,EAAQ+C,KAAK,CACzByH,IAAK,EAELqE,QAAQ,EACRxM,MAAO,CACLgC,EAAGvB,EAAKuB,EAAI8kB,EAAQ,GACpB7kB,EAAGxB,EAAKwB,EAAI6kB,EAAQ,GACpBxlB,MAAOb,EAAKa,MAAQwlB,EAAQ,GAAKA,EAAQ,GACzC/kB,OAAQtB,EAAKsB,OAAS+kB,EAAQ,GAAKA,EAAQ,IAE7C1lB,MAAO,CACL4B,KAAM06B,EAAezkC,IAAI,mBACzBwT,OAAQixB,EAAezkC,IAAI,eAC3BsK,UAAWm6B,EAAezkC,IAAI,kBAGpC,EAWAswI,oBAAqB,SAAUwG,EAAaC,EAAel4G,GACzDA,EAAOA,GAAQ,CAAC,EAChB,IAAIqxG,EAAarxG,EAAKqxG,WAClBzrG,EAAiB3nC,KAAK2nC,eACtBuyG,EAAY,CAAC,EAMjB,GAJsB,WAAlBD,IACFC,EAAUrrI,OAAS84B,EAAezkC,IAAI,eAGlB,UAAlB+2I,EAA2B,CAC7B,IAAIE,EAAexyG,EAAezkC,IAAI,gBACtCg3I,EAAU3tI,MAAQ4tI,CACpB,CAEA,SAASC,EAAOz4I,GACd,OAAOu4I,EAAUv4I,EACnB,CAEA,SAAS04I,EAAO14I,EAAKoM,GACnBmsI,EAAUv4I,GAAOoM,CACnB,CAEA,IAAIusI,EAAW3yG,EAAekxG,kBAAkBzF,GAAczrG,EAAeswD,cAAc+hD,IACvF9D,EAAcnhF,EAAcwlF,mBAAmBD,GAanD,OAZAx4I,EAAOU,KAAK0zI,GAAa,SAAUxzI,GACjC,IAAI83I,EAAgBF,EAAS53I,GAEzBq/B,EAAKsxG,uBAAkC,YAAT3wI,IAChCA,EAAO,aACP83I,EAAgBF,EAASG,mBAGvB1lF,EAAc2lF,UAAUh4I,EAAMu3I,IAChCO,GAAiBA,EAActiD,YAAY8hD,EAAaI,EAAQC,EAEpE,IACOH,EAAUD,EACnB,EAKAhJ,cAAe,SAAU5oI,GACvB,IAAI4tB,EAAQj2B,KAAK2nC,eACbrlC,EAAMtC,KAAKsC,IACfiH,EAAOs3D,gBAAgBx4D,EAAO4tB,EAAM/H,qBAAsB,CACxD3iB,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aAEhB,EAMAy/H,SAAU7uI,EAAOyG,OAGnBnF,EAAOvB,QAAUsB,C,wBCxJjB,IAAIrB,EAASL,EAAQ,OAEjBq/B,EAAUr/B,EAAQ,MAElBwsB,EAAgB6S,EAAQ7S,cAQ5B,SAASqjH,EAAa3pG,EAAgBrlC,EAAK6vH,GACzC,IAAIkmB,EAAc1wG,EAAe95B,OAC7Bi3G,EAAYuzB,EAAYn+D,MAE5B,GAAiB,MAAb4qC,GAAmC,SAAdA,EACvB,OAAOA,EAcT,IAVA,IAAI9zG,EAAS,CACXzF,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aAEVypI,EAAmC,eAAvBtC,EAAYz/E,OAA0B,EAAI,EACtDgiF,EAAY,CAAC,CAAC,OAAQ,QAAS,SAAU,CAAC,MAAO,SAAU,WAC3DC,EAAQD,EAAUD,GAClBG,EAAY,CAAC,EAAG,KAAM,IACtBC,EAAc,CAAC,EAEV9kI,EAAI,EAAGA,EAAI,EAAGA,IACrB8kI,EAAYH,EAAU,EAAID,GAAW1kI,IAAM6kI,EAAU7kI,GACrD8kI,EAAYF,EAAM5kI,IAAY,IAANA,EAAUk8G,EAAS,GAAKkmB,EAAYwC,EAAM5kI,IAGpE,IAAI+kI,EAAS,CAAC,CAAC,IAAK,QAAS,GAAI,CAAC,IAAK,SAAU,IAAIL,GACjDjwI,EAAOujB,EAAc8sH,EAAa/pI,EAAQqnI,EAAYtnH,SAC1D,OAAO8pH,GAAOnwI,EAAKotD,OAAOkjF,EAAO,KAAO,GAAKtwI,EAAKswI,EAAO,IAAwB,GAAlBtwI,EAAKswI,EAAO,IAAgC,GAApBhqI,EAAOgqI,EAAO,IAAY,EAAI,EACvH,CAOA,SAAShG,EAAiBl1D,GAOxB,OANAh+E,EAAOU,KAAKs9E,GAAS,IAAI,SAAUH,GACV,MAAnBG,EAAMv7E,YACRu7E,EAAMn5D,gBAAkBm5D,EAAMv7E,UAC9Bu7E,EAAMv7E,UAAY,KAEtB,IACOu7E,CACT,CAEAj+E,EAAQyvI,aAAeA,EACvBzvI,EAAQmzI,iBAAmBA,C,wBCzD3B,IAAIlzI,EAASL,EAAQ,OAEjBe,EAAOV,EAAOU,KAElB,SAASW,EAAS0K,GAChB,IAAI44B,EAAY54B,GAAUA,EAAO44B,UAE5B3kC,EAAO6Q,QAAQ8zB,KAClBA,EAAYA,EAAY,CAACA,GAAa,IAGxCjkC,EAAKikC,GAAW,SAAU11B,GACxB,GAAKA,EAAL,CAKI0oH,EAAI1oH,EAAK,eAAiB0oH,EAAI1oH,EAAK,YACrCA,EAAIqlI,OAASrlI,EAAIkqI,iBACVlqI,EAAIkqI,WAGb,IAAI7E,EAASrlI,EAAIqlI,OAEbA,GAAUt0I,EAAO6Q,QAAQyjI,IAC3B5zI,EAAK4zI,GAAQ,SAAUjwG,GACjBrkC,EAAOkgB,SAASmkB,KACdszF,EAAItzF,EAAO,WAAaszF,EAAItzF,EAAO,SACrCA,EAAM//B,IAAM+/B,EAAM5nB,OAGhBk7G,EAAItzF,EAAO,SAAWszF,EAAItzF,EAAO,SACnCA,EAAM7/B,IAAM6/B,EAAMrW,KAGxB,GArBF,CAuBF,GACF,CAEA,SAAS2pG,EAAIroB,EAAK5tG,GAChB,OAAO4tG,GAAOA,EAAIxvG,gBAAkBwvG,EAAIxvG,eAAe4B,EACzD,CAEAJ,EAAOvB,QAAUsB,C,wBC5CjB,IAAI2rG,EAAYrtG,EAAQ,OAExBqtG,EAAUC,yBAAyB,aAAa,SAAUlhG,GAExD,OAAQA,EAAO4pB,aAAiB5pB,EAAOuoI,OAASvoI,EAAOuoI,OAAOjiI,OAAS,EAAItG,EAAOsiB,YAAc,KAAMtiB,EAAOwgI,WAA6B,YAAf,YAC7H,G,gCCLA,IAAI3qI,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBuvF,EAAiBvvF,EAAQ,OAEzBszD,EAAgBtzD,EAAQ,OAS5B,SAASy5I,EAAuBvzG,EAAgBtlC,GAC9CslC,EAAejB,kBAAiB,SAAUriC,GACxC,IAAIzD,EAAOyD,EAAYG,UACvBwsF,EAAekH,YAAYvwD,EAAeonG,UAAWpnG,EAAeE,cAAejnC,EAAM+mC,EAAeswD,cAAetwD,EAAgBA,EAAewnG,iBAAiBvuI,GACzK,GACF,CAGA,SAASu6I,EAAkB94I,GACzBA,EAAQ4gF,YAAW,SAAU5+E,GAC3B,IAAIzD,EAAOyD,EAAYG,UACnBw4C,EAAiB,GACrB36C,EAAQ4B,cAAc,aAAa,SAAU0jC,GAC3C,GAAIA,EAAestG,eAAe5wI,GAAc,CAC9C,IAAI44C,EAAatV,EAAeynG,cAActtI,EAAO2B,KAAK4rI,EAAgB,KAAMhrI,EAAasjC,KAAoB,CAC/GyV,MAAO,GACPG,YAAa,IAEfN,EAAWC,UAAYvV,EAAewnG,iBAAiBvuI,GACvDo8C,EAAeh8C,KAAKi8C,EACtB,CACF,IAEA54C,EAAYG,UAAU6C,UAAU,aAAc21C,EAChD,GACF,CAKA,SAASqyF,EAAehrI,EAAasjC,EAAgB55B,EAAO2hI,GAQ1D,IAPA,IAAI4K,EAAW3yG,EAAeE,cAAc6nG,GACxCwG,EAAcnhF,EAAcwlF,mBAAmBD,GAC/Cc,EAAe,CACjB7uI,MAAOlI,EAAYG,UAAU+0B,UAAU,UAIhCtjB,EAAI,EAAGuY,EAAM0nH,EAAY/hI,OAAQ8B,EAAIuY,EAAKvY,IAAK,CACtD,IAAIvT,EAAOwzI,EAAYjgI,GACnBi/C,EAAUolF,EAAkB,YAAT53I,EAAqB,oBAAsBA,GAClEwyD,GAAWA,EAAQgjC,YAAYnqF,EAAOwrB,EAAWlyB,EACnD,CAEA,OAAO+zI,EAAa7uI,MAEpB,SAASgtB,EAAU53B,GACjB,OAAOy5I,EAAaz5I,EACtB,CAEA,SAAS0F,EAAU1F,EAAKoM,GACtBqtI,EAAaz5I,GAAOoM,CACtB,CACF,CA5DArK,EAAQyD,eAAezD,EAAQi2C,SAASg8C,OAAO0lD,WAAW,SAAUh5I,GAClEA,EAAQ4B,cAAc,aAAa,SAAU0jC,GAC3CuzG,EAAuBvzG,EAAgBtlC,EACzC,IACA84I,EAAkB94I,EACpB,G,uBCbA,IAAIqB,EAAUjC,EAAQ,OAElBoC,EAAa,CACfnB,KAAM,kBACNoC,MAAO,oBAEPjC,OAAQ,UAEVa,EAAQI,eAAeD,GAAY,SAAUE,EAAS1B,GACpDA,EAAQ4B,cAAc,CACpBC,SAAU,YACVE,MAAOL,IACN,SAAUkyB,GACXA,EAAM+4G,YAAYjrI,EAAQC,SAC5B,GACF,G,wBCVA,IAAIs3I,EAEkB,qBAAXnyE,OACTmyE,EAAMnyE,OAAOxhE,QAEY,qBAAXutI,EAAAA,IACZoG,EAAMpG,EAAAA,EAAOvtI,SAGE,qBAAR2zI,IACTA,GAAM,GAGR,IAAI3zI,EAAU2zI,EACdz5I,EAAQ8F,QAAUA,C,iCCnBlB,IAAI7F,EAASL,EAAQ,OAEjBk3D,EAAal3D,EAAQ,OAErBiiF,EAAajiF,EAAQ,MAErBssB,EAAY4qC,EAAW5qC,UAE3B,SAASwtH,EAAmBn/H,EAAQo/H,GAClC,IAAIttI,EAAOkO,EAAO,GAAKA,EAAO,GAC1BoS,EAAMgtH,EACN1jF,EAAS5pD,EAAOsgB,EAAM,EAC1BpS,EAAO,IAAM07C,EACb17C,EAAO,IAAM07C,CACf,CAEA,IAAI2jF,EAAmB,CAAC,EAAG,GAMvBtjB,EAAO,SAAUpvH,EAAKtC,EAAO2V,GAK/Bpc,KAAK+I,IAAMA,EAMX/I,KAAKyG,MAAQA,EAMbzG,KAAK07I,QAAUt/H,GAAU,CAAC,EAAG,GAK7Bpc,KAAKq8C,SAAU,EAMfr8C,KAAK+6C,QAAS,EAMd/6C,KAAK27I,cACP,EAEAxjB,EAAKj2H,UAAY,CACfC,YAAag2H,EAObr7F,QAAS,SAAUn0B,GACjB,IAAIyT,EAASpc,KAAK07I,QACdt1I,EAAMI,KAAKJ,IAAIgW,EAAO,GAAIA,EAAO,IACjC9V,EAAME,KAAKF,IAAI8V,EAAO,GAAIA,EAAO,IACrC,OAAOzT,GAASvC,GAAOuC,GAASrC,CAClC,EAOA23E,YAAa,SAAUr9E,GACrB,OAAOZ,KAAK88B,QAAQ98B,KAAKoT,YAAYxS,GACvC,EAMA8b,UAAW,WACT,OAAO1c,KAAK07I,QAAQ14I,OACtB,EAOAg7F,kBAAmB,SAAU1uE,GAC3B,OAAOqpC,EAAWqlC,kBAAkB1uE,GAActvB,KAAKyG,MAAMiW,YAAa1c,KAAK07I,QACjF,EAOAjmB,UAAW,SAAUl3G,EAAOuR,GAC1B,IAAI1T,EAASpc,KAAK07I,QAClBt/H,EAAO,GAAKmC,EACZnC,EAAO,GAAK0T,CACd,EAQA1c,YAAa,SAAUxS,EAAMg7I,GAC3B,IAAIx/H,EAASpc,KAAK07I,QACdj1I,EAAQzG,KAAKyG,MAQjB,OAPA7F,EAAO6F,EAAMm5B,UAAUh/B,GAEnBZ,KAAK+6C,QAAyB,YAAft0C,EAAM/D,OACvB0Z,EAASA,EAAOpZ,QAChBu4I,EAAmBn/H,EAAQ3V,EAAMuQ,UAG5B+W,EAAUntB,EAAM66I,EAAkBr/H,EAAQw/H,EACnD,EAQAtsD,YAAa,SAAU3mF,EAAOizI,GAC5B,IAAIx/H,EAASpc,KAAK07I,QACdj1I,EAAQzG,KAAKyG,MAEbzG,KAAK+6C,QAAyB,YAAft0C,EAAM/D,OACvB0Z,EAASA,EAAOpZ,QAChBu4I,EAAmBn/H,EAAQ3V,EAAMuQ,UAGnC,IAAIqnB,EAAItQ,EAAUplB,EAAOyT,EAAQq/H,EAAkBG,GACnD,OAAO57I,KAAKyG,MAAMA,MAAM43B,EAC1B,EAQAn4B,YAAa,SAAUJ,EAAO81I,GAAQ,EAMtC72D,eAAgB,SAAU82D,GACxB,GAAI77I,KAAK+6C,SAAW8gG,EAAgB,CAIlC,IAHA,IAAIC,EAAQ97I,KAAK+7I,WACb14F,EAAS,GAEJptC,EAAI,EAAGA,EAAI6lI,EAAM3nI,OAAQ8B,IAChCotC,EAAOriD,KAAK86I,EAAM7lI,GAAG,IAOvB,OAJI6lI,EAAM7lI,EAAI,IACZotC,EAAOriD,KAAK86I,EAAM7lI,EAAI,GAAG,IAGpBotC,CACT,CACE,OAAOvhD,EAAO41B,IAAI13B,KAAKyG,MAAMykF,WAAYlrF,KAAKoT,YAAapT,KAE/D,EAMA0lF,gBAAiB,WACf,OAAO5jF,EAAO41B,IAAI13B,KAAKyG,MAAMykF,WAAYlrF,KAAKoT,YAAapT,KAC7D,EAWA+7I,SAAU,WAQR,IAPA,IAAI3/H,EAASpc,KAAK0c,YACdo/H,EAAQ,GACRttH,EAAMxuB,KAAKyG,MAAMuQ,QACjBuH,EAAQnC,EAAO,GACf0T,EAAM1T,EAAO,GACbm+D,EAAOzqD,EAAMvR,EAERtI,EAAI,EAAGA,EAAIuY,EAAKvY,IACvB6lI,EAAM96I,KAAK,CAACu5E,EAAOtkE,EAAIuY,EAAMjQ,EAAOg8D,GAAQtkE,EAAI,GAAKuY,EAAMjQ,IAG7D,OAAOu9H,CACT,EAMAt/H,aAAc,WACZ,IAAIg7D,EAAax3E,KAAK07I,QAClBpsH,EAAatvB,KAAKyG,MAAMiW,YACxB8R,EAAMc,EAAW,GAAKA,EAAW,IAAMtvB,KAAK+6C,OAAS,EAAI,GAErD,IAARvsB,IAAcA,EAAM,GACpB,IAAItgB,EAAO1H,KAAKiH,IAAI+pE,EAAW,GAAKA,EAAW,IAC/C,OAAOhxE,KAAKiH,IAAIS,GAAQsgB,CAC1B,EAMA1lB,aAAc,KAMdkzI,UAAW,KAQXxrD,iBAAkB,WAChB,IAAIpF,EAAgBprF,KAAK27I,eAEzB,IAAKvwD,EAAe,CAClB,IAAIxhC,EAAY5pD,KAAKi2B,MACjBrd,EAAagxC,EAAUj9C,SAAS,aACpCy+E,EAAgBxyE,EAAW1V,IAAI,YAEb,aAAdlD,KAAK0C,MAAyC,MAAjB0oF,GAA2C,SAAlBA,IACxDA,EAAgB1H,EAAW40C,qBAAqBx2H,EAAO41B,IAAI13B,KAAKyG,MAAMykF,WAAYlrF,KAAKoT,YAAapT,MAAO4pD,EAAU47B,qBAAsB5sE,EAAW0O,UAAWtnB,KAAKg8I,UAAYh8I,KAAKg8I,YAAch8I,KAAK8I,eAAiB9I,KAAK8I,eAAiB,GAAK,EAAG8P,EAAW1V,IAAI,YAG1QlD,KAAK27I,eAAiBvwD,CACxB,CAEA,OAAOA,CACT,GAEF,IAAIjoF,EAAWg1H,EACf/0H,EAAOvB,QAAUsB,C,wBCvQjB,IAAIrB,EAASL,EAAQ,OAEjBgtC,EAAShtC,EAAQ,OAEjBwiE,EAASxiE,EAAQ,OAEjBuiE,EAAeviE,EAAQ,OAEvBw6I,EAAgBx6I,EAAQ,OAMxBolF,EAAmBp4C,EAAO7R,eAE9B,SAASs/G,IACPD,EAActkI,KAAK3X,KACrB,CAIA,SAAS6gC,EAAKr9B,GAIZxD,KAAKwD,KAAOA,EAKZxD,KAAK0F,UACLu2I,EAActkI,KAAK3X,MACnBA,KAAKm8I,eAAiB,IAAID,EAC1Bl8I,KAAKo8I,eAAiB,IAAIF,EAC1Bl8I,KAAKq8I,QACLr8I,KAAKs8I,KACP,CAmOA,SAASC,EAAUpyB,EAAY9nH,EAAS25E,EAAQjuE,GAC9C,IAAI1J,EAAc23E,EAAO33E,YACrBvB,EAAWuB,EAAcA,EAAYa,iBAAmB,KAE5D,OAAOpC,IAAa9C,KAAO8C,EAASqnH,GAAYp8G,GAAS,IAC3D,CAzPAjM,EAAO0Y,MAAM0hI,EAAgBD,GAmB7Bp7G,EAAK3+B,UAAY,CACfC,YAAa0+B,EACbn+B,KAAM,OAMNmX,WAAY,CAAC,IAAK,KAUlB6nB,gBAAiB,SAAUz1B,EAAGC,EAAGX,EAAOS,GAEtC,OADAhM,KAAKw8I,MAAQ,IAAIx4E,EAAa/3D,EAAGC,EAAGX,EAAOS,GACpChM,KAAKw8I,KACd,EAMA7/G,gBAAiB,WACf,OAAO38B,KAAKw8I,KACd,EAQA76G,YAAa,SAAU11B,EAAGC,EAAGX,EAAOS,GAClChM,KAAKy8I,YAAYxwI,EAAGC,EAAGX,EAAOS,GAC9BhM,KAAK2yH,UAAY,IAAI3uD,EAAa/3D,EAAGC,EAAGX,EAAOS,EACjD,EASAywI,YAAa,SAAUxwI,EAAGC,EAAGX,EAAOS,GAClC,IAAItB,EAAO1K,KAAK28B,kBACZ+/G,EAAgB18I,KAAKo8I,eACzBM,EAAc7/G,UAAYnyB,EAAKiyI,mBAAmB,IAAI34E,EAAa/3D,EAAGC,EAAGX,EAAOS,IAChF0wI,EAAclzD,qBAEdxpF,KAAK48I,kBACP,EAMAx3I,UAAW,SAAUy3I,GACdA,IAIL78I,KAAKq8I,QAAUQ,EAEf78I,KAAK88I,uBACP,EAKAx3I,QAAS,SAAUC,GACjBA,EAAOA,GAAQ,EACf,IAAIG,EAAY1F,KAAK0F,UAEjBA,IACmB,MAAjBA,EAAUY,MACZf,EAAOiB,KAAKJ,IAAIV,EAAUY,IAAKf,IAGZ,MAAjBG,EAAUU,MACZb,EAAOiB,KAAKF,IAAIZ,EAAUU,IAAKb,KAInCvF,KAAKs8I,MAAQ/2I,EAEbvF,KAAK88I,sBACP,EAKAC,iBAAkB,WAEhB,IAAIC,EAAUh9I,KAAK28B,kBACfxwB,EAAK6wI,EAAQ/wI,EAAI+wI,EAAQzxI,MAAQ,EACjCa,EAAK4wI,EAAQ9wI,EAAI8wI,EAAQhxI,OAAS,EACtC,MAAO,CAACG,EAAIC,EACd,EACAvG,UAAW,WACT,OAAO7F,KAAKq8I,SAAWr8I,KAAK+8I,kBAC9B,EACAn3I,QAAS,WACP,OAAO5F,KAAKs8I,OAAS,CACvB,EAKAl0G,iBAAkB,WAChB,OAAOpoC,KAAKm8I,cACd,EACAW,qBAAsB,WAEpB,IAAIG,EAAsBj9I,KAAKo8I,eAAetxD,oBAE1C3iD,EAAgBnoC,KAAKm8I,eACrBe,EAAgBl9I,KAAK+8I,mBACrB13I,EAASrF,KAAK6F,YACdN,EAAOvF,KAAK4F,UAChBP,EAASopC,EAAO7R,eAAe,GAAIv3B,EAAQ43I,GAC3CC,EAAgBzuG,EAAO7R,eAAe,GAAIsgH,EAAeD,GACzD90G,EAAc3jB,OAASnf,EACvB8iC,EAAczhC,SAAW,CAACw2I,EAAc,GAAK73I,EAAO,GAAI63I,EAAc,GAAK73I,EAAO,IAClF8iC,EAAc1hC,MAAQ,CAAClB,EAAMA,GAE7BvF,KAAK48I,kBACP,EAMAA,iBAAkB,WAChB,IAAIz0G,EAAgBnoC,KAAKm8I,eACrBO,EAAgB18I,KAAKo8I,eACzBM,EAAclxI,OAAS28B,EACvBA,EAAcphC,kBACd21I,EAAc31I,kBACd21I,EAAc7/G,WAAaonC,EAAOvkC,KAAK1/B,KAAK68B,YAAc78B,KAAK68B,UAAY,IAAK6/G,EAAc7/G,WAE1F78B,KAAK68B,WACP78B,KAAKm9I,aAAen9I,KAAKm9I,cAAgB,GACzCl5E,EAAOm5E,OAAOp9I,KAAKm9I,aAAcn9I,KAAK68B,YAEtC78B,KAAKm9I,aAAe,KAGtBn9I,KAAKwpF,oBACP,EAKAx7D,YAAa,WACX,OAAOhuB,KAAK2yH,SACd,EAMA9S,qBAAsB,WACpB,IAAIn1G,EAAO1K,KAAK28B,kBAAkBpY,QAElC,OADA7Z,EAAKkyB,eAAe58B,KAAK68B,WAClBnyB,CACT,EAOA3E,YAAa,SAAUnF,GACrB,IAAIi8B,EAAY78B,KAAK68B,UACrB,OAAOA,EAAYgqD,EAAiB,GAAIjmF,EAAMi8B,GAAa,CAACj8B,EAAK,GAAIA,EAAK,GAC5E,EAOAsF,YAAa,SAAUJ,GACrB,IAAIq3I,EAAen9I,KAAKm9I,aACxB,OAAOA,EAAet2D,EAAiB,GAAI/gF,EAAOq3I,GAAgB,CAACr3I,EAAM,GAAIA,EAAM,GACrF,EAMAu3I,eAAgBv7I,EAAOoF,MAAMq1I,EAAW,eAMxCe,iBAAkBx7I,EAAOoF,MAAMq1I,EAAW,eAM1ChvF,aAAc,SAAUznD,GACtB,OAAO9F,KAAK6/G,uBAAuB/iF,QAAQh3B,EAAM,GAAIA,EAAM,GAC7D,GAYFhE,EAAO0Y,MAAMqmB,EAAMo7G,GASnB,IAAI94I,EAAW09B,EACfz9B,EAAOvB,QAAUsB,C,wBChRjB,IAAIrB,EAASL,EAAQ,OAEjB4M,EAAgB,CAClBqc,MAAM,EACNpc,OAAQ,EAERC,EAAG,EAGH8tC,SAAS,EAET74C,KAAM,GAEN+kF,aAAc,MAEdg1D,WAAY,KAEZC,aAAc,CACZ30D,SAAU,KACVhnB,SAAU,MACVonB,YAAa,KAGfw0D,cAAe,CAAC,EAEhBC,QAAS,GACTjnI,QAAQ,EAERm1E,cAAc,EAEdtyC,QAAS,CACP5uB,MAAM,GAER6oD,YAAa,CAAC,EAEdnjD,SAAU,CAER1F,MAAM,EACN0wB,QAAQ,EACRi1C,gBAAiB,KAEjBxkE,UAAW,CACTtf,MAAO,OACPhB,MAAO,EACP7I,KAAM,SAGRmM,OAAQ,CAAC,OAAQ,QACjBC,WAAY,CAAC,GAAI,KAGnBwhB,SAAU,CAER5F,MAAM,EAEN4C,QAAQ,EAERnZ,OAAQ,EAER0X,UAAW,CACTtgB,MAAO,IAIXglB,UAAW,CACT7F,MAAM,EAEN4C,QAAQ,EACRk/B,OAAQ,EACRq9B,aAAc,KAEdC,aAAc,KAEdhyB,OAAQ,EAGRlnC,SAAU,IAGZP,UAAW,CAET3F,MAAM,EAENmB,UAAW,CACTtf,MAAO,CAAC,QACRhB,MAAO,EACP7I,KAAM,UAIVi7I,UAAW,CAETjzH,MAAM,EAEN4iE,UAAW,CACT/gF,MAAO,CAAC,wBAAyB,4BAInCqxI,EAAc,CAAC,EACnBA,EAAYz+F,aAAer9C,EAAOqwF,MAAM,CAEtCv6B,aAAa,EAIbvnC,UAAW,CACT3F,MAAM,GAGR4F,SAAU,CAERurH,gBAAgB,EAChBl9G,SAAU,QAGZpO,UAAW,CACToO,SAAU,SAEXtwB,GACHuvI,EAAY5qI,UAAYlR,EAAOqwF,MAAM,CAEnCv6B,YAAa,CAAC,EAAG,GAYjBznC,YAAa,GAIZ9hB,GAEHuvI,EAAYC,SAAW/7I,EAAOkL,SAAS,CACrCvG,OAAO,EACPL,IAAK,UACLE,IAAK,WACJs3I,EAAY5qI,WACf4qI,EAAYE,QAAUh8I,EAAOkL,SAAS,CACpCvG,OAAO,EACPs3I,QAAS,IACRH,EAAY5qI,WACf,IAAI7P,EAAWy6I,EACfx6I,EAAOvB,QAAUsB,C,uBCtJjB,IAAIuE,EAAUjG,EAAQ,OAIlBK,GAFU4F,EAAQC,QAETlG,EAAQ,QAEjBgsD,EAAchsD,EAAQ,MAEtBu8I,EAAev8I,EAAQ,OAEvBw8I,EAAgBx8I,EAAQ,OAExBy8I,EAAQz8I,EAAQ,OAEhBk3D,EAAal3D,EAAQ,OAUzB,SAAS08I,EAAe13I,EAAOwvB,GAC7B,IAMIynE,EACA9lC,EACA2iB,EARA6jE,EAAY33I,EAAM/D,KAClB0D,EAAM6vB,EAAMwnE,SACZn3F,EAAM2vB,EAAM0nE,SACZ0gD,EAAgB,MAAPj4I,EACTk4I,EAAgB,MAAPh4I,EACTi4I,EAAiB93I,EAAMiW,YA8E3B,MAzEkB,YAAd0hI,EACF1gD,GAAeznE,EAAM/yB,IAAI,SAAW,IAAIiR,QAExCyjD,EAAc3hC,EAAM/yB,IAAI,eAEnBpB,EAAO6Q,QAAQilD,KAClBA,EAAc,CAACA,GAAe,EAAGA,GAAe,IAGpB,mBAAnBA,EAAY,KACrBA,EAAc,CAAC,EAAG,IAGpBA,EAAY,GAAKe,EAAW1oD,aAAa2nD,EAAY,GAAI,GACzDA,EAAY,GAAKe,EAAW1oD,aAAa2nD,EAAY,GAAI,GACzD2iB,EAAOgkE,EAAe,GAAKA,EAAe,IAAM/3I,KAAKiH,IAAI8wI,EAAe,KAgB/D,MAAPn4I,IACFA,EAAoB,YAAdg4I,EAA0B1gD,EAAc,EAAItvF,IAAMmwI,EAAe,GAAK3mF,EAAY,GAAK2iB,GAGpF,MAAPj0E,IACFA,EAAoB,YAAd83I,EAA0B1gD,EAAcA,EAAc,EAAItvF,IAAMmwI,EAAe,GAAK3mF,EAAY,GAAK2iB,GAGjG,YAARn0E,EACFA,EAAMm4I,EAAe,GACG,oBAARn4I,IAChBA,EAAMA,EAAI,CACRA,IAAKm4I,EAAe,GACpBj4I,IAAKi4I,EAAe,MAIZ,YAARj4I,EACFA,EAAMi4I,EAAe,GACG,oBAARj4I,IAChBA,EAAMA,EAAI,CACRF,IAAKm4I,EAAe,GACpBj4I,IAAKi4I,EAAe,OAIhB,MAAPn4I,IAAgB2qC,SAAS3qC,MAAUA,EAAMgI,MAClC,MAAP9H,IAAgByqC,SAASzqC,MAAUA,EAAM8H,KAC1C3H,EAAM+3I,SAAS18I,EAAO28I,MAAMr4I,IAAQtE,EAAO28I,MAAMn4I,IAE7C2vB,EAAMyoH,qBAEJt4I,EAAM,GAAKE,EAAM,IAAM+3I,IACzBj4I,EAAM,GAIJA,EAAM,GAAKE,EAAM,IAAMg4I,IACzBh4I,EAAM,IAIH,CAACF,EAAKE,EACf,CAEA,SAASq4I,EAAgBl4I,EAAOwvB,GAC9B,IAAI7Z,EAAS+hI,EAAe13I,EAAOwvB,GAC/BooH,EAA2B,MAAlBpoH,EAAMwnE,SACf6gD,EAA2B,MAAlBroH,EAAM0nE,SACfxtE,EAAc8F,EAAM/yB,IAAI,eAET,QAAfuD,EAAM/D,OACR+D,EAAMqW,KAAOmZ,EAAM/yB,IAAI,YAGzB,IAAIk7I,EAAY33I,EAAM/D,KACtB+D,EAAMgvH,UAAUr5G,EAAO,GAAIA,EAAO,IAClC3V,EAAMm4I,WAAW,CACfzuH,YAAaA,EACbkuH,OAAQA,EACRC,OAAQA,EACRO,YAA2B,aAAdT,GAA0C,SAAdA,EAAuBnoH,EAAM/yB,IAAI,eAAiB,KAC3F47I,YAA2B,aAAdV,GAA0C,SAAdA,EAAuBnoH,EAAM/yB,IAAI,eAAiB,OAO7F,IAAIy7B,EAAW1I,EAAM/yB,IAAI,YAET,MAAZy7B,GACFl4B,EAAMs4I,aAAet4I,EAAMs4I,YAAYpgH,EAE3C,CAQA,SAAS62F,EAAmBv/F,EAAOihB,GAGjC,GAFAA,EAAWA,GAAYjhB,EAAM/yB,IAAI,QAE7Bg0C,EACF,OAAQA,GAEN,IAAK,WACH,OAAO,IAAI8mG,EAAa/nH,EAAM+gB,gBAAiB,CAACzwC,KAAWA,MAE7D,IAAK,QACH,OAAO,IAAI03I,EAGb,QACE,OAAQC,EAAMc,SAAS9nG,IAAa+mG,GAAe77I,OAAO6zB,GAGlE,CAMA,SAASgpH,EAAgBxrI,GACvB,IAAI6b,EAAa7b,EAAKhN,MAAMiW,YACxBtW,EAAMkpB,EAAW,GACjBhpB,EAAMgpB,EAAW,GACrB,QAASlpB,EAAM,GAAKE,EAAM,GAAKF,EAAM,GAAKE,EAAM,EAClD,CAWA,SAASgyH,EAAqB4mB,EAAY35D,EAAQr/D,EAAMi5H,EAAYlwF,GAClE,IAAImwF,EACAC,EAAoB,EACpBC,EAA2B,EAC3BrtI,GAAYktI,EAAalwF,GAAe,IAAMzoD,KAAK0L,GACnD2gB,EAAO,EAEP0yD,EAAOpxE,OAAS,KAElB0e,EAAOrsB,KAAKy+B,MAAMsgD,EAAOpxE,OAAS,KAGpC,IAAK,IAAI8B,EAAI,EAAGA,EAAIipI,EAAW/qI,OAAQ8B,GAAK4c,EAAM,CAChD,IAAI44D,EAAYyzD,EAAWjpI,GAGvBvL,EAAO+iD,EAAY9wB,gBAAgB4oD,EAAOtvE,GAAIiQ,EAAM,SAAU,OAClExb,EAAKuB,GAAKw/E,EAAYjlF,KAAK0sB,IAAIjhB,GAC/BvH,EAAKwB,GAAKu/E,EAAYjlF,KAAK4sB,IAAInhB,GAE/BvH,EAAKa,OAAS,IACdb,EAAKsB,QAAU,IAEVozI,EAGIA,EAAmB7tE,UAAU7mE,IAClC40I,IACAD,EAAoB74I,KAAKF,IAAI+4I,EAAmBC,KAEhDF,EAAmBG,MAAM70I,GAEzB40I,EAA2B,GAR7BF,EAAqB10I,EAAK6Z,OAU9B,CAEA,OAA0B,IAAtB86H,GAA2BxsH,EAAO,EAC7BA,GAGDwsH,EAAoB,GAAKxsH,EAAO,CAC1C,CAQA,SAAS2yD,EAAmB/xE,EAAM0d,GAChC,IAAI1qB,EAAQgN,EAAKhN,MACb8+E,EAAS9+E,EAAMmvH,iBACfpqC,EAAQ/kF,EAAMykF,WAElB,MAA8B,kBAAnB/5D,GACTA,EAAiB,SAAUquH,GACzB,OAAO,SAAUrhI,GACf,OAAOqhI,EAAIpuH,QAAQ,UAAkB,MAAPjT,EAAcA,EAAM,GACpD,CACF,CAJiB,CAIfgT,GAGKrvB,EAAO41B,IAAI6tD,EAAQp0D,IACS,oBAAnBA,EACTrvB,EAAO41B,IAAI8zD,GAAO,SAAU4qC,EAAM3xH,GACvC,OAAO0sB,EAAe+yD,EAAgBzwE,EAAM2iH,GAAO3xH,EACrD,GAAGzE,MAEIulF,CAEX,CAEA,SAASrB,EAAgBzwE,EAAM1F,GAI7B,MAAqB,aAAd0F,EAAK/Q,KAAsB+Q,EAAKhN,MAAMw9E,SAASl2E,GAASA,CACjE,CAxPAtM,EAAQ,OAERA,EAAQ,OAwPRI,EAAQs8I,eAAiBA,EACzBt8I,EAAQ88I,gBAAkBA,EAC1B98I,EAAQ2zH,mBAAqBA,EAC7B3zH,EAAQo9I,gBAAkBA,EAC1Bp9I,EAAQy2H,qBAAuBA,EAC/Bz2H,EAAQ2jF,mBAAqBA,EAC7B3jF,EAAQqiF,gBAAkBA,C,wBChR1B,IAAIpiF,EAASL,EAAQ,OAEjBiiF,EAAajiF,EAAQ,MAEzB,SAASiD,EAAQ0sG,GACf,OAAItvG,EAAOkgB,SAASovF,IAAqB,MAAbA,EAAIrjG,MACvBqjG,EAAIrjG,MAEJqjG,EAAM,EAEjB,CAEA,IAAIjuG,EAAW,CAKbqiF,mBAAoB,WAClB,OAAO9B,EAAW8B,mBAAmBxlF,KAAKyT,KAAMzT,KAAKkD,IAAI,uBAC3D,EAKA8zC,cAAe,WACb,MAA4B,aAArBh3C,KAAKkD,IAAI,SAA0BpB,EAAO41B,IAAI13B,KAAKkD,IAAI,QAASwB,EACzE,EAMA+4F,OAAQ,SAAUj5E,GAChB,IAAI3W,EAAS7N,KAAK6N,OACdzH,EAAOoe,GAA+B,MAArB3W,EAAO4xI,WAAyC5xI,EAAOzH,IAA3ByH,EAAO4xI,WAMxD,OAJIz/I,KAAKyT,MAAe,MAAPrN,GAAuB,YAARA,GAAoC,oBAARA,IAAuBtE,EAAO28I,MAAMr4I,KAC9FA,EAAMpG,KAAKyT,KAAKhN,MAAMiN,MAAMtN,IAGvBA,CACT,EAMAu3F,OAAQ,SAAUn5E,GAChB,IAAI3W,EAAS7N,KAAK6N,OACdvH,EAAOke,GAA6B,MAAnB3W,EAAO6xI,SAAqC7xI,EAAOvH,IAAzBuH,EAAO6xI,SAMtD,OAJI1/I,KAAKyT,MAAe,MAAPnN,GAAuB,YAARA,GAAoC,oBAARA,IAAuBxE,EAAO28I,MAAMn4I,KAC9FA,EAAMtG,KAAKyT,KAAKhN,MAAMiN,MAAMpN,IAGvBA,CACT,EAKAo4I,iBAAkB,WAChB,IAAI7wI,EAAS7N,KAAK6N,OAClB,OAA4B,MAArBA,EAAO4xI,YAAyC,MAAnB5xI,EAAO6xI,WAA4B7xI,EAAOpH,KAChF,EAMAsmF,iBAAkBjrF,EAAOyG,KAMzB21F,SAAU,SAAUuhD,EAAYC,GAC9B1/I,KAAK6N,OAAO4xI,WAAaA,EACzBz/I,KAAK6N,OAAO6xI,SAAWA,CACzB,EAKAC,WAAY,WAEV3/I,KAAK6N,OAAO4xI,WAAaz/I,KAAK6N,OAAO6xI,SAAW,IAClD,GAEFt8I,EAAOvB,QAAUsB,C,wBCzFjB,IAAIrB,EAASL,EAAQ,OAEjBm8I,EAAcn8I,EAAQ,OAEtB82H,EAAiB92H,EAAQ,OAEzBq/B,EAAUr/B,EAAQ,MAElB6mG,EAAkBxnE,EAAQwnE,gBAC1BqJ,EAAmB7wE,EAAQ6wE,iBAE3BiuC,EAAa,CAAC,QAAS,WAAY,OAAQ,OAS/C,SAASz8I,EAAS48E,EAAU8/D,EAAoBC,EAAmBC,GACjEj+I,EAAOU,KAAKo9I,GAAY,SAAU1oG,GAChC2oG,EAAmBt4I,OAAO,CACxB7E,KAAMq9E,EAAW,QAAU7oC,EAC3BzhB,qBAAsB,SAAU5nB,EAAQxL,GACtC,IAAIqjD,EAAa1lD,KAAK0lD,WAClB0hE,EAAsB1hE,EAAa4iD,EAAgBz6F,GAAU,CAAC,EAC9DmyI,EAAa39I,EAAQ49I,WACzBn+I,EAAOqwF,MAAMtkF,EAAQmyI,EAAW98I,IAAIg0C,EAAW,SAC/Cp1C,EAAOqwF,MAAMtkF,EAAQ7N,KAAKkgJ,oBAC1BryI,EAAOnL,KAAOo9I,EAAkB//D,EAAUlyE,GAEtC63C,GACFisD,EAAiB9jG,EAAQu5G,EAAqB1hE,EAElD,EACAr3C,cAAevM,EAAO0hD,SAAS,CAAC,CAAC,EAAGo6F,EAAY1mG,EAAW,QAAS6oG,IAAqB,IAE7F,IACAxnB,EAAexpB,yBAAyBhvB,EAAW,OAAQj+E,EAAOoF,MAAM44I,EAAmB//D,GAC7F,CAEA38E,EAAOvB,QAAUsB,C,iCC1CjB,IAAIrB,EAASL,EAAQ,OAEjB8H,EAAS9H,EAAQ,MAEjBk3D,EAAal3D,EAAQ,OAErBkzC,EAAmBlzC,EAAQ,OAG3B0+I,EAAoB,MAWxB,SAASC,EAAStnD,EAAez2F,EAASC,GACxCtC,KAAK+pB,OAAS+uE,CAChB,CAsWA,SAASyjD,EAAUpyB,EAAY9nH,EAAS25E,EAAQjuE,GAC9C,IAAI+qF,EAAgB9c,EAAO8c,cACvBz0F,EAAc23E,EAAO33E,YACrBvB,EAAWg2F,EAAgBA,EAAc5zF,iBAAmBb,EAAcA,EAAYa,iBAAmB,KAC7G,OAAOpC,IAAa9C,KAAO8C,EAASqnH,GAAYp8G,GAAS,IAC3D,CAzWAqyI,EAASl+I,UAAY,CACnBC,YAAai+I,EACb19I,KAAM,WACNmX,WAAY,CAAC,OAAQ,SAErB28B,kBAAmB,WACjB,MAAO,CAAC,CACNhzC,KAAM,OACNd,KAAM,QAEV,EACAs2F,aAAc,WACZ,OAAOh5F,KAAKqgJ,UACd,EACA1zI,SAAU,WACR,OAAO3M,KAAK+pB,MACd,EACAjZ,QAAS,WACP,OAAO9Q,KAAKw8I,KACd,EACA/iD,aAAc,WACZ,OAAOz5F,KAAKsgJ,GACd,EACA3mD,cAAe,WACb,OAAO35F,KAAKugJ,GACd,EACAtnD,UAAW,WACT,OAAOj5F,KAAKmnG,OACd,EAWA7K,kBAAmB,WACjB,OAAOt8F,KAAKwgJ,eACd,EAiBAtmD,YAAa,SAAUC,GACrBA,EAAOxhC,EAAW8nF,UAAUtmD,GAC5B,IAAIjuF,EAAIiuF,EAAKumD,cACTxnF,EAAIihC,EAAKE,WAAa,EAC1BnhC,EAAIA,EAAI,GAAK,IAAMA,EAAIA,EACvB,IAAIz6B,EAAI07D,EAAKwmD,UACbliH,EAAIA,EAAI,GAAK,IAAMA,EAAIA,EACvB,IAAIm8D,EAAMT,EAAKymD,SAEf,OADAhmD,EAAMp0F,KAAKiH,KAAKmtF,EAAM,EAAI56F,KAAKs8F,qBAAuB,GAC/C,CACLpwF,EAAGA,EACHgtD,EAAGA,EACHz6B,EAAGA,EACHm8D,IAAKA,EACLhB,KAAMO,EAAK0mD,UACX5mD,aAAc/tF,EAAI,IAAMgtD,EAAI,IAAMz6B,EAClC07D,KAAMA,EAEV,EACAN,YAAa,SAAUM,EAAMn4D,GAG3B,OAFAA,EAAIA,GAAK,EAEC,IAANA,IAIJm4D,EAAO,IAAI2mD,KAAK9gJ,KAAKk6F,YAAYC,GAAMP,MACvCO,EAAK4mD,QAAQ5mD,EAAKwmD,UAAY3+G,IAJrBhiC,KAAKk6F,YAAYC,EAM5B,EACAt3F,OAAQ,SAAUR,EAASC,GACzBtC,KAAKwgJ,iBAAmBxgJ,KAAK+pB,OAAOpd,SAAS,YAAYzJ,IAAI,YAC7DlD,KAAKmnG,QAAUnnG,KAAK+pB,OAAO7mB,IAAI,UAC/BlD,KAAKghJ,WAAahhJ,KAAK+pB,OAAOpd,SAAS,oBAAoBoL,eAAevK,WAAa,EACvFxN,KAAKqgJ,WAAargJ,KAAKihJ,cAAcjhJ,KAAKkhJ,oBAC1C,IAAIC,EAAQnhJ,KAAKqgJ,WAAWc,OAAS,EACjCC,EAAU,CAAC,QAAS,UAEpBllD,EAAWl8F,KAAK+pB,OAAO7mB,IAAI,YAAYF,QAEvCqlG,EAAeroG,KAAK+pB,OAAOmE,qBAE3BmzH,EAA+B,eAAjBrhJ,KAAKmnG,QAA2B,CAACg6C,EAAO,GAAK,CAAC,EAAGA,GACnEr/I,EAAOU,KAAK,CAAC,EAAG,IAAI,SAAUiC,GACxB68I,EAAkBplD,EAAUz3F,KAC9B4jG,EAAa+4C,EAAQ38I,IAAQy3F,EAASz3F,GAAO48I,EAAY58I,GAE7D,IACA,IAAI88I,EAAW,CACbh2I,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aAEVswI,EAAexhJ,KAAKw8I,MAAQjzI,EAAO0kB,cAAco6E,EAAck5C,GAOnE,SAASD,EAAkBplD,EAAUz3F,GACnC,OAAwB,MAAjBy3F,EAASz3F,IAAkC,SAAlBy3F,EAASz3F,EAC3C,CARA3C,EAAOU,KAAK,CAAC,EAAG,IAAI,SAAUiC,GACvB68I,EAAkBplD,EAAUz3F,KAC/By3F,EAASz3F,GAAO+8I,EAAaJ,EAAQ38I,IAAQ48I,EAAY58I,GAE7D,IAMAzE,KAAKsgJ,IAAMpkD,EAAS,GACpBl8F,KAAKugJ,IAAMrkD,EAAS,EACtB,EAUAn2F,YAAa,SAAUnF,EAAMg7I,GAC3B95I,EAAO6Q,QAAQ/R,KAAUA,EAAOA,EAAK,IAC5B,MAATg7I,IAAkBA,GAAQ,GAC1B,IAAI6F,EAAUzhJ,KAAKk6F,YAAYt5F,GAC3B0lC,EAAQtmC,KAAKqgJ,WACblmD,EAAOsnD,EAAQxnD,aAEnB,GAAI2hD,KAAW6F,EAAQ7nD,MAAQtzD,EAAM/nB,MAAMq7E,MAAQ6nD,EAAQ7nD,MAAQtzD,EAAMxW,IAAI8pE,MAC3E,MAAO,CAACxrF,IAAKA,KAGf,IAAIszI,EAAOD,EAAQ7mD,IAEf+mD,EAAU3hJ,KAAKihJ,cAAc,CAAC36G,EAAM/nB,MAAMq7E,KAAMO,IAAOwnD,QAE3D,MAAqB,aAAjB3hJ,KAAKmnG,QACA,CAACnnG,KAAKw8I,MAAMvwI,EAAIy1I,EAAO1hJ,KAAKsgJ,IAAMtgJ,KAAKsgJ,IAAM,EAAGtgJ,KAAKw8I,MAAMtwI,EAAIy1I,EAAU3hJ,KAAKugJ,IAAMvgJ,KAAKugJ,IAAM,GAGjG,CAACvgJ,KAAKw8I,MAAMvwI,EAAI01I,EAAU3hJ,KAAKsgJ,IAAMtgJ,KAAKsgJ,IAAM,EAAGtgJ,KAAKw8I,MAAMtwI,EAAIw1I,EAAO1hJ,KAAKugJ,IAAMvgJ,KAAKugJ,IAAM,EACxG,EASAr6I,YAAa,SAAUJ,GACrB,IAAIq0F,EAAOn6F,KAAK4hJ,YAAY97I,GAC5B,OAAOq0F,GAAQA,EAAKP,IACtB,EASAryD,WAAY,SAAU3mC,EAAMg7I,GAC1B,IAAI91I,EAAQ9F,KAAK+F,YAAYnF,EAAMg7I,GACnC,MAAO,CACLp0G,aAAc,CACZv7B,EAAGnG,EAAM,IAAM9F,KAAKsgJ,IAAMtgJ,KAAKghJ,YAAc,EAC7C90I,EAAGpG,EAAM,IAAM9F,KAAKugJ,IAAMvgJ,KAAKghJ,YAAc,EAC7Cz1I,MAAOvL,KAAKsgJ,IAAMtgJ,KAAKghJ,WACvBh1I,OAAQhM,KAAKugJ,IAAMvgJ,KAAKghJ,YAE1B37I,OAAQS,EACRg0F,GAAI,CAACh0F,EAAM,GAAK9F,KAAKsgJ,IAAM,EAAGx6I,EAAM,GAAK9F,KAAKugJ,IAAM,GACpDsB,GAAI,CAAC/7I,EAAM,GAAK9F,KAAKsgJ,IAAM,EAAGx6I,EAAM,GAAK9F,KAAKugJ,IAAM,GACpDuB,GAAI,CAACh8I,EAAM,GAAK9F,KAAKsgJ,IAAM,EAAGx6I,EAAM,GAAK9F,KAAKugJ,IAAM,GACpDwB,GAAI,CAACj8I,EAAM,GAAK9F,KAAKsgJ,IAAM,EAAGx6I,EAAM,GAAK9F,KAAKugJ,IAAM,GAExD,EAQAqB,YAAa,SAAU97I,GACrB,IAAIk8I,EAAOx7I,KAAKy+B,OAAOn/B,EAAM,GAAK9F,KAAKw8I,MAAMvwI,GAAKjM,KAAKsgJ,KAAO,EAC1D2B,EAAOz7I,KAAKy+B,OAAOn/B,EAAM,GAAK9F,KAAKw8I,MAAMtwI,GAAKlM,KAAKugJ,KAAO,EAC1Dj6G,EAAQtmC,KAAKqgJ,WAAW/5G,MAE5B,MAAqB,aAAjBtmC,KAAKmnG,QACAnnG,KAAKkiJ,sBAAsBD,EAAMD,EAAO,EAAG17G,GAG7CtmC,KAAKkiJ,sBAAsBF,EAAMC,EAAO,EAAG37G,EACpD,EAKA+2G,eAAgBv7I,EAAOoF,MAAMq1I,EAAW,eAKxCe,iBAAkBx7I,EAAOoF,MAAMq1I,EAAW,eAQ1C2E,iBAAkB,WAChB,IAAI56G,EAAQtmC,KAAK+pB,OAAO7mB,IAAI,SAExBm1F,EAAK/xD,EAUT,GARIxkC,EAAO6Q,QAAQ0lF,IAAqB,IAAdA,EAAGlkF,SAC3BkkF,EAAKA,EAAG,IAGN,UAAU8pD,KAAK9pD,KACjB/xD,EAAQ,CAAC+xD,EAAK,SAAUA,EAAK,WAG3B,uBAAuB8pD,KAAK9pD,GAAK,CACnC,IAAI95E,EAAQve,KAAKk6F,YAAY7B,GACzB0B,EAAWx7E,EAAM47E,KACrBJ,EAASK,SAASL,EAASM,WAAa,GACxC,IAAIvqE,EAAM9vB,KAAK65F,YAAYE,GAAW,GACtCzzD,EAAQ,CAAC/nB,EAAM07E,aAAcnqE,EAAImqE,aACnC,CAEI,oCAAoCkoD,KAAK9pD,KAC3C/xD,EAAQ,CAAC+xD,EAAIA,IAGf,IAAIrmE,EAAMhyB,KAAKihJ,cAAc36G,GAM7B,OAJItU,EAAIzT,MAAMq7E,KAAO5nE,EAAIlC,IAAI8pE,MAC3BtzD,EAAM9yB,UAGD8yB,CACT,EAUA26G,cAAe,SAAU36G,GAEvB,IAAI87G,EADJ97G,EAAQ,CAACtmC,KAAKk6F,YAAY5zD,EAAM,IAAKtmC,KAAKk6F,YAAY5zD,EAAM,KAGxDA,EAAM,GAAGszD,KAAOtzD,EAAM,GAAGszD,OAC3BwoD,GAAW,EACX97G,EAAM9yB,WAGR,IAAI6uI,EAAS77I,KAAKy+B,MAAMqB,EAAM,GAAGszD,KAAOumD,GAAqB35I,KAAKy+B,MAAMqB,EAAM,GAAGszD,KAAOumD,GAAqB,EASzGhmD,EAAO,IAAI2mD,KAAKx6G,EAAM,GAAGszD,MACzB0oD,EAAenoD,EAAKwmD,UACpB4B,EAAaj8G,EAAM,GAAG6zD,KAAKwmD,UAG/B,GAFAxmD,EAAK4mD,QAAQuB,EAAeD,EAAS,GAEjCloD,EAAKwmD,YAAc4B,EAAY,CACjC,IAAI5hI,EAAOw5E,EAAK0mD,UAAYv6G,EAAM,GAAGszD,KAAO,EAAI,GAAK,EAErD,MAAOO,EAAKwmD,YAAc4B,IAAepoD,EAAK0mD,UAAYv6G,EAAM,GAAGszD,MAAQj5E,EAAO,EAChF0hI,GAAU1hI,EACVw5E,EAAK4mD,QAAQuB,EAAeD,EAAS,EAEzC,CAEA,IAAIlB,EAAQ36I,KAAKy+B,OAAOo9G,EAAS/7G,EAAM,GAAGs0D,IAAM,GAAK,GACjD+mD,EAAUS,EAAoB,EAARjB,EAAYA,EAAQ,EAE9C,OADAiB,GAAY97G,EAAM9yB,UACX,CACL8yB,MAAO,CAACA,EAAM,GAAG2zD,aAAc3zD,EAAM,GAAG2zD,cACxC17E,MAAO+nB,EAAM,GACbxW,IAAKwW,EAAM,GACX+7G,OAAQA,EACRlB,MAAOA,EAEPQ,QAASA,EACTnlD,MAAOl2D,EAAM,GAAGs0D,IAChB2B,MAAOj2D,EAAM,GAAGs0D,IAEpB,EAWAsnD,sBAAuB,SAAUP,EAAS/mD,EAAKt0D,GAC7C,IAAIk8G,EAAYxiJ,KAAKihJ,cAAc36G,GAEnC,GAAIq7G,EAAUa,EAAUrB,OAAqB,IAAZQ,GAAiB/mD,EAAM4nD,EAAUhmD,OAASmlD,IAAYa,EAAUrB,OAASvmD,EAAM4nD,EAAUjmD,MACxH,OAAO,EAGT,IAAIkmD,EAAyB,GAAfd,EAAU,GAASa,EAAUhmD,MAAQ5B,EAC/CT,EAAO,IAAI2mD,KAAK0B,EAAUjkI,MAAMq7E,MAEpC,OADAO,EAAK4mD,QAAQyB,EAAUjkI,MAAMkgB,EAAIgkH,GAC1BziJ,KAAKk6F,YAAYC,EAC1B,GAEFimD,EAASvmI,WAAaumI,EAASl+I,UAAU2X,WACzCumI,EAAS5pG,kBAAoB4pG,EAASl+I,UAAUs0C,kBAEhD4pG,EAASh+I,OAAS,SAAUC,EAASC,GACnC,IAAIogJ,EAAe,GAYnB,OAXArgJ,EAAQ4B,cAAc,YAAY,SAAU60F,GAC1C,IAAI51E,EAAW,IAAIk9H,EAAStnD,EAAez2F,EAASC,GACpDogJ,EAAa1hJ,KAAKkiB,GAClB41E,EAAc5zF,iBAAmBge,CACnC,IACA7gB,EAAQ4gF,YAAW,SAAU0/D,GACoB,aAA3CA,EAAez/I,IAAI,sBAErBy/I,EAAez9I,iBAAmBw9I,EAAaC,EAAez/I,IAAI,kBAAoB,GAE1F,IACOw/I,CACT,EASA/tG,EAAiBrzC,SAAS,WAAY8+I,GACtC,IAAIj9I,EAAWi9I,EACfh9I,EAAOvB,QAAUsB,C,wBCrYjB,IAAIrB,EAASL,EAAQ,OAEjB82H,EAAiB92H,EAAQ,OAEzBq/B,EAAUr/B,EAAQ,MAElB6mG,EAAkBxnE,EAAQwnE,gBAC1Bs6C,EAAiB9hH,EAAQ8hH,eACzBjxC,EAAmB7wE,EAAQ6wE,iBAC3BkxC,EAAgBtqB,EAAehxH,OAAO,CACxC7E,KAAM,WAKNwC,iBAAkB,KAClBmJ,cAAe,CACbC,OAAQ,EACRC,EAAG,EACH6c,KAAM,GACNC,IAAK,GACL6wE,SAAU,GAEVtjC,OAAQ,aAERvoC,UAAW,CACT3F,MAAM,EACNmB,UAAW,CACTtf,MAAO,OACPhB,MAAO,EACP7I,KAAM,UAIViM,UAAW,CACToL,OAAQ,CACNxN,MAAO,OACPyN,YAAa,EACbiB,YAAa,SAIjBmhF,SAAU,CACR1xE,MAAM,EAENqvE,SAAU,EAEVrzF,SAAU,QACVoxD,OAAQ,MAER1R,QAAS,KACT75C,MAAO,QAGTkvF,WAAY,CACV/wE,MAAM,EAENhkB,SAAU,QACVoxD,OAAQ,EAERoiB,MAAO,SAEP9zB,QAAS,KACTztB,UAAW,KACXpsB,MAAO,QAGT0uF,UAAW,CACTvwE,MAAM,EAENhkB,SAAU,KACVoxD,OAAQ,GACRn/B,UAAW,KACXpsB,MAAO,OACP6kC,WAAY,aACZD,WAAY,SACZvgB,SAAU,KAOdvH,KAAM,SAAUxb,EAAQoJ,EAAa5U,EAAS8kH,GAC5C,IAAIC,EAAsB9e,EAAgBz6F,GAC1Cg1I,EAAcjzI,WAAW5P,KAAM,OAAQ6P,WACvCw3G,EAA8Bx5G,EAAQu5G,EACxC,EAKA5xF,YAAa,SAAU3nB,EAAQs5G,GAC7B07B,EAAcjzI,WAAW5P,KAAM,cAAe6P,WAC9Cw3G,EAA8BrnH,KAAK6N,OAAQA,EAC7C,IAGF,SAASw5G,EAA8BvxG,EAAQwxG,GAE7C,IAAIprB,EAAWpmF,EAAOomF,SAEjBp6F,EAAO6Q,QAAQupF,GAEW,IAApBA,EAAS/nF,SAClB+nF,EAAS,GAAKA,EAAS,IAFvBA,EAAWpmF,EAAOomF,SAAW,CAACA,EAAUA,GAK1C,IAAI0V,EAAa9vG,EAAO41B,IAAI,CAAC,EAAG,IAAI,SAAUorH,GAQ5C,OAJIF,EAAet7B,EAAKw7B,KACtB5mD,EAAS4mD,GAAS,QAGM,MAAnB5mD,EAAS4mD,IAAsC,SAApB5mD,EAAS4mD,EAC7C,IACAnxC,EAAiB77F,EAAQwxG,EAAK,CAC5B5kH,KAAM,MACNkvG,WAAYA,GAEhB,CAEA,IAAIzuG,EAAW0/I,EACfz/I,EAAOvB,QAAUsB,C,wBC7HjB,IAAIrB,EAASL,EAAQ,OAErB,SAAS0B,EAASL,GAChB,IAAI4H,EAAO5H,EAASgO,UAChB0xI,EAAY1/I,EAASk2F,eACzB,MAAO,CACLl2F,SAAU,CACRJ,KAAM,WACNuJ,EAAGvB,EAAKuB,EACRC,EAAGxB,EAAKwB,EACRX,MAAOb,EAAKa,MACZS,OAAQtB,EAAKsB,OACb+2I,UAAWjgJ,EAAS22F,eACpBupD,WAAYlgJ,EAAS62F,gBACrB6oD,UAAW,CACTjkI,MAAOikI,EAAUjkI,MACjBuR,IAAK0yH,EAAU1yH,IACfqxH,MAAOqB,EAAUrB,MACjB8B,SAAUT,EAAUH,SAGxB//I,IAAK,CACHqG,MAAO7G,EAAO2B,KAAKX,EAASiD,YAAajD,IAG/C,CAEAM,EAAOvB,QAAUsB,C,wBC3BjB,IAAIrB,EAASL,EAAQ,OAEjB02H,EAAO12H,EAAQ,OAYfyhJ,EAAS,SAAUn6I,EAAKtC,EAAO2xH,EAAalhF,EAAUxwC,GACxDyxH,EAAKxgH,KAAK3X,KAAM+I,EAAKtC,EAAO2xH,GAU5Bp4H,KAAK0C,KAAOw0C,GAAY,QASxBl3C,KAAK0G,SAAWA,GAAY,QAC9B,EAEAw8I,EAAOhhJ,UAAY,CACjBC,YAAa+gJ,EAKb5yI,MAAO,EAMP8qC,QAAQ,EAMRnlB,MAAO,KACPntB,aAAc,WACZ,IAAIpC,EAAW1G,KAAK0G,SACpB,MAAoB,QAAbA,GAAmC,WAAbA,CAC/B,EAUAo0C,gBAAiB,SAAU4hD,GACzB,IAAIyG,EAAMnjG,KAAK0c,YAIf,OAHAymF,EAAI,GAAKnjG,KAAKmT,cAAcgwF,EAAI,IAChCA,EAAI,GAAKnjG,KAAKmT,cAAcgwF,EAAI,IAChCzG,GAAOyG,EAAI,GAAKA,EAAI,IAAMA,EAAI3vF,UACvB2vF,CACT,EACAlwF,aAAc,WACZjT,KAAK6Q,KAAKoC,cACZ,EAQAosC,eAAgB,SAAU56C,GACxB,GAAkB,aAAdzE,KAAK0C,KAAqB,CAC5B,IAAI0oF,EAAgBprF,KAAKwwF,mBACzB,MAAgC,oBAAlBpF,IAAiCA,EAAc3mF,EAAKzE,KAAKyG,MAAMw9E,SAASx/E,KAASA,GAAO2mF,EAAgB,EACxH,CACF,EAKAllF,YAAa,SAAUJ,EAAO81I,GAC5B,OAAO57I,KAAKsvF,YAAYtvF,KAAKs9G,aAAax3G,EAAmB,MAAb9F,KAAK+I,IAAc,EAAI,IAAK6yI,EAC9E,EAQAt+B,aAAc,KAQdnqG,cAAe,MAEjBrR,EAAO6rB,SAASu1H,EAAQ/qB,GACxB,IAAIh1H,EAAW+/I,EACf9/I,EAAOvB,QAAUsB,C,wBCtHjB,IAAIrB,EAASL,EAAQ,OAEjB82H,EAAiB92H,EAAQ,OAEzB0hJ,EAAmB1hJ,EAAQ,OAE3B2hJ,EAAuB3hJ,EAAQ,OAE/B4hJ,EAAY9qB,EAAehxH,OAAO,CACpC7E,KAAM,kBAKN+Q,KAAM,KAKN4V,KAAM,WACJg6H,EAAUzzI,WAAW5P,KAAM,OAAQ6P,WACnC7P,KAAK2/I,YACP,EAKAnqH,YAAa,WACX6tH,EAAUzzI,WAAW5P,KAAM,cAAe6P,WAC1C7P,KAAK2/I,YACP,EAKA2D,YAAa,WACXD,EAAUzzI,WAAW5P,KAAM,cAAe6P,WAC1C7P,KAAK2/I,YACP,EAMA5yD,iBAAkB,WAChB,OAAO/sF,KAAKqC,QAAQg1C,gBAAgB,CAClCnzC,SAAU,OACVoM,MAAOtQ,KAAK6N,OAAO01I,UACnBl9H,GAAIrmB,KAAK6N,OAAO21I,SACf,EACL,IAGF,SAASC,EAAY9sF,EAAS9oD,GAE5B,OAAOA,EAAOnL,OAASmL,EAAOjN,KAAO,WAAa,QACpD,CAEAkB,EAAOqwF,MAAMkxD,EAAUnhJ,UAAWkhJ,GAClC,IAAIM,EAAc,CAIhBz1I,OAAQ,GAEVk1I,EAAiB,IAAKE,EAAWI,EAAaC,GAC9CP,EAAiB,IAAKE,EAAWI,EAAaC,GAC9C,IAAIvgJ,EAAWkgJ,EACfjgJ,EAAOvB,QAAUsB,C,iCCpEjB,IAAIrB,EAASL,EAAQ,OAOrB,SAASkiJ,EAAc56I,GACrB,OAAO/I,KAAK4jJ,MAAM76I,EACpB,CAOA,IAAI86I,EAAY,SAAUrgJ,GACxBxD,KAAK4jJ,MAAQ,CAAC,EACd5jJ,KAAK8jJ,SAAW,GAKhB9jJ,KAAKwD,KAAOA,GAAQ,EACtB,EAEAqgJ,EAAU3hJ,UAAY,CACpBC,YAAa0hJ,EACbnhJ,KAAM,YAONqkC,QAAS,SAAUh+B,GACjB,OAAO/I,KAAK4jJ,MAAM76I,EACpB,EAMA+4E,QAAS,WACP,OAAOhgF,EAAO41B,IAAI13B,KAAK8jJ,SAAUH,EAAe3jJ,KAClD,EAKAo/C,eAAgB,SAAUg/F,GAExB,OADAA,EAAYA,EAAU2F,cACfjiJ,EAAOywD,OAAOvyD,KAAK8hF,WAAW,SAAUruE,GAC7C,OAAOA,EAAKhN,MAAM/D,OAAS07I,CAC7B,GACF,EAMA4F,QAAS,SAAUvwI,GACjB,IAAI1K,EAAM0K,EAAK1K,IACf/I,KAAK4jJ,MAAM76I,GAAO0K,EAElBzT,KAAK8jJ,SAAS9iJ,KAAK+H,EACrB,EAOAqK,YAAa,SAAU+K,GACrB,OAAOne,KAAKikJ,kBAAkB9lI,EAAK,cACrC,EAOAmxE,YAAa,SAAUnxE,GACrB,OAAOne,KAAKikJ,kBAAkB9lI,EAAK,cACrC,EACA8lI,kBAAmB,SAAUC,EAAO5/I,GAIlC,IAHA,IAAI6/I,EAAUnkJ,KAAK8jJ,SACf/wI,EAASmxI,aAAiB7kH,MAAQ,GAAK,CAAC,EAEnCppB,EAAI,EAAGA,EAAIkuI,EAAQhwI,OAAQ8B,IAAK,CACvC,IAAIlN,EAAMo7I,EAAQluI,GACdxC,EAAOzT,KAAK4jJ,MAAM76I,GACtBgK,EAAOhK,GAAO0K,EAAKnP,GAAQ4/I,EAAMn7I,GACnC,CAEA,OAAOgK,CACT,GAEF,IAAI5P,EAAW0gJ,EACfzgJ,EAAOvB,QAAUsB,C,wBCnGjB,IAAIrB,EAASL,EAAQ,OAEjBoiJ,EAAYpiJ,EAAQ,OAExB,SAAS2iJ,EAAY5gJ,GACnBqgJ,EAAUlsI,KAAK3X,KAAMwD,EACvB,CAEA4gJ,EAAYliJ,UAAY,CACtBC,YAAaiiJ,EACb1hJ,KAAM,cAMNmX,WAAY,CAAC,IAAK,KAOlBhR,YAAa,WACX,OAAO7I,KAAKo/C,eAAe,WAAW,IAAMp/C,KAAKo/C,eAAe,QAAQ,IAAMp/C,KAAK+mC,QAAQ,IAC7F,EAOAwmB,aAAc,SAAUznD,GACtB,IAAIu+I,EAAQrkJ,KAAK+mC,QAAQ,KACrBu9G,EAAQtkJ,KAAK+mC,QAAQ,KACzB,OAAOs9G,EAAMvnH,QAAQunH,EAAM/mC,aAAax3G,EAAM,MAAQw+I,EAAMxnH,QAAQwnH,EAAMhnC,aAAax3G,EAAM,IAC/F,EAOAm4E,YAAa,SAAUr9E,GACrB,OAAOZ,KAAK+mC,QAAQ,KAAKk3C,YAAYr9E,EAAK,KAAOZ,KAAK+mC,QAAQ,KAAKk3C,YAAYr9E,EAAK,GACtF,EAOAmF,YAAa,SAAUnF,EAAMg7I,GAC3B,IAAI90G,EAAQ9mC,KAAK+mC,QAAQ,KACrBC,EAAQhnC,KAAK+mC,QAAQ,KACzB,MAAO,CAACD,EAAM3zB,cAAc2zB,EAAM1zB,YAAYxS,EAAK,GAAIg7I,IAAS50G,EAAM7zB,cAAc6zB,EAAM5zB,YAAYxS,EAAK,GAAIg7I,IACjH,EAOA11I,YAAa,SAAUJ,EAAO81I,GAC5B,IAAI90G,EAAQ9mC,KAAK+mC,QAAQ,KACrBC,EAAQhnC,KAAK+mC,QAAQ,KACzB,MAAO,CAACD,EAAMwoD,YAAYxoD,EAAMw2E,aAAax3G,EAAM,IAAK81I,GAAQ50G,EAAMsoD,YAAYtoD,EAAMs2E,aAAax3G,EAAM,IAAK81I,GAClH,EAMA3oI,aAAc,SAAUQ,GACtB,OAAOzT,KAAK+mC,QAAqB,MAAbtzB,EAAK1K,IAAc,IAAM,IAC/C,GAEFjH,EAAO6rB,SAASy2H,EAAaP,GAC7B,IAAI1gJ,EAAWihJ,EACfhhJ,EAAOvB,QAAUsB,C,iCC/EjB,IAAIuE,EAAUjG,EAAQ,OAIlBK,GAFU4F,EAAQC,QAETlG,EAAQ,QAEjBuiE,EAAeviE,EAAQ,OAEvBq/B,EAAUr/B,EAAQ,MAElBwsB,EAAgB6S,EAAQ7S,cAExBy1D,EAAajiF,EAAQ,MAErB2iJ,EAAc3iJ,EAAQ,OAEtByhJ,EAASzhJ,EAAQ,OAEjBkzC,EAAmBlzC,EAAQ,OAE/BA,EAAQ,MAQR,IAAIe,EAAOV,EAAOU,KACdy8I,EAAkBv7D,EAAWu7D,gBAC7BN,EAAkBj7D,EAAWi7D,gBAMjC,SAAS4F,EAAoB36F,EAAWkjC,EAAWzqF,GACjD,OAAOunD,EAAUmjC,qBAAuBD,CAC1C,CAEA,SAAS03D,EAAet1F,EAAU1C,GAChC,IAAIi4F,EAAgBj4F,EAAShmD,KAAK0L,GAAK,IACnCwyI,EAAcx1F,EAASy1F,QACvBC,EAAcF,EAAYn5I,MAC1Bs5I,EAAeH,EAAY14I,OAC3B84I,EAAaF,EAAcp+I,KAAK0sB,IAAIuxH,GAAiBI,EAAer+I,KAAK4sB,IAAIqxH,GAC7EM,EAAcH,EAAcp+I,KAAK4sB,IAAIqxH,GAAiBI,EAAer+I,KAAK0sB,IAAIuxH,GAC9EO,EAAc,IAAIhhF,EAAa0gF,EAAYz4I,EAAGy4I,EAAYx4I,EAAG44I,EAAYC,GAC7E,OAAOC,CACT,CAEA,SAASC,EAAkBxxI,GACzB,IAGI/I,EAHAk/C,EAAYn2C,EAAKwiB,MACjBsvD,EAAS37B,EAAU47B,qBACnB0/D,EAAiBt7F,EAAUj9C,SAAS,aAEpCkmB,EAAO,EACPsyH,EAAa5/D,EAAOpxE,OAEpBgxI,EAAa,KAEftyH,EAAOrsB,KAAK+R,KAAK4sI,EAAa,KAGhC,IAAK,IAAIlvI,EAAI,EAAGA,EAAIkvI,EAAYlvI,GAAK4c,EACnC,IAAKpf,EAAK4rC,eAAeppC,GAAI,CAC3B,IAAImvI,EAAsBF,EAAepkF,YAAYykB,EAAOtvE,IACxDovI,EAAab,EAAeY,EAAqBF,EAAehiJ,IAAI,WAAa,GACrFwH,EAAOA,EAAK60I,MAAM8F,GAAc36I,EAAO26I,CACzC,CAGF,OAAO36I,CACT,CAEA,SAAS46I,EAAKx4D,EAAWzqF,EAASC,GAKhCtC,KAAKulJ,WAAa,CAAC,EAMnBvlJ,KAAKwlJ,YAAc,GAMnBxlJ,KAAKylJ,SAAW,CAAC,EAMjBzlJ,KAAK0lJ,UAAY,GAEjB1lJ,KAAK2lJ,eAAe74D,EAAWzqF,EAASC,GAExCtC,KAAKi2B,MAAQ62D,CACf,CAEA,IAAI84D,EAAYN,EAAKpjJ,UA8BrB,SAAS2jJ,EAAcC,EAAS3sG,EAAc1lC,GAI5C,IAAIsyI,EAAOD,EAAQ3sG,GAEnB,GAAK1lC,EAAK2nC,OAAV,CAIA,IAAIi1C,EAAkB58E,EAAK48E,gBAE3B,GAAuB,MAAnBA,EAAJ,CAUA,IAAK,IAAI5rF,KAAOshJ,EACd,GAAIA,EAAKnkJ,eAAe6C,GAAM,CACxBq2E,EAAYirE,EAAKthJ,GAErB,GAAIq2E,IAAckrE,EAAmBlrE,GAAY,CAC/CuV,GAAmB5rF,EACnB,KACF,CACF,CAGqB,MAAnB4rF,IACF58E,EAAK2nC,QAAS,GAGhB3nC,EAAK48E,gBAAkBA,CAjBvB,KARA,CACE,IAAIvV,EAAYirE,EAAK11D,GAEjBvV,GAAakrE,EAAmBlrE,KAClCrnE,EAAK2nC,QAAS,EAIlB,CAZA,CA8BF,CAEA,SAAS4qG,EAAmBvyI,GAC1B,MAAqB,aAAdA,EAAK/Q,MAAqC,SAAd+Q,EAAK/Q,OAAoBu8I,EAAgBxrI,EAC9E,CA+VA,SAASwyI,EAAoBxyI,EAAMyyI,GACjC,IAAI1uE,EAAa/jE,EAAKiJ,YAClBypI,EAAgB3uE,EAAW,GAAKA,EAAW,GAE/C/jE,EAAKN,cAA6B,MAAbM,EAAK1K,IAAc,SAAUJ,GAChD,OAAOA,EAAQu9I,CACjB,EAAI,SAAUv9I,GACZ,OAAOw9I,EAAgBx9I,EAAQu9I,CACjC,EACAzyI,EAAK6pG,aAA4B,MAAb7pG,EAAK1K,IAAc,SAAUJ,GAC/C,OAAOA,EAAQu9I,CACjB,EAAI,SAAUv9I,GACZ,OAAOw9I,EAAgBx9I,EAAQu9I,CACjC,CACF,CApbAN,EAAUljJ,KAAO,OACjBkjJ,EAAUjkE,oBAAqB,EAE/BikE,EAAU90I,QAAU,WAClB,OAAO9Q,KAAKw8I,KACd,EAEAoJ,EAAU/iJ,OAAS,SAAUR,EAASC,GACpC,IAAIwjJ,EAAU9lJ,KAAKylJ,SAEnBzlJ,KAAKomJ,aAAa/jJ,EAASrC,KAAKi2B,OAEhCzzB,EAAKsjJ,EAAQ75I,GAAG,SAAU66B,GACxB63G,EAAgB73G,EAAMrgC,MAAOqgC,EAAM7Q,MACrC,IACAzzB,EAAKsjJ,EAAQ55I,GAAG,SAAU86B,GACxB23G,EAAgB33G,EAAMvgC,MAAOugC,EAAM/Q,MACrC,IACAzzB,EAAKsjJ,EAAQ75I,GAAG,SAAU66B,GACxB++G,EAAcC,EAAS,IAAKh/G,EAC9B,IACAtkC,EAAKsjJ,EAAQ55I,GAAG,SAAU86B,GACxB6+G,EAAcC,EAAS,IAAK9+G,EAC9B,IAGAhnC,KAAKqmJ,OAAOrmJ,KAAKi2B,MAAO3zB,EAC1B,EAoDAsjJ,EAAUS,OAAS,SAAUv5D,EAAWxqF,EAAKgkJ,GAC3C,IAAIp5D,EAAWj/D,EAAc6+D,EAAU5+D,qBAAsB,CAC3D3iB,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,cAEdlR,KAAKw8I,MAAQtvD,EACb,IAAIq5D,EAAWvmJ,KAAK0lJ,UAwBpB,SAASc,IACPhkJ,EAAK+jJ,GAAU,SAAU9yI,GACvB,IAAI3K,EAAe2K,EAAK3K,eACpBsT,EAAStT,EAAe,CAAC,EAAGokF,EAAS3hF,OAAS,CAAC,EAAG2hF,EAASlhF,QAC3DvH,EAAMgP,EAAK4oC,QAAU,EAAI,EAC7B5oC,EAAKgiH,UAAUr5G,EAAO3X,GAAM2X,EAAO,EAAI3X,IACvCwhJ,EAAoBxyI,EAAM3K,EAAeokF,EAASjhF,EAAIihF,EAAShhF,EACjE,GACF,CA/BAs6I,KAEKF,GAAsBx5D,EAAU5pF,IAAI,kBACvCV,EAAK+jJ,GAAU,SAAU9yI,GACvB,IAAKA,EAAKwiB,MAAM/yB,IAAI,oBAAqB,CACvC,IAAIujJ,EAAiBxB,EAAkBxxI,GAEvC,GAAIgzI,EAAgB,CAClB,IAAI19I,EAAM0K,EAAK3K,eAAiB,SAAW,QACvCgvD,EAASrkD,EAAKwiB,MAAM/yB,IAAI,oBAC5BgqF,EAASnkF,IAAQ09I,EAAe19I,GAAO+uD,EAEjB,QAAlBrkD,EAAK/M,SACPwmF,EAAShhF,GAAKu6I,EAAez6I,OAAS8rD,EACX,SAAlBrkD,EAAK/M,WACdwmF,EAASjhF,GAAKw6I,EAAel7I,MAAQusD,EAEzC,CACF,CACF,IACA0uF,IAYJ,EAOAZ,EAAU7+G,QAAU,SAAUmQ,EAAUyhC,GACtC,IAAI+tE,EAAe1mJ,KAAKylJ,SAASvuG,GAEjC,GAAoB,MAAhBwvG,EAAsB,CACxB,GAAiB,MAAb/tE,EAEF,IAAK,IAAIn1E,KAAQkjJ,EACf,GAAIA,EAAa9kJ,eAAe4B,GAC9B,OAAOkjJ,EAAaljJ,GAK1B,OAAOkjJ,EAAa/tE,EACtB,CACF,EAMAitE,EAAU9jE,QAAU,WAClB,OAAO9hF,KAAK0lJ,UAAU1iJ,OACxB,EAaA4iJ,EAAUtsE,aAAe,SAAU11B,EAAYC,GAC7C,GAAkB,MAAdD,GAAoC,MAAdC,EAAoB,CAC5C,IAAIliD,EAAM,IAAMiiD,EAAa,IAAMC,EACnC,OAAO7jD,KAAKulJ,WAAW5jJ,EACzB,CAEIG,EAAOkgB,SAAS4hC,KAClBC,EAAaD,EAAWC,WACxBD,EAAaA,EAAWA,YAI1B,IAAK,IAAI3tC,EAAI,EAAG0wI,EAAY3mJ,KAAKwlJ,YAAavvI,EAAI0wI,EAAUxyI,OAAQ8B,IAClE,GAAI0wI,EAAU1wI,GAAG8wB,QAAQ,KAAKz2B,QAAUszC,GAAc+iG,EAAU1wI,GAAG8wB,QAAQ,KAAKz2B,QAAUuzC,EACxF,OAAO8iG,EAAU1wI,EAGvB,EAEA2vI,EAAUjpC,cAAgB,WACxB,OAAO38G,KAAKwlJ,YAAYxiJ,OAC1B,EAOA4iJ,EAAUvI,eAAiB,SAAUh7I,EAAS25E,EAAQjuE,GACpD,IAAI+H,EAAS9V,KAAK4mJ,mBAAmBvkJ,EAAS25E,GAE9C,OAAOlmE,EAAOnF,UAAYmF,EAAOnF,UAAU5K,YAAYgI,GAAS+H,EAAOrC,KAAOqC,EAAOrC,KAAKN,cAAc2C,EAAOrC,KAAKL,YAAYrF,IAAU,IAC5I,EAOA63I,EAAUtI,iBAAmB,SAAUj7I,EAAS25E,EAAQjuE,GACtD,IAAI+H,EAAS9V,KAAK4mJ,mBAAmBvkJ,EAAS25E,GAE9C,OAAOlmE,EAAOnF,UAAYmF,EAAOnF,UAAUzK,YAAY6H,GAAS+H,EAAOrC,KAAOqC,EAAOrC,KAAK67E,YAAYx5E,EAAOrC,KAAK6pG,aAAavvG,IAAU,IAC3I,EAMA63I,EAAUgB,mBAAqB,SAAUvkJ,EAAS25E,GAChD,IAKIrrE,EACA8C,EANApP,EAAc23E,EAAO33E,YACrBizC,EAAa0kC,EAAO1kC,YAAcjzC,GAAeA,EAAYwiJ,uBAAuB,SAAS,GAC7FtvG,EAAaykC,EAAOzkC,YAAclzC,GAAeA,EAAYwiJ,uBAAuB,SAAS,GAC7F/5D,EAAY9Q,EAAO8Q,UACnBg6D,EAAa9mJ,KAAKwlJ,YAItB,GAAInhJ,EACFsM,EAAYtM,EAAYa,iBACxBpD,EAAOqa,QAAQ2qI,EAAYn2I,GAAa,IAAMA,EAAY,WACrD,GAAI2mC,GAAcC,EACvB5mC,EAAY3Q,KAAKs5E,aAAahiC,EAAWwoB,eAAgBvoB,EAAWuoB,qBAC/D,GAAIxoB,EACT7jC,EAAOzT,KAAK+mC,QAAQ,IAAKuQ,EAAWwoB,qBAC/B,GAAIvoB,EACT9jC,EAAOzT,KAAK+mC,QAAQ,IAAKwQ,EAAWuoB,qBAEjC,GAAIgtB,EAAW,CAChB,IAAIj8E,EAAOi8E,EAAU5nF,iBAEjB2L,IAAS7Q,OACX2Q,EAAY3Q,KAAKwlJ,YAAY,GAEjC,CAEF,MAAO,CACL70I,UAAWA,EACX8C,KAAMA,EAEV,EAOAmyI,EAAUr4F,aAAe,SAAUznD,GACjC,IAAI6C,EAAQ3I,KAAKwlJ,YAAY,GAE7B,GAAI78I,EACF,OAAOA,EAAM4kD,aAAaznD,EAE9B,EAOA8/I,EAAUD,eAAiB,SAAU74D,EAAWzqF,EAASC,GACvD,IAAIykJ,EAAmB,CACrB37H,MAAM,EACNE,OAAO,EACPD,KAAK,EACLE,QAAQ,GAENu6H,EAAU,CACZ75I,EAAG,CAAC,EACJC,EAAG,CAAC,GAEF86I,EAAY,CACd/6I,EAAG,EACHC,EAAG,GAML,GAHA7J,EAAQ4B,cAAc,QAASgjJ,EAAkB,KAAMjnJ,MACvDqC,EAAQ4B,cAAc,QAASgjJ,EAAkB,KAAMjnJ,OAElDgnJ,EAAU/6I,IAAM+6I,EAAU96I,EAI7B,OAFAlM,KAAKylJ,SAAW,CAAC,OACjBzlJ,KAAK0lJ,UAAY,IAqBnB,SAASuB,EAAkB/vG,GACzB,OAAO,SAAU0S,EAAWnlD,GAC1B,GAAK8/I,EAAoB36F,EAAWkjC,EAAWzqF,GAA/C,CAIA,IAAI4tF,EAAermC,EAAU1mD,IAAI,YAEhB,MAAbg0C,EAEmB,QAAjB+4C,GAA2C,WAAjBA,IAE5BA,EAAe,SAEX82D,EAAiB92D,KACnBA,EAAgC,QAAjBA,EAAyB,SAAW,QAKlC,SAAjBA,GAA4C,UAAjBA,IAE7BA,EAAe,OAEX82D,EAAiB92D,KACnBA,EAAgC,SAAjBA,EAA0B,QAAU,SAKzD82D,EAAiB92D,IAAgB,EACjC,IAAIx8E,EAAO,IAAIyvI,EAAOhsG,EAAUwsC,EAAW8xC,mBAAmB5rE,GAAY,CAAC,EAAG,GAAIA,EAAU1mD,IAAI,QAAS+sF,GACrGl4C,EAA2B,aAAdtkC,EAAK/Q,KACtB+Q,EAAKsnC,OAAShD,GAAc6R,EAAU1mD,IAAI,eAC1CuQ,EAAK4oC,QAAUuN,EAAU1mD,IAAI,WAC7BuQ,EAAK2nC,OAASwO,EAAU1mD,IAAI,mBAC5BuQ,EAAK48E,gBAAkBzmC,EAAU1mD,IAAI,4BAErC0mD,EAAUn2C,KAAOA,EAEjBA,EAAKwiB,MAAQ2zB,EAEbn2C,EAAK5C,KAAO7Q,KAEZyT,EAAKnD,MAAQ7L,EAEbzE,KAAK0lJ,UAAU1kJ,KAAKyS,GAEpBqyI,EAAQ5uG,GAAUzyC,GAAOgP,EACzBuzI,EAAU9vG,IA7CV,CA8CF,CACF,CApEAl3C,KAAKylJ,SAAWK,EAEhBtjJ,EAAKsjJ,EAAQ75I,GAAG,SAAU66B,EAAO8c,GAC/BphD,EAAKsjJ,EAAQ55I,GAAG,SAAU86B,EAAO6c,GAC/B,IAAIliD,EAAM,IAAMiiD,EAAa,IAAMC,EAC/BlzC,EAAY,IAAIyzI,EAAYziJ,GAChCgP,EAAUE,KAAO7Q,KACjB2Q,EAAUslB,MAAQ62D,EAClB9sF,KAAKulJ,WAAW5jJ,GAAOgP,EAEvB3Q,KAAKwlJ,YAAYxkJ,KAAK2P,GAEtBA,EAAUqzI,QAAQl9G,GAClBn2B,EAAUqzI,QAAQh9G,EACpB,GAAGhnC,KACL,GAAGA,KAsDL,EAQA4lJ,EAAUQ,aAAe,SAAU/jJ,EAASyqF,GA2B1C,SAASo6D,EAAYtmJ,EAAM6S,EAAMpP,GAC/B7B,EAAK6B,EAAYijC,kBAAkB7zB,EAAK1K,MAAM,SAAUA,GACtD0K,EAAKhN,MAAM0gJ,oBAAoBvmJ,EAAMmI,EACvC,GACF,CA7BAjH,EAAOU,KAAKxC,KAAK0lJ,WAAW,SAAUjyI,GACpCA,EAAKhN,MAAMgvH,UAAUlvH,KAAWA,IAClC,IACAlE,EAAQ4gF,YAAW,SAAU5+E,GAC3B,GAAI+iJ,EAAc/iJ,GAAc,CAC9B,IAAI+yC,EAAaiwG,EAAehjJ,EAAahC,GACzCi1C,EAAaF,EAAW,GACxBG,EAAaH,EAAW,GAE5B,IAAKmtG,EAAoBjtG,EAAYw1C,EAAWzqF,KAAakiJ,EAAoBhtG,EAAYu1C,EAAWzqF,GACtG,OAGF,IAAIsO,EAAY3Q,KAAKs5E,aAAahiC,EAAWwoB,eAAgBvoB,EAAWuoB,gBACpEl/D,EAAOyD,EAAYG,UACnBsiC,EAAQn2B,EAAUo2B,QAAQ,KAC1BC,EAAQr2B,EAAUo2B,QAAQ,KAEZ,SAAdnmC,EAAK8B,OACPwkJ,EAAYtmJ,EAAMkmC,EAAOziC,GACzB6iJ,EAAYtmJ,EAAMomC,EAAO3iC,GAE7B,CACF,GAAGrE,KAOL,EAOA4lJ,EAAU5jE,eAAiB,SAAUj5E,GACnC,IAAIq5E,EAAW,GACXC,EAAY,GAOhB,OANA7/E,EAAKxC,KAAK28G,iBAAiB,SAAUhsG,GACnC,IAAI/H,EAAkB,MAAPG,GAAuB,SAARA,EAAiB4H,EAAUo2B,QAAQh+B,GAAO4H,EAAU9H,cAC9EiyE,EAAYnqE,EAAUsC,aAAarK,GACvC9G,EAAOqa,QAAQimE,EAAUx5E,GAAY,GAAKw5E,EAASphF,KAAK4H,GACxD9G,EAAOqa,QAAQkmE,EAAWvH,GAAa,GAAKuH,EAAUrhF,KAAK85E,EAC7D,IACO,CACLsH,SAAUA,EACVC,UAAWA,EAEf,EAsBA,IAAIilE,EAAY,CAAC,QAAS,SAK1B,SAASD,EAAehjJ,EAAahC,GACnC,OAAOP,EAAO41B,IAAI4vH,GAAW,SAAUpwG,GACrC,IAAI0S,EAAYvlD,EAAYwiJ,uBAAuB3vG,GAAU,GAC7D,OAAO0S,CACT,GACF,CAMA,SAASw9F,EAAc/iJ,GACrB,MAA+C,gBAAxCA,EAAYnB,IAAI,mBACzB,CAEAoiJ,EAAKljJ,OAAS,SAAUC,EAASC,GAC/B,IAAIilJ,EAAQ,GAuBZ,OAtBAllJ,EAAQ4B,cAAc,QAAQ,SAAU6oF,EAAWroF,GACjD,IAAIoM,EAAO,IAAIy0I,EAAKx4D,EAAWzqF,EAASC,GACxCuO,EAAKrN,KAAO,QAAUiB,EAGtBoM,EAAKw1I,OAAOv5D,EAAWxqF,GAAK,GAC5BwqF,EAAU5nF,iBAAmB2L,EAC7B02I,EAAMvmJ,KAAK6P,EACb,IAEAxO,EAAQ4gF,YAAW,SAAU5+E,GAC3B,GAAK+iJ,EAAc/iJ,GAAnB,CAIA,IAAI+yC,EAAaiwG,EAAehjJ,EAAahC,GACzCi1C,EAAaF,EAAW,GACxBG,EAAaH,EAAW,GACxB01C,EAAYx1C,EAAWy1C,mBACvBl8E,EAAOi8E,EAAU5nF,iBACrBb,EAAYa,iBAAmB2L,EAAKyoE,aAAahiC,EAAWwoB,eAAgBvoB,EAAWuoB,eAPvF,CAQF,IACOynF,CACT,EAGAjC,EAAKzrI,WAAayrI,EAAKpjJ,UAAU2X,WAAauqI,EAAYliJ,UAAU2X,WACpE86B,EAAiBrzC,SAAS,cAAegkJ,GACzC,IAAIniJ,EAAWmiJ,EACfliJ,EAAOvB,QAAUsB,C,uBCnlBjB1B,EAAQ,OAER,IAAI82H,EAAiB92H,EAAQ,OAIzB0B,EAAWo1H,EAAehxH,OAAO,CACnC7E,KAAM,OACN8E,aAAc,CAAC,QAAS,SACxBk+C,WAAY,MAKZxgD,iBAAkB,KAClBmJ,cAAe,CACbqc,MAAM,EACNpc,OAAQ,EACRC,EAAG,EACH6c,KAAM,MACNC,IAAK,GACLC,MAAO,MACPC,OAAQ,GAERi8H,cAAc,EAGd12H,gBAAiB,gBACjB9W,YAAa,EACbiB,YAAa,UAIjB7X,EAAOvB,QAAUsB,C,wBCjCjB,IAAIrB,EAASL,EAAQ,OAErB,SAASgmJ,EAAgBC,EAAU/jG,GAGjC,OADAA,EAAWA,GAAY,CAAC,EAAG,GACpB7hD,EAAO41B,IAAI,CAAC,IAAK,MAAM,SAAU3uB,EAAKusH,GAC3C,IAAI7hH,EAAOzT,KAAK+mC,QAAQh+B,GACpBoV,EAAMwlC,EAAS2xE,GACfqyB,EAAWD,EAASpyB,GAAU,EAClC,MAAqB,aAAd7hH,EAAK/Q,KAAsB+Q,EAAK+I,eAAiBhW,KAAKiH,IAAIgG,EAAKL,YAAY+K,EAAMwpI,GAAYl0I,EAAKL,YAAY+K,EAAMwpI,GAC7H,GAAG3nJ,KACL,CAEA,SAASmD,EAASL,GAChB,IAAI4H,EAAO5H,EAAS+N,KAAKC,UACzB,MAAO,CACLhO,SAAU,CAERJ,KAAM,cACNuJ,EAAGvB,EAAKuB,EACRC,EAAGxB,EAAKwB,EACRX,MAAOb,EAAKa,MACZS,OAAQtB,EAAKsB,QAEf1J,IAAK,CACHqG,MAAO7G,EAAO2B,KAAKX,EAASiD,YAAajD,GACzCoL,KAAMpM,EAAO2B,KAAKgkJ,EAAiB3kJ,IAGzC,CAEAM,EAAOvB,QAAUsB,C,wBC/BjB,IAAIrB,EAASL,EAAQ,OAEjBuiE,EAAeviE,EAAQ,OAEvBmmJ,EAAenmJ,EAAQ,OAEvBo/B,EAAOp/B,EAAQ,OAEfomJ,EAAYpmJ,EAAQ,OAEpBqmJ,EAAermJ,EAAQ,OAEvBsmJ,EAActmJ,EAAQ,OAEtBumJ,EAAkBvmJ,EAAQ,OAG1BwmJ,EAAc,CAACJ,EAAWC,EAAcC,EAAaC,GAYzD,SAASE,EAAI1kJ,EAAMk0B,EAAKywH,EAASC,EAAchiG,GAC7CvlB,EAAKlpB,KAAK3X,KAAMwD,GAMhBxD,KAAK03B,IAAMA,EACX13B,KAAKqoJ,cAAgBvmJ,EAAO40D,gBAC5B12D,KAAKsoJ,YAAYH,EAASC,EAAchiG,EAC1C,CAwKA,SAASm2F,EAAUpyB,EAAY9nH,EAAS25E,EAAQjuE,GAC9C,IAAIkhG,EAAWjzB,EAAOizB,SAClB5qG,EAAc23E,EAAO33E,YACrBvB,EAAWmsG,EAAWA,EAAS/pG,iBAAmBb,EAAcA,EAAYa,mBAC5Eb,EAAYwiJ,uBAAuB,OAAO,IAAM,CAAC,GAAG3hJ,iBAAmB,KAC3E,OAAOpC,IAAa9C,KAAO8C,EAASqnH,GAAYp8G,GAAS,IAC3D,CA5KAm6I,EAAIhmJ,UAAY,CACdC,YAAa+lJ,EACbxlJ,KAAM,MAMNmX,WAAY,CAAC,MAAO,OAOpB0uI,aAAc,SAAU5/I,GAGtB,IAFA,IAAIumG,EAAUlvG,KAAKkvG,QAEVj5F,EAAI,EAAGA,EAAIi5F,EAAQ/6F,OAAQ8B,IAClC,GAAIi5F,EAAQj5F,GAAG6mB,QAAQn0B,GACrB,OAAO,EAIX,OAAO,CACT,EASA2/I,YAAa,SAAUH,EAASC,EAAchiG,GAE5C,IACEpmD,KAAKkvG,QAAUi5C,EAAUP,EAAaO,GAAW,EACnD,CAAE,MAAOzrH,GACP,KAAM,2BAA6BA,EAAE8rH,OACvC,CAEAJ,EAAeA,GAAgB,CAAC,EAChChiG,EAAUA,GAAW,CAAC,EAItB,IAHA,IAAI8oD,EAAUlvG,KAAKkvG,QACfu5C,EAAa3mJ,EAAO40D,gBAEfzgD,EAAI,EAAGA,EAAIi5F,EAAQ/6F,OAAQ8B,IAAK,CACvC,IAAIqwC,EAAa4oD,EAAQj5F,GAAGzS,KAE5B8iD,EAAaF,EAAQxkD,eAAe0kD,GAAcF,EAAQE,GAAcA,EACxE4oD,EAAQj5F,GAAGzS,KAAO8iD,EAClBmiG,EAAWptI,IAAIirC,EAAY4oD,EAAQj5F,IAEnCjW,KAAK0oJ,YAAYpiG,EAAY4oD,EAAQj5F,GAAG5Q,QAGxC,IAAIsjJ,EAAcP,EAAa9hG,GAE3BqiG,GACFz5C,EAAQj5F,GAAGwmI,YAAYkM,EAAYv9H,KAAMu9H,EAAYt9H,IAAKs9H,EAAYp9I,MAAOo9I,EAAY38I,OAE7F,CAEAhM,KAAK4oJ,YAAcH,EACnBzoJ,KAAKw8I,MAAQ,KACb16I,EAAOU,KAAKylJ,GAAa,SAAUY,GACjCA,EAAQ7oJ,KACV,GAAGA,KACL,EAEAy8I,YAAa,SAAUxwI,EAAGC,EAAGX,EAAOS,GAClC,IAAItB,EAAO1K,KAAK28B,kBAChBjyB,EAAOA,EAAK6Z,QAEZ7Z,EAAKwB,GAAKxB,EAAKwB,EAAIxB,EAAKsB,OACxB,IAAI0wI,EAAgB18I,KAAKo8I,eACzBM,EAAc7/G,UAAYnyB,EAAKiyI,mBAAmB,IAAI34E,EAAa/3D,EAAGC,EAAGX,EAAOS,IAChF0wI,EAAclzD,qBACd,IAAI/iF,EAAQi2I,EAAcj2I,MAC1BA,EAAM,IAAMA,EAAM,GAClBi2I,EAAc31I,kBAEd/G,KAAK48I,kBACP,EAMA91F,UAAW,SAAUtjD,GACnB,OAAOxD,KAAK4oJ,YAAY1lJ,IAAIM,EAC9B,EACAslJ,iBAAkB,SAAUngJ,GAG1B,IAFA,IAAIumG,EAAUlvG,KAAKkvG,QAEVj5F,EAAI,EAAGA,EAAIi5F,EAAQ/6F,OAAQ8B,IAClC,GAAIi5F,EAAQj5F,GAAG6mB,QAAQn0B,GACrB,OAAOumG,EAAQj5F,EAGrB,EAOAyyI,YAAa,SAAUllJ,EAAMulJ,GAC3B/oJ,KAAKqoJ,cAAchtI,IAAI7X,EAAMulJ,EAC/B,EAOAC,YAAa,SAAUxlJ,GACrB,OAAOxD,KAAKqoJ,cAAcnlJ,IAAIM,EAChC,EAEAm5B,gBAAiB,WACf,GAAI38B,KAAKw8I,MACP,OAAOx8I,KAAKw8I,MAMd,IAHA,IAAI9xI,EACAwkG,EAAUlvG,KAAKkvG,QAEVj5F,EAAI,EAAGA,EAAIi5F,EAAQ/6F,OAAQ8B,IAAK,CACvC,IAAIgzI,EAAa/5C,EAAQj5F,GAAG0mB,kBAC5BjyB,EAAOA,GAAQu+I,EAAW1kI,QAC1B7Z,EAAK60I,MAAM0J,EACb,CAGA,OAAOjpJ,KAAKw8I,MAAQ9xI,GAAQ,IAAIs5D,EAAa,EAAG,EAAG,EAAG,EACxD,EAMAj+D,YAAa,SAAUnF,GAMrB,GALoB,kBAATA,IAETA,EAAOZ,KAAKgpJ,YAAYpoJ,IAGtBA,EACF,OAAOigC,EAAK3+B,UAAU6D,YAAY4R,KAAK3X,KAAMY,EAEjD,EAKAy8I,eAAgBv7I,EAAOoF,MAAMq1I,EAAW,eAKxCe,iBAAkBx7I,EAAOoF,MAAMq1I,EAAW,gBAE5Cz6I,EAAO0Y,MAAM0tI,EAAKrnH,GAUlB,IAAI19B,EAAW+kJ,EACf9kJ,EAAOvB,QAAUsB,C,wBCxNjB,IAAIrB,EAASL,EAAQ,OAEjB84C,EAAY94C,EAAQ,OAEpB82H,EAAiB92H,EAAQ,OAEzBsG,EAAQtG,EAAQ,OAEhBynJ,EAAkBznJ,EAAQ,OAE1B+jD,EAAa/jD,EAAQ,OAErB0nJ,EAAW5wB,EAAehxH,OAAO,CACnC7E,KAAM,MAKNwC,iBAAkB,KAClBwgD,WAAY,MACZr8B,KAAM,SAAUxb,GACd0qH,EAAer2H,UAAUmnB,KAAKy5C,MAAM9iE,KAAM6P,WAE1C0qC,EAAUvwB,gBAAgBnc,EAAO8c,MAAO,CAAC,QAC3C,EACAi4C,cAAe,WACb,IAAI/0D,EAAS7N,KAAK6N,OACd+nB,EAAO51B,KACX6N,EAAOqhG,QAAU1pD,EAAWW,iBAAiBt4C,EAAOqhG,QAASrhG,EAAO6pB,IAAK7pB,EAAOu4C,SAChFpmD,KAAKopJ,gBAAkBtnJ,EAAOkhH,OAAOn1G,EAAOqhG,SAAW,IAAI,SAAUm6C,EAAgBC,GAKnF,OAJIA,EAAU9lJ,MACZ6lJ,EAAehuI,IAAIiuI,EAAU9lJ,KAAM,IAAIuE,EAAMuhJ,EAAW1zH,IAGnDyzH,CACT,GAAGvnJ,EAAO40D,iBACV12D,KAAK8lD,kBAAkBj4C,EAAOqhG,QAChC,EACA7gG,cAAe,CACbC,OAAQ,EACRC,EAAG,EACHmc,MAAM,EACNU,KAAM,SACNC,IAAK,SAOL07B,YAAa,IAMbtwC,QAAQ,EAERihB,IAAK,GAGLwvB,eAAgB,KAEhB7hD,OAAQ,KACRE,KAAM,EACN4hD,WAAY,KAEZx8B,MAAO,CACL5Q,OAAQ,CACN2Q,MAAM,EACNne,MAAO,QAET0N,SAAU,CACRyQ,MAAM,EACNne,MAAO,iBAGXoC,UAAW,CACToL,OAAQ,CAENC,YAAa,GACbiB,YAAa,OACb1O,MAAO,QAET0N,SAAU,CAER1N,MAAO,wBAGX2iG,QAAS,IAQX7oD,eAAgB,SAAU7iD,GACxB,OAAOxD,KAAKopJ,gBAAgBlmJ,IAAIM,IAAS,IAAIuE,EAAM,KAAM/H,KAAMA,KAAKqC,QACtE,EAQA4kB,kBAAmB,SAAUzjB,EAAMo8C,GACjC,IAAIw/D,EAAcp/G,KAAKqmD,eAAe7iD,GAClCm1B,EAAYymF,EAAYl8G,IAAI,SAAW08C,EAAS,cAChD/0B,EAAS,CACXrnB,KAAMA,GAGR,MAAyB,oBAAdm1B,GACT9N,EAAO+0B,OAASA,EACTjnB,EAAU9N,IACa,kBAAd8N,EACTA,EAAUvH,QAAQ,MAAe,MAAR5tB,EAAeA,EAAO,SADjD,CAGT,EACA8B,QAAS,SAAUC,GACjBvF,KAAK6N,OAAOtI,KAAOA,CACrB,EACAH,UAAW,SAAUC,GACnBrF,KAAK6N,OAAOxI,OAASA,CACvB,IAEFvD,EAAO0Y,MAAM2uI,EAAUD,GACvB,IAAI/lJ,EAAWgmJ,EACf/lJ,EAAOvB,QAAUsB,C,wBClIjB,IAAI6gE,EAAeviE,EAAQ,OAEvBs/B,EAAOt/B,EAAQ,MAEfk8B,EAAOl8B,EAAQ,OAEfiyF,EAAiBjyF,EAAQ,IAW7B,SAAS8nJ,EAAO/lJ,EAAM67G,EAAYpvE,GAahC,GARAjwC,KAAKwD,KAAOA,EAMZxD,KAAKq/G,WAAaA,EAEbpvE,EAIHA,EAAK,CAACA,EAAG,GAAIA,EAAG,QAJT,CACP,IAAIvlC,EAAO1K,KAAK28B,kBAChBsT,EAAK,CAACvlC,EAAKuB,EAAIvB,EAAKa,MAAQ,EAAGb,EAAKwB,EAAIxB,EAAKsB,OAAS,EACxD,CAQAhM,KAAKqF,OAAS4qC,CAChB,CAEAs5G,EAAOrnJ,UAAY,CACjBC,YAAaonJ,EACbC,WAAY,KAKZ7sH,gBAAiB,WACf,IAAIjyB,EAAO1K,KAAKw8I,MAEhB,GAAI9xI,EACF,OAAOA,EAUT,IAPA,IAAI++I,EAAax7F,OAAOC,UACpB9nD,EAAM,CAACqjJ,EAAYA,GACnBnjJ,EAAM,EAAEmjJ,GAAaA,GACrBC,EAAO,GACPC,EAAO,GACPtqC,EAAar/G,KAAKq/G,WAEbppG,EAAI,EAAGA,EAAIopG,EAAWlrG,OAAQ8B,IAErC,GAA2B,YAAvBopG,EAAWppG,GAAGvT,KAAlB,CAKA,IAAI68G,EAAWF,EAAWppG,GAAGspG,SAC7Bx+E,EAAKK,WAAWm+E,EAAUmqC,EAAMC,GAChChsH,EAAKv3B,IAAIA,EAAKA,EAAKsjJ,GACnB/rH,EAAKr3B,IAAIA,EAAKA,EAAKqjJ,EANnB,CAcF,OAJU,IAAN1zI,IACF7P,EAAI,GAAKA,EAAI,GAAKE,EAAI,GAAKA,EAAI,GAAK,GAG/BtG,KAAKw8I,MAAQ,IAAIx4E,EAAa59D,EAAI,GAAIA,EAAI,GAAIE,EAAI,GAAKF,EAAI,GAAIE,EAAI,GAAKF,EAAI,GACrF,EAMA02B,QAAS,SAAUn0B,GACjB,IAAI+B,EAAO1K,KAAK28B,kBACZ0iF,EAAar/G,KAAKq/G,WAEtB,IAAK30G,EAAKoyB,QAAQn0B,EAAM,GAAIA,EAAM,IAChC,OAAO,EAGTihJ,EAAS,IAAK,IAAI3zI,EAAI,EAAGuY,EAAM6wF,EAAWlrG,OAAQ8B,EAAIuY,EAAKvY,IAEzD,GAA2B,YAAvBopG,EAAWppG,GAAGvT,KAAlB,CAIA,IAAI68G,EAAWF,EAAWppG,GAAGspG,SACzBC,EAAYH,EAAWppG,GAAGupG,UAE9B,GAAI9rB,EAAe52D,QAAQyiF,EAAU52G,EAAM,GAAIA,EAAM,IAAK,CAExD,IAAK,IAAI05C,EAAI,EAAGA,GAAKm9D,EAAYA,EAAUrrG,OAAS,GAAIkuC,IACtD,GAAIqxC,EAAe52D,QAAQ0iF,EAAUn9D,IACnC,SAASunG,EAIb,OAAO,CACT,CAdA,CAiBF,OAAO,CACT,EACAnN,YAAa,SAAUxwI,EAAGC,EAAGX,EAAOS,GAClC,IAAItB,EAAO1K,KAAK28B,kBACZqE,EAASt2B,EAAKa,MAAQb,EAAKsB,OAE1BT,EAEOS,IACVA,EAAST,EAAQy1B,GAFjBz1B,EAAQy1B,EAASh1B,EASnB,IAJA,IAAI8J,EAAS,IAAIkuD,EAAa/3D,EAAGC,EAAGX,EAAOS,GACvC6wB,EAAYnyB,EAAKiyI,mBAAmB7mI,GACpCupG,EAAar/G,KAAKq/G,WAEbppG,EAAI,EAAGA,EAAIopG,EAAWlrG,OAAQ8B,IAErC,GAA2B,YAAvBopG,EAAWppG,GAAGvT,KAAlB,CAOA,IAHA,IAAI68G,EAAWF,EAAWppG,GAAGspG,SACzBC,EAAYH,EAAWppG,GAAGupG,UAErBphG,EAAI,EAAGA,EAAImhG,EAASprG,OAAQiK,IACnCuf,EAAKf,eAAe2iF,EAASnhG,GAAImhG,EAASnhG,GAAIye,GAGhD,IAAK,IAAI06E,EAAI,EAAGA,GAAKiI,EAAYA,EAAUrrG,OAAS,GAAIojG,IACtD,IAASn5F,EAAI,EAAGA,EAAIohG,EAAUjI,GAAGpjG,OAAQiK,IACvCuf,EAAKf,eAAe4iF,EAAUjI,GAAGn5F,GAAIohG,EAAUjI,GAAGn5F,GAAIye,EAX1D,CAgBFnyB,EAAO1K,KAAKw8I,MACZ9xI,EAAKg1B,KAAK5pB,GAEV9V,KAAKqF,OAAS,CAACqF,EAAKuB,EAAIvB,EAAKa,MAAQ,EAAGb,EAAKwB,EAAIxB,EAAKsB,OAAS,EACjE,GAEF,IAAI7I,EAAWomJ,EACfnmJ,EAAOvB,QAAUsB,C,iCC9JjB,IAAIwpB,EAAS,CAAC,CAAC,CAAC,mBAAoB,mBAAoB,CAAC,mBAAoB,mBAAoB,CAAC,mBAAoB,oBAAqB,CAAC,mBAAoB,oBAAqB,CAAC,mBAAoB,qBAE1M,SAASxpB,EAAS8B,GAChB,GAAgB,UAAZA,EAAIyyB,IACN,IAAK,IAAIzhB,EAAI,EAAGuY,EAAMvpB,EAAIiqG,QAAQ/6F,OAAQ8B,EAAIuY,IAAOvY,EACvB,OAAxBhR,EAAIiqG,QAAQj5F,GAAGzS,MACjByB,EAAIiqG,QAAQj5F,GAAGopG,WAAWr+G,KAAK,CAC7B0B,KAAM,UACN68G,SAAU5yF,EAAO,IAK3B,CAEAvpB,EAAOvB,QAAUsB,C,wBCnBjB,IAAIrB,EAASL,EAAQ,OAEjBooJ,EAAc,CAChB,OAAU,CAAC,IAAK,IAChB,gBAAiB,EAAE,GAAI,IACvB,2BAA4B,EAAE,GAAI,KAGpC,SAAS1mJ,EAAS8B,GAChBnD,EAAOU,KAAKyC,EAAIiqG,SAAS,SAAUroD,GACjC,IAAIkiG,EAAWc,EAAYhjG,EAAOrjD,MAElC,GAAIulJ,EAAU,CACZ,IAAI94G,EAAK4W,EAAOxhD,OAChB4qC,EAAG,GAAK84G,EAAS,GACjB94G,EAAG,GAAK84G,EAAS,EACnB,CACF,GACF,CAEA3lJ,EAAOvB,QAAUsB,C,iCCZjB,IARA,IAAIrB,EAASL,EAAQ,OAEjB8nJ,EAAS9nJ,EAAQ,OAGjBsnJ,EAAW,CAAC,IAAK,IACjBp8H,EAAS,CAAC,CAAC,CAAC,EAAG,KAAM,CAAC,EAAG,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,GAAI,CAAC,GAAI,IAAM,CAAC,GAAI,IAAM,CAAC,GAAI,KAAM,CAAC,GAAI,IAAM,CAAC,GAAI,IAAM,CAAC,GAAI,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,MAAO,CAAC,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,OAAQ,CAAC,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,OAAQ,CAAC,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,OAAQ,CAAC,CAAC,EAAG,MAAO,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,MAAO,CAAC,EAAG,OAAQ,CAAC,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,OAAQ,CAAC,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,OAAQ,CAAC,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,OAAQ,CAAC,CAAC,GAAI,IAAK,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,IAAK,CAAC,GAAI,KAAM,CAAC,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,OAAQ,CAAC,CAAC,GAAI,MAAO,CAAC,GAAI,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,MAAO,CAAC,GAAI,OAAQ,CAAC,CAAC,EAAG,KAAM,CAAC,EAAG,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,MAAO,CAAC,EAAG,MAAO,CAAC,EAAG,KAAM,CAAC,EAAG,OAEnzB1W,EAAI,EAAGA,EAAI0W,EAAOxY,OAAQ8B,IACjC,IAAK,IAAIosC,EAAI,EAAGA,EAAI11B,EAAO1W,GAAG9B,OAAQkuC,IACpC11B,EAAO1W,GAAGosC,GAAG,IAAM,KACnB11B,EAAO1W,GAAGosC,GAAG,KAAM,GACnB11B,EAAO1W,GAAGosC,GAAG,IAAM0mG,EAAS,GAC5Bp8H,EAAO1W,GAAGosC,GAAG,IAAM0mG,EAAS,GAIhC,SAAS5lJ,EAAS8B,GACA,UAAZA,EAAIyyB,KACNzyB,EAAIiqG,QAAQluG,KAAK,IAAIuoJ,EAAO,OAAQznJ,EAAO41B,IAAI/K,GAAQ,SAAU4yF,GAC/D,MAAO,CACL78G,KAAM,UACN68G,SAAUA,EAEd,IAAIwpC,GAER,CAEA3lJ,EAAOvB,QAAUsB,C,wBC5BjB,IAAIrB,EAASL,EAAQ,OAEjBqoJ,EAAkB,CACpB,OAAQ,CAAC,GAAI,IAEb,KAAM,CAAC,GAAI,IACX,KAAM,CAAC,GAAI,GACX,KAAM,EAAE,GAAI,IAEZ,KAAM,CAAC,EAAG,IAGZ,SAAS3mJ,EAAS8B,GAChBnD,EAAOU,KAAKyC,EAAIiqG,SAAS,SAAUroD,GACjC,IAAIkjG,EAAWD,EAAgBjjG,EAAOrjD,MAEtC,GAAIumJ,EAAU,CACZ,IAAI95G,EAAK4W,EAAOxhD,OAChB4qC,EAAG,IAAM85G,EAAS,GAAK,KACvB95G,EAAG,KAAO85G,EAAS,GAAK,EAC1B,CACF,GACF,CAEA3mJ,EAAOvB,QAAUsB,C,iCCxBjB,IAAIuE,EAAUjG,EAAQ,OAIlBiC,GAFUgE,EAAQC,QAERlG,EAAQ,QAElBK,EAASL,EAAQ,OAEjBymJ,EAAMzmJ,EAAQ,OAEd8H,EAAS9H,EAAQ,MAEjBk3D,EAAal3D,EAAQ,OAOzB,SAASuoJ,EAAU/6C,EAAU3sG,GAC3B,IAAI4kD,EAAiB+nD,EAAS/rG,IAAI,kBAElC,GAAsB,MAAlBgkD,EAAwB,CAC1B,IAAI+iG,EAAU/iG,EAAe,GACzBgjG,EAAchjG,EAAe,GAE7B7oC,MAAM4rI,EAAQ,KAAO5rI,MAAM4rI,EAAQ,KAAO5rI,MAAM6rI,EAAY,KAAO7rI,MAAM6rI,EAAY,KACvFlqJ,KAAK0hC,gBAAgBuoH,EAAQ,GAAIA,EAAQ,GAAIC,EAAY,GAAKD,EAAQ,GAAIC,EAAY,GAAKD,EAAQ,GAEvG,CAEA,IACIE,EADAz/I,EAAO1K,KAAK28B,kBAEZt3B,EAAS4pG,EAAS/rG,IAAI,gBACtBgL,EAAO+gG,EAAS/rG,IAAI,cACpBq+B,EAAYj/B,EAAI2O,WAChBuwB,EAAal/B,EAAI4O,YACjB61C,EAAckoD,EAAS/rG,IAAI,gBAAkB,IAC7C89B,EAASt2B,EAAKa,MAAQb,EAAKsB,OAAS+6C,EACpCqjG,GAAmB,EAavB,GAXI/kJ,GAAU6I,IACZ7I,EAAS,CAACszD,EAAW1oD,aAAa5K,EAAO,GAAIk8B,GAAYo3B,EAAW1oD,aAAa5K,EAAO,GAAIm8B,IAC5FtzB,EAAOyqD,EAAW1oD,aAAa/B,EAAM1H,KAAKJ,IAAIm7B,EAAWC,IAEpDnjB,MAAMhZ,EAAO,KAAQgZ,MAAMhZ,EAAO,KAAQgZ,MAAMnQ,KACnDk8I,GAAmB,IAMnBA,EAAkB,CACpB,IAAIh7H,EAAW,CAAC,EAEZ4R,EAAS,GAEX5R,EAAS7jB,MAAQ2C,EACjBkhB,EAASpjB,OAASkC,EAAO8yB,IAEzB5R,EAASpjB,OAASkC,EAClBkhB,EAAS7jB,MAAQ2C,EAAO8yB,GAG1B5R,EAASljB,EAAI7G,EAAO,GAAK+pB,EAASpjB,OAAS,EAC3CojB,EAASnjB,EAAI5G,EAAO,GAAK+pB,EAAS7jB,MAAQ,CAC5C,MAEE4+I,EAAkBl7C,EAAS/gF,qBAE3Bi8H,EAAgBnpH,OAASA,EACzB5R,EAAW7lB,EAAO0kB,cAAck8H,EAAiB,CAC/C5+I,MAAOg2B,EACPv1B,OAAQw1B,IAIZxhC,KAAK2hC,YAAYvS,EAASnjB,EAAGmjB,EAASljB,EAAGkjB,EAAS7jB,MAAO6jB,EAASpjB,QAClEhM,KAAKoF,UAAU6pG,EAAS/rG,IAAI,WAC5BlD,KAAKsF,QAAQ2pG,EAAS/rG,IAAI,QAC5B,CAQA,SAASmnJ,EAAaplJ,EAAKgxB,GACzBn0B,EAAOU,KAAKyzB,EAAM/yB,IAAI,aAAa,SAAU6lJ,EAAUvlJ,GACrDyB,EAAIyjJ,YAAYllJ,EAAMulJ,EACxB,GACF,CAEA,IAAIvjG,EAAa,CAEf3rC,WAAYquI,EAAIhmJ,UAAU2X,WAC1BzX,OAAQ,SAAUC,EAASC,GACzB,IAAIgoJ,EAAU,GAEdjoJ,EAAQ4B,cAAc,OAAO,SAAUgrG,EAAUxqG,GAC/C,IAAIjB,EAAOyrG,EAAS/rG,IAAI,OACpBqnJ,EAAU7mJ,EAAQ8mJ,OAAOhnJ,GACzByB,EAAM,IAAIijJ,EAAI1kJ,EAAOiB,EAAKjB,EAAM+mJ,GAAWA,EAAQpC,QAASoC,GAAWA,EAAQnC,aAAcn5C,EAAS/rG,IAAI,YAC9G+B,EAAIS,UAAYupG,EAAS/rG,IAAI,cAC7BonJ,EAAQtpJ,KAAKiE,GACbolJ,EAAaplJ,EAAKgqG,GAClBA,EAAS/pG,iBAAmBD,EAC5BA,EAAIgxB,MAAQg5E,EAEZhqG,EAAIohJ,OAAS2D,EACb/kJ,EAAIohJ,OAAOp3C,EAAU3sG,EACvB,IACAD,EAAQ4gF,YAAW,SAAU5+E,GAC3B,IAAIvB,EAAWuB,EAAYnB,IAAI,oBAE/B,GAAiB,QAAbJ,EAAoB,CACtB,IAAIgjC,EAAWzhC,EAAYnB,IAAI,aAAe,EAC9CmB,EAAYa,iBAAmBolJ,EAAQxkH,EACzC,CACF,IAEA,IAAI2kH,EAAwB,CAAC,EA0B7B,OAzBApoJ,EAAQ+E,iBAAiB,OAAO,SAAU/C,GACxC,IAAKA,EAAY2hD,kBAAmB,CAClC,IAAIqC,EAAUhkD,EAAYwhD,aAC1B4kG,EAAsBpiG,GAAWoiG,EAAsBpiG,IAAY,GACnEoiG,EAAsBpiG,GAASrnD,KAAKqD,EACtC,CACF,IACAvC,EAAOU,KAAKioJ,GAAuB,SAAUriG,EAAWC,GACtD,IAAIkiG,EAAU7mJ,EAAQ8mJ,OAAOniG,GACzBqiG,EAAc5oJ,EAAO41B,IAAI0wB,GAAW,SAAUuiG,GAChD,OAAOA,EAAgBznJ,IAAI,UAC7B,IACI+B,EAAM,IAAIijJ,EAAI7/F,EAASA,EAASkiG,GAAWA,EAAQpC,QAASoC,GAAWA,EAAQnC,aAActmJ,EAAO0hD,SAASknG,IACjHzlJ,EAAIS,UAAY5D,EAAOkS,SAAS8uD,MAAM,KAAMhhE,EAAO41B,IAAI0wB,GAAW,SAAUuiG,GAC1E,OAAOA,EAAgBznJ,IAAI,aAC7B,KACAonJ,EAAQtpJ,KAAKiE,GAEbA,EAAIohJ,OAAS2D,EACb/kJ,EAAIohJ,OAAOj+F,EAAU,GAAI9lD,GACzBR,EAAOU,KAAK4lD,GAAW,SAAUuiG,GAC/BA,EAAgBzlJ,iBAAmBD,EACnColJ,EAAaplJ,EAAK0lJ,EACpB,GACF,IACOL,CACT,EASAnkG,iBAAkB,SAAUykG,EAAiB1kG,EAASE,GAEpD,IAAIykG,GAAcD,GAAmB,IAAI5nJ,QACzCojD,EAAUA,GAAW,CAAC,EACtB,IAAI1uB,EAAMh0B,EAAQ8mJ,OAAOtkG,GACrBiiG,EAAUzwH,GAAOA,EAAIywH,QAEzB,IAAKA,EACH,OAAOyC,EAMT,IAHA,IAAIniG,EAAc3mD,EAAO40D,gBACrBykE,EAAWgtB,EAAQhtB,SAEdllH,EAAI,EAAGA,EAAI40I,EAAW12I,OAAQ8B,IACrCwyC,EAAYptC,IAAIwvI,EAAW50I,GAAGzS,KAAMqnJ,EAAW50I,IAGjD,IAASA,EAAI,EAAGA,EAAIklH,EAAShnH,OAAQ8B,IAAK,CACxC,IAAIzS,EAAO23H,EAASllH,GAAGuzI,WAAWhmJ,KAE7BilD,EAAYvlD,IAAIM,KACf4iD,EAAQxkD,eAAe4B,KACzBA,EAAO4iD,EAAQ5iD,IAGjBqnJ,EAAW7pJ,KAAK,CACdwC,KAAMA,IAGZ,CAEA,OAAOqnJ,CACT,GAEFnnJ,EAAQoxB,yBAAyB,MAAO0wB,GACxC,IAAIriD,EAAWqiD,EACfpiD,EAAOvB,QAAUsB,C,iCCnMjB,IAAIrB,EAASL,EAAQ,OAEjB8nJ,EAAS9nJ,EAAQ,OAMrB,SAASqpJ,EAAOC,GACd,IAAKA,EAAKC,aACR,OAAOD,EAGT,IAAIE,EAAcF,EAAKG,UAEJ,MAAfD,IACFA,EAAc,MAKhB,IAFA,IAAI9vB,EAAW4vB,EAAK5vB,SAEXrmE,EAAI,EAAGA,EAAIqmE,EAAShnH,OAAQ2gD,IAMnC,IALA,IAAIq+B,EAAUgoC,EAASrmE,GACnBwqD,EAAWnsB,EAAQmsB,SACnB6rC,EAAc7rC,EAAS6rC,YACvBC,EAAgB9rC,EAAS8rC,cAEpBC,EAAI,EAAGA,EAAIF,EAAYh3I,OAAQk3I,IAAK,CAC3C,IAAIC,EAAaH,EAAYE,GAE7B,GAAsB,YAAlB/rC,EAAS58G,KACXyoJ,EAAYE,GAAKE,EAAcD,EAAYF,EAAcC,GAAIJ,QACxD,GAAsB,iBAAlB3rC,EAAS58G,KAClB,IAAK,IAAI8oJ,EAAK,EAAGA,EAAKF,EAAWn3I,OAAQq3I,IAAM,CAC7C,IAAIz/H,EAAUu/H,EAAWE,GACzBF,EAAWE,GAAMD,EAAcx/H,EAASq/H,EAAcC,GAAGG,GAAKP,EAChE,CAEJ,CAKF,OADAF,EAAKC,cAAe,EACbD,CACT,CAEA,SAASQ,EAAcD,EAAYF,EAAeH,GAKhD,IAJA,IAAIhvI,EAAS,GACTkxE,EAAQi+D,EAAc,GACtBh+D,EAAQg+D,EAAc,GAEjBn1I,EAAI,EAAGA,EAAIq1I,EAAWn3I,OAAQ8B,GAAK,EAAG,CAC7C,IAAIhK,EAAIq/I,EAAWhmB,WAAWrvH,GAAK,GAC/B/J,EAAIo/I,EAAWhmB,WAAWrvH,EAAI,GAAK,GAEvChK,EAAIA,GAAK,IAAU,EAAJA,GACfC,EAAIA,GAAK,IAAU,EAAJA,GAEfD,GAAKkhF,EACLjhF,GAAKkhF,EACLD,EAAQlhF,EACRmhF,EAAQlhF,EAER+P,EAAOjb,KAAK,CAACiL,EAAIg/I,EAAa/+I,EAAI++I,GACpC,CAEA,OAAOhvI,CACT,CAQA,SAAS9Y,EAASglJ,GAEhB,OADA2C,EAAO3C,GACArmJ,EAAO41B,IAAI51B,EAAOywD,OAAO41F,EAAQhtB,UAAU,SAAUswB,GAE1D,OAAOA,EAAWnsC,UAAYmsC,EAAWjC,YAAciC,EAAWnsC,SAAS6rC,YAAYh3I,OAAS,CAClG,KAAI,SAAUs3I,GACZ,IAAIjC,EAAaiC,EAAWjC,WACxBvkJ,EAAMwmJ,EAAWnsC,SACjB6rC,EAAclmJ,EAAIkmJ,YAClB9rC,EAAa,GAEA,YAAbp6G,EAAIvC,MACN28G,EAAWr+G,KAAK,CACd0B,KAAM,UAGN68G,SAAU4rC,EAAY,GACtB3rC,UAAW2rC,EAAYnoJ,MAAM,KAIhB,iBAAbiC,EAAIvC,MACNZ,EAAOU,KAAK2oJ,GAAa,SAAU7iI,GAC7BA,EAAK,IACP+2F,EAAWr+G,KAAK,CACd0B,KAAM,UACN68G,SAAUj3F,EAAK,GACfk3F,UAAWl3F,EAAKtlB,MAAM,IAG5B,IAGF,IAAI6jD,EAAS,IAAI0iG,EAAOC,EAAWhmJ,KAAM67G,EAAYmqC,EAAWv5G,IAEhE,OADA4W,EAAO2iG,WAAaA,EACb3iG,CACT,GACF,CAEAzjD,EAAOvB,QAAUsB,C,wBClHjB,IAAIrB,EAASL,EAAQ,OAErB,SAASgmJ,EAAgBC,EAAU/jG,GAEjC,OADAA,EAAWA,GAAY,CAAC,EAAG,GACpB7hD,EAAO41B,IAAI,CAAC,EAAG,IAAI,SAAU49F,GAClC,IAAIn3G,EAAMwlC,EAAS2xE,GACfqyB,EAAWD,EAASpyB,GAAU,EAC9B/2F,EAAK,GACLC,EAAK,GAIT,OAHAD,EAAG+2F,GAAUn3G,EAAMwpI,EACnBnpH,EAAG82F,GAAUn3G,EAAMwpI,EACnBppH,EAAG,EAAI+2F,GAAU92F,EAAG,EAAI82F,GAAU3xE,EAAS,EAAI2xE,GACxC9uH,KAAKiH,IAAIzN,KAAK+F,YAAYw4B,GAAI+2F,GAAUt1H,KAAK+F,YAAYy4B,GAAI82F,GACtE,GAAGt1H,KACL,CAEA,SAASmD,EAASL,GAChB,IAAI4H,EAAO5H,EAAS65B,kBACpB,MAAO,CACL75B,SAAU,CACRJ,KAAM,MACNuJ,EAAGvB,EAAKuB,EACRC,EAAGxB,EAAKwB,EACRX,MAAOb,EAAKa,MACZS,OAAQtB,EAAKsB,QAEf1J,IAAK,CACHqG,MAAO7G,EAAO2B,KAAKX,EAASiD,YAAajD,GACzCoL,KAAMpM,EAAO2B,KAAKgkJ,EAAiB3kJ,IAGzC,CAEAM,EAAOvB,QAAUsB,C,wBCjCjB,IAAIrB,EAASL,EAAQ,OAEjB82H,EAAiB92H,EAAQ,OAEzB+W,EAAkB/W,EAAQ,OAE1B0hJ,EAAmB1hJ,EAAQ,OAE3Bk3D,EAAal3D,EAAQ,OAErB2hJ,EAAuB3hJ,EAAQ,OAE/B4hJ,EAAY9qB,EAAehxH,OAAO,CACpC7E,KAAM,mBAKN+Q,KAAM,KAMNi8E,gBAAiB,GAKjB7B,mBAAoB,WAClB,OAAOr1E,EAAgB,CAAC,CAAC,OAAQ,SAAU,CAAC,YAAa,eAAgB,CAAC,SAAU,eAAgB,CAAC,QAAS,SAAU,CAAC,UAAW,YAA7HA,CAA0IxY,KAAK2M,SAAS,mBACjK,EAYA+jF,mBAAoB,SAAUtB,GAC5B,IAAIM,EAAkB1vF,KAAK0vF,gBAAkB5tF,EAAOyiB,MAAM6qE,GAE1D,GAAIM,EACF,IAAK,IAAIz5E,EAAIy5E,EAAgBv7E,OAAS,EAAG8B,GAAK,EAAGA,IAC/C0iD,EAAW+jC,IAAIhN,EAAgBz5E,GAGrC,EAUAy1I,eAAgB,SAAU39I,GACxB,IAAI2hF,EAAkB1vF,KAAK0vF,gBAE3B,IAAKA,EAAgBv7E,OACnB,MAAO,SAGT,GAAa,MAATpG,EACF,MAAO,WAGT,IAAK,IAAIkI,EAAI,EAAGuY,EAAMkhE,EAAgBv7E,OAAQ8B,EAAIuY,EAAKvY,IACrD,GAAIy5E,EAAgBz5E,GAAG,IAAMlI,GAASA,GAAS2hF,EAAgBz5E,GAAG,GAChE,MAAO,SAIX,MAAO,UACT,IAEE5H,EAAgB,CAClB3L,KAAM,QAKNqG,IAAK,KAGL6kF,gBAAiB,CACfriF,MAAO,GACPyO,YAAa,EACbiB,YAAa,oBACb1O,MAAO,oBACPE,QAAS,IAEX8iF,UAAU,EAEVhhF,EAAG,IAIL,SAASk1I,EAAY1jE,EAAUlyE,GAC7B,OAAOA,EAAOnL,OAASmL,EAAOjN,KAAO,WAAa,QACpD,CAJAkB,EAAOqwF,MAAMkxD,EAAUnhJ,UAAWkhJ,GAMlCD,EAAiB,WAAYE,EAAWI,EAAap1I,GACrD,IAAIlL,EAAWkgJ,EACfjgJ,EAAOvB,QAAUsB,C,wBC7GjB,IAAIrB,EAASL,EAAQ,OAEjBwiE,EAASxiE,EAAQ,OAEjB0tG,EAAa1tG,EAAQ,MAErBiiF,EAAajiF,EAAQ,MAErBkqJ,EAAelqJ,EAAQ,OAEvBmG,EAAUnG,EAAQ,OAElBk3D,EAAal3D,EAAQ,OAErB0iG,EAAa1iG,EAAQ,OAMrBe,EAAOV,EAAOU,KACd8qE,EAAU9mE,KAAKJ,IACfinE,EAAU7mE,KAAKF,IACfslJ,EAAYplJ,KAAKy+B,MACjB4mH,EAAWrlJ,KAAK+R,KAChBD,EAAQqgD,EAAWrgD,MACnBpG,EAAK1L,KAAK0L,GAEd,SAAS45I,EAAS1iG,EAAe/mD,EAASC,GAMxCtC,KAAKylJ,SAAW3jJ,EAAO40D,gBAQvB12D,KAAK+rJ,YAAc,CAAC,EAOpB/rJ,KAAK6Z,WAAauvC,EAAcvvC,WAKhC7Z,KAAKw8I,MAKLx8I,KAAK+pB,OAASq/B,EAEdppD,KAAKgsJ,MAAM5iG,EAAe/mD,EAASC,EACrC,CAyWA,SAAS+gH,EAAS70F,EAAKpS,GACrB,OAAOkxD,EAAQD,EAAQ7+C,EAAKpS,EAAO,IAAKA,EAAO,GACjD,CAEA,SAAS6vI,EAAwBtzE,EAAWtnB,GAC1C,IAAIx+B,EAAOw+B,EAAW66F,cAAgB76F,EAAW86F,UAAY,GAC7D,MAAO,CACLzlJ,SAAUmsB,EAAO8lD,EACjB2P,uBAAwBz1D,EACxB84D,eAAe,EAEnB,CAEA,SAASygE,EAAqBzzE,EAAWtnB,GACvC,IAKI3qD,EAGAoiF,EARAojE,EAAe76F,EAAW66F,aAC1BG,EAAkBh7F,EAAWg7F,gBAC7BF,EAAY96F,EAAW86F,UACvBG,EAAoBj7F,EAAWi7F,kBAC/BC,EAAkBl7F,EAAWk7F,gBAE7BjkE,EAAyBgkE,EACzB3gE,GAAgB,EAepB,OAZIhT,EAAY4zE,EAAgB,IAC9B7lJ,EAAWiyE,EAAY2zE,EACvBxjE,EAAuBwjE,GACd3zE,GAAa4zE,EAAgB,IACtC7lJ,EAAW2qD,EAAWm7F,qBAAuB7zE,EAAY0zE,EAAkBh7F,EAAWm/D,iBAAiB,GACvGloC,EAAyB+jE,EACzB1gE,GAAgB,IAEhBjlF,EAAWwlJ,GAAgBC,EAAY,EAAIxzE,GAAa2zE,EACxDxjE,EAAuBwjE,GAGlB,CACL5lJ,SAAUA,EACV4hF,uBAAwBA,EACxBqD,cAAeA,EACf7C,qBAAsBA,EAE1B,CAjZAgjE,EAAS5pJ,UAAY,CACnBQ,KAAM,WACNP,YAAa2pJ,EAMbE,MAAO,SAAU5iG,EAAe/mD,EAASC,GACvC,IAAIuX,EAAauvC,EAAcvvC,WAC3ByvC,EAAoBF,EAAcE,kBACtC9mD,EAAKqX,GAAY,SAAU9Q,EAAKtE,GAC9B,IAAIk0E,EAAYrvB,EAAkB7kD,GAC9BmlD,EAAYvnD,EAAQ22C,aAAa,eAAgB2/B,GAEjDllE,EAAOzT,KAAKylJ,SAASpqI,IAAItS,EAAK,IAAI4iJ,EAAa5iJ,EAAK26E,EAAW8xC,mBAAmB5rE,GAAY,CAAC,EAAG,GAAIA,EAAU1mD,IAAI,QAASy1E,IAE7H5gC,EAA2B,aAAdtkC,EAAK/Q,KACtB+Q,EAAKsnC,OAAShD,GAAc6R,EAAU1mD,IAAI,eAC1CuQ,EAAK4oC,QAAUuN,EAAU1mD,IAAI,WAE7B0mD,EAAUn2C,KAAOA,EACjBA,EAAKwiB,MAAQ2zB,EACbn2C,EAAKvO,iBAAmB0kD,EAAU1kD,iBAAmBlF,IACvD,GAAGA,KACL,EAOA6C,OAAQ,SAAUR,EAASC,GACzBtC,KAAKysJ,sBAAsBzsJ,KAAK+pB,OAAQ1nB,EAC1C,EAKAkrD,aAAc,SAAUznD,GACtB,IAAIurD,EAAarxD,KAAK0sJ,kBAElBC,EAAWt7F,EAAWs7F,SACtBC,EAAav7F,EAAWu7F,WACxBC,EAAgBx7F,EAAWw7F,cAC3BC,EAAQhnJ,EAAM,EAAI+mJ,GAClBE,EAAUjnJ,EAAM+mJ,GACpB,OAAOC,GAASH,GAAYG,GAASH,EAAWt7F,EAAW27F,YAAcD,GAAWH,GAAcG,GAAWH,EAAav7F,EAAW66F,YACvI,EACAv/I,SAAU,WACR,OAAO3M,KAAK+pB,MACd,EAMA0iI,sBAAuB,SAAUrjG,EAAe/mD,GAC9CA,EAAQ4gF,YAAW,SAAU5+E,GAC3B,GAAK+kD,EAAcka,SAASj/D,EAAahC,GAAzC,CAIA,IAAIzB,EAAOyD,EAAYG,UACvBhC,EAAKxC,KAAK6Z,YAAY,SAAU9Q,GAC9B,IAAI0K,EAAOzT,KAAKylJ,SAASviJ,IAAI6F,GAE7B0K,EAAKhN,MAAM0gJ,oBAAoBvmJ,EAAMmI,GACrC26E,EAAWi7D,gBAAgBlrI,EAAKhN,MAAOgN,EAAKwiB,MAC9C,GAAGj2B,KARH,CASF,GAAGA,KACL,EAOAqmJ,OAAQ,SAAUj9F,EAAe9mD,GAC/BtC,KAAKw8I,MAAQrtC,EAAWlhF,cAAcm7B,EAAcl7B,qBAAsB,CACxE3iB,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,cAGdlR,KAAKitJ,aACP,EAKAn8I,QAAS,WACP,OAAO9Q,KAAKw8I,KACd,EAKAkQ,gBAAiB,WACf,IAgBIQ,EAhBA9jG,EAAgBppD,KAAK+pB,OACrBrf,EAAO1K,KAAKw8I,MACZpsI,EAAK,CAAC,IAAK,KACXC,EAAK,CAAC,QAAS,UACf9G,EAAS6/C,EAAclmD,IAAI,UAC3B2pJ,EAA2B,eAAXtjJ,EAA0B,EAAI,EAC9C2iJ,EAAexhJ,EAAK2F,EAAGw8I,IACvBM,EAAe,CAAC,EAAGjB,GACnBC,EAAYnsJ,KAAK6Z,WAAW1F,OAC5Bk4I,EAAkBhpC,EAASj6D,EAAclmD,IAAI,mBAAoBiqJ,GACjEC,EAAkB/pC,EAASj6D,EAAclmD,IAAI,oBAAsB,EAAG,CAAC,EAAGipJ,IAC1EkB,EAAiBjkG,EAAclmD,IAAI,mBAAqBipJ,EAAY,GAAKA,EAAYiB,GAAmBA,EAAkB,GAAKf,EAAkB,GAAKH,EAAe,EAIrK17B,EAAmBpnE,EAAclmD,IAAI,oBAGzC,GAAKstH,EAMH08B,EAAU7pC,EAASmN,EAAiB,GAAKA,EAAiB,GAAI28B,GAC9D38B,EAAiB,GAAKA,EAAiB,GAAK08B,MAPvB,CACrBA,EAAU7pC,EAASgpC,GAAmBe,EAAkB,GAAID,GAC5D,IAAIG,EAAmBlkG,EAAclmD,IAAI,qBAAuB0oJ,EAAUO,EAAY,GACtF37B,EAAmB,CAAC67B,EAAkBiB,EAAmBJ,EAAU,GACnE18B,EAAiB,GAAKA,EAAiB,GAAK08B,CAC9C,CAKA,IAAIZ,GAAqBJ,EAAegB,IAAYf,EAAYiB,GAEhEd,EAAoB,IAAMA,EAAoB,GAE9C,IAAIC,EAAkB,CAACX,EAAUtzI,EAAMk4G,EAAiB,GAAK67B,EAAiB,IAAM,EAAGR,EAASvzI,EAAMk4G,EAAiB,GAAK67B,EAAiB,IAAM,GAE/IG,EAAuBF,EAAoBD,EAAkB77B,EAAiB,GAClF,MAAO,CACLjnH,OAAQA,EACRsjJ,cAAeA,EACfD,WAAYliJ,EAAK0F,EAAGy8I,IACpBX,aAAcA,EACdS,SAAUjiJ,EAAK0F,EAAG,EAAIy8I,IACtBG,WAAYtiJ,EAAK2F,EAAG,EAAIw8I,IACxBQ,eAAgBA,EAChBhB,gBAAiBA,EACjBC,kBAAmBA,EACnB97B,iBAAkBA,EAClB27B,UAAWA,EACXI,gBAAiBA,EACjBC,qBAAsBA,EAE1B,EAKAS,YAAa,WACX,IAAIviJ,EAAO1K,KAAKw8I,MACZuJ,EAAO/lJ,KAAKylJ,SACZ5rI,EAAa7Z,KAAK6Z,WAElBw3C,EAAarxD,KAAK0sJ,kBAElBnjJ,EAAS8nD,EAAW9nD,OACxBw8I,EAAKvjJ,MAAK,SAAUiR,GAClB,IAAI+jE,EAAa,CAAC,EAAGnmB,EAAW27F,YAC5BvoJ,EAAMgP,EAAK4oC,QAAU,EAAI,EAC7B5oC,EAAKgiH,UAAUj+C,EAAW/yE,GAAM+yE,EAAW,EAAI/yE,GACjD,IACAjC,EAAKqX,GAAY,SAAU9Q,EAAKtE,GAC9B,IAAI+sB,GAAW6/B,EAAWg8F,eAAiBjB,EAAuBH,GAAyBxnJ,EAAK4sD,GAC5Fk8F,EAAgB,CAClB18D,WAAY,CACV5kF,EAAGulB,EAAQ9qB,SACXwF,EAAGmlD,EAAW27F,YAEhBl8D,SAAU,CACR7kF,EAAG,EACHC,EAAGslB,EAAQ9qB,WAGX8mJ,EAAgB,CAClB38D,WAAY3+E,EAAK,EACjB4+E,SAAU,GAERpqF,EAAW,CAAC6mJ,EAAchkJ,GAAQ0C,EAAIvB,EAAKuB,EAAGshJ,EAAchkJ,GAAQ2C,EAAIxB,EAAKwB,GAC7E+F,EAAWu7I,EAAcjkJ,GACzBszB,EAAYonC,EAAO7hE,SACvB6hE,EAAOzX,OAAO3vB,EAAWA,EAAW5qB,GACpCgyD,EAAO4E,UAAUhsC,EAAWA,EAAWn2B,GAKvC1G,KAAK+rJ,YAAYhjJ,GAAO,CACtBrC,SAAUA,EACVuL,SAAUA,EACV4qB,UAAWA,EACXyrD,uBAAwB92D,EAAQ82D,uBAChCqD,cAAen6D,EAAQm6D,cACvB7C,qBAAsBt3D,EAAQs3D,qBAC9B9B,cAAe,EACflN,eAAgB,EAChBsR,cAAe26D,EAAK7iJ,IAAI6F,GAAKynF,mBAEjC,GAAGxwF,KACL,EAOA+mC,QAAS,SAAUh+B,GACjB,OAAO/I,KAAKylJ,SAASviJ,IAAI6F,EAC3B,EAQAhD,YAAa,SAAUgI,EAAOhF,GAC5B,OAAO/I,KAAKytJ,iBAAiBztJ,KAAKylJ,SAASviJ,IAAI6F,GAAKqK,YAAYrF,GAAQhF,EAC1E,EASAmhD,gBAAiB,SAAUtpD,EAAMi+D,EAAUpnD,GAKzC,IAJA,IAAIoC,EAAa7Z,KAAK6Z,WAClBisI,EAAU9lJ,KAAKylJ,SACfiI,EAAe1tJ,KAAK63F,iBAEf5hF,EAAI,EAAGuY,EAAM5tB,EAAKoW,QAASf,EAAIuY,EAAKvY,IAAK,CAChD,IACIg0C,EADA4J,EAASjzD,EAAKq/E,UAAUpmE,EAAY5D,GAGxC,GAAKy3I,EAEE,CACLzjG,EAAc,SAEd,IAAK,IAAI32B,EAAI,EAAG+/B,EAAOx5C,EAAW1F,OAAQmf,EAAI+/B,EAAM//B,IAAK,CACvD,IAAIhW,EAAUzD,EAAWyZ,GACrBoS,EAAQogH,EAAQ5iJ,IAAIoa,GAAS2Y,MAAMy1H,eAAe73F,EAAOvgC,GAAIA,GAEjE,GAAc,aAAVoS,EAAsB,CACxBukB,EAAc,WACd,KACF,CACF,CACF,MAbEA,EAAc,SAehB4U,EAASlnD,KAAKF,EAASwyC,EAAah0C,EACtC,CACF,EAMA4hF,eAAgB,WAKd,IAJA,IAAIh+E,EAAa7Z,KAAK6Z,WAClBisI,EAAU9lJ,KAAKylJ,SACfiI,GAAe,EAEVp6H,EAAI,EAAG+/B,EAAOx5C,EAAW1F,OAAQmf,EAAI+/B,EAAM//B,IACQ,WAAtDwyH,EAAQ5iJ,IAAI2W,EAAWyZ,IAAI2C,MAAMy1H,mBACnCgC,GAAe,GAInB,OAAOA,CACT,EASAD,iBAAkB,SAAU9kJ,EAAOI,GACjC,IAAIglF,EAAa/tF,KAAK+rJ,YAAYhjJ,GAClC,OAAOnB,EAAQg1B,eAAe,CAACj0B,EAAO,GAAIolF,EAAWlxD,UACvD,EAKAmxD,cAAe,SAAUjlF,GACvB,OAAOjH,EAAOyiB,MAAMvkB,KAAK+rJ,YAAYhjJ,GACvC,EAMAunH,0BAA2B,SAAUxqH,GACnC,IAAIurD,EAAarxD,KAAK0sJ,kBAElBG,EAAgBx7F,EAAWw7F,cAC3Br8B,EAAmBn/D,EAAWm/D,iBAAiBxtH,QAC/CkqJ,EAAU18B,EAAiB,GAAKA,EAAiB,GACjDp0G,EAAS,CAAC,EAAGi1C,EAAWg7F,iBAAmBh7F,EAAW86F,UAAY,IAEtE,IAAKnsJ,KAAKutD,aAAaznD,GACrB,MAAO,CACLyqH,SAAU,OACVC,iBAAkBA,GAKtB,IAGI5iE,EAHA+/F,EAAa7nJ,EAAM+mJ,GAAiBx7F,EAAWu7F,WAAav7F,EAAWm7F,qBAIvEj8B,EAAW,QACX+7B,EAAoBj7F,EAAWi7F,kBAE/BsB,EAAc5tJ,KAAK+pB,OAAO7mB,IAAI,8BAG9B2qJ,EAA4B,MAAlBD,EAAY,GAE1B,GAAItB,EACEuB,GAAWvB,GAAqBqB,EAAaT,EAAUU,EAAY,IACrEr9B,EAAW,OACX3iE,EAAQ+/F,EAAaT,EAAUU,EAAY,IAClCC,GAAWvB,GAAqBqB,EAAaT,GAAW,EAAIU,EAAY,KACjFr9B,EAAW,OACX3iE,EAAQ+/F,EAAaT,GAAW,EAAIU,EAAY,MAE/ChgG,EAAQ+/F,EAAaT,EAAUU,EAAY,KAAO,IAAMhgG,EAAQ+/F,EAAaT,GAAW,EAAIU,EAAY,MAAQ,IAAMhgG,EAAQ,GAGjIA,GAASyD,EAAWg7F,gBAAkBC,EACtC1+F,EAAQu2C,EAAWv2C,EAAO4iE,EAAkBp0G,EAAQ,OAClDm0G,EAAW,WAEV,CACG28B,EAAU18B,EAAiB,GAAKA,EAAiB,GAArD,IACI90F,EAAMtf,EAAO,GAAKuxI,EAAaT,EACnC18B,EAAmB,CAACnjD,EAAQ,EAAG3xC,EAAMwxH,EAAU,IAC/C18B,EAAiB,GAAKljD,EAAQlxD,EAAO,GAAIo0G,EAAiB,GAAK08B,GAC/D18B,EAAiB,GAAKA,EAAiB,GAAK08B,CAC9C,CAEF,MAAO,CACL18B,iBAAkBA,EAClBD,SAAUA,EAEd,GA+CF,IAAIptH,EAAW2oJ,EACf1oJ,EAAOvB,QAAUsB,C,wBCpdjB,IAAIrB,EAASL,EAAQ,OAEjB02H,EAAO12H,EAAQ,OAUfkqJ,EAAe,SAAU5iJ,EAAKtC,EAAO2xH,EAAalhF,EAAUyhC,GAC9Dw/C,EAAKxgH,KAAK3X,KAAM+I,EAAKtC,EAAO2xH,GAU5Bp4H,KAAK0C,KAAOw0C,GAAY,QAMxBl3C,KAAK24E,UAAYA,CACnB,EAEAgzE,EAAazpJ,UAAY,CACvBC,YAAawpJ,EAMb11H,MAAO,KAKPntB,aAAc,WACZ,MAA0D,eAAnD9I,KAAKkF,iBAAiByH,WAAWzJ,IAAI,SAC9C,GAEFpB,EAAO6rB,SAASg+H,EAAcxzB,GAC9B,IAAIh1H,EAAWwoJ,EACfvoJ,EAAOvB,QAAUsB,C,iCClDjB,IAAIrB,EAASL,EAAQ,OAEjBqtG,EAAYrtG,EAAQ,OAExBA,EAAQ,OAER,IAAI0B,EAAW2rG,EAAUvnG,OAAO,CAC9B7E,KAAM,WACN8E,aAAc,CAAC,gBAKftC,iBAAkB,KAOlB2U,WAAY,KAOZyvC,kBAAmB,KACnB5D,WAAY,MACZr3C,cAAe,CACbC,OAAQ,EACRC,EAAG,EACH6c,KAAM,GACNC,IAAK,GACLC,MAAO,GACPC,OAAQ,GAGRhiB,OAAQ,aAIR8jJ,gBAAgB,EAChBC,iBAAkB,KAClBF,gBAAiB,EACjBf,gBAAiB,GAEjByB,eAAgB,GAChBC,mBAAoB,GAGpBC,2BAA4B,EAAE,IAAM,IAAM,IAC1CC,oBAAqB,QAErBC,oBAAqB,MAMvB7kI,KAAM,WACJylF,EAAU5sG,UAAUmnB,KAAKy5C,MAAM9iE,KAAM6P,WACrC7P,KAAKw1B,YAAY,CAAC,EACpB,EAKAA,YAAa,SAAUuwB,GACrB,IAAI6rC,EAAa5xF,KAAK6N,OACtBk4C,GAAajkD,EAAOqwF,MAAMP,EAAY7rC,GAAW,GAEjD/lD,KAAKmuJ,iBACP,EAOA7qF,SAAU,SAAUrtC,EAAO5zB,GACzB,IAAI+nD,EAAgBn0B,EAAM/yB,IAAI,iBAC9B,OAAwB,MAAjBknD,GAAyB/nD,EAAQ22C,aAAa,WAAYoR,KAAmBpqD,IACtF,EACA2wF,cAAe,SAAU5/E,GACvBjP,EAAOU,KAAK,CAAC,iBAAkB,mBAAoB,kBAAmB,kBAAmB,qBAAqB,SAAUgB,GAClHuN,EAAInP,eAAe4B,KACrBxD,KAAK6N,OAAOrK,GAAQuN,EAAIvN,GAE5B,GAAGxD,KACL,EAKAmuJ,gBAAiB,WACf,IAAIt0I,EAAa7Z,KAAK6Z,WAAa,GAC/ByvC,EAAoBtpD,KAAKspD,kBAAoB,GAC7C+4C,EAAavgG,EAAOywD,OAAOvyD,KAAKimD,gBAAgBmoG,cAAc,SAAUxkG,GAG1E,OAAQA,EAAU1mD,IAAI,kBAAoB,KAAOlD,KAAK8/D,cACxD,GAAG9/D,MACH8B,EAAOU,KAAK6/F,GAAY,SAAUz4C,GAChC/vC,EAAW7Y,KAAK,MAAQ4oD,EAAU1mD,IAAI,QACtComD,EAAkBtoD,KAAK4oD,EAAUkW,eACnC,GACF,IAGF18D,EAAOvB,QAAUsB,C,gCC9GjB,IAAI2oJ,EAAWrqJ,EAAQ,OAEnBkzC,EAAmBlzC,EAAQ,OAK/B,SAASW,EAAOC,EAASC,GACvB,IAAI+rJ,EAAe,GAoBnB,OAnBAhsJ,EAAQ4B,cAAc,YAAY,SAAUmlD,EAAe3kD,GACzD,IAAI3B,EAAW,IAAIgpJ,EAAS1iG,EAAe/mD,EAASC,GACpDQ,EAASU,KAAO,YAAciB,EAC9B3B,EAASujJ,OAAOj9F,EAAe9mD,GAC/B8mD,EAAclkD,iBAAmBpC,EACjCA,EAASmzB,MAAQmzB,EACjBilG,EAAartJ,KAAK8B,EACpB,IAEAT,EAAQ4gF,YAAW,SAAU5+E,GAC3B,GAA4C,aAAxCA,EAAYnB,IAAI,oBAAoC,CACtD,IAAIkmD,EAAgB/mD,EAAQg1C,gBAAgB,CAC1CnzC,SAAU,WACVoM,MAAOjM,EAAYnB,IAAI,iBACvBmjB,GAAIhiB,EAAYnB,IAAI,gBACnB,GACHmB,EAAYa,iBAAmBkkD,EAAclkD,gBAC/C,CACF,IACOmpJ,CACT,CAEA15G,EAAiBrzC,SAAS,WAAY,CACpCc,OAAQA,G,wBChCV,IAAIN,EAASL,EAAQ,OAEjB84C,EAAY94C,EAAQ,OAExB,SAAS0B,EAAS0K,GAChBygJ,EAAuBzgJ,GACvB0gJ,EAA4B1gJ,EAC9B,CAOA,SAASygJ,EAAuBzgJ,GAC9B,IAAIA,EAAO2gJ,SAAX,CAIA,IAAIC,GAAoB,EACxB3sJ,EAAOU,KAAKqL,EAAOiU,QAAQ,SAAUshC,GAC/BA,GAAgC,aAAnBA,EAAU1gD,OACzB+rJ,GAAoB,EAExB,IAEIA,IACF5gJ,EAAO2gJ,SAAW,CAAC,CAAC,GAVtB,CAYF,CAOA,SAASD,EAA4B1gJ,GACnC,IAAIk4I,EAAOxrG,EAAUwnD,iBAAiBl0F,EAAOugJ,cAC7CtsJ,EAAOU,KAAKujJ,GAAM,SAAU2I,GAC1B,GAAK5sJ,EAAOkgB,SAAS0sI,GAArB,CAIA,IAAItkG,EAAgBskG,EAAWtkG,eAAiB,EAC5CukG,EAAiBp0G,EAAUwnD,iBAAiBl0F,EAAO2gJ,UAAUpkG,GAE7DukG,GAAkBA,EAAeT,qBACnCpsJ,EAAOqwF,MAAMu8D,EAAYC,EAAeT,qBAAqB,EAN/D,CAQF,GACF,CAEA9qJ,EAAOvB,QAAUsB,C,wBCpDjB,IAAIrB,EAASL,EAAQ,OAEjB02H,EAAO12H,EAAQ,OAEnB,SAASmtJ,EAAUnoJ,EAAOgtB,GACxBA,EAAcA,GAAe,CAAC,EAAG,KACjC0kG,EAAKxgH,KAAK3X,KAAM,QAASyG,EAAOgtB,GAUhCzzB,KAAK0C,KAAO,UACd,CAEAksJ,EAAU1sJ,UAAY,CACpBC,YAAaysJ,EAKb1oJ,YAAa,SAAUJ,EAAO81I,GAC5B,OAAO57I,KAAK+K,MAAM7E,YAAYJ,EAAO81I,GAAoB,WAAb57I,KAAK+I,IAAmB,EAAI,EAC1E,EACA8lJ,YAAa12B,EAAKj2H,UAAUkR,YAC5B07I,YAAa32B,EAAKj2H,UAAUotF,aAE9BxtF,EAAO6rB,SAASihI,EAAWz2B,GAC3B,IAAIh1H,EAAWyrJ,EACfxrJ,EAAOvB,QAAUsB,C,wBCjCjB,IAAIrB,EAASL,EAAQ,OAEjB82H,EAAiB92H,EAAQ,OAEzB0hJ,EAAmB1hJ,EAAQ,OAE3B2hJ,EAAuB3hJ,EAAQ,OAE/BstJ,EAAiBx2B,EAAehxH,OAAO,CACzC7E,KAAM,YAKN+Q,KAAM,KAKNs5E,iBAAkB,WAChB,OAAO/sF,KAAKqC,QAAQg1C,gBAAgB,CAClCnzC,SAAU,QACVoM,MAAOtQ,KAAK6N,OAAOmjD,WACnB3qC,GAAIrmB,KAAK6N,OAAOmhJ,UACf,EACL,IAEFltJ,EAAOqwF,MAAM48D,EAAe7sJ,UAAWkhJ,GACvC,IAAI6L,EAAiC,CACnCr8H,MAAO,CAGLxnB,WAAY,GACZ8kB,WAAW,EACXC,YAAa,GACbI,UAAW,CACTi8B,QAAQ,IAGZv8B,OAAQ,CAGNE,YAAa,IAIjB,SAASszH,EAAY9sF,EAAS9oD,GAE5B,OAAOA,EAAOnL,OAASmL,EAAOjN,KAAO,WAAa,QACpD,CAEAuiJ,EAAiB,QAAS4L,EAAgBtL,EAAawL,EAA+Br8H,OACtFuwH,EAAiB,SAAU4L,EAAgBtL,EAAawL,EAA+Bh/H,O,iCCpDvF,IAAIi/H,EAAaztJ,EAAQ,OAErBmtJ,EAAYntJ,EAAQ,OAWpB0tJ,EAAQ,SAAU3rJ,GAIpBxD,KAAKwD,KAAOA,GAAQ,GAMpBxD,KAAKmM,GAAK,EAMVnM,KAAKoM,GAAK,EAMVpM,KAAKovJ,YAAc,IAAIF,EAMvBlvJ,KAAKqvJ,WAAa,IAAIT,EACtB5uJ,KAAKovJ,YAAYrkJ,MAAQ/K,KAAKqvJ,WAAWtkJ,MAAQ/K,IACnD,EAEAmvJ,EAAMjtJ,UAAY,CAChBQ,KAAM,QACNi/E,oBAAoB,EACpBx/E,YAAagtJ,EAMbt1I,WAAY,CAAC,SAAU,SAKvBoc,MAAO,KAOPs3B,aAAc,SAAUznD,GACtB,IAAI6C,EAAQ3I,KAAKimG,aAAangG,GAC9B,OAAO9F,KAAKovJ,YAAYtyH,QAAQn0B,EAAM,KAAO3I,KAAKqvJ,WAAWvyH,QAAQn0B,EAAM,GAC7E,EAOAs1E,YAAa,SAAUr9E,GACrB,OAAOZ,KAAKovJ,YAAYnxE,YAAYr9E,EAAK,KAAOZ,KAAKqvJ,WAAWpxE,YAAYr9E,EAAK,GACnF,EAMAmmC,QAAS,SAAUh+B,GACjB,OAAO/I,KAAK,IAAM+I,EAAM,OAC1B,EAKA+4E,QAAS,WACP,MAAO,CAAC9hF,KAAKovJ,YAAapvJ,KAAKqvJ,WACjC,EAOAjwG,eAAgB,SAAUg/F,GACxB,IAAI2H,EAAO,GACPhqG,EAAY/7C,KAAKqvJ,WACjBpzG,EAAaj8C,KAAKovJ,YAGtB,OAFArzG,EAAUt1C,MAAM/D,OAAS07I,GAAa2H,EAAK/kJ,KAAK+6C,GAChDE,EAAWx1C,MAAM/D,OAAS07I,GAAa2H,EAAK/kJ,KAAKi7C,GAC1C8pG,CACT,EAKA/pG,aAAc,WACZ,OAAOh8C,KAAKqvJ,UACd,EAKAnzG,cAAe,WACb,OAAOl8C,KAAKovJ,WACd,EAMAn8I,aAAc,SAAUQ,GACtB,IAAIsoC,EAAY/7C,KAAKqvJ,WACrB,OAAO57I,IAASsoC,EAAY/7C,KAAKovJ,YAAcrzG,CACjD,EAOAlzC,YAAa,WACX,OAAO7I,KAAKo/C,eAAe,WAAW,IAAMp/C,KAAKo/C,eAAe,QAAQ,IAAMp/C,KAAKg8C,cACrF,EAMAgmC,eAAgB,SAAUj5E,GACxB,IAAIH,EAAkB,MAAPG,GAAuB,SAARA,EAAiB/I,KAAK+mC,QAAQh+B,GAAO/I,KAAK6I,cACxE,MAAO,CACLu5E,SAAU,CAACx5E,GACXy5E,UAAW,CAACriF,KAAKiT,aAAarK,IAElC,EASA7C,YAAa,SAAUnF,EAAMg7I,GAC3B,OAAO57I,KAAKs7E,aAAa,CAACt7E,KAAKovJ,YAAYE,aAAa1uJ,EAAK,GAAIg7I,GAAQ57I,KAAKqvJ,WAAWR,YAAYjuJ,EAAK,GAAIg7I,IAChH,EAQA11I,YAAa,SAAUJ,EAAO81I,GAC5B,IAAIjzI,EAAQ3I,KAAKimG,aAAangG,GAC9B,MAAO,CAAC9F,KAAKovJ,YAAYG,aAAa5mJ,EAAM,GAAIizI,GAAQ57I,KAAKqvJ,WAAWP,YAAYnmJ,EAAM,GAAIizI,GAChG,EAOA31C,aAAc,SAAUngG,GACtB,IAAIE,EAAKF,EAAM,GAAK9F,KAAKmM,GACrBlG,EAAKH,EAAM,GAAK9F,KAAKoM,GACrB2vC,EAAY/7C,KAAKg8C,eACjB5/B,EAAS2/B,EAAUr/B,YACnBwvC,EAAW1lD,KAAKJ,IAAIgW,EAAO,GAAIA,EAAO,IACtCozI,EAAWhpJ,KAAKF,IAAI8V,EAAO,GAAIA,EAAO,IAG1C2/B,EAAUM,QAAU6P,EAAWsjG,EAAW,IAAMA,EAAWtjG,EAAW,IACtE,IAAIj8B,EAASzpB,KAAKgnD,KAAKxnD,EAAKA,EAAKC,EAAKA,GACtCD,GAAMiqB,EACNhqB,GAAMgqB,EACN,IAAIsrD,EAAS/0E,KAAKo1B,OAAO31B,EAAID,GAAMQ,KAAK0L,GAAK,IAEzC+oC,EAAMsgC,EAASrvB,EAAW,GAAK,EAEnC,MAAOqvB,EAASrvB,GAAYqvB,EAASi0E,EACnCj0E,GAAgB,IAANtgC,EAGZ,MAAO,CAAChrB,EAAQsrD,EAClB,EAOAD,aAAc,SAAU3yE,GACtB,IAAIsnB,EAAStnB,EAAM,GACf4yE,EAAS5yE,EAAM,GAAK,IAAMnC,KAAK0L,GAC/BjG,EAAIzF,KAAK0sB,IAAIqoD,GAAUtrD,EAASjwB,KAAKmM,GAErCD,GAAK1F,KAAK4sB,IAAImoD,GAAUtrD,EAASjwB,KAAKoM,GAC1C,MAAO,CAACH,EAAGC,EACb,GAEF,IAAI/I,EAAWgsJ,EACf/rJ,EAAOvB,QAAUsB,C,wBC3NjB,IAAIO,EAAUjC,EAAQ,OAEtBA,EAAQ,OAER,IAAI0B,EAAWO,EAAQiwE,qBAAqB,CAC1CjxE,KAAM,QACN8E,aAAc,CAAC,YAAa,aAK5BtC,iBAAkB,KAMlBizC,cAAe,SAAUjB,GACvB,IAAIu4G,EACAptJ,EAAUrC,KAAKqC,QAMnB,OALAA,EAAQ4B,cAAcizC,GAAU,SAAU0S,GACpCA,EAAUmjC,qBAAuB/sF,OACnCyvJ,EAAiB7lG,EAErB,GAAG5pD,MACIyvJ,CACT,EACAphJ,cAAe,CACbC,OAAQ,EACRC,EAAG,EACHlJ,OAAQ,CAAC,MAAO,OAChB4qB,OAAQ,SAIZ7sB,EAAOvB,QAAUsB,C,wBCnCjB,IAAIrB,EAASL,EAAQ,OAEjB02H,EAAO12H,EAAQ,OAEnB,SAASytJ,EAAWzoJ,EAAO01C,GACzBg8E,EAAKxgH,KAAK3X,KAAM,SAAUyG,EAAO01C,GAUjCn8C,KAAK0C,KAAO,UACd,CAEAwsJ,EAAWhtJ,UAAY,CACrBC,YAAa+sJ,EAKbhpJ,YAAa,SAAUJ,EAAO81I,GAC5B,OAAO57I,KAAK+K,MAAM7E,YAAYJ,EAAO81I,GAAoB,WAAb57I,KAAK+I,IAAmB,EAAI,EAC1E,EACAumJ,aAAcn3B,EAAKj2H,UAAUkR,YAC7Bm8I,aAAcp3B,EAAKj2H,UAAUotF,aAE/BxtF,EAAO6rB,SAASuhI,EAAY/2B,GAC5B,IAAIh1H,EAAW+rJ,EACf9rJ,EAAOvB,QAAUsB,C,iCChCjB,IAAIuE,EAAUjG,EAAQ,OAMlB0tJ,GAJUznJ,EAAQC,QAETlG,EAAQ,OAETA,EAAQ,QAEhBuO,EAAUvO,EAAQ,OAElBwO,EAAeD,EAAQC,aAEvBy/I,EAAcjuJ,EAAQ,MAEtB+zH,EAAqBk6B,EAAYl6B,mBACjCmpB,EAAkB+Q,EAAY/Q,gBAE9BhqG,EAAmBlzC,EAAQ,OAY/B,SAASkuJ,EAAY5kJ,EAAOktC,EAAY31C,GACtC,IAAI+C,EAAS4yC,EAAW/0C,IAAI,UACxBqI,EAAQjJ,EAAI2O,WACZjF,EAAS1J,EAAI4O,YACjBnG,EAAMoB,GAAK8D,EAAa5K,EAAO,GAAIkG,GACnCR,EAAMqB,GAAK6D,EAAa5K,EAAO,GAAI2G,GACnC,IAAIiwC,EAAalxC,EAAMmxC,gBACnBhuC,EAAO1H,KAAKJ,IAAImF,EAAOS,GAAU,EACjCikB,EAAShgB,EAAagoC,EAAW/0C,IAAI,UAAWgL,GACpD+tC,EAAWI,QAAUJ,EAAWw5E,UAAUxlG,EAAQ,GAAKgsB,EAAWw5E,UAAU,EAAGxlG,EACjF,CAMA,SAAS2/H,EAAiBvtJ,EAASC,GACjC,IAAIyI,EAAQ/K,KACR+7C,EAAYhxC,EAAMixC,eAClBC,EAAalxC,EAAMmxC,gBAcvB,GAZAH,EAAUt1C,MAAMgvH,UAAUlvH,KAAWA,KACrC01C,EAAWx1C,MAAMgvH,UAAUlvH,KAAWA,KACtClE,EAAQ4gF,YAAW,SAAU5+E,GAC3B,GAAIA,EAAYa,mBAAqB6F,EAAO,CAC1C,IAAInK,EAAOyD,EAAYG,UACvBy3C,EAAWx1C,MAAM0gJ,oBAAoBvmJ,EAAM,UAC3Cm7C,EAAUt1C,MAAM0gJ,oBAAoBvmJ,EAAM,QAC5C,CACF,IACA+9I,EAAgB5iG,EAAUt1C,MAAOs1C,EAAU9lB,OAC3C0oH,EAAgB1iG,EAAWx1C,MAAOw1C,EAAWhmB,OAEtB,aAAnB8lB,EAAUr5C,OAAwBq5C,EAAUhB,OAAQ,CACtD,IAAI3+B,EAAS2/B,EAAUr/B,YACnBxT,EAAO,IAAM6yC,EAAUt1C,MAAMuQ,QACjC+kC,EAAUM,QAAUjgC,EAAO,IAAMlT,EAAOkT,EAAO,IAAMlT,EACrD6yC,EAAU05E,UAAUr5G,EAAO,GAAIA,EAAO,GACxC,CACF,CASA,SAASyzI,EAAQp8I,EAAMm2C,GAMrB,GALAn2C,EAAK/Q,KAAOknD,EAAU1mD,IAAI,QAC1BuQ,EAAKhN,MAAQ+uH,EAAmB5rE,GAChCn2C,EAAKsnC,OAAS6O,EAAU1mD,IAAI,gBAAgC,aAAduQ,EAAK/Q,KACnD+Q,EAAK4oC,QAAUuN,EAAU1mD,IAAI,WAEF,cAAvB0mD,EAAU1lD,SAA0B,CACtCuP,EAAK4oC,SAAWuN,EAAU1mD,IAAI,aAC9B,IAAIkI,EAAaw+C,EAAU1mD,IAAI,cAC/BuQ,EAAKgiH,UAAUrqH,EAAYA,GAAcqI,EAAK4oC,SAAW,IAAM,KACjE,CAGAuN,EAAUn2C,KAAOA,EACjBA,EAAKwiB,MAAQ2zB,CACf,CAzEAnoD,EAAQ,OA2ER,IAAIquJ,EAAe,CACjBj2I,WAAYs1I,EAAMjtJ,UAAU2X,WAC5BzX,OAAQ,SAAUC,EAASC,GACzB,IAAIytJ,EAAY,GA2BhB,OA1BA1tJ,EAAQ4B,cAAc,SAAS,SAAUg0C,EAAYxzC,GACnD,IAAIsG,EAAQ,IAAIokJ,EAAM1qJ,GAEtBsG,EAAMlI,OAAS+sJ,EACf,IAAI3zG,EAAalxC,EAAMmxC,gBACnBH,EAAYhxC,EAAMixC,eAClB5D,EAAkBH,EAAWE,cAAc,cAC3CD,EAAiBD,EAAWE,cAAc,aAC9C03G,EAAQ5zG,EAAY7D,GACpBy3G,EAAQ9zG,EAAW7D,GACnBy3G,EAAY5kJ,EAAOktC,EAAY31C,GAC/BytJ,EAAU/uJ,KAAK+J,GACfktC,EAAW/yC,iBAAmB6F,EAC9BA,EAAMkrB,MAAQgiB,CAChB,IAEA51C,EAAQ4gF,YAAW,SAAU5+E,GAC3B,GAA4C,UAAxCA,EAAYnB,IAAI,oBAAiC,CACnD,IAAI+0C,EAAa51C,EAAQg1C,gBAAgB,CACvCnzC,SAAU,QACVoM,MAAOjM,EAAYnB,IAAI,cACvBmjB,GAAIhiB,EAAYnB,IAAI,aACnB,GACHmB,EAAYa,iBAAmB+yC,EAAW/yC,gBAC5C,CACF,IACO6qJ,CACT,GAEFp7G,EAAiBrzC,SAAS,QAASwuJ,E,iCC/HnC,IAAIhuJ,EAASL,EAAQ,OAErB,SAASgmJ,EAAgBC,EAAU/jG,GAEjC,OAAO7hD,EAAO41B,IAAI,CAAC,SAAU,UAAU,SAAU3uB,EAAKusH,GACpD,IAAI7hH,EAAOzT,KAAK,MAAQ+I,EAAM,UAC1BoV,EAAMwlC,EAAS2xE,GACfqyB,EAAWD,EAASpyB,GAAU,EAC9BhxH,EAAS,SAAWyE,EACpBkT,EAAuB,aAAdxI,EAAK/Q,KAAsB+Q,EAAK+I,eAAiBhW,KAAKiH,IAAIgG,EAAKnP,GAAQ6Z,EAAMwpI,GAAYl0I,EAAKnP,GAAQ6Z,EAAMwpI,IAMzH,MAJY,UAAR5+I,IACFkT,EAASA,EAASzV,KAAK0L,GAAK,KAGvB+J,CACT,GAAGjc,KACL,CAEA,SAASmD,EAASL,GAChB,IAAIm5C,EAAan5C,EAASo5C,gBACtBH,EAAYj5C,EAASk5C,eACrB/rB,EAASgsB,EAAWv/B,YAExB,OADAuT,EAAO,GAAKA,EAAO,IAAMA,EAAOzc,UACzB,CACL1Q,SAAU,CACRJ,KAAM,QACNyJ,GAAIrJ,EAASqJ,GACbC,GAAItJ,EAASsJ,GACbX,EAAGwkB,EAAO,GACVvkB,GAAIukB,EAAO,IAEb3tB,IAAK,CACHqG,MAAO7G,EAAO2B,MAAK,SAAU7C,GAC3B,IAAIqvB,EAASgsB,EAAWqzG,aAAa1uJ,EAAK,IACtCgyB,EAAQmpB,EAAU8yG,YAAYjuJ,EAAK,IACnC+H,EAAQ7F,EAASw4E,aAAa,CAACrrD,EAAQ2C,IAE3C,OADAjqB,EAAM3H,KAAKivB,EAAQ2C,EAAQpsB,KAAK0L,GAAK,KAC9BvJ,CACT,IACAuF,KAAMpM,EAAO2B,KAAKgkJ,EAAiB3kJ,IAGzC,CAEAM,EAAOvB,QAAUsB,C,wBC7CjB,IAAIrB,EAASL,EAAQ,OAEjB02H,EAAO12H,EAAQ,OAEnB,SAASuuJ,EAAcjnJ,EAAKtC,EAAO01C,GACjCg8E,EAAKxgH,KAAK3X,KAAM+I,EAAKtC,EAAO01C,GAU5Bn8C,KAAK0C,KAAO,QACZ1C,KAAK4yB,MAAQ,EAMb5yB,KAAKwD,KAAO,GAKZxD,KAAKi2B,KACP,CAEAn0B,EAAO6rB,SAASqiI,EAAe73B,GAC/B,IAAIh1H,EAAW6sJ,EACf5sJ,EAAOvB,QAAUsB,C,iCChCjB,IAAIrB,EAASL,EAAQ,OAEjBuuJ,EAAgBvuJ,EAAQ,OAExBw8I,EAAgBx8I,EAAQ,OAExBk3D,EAAal3D,EAAQ,OAErBiuJ,EAAcjuJ,EAAQ,MAEtB08I,EAAiBuR,EAAYvR,eAC7BQ,EAAkB+Q,EAAY/Q,gBAE9BhqG,EAAmBlzC,EAAQ,OAG/B,SAASwuJ,EAAMt/B,EAAYtuH,EAASC,GAClCtC,KAAK+pB,OAAS4mG,EAMd3wH,KAAK6Z,WAAa,GAClB7Z,KAAKkwJ,eAAiBpuJ,EAAO41B,IAAIi5F,EAAWw/B,sBAAsB,SAAUC,EAAgB3rJ,GAC1F,IAAIsE,EAAM,aAAetE,EACrBssH,EAAgB,IAAIi/B,EAAcjnJ,EAAK,IAAIk1I,GAM/C,OALAltB,EAAcvtH,KAAO4sJ,EAAeltJ,IAAI,QAExC6tH,EAAc96F,MAAQm6H,EACtBA,EAAe38I,KAAOs9G,EACtB/wH,KAAK6Z,WAAW7Y,KAAK+H,GACdgoH,CACT,GAAG/wH,MACHA,KAAKqmJ,OAAO11B,EAAYruH,GAMxBtC,KAAKmM,GAMLnM,KAAKoM,GAMLpM,KAAKyL,EAMLzL,KAAKoL,UACP,CAEA6kJ,EAAM/tJ,UAAU4tD,iBAAmB,WACjC,OAAO9vD,KAAKkwJ,cACd,EAEAD,EAAM/tJ,UAAU6D,YAAc,SAAUgI,EAAOsiJ,GAC7C,IAAIt/B,EAAgB/wH,KAAKkwJ,eAAeG,GACxC,OAAOrwJ,KAAKs7E,aAAay1C,EAAc39G,YAAYrF,GAAQsiJ,EAC7D,EAEAJ,EAAM/tJ,UAAUo5E,aAAe,SAAU3yE,EAAO0nJ,GAC9C,IAAIt/B,EAAgB/wH,KAAKkwJ,eAAeG,GACpCz9H,EAAQm+F,EAAcn+F,MACtB3mB,EAAIjM,KAAKmM,GAAKxD,EAAQnC,KAAK0sB,IAAIN,GAC/B1mB,EAAIlM,KAAKoM,GAAKzD,EAAQnC,KAAK4sB,IAAIR,GACnC,MAAO,CAAC3mB,EAAGC,EACb,EAEA+jJ,EAAM/tJ,UAAUgE,YAAc,SAAU8H,GACtC,IAAIhI,EAAKgI,EAAG,GAAKhO,KAAKmM,GAClBlG,EAAK+H,EAAG,GAAKhO,KAAKoM,GAClB6jB,EAASzpB,KAAKgnD,KAAKxnD,EAAKA,EAAKC,EAAKA,GACtCD,GAAMiqB,EACNhqB,GAAMgqB,EAQN,IAPA,IAIIqgI,EAJA/0E,EAAS/0E,KAAKo1B,OAAO31B,EAAID,GAGzBuqJ,EAAgBhqJ,IAEhBiqJ,GAAkB,EAEbv6I,EAAI,EAAGA,EAAIjW,KAAKkwJ,eAAe/7I,OAAQ8B,IAAK,CACnD,IAAI86G,EAAgB/wH,KAAKkwJ,eAAej6I,GACpC/M,EAAO1C,KAAKiH,IAAI8tE,EAASw1C,EAAcn+F,OAEvC1pB,EAAOqnJ,IACTD,EAAcv/B,EACdy/B,EAAiBv6I,EACjBs6I,EAAgBrnJ,EAEpB,CAEA,MAAO,CAACsnJ,IAAkBF,GAAeA,EAAYG,WAAWxgI,IAClE,EAEAggI,EAAM/tJ,UAAUmkJ,OAAS,SAAU11B,EAAYruH,GAC7C,IAAI+C,EAASsrH,EAAWztH,IAAI,UACxBq+B,EAAYj/B,EAAI2O,WAChBuwB,EAAal/B,EAAI4O,YACjB26H,EAAWrlI,KAAKJ,IAAIm7B,EAAWC,GAAc,EACjDxhC,KAAKmM,GAAKwsD,EAAW1oD,aAAa5K,EAAO,GAAIk8B,GAC7CvhC,KAAKoM,GAAKusD,EAAW1oD,aAAa5K,EAAO,GAAIm8B,GAC7CxhC,KAAKoL,WAAaulH,EAAWztH,IAAI,cAAgBsD,KAAK0L,GAAK,IAC3DlS,KAAKyL,EAAIktD,EAAW1oD,aAAa0gH,EAAWztH,IAAI,UAAW2oI,GAC3D/pI,EAAOU,KAAKxC,KAAKkwJ,gBAAgB,SAAUn/B,EAAetsH,GACxDssH,EAAc0E,UAAU,EAAGz1H,KAAKyL,GAChC,IAAImnB,EAAQ5yB,KAAKoL,WAAa3G,EAAM+B,KAAK0L,GAAK,EAAIlS,KAAKkwJ,eAAe/7I,OAEtEye,EAAQpsB,KAAKo1B,MAAMp1B,KAAK4sB,IAAIR,GAAQpsB,KAAK0sB,IAAIN,IAC7Cm+F,EAAcn+F,MAAQA,CACxB,GAAG5yB,KACL,EAEAiwJ,EAAM/tJ,UAAUW,OAAS,SAAUR,EAASC,GAC1C,IAAIutD,EAAgB7vD,KAAKkwJ,eACrBv/B,EAAa3wH,KAAK+pB,OACtBjoB,EAAOU,KAAKqtD,GAAe,SAAUkhE,GACnCA,EAActqH,MAAMgvH,UAAUlvH,KAAWA,IAC3C,IACAlE,EAAQ+E,iBAAiB,SAAS,SAAUspJ,EAAajsJ,GACvD,GAA4C,UAAxCisJ,EAAYxtJ,IAAI,qBAAmCb,EAAQ22C,aAAa,QAAS03G,EAAYxtJ,IAAI,iBAAmBytH,EAAxH,CAIA,IAAI/vH,EAAO8vJ,EAAYlsJ,UACvB1C,EAAOU,KAAKqtD,GAAe,SAAUkhE,GACnCA,EAActqH,MAAM0gJ,oBAAoBvmJ,EAAMmwH,EAAchoH,IAC9D,GALA,CAMF,GAAG/I,MACH,IAAImwB,EAAcwgG,EAAWztH,IAAI,eAEjC,SAASytJ,EAAiBhyH,GACxB,IAAIiyH,EAAQpqJ,KAAK0qE,IAAI,GAAI1qE,KAAKy+B,MAAMz+B,KAAKqqJ,IAAIlyH,GAAYn4B,KAAKsqJ,OAE1Dh8F,EAAIn2B,EAAWiyH,EASnB,OAPU,IAAN97F,EACFA,EAAI,EAGJA,GAAK,EAGAA,EAAI87F,CACb,CAGA9uJ,EAAOU,KAAKqtD,GAAe,SAAUkhE,EAAetsH,GAClD,IAAIssJ,EAAY5S,EAAeptB,EAActqH,MAAOsqH,EAAc96F,OAClE0oH,EAAgB5tB,EAActqH,MAAOsqH,EAAc96F,OACnD,IAAI2zB,EAAYmnE,EAAc96F,MAC1BxvB,EAAQsqH,EAActqH,MACtBuqJ,EAAWpnG,EAAU6zC,SACrBwzD,EAAWrnG,EAAU+zC,SACrBh/D,EAAWl4B,EAAM0kF,cAErB,GAAgB,MAAZ6lE,GAAgC,MAAZC,EAEtBxqJ,EAAMgvH,WAAWu7B,GAAWC,GAC5BxqJ,EAAMs4I,aAAakS,EAAWD,GAAY7gI,QACrC,GAAgB,MAAZ6gI,EAAkB,CAC3B,IAAI1qJ,EAEJ,GACEA,EAAM0qJ,EAAWryH,EAAWxO,EAC5B1pB,EAAMgvH,WAAWu7B,EAAU1qJ,GAG3BG,EAAMs4I,YAAYpgH,GAClBA,EAAWgyH,EAAiBhyH,SACrBr4B,EAAMyqJ,EAAU,IAAMhgH,SAASzqC,IAAQyqC,SAASggH,EAAU,IACrE,MAAO,GAAgB,MAAZE,EAAkB,CAC3B,IAAI7qJ,EAEJ,GACEA,EAAM6qJ,EAAWtyH,EAAWxO,EAC5B1pB,EAAMgvH,UAAUrvH,GAAM6qJ,GACtBxqJ,EAAMs4I,YAAYpgH,GAClBA,EAAWgyH,EAAiBhyH,SACrBv4B,EAAM2qJ,EAAU,IAAMhgH,SAAS3qC,IAAQ2qC,SAASggH,EAAU,IACrE,KAAO,CACL,IAAIG,EAAmBzqJ,EAAMykF,WAAW/2E,OAAS,EAE7C+8I,EAAmB/gI,IACrBwO,EAAWgyH,EAAiBhyH,IAI9B,IAAIt5B,EAASmB,KAAK8R,OAAOy4I,EAAU,GAAKA,EAAU,IAAM,EAAIpyH,GAAYA,EACpEwyH,EAAkB3qJ,KAAK8R,MAAM6X,EAAc,GAC/C1pB,EAAMgvH,UAAU98D,EAAWrgD,MAAMjT,EAAS8rJ,EAAkBxyH,GAAWg6B,EAAWrgD,MAAMjT,GAAU8qB,EAAcghI,GAAmBxyH,IACnIl4B,EAAMs4I,YAAYpgH,EACpB,CACF,GACF,EAOAsxH,EAAMp2I,WAAa,GAEnBo2I,EAAM7tJ,OAAS,SAAUC,EAASC,GAChC,IAAI8uJ,EAAY,GAYhB,OAXA/uJ,EAAQ4B,cAAc,SAAS,SAAU0sH,GACvC,IAAI5/D,EAAQ,IAAIk/F,EAAMt/B,EAAYtuH,EAASC,GAC3C8uJ,EAAUpwJ,KAAK+vD,GACf4/D,EAAWzrH,iBAAmB6rD,CAChC,IACA1uD,EAAQ+E,iBAAiB,SAAS,SAAUspJ,GACE,UAAxCA,EAAYxtJ,IAAI,sBAElBwtJ,EAAYxrJ,iBAAmBksJ,EAAUV,EAAYxtJ,IAAI,eAAiB,GAE9E,IACOkuJ,CACT,EAEAz8G,EAAiBrzC,SAAS,QAAS2uJ,GACnC,IAAI9sJ,EAAW8sJ,EACf7sJ,EAAOvB,QAAUsB,C,wBCvOjB,IAAIO,EAAUjC,EAAQ,OAElBK,EAASL,EAAQ,OAEjBm8I,EAAcn8I,EAAQ,OAEtBsG,EAAQtG,EAAQ,OAEhB2hJ,EAAuB3hJ,EAAQ,OAE/B4vJ,EAAmBzT,EAAY5qI,UAEnC,SAASs+I,EAAavgJ,EAAK2Z,GACzB,OAAO5oB,EAAOkL,SAAS,CACrB0d,KAAMA,GACL3Z,EACL,CAEA,IAAIwgJ,EAAa7tJ,EAAQiwE,qBAAqB,CAC5CjxE,KAAM,QACNkgE,cAAe,WACb,IAAIhL,EAAc53D,KAAKkD,IAAI,eACvBitB,EAAcnwB,KAAKkD,IAAI,eACvBuD,EAAQzG,KAAKkD,IAAI,SACjBktB,EAAWpwB,KAAKkD,IAAI,YACpBotB,EAAWtwB,KAAKkD,IAAI,YACpBqtB,EAAYvwB,KAAKkD,IAAI,aACrBu6I,EAAgBz9I,KAAKkD,IAAI,QACzBsuJ,EAAWxxJ,KAAKkD,IAAI,aACpBuuJ,EAAgBzxJ,KAAKkD,IAAI,kBACzBw6I,EAAU19I,KAAKkD,IAAI,WACnB0oF,EAAe5rF,KAAKkD,IAAI,gBACxBwuJ,EAAkB5vJ,EAAO41B,IAAI13B,KAAKkD,IAAI,cAAgB,IAAI,SAAUyuJ,GAE9C,MAApBA,EAAarrJ,KAAeqrJ,EAAarrJ,IAAM,IAAMqrJ,EAAavrJ,IACpEurJ,EAAavrJ,IAAM,EACU,MAApBurJ,EAAavrJ,KAAeurJ,EAAavrJ,IAAM,IAAMurJ,EAAarrJ,MAC3EqrJ,EAAarrJ,IAAM,GAGrB,IAAIsrJ,EAAiBnU,EA6BrB,GA3B0B,MAAtBkU,EAAaplJ,QACfqlJ,EAAiB9vJ,EAAOkL,SAAS,CAC/BT,MAAOolJ,EAAaplJ,OACnBkxI,IAILkU,EAAe7vJ,EAAOqwF,MAAMrwF,EAAOyiB,MAAMotI,GAAe,CACtD/5F,YAAaA,EACbznC,YAAaA,EACb1pB,MAAOA,EACP2pB,SAAUA,EACVE,SAAUA,EACVC,UAAWA,EAEX/sB,KAAMmuJ,EAAarmJ,KACnBi9E,aAAc,MACdm1D,QAASA,EAETD,cAAemU,EACfhmE,aAAcA,IACb,GAEE4lE,IACHG,EAAanuJ,KAAO,IAGO,kBAAlBiuJ,EAA4B,CACrC,IAAII,EAAUF,EAAanuJ,KAC3BmuJ,EAAanuJ,KAAOiuJ,EAAcrgI,QAAQ,UAAsB,MAAXygI,EAAkBA,EAAU,GACnF,KAAoC,oBAAlBJ,IAChBE,EAAanuJ,KAAOiuJ,EAAcE,EAAanuJ,KAAMmuJ,IAGvD,IAAI17H,EAAQn0B,EAAOyF,OAAO,IAAIQ,EAAM4pJ,EAAc,KAAM3xJ,KAAKqC,SAAU+gJ,GAIvE,OAFAntH,EAAM/xB,SAAW,QACjB+xB,EAAM6pC,eAAiB9/D,KAAK8/D,eACrB7pC,CACT,GAAGj2B,MAEHA,KAAKmwJ,mBAAqB,WACxB,OAAOuB,CACT,CACF,EACArjJ,cAAe,CACbC,OAAQ,EACRC,EAAG,EACHlJ,OAAQ,CAAC,MAAO,OAChB4qB,OAAQ,MACR7kB,WAAY,GACZ5H,KAAM,CACJknB,MAAM,GAIRktC,YAAa,CAAC,EAAG,GACjBznC,YAAa,EACbutH,QAAS,GACTj3I,OAAO,EAEPwD,MAAO,UACPmmB,SAAUtuB,EAAOqwF,MAAM,CACrBtmE,UAAW,CACTtf,MAAO,SAER8kJ,EAAiBjhI,UACpBG,UAAW+gI,EAAaD,EAAiB9gI,WAAW,GACpDD,SAAUghI,EAAaD,EAAiB/gI,UAAU,GAClDD,UAAWihI,EAAaD,EAAiBhhI,WAAW,GACpDstH,UAAW2T,EAAaD,EAAiB1T,WAAW,GAEpD7sF,UAAW,MAGX3tD,EAAWouJ,EACfnuJ,EAAOvB,QAAUsB,C,wBCtHjB,IAAIrB,EAASL,EAAQ,OAEjB82H,EAAiB92H,EAAQ,OAEzB0hJ,EAAmB1hJ,EAAQ,OAE3B2hJ,EAAuB3hJ,EAAQ,OAE/B4hJ,EAAY9qB,EAAehxH,OAAO,CACpC7E,KAAM,aACNgjD,WAAY,MAKZjyC,KAAM,KAKNvO,iBAAkB,KAKlB6nF,iBAAkB,WAChB,OAAO/sF,IACT,IAEEqO,EAAgB,CAClB+c,KAAM,KACNC,IAAK,KACLC,MAAO,KACPC,OAAQ,KACR7oB,KAAM,QACNgE,SAAU,SACVkyD,OAAQ,aACRxoC,SAAU,CACR1F,MAAM,EACNmB,UAAW,CACTtgB,MAAO,EACP7I,KAAM,UAMV42C,QAAS,CACP5uB,MAAM,GAER4F,SAAU,CACR5F,MAAM,EACNvW,OAAQ,EACR0X,UAAW,CACTtgB,MAAO,IAGXglB,UAAW,CACT7F,MAAM,EACNiU,SAAU,QAEZtO,UAAW,CACT3F,MAAM,EACNmB,UAAW,CACTnpB,KAAM,SACN+J,QAAS,MAKf,SAASg3I,EAAY1jE,EAAUlyE,GAC7B,OAAOA,EAAOnL,OAASmL,EAAOjN,KAAO,WAAa,QACpD,CAEAkB,EAAOqwF,MAAMkxD,EAAUnhJ,UAAWkhJ,GAClCD,EAAiB,SAAUE,EAAWI,EAAap1I,GACnD,IAAIlL,EAAWkgJ,EACfjgJ,EAAOvB,QAAUsB,C,uBC7EjB,IAAI2uJ,EAAarwJ,EAAQ,OAErBiiF,EAAajiF,EAAQ,MAErBq/B,EAAUr/B,EAAQ,MAElBwsB,EAAgB6S,EAAQ7S,cAa5B,SAAS8jI,EAAOnoG,EAAWvnD,EAASC,GAKlCtC,KAAKk9C,UAAY,SAQjBl9C,KAAK6Z,WAAa,CAAC,UAMnB7Z,KAAK0yH,MAAQ,KAMb1yH,KAAKw8I,MAELx8I,KAAKgsJ,MAAMpiG,EAAWvnD,EAASC,GAM/BtC,KAAKi2B,MAAQ2zB,CACf,CAEAmoG,EAAO7vJ,UAAY,CACjBQ,KAAM,aACNi/E,oBAAoB,EACpBx/E,YAAa4vJ,EAUb/F,MAAO,SAAUpiG,EAAWvnD,EAASC,GACnC,IAAIyG,EAAM/I,KAAKk9C,UACXzpC,EAAO,IAAIq+I,EAAW/oJ,EAAK26E,EAAW8xC,mBAAmB5rE,GAAY,CAAC,EAAG,GAAIA,EAAU1mD,IAAI,QAAS0mD,EAAU1mD,IAAI,aAClH60C,EAA2B,aAAdtkC,EAAK/Q,KACtB+Q,EAAKsnC,OAAShD,GAAc6R,EAAU1mD,IAAI,eAC1CuQ,EAAK4oC,QAAUuN,EAAU1mD,IAAI,WAC7BuQ,EAAKmlD,OAAShP,EAAU1mD,IAAI,UAC5B0mD,EAAUn2C,KAAOA,EACjBA,EAAKwiB,MAAQ2zB,EACbn2C,EAAKvO,iBAAmBlF,KACxBA,KAAK0yH,MAAQj/G,CACf,EAOA5Q,OAAQ,SAAUR,EAASC,GACzBD,EAAQ4gF,YAAW,SAAU5+E,GAC3B,GAAIA,EAAYa,mBAAqBlF,KAAM,CACzC,IAAIY,EAAOyD,EAAYG,UACnBuE,EAAM/I,KAAKk9C,UAEfl9C,KAAK0yH,MAAMjsH,MAAM0gJ,oBAAoBvmJ,EAAMyD,EAAYijC,kBAAkBv+B,IAEzE26E,EAAWi7D,gBAAgB3+I,KAAK0yH,MAAMjsH,MAAOzG,KAAK0yH,MAAMz8F,MAC1D,CACF,GAAGj2B,KACL,EAQAqmJ,OAAQ,SAAUz8F,EAAWtnD,GAC3BtC,KAAKw8I,MAAQvuH,EAAc,CACzB7C,KAAMw+B,EAAU1mD,IAAI,QACpBmoB,IAAKu+B,EAAU1mD,IAAI,OACnBooB,MAAOs+B,EAAU1mD,IAAI,SACrBqoB,OAAQq+B,EAAU1mD,IAAI,UACtBqI,MAAOq+C,EAAU1mD,IAAI,SACrB8I,OAAQ49C,EAAU1mD,IAAI,WACrB,CACDqI,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,cAGdlR,KAAKgyJ,aACP,EAKAlhJ,QAAS,WACP,OAAO9Q,KAAKw8I,KACd,EAKAwV,YAAa,WACX,IAAItnJ,EAAO1K,KAAKw8I,MACZ/oI,EAAOzT,KAAK0yH,MACZ5pH,EAAe2K,EAAK3K,eACpBsT,EAAStT,EAAe,CAAC,EAAG4B,EAAKa,OAAS,CAAC,EAAGb,EAAKsB,QACnDvH,EAAMgP,EAAKD,QAAU,EAAI,EAC7BC,EAAKgiH,UAAUr5G,EAAO3X,GAAM2X,EAAO,EAAI3X,IAEvCzE,KAAKiyJ,qBAAqBx+I,EAAM3K,EAAe4B,EAAKuB,EAAIvB,EAAKwB,EAC/D,EAMA+lJ,qBAAsB,SAAUx+I,EAAMyyI,GACpC,IAAI1uE,EAAa/jE,EAAKiJ,YAClBw1I,EAAY16E,EAAW,GAAKA,EAAW,GACvC1uE,EAAe2K,EAAK3K,eACxB2K,EAAKN,cAAgBrK,EAAe,SAAUH,GAC5C,OAAOA,EAAQu9I,CACjB,EAAI,SAAUv9I,GACZ,OAAOupJ,EAAYvpJ,EAAQu9I,CAC7B,EACAzyI,EAAK6pG,aAAex0G,EAAe,SAAUH,GAC3C,OAAOA,EAAQu9I,CACjB,EAAI,SAAUv9I,GACZ,OAAOupJ,EAAYvpJ,EAAQu9I,CAC7B,CACF,EAOAn/G,QAAS,WACP,OAAO/mC,KAAK0yH,KACd,EAOA7pH,YAAa,WACX,OAAO7I,KAAK0yH,KACd,EAKA5wC,QAAS,WACP,MAAO,CAAC9hF,KAAK0yH,MACf,EAKA1wC,eAAgB,WACd,MAAO,CACLI,SAAU,CAACpiF,KAAK+mC,WAEpB,EAQAwmB,aAAc,SAAUznD,GACtB,IAAI4E,EAAO1K,KAAK8Q,UACZ2C,EAAOzT,KAAK+mC,UACZ6xB,EAASnlD,EAAKmlD,OAElB,MAAe,eAAXA,EACKnlD,EAAKqpB,QAAQrpB,EAAK6pG,aAAax3G,EAAM,MAAQA,EAAM,IAAM4E,EAAKwB,GAAKpG,EAAM,IAAM4E,EAAKwB,EAAIxB,EAAKsB,OAE7FyH,EAAKqpB,QAAQrpB,EAAK6pG,aAAax3G,EAAM,MAAQA,EAAM,IAAM4E,EAAKwB,GAAKpG,EAAM,IAAM4E,EAAKwB,EAAIxB,EAAKsB,MAExG,EAMA9F,YAAa,SAAUJ,GACrB,IAAI2N,EAAOzT,KAAK+mC,UAChB,MAAO,CAACtzB,EAAK67E,YAAY77E,EAAK6pG,aAAax3G,EAAsB,eAAhB2N,EAAKmlD,OAA0B,EAAI,KACtF,EAQA7yD,YAAa,SAAUoY,GACrB,IAAI1K,EAAOzT,KAAK+mC,UACZr8B,EAAO1K,KAAK8Q,UACZ9C,EAAK,GACLvJ,EAAsB,eAAhBgP,EAAKmlD,OAA0B,EAAI,EAQ7C,OANIz6C,aAAekhB,QACjBlhB,EAAMA,EAAI,IAGZnQ,EAAGvJ,GAAOgP,EAAKN,cAAcM,EAAKL,aAAa+K,IAC/CnQ,EAAG,EAAIvJ,GAAe,IAARA,EAAYiG,EAAKwB,EAAIxB,EAAKsB,OAAS,EAAItB,EAAKuB,EAAIvB,EAAKa,MAAQ,EACpEyC,CACT,GAEF,IAAI7K,EAAW4uJ,EACf3uJ,EAAOvB,QAAUsB,C,wBCrPjB,IAAIrB,EAASL,EAAQ,OAEjB02H,EAAO12H,EAAQ,OAWfqwJ,EAAa,SAAU/oJ,EAAKtC,EAAO2xH,EAAalhF,EAAUxwC,GAC5DyxH,EAAKxgH,KAAK3X,KAAM+I,EAAKtC,EAAO2xH,GAU5Bp4H,KAAK0C,KAAOw0C,GAAY,QAUxBl3C,KAAK0G,SAAWA,GAAY,SAQ5B1G,KAAK44D,OAAS,KAKd54D,KAAK27I,eAAiB,IACxB,EAEAmW,EAAW5vJ,UAAY,CACrBC,YAAa2vJ,EAMb77H,MAAO,KAMPntB,aAAc,WACZ,IAAIpC,EAAW1G,KAAK0G,SACpB,MAAoB,QAAbA,GAAmC,WAAbA,CAC/B,EAKAR,YAAa,SAAUJ,EAAO81I,GAC5B,OAAO57I,KAAKkF,iBAAiBgB,YAAYJ,EAAO81I,GAAO,EACzD,EAQAzoI,cAAe,KAOfmqG,aAAc,MAEhBx7G,EAAO6rB,SAASmkI,EAAY35B,GAC5B,IAAIh1H,EAAW2uJ,EACf1uJ,EAAOvB,QAAUsB,C,wBC5FjB,IAAIrB,EAASL,EAAQ,OAErB,SAASgmJ,EAAgBC,EAAU/jG,GAEjC,IAAIlwC,EAAOzT,KAAK+mC,UACZ5oB,EAAMwlC,aAAoBtkB,MAAQskB,EAAS,GAAKA,EAChDgkG,GAAYD,aAAoBroH,MAAQqoH,EAAS,GAAKA,GAAY,EACtE,MAAqB,aAAdj0I,EAAK/Q,KAAsB+Q,EAAK+I,eAAiBhW,KAAKiH,IAAIgG,EAAKL,YAAY+K,EAAMwpI,GAAYl0I,EAAKL,YAAY+K,EAAMwpI,GAC7H,CAEA,SAASxkJ,EAASL,GAChB,IAAI4H,EAAO5H,EAASgO,UACpB,MAAO,CACLhO,SAAU,CACRJ,KAAM,aACNuJ,EAAGvB,EAAKuB,EACRC,EAAGxB,EAAKwB,EACRX,MAAOb,EAAKa,MACZS,OAAQtB,EAAKsB,QAEf1J,IAAK,CACHqG,MAAO7G,EAAO2B,KAAKX,EAASiD,YAAajD,GACzCoL,KAAMpM,EAAO2B,KAAKgkJ,EAAiB3kJ,IAGzC,CAEAM,EAAOvB,QAAUsB,C,iCC3BjB,IAAI4uJ,EAAStwJ,EAAQ,MAEjBkzC,EAAmBlzC,EAAQ,OAa/B,SAASW,EAAOC,EAASC,GACvB,IAAI6vJ,EAAU,GAkBd,OAjBA9vJ,EAAQ4B,cAAc,cAAc,SAAU2lD,EAAWnlD,GACvD,IAAIuzC,EAAS,IAAI+5G,EAAOnoG,EAAWvnD,EAASC,GAC5C01C,EAAOx0C,KAAO,UAAYiB,EAC1BuzC,EAAOquG,OAAOz8F,EAAWtnD,GACzBsnD,EAAU1kD,iBAAmB8yC,EAC7Bm6G,EAAQnxJ,KAAKg3C,EACf,IACA31C,EAAQ4gF,YAAW,SAAU5+E,GAC3B,GAA4C,eAAxCA,EAAYnB,IAAI,oBAAsC,CACxD,IAAI20C,EAAkBx1C,EAAQg1C,gBAAgB,CAC5CnzC,SAAU,aACVoM,MAAOjM,EAAYnB,IAAI,mBACvBmjB,GAAIhiB,EAAYnB,IAAI,kBACnB,GACHmB,EAAYa,iBAAmB2yC,GAAmBA,EAAgB3yC,gBACpE,CACF,IACOitJ,CACT,CAEAx9G,EAAiBrzC,SAAS,SAAU,CAClCc,OAAQA,EACRyX,WAAYk4I,EAAO7vJ,UAAU2X,Y,wBCvC/B,SAASu4I,EAAiB9pI,GACxB,OAAOA,CACT,CAUA,SAASjG,EAAWgwI,EAAQC,EAAQC,EAAcC,EAAc/6I,GAC9DzX,KAAKyyJ,KAAOJ,EACZryJ,KAAK0yJ,KAAOJ,EACZtyJ,KAAK2yJ,cAAgBJ,GAAgBH,EACrCpyJ,KAAK4yJ,cAAgBJ,GAAgBJ,EACrCpyJ,KAAKyX,QAAUA,CACjB,CAsFA,SAASo7I,EAAar/D,EAAK97D,EAAKo7H,EAAQC,EAAe76F,GACrD,IAAK,IAAIjiD,EAAI,EAAGA,EAAIu9E,EAAIr/E,OAAQ8B,IAAK,CAEnC,IAAItU,EAAM,OAASu2D,EAAW66F,GAAev/D,EAAIv9E,GAAIA,GACjD+8I,EAAYt7H,EAAI/1B,GAEH,MAAbqxJ,GACFF,EAAO9xJ,KAAKW,GACZ+1B,EAAI/1B,GAAOsU,IAEN+8I,EAAU7+I,SACbujB,EAAI/1B,GAAOqxJ,EAAY,CAACA,IAG1BA,EAAUhyJ,KAAKiV,GAEnB,CACF,C,kBArGAoM,EAAWngB,UAAY,CACrBC,YAAakgB,EAKblZ,IAAK,SAAU8pJ,GAEb,OADAjzJ,KAAKkzJ,KAAOD,EACLjzJ,IACT,EAKA6C,OAAQ,SAAUowJ,GAEhB,OADAjzJ,KAAKmzJ,QAAUF,EACRjzJ,IACT,EAKAkK,OAAQ,SAAU+oJ,GAEhB,OADAjzJ,KAAKozJ,QAAUH,EACRjzJ,IACT,EACAqK,QAAS,WACP,IAAIgoJ,EAASryJ,KAAKyyJ,KACdH,EAAStyJ,KAAK0yJ,KACdW,EAAkB,CAAC,EACnBC,EAAkB,CAAC,EACnBC,EAAgB,GAChBC,EAAgB,GAOpB,IALAX,EAAaR,EAAQgB,EAAiBE,EAAe,gBAAiBvzJ,MACtE6yJ,EAAaP,EAAQgB,EAAiBE,EAAe,gBAAiBxzJ,MAIjEiW,EAAI,EAAGA,EAAIo8I,EAAOl+I,OAAQ8B,IAAK,CAClC,IAAItU,EAAM4xJ,EAAct9I,GACpBxR,EAAM6uJ,EAAgB3xJ,GAE1B,GAAW,MAAP8C,EAAa,CAGf,IAAI+pB,EAAM/pB,EAAI0P,OAEVqa,GACM,IAARA,IAAc8kI,EAAgB3xJ,GAAO,MACrC8C,EAAMA,EAAI20C,WAEVk6G,EAAgB3xJ,GAAO,KAGzB3B,KAAKmzJ,SAAWnzJ,KAAKmzJ,QAAQ1uJ,EAAKwR,EACpC,MACEjW,KAAKozJ,SAAWpzJ,KAAKozJ,QAAQn9I,EAEjC,CAEA,IAAK,IAAIA,EAAI,EAAGA,EAAIu9I,EAAcr/I,OAAQ8B,IAAK,CACzCtU,EAAM6xJ,EAAcv9I,GAExB,GAAIq9I,EAAgB1xJ,eAAeD,GAAM,CACnC8C,EAAM6uJ,EAAgB3xJ,GAE1B,GAAW,MAAP8C,EACF,SAIF,GAAKA,EAAI0P,OAGF,KAAImf,EAAI,EAAb,IAAgB9E,EAAM/pB,EAAI0P,OAAQmf,EAAI9E,EAAK8E,IACzCtzB,KAAKkzJ,MAAQlzJ,KAAKkzJ,KAAKzuJ,EAAI6uB,GADHnf,MAF1BnU,KAAKkzJ,MAAQlzJ,KAAKkzJ,KAAKzuJ,EAM3B,CACF,CACF,GAsBF,IAAItB,EAAWkf,EACfjf,EAAOvB,QAAUsB,C,+BC5HjB,IAAIuE,EAAUjG,EAAQ,OAIlBK,GAFU4F,EAAQC,QAETlG,EAAQ,QASrB,SAASgyJ,EAAgBptI,GACvB,MAAO,OAASA,CAClB,CAQA,IAAIouB,EAAQ,SAAUG,GAMpB50C,KAAK0zJ,UAAY9+G,IAAY,EAM7B50C,KAAK21B,MAAQ,GAMb31B,KAAKq1B,MAAQ,GAMbr1B,KAAK2zJ,UAAY,CAAC,EAMlB3zJ,KAAK4zJ,UAAY,CAAC,EAMlB5zJ,KAAKY,KAMLZ,KAAK+1B,QACP,EAEI89H,EAAap/G,EAAMvyC,UAqSvB,SAAS4xJ,EAAKztI,EAAI9hB,GAIhBvE,KAAKqmB,GAAW,MAANA,EAAa,GAAKA,EAK5BrmB,KAAKizD,QAAU,GAKfjzD,KAAK8yD,SAAW,GAKhB9yD,KAAKq1B,MAAQ,GAKbr1B,KAAK+zJ,UAKL/zJ,KAAKuE,UAAyB,MAAbA,GAAqB,EAAIA,CAC5C,CAgDA,SAASyvJ,EAAKzxH,EAAIC,EAAIj+B,GAKpBvE,KAAKq3B,MAAQkL,EAMbviC,KAAKu3B,MAAQiL,EACbxiC,KAAKuE,UAAyB,MAAbA,GAAqB,EAAIA,CAC5C,CA3XAsvJ,EAAWnxJ,KAAO,QAMlBmxJ,EAAWI,WAAa,WACtB,OAAOj0J,KAAK0zJ,SACd,EAQAG,EAAWh/G,QAAU,SAAUxuB,EAAI9hB,GACjC8hB,EAAKA,GAAM,GAAK9hB,EAChB,IAAI2vJ,EAAWl0J,KAAK2zJ,UAEpB,IAAIO,EAAST,EAAgBptI,IAA7B,CAIA,IAAI2V,EAAO,IAAI83H,EAAKztI,EAAI9hB,GAIxB,OAHAy3B,EAAK+3H,UAAY/zJ,KACjBA,KAAK21B,MAAM30B,KAAKg7B,GAChBk4H,EAAST,EAAgBptI,IAAO2V,EACzBA,CANP,CAOF,EAQA63H,EAAW53H,eAAiB,SAAU13B,GACpC,IAAI4vJ,EAASn0J,KAAKY,KAAKgmB,YAAYriB,GACnC,OAAOvE,KAAK21B,MAAMw+H,EACpB,EAQAN,EAAWhnF,YAAc,SAAUxmD,GACjC,OAAOrmB,KAAK2zJ,UAAUF,EAAgBptI,GACxC,EAUAwtI,EAAW1+G,QAAU,SAAU5S,EAAIC,EAAIj+B,GACrC,IAAI2vJ,EAAWl0J,KAAK2zJ,UAChBS,EAAWp0J,KAAK4zJ,UAkBpB,GAhBkB,kBAAPrxH,IACTA,EAAKviC,KAAK21B,MAAM4M,IAGA,kBAAPC,IACTA,EAAKxiC,KAAK21B,MAAM6M,IAGZD,aAAcuxH,IAClBvxH,EAAK2xH,EAAST,EAAgBlxH,KAG1BC,aAAcsxH,IAClBtxH,EAAK0xH,EAAST,EAAgBjxH,KAG3BD,GAAOC,EAAZ,CAIA,IAAI7gC,EAAM4gC,EAAGlc,GAAK,IAAMmc,EAAGnc,GAE3B,IAAI+tI,EAASzyJ,GAAb,CAIA,IAAIu1B,EAAO,IAAI88H,EAAKzxH,EAAIC,EAAIj+B,GAgB5B,OAfA2yB,EAAK68H,UAAY/zJ,KAEbA,KAAK0zJ,YACPnxH,EAAGuwB,SAAS9xD,KAAKk2B,GACjBsL,EAAGywB,QAAQjyD,KAAKk2B,IAGlBqL,EAAGlN,MAAMr0B,KAAKk2B,GAEVqL,IAAOC,GACTA,EAAGnN,MAAMr0B,KAAKk2B,GAGhBl3B,KAAKq1B,MAAMr0B,KAAKk2B,GAChBk9H,EAASzyJ,GAAOu1B,EACTA,CAlBP,CANA,CAyBF,EAQA28H,EAAW18H,eAAiB,SAAU5yB,GACpC,IAAI4vJ,EAASn0J,KAAK+1B,SAASnP,YAAYriB,GACvC,OAAOvE,KAAKq1B,MAAM8+H,EACpB,EASAN,EAAWQ,QAAU,SAAU9xH,EAAIC,GAC7BD,aAAcuxH,IAChBvxH,EAAKA,EAAGlc,IAGNmc,aAAcsxH,IAChBtxH,EAAKA,EAAGnc,IAGV,IAAI+tI,EAAWp0J,KAAK4zJ,UAEpB,OAAI5zJ,KAAK0zJ,UACAU,EAAS7xH,EAAK,IAAMC,GAEpB4xH,EAAS7xH,EAAK,IAAMC,IAAO4xH,EAAS5xH,EAAK,IAAMD,EAE1D,EAQAsxH,EAAW33H,SAAW,SAAU1kB,EAAIC,GAIlC,IAHA,IAAIke,EAAQ31B,KAAK21B,MACbnH,EAAMmH,EAAMxhB,OAEP8B,EAAI,EAAGA,EAAIuY,EAAKvY,IACnB0f,EAAM1f,GAAG1R,WAAa,GACxBiT,EAAGG,KAAKF,EAASke,EAAM1f,GAAIA,EAGjC,EAQA49I,EAAWx4H,SAAW,SAAU7jB,EAAIC,GAIlC,IAHA,IAAI4d,EAAQr1B,KAAKq1B,MACb7G,EAAM6G,EAAMlhB,OAEP8B,EAAI,EAAGA,EAAIuY,EAAKvY,IACnBof,EAAMpf,GAAG1R,WAAa,GAAK8wB,EAAMpf,GAAGohB,MAAM9yB,WAAa,GAAK8wB,EAAMpf,GAAGshB,MAAMhzB,WAAa,GAC1FiT,EAAGG,KAAKF,EAAS4d,EAAMpf,GAAIA,EAGjC,EAUA49I,EAAWS,qBAAuB,SAAU98I,EAAI+8I,EAAW5uF,EAAWluD,GAKpE,GAJM88I,aAAqBT,IACzBS,EAAYv0J,KAAK2zJ,UAAUF,EAAgBc,KAGxCA,EAAL,CAMA,IAFA,IAAIpnD,EAAyB,QAAdxnC,EAAsB,WAA2B,OAAdA,EAAqB,UAAY,QAE1E1vD,EAAI,EAAGA,EAAIjW,KAAK21B,MAAMxhB,OAAQ8B,IACrCjW,KAAK21B,MAAM1f,GAAGu+I,WAAY,EAG5B,IAAIh9I,EAAGG,KAAKF,EAAS88I,EAAW,MAAhC,CAIA,IAAIE,EAAQ,CAACF,GAEb,MAAOE,EAAMtgJ,OACX,KAAIugJ,EAAcD,EAAMr3F,QACpB/nC,EAAQq/H,EAAYvnD,GAExB,IAASl3F,EAAI,EAAGA,EAAIof,EAAMlhB,OAAQ8B,IAAK,CACrC,IAAIymB,EAAIrH,EAAMpf,GACV0+I,EAAYj4H,EAAErF,QAAUq9H,EAAch4H,EAAEnF,MAAQmF,EAAErF,MAEtD,IAAKs9H,EAAUH,UAAW,CACxB,GAAIh9I,EAAGG,KAAKF,EAASk9I,EAAWD,GAE9B,OAGFD,EAAMzzJ,KAAK2zJ,GACXA,EAAUH,WAAY,CACxB,CACF,CAhB+B,CALjC,CAVA,CAiCF,EAQAX,EAAWhxJ,OAAS,WAMlB,IALA,IAAIjC,EAAOZ,KAAKY,KACZm1B,EAAW/1B,KAAK+1B,SAChBJ,EAAQ31B,KAAK21B,MACbN,EAAQr1B,KAAKq1B,MAERpf,EAAI,EAAGuY,EAAMmH,EAAMxhB,OAAQ8B,EAAIuY,EAAKvY,IAC3C0f,EAAM1f,GAAG1R,WAAa,EAGxB,IAAS0R,EAAI,EAAGuY,EAAM5tB,EAAKoW,QAASf,EAAIuY,EAAKvY,IAC3C0f,EAAM/0B,EAAKgmB,YAAY3Q,IAAI1R,UAAY0R,EAGzC8f,EAASmK,YAAW,SAAUz7B,GAC5B,IAAIyyB,EAAO7B,EAAMU,EAASnP,YAAYniB,IACtC,OAAOyyB,EAAKG,MAAM9yB,WAAa,GAAK2yB,EAAKK,MAAMhzB,WAAa,CAC9D,IAEA,IAAS0R,EAAI,EAAGuY,EAAM6G,EAAMlhB,OAAQ8B,EAAIuY,EAAKvY,IAC3Cof,EAAMpf,GAAG1R,WAAa,EAGxB,IAAS0R,EAAI,EAAGuY,EAAMuH,EAAS/e,QAASf,EAAIuY,EAAKvY,IAC/Cof,EAAMU,EAASnP,YAAY3Q,IAAI1R,UAAY0R,CAE/C,EAMA49I,EAAWtvI,MAAQ,WAKjB,IAJA,IAAIqS,EAAQ,IAAI6d,EAAMz0C,KAAK0zJ,WACvB/9H,EAAQ31B,KAAK21B,MACbN,EAAQr1B,KAAKq1B,MAERpf,EAAI,EAAGA,EAAI0f,EAAMxhB,OAAQ8B,IAChC2gB,EAAMie,QAAQlf,EAAM1f,GAAGoQ,GAAIsP,EAAM1f,GAAG1R,WAGtC,IAAS0R,EAAI,EAAGA,EAAIof,EAAMlhB,OAAQ8B,IAAK,CACrC,IAAIymB,EAAIrH,EAAMpf,GACd2gB,EAAMue,QAAQzY,EAAErF,MAAMhR,GAAIqW,EAAEnF,MAAMlR,GAAIqW,EAAEn4B,UAC1C,CAEA,OAAOqyB,CACT,EAsCAk9H,EAAK5xJ,UAAY,CACfC,YAAa2xJ,EAKbc,OAAQ,WACN,OAAO50J,KAAKq1B,MAAMlhB,MACpB,EAKA0gJ,SAAU,WACR,OAAO70J,KAAKizD,QAAQ9+C,MACtB,EAKA2gJ,UAAW,WACT,OAAO90J,KAAK8yD,SAAS3+C,MACvB,EAMAxH,SAAU,SAAUqI,GAClB,KAAIhV,KAAKuE,UAAY,GAArB,CAIA,IAAIqyB,EAAQ52B,KAAK+zJ,UACb1qJ,EAAYutB,EAAMh2B,KAAK0I,aAAatJ,KAAKuE,WAC7C,OAAO8E,EAAUsD,SAASqI,EAJ1B,CAKF,GA8BFg/I,EAAK9xJ,UAAUyK,SAAW,SAAUqI,GAClC,KAAIhV,KAAKuE,UAAY,GAArB,CAIA,IAAIqyB,EAAQ52B,KAAK+zJ,UACb1qJ,EAAYutB,EAAMb,SAASzsB,aAAatJ,KAAKuE,WACjD,OAAO8E,EAAUsD,SAASqI,EAJ1B,CAKF,EAEA,IAAI+/I,EAA4B,SAAUC,EAAU5uC,GAClD,MAAO,CAKL5lF,SAAU,SAAU0c,GAClB,IAAIt8C,EAAOZ,KAAKg1J,GAAU5uC,GAC1B,OAAOxlH,EAAKsC,IAAItC,EAAKkmB,aAAao2B,GAAa,SAAUl9C,KAAKuE,UAChE,EAMA8C,UAAW,SAAU1F,EAAKoM,GACxB/N,KAAKuE,WAAa,GAAKvE,KAAKg1J,GAAU5uC,GAAU/mG,cAAcrf,KAAKuE,UAAW5C,EAAKoM,EACrF,EAMAwrB,UAAW,SAAU53B,EAAKszJ,GACxB,OAAOj1J,KAAKg1J,GAAU5uC,GAAU55G,cAAcxM,KAAKuE,UAAW5C,EAAKszJ,EACrE,EAMAx0H,UAAW,SAAUl3B,EAAQ4oF,GAC3BnyF,KAAKuE,WAAa,GAAKvE,KAAKg1J,GAAU5uC,GAAUxnG,cAAc5e,KAAKuE,UAAWgF,EAAQ4oF,EACxF,EAKA3oF,UAAW,WACT,OAAOxJ,KAAKg1J,GAAU5uC,GAAUz6G,cAAc3L,KAAKuE,UACrD,EAKAm1B,aAAc,WACZ,OAAO15B,KAAKg1J,GAAU5uC,GAAUr8G,iBAAiB/J,KAAKuE,UACxD,EAKAqiB,YAAa,WACX,OAAO5mB,KAAKg1J,GAAU5uC,GAAUx/F,YAAY5mB,KAAKuE,UACnD,EAEJ,EAEAzC,EAAO0Y,MAAMs5I,EAAMiB,EAA0B,YAAa,SAC1DjzJ,EAAO0Y,MAAMw5I,EAAMe,EAA0B,YAAa,aAC1DtgH,EAAMq/G,KAAOA,EACbr/G,EAAMu/G,KAAOA,EACb,IAAI7wJ,EAAWsxC,EACfrxC,EAAOvB,QAAUsB,C,2DCphBjB,IAAIuE,EAAUjG,EAAQ,OAIlBK,GAFU4F,EAAQC,QAETlG,EAAQ,QAEjBsG,EAAQtG,EAAQ,OAEhB4gB,EAAa5gB,EAAQ,OAErB84C,EAAY94C,EAAQ,OAMpBugB,EAAWlgB,EAAOkgB,SAClBkzI,EAAY,YACZC,SAAmBhsF,SAAW+rF,EAAYhgB,EAAAA,EAAS/rE,OACnDisF,EAAY,CACd,aAAgBD,EAAUE,eAAiBH,EAAY71H,MAAQ81H,EAAUE,aACzE,WAAcF,EAAUG,aAAeJ,EAAY71H,MAAQ81H,EAAUG,WAErE,QAAWj2H,MACX,OAAUA,MACV,KAAQA,OAENk2H,EAA0B,CAAC,YAAa,gBAAiB,YAAa,UAAW,YAErF,SAASC,EAAmB/mI,EAAGC,GAC7B5sB,EAAOU,KAAK+yJ,EAAwB3yJ,OAAO8rB,EAAE+mI,kBAAoB,KAAK,SAAU5oH,GAC1Ene,EAAE9sB,eAAeirC,KACnBpe,EAAEoe,GAAYne,EAAEme,GAEpB,IACApe,EAAEgnI,iBAAmB/mI,EAAE+mI,gBACzB,CAEA,SAASC,EAAoBC,GAC3B31J,KAAK41J,OAASD,GAAa,EAC7B,CAEAD,EAAoBxzJ,UAAU2zJ,MAAO,EAErCH,EAAoBxzJ,UAAU8U,MAAQ,WACpC,OAAOhX,KAAK41J,OAAOzhJ,MACrB,EAEAuhJ,EAAoBxzJ,UAAU4zJ,QAAU,SAAUrxJ,GAChD,OAAOzE,KAAK41J,OAAOnxJ,EACrB,EAYA,IAAIqlB,EAAO,SAAUjQ,EAAY6S,GAC/B7S,EAAaA,GAAc,CAAC,IAAK,KAIjC,IAHA,IAAIk8I,EAAiB,CAAC,EAClB1gH,EAAiB,GAEZp/B,EAAI,EAAGA,EAAI4D,EAAW1F,OAAQ8B,IAAK,CAC1C,IAAI+/I,EACAC,EAAgB,CAAC,EAEQ,kBAAlBp8I,EAAW5D,IACpB+/I,EAAgBn8I,EAAW5D,GAC3BggJ,EAAgB,CACdzyJ,KAAMwyJ,EACNv4I,SAAUu4I,EACVruI,cAAe,EACf+vB,WAAW,EAGXh1C,KAAM,YAGRuzJ,EAAgBp8I,EAAW5D,GAC3B+/I,EAAgBC,EAAczyJ,KAC9ByyJ,EAAcvzJ,KAAOuzJ,EAAcvzJ,MAAQ,SAEtCuzJ,EAAcx4I,WACjBw4I,EAAcx4I,SAAWu4I,EACzBC,EAActuI,cAAgB,IAIlCsuI,EAAc58G,UAAY48G,EAAc58G,WAAa,CAAC,EACtDhE,EAAer0C,KAAKg1J,GACpBD,EAAeC,GAAiBC,CAClC,CAOAj2J,KAAK6Z,WAAaw7B,EAMlBr1C,KAAKk2J,gBAAkBH,EAKvB/1J,KAAK0sB,UAAYA,EAKjB1sB,KAAKi3B,SAQLj3B,KAAKsuB,QAAU,GAOftuB,KAAK+kE,SAAW,CAAC,EAKjB/kE,KAAKm2J,UAAY,GAKjBn2J,KAAKo2J,QAAU,GAOfp2J,KAAKq2J,cAAgB,GAKrBr2J,KAAKu7C,UAAY,KAOjBv7C,KAAKs2J,QAAU,CAAC,EAOhBt2J,KAAK8gC,QAAU,CAAC,EAOhB9gC,KAAKu2J,aAAe,GAOpBv2J,KAAKw2J,aAAe,GAOpBx2J,KAAKy2J,YAAc,GAMnBz2J,KAAK02J,SAML12J,KAAK07I,OACP,EAEIib,EAAY7sI,EAAK5nB,UAwdrB,SAAS00J,EAAoB/8I,GAK3B,OAJK/X,EAAO6Q,QAAQkH,KAClBA,EAAa,CAACA,IAGTA,CACT,CAkIA,SAASg9I,EAAyBn3B,EAAUo3B,GAC1C,IAAIC,EAAgBr3B,EAAS7lH,WACzBlX,EAAO,IAAImnB,EAAKhoB,EAAO41B,IAAIq/H,EAAer3B,EAASliH,iBAAkBkiH,GAAWA,EAAShzG,WAE7F8oI,EAAmB7yJ,EAAM+8H,GAIzB,IAHA,IAAIn4D,EAAU5kE,EAAKoiE,SAAW,CAAC,EAC3BiyF,EAAkBt3B,EAAS36D,SAEtB9uD,EAAI,EAAGA,EAAI8gJ,EAAc5iJ,OAAQ8B,IAAK,CAC7C,IAAIlN,EAAMguJ,EAAc9gJ,GACpBghJ,EAAWD,EAAgBjuJ,GAE3BjH,EAAOqa,QAAQ26I,EAAmB/tJ,IAAQ,EAC5Cw+D,EAAQx+D,GAAO,IAAIkuJ,EAAS90J,YAAY60J,EAAgBjuJ,GAAKoL,QAG7DozD,EAAQx+D,GAAOiuJ,EAAgBjuJ,EAEnC,CAEA,OAAOpG,CACT,CApnBAg0J,EAAUj0J,KAAO,OAMjBi0J,EAAUlvH,eAAgB,EAS1BkvH,EAAU7vI,aAAe,SAAU/d,GAKjC,OAJKsV,MAAMtV,KACTA,EAAM/I,KAAK6Z,WAAW9Q,IAAQA,GAGzBA,CACT,EASA4tJ,EAAUn5I,iBAAmB,SAAUzU,GACrC,OAAOjH,EAAOyiB,MAAMvkB,KAAKk2J,gBAAgBl2J,KAAK8mB,aAAa/d,IAC7D,EASA4tJ,EAAUrsI,SAAW,SAAU1pB,EAAM81C,EAAUE,GAC7Ch2C,EAAOA,GAAQ,GACf,IAAIs2J,EAAcp1J,EAAO6Q,QAAQ/R,GAE7Bs2J,IACFt2J,EAAO,IAAI80J,EAAoB90J,IAGjCZ,KAAK02J,SAAW91J,EAEhB,IAOIu2J,EAPA5vF,EAAUvnE,KAAK+kE,SAAW,CAAC,EAC3Bz2C,EAAUtuB,KAAKsuB,QAAU,GACzBzU,EAAa7Z,KAAK6Z,WAClBu9I,EAAmBp3J,KAAKk2J,gBACxBhoJ,EAAOtN,EAAKoW,QACZqgJ,EAAS,GACTC,EAAkB,CAAC,EAEvB5gH,EAAWA,GAAY,GAEvB,IAAK,IAAIzgC,EAAI,EAAGA,EAAI4D,EAAW1F,OAAQ8B,IAAK,CAC1C,IAAIsH,EAAU65I,EAAiBv9I,EAAW5D,IACX,IAA/BsH,EAAQ87B,UAAUk+G,WAAmBJ,EAAalhJ,GAClD,IAAIuhJ,EAAWpC,EAAU73I,EAAQ7a,MACjC6kE,EAAQ1tD,EAAW5D,IAAM,IAAIuhJ,EAAStpJ,EACxC,CAEA,IAAI0nB,EAAO51B,KAEN42C,IACHhhB,EAAK6R,eAAgB,GAIvBmP,EAAiBA,GAAkB,SAAU+M,EAAUrmC,EAAS/Y,EAAWuyC,GACzE,IAAI/oC,EAAQwsC,EAAU5E,iBAAiBgO,GAMvC,OAJIpJ,EAAU1E,iBAAiB8N,KAC7B/tB,EAAK6R,eAAgB,GAGhB8S,EAAU3E,gBAAgB7nC,aAAiBsxB,MAAQtxB,EAAM+oC,GAC9D/oC,EAAOqpJ,EAAiB95I,GAC5B,EAEA,IAASrH,EAAI,EAAGA,EAAI/H,EAAM+H,IAAK,CAU7B,IARA,IAAI0tC,EAAW/iD,EAAKk1J,QAAQ7/I,GAQnBosC,EAAI,EAAGA,EAAIxoC,EAAW1F,OAAQkuC,IAAK,CAC1C,IAAIt5C,EAAM8Q,EAAWwoC,GACjBo1G,EAAalwF,EAAQx+D,GAEzB0uJ,EAAWxhJ,GAAK2gC,EAAe+M,EAAU56C,EAAKkN,EAAGosC,EACnD,CAEA/zB,EAAQttB,KAAKiV,EACf,CAGA,IAASA,EAAI,EAAGA,EAAI/H,EAAM+H,IAAK,CACzB0tC,EAAW/iD,EAAKk1J,QAAQ7/I,IAEvBygC,EAASzgC,IAAM0tC,IACG,MAAjBA,EAASngD,KACXkzC,EAASzgC,GAAK0tC,EAASngD,KACA,MAAd2zJ,IACTzgH,EAASzgC,GAAKsxD,EAAQ1tD,EAAWs9I,IAAalhJ,KAIlD,IAAIzS,EAAOkzC,EAASzgC,IAAM,GAEtBoQ,EAAKs9B,GAAYA,EAASt9B,IAEzBA,GAAM7iB,IAET8zJ,EAAgB9zJ,GAAQ8zJ,EAAgB9zJ,IAAS,EACjD6iB,EAAK7iB,EAED8zJ,EAAgB9zJ,GAAQ,IAC1B6iB,GAAM,SAAWixI,EAAgB9zJ,IAGnC8zJ,EAAgB9zJ,MAGlB6iB,IAAOgxI,EAAOphJ,GAAKoQ,EACrB,CAEArmB,KAAKm2J,UAAYz/G,EACjB12C,KAAKo2J,QAAUiB,CACjB,EAMAV,EAAU3/I,MAAQ,WAChB,OAAOhX,KAAKsuB,QAAQna,MACtB,EAUAwiJ,EAAUzzJ,IAAM,SAAU6F,EAAKtE,EAAKkL,GAClC,IAAI43D,EAAUvnE,KAAK+kE,SACfxgE,EAAYvE,KAAKsuB,QAAQ7pB,GAE7B,GAAiB,MAAbF,IAAsBgjE,EAAQx+D,GAChC,OAAOqF,IAGT,IAAIL,EAAQw5D,EAAQx+D,GAAKxE,GAEzB,GAAIoL,EAAO,CACT,IAAIsmJ,EAAgBj2J,KAAKk2J,gBAAgBntJ,GAEzC,GAAIktJ,GAAiBA,EAAcv+G,UAAW,CAC5C,IAAI6D,EAAYv7C,KAAKu7C,UAErB,MAAOA,EAAW,CAEhB,IAAIm8G,EAAen8G,EAAUr4C,IAAI6F,EAAKtE,IAElCsJ,GAAS,GAAK2pJ,EAAe,GACjC3pJ,GAAS,GAAK2pJ,EAAe,KAEzB3pJ,GAAS2pJ,GAGbn8G,EAAYA,EAAUA,SACxB,CACF,CACF,CAEA,OAAOxtC,CACT,EAUA4oJ,EAAU12E,UAAY,SAAUpmE,EAAYpV,EAAKkL,GAC/C,IAAIkkD,EAAS,GAER/xD,EAAO6Q,QAAQkH,KAClBlK,EAAQlL,EACRA,EAAMoV,EACNA,EAAa7Z,KAAK6Z,YAGpB,IAAK,IAAI5D,EAAI,EAAGuY,EAAM3U,EAAW1F,OAAQ8B,EAAIuY,EAAKvY,IAChD49C,EAAO7yD,KAAKhB,KAAKkD,IAAI2W,EAAW5D,GAAIxR,EAAKkL,IAG3C,OAAOkkD,CACT,EASA8iG,EAAUvtJ,SAAW,SAAU3E,GAI7B,IAHA,IAAIoV,EAAa7Z,KAAK6Z,WAClBk8I,EAAiB/1J,KAAKk2J,gBAEjBjgJ,EAAI,EAAGuY,EAAM3U,EAAW1F,OAAQ8B,EAAIuY,EAAKvY,IAChD,GACuC,YAAvC8/I,EAAel8I,EAAW5D,IAAIvT,MAAsB2b,MAAMre,KAAKkD,IAAI2W,EAAW5D,GAAIxR,IAChF,OAAO,EAIX,OAAO,CACT,EASAkyJ,EAAUpnI,cAAgB,SAAUxmB,EAAK4G,EAAO4iD,GAC9CxpD,EAAM/I,KAAK8mB,aAAa/d,GACxB,IAAI4uJ,EAAU33J,KAAK+kE,SAASh8D,GACxBwU,EAAUvd,KAAKwd,iBAAiBzU,GACpC4G,EAAQ4N,GAAWA,EAAQm6B,WAAa/nC,EACxC,IACI5B,EADA6pJ,GAAa53J,KAAK07I,UAAY17I,KAAK07I,QAAU,CAAC,IAAI3yI,IAAQ4G,GAG9D,GAAIioJ,EACF,OAAOA,EAIT,GAAID,EAAS,CAIX,IAHA,IAAIvxJ,EAAMG,IACND,GAAOC,IAEF0P,EAAI,EAAGuY,EAAMxuB,KAAKgX,QAASf,EAAIuY,EAAKvY,IAC3ClI,EAAQ/N,KAAKkD,IAAI6F,EAAKkN,EAAGtG,GAKpB4iD,IAAUA,EAAOxkD,EAAOhF,EAAKkN,KAChClI,EAAQ3H,IAAQA,EAAM2H,GACtBA,EAAQzH,IAAQA,EAAMyH,IAI1B,OAAO/N,KAAK07I,QAAQ3yI,IAAQ4G,GAAS,CAACvJ,EAAKE,EAC7C,CACE,MAAO,CAACC,KAAWA,IAEvB,EAQAowJ,EAAU3rI,OAAS,SAAUjiB,EAAK4G,GAChC,IAAIgoJ,EAAU33J,KAAK+kE,SAASh8D,GACxBgiB,EAAM,EAEV,GAAI4sI,EACF,IAAK,IAAI1hJ,EAAI,EAAGuY,EAAMxuB,KAAKgX,QAASf,EAAIuY,EAAKvY,IAAK,CAChD,IAAIlI,EAAQ/N,KAAKkD,IAAI6F,EAAKkN,EAAGtG,GAExB0O,MAAMtQ,KACTgd,GAAOhd,EAEX,CAGF,OAAOgd,CACT,EAUA4rI,EAAUx6I,QAAU,SAAUpT,EAAKgF,GACjC,IAAIw5D,EAAUvnE,KAAK+kE,SACf4yF,EAAUpwF,EAAQx+D,GAClBulB,EAAUtuB,KAAKsuB,QAEnB,GAAIqpI,EACF,IAAK,IAAI1hJ,EAAI,EAAGuY,EAAMF,EAAQna,OAAQ8B,EAAIuY,EAAKvY,IAAK,CAClD,IAAIkrC,EAAW7yB,EAAQrY,GAEvB,GAAI0hJ,EAAQx2G,KAAcpzC,EACxB,OAAOkI,CAEX,CAGF,OAAQ,CACV,EASA0gJ,EAAUpwG,YAAc,SAAU/iD,GAIhC,IAHA,IAAI8qB,EAAUtuB,KAAKsuB,QACfooB,EAAW12C,KAAKm2J,UAEXlgJ,EAAI,EAAGuY,EAAMF,EAAQna,OAAQ8B,EAAIuY,EAAKvY,IAAK,CAClD,IAAIkrC,EAAW7yB,EAAQrY,GAEvB,GAAIygC,EAASyK,KAAc39C,EACzB,OAAOyS,CAEX,CAEA,OAAQ,CACV,EASA0gJ,EAAUkB,gBAAkB,SAAU12G,GAEpC,IAAI7yB,EAAUtuB,KAAKsuB,QAEfwpI,EAAexpI,EAAQ6yB,GAE3B,GAAoB,MAAhB22G,GAAwBA,IAAiB32G,EAC3C,OAAOA,EAGT,IAAI/1B,EAAO,EACPE,EAAQgD,EAAQna,OAAS,EAE7B,MAAOiX,GAAQE,EAAO,CACpB,IAAIysI,GAAO3sI,EAAOE,GAAS,EAAI,EAE/B,GAAIgD,EAAQypI,GAAO52G,EACjB/1B,EAAO2sI,EAAM,MACR,MAAIzpI,EAAQypI,GAAO52G,GAGxB,OAAO42G,EAFPzsI,EAAQysI,EAAM,CAGhB,CACF,CAEA,OAAQ,CACV,EAWApB,EAAUl4E,iBAAmB,SAAU11E,EAAKgF,EAAO4B,EAAOqoJ,GACxD,IAAIzwF,EAAUvnE,KAAK+kE,SACf4yF,EAAUpwF,EAAQx+D,GAClBkvJ,EAAiB,GAErB,IAAKN,EACH,OAAOM,EAGU,MAAfD,IACFA,EAAczxJ,KAMhB,IAHA,IAAI8wD,EAAUpJ,OAAOC,UACjBowB,GAAW,EAENroE,EAAI,EAAGuY,EAAMxuB,KAAKgX,QAASf,EAAIuY,EAAKvY,IAAK,CAChD,IAAI/M,EAAO6E,EAAQ/N,KAAKkD,IAAI6F,EAAKkN,EAAGtG,GAChC26B,EAAO9jC,KAAKiH,IAAIvE,GAEhBA,GAAQ8uJ,GAAe1tH,GAAQ+sB,KAI7B/sB,EAAO+sB,GAAWnuD,GAAQ,GAAKo1E,EAAU,KAC3CjnB,EAAU/sB,EACVg0C,EAAUp1E,EACV+uJ,EAAe9jJ,OAAS,GAG1B8jJ,EAAej3J,KAAKiV,GAExB,CAEA,OAAOgiJ,CACT,EAQAtB,EAAU/vI,YAAc,SAAUniB,GAChC,IAAI0vJ,EAASn0J,KAAKsuB,QAAQ7pB,GAC1B,OAAiB,MAAV0vJ,GAAkB,EAAIA,CAC/B,EAQAwC,EAAUt8F,eAAiB,SAAU51D,GACnC,OAAOzE,KAAK02J,SAASZ,QAAQ91J,KAAK4mB,YAAYniB,GAChD,EAQAkyJ,EAAUjyJ,QAAU,SAAUD,GAC5B,OAAOzE,KAAKm2J,UAAUn2J,KAAKsuB,QAAQ7pB,KAAS,EAC9C,EAQAkyJ,EAAU3zH,MAAQ,SAAUv+B,GAC1B,OAAOzE,KAAKo2J,QAAQp2J,KAAKsuB,QAAQ7pB,KAASzE,KAAK4mB,YAAYniB,GAAO,EACpE,EAuBAkyJ,EAAUn0J,KAAO,SAAUu+C,EAAMvpC,EAAI7H,EAAO8H,GACtB,oBAATspC,IACTtpC,EAAU9H,EACVA,EAAQ6H,EACRA,EAAKupC,EACLA,EAAO,IAGTA,EAAOj/C,EAAO41B,IAAIk/H,EAAoB71G,GAAO/gD,KAAK8mB,aAAc9mB,MAChE,IAAI+N,EAAQ,GACRmqJ,EAAUn3G,EAAK5sC,OACfma,EAAUtuB,KAAKsuB,QACnB7W,EAAUA,GAAWzX,KAErB,IAAK,IAAIiW,EAAI,EAAGA,EAAIqY,EAAQna,OAAQ8B,IAElC,OAAQiiJ,GACN,KAAK,EACH1gJ,EAAGG,KAAKF,EAASxB,GACjB,MAEF,KAAK,EACHuB,EAAGG,KAAKF,EAASzX,KAAKkD,IAAI69C,EAAK,GAAI9qC,EAAGtG,GAAQsG,GAC9C,MAEF,KAAK,EACHuB,EAAGG,KAAKF,EAASzX,KAAKkD,IAAI69C,EAAK,GAAI9qC,EAAGtG,GAAQ3P,KAAKkD,IAAI69C,EAAK,GAAI9qC,EAAGtG,GAAQsG,GAC3E,MAEF,QACE,IAAK,IAAIosC,EAAI,EAAGA,EAAI61G,EAAS71G,IAC3Bt0C,EAAMs0C,GAAKriD,KAAKkD,IAAI69C,EAAKsB,GAAIpsC,EAAGtG,GAIlC5B,EAAMs0C,GAAKpsC,EACXuB,EAAGsrD,MAAMrrD,EAAS1J,GAG1B,EAUA4oJ,EAAUz2H,WAAa,SAAUrmB,EAAYrC,EAAI7H,EAAO8H,GAC5B,oBAAfoC,IACTpC,EAAU9H,EACVA,EAAQ6H,EACRA,EAAKqC,EACLA,EAAa,IAGfA,EAAa/X,EAAO41B,IAAIk/H,EAAoB/8I,GAAa7Z,KAAK8mB,aAAc9mB,MAC5E,IAAI6sI,EAAa,GACb9+H,EAAQ,GACRmqJ,EAAUr+I,EAAW1F,OACrBma,EAAUtuB,KAAKsuB,QACnB7W,EAAUA,GAAWzX,KAErB,IAAK,IAAIiW,EAAI,EAAGA,EAAIqY,EAAQna,OAAQ8B,IAAK,CACvC,IAAI8mH,EAEJ,GAAKm7B,EAEE,GAAgB,IAAZA,EACTn7B,EAAOvlH,EAAGG,KAAKF,EAASzX,KAAKkD,IAAI2W,EAAW,GAAI5D,EAAGtG,GAAQsG,OACtD,CACL,IAAK,IAAIosC,EAAI,EAAGA,EAAI61G,EAAS71G,IAC3Bt0C,EAAMs0C,GAAKriD,KAAKkD,IAAI2W,EAAWwoC,GAAIpsC,EAAGtG,GAGxC5B,EAAMs0C,GAAKpsC,EACX8mH,EAAOvlH,EAAGsrD,MAAMrrD,EAAS1J,EAC3B,MAVEgvH,EAAOvlH,EAAGG,KAAKF,EAASxB,GAYtB8mH,GACF8P,EAAW7rI,KAAKstB,EAAQrY,GAE5B,CAKA,OAHAjW,KAAKsuB,QAAUu+G,EAEf7sI,KAAK07I,QAAU,CAAC,EACT17I,IACT,EAWA22J,EAAUtoI,SAAW,SAAUxU,EAAYrC,EAAI7H,EAAO8H,GAC1B,oBAAfoC,IACTpC,EAAU9H,EACVA,EAAQ6H,EACRA,EAAKqC,EACLA,EAAa,IAGf,IAAIoC,EAAS,GAIb,OAHAjc,KAAKwC,KAAKqX,GAAY,WACpBoC,EAAOjb,KAAKwW,GAAMA,EAAGsrD,MAAM9iE,KAAM6P,WACnC,GAAGF,EAAO8H,GACHwE,CACT,EAkCA06I,EAAUj/H,IAAM,SAAU7d,EAAYrC,EAAI7H,EAAO8H,GAC/CoC,EAAa/X,EAAO41B,IAAIk/H,EAAoB/8I,GAAa7Z,KAAK8mB,aAAc9mB,MAC5E,IAAI2C,EAAOk0J,EAAyB72J,KAAM6Z,GAGtCyU,EAAU3rB,EAAK2rB,QAAUtuB,KAAKsuB,QAC9Bi5C,EAAU5kE,EAAKoiE,SACfozF,EAAc,GAuBlB,OAtBAn4J,KAAKwC,KAAKqX,GAAY,WACpB,IAAIpV,EAAMoL,UAAUA,UAAUsE,OAAS,GACnCikJ,EAAW5gJ,GAAMA,EAAGsrD,MAAM9iE,KAAM6P,WAEpC,GAAgB,MAAZuoJ,EAAkB,CAEI,kBAAbA,IACTD,EAAY,GAAKC,EACjBA,EAAWD,GAGb,IAAK,IAAIliJ,EAAI,EAAGA,EAAImiJ,EAASjkJ,OAAQ8B,IAAK,CACxC,IAAIlN,EAAM8Q,EAAW5D,GACjBghJ,EAAW1vF,EAAQx+D,GACnBorJ,EAAS7lI,EAAQ7pB,GAEjBwyJ,IACFA,EAAS9C,GAAUiE,EAASniJ,GAEhC,CACF,CACF,GAAGtG,EAAO8H,GACH9U,CACT,EAUAg0J,EAAU0B,WAAa,SAAUn7G,EAAWo7G,EAAMC,EAAaC,GAY7D,IAXA,IAAI71J,EAAOk0J,EAAyB72J,KAAM,CAACk9C,IACvCqqB,EAAUvnE,KAAK+kE,SACf0zF,EAAgB91J,EAAKoiE,SACrB2zF,EAAkB14J,KAAKsuB,QACvBA,EAAU3rB,EAAK2rB,QAAU,GACzBqqI,EAAc,GACdC,EAAe,GACfC,EAAYryJ,KAAKy+B,MAAM,EAAIqzH,GAC3BrB,EAAWwB,EAAcv7G,GACzB1uB,EAAMxuB,KAAKgX,QAENf,EAAI,EAAGA,EAAIsxD,EAAQrqB,GAAW/oC,OAAQ8B,IAC7CwiJ,EAAcv7G,GAAWjnC,GAAKsxD,EAAQrqB,GAAWjnC,GAGnD,IAASA,EAAI,EAAGA,EAAIuY,EAAKvY,GAAK4iJ,EAAW,CAEnCA,EAAYrqI,EAAMvY,IACpB4iJ,EAAYrqI,EAAMvY,EAClB0iJ,EAAYxkJ,OAAS0kJ,GAGvB,IAAK,IAAIx2G,EAAI,EAAGA,EAAIw2G,EAAWx2G,IAAK,CAClC,IAAI59C,EAAMi0J,EAAgBziJ,EAAIosC,GAC9Bs2G,EAAYt2G,GAAK40G,EAASxyJ,GAC1Bm0J,EAAav2G,GAAK59C,CACpB,CAEA,IAAIsJ,EAAQwqJ,EAAYI,GACpBl0J,EAAMm0J,EAAaJ,EAAYG,EAAa5qJ,IAAU,GAE1DkpJ,EAASxyJ,GAAOsJ,EAChBugB,EAAQttB,KAAKyD,EACf,CAEA,OAAO9B,CACT,EASAg0J,EAAUrtJ,aAAe,SAAU7E,GACjC,IAAIioB,EAAY1sB,KAAK0sB,UAErB,OADAjoB,EAAMzE,KAAKsuB,QAAQ7pB,GACZ,IAAIsD,EAAM/H,KAAK02J,SAASZ,QAAQrxJ,GAAMioB,EAAWA,GAAaA,EAAUrqB,QACjF,EAQAs0J,EAAUztJ,KAAO,SAAU4vJ,GACzB,IAEI36I,EAFAk5I,EAASr3J,KAAKo2J,QACd2C,EAAcD,GAAaA,EAAU1C,QAIrC4C,EAAS,QACb,OAAO,IAAI32I,EAAWy2I,EAAYA,EAAUxqI,QAAU,GAAItuB,KAAKsuB,SAAS,SAAU7pB,GAChF,OAAmC,OAA3B0Z,EAAM46I,EAAYt0J,IAAgB0Z,EAAM66I,EAASv0J,CAC3D,IAAG,SAAUA,GACX,OAA8B,OAAtB0Z,EAAMk5I,EAAO5yJ,IAAgB0Z,EAAM66I,EAASv0J,CACtD,GACF,EAOAkyJ,EAAUp9H,UAAY,SAAU53B,GAC9B,IAAIokB,EAAS/lB,KAAKs2J,QAClB,OAAOvwI,GAAUA,EAAOpkB,EAC1B,EAcAg1J,EAAUtvJ,UAAY,SAAU1F,EAAKwc,GACnC,GAAI6D,EAASrgB,GACX,IAAK,IAAI6B,KAAQ7B,EACXA,EAAIC,eAAe4B,IACrBxD,KAAKqH,UAAU7D,EAAM7B,EAAI6B,SAO/BxD,KAAKs2J,QAAUt2J,KAAKs2J,SAAW,CAAC,EAChCt2J,KAAKs2J,QAAQ30J,GAAOwc,CACtB,EAQAw4I,EAAUl2H,UAAY,SAAU9+B,EAAKwc,GACnC,GAAI6D,EAASrgB,GACX,IAAK,IAAI6B,KAAQ7B,EACXA,EAAIC,eAAe4B,IACrBxD,KAAKygC,UAAUj9B,EAAM7B,EAAI6B,SAO/BxD,KAAK8gC,QAAQn/B,GAAOwc,CACtB,EAQAw4I,EAAUntJ,UAAY,SAAU7H,GAC9B,OAAO3B,KAAK8gC,QAAQn/B,EACtB,EAOAg1J,EAAUhrJ,cAAgB,SAAUlH,GAClC,OAAOzE,KAAKw2J,aAAa/xJ,EAC3B,EASAkyJ,EAAU/3I,cAAgB,SAAUna,EAAK8E,EAAQ4oF,GAC/CnyF,KAAKw2J,aAAa/xJ,GAAO0tF,EAAQrwF,EAAOyF,OAAOvH,KAAKw2J,aAAa/xJ,IAAQ,CAAC,EAAG8E,GAAUA,CACzF,EAMAotJ,EAAUsC,iBAAmB,WAC3Bj5J,KAAKw2J,aAAariJ,OAAS,CAC7B,EASAwiJ,EAAUnqJ,cAAgB,SAAU/H,EAAK9C,EAAKszJ,GAC5C,IAAIiE,EAAal5J,KAAKu2J,aAAa9xJ,GAC/B0Z,EAAM+6I,GAAcA,EAAWv3J,GAEnC,OAAW,MAAPwc,GAAgB82I,EAKb92I,EAHEne,KAAKu5B,UAAU53B,EAI1B,EAgBAg1J,EAAUt3I,cAAgB,SAAU5a,EAAK9C,EAAKoM,GAC5C,IAAImrJ,EAAal5J,KAAKu2J,aAAa9xJ,IAAQ,CAAC,EAG5C,GAFAzE,KAAKu2J,aAAa9xJ,GAAOy0J,EAErBl3I,EAASrgB,GACX,IAAK,IAAI6B,KAAQ7B,EACXA,EAAIC,eAAe4B,KACrB01J,EAAW11J,GAAQ7B,EAAI6B,SAO7B01J,EAAWv3J,GAAOoM,CACpB,EAMA4oJ,EAAUwC,eAAiB,WACzBn5J,KAAKs2J,QAAU,CAAC,EAChBt2J,KAAKu2J,aAAe,EACtB,EAEA,IAAI6C,EAA4B,SAAU5wI,GACxCA,EAAMtJ,YAAclf,KAAKkf,YACzBsJ,EAAMjkB,UAAYvE,KAAKuE,UACvBikB,EAAMyO,SAAWj3B,KAAKi3B,QACxB,EAQA0/H,EAAUhtJ,iBAAmB,SAAUlF,EAAKgF,GAC1C,IAAIijB,EAAY1sB,KAAK0sB,UAEjBjjB,IAGFA,EAAGlF,UAAYE,EACfgF,EAAGwtB,SAAWj3B,KAAKi3B,SACnBxtB,EAAGyV,YAAcwN,GAAaA,EAAUxN,YAExB,UAAZzV,EAAG/G,MACL+G,EAAGmwB,SAASw/H,EAA2B3vJ,IAI3CzJ,KAAKy2J,YAAYhyJ,GAAOgF,CAC1B,EAOAktJ,EAAU5sJ,iBAAmB,SAAUtF,GACrC,OAAOzE,KAAKy2J,YAAYhyJ,EAC1B,EAOAkyJ,EAAUrsJ,kBAAoB,SAAUkN,EAAIC,GAC1C3V,EAAOU,KAAKxC,KAAKy2J,aAAa,SAAUhtJ,EAAIhF,GACtCgF,GACF+N,GAAMA,EAAGG,KAAKF,EAAShO,EAAIhF,EAE/B,GACF,EAOAkyJ,EAAU5tG,aAAe,WACvB,IAAIswG,EAAoBv3J,EAAO41B,IAAI13B,KAAK6Z,WAAY7Z,KAAKwd,iBAAkBxd,MACvE2C,EAAO,IAAImnB,EAAKuvI,EAAmBr5J,KAAK0sB,WAW5C,OATA/pB,EAAKoiE,SAAW/kE,KAAK+kE,SACrBywF,EAAmB7yJ,EAAM3C,MAEzB2C,EAAK2rB,QAAUtuB,KAAKsuB,QAAQtrB,QAExBhD,KAAK07I,UACP/4I,EAAK+4I,QAAU55I,EAAOyF,OAAO,CAAC,EAAGvH,KAAK07I,UAGjC/4I,CACT,EAQAg0J,EAAU3gI,WAAa,SAAUm0F,EAAYmvC,GAC3C,IAAIC,EAAiBv5J,KAAKmqH,GAEI,oBAAnBovC,IAIXv5J,KAAKy1J,iBAAmBz1J,KAAKy1J,kBAAoB,GAEjDz1J,KAAKy1J,iBAAiBz0J,KAAKmpH,GAE3BnqH,KAAKmqH,GAAc,WACjB,IAAIhlH,EAAMo0J,EAAez2F,MAAM9iE,KAAM6P,WACrC,OAAOypJ,EAAex2F,MAAM9iE,KAAM,CAACmF,GAAKvC,OAAOd,EAAOkB,MAAM6M,YAC9D,EACF,EAIA8mJ,EAAU6C,qBAAuB,CAAC,eAAgB,aAAc,OAEhE7C,EAAU8C,kBAAoB,CAAC,cAC/B,IAAIt2J,EAAW2mB,EACf1mB,EAAOvB,QAAUsB,C,iCC/rCjB,IAAIrB,EAASL,EAAQ,OAEjBsG,EAAQtG,EAAQ,OAEhBqoB,EAAOroB,EAAQ,OAEfizC,EAAWjzC,EAAQ,MAEnBwoB,EAAqBxoB,EAAQ,OAa7Bi4J,EAAW,SAAUl2J,EAAM42D,GAI7Bp6D,KAAKwD,KAAOA,GAAQ,GAQpBxD,KAAKg6D,MAAQ,EAObh6D,KAAKgM,OAAS,EAMdhM,KAAKwvC,WAAa,KAYlBxvC,KAAKuE,WAAa,EAMlBvE,KAAK0X,SAAW,GAMhB1X,KAAKqnE,aAAe,GAMpBrnE,KAAKo6D,SAAWA,CAClB,EAyOA,SAASX,EAAK/sC,EAAWitI,EAAcC,GAKrC55J,KAAK05D,KAML15D,KAAKY,KAOLZ,KAAK65J,OAAS,GAOd75J,KAAK0sB,UAAYA,EAOjB1sB,KAAK6xE,YAAc/vE,EAAO41B,IAAIiiI,GAAgB,IAAI,SAAU/1F,GAC1D,OAAO,IAAI77D,EAAM67D,EAAal3C,EAAWA,EAAUrqB,QACrD,IACArC,KAAK85J,YAAc,IAAI/xJ,EAAM6xJ,GAAgB,CAAC,EAAGltI,EAAWA,EAAUrqB,QACxE,CA4IA,SAAS03J,EAASvxI,EAAOwT,GACvB,IAAItkB,EAAWskB,EAAKtkB,SAEhB8Q,EAAMgnB,aAAexT,IAIzBtkB,EAAS1W,KAAKwnB,GACdA,EAAMgnB,WAAaxT,EACrB,CAhaA09H,EAASx3J,UAAY,CACnBC,YAAau3J,EAMbpyF,UAAW,WACT,OAAOtnE,KAAKuE,UAAY,CAC1B,EAoBA23B,SAAU,SAAUmyC,EAAS72D,EAAIC,GACR,oBAAZ42D,IACT52D,EAAUD,EACVA,EAAK62D,EACLA,EAAU,MAGZA,EAAUA,GAAW,CAAC,EAElBvsE,EAAOwiF,SAASjW,KAClBA,EAAU,CACR/E,MAAO+E,IAIX,IAEI2rF,EAFA1wF,EAAQ+E,EAAQ/E,OAAS,WACzB5xD,EAAW1X,KAAKquE,EAAQjhE,MAAQ,YAE1B,aAAVk8D,IAAyB0wF,EAAmBxiJ,EAAGG,KAAKF,EAASzX,OAE7D,IAAK,IAAIiW,EAAI,GAAI+jJ,GAAoB/jJ,EAAIyB,EAASvD,OAAQ8B,IACxDyB,EAASzB,GAAGimB,SAASmyC,EAAS72D,EAAIC,GAG1B,cAAV6xD,GAAyB9xD,EAAGG,KAAKF,EAASzX,KAC5C,EAOAi6J,qBAAsB,SAAUjgG,GAC9B,IAAIhuD,EAAS,EACbhM,KAAKg6D,MAAQA,EAEb,IAAK,IAAI/jD,EAAI,EAAGA,EAAIjW,KAAK0X,SAASvD,OAAQ8B,IAAK,CAC7C,IAAIuS,EAAQxoB,KAAK0X,SAASzB,GAC1BuS,EAAMyxI,qBAAqBjgG,EAAQ,GAE/BxxC,EAAMxc,OAASA,IACjBA,EAASwc,EAAMxc,OAEnB,CAEAhM,KAAKgM,OAASA,EAAS,CACzB,EAMA6gE,YAAa,SAAUxmD,GACrB,GAAIrmB,KAAKgjC,UAAY3c,EACnB,OAAOrmB,KAGT,IAAK,IAAIiW,EAAI,EAAGyB,EAAW1X,KAAK0X,SAAU8W,EAAM9W,EAASvD,OAAQ8B,EAAIuY,EAAKvY,IAAK,CAC7E,IAAI9Q,EAAMuS,EAASzB,GAAG42D,YAAYxmD,GAElC,GAAIlhB,EACF,OAAOA,CAEX,CACF,EAMAm+D,SAAU,SAAUtnC,GAClB,GAAIA,IAASh8B,KACX,OAAO,EAGT,IAAK,IAAIiW,EAAI,EAAGyB,EAAW1X,KAAK0X,SAAU8W,EAAM9W,EAASvD,OAAQ8B,EAAIuY,EAAKvY,IAAK,CAC7E,IAAI9Q,EAAMuS,EAASzB,GAAGqtD,SAAStnC,GAE/B,GAAI72B,EACF,OAAOA,CAEX,CACF,EAMA6sE,aAAc,SAAUkoF,GACtB,IAAIC,EAAY,GACZn+H,EAAOk+H,EAAcl6J,KAAOA,KAAKwvC,WAErC,MAAOxT,EACLm+H,EAAUn5J,KAAKg7B,GACfA,EAAOA,EAAKwT,WAId,OADA2qH,EAAU3mJ,UACH2mJ,CACT,EAMA35H,SAAU,SAAU0c,GAClB,IAAIt8C,EAAOZ,KAAKo6D,SAASx5D,KACzB,OAAOA,EAAKsC,IAAItC,EAAKkmB,aAAao2B,GAAa,SAAUl9C,KAAKuE,UAChE,EAMAk8B,UAAW,SAAUl3B,EAAQ4oF,GAC3BnyF,KAAKuE,WAAa,GAAKvE,KAAKo6D,SAASx5D,KAAKge,cAAc5e,KAAKuE,UAAWgF,EAAQ4oF,EAClF,EAKA3oF,UAAW,WACT,OAAOxJ,KAAKo6D,SAASx5D,KAAK+K,cAAc3L,KAAKuE,UAC/C,EAMAoI,SAAU,SAAUqI,GAClB,KAAIhV,KAAKuE,UAAY,GAArB,CAIA,IAGIu1J,EAHA1/F,EAAWp6D,KAAKo6D,SAChB/wD,EAAY+wD,EAASx5D,KAAK0I,aAAatJ,KAAKuE,WAC5CutE,EAAa9xE,KAAKo6J,gBAOtB,OAJKtoF,GAAwC,IAAzB9xE,KAAK0X,SAASvD,SAAyC,IAAzBnU,KAAK0X,SAASvD,SAAkC,IAAlBnU,KAAKs6D,YACnFw/F,EAAc95J,KAAKq6J,kBAGdhxJ,EAAUsD,SAASqI,GAAO88D,GAAcgoF,GAAe1/F,EAAS1tC,WAAW/f,SAASqI,GAX3F,CAYF,EAKAolJ,cAAe,WACb,OAAQp6J,KAAKo6D,SAASyX,aAAe,IAAI7xE,KAAKg6D,MAChD,EAKAqgG,eAAgB,WACd,OAAOr6J,KAAKo6D,SAAS0/F,WACvB,EASAzyJ,UAAW,SAAU1F,EAAKoM,GACxB/N,KAAKuE,WAAa,GAAKvE,KAAKo6D,SAASx5D,KAAKye,cAAcrf,KAAKuE,UAAW5C,EAAKoM,EAC/E,EAKAwrB,UAAW,SAAU53B,EAAKszJ,GACxB,OAAOj1J,KAAKo6D,SAASx5D,KAAK4L,cAAcxM,KAAKuE,UAAW5C,EAAKszJ,EAC/D,EAMAruI,YAAa,WACX,OAAO5mB,KAAKo6D,SAASx5D,KAAKgmB,YAAY5mB,KAAKuE,UAC7C,EAMAy+B,MAAO,WACL,OAAOhjC,KAAKo6D,SAASx5D,KAAKoiC,MAAMhjC,KAAKuE,UACvC,GAgDFk1D,EAAKv3D,UAAY,CACfC,YAAas3D,EACb/2D,KAAM,OAmBNw5B,SAAU,SAAUmyC,EAAS72D,EAAIC,GAC/BzX,KAAK05D,KAAKx9B,SAASmyC,EAAS72D,EAAIC,EAClC,EAMAgjD,mBAAoB,SAAUl2D,GAC5B,IAAI48C,EAAWnhD,KAAKY,KAAKgmB,YAAYriB,GACrC,OAAOvE,KAAK65J,OAAO14G,EACrB,EAMAm5G,cAAe,SAAU92J,GACvB,OAAOxD,KAAK05D,KAAK4gG,cAAc92J,EACjC,EAMAX,OAAQ,WAIN,IAHA,IAAIjC,EAAOZ,KAAKY,KACZ+0B,EAAQ31B,KAAK65J,OAER5jJ,EAAI,EAAGuY,EAAMmH,EAAMxhB,OAAQ8B,EAAIuY,EAAKvY,IAC3C0f,EAAM1f,GAAG1R,WAAa,EAGxB,IAAS0R,EAAI,EAAGuY,EAAM5tB,EAAKoW,QAASf,EAAIuY,EAAKvY,IAC3C0f,EAAM/0B,EAAKgmB,YAAY3Q,IAAI1R,UAAY0R,CAE3C,EAKAq4D,aAAc,WACZtuE,KAAKY,KAAKq4J,kBACZ,GA0BFx/F,EAAKK,WAAa,SAAUygG,EAAU7tI,EAAW8tI,GAC/C,IAAI3gG,EAAO,IAAIJ,EAAK/sC,EAAW8tI,EAAY/3F,OAAQ+3F,EAAY7gG,QAC3D8gG,EAAW,GACXC,EAAS,EAGb,SAASC,EAAep3F,EAAU/zB,GAChC,IAAIzhC,EAAQw1D,EAASx1D,MACrB2sJ,EAASl0J,KAAKF,IAAIo0J,EAAQ54J,EAAO6Q,QAAQ5E,GAASA,EAAMoG,OAAS,GACjEsmJ,EAASz5J,KAAKuiE,GACd,IAAIvnC,EAAO,IAAI09H,EAASn2F,EAAS//D,KAAMq2D,GACvCrqB,EAAauqH,EAAS/9H,EAAMwT,GAAcqqB,EAAKH,KAAO19B,EAEtD69B,EAAKggG,OAAO74J,KAAKg7B,GAEjB,IAAItkB,EAAW6rD,EAAS7rD,SAExB,GAAIA,EACF,IAAK,IAAIzB,EAAI,EAAGA,EAAIyB,EAASvD,OAAQ8B,IACnC0kJ,EAAejjJ,EAASzB,GAAI+lB,EAGlC,CAlBA2+H,EAAeJ,GAoBf1gG,EAAKH,KAAKugG,qBAAqB,GAC/B,IAAIpgJ,EAAaoQ,EAAmB,CAAC,CACnCzmB,KAAM,UACJi3J,EAAU,CACZlhH,SAAUmhH,IAER/3J,EAAO,IAAImnB,EAAKjQ,EAAY6S,GAQhC,OAPA/pB,EAAK2nB,SAASmwI,GACd/lH,EAAS,CACPY,SAAU3yC,EACV4yC,OAAQskB,EACRrkB,WAAY,SAEdqkB,EAAKh3D,SACEg3D,CACT,EAoBA,IAAI12D,EAAWs2D,EACfr2D,EAAOvB,QAAUsB,C,iCClfjB,IAAIrB,EAASL,EAAQ,OAEjBsoB,EAAStoB,EAAQ,OAEjBsgG,EAAmBh4E,EAAOg4E,iBAK1Bv/F,EAAOV,EAAOU,KACd8hF,EAAWxiF,EAAOwiF,SAClBt3E,EAAWlL,EAAOkL,SAClB4tJ,EAAa,CACfthH,QAAS,EACT3uB,MAAO,EACP4sI,SAAU,GAsCZ,SAASttI,EAAmB4wI,EAASj6J,EAAMmQ,GACzCnQ,EAAOA,GAAQ,GACfmQ,EAAMA,GAAO,CAAC,EACd8pJ,GAAWA,GAAW,IAAI73J,QAC1B,IAAIszC,GAAWvlC,EAAIulC,SAAW,IAAItzC,QAC9BukB,EAAYzlB,EAAO40D,cAAc3lD,EAAIwW,WACrCuzI,EAAiBh5J,EAAO40D,gBACxBqkG,EAAkBj5J,EAAO40D,gBAEzBz6C,EAAS,GACTs9B,EAAWxoC,EAAIwoC,SAEnB,GAAgB,MAAZA,EAAkB,CACpB,IAAIyhH,EAASztF,EAAc3sE,EAAK,IAChC24C,EAAW/yC,KAAKF,IAAIxE,EAAO6Q,QAAQqoJ,IAAWA,EAAO7mJ,QAAU,EAAG0mJ,EAAQ1mJ,OAAQmiC,EAAQniC,QAC1F3R,EAAKq4J,GAAS,SAAUI,GACtB,IAAIC,EAAoBD,EAAW3kH,QACnC4kH,IAAsB3hH,EAAW/yC,KAAKF,IAAIizC,EAAU2hH,EAAkB/mJ,QACxE,GACF,CAGA,IAAK,IAAI8B,EAAI,EAAGA,EAAIsjC,EAAUtjC,IAAK,CACjC,IAAIklJ,EAAa72E,EAAShuC,EAAQrgC,IAAM,CACtCzS,KAAM8yC,EAAQrgC,IACZqgC,EAAQrgC,IAAM,CAAC,EACfmlJ,EAAcD,EAAW33J,KACzBysG,EAAah0F,EAAOhG,GAAK,CAC3BojC,UAAW,CAAC,GAGK,MAAf+hH,GAA0D,MAAnCN,EAAe53J,IAAIk4J,KAI5CnrD,EAAWzsG,KAAOysG,EAAWorD,YAAcD,EAC3CN,EAAez/I,IAAI+/I,EAAanlJ,IAGf,MAAnBklJ,EAAWz4J,OAAiButG,EAAWvtG,KAAOy4J,EAAWz4J,KAC3D,CAGA6kB,EAAU/kB,MAAK,SAAUklB,EAAUjK,GACjCiK,EAAWH,EAAUlM,IAAIoC,EAAUskF,EAAiBr6E,GAAU1kB,SAC9DR,EAAKklB,GAAU,SAAU4zI,EAAc3zI,GAErC28D,EAASg3E,KAAkBA,EAAeR,EAAe53J,IAAIo4J,IAEzC,MAAhBA,GAAwBA,EAAe/hH,IACzC7xB,EAASC,GAAiB2zI,EAC1BC,EAASt/I,EAAOq/I,GAAe79I,EAAUkK,GAE7C,GACF,IAEA,IAAI6zI,EAAc,EAClBh5J,EAAKq4J,GAAS,SAAUI,EAAYQ,GAClC,IAAIh+I,EAEAy9I,EACAQ,EAEAp3E,EAAS22E,IACXx9I,EAAWw9I,EACXA,EAAa,CAAC,IAEdx9I,EAAWw9I,EAAWz3J,KACtBy3J,EAAan5J,EAAOyiB,MAAM02I,GAE1BC,EAAoBD,EAAW3kH,QAC/BolH,EAAsBT,EAAW5hH,UACjC4hH,EAAWz3J,KAAOy3J,EAAWx9I,SAAWw9I,EAAWtzI,cAAgBszI,EAAW3kH,QAAU2kH,EAAW5hH,UAAY,MAGjH,IAAI3xB,EAAWq6E,EAAiBx6E,EAAUrkB,IAAIua,IAE9C,IAAKiK,EAASvT,OACZ,IAAK,IAAI8B,EAAI,EAAGA,GAAKilJ,GAAqBA,EAAkB/mJ,QAAU,GAAI8B,IAAK,CAC7E,MAAOulJ,EAAcv/I,EAAO9H,QAA0C,MAAhC8H,EAAOu/I,GAAa/9I,SACxD+9I,IAGFA,EAAcv/I,EAAO9H,QAAUuT,EAAS1mB,KAAKw6J,IAC/C,CAIFh5J,EAAKklB,GAAU,SAAU4zI,EAAc3zI,GACrC,IAAIsoF,EAAah0F,EAAOq/I,GACxBC,EAASvuJ,EAASijG,EAAYgrD,GAAax9I,EAAUkK,GAE9B,MAAnBsoF,EAAWzsG,MAAgB03J,IAC7BjrD,EAAWzsG,KAAOysG,EAAWorD,YAAcH,EAAkBvzI,IAG/D+zI,GAAuB1uJ,EAASijG,EAAW52D,UAAWqiH,EACxD,GACF,IAIA,IAFA,IAAI30I,EAAQhW,EAAI4+C,aAAe,QAEtB2rG,EAAe,EAAGA,EAAe/hH,EAAU+hH,IAAgB,CAC9DrrD,EAAah0F,EAAOq/I,GAAgBr/I,EAAOq/I,IAAiB,CAAC,EAAjE,IACI79I,EAAWwyF,EAAWxyF,SACd,MAAZA,IAAqBwyF,EAAWxyF,SAAWk+I,EAAQ50I,EAAOg0I,EAAiBhqJ,EAAI6+C,eAAgBqgD,EAAWtoF,cAAgB,EAAGsoF,EAAWxoF,cAAe,GACpI,MAAnBwoF,EAAWzsG,OAAiBysG,EAAWzsG,KAAOm4J,EAAQ1rD,EAAWxyF,SAAUq9I,IACxD,MAAnB7qD,EAAWvtG,MAAgBonD,EAAalpD,EAAM06J,KAAkBrrD,EAAWvtG,KAAO,UACpF,CAEA,OAAOuZ,EAEP,SAASs/I,EAAStrD,EAAYxyF,EAAUkK,GAClCizI,EAAWn9I,GACbwyF,EAAW52D,UAAU57B,GAAYkK,GAEjCsoF,EAAWxyF,SAAWA,EACtBwyF,EAAWtoF,cAAgBA,EAC3BozI,EAAgB1/I,IAAIoC,GAAU,GAElC,CAEA,SAASk+I,EAAQn4J,EAAMk0B,EAAKkkI,GAC1B,GAAIA,GAA6B,MAAjBlkI,EAAIx0B,IAAIM,GAAe,CACrC,IAAIyS,EAAI,EAER,MAA4B,MAArByhB,EAAIx0B,IAAIM,EAAOyS,GACpBA,IAGFzS,GAAQyS,CACV,CAGA,OADAyhB,EAAIrc,IAAI7X,GAAM,GACPA,CACT,CACF,CAIA,IAAIsmD,EAAe7/B,EAAmB6/B,aAAe,SAAUlpD,EAAMk2C,GACnE,IAAK,IAAI7gC,EAAI,EAAGuY,EAAM5tB,EAAKuT,OAAQ8B,EAAIuY,EAAKvY,IAAK,CAC/C,IAAIlI,EAAQw/D,EAAc3sE,EAAKqV,IAE/B,IAAKnU,EAAO6Q,QAAQ5E,GAClB,OAAO,EAGLA,EAAQA,EAAM+oC,GAGlB,GAAa,MAAT/oC,GAAiBgjC,SAAShjC,IAAoB,KAAVA,EACtC,OAAO,EACF,GAAIu2E,EAASv2E,IAAoB,MAAVA,EAC5B,OAAO,CAEX,CAEA,OAAO,CACT,EAEA,SAASw/D,EAAc1I,GACrB,OAAO/iE,EAAO6Q,QAAQkyD,GAAKA,EAAI/iE,EAAOkgB,SAAS6iD,GAAKA,EAAE92D,MAAQ82D,CAChE,CAEA,IAAI1hE,EAAW8mB,EACf7mB,EAAOvB,QAAUsB,C,uBC3NjB,IAAIrB,EAASL,EAAQ,OAKjBe,EAAOV,EAAOU,KACdq5J,EAAQ,iBACRC,EAAY,oBAmBhB,SAASpnH,EAAS3jC,GAChB,IAAIukC,EAAWvkC,EAAIukC,SACfG,EAAQ1kC,EAAI0kC,MAEXA,IACHA,EAAQ,CACNsmH,KAAMzmH,GAERvkC,EAAI2kC,UAAY,CACdqmH,KAAM,SAIVhrJ,EAAI0kC,MAAQ1kC,EAAIukC,SAAW,KAC3B0mH,EAAQ1mH,EAAUG,EAAO1kC,GAEzBvO,EAAKizC,GAAO,SAAU70C,GACpB4B,EAAK8yC,EAASkkH,sBAAsB,SAAUrvC,GAC5CvpH,EAAKo1B,WAAWm0F,EAAYroH,EAAOoF,MAAM+0J,EAAmBlrJ,GAC9D,GACF,IAEAukC,EAAStf,WAAW,eAAgBl0B,EAAOoF,MAAMg1J,EAAuBnrJ,IAGxEvO,EAAK8yC,EAASmkH,mBAAmB,SAAUtvC,GACzC70E,EAAStf,WAAWm0F,EAAYroH,EAAOoF,MAAMi1J,EAAiBprJ,GAChE,IAEAjP,EAAOs6J,OAAO3mH,EAAMH,EAASre,YAAcqe,EAC7C,CAEA,SAAS2mH,EAAkBlrJ,EAAK5L,GAC9B,GAAIk3J,EAAWr8J,MAAO,CAEpB,IAAIy1C,EAAQ3zC,EAAOyF,OAAO,CAAC,EAAGvH,KAAK67J,IACnCpmH,EAAMz1C,KAAKi3B,UAAY9xB,EACvB62J,EAAQ72J,EAAKswC,EAAO1kC,EACtB,MAEEurJ,EAAWn3J,EAAKnF,KAAKi3B,SAAUj3B,KAAK87J,GAAY/qJ,GAGlD,OAAO5L,CACT,CAEA,SAASg3J,EAAgBprJ,EAAK5L,GAE5B,OADA4L,EAAIwkC,QAAUxkC,EAAIwkC,OAAO1yC,OAAO7C,MACzBmF,CACT,CAEA,SAAS+2J,EAAsBnrJ,EAAK5L,GAQlC,OAHA3C,EAAK2C,EAAI02J,IAAQ,SAAUj7J,EAAMq2B,GAC/Br2B,IAASuE,GAAOm3J,EAAW17J,EAAKmoD,eAAgB9xB,EAAU9xB,EAAK4L,EACjE,IACO5L,CACT,CAUA,SAASo3J,EAActlI,GACrB,IAAIqe,EAAWt1C,KAAK87J,GACpB,OAAmB,MAAZ7kI,GAAgC,MAAZqe,EAAmBA,EAAWA,EAASumH,GAAO5kI,EAC3E,CAEA,SAASolI,EAAWz7J,GAClB,OAAOA,EAAKk7J,KAAel7J,CAC7B,CAEA,SAASo7J,EAAQ1mH,EAAUG,EAAO1kC,GAChCukC,EAASumH,GAAS,CAAC,EACnBr5J,EAAKizC,GAAO,SAAU70C,EAAMq2B,GAC1BqlI,EAAW17J,EAAMq2B,EAAUqe,EAAUvkC,EACvC,GACF,CAEA,SAASurJ,EAAW17J,EAAMq2B,EAAUqe,EAAUvkC,GAC5CukC,EAASumH,GAAO5kI,GAAYr2B,EAC5BA,EAAKk7J,GAAaxmH,EAClB10C,EAAKq2B,SAAWA,EAEZlmB,EAAIwkC,SACN30C,EAAKmQ,EAAIykC,YAAczkC,EAAIwkC,OAC3BxkC,EAAIwkC,OAAOxkC,EAAI2kC,UAAUze,IAAar2B,GAIxCA,EAAK27J,cAAgBA,CACvB,CAEA,IAAIp5J,EAAWuxC,EACftxC,EAAOvB,QAAUsB,C,iCC/HjB,IAAIuE,EAAUjG,EAAQ,OAIlB+6J,GAFU90J,EAAQC,QAERlG,EAAQ,QAElBK,EAASL,EAAQ,OAEjBg7J,EAAYh7J,EAAQ,MAEpBy+E,EAAMz+E,EAAQ,OAEdi7J,EAAUj7J,EAAQ,OAElBuxG,EAAWvxG,EAAQ,OAEnBk7J,EAAcl7J,EAAQ,OAEtB6B,EAAe7B,EAAQ,OAEvBO,EAA0BP,EAAQ,OAElCm7J,EAAgBn7J,EAAQ,OAExB2jD,EAAiB3jD,EAAQ,OAEzB82H,EAAiB92H,EAAQ,OAEzBiM,EAAcjM,EAAQ,OAEtB8hG,EAAgB9hG,EAAQ,OAExBgZ,EAAYhZ,EAAQ,OAEpBmG,EAAUnG,EAAQ,OAElB84C,EAAY94C,EAAQ,OAEpBo7J,EAAYp7J,EAAQ,OAEpB0yE,EAAW0oF,EAAU1oF,SAErB2oF,EAAcr7J,EAAQ,OAEtBs7J,EAAiBt7J,EAAQ,OAWzBe,EAAOV,EAAOU,KACdw6J,EAAiBzkC,EAAeykC,eAChCC,EAAU,QACVz1J,EAAe,CACjBg1J,QAAS,SAEPU,EAA4B,IAC5BC,EAA+B,IAC/BC,EAAyB,IACzBC,EAAyB,IACzBC,EAAwB,IACxBC,EAA4B,IAG5BC,EAAwB,IACxB7jH,EAAW,CACbC,UAAW,CACT6jH,OAAQP,EACRrjH,UAAWsjH,GAEbxnE,OAAQ,CACN+nE,OAAQN,EACRO,OAAQN,EACRO,MAAON,EACPjiB,UAAWkiB,EACX3nE,MAAO4nE,IAQPK,EAAkB,sBAClBC,EAA6B,2BAC7BC,EAAiB,kBACjBC,EAAa,kBAEjB,SAASC,EAAqC35J,GAC5C,OAAO,SAAUqwG,EAAWx0B,EAAS1oE,GAEnCk9F,EAAYA,GAAaA,EAAUovC,cACnC/wC,EAAS9wG,UAAUoC,GAAQqT,KAAK3X,KAAM20G,EAAWx0B,EAAS1oE,EAC5D,CACF,CAMA,SAASymJ,IACPlrD,EAASr7F,KAAK3X,KAChB,CAUA,SAASm+J,EAAQC,EAAKC,EAAOt8H,GAC3BA,EAAOA,GAAQ,CAAC,EAEK,kBAAVs8H,IACTA,EAAQC,GAAaD,IAOvBr+J,KAAKqmB,GAMLrmB,KAAKqI,MAMLrI,KAAKu/H,KAAO6+B,EACZ,IAAIG,EAAkB,SAMlBh6G,EAAKvkD,KAAK+zG,IAAMyoD,EAAQnzI,KAAK+0I,EAAK,CACpCI,SAAUz8H,EAAKy8H,UAAYD,EAC3BE,iBAAkB18H,EAAK08H,iBACvBlzJ,MAAOw2B,EAAKx2B,MACZS,OAAQ+1B,EAAK/1B,SAQfhM,KAAK0+J,kBAAoBvqF,EAASryE,EAAO2B,KAAK8gD,EAAG6rB,MAAO7rB,GAAK,IACzD85G,EAAQv8J,EAAOyiB,MAAM85I,GA2DzB,SAASM,EAAiBlwI,EAAGC,GAC3B,OAAOD,EAAEmwI,KAAOlwI,EAAEkwI,IACpB,CA5DAP,GAASj5G,EAAei5G,GAAO,GAM/Br+J,KAAK6+J,OAASR,EAMdr+J,KAAK8+J,aAAe,GAMpB9+J,KAAK++J,WAAa,CAAC,EAMnB/+J,KAAKg/J,iBAAmB,GAMxBh/J,KAAKi/J,eAAiB,CAAC,EAMvBj/J,KAAKk/J,aAAe,IAAIl9J,EAMxBhC,KAAKw2E,KAAO2oF,GAAmBn/J,MAC/BgzG,EAASr7F,KAAK3X,MAMdA,KAAKo/J,eAAiB,IAAIlB,EAE1Bl+J,KAAKmmE,cAGLnmE,KAAKqmJ,OAASvkJ,EAAO2B,KAAKzD,KAAKqmJ,OAAQrmJ,MAEvCA,KAAKq/J,gBAAkB,GAMvB3C,EAAQ4C,GAAaX,GACrBjC,EAAQ6C,GAAoBZ,GAC5Bp6G,EAAGwF,UAAUzpD,GAAG,QAASN,KAAKw/J,SAAUx/J,MAExC8B,EAAO29J,eAAez/J,KACxB,CAvHAk+J,EAAch8J,UAAU5B,GAAK29J,EAAqC,MAClEC,EAAch8J,UAAUgV,IAAM+mJ,EAAqC,OACnEC,EAAch8J,UAAUw9J,IAAMzB,EAAqC,OACnEn8J,EAAO0Y,MAAM0jJ,EAAelrD,GAsH5B,IAAI2sD,EAAexB,EAAQj8J,UA6T3B,SAAS09J,EAAez1C,EAAYnuC,EAAQjuE,GAC1C,IAIIkO,EAJA5Z,EAAUrC,KAAK+pB,OAEfskI,EAAeruJ,KAAKk/J,aAAan8J,uBAGrCi5E,EAASzhC,EAAUugE,YAAYz4G,EAAS25E,GAExC,IAAK,IAAI/lE,EAAI,EAAGA,EAAIo4I,EAAal6I,OAAQ8B,IAAK,CAC5C,IAAInT,EAAWurJ,EAAap4I,GAE5B,GAAInT,EAASqnH,IAA0E,OAA1DluG,EAASnZ,EAASqnH,GAAY9nH,EAAS25E,EAAQjuE,IAC1E,OAAOkO,CAEX,CACF,CA1UA0jJ,EAAaH,SAAW,WAEtB,GAAIx/J,KAAK+9J,GAAiB,CACxB,IAAItnJ,EAASzW,KAAK+9J,GAAgBtnJ,OAClCzW,KAAK69J,IAAmB,EACxBgC,EAAcC,iBAAiBnoJ,KAAK3X,MACpCA,KAAK69J,IAAmB,EACxB79J,KAAK+9J,IAAkB,EACvBgC,EAAoBpoJ,KAAK3X,KAAMyW,GAC/BupJ,EAAoBroJ,KAAK3X,KAAMyW,EACjC,CACF,EAMAkpJ,EAAax/B,OAAS,WACpB,OAAOngI,KAAKu/H,IACd,EAMAogC,EAAa95I,MAAQ,WACnB,OAAO7lB,KAAK+zG,GACd,EAiBA4rD,EAAaM,UAAY,SAAUpyJ,EAAQqyJ,EAAUC,GACnD,IAAI1pJ,EAUJ,GARI3U,EAAOkgB,SAASk+I,KAClBC,EAAaD,EAASC,WACtB1pJ,EAASypJ,EAASzpJ,OAClBypJ,EAAWA,EAASA,UAGtBlgK,KAAK69J,IAAmB,GAEnB79J,KAAK+pB,QAAUm2I,EAAU,CAC5B,IAAIE,EAAgB,IAAIxD,EAAc58J,KAAKw2E,MACvC6nF,EAAQr+J,KAAK6+J,OACbx8J,EAAUrC,KAAK+pB,OAAS,IAAI4yI,EAAY,KAAM,KAAM0B,EAAO+B,GAC/D/9J,EAAQgnB,KAAK,KAAM,KAAMg1I,EAAO+B,EAClC,CAEApgK,KAAK+pB,OAAOk2I,UAAUpyJ,EAAQwyJ,IAE1BF,GACFngK,KAAK+9J,GAAkB,CACrBtnJ,OAAQA,GAEVzW,KAAK69J,IAAmB,IAExBgC,EAAcC,iBAAiBnoJ,KAAK3X,MAGpCA,KAAK+zG,IAAI3jC,QAETpwE,KAAK+9J,IAAkB,EACvB/9J,KAAK69J,IAAmB,EACxBkC,EAAoBpoJ,KAAK3X,KAAMyW,GAC/BupJ,EAAoBroJ,KAAK3X,KAAMyW,GAEnC,EAMAkpJ,EAAaW,SAAW,WACtBC,QAAQ1P,IAAI,kDACd,EAMA8O,EAAahzJ,SAAW,WACtB,OAAO3M,KAAK+pB,MACd,EAMA41I,EAAa/+B,UAAY,WACvB,OAAO5gI,KAAK+pB,QAAU/pB,KAAK+pB,OAAO62G,WACpC,EAMA++B,EAAa1uJ,SAAW,WACtB,OAAOjR,KAAK+zG,IAAI9iG,UAClB,EAMA0uJ,EAAazuJ,UAAY,WACvB,OAAOlR,KAAK+zG,IAAI7iG,WAClB,EAMAyuJ,EAAa75I,oBAAsB,WACjC,OAAO9lB,KAAK+zG,IAAItvD,QAAQ+7G,KAAOr3F,OAAOs1F,kBAAoB,CAC5D,EASAkB,EAAac,kBAAoB,SAAU1+H,GACzC,GAAKm+C,EAAIghB,gBAAT,CAIAn/D,EAAOA,GAAQ,CAAC,EAChBA,EAAKwiG,WAAaxiG,EAAKwiG,YAAc,EACrCxiG,EAAKjR,gBAAkBiR,EAAKjR,iBAAmB9wB,KAAK+pB,OAAO7mB,IAAI,mBAC/D,IAAIqhD,EAAKvkD,KAAK+zG,IACVpxG,EAAO4hD,EAAGgjB,QAAQ8+C,iBAKtB,OAHAvkH,EAAOU,KAAKG,GAAM,SAAU8G,GAC1BA,EAAGogC,eAAc,EACnB,IACO0a,EAAGE,QAAQg8G,kBAAkB1+H,EAXpC,CAYF,EAOA49H,EAAae,cAAgB,WAC3B,GAAKxgF,EAAIygF,aAAT,CAIA,IAAIp8G,EAAKvkD,KAAK+zG,IACVpxG,EAAO4hD,EAAGgjB,QAAQ8+C,iBAKtB,OAHAvkH,EAAOU,KAAKG,GAAM,SAAU8G,GAC1BA,EAAGogC,eAAc,EACnB,IACO0a,EAAGE,QAAQm8G,WARlB,CASF,EAWAjB,EAAakB,WAAa,SAAU9+H,GAClCA,EAAOA,GAAQ,CAAC,EAChB,IAAIuiG,EAAoBviG,EAAKuiG,kBACzBjiI,EAAUrC,KAAK+pB,OACf+2I,EAAyB,GACzBlrI,EAAO51B,KACXwC,EAAK8hI,GAAmB,SAAUv/H,GAChC1C,EAAQ4B,cAAc,CACpBC,SAAUa,IACT,SAAUxD,GACX,IAAIkE,EAAOmwB,EAAKqpI,eAAe19J,EAAUw/J,UAEpCt7J,EAAK4C,MAAM8jB,SACd20I,EAAuB9/J,KAAKyE,GAC5BA,EAAK4C,MAAM8jB,QAAS,EAExB,GACF,IACA,IAAIu4G,EAAqC,QAA/B1kI,KAAK+zG,IAAItvD,QAAQC,UAAsB1kD,KAAK0gK,gBAAkB1gK,KAAKygK,kBAAkB1+H,GAAMi/H,UAAU,UAAYj/H,GAAQA,EAAKr/B,MAAQ,QAIhJ,OAHAF,EAAKs+J,GAAwB,SAAUr7J,GACrCA,EAAK4C,MAAM8jB,QAAS,CACtB,IACOu4G,CACT,EAUAi7B,EAAah7B,oBAAsB,SAAU5iG,GAC3C,GAAKm+C,EAAIghB,gBAAT,CAIA,IAAI+/D,EAAUjhK,KAAKqI,MACfilE,EAAU9mE,KAAKJ,IACfinE,EAAU7mE,KAAKF,IACfmjJ,EAAaljJ,IAEjB,GAAI26J,GAAgBD,GAAU,CAC5B,IAAI71I,EAAOq+H,EACPp+H,EAAMo+H,EACNn+H,GAASm+H,EACTl+H,GAAUk+H,EACV0X,EAAa,GACbX,EAAMz+H,GAAQA,EAAKwiG,YAAc,EACrCziI,EAAOU,KAAK4+J,IAAW,SAAUC,EAAOh7I,GACtC,GAAIg7I,EAAMh5J,QAAU44J,EAAS,CAC3B,IAAIx9H,EAAS49H,EAAMZ,kBAAkB3+J,EAAOyiB,MAAMwd,IAC9CgyD,EAAestE,EAAMlhC,SAASmhC,wBAClCl2I,EAAOkiD,EAAQymB,EAAa3oE,KAAMA,GAClCC,EAAMiiD,EAAQymB,EAAa1oE,IAAKA,GAChCC,EAAQ+hD,EAAQ0mB,EAAazoE,MAAOA,GACpCC,EAAS8hD,EAAQ0mB,EAAaxoE,OAAQA,GACtC41I,EAAWngK,KAAK,CACdo9J,IAAK36H,EACLrY,KAAM2oE,EAAa3oE,KACnBC,IAAK0oE,EAAa1oE,KAEtB,CACF,IACAD,GAAQo1I,EACRn1I,GAAOm1I,EACPl1I,GAASk1I,EACTj1I,GAAUi1I,EACV,IAAIj1J,EAAQ+f,EAAQF,EAChBpf,EAASuf,EAASF,EAClBk2I,EAAez/J,EAAO4hC,eAC1B69H,EAAah2J,MAAQA,EACrBg2J,EAAav1J,OAASA,EACtB,IAAIu4C,EAAKi4G,EAAQnzI,KAAKk4I,GAYtB,OAXA/+J,EAAK2+J,GAAY,SAAU74I,GACzB,IAAIogB,EAAM,IAAI9gC,EAAQ6b,MAAM,CAC1BpY,MAAO,CACLY,EAAGqc,EAAK8C,KAAOo1I,EAAMp1I,EACrBlf,EAAGoc,EAAK+C,IAAMm1I,EAAMn1I,EACpB1H,MAAO2E,EAAK81I,OAGhB75G,EAAGp7C,IAAIu/B,EACT,IACA6b,EAAGi9G,qBACID,EAAaP,UAAU,UAAYj/H,GAAQA,EAAKr/B,MAAQ,OACjE,CACE,OAAO1C,KAAK6gK,WAAW9+H,EApDzB,CAsDF,EAqBA49H,EAAatiB,eAAiBv7I,EAAOoF,MAAM04J,EAAgB,kBAoB3DD,EAAariB,iBAAmBx7I,EAAOoF,MAAM04J,EAAgB,oBAqC7DD,EAAa8B,aAAe,SAAUzlF,EAAQjuE,GAC5C,IACIkO,EADA5Z,EAAUrC,KAAK+pB,OAkBnB,OAhBAiyD,EAASzhC,EAAUugE,YAAYz4G,EAAS25E,GACxCl6E,EAAOU,KAAKw5E,GAAQ,SAAU7W,EAAQxjE,GACpCA,EAAIwa,QAAQ,WAAa,GAAKra,EAAOU,KAAK2iE,GAAQ,SAAUlvC,GAC1D,IAAInzB,EAAWmzB,EAAM/wB,iBAErB,GAAIpC,GAAYA,EAASyqD,aACvBtxC,KAAYnZ,EAASyqD,aAAax/C,QAC7B,GAAY,iBAARpM,EAAwB,CACjC,IAAI8D,EAAOzF,KAAK++J,WAAW9oI,EAAM8qI,UAE7Bt7J,GAAQA,EAAK8nD,eACftxC,GAAUxW,EAAK8nD,aAAax/C,EAAOkoB,GAEvC,CACF,GAAGj2B,KACL,GAAGA,QACMic,CACX,EAkBA0jJ,EAAapmI,UAAY,SAAUyiD,EAAQ70D,GACzC,IAAI9kB,EAAUrC,KAAK+pB,OACnBiyD,EAASzhC,EAAUugE,YAAYz4G,EAAS25E,EAAQ,CAC9C0lF,gBAAiB,WAEnB,IAAIr9J,EAAc23E,EAAO33E,YACrBzD,EAAOyD,EAAYG,UACnBmiB,EAAkBq1D,EAAOp6E,eAAe,mBAAqBo6E,EAAOr1D,gBAAkBq1D,EAAOp6E,eAAe,aAAehB,EAAKi3J,gBAAgB77E,EAAOz3E,WAAa,KACxK,OAA0B,MAAnBoiB,EAA0B/lB,EAAK4L,cAAcma,EAAiBQ,GAAcvmB,EAAK24B,UAAUpS,EACpG,EAQAw4I,EAAagC,wBAA0B,SAAU38J,GAC/C,OAAOhF,KAAKi/J,eAAej6J,EAAe+7J,SAC5C,EAQApB,EAAaiC,qBAAuB,SAAUv9J,GAC5C,OAAOrE,KAAK++J,WAAW16J,EAAY08J,SACrC,EAEA,IAAIlB,EAAgB,CAKlBh9J,OAAQ,SAAUkB,GAEhB,IAAI1B,EAAUrC,KAAK+pB,OACfznB,EAAMtC,KAAKw2E,KACXqrF,EAAc7hK,KAAKk/J,aACnB36G,EAAKvkD,KAAK+zG,IAEd,GAAK1xG,EAAL,CAKAA,EAAQihJ,cAMRue,EAAYz/J,OAAOpC,KAAK+pB,OAAQ/pB,KAAKw2E,MACrCsrF,EAAYnqJ,KAAK3X,KAAMqC,EAASC,GAChCy/J,GAAgBpqJ,KAAK3X,KAAMqC,GAC3Bw/J,EAAYh/J,OAAOR,EAASC,GAC5B0/J,GAAiBrqJ,KAAK3X,KAAMqC,EAAS0B,GACrC4sI,GAASh5H,KAAK3X,KAAMqC,EAAS0B,GAE7B,IAAI+sB,EAAkBzuB,EAAQa,IAAI,oBAAsB,cACpDuhD,EAAUF,EAAGE,QAEjB,GAAIA,EAAQw9G,gBAAkBx9G,EAAQw9G,iBACpC19G,EAAGO,YAAY,EAAG,CAChBo9G,WAAYpxI,QAET,CAEL,IAAKovD,EAAIghB,gBAAiB,CACxB,IAAIihE,EAAW1F,EAAU/oJ,MAAMod,GAC/BA,EAAkB2rI,EAAU2F,UAAUD,EAAU,OAE5B,IAAhBA,EAAS,KACXrxI,EAAkB,cAEtB,CAEIA,EAAgBqsB,YAAcrsB,EAAgBnN,OAGhD4gC,EAAGO,YAAY,EAAG,CAChBo9G,WAAYpxI,IAEd9wB,KAAK89J,IAA8B,EACnC99J,KAAKu/H,KAAKl0H,MAAMm+D,WAAa,gBAEzBxpE,KAAK89J,IACPv5G,EAAGO,YAAY,EAAG,CAChBo9G,WAAY,OAIhBliK,KAAK89J,IAA8B,EACnC99J,KAAKu/H,KAAKl0H,MAAMm+D,WAAa14C,EAEjC,CAEAtuB,EAAK6/J,IAAiB,SAAUpP,GAC9BA,EAAK5wJ,EAASC,EAChB,GAxDA,CAyDF,EAMAgwF,WAAY,SAAUvuF,GACpB,IAAI1B,EAAUrC,KAAK+pB,OAEd1nB,IAILA,EAAQ4gF,YAAW,SAAU5+E,GAC3BA,EAAYG,UAAU20J,gBACxB,IACA6I,GAAiBrqJ,KAAK3X,KAAMqC,EAAS0B,GACrCu+J,EAAmB3qJ,KAAK3X,KAAM,aAAcqC,EAAS0B,GACvD,EAMAoqF,aAAc,SAAUpqF,GACtB,IAAI1B,EAAUrC,KAAK+pB,OAEd1nB,IAILA,EAAQ4gF,YAAW,SAAU5+E,GAC3BA,EAAYG,UAAU20J,gBACxB,IACA6I,GAAiBrqJ,KAAK3X,KAAMqC,EAAS0B,GAAS,GAC9Cu+J,EAAmB3qJ,KAAK3X,KAAM,eAAgBqC,EAAS0B,GACzD,EAMA0lB,aAAc,SAAU1lB,GACtB,IAAI1B,EAAUrC,KAAK+pB,OAEd1nB,IAILkgK,GAAS5qJ,KAAK3X,KAAMqC,EAAS0B,GAC7Bu+J,EAAmB3qJ,KAAK3X,KAAM,eAAgBqC,EAAS0B,GACzD,EAMA+7J,iBAAkB,SAAU/7J,GAC1B,IAAI1B,EAAUrC,KAAK+pB,OACnBy4I,EAAY7qJ,KAAK3X,KAAM,YAAaqC,GACpCmgK,EAAY7qJ,KAAK3X,KAAM,QAASqC,GAChCw9J,EAAch9J,OAAO8U,KAAK3X,KAAM+D,EAClC,GAMF,SAAS0+J,EAAeC,EAAOp+J,EAAQP,EAASG,EAAUC,GACxD,IAAI9B,EAAUqgK,EAAM34I,OAEpB,GAAK7lB,EAAL,CAKA,IAAIE,EAAQ,CAAC,EACbA,EAAMF,EAAW,MAAQH,EAAQG,EAAW,MAC5CE,EAAMF,EAAW,SAAWH,EAAQG,EAAW,SAC/CE,EAAMF,EAAW,QAAUH,EAAQG,EAAW,QAC9C,IAAI0pE,EAAY,CACd1pE,SAAUA,EACVE,MAAOA,GAETD,IAAYypE,EAAUzpE,QAAUA,GAGhC9B,GAAWA,EAAQ4B,cAAc2pE,GAAW,SAAU33C,EAAO3lB,GAC3DqyJ,EAASD,EAAmB,WAAbx+J,EAAwB,aAAe,kBAAkB+xB,EAAM8qI,UAChF,GAAG2B,EAfH,MAFElgK,EAAKkgK,EAAM1D,iBAAiBp8J,OAAO8/J,EAAM5D,cAAe6D,GAmB1D,SAASA,EAASl9J,GAChBA,GAAQA,EAAKm9J,SAAWn9J,EAAKnB,IAAWmB,EAAKnB,GAAQmB,EAAKo9J,QAASxgK,EAASqgK,EAAMlsF,KAAMzyE,EAC1F,CACF,CA6HA,SAAS++J,EAAiB/+J,EAAS0S,GACjC,IAAI6uD,EAAcvhE,EAAQrB,KACtB68E,EAAgBx7E,EAAQw7E,cACxBwjF,EAAaC,GAAQ19F,GACrBzhE,EAAak/J,EAAWl/J,WACxBo/J,GAAWp/J,EAAWhB,QAAU,UAAUg/B,MAAM,KAChD0S,EAAe0uH,EAAQpqH,MAC3BoqH,EAAwB,MAAdA,EAAQ,IAAcjG,EAAeiG,EAAQ,IACvDjjK,KAAK69J,IAAmB,EACxB,IAAIqF,EAAW,CAACn/J,GACZo/J,GAAU,EAEVp/J,EAAQ+7E,QACVqjF,GAAU,EACVD,EAAWphK,EAAO41B,IAAI3zB,EAAQ+7E,OAAO,SAAUx3D,GAG7C,OAFAA,EAAOxmB,EAAOkL,SAASlL,EAAOyF,OAAO,CAAC,EAAG+gB,GAAOvkB,GAChDukB,EAAKw3D,MAAQ,KACNx3D,CACT,KAGF,IACI86I,EADAC,EAAgB,GAEhBC,EAA6B,cAAhBh+F,GAA+C,aAAhBA,EAChD9iE,EAAK0gK,GAAU,SAAUvjF,GAEvByjF,EAAWL,EAAW1kD,OAAO1+B,EAAW3/E,KAAK+pB,OAAQ/pB,KAAKw2E,MAE1D4sF,EAAWA,GAAYthK,EAAOyF,OAAO,CAAC,EAAGo4E,GAEzCyjF,EAAS1gK,KAAOmB,EAAWiB,OAASs+J,EAAS1gK,KAC7C2gK,EAAcriK,KAAKoiK,GAEfE,EAEFb,EAAeziK,KAAMu0C,EAAcorC,EAAW,UACrCsjF,GACTR,EAAeziK,KAAMu0C,EAAcorC,EAAWsjF,EAAQlH,KAAMkH,EAAQtjI,IAExE,GAAG3/B,MAEkB,SAAjBu0C,GAA4B+uH,GAAeL,IAEzCjjK,KAAK+9J,IAEP8B,EAAcC,iBAAiBnoJ,KAAK3X,KAAM+D,GAC1C/D,KAAK+9J,IAAkB,GAEvB8B,EAActrH,GAAc58B,KAAK3X,KAAM+D,IAMzCq/J,EADED,EACS,CACTzgK,KAAMmB,EAAWiB,OAASwgE,EAC1Bia,cAAeA,EACfO,MAAOujF,GAGEA,EAAc,GAG3BrjK,KAAK69J,IAAmB,GACvBpnJ,GAAUzW,KAAKo/J,eAAelpJ,QAAQktJ,EAAS1gK,KAAM0gK,EACxD,CAEA,SAASrD,EAAoBtpJ,GAC3B,IAAI8sJ,EAAiBvjK,KAAKq/J,gBAE1B,MAAOkE,EAAepvJ,OAAQ,CAC5B,IAAIpQ,EAAUw/J,EAAenmG,QAC7B0lG,EAAiBnrJ,KAAK3X,KAAM+D,EAAS0S,EACvC,CACF,CAEA,SAASupJ,EAAoBvpJ,IAC1BA,GAAUzW,KAAKkW,QAAQ,UAC1B,CAeA,SAASosJ,EAAmBn4C,EAAY9nH,EAAS0B,GAC/C,IAAIzB,EAAMtC,KAAKw2E,KAEfh0E,EAAKxC,KAAKg/J,kBAAkB,SAAUz9J,GACpC,IAAIyD,EAAiBzD,EAAUshK,QAC/BthK,EAAU4oH,GAAYnlH,EAAgB3C,EAASC,EAAKyB,GACpDqxG,GAAQpwG,EAAgBzD,EAC1B,GAAGvB,MAEHqC,EAAQ4gF,YAAW,SAAU5+E,EAAaI,GACxC,IAAI48J,EAAQrhK,KAAK++J,WAAW16J,EAAY08J,UACxCM,EAAMl3C,GAAY9lH,EAAahC,EAASC,EAAKyB,GAC7CqxG,GAAQ/wG,EAAag9J,GACrBmC,GAA0Bn/J,EAAag9J,EACzC,GAAGrhK,MAEHyjK,GAAuBzjK,KAAK+zG,IAAK1xG,GAEjCG,EAAK6/J,IAAiB,SAAUpP,GAC9BA,EAAK5wJ,EAASC,EAChB,GACF,CAQA,SAASkgK,EAAY9/J,EAAML,GAMzB,IALA,IAAIqhK,EAAuB,cAAThhK,EACdu+B,EAAWyiI,EAAc1jK,KAAKg/J,iBAAmBh/J,KAAK8+J,aACtD6E,EAAUD,EAAc1jK,KAAKi/J,eAAiBj/J,KAAK++J,WACnDx6G,EAAKvkD,KAAK+zG,IAEL99F,EAAI,EAAGA,EAAIgrB,EAAS9sB,OAAQ8B,IACnCgrB,EAAShrB,GAAG2sJ,SAAU,EAGxBvgK,EAAQqhK,EAAc,gBAAkB,eAAc,SAAU3+J,EAAekxB,GAC7E,GAAIytI,GACF,GAAsB,WAAlB3+J,EACF,YAGFkxB,EAAQlxB,EAIV,IAAI6+J,EAAS,OAAS3tI,EAAM5P,GAAK,IAAM4P,EAAMvzB,KACzC+C,EAAOk+J,EAAQC,GAEnB,IAAKn+J,EAAM,CACT,IAAIo+J,EAAY7G,EAAe/mI,EAAMvzB,MACjC2pF,EAAQq3E,EAAcngE,EAAcy7C,SAAS6kB,EAAU9H,KAAM8H,EAAUlkI,KAAOllB,EAAUukI,SAAS6kB,EAAUlkI,KAE/G,IAAI0sD,EAQF,OAPA5mF,EAAO,IAAI4mF,EACX5mF,EAAK4jB,KAAKhnB,EAASrC,KAAKw2E,MACxBmtF,EAAQC,GAAUn+J,EAClBw7B,EAASjgC,KAAKyE,GACd8+C,EAAGp7C,IAAI1D,EAAK4C,MAKhB,CAEA4tB,EAAM8qI,SAAWt7J,EAAKq+J,KAAOF,EAC7Bn+J,EAAKm9J,SAAU,EACfn9J,EAAKo9J,QAAU5sI,EACfxwB,EAAK4C,MAAM07J,kBAAoB,CAC7B7/J,SAAU+xB,EAAM/xB,SAChBoM,MAAO2lB,EAAM6pC,eAEjB,GAAG9/D,MAEH,IAASiW,EAAI,EAAGA,EAAIgrB,EAAS9sB,QAAS,CACpC,IAAI1O,EAAOw7B,EAAShrB,GAEfxQ,EAAKm9J,QAOR3sJ,KANAsuC,EAAGr6C,OAAOzE,EAAK4C,OACf5C,EAAK6C,QAAQjG,EAASrC,KAAKw2E,MAC3Bv1C,EAASw+B,OAAOxpD,EAAG,UACZ0tJ,EAAQl+J,EAAKq+J,MACpBr+J,EAAKq+J,KAAOr+J,EAAK4C,MAAM07J,kBAAoB,KAI/C,CACF,CASA,SAASjC,EAAYz/J,EAASC,GAC5BE,EAAK+8J,IAAoB,SAAUlnG,GACjCA,EAAQ46F,KAAK5wJ,EAASC,EACxB,GACF,CAMA,SAASy/J,GAAgB1/J,GACvB,IAAI2hK,EAAiB,CAAC,EACtB3hK,EAAQ4gF,YAAW,SAAUnhE,GAC3B,IAAInS,EAAQmS,EAAO5e,IAAI,SACnBtC,EAAOkhB,EAAOtd,UAElB,GAAImL,GAAuB,SAAd/O,EAAK8B,KAAiB,CACjC,IAAIuhK,EAAgBD,EAAer0J,GAE/Bq0J,EAAepiK,eAAe+N,IAAUs0J,IAC1CrjK,EAAK26C,UAAY0oH,GAGnBD,EAAer0J,GAAS/O,CAC1B,CACF,GACF,CASA,SAAS2hK,GAASlgK,EAAS0B,GACzB,IAAIzB,EAAMtC,KAAKw2E,KACfh0E,EAAK88J,IAAa,SAAUv5I,GACtBA,EAAOm+I,UACTn+I,EAAOktI,KAAK5wJ,EAASC,EAAKyB,EAE9B,GACF,CAWA,SAASi+J,GAAiB3/J,EAAS0B,EAASogK,GAC1C,IAAI7hK,EAAMtC,KAAKw2E,KACfn0E,EAAQ+hK,oBACR/hK,EAAQ4gF,YAAW,SAAU5+E,GAC3BA,EAAY+/J,mBACd,IACA5hK,EAAK88J,IAAa,SAAUv5I,KACxBo+I,IAAmBp+I,EAAOm+I,WAAan+I,EAAOktI,KAAK5wJ,EAASC,EAAKyB,EACrE,GACF,CAOA,SAAS4sI,GAAStuI,EAAS0B,GACzB,IAAIzB,EAAMtC,KAAKw2E,KAEfh0E,EAAKxC,KAAKg/J,kBAAkB,SAAUqF,GACpC,IAAIr/J,EAAiBq/J,EAAcxB,QACnCwB,EAAcvkK,OAAOkF,EAAgB3C,EAASC,EAAKyB,GACnDqxG,GAAQpwG,EAAgBq/J,EAC1B,GAAGrkK,MACHwC,EAAKxC,KAAK8+J,cAAc,SAAUuC,GAChCA,EAAMuB,SAAU,CAClB,GAAG5iK,MAEHqC,EAAQ4gF,YAAW,SAAU5+E,EAAaI,GACxC,IAAI6/J,EAAYtkK,KAAK++J,WAAW16J,EAAY08J,UAC5CuD,EAAU1B,SAAU,EACpB0B,EAAUxkK,OAAOuE,EAAahC,EAASC,EAAKyB,GAC5CugK,EAAUj8J,MAAMoO,SAAWpS,EAAYnB,IAAI,UAC3CkyG,GAAQ/wG,EAAaigK,GACrBd,GAA0Bn/J,EAAaigK,EACzC,GAAGtkK,MAEHyjK,GAAuBzjK,KAAK+zG,IAAK1xG,GAEjCG,EAAKxC,KAAK8+J,cAAc,SAAUuC,GAC3BA,EAAMuB,SACTvB,EAAMn3J,OAAO7H,EAASC,EAE1B,GAAGtC,KACL,CApZA2/J,EAAatZ,OAAS,SAAUtkH,GAC9B/hC,KAAK69J,IAAmB,EAExB79J,KAAK+zG,IAAIsyC,OAAOtkH,GAEhB,IAAIwiI,EAAgBvkK,KAAK+pB,QAAU/pB,KAAK+pB,OAAO8vG,YAAY,SAEvDtlF,EAAegwH,EAAgB,mBAAqB,SACxD1E,EAActrH,GAAc58B,KAAK3X,MAEjCA,KAAKwkK,YAAcxkK,KAAKwkK,WAAWne,SACnCrmJ,KAAK69J,IAAmB,EACxB,IAAIpnJ,EAASsrB,GAAQA,EAAKtrB,OAC1BspJ,EAAoBpoJ,KAAK3X,KAAMyW,GAC/BupJ,EAAoBroJ,KAAK3X,KAAMyW,EACjC,EAQAkpJ,EAAa8E,YAAc,SAAUjhK,EAAMkhK,GASzC,GARI5iK,EAAOkgB,SAASxe,KAClBkhK,EAAMlhK,EACNA,EAAO,IAGTA,EAAOA,GAAQ,UACfxD,KAAK2kK,cAEAC,GAAephK,GAApB,CAIA,IAAIiG,EAAKm7J,GAAephK,GAAMxD,KAAKw2E,KAAMkuF,GACrCngH,EAAKvkD,KAAK+zG,IACd/zG,KAAKwkK,WAAa/6J,EAClB86C,EAAGp7C,IAAIM,EALP,CAMF,EAMAk2J,EAAagF,YAAc,WACzB3kK,KAAKwkK,YAAcxkK,KAAK+zG,IAAI7pG,OAAOlK,KAAKwkK,YACxCxkK,KAAKwkK,WAAa,IACpB,EAOA7E,EAAakF,oBAAsB,SAAUzB,GAC3C,IAAIr/J,EAAUjC,EAAOyF,OAAO,CAAC,EAAG67J,GAEhC,OADAr/J,EAAQrB,KAAOoiK,GAAe1B,EAAS1gK,MAChCqB,CACT,EAeA47J,EAAavkI,eAAiB,SAAUr3B,EAASgN,GAC1CjP,EAAOkgB,SAASjR,KACnBA,EAAM,CACJ0F,SAAU1F,IAITiyJ,GAAQj/J,EAAQrB,OAKhB1C,KAAK+pB,SAKN/pB,KAAK69J,GACP79J,KAAKq/J,gBAAgBr+J,KAAK+C,IAK5B++J,EAAiBnrJ,KAAK3X,KAAM+D,EAASgN,EAAI0F,QAErC1F,EAAIq/D,MACNpwE,KAAK+zG,IAAI3jC,OAAM,IACQ,IAAdr/D,EAAIq/D,OAAmB8P,EAAI4kD,QAAQigC,QAM5C/kK,KAAK0+J,oBAGPqB,EAAoBpoJ,KAAK3X,KAAM+Q,EAAI0F,QACnCupJ,EAAoBroJ,KAAK3X,KAAM+Q,EAAI0F,SACrC,EAuFAkpJ,EAAar/J,GAAK29J,EAAqC,MACvD0B,EAAazoJ,IAAM+mJ,EAAqC,OACxD0B,EAAaD,IAAMzB,EAAqC,OA4MxD,IAAI+G,GAAoB,CAAC,QAAS,WAAY,YAAa,WAAY,YAAa,YAAa,UAAW,YAAa,eAgFzH,SAASvB,GAAuBl/G,EAAIliD,GAClC,IAAIklE,EAAUhjB,EAAGgjB,QACb09F,EAAU,EACd19F,EAAQ3tC,UAAS,SAAUnwB,GACpBA,EAAGy7J,SACND,GAEJ,IAEIA,EAAU5iK,EAAQa,IAAI,yBAA2Bg9E,EAAIlkD,MACvDurC,EAAQ3tC,UAAS,SAAUnwB,GACpBA,EAAGy7J,UACNz7J,EAAG68G,eAAgB,EAEvB,GAEJ,CAQA,SAASk9C,GAA0Bn/J,EAAaigK,GAE9C,IAAIW,EAAU,EACdX,EAAUj8J,MAAMuxB,UAAS,SAAUnwB,GACjB,UAAZA,EAAG/G,MAAqB+G,EAAG0iB,QAC7B84I,GAEJ,IACA,IAAIE,GAAgB9gK,EAAYnB,IAAI,eAChCkiK,EAAkBH,EAAU5gK,EAAYnB,IAAI,yBAA2BiiK,IAAiBjlF,EAAIlkD,KAE5FopI,GACFd,EAAUj8J,MAAMuxB,UAAS,SAAUnwB,GAE5BA,EAAGy7J,UACNz7J,EAAGgG,YAAc21J,EAAkB5+J,KAAKy+B,MAAMggI,IAAYE,IAAiB,EAEvEC,GACF37J,EAAGogC,eAAc,GAGvB,IAIF,IAAIw7H,EAAYhhK,EAAYnB,IAAI,cAAgB,KAChDohK,EAAUj8J,MAAMuxB,UAAS,SAAUnwB,GAE5BA,EAAGy7J,SACNz7J,EAAGyL,SAAS,QAASmwJ,EAEzB,GACF,CAOA,SAASjwD,GAAQn/E,EAAOxwB,GACtB,IAAI8I,EAAI0nB,EAAM/yB,IAAI,KACdoL,EAAS2nB,EAAM/yB,IAAI,UAEvBuC,EAAK4C,MAAMuxB,UAAS,SAAUnwB,GACZ,UAAZA,EAAG/G,OACA,MAAL6L,IAAc9E,EAAG8E,EAAIA,GACX,MAAVD,IAAmB7E,EAAG6E,OAASA,GAEnC,GACF,CAEA,SAAS6wJ,GAAmBmG,GAC1B,IAAIzD,EAAcyD,EAAWpG,aAC7B,OAAOp9J,EAAOyF,OAAO,IAAIjE,EAAagiK,GAAa,CAEjDviK,qBAAsBjB,EAAO2B,KAAKo+J,EAAY9+J,qBAAsB8+J,GACpE5/C,sBAAuB,SAAUx4G,GAC/B,MAAOA,EAAI,CACT,IAAI87J,EAAY97J,EAAGs6J,kBAEnB,GAAiB,MAAbwB,EACF,OAAOD,EAAWv7I,OAAOivB,aAAausH,EAAUrhK,SAAUqhK,EAAUj1J,OAGtE7G,EAAKA,EAAG+B,MACV,CACF,GAEJ,CAvKAm0J,EAAax5F,YAAc,WACzB3jE,EAAKwiK,IAAmB,SAAUQ,GAChCxlK,KAAK+zG,IAAIzzG,GAAGklK,GAAS,SAAU9oI,GAC7B,IAEI7R,EAFAxoB,EAAUrC,KAAK2M,WACflD,EAAKizB,EAAE5mB,OAGX,GAAgB,cAAZ0vJ,EACF36I,EAAS,CAAC,OACL,GAAIphB,GAAsB,MAAhBA,EAAGlF,UAAmB,CACrC,IAAIooH,EAAYljH,EAAGkjH,WAAatqH,EAAQ29E,iBAAiBv2E,EAAGyV,aAC5D2L,EAAS8hG,GAAaA,EAAU/hG,cAAcnhB,EAAGlF,UAAWkF,EAAGwtB,WAAa,CAAC,CAC/E,MACSxtB,GAAMA,EAAGm2D,YACd/0C,EAAS/oB,EAAOyF,OAAO,CAAC,EAAGkC,EAAGm2D,YAG9B/0C,IACFA,EAAO/lB,MAAQ43B,EACf7R,EAAOnoB,KAAO8iK,EACdxlK,KAAKkW,QAAQsvJ,EAAS36I,GAE1B,GAAG7qB,KACL,GAAGA,MACHwC,EAAKsiK,IAAgB,SAAUW,EAAYjlF,GACzCxgF,KAAKo/J,eAAe9+J,GAAGkgF,GAAW,SAAU17E,GAC1C9E,KAAKkW,QAAQsqE,EAAW17E,EAC1B,GAAG9E,KACL,GAAGA,KACL,EAMA2/J,EAAa3pE,WAAa,WACxB,OAAOh2F,KAAK0lK,SACd,EAMA/F,EAAa/6G,MAAQ,WACnB5kD,KAAKigK,UAAU,CACbn+I,OAAQ,KACP,EACL,EAMA69I,EAAar3J,QAAU,WACrB,IAAItI,KAAK0lK,UAAT,CAIA1lK,KAAK0lK,WAAY,EACjB,IAAIpjK,EAAMtC,KAAKw2E,KACXn0E,EAAUrC,KAAK+pB,OACnBvnB,EAAKxC,KAAKg/J,kBAAkB,SAAUz9J,GACpCA,EAAU+G,QAAQjG,EAASC,EAC7B,IACAE,EAAKxC,KAAK8+J,cAAc,SAAUuC,GAChCA,EAAM/4J,QAAQjG,EAASC,EACzB,IAEAtC,KAAK+zG,IAAIzrG,iBAEF84J,GAAUphK,KAAKqmB,GAdtB,CAeF,EAEAvkB,EAAO0Y,MAAM2jJ,EAASnrD,GAqGtB,IAAIgwD,GAAU,CAAC,EAMX8B,GAAiB,CAAC,EAOlBvF,GAAqB,GAMrBc,GAA0B,GAM1BgC,GAAkB,GAOlB/C,GAAc,GAMdhB,GAAe,CAAC,EAKhBsG,GAAiB,CAAC,EAClBxD,GAAY,CAAC,EACbF,GAAkB,CAAC,EACnByE,GAAS,IAAI7kB,KAAS,EACtB8kB,GAAc,IAAI9kB,KAAS,EAC3B+kB,GAAoB,qBACpBC,GAAgB,CAAC,EAErB,SAASC,GAAc1E,GACrB,IAAI2E,EAAiB,EACjBC,EAAkB,EAClBC,EAAiB,EACjBC,EAAa,wBAEjB,SAASC,EAA4BC,EAAQzmH,GAC3C,IAAK,IAAI3pC,EAAI,EAAGA,EAAIowJ,EAAOlyJ,OAAQ8B,IAAK,CACtC,IAAIqwJ,EAAaD,EAAOpwJ,GACxBqwJ,EAAWH,GAAcvmH,CAC3B,CACF,CAEA99C,EAAOU,KAAKsiK,IAAgB,SAAUW,EAAYjlF,GAChD6gF,EAAMjC,eAAe9+J,GAAGkgF,GAAW,SAAU17E,GAC3C,GAAIo8J,GAAgBG,EAAMh5J,QAAUg5J,EAAM8E,KAAgBH,EAAgB,CACxE,GAAIlhK,GAASA,EAAMy6E,cACjB,OAGF,IAAI8+B,EAASgjD,EAAMwD,oBAAoB//J,GACnCyhK,EAAc,GAClBzkK,EAAOU,KAAK4+J,IAAW,SAAUkF,GAC3BA,IAAejF,GAASiF,EAAWj+J,QAAUg5J,EAAMh5J,OACrDk+J,EAAYvlK,KAAKslK,EAErB,IACAF,EAA4BG,EAAaP,GACzCxjK,EAAK+jK,GAAa,SAAUD,GACtBA,EAAWH,KAAgBF,GAC7BK,EAAWlrI,eAAeijF,EAE9B,IACA+nD,EAA4BG,EAAaL,EAC3C,CACF,GACF,GACF,CAcA,SAAS78I,GAAK+0I,EAAKC,EAAOt8H,GACxB,IAAIykI,EAAgBC,GAAiBrI,GAErC,GAAIoI,EACF,OAAOA,EAGT,IAAInF,EAAQ,IAAIlD,EAAQC,EAAKC,EAAOt8H,GAWpC,OAVAs/H,EAAMh7I,GAAK,MAAQs/I,KACnBvE,GAAUC,EAAMh7I,IAAMg7I,EAElBjD,EAAIsI,aACNtI,EAAIsI,aAAab,GAAmBxE,EAAMh7I,IAE1C+3I,EAAIyH,IAAqBxE,EAAMh7I,GAGjC0/I,GAAc1E,GACPA,CACT,CAMA,SAASsF,GAAQ1F,GAEf,GAAIn/J,EAAO6Q,QAAQsuJ,GAAU,CAC3B,IAAIoF,EAASpF,EACbA,EAAU,KAEVn/J,EAAOU,KAAK6jK,GAAQ,SAAUhF,GACT,MAAfA,EAAMh5J,QACR44J,EAAUI,EAAMh5J,MAEpB,IACA44J,EAAUA,GAAW,KAAO2E,KAC5B9jK,EAAOU,KAAK6jK,GAAQ,SAAUhF,GAC5BA,EAAMh5J,MAAQ44J,CAChB,GACF,CAGA,OADAC,GAAgBD,IAAW,EACpBA,CACT,CAOA,SAAS2F,GAAW3F,GAClBC,GAAgBD,IAAW,CAC7B,CAMA,IAAI4F,GAAaD,GAMjB,SAASt+J,GAAQ+4J,GACM,kBAAVA,EACTA,EAAQD,GAAUC,GACPA,aAAiBlD,IAE5BkD,EAAQoF,GAAiBpF,IAGvBA,aAAiBlD,IAAYkD,EAAMrrE,cACrCqrE,EAAM/4J,SAEV,CAOA,SAASm+J,GAAiBrI,GACxB,IAAIz8J,EAQJ,OALEA,EADEy8J,EAAI0I,aACA1I,EAAI0I,aAAajB,IAEjBzH,EAAIyH,IAGLzE,GAAUz/J,EACnB,CAOA,SAASolK,GAAgBplK,GACvB,OAAOy/J,GAAUz/J,EACnB,CAMA,SAASqlK,GAAcxjK,EAAM66J,GAC3BC,GAAa96J,GAAQ66J,CACvB,CAOA,SAAS5+I,GAAqBwnJ,GAC5B5G,GAAwBr/J,KAAKimK,EAC/B,CAOA,SAASp9I,GAAkBq9I,EAAUC,GACX,oBAAbD,IACTC,EAAgBD,EAChBA,EAAWhK,GAGbqC,GAAmBv+J,KAAK,CACtB49J,KAAMsI,EACNjU,KAAMkU,GAEV,CAOA,SAASC,GAAmBC,GAC1BhF,GAAgBrhK,KAAKqmK,EACvB,CAmBA,SAASvjK,GAAeD,EAAY8wG,EAAW0J,GACpB,oBAAd1J,IACT0J,EAAS1J,EACTA,EAAY,IAGd,IAAI8wD,EAAa3jK,EAAOkgB,SAASne,GAAcA,EAAWnB,KAAO,CAACmB,EAAYA,EAAa,CACzFiB,MAAO6vG,IACN,GAEH9wG,EAAWiB,OAASjB,EAAWiB,OAAS2gK,GAAY1hB,cACpDpvC,EAAY9wG,EAAWiB,MAEvBhD,EAAOs6J,OAAO4B,EAAW7b,KAAKsjB,IAAezH,EAAW7b,KAAKxtC,IAExDquD,GAAQyC,KACXzC,GAAQyC,GAAc,CACpBpnD,OAAQA,EACRx6G,WAAYA,IAIhBihK,GAAenwD,GAAa8wD,CAC9B,CAOA,SAAS3wI,GAAyBpyB,EAAMiyC,GACtC3yC,EAAwBV,SAASoB,EAAMiyC,EACzC,CAQA,SAAS2yH,GAA8B5kK,GACrC,IAAI6kK,EAAkBvlK,EAAwBkB,IAAIR,GAElD,GAAI6kK,EACF,OAAOA,EAAgB/wH,kBAAoB+wH,EAAgB/wH,oBAAsB+wH,EAAgB1tJ,WAAW7W,OAEhH,CAWA,SAASiE,GAAeigK,EAAUM,GACR,oBAAbN,IACTM,EAAaN,EACbA,EAAW9J,GAGbkC,GAAYt+J,KAAK,CACf49J,KAAMsI,EACNjU,KAAMuU,EACNtD,UAAU,GAEd,CAOA,SAAS/8J,GAAe+/J,EAAUO,GACR,oBAAbP,IACTO,EAAaP,EACbA,EAAW5J,GAGbgC,GAAYt+J,KAAK,CACf49J,KAAMsI,EACNjU,KAAMwU,GAEV,CAMA,SAASC,GAAgBlkK,EAAMmkK,GAC7B/C,GAAephK,GAAQmkK,CACzB,CAOA,SAASh0F,GAAqB5xC,GAQ5B,OAAOw2F,EAAehxH,OAAOw6B,EAC/B,CAOA,SAASuyC,GAAoBvyC,GAQ3B,OAAOwhE,EAAch8F,OAAOw6B,EAC9B,CAOA,SAAStZ,GAAkBsZ,GASzB,OAAOr0B,EAAYnG,OAAOw6B,EAC5B,CAOA,SAAS75B,GAAgB65B,GASvB,OAAOtnB,EAAUlT,OAAOw6B,EAC1B,CAmBA,SAAS6lI,GAAiB1xH,GACxBp0C,EAAO+lK,UAAU,eAAgB3xH,EACnC,CAkBA,SAAS4xH,GAAY5hH,EAASiiG,EAASC,GACjCD,EAAQA,UAAYA,EAAQhtB,WAC9BitB,EAAeD,EAAQC,aACvBD,EAAUA,EAAQA,SAGG,kBAAZA,IACTA,EAA0B,qBAAT4f,MAAwBA,KAAKr0J,MAAQq0J,KAAKr0J,MAAMy0I,GAAW,IAAI6f,SAAS,WAAa7f,EAAU,KAApC,IAG9E2d,GAAc5/G,GAAW,CACvBiiG,QAASA,EACTC,aAAcA,EAElB,CAOA,SAASoC,GAAOtkG,GACd,OAAO4/G,GAAc5/G,EACvB,CAEA/+C,GAAek2J,EAAwBP,GACvCr9I,GAAqB2lC,GACrBsiH,GAAgB,UAAW3K,GAE3Bj5J,GAAe,CACbpB,KAAM,YACNoC,MAAO,YACPjC,OAAQ,aACPf,EAAOyG,MACVzE,GAAe,CACbpB,KAAM,WACNoC,MAAO,WACPjC,OAAQ,YACPf,EAAOyG,MAGV,IAAI0/J,GAAW,CAAC,EAChBpmK,EAAQo7J,QAAUA,EAClBp7J,EAAQ2F,aAAeA,EACvB3F,EAAQ83C,SAAWA,EACnB93C,EAAQwnB,KAAOA,GACfxnB,EAAQ8kK,QAAUA,GAClB9kK,EAAQ+kK,WAAaA,GACrB/kK,EAAQglK,WAAaA,GACrBhlK,EAAQyG,QAAUA,GAClBzG,EAAQ4kK,iBAAmBA,GAC3B5kK,EAAQklK,gBAAkBA,GAC1BllK,EAAQmlK,cAAgBA,GACxBnlK,EAAQ4d,qBAAuBA,GAC/B5d,EAAQgoB,kBAAoBA,GAC5BhoB,EAAQulK,mBAAqBA,GAC7BvlK,EAAQiC,eAAiBA,GACzBjC,EAAQizB,yBAA2BA,GACnCjzB,EAAQylK,8BAAgCA,GACxCzlK,EAAQoF,eAAiBA,GACzBpF,EAAQsF,eAAiBA,GACzBtF,EAAQ6lK,gBAAkBA,GAC1B7lK,EAAQ8xE,qBAAuBA,GAC/B9xE,EAAQyyE,oBAAsBA,GAC9BzyE,EAAQ4mB,kBAAoBA,GAC5B5mB,EAAQqG,gBAAkBA,GAC1BrG,EAAQ+lK,iBAAmBA,GAC3B/lK,EAAQimK,YAAcA,GACtBjmK,EAAQ2oJ,OAASA,GACjB3oJ,EAAQomK,SAAWA,GAAS,IAAIC,GAAezmK,EAAQ,QACvD,WACI,IAAK,IAAIE,KAAOumK,GACRA,GAAatmK,eAAeD,KAC5BE,EAAQF,GAAOumK,GAAavmK,GAGvC,EAND,E,wBCz5DA,IAAI66J,EAAU/6J,EAAQ,OAEtBI,EAAQ26J,QAAUA,EAElB,IAAIv4F,EAASxiE,EAAQ,OAErBI,EAAQoiE,OAASA,EAEjB,IAAIx1B,EAAShtC,EAAQ,OAErBI,EAAQ4sC,OAASA,EAEjB,IAAI3sC,EAASL,EAAQ,OAEjBg7J,EAAYh7J,EAAQ,MAExBI,EAAQ0K,MAAQkwJ,EAEhB,IAAI70J,EAAUnG,EAAQ,OAEtBI,EAAQ+F,QAAUA,EAElB,IAAI+wD,EAAal3D,EAAQ,OAEzBI,EAAQsmK,OAASxvG,EAEjB,IAAI+hB,EAAaj5E,EAAQ,OAEzBI,EAAQumK,OAAS1tF,EAEjB,IAAImiF,EAAYp7J,EAAQ,OAETo7J,EAAU1oF,SACzBtyE,EAAQsyE,SAAW0oF,EAAU1oF,SAE7B,IAAIk0F,EAAW5mK,EAAQ,OAEvBI,EAAQkiE,OAASskG,EAEjB,IAAIC,EAAQ7mK,EAAQ,OAEpBI,EAAQioB,KAAOw+I,EAEf,IAAIC,EAAS9mK,EAAQ,OAErBI,EAAQkG,MAAQwgK,EAEhB,IAAIC,EAAQ/mK,EAAQ,OAEpBI,EAAQs2H,KAAOqwC,EAEf,IAAIC,EAAOhnK,EAAQ,OAEnBI,EAAQq+E,IAAMuoF,EAEd,IAAIC,EAAgBjnK,EAAQ,OAE5BI,EAAQ+lJ,aAAe8gB,EAKvB,IAAIC,EAAS,CAAC,EACd7mK,EAAOU,KAAK,CAAC,MAAO,OAAQ,SAAU,UAAW,WAAY,SAAU,SAAU,OAAQ,QAAS,UAAW,WAAY,WAAY,aAAc,SAAU,WAAY,QAAS,UAAU,SAAUgB,GACpMmlK,EAAOnlK,GAAQ1B,EAAO0B,EACxB,IACA3B,EAAQ+mK,KAAOD,C,wBClEf,IAAI7mK,EAASL,EAAQ,OAEjBkM,EAAsBlM,EAAQ,OAE9BiiF,EAAajiF,EAAQ,MAErB2hJ,EAAuB3hJ,EAAQ,OAE/BsG,EAAQtG,EAAQ,OAEhBonK,EAAsBpnK,EAAQ,OAElCI,EAAQooB,mBAAqB4+I,EAE7B,IAAI/4J,EAAUrO,EAAQ,OAStB,SAASuqH,EAAW3nH,GAClB,IAAIzD,EAAOyD,EAAYnB,IAAI,QAC3B,OAAOyK,EAAoB/M,EAAMyD,EAAaA,EAAYhC,QAC5D,CAWA,SAASymK,EAAYx5I,EAAYzhB,GAC/B,IAAI+7C,EAAY/7C,EAEVA,aAAkB9F,IACtB6hD,EAAY,IAAI7hD,EAAM8F,GACtB/L,EAAO0Y,MAAMovC,EAAWw5F,IAG1B,IAAI38I,EAAQi9E,EAAW8xC,mBAAmB5rE,GAG1C,OAFAnjD,EAAMgvH,UAAUnmG,EAAW,GAAIA,EAAW,IAC1Co0D,EAAWi7D,gBAAgBl4I,EAAOmjD,GAC3BnjD,CACT,CAeA,SAASsiK,EAA4BhhK,GACnCjG,EAAO0Y,MAAMzS,EAAOq7I,EACtB,CAlDAvhJ,EAAQkO,aAAeD,EAAQC,aAoD/BlO,EAAQmqH,WAAaA,EACrBnqH,EAAQinK,YAAcA,EACtBjnK,EAAQknK,4BAA8BA,C,oBCtEtC,IAAI5lK,EAAW,CACbguF,QAAS,CACPjtD,MAAO,CACLxT,MAAO,CACLhmB,KAAM,OACNqhB,QAAS,KACT6nE,MAAO,OACPE,MAAO,OACPipC,KAAM,OACNn4E,MAAO,SAGXu4E,SAAU,CACRzsG,MAAO,OACPisG,KAAM,CAAC,OAAQ,KAAM,OAEvBoF,SAAU,CACRrxG,MAAO,CACLnrB,KAAM,OACN48H,KAAM,WAGVqB,UAAW,CACT9yG,MAAO,CACL/R,KAAM,SACNnN,IAAK,SACL7B,MAAO,QACP+zH,MAAO,UAGXjkC,QAAS,CACP/uE,MAAO,MAET0zG,YAAa,CACX1zG,MAAO,QACPisG,KAAM,CAAC,cAIbv5H,EAAOvB,QAAUsB,C,iCCvCjB,IAAIrB,EAASL,EAAQ,OAEjBuO,EAAUvO,EAAQ,OAElBwO,EAAeD,EAAQC,aACvB+4J,EAAe,cAEnB,SAASC,EAAiB5kK,GACxB,OAAOA,EAAYnB,IAAI,UAAY8lK,EAAe3kK,EAAY6a,WAChE,CAEA,SAASgqJ,EAAWz1J,GAClB,OAAOA,EAAK1K,IAAM0K,EAAKnD,KACzB,CAaA,SAAS8W,EAAgBrW,EAAKzO,GAC5B,IAAIuoB,EAAS,GACTjiB,EAAWmI,EAAI0C,KACf4rH,EAAU,QAEd,GAAsB,aAAlBz2H,EAASlG,KAAb,CAMA,IAFA,IAAI2Z,EAAYzT,EAAS4T,eAEhBvG,EAAI,EAAGA,EAAIlF,EAAIiG,MAAYf,IAClC4U,EAAO7pB,KAAKc,EAAOkL,SAAS,CAC1BqP,UAAWA,EACXgjH,QAASA,EACT8pC,QAASH,EAAe/yJ,GACvBlF,IAGL,IAAIq4J,EAAkBC,EAAuBx+I,EAAQvoB,GACjD2Z,EAAS,GAEb,IAAShG,EAAI,EAAGA,EAAIlF,EAAIiG,MAAOf,IAAK,CAClC,IAAIqS,EAAO8gJ,EAAgB/pC,GAAS2pC,EAAe/yJ,GACnDqS,EAAKqI,aAAerI,EAAKra,OAASqa,EAAK/c,MAAQ,EAC/C0Q,EAAOjb,KAAKsnB,EACd,CAEA,OAAOrM,CArBP,CAsBF,CAEA,SAASqtJ,EAAqBC,EAAWjnK,GACvC,IAAIknK,EAAiB1nK,EAAO41B,IAAI6xI,GAAW,SAAUllK,GACnD,IAAIzD,EAAOyD,EAAYG,UACnBmM,EAAYtM,EAAYa,iBACxB0D,EAAW+H,EAAU9H,cACrB2uE,EAAa5uE,EAAS8T,YACtBL,EAA8B,aAAlBzT,EAASlG,KAAsBkG,EAAS4T,eAAiBhW,KAAKiH,IAAI+pE,EAAW,GAAKA,EAAW,IAAM52E,EAAKoW,QACpH+I,EAAW9P,EAAa5L,EAAYnB,IAAI,YAAamZ,GACrDwD,EAAc5P,EAAa5L,EAAYnB,IAAI,eAAgBmZ,GAC3D7M,EAASnL,EAAYnB,IAAI,UACzBumK,EAAiBplK,EAAYnB,IAAI,kBACrC,MAAO,CACLmZ,UAAWA,EACX0D,SAAUA,EACVF,YAAaA,EACbrQ,OAAQA,EACRi6J,eAAgBA,EAChBpqC,QAAS6pC,EAAWtgK,GACpBugK,QAASF,EAAiB5kK,GAE9B,IACA,OAAOglK,EAAuBG,EAAgBlnK,EAChD,CAEA,SAAS+mK,EAAuBG,EAAgBlnK,GAE9C,IAAIonK,EAAa,CAAC,EAClB5nK,EAAOU,KAAKgnK,GAAgB,SAAUG,EAAYllK,GAChD,IAAI46H,EAAUsqC,EAAWtqC,QACrBhjH,EAAYstJ,EAAWttJ,UACvButJ,EAAgBF,EAAWrqC,IAAY,CACzChjH,UAAWA,EACXwtJ,cAAextJ,EACfytJ,eAAgB,EAChBC,YAAa,MACbp+I,IAAK,MACLq+I,OAAQ,CAAC,GAEPA,EAASJ,EAAcI,OAC3BN,EAAWrqC,GAAWuqC,EACtB,IAAIT,EAAUQ,EAAWR,QAEpBa,EAAOb,IACVS,EAAcE,iBAGhBE,EAAOb,GAAWa,EAAOb,IAAY,CACnC59J,MAAO,EACPs9E,SAAU,GAOZ,IAAI9oE,EAAW4pJ,EAAW5pJ,SAEtBA,IAAaiqJ,EAAOb,GAAS59J,QAE/By+J,EAAOb,GAAS59J,MAAQwU,EACxBA,EAAWvZ,KAAKJ,IAAIwjK,EAAcC,cAAe9pJ,GACjD6pJ,EAAcC,eAAiB9pJ,GAGjC,IAAIF,EAAc8pJ,EAAW9pJ,YAC7BA,IAAgBmqJ,EAAOb,GAAStgF,SAAWhpE,GAC3C,IAAIrQ,EAASm6J,EAAWn6J,OACd,MAAVA,IAAmBo6J,EAAcj+I,IAAMnc,GACvC,IAAIi6J,EAAiBE,EAAWF,eACd,MAAlBA,IAA2BG,EAAcG,YAAcN,EACzD,IACA,IAAIxtJ,EAAS,CAAC,EAsDd,OArDAna,EAAOU,KAAKknK,GAAY,SAAUE,EAAe3zH,GAC/Ch6B,EAAOg6B,GAAgB,CAAC,EACxB,IAAI+zH,EAASJ,EAAcI,OACvB3tJ,EAAYutJ,EAAcvtJ,UAC1B0tJ,EAAc95J,EAAa25J,EAAcG,YAAa1tJ,GACtD4tJ,EAAgBh6J,EAAa25J,EAAcj+I,IAAK,GAChDk+I,EAAgBD,EAAcC,cAC9BC,EAAiBF,EAAcE,eAC/BI,GAAaL,EAAgBE,IAAgBD,GAAkBA,EAAiB,GAAKG,GACzFC,EAAY1jK,KAAKF,IAAI4jK,EAAW,GAEhCpoK,EAAOU,KAAKwnK,GAAQ,SAAUG,EAAQx6J,GACpC,IAAIk5E,EAAWshF,EAAOthF,SAElBA,GAAYA,EAAWqhF,IACzBrhF,EAAWriF,KAAKJ,IAAIyiF,EAAUghF,GAE1BM,EAAO5+J,QACTs9E,EAAWriF,KAAKJ,IAAIyiF,EAAUshF,EAAO5+J,QAGvCs+J,GAAiBhhF,EACjBshF,EAAO5+J,MAAQs9E,EACfihF,IAEJ,IAEAI,GAAaL,EAAgBE,IAAgBD,GAAkBA,EAAiB,GAAKG,GACrFC,EAAY1jK,KAAKF,IAAI4jK,EAAW,GAChC,IACIE,EADAC,EAAW,EAEfvoK,EAAOU,KAAKwnK,GAAQ,SAAUG,EAAQ1lK,GAC/B0lK,EAAO5+J,QACV4+J,EAAO5+J,MAAQ2+J,GAGjBE,EAAaD,EACbE,GAAYF,EAAO5+J,OAAS,EAAI0+J,EAClC,IAEIG,IACFC,GAAYD,EAAW7+J,MAAQ0+J,GAGjC,IAAIh8J,GAAUo8J,EAAW,EACzBvoK,EAAOU,KAAKwnK,GAAQ,SAAUG,EAAQhB,GACpCltJ,EAAOg6B,GAAckzH,GAAWltJ,EAAOg6B,GAAckzH,IAAY,CAC/Dl7J,OAAQA,EACR1C,MAAO4+J,EAAO5+J,OAEhB0C,GAAUk8J,EAAO5+J,OAAS,EAAI0+J,EAChC,GACF,IACOhuJ,CACT,CAQA,SAASjV,EAAcrD,EAAYtB,EAASC,GAC1C,IAAIgoK,EAAoBhB,EAAqBxnK,EAAOywD,OAAOlwD,EAAQkoK,gBAAgB5mK,IAAa,SAAUU,GACxG,OAAQhC,EAAQ+c,iBAAiB/a,IAAgBA,EAAYa,kBAA0D,gBAAtCb,EAAYa,iBAAiBxC,IAChH,KACI8nK,EAAkB,CAAC,EACnBC,EAAwB,CAAC,EAC7BpoK,EAAQ+E,iBAAiBzD,GAAY,SAAUU,GAE7C,GAA0C,gBAAtCA,EAAYa,iBAAiBxC,KAAjC,CAIA,IAAI9B,EAAOyD,EAAYG,UACnBmM,EAAYtM,EAAYa,iBACxB0D,EAAW+H,EAAU9H,cACrBsgK,EAAUF,EAAiB5kK,GAC3BqmK,EAAmBJ,EAAkBpB,EAAWtgK,IAAWugK,GAC3DwB,EAAeD,EAAiBz8J,OAChC28J,EAAcF,EAAiBn/J,MAC/ByH,EAAYrC,EAAUsC,aAAarK,GACnC6F,EAAepK,EAAYnB,IAAI,iBAAmB,EAClD2nK,EAAiBjiK,EAASwyC,OAASpoC,EAAUG,cAAcH,EAAUI,YAAY,IAAMJ,EAAU8nC,kBAAkB,GACnH19B,EAAY,CAAC/Y,EAAYijC,kBAAkB,KAAK,GAAIjjC,EAAYijC,kBAAkB,KAAK,IACvF+b,EAASziD,EAAKytB,SAASjR,GAAW,SAAUnR,EAAGC,GACjD,OAAOyE,EAAU5K,YAAY,CAACkG,EAAGC,GACnC,IAAG,GACHs+J,EAAgBrB,GAAWqB,EAAgBrB,IAAY,GACvDsB,EAAsBtB,GAAWsB,EAAsBtB,IAAY,GAEnEvoK,EAAK6/B,UAAU,CACbxyB,OAAQ08J,EACRz8J,KAAM08J,IAERhqK,EAAK4B,KAAK6B,EAAYijC,kBAAkBt0B,EAAUjK,KAAK,IAAI,SAAUgF,EAAOtJ,GAC1E,IAAI4Z,MAAMtQ,GAAV,CAIKy8J,EAAgBrB,GAAS1kK,KAC5B+lK,EAAgBrB,GAAS1kK,GAAO,CAC9B2Z,EAAGysJ,EAEH7oI,EAAG6oI,GAGLJ,EAAsBtB,GAAS1kK,GAAO,CACpC2Z,EAAGysJ,EAEH7oI,EAAG6oI,IAKP,IAII5+J,EACAC,EACAX,EACAS,EAPA2U,EAAO5S,GAAS,EAAI,IAAM,IAC1BpF,EAAQ06C,EAAO5+C,GACfqmK,EAAYN,EAAgBrB,GAAS1kK,GAAKkc,GAC1CoqJ,EAAkBN,EAAsBtB,GAAS1kK,GAAKkc,GAMtD3N,EAAUlK,gBACZmD,EAAI6+J,EACJ5+J,EAAIvD,EAAM,GAAKgiK,EACfp/J,EAAQ5C,EAAM,GAAKoiK,EACnB/+J,EAAS4+J,EACTH,EAAsBtB,GAAS1kK,GAAKkc,IAASpV,EAEzC/E,KAAKiH,IAAIlC,GAASkD,IACpBlD,GAASA,EAAQ,GAAK,EAAI,GAAKkD,GAGjC+7J,EAAgBrB,GAAS1kK,GAAKkc,IAASpV,IAEvCU,EAAItD,EAAM,GAAKgiK,EACfz+J,EAAI4+J,EACJv/J,EAAQq/J,EACR5+J,EAASrD,EAAM,GAAKoiK,EACpBN,EAAsBtB,GAAS1kK,GAAKkc,IAAS3U,EAEzCxF,KAAKiH,IAAIzB,GAAUyC,IAErBzC,GAAUA,GAAU,GAAK,EAAI,GAAKyC,GAGpC+7J,EAAgBrB,GAAS1kK,GAAKkc,IAAS3U,GAGzCpL,EAAKge,cAAcna,EAAK,CACtBwH,EAAGA,EACHC,EAAGA,EACHX,MAAOA,EACPS,OAAQA,GAzDV,CA2DF,IAAG,EArFH,CAsFF,GAAGhM,KACL,CAEAgH,EAAcogB,gBAAkBA,EAChC,IAAIjkB,EAAW6D,EACf5D,EAAOvB,QAAUsB,C,wBCpSjB,IAAIrB,EAASL,EAAQ,OAEjBuO,EAAUvO,EAAQ,OAElBwO,EAAeD,EAAQC,aAE3B,SAASg5J,EAAiB5kK,GACxB,OAAOA,EAAYnB,IAAI,UAAY,cAAgBmB,EAAY6a,WACjE,CAEA,SAASgqJ,EAAWz1J,GAClB,OAAOA,EAAK1K,GACd,CAQA,SAASiiK,EAAernK,EAAYtB,EAASC,GAC3C,IAAIiJ,EAAQjJ,EAAI2O,WACZjF,EAAS1J,EAAI4O,YACbs5J,EAAkB,CAAC,EACnBC,EAAwB,CAAC,EACzBH,EAAoBW,EAAanpK,EAAOywD,OAAOlwD,EAAQkoK,gBAAgB5mK,IAAa,SAAUU,GAChG,OAAQhC,EAAQ+c,iBAAiB/a,IAAgBA,EAAYa,kBAA0D,UAAtCb,EAAYa,iBAAiBxC,IAChH,KACAL,EAAQ+E,iBAAiBzD,GAAY,SAAUU,GAE7C,GAA0C,UAAtCA,EAAYa,iBAAiBxC,KAAjC,CAIA,IAAI9B,EAAOyD,EAAYG,UACnBuG,EAAQ1G,EAAYa,iBACpB62C,EAAYhxC,EAAMixC,eAClBpzC,EAAWmC,EAAMlC,cACjBsgK,EAAUF,EAAiB5kK,GAC3BqmK,EAAmBJ,EAAkBpB,EAAWtgK,IAAWugK,GAC3DwB,EAAeD,EAAiBz8J,OAChC28J,EAAcF,EAAiBn/J,MAC/ByH,EAAYjI,EAAMkI,aAAarK,GAC/BvD,EAAShB,EAAYnB,IAAI,WAAa,CAAC,MAAO,OAC9CiJ,EAAK8D,EAAa5K,EAAO,GAAIkG,GAC7Ba,EAAK6D,EAAa5K,EAAO,GAAI2G,GAC7ByC,EAAepK,EAAYnB,IAAI,iBAAmB,EAClDwL,EAAcrK,EAAYnB,IAAI,gBAAkB,EAChD2nK,EAAiB73J,EAAU0J,YAAY,GACvCwuJ,EAAWl4J,EAAUijB,MAAM/yB,IAAI,OAC/BioK,EAAWn4J,EAAUijB,MAAM/yB,IAAI,OAC/Bka,EAAY,CAAC/Y,EAAYijC,kBAAkB,UAAU,GAAIjjC,EAAYijC,kBAAkB,SAAS,IAChG+b,EAASziD,EAAKytB,SAASjR,GAAW,SAAU6S,EAAQ2C,GACtD,OAAO7nB,EAAMhF,YAAY,CAACkqB,EAAQ2C,GACpC,IAAG,GACH43I,EAAgBrB,GAAWqB,EAAgBrB,IAAY,GACvDsB,EAAsBtB,GAAWsB,EAAsBtB,IAAY,GAEnEvoK,EAAK4B,KAAK6B,EAAYijC,kBAAkBt0B,EAAUjK,KAAK,IAAI,SAAUgF,EAAOtJ,GAC1E,IAAI4Z,MAAMtQ,GAAV,CAIKy8J,EAAgBrB,GAAS1kK,KAC5B+lK,EAAgBrB,GAAS1kK,GAAO,CAC9B2Z,EAAGysJ,EAEH7oI,EAAG6oI,GAGLJ,EAAsBtB,GAAS1kK,GAAO,CACpC2Z,EAAGysJ,EAEH7oI,EAAG6oI,IAKP,IAGIn/J,EACAD,EACAL,EACAiB,EANAsU,EAAO5S,GAAS,EAAI,IAAM,IAC1BpF,EAAQoC,EAAMk7F,aAAa5iD,EAAO5+C,IAClCsmK,EAAkBN,EAAsBtB,GAAS1kK,GAAKkc,GAM1D,GAAsB,WAAlB3N,EAAUjK,IAEZ2C,EAAKq/J,EACLt/J,EAAI9C,EAAM,GACVyC,IAAezC,EAAM,GAAKgiK,GAAgBnkK,KAAK0L,GAAK,IACpD7F,EAAWjB,EAAaw/J,EAAcpkK,KAAK0L,GAAK,IAE5C1L,KAAKiH,IAAIhC,GAAKgD,IAChBhD,EAAIC,GAAMD,EAAI,GAAK,EAAI,GAAKgD,GAG9Bg8J,EAAsBtB,GAAS1kK,GAAKkc,GAAQlV,MACvC,CAELC,EAAK/C,EAAM,GAAKgiK,EAChBl/J,EAAIC,EAAKk/J,EAEO,MAAZM,IACFn9J,EAAQvH,KAAKJ,IAAI2H,EAAOm9J,IAGV,MAAZC,IACFp9J,EAAQvH,KAAKF,IAAIyH,EAAOo9J,IAG1B,IAAIv4I,EAAQmpB,EAAU8yG,YAAY9gJ,GAE9BvH,KAAKiH,IAAImlB,EAAQm4I,GAAmBr8J,IACtCkkB,EAAQm4I,GAAmBh9J,EAAQ,GAAK,EAAI,GAAKW,GAGnDtD,GAAc2/J,EAAkBvkK,KAAK0L,GAAK,IAC1C7F,GAAYumB,EAAQpsB,KAAK0L,GAAK,IAG9B,IAAIkK,EAAS2/B,EAAUr/B,YACnB0uJ,EAAax4I,EAEbw4I,IAAehvJ,EAAO,IAAMrO,EAAQ,EACtCq9J,EAAahvJ,EAAO,GACXgvJ,IAAehvJ,EAAO,IAAMrO,EAAQ,IAC7Cq9J,EAAahvJ,EAAO,IAGtBquJ,EAAsBtB,GAAS1kK,GAAKkc,GAAQyqJ,CAC9C,CAEAxqK,EAAKge,cAAcna,EAAK,CACtB0H,GAAIA,EACJC,GAAIA,EACJV,GAAIA,EACJD,EAAGA,EACHL,WAAYA,EACZiB,SAAUA,GA9EZ,CAgFF,IAAG,EA7GH,CA8GF,GAAGrM,KACL,CAMA,SAASirK,EAAa1B,EAAWjnK,GAE/B,IAAIonK,EAAa,CAAC,EAClB5nK,EAAOU,KAAK+mK,GAAW,SAAUllK,EAAaI,GAC5C,IAAI7D,EAAOyD,EAAYG,UACnBuG,EAAQ1G,EAAYa,iBACpB0D,EAAWmC,EAAMlC,cACjB2uE,EAAa5uE,EAAS8T,YACtBL,EAA8B,aAAlBzT,EAASlG,KAAsBkG,EAAS4T,eAAiBhW,KAAKiH,IAAI+pE,EAAW,GAAKA,EAAW,IAAM52E,EAAKoW,QACpH4yJ,EAAgBF,EAAWR,EAAWtgK,KAAc,CACtDyT,UAAWA,EACXwtJ,cAAextJ,EACfytJ,eAAgB,EAChBC,YAAa,MACbp+I,IAAK,MACLq+I,OAAQ,CAAC,GAEPA,EAASJ,EAAcI,OAC3BN,EAAWR,EAAWtgK,IAAaghK,EACnC,IAAIT,EAAUF,EAAiB5kK,GAE1B2lK,EAAOb,IACVS,EAAcE,iBAGhBE,EAAOb,GAAWa,EAAOb,IAAY,CACnC59J,MAAO,EACPs9E,SAAU,GAEZ,IAAI9oE,EAAW9P,EAAa5L,EAAYnB,IAAI,YAAamZ,GACrDwD,EAAc5P,EAAa5L,EAAYnB,IAAI,eAAgBmZ,GAC3D7M,EAASnL,EAAYnB,IAAI,UACzBumK,EAAiBplK,EAAYnB,IAAI,kBAEjC6c,IAAaiqJ,EAAOb,GAAS59J,QAC/BwU,EAAWvZ,KAAKJ,IAAIwjK,EAAcC,cAAe9pJ,GACjDiqJ,EAAOb,GAAS59J,MAAQwU,EACxB6pJ,EAAcC,eAAiB9pJ,GAGjCF,IAAgBmqJ,EAAOb,GAAStgF,SAAWhpE,GACjC,MAAVrQ,IAAmBo6J,EAAcj+I,IAAMnc,GACrB,MAAlBi6J,IAA2BG,EAAcG,YAAcN,EACzD,IACA,IAAIxtJ,EAAS,CAAC,EAsDd,OArDAna,EAAOU,KAAKknK,GAAY,SAAUE,EAAe3zH,GAC/Ch6B,EAAOg6B,GAAgB,CAAC,EACxB,IAAI+zH,EAASJ,EAAcI,OACvB3tJ,EAAYutJ,EAAcvtJ,UAC1B0tJ,EAAc95J,EAAa25J,EAAcG,YAAa1tJ,GACtD4tJ,EAAgBh6J,EAAa25J,EAAcj+I,IAAK,GAChDk+I,EAAgBD,EAAcC,cAC9BC,EAAiBF,EAAcE,eAC/BI,GAAaL,EAAgBE,IAAgBD,GAAkBA,EAAiB,GAAKG,GACzFC,EAAY1jK,KAAKF,IAAI4jK,EAAW,GAEhCpoK,EAAOU,KAAKwnK,GAAQ,SAAUG,EAAQx6J,GACpC,IAAIk5E,EAAWshF,EAAOthF,SAElBA,GAAYA,EAAWqhF,IACzBrhF,EAAWriF,KAAKJ,IAAIyiF,EAAUghF,GAE1BM,EAAO5+J,QACTs9E,EAAWriF,KAAKJ,IAAIyiF,EAAUshF,EAAO5+J,QAGvCs+J,GAAiBhhF,EACjBshF,EAAO5+J,MAAQs9E,EACfihF,IAEJ,IAEAI,GAAaL,EAAgBE,IAAgBD,GAAkBA,EAAiB,GAAKG,GACrFC,EAAY1jK,KAAKF,IAAI4jK,EAAW,GAChC,IACIE,EADAC,EAAW,EAEfvoK,EAAOU,KAAKwnK,GAAQ,SAAUG,EAAQ1lK,GAC/B0lK,EAAO5+J,QACV4+J,EAAO5+J,MAAQ2+J,GAGjBE,EAAaD,EACbE,GAAYF,EAAO5+J,OAAS,EAAI0+J,EAClC,IAEIG,IACFC,GAAYD,EAAW7+J,MAAQ0+J,GAGjC,IAAIh8J,GAAUo8J,EAAW,EACzBvoK,EAAOU,KAAKwnK,GAAQ,SAAUG,EAAQhB,GACpCltJ,EAAOg6B,GAAckzH,GAAWltJ,EAAOg6B,GAAckzH,IAAY,CAC/Dl7J,OAAQA,EACR1C,MAAO4+J,EAAO5+J,OAEhB0C,GAAUk8J,EAAO5+J,OAAS,EAAI0+J,EAChC,GACF,IACOhuJ,CACT,CAEA,IAAI9Y,EAAW6nK,EACf5nK,EAAOvB,QAAUsB,C,wBC3PjB,SAASA,EAASQ,EAAYtB,GAC5BA,EAAQ+E,iBAAiBzD,GAAY,SAAUU,GAC7C,IAAIzD,EAAOyD,EAAYG,UACnB1B,EAAWuB,EAAYa,iBAE3B,GAAKpC,EAAL,CAOA,IAHA,IAAIi+C,EAAO,GACP3jC,EAAYta,EAAS+W,WAEhB5D,EAAI,EAAGA,EAAImH,EAAUjJ,OAAQ8B,IACpC8qC,EAAK//C,KAAKqD,EAAYijC,kBAAkBxkC,EAAS+W,WAAW5D,IAAI,IAG9C,IAAhB8qC,EAAK5sC,OACPvT,EAAK4B,KAAKu+C,EAAK,IAAI,SAAU90C,EAAGxH,GAE9B7D,EAAKge,cAAcna,EAAK4Z,MAAMpS,GAAK,CAACmC,IAAKA,KAAOtL,EAASiD,YAAYkG,GACvE,IACyB,IAAhB80C,EAAK5sC,QACdvT,EAAK4B,KAAKu+C,GAAM,SAAU90C,EAAGC,EAAGzH,GAE9B7D,EAAKge,cAAcna,EAAK4Z,MAAMpS,IAAMoS,MAAMnS,GAAK,CAACkC,IAAKA,KAAOtL,EAASiD,YAAY,CAACkG,EAAGC,IACvF,IAAG,EAlBL,CAoBF,GACF,C,SAEA9I,EAAOvB,QAAUsB,C,wBC9BjB,IAAIrB,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElByQ,EAAK1L,KAAK0L,GAUd,SAAS/O,EAASb,EAAKy/B,GACrBA,EAAOA,GAAQ,CAAC,EAChBjgC,EAAOkL,SAAS+0B,EAAM,CACpBz2B,KAAM,UACNiB,MAAO,UACPw/E,UAAW,OACXs/E,UAAW,2BACX/8J,OAAQ,IAEV,IAAIg9J,EAAO,IAAI1jK,EAAQ+C,KAAK,CAC1BU,MAAO,CACL4B,KAAM80B,EAAKspI,WAEb/8J,OAAQyzB,EAAKzzB,OACbC,EAAG,MAEDi3B,EAAM,IAAI59B,EAAQ2jK,IAAI,CACxBthK,MAAO,CACLmB,YAAa8G,EAAK,EAClB7F,UAAW6F,EAAK,EAAI,GACpBzG,EAAG,IAELJ,MAAO,CACLqL,OAAQqrB,EAAKx1B,MACbk7E,QAAS,QACTj6E,UAAW,GAEbc,OAAQyzB,EAAKzzB,OACbC,EAAG,QAED8I,EAAY,IAAIzP,EAAQ+C,KAAK,CAC/BU,MAAO,CACL4B,KAAM,OACN3B,KAAMy2B,EAAKz2B,KACXgO,aAAc,QACdkyJ,aAAc,GACd5mJ,SAAUmd,EAAKgqD,WAEjBz9E,OAAQyzB,EAAKzzB,OACbC,EAAG,QAELi3B,EAAIimI,cAAa,GAAMvhI,KAAK,IAAM,CAChC79B,SAAe,EAAL6F,EAAS,IAClBqM,MAAM,iBACTinB,EAAIimI,cAAa,GAAMvhI,KAAK,IAAM,CAChC9+B,WAAiB,EAAL8G,EAAS,IACpB43B,MAAM,KAAKvrB,MAAM,iBACpB,IAAIlW,EAAQ,IAAIT,EAAQwP,MA4BxB,OA3BA/O,EAAMc,IAAIq8B,GACVn9B,EAAMc,IAAIkO,GACVhP,EAAMc,IAAImiK,GAEVjjK,EAAMg+I,OAAS,WACb,IAAIl6I,EAAK7J,EAAI2O,WAAa,EACtB7E,EAAK9J,EAAI4O,YAAc,EAC3Bs0B,EAAI14B,SAAS,CACXX,GAAIA,EACJC,GAAIA,IAEN,IAAIX,EAAI+5B,EAAIv7B,MAAMwB,EAClB4L,EAAUvK,SAAS,CACjBb,EAAGE,EAAKV,EACRS,EAAGE,EAAKX,EACRF,MAAW,EAAJE,EACPO,OAAY,EAAJP,IAEV6/J,EAAKx+J,SAAS,CACZb,EAAG,EACHC,EAAG,EACHX,MAAOjJ,EAAI2O,WACXjF,OAAQ1J,EAAI4O,aAEhB,EAEA7I,EAAMg+I,SACCh+I,CACT,CAEAjF,EAAOvB,QAAUsB,C,iCC5FjB,IAAIrB,EAASL,EAAQ,OAEjBsG,EAAQtG,EAAQ,OAEhBiqK,EAAgBjqK,EAAQ,MAExBkzE,EAAYlzE,EAAQ,MAEpB8H,EAAS9H,EAAQ,MAEjBkqK,EAAiBlqK,EAAQ,OAOzBmqK,EAAYvsI,MAAMn9B,UAAUlB,KAS5Bu3H,EAAiBxwH,EAAMR,OAAO,CAChC7E,KAAM,YAMN2jB,GAAI,GAKJ7iB,KAAM,GAMNU,SAAU,GAMVC,QAAS,GAMT27D,eAAgB,EAMhBzxD,cAAe,KAMfhM,QAAS,KAQT4jD,gBAAiB,GAMjBuB,IAAK,KAQL9B,WAAY,KACZmmH,aAAc,SAAUh+J,EAAQoJ,EAAa5U,EAAS8kH,GACpDp/G,EAAM4P,KAAK3X,KAAM6N,EAAQoJ,EAAa5U,EAAS8kH,GAC/CnnH,KAAKwnD,IAAMkkH,EAAcI,OAAO,iBAClC,EACAziJ,KAAM,SAAUxb,EAAQoJ,EAAa5U,EAAS8kH,GAC5CnnH,KAAKy1B,qBAAqB5nB,EAAQxL,EACpC,EACAozB,qBAAsB,SAAU5nB,EAAQxL,GACtC,IAAIqjD,EAAa1lD,KAAK0lD,WAClB0hE,EAAsB1hE,EAAan8C,EAAO++F,gBAAgBz6F,GAAU,CAAC,EACrEmyI,EAAa39I,EAAQ49I,WACzBn+I,EAAOqwF,MAAMtkF,EAAQmyI,EAAW98I,IAAIlD,KAAKkE,WACzCpC,EAAOqwF,MAAMtkF,EAAQ7N,KAAKkgJ,oBAEtBx6F,GACFn8C,EAAOooG,iBAAiB9jG,EAAQu5G,EAAqB1hE,EAEzD,EACAlwB,YAAa,SAAU3nB,EAAQs5G,GAC7BrlH,EAAOqwF,MAAMnyF,KAAK6N,OAAQA,GAAQ,GAClC,IAAI63C,EAAa1lD,KAAK0lD,WAElBA,GACFn8C,EAAOooG,iBAAiB3xG,KAAK6N,OAAQA,EAAQ63C,EAEjD,EAEAkd,cAAe,SAAUmpG,EAAc3nJ,GAAS,EAChD87H,iBAAkB,WAChB,IAAKvrE,EAAUq3F,OAAOhsK,KAAM,mBAAoB,CAC9C,IAAIisK,EAAU,GACVC,EAAQlsK,KAAKmC,YAEjB,MAAO+pK,EAAO,CACZ,IAAIn7J,EAAMm7J,EAAMhqK,UAAUmM,cAC1B0C,GAAOk7J,EAAQjrK,KAAK+P,GACpBm7J,EAAQA,EAAMC,UAChB,CAIA,IAFA,IAAI99J,EAAgB,CAAC,EAEZ4H,EAAIg2J,EAAQ93J,OAAS,EAAG8B,GAAK,EAAGA,IACvC5H,EAAgBvM,EAAOqwF,MAAM9jF,EAAe49J,EAAQh2J,IAAI,GAG1D0+D,EAAUt5D,IAAIrb,KAAM,kBAAmBqO,EACzC,CAEA,OAAOsmE,EAAUzxE,IAAIlD,KAAM,kBAC7B,EACA6mJ,uBAAwB,SAAU3iJ,GAChC,OAAOlE,KAAKqC,QAAQg1C,gBAAgB,CAClCnzC,SAAUA,EACVoM,MAAOtQ,KAAKkD,IAAIgB,EAAW,SAAS,GACpCmiB,GAAIrmB,KAAKkD,IAAIgB,EAAW,MAAM,IAElC,IAuBF,SAASkoK,EAAgBrnK,GACvB,IAAIsnK,EAAO,GAKX,OAJAvqK,EAAOU,KAAK+1H,EAAe+zC,qBAAqBvnK,IAAgB,SAAUsnF,GACxEu/E,EAAU9oG,MAAMupG,EAAMhgF,EAAMnqF,UAAUsF,cAAgB,GACxD,IAEO1F,EAAO41B,IAAI20I,GAAM,SAAU3pK,GAChC,OAAOiyE,EAAUqoF,eAAet6J,GAAMq5J,IACxC,GACF,CAhBApnF,EAAU43F,sBAAsBh0C,EAAgB,CAC9Ci0C,oBAAoB,IAEtBd,EAAce,uBAAuBl0C,GAErCmzC,EAAcgB,wBAAwBn0C,EAAgB6zC,GAatDtqK,EAAO0Y,MAAM+9G,EAAgBozC,GAC7B,IAAIxoK,EAAWo1H,EACfn1H,EAAOvB,QAAUsB,C,iCCvLjB,IAAIuE,EAAUjG,EAAQ,OAIlBK,GAFU4F,EAAQC,QAETlG,EAAQ,QAEjB84C,EAAY94C,EAAQ,OAEpBsG,EAAQtG,EAAQ,OAEhB82H,EAAiB92H,EAAQ,OAEzBkrK,EAAgBlrK,EAAQ,OAExBmrK,EAAoBnrK,EAAQ,OAoB5Be,EAAOV,EAAOU,KACd+vD,EAASzwD,EAAOywD,OAChB76B,EAAM51B,EAAO41B,IACb/kB,EAAU7Q,EAAO6Q,QACjBwJ,EAAUra,EAAOqa,QACjB6F,EAAWlgB,EAAOkgB,SAClB6qJ,EAAmB,cASnBlQ,EAAc50J,EAAMR,OAAO,CAC7BpF,YAAaw6J,EACbtzI,KAAM,SAAUxb,EAAQoJ,EAAaonJ,EAAO+B,GAC1C/B,EAAQA,GAAS,CAAC,EAClBr+J,KAAK6N,OAAS,KAOd7N,KAAK6+J,OAAS,IAAI92J,EAAMs2J,GAKxBr+J,KAAK8sK,eAAiB1M,CACxB,EACAH,UAAW,SAAUpyJ,EAAQwyJ,GAC3Bv+J,EAAOs6J,SAASyQ,KAAoBh/J,GAAS,gCAE7C7N,KAAK8sK,eAAe7M,UAAUpyJ,EAAQwyJ,GAEtCrgK,KAAK65H,YAAY,KACnB,EASAA,YAAa,SAAUn3H,GACrB,IAAI6hK,GAAgB,EAChBnE,EAAgBpgK,KAAK8sK,eAEzB,IAAKpqK,GAAiB,aAATA,EAAqB,CAChC,IAAIqqK,EAAa3M,EAAc4M,YAAqB,aAATtqK,GAEtC1C,KAAK6N,QAAmB,aAATnL,GAGlB1C,KAAKsjJ,cACLtjJ,KAAKw1B,YAAYu3I,IAHjBE,EAASt1J,KAAK3X,KAAM+sK,GAMtBxI,GAAgB,CAClB,CAMA,GAJa,aAAT7hK,GAAgC,UAATA,GACzB1C,KAAKsjJ,eAGF5gJ,GAAiB,aAATA,GAAgC,aAATA,EAAqB,CACvD,IAAIwqK,EAAiB9M,EAAc+M,kBAAkBntK,MACrDktK,IAAmBltK,KAAKw1B,YAAY03I,GAAiB3I,GAAgB,EACvE,CAEA,IAAK7hK,GAAiB,aAATA,GAAgC,UAATA,EAAkB,CACpD,IAAI0qK,EAAehN,EAAciN,eAAertK,KAAMA,KAAKw2E,MAEvD42F,EAAaj5J,QACf3R,EAAK4qK,GAAc,SAAUE,GAC3BttK,KAAKw1B,YAAY83I,EAAa/I,GAAgB,EAChD,GAAGvkK,KAEP,CAEA,OAAOukK,CACT,EAKA/uI,YAAa,SAAUuwB,GACrB,IAAIl4C,EAAS7N,KAAK6N,OACd0/J,EAAgBvtK,KAAKi/J,eACrBuO,EAAc,GAiBlB,SAASC,EAAevpK,EAAUsD,GAChC,IAAIkmK,EAAmBnzH,EAAUwnD,iBAAiBh8C,EAAU7hD,IACxDypK,EAAYpzH,EAAUu1D,gBAAgBy9D,EAAcrqK,IAAIgB,GAAWwpK,GACvEnzH,EAAUw1D,cAAc49D,GAExBnrK,EAAKmrK,GAAW,SAAUrlJ,EAAMhY,GAC9B,IAAIS,EAAMuX,EAAKza,OAEXmU,EAASjR,KACXuX,EAAKkpF,QAAQttG,SAAWA,EACxBokB,EAAKkpF,QAAQrtG,QAAUypK,EAAiB1pK,EAAU6M,EAAKuX,EAAKipF,OAEhE,IACA,IAAItrD,EAAkB4nH,EAAqBN,EAAe/lK,GAC1DqG,EAAO3J,GAAY,GACnBqpK,EAAclyJ,IAAInX,EAAU,IAC5B1B,EAAKmrK,GAAW,SAAU19D,EAAY3/F,GACpC,IAAItL,EAAiBirG,EAAWsB,MAC5Bw6D,EAAe97D,EAAWpiG,OAK9B,GAJA/L,EAAOs6J,OAAOp6I,EAAS+pJ,IAAiB/mK,EAAgB,8BAInD+mK,EAGE,CACL,IAAI+B,EAAsBv1C,EAAeymB,SAAS96I,EAAU+rG,EAAWuB,QAAQrtG,SAAS,GAExF,GAAIa,GAAkBA,aAA0B8oK,EAC9C9oK,EAAexB,KAAOysG,EAAWuB,QAAQhuG,KACzCwB,EAAewwB,YAAYu2I,EAAc/rK,MACzCgF,EAAe49D,cAAcmpG,GAAc,OACtC,CAEL,IAAI5kD,EAAWrlH,EAAOyF,OAAO,CAC3B0+C,gBAAiBA,EACjB6Z,eAAgBxvD,GACf2/F,EAAWuB,SACdxsG,EAAiB,IAAI8oK,EAAoB/B,EAAc/rK,KAAMA,KAAMmnH,GACnErlH,EAAOyF,OAAOvC,EAAgBmiH,GAC9BniH,EAAeqkB,KAAK0iJ,EAAc/rK,KAAMA,KAAMmnH,GAK9CniH,EAAe49D,cAAc,MAAM,EACrC,CACF,MAxBE59D,EAAewwB,YAAY,CAAC,EAAGx1B,MAC/BgF,EAAe49D,cAAc,CAAC,GAAG,GAyBnC2qG,EAAcrqK,IAAIgB,GAAUoM,GAAStL,EACrC6I,EAAO3J,GAAUoM,GAAStL,EAAe6I,MAC3C,GAAG7N,MAEc,WAAbkE,IACFlE,KAAK+tK,eAAiBC,EAAoBT,EAAcrqK,IAAI,WAEhE,CAxEAV,EAAKujD,GAAW,SAAUkoH,EAAiB/pK,GAClB,MAAnB+pK,IAIC11C,EAAe21C,SAAShqK,GAG3BspK,EAAYxsK,KAAKkD,GAFjB2J,EAAO3J,GAAgC,MAApB2J,EAAO3J,GAAoBpC,EAAOyiB,MAAM0pJ,GAAmBnsK,EAAOqwF,MAAMtkF,EAAO3J,GAAW+pK,GAAiB,GAIlI,IAEA11C,EAAe41C,kBAAkBX,EAAaj1C,EAAe61C,uBAAwBX,EAAgBztK,MACrGA,KAAK+tK,eAAiB/tK,KAAK+tK,gBAAkB,EA4D/C,EAOAntC,UAAW,WACT,IAAI/yH,EAAS/L,EAAOyiB,MAAMvkB,KAAK6N,QAgB/B,OAfArL,EAAKqL,GAAQ,SAAUk0B,EAAM79B,GAC3B,GAAIq0H,EAAe21C,SAAShqK,GAAW,CACjC69B,EAAOwY,EAAUwnD,iBAAiBhgE,GAEtC,IAFA,IAES9rB,EAAI8rB,EAAK5tB,OAAS,EAAG8B,GAAK,EAAGA,IAEhCskC,EAAU8zH,UAAUtsI,EAAK9rB,KAC3B8rB,EAAK09B,OAAOxpD,EAAG,GAInBpI,EAAO3J,GAAY69B,CACrB,CACF,WACOl0B,EAAOg/J,GACPh/J,CACT,EAKAoyI,SAAU,WACR,OAAOjgJ,KAAK6+J,MACd,EAOA7lH,aAAc,SAAU90C,EAAUO,GAChC,IAAI9B,EAAO3C,KAAKi/J,eAAe/7J,IAAIgB,GAEnC,GAAIvB,EACF,OAAOA,EAAK8B,GAAO,EAEvB,EAYA4yC,gBAAiB,SAAUu2B,GACzB,IAAI1pE,EAAW0pE,EAAU1pE,SAEzB,IAAKA,EACH,MAAO,GAGT,IAUI+X,EAVA3L,EAAQs9D,EAAUt9D,MAClB+V,EAAKunD,EAAUvnD,GACf7iB,EAAOoqE,EAAUpqE,KAEjB8qK,EAAOtuK,KAAKi/J,eAAe/7J,IAAIgB,GAEnC,IAAKoqK,IAASA,EAAKn6J,OACjB,MAAO,GAKT,GAAa,MAAT7D,EACGqC,EAAQrC,KACXA,EAAQ,CAACA,IAGX2L,EAASs2C,EAAO76B,EAAIpnB,GAAO,SAAU7L,GACnC,OAAO6pK,EAAK7pK,EACd,KAAI,SAAU0Z,GACZ,QAASA,CACX,SACK,GAAU,MAANkI,EAAY,CACrB,IAAIkoJ,EAAY57J,EAAQ0T,GACxBpK,EAASs2C,EAAO+7G,GAAM,SAAUE,GAC9B,OAAOD,GAAapyJ,EAAQkK,EAAImoJ,EAAInoJ,KAAO,IAAMkoJ,GAAaC,EAAInoJ,KAAOA,CAC3E,GACF,MAAO,GAAY,MAAR7iB,EAAc,CACvB,IAAIirK,EAAc97J,EAAQnP,GAC1ByY,EAASs2C,EAAO+7G,GAAM,SAAUE,GAC9B,OAAOC,GAAetyJ,EAAQ3Y,EAAMgrK,EAAIhrK,OAAS,IAAMirK,GAAeD,EAAIhrK,OAASA,CACrF,GACF,MAEEyY,EAASqyJ,EAAKtrK,QAGhB,OAAO0rK,EAAgBzyJ,EAAQ2xD,EACjC,EA8BA7tC,eAAgB,SAAU6tC,GACxB,IAAIxpE,EAAQwpE,EAAUxpE,MAClBF,EAAW0pE,EAAU1pE,SACrByqK,EAAYC,EAAaxqK,GACzB6X,EAAS0yJ,EAAY3uK,KAAKq3C,gBAAgBs3H,GAAa3uK,KAAKi/J,eAAe/7J,IAAIgB,GACnF,OAAO2qK,EAASH,EAAgBzyJ,EAAQ2xD,IAExC,SAASghG,EAAaE,GACpB,IAAIC,EAAY7qK,EAAW,QACvB8qK,EAAS9qK,EAAW,KACpB+qK,EAAW/qK,EAAW,OAC1B,OAAO4qK,GAAsB,MAAhBA,EAAEC,IAAmC,MAAbD,EAAEE,IAAkC,MAAfF,EAAEG,GAMxD,KAN6E,CAC/E/qK,SAAUA,EAEVoM,MAAOw+J,EAAEC,GACT1oJ,GAAIyoJ,EAAEE,GACNxrK,KAAMsrK,EAAEG,GAEZ,CAEA,SAASJ,EAAS1pK,GAChB,OAAOyoE,EAAUrb,OAASA,EAAOptD,EAAKyoE,EAAUrb,QAAUptD,CAC5D,CACF,EAyBAlB,cAAe,SAAUC,EAAUsT,EAAIC,GACrC,IAAI81J,EAAgBvtK,KAAKi/J,eAEzB,GAAwB,oBAAb/6J,EACTuT,EAAUD,EACVA,EAAKtT,EACLqpK,EAAc/qK,MAAK,SAAU0sK,EAAYnqK,GACvCvC,EAAK0sK,GAAY,SAAU3tK,EAAW+O,GACpCkH,EAAGG,KAAKF,EAAS1S,EAAexD,EAAW+O,EAC7C,GACF,SACK,GAAIxO,EAAOwiF,SAASpgF,GACzB1B,EAAK+qK,EAAcrqK,IAAIgB,GAAWsT,EAAIC,QACjC,GAAIuK,EAAS9d,GAAW,CAC7B,IAAIirK,EAAcnvK,KAAK+/B,eAAe77B,GACtC1B,EAAK2sK,EAAa33J,EAAIC,EACxB,CACF,EAMA4tG,gBAAiB,SAAU7hH,GACzB,IAAIse,EAAS9hB,KAAKi/J,eAAe/7J,IAAI,UAErC,OAAOqvD,EAAOzwC,GAAQ,SAAUstJ,GAC9B,OAAOA,EAAU5rK,OAASA,CAC5B,GACF,EAMAw8E,iBAAkB,SAAU9gE,GAC1B,OAAOlf,KAAKi/J,eAAe/7J,IAAI,UAAUgc,EAC3C,EAMAqrJ,gBAAiB,SAAUpmK,GACzB,IAAI2d,EAAS9hB,KAAKi/J,eAAe/7J,IAAI,UAErC,OAAOqvD,EAAOzwC,GAAQ,SAAUstJ,GAC9B,OAAOA,EAAUjrK,UAAYA,CAC/B,GACF,EAKA+/G,UAAW,WACT,OAAOlkH,KAAKi/J,eAAe/7J,IAAI,UAAUF,OAC3C,EASAigF,WAAY,SAAUzrE,EAAIC,GACxB43J,EAAwBrvK,MACxBwC,EAAKxC,KAAK+tK,gBAAgB,SAAUuB,GAClC,IAAIxtJ,EAAS9hB,KAAKi/J,eAAe/7J,IAAI,UAAUosK,GAE/C93J,EAAGG,KAAKF,EAASqK,EAAQwtJ,EAC3B,GAAGtvK,KACL,EAQA2lH,cAAe,SAAUnuG,EAAIC,GAC3BjV,EAAKxC,KAAKi/J,eAAe/7J,IAAI,UAAWsU,EAAIC,EAC9C,EAUArQ,iBAAkB,SAAUjD,EAASqT,EAAIC,GACvC43J,EAAwBrvK,MACxBwC,EAAKxC,KAAK+tK,gBAAgB,SAAUuB,GAClC,IAAIxtJ,EAAS9hB,KAAKi/J,eAAe/7J,IAAI,UAAUosK,GAE3CxtJ,EAAO3d,UAAYA,GACrBqT,EAAGG,KAAKF,EAASqK,EAAQwtJ,EAE7B,GAAGtvK,KACL,EASAgf,oBAAqB,SAAU7a,EAASqT,EAAIC,GAC1C,OAAOjV,EAAKxC,KAAKuqK,gBAAgBpmK,GAAUqT,EAAIC,EACjD,EAKA2H,iBAAkB,SAAU/a,GAE1B,OADAgrK,EAAwBrvK,MACjB8B,EAAOqa,QAAQnc,KAAK+tK,eAAgB1pK,EAAYy7D,gBAAkB,CAC3E,EAKAz4C,wBAAyB,WACvB,OAAQrnB,KAAK+tK,gBAAkB,IAAI/qK,OACrC,EAMAunH,aAAc,SAAU/yG,EAAIC,GAC1B43J,EAAwBrvK,MACxB,IAAIuvK,EAAiBh9G,EAAOvyD,KAAKi/J,eAAe/7J,IAAI,UAAWsU,EAAIC,GACnEzX,KAAK+tK,eAAiBC,EAAoBuB,EAC5C,EACAjsB,YAAa,WACX,IAAIiqB,EAAgBvtK,KAAKi/J,eACzBj/J,KAAK+tK,eAAiBC,EAAoBT,EAAcrqK,IAAI,WAC5D,IAAIssK,EAAiB,GACrBjC,EAAc/qK,MAAK,SAAU0sK,EAAYnqK,GACvCyqK,EAAexuK,KAAK+D,EACtB,IACAwzH,EAAe41C,kBAAkBqB,EAAgBj3C,EAAe61C,wBAAwB,SAAUrpK,EAAeyC,GAC/GhF,EAAK+qK,EAAcrqK,IAAI6B,IAAgB,SAAUxD,GAC/CA,EAAU+hJ,aACZ,GACF,GACF,IAMF,SAASmsB,EAAW5hK,EAAQwwJ,GAC1Bv8J,EAAOU,KAAK67J,GAAO,SAAUqR,EAAWlsK,GAEjC+0H,EAAe21C,SAAS1qK,KACF,kBAAdksK,EACT7hK,EAAOrK,GAASqK,EAAOrK,GAAkC1B,EAAOqwF,MAAMtkF,EAAOrK,GAAOksK,GAAW,GAAhE5tK,EAAOyiB,MAAMmrJ,GAExB,MAAhB7hK,EAAOrK,KACTqK,EAAOrK,GAAQksK,GAIvB,GACF,CAEA,SAASzC,EAASF,GAIhB/sK,KAAK6N,OAAS,CAAC,EACf7N,KAAK6N,OAAOg/J,GAAoB,EAQhC7sK,KAAKi/J,eAAiBn9J,EAAO40D,cAAc,CACzC50C,OAAQ,KASV9hB,KAAK+tK,eAAiB,KACtB0B,EAAW1C,EAAY/sK,KAAK6+J,OAAOhxJ,QAEnC/L,EAAOqwF,MAAM46E,EAAYJ,GAAe,GACxC3sK,KAAKw1B,YAAYu3I,EACnB,CAQA,SAASc,EAAqBN,EAAeoC,GACtC7tK,EAAO6Q,QAAQg9J,KAClBA,EAAQA,EAAQ,CAACA,GAAS,IAG5B,IAAIxsE,EAAM,CAAC,EAIX,OAHA3gG,EAAKmtK,GAAO,SAAUjtK,GACpBygG,EAAIzgG,IAAS6qK,EAAcrqK,IAAIR,IAAS,IAAIM,OAC9C,IACOmgG,CACT,CAMA,SAASyqE,EAAiB1pK,EAAU6nK,EAAc6D,GAChD,IAAIzrK,EAAU4nK,EAAarpK,KAAOqpK,EAAarpK,KAAOktK,EAAiBA,EAAezrK,QACpFo0H,EAAeq1C,iBAAiB1pK,EAAU6nK,GAE5C,OAAO5nK,CACT,CAMA,SAAS6pK,EAAoBpyJ,GAC3B,OAAO8b,EAAI9b,GAAc,SAAUkG,GACjC,OAAOA,EAAOg+C,cAChB,KAAM,EACR,CAMA,SAAS4uG,EAAgBQ,EAAYthG,GAGnC,OAAOA,EAAUhsE,eAAe,WAAa2wD,EAAO28G,GAAY,SAAUV,GACxE,OAAOA,EAAIrqK,UAAYypE,EAAUzpE,OACnC,IAAK+qK,CACP,CAMA,SAASG,EAAwBhtK,GAAU,CAE3CP,EAAO0Y,MAAMmiJ,EAAaiQ,GAC1B,IAAIzpK,EAAWw5J,EACfv5J,EAAOvB,QAAUsB,C,wBCloBjB,IAAIrB,EAASL,EAAQ,OAEjBy+E,EAAMz+E,EAAQ,OAEdkzE,EAAYlzE,EAAQ,MAEpBouK,EAAiBpuK,EAAQ,OAEzBquK,EAAiBruK,EAAQ,OAEzBsuK,EAAiBtuK,EAAQ,OAEzBuuK,EAAiBvuK,EAAQ,MAKzB+Y,EAAQ1Y,EAAO0Y,MASnB,SAASzS,EAAM8F,EAAQoJ,EAAa5U,GAKlCrC,KAAKiX,YAAcA,EAMnBjX,KAAKqC,QAAUA,EAMfrC,KAAK6N,OAASA,CAShB,CAuGA,SAASoiK,EAAM7+D,EAAK8+D,EAASj5J,GAC3B,IAAK,IAAIhB,EAAI,EAAGA,EAAIi6J,EAAQ/7J,OAAQ8B,IAElC,GAAKi6J,EAAQj6J,KAKbm7F,EAAMA,GAAsB,kBAARA,EAAmBA,EAAI8+D,EAAQj6J,IAAM,KAE9C,MAAPm7F,GACF,MAQJ,OAJW,MAAPA,GAAen6F,IACjBm6F,EAAMn6F,EAAY/T,IAAIgtK,IAGjB9+D,CACT,CAGA,SAAS++D,EAAUl6I,EAAOjhB,GACxB,IAAIo7J,EAAkBz7F,EAAUzxE,IAAI+yB,EAAO,aAC3C,OAAOm6I,EAAkBA,EAAgBz4J,KAAKse,EAAOjhB,GAAQihB,EAAMhf,WACrE,CA/HAlP,EAAM7F,UAAY,CAChBC,YAAa4F,EAMbshB,KAAM,KAKNmM,YAAa,SAAU3nB,GACrB/L,EAAOqwF,MAAMnyF,KAAK6N,OAAQA,GAAQ,EACpC,EAOA3K,IAAK,SAAU8R,EAAMigJ,GACnB,OAAY,MAARjgJ,EACKhV,KAAK6N,OAGPoiK,EAAMjwK,KAAK6N,OAAQ7N,KAAKy2B,UAAUzhB,IAAQigJ,GAAgBkb,EAAUnwK,KAAMgV,GACnF,EAOA7H,WAAY,SAAUxL,EAAKszJ,GACzB,IAAIpnJ,EAAS7N,KAAK6N,OACdsQ,EAAgB,MAAVtQ,EAAiBA,EAASA,EAAOlM,GACvCsV,GAAeg+I,GAAgBkb,EAAUnwK,KAAM2B,GAMnD,OAJW,MAAPwc,GAAelH,IACjBkH,EAAMlH,EAAY9J,WAAWxL,IAGxBwc,CACT,EAOAxR,SAAU,SAAUqI,EAAMiC,GACxB,IACIo5J,EADAj/D,EAAc,MAARp8F,EAAehV,KAAK6N,OAASoiK,EAAMjwK,KAAK6N,OAAQmH,EAAOhV,KAAKy2B,UAAUzhB,IAGhF,OADAiC,EAAcA,IAAgBo5J,EAAkBF,EAAUnwK,KAAMgV,KAAUq7J,EAAgB1jK,SAASqI,GAC5F,IAAIjN,EAAMqpG,EAAKn6F,EAAajX,KAAKqC,QAC1C,EAKAg8C,QAAS,WACP,OAAsB,MAAfr+C,KAAK6N,MACd,EACAy1I,YAAa,WAAa,EAE1B/+H,MAAO,WACL,IAAIwnD,EAAO/rE,KAAKmC,YAChB,OAAO,IAAI4pE,EAAKjqE,EAAOyiB,MAAMvkB,KAAK6N,QACpC,EACAyiK,YAAa,SAAU9mB,GACrB70E,EAAU27F,YAAYtwK,KAAMwpJ,EAC9B,EAEA/yH,UAAW,SAAUzhB,GAKnB,MAJoB,kBAATA,IACTA,EAAOA,EAAK6sB,MAAM,MAGb7sB,CACT,EAOA0hB,mBAAoB,SAAU05I,GAC5Bz7F,EAAUt5D,IAAIrb,KAAM,YAAaowK,EACnC,EACAnnK,mBAAoB,WAClB,IAAKi3E,EAAIlkD,KAAM,CACb,GAA6B,MAAzBh8B,KAAK6N,OAAOk8C,UACd,QAAS/pD,KAAK6N,OAAOk8C,UAChB,GAAI/pD,KAAKiX,YACd,OAAOjX,KAAKiX,YAAYhO,oBAE5B,CACF,GAgCF0rE,EAAUoE,kBAAkBhxE,GAC5ByS,EAAMzS,EAAO8nK,GACbr1J,EAAMzS,EAAO+nK,GACbt1J,EAAMzS,EAAOgoK,GACbv1J,EAAMzS,EAAOioK,GACb,IAAI7sK,EAAW4E,EACf3E,EAAOvB,QAAUsB,C,iCC9LjB,IAAIrB,EAASL,EAAQ,OAEjB84C,EAAY94C,EAAQ,OAEpB82H,EAAiB92H,EAAQ,OAOzBe,EAAOV,EAAOU,KACd+hB,EAAQziB,EAAOyiB,MACfmT,EAAM51B,EAAO41B,IACby6D,EAAQrwF,EAAOqwF,MACfo+E,EAAY,mBAyDhB,SAAS3T,EAAct6J,GAKrBtC,KAAKw2E,KAAOl0E,EAMZtC,KAAKwwK,iBAAmB,GAMxBxwK,KAAKywK,WAAa,GAMlBzwK,KAAK0wK,cAQL1wK,KAAK2wK,qBAAuB,GAM5B3wK,KAAK4wK,cAML5wK,KAAK6wK,cACP,CAsIA,SAASC,EAAe/vE,EAAWs/D,EAAyBvtE,GAC1D,IAEIi+E,EACAhE,EAHAiE,EAAkB,GAClBC,EAAY,GAIZ73C,EAAcr4B,EAAUs4B,SAa5B,GAXIt4B,EAAUgsE,aACZA,EAAahsE,EAAUgsE,aAIrB3zC,GAAer4B,EAAU1yB,WAC3B0+F,EAAaA,GAAc,CAAC,EAC5BiE,GAAmBjwE,EAAU1yB,SAAW,IAAIrrE,SAI1C+9F,EAAUmwE,MAAO,CACnBnE,EAAaA,GAAc,CAAC,EAC5B,IAAImE,EAAQnwE,EAAUmwE,MACtB1uK,EAAK0uK,GAAO,SAAUC,GAChBA,GAAeA,EAAYtjK,SACzBsjK,EAAY/sK,MACd6sK,EAAUjwK,KAAKmwK,GACLJ,IAEVA,EAAeI,GAGrB,GACF,CAqBA,OAlBKpE,IACHA,EAAahsE,GAKVgsE,EAAW1zC,WACd0zC,EAAW1zC,SAAWD,GAIxB52H,EAAK,CAACuqK,GAAYnqK,OAAOouK,GAAiBpuK,OAAOd,EAAO41B,IAAIu5I,GAAW,SAAUC,GAC/E,OAAOA,EAAMrjK,MACf,MAAK,SAAUA,GACbrL,EAAK69J,GAAyB,SAAU+Q,GACtCA,EAAWvjK,EAAQilF,EACrB,GACF,IACO,CACLi6E,WAAYA,EACZiE,gBAAiBA,EACjBD,aAAcA,EACdE,UAAWA,EAEf,CAQA,SAASI,EAAgBjtK,EAAOypE,EAASC,GACvC,IAAIwjG,EAAU,CACZ/lK,MAAOsiE,EACP7hE,OAAQ8hE,EACRyjG,YAAa1jG,EAAUC,GAGrB0jG,GAAe,EAenB,OAdA1vK,EAAOU,KAAK4B,GAAO,SAAU2J,EAAOX,GAClC,IAAIqkK,EAAUrkK,EAAKskK,MAAMnB,GAEzB,GAAKkB,GAAYA,EAAQ,IAAOA,EAAQ,GAAxC,CAIA,IAAIE,EAAWF,EAAQ,GACnBG,EAAWH,EAAQ,GAAG1tB,cAErB8tB,EAAQP,EAAQM,GAAW7jK,EAAO4jK,KACrCH,GAAe,EANjB,CAQF,IACOA,CACT,CAEA,SAASK,EAAQC,EAAMC,EAAQJ,GAC7B,MAAiB,QAAbA,EACKG,GAAQC,EACO,QAAbJ,EACFG,GAAQC,EAGRD,IAASC,CAEpB,CAEA,SAASC,EAAcC,EAAUC,GAE/B,OAAOD,EAAS16J,KAAK,OAAS26J,EAAS36J,KAAK,IAC9C,CAwBA,SAASie,EAAY28I,EAAWpsH,GAC9BA,EAAYA,GAAa,CAAC,EAC1BvjD,EAAKujD,GAAW,SAAUqsH,EAAWluK,GACnC,GAAiB,MAAbkuK,EAAJ,CAIA,IAAIC,EAAYF,EAAUjuK,GAE1B,GAAKq0H,EAAe21C,SAAShqK,GAEtB,CACLkuK,EAAY73H,EAAUwnD,iBAAiBqwE,GACvCC,EAAY93H,EAAUwnD,iBAAiBswE,GACvC,IAAI1E,EAAYpzH,EAAUu1D,gBAAgBuiE,EAAWD,GACrDD,EAAUjuK,GAAYwzB,EAAIi2I,GAAW,SAAUrlJ,GAC7C,OAAOA,EAAKza,QAAUya,EAAKipF,MAAQpf,EAAM7pE,EAAKipF,MAAOjpF,EAAKza,QAAQ,GAAQya,EAAKipF,OAASjpF,EAAKza,MAC/F,GACF,MAREskK,EAAUjuK,GAAYiuF,EAAMkgF,EAAWD,GAAW,EALpD,CAcF,GACF,CAlRAxV,EAAc16J,UAAY,CACxBC,YAAay6J,EASbqD,UAAW,SAAUl/D,EAAWs/D,GAC9Bt/D,EAAYx8E,EAAMw8E,GAAW,GAG7B,IAAIuxE,EAAkBtyK,KAAK4wK,cACvB2B,EAAkBzB,EAAen5J,KAAK3X,KAAM+gG,EAAWs/D,GAA0BiS,GACrFtyK,KAAK6wK,eAAiB0B,EAAgBxF,WAElCuF,GAEF98I,EAAY88I,EAAgBvF,WAAYwF,EAAgBxF,YAIpDwF,EAAgBvB,gBAAgB78J,SAClCm+J,EAAgBtB,gBAAkBuB,EAAgBvB,iBAGhDuB,EAAgBtB,UAAU98J,SAC5Bm+J,EAAgBrB,UAAYsB,EAAgBtB,WAG1CsB,EAAgBxB,eAClBuB,EAAgBvB,aAAewB,EAAgBxB,eAGjD/wK,KAAK4wK,cAAgB2B,CAEzB,EAMAvF,YAAa,SAAUwF,GACrB,IAAIC,EAAezyK,KAAK4wK,cAOxB,OAJA5wK,KAAKwwK,iBAAmB94I,EAAI+6I,EAAazB,gBAAiBzsJ,GAC1DvkB,KAAKywK,WAAa/4I,EAAI+6I,EAAaxB,UAAW1sJ,GAC9CvkB,KAAK0wK,cAAgBnsJ,EAAMkuJ,EAAa1B,cACxC/wK,KAAK2wK,qBAAuB,GACrBpsJ,EAAMiuJ,EAKXC,EAAa1F,WAAa/sK,KAAK6wK,eACnC,EAMA1D,kBAAmB,SAAU9qK,GAC3B,IAAIwL,EACAmjK,EAAkBhxK,KAAKwwK,iBAE3B,GAAIQ,EAAgB78J,OAAQ,CAG1B,IAAI4+G,EAAgB1wH,EAAQ22C,aAAa,YAErC+5E,IACFllH,EAAS0W,EAAMysJ,EAAgBj+C,EAAckE,oBAAoB,GAErE,CAEA,OAAOppH,CACT,EAMAw/J,eAAgB,SAAUhrK,GACxB,IAAIwrE,EAAU7tE,KAAKw2E,KAAKvlE,WAEpB68D,EAAW9tE,KAAKw2E,KAAKtlE,YAErB+/J,EAAYjxK,KAAKywK,WACjBM,EAAe/wK,KAAK0wK,cACpBpiJ,EAAU,GACVrS,EAAS,GAEb,IAAKg1J,EAAU98J,SAAW48J,EACxB,OAAO90J,EAIT,IAAK,IAAIhG,EAAI,EAAGuY,EAAMyiJ,EAAU98J,OAAQ8B,EAAIuY,EAAKvY,IAC3Co7J,EAAgBJ,EAAUh7J,GAAG7R,MAAOypE,EAASC,IAC/Cx/C,EAAQttB,KAAKiV,GAkBjB,OAZKqY,EAAQna,QAAU48J,IACrBziJ,EAAU,EAAE,IAGVA,EAAQna,SAAW69J,EAAc1jJ,EAAStuB,KAAK2wK,wBACjD10J,EAASyb,EAAIpJ,GAAS,SAAUhe,GAC9B,OAAOiU,GAAiB,IAAXjU,EAAeygK,EAAaljK,OAASojK,EAAU3gK,GAAOzC,OACrE,KAIF7N,KAAK2wK,qBAAuBriJ,EACrBrS,CACT,GA2JF,IAAI9Y,EAAWy5J,EACfx5J,EAAOvB,QAAUsB,C,iCCnZjB,IAAIuE,EAAUjG,EAAQ,OAIlBK,GAFU4F,EAAQC,QAETlG,EAAQ,QAEjBy+E,EAAMz+E,EAAQ,OAEdszB,EAAUtzB,EAAQ,OAElBixK,EAAa39I,EAAQ29I,WACrB19I,EAAaD,EAAQC,WACrBswB,EAAYvwB,EAAQuwB,UACpBqtH,EAAmB59I,EAAQ49I,iBAE3BC,EAASnxK,EAAQ,MAEjB4Z,EAAMu3J,EAAOv3J,IACbnY,EAAM0vK,EAAO1vK,IAEbq3C,EAAY94C,EAAQ,OAEpB82H,EAAiB92H,EAAQ,OAEzBoxK,EAAoBpxK,EAAQ,OAE5Bq/B,EAAUr/B,EAAQ,MAElB6mG,EAAkBxnE,EAAQwnE,gBAC1BqJ,EAAmB7wE,EAAQ6wE,iBAC3BjkG,EAAc6qH,EAAehxH,OAAO,CACtC7E,KAAM,kBAKNwc,YAAa,EAEbha,iBAAkB,KAMlBmJ,cAAe,KAOf8b,mBAAoB,KAKpBu5B,sBAAuB,yBAQvBgC,WAAY,KACZr8B,KAAM,SAAUxb,EAAQoJ,EAAa5U,EAAS8kH,GAK5CnnH,KAAKkf,YAAclf,KAAK8/D,eACxB9/D,KAAKy1B,qBAAqB5nB,EAAQxL,GAClC,IAAIzB,EAAOZ,KAAK4N,eAAeC,EAAQxL,GAMvCgZ,EAAIrb,KAAM,sBAAuBY,GAMjCZ,KAAKsjJ,aACP,EAOA7tH,qBAAsB,SAAU5nB,EAAQxL,GACtC,IAAIqjD,EAAa1lD,KAAK0lD,WAClB0hE,EAAsB1hE,EAAa4iD,EAAgBz6F,GAAU,CAAC,EAK9DilK,EAAe9yK,KAAKmE,QAEpBo0H,EAAe21C,SAAS4E,KAC1BA,GAAgB,UAGlBhxK,EAAOqwF,MAAMtkF,EAAQxL,EAAQ49I,WAAW/8I,IAAIlD,KAAKmE,UACjDrC,EAAOqwF,MAAMtkF,EAAQ7N,KAAKkgJ,oBAE1B3lG,EAAUvwB,gBAAgBnc,EAAO8c,MAAO,CAAC,SACzC3qB,KAAKo1B,kBAAkBvnB,EAAOjN,MAE1B8kD,GACFisD,EAAiB9jG,EAAQu5G,EAAqB1hE,EAElD,EACAlwB,YAAa,SAAUu9I,EAAiB1wK,GACtC0wK,EAAkBjxK,EAAOqwF,MAAMnyF,KAAK6N,OAAQklK,GAAiB,GAC7D/yK,KAAKo1B,kBAAkB29I,EAAgBnyK,MACvC,IAAI8kD,EAAa1lD,KAAK0lD,WAElBA,GACFisD,EAAiB3xG,KAAK6N,OAAQklK,EAAiBrtH,GAGjD,IAAI9kD,EAAOZ,KAAK4N,eAAemlK,EAAiB1wK,GAE5CzB,IACFya,EAAIrb,KAAM,OAAQY,GAClBya,EAAIrb,KAAM,sBAAuBY,EAAKmoD,gBAE1C,EACA3zB,kBAAmB,SAAUx0B,GAI3B,GAAIA,EAGF,IAFA,IAAIq0E,EAAQ,CAAC,QAEJh/D,EAAI,EAAGA,EAAIrV,EAAKuT,OAAQ8B,IAC3BrV,EAAKqV,IAAMrV,EAAKqV,GAAG0U,OACrB4vB,EAAUvwB,gBAAgBppB,EAAKqV,GAAG0U,MAAOsqD,EAIjD,EAMArnE,eAAgB,WAAa,EAM7BpJ,QAAS,SAAUyyB,GACjB,IAAIr2B,EAAOsC,EAAIlD,KAAM,QACrB,OAAmB,MAAZi3B,EAAmBr2B,EAAOA,EAAK27J,cAActlI,EACtD,EAKA6xB,QAAS,SAAUloD,GACjBya,EAAIrb,KAAM,OAAQY,EACpB,EAMAwpB,WAAY,WACV,OAAOlnB,EAAIlD,KAAM,sBACnB,EAcAsnC,kBAAmB,SAAU7pB,GAC3B,OAAO88B,EAAUjT,kBAAkBtnC,KAAKwE,UAAWiZ,EACrD,EAQAoyG,kBAAmB,SAAUrxC,GAC3B,OAAOjkC,EAAUs1E,kBAAkB7vH,KAAKwE,UAAWg6E,EACrD,EAQA31E,YAAa,WACX,IAAI/F,EAAW9C,KAAKkF,iBACpB,OAAOpC,GAAYA,EAAS+F,aAAe/F,EAAS+F,aACtD,EAUAkuB,cAAe,SAAUxyB,EAAWyyB,EAAgBC,GAClD,SAAS+7I,EAAiBjlK,GACxB,IAAIklK,EAAYnxK,EAAOkhH,OAAOj1G,GAAO,SAAUklK,EAAW90J,EAAK1Z,GAC7D,IAAIyuK,EAAUtyK,EAAK4c,iBAAiB/Y,GACpC,OAAOwuK,GAAaC,IAA+B,IAApBA,EAAQ55H,SAA4C,MAAvB45H,EAAQ7X,YACtE,GAAG,GACCp/I,EAAS,GACTk3J,EAAc54H,EAAU5B,kBAAkB/3C,EAAM,WAMpD,SAASwyK,EAAYj1J,EAAKm3G,GACxB,IAAI/3G,EAAU3c,EAAK4c,iBAAiB83G,GAEpC,GAAK/3G,IAAyC,IAA9BA,EAAQ87B,UAAUC,QAAlC,CAIA,IAAI6/E,EAAU57G,EAAQ7a,KAClB2wK,GAAUJ,EAAY,MAAQ11J,EAAQ89I,aAAe99I,EAAQ/Z,MAAQ,KAAO,KAAmB,YAAZ21H,EAAwBh7G,EAAM,GAAiB,SAAZg7G,EAAqBniG,EAAiB,GAAK07I,EAAW,sBAAuBv0J,GAAOmnC,EAAUnnC,IACxNk1J,GAAUp3J,EAAOjb,KAAKg0B,EAAWq+I,GAJjC,CAKF,CAEA,OAjBAF,EAAYh/J,OAASrS,EAAOU,KAAK2wK,GAAa,SAAU79C,GACtD89C,EAAYxyK,EAAKsC,IAAIoyH,EAAQ/wH,GAAY+wH,EAC3C,IACExzH,EAAOU,KAAKuL,EAAOqlK,IAcbH,EAAY,QAAU,IAAMh3J,EAAO1E,KAAK07J,EAAY,QAAU,KACxE,CAEA,IAAIryK,EAAOsC,EAAIlD,KAAM,QACjB+N,EAAQ/N,KAAKkZ,YAAY3U,GACzBiiD,EAAiB1kD,EAAO6Q,QAAQ5E,GAASilK,EAAiBjlK,GAASinB,EAAWswB,EAAUv3C,IACxFvK,EAAO5C,EAAK8D,QAAQH,GACpBgI,EAAQ3L,EAAK4L,cAAcjI,EAAW,SAEtCzC,EAAOkgB,SAASzV,IAAUA,EAAM4wC,aAClC5wC,GAASA,EAAM4wC,WAAW,IAAM,CAAC,GAAG5wC,OAGtCA,EAAQA,GAAS,cACjB,IAAI+mK,EAAUX,EAAiBpmK,GAC3B+Z,EAAatmB,KAAKwD,KAQtB,MANmB,QAAf8iB,IAEFA,EAAa,IAGfA,EAAaA,EAAa0O,EAAW1O,IAAgB0Q,EAA2B,KAAV,SAAkB,GAChFA,EAA6Gs8I,EAAUhtJ,EAAakgC,EAAnHlgC,EAAagtJ,GAAW9vK,EAAOwxB,EAAWxxB,GAAQ,KAAOgjD,EAAiBA,EACrG,EAKAv9C,mBAAoB,WAClB,GAAIi3E,EAAIlkD,KACN,OAAO,EAGT,IAAIu3I,EAAmBvzK,KAAKmN,WAAW,aAQvC,OANIomK,GACEvzK,KAAKwE,UAAUwS,QAAUhX,KAAKmN,WAAW,wBAC3ComK,GAAmB,GAIhBA,CACT,EACAjwB,YAAa,WACXjoI,EAAIrb,KAAM,OAAQkD,EAAIlD,KAAM,uBAAuB+oD,eACrD,EACA1oB,oBAAqB,SAAU78B,EAAMgwK,GACnC,IAAInxK,EAAUrC,KAAKqC,QAEfkK,EAAQsmK,EAAkBxyI,oBAAoB1oB,KAAK3X,KAAMwD,EAAMgwK,GAMnE,OAJKjnK,IACHA,EAAQlK,EAAQg+B,oBAAoB78B,EAAMgwK,IAGrCjnK,CACT,EAUA4qD,mBAAoB,KAQpBvQ,mBAAoB,OAEtB9kD,EAAO0Y,MAAM9M,EAAa6sC,EAAUs0E,iBACpC/sH,EAAO0Y,MAAM9M,EAAamlK,GAC1B,IAAI1vK,EAAWuK,EACftK,EAAOvB,QAAUsB,C,oBCtUjB,IAAIswK,EAAW,GAEU,qBAAdzuC,YACTyuC,EAAWzuC,UAAUyuC,UAAY,IAGnC,IAAItwK,EAAW,CASboJ,MAAO,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAItHq1D,UAAW,CAITxwB,WAAYqiI,EAAS/B,MAAM,QAAU,kBAAoB,aAEzD9gJ,SAAU,GACVsgB,UAAW,SACXC,WAAY,UAKdk0H,UAAW,KACXt7G,UAAW,OACXxvC,kBAAmB,IACnBmgD,wBAAyB,IACzBpgD,gBAAiB,iBACjBwuH,sBAAuB,WACvB1yD,mBAAoB,IAEpBs9F,qBAAsB,IACtBjkK,YAAa,IAMb4qC,oBAAqB,IAErBs5H,QAAQ,GAEVvwK,EAAOvB,QAAUsB,C,wBCnDjB,IAAIqV,EAAkB/W,EAAQ,OAE1Bu9C,EAAexmC,EAAgB,CAAC,CAAC,OAAQ,SAAU,CAAC,cAAe,CAAC,iBAAkB,CAAC,iBAAkB,CAAC,WAAY,CAAC,iBACvHrV,EAAW,CACb67C,aAAc,SAAUvmC,EAAUm7J,GAChC,OAAO50H,EAAah/C,KAAMyY,EAAUm7J,EACtC,GAEFxwK,EAAOvB,QAAUsB,C,oBCRjB,IAAIA,EAAW,CACb+qB,mBAAoB,WAClB,MAAO,CACL9C,KAAMprB,KAAKkD,IAAI,QACfmoB,IAAKrrB,KAAKkD,IAAI,OACdooB,MAAOtrB,KAAKkD,IAAI,SAChBqoB,OAAQvrB,KAAKkD,IAAI,UACjBqI,MAAOvL,KAAKkD,IAAI,SAChB8I,OAAQhM,KAAKkD,IAAI,UAErB,GAEFE,EAAOvB,QAAUsB,C,wBCZjB,IAAIyvK,EAASnxK,EAAQ,MAEjB4Z,EAAMu3J,EAAOv3J,IACbnY,EAAM0vK,EAAO1vK,IACbC,EAAW,CACbihK,kBAAmB,WACjB/oJ,EAAIrb,KAAM,WAAY,GACtBqb,EAAIrb,KAAM,eAAgB,CAAC,EAC7B,EACAqgC,oBAAqB,SAAU78B,EAAMgwK,GACnCA,EAAQA,GAASxzK,KACjB,IAAI6zK,EAAW3wK,EAAIswK,EAAO,aAAe,EACrCM,EAAe5wK,EAAIswK,EAAO,iBAAmBn4J,EAAIm4J,EAAO,eAAgB,CAAC,GAE7E,GAAIM,EAAalyK,eAAe4B,GAC9B,OAAOswK,EAAatwK,GAGtB,IAAIuwK,EAAe/zK,KAAKkD,IAAI,SAAS,IAAS,GAE9C,GAAK6wK,EAAa5/J,OAAlB,CAIA,IAAI5H,EAAQwnK,EAAaF,GAOzB,OALIrwK,IACFswK,EAAatwK,GAAQ+I,GAGvB8O,EAAIm4J,EAAO,YAAaK,EAAW,GAAKE,EAAa5/J,QAC9C5H,CATP,CAUF,GAEFnJ,EAAOvB,QAAUsB,C,uBClCjB,IAAIqV,EAAkB/W,EAAQ,OAE1BsW,EAAeS,EAAgB,CAAC,CAAC,OAAQ,SAAU,CAAC,SAAU,eAAgB,CAAC,YAAa,eAAgB,CAAC,WAAY,CAAC,cAAe,CAAC,iBAAkB,CAAC,iBAAkB,CAAC,eAAgB,CAAC,gBAAiB,CAAC,eACnNrV,EAAW,CACb4U,aAAc,SAAUU,EAAUm7J,GAChC,IAAIvoK,EAAQ0M,EAAa/X,KAAMyY,EAAUm7J,GACrCj7J,EAAW3Y,KAAK0Y,oBAEpB,OADAC,IAAatN,EAAMsN,SAAWA,GACvBtN,CACT,EACAqN,kBAAmB,WACjB,IAAIs7J,EAAWh0K,KAAKkD,IAAI,cACxB,MAAoB,UAAb8wK,GAAoC,MAAZA,EAAmB,KAAoB,WAAbA,EAAwB,CAAC,EAAG,GAAK,CAAC,EAAG,EAChG,GAEF5wK,EAAOvB,QAAUsB,C,wBCfjB,IAAIqV,EAAkB/W,EAAQ,OAE1BisB,EAAelV,EAAgB,CAAC,CAAC,YAAa,SAAU,CAAC,SAAU,SAAU,CAAC,WAAY,CAAC,cAAe,CAAC,iBAAkB,CAAC,iBAAkB,CAAC,iBACjJrV,EAAW,CACbuqB,aAAc,SAAUjV,GACtB,IAAIpN,EAAQqiB,EAAa1tB,KAAMyY,GAC3BE,EAAW3Y,KAAK+vF,YAAY1kF,EAAMmC,WAEtC,OADAmL,IAAatN,EAAMsN,SAAWA,GACvBtN,CACT,EACA0kF,YAAa,SAAUviF,GACJ,MAAbA,IACFA,EAAY,GAGd,IAAIwmK,EAAWh0K,KAAKkD,IAAI,QACpB+wK,EAAUztK,KAAKF,IAAIkH,EAAW,GAC9B0mK,EAAuB,EAAZ1mK,EACf,MAAoB,UAAbwmK,GAAoC,MAAZA,EAAmB,KAAoB,WAAbA,EAAwB,CAACE,EAAUA,GAAY,CAACD,EAASA,EACpH,GAEF7wK,EAAOvB,QAAUsB,C,wBCrBjB,IAAIrB,EAASL,EAAQ,OAIrB,SAAS0B,EAASqmJ,GAEhB,IAAK,IAAIvzI,EAAI,EAAGA,EAAIuzI,EAAWr1I,OAAQ8B,IAChCuzI,EAAWvzI,GAAG,KACjBuzI,EAAWvzI,GAAG,GAAKuzI,EAAWvzI,GAAG,IAIrC,OAAO,SAAUggB,EAAOxd,EAAUm7J,GAGhC,IAFA,IAAIvoK,EAAQ,CAAC,EAEJ4K,EAAI,EAAGA,EAAIuzI,EAAWr1I,OAAQ8B,IAAK,CAC1C,IAAI42B,EAAW28G,EAAWvzI,GAAG,GAE7B,KAAIwC,GAAY3W,EAAOqa,QAAQ1D,EAAUo0B,IAAa,GAAK+mI,GAAY9xK,EAAOqa,QAAQy3J,EAAU/mI,GAAY,GAA5G,CAIA,IAAI1uB,EAAM8X,EAAM9oB,WAAW0/B,GAEhB,MAAP1uB,IACF9S,EAAMm+I,EAAWvzI,GAAG,IAAMkI,EAL5B,CAOF,CAEA,OAAO9S,CACT,CACF,CAEAjI,EAAOvB,QAAUsB,C,wBCjCjB,IAAIsqD,EAAchsD,EAAQ,MAEtBwgB,EAAcxgB,EAAQ,OAEtB0yK,EAAa,CAAC,YAAa,SAC3BhxK,EAAW,CAMb8tC,aAAc,SAAUmjI,GACtB,IAAI/xK,EAAUrC,KAAKqC,QACnB,OAAOrC,KAAKmN,WAAW,YAAcinK,GAAc/xK,EAAUA,EAAQa,IAAIixK,GAAc,KACzF,EAMA7sJ,QAAS,WACP,OAAOrF,EAAYqF,QAAQ,CACzB4pB,UAAWlxC,KAAKmN,WAAW,aAC3BgkC,WAAYnxC,KAAKmN,WAAW,cAC5ByjB,SAAU5wB,KAAKmN,WAAW,YAC1BikC,WAAYpxC,KAAKmN,WAAW,eAC3BnN,KAAKqC,QACV,EACAy+D,YAAa,SAAUx1D,GACrB,OAAOmiD,EAAY9wB,gBAAgBrxB,EAAMtL,KAAKsnB,UAAWtnB,KAAKmN,WAAW,SAAUnN,KAAKmN,WAAW,kBAAoBnN,KAAKmN,WAAW,YAAanN,KAAKmN,WAAW,WAAYnN,KAAKmN,WAAW,QAASnN,KAAKmN,WAAW,gBAC3N,GAEF/J,EAAOvB,QAAUsB,C,wBChCjB,IAAI40D,EAAQt2D,EAAQ,OAEhBe,EAAOu1D,EAAMv1D,KACbmQ,EAAUolD,EAAMplD,QAChBqP,EAAW+1C,EAAM/1C,SAEjBqyJ,EAAc5yK,EAAQ,OAEtBsoB,EAAStoB,EAAQ,OAEjBsgG,EAAmBh4E,EAAOg4E,iBAG9B,SAAS7+F,EAAI6N,EAAKiE,GAChBA,EAAOA,EAAK6sB,MAAM,KAGlB,IAFA,IAAIuvE,EAAMrgG,EAEDkF,EAAI,EAAGA,EAAIjB,EAAKb,OAAQ8B,IAG/B,GAFAm7F,EAAMA,GAAOA,EAAIp8F,EAAKiB,IAEX,MAAPm7F,EACF,MAIJ,OAAOA,CACT,CAEA,SAAS/1F,EAAItK,EAAKiE,EAAMmJ,EAAKm2J,GAC3Bt/J,EAAOA,EAAK6sB,MAAM,KAIlB,IAHA,IACIlgC,EADAyvG,EAAMrgG,EAGDkF,EAAI,EAAGA,EAAIjB,EAAKb,OAAS,EAAG8B,IACnCtU,EAAMqT,EAAKiB,GAEK,MAAZm7F,EAAIzvG,KACNyvG,EAAIzvG,GAAO,CAAC,GAGdyvG,EAAMA,EAAIzvG,IAGR2yK,GAA6B,MAAhBljE,EAAIp8F,EAAKiB,OACxBm7F,EAAIp8F,EAAKiB,IAAMkI,EAEnB,CAEA,SAASo2J,EAAuB1mK,GAC9BrL,EAAKgyK,GAAmB,SAAU9vJ,GAC5BA,EAAK,KAAM7W,KAAY6W,EAAK,KAAM7W,KACpCA,EAAO6W,EAAK,IAAM7W,EAAO6W,EAAK,IAElC,GACF,CAEA,IAAI8vJ,EAAoB,CAAC,CAAC,IAAK,QAAS,CAAC,IAAK,OAAQ,CAAC,KAAM,SAAU,CAAC,KAAM,WAC1EC,EAA0B,CAAC,OAAQ,MAAO,WAAY,SAAU,UAAW,QAAS,YAAa,WAAY,YAC7GC,EAAsB,CAAC,MAAO,UAAW,cAAe,QAAS,gBAAiB,SAAU,QAAS,QAAS,QAAS,UAAW,OAAQ,MAAO,WAAY,MAAO,QAAS,SAAU,UAAW,WAEtM,SAASvxK,EAAS0K,EAAQ8mK,GACxBN,EAAYxmK,EAAQ8mK,GAEpB9mK,EAAOiU,OAASigF,EAAiBl0F,EAAOiU,QACxCtf,EAAKqL,EAAOiU,QAAQ,SAAUshC,GAC5B,GAAKphC,EAASohC,GAAd,CAIA,IAAIz/C,EAAay/C,EAAU1gD,KAQ3B,GANmB,QAAfiB,GAAuC,UAAfA,GACC,MAAvBy/C,EAAUwxH,YACZxxH,EAAUlzB,UAAYkzB,EAAUwxH,WAIjB,UAAfjxK,EAAwB,CAC1B,IAAIkxK,EAAe3xK,EAAIkgD,EAAW,iBAClB,MAAhByxH,GAAwBx5J,EAAI+nC,EAAW,yBAA0ByxH,EACnE,CAEA,IAAK,IAAI5+J,EAAI,EAAGA,EAAIy+J,EAAoBvgK,OAAQ8B,IAC9C,GAAIy+J,EAAoBz+J,KAAOmtC,EAAU1gD,KAAM,CAC7C6xK,EAAuBnxH,GACvB,KACF,CAnBF,CAqBF,IAEIv1C,EAAOinK,YACTjnK,EAAO44B,UAAY54B,EAAOinK,WAG5BtyK,EAAKiyK,GAAyB,SAAUM,GACtC,IAAI1mG,EAAUxgE,EAAOknK,GAEjB1mG,IACG17D,EAAQ07D,KACXA,EAAU,CAACA,IAGb7rE,EAAK6rE,GAAS,SAAUxgE,GACtB0mK,EAAuB1mK,EACzB,IAEJ,GACF,CAEAzK,EAAOvB,QAAUsB,C,iCC7GjB,IAAIrB,EAASL,EAAQ,OAEjB84C,EAAY94C,EAAQ,OAEpBe,EAAOV,EAAOU,KACdwf,EAAWlgB,EAAOkgB,SAClBgzJ,EAAkB,CAAC,YAAa,YAAa,YAAa,YAAa,aAAc,QAAS,aAElG,SAASC,EAAgBlkK,GACvB,IAAImkK,EAAenkK,GAAOA,EAAIpC,UAE9B,GAAKumK,EAIL,IAAK,IAAIj/J,EAAI,EAAGuY,EAAMwmJ,EAAgB7gK,OAAQ8B,EAAIuY,EAAKvY,IAAK,CAC1D,IAAIk/J,EAAYH,EAAgB/+J,GAC5Bm/J,EAAqBF,EAAan7J,OAClCs7J,EAAuBH,EAAaj7J,SAEpCm7J,GAAsBA,EAAmBD,KAC3CpkK,EAAIokK,GAAapkK,EAAIokK,IAAc,CAAC,EAE/BpkK,EAAIokK,GAAWp7J,OAGlBjY,EAAOqwF,MAAMphF,EAAIokK,GAAWp7J,OAAQq7J,EAAmBD,IAFvDpkK,EAAIokK,GAAWp7J,OAASq7J,EAAmBD,GAK7CC,EAAmBD,GAAa,MAG9BE,GAAwBA,EAAqBF,KAC/CpkK,EAAIokK,GAAapkK,EAAIokK,IAAc,CAAC,EAE/BpkK,EAAIokK,GAAWl7J,SAGlBnY,EAAOqwF,MAAMphF,EAAIokK,GAAWl7J,SAAUo7J,EAAqBF,IAF3DpkK,EAAIokK,GAAWl7J,SAAWo7J,EAAqBF,GAKjDE,EAAqBF,GAAa,KAEtC,CACF,CAEA,SAASG,EAAgBvkK,EAAK87B,GAC5B,IAAI0oI,EAAiBvzJ,EAASjR,IAAQA,EAAI87B,GACtC+0B,EAAY5/C,EAASuzJ,IAAmBA,EAAe3zG,UAE3D,GAAIA,EACF,IAAK,IAAI3rD,EAAI,EAAGuY,EAAM+rB,EAAUi7H,mBAAmBrhK,OAAQ8B,EAAIuY,EAAKvY,IAAK,CACnE42B,EAAW0N,EAAUi7H,mBAAmBv/J,GAExC2rD,EAAUhgE,eAAeirC,KAC3B0oI,EAAe1oI,GAAY+0B,EAAU/0B,GAEzC,CAEJ,CAEA,SAAS4oI,EAAqBC,GACxB1zJ,EAAS0zJ,KACXJ,EAAgBI,EAAU,UAC1BJ,EAAgBI,EAAU,YAE9B,CAEA,SAASC,EAAcvyH,GACrB,GAAKphC,EAASohC,GAAd,CAIA6xH,EAAgB7xH,GAChBqyH,EAAqBryH,EAAUz4B,OAE/B8qJ,EAAqBryH,EAAU0e,YAE/B2zG,EAAqBryH,EAAU1tB,WAC/B,IAAIg1F,EAAYtnE,EAAUsnE,UAC1BuqD,EAAgBvqD,GAChB+qD,EAAqB/qD,GAAaA,EAAU//F,OAC5C,IAAI8/F,EAAWrnE,EAAUqnE,SACzBwqD,EAAgB7xH,EAAUqnE,UAC1BgrD,EAAqBhrD,GAAYA,EAAS9/F,OAC1C,IAAI6/F,EAAWpnE,EAAUonE,SACzBirD,EAAqBjrD,GAAYA,EAAS7/F,OAE1C2qJ,EAAgBlyH,EAAW,aAC3BkyH,EAAgBlyH,EAAW,SAC3BkyH,EAAgBlyH,EAAW,UAC3B,IAAIxiD,EAAOwiD,EAAUxiD,KAErB,GAAIA,EACF,IAAK,IAAIqV,EAAI,EAAGA,EAAIrV,EAAKuT,OAAQ8B,IAC/Bg/J,EAAgBr0K,EAAKqV,IACrBw/J,EAAqB70K,EAAKqV,IAAMrV,EAAKqV,GAAG0U,OAKxC+/F,EAAYtnE,EAAUsnE,UAE1B,GAAIA,GAAaA,EAAU9pH,KACzB,KAAIqtH,EAASvD,EAAU9pH,KAEvB,IAASqV,EAAI,EAAGA,EAAIg4G,EAAO95G,OAAQ8B,IACjCg/J,EAAgBhnD,EAAOh4G,IACvBw/J,EAAqBxnD,EAAOh4G,IAAMg4G,EAAOh4G,GAAG0U,MAJnB,CASzB8/F,EAAWrnE,EAAUqnE,SAEzB,GAAIA,GAAYA,EAAS7pH,KACvB,KAAI4sH,EAAS/C,EAAS7pH,KAEtB,IAASqV,EAAI,EAAGA,EAAIu3G,EAAOr5G,OAAQ8B,IAC7BnU,EAAO6Q,QAAQ66G,EAAOv3G,KACxBg/J,EAAgBznD,EAAOv3G,GAAG,IAC1Bw/J,EAAqBjoD,EAAOv3G,GAAG,IAAMu3G,EAAOv3G,GAAG,GAAG0U,OAClDsqJ,EAAgBznD,EAAOv3G,GAAG,IAC1Bw/J,EAAqBjoD,EAAOv3G,GAAG,IAAMu3G,EAAOv3G,GAAG,GAAG0U,SAElDsqJ,EAAgBznD,EAAOv3G,IACvBw/J,EAAqBjoD,EAAOv3G,IAAMu3G,EAAOv3G,GAAG0U,OAVtB,CA7C5B,CA2DF,CAEA,SAASirJ,EAAM/wG,GACb,OAAO/iE,EAAO6Q,QAAQkyD,GAAKA,EAAIA,EAAI,CAACA,GAAK,EAC3C,CAEA,SAASgxG,EAAMhxG,GACb,OAAQ/iE,EAAO6Q,QAAQkyD,GAAKA,EAAE,GAAKA,IAAM,CAAC,CAC5C,CAEA,SAAS1hE,EAAS0K,EAAQ8mK,GACxBnyK,EAAKozK,EAAM/nK,EAAOiU,SAAS,SAAUshC,GACnCphC,EAASohC,IAAcuyH,EAAcvyH,EACvC,IACA,IAAI2iG,EAAO,CAAC,QAAS,QAAS,aAAc,YAAa,aAAc,eAAgB,SACvF4uB,GAAW5uB,EAAK/kJ,KAAK,YAAa,eAAgB,UAAW,YAC7DwB,EAAKujJ,GAAM,SAAUhmE,GACnBv9E,EAAKozK,EAAM/nK,EAAOkyE,KAAY,SAAUsjD,GAClCA,IACFiyC,EAAgBjyC,EAAS,aACzBiyC,EAAgBjyC,EAAQ9vD,YAAa,SAEzC,GACF,IACA/wE,EAAKozK,EAAM/nK,EAAO2gJ,WAAW,SAAUsnB,GACrC,IAAI5nB,EAAsB4nB,GAAeA,EAAY5nB,oBACrDonB,EAAgBpnB,EAAqB,aACrConB,EAAgBpnB,GAAuBA,EAAoB36E,YAAa,QAC1E,IACA/wE,EAAKozK,EAAM/nK,EAAOqV,WAAW,SAAU6yJ,GACrCT,EAAgBS,EAAa,YAC7BT,EAAgBS,EAAa,cAC7BT,EAAgBS,EAAa,YAC/B,IAEAvzK,EAAKozK,EAAM/nK,EAAOkjD,QAAQ,SAAUilH,GAClCV,EAAgBU,EAAU,OAC5B,IACAxzK,EAAKozK,EAAM/nK,EAAO5I,MAAM,SAAUgxK,GAC5Bj0J,EAASi0J,KACXR,EAAqBQ,EAAOtrJ,OAC5BnoB,EAAKozK,EAAMK,EAAO/mE,UAAU,SAAUgnE,GACpCT,EAAqBS,EAAUvrJ,MACjC,IAEJ,IACA8qJ,EAAqBI,EAAMhoK,EAAOwrH,UAAU1uG,OAC5C2qJ,EAAgBO,EAAMhoK,EAAO0lE,aAAc,SAC3C+hG,EAAgBO,EAAMhoK,EAAOyrC,SAASi6B,YAAa,QACrD,CAEAnwE,EAAOvB,QAAUsB,C,oBCrLjB,SAASA,EAASQ,EAAYtB,GAC5B,IAAIy9B,EAAez9B,EAAQ09B,eAAe,CACxC77B,SAAU,WAGP47B,GAAiBA,EAAa3rB,QAInC9R,EAAQ+E,iBAAiBzD,GAAY,SAAUme,GAC7C,IAAIlhB,EAAOkhB,EAAOtd,UAClB5D,EAAKs/B,YAAW,SAAUz7B,GAGxB,IAFA,IAAIjB,EAAO5C,EAAK8D,QAAQD,GAEfwR,EAAI,EAAGA,EAAI6pB,EAAa3rB,OAAQ8B,IACvC,IAAK6pB,EAAa7pB,GAAGtR,WAAWnB,GAC9B,OAAO,EAIX,OAAO,CACT,GAAGxD,KACL,GAAGA,KACL,CAEAoD,EAAOvB,QAAUsB,C,oBCzBjB,IAAIgzK,EAAW,CACbxmD,QAAS,SAAUpkF,GAIjB,IAHA,IAAIxgB,EAAM,EACN/T,EAAQ,EAEHf,EAAI,EAAGA,EAAIs1B,EAAMp3B,OAAQ8B,IAC3BoI,MAAMktB,EAAMt1B,MACf8U,GAAOwgB,EAAMt1B,GACbe,KAKJ,OAAiB,IAAVA,EAAc5I,IAAM2c,EAAM/T,CACnC,EACA+T,IAAK,SAAUwgB,GAGb,IAFA,IAAIxgB,EAAM,EAED9U,EAAI,EAAGA,EAAIs1B,EAAMp3B,OAAQ8B,IAEhC8U,GAAOwgB,EAAMt1B,IAAM,EAGrB,OAAO8U,CACT,EACAzkB,IAAK,SAAUilC,GAGb,IAFA,IAAIjlC,GAAOC,IAEF0P,EAAI,EAAGA,EAAIs1B,EAAMp3B,OAAQ8B,IAChCs1B,EAAMt1B,GAAK3P,IAAQA,EAAMilC,EAAMt1B,IAGjC,OAAO3P,CACT,EACAF,IAAK,SAAUmlC,GAGb,IAFA,IAAInlC,EAAMG,IAED0P,EAAI,EAAGA,EAAIs1B,EAAMp3B,OAAQ8B,IAChCs1B,EAAMt1B,GAAK7P,IAAQA,EAAMmlC,EAAMt1B,IAGjC,OAAO7P,CACT,EAGAgwK,QAAS,SAAU7qI,GACjB,OAAOA,EAAM,EACf,GAGE8qI,EAAe,SAAU9qI,EAAOx9B,GAClC,OAAOvH,KAAK8R,MAAMizB,EAAMp3B,OAAS,EACnC,EAEA,SAAShR,EAASQ,EAAYtB,EAASC,GACrCD,EAAQ+E,iBAAiBzD,GAAY,SAAUU,GAC7C,IAAIzD,EAAOyD,EAAYG,UACnB41C,EAAW/1C,EAAYnB,IAAI,YAC3BJ,EAAWuB,EAAYa,iBAE3B,GAAsB,gBAAlBpC,EAASJ,MAA0B03C,EAAU,CAC/C,IAQMk8H,EARF1tK,EAAW9F,EAAS+F,cACpBmK,EAAYlQ,EAASmQ,aAAarK,GAClCwT,EAASxT,EAAS8T,YAElBxO,EAAOkO,EAAO,GAAKA,EAAO,GAC1Bk8I,EAAO9xJ,KAAK8R,MAAM1X,EAAKoW,QAAU9I,GAErC,GAAIoqJ,EAAO,EAGe,kBAAbl+G,EACTk8H,EAAUH,EAAS/7H,GACU,oBAAbA,IAChBk8H,EAAUl8H,GAGRk8H,IACF11K,EAAOA,EAAKy3J,WAAWrlJ,EAAUjK,IAAK,EAAIuvJ,EAAMge,EAASD,GACzDhyK,EAAYykD,QAAQloD,GAG1B,CACF,GAAGZ,KACL,CAEAoD,EAAOvB,QAAUsB,C,iCCtFjB,IAAIw1D,EAAal3D,EAAQ,OAErBi5E,EAAaj5E,EAAQ,OAErBy8I,EAAQz8I,EAAQ,OAEhBsiE,EAAStiE,EAAQ,OAMjB80K,EAAc59G,EAAWrgD,MAMzB2lI,EAAgBC,EAAM32I,OAAO,CAC/B7E,KAAM,WACN8zK,UAAW,EACXC,mBAAoB,EACpBhhD,UAAW,SAAUl3G,EAAOuR,GAC1B,IAAI4mJ,EAAa12K,KAAK07I,QAEjBr9H,MAAME,KACTm4J,EAAW,GAAK1nD,WAAWzwG,IAGxBF,MAAMyR,KACT4mJ,EAAW,GAAK1nD,WAAWl/F,GAE/B,EACAo3H,YAAa,SAAUxpB,GACrB,IAAIthH,EAASpc,KAAK07I,QAClBhe,EAAM,GAAKthH,EAAO,KAAOA,EAAO,GAAKshH,EAAM,IAC3CA,EAAM,GAAKthH,EAAO,KAAOA,EAAO,GAAKshH,EAAM,IAE3CugB,EAAc/7I,UAAUuzH,UAAU99G,KAAK3X,KAAMoc,EAAO,GAAIA,EAAO,GACjE,EAKA+uE,YAAa,WACX,OAAOnrF,KAAKw2K,SACd,EAKAz3B,YAAa,SAAUpgH,GACrB3+B,KAAKw2K,UAAY73I,EAGjB3+B,KAAK22K,YAAc32K,KAAK07I,QAAQ14I,QAChChD,KAAKy2K,mBAAqB1yG,EAAO6yG,qBAAqBj4I,EACxD,EAKAusD,SAAU,WACR,OAAOnnB,EAAO8yG,sBAAsB72K,KAAKw2K,UAAWx2K,KAAK07I,QAAS17I,KAAK22K,YAAa32K,KAAKy2K,mBAC3F,EAKA7gD,eAAgB,WAId,IAHA,IAAIrwC,EAAS,GACTiG,EAAQxrF,KAAKkrF,WAERj1E,EAAI,EAAGA,EAAIu1E,EAAMr3E,OAAQ8B,IAChCsvE,EAAOvkF,KAAKhB,KAAKikF,SAASuH,EAAMv1E,KAGlC,OAAOsvE,CACT,EASAtB,SAAU,SAAUrjF,EAAMmQ,GACxB,GAAY,MAARnQ,EACF,MAAO,GAGT,IAAIozE,EAAYjjE,GAAOA,EAAIijE,UAY3B,OAViB,MAAbA,EACFA,EAAYrb,EAAWm+G,iBAAiBl2K,IAAS,EAC1B,SAAdozE,IAETA,EAAYh0E,KAAKy2K,oBAKnB71K,EAAO21K,EAAY31K,EAAMozE,GAAW,GAC7B0G,EAAWp1B,UAAU1kD,EAC9B,EASA+0H,UAAW,SAAUxlG,EAAa0uH,EAAaC,GAC7C3uH,EAAcA,GAAe,EAC7B,IAAI/T,EAASpc,KAAK07I,QACdnhE,EAAOn+D,EAAO,GAAKA,EAAO,GAE9B,GAAK20B,SAASwpC,GAAd,CAMIA,EAAO,IACTA,GAAQA,EACRn+D,EAAO5I,WAGT,IAAIyI,EAAS8nD,EAAOgzG,uBAAuB36J,EAAQ+T,EAAa0uH,EAAaC,GAC7E9+I,KAAKy2K,mBAAqBx6J,EAAO+6J,kBACjCh3K,KAAKw2K,UAAYv6J,EAAO0iB,SACxB3+B,KAAK22K,YAAc16J,EAAOg7J,cAZ1B,CAaF,EAWAr4B,WAAY,SAAU7tI,GACpB,IAAIqL,EAASpc,KAAK07I,QAElB,GAAIt/H,EAAO,KAAOA,EAAO,GACvB,GAAkB,IAAdA,EAAO,GAAU,CAEnB,IAAIy/B,EAAaz/B,EAAO,GAMnBrL,EAAIutI,SACPliI,EAAO,IAAMy/B,EAAa,GAG1Bz/B,EAAO,IAAMy/B,EAAa,CAE9B,MACEz/B,EAAO,GAAK,EAIhB,IAAIm+D,EAAOn+D,EAAO,GAAKA,EAAO,GAEzB20B,SAASwpC,KACZn+D,EAAO,GAAK,EACZA,EAAO,GAAK,GAGdpc,KAAK21H,UAAU5kH,EAAIof,YAAapf,EAAI8tI,YAAa9tI,EAAI+tI,aAErD,IAAIngH,EAAW3+B,KAAKw2K,UAEfzlK,EAAIstI,SACPjiI,EAAO,GAAKm6J,EAAY/vK,KAAKy+B,MAAM7oB,EAAO,GAAKuiB,GAAYA,IAGxD5tB,EAAIutI,SACPliI,EAAO,GAAKm6J,EAAY/vK,KAAK+R,KAAK6D,EAAO,GAAKuiB,GAAYA,GAE9D,IAMFs/G,EAAc77I,OAAS,WACrB,OAAO,IAAI67I,CACb,EAEA,IAAI96I,EAAW86I,EACf76I,EAAOvB,QAAUsB,C,wBCrMjB,IAAIrB,EAASL,EAAQ,OAEjBy8I,EAAQz8I,EAAQ,OAEhBk3D,EAAal3D,EAAQ,OAErBw8I,EAAgBx8I,EAAQ,OAOxBy1K,EAAah5B,EAAMh8I,UACnBi1K,EAAqBl5B,EAAc/7I,UACnC40K,EAAmBn+G,EAAWm+G,iBAC9BM,EAAmBz+G,EAAWrgD,MAC9BszI,EAAYplJ,KAAKy+B,MACjB4mH,EAAWrlJ,KAAK+R,KAChB26F,EAAU1sG,KAAK0qE,IACfmmG,EAAU7wK,KAAKqqJ,IACfymB,EAAWp5B,EAAM32I,OAAO,CAC1B7E,KAAM,MACNoa,KAAM,GACN+uJ,aAAc,WACZ3tB,EAAMp7E,MAAM9iE,KAAM6P,WAClB7P,KAAKu3K,eAAiB,IAAIt5B,CAC5B,EAKA/yD,SAAU,WACR,IAAIssF,EAAgBx3K,KAAKu3K,eACrBn7J,EAASpc,KAAK07I,QACd6C,EAAiBi5B,EAAc96J,YACnC,OAAO5a,EAAO41B,IAAIy/I,EAAmBjsF,SAASvzE,KAAK3X,OAAO,SAAUme,GAClE,IAAIs5J,EAAS9+G,EAAWrgD,MAAM46F,EAAQlzG,KAAK8c,KAAMqB,IAIjD,OAFAs5J,EAASt5J,IAAQ/B,EAAO,IAAMo7J,EAAcE,SAAWC,EAAiBF,EAAQl5B,EAAe,IAAMk5B,EACrGA,EAASt5J,IAAQ/B,EAAO,IAAMo7J,EAAcI,SAAWD,EAAiBF,EAAQl5B,EAAe,IAAMk5B,EAC9FA,CACT,GAAGz3K,KACL,EAMAikF,SAAUkzF,EAAmBlzF,SAM7Bx9E,MAAO,SAAU0X,GAEf,OADAA,EAAM+4J,EAAWzwK,MAAMkR,KAAK3X,KAAMme,GAC3B+0F,EAAQlzG,KAAK8c,KAAMqB,EAC5B,EAMAs3G,UAAW,SAAUl3G,EAAOuR,GAC1B,IAAIhT,EAAO9c,KAAK8c,KAChByB,EAAQ84J,EAAQ94J,GAAS84J,EAAQv6J,GACjCgT,EAAMunJ,EAAQvnJ,GAAOunJ,EAAQv6J,GAC7Bq6J,EAAmB1hD,UAAU99G,KAAK3X,KAAMue,EAAOuR,EACjD,EAKApT,UAAW,WACT,IAAII,EAAO9c,KAAK8c,KACZV,EAAS86J,EAAWx6J,UAAU/E,KAAK3X,MACvCoc,EAAO,GAAK82F,EAAQp2F,EAAMV,EAAO,IACjCA,EAAO,GAAK82F,EAAQp2F,EAAMV,EAAO,IAEjC,IAAIo7J,EAAgBx3K,KAAKu3K,eACrBh5B,EAAiBi5B,EAAc96J,YAGnC,OAFA86J,EAAcE,WAAat7J,EAAO,GAAKu7J,EAAiBv7J,EAAO,GAAImiI,EAAe,KAClFi5B,EAAcI,WAAax7J,EAAO,GAAKu7J,EAAiBv7J,EAAO,GAAImiI,EAAe,KAC3EniI,CACT,EAKA8qI,YAAa,SAAU9qI,GACrBpc,KAAKu3K,eAAerwB,YAAY9qI,GAEhC,IAAIU,EAAO9c,KAAK8c,KAChBV,EAAO,GAAKi7J,EAAQj7J,EAAO,IAAMi7J,EAAQv6J,GACzCV,EAAO,GAAKi7J,EAAQj7J,EAAO,IAAMi7J,EAAQv6J,GACzCo6J,EAAWhwB,YAAYvvI,KAAK3X,KAAMoc,EACpC,EAKA+qI,oBAAqB,SAAUvmJ,EAAMmI,GACnC/I,KAAKknJ,YAAYtmJ,EAAK2uB,cAAcxmB,GAAK,GAAM,SAAUoV,GACvD,OAAOA,EAAM,CACf,IACF,EAMAw3G,UAAW,SAAUkiD,GACnBA,EAAgBA,GAAiB,GACjC,IAAIz7J,EAASpc,KAAK07I,QACdnhE,EAAOn+D,EAAO,GAAKA,EAAO,GAE9B,KAAIm+D,IAASh0E,KAAYg0E,GAAQ,GAAjC,CAIA,IAAI57C,EAAWg6B,EAAWm/G,SAASv9F,GAC/Bw9F,EAAMF,EAAgBt9F,EAAO57C,EAE7Bo5I,GAAO,KACTp5I,GAAY,IAId,OAAQtgB,MAAMsgB,IAAan4B,KAAKiH,IAAIkxB,GAAY,GAAKn4B,KAAKiH,IAAIkxB,GAAY,EACxEA,GAAY,GAGd,IAAIigH,EAAa,CAACjmF,EAAWrgD,MAAMuzI,EAASzvI,EAAO,GAAKuiB,GAAYA,GAAWg6B,EAAWrgD,MAAMszI,EAAUxvI,EAAO,GAAKuiB,GAAYA,IAClI3+B,KAAKw2K,UAAY73I,EACjB3+B,KAAK22K,YAAc/3B,CAhBnB,CAiBF,EAMAA,WAAY,SAAU7tI,GACpBomK,EAAmBv4B,WAAWjnI,KAAK3X,KAAM+Q,GACzC,IAAIymK,EAAgBx3K,KAAKu3K,eACzBC,EAAcE,SAAW3mK,EAAIstI,OAC7Bm5B,EAAcI,SAAW7mK,EAAIutI,MAC/B,IAaF,SAASq5B,EAAiBx5J,EAAK65J,GAC7B,OAAOZ,EAAiBj5J,EAAK24J,EAAiBkB,GAChD,CAbAl2K,EAAOU,KAAK,CAAC,UAAW,cAAc,SAAU2nH,GAC9CmtD,EAASp1K,UAAUioH,GAAc,SAAUhsG,GAEzC,OADAA,EAAMk5J,EAAQl5J,GAAOk5J,EAAQr3K,KAAK8c,MAC3Bo6J,EAAW/sD,GAAYxyG,KAAK3X,KAAMme,EAC3C,CACF,IAEAm5J,EAASl1K,OAAS,WAChB,OAAO,IAAIk1K,CACb,EAMA,IAAIn0K,EAAWm0K,EACfl0K,EAAOvB,QAAUsB,C,iCCrKjB,IAAIrB,EAASL,EAAQ,OAEjBy8I,EAAQz8I,EAAQ,OAShBy1K,EAAah5B,EAAMh8I,UACnB87I,EAAeE,EAAM32I,OAAO,CAC9B7E,KAAM,UACN2mB,KAAM,SAAUzoB,EAAMwb,GACpBpc,KAAK0I,MAAQ9H,EACbZ,KAAK07I,QAAUt/H,GAAU,CAAC,EAAGxb,EAAKuT,OAAS,EAC7C,EACAT,MAAO,SAAUyK,GACf,MAAsB,kBAARA,EAAmBrc,EAAOqa,QAAQnc,KAAK0I,MAAOyV,GAC1D3X,KAAK8R,MAAM6F,EACf,EACA2e,QAAS,SAAUm7I,GAEjB,OADAA,EAAOj4K,KAAK0T,MAAMukK,GACXf,EAAWp6I,QAAQnlB,KAAK3X,KAAMi4K,IAA6B,MAApBj4K,KAAK0I,MAAMuvK,EAC3D,EAOAr4I,UAAW,SAAUzhB,GACnB,OAAO+4J,EAAWt3I,UAAUjoB,KAAK3X,KAAMA,KAAK0T,MAAMyK,GACpD,EACA1X,MAAO,SAAU0X,GACf,OAAO3X,KAAK8R,MAAM4+J,EAAWzwK,MAAMkR,KAAK3X,KAAMme,GAChD,EAKA+sE,SAAU,WACR,IAAIM,EAAQ,GACRpvE,EAASpc,KAAK07I,QACdu8B,EAAO77J,EAAO,GAElB,MAAO67J,GAAQ77J,EAAO,GACpBovE,EAAMxqF,KAAKi3K,GACXA,IAGF,OAAOzsF,CACT,EAOAvH,SAAU,SAAUjiD,GAClB,OAAOhiC,KAAK0I,MAAMs5B,EACpB,EAKAhrB,MAAO,WACL,OAAOhX,KAAK07I,QAAQ,GAAK17I,KAAK07I,QAAQ,GAAK,CAC7C,EAKAyL,oBAAqB,SAAUvmJ,EAAMmI,GACnC/I,KAAKknJ,YAAYtmJ,EAAK2uB,cAAcxmB,GAAK,GAC3C,EACA4sH,UAAW7zH,EAAOyG,KAClBq2I,WAAY98I,EAAOyG,OAMrBy1I,EAAa57I,OAAS,WACpB,OAAO,IAAI47I,CACb,EAEA,IAAI76I,EAAW66I,EACf56I,EAAOvB,QAAUsB,C,iCCzFjB,IAAIwxE,EAAYlzE,EAAQ,MAUxB,SAASy8I,EAAM18B,GACbxhH,KAAKk4K,SAAW12D,GAAW,CAAC,EAO5BxhH,KAAK07I,QAAU,CAACn1I,KAAWA,KAO3BvG,KAAKw2K,UAAY,EACjBx2K,KAAKqpB,MAAQrpB,KAAKqpB,KAAKy5C,MAAM9iE,KAAM6P,UACrC,CAQAquI,EAAMh8I,UAAUwR,MAAQ,SAAUyK,GAKhC,OAAOA,CACT,EAEA+/H,EAAMh8I,UAAUi2K,WAAa,SAAU30K,GACrC,OAAOxD,KAAKk4K,SAAS10K,EACvB,EAEA06I,EAAMh8I,UAAU46B,QAAU,SAAU3e,GAClC,IAAI/B,EAASpc,KAAK07I,QAClB,OAAOv9H,GAAO/B,EAAO,IAAM+B,GAAO/B,EAAO,EAC3C,EAQA8hI,EAAMh8I,UAAU09B,UAAY,SAAUzhB,GACpC,IAAI/B,EAASpc,KAAK07I,QAElB,OAAIt/H,EAAO,KAAOA,EAAO,GAChB,IAGD+B,EAAM/B,EAAO,KAAOA,EAAO,GAAKA,EAAO,GACjD,EAQA8hI,EAAMh8I,UAAUuE,MAAQ,SAAU0X,GAChC,IAAI/B,EAASpc,KAAK07I,QAClB,OAAOv9H,GAAO/B,EAAO,GAAKA,EAAO,IAAMA,EAAO,EAChD,EAOA8hI,EAAMh8I,UAAUglJ,YAAc,SAAUxpB,GACtC,IAAIthH,EAASpc,KAAK07I,QAClBhe,EAAM,GAAKthH,EAAO,KAAOA,EAAO,GAAKshH,EAAM,IAC3CA,EAAM,GAAKthH,EAAO,KAAOA,EAAO,GAAKshH,EAAM,GAE7C,EAQAwgB,EAAMh8I,UAAUilJ,oBAAsB,SAAUvmJ,EAAMmI,GACpD/I,KAAKknJ,YAAYtmJ,EAAK2uB,cAAcxmB,GAAK,GAC3C,EAOAm1I,EAAMh8I,UAAUwa,UAAY,WAC1B,OAAO1c,KAAK07I,QAAQ14I,OACtB,EAQAk7I,EAAMh8I,UAAUuzH,UAAY,SAAUl3G,EAAOuR,GAC3C,IAAI4mJ,EAAa12K,KAAK07I,QAEjBr9H,MAAME,KACTm4J,EAAW,GAAKn4J,GAGbF,MAAMyR,KACT4mJ,EAAW,GAAK5mJ,EAEpB,EAMAouH,EAAMh8I,UAAU0zH,eAAiB,WAI/B,IAHA,IAAIrwC,EAAS,GACTiG,EAAQxrF,KAAKkrF,WAERj1E,EAAI,EAAGA,EAAIu1E,EAAMr3E,OAAQ8B,IAChCsvE,EAAOvkF,KAAKhB,KAAKikF,SAASuH,EAAMv1E,KAGlC,OAAOsvE,CACT,EAOA24D,EAAMh8I,UAAU87E,QAAU,WACxB,OAAOh+E,KAAKo4K,QACd,EAKAl6B,EAAMh8I,UAAUs8I,SAAW,SAAUxgE,GACnCh+E,KAAKo4K,SAAWp6F,CAClB,EACArJ,EAAUoE,kBAAkBmlE,GAC5BvpE,EAAU43F,sBAAsBruB,EAAO,CACrCsuB,oBAAoB,IAEtB,IAAIrpK,EAAW+6I,EACf96I,EAAOvB,QAAUsB,C,wBCnKjB,IAAIrB,EAASL,EAAQ,OAEjBk3D,EAAal3D,EAAQ,OAErBi5E,EAAaj5E,EAAQ,OAErB42K,EAAc52K,EAAQ,OAEtBw8I,EAAgBx8I,EAAQ,OAWxB01K,EAAqBl5B,EAAc/7I,UACnC2pJ,EAAWrlJ,KAAK+R,KAChBqzI,EAAYplJ,KAAKy+B,MACjBqzI,EAAa,IACbC,EAA0B,GAAbD,EACbE,EAAwB,GAAbD,EACXE,EAAqB,GAAXD,EAEVE,EAAS,SAAUjqJ,EAAGxiB,EAAG0sK,EAAIC,GAC/B,MAAOD,EAAKC,EAAI,CACd,IAAI7gB,EAAM4gB,EAAKC,IAAO,EAElBnqJ,EAAEspI,GAAK,GAAK9rJ,EACd0sK,EAAK5gB,EAAM,EAEX6gB,EAAK7gB,CAET,CAEA,OAAO4gB,CACT,EAOIE,EAAY56B,EAAc12I,OAAO,CACnC7E,KAAM,OAKNuhF,SAAU,SAAU9lE,GAClB,IAAI26J,EAAU94K,KAAK+4K,SACf5+E,EAAO,IAAI2mD,KAAK3iI,GACpB,OAAOu8D,EAAWg4F,WAAWoG,EAAQ,GAAI3+E,EAAMn6F,KAAKm4K,WAAW,UACjE,EAKAv5B,WAAY,SAAU7tI,GACpB,IAAIqL,EAASpc,KAAK07I,QASlB,GAPIt/H,EAAO,KAAOA,EAAO,KAEvBA,EAAO,IAAMq8J,EACbr8J,EAAO,IAAMq8J,GAIXr8J,EAAO,MAAQ7V,KAAY6V,EAAO,KAAO7V,IAAU,CACrD,IAAIk4B,EAAI,IAAIqiH,KACZ1kI,EAAO,IAAM,IAAI0kI,KAAKriH,EAAEiiH,cAAejiH,EAAE47D,WAAY57D,EAAEkiH,WACvDvkI,EAAO,GAAKA,EAAO,GAAKq8J,CAC1B,CAEAz4K,KAAK21H,UAAU5kH,EAAIof,YAAapf,EAAI8tI,YAAa9tI,EAAI+tI,aAErD,IAAIngH,EAAW3+B,KAAKw2K,UAEfzlK,EAAIstI,SACPjiI,EAAO,GAAKu8C,EAAWrgD,MAAMszI,EAAUxvI,EAAO,GAAKuiB,GAAYA,IAG5D5tB,EAAIutI,SACPliI,EAAO,GAAKu8C,EAAWrgD,MAAMuzI,EAASzvI,EAAO,GAAKuiB,GAAYA,GAElE,EAKAg3F,UAAW,SAAUkiD,EAAeh5B,EAAaC,GAC/C+4B,EAAgBA,GAAiB,GACjC,IAAIz7J,EAASpc,KAAK07I,QACdnhE,EAAOn+D,EAAO,GAAKA,EAAO,GAC1B48J,EAAiBz+F,EAAOs9F,EAET,MAAfh5B,GAAuBm6B,EAAiBn6B,IAC1Cm6B,EAAiBn6B,GAGA,MAAfC,GAAuBk6B,EAAiBl6B,IAC1Ck6B,EAAiBl6B,GAGnB,IAAIm6B,EAAiBC,EAAY/kK,OAC7B1P,EAAMi0K,EAAOQ,EAAaF,EAAgB,EAAGC,GAC7CE,EAAQD,EAAY1yK,KAAKJ,IAAI3B,EAAKw0K,EAAiB,IACnDt6I,EAAWw6I,EAAM,GAErB,GAAiB,SAAbA,EAAM,GAAe,CACvB,IAAIC,EAAW7+F,EAAO57C,EAGlB06I,EAAW1gH,EAAW2gH,KAAKF,EAAWvB,GAAe,GACzDl5I,GAAY06I,CACd,CAEA,IAAIE,EAAiBv5K,KAAKm4K,WAAW,UAAY,EAA6D,GAAzD,IAAIr3B,MAAM1kI,EAAO,KAAOA,EAAO,IAAIo9J,oBAA2B,IAC/G56B,EAAa,CAACp4I,KAAK8R,MAAMuzI,GAAUzvI,EAAO,GAAKm9J,GAAkB56I,GAAYA,EAAW46I,GAAiB/yK,KAAK8R,MAAMszI,GAAWxvI,EAAO,GAAKm9J,GAAkB56I,GAAYA,EAAW46I,IACxLlB,EAAYoB,UAAU76B,EAAYxiI,GAClCpc,KAAK+4K,SAAWI,EAEhBn5K,KAAKw2K,UAAY73I,EACjB3+B,KAAK22K,YAAc/3B,CACrB,EACAlrI,MAAO,SAAUyK,GAEf,OAAQw6C,EAAW8nF,UAAUtiI,EAC/B,IAEFrc,EAAOU,KAAK,CAAC,UAAW,cAAc,SAAU2nH,GAC9C0uD,EAAU32K,UAAUioH,GAAc,SAAUhsG,GAC1C,OAAOg5J,EAAmBhtD,GAAYxyG,KAAK3X,KAAMA,KAAK0T,MAAMyK,GAC9D,CACF,IAEA,IAAI+6J,EAAc,CAClB,CAAC,WAAYZ,GACb,CAAC,WAAyB,EAAbA,GACb,CAAC,WAAyB,GAAbA,GACb,CAAC,WAAyB,GAAbA,GACb,CAAC,WAAyB,GAAbA,GACb,CAAC,eAAgBC,GACjB,CAAC,eAA6B,EAAbA,GACjB,CAAC,eAA6B,GAAbA,GACjB,CAAC,eAA6B,GAAbA,GACjB,CAAC,eAA6B,GAAbA,GACjB,CAAC,eAAgBC,GACjB,CAAC,eAA2B,EAAXA,GACjB,CAAC,eAA2B,EAAXA,GACjB,CAAC,eAA2B,GAAXA,GACjB,CAAC,cAAeC,GAChB,CAAC,cAAyB,EAAVA,GAChB,CAAC,cAAyB,EAAVA,GAChB,CAAC,cAAyB,EAAVA,GAChB,CAAC,cAAyB,EAAVA,GAChB,CAAC,cAAyB,EAAVA,GAChB,CAAC,OAAkB,EAAVA,GACT,CAAC,cAAyB,GAAVA,GAChB,CAAC,OAAkB,GAAVA,GACT,CAAC,OAAkB,GAAVA,GACT,CAAC,QAAmB,GAAVA,GACV,CAAC,OAAkB,GAAVA,GACT,CAAC,QAAmB,GAAVA,GACV,CAAC,OAAkB,GAAVA,GACT,CAAC,UAAqB,IAAVA,EAAgB,GAC5B,CAAC,QAAmB,GAAVA,EAAe,GACzB,CAAC,QAAmB,GAAVA,EAAe,GACzB,CAAC,YAAuB,IAAVA,EAAgB,GAC9B,CAAC,QAAmB,GAAVA,EAAe,GACzB,CAAC,QAAmB,GAAVA,EAAe,IACzB,CAAC,OAAkB,IAAVA,IAOTI,EAAUz2K,OAAS,SAAU6zB,GAC3B,OAAO,IAAI4iJ,EAAU,CACnBlF,OAAQ19I,EAAM5zB,QAAQa,IAAI,WAE9B,EAEA,IAAIC,EAAW01K,EACfz1K,EAAOvB,QAAUsB,C,iCC5LjB,IAAIw1D,EAAal3D,EAAQ,OAKrB80K,EAAc59G,EAAWrgD,MAU7B,SAASy+J,EAAuB36J,EAAQ+T,EAAa0uH,EAAaC,GAChE,IAAI7iI,EAAS,CAAC,EACVs+D,EAAOn+D,EAAO,GAAKA,EAAO,GAC1BuiB,EAAW1iB,EAAO0iB,SAAWg6B,EAAW2gH,KAAK/+F,EAAOpqD,GAAa,GAElD,MAAf0uH,GAAuBlgH,EAAWkgH,IACpClgH,EAAW1iB,EAAO0iB,SAAWkgH,GAGZ,MAAfC,GAAuBngH,EAAWmgH,IACpCngH,EAAW1iB,EAAO0iB,SAAWmgH,GAI/B,IAAI9qE,EAAY/3D,EAAO+6J,kBAAoBJ,EAAqBj4I,GAE5Ds4I,EAAiBh7J,EAAOg7J,eAAiB,CAACV,EAAY/vK,KAAK+R,KAAK6D,EAAO,GAAKuiB,GAAYA,EAAUq1C,GAAYuiG,EAAY/vK,KAAKy+B,MAAM7oB,EAAO,GAAKuiB,GAAYA,EAAUq1C,IAE3K,OADAylG,EAAUxC,EAAgB76J,GACnBH,CACT,CAOA,SAAS26J,EAAqBj4I,GAE5B,OAAOg6B,EAAWm+G,iBAAiBn4I,GAAY,CACjD,CAEA,SAASi9G,EAAMq7B,EAAgBxyK,EAAK2X,GAClC66J,EAAexyK,GAAO+B,KAAKF,IAAIE,KAAKJ,IAAI6wK,EAAexyK,GAAM2X,EAAO,IAAKA,EAAO,GAClF,CAGA,SAASq9J,EAAUxC,EAAgB76J,IAChC20B,SAASkmI,EAAe,MAAQA,EAAe,GAAK76J,EAAO,KAC3D20B,SAASkmI,EAAe,MAAQA,EAAe,GAAK76J,EAAO,IAC5Dw/H,EAAMq7B,EAAgB,EAAG76J,GACzBw/H,EAAMq7B,EAAgB,EAAG76J,GAErB66J,EAAe,GAAKA,EAAe,KACrCA,EAAe,GAAKA,EAAe,GAEvC,CAEA,SAASJ,EAAsBl4I,EAAUviB,EAAQ66J,EAAgBD,GAC/D,IAAIxrF,EAAQ,GAEZ,IAAK7sD,EACH,OAAO6sD,EAIT,IAAIkuF,EAAY,IAEZt9J,EAAO,GAAK66J,EAAe,IAC7BzrF,EAAMxqF,KAAKob,EAAO,IAGpB,IAAIg6G,EAAO6gD,EAAe,GAE1B,MAAO7gD,GAAQ6gD,EAAe,GAAI,CAKhC,GAJAzrF,EAAMxqF,KAAKo1H,GAEXA,EAAOmgD,EAAYngD,EAAOz3F,EAAUq4I,GAEhC5gD,IAAS5qC,EAAMA,EAAMr3E,OAAS,GAGhC,MAGF,GAAIq3E,EAAMr3E,OAASulK,EACjB,MAAO,EAEX,CAQA,OAJIt9J,EAAO,IAAMovE,EAAMr3E,OAASq3E,EAAMA,EAAMr3E,OAAS,GAAK8iK,EAAe,KACvEzrF,EAAMxqF,KAAKob,EAAO,IAGbovE,CACT,CAEA3pF,EAAQk1K,uBAAyBA,EACjCl1K,EAAQ+0K,qBAAuBA,EAC/B/0K,EAAQ43K,UAAYA,EACpB53K,EAAQg1K,sBAAwBA,C,iCC1GhC,IAAI/0K,EAASL,EAAQ,OAiBrB,SAASwmE,IACP,IAEI0xG,EAFApyG,EAAU,GACVqyG,EAAc,CAAC,EAEnB,MAAO,CAmBLzwK,IAAK,SAAUM,EAAIqM,EAAQ8jF,EAAM9vD,EAAOi+B,GAMtC,OALIjmE,EAAOwiF,SAASx6C,KAClBi+B,EAASj+B,EACTA,EAAQ,IAGN8vI,EAAYnwK,EAAG4c,MAInBuzJ,EAAYnwK,EAAG4c,IAAM,EACrBkhD,EAAQvmE,KAAK,CACXyI,GAAIA,EACJqM,OAAQA,EACR8jF,KAAMA,EACN9vD,MAAOA,EACPi+B,OAAQA,KAEH,EACT,EAQA19B,KAAM,SAAUw0B,GAEd,OADA86G,EAAe96G,EACR7+D,IACT,EAKAue,MAAO,WAGL,IAFA,IAAIvH,EAAQuwD,EAAQpzD,OAEX8B,EAAI,EAAGuY,EAAM+4C,EAAQpzD,OAAQ8B,EAAIuY,EAAKvY,IAAK,CAClD,IAAIqS,EAAOi/C,EAAQtxD,GACnBqS,EAAK7e,GAAG0N,UAAUmR,EAAKxS,OAAQwS,EAAKsxE,KAAMtxE,EAAKwhB,MAAOxhB,EAAKy/C,OAAQ19B,EACrE,CAEA,OAAOrqC,KAEP,SAASqqC,IACPrzB,IAEKA,IACHuwD,EAAQpzD,OAAS,EACjBylK,EAAc,CAAC,EACfD,GAAgBA,IAEpB,CACF,EAEJ,CAEA93K,EAAQomE,WAAaA,C,iCClGrB,IAAInmE,EAASL,EAAQ,OAMrB,SAAS2wD,IACP,IAAIynH,EAAe,GACfC,EAAmB,GAOvB,SAASpiJ,EAAIm9B,EAAOmF,GAClB,GAAIA,GAAS6/G,EAAa1lK,OACxB,OAAO0gD,EAGT,IAAI5+C,GAAK,EACL+rB,EAAI6yB,EAAM1gD,OACV4lK,EAAcF,EAAa7/G,KAC3BggH,EAAY,CAAC,EACbC,EAAc,CAAC,EAEnB,QAAShkK,EAAI+rB,EAAG,CACd,IAAIk4I,EAAWH,EAAYllH,EAAM5+C,IAC7B49C,EAASomH,EAAYC,GAErBrmH,EACFA,EAAO7yD,KAAK6zD,EAAM5+C,IAElBgkK,EAAYC,GAAY,CAACrlH,EAAM5+C,GAEnC,CAKA,OAHAnU,EAAOU,KAAKy3K,GAAa,SAAUlsK,EAAOpM,GACxCq4K,EAAUr4K,GAAO+1B,EAAI3pB,EAAOisD,EAC9B,IACOggH,CACT,CAQA,SAASG,EAAWH,EAAWhgH,GAC7B,GAAIA,GAAS6/G,EAAa1lK,OACxB,OAAO6lK,EAGT,IAAInlH,EAAQ,GACRulH,EAAkBN,EAAiB9/G,KAQvC,OAPAl4D,EAAOU,KAAKw3K,GAAW,SAAUjsK,EAAOpM,GACtCkzD,EAAM7zD,KAAK,CACTW,IAAKA,EACLkyD,OAAQsmH,EAAWpsK,EAAOisD,IAE9B,IAEIogH,EACKvlH,EAAMnpC,MAAK,SAAU+C,EAAGC,GAC7B,OAAO0rJ,EAAgB3rJ,EAAE9sB,IAAK+sB,EAAE/sB,IAClC,IAEOkzD,CAEX,CAEA,MAAO,CAMLlzD,IAAK,SAAU88B,GAEb,OADAo7I,EAAa74K,KAAKy9B,GACXz+B,IACT,EAMA0zD,SAAU,SAAU4V,GAElB,OADAwwG,EAAiBD,EAAa1lK,OAAS,GAAKm1D,EACrCtpE,IACT,EAMA4zD,QAAS,SAAUiB,GACjB,OAAOslH,EAAWziJ,EAAIm9B,EAAO,GAAI,EACnC,EAEJ,CAEAzxD,EAAOvB,QAAUuwD,C,gCCtGjB,IAAI1qD,EAAUjG,EAAQ,OAIlBK,GAFU4F,EAAQC,QAETlG,EAAQ,QAEjB44K,EAAiB,IACjBC,EAAe,iCACfC,EAAgB,UAOpB,SAASl/J,EAAIm/J,EAAMh3K,EAAMuK,GACvB,OAAOysK,EAAKD,EAAgB/2K,GAAQuK,CACtC,CAQA,SAAS7K,EAAIs3K,EAAMh3K,GACjB,OAAOg3K,EAAKD,EAAgB/2K,EAC9B,CAQA,SAASwoK,EAAOwO,EAAMh3K,GACpB,OAAOg3K,EAAK54K,eAAe24K,EAAgB/2K,EAC7C,CAOA,SAASw5J,EAAej4J,GACtB,IAAIo+F,EAAM,CACR44D,KAAM,GACNp8H,IAAK,IASP,OANI56B,IACFA,EAAgBA,EAAc88B,MAAMw4I,GACpCl3E,EAAI44D,KAAOh3J,EAAc,IAAM,GAC/Bo+F,EAAIxjE,IAAM56B,EAAc,IAAM,IAGzBo+F,CACT,CAMA,SAASs3E,EAAe11K,GACtBjD,EAAOs6J,OAAO,qCAAqCja,KAAKp9I,GAAgB,kBAAoBA,EAAgB,YAC9G,CAMA,SAASg0E,EAAkB2hG,EAAWC,GACpCD,EAAU7O,aAAe6O,EAEzBA,EAAUnzK,OAAS,SAAU2zG,GAC3B,IAAIixD,EAAansK,KAEb46K,EAAgB,WACb1/D,EAAM2wD,aAGT3wD,EAAM2wD,aAAa/oG,MAAM9iE,KAAM6P,WAF/Bs8J,EAAWrpG,MAAM9iE,KAAM6P,UAI3B,EAQA,OANA/N,EAAOyF,OAAOqzK,EAAc14K,UAAWg5G,GACvC0/D,EAAcrzK,OAASvH,KAAKuH,OAC5BqzK,EAAc9vJ,UAAYA,EAC1B8vJ,EAAchrK,WAAaA,EAC3B9N,EAAO6rB,SAASitJ,EAAe56K,MAC/B46K,EAAczO,WAAaA,EACpByO,CACT,CACF,CAQA,SAAS9vJ,EAAUrT,EAAS0yG,GAC1B,IAAIzsG,EAAO5b,EAAOkB,MAAM6M,UAAW,GACnC,OAAO7P,KAAKmsK,WAAWjqK,UAAUioH,GAAYrnD,MAAMrrD,EAASiG,EAC9D,CAEA,SAAS9N,EAAW6H,EAAS0yG,EAAYzsG,GACvC,OAAO1d,KAAKmsK,WAAWjqK,UAAUioH,GAAYrnD,MAAMrrD,EAASiG,EAC9D,CASA,SAAS6uJ,EAAsBsO,EAAQxsG,GACrCA,EAAUA,GAAW,CAAC,EAUtB,IAAI9G,EAAU,CAAC,EAgFf,SAASuzG,EAAc/1K,GACrB,IAAIm7H,EAAY34D,EAAQxiE,EAAcg3J,MAOtC,OALK77B,GAAcA,EAAUo6C,KAC3Bp6C,EAAY34D,EAAQxiE,EAAcg3J,MAAQ,CAAC,EAC3C77B,EAAUo6C,IAAgB,GAGrBp6C,CACT,CAEA,GAzFA26C,EAAOE,cAAgB,SAAU1uF,EAAOtnF,GACtC,GAAIA,EAIF,GAHA01K,EAAe11K,GACfA,EAAgBi4J,EAAej4J,GAE1BA,EAAc46B,KAEZ,GAAI56B,EAAc46B,MAAQ26I,EAAc,CAC7C,IAAIp6C,EAAY46C,EAAc/1K,GAC9Bm7H,EAAUn7H,EAAc46B,KAAO0sD,CACjC,OAJE9kB,EAAQxiE,EAAcg3J,MAAQ1vE,EAOlC,OAAOA,CACT,EAEAwuF,EAAO77B,SAAW,SAAUg8B,EAAmB72K,EAAS82K,GACtD,IAAI5uF,EAAQ9kB,EAAQyzG,GAMpB,GAJI3uF,GAASA,EAAMiuF,KACjBjuF,EAAQloF,EAAUkoF,EAAMloF,GAAW,MAGjC82K,IAAsB5uF,EACxB,MAAM,IAAIg1C,MAAOl9H,EAAkE,aAAe62K,EAAoB,KAAO72K,GAAW,IAAM,8BAAnH62K,gCAG7B,OAAO3uF,CACT,EAEAwuF,EAAOvO,qBAAuB,SAAUvnK,GACtCA,EAAgBi4J,EAAej4J,GAC/B,IAAIkX,EAAS,GACTm1F,EAAM7pC,EAAQxiE,EAAcg3J,MAUhC,OARI3qD,GAAOA,EAAIkpE,GACbx4K,EAAOU,KAAK4uG,GAAK,SAAUvsC,EAAGniE,GAC5BA,IAAS43K,GAAgBr+J,EAAOjb,KAAK6jE,EACvC,IAEA5oD,EAAOjb,KAAKowG,GAGPn1F,CACT,EAEA4+J,EAAO3M,SAAW,SAAUnpK,GAG1B,OADAA,EAAgBi4J,EAAej4J,KACtBwiE,EAAQxiE,EAAcg3J,KACjC,EAMA8e,EAAOzM,qBAAuB,WAC5B,IAAIuB,EAAQ,GAIZ,OAHA7tK,EAAOU,KAAK+kE,GAAS,SAAU6pC,EAAK1uG,GAClCitK,EAAM3uK,KAAK0B,EACb,IACOitK,CACT,EAQAkL,EAAOK,YAAc,SAAUn2K,GAC7BA,EAAgBi4J,EAAej4J,GAC/B,IAAIqsG,EAAM7pC,EAAQxiE,EAAcg3J,MAChC,OAAO3qD,GAAOA,EAAIkpE,EACpB,EAEAO,EAAO7d,eAAiBA,EAapB3uF,EAAQm+F,mBAAoB,CAC9B,IAAI2O,EAAiBN,EAAOtzK,OAExB4zK,IACFN,EAAOtzK,OAAS,SAAU2zG,GACxB,IAAI0/D,EAAgBO,EAAexjK,KAAK3X,KAAMk7G,GAC9C,OAAO2/D,EAAOE,cAAcH,EAAe1/D,EAAMx4G,KACnD,EAEJ,CAEA,OAAOm4K,CACT,CAMA,SAASvK,EAAYl/D,EAAKo4C,GAaxB,CAGF3nJ,EAAQwZ,IAAMA,EACdxZ,EAAQqB,IAAMA,EACdrB,EAAQmqK,OAASA,EACjBnqK,EAAQm7J,eAAiBA,EACzBn7J,EAAQk3E,kBAAoBA,EAC5Bl3E,EAAQ0qK,sBAAwBA,EAChC1qK,EAAQyuK,YAAcA,C,gCCnQtB,IAAIxuK,EAASL,EAAQ,OAEjBmxK,EAASnxK,EAAQ,MAEjBu7J,EAAiB4V,EAAO5V,eACxBlgJ,EAAO,EACPs+J,EAAY,IAOhB,SAAStP,EAAOppK,GAGd,MAAO,CAACA,GAAQ,GAAIoa,IAAQtW,KAAKy7B,UAAU1qB,KAAK6jK,EAClD,CAMA,SAAS3O,EAAuBoO,GAC9B,IAAIQ,EAAoB,CAAC,EAqBzB,OAnBAR,EAAO9rE,yBAA2B,SAAUhqG,EAAeu2K,GACzDv2K,EAAgBi4J,EAAej4J,GAC/Bs2K,EAAkBt2K,EAAcg3J,MAAQuf,CAC1C,EAEAT,EAAOjN,iBAAmB,SAAU7oK,EAAe8I,GACjD,IAAInL,EAAOmL,EAAOnL,KAElB,IAAKA,EAAM,CACT,IAAI64K,EAAoBve,EAAej4J,GAAeg3J,KAElD8e,EAAOK,YAAYn2K,IAAkBs2K,EAAkBE,KACzD74K,EAAO24K,EAAkBE,GAAmB1tK,GAEhD,CAEA,OAAOnL,CACT,EAEOm4K,CACT,CAYA,SAASnO,EAAwBmO,EAAQW,GAqEvC,SAASC,EAAmBC,GAC1B,IAAI9kJ,EAAQ,CAAC,EACT+kJ,EAAc,GAuBlB,OAtBA75K,EAAOU,KAAKk5K,GAAc,SAAUl4K,GAClC,IAAImpI,EAAWivC,EAA0BhlJ,EAAOpzB,GAC5Cq4K,EAAelvC,EAASkvC,aAAeL,EAAiBh4K,GACxDs4K,EAAgBC,EAAyBF,EAAcH,GAC3D/uC,EAASqvC,WAAaF,EAAc3nK,OAER,IAAxBw4H,EAASqvC,YACXL,EAAY36K,KAAKwC,GAGnB1B,EAAOU,KAAKs5K,GAAe,SAAUG,GAC/Bn6K,EAAOqa,QAAQwwH,EAASuvC,YAAaD,GAAiB,GACxDtvC,EAASuvC,YAAYl7K,KAAKi7K,GAG5B,IAAIE,EAAWP,EAA0BhlJ,EAAOqlJ,GAE5Cn6K,EAAOqa,QAAQggK,EAASC,UAAWH,GAAiB,GACtDE,EAASC,UAAUp7K,KAAKwC,EAE5B,GACF,IACO,CACLozB,MAAOA,EACP+kJ,YAAaA,EAEjB,CAEA,SAASC,EAA0BhlJ,EAAOpzB,GAQxC,OAPKozB,EAAMpzB,KACTozB,EAAMpzB,GAAQ,CACZ04K,YAAa,GACbE,UAAW,KAIRxlJ,EAAMpzB,EACf,CAEA,SAASu4K,EAAyBF,EAAcH,GAC9C,IAAII,EAAgB,GAIpB,OAHAh6K,EAAOU,KAAKq5K,GAAc,SAAUQ,GAClCv6K,EAAOqa,QAAQu/J,EAAcW,IAAQ,GAAKP,EAAc96K,KAAKq7K,EAC/D,IACOP,CACT,CA5GAjB,EAAO1M,kBAAoB,SAAUmO,EAAgBZ,EAAc78G,EAAUpnD,GAC3E,GAAK6kK,EAAenoK,OAApB,CAIA,IAAI8H,EAASw/J,EAAmBC,GAC5B9kJ,EAAQ3a,EAAO2a,MACfjnB,EAAQsM,EAAO0/J,YACfY,EAAgB,CAAC,EACrBz6K,EAAOU,KAAK85K,GAAgB,SAAU94K,GACpC+4K,EAAc/4K,IAAQ,CACxB,IAEA,MAAOmM,EAAMwE,OAAQ,CACnB,IAAIqoK,EAAoB7sK,EAAMkpC,MAC1B4jI,EAAa7lJ,EAAM4lJ,GACnBE,IAAsBH,EAAcC,GAEpCE,IACF79G,EAASlnD,KAAKF,EAAS+kK,EAAmBC,EAAWZ,aAAa74K,gBAC3Du5K,EAAcC,IAGvB16K,EAAOU,KAAKi6K,EAAWL,UAAWM,EAAoBC,EAAmBC,EAC3E,CAEA96K,EAAOU,KAAK+5K,GAAe,WACzB,MAAM,IAAIl7C,MAAM,+BAClB,GAzBA,CA2BA,SAASu7C,EAAWC,GAClBjmJ,EAAMimJ,GAAmBb,aAEmB,IAAxCplJ,EAAMimJ,GAAmBb,YAC3BrsK,EAAM3O,KAAK67K,EAEf,CAQA,SAASF,EAAiBE,GACxBN,EAAcM,IAAqB,EACnCD,EAAWC,EACb,CACF,CA6DF,CAEAh7K,EAAQiqK,OAASA,EACjBjqK,EAAQ4qK,uBAAyBA,EACjC5qK,EAAQ6qK,wBAA0BA,C,wBCpLlC,IAAI5qK,EAASL,EAAQ,OAEjBgsD,EAAchsD,EAAQ,MAEtBk3D,EAAal3D,EAAQ,OAOzB,SAAS6jD,EAAUr5C,GACjB,OAAIoS,MAAMpS,GACD,KAGTA,GAAKA,EAAI,IAAI41B,MAAM,KACZ51B,EAAE,GAAGmlB,QAAQ,iCAAkC,QAAUnlB,EAAEkI,OAAS,EAAI,IAAMlI,EAAE,GAAK,IAC9F,CAQA,SAAS+5H,EAAY5H,EAAK0+C,GASxB,OARA1+C,GAAOA,GAAO,IAAI2lB,cAAc3yH,QAAQ,SAAS,SAAUsgJ,EAAOqL,GAChE,OAAOA,EAAO/4J,aAChB,IAEI84J,GAAkB1+C,IACpBA,EAAMA,EAAIr6G,OAAO,GAAGC,cAAgBo6G,EAAIp7H,MAAM,IAGzCo7H,CACT,CAEA,IAAIt6C,EAAoBhiF,EAAOgiF,kBAE/B,SAAS9uD,EAAWkgB,GAClB,OAAO8nI,OAAO9nI,GAAQ9jB,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAQA,QAAQ,KAAM,QAAQA,QAAQ,KAAM,UAAUA,QAAQ,KAAM,QACjI,CAEA,IAAI6rJ,EAAgB,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAE/CC,EAAU,SAAUC,EAASC,GAC/B,MAAO,IAAMD,GAAwB,MAAbC,EAAoB,GAAKA,GAAa,GAChE,EAUA,SAAS1xC,EAAU8T,EAAK69B,EAAY72J,GAC7B1kB,EAAO6Q,QAAQ0qK,KAClBA,EAAa,CAACA,IAGhB,IAAIC,EAAYD,EAAWlpK,OAE3B,IAAKmpK,EACH,MAAO,GAKT,IAFA,IAAInyJ,EAAQkyJ,EAAW,GAAGlyJ,OAAS,GAE1BlV,EAAI,EAAGA,EAAIkV,EAAMhX,OAAQ8B,IAAK,CACrC,IAAIsnK,EAAQN,EAAchnK,GACtBkI,EAAM++J,EAAQK,EAAO,GACzB/9B,EAAMA,EAAIpuH,QAAQ8rJ,EAAQK,GAAQ/2J,EAASwO,EAAW7W,GAAOA,EAC/D,CAEA,IAAK,IAAIi/J,EAAY,EAAGA,EAAYE,EAAWF,IAC7C,IAAK,IAAI/6H,EAAI,EAAGA,EAAIl3B,EAAMhX,OAAQkuC,IAAK,CACjClkC,EAAMk/J,EAAWD,GAAWjyJ,EAAMk3B,IACtCm9F,EAAMA,EAAIpuH,QAAQ8rJ,EAAQD,EAAc56H,GAAI+6H,GAAY52J,EAASwO,EAAW7W,GAAOA,EACrF,CAGF,OAAOqhI,CACT,CAWA,SAAS1kD,EAAgB0kD,EAAKg+B,EAAOh3J,GAInC,OAHA1kB,EAAOU,KAAKg7K,GAAO,SAAUzvK,EAAOpM,GAClC69I,EAAMA,EAAIpuH,QAAQ,IAAMzvB,EAAM,IAAK6kB,EAASwO,EAAWjnB,GAASA,EAClE,IACOyxI,CACT,CAQA,SAASmzB,EAAiBpmK,EAAOs8H,GAC/B,OAAOt8H,EAAQ,+GAAsHyoB,EAAWzoB,GAAS,KAAOs8H,GAAgB,IAAM,YAAc,EACtM,CAQA,IAAI40C,EAAM,SAAUr/C,GAClB,OAAOA,EAAM,GAAK,IAAMA,EAAMA,CAChC,EAYA,SAASs0C,EAAWlzB,EAAKzxI,EAAO2vK,GAClB,SAARl+B,GAA0B,UAARA,GAA2B,YAARA,GAA6B,cAARA,GAA+B,SAARA,IACnFA,EAAM,eAGR,IAAIrlD,EAAOxhC,EAAW8nF,UAAU1yI,GAC5B4vK,EAAMD,EAAQ,MAAQ,GACtBxxK,EAAIiuF,EAAK,MAAQwjF,EAAM,cACvB5hF,EAAI5B,EAAK,MAAQwjF,EAAM,WAAa,EACpCl/I,EAAI07D,EAAK,MAAQwjF,EAAM,UACvBpmE,EAAIpd,EAAK,MAAQwjF,EAAM,WACvBzkH,EAAIihC,EAAK,MAAQwjF,EAAM,aACvBnqE,EAAIrZ,EAAK,MAAQwjF,EAAM,aAE3B,OADAn+B,EAAMA,EAAIpuH,QAAQ,KAAMqsJ,EAAI1hF,IAAI3qE,QAAQ,IAAK2qE,GAAG3qE,QAAQ,OAAQllB,GAAGklB,QAAQ,KAAMllB,EAAI,KAAKklB,QAAQ,KAAMqsJ,EAAIh/I,IAAIrN,QAAQ,IAAKqN,GAAGrN,QAAQ,KAAMqsJ,EAAIlmE,IAAInmF,QAAQ,IAAKmmF,GAAGnmF,QAAQ,KAAMqsJ,EAAIvkH,IAAI9nC,QAAQ,IAAK8nC,GAAG9nC,QAAQ,KAAMqsJ,EAAIjqE,IAAIpiF,QAAQ,IAAKoiF,GACxOgsC,CACT,CAQA,SAASzkE,EAAaqjD,GACpB,OAAOA,EAAMA,EAAIr6G,OAAO,GAAGC,cAAgBo6G,EAAIw/C,OAAO,GAAKx/C,CAC7D,CAEA,IAAIp1C,EAAev7B,EAAYu7B,aAC3BloB,EAAcrT,EAAY9wB,gBAC9B96B,EAAQyjD,UAAYA,EACpBzjD,EAAQmkI,YAAcA,EACtBnkI,EAAQiiF,kBAAoBA,EAC5BjiF,EAAQmzB,WAAaA,EACrBnzB,EAAQ6pI,UAAYA,EACpB7pI,EAAQi5F,gBAAkBA,EAC1Bj5F,EAAQ8wK,iBAAmBA,EAC3B9wK,EAAQ6wK,WAAaA,EACrB7wK,EAAQk5E,aAAeA,EACvBl5E,EAAQmnF,aAAeA,EACvBnnF,EAAQi/D,YAAcA,C,wBC5KtB,IAAIh/D,EAASL,EAAQ,OAEjBo8K,EAAWp8K,EAAQ,OAEnBg7J,EAAYh7J,EAAQ,MAEpBwiE,EAASxiE,EAAQ,OAEjBgtC,EAAShtC,EAAQ,OAEjBuyB,EAAOvyB,EAAQ,OAEfw6I,EAAgBx6I,EAAQ,OAExBgiB,EAAQhiB,EAAQ,OAEpBI,EAAQ4hB,MAAQA,EAEhB,IAAIrM,EAAQ3V,EAAQ,OAEpBI,EAAQuV,MAAQA,EAEhB,IAAIwM,EAAOniB,EAAQ,OAEnBI,EAAQ+hB,KAAOA,EAEf,IAAInT,EAAShP,EAAQ,OAErBI,EAAQ4O,OAASA,EAEjB,IAAIvF,EAASzJ,EAAQ,OAErBI,EAAQqJ,OAASA,EAEjB,IAAIomH,EAAO7vH,EAAQ,OAEnBI,EAAQyvH,KAAOA,EAEf,IAAItlG,EAAUvqB,EAAQ,OAEtBI,EAAQmqB,QAAUA,EAElB,IAAIC,EAAWxqB,EAAQ,OAEvBI,EAAQoqB,SAAWA,EAEnB,IAAIthB,EAAOlJ,EAAQ,OAEnBI,EAAQ8I,KAAOA,EAEf,IAAI0oB,EAAO5xB,EAAQ,OAEnBI,EAAQwxB,KAAOA,EAEf,IAAI4e,EAAcxwC,EAAQ,OAE1BI,EAAQowC,YAAcA,EAEtB,IAAIs5H,EAAM9pK,EAAQ,OAElBI,EAAQ0pK,IAAMA,EAEd,IAAItsD,EAAex9G,EAAQ,OAE3BI,EAAQo9G,aAAeA,EAEvB,IAAIrhE,EAAiBn8C,EAAQ,OAE7BI,EAAQ+7C,eAAiBA,EAEzB,IAAIkgI,EAAiBr8K,EAAQ,OAE7BI,EAAQi8K,eAAiBA,EAEzB,IAAI95G,EAAeviE,EAAQ,OAE3BI,EAAQmiE,aAAeA,EACvB,IAAI1rD,EAAQ9R,KAAK8R,MACb+0D,EAAU7mE,KAAKF,IACfgnE,EAAU9mE,KAAKJ,IACf23K,EAAY,CAAC,EAKjB,SAAS7wI,EAAYnL,GACnB,OAAO/N,EAAKzsB,OAAOw6B,EACrB,CAMA,SAASi8I,EAAWz6J,EAAUwe,GAC5B,OAAO87I,EAASI,iBAAiB16J,EAAUwe,EAC7C,CAUA,SAASze,EAASC,EAAUwe,EAAMr3B,EAAMnB,GACtC,IAAIyL,EAAO6oK,EAASK,iBAAiB36J,EAAUwe,GAC3CgyD,EAAe/+E,EAAK2nB,kBAUxB,OARIjyB,IACa,WAAXnB,IACFmB,EAAOyzK,EAAczzK,EAAMqpF,IAG7BqqF,EAAWppK,EAAMtK,IAGZsK,CACT,CAUA,SAASqpK,EAAUC,EAAU5zK,EAAMnB,GACjC,IAAIyL,EAAO,IAAIyO,EAAM,CACnBpY,MAAO,CACLsY,MAAO26J,EACPryK,EAAGvB,EAAKuB,EACRC,EAAGxB,EAAKwB,EACRX,MAAOb,EAAKa,MACZS,OAAQtB,EAAKsB,QAEfuyK,OAAQ,SAAU71I,GAChB,GAAe,WAAXn/B,EAAqB,CACvB,IAAIwqF,EAAe,CACjBxoF,MAAOm9B,EAAIn9B,MACXS,OAAQ08B,EAAI18B,QAEdgJ,EAAKE,SAASipK,EAAczzK,EAAMqpF,GACpC,CACF,IAEF,OAAO/+E,CACT,CAUA,SAASmpK,EAAczzK,EAAMqpF,GAE3B,IAEI/nF,EAFAg1B,EAAS+yD,EAAaxoF,MAAQwoF,EAAa/nF,OAC3CT,EAAQb,EAAKsB,OAASg1B,EAGtBz1B,GAASb,EAAKa,MAChBS,EAAStB,EAAKsB,QAEdT,EAAQb,EAAKa,MACbS,EAAST,EAAQy1B,GAGnB,IAAI70B,EAAKzB,EAAKuB,EAAIvB,EAAKa,MAAQ,EAC3Ba,EAAK1B,EAAKwB,EAAIxB,EAAKsB,OAAS,EAChC,MAAO,CACLC,EAAGE,EAAKZ,EAAQ,EAChBW,EAAGE,EAAKJ,EAAS,EACjBT,MAAOA,EACPS,OAAQA,EAEZ,CAEA,IAAIo5E,EAAYy4F,EAASz4F,UAOzB,SAASg5F,EAAWppK,EAAMtK,GACxB,GAAKsK,EAAK4nB,eAAV,CAIA,IAAI4hJ,EAAWxpK,EAAK2nB,kBAChBu8B,EAAIslH,EAAS7hC,mBAAmBjyI,GACpCsK,EAAK4nB,eAAes8B,EAJpB,CAKF,CAgBA,SAASmhB,EAAqBmjG,GAC5B,IAAIvzK,EAAQuzK,EAAMvzK,MACduD,EAAYgwK,EAAMnyK,MAAMmC,UAU5B,OARI8K,EAAiB,EAAXrO,EAAM8kB,MAAYzW,EAAiB,EAAXrO,EAAMglB,MACtChlB,EAAM8kB,GAAK9kB,EAAMglB,GAAK1O,EAAiBtW,EAAM8kB,GAAIvhB,GAAW,IAG1D8K,EAAiB,EAAXrO,EAAM+kB,MAAY1W,EAAiB,EAAXrO,EAAMklB,MACtCllB,EAAM+kB,GAAK/kB,EAAMklB,GAAK5O,EAAiBtW,EAAM+kB,GAAIxhB,GAAW,IAGvDgwK,CACT,CAgBA,SAASlzE,EAAqBkzE,GAC5B,IAAIvzK,EAAQuzK,EAAMvzK,MACduD,EAAYgwK,EAAMnyK,MAAMmC,UACxB5G,EAAUqD,EAAMgC,EAChBnF,EAAUmD,EAAMiC,EAChBuyK,EAAcx0K,EAAMsB,MACpBmzK,EAAez0K,EAAM+B,OAKzB,OAJA/B,EAAMgC,EAAIsU,EAAiBtW,EAAMgC,EAAGuB,GAAW,GAC/CvD,EAAMiC,EAAIqU,EAAiBtW,EAAMiC,EAAGsB,GAAW,GAC/CvD,EAAMsB,MAAQ/E,KAAKF,IAAIia,EAAiB3Z,EAAU63K,EAAajxK,GAAW,GAASvD,EAAMgC,EAAmB,IAAhBwyK,EAAoB,EAAI,GACpHx0K,EAAM+B,OAASxF,KAAKF,IAAIia,EAAiBzZ,EAAU43K,EAAclxK,GAAW,GAASvD,EAAMiC,EAAoB,IAAjBwyK,EAAqB,EAAI,GAChHlB,CACT,CAWA,SAASj9J,EAAiB7Z,EAAU8G,EAAWmxK,GAG7C,IAAIC,EAAkBtmK,EAAiB,EAAX5R,GAC5B,OAAQk4K,EAAkBtmK,EAAM9K,IAAc,IAAM,EAAIoxK,EAAkB,GAAKA,GAAmBD,EAAqB,GAAK,IAAM,CACpI,CAEA,SAASE,EAAgBC,GACvB,OAAuB,MAAhBA,GAAwC,QAAhBA,CACjC,CAEA,SAASC,EAAUxyK,GACjB,MAAwB,kBAAVA,EAAqBkwJ,EAAUuiB,KAAKzyK,GAAQ,IAAOA,CACnE,CAMA,SAAS0yK,EAAgBx1K,GACvB,GAAIA,EAAGy1K,gBAAiB,CACtB,IAAIxoK,EAASjN,EAAG4B,MAAMqL,OAClBzJ,EAAOxD,EAAG4B,MAAM4B,KAEhBL,EAAanD,EAAG01K,WACpBvyK,EAAWK,KAAOL,EAAWK,OAAS4xK,EAAgB5xK,GAAQ8xK,EAAU9xK,GAAQ,MAChFL,EAAW8J,OAAS9J,EAAW8J,SAAWmoK,EAAgBnoK,GAAUqoK,EAAUroK,GAAU,MACxF,IAAIoB,EAAc,CAAC,EAEnB,IAAK,IAAItU,KAAQoJ,EAES,MAApBA,EAAWpJ,KACbsU,EAAYtU,GAAQiG,EAAG4B,MAAM7H,IAIjCiG,EAAG21K,YAActnK,EACjBrO,EAAGy1K,iBAAkB,CACvB,CACF,CAMA,SAASG,EAAmB51K,GAC1B,IAAIA,EAAG61K,UAAP,CAMA,GAFAL,EAAgBx1K,GAEZA,EAAG68G,cACL78G,EAAG81K,MAAQ91K,EAAG81K,KAAKC,SAAS/1K,EAAIA,EAAG01K,gBAC9B,CACL,IAAI9zK,EAAQ5B,EAAG4B,MACXo0K,EAAoBp0K,EAAMo0K,kBAI9BA,GAAqBC,GAAoBr0K,GAoBzCA,EAAM68C,WAAWz+C,EAAG01K,YAEhBM,IACFE,GAAiBt0K,EAAOA,EAAMu0K,2BAA4BH,GAEpC,MAAlBp0K,EAAMuZ,WACRvZ,EAAMuZ,SAAW66J,EAAkBrmK,YAIvC3P,EAAG6R,OAAM,GACT7R,EAAG2I,IAAM,CACX,CAEA3I,EAAG61K,WAAY,CA9Cf,CA+CF,CAMA,SAASO,EAAmBp2K,GAC1B,GAAKA,EAAG61K,UAAR,CAIA,IAAIQ,EAAYr2K,EAAG21K,YAEf31K,EAAG68G,cACL78G,EAAG81K,MAAQ91K,EAAG81K,KAAKQ,YAAYt2K,IAI/Bq2K,GAAar2K,EAAGyL,SAAS4qK,GACzBr2K,EAAG2I,IAAM,GAGX3I,EAAG61K,WAAY,CAbf,CAcF,CAMA,SAASU,EAAav2K,GACR,UAAZA,EAAG/G,KAAmB+G,EAAGmwB,UAAS,SAAUpR,GACvB,UAAfA,EAAM9lB,MACR28K,EAAmB72J,EAEvB,IAAK62J,EAAmB51K,EAC1B,CAEA,SAASw2K,EAAax2K,GACR,UAAZA,EAAG/G,KAAmB+G,EAAGmwB,UAAS,SAAUpR,GACvB,UAAfA,EAAM9lB,MACRm9K,EAAmBr3J,EAEvB,IAAKq3J,EAAmBp2K,EAC1B,CAMA,SAASy2K,EAAmBz2K,EAAI49B,GAG9B59B,EAAG01K,WAAa11K,EAAGmD,YAAcy6B,GAAY,CAAC,EAC9C59B,EAAGy1K,iBAAkB,EAEjBz1K,EAAG61K,WACLL,EAAgBx1K,EAEpB,CAMA,SAAS02K,EAAmBzjJ,GACtB18B,KAAKogL,sBAAwB1jJ,EAAE2jJ,YAKlCrgL,KAAKsgL,cAAgBN,EAAahgL,KACrC,CAMA,SAASugL,EAAkB7jJ,GACrB18B,KAAKogL,sBAAwB1jJ,EAAE2jJ,YAKlCrgL,KAAKsgL,cAAgBL,EAAajgL,KACrC,CAMA,SAASwgL,IACPxgL,KAAKsgL,cAAe,EACpBN,EAAahgL,KACf,CAMA,SAASygL,IACPzgL,KAAKsgL,cAAe,EACpBL,EAAajgL,KACf,CAoBA,SAASsN,EAAc7D,EAAImD,EAAYmE,GACrCtH,EAAG22K,qBAAuBrvK,GAAOA,EAAI4uG,mBACzB,UAAZl2G,EAAG/G,KAAmB+G,EAAGmwB,UAAS,SAAUpR,GACvB,UAAfA,EAAM9lB,MACRw9K,EAAmB13J,EAAO5b,EAE9B,IAAKszK,EAAmBz2K,EAAImD,GAE5BnD,EAAGnJ,GAAG,YAAa6/K,GAAoB7/K,GAAG,WAAYigL,GAEtD92K,EAAGnJ,GAAG,WAAYkgL,GAAelgL,GAAG,SAAUmgL,EAChD,CAmBA,SAAS3nK,EAAchB,EAAagzD,EAAe41G,EAAaC,EAAe5vK,EAAK6vK,EAAiBC,GACnG9vK,EAAMA,GAAOgtK,EACb,IAAIhlK,EAAehI,EAAIgI,aACnBC,EAAiBjI,EAAIiI,eACrB03C,EAAgB3/C,EAAI2/C,cAGpBowH,EAAaJ,EAAYvzK,WAAW,QACpC4zK,EAAeJ,EAAcxzK,WAAW,QAIxC6zK,EAAWF,GAAcC,EAAej/K,EAAO0e,UAAUzH,EAAeA,EAAakO,kBAAkBjO,EAAgB,SAAU,KAAM03C,GAAiB,KAAM3/C,EAAIkI,aAAe,KACjLgoK,EAAkBH,EAAaE,EAAW,KAC1CE,EAAoBH,EAAej/K,EAAO0e,UAAUzH,EAAeA,EAAakO,kBAAkBjO,EAAgB,WAAY,KAAM03C,GAAiB,KAAMswH,GAAY,KAEpJ,MAAnBC,GAAgD,MAArBC,IAO7Bl6J,GAAalP,EAAa4oK,EAAaE,EAAiB7vK,GACxDiW,GAAa8jD,EAAe61G,EAAeE,EAAmB9vK,GAAK,IAGrE+G,EAAYxM,KAAO21K,EACnBn2G,EAAcx/D,KAAO41K,CACvB,CAWA,SAASl6J,GAAa46C,EAAWvB,EAAgB8gH,EAAoBpwK,EAAKqjK,GAIxE,OAHAgN,GAAmBx/G,EAAWvB,EAAgBtvD,EAAKqjK,GACnD+M,GAAsBr/K,EAAOyF,OAAOq6D,EAAWu/G,GAC/Cv/G,EAAU44G,MAAQ54G,EAAU44G,KAAKl/J,OAASsmD,EAAU44G,KAAKl/J,OAAM,GACxDsmD,CACT,CAWA,SAASy/G,GAAQz/G,EAAWhpD,EAAYuhI,GACtC,IAGIi6B,EAHArjK,EAAM,CACRoI,YAAY,IAIO,IAAjBghI,EACFi6B,GAAa,EAGbrjK,EAAIqI,UAAY+gI,EAGlBinC,GAAmBx/G,EAAWhpD,EAAY7H,EAAKqjK,GAC/CxyG,EAAU44G,MAAQ54G,EAAU44G,KAAKl/J,OAASsmD,EAAU44G,KAAKl/J,OAAM,EACjE,CAmBA,SAAS8lK,GAAmBx/G,EAAWvB,EAAgBtvD,EAAKqjK,GAI1D,GAFArjK,EAAMA,GAAOgtK,EAEThtK,EAAIoI,WAAY,CAClB,IAAIG,EAAe+mD,EAAelzD,WAAW,cAAgBinK,EAAa,KAAO,UAGhE,YAAjB96J,IAA+BA,EAAe,OAC9CsoD,EAAUtoD,aAAeA,EACzBsoD,EAAU0/G,WAAajhH,EAAelzD,WAAW,UACjD,IAAI8hD,EAAcoR,EAAelzD,WAAW,UAC7B,MAAf8hD,IAAwBA,GAAezoD,KAAK0L,GAAK,KACjD0vD,EAAU9lC,aAAemzB,EACzB2S,EAAU4pG,aAAe1pK,EAAO0e,UAAU6/C,EAAelzD,WAAW,YAAainK,EAAa,KAAO,EACvG,CAEA,IAmBImN,EAnBAl/K,EAAUg+D,EAAeh+D,QACzBm/K,EAAkBn/K,GAAWA,EAAQwL,OAAO+zD,UAiB5C6/G,EAAgBC,GAAiBrhH,GAGrC,GAAIohH,EAGF,IAAK,IAAIj+K,KAFT+9K,EAAa,CAAC,EAEGE,EACf,GAAIA,EAAc7/K,eAAe4B,GAAO,CAEtC,IAAIm+K,EAAgBthH,EAAe1zD,SAAS,CAAC,OAAQnJ,IAErDo+K,GAAkBL,EAAW/9K,GAAQ,CAAC,EAAGm+K,EAAeH,EAAiBzwK,EAAKqjK,EAChF,CAWJ,OAPAxyG,EAAUigH,KAAON,EACjBK,GAAkBhgH,EAAWvB,EAAgBmhH,EAAiBzwK,EAAKqjK,GAAY,GAE3ErjK,EAAI6iB,YAAc7iB,EAAI6wD,YACxB7wD,EAAI6wD,UAAY,CAAC,GAGZA,CACT,CAkBA,SAAS8/G,GAAiBrhH,GAExB,IAAIyhH,EAEJ,MAAOzhH,GAAkBA,IAAmBA,EAAeh+D,QAAS,CAClE,IAAIw/K,GAAQxhH,EAAexyD,QAAUkwK,GAAW8D,KAEhD,GAAIA,EAGF,IAAK,IAAIr+K,KAFTs+K,EAAkBA,GAAmB,CAAC,EAErBD,EACXA,EAAKjgL,eAAe4B,KACtBs+K,EAAgBt+K,GAAQ,GAK9B68D,EAAiBA,EAAeppD,WAClC,CAEA,OAAO6qK,CACT,CAEA,SAASF,GAAkBhgH,EAAWvB,EAAgBmhH,EAAiBzwK,EAAKqjK,EAAY2N,GAOtF,GALAP,GAAmBpN,GAAcoN,GAAmBzD,EACpDn8G,EAAUh9C,SAAWo9J,GAAa3hH,EAAelzD,WAAW,SAAU4D,IAAQywK,EAAgBj1K,MAC9Fq1D,EAAU/8C,WAAam9J,GAAa3hH,EAAelzD,WAAW,mBAAoB4D,IAAQywK,EAAgBS,gBAC1GrgH,EAAUsgH,gBAAkBpgL,EAAO0e,UAAU6/C,EAAelzD,WAAW,mBAAoBq0K,EAAgBW,kBAEtG/N,EAAY,CACf,GAAI2N,EAAS,CAEX,IAAIK,EAAuBxgH,EAAUtoD,aACrCsoD,EAAUygH,eAAiB1C,GAAiB/9G,EAAWwgH,EAAsBrxK,GAG7E6wD,EAAUg+G,2BAA6BwC,EACvCxgH,EAAU69G,kBAAoB1uK,CAChC,CAG0B,MAAtB6wD,EAAUh9C,WACZg9C,EAAUh9C,SAAW7T,EAAIqI,UAE7B,CAKAwoD,EAAU1wB,UAAYmvB,EAAelzD,WAAW,cAAgBq0K,EAAgBtwI,UAChF0wB,EAAUzwB,WAAakvB,EAAelzD,WAAW,eAAiBq0K,EAAgBrwI,WAClFywB,EAAUhxC,SAAWyvC,EAAelzD,WAAW,aAAeq0K,EAAgB5wJ,SAC9EgxC,EAAUxwB,WAAaivB,EAAelzD,WAAW,eAAiBq0K,EAAgBpwI,WAClFwwB,EAAUr0C,UAAY8yC,EAAelzD,WAAW,SAChDy0D,EAAUp0C,kBAAoB6yC,EAAelzD,WAAW,kBAAoBkzD,EAAelzD,WAAW,YACtGy0D,EAAU0gH,eAAiBjiH,EAAelzD,WAAW,cACrDy0D,EAAU9tC,UAAYusC,EAAelzD,WAAW,SAChDy0D,EAAU7tC,WAAassC,EAAelzD,WAAW,UACjDy0D,EAAU2gH,QAAUliH,EAAelzD,WAAW,OAEzC40K,GAAYhxK,EAAImpH,aACnBt4D,EAAU4gH,oBAAsBR,GAAa3hH,EAAelzD,WAAW,mBAAoB4D,GAC3F6wD,EAAU6gH,YAAcpiH,EAAelzD,WAAW,WAClDy0D,EAAUqgH,gBAAkBD,GAAa3hH,EAAelzD,WAAW,eAAgB4D,GACnF6wD,EAAUugH,gBAAkB9hH,EAAelzD,WAAW,eACtDy0D,EAAU8gH,iBAAmBriH,EAAelzD,WAAW,gBACvDy0D,EAAU+gH,mBAAqBtiH,EAAelzD,WAAW,eACzDy0D,EAAUghH,kBAAoBviH,EAAelzD,WAAW,cACxDy0D,EAAUihH,qBAAuBxiH,EAAelzD,WAAW,iBAC3Dy0D,EAAUkhH,qBAAuBziH,EAAelzD,WAAW,kBAG7Dy0D,EAAUmhH,gBAAkB1iH,EAAelzD,WAAW,oBAAsBq0K,EAAgBuB,gBAC5FnhH,EAAUohH,eAAiB3iH,EAAelzD,WAAW,mBAAqBq0K,EAAgBwB,eAC1FphH,EAAUqhH,kBAAoB5iH,EAAelzD,WAAW,sBAAwBq0K,EAAgByB,kBAChGrhH,EAAUshH,kBAAoB7iH,EAAelzD,WAAW,sBAAwBq0K,EAAgB0B,iBAClG,CAEA,SAASlB,GAAaz1K,EAAOwE,GAC3B,MAAiB,SAAVxE,EAAmBA,EAAQwE,GAAOA,EAAIqI,UAAYrI,EAAIqI,UAAY,IAC3E,CAEA,SAASumK,GAAiB/9G,EAAWtoD,EAAcvI,GACjD,IACIsxK,EADAh1J,EAAiBtc,EAAIsc,eAkBzB,OAf0B,MAAtBu0C,EAAUh9C,WAAuC,IAAnByI,KAAgD,IAAnBA,GAA2Btc,EAAIoI,YAAcG,GACjF,kBAAjBA,GAA6BA,EAAa6C,QAAQ,WAAa,KACvEkmK,EAAiB,CACfz9J,SAAU,KACVC,WAAY+8C,EAAU/8C,WACtBq9J,gBAAiBtgH,EAAUsgH,iBAE7BtgH,EAAUh9C,SAAW,OAEO,MAAxBg9C,EAAU/8C,aACZ+8C,EAAU/8C,WAAa9T,EAAIqI,UACE,MAA7BwoD,EAAUsgH,kBAA4BtgH,EAAUsgH,gBAAkB,KAI/DG,CACT,CAEA,SAAS3C,GAAoBr0K,GAC3B,IAAIg3K,EAAiBh3K,EAAMg3K,eAEvBA,IACFh3K,EAAMuZ,SAAWy9J,EAAez9J,SAChCvZ,EAAMwZ,WAAaw9J,EAAex9J,WAClCxZ,EAAM62K,gBAAkBG,EAAeH,gBAE3C,CAEA,SAAS56J,GAAQvW,EAAK1O,GAEpB,IAAI8gL,EAAkB9gL,GAAWA,EAAQsK,SAAS,aAClD,MAAO,CACPoE,EAAImgC,WAAaiyI,GAAmBA,EAAgBh2K,WAAW,cAAgB,GAAI4D,EAAIogC,YAAcgyI,GAAmBA,EAAgBh2K,WAAW,eAAiB,IAAK4D,EAAI6f,UAAYuyJ,GAAmBA,EAAgBh2K,WAAW,aAAe,IAAM,KAAM4D,EAAIqgC,YAAc+xI,GAAmBA,EAAgBh2K,WAAW,eAAiB,cAAcoK,KAAK,IACxW,CAEA,SAAS6rK,GAAkB34K,EAAUhB,EAAIwrE,EAAO9wD,EAAiB5f,EAAWiT,GACjD,oBAAdjT,IACTiT,EAAKjT,EACLA,EAAY,MAMd,IAAIgvK,EAAmBpvJ,GAAmBA,EAAgBlb,qBAE1D,GAAIsqK,EAAkB,CACpB,IAAI8P,EAAU54K,EAAW,SAAW,GAChCq9D,EAAW3jD,EAAgBhX,WAAW,oBAAsBk2K,GAC5D/oK,EAAkB6J,EAAgBhX,WAAW,kBAAoBk2K,GACjEC,EAAiBn/J,EAAgBhX,WAAW,iBAAmBk2K,GAErC,oBAAnBC,IACTA,EAAiBA,EAAe/+K,EAAW4f,EAAgBpN,wBAA0BoN,EAAgBpN,wBAAwBtN,EAAIlF,GAAa,OAGxH,oBAAbujE,IACTA,EAAWA,EAASvjE,IAGtBujE,EAAW,EAAIr+D,EAAG0N,UAAU89D,EAAOnN,EAAUw7G,GAAkB,EAAGhpK,EAAiB9C,IAAMA,IAAO/N,EAAGogC,gBAAiBpgC,EAAG2D,KAAK6nE,GAAQz9D,GAAMA,IAC5I,MACE/N,EAAGogC,gBACHpgC,EAAG2D,KAAK6nE,GACRz9D,GAAMA,GAEV,CAyBA,SAASxN,GAAYP,EAAIwrE,EAAO9wD,EAAiB5f,EAAWiT,GAC1D4rK,IAAkB,EAAM35K,EAAIwrE,EAAO9wD,EAAiB5f,EAAWiT,EACjE,CAiBA,SAASuN,GAAUtb,EAAIwrE,EAAO9wD,EAAiB5f,EAAWiT,GACxD4rK,IAAkB,EAAO35K,EAAIwrE,EAAO9wD,EAAiB5f,EAAWiT,EAClE,CAUA,SAAS+zF,GAAaz1F,EAAQonD,GAC5B,IAAIqmH,EAAMt/G,EAAO2mB,SAAS,IAE1B,MAAO90E,GAAUA,IAAWonD,EAC1B+G,EAAO4mB,IAAI04F,EAAKztK,EAAOg1E,oBAAqBy4F,GAC5CztK,EAASA,EAAOtK,OAGlB,OAAO+3K,CACT,CAYA,SAAS3mJ,GAAe9mB,EAAQ+mB,EAAWugH,GASzC,OARIvgH,IAAc/6B,EAAO0hL,YAAY3mJ,KACnCA,EAAYo/G,EAAcnxD,kBAAkBjuD,IAG1CugH,IACFvgH,EAAYonC,EAAOm5E,OAAO,GAAIvgH,IAGzB4R,EAAO7R,eAAe,GAAI9mB,EAAQ+mB,EAC3C,CASA,SAAS2uE,GAAmB7lC,EAAW9oC,EAAWugH,GAEhD,IAAIqmC,EAAyB,IAAjB5mJ,EAAU,IAA6B,IAAjBA,EAAU,IAA6B,IAAjBA,EAAU,GAAW,EAAIr2B,KAAKiH,IAAI,EAAIovB,EAAU,GAAKA,EAAU,IACnH6mJ,EAAyB,IAAjB7mJ,EAAU,IAA6B,IAAjBA,EAAU,IAA6B,IAAjBA,EAAU,GAAW,EAAIr2B,KAAKiH,IAAI,EAAIovB,EAAU,GAAKA,EAAU,IACnH+uE,EAAS,CAAe,SAAdjmC,GAAwB89G,EAAsB,UAAd99G,EAAwB89G,EAAQ,EAAiB,QAAd99G,GAAuB+9G,EAAsB,WAAd/9G,EAAyB+9G,EAAQ,GAEjJ,OADA93E,EAAShvE,GAAegvE,EAAQ/uE,EAAWugH,GACpC52I,KAAKiH,IAAIm+F,EAAO,IAAMplG,KAAKiH,IAAIm+F,EAAO,IAAMA,EAAO,GAAK,EAAI,QAAU,OAASA,EAAO,GAAK,EAAI,SAAW,KACnH,CAOA,SAAS5e,GAAgB22F,EAAIC,EAAIz/J,EAAiB3M,GAChD,GAAKmsK,GAAOC,EAAZ,CA2BA,IAAIC,EAASC,EAASH,GACtBC,EAAGhqJ,UAAS,SAAUnwB,GACpB,IAAKA,EAAGy7J,SAAWz7J,EAAGi+E,KAAM,CAC1B,IAAIq8F,EAAQF,EAAOp6K,EAAGi+E,MAEtB,GAAIq8F,EAAO,CACT,IAAIC,EAAUC,EAAmBx6K,GACjCA,EAAG2D,KAAK62K,EAAmBF,IAC3B/5K,GAAYP,EAAIu6K,EAAS7/J,EAAiB1a,EAAGlF,UAC/C,CAMF,CACF,GAzCA,CAEA,SAASu/K,EAASI,GAChB,IAAIvzE,EAAQ,CAAC,EAMb,OALAuzE,EAAEtqJ,UAAS,SAAUnwB,IACdA,EAAGy7J,SAAWz7J,EAAGi+E,OACpBipB,EAAMlnG,EAAGi+E,MAAQj+E,EAErB,IACOknG,CACT,CAEA,SAASszE,EAAmBx6K,GAC1B,IAAI2nG,EAAM,CACR1qG,SAAU+nC,EAAOlqB,MAAM9a,EAAG/C,UAC1BuL,SAAUxI,EAAGwI,UAOf,OAJIxI,EAAGQ,QACLmnG,EAAInnG,MAAQnI,EAAOyF,OAAO,CAAC,EAAGkC,EAAGQ,QAG5BmnG,CACT,CAmBF,CAQA,SAASuQ,GAAiBh1F,EAAQjiB,GAChC,OAAO5I,EAAO41B,IAAI/K,GAAQ,SAAU7mB,GAClC,IAAImG,EAAInG,EAAM,GACdmG,EAAIohE,EAAQphE,EAAGvB,EAAKuB,GACpBA,EAAIqhE,EAAQrhE,EAAGvB,EAAKuB,EAAIvB,EAAKa,OAC7B,IAAIW,EAAIpG,EAAM,GAGd,OAFAoG,EAAImhE,EAAQnhE,EAAGxB,EAAKwB,GACpBA,EAAIohE,EAAQphE,EAAGxB,EAAKwB,EAAIxB,EAAKsB,QACtB,CAACC,EAAGC,EACb,GACF,CAQA,SAASi4K,GAAeC,EAAY15K,GAClC,IAAIuB,EAAIohE,EAAQ+2G,EAAWn4K,EAAGvB,EAAKuB,GAC/BgjB,EAAKq+C,EAAQ82G,EAAWn4K,EAAIm4K,EAAW74K,MAAOb,EAAKuB,EAAIvB,EAAKa,OAC5DW,EAAImhE,EAAQ+2G,EAAWl4K,EAAGxB,EAAKwB,GAC/BijB,EAAKm+C,EAAQ82G,EAAWl4K,EAAIk4K,EAAWp4K,OAAQtB,EAAKwB,EAAIxB,EAAKsB,QAEjE,GAAIijB,GAAMhjB,GAAKkjB,GAAMjjB,EACnB,MAAO,CACLD,EAAGA,EACHC,EAAGA,EACHX,MAAO0jB,EAAKhjB,EACZD,OAAQmjB,EAAKjjB,EAGnB,CASA,SAAS2rE,GAAW6kD,EAAS3rH,EAAKrG,GAChCqG,EAAMjP,EAAOyF,OAAO,CAClBovH,WAAW,GACV5lH,GACH,IAAI1F,EAAQ0F,EAAI1F,MAAQ,CACtB8J,eAAe,GASjB,GAPAzK,EAAOA,GAAQ,CACbuB,GAAI,EACJC,GAAI,EACJX,MAAO,EACPS,OAAQ,GAGN0wH,EACF,OAAuC,IAAhCA,EAAQvgH,QAAQ,aAAqB9Q,EAAMsY,MAAQ+4G,EAAQ15H,MAAM,GAAIlB,EAAOkL,SAAS3B,EAAOX,GAAO,IAAI+Y,EAAM1S,IAAQuS,EAASo5G,EAAQtrG,QAAQ,UAAW,IAAKrgB,EAAKrG,EAAM,SAEpL,CAEA7I,EAAQqrC,YAAcA,EACtBrrC,EAAQm8K,WAAaA,EACrBn8K,EAAQyhB,SAAWA,EACnBzhB,EAAQw8K,UAAYA,EACpBx8K,EAAQujF,UAAYA,EACpBvjF,EAAQu8K,WAAaA,EACrBv8K,EAAQw4E,qBAAuBA,EAC/Bx4E,EAAQyoG,qBAAuBA,EAC/BzoG,EAAQ0e,iBAAmBA,EAC3B1e,EAAQyL,cAAgBA,EACxBzL,EAAQiX,cAAgBA,EACxBjX,EAAQmlB,aAAeA,GACvBnlB,EAAQw/K,QAAUA,GAClBx/K,EAAQylB,QAAUA,GAClBzlB,EAAQmI,YAAcA,GACtBnI,EAAQkjB,UAAYA,GACpBljB,EAAQ0pG,aAAeA,GACvB1pG,EAAQ+6B,eAAiBA,GACzB/6B,EAAQ2pG,mBAAqBA,GAC7B3pG,EAAQmrF,gBAAkBA,GAC1BnrF,EAAQ8/G,iBAAmBA,GAC3B9/G,EAAQsiL,eAAiBA,GACzBtiL,EAAQg2E,WAAaA,E,uBCpjCrB,IAAI/1E,EAASL,EAAQ,OAEjBuiE,EAAeviE,EAAQ,OAEvBuO,EAAUvO,EAAQ,OAElBwO,EAAeD,EAAQC,aAEvByqE,EAAaj5E,EAAQ,OAGrBe,EAAOV,EAAOU,KAKd0uG,EAAkB,CAAC,OAAQ,QAAS,MAAO,SAAU,QAAS,UAK9DmzE,EAAW,CAAC,CAAC,QAAS,OAAQ,SAAU,CAAC,SAAU,MAAO,WAE9D,SAASC,EAAU1rH,EAAQvwD,EAAOsjB,EAAKk9D,EAAU07F,GAC/C,IAAIt4K,EAAI,EACJC,EAAI,EAEQ,MAAZ28E,IACFA,EAAWtiF,KAGI,MAAbg+K,IACFA,EAAYh+K,KAGd,IAAIi+K,EAAqB,EACzBn8K,EAAM0jC,WAAU,SAAUvjB,EAAO/jB,GAC/B,IAIIggL,EACAC,EALAh+K,EAAW8hB,EAAM9hB,SACjBgE,EAAO8d,EAAMmU,kBACbgoJ,EAAYt8K,EAAM8S,QAAQ1W,EAAM,GAChCmgL,EAAgBD,GAAaA,EAAUhoJ,kBAI3C,GAAe,eAAXi8B,EAAyB,CAC3B,IAAIisH,EAAQn6K,EAAKa,OAASq5K,GAAiBA,EAAc34K,EAAIvB,EAAKuB,EAAI,GACtEw4K,EAAQx4K,EAAI44K,EAGRJ,EAAQ57F,GAAYrgE,EAAMo9F,SAC5B35G,EAAI,EACJw4K,EAAQI,EACR34K,GAAKs4K,EAAqB74J,EAC1B64J,EAAqB95K,EAAKsB,QAG1Bw4K,EAAqBh+K,KAAKF,IAAIk+K,EAAoB95K,EAAKsB,OAE3D,KAAO,CACL,IAAI84K,EAAQp6K,EAAKsB,QAAU44K,GAAiBA,EAAc14K,EAAIxB,EAAKwB,EAAI,GACvEw4K,EAAQx4K,EAAI44K,EAERJ,EAAQH,GAAa/7J,EAAMo9F,SAC7B35G,GAAKu4K,EAAqB74J,EAC1Bzf,EAAI,EACJw4K,EAAQI,EACRN,EAAqB95K,EAAKa,OAE1Bi5K,EAAqBh+K,KAAKF,IAAIk+K,EAAoB95K,EAAKa,MAE3D,CAEIid,EAAMo9F,UAIVl/G,EAAS,GAAKuF,EACdvF,EAAS,GAAKwF,EACH,eAAX0sD,EAA0B3sD,EAAIw4K,EAAQ94J,EAAMzf,EAAIw4K,EAAQ/4J,EAC1D,GACF,CAWA,IAAI40C,EAAM+jH,EASNS,EAAOjjL,EAAOoF,MAAMo9K,EAAW,YAS/BU,EAAOljL,EAAOoF,MAAMo9K,EAAW,cAiBnC,SAASrjH,EAAiBmnC,EAAc68E,EAAentH,GACrD,IAAIkW,EAAiBi3G,EAAc15K,MAC/B0iE,EAAkBg3G,EAAcj5K,OAChCC,EAAIgE,EAAam4F,EAAan8F,EAAG+hE,GACjC9hE,EAAI+D,EAAam4F,EAAal8F,EAAG+hE,GACjCh/C,EAAKhf,EAAam4F,EAAan5E,GAAI++C,GACnC7+C,EAAKlf,EAAam4F,EAAaj5E,GAAI8+C,GAMvC,OALC5vD,MAAMpS,IAAMoS,MAAM2wG,WAAW5mB,EAAan8F,OAASA,EAAI,IACvDoS,MAAM4Q,IAAO5Q,MAAM2wG,WAAW5mB,EAAan5E,QAAUA,EAAK++C,IAC1D3vD,MAAMnS,IAAMmS,MAAM2wG,WAAW5mB,EAAal8F,OAASA,EAAI,IACvDmS,MAAM8Q,IAAO9Q,MAAM2wG,WAAW5mB,EAAaj5E,QAAUA,EAAK8+C,GAC3DnW,EAAS4iB,EAAWoJ,kBAAkBhsB,GAAU,GACzC,CACLvsD,MAAO/E,KAAKF,IAAI2oB,EAAKhjB,EAAI6rD,EAAO,GAAKA,EAAO,GAAI,GAChD9rD,OAAQxF,KAAKF,IAAI6oB,EAAKjjB,EAAI4rD,EAAO,GAAKA,EAAO,GAAI,GAErD,CAmBA,SAAS7pC,EAAcm6E,EAAc68E,EAAentH,GAClDA,EAAS4iB,EAAWoJ,kBAAkBhsB,GAAU,GAChD,IAAIkW,EAAiBi3G,EAAc15K,MAC/B0iE,EAAkBg3G,EAAcj5K,OAChCof,EAAOnb,EAAam4F,EAAah9E,KAAM4iD,GACvC3iD,EAAMpb,EAAam4F,EAAa/8E,IAAK4iD,GACrC3iD,EAAQrb,EAAam4F,EAAa98E,MAAO0iD,GACzCziD,EAAStb,EAAam4F,EAAa78E,OAAQ0iD,GAC3C1iE,EAAQ0E,EAAam4F,EAAa78F,MAAOyiE,GACzChiE,EAASiE,EAAam4F,EAAap8F,OAAQiiE,GAC3Ci3G,EAAiBptH,EAAO,GAAKA,EAAO,GACpCqtH,EAAmBrtH,EAAO,GAAKA,EAAO,GACtC92B,EAASonE,EAAapnE,OA8C1B,OA5CI3iB,MAAM9S,KACRA,EAAQyiE,EAAiB1iD,EAAQ65J,EAAmB/5J,GAGlD/M,MAAMrS,KACRA,EAASiiE,EAAkB1iD,EAAS25J,EAAiB75J,GAGzC,MAAV2V,IAQE3iB,MAAM9S,IAAU8S,MAAMrS,KACpBg1B,EAASgtC,EAAiBC,EAC5B1iE,EAAyB,GAAjByiE,EAERhiE,EAA2B,GAAlBiiE,GAKT5vD,MAAM9S,KACRA,EAAQy1B,EAASh1B,GAGfqS,MAAMrS,KACRA,EAAST,EAAQy1B,IAKjB3iB,MAAM+M,KACRA,EAAO4iD,EAAiB1iD,EAAQ/f,EAAQ45K,GAGtC9mK,MAAMgN,KACRA,EAAM4iD,EAAkB1iD,EAASvf,EAASk5K,GAIpC98E,EAAah9E,MAAQg9E,EAAa98E,OACxC,IAAK,SACHF,EAAO4iD,EAAiB,EAAIziE,EAAQ,EAAIusD,EAAO,GAC/C,MAEF,IAAK,QACH1sC,EAAO4iD,EAAiBziE,EAAQ45K,EAChC,MAGJ,OAAQ/8E,EAAa/8E,KAAO+8E,EAAa78E,QACvC,IAAK,SACL,IAAK,SACHF,EAAM4iD,EAAkB,EAAIjiE,EAAS,EAAI8rD,EAAO,GAChD,MAEF,IAAK,SACHzsC,EAAM4iD,EAAkBjiE,EAASk5K,EACjC,MAIJ95J,EAAOA,GAAQ,EACfC,EAAMA,GAAO,EAEThN,MAAM9S,KAERA,EAAQyiE,EAAiBm3G,EAAmB/5J,GAAQE,GAAS,IAG3DjN,MAAMrS,KAERA,EAASiiE,EAAkBi3G,EAAiB75J,GAAOE,GAAU,IAG/D,IAAI7gB,EAAO,IAAIs5D,EAAa54C,EAAO0sC,EAAO,GAAIzsC,EAAMysC,EAAO,GAAIvsD,EAAOS,GAEtE,OADAtB,EAAKotD,OAASA,EACPptD,CACT,CAyCA,SAASm2D,EAAgBp3D,EAAI2+F,EAAc68E,EAAentH,EAAQ/mD,GAChE,IAAIwmG,GAAKxmG,IAAQA,EAAIghG,IAAMhhG,EAAIghG,GAAG,GAC9B5yE,GAAKpuB,IAAQA,EAAIghG,IAAMhhG,EAAIghG,GAAG,GAC9Be,EAAe/hG,GAAOA,EAAI+hG,cAAgB,MAE9C,GAAKyE,GAAMp4E,EAAX,CAIA,IAAIz0B,EAEJ,GAAqB,QAAjBooG,EACFpoG,EAAmB,UAAZjB,EAAG/G,KAAmB,IAAIshE,EAAa,EAAG,GAAIokC,EAAa78F,OAAS,GAAI68F,EAAap8F,QAAU,GAAKvC,EAAGkzB,uBAI9G,GAFAjyB,EAAOjB,EAAGkzB,kBAENlzB,EAAG27K,qBAAsB,CAC3B,IAAIvoJ,EAAYpzB,EAAGqhF,oBAGnBpgF,EAAOA,EAAK6Z,QACZ7Z,EAAKkyB,eAAeC,EACtB,CAIFurE,EAAen6E,EAAcnsB,EAAOkL,SAAS,CAC3CzB,MAAOb,EAAKa,MACZS,OAAQtB,EAAKsB,QACZo8F,GAAe68E,EAAentH,GAIjC,IAAIutH,EAAQ57K,EAAG/C,SACXV,EAAKuxG,EAAInP,EAAan8F,EAAIvB,EAAKuB,EAAI,EACnChG,EAAKk5B,EAAIipE,EAAal8F,EAAIxB,EAAKwB,EAAI,EACvCzC,EAAG2D,KAAK,WAA6B,QAAjB0lG,EAAyB,CAAC9sG,EAAIC,GAAM,CAACo/K,EAAM,GAAKr/K,EAAIq/K,EAAM,GAAKp/K,GA7BnF,CA8BF,CAOA,SAAS28I,EAAe/0I,EAAQi1I,GAC9B,OAAqC,MAA9Bj1I,EAAOw2K,EAASvhC,GAAO,KAA6C,MAA9Bj1I,EAAOw2K,EAASvhC,GAAO,KAA6C,MAA9Bj1I,EAAOw2K,EAASvhC,GAAO,GAC5G,CA4BA,SAASnxC,EAAiB2zE,EAAcv/H,EAAWh1C,IAChDjP,EAAOkgB,SAASjR,KAASA,EAAM,CAAC,GACjC,IAAI6gG,EAAa7gG,EAAI6gG,YACpB9vG,EAAO6Q,QAAQi/F,KAAgBA,EAAa,CAACA,EAAYA,IAC1D,IAAI2zE,EAAUpzF,EAAMkyF,EAAS,GAAI,GAC7BmB,EAAUrzF,EAAMkyF,EAAS,GAAI,GAIjC,SAASlyF,EAAMkP,EAAOyhD,GACpB,IAAI2iC,EAAY,CAAC,EACbC,EAAgB,EAChBC,EAAS,CAAC,EACVC,EAAmB,EACnBC,EAAoB,EAYxB,GAXArjL,EAAK6+F,GAAO,SAAU79F,GACpBmiL,EAAOniL,GAAQ8hL,EAAa9hL,EAC9B,IACAhB,EAAK6+F,GAAO,SAAU79F,GAGpBsiL,EAAQ//H,EAAWviD,KAAUiiL,EAAUjiL,GAAQmiL,EAAOniL,GAAQuiD,EAAUviD,IACxE4F,EAASq8K,EAAWjiL,IAASkiL,IAC7Bt8K,EAASu8K,EAAQniL,IAASoiL,GAC5B,IAEIh0E,EAAWkxC,GAQb,OANI15I,EAAS28C,EAAWs7C,EAAM,IAC5BskF,EAAOtkF,EAAM,IAAM,KACVj4F,EAAS28C,EAAWs7C,EAAM,MACnCskF,EAAOtkF,EAAM,IAAM,MAGdskF,EAOT,GAAIC,IAAqBC,GAAsBH,EAK1C,IAAIA,GAAiBG,EACtB,OAAOJ,EAGP,IAAK,IAAIxvK,EAAI,EAAGA,EAAIorF,EAAMltF,OAAQ8B,IAAK,CACrC,IAAIzS,EAAO69F,EAAMprF,GAEjB,IAAK6vK,EAAQL,EAAWjiL,IAASsiL,EAAQR,EAAc9hL,GAAO,CAC5DiiL,EAAUjiL,GAAQ8hL,EAAa9hL,GAC/B,KACF,CACF,CAEA,OAAOiiL,CACT,CAlBA,OAAOE,CAmBX,CAEA,SAASG,EAAQ10E,EAAK5tG,GACpB,OAAO4tG,EAAIxvG,eAAe4B,EAC5B,CAEA,SAAS4F,EAASgoG,EAAK5tG,GACrB,OAAoB,MAAb4tG,EAAI5tG,IAA+B,SAAd4tG,EAAI5tG,EAClC,CAEA,SAASk8B,EAAK2hE,EAAOvrF,EAAQo/B,GAC3B1yC,EAAK6+F,GAAO,SAAU79F,GACpBsS,EAAOtS,GAAQ0xC,EAAO1xC,EACxB,GACF,CArEAk8B,EAAK2kJ,EAAS,GAAIiB,EAAcC,GAChC7lJ,EAAK2kJ,EAAS,GAAIiB,EAAcE,EAqElC,CAQA,SAASl9E,EAAgBpzD,GACvB,OAAO28D,EAAiB,CAAC,EAAG38D,EAC9B,CAQA,SAAS28D,EAAiB/7F,EAAQo/B,GAIhC,OAHAA,GAAUp/B,GAAUtT,EAAK0uG,GAAiB,SAAU1tG,GAClD0xC,EAAOtzC,eAAe4B,KAAUsS,EAAOtS,GAAQ0xC,EAAO1xC,GACxD,IACOsS,CACT,CAEAjU,EAAQqvG,gBAAkBA,EAC1BrvG,EAAQwiL,SAAWA,EACnBxiL,EAAQ0+D,IAAMA,EACd1+D,EAAQkjL,KAAOA,EACfljL,EAAQmjL,KAAOA,EACfnjL,EAAQo/D,iBAAmBA,EAC3Bp/D,EAAQosB,cAAgBA,EACxBpsB,EAAQg/D,gBAAkBA,EAC1Bh/D,EAAQ+gJ,eAAiBA,EACzB/gJ,EAAQ8vG,iBAAmBA,EAC3B9vG,EAAQymG,gBAAkBA,EAC1BzmG,EAAQgwG,iBAAmBA,C,iCCpe3B,IAAI/vG,EAASL,EAAQ,OAEjBi5E,EAAaj5E,EAAQ,OAErBskL,EAAatkL,EAAQ,OAErBsG,EAAQtG,EAAQ,OAEhBe,EAAOV,EAAOU,KACdwf,EAAWlgB,EAAOkgB,SAOtB,SAAS+/E,EAAiBh0F,GACxB,OAAOA,aAAiBsxB,MAAQtxB,EAAiB,MAATA,EAAgB,GAAK,CAACA,EAChE,CAmBA,SAASic,EAAgBjZ,EAAKi1K,GAC5B,GAAIj1K,EAIF,IAHA,IAAIk1K,EAAcl1K,EAAIkJ,SAAWlJ,EAAIkJ,UAAY,CAAC,EAC9CisK,EAAYn1K,EAAIgJ,OAAShJ,EAAIgJ,QAAU,CAAC,EAEnC9D,EAAI,EAAGuY,EAAMw3J,EAAQ7xK,OAAQ8B,EAAIuY,EAAKvY,IAAK,CAClD,IAAIkwK,EAAaH,EAAQ/vK,IAEpBgwK,EAAYrkL,eAAeukL,IAAeD,EAAUtkL,eAAeukL,KACtEF,EAAYE,GAAcD,EAAUC,GAExC,CAEJ,CAEA,IAAI3Q,EAAqB,CAAC,YAAa,aAAc,WAAY,aAAc,OAAQ,MAAO,QAAS,kBAAmB,kBAAmB,QAAS,SAAU,aAAc,QAAS,gBAAiB,WAAY,cAAe,aAAc,gBAAiB,gBAAiB,kBAAmB,iBAAkB,oBAAqB,oBAAqB,kBAAmB,cAAe,cAAe,eAAgB,WAcna,SAAS7/H,EAAiBgO,GAExB,OAAOA,IAA+B,MAAlBA,EAAS51C,MAAgB41C,EAAWA,EAAS51C,MACnE,CAQA,SAAS8nC,EAAiB8N,GACxB,OAAO3hC,EAAS2hC,MAAeA,aAAoBtkB,MAErD,CAQA,SAASuW,EAAgB7nC,EAAOwP,GAE9B,IAAI47G,EAAU57G,GAAWA,EAAQ7a,KAEjC,MAAgB,YAAZy2H,EACKprH,GAGO,SAAZorH,GACgB,kBAAVprH,GAA+B,MAATA,GAA2B,MAAVA,IAC/CA,GAASg4K,EAAWtlC,UAAU1yI,IAMhB,MAATA,GAA2B,KAAVA,EAAeK,KAAOL,EAChD,CAYA,SAASq4K,EAAsBxlL,EAAMmQ,GACnC,IAAIklB,EAAQ,IAAIluB,EAWhB,OAVAjG,EAAO0Y,MAAMyb,EAAO44F,GACpB54F,EAAM/W,YAAcnO,EAAImO,YACxB+W,EAAMzyB,KAAOuN,EAAIvN,MAAQ,GACzByyB,EAAM/xB,SAAW6M,EAAI7M,SACrB+xB,EAAM9xB,QAAU4M,EAAI5M,QAEpB8xB,EAAMzxB,QAAU,WACd,OAAO5D,CACT,EAEOq1B,CACT,CAGA,IAAI44F,EAAkB,CAOpBjkG,cAAe,SAAUrmB,EAAW0yB,GAClC,IAAIr2B,EAAOZ,KAAKwE,QAAQyyB,GACpByQ,EAAW1nC,KAAKkZ,YAAY3U,EAAW0yB,GACvC6gI,EAAel3J,EAAKgmB,YAAYriB,GAChCf,EAAO5C,EAAK8D,QAAQH,GAAW,GAC/BsyC,EAAUj2C,EAAKy5D,eAAe91D,GAC9BgI,EAAQ3L,EAAK4L,cAAcjI,EAAW,SAC1C,MAAO,CACLQ,cAAe/E,KAAKkE,SACpB27D,iBAAkB7/D,KAAKmE,QACvBR,WAA8B,WAAlB3D,KAAKkE,SAAwBlE,KAAKmE,QAAU,KACxD+a,YAAalf,KAAKkf,YAClBkH,SAAUpmB,KAAKqmB,GACfC,WAAYtmB,KAAKwD,KACjBA,KAAMA,EACNe,UAAWuzJ,EACXl3J,KAAMi2C,EACN5f,SAAUA,EACVlpB,MAAO25B,EACPn7B,MAAOA,EACP85K,OAAQ3rG,EAAWi4F,iBAAiBpmK,GAEpC4e,MAAO,CAAC,aAAc,OAAQ,SAElC,EAWAlE,kBAAmB,SAAU1iB,EAAWq7C,EAAQ3oB,EAAU6f,EAAUwvI,GAClE1mI,EAASA,GAAU,SACnB,IAAIh/C,EAAOZ,KAAKwE,QAAQyyB,GACpB5tB,EAAYzI,EAAK0I,aAAa/E,GAC9BsmB,EAAS7qB,KAAK4qB,cAAcrmB,EAAW0yB,GAE3B,MAAZ6f,GAAoBjsB,EAAO9c,iBAAiBsxB,QAC9CxU,EAAO9c,MAAQ8c,EAAO9c,MAAM+oC,IAG9B,IAAIne,EAAYtvB,EAAUnG,IAAI,CAACojL,GAAa,QAAS1mI,EAAQ,cAE7D,MAAyB,oBAAdjnB,GACT9N,EAAO+0B,OAASA,EACTjnB,EAAU9N,IACa,kBAAd8N,EACT+hD,EAAWgxD,UAAU/yG,EAAW9N,QADlC,CAGT,EAQA3R,YAAa,SAAUzU,EAAKwyB,GAC1B,IAAIr2B,EAAOZ,KAAKwE,QAAQyyB,GACpB0sB,EAAW/iD,EAAKy5D,eAAe51D,GAEnC,GAAgB,MAAZk/C,EACF,OAAO3hC,EAAS2hC,IAAeA,aAAoBtkB,MAA0BskB,EAAjBA,EAAS51C,KAEzE,EASAgpB,cAAej1B,EAAOyG,MAYxB,SAASunG,EAAgBumC,EAAQkwC,GAO/BA,GAAiBA,GAAiB,IAAIvjL,QACtC,IAAIiZ,EAASna,EAAO41B,IAAI2+G,GAAU,IAAI,SAAUjlC,EAAK9gG,GACnD,MAAO,CACLihG,MAAOH,EAEX,IA6DA,OA3DA5uG,EAAK+jL,GAAe,SAAUC,EAAWl2K,GACvC,GAAK0R,EAASwkK,GAAd,CAKA,IAAK,IAAIvwK,EAAI,EAAGA,EAAIgG,EAAO9H,OAAQ8B,IACjC,IAAKgG,EAAOhG,GAAGpI,QACI,MAAhB24K,EAAUngK,IAAcpK,EAAOhG,GAAGs7F,MAAMlrF,KAAOmgK,EAAUngK,GAAK,GAG/D,OAFApK,EAAOhG,GAAGpI,OAAS24K,OACnBD,EAAcj2K,GAAS,MAK3B,IAAS2F,EAAI,EAAGA,EAAIgG,EAAO9H,OAAQ8B,IAAK,CACtC,IAAIs7F,EAAQt1F,EAAOhG,GAAGs7F,MAEtB,IAAKt1F,EAAOhG,GAAGpI,SAEC,MAAZ0jG,EAAMlrF,IAA8B,MAAhBmgK,EAAUngK,KAAiC,MAAlBmgK,EAAUhjL,OAAiB6qK,EAAUmY,KAAenY,EAAU98D,IAAUA,EAAM/tG,OAASgjL,EAAUhjL,KAAO,GAGvJ,OAFAyY,EAAOhG,GAAGpI,OAAS24K,OACnBD,EAAcj2K,GAAS,KAG3B,CAtBA,CAuBF,IAEA9N,EAAK+jL,GAAe,SAAUC,EAAWl2K,GACvC,GAAK0R,EAASwkK,GAAd,CAMA,IAFA,IAAIvwK,EAAI,EAEDA,EAAIgG,EAAO9H,OAAQ8B,IAAK,CAC7B,IAAIs7F,EAAQt1F,EAAOhG,GAAGs7F,MAEtB,IAAKt1F,EAAOhG,GAAGpI,SAIXwgK,EAAU98D,IAKK,MAAhBi1E,EAAUngK,GAAY,CACvBpK,EAAOhG,GAAGpI,OAAS24K,EACnB,KACF,CACF,CAEIvwK,GAAKgG,EAAO9H,QACd8H,EAAOjb,KAAK,CACV6M,OAAQ24K,GAxBZ,CA2BF,IACOvqK,CACT,CAYA,SAAS8zF,EAAc49D,GAUrB,IAAI8Y,EAAQ3kL,EAAO40D,gBACnBl0D,EAAKmrK,GAAW,SAAUrlJ,EAAMhY,GAC9B,IAAIo2K,EAAWp+J,EAAKipF,MACpBm1E,GAAYD,EAAMprK,IAAIqrK,EAASrgK,GAAIiC,EACrC,IACA9lB,EAAKmrK,GAAW,SAAUrlJ,EAAMhY,GAC9B,IAAIS,EAAMuX,EAAKza,OACf/L,EAAOs6J,QAAQrrJ,GAAiB,MAAVA,EAAIsV,KAAeogK,EAAMvjL,IAAI6N,EAAIsV,KAAOogK,EAAMvjL,IAAI6N,EAAIsV,MAAQiC,EAAM,mBAAqBvX,GAAOA,EAAIsV,KAC1HtV,GAAiB,MAAVA,EAAIsV,IAAcogK,EAAMprK,IAAItK,EAAIsV,GAAIiC,IAC1CA,EAAKkpF,UAAYlpF,EAAKkpF,QAAU,CAAC,EACpC,IAEAhvG,EAAKmrK,GAAW,SAAUrlJ,EAAMhY,GAC9B,IAAIo2K,EAAWp+J,EAAKipF,MAChBxgG,EAAMuX,EAAKza,OACX2jG,EAAUlpF,EAAKkpF,QAEnB,GAAKxvF,EAASjR,GAAd,CAUA,GAFAygG,EAAQhuG,KAAmB,MAAZuN,EAAIvN,KAAeuN,EAAIvN,KAAO,GAAKkjL,EAAWA,EAASljL,KAAO,MAEzEkjL,EACFl1E,EAAQnrF,GAAKqgK,EAASrgK,QACjB,GAAc,MAAVtV,EAAIsV,GACbmrF,EAAQnrF,GAAKtV,EAAIsV,GAAK,OACjB,CAML,IAAIsgK,EAAQ,EAEZ,GACEn1E,EAAQnrF,GAAK,KAAOmrF,EAAQhuG,KAAO,KAAOmjL,UACnCF,EAAMvjL,IAAIsuG,EAAQnrF,IAC7B,CAEAogK,EAAMprK,IAAIm2F,EAAQnrF,GAAIiC,EAzBtB,CA0BF,GACF,CAQA,SAAS+lJ,EAAUmY,GACjB,OAAOxkK,EAASwkK,IAAcA,EAAUngK,IAAkD,KAA3CmgK,EAAUngK,GAAK,IAAIlK,QAAQ,WAC5E,CAWA,SAAS24H,EAAgB8xC,EAAQC,GAC/B,IAAIC,EAAO,CAAC,EACRC,EAAO,CAAC,EAGZ,OAFAC,EAAQJ,GAAU,GAAIE,GACtBE,EAAQH,GAAU,GAAIE,EAAMD,GACrB,CAACG,EAAWH,GAAOG,EAAWF,IAErC,SAASC,EAAQE,EAAaxvJ,EAAKyvJ,GACjC,IAAK,IAAIlxK,EAAI,EAAGuY,EAAM04J,EAAY/yK,OAAQ8B,EAAIuY,EAAKvY,IAKjD,IAJA,IAAImQ,EAAW8gK,EAAYjxK,GAAGmQ,SAC1BqxC,EAAcsqC,EAAiBmlF,EAAYjxK,GAAG1R,WAC9C6iL,EAAmBD,GAAYA,EAAS/gK,GAEnCkN,EAAI,EAAG+/B,EAAOoE,EAAYtjD,OAAQmf,EAAI+/B,EAAM//B,IAAK,CACxD,IAAI/uB,EAAYkzD,EAAYnkC,GAExB8zJ,GAAoBA,EAAiB7iL,GACvC6iL,EAAiB7iL,GAAa,MAE7BmzB,EAAItR,KAAcsR,EAAItR,GAAY,CAAC,IAAI7hB,GAAa,CAEzD,CAEJ,CAEA,SAAS0iL,EAAWvvJ,EAAK2vJ,GACvB,IAAIprK,EAAS,GAEb,IAAK,IAAIhG,KAAKyhB,EACZ,GAAIA,EAAI91B,eAAeqU,IAAgB,MAAVyhB,EAAIzhB,GAC/B,GAAIoxK,EACFprK,EAAOjb,MAAMiV,OACR,CACL,IAAIwhD,EAAcwvH,EAAWvvJ,EAAIzhB,IAAI,GACrCwhD,EAAYtjD,QAAU8H,EAAOjb,KAAK,CAChColB,SAAUnQ,EACV1R,UAAWkzD,GAEf,CAIJ,OAAOx7C,CACT,CACF,CASA,SAASijC,EAAet+C,EAAMmD,GAC5B,OAA+B,MAA3BA,EAAQ4iB,gBACH5iB,EAAQ4iB,gBACe,MAArB5iB,EAAQQ,UACVzC,EAAO6Q,QAAQ5O,EAAQQ,WAAazC,EAAO41B,IAAI3zB,EAAQQ,WAAW,SAAUwJ,GACjF,OAAOnN,EAAKi3J,gBAAgB9pJ,EAC9B,IAAKnN,EAAKi3J,gBAAgB9zJ,EAAQQ,WACT,MAAhBR,EAAQP,KACV1B,EAAO6Q,QAAQ5O,EAAQP,MAAQ1B,EAAO41B,IAAI3zB,EAAQP,MAAM,SAAUuK,GACvE,OAAOnN,EAAK2lD,YAAYx4C,EAC1B,IAAKnN,EAAK2lD,YAAYxiD,EAAQP,WAHzB,CAKT,CAiBA,IAAIsxE,EAAa,WACf,IAAIxkE,EAAQ,EACZ,OAAO,WACL,IAAI3O,EAAM,sBAAwB2O,IAClC,OAAO,SAAUg3K,GACf,OAAOA,EAAQ3lL,KAAS2lL,EAAQ3lL,GAAO,CAAC,EAC1C,CACF,CACF,CARiB,GA8CjB,SAASm5G,EAAYz4G,EAAS25E,EAAQjrE,GACpC,GAAIjP,EAAOwiF,SAAStI,GAAS,CAC3B,IAAIo1B,EAAM,CAAC,EACXA,EAAIp1B,EAAS,SAAW,EACxBA,EAASo1B,CACX,CAEA,IAAIswD,EAAkB3wJ,GAAOA,EAAI2wJ,iBAE7BA,GAAoBjoC,EAAIz9C,EAAQ0lF,EAAkB,UAAajoC,EAAIz9C,EAAQ0lF,EAAkB,OAAUjoC,EAAIz9C,EAAQ0lF,EAAkB,UACvI1lF,EAAO0lF,EAAkB,SAAW,GAGtC,IAAIzlJ,EAAS,CAAC,EA6Bd,OA5BAzZ,EAAKw5E,GAAQ,SAAUjuE,EAAOpM,GACxBoM,EAAQiuE,EAAOr6E,GAEnB,GAAY,cAARA,GAA+B,oBAARA,EAA3B,CAKA,IAAI4lL,EAAY5lL,EAAI+vK,MAAM,2BAA6B,GACnDxtK,EAAWqjL,EAAU,GACrBC,GAAaD,EAAU,IAAM,IAAIxjC,cAErC,MAAK7/I,IAAasjL,GAAsB,MAATz5K,GAA+B,UAAdy5K,GAAmC,SAAVz5K,GAAoBgD,GAAOA,EAAIqqG,kBAAoBt5G,EAAOqa,QAAQpL,EAAIqqG,iBAAkBl3G,GAAY,GAA7K,CAIA,IAAIujL,EAAa,CACfvjL,SAAUA,GAGM,UAAdsjL,GAAmC,QAAVz5K,IAC3B05K,EAAWD,GAAaz5K,GAG1B,IAAIo3D,EAAS9iE,EAAQg1C,gBAAgBowI,GACrCxrK,EAAO/X,EAAW,UAAYihE,EAC9BlpD,EAAO/X,EAAW,SAAWihE,EAAO,EAZpC,CARA,MAFElpD,EAAOta,GAAOoM,CAuBlB,IACOkO,CACT,CASA,SAAS4zG,EAAkBjvH,EAAM49E,GAC/B,IAAI3kE,EAAajZ,EAAKiZ,WACtB2kE,EAAU59E,EAAKkmB,aAAa03D,GAE5B,IAAK,IAAIvoE,EAAI,EAAGA,EAAI4D,EAAW1F,OAAQ8B,IAAK,CAC1C,IAAIi9J,EAAUtyK,EAAK4c,iBAAiB3D,EAAW5D,IAE/C,GAAIi9J,EAAQ1vK,OAASg7E,EACnB,OAAO00F,EAAQz1J,QAEnB,CACF,CASA,SAAS6pB,EAAkB1mC,EAAM6c,GAC/B,IAAI+gE,EAAU,GAQd,OAPAh8E,EAAK5B,EAAKiZ,YAAY,SAAUyD,GAC9B,IAAI41J,EAAUtyK,EAAK4c,iBAAiBF,GAEhC41J,EAAQz1J,WAAaA,IACvB+gE,EAAQ00F,EAAQvrJ,eAAiBurJ,EAAQ1vK,KAE7C,IACOg7E,CACT,CAUA,SAAS7lC,EAAkB/3C,EAAMkoG,GAC/B,IAAItqB,EAAU,GAUd,OATAh8E,EAAK5B,EAAKiZ,YAAY,SAAUyD,GAC9B,IAAI41J,EAAUtyK,EAAK4c,iBAAiBF,GAChC+7B,EAAY65H,EAAQ75H,UACpBvC,EAAWuC,EAAUyvD,GAET,MAAZhyD,IAAiC,IAAbA,IACtB0nC,EAAQ1nC,GAAYo8H,EAAQ1vK,KAEhC,IACOg7E,CACT,CAEA,SAASi7C,EAAIroB,EAAK1sF,GAChB,OAAO0sF,GAAOA,EAAIxvG,eAAe8iB,EACnC,CAEA7iB,EAAQkgG,iBAAmBA,EAC3BlgG,EAAQmoB,gBAAkBA,EAC1BnoB,EAAQ2zK,mBAAqBA,EAC7B3zK,EAAQ8zC,iBAAmBA,EAC3B9zC,EAAQg0C,iBAAmBA,EAC3Bh0C,EAAQ+zC,gBAAkBA,EAC1B/zC,EAAQukL,sBAAwBA,EAChCvkL,EAAQgtH,gBAAkBA,EAC1BhtH,EAAQiuG,gBAAkBA,EAC1BjuG,EAAQkuG,cAAgBA,EACxBluG,EAAQwsK,UAAYA,EACpBxsK,EAAQizI,gBAAkBA,EAC1BjzI,EAAQq9C,eAAiBA,EACzBr9C,EAAQizE,WAAaA,EACrBjzE,EAAQi5G,YAAcA,EACtBj5G,EAAQguH,kBAAoBA,EAC5BhuH,EAAQylC,kBAAoBA,EAC5BzlC,EAAQ82C,kBAAoBA,C,wBCvoB5B,IAAI72C,EAASL,EAAQ,OAEjBimL,EAAiB,KAErB,SAASC,EAAMvpD,GACb,OAAOA,EAAIhtG,QAAQ,OAAQ,IAAIA,QAAQ,OAAQ,GACjD,CAYA,SAASrD,EAAU5P,EAAKypK,EAAQthJ,EAAOs1G,GACrC,IAAIisC,EAAYD,EAAO,GAAKA,EAAO,GAC/BE,EAAWxhJ,EAAM,GAAKA,EAAM,GAEhC,GAAkB,IAAduhJ,EACF,OAAoB,IAAbC,EAAiBxhJ,EAAM,IAAMA,EAAM,GAAKA,EAAM,IAAM,EAQ7D,GAAIs1G,EACF,GAAIisC,EAAY,EAAG,CACjB,GAAI1pK,GAAOypK,EAAO,GAChB,OAAOthJ,EAAM,GACR,GAAInoB,GAAOypK,EAAO,GACvB,OAAOthJ,EAAM,EAEjB,KAAO,CACL,GAAInoB,GAAOypK,EAAO,GAChB,OAAOthJ,EAAM,GACR,GAAInoB,GAAOypK,EAAO,GACvB,OAAOthJ,EAAM,EAEjB,KACK,CACL,GAAInoB,IAAQypK,EAAO,GACjB,OAAOthJ,EAAM,GAGf,GAAInoB,IAAQypK,EAAO,GACjB,OAAOthJ,EAAM,EAEjB,CAEA,OAAQnoB,EAAMypK,EAAO,IAAMC,EAAYC,EAAWxhJ,EAAM,EAC1D,CAWA,SAASr2B,EAAagb,EAAS88J,GAC7B,OAAQ98J,GACN,IAAK,SACL,IAAK,SACHA,EAAU,MACV,MAEF,IAAK,OACL,IAAK,MACHA,EAAU,KACV,MAEF,IAAK,QACL,IAAK,SACHA,EAAU,OACV,MAGJ,MAAuB,kBAAZA,EACL08J,EAAM18J,GAASymJ,MAAM,MAChB1iD,WAAW/jG,GAAW,IAAM88J,EAG9B/4D,WAAW/jG,GAGF,MAAXA,EAAkB7c,KAAO6c,CAClC,CAYA,SAAS3S,EAAMrM,EAAG+nE,EAAWg0G,GAQ3B,OAPiB,MAAbh0G,IACFA,EAAY,IAIdA,EAAYxtE,KAAKJ,IAAII,KAAKF,IAAI,EAAG0tE,GAAY,IAC7C/nE,IAAMA,GAAGif,QAAQ8oD,GACVg0G,EAAY/7K,GAAKA,CAC1B,CAEA,SAASywF,EAAIlJ,GAIX,OAHAA,EAAI9nE,MAAK,SAAU+C,EAAGC,GACpB,OAAOD,EAAIC,CACb,IACO8kE,CACT,CAOA,SAAS07B,EAAa/wG,GAGpB,GAFAA,GAAOA,EAEHE,MAAMF,GACR,OAAO,EAOT,IAAIue,EAAI,EACJ1lB,EAAQ,EAEZ,MAAOxQ,KAAK8R,MAAM6F,EAAMue,GAAKA,IAAMve,EACjCue,GAAK,GACL1lB,IAGF,OAAOA,CACT,CAOA,SAAS8/J,EAAiB34J,GACxB,IAAIigH,EAAMjgH,EAAI8pK,WAEVC,EAAS9pD,EAAIjiH,QAAQ,KAEzB,GAAI+rK,EAAS,EAAG,CACd,IAAIl0G,GAAaoqD,EAAIp7H,MAAMklL,EAAS,GACpC,OAAOl0G,EAAY,GAAKA,EAAY,CACtC,CACE,IAAIm0G,EAAW/pD,EAAIjiH,QAAQ,KAC3B,OAAOgsK,EAAW,EAAI,EAAI/pD,EAAIjqH,OAAS,EAAIg0K,CAE/C,CAUA,SAASnqF,EAAkB1uE,EAAY84J,GACrC,IAAIv3B,EAAMrqJ,KAAKqqJ,IACXC,EAAOtqJ,KAAKsqJ,KACZu3B,EAAe7hL,KAAKy+B,MAAM4rH,EAAIvhI,EAAW,GAAKA,EAAW,IAAMwhI,GAC/Dw3B,EAAe9hL,KAAK8R,MAAMu4I,EAAIrqJ,KAAKiH,IAAI26K,EAAY,GAAKA,EAAY,KAAOt3B,GAE3E98E,EAAYxtE,KAAKJ,IAAII,KAAKF,KAAK+hL,EAAeC,EAAc,GAAI,IACpE,OAAQv3I,SAASijC,GAAkBA,EAAL,EAChC,CAcA,SAASjoB,EAAwBE,EAAWxnD,EAAKuvE,GAC/C,IAAK/nB,EAAUxnD,GACb,OAAO,EAGT,IAAIsmB,EAAMjpB,EAAOkhH,OAAO/2D,GAAW,SAAUs8H,EAAKpqK,GAChD,OAAOoqK,GAAOlqK,MAAMF,GAAO,EAAIA,EACjC,GAAG,GAEH,GAAY,IAAR4M,EACF,OAAO,EAGT,IAAIy9J,EAAShiL,KAAK0qE,IAAI,GAAI8C,GACtBy0G,EAAgB3mL,EAAO41B,IAAIu0B,GAAW,SAAU9tC,GAClD,OAAQE,MAAMF,GAAO,EAAIA,GAAO4M,EAAMy9J,EAAS,GACjD,IACIE,EAAuB,IAATF,EACdG,EAAQ7mL,EAAO41B,IAAI+wJ,GAAe,SAAUG,GAE9C,OAAOpiL,KAAKy+B,MAAM2jJ,EACpB,IACIC,EAAa/mL,EAAOkhH,OAAO2lE,GAAO,SAAUJ,EAAKpqK,GACnD,OAAOoqK,EAAMpqK,CACf,GAAG,GACC2qK,EAAYhnL,EAAO41B,IAAI+wJ,GAAe,SAAUG,EAAOnkL,GACzD,OAAOmkL,EAAQD,EAAMlkL,EACvB,IAEA,MAAOokL,EAAaH,EAAa,CAK/B,IAHA,IAAIpiL,EAAM2nD,OAAO86H,kBACbC,EAAQ,KAEH/yK,EAAI,EAAGuY,EAAMs6J,EAAU30K,OAAQ8B,EAAIuY,IAAOvY,EAC7C6yK,EAAU7yK,GAAK3P,IACjBA,EAAMwiL,EAAU7yK,GAChB+yK,EAAQ/yK,KAKV0yK,EAAMK,GACRF,EAAUE,GAAS,IACjBH,CACJ,CAEA,OAAOF,EAAMlkL,GAAO+jL,CACtB,CAGA,IAAIp7G,EAAmB,iBAOvB,SAASsZ,EAAUnL,GACjB,IAAI0tG,EAAgB,EAAVziL,KAAK0L,GACf,OAAQqpE,EAAS0tG,EAAMA,GAAOA,CAChC,CAOA,SAASxiG,EAAmBtoE,GAC1B,OAAOA,GAAOupK,GAAkBvpK,EAAMupK,CACxC,CAEA,IAAIwB,EAAW,oIAkBf,SAASzoC,EAAU1yI,GACjB,GAAIA,aAAiB+yI,KACnB,OAAO/yI,EACF,GAAqB,kBAAVA,EAAoB,CAMpC,IAAI2jK,EAAQwX,EAASC,KAAKp7K,GAE1B,IAAK2jK,EAEH,OAAO,IAAI5wB,KAAK1yI,KAIlB,GAAKsjK,EAAM,GAWN,CACD,IAAI0X,GAAQ1X,EAAM,IAAM,EAMxB,MAJ+B,MAA3BA,EAAM,GAAG1tJ,gBACXolK,GAAQ1X,EAAM,GAAG1uK,MAAM,EAAG,IAGrB,IAAI89I,KAAKA,KAAKuoC,KAAK3X,EAAM,KAAMA,EAAM,IAAM,GAAK,GAAIA,EAAM,IAAM,EAAG0X,IAAQ1X,EAAM,IAAM,IAAKA,EAAM,IAAM,GAAIA,EAAM,IAAM,GACjI,CAhBA,OAAO,IAAI5wB,MAAM4wB,EAAM,KAAMA,EAAM,IAAM,GAAK,GAAIA,EAAM,IAAM,GAAIA,EAAM,IAAM,IAAKA,EAAM,IAAM,IAAKA,EAAM,IAAM,GAAIA,EAAM,IAAM,EAiBpI,CAAO,OAAa,MAAT3jK,EACF,IAAI+yI,KAAK1yI,KAGX,IAAI0yI,KAAKt6I,KAAK8R,MAAMvK,GAC7B,CASA,SAAS+pK,EAAS35J,GAChB,OAAO3X,KAAK0qE,IAAI,GAAIo4G,EAAiBnrK,GACvC,CAEA,SAASmrK,EAAiBnrK,GACxB,OAAO3X,KAAKy+B,MAAMz+B,KAAKqqJ,IAAI1yI,GAAO3X,KAAKsqJ,KACzC,CAcA,SAASwoB,EAAKn7J,EAAK7F,GACjB,IAIIixK,EAJAC,EAAWF,EAAiBnrK,GAC5ByyI,EAAQpqJ,KAAK0qE,IAAI,GAAIs4G,GACrB10H,EAAI32C,EAAMyyI,EAiCd,OA3BI24B,EAFAjxK,EACEw8C,EAAI,IACD,EACIA,EAAI,IACR,EACIA,EAAI,EACR,EACIA,EAAI,EACR,EAEA,GAGHA,EAAI,EACD,EACIA,EAAI,EACR,EACIA,EAAI,EACR,EACIA,EAAI,EACR,EAEA,GAIT32C,EAAMorK,EAAK34B,EAGJ44B,IAAa,IAAMrrK,EAAI+M,QAAQs+J,EAAW,GAAKA,EAAW,GAAKrrK,CACxE,CAyBA,SAASm3H,EAAgB3yI,GACvBA,EAAK+oB,MAAK,SAAU+C,EAAGC,GACrB,OAAO+6J,EAAWh7J,EAAGC,EAAG,IAAM,EAAI,CACpC,IAIA,IAHA,IAAIooH,GAAQvwI,IACRmjL,EAAY,EAEPzzK,EAAI,EAAGA,EAAItT,EAAKwR,QAAS,CAIhC,IAHA,IAAIwqB,EAAWh8B,EAAKsT,GAAG0oB,SACnBwiG,EAAQx+H,EAAKsT,GAAGkrH,MAEXmW,EAAK,EAAGA,EAAK,EAAGA,IACnB34G,EAAS24G,IAAOR,IAClBn4G,EAAS24G,GAAMR,EACf3V,EAAMmW,GAAOA,EAAqB,EAAhB,EAAIoyC,GAGxB5yC,EAAOn4G,EAAS24G,GAChBoyC,EAAYvoD,EAAMmW,GAGhB34G,EAAS,KAAOA,EAAS,IAAMwiG,EAAM,GAAKA,EAAM,KAAO,EACzDx+H,EAAK88D,OAAOxpD,EAAG,GAEfA,GAEJ,CAEA,OAAOtT,EAEP,SAAS8mL,EAAWh7J,EAAGC,EAAG4oH,GACxB,OAAO7oH,EAAEkQ,SAAS24G,GAAM5oH,EAAEiQ,SAAS24G,IAAO7oH,EAAEkQ,SAAS24G,KAAQ5oH,EAAEiQ,SAAS24G,KAAQ7oH,EAAE0yG,MAAMmW,GAAM5oH,EAAEyyG,MAAMmW,MAAUA,GAAU,EAAL,KAAYA,GAAMmyC,EAAWh7J,EAAGC,EAAG,GAC1J,CACF,CAWA,SAASxe,EAAUivB,GACjB,OAAOA,EAAI6vF,WAAW7vF,IAAM,CAC9B,CAEAt9B,EAAQksB,UAAYA,EACpBlsB,EAAQoO,aAAeA,EACvBpO,EAAQyW,MAAQA,EAChBzW,EAAQ66F,IAAMA,EACd76F,EAAQqtH,aAAeA,EACvBrtH,EAAQi1K,iBAAmBA,EAC3Bj1K,EAAQm8F,kBAAoBA,EAC5Bn8F,EAAQkqD,wBAA0BA,EAClClqD,EAAQurE,iBAAmBA,EAC3BvrE,EAAQ6kF,UAAYA,EACpB7kF,EAAQ4kF,mBAAqBA,EAC7B5kF,EAAQ4+I,UAAYA,EACpB5+I,EAAQi2K,SAAWA,EACnBj2K,EAAQy3K,KAAOA,EACfz3K,EAAQyzI,gBAAkBA,EAC1BzzI,EAAQqO,UAAYA,C,wBCtepB,IAAIpO,EAASL,EAAQ,OAEjBmG,EAAUnG,EAAQ,OAElBuiE,EAAeviE,EAAQ,OAQvBkoL,EAAW/hL,EAAQslC,YAAY,CACjCxqC,KAAM,WACNuH,MAAO,CACLkC,GAAI,EACJC,GAAI,EACJb,MAAO,EACPS,OAAQ,GAEVioB,UAAW,SAAUjf,EAAM/K,GACzB,IAAIkC,EAAKlC,EAAMkC,GACXC,EAAKnC,EAAMmC,GACXb,EAAQtB,EAAMsB,MAAQ,EACtBS,EAAS/B,EAAM+B,OAAS,EAC5BgJ,EAAKqf,OAAOloB,EAAIC,EAAKJ,GACrBgJ,EAAKsf,OAAOnoB,EAAKZ,EAAOa,EAAKJ,GAC7BgJ,EAAKsf,OAAOnoB,EAAKZ,EAAOa,EAAKJ,GAC7BgJ,EAAKywB,WACP,IAOEmkJ,EAAUhiL,EAAQslC,YAAY,CAChCxqC,KAAM,UACNuH,MAAO,CACLkC,GAAI,EACJC,GAAI,EACJb,MAAO,EACPS,OAAQ,GAEVioB,UAAW,SAAUjf,EAAM/K,GACzB,IAAIkC,EAAKlC,EAAMkC,GACXC,EAAKnC,EAAMmC,GACXb,EAAQtB,EAAMsB,MAAQ,EACtBS,EAAS/B,EAAM+B,OAAS,EAC5BgJ,EAAKqf,OAAOloB,EAAIC,EAAKJ,GACrBgJ,EAAKsf,OAAOnoB,EAAKZ,EAAOa,GACxB4I,EAAKsf,OAAOnoB,EAAIC,EAAKJ,GACrBgJ,EAAKsf,OAAOnoB,EAAKZ,EAAOa,GACxB4I,EAAKywB,WACP,IAOEokJ,EAAMjiL,EAAQslC,YAAY,CAC5BxqC,KAAM,MACNuH,MAAO,CAELgC,EAAG,EACHC,EAAG,EACHX,MAAO,EACPS,OAAQ,GAEVioB,UAAW,SAAUjf,EAAM/K,GACzB,IAAIgC,EAAIhC,EAAMgC,EACVC,EAAIjC,EAAMiC,EACVu2B,EAAIx4B,EAAMsB,MAAQ,EAAI,EAEtBgsG,EAAI/wG,KAAKF,IAAIm8B,EAAGx4B,EAAM+B,QACtBP,EAAIg3B,EAAI,EAERx8B,EAAKwF,EAAIA,GAAK8rG,EAAI9rG,GAClBW,EAAKF,EAAIqrG,EAAI9rG,EAAIxF,EACjB2sB,EAAQpsB,KAAKsjL,KAAK7jL,EAAKwF,GAEvBzF,EAAKQ,KAAK0sB,IAAIN,GAASnnB,EACvBs+K,EAAOvjL,KAAK4sB,IAAIR,GAChBo3J,EAAOxjL,KAAK0sB,IAAIN,GAChBq3J,EAAY,GAAJx+K,EACRy+K,EAAa,GAAJz+K,EACbuJ,EAAKqf,OAAOpoB,EAAIjG,EAAIoG,EAAKnG,GACzB+O,EAAKwwB,IAAIv5B,EAAGG,EAAIX,EAAGjF,KAAK0L,GAAK0gB,EAAiB,EAAVpsB,KAAK0L,GAAS0gB,GAClD5d,EAAK2tC,cAAc12C,EAAIjG,EAAK+jL,EAAOE,EAAO79K,EAAKnG,EAAK+jL,EAAOC,EAAOh+K,EAAGC,EAAIg+K,EAAQj+K,EAAGC,GACpF8I,EAAK2tC,cAAc12C,EAAGC,EAAIg+K,EAAQj+K,EAAIjG,EAAK+jL,EAAOE,EAAO79K,EAAKnG,EAAK+jL,EAAOC,EAAOh+K,EAAIjG,EAAIoG,EAAKnG,GAC9F+O,EAAKywB,WACP,IAOE0kJ,EAAQviL,EAAQslC,YAAY,CAC9BxqC,KAAM,QACNuH,MAAO,CACLgC,EAAG,EACHC,EAAG,EACHX,MAAO,EACPS,OAAQ,GAEVioB,UAAW,SAAUC,EAAKjqB,GACxB,IAAI+B,EAAS/B,EAAM+B,OACfT,EAAQtB,EAAMsB,MACdU,EAAIhC,EAAMgC,EACVC,EAAIjC,EAAMiC,EACVlG,EAAKuF,EAAQ,EAAI,EACrB2oB,EAAIG,OAAOpoB,EAAGC,GACdgoB,EAAII,OAAOroB,EAAIjG,EAAIkG,EAAIF,GACvBkoB,EAAII,OAAOroB,EAAGC,EAAIF,EAAS,EAAI,GAC/BkoB,EAAII,OAAOroB,EAAIjG,EAAIkG,EAAIF,GACvBkoB,EAAII,OAAOroB,EAAGC,GACdgoB,EAAIuR,WACN,IAOE2kJ,EAAc,CAChBzrK,KAAM/W,EAAQyrB,KACd3oB,KAAM9C,EAAQ+C,KACd0/K,UAAWziL,EAAQ+C,KACnB2/K,OAAQ1iL,EAAQ+C,KAChBk9C,OAAQjgD,EAAQ6I,OAChB85K,QAASX,EACTY,IAAKX,EACLY,MAAON,EACPO,SAAUf,GAERgB,EAAoB,CACtBhsK,KAAM,SAAU1S,EAAGC,EAAGu2B,EAAG80E,EAAGttG,GAE1BA,EAAM8kB,GAAK9iB,EACXhC,EAAM+kB,GAAK9iB,EAAIqrG,EAAI,EACnBttG,EAAMglB,GAAKhjB,EAAIw2B,EACfx4B,EAAMklB,GAAKjjB,EAAIqrG,EAAI,CACrB,EACA7sG,KAAM,SAAUuB,EAAGC,EAAGu2B,EAAG80E,EAAGttG,GAC1BA,EAAMgC,EAAIA,EACVhC,EAAMiC,EAAIA,EACVjC,EAAMsB,MAAQk3B,EACdx4B,EAAM+B,OAASurG,CACjB,EACA8yE,UAAW,SAAUp+K,EAAGC,EAAGu2B,EAAG80E,EAAGttG,GAC/BA,EAAMgC,EAAIA,EACVhC,EAAMiC,EAAIA,EACVjC,EAAMsB,MAAQk3B,EACdx4B,EAAM+B,OAASurG,EACfttG,EAAMwB,EAAIjF,KAAKJ,IAAIq8B,EAAG80E,GAAK,CAC7B,EACA+yE,OAAQ,SAAUr+K,EAAGC,EAAGu2B,EAAG80E,EAAGttG,GAC5B,IAAIiE,EAAO1H,KAAKJ,IAAIq8B,EAAG80E,GACvBttG,EAAMgC,EAAIA,EACVhC,EAAMiC,EAAIA,EACVjC,EAAMsB,MAAQ2C,EACdjE,EAAM+B,OAASkC,CACjB,EACA25C,OAAQ,SAAU57C,EAAGC,EAAGu2B,EAAG80E,EAAGttG,GAE5BA,EAAMkC,GAAKF,EAAIw2B,EAAI,EACnBx4B,EAAMmC,GAAKF,EAAIqrG,EAAI,EACnBttG,EAAMwB,EAAIjF,KAAKJ,IAAIq8B,EAAG80E,GAAK,CAC7B,EACAgzE,QAAS,SAAUt+K,EAAGC,EAAGu2B,EAAG80E,EAAGttG,GAC7BA,EAAMkC,GAAKF,EAAIw2B,EAAI,EACnBx4B,EAAMmC,GAAKF,EAAIqrG,EAAI,EACnBttG,EAAMsB,MAAQk3B,EACdx4B,EAAM+B,OAASurG,CACjB,EACAizE,IAAK,SAAUv+K,EAAGC,EAAGu2B,EAAG80E,EAAGttG,GACzBA,EAAMgC,EAAIA,EAAIw2B,EAAI,EAClBx4B,EAAMiC,EAAIA,EAAIqrG,EAAI,EAClBttG,EAAMsB,MAAQk3B,EACdx4B,EAAM+B,OAASurG,CACjB,EACAkzE,MAAO,SAAUx+K,EAAGC,EAAGu2B,EAAG80E,EAAGttG,GAC3BA,EAAMgC,EAAIA,EAAIw2B,EAAI,EAClBx4B,EAAMiC,EAAIA,EAAIqrG,EAAI,EAClBttG,EAAMsB,MAAQk3B,EACdx4B,EAAM+B,OAASurG,CACjB,EACAmzE,SAAU,SAAUz+K,EAAGC,EAAGu2B,EAAG80E,EAAGttG,GAC9BA,EAAMkC,GAAKF,EAAIw2B,EAAI,EACnBx4B,EAAMmC,GAAKF,EAAIqrG,EAAI,EACnBttG,EAAMsB,MAAQk3B,EACdx4B,EAAM+B,OAASurG,CACjB,GAEEqzE,EAAqB,CAAC,EAC1B9oL,EAAOU,KAAK4nL,GAAa,SAAUr+G,EAAMvoE,GACvConL,EAAmBpnL,GAAQ,IAAIuoE,CACjC,IACA,IAAItgC,EAAY7jC,EAAQslC,YAAY,CAClCxqC,KAAM,SACNuH,MAAO,CACLkI,WAAY,GACZlG,EAAG,EACHC,EAAG,EACHX,MAAO,EACPS,OAAQ,GAEV6+K,YAAa,WACX,IAAIx/K,EAAQrL,KAAKqL,MACbpB,EAAQjK,KAAKiK,MAEQ,QAArBA,EAAMkI,YAA+C,WAAvB9G,EAAMiO,eACtCjO,EAAMiO,aAAe,CAAC,MAAO,OAC7BjO,EAAMkiB,UAAY,SAClBliB,EAAMmiB,kBAAoB,SAE9B,EACAyG,UAAW,SAAUC,EAAKjqB,EAAO6gL,GAC/B,IAAI34K,EAAalI,EAAMkI,WACnB44K,EAAcH,EAAmBz4K,GAEZ,SAArBlI,EAAMkI,aACH44K,IAEH54K,EAAa,OACb44K,EAAcH,EAAmBz4K,IAGnCw4K,EAAkBx4K,GAAYlI,EAAMgC,EAAGhC,EAAMiC,EAAGjC,EAAMsB,MAAOtB,EAAM+B,OAAQ++K,EAAY9gL,OACvF8gL,EAAY92J,UAAUC,EAAK62J,EAAY9gL,MAAO6gL,GAElD,IAGF,SAASE,EAAmBz+K,EAAO0+K,GACjC,GAAkB,UAAdjrL,KAAK0C,KAAkB,CACzB,IAAIwoL,EAAclrL,KAAKqL,MACnB8/K,EAAcnrL,KAAKiK,MAEnBkhL,GAA0C,SAA3BA,EAAYh5K,WAC7B+4K,EAAYx0K,OAASnK,EACZvM,KAAKorL,gBACdF,EAAYx0K,OAASnK,EACrB2+K,EAAYj+K,KAAOg+K,GAAc,SAGjCC,EAAYj+K,OAASi+K,EAAYj+K,KAAOV,GACxC2+K,EAAYx0K,SAAWw0K,EAAYx0K,OAASnK,IAG9CvM,KAAKsb,OAAM,EACb,CACF,CAcA,SAASvL,EAAaoC,EAAYlG,EAAGC,EAAGu2B,EAAG80E,EAAGhrG,EAAO8+K,GAEnD,IAMI7vJ,EANA6iB,EAA0C,IAAhClsC,EAAWgK,QAAQ,SA2BjC,OAzBIkiC,IACFlsC,EAAaA,EAAWyrK,OAAO,EAAG,GAAG75B,cAAgB5xI,EAAWyrK,OAAO,IAMvEpiJ,EADqC,IAAnCrpB,EAAWgK,QAAQ,YACRvU,EAAQy2K,UAAUlsK,EAAWnP,MAAM,GAAI,IAAIghE,EAAa/3D,EAAGC,EAAGu2B,EAAG80E,GAAI8zE,EAAa,SAAW,SAC/D,IAAlCl5K,EAAWgK,QAAQ,WACfvU,EAAQ0b,SAASnR,EAAWnP,MAAM,GAAI,CAAC,EAAG,IAAIghE,EAAa/3D,EAAGC,EAAGu2B,EAAG80E,GAAI8zE,EAAa,SAAW,SAEhG,IAAI5/I,EAAU,CACzBxhC,MAAO,CACLkI,WAAYA,EACZlG,EAAGA,EACHC,EAAGA,EACHX,MAAOk3B,EACPz2B,OAAQurG,KAKd/7E,EAAW4vJ,eAAiB/sI,EAC5B7iB,EAAWxjB,SAAWgzK,EACtBxvJ,EAAWxjB,SAASzL,GACbivB,CACT,CAEA35B,EAAQkO,aAAeA,C,sBC5SvB,IAAIu7K,EAAgB,2BAChBC,EAAO,mBACPC,EAAgB,mBAWpB,SAASr3G,EAAS4hB,EAAIjsD,EAAO2hJ,GAC3B,IAAIC,EAIAxiL,EACAsqK,EACA91J,EACA+yG,EANAk7D,EAAW,EACXC,EAAW,EACXC,EAAQ,KAOZ,SAAS1C,IACPyC,GAAW,IAAI9qC,MAAOD,UACtBgrC,EAAQ,KACR91F,EAAGjzB,MAAM0wG,EAAO91J,GAAQ,GAC1B,CANAosB,EAAQA,GAAS,EAQjB,IAAItyB,EAAK,WACPk0K,GAAW,IAAI5qC,MAAOD,UACtB2yB,EAAQxzK,KACR0d,EAAO7N,UACP,IAAIi8K,EAAYr7D,GAAoB3mF,EAChCiiJ,EAAet7D,GAAoBg7D,EACvCh7D,EAAmB,KACnBvnH,EAAOwiL,GAAYK,EAAeJ,EAAWC,GAAYE,EACzDpxJ,aAAamxJ,GAETE,EACFF,EAAQvvJ,WAAW6sJ,EAAM2C,GAErB5iL,GAAQ,EACVigL,IAEA0C,EAAQvvJ,WAAW6sJ,GAAOjgL,GAI9ByiL,EAAWD,CACb,EAsBA,OAfAl0K,EAAGotC,MAAQ,WACLinI,IACFnxJ,aAAamxJ,GACbA,EAAQ,KAEZ,EAMAr0K,EAAGi5G,iBAAmB,SAAUu7D,GAC9Bv7D,EAAmBu7D,CACrB,EAEOx0K,CACT,CA8BA,SAASoQ,EAAewpF,EAAK66E,EAAQ3zB,EAAM/mE,GACzC,IAAIwE,EAAKqb,EAAI66E,GAEb,GAAKl2F,EAAL,CAIA,IAAIm2F,EAAWn2F,EAAGu1F,IAAkBv1F,EAChCo2F,EAAmBp2F,EAAGy1F,GACtBY,EAAWr2F,EAAGw1F,GAElB,GAAIa,IAAa9zB,GAAQ6zB,IAAqB56F,EAAc,CAC1D,GAAY,MAAR+mE,IAAiB/mE,EACnB,OAAO6f,EAAI66E,GAAUC,EAGvBn2F,EAAKqb,EAAI66E,GAAU93G,EAAS+3G,EAAU5zB,EAAuB,aAAjB/mE,GAC5CwE,EAAGu1F,GAAiBY,EACpBn2F,EAAGy1F,GAAiBj6F,EACpBwE,EAAGw1F,GAAQjzB,CACb,CAEA,OAAOviE,CAjBP,CAkBF,CAUA,SAASnxC,EAAMwsD,EAAK66E,GAClB,IAAIl2F,EAAKqb,EAAI66E,GAETl2F,GAAMA,EAAGu1F,KACXl6E,EAAI66E,GAAUl2F,EAAGu1F,GAErB,CAEAzpL,EAAQsyE,SAAWA,EACnBtyE,EAAQ+lB,eAAiBA,EACzB/lB,EAAQ+iD,MAAQA,C,wBCnJhB,IAAI9iD,EAASL,EAAQ,OAEjB2V,EAAQ3V,EAAQ,OAEhBiqK,EAAgBjqK,EAAQ,MAExBkzE,EAAYlzE,EAAQ,MAEpB84C,EAAY94C,EAAQ,OAExB,SAAS4qL,IAKPrsL,KAAKqI,MAAQ,IAAI+O,EAMjBpX,KAAKwnD,IAAMkkH,EAAcI,OAAO,YAClC,CAEAugB,EAAMnqL,UAAY,CAChBQ,KAAM,QAON2mB,KAAM,SAAUhnB,EAASC,GAAM,EAS/BxC,OAAQ,SAAUuE,EAAahC,EAASC,EAAKyB,GAAU,EASvD+1B,UAAW,SAAUz1B,EAAahC,EAASC,EAAKyB,GAC9CuoL,EAAgBjoL,EAAYG,UAAWT,EAAS,WAClD,EASA41B,SAAU,SAAUt1B,EAAahC,EAASC,EAAKyB,GAC7CuoL,EAAgBjoL,EAAYG,UAAWT,EAAS,SAClD,EAOAmG,OAAQ,SAAU7H,EAASC,GACzBtC,KAAKqI,MAAMkC,WACb,EAOAjC,QAAS,WAAa,GAUxB,IAAIikL,EAAaF,EAAMnqL,UAYvB,SAASsqL,EAAW/iL,EAAIi8B,GACtB,GAAIj8B,IACFA,EAAGyM,QAAQwvB,GAEK,UAAZj8B,EAAG/G,MACL,IAAK,IAAIuT,EAAI,EAAGA,EAAIxM,EAAGgjL,aAAcx2K,IACnCu2K,EAAW/iL,EAAG0R,QAAQlF,GAAIyvB,EAIlC,CASA,SAAS4mJ,EAAgB1rL,EAAMmD,EAAS2hC,GACtC,IAAInhC,EAAYg2C,EAAU2E,eAAet+C,EAAMmD,GAE9B,MAAbQ,EACFzC,EAAOU,KAAK+3C,EAAUwnD,iBAAiBx9F,IAAY,SAAU46G,GAC3DqtE,EAAW5rL,EAAKmJ,iBAAiBo1G,GAAUz5E,EAC7C,IAEA9kC,EAAK0J,mBAAkB,SAAUb,GAC/B+iL,EAAW/iL,EAAIi8B,EACjB,GAEJ,CAzCA6mJ,EAAWj6F,WAAai6F,EAAW9iK,aAAe8iK,EAAWp+F,aAAe,SAAU9pF,EAAahC,EAASC,EAAKyB,GAC/G/D,KAAKF,OAAOuE,EAAahC,EAASC,EAAKyB,EACzC,EA0CA4wE,EAAUoE,kBAAkBszG,EAAO,CAAC,YAEpC13G,EAAU43F,sBAAsB8f,EAAO,CACrC7f,oBAAoB,IAEtB,IAAIrpK,EAAWkpL,EACfjpL,EAAOvB,QAAUsB,C,wBC7IjB,IAAIiU,EAAQ3V,EAAQ,OAEhBiqK,EAAgBjqK,EAAQ,MAExBkzE,EAAYlzE,EAAQ,MAEpBqtG,EAAY,WAKd9uG,KAAKqI,MAAQ,IAAI+O,EAMjBpX,KAAKwnD,IAAMkkH,EAAcI,OAAO,gBAClC,EAEAh9D,EAAU5sG,UAAY,CACpBC,YAAa2sG,EACbzlF,KAAM,SAAUhnB,EAASC,GAAM,EAC/BxC,OAAQ,SAAUkF,EAAgB3C,EAASC,EAAKyB,GAAU,EAC1DuE,QAAS,WAAa,GAExB,IAAIokL,EAAiB59E,EAAU5sG,UAE/BwqL,EAAep6F,WAAao6F,EAAejjK,aAAeijK,EAAev+F,aAAe,SAAU9pF,EAAahC,EAASC,EAAKyB,GAAU,EAIvI4wE,EAAUoE,kBAAkB+1B,GAE5Bn6B,EAAU43F,sBAAsBz9D,EAAW,CACzC09D,oBAAoB,IAEtB,IAAIrpK,EAAW2rG,EACf1rG,EAAOvB,QAAUsB,C,iCCtCjB,IAAIrB,EAASL,EAAQ,OAEjBgwE,EAAUhwE,EAAQ,MAElBuO,EAAUvO,EAAQ,OAElBssB,EAAY/d,EAAQ+d,UACpBvrB,EAAOV,EAAOU,KACdwf,EAAWlgB,EAAOkgB,SAClB2qK,GAAiC,EA8BjC53H,EAAgB,SAAUlnD,GAC5B,IAAIsnD,EAAgBtnD,EAAOsnD,cACvBhuC,EAAatZ,EAAOnL,KAMpBkvF,EAAa5xF,KAAK6N,OAAS/L,EAAOyiB,MAAM1W,GAM5C7N,KAAK0C,KAAOykB,EAMZnnB,KAAKm1D,cAAgBA,EAMrBn1D,KAAK4sL,eAAiBC,EAAY13H,GAClC,IAAI23H,EAAgBC,EAAe5lK,GAMnCnnB,KAAKk4F,YAAc40F,EAAc50F,YAMjCl4F,KAAKyoC,eAAiBqkJ,EAAcrkJ,eAMpCzoC,KAAKgtL,OAASF,EAAcE,OAAO73H,GAEb,cAAlBA,GACF83H,EAAqBr7F,GACrBs7F,EAAuBt7F,IACI,aAAlBz8B,EACTy8B,EAAWn6D,WAAa01J,EAA+Bv7F,GAErDq7F,EAAqBr7F,GAAY,IAGnC9vF,EAAOs6J,OAAyB,WAAlBjnG,GAA8By8B,EAAWtiE,YACvD29J,EAAqBr7F,GAEzB,EAEA78B,EAAc7yD,UAAY,CACxBC,YAAa4yD,EACbM,iBAAkB,SAAUtnD,GAC1B,IAAIq/K,EAAaptL,KAAK4sL,eAAe7+K,GAErC,OAAO/N,KAAKgtL,OAAOI,EAAYr/K,EACjC,EACAy6B,cAAe,WACb,OAAO1mC,EAAO2B,KAAKzD,KAAK4sL,eAAgB5sL,KAC1C,GAEF,IAAI+sL,EAAiBh4H,EAAcg4H,eAAiB,CAClDxgL,MAAO,CACL2rF,YAAam1F,EAAgB,SAM7B5kJ,eAAgB,WACd,IAAImpD,EAAa5xF,KAAK6N,OACtB,OAAO/L,EAAO2B,KAAkC,aAA7BmuF,EAAWz8B,cAA+B,SAAUpnD,EAAOu/K,GAE5E,OADCA,IAAiBv/K,EAAQ/N,KAAK4sL,eAAe7+K,IACvCw/K,EAAc51K,KAAK3X,KAAM+N,EAClC,EAAI,SAAUA,EAAOu/K,EAAcE,GAGjC,IAAIC,IAAmBD,EAGvB,OAFCF,IAAiBv/K,EAAQ/N,KAAK4sL,eAAe7+K,IAC9Cy/K,EAAM/7G,EAAQi8G,SAAS3/K,EAAO6jF,EAAW+7F,aAAcH,GAChDC,EAAiBD,EAAM/7G,EAAQ2wF,UAAUorB,EAAK,OACvD,EAAGxtL,KACL,EACAgtL,OAAQ,CACNY,OAAQ,SAAUR,GAChB,OAAO37G,EAAQ2wF,UAAU3wF,EAAQi8G,SAASN,EAAYptL,KAAK6N,OAAO8/K,cAAe,OACnF,EACAh2J,SAAU41J,EACVM,UAAW,SAAUT,EAAYr/K,GAC/B,IAAIkO,EAAS6xK,EAAmBn2K,KAAK3X,KAAM+N,GAM3C,OAJc,MAAVkO,IACFA,EAASw1D,EAAQ2wF,UAAU3wF,EAAQi8G,SAASN,EAAYptL,KAAK6N,OAAO8/K,cAAe,SAG9E1xK,CACT,EACAmmB,MAAO2rJ,IAGXC,SAAUC,GAA8B,SAAU1hL,EAAOwB,GACvD,OAAO0jE,EAAQqB,UAAUvmE,EAAOwB,EAClC,IACAi0D,gBAAiBisH,GAA8B,SAAU1hL,EAAOwB,GAC9D,OAAO0jE,EAAQqB,UAAUvmE,EAAO,KAAMwB,EACxC,IACAmgL,eAAgBD,GAA8B,SAAU1hL,EAAOwB,GAC7D,OAAO0jE,EAAQqB,UAAUvmE,EAAO,KAAM,KAAMwB,EAC9C,IACAg0D,WAAYksH,GAA8B,SAAU1hL,EAAOwB,GACzD,OAAO0jE,EAAQsB,YAAYxmE,EAAOwB,EACpC,IACAtB,QAAS,CACPyrF,YAAam1F,EAAgB,WAC7BL,OAAQmB,EAAU,CAAC,EAAG,KAExBt/K,OAAQ,CACNqpF,YAAa,SAAUnqF,EAAOqsI,EAAQC,GACpC,IAAI+zC,EAAYpuL,KAAKq1D,iBAAiBtnD,GAEtC,GAAIjM,EAAOwiF,SAAS8pG,GAClB/zC,EAAO,SAAU+zC,QACZ,GAAIpsK,EAASosK,GAClB,IAAK,IAAI5qL,KAAQ4qL,EACXA,EAAUxsL,eAAe4B,IAC3B62I,EAAO72I,EAAM4qL,EAAU5qL,GAI/B,EACAwpL,OAAQ,CACNY,OAAQS,EACR12J,SAAU41J,EACVM,UAAW,SAAUT,EAAYr/K,GAC/B,IAAIkO,EAAS6xK,EAAmBn2K,KAAK3X,KAAM+N,GAM3C,OAJc,MAAVkO,IACFA,EAASoyK,EAAa12K,KAAK3X,KAAMotL,IAG5BnxK,CACT,EACAmmB,MAAO2rJ,IAGXj/K,WAAY,CACVopF,YAAam1F,EAAgB,cAC7BL,OAAQmB,EAAU,CAAC,EAAG,MAI1B,SAASjB,EAAuBt7F,GAC9B,IAAI3rD,EAAY2rD,EAAW3rD,UAC3B2rD,EAAW08F,kBAAmB,EAC9BxsL,EAAOU,KAAKyjC,GAAW,SAAUE,EAAO71B,GACtC61B,EAAMooJ,YAAcj+K,EAGA,MAAhB61B,EAAMpgB,SACR6rE,EAAW08F,kBAAmB,EAElC,GACF,CAEA,SAASnB,EAA+Bv7F,GAEtC,IAAIn6D,EAAam6D,EAAWn6D,WACxB1R,EAAS6rE,EAAW7rE,OACpByoK,EAAc58F,EAAW48F,YAAc,CAAC,EAK5C,GAJAhsL,EAAKi1B,GAAY,SAAUu/G,EAAM1mI,GAC/Bk+K,EAAYx3C,GAAQ1mI,CACtB,KAEKxO,EAAO6Q,QAAQoT,GAAS,CAC3B,IAAI0oK,EAAY,GAEZ3sL,EAAOkgB,SAAS+D,GAClBvjB,EAAKujB,GAAQ,SAAUoZ,EAAG63G,GACxB,IAAI1mI,EAAQk+K,EAAYx3C,GACxBy3C,EAAmB,MAATn+K,EAAgBA,EAAQq8K,GAAiCxtJ,CACrE,IAGAsvJ,EAAU9B,GAAiC5mK,EAG7CA,EAAS2oK,EAAkB98F,EAAY68F,EACzC,CAIA,IAAK,IAAIx4K,EAAIwhB,EAAWtjB,OAAS,EAAG8B,GAAK,EAAGA,IACzB,MAAb8P,EAAO9P,YACFu4K,EAAY/2J,EAAWxhB,IAC9BwhB,EAAWohB,MAGjB,CAEA,SAASo0I,EAAqBr7F,EAAY75C,GACxC,IAAIhyB,EAAS6rE,EAAW7rE,OACpB0oK,EAAY,GAEZ3sL,EAAOkgB,SAAS+D,GAClBvjB,EAAKujB,GAAQ,SAAUoZ,GACrBsvJ,EAAUztL,KAAKm+B,EACjB,IACmB,MAAVpZ,GACT0oK,EAAUztL,KAAK+kB,GAGjB,IAAI4oK,EAAgB,CAClBpiL,MAAO,EACPsC,OAAQ,GAGLkpC,GAAmC,IAArB02I,EAAUt6K,QAAiBw6K,EAAc/sL,eAAegwF,EAAWlvF,QAEpF+rL,EAAU,GAAKA,EAAU,IAG3BC,EAAkB98F,EAAY68F,EAChC,CAEA,SAASR,EAA8BW,GACrC,MAAO,CACL12F,YAAa,SAAUnqF,EAAOqsI,EAAQC,GACpCtsI,EAAQ/N,KAAKq1D,iBAAiBtnD,GAE9BssI,EAAO,QAASu0C,EAAWx0C,EAAO,SAAUrsI,GAC9C,EACAi/K,OAAQmB,EAAU,CAAC,EAAG,IAE1B,CAEA,SAASE,EAAajB,GACpB,IAAIrnK,EAAS/lB,KAAK6N,OAAOkY,OACzB,OAAOA,EAAOvf,KAAK8R,MAAMyV,EAAUq/J,EAAY,CAAC,EAAG,GAAI,CAAC,EAAGrnK,EAAO5R,OAAS,IAAI,MAAW,CAAC,CAC7F,CAEA,SAASk5K,EAAgBlmK,GACvB,OAAO,SAAUpZ,EAAOqsI,EAAQC,GAC9BA,EAAOlzH,EAAYnnB,KAAKq1D,iBAAiBtnD,GAC3C,CACF,CAEA,SAASw/K,EAAcH,GACrB,IAAIrnK,EAAS/lB,KAAK6N,OAAOkY,OACzB,OAAOA,EAAO/lB,KAAK6N,OAAOw7B,MAAQ+jJ,IAAeT,EAAgCS,EAAarnK,EAAO5R,OAASi5K,EAChH,CAEA,SAASW,IACP,OAAO/tL,KAAK6N,OAAOkY,OAAO,EAC5B,CAEA,SAASooK,EAAUU,GACjB,MAAO,CACLjB,OAAQ,SAAUR,GAChB,OAAOr/J,EAAUq/J,EAAYyB,EAAc7uL,KAAK6N,OAAOkY,QAAQ,EACjE,EACA4R,SAAU41J,EACVM,UAAW,SAAUT,EAAYr/K,GAC/B,IAAIkO,EAAS6xK,EAAmBn2K,KAAK3X,KAAM+N,GAM3C,OAJc,MAAVkO,IACFA,EAAS8R,EAAUq/J,EAAYyB,EAAc7uL,KAAK6N,OAAOkY,QAAQ,IAG5D9J,CACT,EACAmmB,MAAO2rJ,EAEX,CAEA,SAASD,EAAmB//K,GAC1B,IAAI6jF,EAAa5xF,KAAK6N,OAClBo4B,EAAY2rD,EAAW3rD,UAE3B,GAAI2rD,EAAW08F,iBAAkB,CAC/B,IAAI73C,EAAa1hF,EAAcyhF,eAAezoI,EAAOk4B,GACjDE,EAAQF,EAAUwwG,GAEtB,GAAItwG,GAASA,EAAMpgB,OACjB,OAAOogB,EAAMpgB,OAAO/lB,KAAK0C,KAE7B,CACF,CAEA,SAASgsL,EAAkB98F,EAAY68F,GASrC,OARA78F,EAAW7rE,OAAS0oK,EAEI,UAApB78F,EAAWlvF,OACbkvF,EAAW+7F,aAAe7rL,EAAO41B,IAAI+2J,GAAW,SAAUnmK,GACxD,OAAOmpD,EAAQ/9D,MAAM4U,EACvB,KAGKmmK,CACT,CAMA,IAAI5B,EAAc,CAChBe,OAAQ,SAAU7/K,GAChB,OAAOggB,EAAUhgB,EAAO/N,KAAK6N,OAAOyhB,WAAY,CAAC,EAAG,IAAI,EAC1D,EACAu+J,UAAW,SAAU9/K,GACnB,IAAIk4B,EAAYjmC,KAAK6N,OAAOo4B,UACxBwwG,EAAa1hF,EAAcyhF,eAAezoI,EAAOk4B,GAAW,GAEhE,GAAkB,MAAdwwG,EACF,OAAO1oH,EAAU0oH,EAAY,CAAC,EAAGxwG,EAAU9xB,OAAS,GAAI,CAAC,EAAG,IAAI,EAEpE,EACAwjB,SAAU,SAAU5pB,GAClB,IAAIuC,EAAQtQ,KAAK6N,OAAO4pB,WAAaz3B,KAAK6N,OAAO2gL,YAAYzgL,GAASA,EAEtE,OAAgB,MAATuC,EAAgBq8K,EAAgCr8K,CACzD,EACA8xB,MAAOtgC,EAAOyG,MA2LhB,SAASkhL,EAAWtoD,EAAO1yG,EAAGC,GAC5B,OAAOyyG,EAAQ1yG,GAAKC,EAAID,EAAIC,CAC9B,CApLAqmC,EAAcohF,gBAAkB,WAC9B,IAAID,EAAc,GAIlB,OAHAp0I,EAAOU,KAAKuqL,GAAgB,SAAU5sG,EAASx+E,GAC7Cu0I,EAAYl1I,KAAKW,EACnB,IACOu0I,CACT,EAMAnhF,EAAc+5H,iBAAmB,SAAUtrL,EAAM28E,GAC/C4sG,EAAevpL,GAAQ28E,CACzB,EAMAprB,EAAc4kF,YAAc,SAAUxyH,GACpC,OAAO4lK,EAAenrL,eAAeulB,EACvC,EASA4tC,EAAcyjF,WAAa,SAAUzyH,EAAQ84C,EAAUpnD,GACjD3V,EAAOkgB,SAAS+D,GAClBjkB,EAAOU,KAAKujB,EAAQ84C,EAAUpnD,GAE9BonD,EAASlnD,KAAKF,EAASsO,EAE3B,EAEAgvC,EAAc7P,UAAY,SAAUn/B,EAAQ84C,EAAUpnD,GACpD,IAAIs3K,EACAC,EAAYltL,EAAO6Q,QAAQoT,GAAU,GAAKjkB,EAAOkgB,SAAS+D,GAAU,CAAC,GAAKgpK,GAAY,EAAM,MAKhG,OAJAh6H,EAAcyjF,WAAWzyH,GAAQ,SAAUoZ,EAAGx9B,GAC5C,IAAI89H,EAAS5gE,EAASlnD,KAAKF,EAAS0nB,EAAGx9B,GACvCotL,EAAYC,EAAYvvD,EAASuvD,EAAUrtL,GAAO89H,CACpD,IACOuvD,CACT,EASAj6H,EAAcwiF,gBAAkB,SAAUnmC,GACxC,IACI69E,EADA9rF,EAAM,CAAC,EAQX,OANAiO,GAAO5uG,EAAKuqL,GAAgB,SAAUx1E,EAAGpwF,GACnCiqF,EAAIxvG,eAAeulB,KACrBg8E,EAAIh8E,GAAciqF,EAAIjqF,GACtB8nK,GAAY,EAEhB,IACOA,EAAY9rF,EAAM,IAC3B,EAWApuC,EAAcwlF,mBAAqB,SAAUrE,GAC3C,GAAIl0H,EAASk0H,GAAc,CACzB,IAAIy5B,EAAQ,GACZntK,EAAK0zI,GAAa,SAAU5tH,EAAM5lB,GAChCitK,EAAM3uK,KAAK0B,EACb,IACAwzI,EAAcy5B,CAChB,KAAO,KAAI7tK,EAAO6Q,QAAQujI,GAGxB,MAAO,GAFPA,EAAcA,EAAYlzI,OAG5B,CAOA,OALAkzI,EAAYxqH,MAAK,SAAUwjK,EAAOC,GAGhC,MAAiB,UAAVA,GAA+B,UAAVD,GAAgD,IAA3BA,EAAM/yK,QAAQ,SAAiB,GAAK,CACvF,IACO+5H,CACT,EAYAnhF,EAAc2lF,UAAY,SAAU00C,EAAaC,GAC/C,MAAuB,UAAhBA,KAA6BD,GAAoD,IAArCA,EAAYjzK,QAAQkzK,IAAsBD,IAAgBC,CAC/G,EAUAt6H,EAAcyhF,eAAiB,SAAUzoI,EAAOk4B,EAAWqpJ,GAIzD,IAHA,IAAIC,EACA9hL,EAAMlH,IAED0P,EAAI,EAAGuY,EAAMyX,EAAU9xB,OAAQ8B,EAAIuY,EAAKvY,IAAK,CACpD,IAAIu5K,EAAavpJ,EAAUhwB,GAAGlI,MAE9B,GAAkB,MAAdyhL,EAAoB,CACtB,GAAIA,IAAezhL,GAKM,kBAAfyhL,GAA2BA,IAAezhL,EAAQ,GAC1D,OAAOkI,EAGTq5K,GAA0BG,EAAeD,EAAYv5K,EACvD,CACF,CAEA,IAASA,EAAI,EAAGuY,EAAMyX,EAAU9xB,OAAQ8B,EAAIuY,EAAKvY,IAAK,CACpD,IAAIkwB,EAAQF,EAAUhwB,GAClB0oB,EAAWwH,EAAMxH,SACjBwiG,EAAQh7F,EAAMg7F,MAElB,GAAIxiG,EAAU,CACZ,GAAIA,EAAS,MAAQp4B,KACnB,GAAIkjL,EAAWtoD,EAAM,GAAIpzH,EAAO4wB,EAAS,IACvC,OAAO1oB,OAEJ,GAAI0oB,EAAS,KAAOp4B,KACzB,GAAIkjL,EAAWtoD,EAAM,GAAIxiG,EAAS,GAAI5wB,GACpC,OAAOkI,OAEJ,GAAIwzK,EAAWtoD,EAAM,GAAIxiG,EAAS,GAAI5wB,IAAU07K,EAAWtoD,EAAM,GAAIpzH,EAAO4wB,EAAS,IAC1F,OAAO1oB,EAGTq5K,GAA0BG,EAAe9wJ,EAAS,GAAI1oB,GACtDq5K,GAA0BG,EAAe9wJ,EAAS,GAAI1oB,EACxD,CACF,CAEA,GAAIq5K,EACF,OAAOvhL,IAAUxH,IAAW0/B,EAAU9xB,OAAS,EAAIpG,KAAWxH,IAAW,EAAIgpL,EAG/E,SAASE,EAAetxK,EAAK7N,GAC3B,IAAIo/K,EAASlpL,KAAKiH,IAAI0Q,EAAMpQ,GAExB2hL,EAASjiL,IACXA,EAAMiiL,EACNH,EAAYj/K,EAEhB,CACF,EAMA,IAAInN,EAAW4xD,EACf3xD,EAAOvB,QAAUsB,C,oBChjBjB,SAASA,EAASQ,EAAYtB,GAE5B,IAAI89B,EAAe,CAAC,EACpB99B,EAAQ2c,oBAAoBrb,GAAY,SAAUU,GAChD,IAAIsrL,EAAUtrL,EAAY+lB,aACtBkvC,EAAS,CAAC,EAEd,IAAKj3D,EAAQ+c,iBAAiB/a,GAAc,CAC1C,IAAIzD,EAAOyD,EAAYG,UACvB5D,EAAK4B,MAAK,SAAUiC,GAClB,IAAI0vJ,EAASvzJ,EAAKgmB,YAAYniB,GAC9B60D,EAAO66F,GAAU1vJ,CACnB,IACAkrL,EAAQntL,MAAK,SAAU2xJ,GACrB,IAAIy7B,EAAct2H,EAAO66F,GAErB07B,EAAiC,MAAfD,GAAuBhvL,EAAK4L,cAAcojL,EAAa,SAAS,GAEtF,GAAKC,EAYHF,EAAQtwK,cAAc80I,EAAQ,QAAS07B,OAZnB,CAEpB,IAAIxmL,EAAYsmL,EAAQrmL,aAAa6qJ,GACjC5nJ,EAAQlD,EAAUnG,IAAI,2BAA6BmB,EAAYg8B,oBAAoBsvJ,EAAQjrL,QAAQyvJ,GAASh0H,GAEhHwvJ,EAAQtwK,cAAc80I,EAAQ,QAAS5nJ,GAEpB,MAAfqjL,GACFhvL,EAAKye,cAAcuwK,EAAa,QAASrjL,EAE7C,CAIF,GACF,CACF,GACF,CAEAnJ,EAAOvB,QAAUsB,C,wBCxCjB,IAAI2sL,EAAWruL,EAAQ,OAEvB,SAAS0B,EAASd,GAChB,SAAS0tL,EAAY1rL,GACnB,IAAI2rL,GAAmB3rL,EAAYq/C,uBAAyB,0BAA0B7hB,MAAM,KACxFjhC,EAAOyD,EAAYG,UACnB+H,EAAQlI,EAAYnB,IAAI8sL,IACzB3rL,EAAYg8B,oBAAoBh8B,EAAYnB,IAAI,SAGnDtC,EAAKyG,UAAU,QAASkF,GAEnBlK,EAAQ+c,iBAAiB/a,KACP,oBAAVkI,GAA0BA,aAAiBujL,GACpDlvL,EAAK4B,MAAK,SAAUiC,GAClB7D,EAAKye,cAAc5a,EAAK,QAAS8H,EAAMlI,EAAYumB,cAAcnmB,IACnE,IAIF7D,EAAK4B,MAAK,SAAUiC,GAClB,IAAI4E,EAAYzI,EAAK0I,aAAa7E,GAC9B8H,EAAQlD,EAAUnG,IAAI8sL,GAAiB,GAE9B,MAATzjL,GACF3L,EAAKye,cAAc5a,EAAK,QAAS8H,EAErC,IAEJ,CAEAlK,EAAQsjH,cAAcoqE,EACxB,CAEA3sL,EAAOvB,QAAUsB,C,oBClCjB,SAASA,EAASQ,EAAYssL,EAAmB9wK,EAAc9c,EAASC,GAEtED,EAAQ2c,oBAAoBrb,GAAY,SAAUU,GAChD,IAAIzD,EAAOyD,EAAYG,UACnB2N,EAAa9N,EAAYnB,IAAI,WAAa+sL,EAC1CnhL,EAAazK,EAAYnB,IAAI,cACjCtC,EAAKyG,UAAU,CACb8X,aAAcA,GAAgBhN,EAC9BtD,OAAQsD,EACRrD,WAAYA,IAGTzM,EAAQ+c,iBAAiB/a,KACF,oBAAfyK,GACTlO,EAAK4B,MAAK,SAAUiC,GAClB,IAAIijC,EAAWrjC,EAAY6U,YAAYzU,GAEnComB,EAASxmB,EAAYumB,cAAcnmB,GACvC7D,EAAKye,cAAc5a,EAAK,aAAcqK,EAAW44B,EAAU7c,GAC7D,IAGFjqB,EAAK4B,MAAK,SAAUiC,GAClB,IAAI4E,EAAYzI,EAAK0I,aAAa7E,GAC9ByrL,EAAiB7mL,EAAU8D,WAAW,UAAU,GAChDgjL,EAAiB9mL,EAAU8D,WAAW,cAAc,GAElC,MAAlB+iL,GACFtvL,EAAKye,cAAc5a,EAAK,SAAUyrL,GAGd,MAAlBC,GAEFvvL,EAAKye,cAAc5a,EAAK,aAAc0rL,EAE1C,IAEJ,GACF,CAEA/sL,EAAOvB,QAAUsB,C,wBCxCjB,IAAIrB,EAASL,EAAQ,OAKjB4zI,EAAgB,CAIlBnyI,IAAK,SAAUikB,EAAYxlB,EAAKo2C,GAC9B,IAAIhqC,EAAQjM,EAAOyiB,OAAOlW,EAAc8Y,IAAe,CAAC,GAAGxlB,IAC3D,OAAOo2C,GAAaj2C,EAAO6Q,QAAQ5E,GAASA,EAAMA,EAAMoG,OAAS,GAAapG,CAChF,GAEEM,EAAgB,CAClB9B,MAAO,CACLo/C,OAAQ,CAAC,UAAW,WACpBC,SAAU,CAAC,kBAEboiI,SAAU,CACRriI,OAAQ,CAAC,EAAG,KACZC,SAAU,CAAC,EAAG,IAEhBoW,gBAAiB,CACfrW,OAAQ,CAAC,GAAK,GACdC,SAAU,CAAC,EAAG,IAEhBsiI,eAAgB,CACdviI,OAAQ,CAAC,GAAK,IACdC,SAAU,CAAC,EAAG,IAEhBmW,WAAY,CACVpW,OAAQ,CAAC,GAAK,GACdC,SAAU,CAAC,EAAG,IAEhBn/C,QAAS,CACPk/C,OAAQ,CAAC,GAAK,GACdC,SAAU,CAAC,EAAG,IAEhB/8C,OAAQ,CACN88C,OAAQ,CAAC,SAAU,YAAa,WAChCC,SAAU,CAAC,SAEb98C,WAAY,CACV68C,OAAQ,CAAC,GAAI,IACbC,SAAU,CAAC,EAAG,KAGdzoD,EAAWkyI,EACfjyI,EAAOvB,QAAUsB,C,wBCjDjB,IAAIrB,EAASL,EAAQ,OAEjBszD,EAAgBtzD,EAAQ,OAKxBe,EAAOV,EAAOU,KAElB,SAAS4tL,EAAQh/E,GACf,GAAIA,EACF,IAAK,IAAI5tG,KAAQ4tG,EACf,GAAIA,EAAIxvG,eAAe4B,GACrB,OAAO,CAIf,CASA,SAASg0F,EAAqB3pF,EAAQkhI,EAAW+J,GAC/C,IAAIvhD,EAAiB,CAAC,EAuBtB,OAtBA/0F,EAAKusI,GAAW,SAAUrpG,GACxB,IAAI40G,EAAW/iD,EAAe7xD,GAAS2qJ,IACvC7tL,EAAKqL,EAAO63B,IAAQ,SAAUg0G,EAAYvyH,GACxC,GAAK4tC,EAAc4kF,YAAYxyH,GAA/B,CAIA,IAAIswE,EAAgB,CAClB/0F,KAAMykB,EACNpB,OAAQ2zH,GAEVZ,GAA0BA,EAAuBrhD,EAAe/xD,GAChE40G,EAASnzH,GAAc,IAAI4tC,EAAc0iC,GAGtB,YAAftwE,IACFswE,EAAgB31F,EAAOyiB,MAAMkzE,GAC7BA,EAAc/0F,KAAO,aACrB43I,EAASg2C,SAAS71C,kBAAoB,IAAI1lF,EAAc0iC,GAb1D,CAeF,GACF,IACOF,EAEP,SAAS84F,IACP,IAAIE,EAAU,WAAa,EAI3BA,EAAQruL,UAAUouL,SAAWC,EAAQruL,UACrC,IAAIkvG,EAAM,IAAIm/E,EACd,OAAOn/E,CACT,CACF,CAQA,SAASvf,EAAoBD,EAAY7rC,EAAWyqI,GAKlD,IAAI/2D,EACJ33H,EAAOU,KAAKguL,GAAM,SAAU7uL,GACtBokD,EAAUnkD,eAAeD,IAAQyuL,EAAQrqI,EAAUpkD,MACrD83H,GAAM,EAEV,IACAA,GAAO33H,EAAOU,KAAKguL,GAAM,SAAU7uL,GAC7BokD,EAAUnkD,eAAeD,IAAQyuL,EAAQrqI,EAAUpkD,IACrDiwF,EAAWjwF,GAAOG,EAAOyiB,MAAMwhC,EAAUpkD,WAElCiwF,EAAWjwF,EAEtB,GACF,CAWA,SAASu2F,EAAY62C,EAAWx3C,EAAgB32F,EAAMq3F,EAAeu7E,EAAOt2H,GAC1E,IAKI34C,EALAksL,EAAiB,CAAC,EAOtB,SAASl3J,EAAU53B,GACjB,OAAOf,EAAK4L,cAAcjI,EAAW5C,EACvC,CAEA,SAAS0F,EAAU1F,EAAKoM,GACtBnN,EAAKye,cAAc9a,EAAW5C,EAAKoM,EACrC,CAQA,SAAS2iL,EAASC,EAAcrgL,GAC9B/L,EAAyB,MAAb24C,EAAoByzI,EAAergL,EAC/C,IAAIsgL,EAAchwL,EAAKy5D,eAAe91D,GAEtC,IAAIqsL,IAAyC,IAA1BA,EAAYnqJ,UAQ/B,IAJA,IAAIipG,EAAaz3C,EAActgF,KAAK67J,EAAOmd,GACvCr2C,EAAW/iD,EAAem4C,GAC1BwG,EAAcu6C,EAAe/gD,GAExBz5H,EAAI,EAAGuY,EAAM0nH,EAAY/hI,OAAQ8B,EAAIuY,EAAKvY,IAAK,CACtD,IAAIvT,EAAOwzI,EAAYjgI,GACvBqkI,EAAS53I,IAAS43I,EAAS53I,GAAMw1F,YAAYy4F,EAAcp3J,EAAWlyB,EACxE,CACF,CApCAvF,EAAOU,KAAKusI,GAAW,SAAUrpG,GAC/B,IAAIwwG,EAAcnhF,EAAcwlF,mBAAmBhjD,EAAe7xD,IAClE+qJ,EAAe/qJ,GAASwwG,CAC1B,IAWiB,MAAbh5F,EACFt8C,EAAK4B,KAAKkuL,GAAU,GAEpB9vL,EAAK4B,KAAK,CAAC06C,GAAYwzI,GAAU,EAoBrC,CAEA7uL,EAAQ21F,qBAAuBA,EAC/B31F,EAAQgwF,oBAAsBA,EAC9BhwF,EAAQq2F,YAAcA,C,wBC7ItB,IAAI24F,EAAOpvL,EAAQ,OAEfuxG,EAAWvxG,EAAQ,OAEnBw6I,EAAgBx6I,EAAQ,OAExBqvL,EAAarvL,EAAQ,MAErBK,EAASL,EAAQ,OASjBsvL,EAAU,SAAUhvJ,GAEtBk6G,EAActkI,KAAK3X,KAAM+hC,GACzBixE,EAASr7F,KAAK3X,KAAM+hC,GACpB+uJ,EAAWn5K,KAAK3X,KAAM+hC,GAMtB/hC,KAAKqmB,GAAK0b,EAAK1b,IAAMwqK,GACvB,EAEAE,EAAQ7uL,UAAY,CAMlBQ,KAAM,UAONc,KAAM,GAQN+7K,KAAM,KASNpzJ,QAAQ,EASRvV,SAAU,KAOV27B,MAAO,SAAUvsC,EAAIC,GACnB,OAAQjG,KAAKw4B,WACX,IAAK,aACHvyB,EAAK,EACL,MAEF,IAAK,WACHD,EAAK,EACL,MAGJ,IAAIkzD,EAAIl5D,KAAK68B,UAERq8B,IACHA,EAAIl5D,KAAK68B,UAAY,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAGvCq8B,EAAE,IAAMlzD,EACRkzD,EAAE,IAAMjzD,EACRjG,KAAKwpF,qBACLxpF,KAAKsb,OAAM,EACb,EAKA2wB,aAAc,WAAa,EAK3B+kJ,YAAa,WAAa,EAK1BnuL,OAAQ,WACN7C,KAAK+G,iBACP,EAMA6yB,SAAU,SAAUpiB,EAAIC,GAAU,EAKlCw5K,OAAQ,SAAUtvL,EAAKoM,GACrB,GAAY,aAARpM,GAA8B,UAARA,GAA2B,WAARA,GAE3C,GAAIoM,EAAO,CACT,IAAI+H,EAAS9V,KAAK2B,GAEbmU,IACHA,EAAS9V,KAAK2B,GAAO,IAGvBmU,EAAO,GAAK/H,EAAM,GAClB+H,EAAO,GAAK/H,EAAM,EACpB,OAEA/N,KAAK2B,GAAOoM,CAEhB,EAKA0oE,KAAM,WACJz2E,KAAKmsB,QAAS,EACdnsB,KAAKu/K,MAAQv/K,KAAKu/K,KAAK2R,SACzB,EAKAxmK,KAAM,WACJ1qB,KAAKmsB,QAAS,EACdnsB,KAAKu/K,MAAQv/K,KAAKu/K,KAAK2R,SACzB,EAMA9jL,KAAM,SAAUzL,EAAKoM,GACnB,GAAmB,kBAARpM,EACT3B,KAAKixL,OAAOtvL,EAAKoM,QACZ,GAAIjM,EAAOkgB,SAASrgB,GACzB,IAAK,IAAI6B,KAAQ7B,EACXA,EAAIC,eAAe4B,IACrBxD,KAAKixL,OAAOztL,EAAM7B,EAAI6B,IAM5B,OADAxD,KAAKsb,OAAM,GACJtb,IACT,EAKA8W,YAAa,SAAUF,GACrB,IAAI2tC,EAAKvkD,KAAKu/K,KAEVh7H,GACF3tC,EAASu6K,YAAY5sI,GAInBvkD,KAAK4W,UAAY5W,KAAK4W,WAAaA,GACrC5W,KAAKkrD,iBAGPlrD,KAAK4W,SAAWA,EAChBA,EAAS2oK,KAAOh7H,EAChB3tC,EAASw6K,aAAepxL,KACxBA,KAAKsb,OAAM,EACb,EAIA4vC,eAAgB,WACd,IAAIt0C,EAAW5W,KAAK4W,SAEhBA,IACEA,EAAS2oK,MACX3oK,EAASy6K,iBAAiBz6K,EAAS2oK,MAGrC3oK,EAAS2oK,KAAO,KAChB3oK,EAASw6K,aAAe,KACxBpxL,KAAK4W,SAAW,KAChB5W,KAAKsb,OAAM,GAEf,EAOA61K,YAAa,SAAU5sI,GACrBvkD,KAAKu/K,KAAOh7H,EAEZ,IAAIvE,EAAYhgD,KAAKggD,UAErB,GAAIA,EACF,IAAK,IAAI/pC,EAAI,EAAGA,EAAI+pC,EAAU7rC,OAAQ8B,IACpCsuC,EAAGwF,UAAUunI,YAAYtxI,EAAU/pC,IAInCjW,KAAK4W,UACP5W,KAAK4W,SAASu6K,YAAY5sI,EAE9B,EAOA8sI,iBAAkB,SAAU9sI,GAC1BvkD,KAAKu/K,KAAO,KAEZ,IAAIv/H,EAAYhgD,KAAKggD,UAErB,GAAIA,EACF,IAAK,IAAI/pC,EAAI,EAAGA,EAAI+pC,EAAU7rC,OAAQ8B,IACpCsuC,EAAGwF,UAAUwnI,eAAevxI,EAAU/pC,IAItCjW,KAAK4W,UACP5W,KAAK4W,SAASy6K,iBAAiB9sI,EAEnC,GAEFziD,EAAO0Y,MAAMu2K,EAASD,GACtBhvL,EAAO0Y,MAAMu2K,EAAS90C,GACtBn6I,EAAO0Y,MAAMu2K,EAAS/9E,GACtB,IAAI7vG,EAAW4tL,EACf3tL,EAAOvB,QAAUsB,C,wBCtQjB,IAAIylK,EAAOnnK,EAAQ,OAEfk8B,EAAOl8B,EAAQ,OAEf+vL,EAAY/vL,EAAQ,OAEpBuxG,EAAWvxG,EAAQ,OASnBgwL,EAAS,SAEb,SAASC,EAAgBC,EAASvsH,EAAYtgE,GAC5C,MAAO,CACLpC,KAAMivL,EACN7sL,MAAOA,EAEPgR,OAAQsvD,EAAWtvD,OAEnBosG,UAAW98C,EAAW88C,UACtB0vE,cAAc,EACd9jJ,QAAShpC,EAAM+sL,IACf9jJ,QAASjpC,EAAMgtL,IACfhxE,aAAch8G,EAAMg8G,aACpBK,OAAQr8G,EAAMq8G,OACdC,OAAQt8G,EAAMs8G,OACdF,WAAYp8G,EAAMo8G,WAClBF,WAAYl8G,EAAMitL,QAClB1R,UAAWv7K,EAAMu7K,UACjB9+C,MAAOz8H,EAAMy8H,MAEjB,CAEA,SAASywD,IAAc,CAEvBA,EAAW9vL,UAAUoG,QAAU,WAAa,EAE5C,IAAI2pL,EAAe,CAAC,QAAS,WAAY,aAAc,WAAY,UAAW,YAAa,YAAa,eAWpGC,EAAU,SAAU3qH,EAAS9iB,EAAS0tI,EAAOC,GAC/Cp/E,EAASr7F,KAAK3X,MACdA,KAAKunE,QAAUA,EACfvnE,KAAKykD,QAAUA,EACfzkD,KAAKoyL,YAAcA,EACnBD,EAAQA,GAAS,IAAIH,EAKrBhyL,KAAKmyL,MAAQA,EAEbA,EAAMhyG,QAAUngF,KAOhBA,KAAKqyL,SAAW,CAAC,EAMjBryL,KAAKsyL,iBAMLtyL,KAAK2pI,OAML3pI,KAAK4pI,OACL4nD,EAAU75K,KAAK3X,MACf4oK,EAAKpmK,KAAKyvL,GAAc,SAAUzuL,GAChC2uL,EAAM7xL,IAAM6xL,EAAM7xL,GAAGkD,EAAMxD,KAAKwD,GAAOxD,KACzC,GAAGA,KACL,EAoMA,SAASuyL,EAAQC,EAAavmL,EAAGC,GAC/B,GAAIsmL,EAAYA,EAAY77D,UAAY,cAAgB,WAAW1qH,EAAGC,GAAI,CACxE,IACIo9E,EADA7/E,EAAK+oL,EAGT,MAAO/oL,EAAI,CAIT,GAAIA,EAAGmN,WAAanN,EAAGmN,SAASkmB,QAAQ7wB,EAAGC,GACzC,OAAO,EAGLzC,EAAGgN,SACL6yE,GAAW,GAGb7/E,EAAKA,EAAG+B,MACV,CAEA,OAAO89E,GAAWmoG,CACpB,CAEA,OAAO,CACT,CA1NAS,EAAQhwL,UAAY,CAClBC,YAAa+vL,EACb73E,UAAW,SAAUv1G,GACnB,IAAImH,EAAInH,EAAM+sL,IACV3lL,EAAIpH,EAAMgtL,IACVW,EAAczyL,KAAKqyL,SACnBK,EAAoBD,EAAY38K,OAKhC48K,IAAsBA,EAAkBnT,OAC1CkT,EAAczyL,KAAKkqI,UAAUuoD,EAAYxmL,EAAGwmL,EAAYvmL,GACxDwmL,EAAoBD,EAAY38K,QAGlC,IAAI68K,EAAU3yL,KAAKqyL,SAAWryL,KAAKkqI,UAAUj+H,EAAGC,GAC5C0mL,EAAgBD,EAAQ78K,OACxBq8K,EAAQnyL,KAAKmyL,MACjBA,EAAMU,WAAaV,EAAMU,UAAUD,EAAgBA,EAAc36K,OAAS,WAEtEy6K,GAAqBE,IAAkBF,GACzC1yL,KAAK8yL,kBAAkBL,EAAa,WAAY3tL,GAIlD9E,KAAK8yL,kBAAkBH,EAAS,YAAa7tL,GAEzC8tL,GAAiBA,IAAkBF,GACrC1yL,KAAK8yL,kBAAkBH,EAAS,YAAa7tL,EAEjD,EACAiuL,SAAU,SAAUjuL,GAClB9E,KAAK8yL,kBAAkB9yL,KAAKqyL,SAAU,WAAYvtL,GAMlD,IACIkuL,EADA7nH,EAAUrmE,EAAMmuL,WAAanuL,EAAMouL,cAGvC,GACE/nH,EAAUA,GAAWA,EAAQ37B,iBACtB27B,GAA+B,GAApBA,EAAQgoH,YAAmBH,EAAW7nH,IAAYnrE,KAAKoyL,eAE1EY,GAAYhzL,KAAKkW,QAAQ,YAAa,CACrCpR,MAAOA,GAEX,EAKAuhJ,OAAQ,SAAUvhJ,GAChB9E,KAAKqyL,SAAW,CAAC,CACnB,EAOAhrD,SAAU,SAAU1yB,EAAWy+E,GAC7B,IAAIjzG,EAAUngF,KAAK20G,GACnBx0B,GAAWA,EAAQxoE,KAAK3X,KAAMozL,EAChC,EAKA9qL,QAAS,WACPtI,KAAKmyL,MAAM7pL,UACXtI,KAAKunE,QAAUvnE,KAAKmyL,MAAQnyL,KAAKykD,QAAU,IAC7C,EAMAq0D,eAAgB,SAAU5rG,GACxB,IAAIilL,EAAQnyL,KAAKmyL,MACjBA,EAAMU,WAAaV,EAAMU,UAAU3lL,EACrC,EAUA4lL,kBAAmB,SAAU1tH,EAAYuvC,EAAW7vG,GAClDsgE,EAAaA,GAAc,CAAC,EAC5B,IAAI37D,EAAK27D,EAAWtvD,OAEpB,IAAIrM,IAAMA,EAAGgN,OAAb,CAIA,IAAI48K,EAAe,KAAO1+E,EACtB2+E,EAAc5B,EAAgB/8E,EAAWvvC,EAAYtgE,GAEzD,MAAO2E,EAKL,GAJAA,EAAG4pL,KAAkBC,EAAY1B,aAAenoL,EAAG4pL,GAAc17K,KAAKlO,EAAI6pL,IAC1E7pL,EAAGyM,QAAQy+F,EAAW2+E,GACtB7pL,EAAKA,EAAG+B,OAEJ8nL,EAAY1B,aACd,MAIC0B,EAAY1B,eAEf5xL,KAAKkW,QAAQy+F,EAAW2+E,GAGxBtzL,KAAKykD,SAAWzkD,KAAKykD,QAAQ8uI,gBAAe,SAAUC,GAClB,mBAAvBA,EAAMH,IACfG,EAAMH,GAAc17K,KAAK67K,EAAOF,GAG9BE,EAAMt9K,SACRs9K,EAAMt9K,QAAQy+F,EAAW2+E,EAE7B,IA5BF,CA8BF,EAUAppD,UAAW,SAAUj+H,EAAGC,EAAGunL,GAOzB,IANA,IAAI9wL,EAAO3C,KAAKunE,QAAQ8+C,iBACpBmnE,EAAM,CACRvhL,EAAGA,EACHC,EAAGA,GAGI+J,EAAItT,EAAKwR,OAAS,EAAG8B,GAAK,EAAGA,IAAK,CACzC,IAAIy9K,EAEJ,GAAI/wL,EAAKsT,KAAOw9K,IACZ9wL,EAAKsT,GAAGkW,SAAWunK,EAAmBnB,EAAQ5vL,EAAKsT,GAAIhK,EAAGC,OAC3DshL,EAAItrE,YAAcsrE,EAAItrE,UAAYv/G,EAAKsT,IAEpCy9K,IAAqBjC,GAAQ,CAC/BjE,EAAI13K,OAASnT,EAAKsT,GAClB,KACF,CAEJ,CAEA,OAAOu3K,CACT,GAGF5kB,EAAKpmK,KAAK,CAAC,QAAS,YAAa,UAAW,aAAc,WAAY,gBAAgB,SAAUgB,GAC9F0uL,EAAQhwL,UAAUsB,GAAQ,SAAUsB,GAElC,IAAI6tL,EAAU3yL,KAAKkqI,UAAUplI,EAAM+sL,IAAK/sL,EAAMgtL,KAC1Cc,EAAgBD,EAAQ78K,OAE5B,GAAa,cAATtS,EACFxD,KAAK2zL,QAAUf,EACf5yL,KAAK4zL,WAAa,CAAC9uL,EAAM+sL,IAAK/sL,EAAMgtL,KAEpC9xL,KAAK6zL,MAAQjB,OACR,GAAa,YAATpvL,EACTxD,KAAK6zL,MAAQjB,OACR,GAAa,UAATpvL,EAAkB,CAC3B,GAAIxD,KAAK2zL,UAAY3zL,KAAK6zL,QAItB7zL,KAAK4zL,YACNj2J,EAAK2M,KAAKtqC,KAAK4zL,WAAY,CAAC9uL,EAAM+sL,IAAK/sL,EAAMgtL,MAAQ,EACtD,OAGF9xL,KAAK4zL,WAAa,IACpB,CAEA5zL,KAAK8yL,kBAAkBH,EAASnvL,EAAMsB,EACxC,CACF,IA4BA8jK,EAAKpuJ,MAAM03K,EAASl/E,GACpB41D,EAAKpuJ,MAAM03K,EAASV,GACpB,IAAIruL,EAAW+uL,EACf9uL,EAAOvB,QAAUsB,C,wBChUjB,IAAIylK,EAAOnnK,EAAQ,OAEfiG,EAAUjG,EAAQ,OAElBg9J,EAAmB/2J,EAAQ+2J,iBAE3Bq1B,EAAQryL,EAAQ,OAEhBsyL,EAAUtyL,EAAQ,OAMtB,SAASuyL,IACP,OAAO,CACT,CAWA,SAASC,EAAU5tK,EAAIo+B,EAAS+7G,GAC9B,IAAI0zB,EAAStrB,EAAKllI,eACdn4B,EAAQk5C,EAAQxzC,WAChBjF,EAASy4C,EAAQvzC,YACjBijL,EAAcD,EAAO7oL,MAWzB,OATA8oL,EAAYztL,SAAW,WACvBytL,EAAY/oK,KAAO,EACnB+oK,EAAY9oK,IAAM,EAClB8oK,EAAY5oL,MAAQA,EAAQ,KAC5B4oL,EAAYnoL,OAASA,EAAS,KAC9BkoL,EAAO3oL,MAAQA,EAAQi1J,EACvB0zB,EAAOloL,OAASA,EAASw0J,EAEzB0zB,EAAOxtB,aAAa,iBAAkBrgJ,GAC/B6tK,CACT,CAWA,IAAIE,EAAQ,SAAU/tK,EAAIo+B,EAAS+7G,GACjC,IAAIpC,EACJoC,EAAMA,GAAO/B,EAEK,kBAAPp4I,EACT+3I,EAAM61B,EAAU5tK,EAAIo+B,EAAS+7G,GAEtBoI,EAAK5mJ,SAASqE,KACnB+3I,EAAM/3I,EACNA,EAAK+3I,EAAI/3I,IAGbrmB,KAAKqmB,GAAKA,EACVrmB,KAAKo+J,IAAMA,EACX,IAAIv2B,EAAWu2B,EAAI/yJ,MAEfw8H,IAEFu2B,EAAIi2B,cAAgBL,EAEpBnsD,EAAS,uBAAyB,OAClCA,EAAS,eAAiB,OAC1BA,EAAS,yBAA2B,OACpCA,EAAS,+BAAiC,gBAC1CA,EAAS,WAAa,EACtBA,EAAS,UAAY,EACrBA,EAAS,gBAAkB,GAG7B7nI,KAAKs0L,QAAU,KACft0L,KAAKu0L,QAAU,KACfv0L,KAAKykD,QAAUA,EACfzkD,KAAKw0L,OAAS,KAQdx0L,KAAKkiK,WAAa,EAOlBliK,KAAK+kD,YAAa,EAOlB/kD,KAAKglD,eAAiB,GAMtBhlD,KAAKwgK,IAAMA,CACb,EAEA4zB,EAAMlyL,UAAY,CAChBC,YAAaiyL,EACbnvB,QAAS,EACTx1H,SAAS,EACTglJ,YAAa,WACXz0L,KAAKk0B,IAAMl0B,KAAKo+J,IAAI75H,WAAW,MAC/BvkC,KAAKk0B,IAAIwgK,gBAAkB,CAAC,EAC5B10L,KAAKk0B,IAAIssI,IAAMxgK,KAAKwgK,GACtB,EACAm0B,iBAAkB,WAChB,IAAIn0B,EAAMxgK,KAAKwgK,IACfxgK,KAAKs0L,QAAUL,EAAU,QAAUj0L,KAAKqmB,GAAIrmB,KAAKykD,QAAS+7G,GAC1DxgK,KAAKu0L,QAAUv0L,KAAKs0L,QAAQ/vJ,WAAW,MACvCvkC,KAAKu0L,QAAQG,gBAAkB,CAAC,EAErB,GAAPl0B,GACFxgK,KAAKu0L,QAAQ9tL,MAAM+5J,EAAKA,EAE5B,EAMAna,OAAQ,SAAU96I,EAAOS,GACvB,IAAIw0J,EAAMxgK,KAAKwgK,IACXpC,EAAMp+J,KAAKo+J,IACXv2B,EAAWu2B,EAAI/yJ,MACfipL,EAAUt0L,KAAKs0L,QACnBzsD,EAASt8H,MAAQA,EAAQ,KACzBs8H,EAAS77H,OAASA,EAAS,KAC3BoyJ,EAAI7yJ,MAAQA,EAAQi1J,EACpBpC,EAAIpyJ,OAASA,EAASw0J,EAElB8zB,IACFA,EAAQ/oL,MAAQA,EAAQi1J,EACxB8zB,EAAQtoL,OAASA,EAASw0J,EAEf,GAAPA,GACFxgK,KAAKu0L,QAAQ9tL,MAAM+5J,EAAKA,GAG9B,EAMA57G,MAAO,SAAUgwI,GACf,IAqBMC,EArBFz2B,EAAMp+J,KAAKo+J,IACXlqI,EAAMl0B,KAAKk0B,IACX3oB,EAAQ6yJ,EAAI7yJ,MACZS,EAASoyJ,EAAIpyJ,OACbk2J,EAAaliK,KAAKkiK,WAClB4yB,EAAiB90L,KAAK+kD,aAAe6vI,EACrC5vI,EAAiBhlD,KAAKglD,eACtBw7G,EAAMxgK,KAAKwgK,KAEXs0B,IACG90L,KAAKs0L,SACRt0L,KAAK20L,mBAGP30L,KAAKu0L,QAAQQ,yBAA2B,OACxC/0L,KAAKu0L,QAAQ7vJ,UAAU05H,EAAK,EAAG,EAAG7yJ,EAAQi1J,EAAKx0J,EAASw0J,IAG1DtsI,EAAIoR,UAAU,EAAG,EAAG/5B,EAAOS,GAEvBk2J,KAGEA,EAAW/kH,YAEb03I,EAA8B3yB,EAAW8yB,kBAAoBlB,EAAMmB,YAAY/gK,EAAKguI,EAAY,CAC9Fj2J,EAAG,EACHC,EAAG,EACHX,MAAOA,EACPS,OAAQA,IAEVk2J,EAAW8yB,iBAAmBH,GAEvB3yB,EAAWv+I,QAChBkxK,EAA8Bd,EAAQ7xL,UAAUgzL,iBAAiBv9K,KAAKuqJ,EAAYhuI,IAGtFA,EAAIwvE,OACJxvE,EAAIihK,UAAYN,GAA+B3yB,EAC/ChuI,EAAIkhK,SAAS,EAAG,EAAG7pL,EAAOS,GAC1BkoB,EAAIurE,WAGN,GAAIq1F,EAAgB,CAClB,IAAIR,EAAUt0L,KAAKs0L,QACnBpgK,EAAIwvE,OACJxvE,EAAIuQ,YAAcugB,EAClB9wB,EAAIwQ,UAAU4vJ,EAAS,EAAG,EAAG/oL,EAAOS,GACpCkoB,EAAIurE,SACN,CACF,GAEF,IAAIt8F,EAAWixL,EACfhxL,EAAOvB,QAAUsB,C,iCC3NjB,IAAIuE,EAAUjG,EAAQ,OAElBg9J,EAAmB/2J,EAAQ+2J,iBAE3BmK,EAAOnnK,EAAQ,OAEfovJ,EAAMpvJ,EAAQ,OAEduiE,EAAeviE,EAAQ,OAEvBi7J,EAAUj7J,EAAQ,OAElB2yL,EAAQ3yL,EAAQ,OAEhB4zL,EAAwB5zL,EAAQ,OAEhCgiB,EAAQhiB,EAAQ,OAahB6zL,EAA+B,EAEnC,SAASC,EAAWp3K,GAClB,OAAOkvH,SAASlvH,EAAK,GACvB,CAEA,SAASq3K,EAAahC,GACpB,QAAKA,MAIDA,EAAMiC,aAIkB,oBAAjBjC,EAAMntC,QAAkD,oBAAlBmtC,EAAMtC,QAKzD,CAEA,SAASwE,EAAgBlC,GACvBA,EAAMmC,eACR,CAEA,SAASC,EAAiBpC,GACG,GAAvBA,EAAMmC,eACRnC,EAAM5uI,OAEV,CAEA,IAAIixI,EAAU,IAAI7xH,EAAa,EAAG,EAAG,EAAG,GACpC50C,EAAW,IAAI40C,EAAa,EAAG,EAAG,EAAG,GAEzC,SAAS8xH,EAAoBrsL,EAAI8B,EAAOS,GAStC,OARA6pL,EAAQn2J,KAAKj2B,EAAGkzB,mBAEZlzB,EAAGozB,WACLg5J,EAAQj5J,eAAenzB,EAAGozB,WAG5BzN,EAAS7jB,MAAQA,EACjB6jB,EAASpjB,OAASA,GACV6pL,EAAQtkH,UAAUniD,EAC5B,CAEA,SAAS2mK,EAAkBC,EAAWC,GACpC,GAAID,GAAaC,EAEf,OAAO,EAGT,IAAKD,IAAcC,GAAiBD,EAAU7hL,SAAW8hL,EAAc9hL,OACrE,OAAO,EAGT,IAAK,IAAI8B,EAAI,EAAGA,EAAI+/K,EAAU7hL,OAAQ8B,IACpC,GAAI+/K,EAAU//K,KAAOggL,EAAchgL,GACjC,OAAO,CAGb,CAEA,SAASigL,EAAOF,EAAW9hK,GACzB,IAAK,IAAIje,EAAI,EAAGA,EAAI+/K,EAAU7hL,OAAQ8B,IAAK,CACzC,IAAIW,EAAWo/K,EAAU//K,GACzBW,EAASu/K,aAAajiK,GACtBA,EAAIqR,YACJ3uB,EAASqd,UAAUC,EAAKtd,EAAS3M,OACjCiqB,EAAIkiK,OAEJx/K,EAASy/K,iBAAiBniK,EAC5B,CACF,CAEA,SAASoiK,EAAW/qL,EAAOS,GACzB,IAAIuqL,EAAUl2D,SAASC,cAAc,OAGrC,OADAi2D,EAAQlrL,MAAMk1H,QAAU,CAAC,oBAAqB,kBAAmB,SAAWh1H,EAAQ,KAAM,UAAYS,EAAS,KAAM,YAAa,WAAY,kBAAkBuL,KAAK,KAAO,IACrKg/K,CACT,CAUA,IAAIC,EAAU,SAAU98H,EAAM6N,EAASxlC,GACrC/hC,KAAK0C,KAAO,SAEZ,IAAI+zL,GAAgB/8H,EAAKg9H,UACU,WAAhCh9H,EAAKg9H,SAAS1yK,cACjBhkB,KAAK22L,MAAQ50J,EAAO6mI,EAAKrhK,OAAO,CAAC,EAAGw6B,GAAQ,CAAC,GAK7C/hC,KAAKwgK,IAAMz+H,EAAK08H,kBAAoBA,EAMpCz+J,KAAK42L,cAAgBH,EAMrBz2L,KAAK05D,KAAOA,EACZ,IAAIm9H,EAAYn9H,EAAKruD,MAEjBwrL,IACFA,EAAU,+BAAiC,cAC3CA,EAAU,uBAAyBA,EAAU,eAAiBA,EAAU,yBAA2B,OACnGn9H,EAAK8mE,UAAY,IAOnBxgI,KAAKunE,QAAUA,EAMf,IAAIuvH,EAAa92L,KAAK+2L,YAAc,GAMhCC,EAASh3L,KAAKg4D,QAAU,CAAC,EAQ7B,GAFAh4D,KAAKi3L,aAAe,CAAC,EAEhBR,EAKE,CACa,MAAd10J,EAAKx2B,QACPmuD,EAAKnuD,MAAQw2B,EAAKx2B,OAGD,MAAfw2B,EAAK/1B,SACP0tD,EAAK1tD,OAAS+1B,EAAK/1B,QAIrB,IAAIT,EAAQmuD,EAAKnuD,MACbS,EAAS0tD,EAAK1tD,OAClBhM,KAAKk3L,OAAS3rL,EACdvL,KAAKm3L,QAAUnrL,EAGf,IAAIorL,EAAY,IAAIhD,EAAM16H,EAAM15D,KAAM,GACtCo3L,EAAU3C,cAGVuC,EAAO,GAAKI,EACZN,EAAW91L,KAAK,GAChBhB,KAAKq3L,SAAW39H,CAClB,KA5BmB,CACjB15D,KAAKk3L,OAASl3L,KAAKs3L,SAAS,GAC5Bt3L,KAAKm3L,QAAUn3L,KAAKs3L,SAAS,GAC7B,IAAIf,EAAUv2L,KAAKq3L,SAAWf,EAAWt2L,KAAKk3L,OAAQl3L,KAAKm3L,SAC3Dz9H,EAAKonE,YAAYy1D,EACnB,CA0BAv2L,KAAKu3L,mBAAqB,GAM1Bv3L,KAAKw3L,YACLx3L,KAAKy3L,eAAiB,EACxB,EAEAjB,EAAQt0L,UAAY,CAClBC,YAAaq0L,EACb9xI,QAAS,WACP,MAAO,QACT,EAMAu9G,eAAgB,WACd,OAAOjiK,KAAK42L,aACd,EAKAc,gBAAiB,WACf,OAAO13L,KAAKq3L,QACd,EACAjvD,sBAAuB,WACrB,IAAIuvD,EAAe33L,KAAK03L,kBAExB,GAAIC,EACF,MAAO,CACLtvD,WAAYsvD,EAAatvD,YAAc,EACvCC,UAAWqvD,EAAarvD,WAAa,EAG3C,EAMA4oD,QAAS,SAAU0G,GACjB,IAAIj1L,EAAO3C,KAAKunE,QAAQ8+C,gBAAe,GACnCywE,EAAa92L,KAAK+2L,YAEtB/2L,KAAK63L,WAAWl1L,EAAMi1L,GAGtB,IAAK,IAAI3hL,EAAI,EAAGA,EAAI6gL,EAAW3iL,OAAQ8B,IAAK,CAC1C,IAAI1H,EAAIuoL,EAAW7gL,GACfu9K,EAAQxzL,KAAKg4D,QAAQzpD,IAEpBilL,EAAMiC,aAAejC,EAAMtC,SAC9BsC,EAAMtC,SAEV,CAQA,OANAlxL,KAAK83L,eAED93L,KAAKu3L,mBAAmBpjL,QAC1BnU,KAAK+3L,mBAGA/3L,IACT,EACAw/K,SAAU,SAAU/1K,EAAImD,GACtB,IAAInD,EAAGuuL,WAAP,CAIA,IAAIC,EAAW,IAAIxuL,EAAGtH,YAAY,CAChCkJ,MAAO5B,EAAG4B,MACVpB,MAAOR,EAAGQ,QAEZguL,EAASvqE,OAASjkH,EAClBA,EAAGuuL,WAAaC,EAChBA,EAAS/iL,SAAStI,GAElB5M,KAAKy3L,eAAez2L,KAAKi3L,EAVzB,CAWF,EACAlY,YAAa,SAAUt2K,GACrB,IAAIwuL,EAAWxuL,EAAGuuL,WACdE,EAAgBl4L,KAAKy3L,eACrBhzL,EAAMmkK,EAAKzsJ,QAAQ+7K,EAAeD,GAElCxzL,GAAO,GACTyzL,EAAcz4H,OAAOh7D,EAAK,GAG5BgF,EAAGuuL,WAAa,IAClB,EACAG,WAAY,SAAU1uL,GAGpB,IAFA,IAAIyuL,EAAgBl4L,KAAKy3L,eAEhBxhL,EAAI,EAAGA,EAAIiiL,EAAc/jL,OAAQ8B,IAAK,CAC7C,IAAIsxC,EAAO2wI,EAAcjiL,GAAGy3G,OAExBnmE,IACFA,EAAKywI,WAAa,KAEtB,CAEAE,EAAc/jL,OAAS,CACzB,EACA2jL,aAAc,WACZ,IAAII,EAAgBl4L,KAAKy3L,eACrBjpK,EAAM0pK,EAAc/jL,OACpBikL,EAAap4L,KAAKw3L,YAGtB,GAFAY,GAAcA,EAAWxzI,QAEpBp2B,EAAL,CAIAkuI,EAAQw7B,EAAel4L,KAAKunE,QAAQ8wH,qBAG/BD,IACHA,EAAap4L,KAAKw3L,YAAcx3L,KAAK2kD,SAAS,MAGhD,IAAI6uH,EAAQ,CAAC,EACb4kB,EAAWlkK,IAAIwvE,OAEf,IAAK,IAAIztF,EAAI,EAAGA,EAAIuY,GAAM,CACxB,IAAI/kB,EAAKyuL,EAAcjiL,GACnBqiL,EAAa7uL,EAAGikH,OAGd4qE,GAAcA,EAAW/Y,MAO/BtpK,IAGKqiL,EAAWzwH,YACdp+D,EAAGozB,UAAYy7J,EAAWz7J,UAC1BpzB,EAAG0zI,aAAem7C,EAAWn7C,aAC7B1zI,EAAG8uL,YAAcD,EAAWC,YAE5Bv4L,KAAKw4L,WAAW/uL,EAAI2uL,GAAY,EAAM5kB,MAdtC0kB,EAAcz4H,OAAOxpD,EAAG,GACxBqiL,EAAWN,WAAa,KACxBxpK,IAcJ,CAEA4pK,EAAWlkK,IAAIurE,SApCf,CAqCF,EACAs4F,iBAAkB,WAChB,IAAIniK,EAAO51B,KAEX,GAAK41B,EAAK6iK,oBAAV,CAMA,IAAIC,EAAQ9iK,EAAK+iK,mBAAqB,IAAI73C,KAC1ClrH,EAAKgjK,YACLvD,EAAsBxiK,EANtB,CAQA,SAASA,IAEH6lK,IAAU9iK,EAAK+iK,mBAAqB/iK,EAAK2xC,UAC3C3xC,EAAKijK,aAAajjK,EAAK2xC,QAAQ8+C,kBAE3BzwF,EAAK6iK,qBACP7iK,EAAKgjK,YACLvD,EAAsBxiK,IAEtB+C,EAAK+iK,mBAAqB,EAGhC,CACF,EACAG,kBAAmB,WACjB94L,KAAK24L,mBAAqB,EAC1B34L,KAAK44L,UAAY,EACjBhwB,EAAKpmK,KAAKxC,KAAKu3L,oBAAoB,SAAU/D,GAC3CA,EAAM/jJ,SAAW+jJ,EAAM5uI,OACzB,GACF,EACAizI,WAAY,SAAUl1L,EAAMi1L,GACV,MAAZA,IACFA,GAAW,GAGb53L,KAAK+4L,mBAAmBp2L,GAExB3C,KAAK84L,oBAEL94L,KAAKg5L,iBAAiBtD,GAEtB11L,KAAK64L,aAAal2L,EAAMi1L,GAExB53L,KAAKg5L,iBAAiBpD,EACxB,EACAiD,aAAc,SAAUl2L,EAAMi1L,GAC5B,IAAIqB,EACAC,EACAhlK,EAEAs/I,EAEA2lB,EAGAC,EAJAC,EAAsB,EAEtB9tL,EAAQvL,KAAKk3L,OACblrL,EAAShM,KAAKm3L,QAEd5rJ,EAAQvrC,KAAK44L,UAEjB,SAASU,EAAsB9F,GAC7B,IAAIhzB,EAAMtsI,EAAIssI,KAAO,EACrBtsI,EAAIwvE,OACJxvE,EAAIuQ,YAAc,EAClBvQ,EAAIha,WAAa,EAEjB++K,EAAaxpJ,SAAU,EACvBvb,EAAIiiK,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,GAChCjiK,EAAIwQ,UAAU8uJ,EAAMp1B,IAAK,EAAG,EAAG7yJ,EAAQi1J,EAAKx0J,EAASw0J,GACrDtsI,EAAIurE,SACN,CAEA,IAAK,IAAIxpF,EAAI,EAAGotB,EAAI1gC,EAAKwR,OAAQ8B,EAAIotB,EAAGptB,IAAK,CAC3C,IAAIxM,EAAK9G,EAAKsT,GACVsjL,EAAWv5L,KAAK42L,cAAgB,EAAIntL,EAAG6E,OACvCkrL,EAAU/vL,EAAGgwL,QAkCjB,GA/BID,EAAU,GAAKL,IACjBG,EAAsBH,GACtBA,EAA0B,MAIxBD,IAAkBK,IAChBrlK,GACFA,EAAIurE,UAIN+zE,EAAQ,CAAC,EAET0lB,EAAgBK,EAChBN,EAAej5L,KAAK2kD,SAASu0I,GAExBD,EAAaxD,aAChB5kC,EAAI,UAAYqoC,EAAgB,kCAAoCD,EAAa5yK,IAGnF6N,EAAM+kK,EAAa/kK,IACnBA,EAAIwvE,OAEJu1F,EAAatD,cAAgB,GAEzBsD,EAAaxpJ,SAAWmoJ,IAC1BqB,EAAar0I,SAIXq0I,EAAaxpJ,SAAWmoJ,EAA9B,CAIA,GAAI4B,GAAW,EAAG,CAEhB,IAAKL,EAAyB,CAK5B,GAJAA,EAA0Bn5L,KAAKu3L,mBAAmB/wL,KAAKJ,IAAIizL,IAAuB/D,EAA+B,IACjH6D,EAAwBjlK,IAAIwvE,OAC5By1F,EAAwBO,YAAc,CAAC,EAEnCP,GAA2BA,EAAwBQ,WAAaR,EAAwBS,cAAe,CAIzG3jL,EAAIkjL,EAAwBU,iBAAmB,EAE/C,QACF,CAEAT,EAAgBD,EAAwBQ,WAEnCR,EAAwB1pJ,UAE3BlE,EAAQ6tJ,GAGVD,EAAwBQ,WAAapuJ,EAAQ,CAC/C,CAEIiuJ,IAAYjuJ,GACdvrC,KAAKw4L,WAAW/uL,EAAI0vL,GAAyB,EAAMA,EAAwBO,YAE/E,MACE15L,KAAKw4L,WAAW/uL,EAAIwvL,EAAcrB,EAAUpkB,GAG9C/pK,EAAGgmC,SAAU,CAnCb,CAoCF,CAEI0pJ,GACFG,EAAsBH,GAIxBjlK,GAAOA,EAAIurE,UAKXz/F,KAAKy4L,qBAAsB,EAC3B7vB,EAAKpmK,KAAKxC,KAAKu3L,oBAAoB,SAAU/D,GACvCA,EAAMoG,eAAiBpG,EAAMmG,aAC/B35L,KAAKy4L,qBAAsB,EAE/B,GAAGz4L,KACL,EACAw4L,WAAY,SAAU/uL,EAAIwvL,EAAca,EAAYtmB,GAClD,IAAIt/I,EAAM+kK,EAAa/kK,IACnBglC,EAAIzvD,EAAGozB,UAEX,IAAKo8J,EAAaxpJ,SAAWqqJ,KAC5BrwL,EAAGo+D,WACoB,IAArBp+D,EAAG4B,MAAMoB,WAGPysD,GAAMA,EAAE,IAAOA,EAAE,OACjBzvD,EAAGwL,UAAW6gL,EAAoBrsL,EAAIzJ,KAAKk3L,OAAQl3L,KAAKm3L,UAAW,CACtE,IAAInB,EAAYvsL,EAAG8uL,aAEf/kB,EAAMumB,gBAAkBd,GAAgBlD,EAAkBC,EAAWxiB,EAAMwmB,oBAEzExmB,EAAMwmB,kBACRxmB,EAAMumB,cAAc7lK,IAAIurE,UACxB+zE,EAAMumB,cAAgBvmB,EAAMwmB,gBAAkB,KAE9CxmB,EAAMymB,OAAS,MAIbjE,IACF9hK,EAAIwvE,OACJwyF,EAAOF,EAAW9hK,GAClBs/I,EAAMumB,cAAgBd,EACtBzlB,EAAMwmB,gBAAkBhE,IAI5BvsL,EAAGohL,aAAephL,EAAGohL,YAAY32J,GACjCzqB,EAAGy6B,MAAMhQ,EAAKs/I,EAAMymB,QAAU,MAC9BzmB,EAAMymB,OAASxwL,EACfA,EAAGywL,YAAczwL,EAAGywL,WAAWhmK,EACjC,CACF,EAOAywB,SAAU,SAAUr2C,GAClB,GAAItO,KAAK42L,cACP,OAAO52L,KAAKg4D,QAAQ,GAGtB,IAAIw7H,EAAQxzL,KAAKg4D,QAAQ1pD,GAiBzB,OAfKklL,IAEHA,EAAQ,IAAIY,EAAM,MAAQ9lL,EAAQtO,KAAMA,KAAKwgK,KAC7CgzB,EAAMiC,aAAc,EAEhBz1L,KAAKi3L,aAAa3oL,IACpBs6J,EAAKz2E,MAAMqhG,EAAOxzL,KAAKi3L,aAAa3oL,IAAS,GAG/CtO,KAAKm6L,YAAY7rL,EAAQklL,GAGzBA,EAAMiB,eAGDjB,CACT,EACA2G,YAAa,SAAU7rL,EAAQklL,GAC7B,IAAI4G,EAAYp6L,KAAKg4D,QACjB8+H,EAAa92L,KAAK+2L,YAClBvoK,EAAMsoK,EAAW3iL,OACjBkmL,EAAY,KACZpkL,GAAK,EACLsgL,EAAUv2L,KAAKq3L,SAEnB,GAAI+C,EAAU9rL,GACZuiJ,EAAI,UAAYviJ,EAAS,+BAK3B,GAAKknL,EAAahC,GAAlB,CAKA,GAAIhlK,EAAM,GAAKlgB,EAASwoL,EAAW,GAAI,CACrC,IAAK7gL,EAAI,EAAGA,EAAIuY,EAAM,EAAGvY,IACvB,GAAI6gL,EAAW7gL,GAAK3H,GAAUwoL,EAAW7gL,EAAI,GAAK3H,EAChD,MAIJ+rL,EAAYD,EAAUtD,EAAW7gL,GACnC,CAOA,GALA6gL,EAAWr3H,OAAOxpD,EAAI,EAAG,EAAG3H,GAC5B8rL,EAAU9rL,GAAUklL,GAIfA,EAAM8G,QACT,GAAID,EAAW,CACb,IAAIE,EAAUF,EAAUj8B,IAEpBm8B,EAAQC,YACVjE,EAAQkE,aAAajH,EAAMp1B,IAAKm8B,EAAQC,aAExCjE,EAAQz1D,YAAY0yD,EAAMp1B,IAE9B,MACMm4B,EAAQmE,WACVnE,EAAQkE,aAAajH,EAAMp1B,IAAKm4B,EAAQmE,YAExCnE,EAAQz1D,YAAY0yD,EAAMp1B,IA9BhC,MAFEvN,EAAI,mBAAqBviJ,EAAS,gBAoCtC,EAEAqsL,UAAW,SAAUnjL,EAAIC,GACvB,IACIlJ,EACA0H,EAFA6gL,EAAa92L,KAAK+2L,YAItB,IAAK9gL,EAAI,EAAGA,EAAI6gL,EAAW3iL,OAAQ8B,IACjC1H,EAAIuoL,EAAW7gL,GACfuB,EAAGG,KAAKF,EAASzX,KAAKg4D,QAAQzpD,GAAIA,EAEtC,EAEAyqL,iBAAkB,SAAUxhL,EAAIC,GAC9B,IACI+7K,EACAjlL,EACA0H,EAHA6gL,EAAa92L,KAAK+2L,YAKtB,IAAK9gL,EAAI,EAAGA,EAAI6gL,EAAW3iL,OAAQ8B,IACjC1H,EAAIuoL,EAAW7gL,GACfu9K,EAAQxzL,KAAKg4D,QAAQzpD,GAEjBilL,EAAMiC,aACRj+K,EAAGG,KAAKF,EAAS+7K,EAAOjlL,EAG9B,EAEAglL,eAAgB,SAAU/7K,EAAIC,GAC5B,IACI+7K,EACAjlL,EACA0H,EAHA6gL,EAAa92L,KAAK+2L,YAKtB,IAAK9gL,EAAI,EAAGA,EAAI6gL,EAAW3iL,OAAQ8B,IACjC1H,EAAIuoL,EAAW7gL,GACfu9K,EAAQxzL,KAAKg4D,QAAQzpD,GAEhBilL,EAAMiC,aACTj+K,EAAGG,KAAKF,EAAS+7K,EAAOjlL,EAG9B,EAMAqsL,UAAW,WACT,OAAO56L,KAAKg4D,OACd,EACA+gI,mBAAoB,SAAUp2L,GAC5B,IAAIq0L,EAASh3L,KAAKg4D,QACd6iI,EAAoB76L,KAAKu3L,mBACzBuD,EAAoB,CAAC,EACrBC,EAA+B,CAAC,EACpC/6L,KAAKg5L,kBAAiB,SAAUxF,EAAOjlL,GACrCusL,EAAkBvsL,GAAKilL,EAAMvuB,QAC7BuuB,EAAMvuB,QAAU,EAChBuuB,EAAM/jJ,SAAU,CAClB,IACAm5H,EAAKpmK,KAAKq4L,GAAmB,SAAUrH,EAAO/uL,GAC5Cs2L,EAA6Bt2L,GAAO+uL,EAAMvuB,QAC1CuuB,EAAMvuB,QAAU,EAChBuuB,EAAM/jJ,SAAU,CAClB,IAMA,IALA,IACI0pJ,EACA6B,EAFAC,EAAwB,EAGxBC,EAAa,EAERjlL,EAAI,EAAGotB,EAAI1gC,EAAKwR,OAAQ8B,EAAIotB,EAAGptB,IAAK,CAC3C,IAAIxM,EAAK9G,EAAKsT,GACV3H,EAAStO,KAAK42L,cAAgB,EAAIntL,EAAG6E,OACrCklL,EAAQwD,EAAO1oL,GACf6sL,EAAa1xL,EAAGgG,YAQpB,GANI+jL,IACFA,EAAMvuB,UACNuuB,EAAM/jJ,QAAU+jJ,EAAM/jJ,SAAWhmC,EAAGgmC,SAIlC0rJ,GAAc,EAAG,CAEfH,IAAuBG,IACzBH,EAAqBG,EACrBD,KAGF,IAAI1B,EAAU/vL,EAAGgwL,QAAUyB,EAAa,EAExC,IAAK/B,EAAyB,CAC5B,IAAI10L,EAAM+B,KAAKJ,IAAI60L,EAAuB3F,EAA+B,GACzE6D,EAA0B0B,EAAkBp2L,GAEvC00L,IACHA,EAA0B0B,EAAkBp2L,GAAO,IAAI2vL,EAAM,cAAep0L,KAAMA,KAAKwgK,KACvF24B,EAAwB1E,eAG1B0E,EAAwBS,cAAgB,CAC1C,CAEAT,EAAwB1pJ,QAAU0pJ,EAAwB1pJ,SAAWhmC,EAAGgmC,QACxE0pJ,EAAwBl0B,UACxBk0B,EAAwBS,cAAgBpzL,KAAKF,IAAI6yL,EAAwBS,cAAeJ,GAEpFL,EAAwBS,eAAiBT,EAAwBQ,aAEnEnG,EAAM/jJ,SAAU,EAEpB,MACEhmC,EAAGgwL,SAAW,EAEVN,IACFA,EAAwBU,iBAAmB5jL,EAC3CglL,IACA9B,EAA0B,KAGhC,CAEIA,IACF8B,IACA9B,EAAwBU,iBAAmB5jL,GAI7CjW,KAAKg5L,kBAAiB,SAAUxF,EAAOjlL,GACjCusL,EAAkBvsL,KAAOilL,EAAMvuB,UACjCuuB,EAAM/jJ,SAAU,EAEpB,IACAorJ,EAAkB1mL,OAAS3N,KAAKJ,IAAI60L,EAAuB3F,GAC3D1sB,EAAKpmK,KAAKq4L,GAAmB,SAAUrH,EAAO/uL,GACxCs2L,EAA6Bt2L,KAAS+uL,EAAMvuB,UAC9Cx7J,EAAGgmC,SAAU,GAGX+jJ,EAAM/jJ,UACR+jJ,EAAMmG,WAAa,EAEvB,GACF,EAKA/0I,MAAO,WAEL,OADA5kD,KAAKg5L,iBAAiBh5L,KAAKo7L,aACpBp7L,IACT,EACAo7L,YAAa,SAAU5H,GACrBA,EAAM5uI,OACR,EAYAE,YAAa,SAAUx2C,EAAQkmL,GAC7B,GAAIA,EAAQ,CACV,IAAI6G,EAAcr7L,KAAKi3L,aAElBoE,EAAY/sL,GAGfs6J,EAAKz2E,MAAMkpG,EAAY/sL,GAASkmL,GAAQ,GAFxC6G,EAAY/sL,GAAUkmL,EAKxB,IAAIhB,EAAQxzL,KAAKg4D,QAAQ1pD,GAErBklL,GACF5qB,EAAKz2E,MAAMqhG,EAAO6H,EAAY/sL,IAAS,EAE3C,CACF,EAMAgtL,SAAU,SAAUhtL,GAClB,IAAI0oL,EAASh3L,KAAKg4D,QACd8+H,EAAa92L,KAAK+2L,YAClBvD,EAAQwD,EAAO1oL,GAEdklL,IAILA,EAAMp1B,IAAI5uH,WAAW4wF,YAAYozD,EAAMp1B,YAChC44B,EAAO1oL,GACdwoL,EAAWr3H,OAAOmpG,EAAKzsJ,QAAQ26K,EAAYxoL,GAAS,GACtD,EAKA+3I,OAAQ,SAAU96I,EAAOS,GACvB,IAAIuqL,EAAUv2L,KAAKq3L,SAEnBd,EAAQlrL,MAAMy8H,QAAU,OAExB,IAAI/lG,EAAO/hC,KAAK22L,MAOhB,GANS,MAATprL,IAAkBw2B,EAAKx2B,MAAQA,GACrB,MAAVS,IAAmB+1B,EAAK/1B,OAASA,GACjCT,EAAQvL,KAAKs3L,SAAS,GACtBtrL,EAAShM,KAAKs3L,SAAS,GACvBf,EAAQlrL,MAAMy8H,QAAU,GAEpB9nI,KAAKk3L,QAAU3rL,GAASS,GAAUhM,KAAKm3L,QAAS,CAIlD,IAAK,IAAI9wK,KAHTkwK,EAAQlrL,MAAME,MAAQA,EAAQ,KAC9BgrL,EAAQlrL,MAAMW,OAASA,EAAS,KAEjBhM,KAAKg4D,QACdh4D,KAAKg4D,QAAQp2D,eAAeykB,IAC9BrmB,KAAKg4D,QAAQ3xC,GAAIggI,OAAO96I,EAAOS,GAInC48J,EAAKpmK,KAAKxC,KAAKu3L,oBAAoB,SAAU/D,GAC3CA,EAAMntC,OAAO96I,EAAOS,EACtB,IACAhM,KAAKkxL,SAAQ,EACf,CAIA,OAFAlxL,KAAKk3L,OAAS3rL,EACdvL,KAAKm3L,QAAUnrL,EACRhM,IACT,EAMAu7L,WAAY,SAAUjtL,GACpB,IAAIklL,EAAQxzL,KAAKg4D,QAAQ1pD,GAErBklL,GACFA,EAAM5uI,OAEV,EAKAt8C,QAAS,WACPtI,KAAK05D,KAAK8mE,UAAY,GACtBxgI,KAAK05D,KAAO15D,KAAKunE,QAAUvnE,KAAKq3L,SAAWr3L,KAAKg4D,QAAU,IAC5D,EAQAyoG,kBAAmB,SAAU1+H,GAG3B,GAFAA,EAAOA,GAAQ,CAAC,EAEZ/hC,KAAK42L,cACP,OAAO52L,KAAKg4D,QAAQ,GAAGomG,IAGzB,IAAIo9B,EAAa,IAAIpH,EAAM,QAASp0L,KAAM+hC,EAAKwiG,YAAcvkI,KAAKwgK,KAClEg7B,EAAW/G,cACX+G,EAAWt5B,WAAangI,EAAKjR,gBAC7B0qK,EAAW52I,QACX,IAEIt2C,EAFAmtL,EAAcz7L,KAAKunE,QAAQ8+C,gBAAe,GAC1CmtD,EAAQ,CAAC,EAET59I,EAAO51B,KAEX,SAAS07L,EAAsBC,EAASC,GACtC,IAMIC,EANA/E,EAAalhK,EAAKmhK,YAEP,MAAX4E,IACFA,GAAWp1L,KAKb,IAAK,IAAI0P,EAAI,EAAGA,EAAI6gL,EAAW3iL,OAAQ8B,IAAK,CAC1C,IAAI1H,EAAIuoL,EAAW7gL,GACfu9K,EAAQ59J,EAAKoiC,QAAQzpD,GAEzB,IAAKilL,EAAMiC,aAAelnL,EAAIotL,GAAWptL,EAAIqtL,EAAQ,CACnDC,EAAoBrI,EACpB,KACF,CACF,CAEIqI,GAAqBA,EAAkBC,iBACzCN,EAAWtnK,IAAIwvE,OACfm4F,EAAkBC,eAAeN,EAAWtnK,KAC5CsnK,EAAWtnK,IAAIurE,UAEnB,CAEA,IAAK,IAAIxpF,EAAI,EAAGA,EAAIwlL,EAAYtnL,OAAQ8B,IAAK,CAC3C,IAAIxM,EAAKgyL,EAAYxlL,GAEjBxM,EAAG6E,SAAWA,IAChBotL,EAAsBptL,EAAQ7E,EAAG6E,QACjCA,EAAS7E,EAAG6E,QAGdtO,KAAKw4L,WAAW/uL,EAAI+xL,GAAY,EAAMhoB,EACxC,CAGA,OADAkoB,EAAsBptL,EAAQ/H,KACvBi1L,EAAWp9B,GACpB,EAKAntJ,SAAU,WACR,OAAOjR,KAAKk3L,MACd,EAKAhmL,UAAW,WACT,OAAOlR,KAAKm3L,OACd,EACAG,SAAU,SAAUyE,GAClB,IAAIh6J,EAAO/hC,KAAK22L,MACZtmL,EAAK,CAAC,QAAS,UAAU0rL,GACzBC,EAAM,CAAC,cAAe,gBAAgBD,GACtCE,EAAM,CAAC,cAAe,cAAcF,GACpCG,EAAM,CAAC,eAAgB,iBAAiBH,GAE5C,GAAgB,MAAZh6J,EAAK1xB,IAA4B,SAAb0xB,EAAK1xB,GAC3B,OAAO2+G,WAAWjtF,EAAK1xB,IAGzB,IAAIqpD,EAAO15D,KAAK05D,KAEZ+tE,EAAMpH,SAASsH,YAAYC,iBAAiBluE,GAChD,OAAQA,EAAKsiI,IAAQzG,EAAW9tD,EAAIp3H,KAAQklL,EAAW77H,EAAKruD,MAAMgF,MAASklL,EAAW9tD,EAAIw0D,KAAS,IAAM1G,EAAW9tD,EAAIy0D,KAAS,GAAK,CACxI,EACAC,YAAa,SAAUnnL,EAAMwrJ,GAC3BA,EAAMA,GAAOxgK,KAAKwgK,IAClB,IAAI/8H,EAAS48F,SAASC,cAAc,UAChCpsG,EAAMuP,EAAOc,WAAW,MACxB75B,EAAOsK,EAAK2nB,kBACZtxB,EAAQ2J,EAAK3J,MACb+wL,EAAiB/wL,EAAM6O,WACvBC,EAAgB9O,EAAM8O,cACtBC,EAAgB/O,EAAM+O,cACtB5M,EAAYnC,EAAMgxL,YAAchxL,EAAMmC,UAAY,EAClD8uL,EAAa91L,KAAKF,IAAIkH,EAAY,GAAI2M,EAAgBiiL,GACtDG,EAAc/1L,KAAKF,IAAIkH,EAAY,EAAG2M,EAAgBiiL,GACtDI,EAAYh2L,KAAKF,IAAIkH,EAAY,GAAI4M,EAAgBgiL,GACrDK,EAAej2L,KAAKF,IAAIkH,EAAY,EAAG4M,EAAgBgiL,GACvD7wL,EAAQb,EAAKa,MAAQ+wL,EAAaC,EAClCvwL,EAAStB,EAAKsB,OAASwwL,EAAYC,EACvCh5J,EAAOl4B,MAAQA,EAAQi1J,EACvB/8H,EAAOz3B,OAASA,EAASw0J,EACzBtsI,EAAIztB,MAAM+5J,EAAKA,GACftsI,EAAIoR,UAAU,EAAG,EAAG/5B,EAAOS,GAC3BkoB,EAAIssI,IAAMA,EACV,IAAIk8B,EAAgB,CAClBh2L,SAAUsO,EAAKtO,SACfuL,SAAU+C,EAAK/C,SACfxL,MAAOuO,EAAKvO,OAEduO,EAAKtO,SAAW,CAAC41L,EAAa5xL,EAAKuB,EAAGuwL,EAAY9xL,EAAKwB,GACvD8I,EAAK/C,SAAW,EAChB+C,EAAKvO,MAAQ,CAAC,EAAG,GACjBuO,EAAKjO,kBAEDiO,GACFA,EAAKkvB,MAAMhQ,GAGb,IAAIyoK,EAAal5K,EACbm5K,EAAW,IAAID,EAAW,CAC5BtxL,MAAO,CACLY,EAAG,EACHC,EAAG,EACHyX,MAAO8f,KAgBX,OAZ8B,MAA1Bi5J,EAAch2L,WAChBk2L,EAASl2L,SAAWsO,EAAKtO,SAAWg2L,EAAch2L,UAGtB,MAA1Bg2L,EAAczqL,WAChB2qL,EAAS3qL,SAAW+C,EAAK/C,SAAWyqL,EAAczqL,UAGzB,MAAvByqL,EAAcj2L,QAChBm2L,EAASn2L,MAAQuO,EAAKvO,MAAQi2L,EAAcj2L,OAGvCm2L,CACT,GAEF,IAAIz5L,EAAWqzL,EACfpzL,EAAOvB,QAAUsB,C,iCCliCjB,IAAIylK,EAAOnnK,EAAQ,OAEfy+E,EAAMz+E,EAAQ,OAEd2V,EAAQ3V,EAAQ,OAEhBi7J,EAAUj7J,EAAQ,OAWtB,SAASo7L,EAAiBpuK,EAAGC,GAC3B,OAAID,EAAEngB,SAAWogB,EAAEpgB,OACbmgB,EAAElgB,IAAMmgB,EAAEngB,EAOLkgB,EAAErc,GAAKsc,EAAEtc,GAGXqc,EAAElgB,EAAImgB,EAAEngB,EAGVkgB,EAAEngB,OAASogB,EAAEpgB,MACtB,CAQA,IAAIwuL,EAAU,WAEZ98L,KAAK+8L,OAAS,GACd/8L,KAAKg9L,aAAe,GACpBh9L,KAAKi9L,gBAAkB,CACzB,EAEAH,EAAQ56L,UAAY,CAClBC,YAAa26L,EAMbljK,SAAU,SAAUpiB,EAAIC,GACtB,IAAK,IAAIxB,EAAI,EAAGA,EAAIjW,KAAK+8L,OAAO5oL,OAAQ8B,IACtCjW,KAAK+8L,OAAO9mL,GAAG2jB,SAASpiB,EAAIC,EAEhC,EAUA4uG,eAAgB,SAAUxjH,EAAQq6L,GAOhC,OANAA,EAAgBA,IAAiB,EAE7Br6L,GACF7C,KAAKm9L,kBAAkBD,GAGlBl9L,KAAKg9L,YACd,EAQAG,kBAAmB,SAAUD,GAC3Bl9L,KAAKi9L,gBAAkB,EAIvB,IAHA,IAAIG,EAAQp9L,KAAK+8L,OACbtB,EAAcz7L,KAAKg9L,aAEd/mL,EAAI,EAAGuY,EAAM4uK,EAAMjpL,OAAQ8B,EAAIuY,EAAKvY,IAC3CjW,KAAKq9L,yBAAyBD,EAAMnnL,GAAI,KAAMinL,GAGhDzB,EAAYtnL,OAASnU,KAAKi9L,gBAK1B/8G,EAAIghB,iBAAmBw7D,EAAQ++B,EAAaoB,EAC9C,EACAQ,yBAA0B,SAAU5zL,EAAIusL,EAAWkH,GACjD,IAAIzzL,EAAG0iB,QAAW+wK,EAAlB,CAIAzzL,EAAGwiC,eAECxiC,EAAGgmC,SACLhmC,EAAG5G,SAGL4G,EAAGunL,cACH,IAAIsM,EAAkB7zL,EAAGmN,SAEzB,GAAI0mL,EAAiB,CAGjBtH,EADEA,EACUA,EAAUhzL,QAEV,GAGd,IAAIu6L,EAAkBD,EAClBE,EAAiB/zL,EAErB,MAAO8zL,EAELA,EAAgB/xL,OAASgyL,EACzBD,EAAgBx2L,kBAChBivL,EAAUh1L,KAAKu8L,GACfC,EAAiBD,EACjBA,EAAkBA,EAAgB3mL,QAEtC,CAEA,GAAInN,EAAGy7J,QAAS,CAGd,IAFA,IAAIxtJ,EAAWjO,EAAGg0L,UAETxnL,EAAI,EAAGA,EAAIyB,EAASvD,OAAQ8B,IAAK,CACxC,IAAIuS,EAAQ9Q,EAASzB,GAGjBxM,EAAGgmC,UACLjnB,EAAMinB,SAAU,GAGlBzvC,KAAKq9L,yBAAyB70K,EAAOwtK,EAAWkH,EAClD,CAGAzzL,EAAGgmC,SAAU,CACf,MACEhmC,EAAG8uL,YAAcvC,EACjBh2L,KAAKg9L,aAAah9L,KAAKi9L,mBAAqBxzL,CAlD9C,CAoDF,EAMAi0L,QAAS,SAAUj0L,GACbA,EAAGk0L,YAAc39L,OAIjByJ,aAAc2N,GAChB3N,EAAGm0L,qBAAqB59L,MAG1BA,KAAK69L,aAAap0L,GAElBzJ,KAAK+8L,OAAO/7L,KAAKyI,GACnB,EAMAq0L,QAAS,SAAUr0L,GACjB,GAAU,MAANA,EAAY,CAEd,IAAK,IAAIwM,EAAI,EAAGA,EAAIjW,KAAK+8L,OAAO5oL,OAAQ8B,IAAK,CAC3C,IAAIyjD,EAAO15D,KAAK+8L,OAAO9mL,GAEnByjD,aAAgBtiD,GAClBsiD,EAAKqkI,uBAAuB/9L,KAEhC,CAKA,OAHAA,KAAK+8L,OAAS,GACd/8L,KAAKg9L,aAAe,QACpBh9L,KAAKi9L,gBAAkB,EAEzB,CAEA,GAAIxzL,aAAc41B,MACX,CAAIppB,EAAI,EAAb,IAAK,IAAWotB,EAAI55B,EAAG0K,OAAQ8B,EAAIotB,EAAGptB,IACpCjW,KAAK89L,QAAQr0L,EAAGwM,GADK9B,KADzB,CAQA,IAAI1P,EAAMmkK,EAAKzsJ,QAAQnc,KAAK+8L,OAAQtzL,GAEhChF,GAAO,IACTzE,KAAKg+L,eAAev0L,GAEpBzJ,KAAK+8L,OAAOt9H,OAAOh7D,EAAK,GAEpBgF,aAAc2N,GAChB3N,EAAGs0L,uBAAuB/9L,MAV9B,CAaF,EACA69L,aAAc,SAAUp0L,GAGtB,OAFAA,EAAGk0L,UAAY39L,KACfyJ,EAAG6R,OAAM,GACFtb,IACT,EACAg+L,eAAgB,SAAUv0L,GAKxB,OAJIA,IACFA,EAAGk0L,UAAY,MAGV39L,IACT,EAKAsI,QAAS,WACPtI,KAAKi+L,YAAcj+L,KAAK+8L,OAAS,IACnC,EACA1E,oBAAqBwE,GAEvB,IAAI15L,EAAW25L,EACf15L,EAAOvB,QAAUsB,C,iCC/OjB,IAAIylK,EAAOnnK,EAAQ,OAEfy8L,EAASz8L,EAAQ,OAEjB08L,EAAaD,EAAOC,WAEpB9I,EAAwB5zL,EAAQ,OAEhC28L,EAAW38L,EAAQ,OAwCnB48L,EAAY,SAAUhwH,GACxBA,EAAUA,GAAW,CAAC,EACtBruE,KAAKs+L,MAAQjwH,EAAQiwH,OAAS,CAAC,EAE/Bt+L,KAAKu+L,QAAUlwH,EAAQkwH,SAAW,WAAa,EAG/Cv+L,KAAKw+L,OAAS,GACdx+L,KAAKy+L,UAAW,EAChBz+L,KAAK0+L,MACL1+L,KAAK2+L,YACL3+L,KAAK4+L,YACL5+L,KAAK6+L,SAAU,EACfV,EAAWxmL,KAAK3X,KAClB,EAEAq+L,EAAUn8L,UAAY,CACpBC,YAAak8L,EAMbS,QAAS,SAAU1I,GACjBp2L,KAAKw+L,OAAOx9L,KAAKo1L,EACnB,EAMA9E,YAAa,SAAUtnJ,GACrBA,EAAS+f,UAAY/pD,KAGrB,IAFA,IAAI++L,EAAQ/0J,EAASg1J,WAEZ/oL,EAAI,EAAGA,EAAI8oL,EAAM5qL,OAAQ8B,IAChCjW,KAAK8+L,QAAQC,EAAM9oL,GAEvB,EAMAgpL,WAAY,SAAU7I,GACpB,IAAI3xL,EAAMmkK,EAAKzsJ,QAAQnc,KAAKw+L,OAAQpI,GAEhC3xL,GAAO,GACTzE,KAAKw+L,OAAO/+H,OAAOh7D,EAAK,EAE5B,EAMA8sL,eAAgB,SAAUvnJ,GAGxB,IAFA,IAAI+0J,EAAQ/0J,EAASg1J,WAEZ/oL,EAAI,EAAGA,EAAI8oL,EAAM5qL,OAAQ8B,IAChCjW,KAAKi/L,WAAWF,EAAM9oL,IAGxB+zB,EAAS+f,UAAY,IACvB,EACAopG,QAAS,WASP,IARA,IAAIv5D,GAAO,IAAIknD,MAAOD,UAAY7gJ,KAAK2+L,YAEnC/wI,EAAQgsC,EAAO55F,KAAK0+L,MACpBK,EAAQ/+L,KAAKw+L,OACbhwK,EAAMuwK,EAAM5qL,OACZ+qL,EAAiB,GACjBC,EAAgB,GAEXlpL,EAAI,EAAGA,EAAIuY,EAAKvY,IAAK,CAC5B,IAAImgL,EAAO2I,EAAM9oL,GACbymB,EAAI05J,EAAKvjK,KAAK+mE,EAAMhsC,GAGpBlxB,IACFwiK,EAAel+L,KAAK07B,GACpByiK,EAAcn+L,KAAKo1L,GAEvB,CAGA,IAASngL,EAAI,EAAGA,EAAIuY,GACduwK,EAAM9oL,GAAGmpL,cACXL,EAAM9oL,GAAK8oL,EAAMvwK,EAAM,GACvBuwK,EAAMlmJ,MACNrqB,KAEAvY,IAIJuY,EAAM0wK,EAAe/qL,OAErB,IAAS8B,EAAI,EAAGA,EAAIuY,EAAKvY,IACvBkpL,EAAclpL,GAAGopL,KAAKH,EAAejpL,IAGvCjW,KAAK0+L,MAAQ9kG,EACb55F,KAAKu+L,QAAQ3wI,GACb5tD,KAAKkW,QAAQ,QAAS03C,GAElB5tD,KAAKs+L,MAAMz7L,QACb7C,KAAKs+L,MAAMz7L,QAEf,EACAy8L,WAAY,WACV,IAAI1pK,EAAO51B,KAGX,SAAS6yB,IACH+C,EAAK6oK,WACPpJ,EAAsBxiK,IACrB+C,EAAKipK,SAAWjpK,EAAKu9H,UAE1B,CAPAnzJ,KAAKy+L,UAAW,EAShBpJ,EAAsBxiK,EACxB,EAKAtU,MAAO,WACLve,KAAK0+L,OAAQ,IAAI59C,MAAOD,UACxB7gJ,KAAK2+L,YAAc,EAEnB3+L,KAAKs/L,YACP,EAKAjiJ,KAAM,WACJr9C,KAAKy+L,UAAW,CAClB,EAKAc,MAAO,WACAv/L,KAAK6+L,UACR7+L,KAAK4+L,aAAc,IAAI99C,MAAOD,UAC9B7gJ,KAAK6+L,SAAU,EAEnB,EAKAW,OAAQ,WACFx/L,KAAK6+L,UACP7+L,KAAK2+L,cAAe,IAAI79C,MAAOD,UAAY7gJ,KAAK4+L,YAChD5+L,KAAK6+L,SAAU,EAEnB,EAKAj6I,MAAO,WACL5kD,KAAKw+L,OAAS,EAChB,EAcAv0J,QAAS,SAAUn0B,EAAQu4D,GACzBA,EAAUA,GAAW,CAAC,EACtB,IAAIrkC,EAAW,IAAIo0J,EAAStoL,EAAQu4D,EAAQhlC,KAAMglC,EAAQ+rE,OAAQ/rE,EAAQgsE,QAE1E,OADAr6I,KAAKsxL,YAAYtnJ,GACVA,CACT,GAEF4+H,EAAKpuJ,MAAM6jL,EAAWF,GACtB,IAAIh7L,EAAWk7L,EACfj7L,EAAOvB,QAAUsB,C,iCC7OjB,IAAIs8L,EAAOh+L,EAAQ,OAEf8K,EAAQ9K,EAAQ,MAEhBs2D,EAAQt2D,EAAQ,OAEhB+hL,EAAczrH,EAAMyrH,YAKpBkc,EAAargK,MAAMn9B,UAAUc,MAEjC,SAAS28L,EAAc7pL,EAAQnU,GAC7B,OAAOmU,EAAOnU,EAChB,CAEA,SAASi+L,EAAc9pL,EAAQnU,EAAKoM,GAClC+H,EAAOnU,GAAOoM,CAChB,CASA,SAAS8xL,EAAkBvhK,EAAIC,EAAItT,GACjC,OAAQsT,EAAKD,GAAMrT,EAAUqT,CAC/B,CASA,SAASwhK,EAAkBxhK,EAAIC,EAAItT,GACjC,OAAOA,EAAU,GAAMsT,EAAKD,CAC9B,CAUA,SAASyhK,EAAiBzhK,EAAIC,EAAItT,EAASuiK,EAAKwS,GAC9C,IAAIxxK,EAAM8P,EAAGnqB,OAEb,GAAc,GAAV6rL,EACF,IAAK,IAAI/pL,EAAI,EAAGA,EAAIuY,EAAKvY,IACvBu3K,EAAIv3K,GAAK4pL,EAAkBvhK,EAAGroB,GAAIsoB,EAAGtoB,GAAIgV,OAG3C,KAAImjC,EAAO5/B,GAAO8P,EAAG,GAAGnqB,OAExB,IAAS8B,EAAI,EAAGA,EAAIuY,EAAKvY,IACvB,IAAK,IAAIqd,EAAI,EAAGA,EAAI86B,EAAM96B,IACxBk6J,EAAIv3K,GAAGqd,GAAKusK,EAAkBvhK,EAAGroB,GAAGqd,GAAIiL,EAAGtoB,GAAGqd,GAAIrI,EAJxB,CAQlC,CAIA,SAASg1K,EAAQC,EAAMC,EAAMH,GAC3B,IAAII,EAAUF,EAAK/rL,OACfksL,EAAUF,EAAKhsL,OAEnB,GAAIisL,IAAYC,EAAS,CAEvB,IAAIC,EAAmBF,EAAUC,EAEjC,GAAIC,EAEFJ,EAAK/rL,OAASksL,OAGd,IAAK,IAAIpqL,EAAImqL,EAASnqL,EAAIoqL,EAASpqL,IACjCiqL,EAAKl/L,KAAgB,IAAXg/L,EAAeG,EAAKlqL,GAAKypL,EAAW/nL,KAAKwoL,EAAKlqL,IAG9D,CAGA,IAAIm4C,EAAO8xI,EAAK,IAAMA,EAAK,GAAG/rL,OAE9B,IAAS8B,EAAI,EAAGA,EAAIiqL,EAAK/rL,OAAQ8B,IAC/B,GAAe,IAAX+pL,EACE3hL,MAAM6hL,EAAKjqL,MACbiqL,EAAKjqL,GAAKkqL,EAAKlqL,SAGjB,IAAK,IAAIqd,EAAI,EAAGA,EAAI86B,EAAM96B,IACpBjV,MAAM6hL,EAAKjqL,GAAGqd,MAChB4sK,EAAKjqL,GAAGqd,GAAK6sK,EAAKlqL,GAAGqd,GAK/B,CASA,SAASitK,EAAYL,EAAMC,EAAMH,GAC/B,GAAIE,IAASC,EACX,OAAO,EAGT,IAAI3xK,EAAM0xK,EAAK/rL,OAEf,GAAIqa,IAAQ2xK,EAAKhsL,OACf,OAAO,EAGT,GAAe,IAAX6rL,GACF,IAAK,IAAI/pL,EAAI,EAAGA,EAAIuY,EAAKvY,IACvB,GAAIiqL,EAAKjqL,KAAOkqL,EAAKlqL,GACnB,OAAO,MAIX,KAAIm4C,EAAO8xI,EAAK,GAAG/rL,OAEnB,IAAS8B,EAAI,EAAGA,EAAIuY,EAAKvY,IACvB,IAAK,IAAIqd,EAAI,EAAGA,EAAI86B,EAAM96B,IACxB,GAAI4sK,EAAKjqL,GAAGqd,KAAO6sK,EAAKlqL,GAAGqd,GACzB,OAAO,CALY,CAW3B,OAAO,CACT,CAeA,SAASktK,EAA2BliK,EAAIC,EAAIC,EAAIiiK,EAAIpiK,EAAGqiK,EAAIC,EAAInT,EAAKwS,GAClE,IAAIxxK,EAAM8P,EAAGnqB,OAEb,GAAc,GAAV6rL,EACF,IAAK,IAAI/pL,EAAI,EAAGA,EAAIuY,EAAKvY,IACvBu3K,EAAIv3K,GAAK2qL,EAAsBtiK,EAAGroB,GAAIsoB,EAAGtoB,GAAIuoB,EAAGvoB,GAAIwqL,EAAGxqL,GAAIooB,EAAGqiK,EAAIC,OAGpE,KAAIvyI,EAAO9vB,EAAG,GAAGnqB,OAEjB,IAAS8B,EAAI,EAAGA,EAAIuY,EAAKvY,IACvB,IAAK,IAAIqd,EAAI,EAAGA,EAAI86B,EAAM96B,IACxBk6J,EAAIv3K,GAAGqd,GAAKstK,EAAsBtiK,EAAGroB,GAAGqd,GAAIiL,EAAGtoB,GAAGqd,GAAIkL,EAAGvoB,GAAGqd,GAAImtK,EAAGxqL,GAAGqd,GAAI+K,EAAGqiK,EAAIC,EAJ9D,CAQ3B,CAcA,SAASC,EAAsBtiK,EAAIC,EAAIC,EAAIiiK,EAAIpiK,EAAGqiK,EAAIC,GACpD,IAAIE,EAAiB,IAAXriK,EAAKF,GACXV,EAAiB,IAAX6iK,EAAKliK,GACf,OAAQ,GAAKA,EAAKC,GAAMqiK,EAAKjjK,GAAM+iK,IAAO,GAAKpiK,EAAKC,GAAM,EAAIqiK,EAAKjjK,GAAM8iK,EAAKG,EAAKxiK,EAAIE,CACzF,CAEA,SAASuiK,EAAW/yL,GAClB,GAAIy1K,EAAYz1K,GAAQ,CACtB,IAAIygB,EAAMzgB,EAAMoG,OAEhB,GAAIqvK,EAAYz1K,EAAM,IAAK,CAGzB,IAFA,IAAIo1F,EAAM,GAEDltF,EAAI,EAAGA,EAAIuY,EAAKvY,IACvBktF,EAAIniG,KAAK0+L,EAAW/nL,KAAK5J,EAAMkI,KAGjC,OAAOktF,CACT,CAEA,OAAOu8F,EAAW/nL,KAAK5J,EACzB,CAEA,OAAOA,CACT,CAEA,SAASgzL,EAAYC,GAInB,OAHAA,EAAK,GAAKx6L,KAAKy+B,MAAM+7J,EAAK,IAC1BA,EAAK,GAAKx6L,KAAKy+B,MAAM+7J,EAAK,IAC1BA,EAAK,GAAKx6L,KAAKy+B,MAAM+7J,EAAK,IACnB,QAAUA,EAAKzpL,KAAK,KAAO,GACpC,CAEA,SAAS0pL,EAAYC,GACnB,IAAIC,EAAYD,EAAUA,EAAU/sL,OAAS,GAAGpG,MAChD,OAAOy1K,EAAY2d,GAAaA,EAAU,IAAM,EAAI,CACtD,CAEA,SAASC,EAAgBp3J,EAAU+9B,EAAQs5H,EAAcH,EAAWr0J,EAAUy0J,GAC5E,IAAIlnD,EAASpwG,EAASu3J,QAClBlnD,EAASrwG,EAASw3J,QAClBC,EAAuB,WAAX15H,EACZ25H,EAAWR,EAAU/sL,OAEzB,GAAKutL,EAAL,CAKA,IAMIC,EANAC,EAAWV,EAAU,GAAGnzL,MACxB8zL,EAAere,EAAYoe,GAC3BE,GAAe,EACfC,GAAgB,EAEhB/B,EAAS6B,EAAeZ,EAAYC,GAAa,EAGrDA,EAAUx1K,MAAK,SAAU+C,EAAGC,GAC1B,OAAOD,EAAEmrE,KAAOlrE,EAAEkrE,IACpB,IACA+nG,EAAeT,EAAUQ,EAAW,GAAG9nG,KAQvC,IANA,IAAIooG,EAAa,GAEbC,EAAW,GACXC,EAAYhB,EAAU,GAAGnzL,MACzBo0L,GAAkB,EAEblsL,EAAI,EAAGA,EAAIyrL,EAAUzrL,IAAK,CACjC+rL,EAAWhhM,KAAKkgM,EAAUjrL,GAAG2jF,KAAO+nG,GAEpC,IAAI5zL,EAAQmzL,EAAUjrL,GAAGlI,MAQzB,GANM8zL,GAAgBtB,EAAYxyL,EAAOm0L,EAAWlC,KAAY6B,GAAgB9zL,IAAUm0L,IACxFC,GAAkB,GAGpBD,EAAYn0L,EAEQ,iBAATA,EAAmB,CAC5B,IAAIq0L,EAAa71L,EAAMmH,MAAM3F,GAEzBq0L,GACFr0L,EAAQq0L,EACRN,GAAe,GAEfC,GAAgB,CAEpB,CAEAE,EAASjhM,KAAK+M,EAChB,CAEA,GAAKuzL,IAAgBa,EAArB,CAIA,IAAIhB,EAAYc,EAASP,EAAW,GAEpC,IAASzrL,EAAI,EAAGA,EAAIyrL,EAAW,EAAGzrL,IAC5B4rL,EACF5B,EAAQgC,EAAShsL,GAAIkrL,EAAWnB,IAE5B3hL,MAAM4jL,EAAShsL,KAAQoI,MAAM8iL,IAAeY,GAAkBD,IAChEG,EAAShsL,GAAKkrL,GAKpBU,GAAgB5B,EAAQ7lD,EAAOpwG,EAASq4J,QAASx1J,GAAWs0J,EAAWnB,GAGvE,IAEIzhL,EACAkkB,EACAnE,EACAC,EACAC,EACAiiK,EAPAn1J,EAAY,EACZg3J,EAAmB,EAQvB,GAAIR,EACF,IAAId,EAAO,CAAC,EAAG,EAAG,EAAG,GAGvB,IAAIzC,EAAU,SAAUzoL,EAAQmV,GAI9B,IAAIsgB,EAEJ,GAAItgB,EAAU,EACZsgB,EAAQ,OACH,GAAItgB,EAAUq3K,EAAkB,CAKrC,IAFA/jL,EAAQ/X,KAAKJ,IAAIklC,EAAY,EAAGo2J,EAAW,GAEtCn2J,EAAQhtB,EAAOgtB,GAAS,EAAGA,IAC9B,GAAIy2J,EAAWz2J,IAAUtgB,EACvB,MAKJsgB,EAAQ/kC,KAAKJ,IAAImlC,EAAOm2J,EAAW,EACrC,KAAO,CACL,IAAKn2J,EAAQD,EAAWC,EAAQm2J,EAAUn2J,IACxC,GAAIy2J,EAAWz2J,GAAStgB,EACtB,MAIJsgB,EAAQ/kC,KAAKJ,IAAImlC,EAAQ,EAAGm2J,EAAW,EACzC,CAEAp2J,EAAYC,EACZ+2J,EAAmBr3K,EACnB,IAAIqb,EAAQ07J,EAAWz2J,EAAQ,GAAKy2J,EAAWz2J,GAE/C,GAAc,IAAVjF,EAMJ,GAHE7D,GAAKxX,EAAU+2K,EAAWz2J,IAAUjF,EAGlCm7J,EAMF,GALAljK,EAAK0jK,EAAS12J,GACdjN,EAAK2jK,EAAmB,IAAV12J,EAAcA,EAAQA,EAAQ,GAC5C/M,EAAKyjK,EAAS12J,EAAQm2J,EAAW,EAAIA,EAAW,EAAIn2J,EAAQ,GAC5Dk1J,EAAKwB,EAAS12J,EAAQm2J,EAAW,EAAIA,EAAW,EAAIn2J,EAAQ,GAExDs2J,EACFrB,EAA2BliK,EAAIC,EAAIC,EAAIiiK,EAAIh+J,EAAGA,EAAIA,EAAGA,EAAIA,EAAIA,EAAG23G,EAAOtkI,EAAQ+2B,GAAWmzJ,OACrF,CAGL,GAAI8B,EACF/zL,EAAQyyL,EAA2BliK,EAAIC,EAAIC,EAAIiiK,EAAIh+J,EAAGA,EAAIA,EAAGA,EAAIA,EAAIA,EAAGu+J,EAAM,GAC9EjzL,EAAQgzL,EAAYC,OACf,IAAIe,EAET,OAAOjC,EAAkBvhK,EAAIC,EAAIiE,GAEjC10B,EAAQ6yL,EAAsBtiK,EAAIC,EAAIC,EAAIiiK,EAAIh+J,EAAGA,EAAIA,EAAGA,EAAIA,EAAIA,EAClE,CAEA43G,EAAOvkI,EAAQ+2B,EAAU9+B,EAC3B,MAEA,GAAI8zL,EACF9B,EAAiBkC,EAAS12J,GAAQ02J,EAAS12J,EAAQ,GAAI9I,EAAG23G,EAAOtkI,EAAQ+2B,GAAWmzJ,OAC/E,CACL,IAAIjyL,EAEJ,GAAI+zL,EACF/B,EAAiBkC,EAAS12J,GAAQ02J,EAAS12J,EAAQ,GAAI9I,EAAGu+J,EAAM,GAChEjzL,EAAQgzL,EAAYC,OACf,IAAIe,EAET,OAAOjC,EAAkBmC,EAAS12J,GAAQ02J,EAAS12J,EAAQ,GAAI9I,GAE/D10B,EAAQ8xL,EAAkBoC,EAAS12J,GAAQ02J,EAAS12J,EAAQ,GAAI9I,EAClE,CAEA43G,EAAOvkI,EAAQ+2B,EAAU9+B,EAC3B,CAEJ,EAEIqoL,EAAO,IAAIqJ,EAAK,CAClB3pL,OAAQk0B,EAASq4J,QACjBE,KAAMZ,EACNt4J,KAAMW,EAASJ,MACfE,MAAOE,EAASw4J,OAChBjE,QAASA,EACTkE,UAAWpB,IAOb,OAJIt5H,GAAqB,WAAXA,IACZquH,EAAKruH,OAASA,GAGTquH,CAhIP,CAjDA,CAkLF,CAWA,IAAIgI,EAAW,SAAUtoL,EAAQuzB,EAAM+wG,EAAQC,GAC7Cr6I,KAAK0iM,QAAU,CAAC,EAChB1iM,KAAKqiM,QAAUvsL,EACf9V,KAAK4pC,MAAQP,IAAQ,EACrBrpC,KAAKuhM,QAAUnnD,GAAUulD,EACzB3/L,KAAKwhM,QAAUnnD,GAAUulD,EACzB5/L,KAAK2iM,WAAa,EAClB3iM,KAAKwiM,OAAS,EACdxiM,KAAK4iM,UAAY,GACjB5iM,KAAK6iM,aAAe,GACpB7iM,KAAK8iM,UAAY,EACnB,EAEA1E,EAASl8L,UAAY,CAOnBgoC,KAAM,SAAU0vD,EAEd3kB,GACA,IAAI8tH,EAAS/iM,KAAK0iM,QAElB,IAAK,IAAI71J,KAAYooC,EACnB,GAAKA,EAAMrzE,eAAeirC,GAA1B,CAIA,IAAKk2J,EAAOl2J,GAAW,CACrBk2J,EAAOl2J,GAAY,GAEnB,IAAI9+B,EAAQ/N,KAAKuhM,QAAQvhM,KAAKqiM,QAASx1J,GAEvC,GAAa,MAAT9+B,EAEF,SAOW,IAAT6rF,GACFmpG,EAAOl2J,GAAU7rC,KAAK,CACpB44F,KAAM,EACN7rF,MAAO+yL,EAAW/yL,IAGxB,CAEAg1L,EAAOl2J,GAAU7rC,KAAK,CACpB44F,KAAMA,EACN7rF,MAAOknE,EAAMpoC,IA1Bf,CA8BF,OAAO7sC,IACT,EAOAmqC,OAAQ,SAAU00B,GAGhB,OAFA7+D,KAAK6iM,aAAa7hM,KAAK69D,GAEhB7+D,IACT,EACAu/L,MAAO,WACL,IAAK,IAAItpL,EAAI,EAAGA,EAAIjW,KAAK8iM,UAAU3uL,OAAQ8B,IACzCjW,KAAK8iM,UAAU7sL,GAAGspL,QAGpBv/L,KAAK6+L,SAAU,CACjB,EACAW,OAAQ,WACN,IAAK,IAAIvpL,EAAI,EAAGA,EAAIjW,KAAK8iM,UAAU3uL,OAAQ8B,IACzCjW,KAAK8iM,UAAU7sL,GAAGupL,SAGpBx/L,KAAK6+L,SAAU,CACjB,EACAmE,SAAU,WACR,QAAShjM,KAAK6+L,OAChB,EACAoE,cAAe,WAEbjjM,KAAK0iM,QAAU,CAAC,EAEhB1iM,KAAK8iM,UAAU3uL,OAAS,EAIxB,IAHA,IAAI+uL,EAAWljM,KAAK4iM,UAChBp0K,EAAM00K,EAAS/uL,OAEV8B,EAAI,EAAGA,EAAIuY,EAAKvY,IACvBitL,EAASjtL,GAAG0B,KAAK3X,KAErB,EASAue,MAAO,SAAUwpD,EAAQu5H,GACvB,IAWI6B,EAXAvtK,EAAO51B,KACPojM,EAAY,EAEZ/B,EAAe,WACjB+B,IAEKA,GACHxtK,EAAKqtK,eAET,EAIA,IAAK,IAAIp2J,KAAY7sC,KAAK0iM,QACxB,GAAK1iM,KAAK0iM,QAAQ9gM,eAAeirC,GAAjC,CAIA,IAAIupJ,EAAOgL,EAAgBphM,KAAM+nE,EAAQs5H,EAAcrhM,KAAK0iM,QAAQ71J,GAAWA,EAAUy0J,GAErFlL,IACFp2L,KAAK8iM,UAAU9hM,KAAKo1L,GAEpBgN,IAEIpjM,KAAK+pD,WACP/pD,KAAK+pD,UAAU+0I,QAAQ1I,GAGzB+M,EAAW/M,EAbb,CAkBF,GAAI+M,EAAU,CACZ,IAAIE,EAAaF,EAAS5E,QAE1B4E,EAAS5E,QAAU,SAAUzoL,EAAQmV,GACnCo4K,EAAWvtL,EAAQmV,GAEnB,IAAK,IAAIhV,EAAI,EAAGA,EAAI2f,EAAKitK,aAAa1uL,OAAQ8B,IAC5C2f,EAAKitK,aAAa5sL,GAAGH,EAAQmV,EAEjC,CACF,CASA,OAJKm4K,GACHpjM,KAAKijM,gBAGAjjM,IACT,EAMAq9C,KAAM,SAAUimJ,GAId,IAHA,IAAIC,EAAWvjM,KAAK8iM,UAChB/4I,EAAY/pD,KAAK+pD,UAEZ9zC,EAAI,EAAGA,EAAIstL,EAASpvL,OAAQ8B,IAAK,CACxC,IAAImgL,EAAOmN,EAASttL,GAEhBqtL,GAEFlN,EAAKmI,QAAQv+L,KAAKqiM,QAAS,GAG7Bt4I,GAAaA,EAAUk1I,WAAW7I,EACpC,CAEAmN,EAASpvL,OAAS,CACpB,EAOA21B,MAAO,SAAU8vD,GAEf,OADA55F,KAAKwiM,OAAS5oG,EACP55F,IACT,EAOAqqC,KAAM,SAAU7yB,GAKd,OAJIA,GACFxX,KAAK4iM,UAAU5hM,KAAKwW,GAGfxX,IACT,EAKAg/L,SAAU,WACR,OAAOh/L,KAAK8iM,SACd,GAEF,IAAI3/L,EAAWi7L,EACfh7L,EAAOvB,QAAUsB,C,wBCnoBjB,IAAIqgM,EAAc/hM,EAAQ,OAgB1B,SAASg+L,EAAKpxH,GACZruE,KAAKqiM,QAAUh0H,EAAQv4D,OAEvB9V,KAAKyjM,MAAQp1H,EAAQk0H,MAAQ,IAE7BviM,KAAKwiM,OAASn0H,EAAQvkC,OAAS,EAG/B9pC,KAAK0jM,cAAe,EAEpB1jM,KAAKqpC,KAAuB,MAAhBglC,EAAQhlC,MAAuBglC,EAAQhlC,KACnDrpC,KAAK2rB,IAAM0iD,EAAQ1iD,KAAO,EAC1B3rB,KAAK+nE,OAASsG,EAAQtG,QAAU,SAChC/nE,KAAKu+L,QAAUlwH,EAAQkwH,QACvBv+L,KAAKyiM,UAAYp0H,EAAQo0H,UACzBziM,KAAK2jM,UAAYt1H,EAAQs1H,UACzB3jM,KAAK2+L,YAAc,EACnB3+L,KAAK6+L,SAAU,CACjB,CAEAY,EAAKv9L,UAAY,CACfC,YAAas9L,EACb5sK,KAAM,SAAU+wK,EAAYC,GAQ1B,GALK7jM,KAAK0jM,eACR1jM,KAAK8jM,WAAaF,EAAa5jM,KAAKwiM,OACpCxiM,KAAK0jM,cAAe,GAGlB1jM,KAAK6+L,QACP7+L,KAAK2+L,aAAekF,MADtB,CAKA,IAAI54K,GAAW24K,EAAa5jM,KAAK8jM,WAAa9jM,KAAK2+L,aAAe3+L,KAAKyjM,MAEvE,KAAIx4K,EAAU,GAAd,CAIAA,EAAUzkB,KAAKJ,IAAI6kB,EAAS,GAC5B,IAAI88C,EAAS/nE,KAAK+nE,OACdg8H,EAA8B,iBAAVh8H,EAAqBy7H,EAAYz7H,GAAUA,EAC/Di8H,EAAiC,oBAAfD,EAA4BA,EAAW94K,GAAWA,EAGxE,OAFAjrB,KAAKq/L,KAAK,QAAS2E,GAEJ,GAAX/4K,EACEjrB,KAAKqpC,MACPrpC,KAAKikM,QAAQL,GAGN,YAKT5jM,KAAKo/L,cAAe,EACb,WAGF,IAtBP,CANA,CA6BF,EACA6E,QAAS,SAAUL,GACjB,IAAI9a,GAAa8a,EAAa5jM,KAAK8jM,WAAa9jM,KAAK2+L,aAAe3+L,KAAKyjM,MACzEzjM,KAAK8jM,WAAaF,EAAa9a,EAAY9oL,KAAK2rB,IAChD3rB,KAAK2+L,YAAc,EACnB3+L,KAAKo/L,cAAe,CACtB,EACAC,KAAM,SAAU7+G,EAAW0jH,GACzB1jH,EAAY,KAAOA,EAEfxgF,KAAKwgF,IACPxgF,KAAKwgF,GAAWxgF,KAAKqiM,QAAS6B,EAElC,EACA3E,MAAO,WACLv/L,KAAK6+L,SAAU,CACjB,EACAW,OAAQ,WACNx/L,KAAK6+L,SAAU,CACjB,GAEF,IAAI17L,EAAWs8L,EACfr8L,EAAOvB,QAAUsB,C,oBC/FjB,IAAI4kE,EAAS,CAKX6lH,OAAQ,SAAUvrI,GAChB,OAAOA,CACT,EAMA8hJ,YAAa,SAAU9hJ,GACrB,OAAOA,EAAIA,CACb,EAMA+hJ,aAAc,SAAU/hJ,GACtB,OAAOA,GAAK,EAAIA,EAClB,EAMAgiJ,eAAgB,SAAUhiJ,GACxB,OAAKA,GAAK,GAAK,EACN,GAAMA,EAAIA,GAGX,MAASA,GAAKA,EAAI,GAAK,EACjC,EAOAiiJ,QAAS,SAAUjiJ,GACjB,OAAOA,EAAIA,EAAIA,CACjB,EAMAkiJ,SAAU,SAAUliJ,GAClB,QAASA,EAAIA,EAAIA,EAAI,CACvB,EAMAmiJ,WAAY,SAAUniJ,GACpB,OAAKA,GAAK,GAAK,EACN,GAAMA,EAAIA,EAAIA,EAGhB,KAAQA,GAAK,GAAKA,EAAIA,EAAI,EACnC,EAOAoiJ,UAAW,SAAUpiJ,GACnB,OAAOA,EAAIA,EAAIA,EAAIA,CACrB,EAMAqiJ,WAAY,SAAUriJ,GACpB,OAAO,KAAMA,EAAIA,EAAIA,EAAIA,CAC3B,EAMAsiJ,aAAc,SAAUtiJ,GACtB,OAAKA,GAAK,GAAK,EACN,GAAMA,EAAIA,EAAIA,EAAIA,GAGnB,KAAQA,GAAK,GAAKA,EAAIA,EAAIA,EAAI,EACxC,EAOAuiJ,UAAW,SAAUviJ,GACnB,OAAOA,EAAIA,EAAIA,EAAIA,EAAIA,CACzB,EAMAwiJ,WAAY,SAAUxiJ,GACpB,QAASA,EAAIA,EAAIA,EAAIA,EAAIA,EAAI,CAC/B,EAMAyiJ,aAAc,SAAUziJ,GACtB,OAAKA,GAAK,GAAK,EACN,GAAMA,EAAIA,EAAIA,EAAIA,EAAIA,EAGxB,KAAQA,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,EAC3C,EAOA0iJ,aAAc,SAAU1iJ,GACtB,OAAO,EAAI77C,KAAK0sB,IAAImvB,EAAI77C,KAAK0L,GAAK,EACpC,EAMA8yL,cAAe,SAAU3iJ,GACvB,OAAO77C,KAAK4sB,IAAIivB,EAAI77C,KAAK0L,GAAK,EAChC,EAMA+yL,gBAAiB,SAAU5iJ,GACzB,MAAO,IAAO,EAAI77C,KAAK0sB,IAAI1sB,KAAK0L,GAAKmwC,GACvC,EAOA6iJ,cAAe,SAAU7iJ,GACvB,OAAa,IAANA,EAAU,EAAI77C,KAAK0qE,IAAI,KAAM7uB,EAAI,EAC1C,EAMA8iJ,eAAgB,SAAU9iJ,GACxB,OAAa,IAANA,EAAU,EAAI,EAAI77C,KAAK0qE,IAAI,GAAI,GAAK7uB,EAC7C,EAMA+iJ,iBAAkB,SAAU/iJ,GAC1B,OAAU,IAANA,EACK,EAGC,IAANA,EACK,GAGJA,GAAK,GAAK,EACN,GAAM77C,KAAK0qE,IAAI,KAAM7uB,EAAI,GAG3B,IAAqC,EAA7B77C,KAAK0qE,IAAI,GAAI,IAAM7uB,EAAI,IACxC,EAOAgjJ,WAAY,SAAUhjJ,GACpB,OAAO,EAAI77C,KAAKgnD,KAAK,EAAInL,EAAIA,EAC/B,EAMAijJ,YAAa,SAAUjjJ,GACrB,OAAO77C,KAAKgnD,KAAK,KAAMnL,EAAIA,EAC7B,EAMAkjJ,cAAe,SAAUljJ,GACvB,OAAKA,GAAK,GAAK,GACL,IAAO77C,KAAKgnD,KAAK,EAAInL,EAAIA,GAAK,GAGjC,IAAO77C,KAAKgnD,KAAK,GAAKnL,GAAK,GAAKA,GAAK,EAC9C,EAOAmjJ,UAAW,SAAUnjJ,GACnB,IAAImxD,EACA/kF,EAAI,GACJrQ,EAAI,GAER,OAAU,IAANikC,EACK,EAGC,IAANA,EACK,IAGJ5zB,GAAKA,EAAI,GACZA,EAAI,EACJ+kF,EAAIp1F,EAAI,GAERo1F,EAAIp1F,EAAI5X,KAAKsjL,KAAK,EAAIr7J,IAAM,EAAIjoB,KAAK0L,KAG9Buc,EAAIjoB,KAAK0qE,IAAI,EAAG,IAAM7uB,GAAK,IAAM77C,KAAK4sB,KAAKivB,EAAImxD,IAAM,EAAIhtG,KAAK0L,IAAMkM,GAC/E,EAMAqnL,WAAY,SAAUpjJ,GACpB,IAAImxD,EACA/kF,EAAI,GACJrQ,EAAI,GAER,OAAU,IAANikC,EACK,EAGC,IAANA,EACK,IAGJ5zB,GAAKA,EAAI,GACZA,EAAI,EACJ+kF,EAAIp1F,EAAI,GAERo1F,EAAIp1F,EAAI5X,KAAKsjL,KAAK,EAAIr7J,IAAM,EAAIjoB,KAAK0L,IAGhCuc,EAAIjoB,KAAK0qE,IAAI,GAAI,GAAK7uB,GAAK77C,KAAK4sB,KAAKivB,EAAImxD,IAAM,EAAIhtG,KAAK0L,IAAMkM,GAAK,EAC5E,EAMAsnL,aAAc,SAAUrjJ,GACtB,IAAImxD,EACA/kF,EAAI,GACJrQ,EAAI,GAER,OAAU,IAANikC,EACK,EAGC,IAANA,EACK,IAGJ5zB,GAAKA,EAAI,GACZA,EAAI,EACJ+kF,EAAIp1F,EAAI,GAERo1F,EAAIp1F,EAAI5X,KAAKsjL,KAAK,EAAIr7J,IAAM,EAAIjoB,KAAK0L,KAGlCmwC,GAAK,GAAK,EACE5zB,EAAIjoB,KAAK0qE,IAAI,EAAG,IAAM7uB,GAAK,IAAM77C,KAAK4sB,KAAKivB,EAAImxD,IAAM,EAAIhtG,KAAK0L,IAAMkM,IAA3E,GAGHqQ,EAAIjoB,KAAK0qE,IAAI,GAAI,IAAM7uB,GAAK,IAAM77C,KAAK4sB,KAAKivB,EAAImxD,IAAM,EAAIhtG,KAAK0L,IAAMkM,GAAK,GAAM,EACzF,EAOAunL,OAAQ,SAAUtjJ,GAChB,IAAImxD,EAAI,QACR,OAAOnxD,EAAIA,IAAMmxD,EAAI,GAAKnxD,EAAImxD,EAChC,EAMAoyF,QAAS,SAAUvjJ,GACjB,IAAImxD,EAAI,QACR,QAASnxD,EAAIA,IAAMmxD,EAAI,GAAKnxD,EAAImxD,GAAK,CACvC,EAMAqyF,UAAW,SAAUxjJ,GACnB,IAAImxD,EAAI,UAER,OAAKnxD,GAAK,GAAK,EACCA,EAAIA,IAAMmxD,EAAI,GAAKnxD,EAAImxD,GAA9B,GAGF,KAAQnxD,GAAK,GAAKA,IAAMmxD,EAAI,GAAKnxD,EAAImxD,GAAK,EACnD,EAOAsyF,SAAU,SAAUzjJ,GAClB,OAAO,EAAI0lB,EAAOg+H,UAAU,EAAI1jJ,EAClC,EAMA0jJ,UAAW,SAAU1jJ,GACnB,OAAIA,EAAI,EAAI,KACH,OAASA,EAAIA,EACXA,EAAI,EAAI,KACV,QAAUA,GAAK,IAAM,MAAQA,EAAI,IAC/BA,EAAI,IAAM,KACZ,QAAUA,GAAK,KAAO,MAAQA,EAAI,MAElC,QAAUA,GAAK,MAAQ,MAAQA,EAAI,OAE9C,EAMA2jJ,YAAa,SAAU3jJ,GACrB,OAAIA,EAAI,GAC0B,GAAzB0lB,EAAO+9H,SAAa,EAAJzjJ,GAGY,GAA9B0lB,EAAOg+H,UAAc,EAAJ1jJ,EAAQ,GAAW,EAC7C,GAEEl/C,EAAW4kE,EACf3kE,EAAOvB,QAAUsB,C,oBCzXjB,IAAIA,EAA6B,qBAAXgmE,SAA2BA,OAAOksH,uBAAyBlsH,OAAOksH,sBAAsB5xL,KAAK0lE,SACnHA,OAAO88H,yBAA2B98H,OAAO88H,wBAAwBxiM,KAAK0lE,SAAWA,OAAO+8H,0BAA4B/8H,OAAOg9H,8BAAgC,SAAUlzC,GACnK32H,WAAW22H,EAAM,GACnB,EAEA7vJ,EAAOvB,QAAUsB,C,sBCLjB,IAAIq9J,EAAM,EAEY,qBAAXr3F,SACTq3F,EAAMh6J,KAAKF,IAAI6iE,OAAOs1F,kBAAoB,EAAG,IAgB/C,IAAI2nC,EAAY,EAEZ3nC,EAAmB+B,EACvB3+J,EAAQukM,UAAYA,EACpBvkM,EAAQ48J,iBAAmBA,C,uBCvB3B,IAAI1mG,EAAQt2D,EAAQ,OAEhB4kM,EAAkBtuI,EAAMsuI,gBACxBh1K,EAAgB,EAAV7qB,KAAK0L,GAef,SAASu7B,EAActhC,EAAIC,EAAIX,EAAGL,EAAYiB,EAAUi6L,EAAe94L,EAAWvB,EAAGC,GACnF,GAAkB,IAAdsB,EACF,OAAO,EAGT,IAAI+4L,EAAK/4L,EACTvB,GAAKE,EACLD,GAAKE,EACL,IAAIqyB,EAAIj4B,KAAKgnD,KAAKvhD,EAAIA,EAAIC,EAAIA,GAE9B,GAAIuyB,EAAI8nK,EAAK96L,GAAKgzB,EAAI8nK,EAAK96L,EACzB,OAAO,EAGT,GAAIjF,KAAKiH,IAAIrC,EAAaiB,GAAYglB,EAAM,KAE1C,OAAO,EAGT,GAAIi1K,EAAe,CACjB,IAAIt0K,EAAM5mB,EACVA,EAAai7L,EAAgBh6L,GAC7BA,EAAWg6L,EAAgBr0K,EAC7B,MACE5mB,EAAai7L,EAAgBj7L,GAC7BiB,EAAWg6L,EAAgBh6L,GAGzBjB,EAAaiB,IACfA,GAAYglB,GAGd,IAAIuB,EAAQpsB,KAAKo1B,MAAM1vB,EAAGD,GAM1B,OAJI2mB,EAAQ,IACVA,GAASvB,GAGJuB,GAASxnB,GAAcwnB,GAASvmB,GAAYumB,EAAQvB,GAAOjmB,GAAcwnB,EAAQvB,GAAOhlB,CACjG,CAEAxK,EAAQ4rC,cAAgBA,C,wBC3DxB,IAAIqkB,EAAQrwD,EAAQ,OAiBpB,SAASgsC,EAAc9d,EAAIye,EAAIrf,EAAIC,EAAIC,EAAIE,EAAI4/B,EAAIC,EAAIxhD,EAAWvB,EAAGC,GACnE,GAAkB,IAAdsB,EACF,OAAO,EAGT,IAAI+4L,EAAK/4L,EAET,GAAItB,EAAIkiC,EAAKm4J,GAAMr6L,EAAI8iB,EAAKu3K,GAAMr6L,EAAIijB,EAAKo3K,GAAMr6L,EAAI8iD,EAAKu3I,GAAMr6L,EAAIkiC,EAAKm4J,GAAMr6L,EAAI8iB,EAAKu3K,GAAMr6L,EAAIijB,EAAKo3K,GAAMr6L,EAAI8iD,EAAKu3I,GAAMt6L,EAAI0jB,EAAK42K,GAAMt6L,EAAI8iB,EAAKw3K,GAAMt6L,EAAIgjB,EAAKs3K,GAAMt6L,EAAI8iD,EAAKw3I,GAAMt6L,EAAI0jB,EAAK42K,GAAMt6L,EAAI8iB,EAAKw3K,GAAMt6L,EAAIgjB,EAAKs3K,GAAMt6L,EAAI8iD,EAAKw3I,EAC5O,OAAO,EAGT,IAAI9nK,EAAIqzB,EAAM00I,kBAAkB72K,EAAIye,EAAIrf,EAAIC,EAAIC,EAAIE,EAAI4/B,EAAIC,EAAI/iD,EAAGC,EAAG,MACtE,OAAOuyB,GAAK8nK,EAAK,CACnB,CAEA1kM,EAAQ4rC,cAAgBA,C,sBCrBxB,SAASA,EAAc9d,EAAIye,EAAIrf,EAAIC,EAAIxhB,EAAWvB,EAAGC,GACnD,GAAkB,IAAdsB,EACF,OAAO,EAGT,IAAI+4L,EAAK/4L,EACLi5L,EAAK,EACLC,EAAK/2K,EAET,GAAIzjB,EAAIkiC,EAAKm4J,GAAMr6L,EAAI8iB,EAAKu3K,GAAMr6L,EAAIkiC,EAAKm4J,GAAMr6L,EAAI8iB,EAAKu3K,GAAMt6L,EAAI0jB,EAAK42K,GAAMt6L,EAAI8iB,EAAKw3K,GAAMt6L,EAAI0jB,EAAK42K,GAAMt6L,EAAI8iB,EAAKw3K,EACpH,OAAO,EAGT,GAAI52K,IAAOZ,EAIT,OAAOvoB,KAAKiH,IAAIxB,EAAI0jB,IAAO42K,EAAK,EAHhCE,GAAMr4J,EAAKpf,IAAOW,EAAKZ,GACvB23K,GAAM/2K,EAAKX,EAAKD,EAAKqf,IAAOze,EAAKZ,GAKnC,IAAIiD,EAAMy0K,EAAKx6L,EAAIC,EAAIw6L,EAEnBC,EAAK30K,EAAMA,GAAOy0K,EAAKA,EAAK,GAEhC,OAAOE,GAAMJ,EAAK,EAAIA,EAAK,CAC7B,CAEA1kM,EAAQ4rC,cAAgBA,C,wBCtCxB,IAAIm5J,EAAYnlM,EAAQ,OAEpBkd,EAAOld,EAAQ,OAEfolM,EAAQplM,EAAQ,OAEhBqlM,EAAYrlM,EAAQ,OAEpB+jC,EAAM/jC,EAAQ,MAEds2D,EAAQt2D,EAAQ,OAEhB4kM,EAAkBtuI,EAAMsuI,gBAExBv0I,EAAQrwD,EAAQ,OAEhBslM,EAActlM,EAAQ,OAEtBulM,EAAMJ,EAAUI,IAChB31K,EAAgB,EAAV7qB,KAAK0L,GACX+0L,EAAU,KAEd,SAASC,EAAcz4K,EAAGC,GACxB,OAAOloB,KAAKiH,IAAIghB,EAAIC,GAAKu4K,CAC3B,CAGA,IAAI7J,EAAQ,EAAE,GAAI,GAAI,GAClB+J,EAAU,EAAE,GAAI,GAEpB,SAASC,IACP,IAAIp1K,EAAMm1K,EAAQ,GAClBA,EAAQ,GAAKA,EAAQ,GACrBA,EAAQ,GAAKn1K,CACf,CAEA,SAASq1K,EAAa13K,EAAIye,EAAIrf,EAAIC,EAAIC,EAAIE,EAAI4/B,EAAIC,EAAI/iD,EAAGC,GAEvD,GAAIA,EAAIkiC,GAAMliC,EAAI8iB,GAAM9iB,EAAIijB,GAAMjjB,EAAI8iD,GAAM9iD,EAAIkiC,GAAMliC,EAAI8iB,GAAM9iB,EAAIijB,GAAMjjB,EAAI8iD,EAC5E,OAAO,EAGT,IAAIs4I,EAASx1I,EAAMy1I,YAAYn5J,EAAIpf,EAAIG,EAAI6/B,EAAI9iD,EAAGkxL,GAElD,GAAe,IAAXkK,EACF,OAAO,EAMP,IAJA,IAEIE,EAAKC,EAFLhlK,EAAI,EACJilK,GAAY,EAGPzxL,EAAI,EAAGA,EAAIqxL,EAAQrxL,IAAK,CAC/B,IAAIooB,EAAI++J,EAAMnnL,GAEVV,EAAa,IAAN8oB,GAAiB,IAANA,EAAU,GAAM,EAClCspK,EAAK71I,EAAM81I,QAAQj4K,EAAIZ,EAAIE,EAAI8/B,EAAI1wB,GAEnCspK,EAAK17L,IAKLy7L,EAAW,IACbA,EAAW51I,EAAM+1I,aAAaz5J,EAAIpf,EAAIG,EAAI6/B,EAAIm4I,GAE1CA,EAAQ,GAAKA,EAAQ,IAAMO,EAAW,GACxCN,IAGFI,EAAM11I,EAAM81I,QAAQx5J,EAAIpf,EAAIG,EAAI6/B,EAAIm4I,EAAQ,IAExCO,EAAW,IACbD,EAAM31I,EAAM81I,QAAQx5J,EAAIpf,EAAIG,EAAI6/B,EAAIm4I,EAAQ,MAIhC,GAAZO,EAEErpK,EAAI8oK,EAAQ,GACd1kK,GAAK+kK,EAAMp5J,EAAK74B,GAAQA,EACf8oB,EAAI8oK,EAAQ,GACrB1kK,GAAKglK,EAAMD,EAAMjyL,GAAQA,EAEzBktB,GAAKusB,EAAKy4I,EAAMlyL,GAAQA,EAItB8oB,EAAI8oK,EAAQ,GACd1kK,GAAK+kK,EAAMp5J,EAAK74B,GAAQA,EAExBktB,GAAKusB,EAAKw4I,EAAMjyL,GAAQA,EAG9B,CAEA,OAAOktB,CAEX,CAEA,SAASqlK,EAAiBn4K,EAAIye,EAAIrf,EAAIC,EAAIC,EAAIE,EAAIljB,EAAGC,GAEnD,GAAIA,EAAIkiC,GAAMliC,EAAI8iB,GAAM9iB,EAAIijB,GAAMjjB,EAAIkiC,GAAMliC,EAAI8iB,GAAM9iB,EAAIijB,EACxD,OAAO,EAGT,IAAIm4K,EAASx1I,EAAMi2I,gBAAgB35J,EAAIpf,EAAIG,EAAIjjB,EAAGkxL,GAElD,GAAe,IAAXkK,EACF,OAAO,EAEP,IAAIjpK,EAAIyzB,EAAMk2I,kBAAkB55J,EAAIpf,EAAIG,GAExC,GAAIkP,GAAK,GAAKA,GAAK,EAAG,CAIpB,IAHA,IAAIoE,EAAI,EACJwlK,EAAKn2I,EAAM/zB,YAAYqQ,EAAIpf,EAAIG,EAAIkP,GAE9BpoB,EAAI,EAAGA,EAAIqxL,EAAQrxL,IAAK,CAE/B,IAAIV,EAAoB,IAAb6nL,EAAMnnL,IAAyB,IAAbmnL,EAAMnnL,GAAW,GAAM,EAChD0xL,EAAK71I,EAAM/zB,YAAYpO,EAAIZ,EAAIE,EAAImuK,EAAMnnL,IAEzC0xL,EAAK17L,IAKLmxL,EAAMnnL,GAAKooB,EACboE,GAAKwlK,EAAK75J,EAAK74B,GAAQA,EAEvBktB,GAAKtT,EAAK84K,EAAK1yL,GAAQA,EAE3B,CAEA,OAAOktB,CACT,CAEMltB,EAAoB,IAAb6nL,EAAM,IAAyB,IAAbA,EAAM,GAAW,GAAM,EAChDuK,EAAK71I,EAAM/zB,YAAYpO,EAAIZ,EAAIE,EAAImuK,EAAM,IAE7C,OAAIuK,EAAK17L,EAEA,EAGFkjB,EAAKif,EAAK74B,GAAQA,CAG/B,CAIA,SAAS2yL,EAAW/7L,EAAIC,EAAIX,EAAGL,EAAYiB,EAAUi6L,EAAer6L,EAAGC,GAGrE,GAFAA,GAAKE,EAEDF,EAAIT,GAAKS,GAAKT,EAChB,OAAO,EAGT,IAAIumB,EAAMxrB,KAAKgnD,KAAK/hD,EAAIA,EAAIS,EAAIA,GAChCkxL,EAAM,IAAMprK,EACZorK,EAAM,GAAKprK,EACX,IAAI9oB,EAAO1C,KAAKiH,IAAIrC,EAAaiB,GAEjC,GAAInD,EAAO,KACT,OAAO,EAGT,GAAIA,EAAOmoB,EAAM,KAAM,CAErBjmB,EAAa,EACbiB,EAAWglB,EACX,IAAI4pB,EAAMqrJ,EAAgB,GAAK,EAE/B,OAAIr6L,GAAKmxL,EAAM,GAAKjxL,GAAMF,GAAKmxL,EAAM,GAAKjxL,EACjC8uC,EAEA,CAEX,CAEA,GAAIqrJ,EAAe,CACbt0K,EAAM5mB,EACVA,EAAai7L,EAAgBh6L,GAC7BA,EAAWg6L,EAAgBr0K,EAC7B,MACE5mB,EAAai7L,EAAgBj7L,GAC7BiB,EAAWg6L,EAAgBh6L,GAGzBjB,EAAaiB,IACfA,GAAYglB,GAKd,IAFA,IAAIoR,EAAI,EAECxsB,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAI0xL,EAAKvK,EAAMnnL,GAEf,GAAI0xL,EAAKx7L,EAAKF,EAAG,CACf,IAAI2mB,EAAQpsB,KAAKo1B,MAAM1vB,EAAGy7L,GACtB1sJ,EAAMqrJ,EAAgB,GAAK,EAE3B1zK,EAAQ,IACVA,EAAQvB,EAAMuB,IAGZA,GAASxnB,GAAcwnB,GAASvmB,GAAYumB,EAAQvB,GAAOjmB,GAAcwnB,EAAQvB,GAAOhlB,KACtFumB,EAAQpsB,KAAK0L,GAAK,GAAK0gB,EAAkB,IAAVpsB,KAAK0L,KACtC+oC,GAAOA,GAGTxY,GAAKwY,EAET,CACF,CAEA,OAAOxY,CACT,CAEA,SAAS0lK,EAAYvnM,EAAM4M,EAAW46L,EAAUn8L,EAAGC,GAOjD,IANA,IAAIu2B,EAAI,EACJ4lK,EAAK,EACLC,EAAK,EACL34K,EAAK,EACLye,EAAK,EAEAn4B,EAAI,EAAGA,EAAIrV,EAAKuT,QAAS,CAChC,IAAI0rC,EAAMj/C,EAAKqV,KAwBf,OAtBI4pC,IAAQmnJ,EAAIjrG,GAAK9lF,EAAI,IAElBmyL,IACH3lK,GAAKskK,EAAYsB,EAAIC,EAAI34K,EAAIye,EAAIniC,EAAGC,KAQ/B,GAAL+J,IAKFoyL,EAAKznM,EAAKqV,GACVqyL,EAAK1nM,EAAKqV,EAAI,GACd0Z,EAAK04K,EACLj6J,EAAKk6J,GAGCzoJ,GACN,KAAKmnJ,EAAIjrG,EAGPpsE,EAAK/uB,EAAKqV,KACVm4B,EAAKxtC,EAAKqV,KACVoyL,EAAK14K,EACL24K,EAAKl6J,EACL,MAEF,KAAK44J,EAAIuB,EACP,GAAIH,GACF,GAAIzpL,EAAK8uB,cAAc46J,EAAIC,EAAI1nM,EAAKqV,GAAIrV,EAAKqV,EAAI,GAAIzI,EAAWvB,EAAGC,GACjE,OAAO,OAITu2B,GAAKskK,EAAYsB,EAAIC,EAAI1nM,EAAKqV,GAAIrV,EAAKqV,EAAI,GAAIhK,EAAGC,IAAM,EAG1Dm8L,EAAKznM,EAAKqV,KACVqyL,EAAK1nM,EAAKqV,KACV,MAEF,KAAK+wL,EAAIwB,EACP,GAAIJ,GACF,GAAIvB,EAAMp5J,cAAc46J,EAAIC,EAAI1nM,EAAKqV,KAAMrV,EAAKqV,KAAMrV,EAAKqV,KAAMrV,EAAKqV,KAAMrV,EAAKqV,GAAIrV,EAAKqV,EAAI,GAAIzI,EAAWvB,EAAGC,GAC9G,OAAO,OAGTu2B,GAAK4kK,EAAagB,EAAIC,EAAI1nM,EAAKqV,KAAMrV,EAAKqV,KAAMrV,EAAKqV,KAAMrV,EAAKqV,KAAMrV,EAAKqV,GAAIrV,EAAKqV,EAAI,GAAIhK,EAAGC,IAAM,EAGvGm8L,EAAKznM,EAAKqV,KACVqyL,EAAK1nM,EAAKqV,KACV,MAEF,KAAK+wL,EAAIyB,EACP,GAAIL,GACF,GAAItB,EAAUr5J,cAAc46J,EAAIC,EAAI1nM,EAAKqV,KAAMrV,EAAKqV,KAAMrV,EAAKqV,GAAIrV,EAAKqV,EAAI,GAAIzI,EAAWvB,EAAGC,GAC5F,OAAO,OAGTu2B,GAAKqlK,EAAiBO,EAAIC,EAAI1nM,EAAKqV,KAAMrV,EAAKqV,KAAMrV,EAAKqV,GAAIrV,EAAKqV,EAAI,GAAIhK,EAAGC,IAAM,EAGrFm8L,EAAKznM,EAAKqV,KACVqyL,EAAK1nM,EAAKqV,KACV,MAEF,KAAK+wL,EAAI0B,EAEP,IAAIv8L,EAAKvL,EAAKqV,KACV7J,EAAKxL,EAAKqV,KACV0yL,EAAK/nM,EAAKqV,KACV2yL,EAAKhoM,EAAKqV,KACV4yL,EAAQjoM,EAAKqV,KACb6yL,EAASloM,EAAKqV,KAGdqwL,GADM1lM,EAAKqV,KACK,EAAIrV,EAAKqV,MACzB8Y,EAAKvoB,KAAK0sB,IAAI21K,GAASF,EAAKx8L,EAC5B6iB,EAAKxoB,KAAK4sB,IAAIy1K,GAASD,EAAKx8L,EAE5B6J,EAAI,EACNwsB,GAAKskK,EAAYsB,EAAIC,EAAIv5K,EAAIC,EAAI/iB,EAAGC,IAGpCyjB,EAAKZ,EACLqf,EAAKpf,GAIP,IAAI2xF,GAAM10G,EAAIE,GAAMy8L,EAAKD,EAAKx8L,EAE9B,GAAIi8L,GACF,GAAI5iK,EAAIiI,cAActhC,EAAIC,EAAIw8L,EAAIC,EAAOA,EAAQC,EAAQxC,EAAe94L,EAAWmzG,EAAIz0G,GACrF,OAAO,OAGTu2B,GAAKylK,EAAW/7L,EAAIC,EAAIw8L,EAAIC,EAAOA,EAAQC,EAAQxC,EAAe3lF,EAAIz0G,GAGxEm8L,EAAK7hM,KAAK0sB,IAAI21K,EAAQC,GAAUH,EAAKx8L,EACrCm8L,EAAK9hM,KAAK4sB,IAAIy1K,EAAQC,GAAUF,EAAKx8L,EACrC,MAEF,KAAK46L,EAAI+B,EACPp5K,EAAK04K,EAAKznM,EAAKqV,KACfm4B,EAAKk6J,EAAK1nM,EAAKqV,KACf,IAAI1K,EAAQ3K,EAAKqV,KACbjK,EAASpL,EAAKqV,KACd8Y,EAAKY,EAAKpkB,EACVyjB,EAAKof,EAAKpiC,EAEd,GAAIo8L,GACF,GAAIzpL,EAAK8uB,cAAc9d,EAAIye,EAAIrf,EAAIqf,EAAI5gC,EAAWvB,EAAGC,IAAMyS,EAAK8uB,cAAc1e,EAAIqf,EAAIrf,EAAIC,EAAIxhB,EAAWvB,EAAGC,IAAMyS,EAAK8uB,cAAc1e,EAAIC,EAAIW,EAAIX,EAAIxhB,EAAWvB,EAAGC,IAAMyS,EAAK8uB,cAAc9d,EAAIX,EAAIW,EAAIye,EAAI5gC,EAAWvB,EAAGC,GACxN,OAAO,OAITu2B,GAAKskK,EAAYh4K,EAAIqf,EAAIrf,EAAIC,EAAI/iB,EAAGC,GACpCu2B,GAAKskK,EAAYp3K,EAAIX,EAAIW,EAAIye,EAAIniC,EAAGC,GAGtC,MAEF,KAAK86L,EAAIgC,EACP,GAAIZ,GACF,GAAIzpL,EAAK8uB,cAAc46J,EAAIC,EAAI34K,EAAIye,EAAI5gC,EAAWvB,EAAGC,GACnD,OAAO,OAITu2B,GAAKskK,EAAYsB,EAAIC,EAAI34K,EAAIye,EAAIniC,EAAGC,GAOtCm8L,EAAK14K,EACL24K,EAAKl6J,EACL,MAEN,CAMA,OAJKg6J,GAAalB,EAAcoB,EAAIl6J,KAClC3L,GAAKskK,EAAYsB,EAAIC,EAAI34K,EAAIye,EAAIniC,EAAGC,IAAM,GAG/B,IAANu2B,CACT,CAEA,SAAS3F,EAAQvZ,EAAUtX,EAAGC,GAC5B,OAAOi8L,EAAY5kL,EAAU,GAAG,EAAOtX,EAAGC,EAC5C,CAEA,SAASuhC,EAAclqB,EAAU/V,EAAWvB,EAAGC,GAC7C,OAAOi8L,EAAY5kL,EAAU/V,GAAW,EAAMvB,EAAGC,EACnD,CAEArK,EAAQi7B,QAAUA,EAClBj7B,EAAQ4rC,cAAgBA,C,qBC1YxB,IAAIs5J,EAActlM,EAAQ,OAEtBwlM,EAAU,KAEd,SAASC,EAAcz4K,EAAGC,GACxB,OAAOloB,KAAKiH,IAAIghB,EAAIC,GAAKu4K,CAC3B,CAEA,SAASnqK,EAAQnQ,EAAQ1gB,EAAGC,GAC1B,IAAIu2B,EAAI,EACJrkB,EAAIuO,EAAO,GAEf,IAAKvO,EACH,OAAO,EAGT,IAAK,IAAInI,EAAI,EAAGA,EAAI0W,EAAOxY,OAAQ8B,IAAK,CACtC,IAAIuoB,EAAK7R,EAAO1W,GAChBwsB,GAAKskK,EAAY3oL,EAAE,GAAIA,EAAE,GAAIogB,EAAG,GAAIA,EAAG,GAAIvyB,EAAGC,GAC9CkS,EAAIogB,CACN,CAGA,IAAIF,EAAK3R,EAAO,GAMhB,OAJKu6K,EAAc9oL,EAAE,GAAIkgB,EAAG,KAAQ4oK,EAAc9oL,EAAE,GAAIkgB,EAAG,MACzDmE,GAAKskK,EAAY3oL,EAAE,GAAIA,EAAE,GAAIkgB,EAAG,GAAIA,EAAG,GAAIryB,EAAGC,IAGnC,IAANu2B,CACT,CAEA5gC,EAAQi7B,QAAUA,C,wBChClB,IAAImsK,EAASxnM,EAAQ,OAEjBynM,EAAwBD,EAAOC,sBAenC,SAASz7J,EAAc9d,EAAIye,EAAIrf,EAAIC,EAAIC,EAAIE,EAAI3hB,EAAWvB,EAAGC,GAC3D,GAAkB,IAAdsB,EACF,OAAO,EAGT,IAAI+4L,EAAK/4L,EAET,GAAItB,EAAIkiC,EAAKm4J,GAAMr6L,EAAI8iB,EAAKu3K,GAAMr6L,EAAIijB,EAAKo3K,GAAMr6L,EAAIkiC,EAAKm4J,GAAMr6L,EAAI8iB,EAAKu3K,GAAMr6L,EAAIijB,EAAKo3K,GAAMt6L,EAAI0jB,EAAK42K,GAAMt6L,EAAI8iB,EAAKw3K,GAAMt6L,EAAIgjB,EAAKs3K,GAAMt6L,EAAI0jB,EAAK42K,GAAMt6L,EAAI8iB,EAAKw3K,GAAMt6L,EAAIgjB,EAAKs3K,EAChL,OAAO,EAGT,IAAI9nK,EAAIyqK,EAAsBv5K,EAAIye,EAAIrf,EAAIC,EAAIC,EAAIE,EAAIljB,EAAGC,EAAG,MAC5D,OAAOuyB,GAAK8nK,EAAK,CACnB,CAEA1kM,EAAQ4rC,cAAgBA,C,gCChCxB,IAAIu2B,EAAeviE,EAAQ,OAEvB0nM,EAAc1nM,EAAQ,OAEtBs2D,EAAQt2D,EAAQ,OAEhB8iC,EAAawzB,EAAMxzB,WACnBh9B,EAASwwD,EAAMxwD,OACfiZ,EAAYu3C,EAAMv3C,UAClB0G,EAAY6wC,EAAM7wC,UAClBkiL,EAAiB,CAAC,EAClBC,EAAwB,EACxBC,EAAiB,IACjBC,EAAY,gCACZC,EAAe,kBAEf3oM,EAAU,CAAC,EAEf,SAASgnK,EAAUrkK,EAAMuyF,GACvBl1F,EAAQ2C,GAAQuyF,CAClB,CASA,SAAS9kF,EAAS3F,EAAM4a,GACtBA,EAAOA,GAAQsjL,EACf,IAAI7nM,EAAM2J,EAAO,IAAM4a,EAEvB,GAAIkjL,EAAeznM,GACjB,OAAOynM,EAAeznM,GAMxB,IAHA,IAAI8nM,GAAan+L,EAAO,IAAIu2B,MAAM,MAC9Bt2B,EAAQ,EAEH0K,EAAI,EAAGotB,EAAIomK,EAAUt1L,OAAQ8B,EAAIotB,EAAGptB,IAE3C1K,EAAQ/E,KAAKF,IAAIojM,EAAYD,EAAUxzL,GAAIiQ,GAAM3a,MAAOA,GAU1D,OAPI89L,EAAwBC,IAC1BD,EAAwB,EACxBD,EAAiB,CAAC,GAGpBC,IACAD,EAAeznM,GAAO4J,EACfA,CACT,CAcA,SAASoxB,EAAgBrxB,EAAM4a,EAAMqH,EAAWC,EAAmBi1J,EAAaZ,EAAMl2G,GACpF,OAAOk2G,EAAO8nB,EAAgBr+L,EAAM4a,EAAMqH,EAAWC,EAAmBi1J,EAAaZ,EAAMl2G,GAAYi+H,EAAiBt+L,EAAM4a,EAAMqH,EAAWC,EAAmBi1J,EAAa92G,EACjL,CAEA,SAASi+H,EAAiBt+L,EAAM4a,EAAMqH,EAAWC,EAAmBi1J,EAAa92G,GAC/E,IAAIk+H,EAAeC,EAAex+L,EAAM4a,EAAMu8J,EAAa92G,GACvDC,EAAa36D,EAAS3F,EAAM4a,GAE5Bu8J,IACF72G,GAAc62G,EAAY,GAAKA,EAAY,IAG7C,IAAI52G,EAAcg+H,EAAah+H,YAC3B5/D,EAAI89L,EAAY,EAAGn+H,EAAYr+C,GAC/BrhB,EAAI89L,EAAY,EAAGn+H,EAAar+C,GAChC9iB,EAAO,IAAIs5D,EAAa/3D,EAAGC,EAAG0/D,EAAYC,GAE9C,OADAnhE,EAAKu/L,WAAaJ,EAAaI,WACxBv/L,CACT,CAEA,SAASi/L,EAAgBr+L,EAAM4a,EAAMqH,EAAWC,EAAmBi1J,EAAaZ,EAAMl2G,GACpF,IAAIk+H,EAAeK,EAAc5+L,EAAM,CACrCu2K,KAAMA,EACNl2G,SAAUA,EACVzlD,KAAMA,EACNqH,UAAWA,EACXk1J,YAAaA,IAEX72G,EAAai+H,EAAaj+H,WAC1BC,EAAcg+H,EAAah+H,YAC3B5/D,EAAI89L,EAAY,EAAGn+H,EAAYr+C,GAC/BrhB,EAAI89L,EAAY,EAAGn+H,EAAar+C,GACpC,OAAO,IAAIw2C,EAAa/3D,EAAGC,EAAG0/D,EAAYC,EAC5C,CAUA,SAASk+H,EAAY99L,EAAGV,EAAOgiB,GAQ7B,MANkB,UAAdA,EACFthB,GAAKV,EACkB,WAAdgiB,IACTthB,GAAKV,EAAQ,GAGRU,CACT,CAUA,SAAS+9L,EAAY99L,EAAGF,EAAQwhB,GAO9B,MAN0B,WAAtBA,EACFthB,GAAKF,EAAS,EACiB,WAAtBwhB,IACTthB,GAAKF,GAGAE,CACT,CAUA,SAASi+L,EAAyB7wL,EAAc5O,EAAM8lB,GACpD,IAAIvkB,EAAIvB,EAAKuB,EACTC,EAAIxB,EAAKwB,EACTF,EAAStB,EAAKsB,OACdT,EAAQb,EAAKa,MACb6+L,EAAap+L,EAAS,EACtBuhB,EAAY,OACZC,EAAoB,MAExB,OAAQlU,GACN,IAAK,OACHrN,GAAKukB,EACLtkB,GAAKk+L,EACL78K,EAAY,QACZC,EAAoB,SACpB,MAEF,IAAK,QACHvhB,GAAKukB,EAAWjlB,EAChBW,GAAKk+L,EACL58K,EAAoB,SACpB,MAEF,IAAK,MACHvhB,GAAKV,EAAQ,EACbW,GAAKskB,EACLjD,EAAY,SACZC,EAAoB,SACpB,MAEF,IAAK,SACHvhB,GAAKV,EAAQ,EACbW,GAAKF,EAASwkB,EACdjD,EAAY,SACZ,MAEF,IAAK,SACHthB,GAAKV,EAAQ,EACbW,GAAKk+L,EACL78K,EAAY,SACZC,EAAoB,SACpB,MAEF,IAAK,aACHvhB,GAAKukB,EACLtkB,GAAKk+L,EACL58K,EAAoB,SACpB,MAEF,IAAK,cACHvhB,GAAKV,EAAQilB,EACbtkB,GAAKk+L,EACL78K,EAAY,QACZC,EAAoB,SACpB,MAEF,IAAK,YACHvhB,GAAKV,EAAQ,EACbW,GAAKskB,EACLjD,EAAY,SACZ,MAEF,IAAK,eACHthB,GAAKV,EAAQ,EACbW,GAAKF,EAASwkB,EACdjD,EAAY,SACZC,EAAoB,SACpB,MAEF,IAAK,gBACHvhB,GAAKukB,EACLtkB,GAAKskB,EACL,MAEF,IAAK,iBACHvkB,GAAKV,EAAQilB,EACbtkB,GAAKskB,EACLjD,EAAY,QACZ,MAEF,IAAK,mBACHthB,GAAKukB,EACLtkB,GAAKF,EAASwkB,EACdhD,EAAoB,SACpB,MAEF,IAAK,oBACHvhB,GAAKV,EAAQilB,EACbtkB,GAAKF,EAASwkB,EACdjD,EAAY,QACZC,EAAoB,SACpB,MAGJ,MAAO,CACLvhB,EAAGA,EACHC,EAAGA,EACHqhB,UAAWA,EACXC,kBAAmBA,EAEvB,CAmBA,SAASw7D,EAAa19E,EAAM0iE,EAAgB9nD,EAAM27C,EAAUwM,GAC1D,IAAKL,EACH,MAAO,GAGT,IAAIy7H,GAAan+L,EAAO,IAAIu2B,MAAM,MAClCwsC,EAAUg8H,EAAuBr8H,EAAgB9nD,EAAM27C,EAAUwM,GAGjE,IAAK,IAAIp4D,EAAI,EAAGuY,EAAMi7K,EAAUt1L,OAAQ8B,EAAIuY,EAAKvY,IAC/CwzL,EAAUxzL,GAAKq0L,EAAmBb,EAAUxzL,GAAIo4D,GAGlD,OAAOo7H,EAAUlyL,KAAK,KACxB,CAEA,SAAS8yL,EAAuBr8H,EAAgB9nD,EAAM27C,EAAUwM,GAC9DA,EAAU9mE,EAAO,CAAC,EAAG8mE,GACrBA,EAAQnoD,KAAOA,EACX27C,EAAWrhD,EAAUqhD,EAAU,OACnCwM,EAAQk8H,cAAgB/pL,EAAU6tD,EAAQk8H,cAAe,GACzD,IAAIz+H,EAAUuC,EAAQvC,QAAUtrD,EAAU6tD,EAAQvC,QAAS,GAG3DuC,EAAQm8H,YAAcv5L,EAAS,IAAKiV,GAGpC,IAAIukL,EAAep8H,EAAQo8H,aAAex5L,EAAS,IAAKiV,GACxDmoD,EAAQ4a,YAAczoE,EAAU6tD,EAAQ4a,YAAa,IAKrD,IAFA,IAAIhe,EAAe+C,EAAiBxnE,KAAKF,IAAI,EAAG0nE,EAAiB,GAExD/3D,EAAI,EAAGA,EAAI61D,GAAWb,GAAgBw/H,EAAcx0L,IAC3Dg1D,GAAgBw/H,EAGlB,IAAIC,EAAgBz5L,EAAS4wD,GAY7B,OAVI6oI,EAAgBz/H,IAClBpJ,EAAW,GACX6oI,EAAgB,GAGlBz/H,EAAe+C,EAAiB08H,EAChCr8H,EAAQxM,SAAWA,EACnBwM,EAAQq8H,cAAgBA,EACxBr8H,EAAQpD,aAAeA,EACvBoD,EAAQL,eAAiBA,EAClBK,CACT,CAEA,SAASi8H,EAAmBK,EAAUt8H,GACpC,IAAIL,EAAiBK,EAAQL,eACzB9nD,EAAOmoD,EAAQnoD,KACf+kD,EAAeoD,EAAQpD,aAE3B,IAAK+C,EACH,MAAO,GAGT,IAAIxgE,EAAYyD,EAAS05L,EAAUzkL,GAEnC,GAAI1Y,GAAawgE,EACf,OAAO28H,EAGT,IAAK,IAAIr3K,EAAI,GAAIA,IAAK,CACpB,GAAI9lB,GAAay9D,GAAgB33C,GAAK+6C,EAAQk8H,cAAe,CAC3DI,GAAYt8H,EAAQxM,SACpB,KACF,CAEA,IAAI+oI,EAAkB,IAANt3K,EAAUu3K,EAAeF,EAAU1/H,EAAcoD,EAAQo8H,aAAcp8H,EAAQm8H,aAAeh9L,EAAY,EAAIhH,KAAKy+B,MAAM0lK,EAASx2L,OAAS82D,EAAez9D,GAAa,EACvLm9L,EAAWA,EAAS/sB,OAAO,EAAGgtB,GAC9Bp9L,EAAYyD,EAAS05L,EAAUzkL,EACjC,CAMA,MAJiB,KAAbykL,IACFA,EAAWt8H,EAAQ4a,aAGd0hH,CACT,CAEA,SAASE,EAAev/L,EAAM2/D,EAAcw/H,EAAcD,GAIxD,IAHA,IAAIj/L,EAAQ,EACR0K,EAAI,EAECuY,EAAMljB,EAAK6I,OAAQ8B,EAAIuY,GAAOjjB,EAAQ0/D,EAAch1D,IAAK,CAChE,IAAI60L,EAAWx/L,EAAKg6H,WAAWrvH,GAC/B1K,GAAS,GAAKu/L,GAAYA,GAAY,IAAML,EAAeD,CAC7D,CAEA,OAAOv0L,CACT,CAQA,SAAS80L,EAAc7kL,GAErB,OAAOjV,EAAS,IAAKiV,EACvB,CASA,SAASwjL,EAAYp+L,EAAM4a,GACzB,OAAOrlB,EAAQ6oM,YAAYp+L,EAAM4a,EACnC,CAkBA,SAAS4jL,EAAex+L,EAAM4a,EAAM6K,EAAS46C,GACnC,MAARrgE,IAAiBA,GAAQ,IACzB,IAAI2+L,EAAac,EAAc7kL,GAC3Bg/D,EAAQ55E,EAAOA,EAAKu2B,MAAM,MAAQ,GAClC71B,EAASk5E,EAAM/wE,OAAS81L,EACxBp+H,EAAc7/D,EAMlB,GAJI+kB,IACF86C,GAAe96C,EAAQ,GAAKA,EAAQ,IAGlCzlB,GAAQqgE,EAAU,CACpB,IAAIq/H,EAAmBr/H,EAASE,YAC5Bo/H,EAAkBt/H,EAASC,WAE/B,GAAwB,MAApBo/H,GAA4Bn/H,EAAcm/H,EAC5C1/L,EAAO,GACP45E,EAAQ,QACH,GAAuB,MAAnB+lH,EAOT,IANA,IAAI58H,EAAUg8H,EAAuBY,GAAmBl6K,EAAUA,EAAQ,GAAKA,EAAQ,GAAK,GAAI7K,EAAMylD,EAAS9J,SAAU,CACvHiK,QAASH,EAASG,QAClBmd,YAAatd,EAASsd,cAIfhzE,EAAI,EAAGuY,EAAM02D,EAAM/wE,OAAQ8B,EAAIuY,EAAKvY,IAC3CivE,EAAMjvE,GAAKq0L,EAAmBplH,EAAMjvE,GAAIo4D,EAG9C,CAEA,MAAO,CACL6W,MAAOA,EACPl5E,OAAQA,EACR6/D,YAAaA,EACbo+H,WAAYA,EAEhB,CAiCA,SAASC,EAAc5+L,EAAMD,GAC3B,IAAIw+L,EAAe,CACjB3kH,MAAO,GACP35E,MAAO,EACPS,OAAQ,GAIV,GAFQ,MAARV,IAAiBA,GAAQ,KAEpBA,EACH,OAAOu+L,EAGT,IACI5tL,EADAmqB,EAAYmjK,EAAUnjK,UAAY,EAGtC,MAA0C,OAAlCnqB,EAASstL,EAAUpgB,KAAK79K,IAAgB,CAC9C,IAAI4/L,EAAejvL,EAAO3L,MAEtB46L,EAAe9kK,GACjB+kK,EAAWtB,EAAcv+L,EAAKo2H,UAAUt7F,EAAW8kK,IAGrDC,EAAWtB,EAAc5tL,EAAO,GAAIA,EAAO,IAC3CmqB,EAAYmjK,EAAUnjK,SACxB,CAEIA,EAAY96B,EAAK6I,QACnBg3L,EAAWtB,EAAcv+L,EAAKo2H,UAAUt7F,EAAW96B,EAAK6I,SAG1D,IAAI+wE,EAAQ2kH,EAAa3kH,MACrBha,EAAgB,EAChBD,EAAe,EAEfoW,EAAc,GACd+pH,EAAa//L,EAAMo3K,YACnB92G,EAAWtgE,EAAMsgE,SACjB0/H,EAAgB1/H,GAAYA,EAASC,WACrC0/H,EAAiB3/H,GAAYA,EAASE,YAEtCu/H,IACe,MAAjBC,IAA0BA,GAAiBD,EAAW,GAAKA,EAAW,IACpD,MAAlBE,IAA2BA,GAAkBF,EAAW,GAAKA,EAAW,KAI1E,IAAK,IAAIn1L,EAAI,EAAGA,EAAIivE,EAAM/wE,OAAQ8B,IAAK,CAKrC,IAJA,IAAI0I,EAAOumE,EAAMjvE,GACbg0L,EAAa,EACbz8L,EAAY,EAEP8lB,EAAI,EAAGA,EAAI3U,EAAK4sL,OAAOp3L,OAAQmf,IAAK,CAC3C,IAAIolK,EAAQ/5K,EAAK4sL,OAAOj4K,GACpBk4K,EAAa9S,EAAMvjB,WAAa9pK,EAAMw2K,KAAK6W,EAAMvjB,YAAc,CAAC,EAEhEsN,EAAciW,EAAMjW,YAAc+oB,EAAW/oB,YAE7Cv8J,EAAOwyK,EAAMxyK,KAAOslL,EAAWtlL,MAAQ7a,EAAM6a,KAE7CulL,EAAc/S,EAAM3kK,WAAavT,EAErCgrL,EAAWz3K,WAAYg3K,EAAc7kL,IAOrC,GANAu8J,IAAgBgpB,GAAehpB,EAAY,GAAKA,EAAY,IAC5DiW,EAAM1sL,OAASy/L,EACf/S,EAAMuR,WAAa/iL,EAAUskL,EAAWlpB,eAAgBj3K,EAAMi3K,eAAgBmpB,GAC9E/S,EAAMnrK,UAAYi+K,GAAcA,EAAWj+K,WAAaliB,EAAMkiB,UAC9DmrK,EAAMlrK,kBAAoBg+K,GAAcA,EAAWh+K,mBAAqB,SAElD,MAAlB89K,GAA0BpgI,EAAgBwtH,EAAMuR,WAAaqB,EAC/D,MAAO,CACLpmH,MAAO,GACP35E,MAAO,EACPS,OAAQ,GAIZ0sL,EAAM5kK,UAAY7iB,EAASynL,EAAMptL,KAAM4a,GACvC,IAAIwlL,EAAaF,EAAW13K,UACxB63K,EAAuC,MAAdD,GAAqC,SAAfA,EAGnD,GAA0B,kBAAfA,GAAwE,MAA7CA,EAAW3nL,OAAO2nL,EAAWv3L,OAAS,GAC1EukL,EAAMkT,aAAeF,EACrBrqH,EAAYrgF,KAAK03L,GACjBgT,EAAa,MAER,CACL,GAAIC,EAAwB,CAC1BD,EAAahT,EAAM5kK,UAGnB,IAAI0uJ,EAAsBgpB,EAAWhpB,oBACjCqpB,EAAQrpB,GAAuBA,EAAoB7+J,MAWnDkoL,IACFA,EAAQ1C,EAAY2C,eAAeD,GAE/B1C,EAAY4C,aAAaF,KAC3BH,EAAallM,KAAKF,IAAIolM,EAAYG,EAAMtgM,MAAQkgM,EAAcI,EAAM7/L,SAG1E,CAEA,IAAIggM,EAAWvpB,EAAcA,EAAY,GAAKA,EAAY,GAAK,EAC/DipB,GAAcM,EACd,IAAIC,EAAoC,MAAjBZ,EAAwBA,EAAgB79L,EAAY,KAEnD,MAApBy+L,GAA4BA,EAAmBP,KAC5CC,GAA0BM,EAAmBD,GAChDtT,EAAMptL,KAAO,GACbotL,EAAM5kK,UAAY43K,EAAa,IAE/BhT,EAAMptL,KAAO09E,EAAa0vG,EAAMptL,KAAM2gM,EAAmBD,EAAU9lL,EAAMylD,EAAS9J,SAAU,CAC1FiK,QAASH,EAASG,UAEpB4sH,EAAM5kK,UAAY7iB,EAASynL,EAAMptL,KAAM4a,GACvCwlL,EAAahT,EAAM5kK,UAAYk4K,GAGrC,CAEAx+L,GAAakrL,EAAMntL,MAAQmgM,EAC3BF,IAAevB,EAAazjM,KAAKF,IAAI2jM,EAAYvR,EAAMuR,YACzD,CAEAtrL,EAAKpT,MAAQiC,EACbmR,EAAKsrL,WAAaA,EAClB/+H,GAAiB++H,EACjBh/H,EAAezkE,KAAKF,IAAI2kE,EAAcz9D,EACxC,CAEAq8L,EAAaj+H,WAAai+H,EAAat+L,MAAQiV,EAAUnV,EAAMyoB,UAAWm3C,GAC1E4+H,EAAah+H,YAAcg+H,EAAa79L,OAASwU,EAAUnV,EAAM0oB,WAAYm3C,GAEzEkgI,IACFvB,EAAaj+H,YAAcw/H,EAAW,GAAKA,EAAW,GACtDvB,EAAah+H,aAAeu/H,EAAW,GAAKA,EAAW,IAGzD,IAASn1L,EAAI,EAAGA,EAAIorE,EAAYltE,OAAQ8B,IAAK,CACvCyiL,EAAQr3G,EAAYprE,GAAxB,IACI21L,EAAelT,EAAMkT,aAEzBlT,EAAMntL,MAAQ8hI,SAASu+D,EAAc,IAAM,IAAM3gI,CACnD,CAEA,OAAO4+H,CACT,CAEA,SAASsB,EAAW5sE,EAAOH,EAAK+2C,GAK9B,IAJA,IAAI+2B,EAAqB,KAAR9tE,EACb+tE,EAAO/tE,EAAIv8F,MAAM,MACjBqjD,EAAQq5C,EAAMr5C,MAETjvE,EAAI,EAAGA,EAAIk2L,EAAKh4L,OAAQ8B,IAAK,CACpC,IAAI3K,EAAO6gM,EAAKl2L,GACZyiL,EAAQ,CACVvjB,UAAWA,EACX7pK,KAAMA,EACN8gM,cAAe9gM,IAAS4gM,GAG1B,GAAKj2L,EAkBDivE,EAAMlkF,KAAK,CACTuqM,OAAQ,CAAC7S,SAnBP,CACN,IAAI6S,GAAUrmH,EAAMA,EAAM/wE,OAAS,KAAO+wE,EAAM,GAAK,CACnDqmH,OAAQ,MACNA,OAQAc,EAAYd,EAAOp3L,OACT,IAAdk4L,GAAmBd,EAAO,GAAGa,aAAeb,EAAO,GAAK7S,GAEvDptL,IAAS+gM,GAAaH,IAAeX,EAAOvqM,KAAK03L,EACpD,CAOF,CACF,CAEA,SAASh9D,EAASrwH,GAGhB,OAAQA,EAAMulB,UAAYvlB,EAAM+lC,aAAe,CAAC/lC,EAAM6lC,UAAW7lC,EAAM8lC,YAAa9lC,EAAMulB,UAAY,IAAM,KAC5GvlB,EAAM+lC,YAAc,cAAc75B,KAAK,MAAQlM,EAAM61D,UAAY71D,EAAM6a,IACzE,CA9RArlB,EAAQ6oM,YAAc,SAAUp+L,EAAM4a,GACpC,IAAIgO,EAAMqQ,IAEV,OADArQ,EAAIhO,KAAOA,GAAQsjL,EACZt1K,EAAIw1K,YAAYp+L,EACzB,EA4RAzJ,EAAQ2nM,aAAeA,EACvB3nM,EAAQgmK,UAAYA,EACpBhmK,EAAQoP,SAAWA,EACnBpP,EAAQ86B,gBAAkBA,EAC1B96B,EAAQkoM,YAAcA,EACtBloM,EAAQmoM,YAAcA,EACtBnoM,EAAQsoM,yBAA2BA,EACnCtoM,EAAQmnF,aAAeA,EACvBnnF,EAAQkpM,cAAgBA,EACxBlpM,EAAQ6nM,YAAcA,EACtB7nM,EAAQioM,eAAiBA,EACzBjoM,EAAQqoM,cAAgBA,EACxBroM,EAAQ65H,SAAWA,C,sBC9qBnB,IAAIrqG,EAAgB,EAAV7qB,KAAK0L,GAEf,SAASm0L,EAAgBzzK,GAOvB,OANAA,GAASvB,EAELuB,EAAQ,IACVA,GAASvB,GAGJuB,CACT,CAEA/wB,EAAQwkM,gBAAkBA,C,oBCZ1B,SAASU,EAAYp3K,EAAIye,EAAIrf,EAAIC,EAAI/iB,EAAGC,GACtC,GAAIA,EAAIkiC,GAAMliC,EAAI8iB,GAAM9iB,EAAIkiC,GAAMliC,EAAI8iB,EACpC,OAAO,EAIT,GAAIA,IAAOof,EACT,OAAO,EAGT,IAAI6M,EAAMjsB,EAAKof,EAAK,GAAK,EACrB/P,GAAKnyB,EAAIkiC,IAAOpf,EAAKof,GAEf,IAAN/P,GAAiB,IAANA,IACb4c,EAAMjsB,EAAKof,EAAK,IAAO,IAGzB,IAAIu5J,EAAKtpK,GAAKtP,EAAKY,GAAMA,EACzB,OAAOg4K,EAAK17L,EAAIgvC,EAAM,CACxB,CAEA73C,EAAOvB,QAAUklM,C,iCCrBjB,IAAIjlM,EAASL,EAAQ,OAEjBsvL,EAAUtvL,EAAQ,OAElBuiE,EAAeviE,EAAQ,OA2BvB2V,EAAQ,SAAU2qB,GAIpB,IAAK,IAAIpgC,KAHTogC,EAAOA,GAAQ,CAAC,EAChBgvJ,EAAQp5K,KAAK3X,KAAM+hC,GAEHA,EACVA,EAAKngC,eAAeD,KACtB3B,KAAK2B,GAAOogC,EAAKpgC,IAIrB3B,KAAKy9L,UAAY,GACjBz9L,KAAK29L,UAAY,KACjB39L,KAAKyvC,SAAU,CACjB,EAEAr4B,EAAMlV,UAAY,CAChBC,YAAaiV,EACb8tJ,SAAS,EAKTxiK,KAAM,QAQN+T,QAAQ,EAKRiB,SAAU,WACR,OAAO1X,KAAKy9L,UAAUz6L,OACxB,EAOAmY,QAAS,SAAU1W,GACjB,OAAOzE,KAAKy9L,UAAUh5L,EACxB,EAOA6qC,YAAa,SAAU9rC,GAGrB,IAFA,IAAIkU,EAAW1X,KAAKy9L,UAEXxnL,EAAI,EAAGA,EAAIyB,EAASvD,OAAQ8B,IACnC,GAAIyB,EAASzB,GAAGzS,OAASA,EACvB,OAAOkU,EAASzB,EAGtB,EAKAw2K,WAAY,WACV,OAAOzsL,KAAKy9L,UAAUtpL,MACxB,EAMAhL,IAAK,SAAUqf,GAOb,OANIA,GAASA,IAAUxoB,MAAQwoB,EAAMhd,SAAWxL,OAC9CA,KAAKy9L,UAAUz8L,KAAKwnB,GAEpBxoB,KAAKssM,OAAO9jL,IAGPxoB,IACT,EAOAusM,UAAW,SAAU/jL,EAAOgyK,GAC1B,GAAIhyK,GAASA,IAAUxoB,MAAQwoB,EAAMhd,SAAWxL,MAAQw6L,GAAeA,EAAYhvL,SAAWxL,KAAM,CAClG,IAAI0X,EAAW1X,KAAKy9L,UAChBh5L,EAAMiT,EAASyE,QAAQq+K,GAEvB/1L,GAAO,IACTiT,EAAS+nD,OAAOh7D,EAAK,EAAG+jB,GAExBxoB,KAAKssM,OAAO9jL,GAEhB,CAEA,OAAOxoB,IACT,EACAssM,OAAQ,SAAU9jL,GACZA,EAAMhd,QACRgd,EAAMhd,OAAOtB,OAAOse,GAGtBA,EAAMhd,OAASxL,KACf,IAAIunE,EAAUvnE,KAAK29L,UACfp5I,EAAKvkD,KAAKu/K,KAEVh4G,GAAWA,IAAY/+C,EAAMm1K,YAC/Bp2H,EAAQs2H,aAAar1K,GAEjBA,aAAiBpR,GACnBoR,EAAMo1K,qBAAqBr2H,IAI/BhjB,GAAMA,EAAG2sI,SACX,EAMAhnL,OAAQ,SAAUse,GAChB,IAAI+7B,EAAKvkD,KAAKu/K,KACVh4G,EAAUvnE,KAAK29L,UACfjmL,EAAW1X,KAAKy9L,UAChBh5L,EAAM3C,EAAOqa,QAAQzE,EAAU8Q,GAEnC,OAAI/jB,EAAM,IAIViT,EAAS+nD,OAAOh7D,EAAK,GACrB+jB,EAAMhd,OAAS,KAEX+7D,IACFA,EAAQy2H,eAAex1K,GAEnBA,aAAiBpR,GACnBoR,EAAMu1K,uBAAuBx2H,IAIjChjB,GAAMA,EAAG2sI,WAdAlxL,IAgBX,EAKAuK,UAAW,WACT,IAEIie,EACAvS,EAHAyB,EAAW1X,KAAKy9L,UAChBl2H,EAAUvnE,KAAK29L,UAInB,IAAK1nL,EAAI,EAAGA,EAAIyB,EAASvD,OAAQ8B,IAC/BuS,EAAQ9Q,EAASzB,GAEbsxD,IACFA,EAAQy2H,eAAex1K,GAEnBA,aAAiBpR,GACnBoR,EAAMu1K,uBAAuBx2H,IAIjC/+C,EAAMhd,OAAS,KAIjB,OADAkM,EAASvD,OAAS,EACXnU,IACT,EAOA+rC,UAAW,SAAUv0B,EAAIC,GAGvB,IAFA,IAAIC,EAAW1X,KAAKy9L,UAEXxnL,EAAI,EAAGA,EAAIyB,EAASvD,OAAQ8B,IAAK,CACxC,IAAIuS,EAAQ9Q,EAASzB,GACrBuB,EAAGG,KAAKF,EAAS+Q,EAAOvS,EAC1B,CAEA,OAAOjW,IACT,EAOA45B,SAAU,SAAUpiB,EAAIC,GACtB,IAAK,IAAIxB,EAAI,EAAGA,EAAIjW,KAAKy9L,UAAUtpL,OAAQ8B,IAAK,CAC9C,IAAIuS,EAAQxoB,KAAKy9L,UAAUxnL,GAC3BuB,EAAGG,KAAKF,EAAS+Q,GAEE,UAAfA,EAAM9lB,MACR8lB,EAAMoR,SAASpiB,EAAIC,EAEvB,CAEA,OAAOzX,IACT,EACA49L,qBAAsB,SAAUr2H,GAC9B,IAAK,IAAItxD,EAAI,EAAGA,EAAIjW,KAAKy9L,UAAUtpL,OAAQ8B,IAAK,CAC9C,IAAIuS,EAAQxoB,KAAKy9L,UAAUxnL,GAC3BsxD,EAAQs2H,aAAar1K,GAEjBA,aAAiBpR,GACnBoR,EAAMo1K,qBAAqBr2H,EAE/B,CACF,EACAw2H,uBAAwB,SAAUx2H,GAChC,IAAK,IAAItxD,EAAI,EAAGA,EAAIjW,KAAKy9L,UAAUtpL,OAAQ8B,IAAK,CAC9C,IAAIuS,EAAQxoB,KAAKy9L,UAAUxnL,GAC3BsxD,EAAQy2H,eAAex1K,GAEnBA,aAAiBpR,GACnBoR,EAAMu1K,uBAAuBx2H,EAEjC,CACF,EACAjsD,MAAO,WAGL,OAFAtb,KAAKyvC,SAAU,EACfzvC,KAAKu/K,MAAQv/K,KAAKu/K,KAAK2R,UAChBlxL,IACT,EAKA28B,gBAAiB,SAAU6vK,GAOzB,IALA,IAAI9hM,EAAO,KACPmrL,EAAU,IAAI7xH,EAAa,EAAG,EAAG,EAAG,GACpCtsD,EAAW80L,GAAmBxsM,KAAKy9L,UACnCgP,EAAS,GAEJx2L,EAAI,EAAGA,EAAIyB,EAASvD,OAAQ8B,IAAK,CACxC,IAAIuS,EAAQ9Q,EAASzB,GAErB,IAAIuS,EAAM2D,SAAU3D,EAAMq/C,UAA1B,CAIA,IAAI6kI,EAAYlkL,EAAMmU,kBAClBE,EAAYrU,EAAMsiE,kBAAkB2hH,GAQpC5vK,GACFg5J,EAAQn2J,KAAKgtK,GACb7W,EAAQj5J,eAAeC,GACvBnyB,EAAOA,GAAQmrL,EAAQtxK,QACvB7Z,EAAK60I,MAAMs2C,KAEXnrL,EAAOA,GAAQgiM,EAAUnoL,QACzB7Z,EAAK60I,MAAMmtD,GAlBb,CAoBF,CAEA,OAAOhiM,GAAQmrL,CACjB,GAEF/zL,EAAO6rB,SAASvW,EAAO25K,GACvB,IAAI5tL,EAAWiU,EACfhU,EAAOvB,QAAUsB,C,wBCvTjB,IAAIw6B,EAAOl8B,EAAQ,OAEfwiE,EAASxiE,EAAQ,OAKjBolF,EAAmBlpD,EAAKf,eACxB0wC,EAAU9mE,KAAKJ,IACfinE,EAAU7mE,KAAKF,IAKnB,SAAS09D,EAAa/3D,EAAGC,EAAGX,EAAOS,GAC7BT,EAAQ,IACVU,GAAQV,EACRA,GAASA,GAGPS,EAAS,IACXE,GAAQF,EACRA,GAAUA,GAOZhM,KAAKiM,EAAIA,EAKTjM,KAAKkM,EAAIA,EAKTlM,KAAKuL,MAAQA,EAKbvL,KAAKgM,OAASA,CAChB,CAEAg4D,EAAa9hE,UAAY,CACvBC,YAAa6hE,EAKbu7E,MAAO,SAAU7hB,GACf,IAAIzxH,EAAIqhE,EAAQowD,EAAMzxH,EAAGjM,KAAKiM,GAC1BC,EAAIohE,EAAQowD,EAAMxxH,EAAGlM,KAAKkM,GAC9BlM,KAAKuL,MAAQ8hE,EAAQqwD,EAAMzxH,EAAIyxH,EAAMnyH,MAAOvL,KAAKiM,EAAIjM,KAAKuL,OAASU,EACnEjM,KAAKgM,OAASqhE,EAAQqwD,EAAMxxH,EAAIwxH,EAAM1xH,OAAQhM,KAAKkM,EAAIlM,KAAKgM,QAAUE,EACtElM,KAAKiM,EAAIA,EACTjM,KAAKkM,EAAIA,CACX,EAMA0wB,eAAgB,WACd,IAAIquF,EAAK,GACLE,EAAK,GACLwhF,EAAK,GACLC,EAAK,GACT,OAAO,SAAU1zI,GAIf,GAAKA,EAAL,CAIA+xD,EAAG,GAAK0hF,EAAG,GAAK3sM,KAAKiM,EACrBg/G,EAAG,GAAK2hF,EAAG,GAAK5sM,KAAKkM,EACrBi/G,EAAG,GAAKyhF,EAAG,GAAK5sM,KAAKiM,EAAIjM,KAAKuL,MAC9B4/G,EAAG,GAAKwhF,EAAG,GAAK3sM,KAAKkM,EAAIlM,KAAKgM,OAC9B66E,EAAiBokC,EAAIA,EAAI/xD,GACzB2tB,EAAiBskC,EAAIA,EAAIjyD,GACzB2tB,EAAiB8lH,EAAIA,EAAIzzI,GACzB2tB,EAAiB+lH,EAAIA,EAAI1zI,GACzBl5D,KAAKiM,EAAIqhE,EAAQ29C,EAAG,GAAIE,EAAG,GAAIwhF,EAAG,GAAIC,EAAG,IACzC5sM,KAAKkM,EAAIohE,EAAQ29C,EAAG,GAAIE,EAAG,GAAIwhF,EAAG,GAAIC,EAAG,IACzC,IAAIC,EAAOx/H,EAAQ49C,EAAG,GAAIE,EAAG,GAAIwhF,EAAG,GAAIC,EAAG,IACvCE,EAAOz/H,EAAQ49C,EAAG,GAAIE,EAAG,GAAIwhF,EAAG,GAAIC,EAAG,IAC3C5sM,KAAKuL,MAAQshM,EAAO7sM,KAAKiM,EACzBjM,KAAKgM,OAAS8gM,EAAO9sM,KAAKkM,CAf1B,CAgBF,CACF,CA5BgB,GAmChBywI,mBAAoB,SAAUjuH,GAC5B,IAAID,EAAIzuB,KACJ+sM,EAAKr+K,EAAEnjB,MAAQkjB,EAAEljB,MACjB4mD,EAAKzjC,EAAE1iB,OAASyiB,EAAEziB,OAClBktD,EAAI+K,EAAO7hE,SAKf,OAHA6hE,EAAO4E,UAAU3P,EAAGA,EAAG,EAAEzqC,EAAExiB,GAAIwiB,EAAEviB,IACjC+3D,EAAOx9D,MAAMyyD,EAAGA,EAAG,CAAC6zI,EAAI56I,IACxB8R,EAAO4E,UAAU3P,EAAGA,EAAG,CAACxqC,EAAEziB,EAAGyiB,EAAExiB,IACxBgtD,CACT,EAMAqY,UAAW,SAAU7iD,GACnB,IAAKA,EACH,OAAO,EAGHA,aAAas1C,IAEjBt1C,EAAIs1C,EAAa5hE,OAAOssB,IAG1B,IAAID,EAAIzuB,KACJgtM,EAAMv+K,EAAExiB,EACRghM,EAAMx+K,EAAExiB,EAAIwiB,EAAEljB,MACd2hM,EAAMz+K,EAAEviB,EACRihM,EAAM1+K,EAAEviB,EAAIuiB,EAAEziB,OACdohM,EAAM1+K,EAAEziB,EACRohM,EAAM3+K,EAAEziB,EAAIyiB,EAAEnjB,MACd+hM,EAAM5+K,EAAExiB,EACRqhM,EAAM7+K,EAAExiB,EAAIwiB,EAAE1iB,OAClB,QAASihM,EAAMG,GAAOC,EAAML,GAAOG,EAAMG,GAAOC,EAAML,EACxD,EACApwK,QAAS,SAAU7wB,EAAGC,GACpB,IAAIxB,EAAO1K,KACX,OAAOiM,GAAKvB,EAAKuB,GAAKA,GAAKvB,EAAKuB,EAAIvB,EAAKa,OAASW,GAAKxB,EAAKwB,GAAKA,GAAKxB,EAAKwB,EAAIxB,EAAKsB,MACtF,EAKAuY,MAAO,WACL,OAAO,IAAIy/C,EAAahkE,KAAKiM,EAAGjM,KAAKkM,EAAGlM,KAAKuL,MAAOvL,KAAKgM,OAC3D,EAKA0zB,KAAM,SAAUg+F,GACd19H,KAAKiM,EAAIyxH,EAAMzxH,EACfjM,KAAKkM,EAAIwxH,EAAMxxH,EACflM,KAAKuL,MAAQmyH,EAAMnyH,MACnBvL,KAAKgM,OAAS0xH,EAAM1xH,MACtB,EACA24I,MAAO,WACL,MAAO,CACL14I,EAAGjM,KAAKiM,EACRC,EAAGlM,KAAKkM,EACRX,MAAOvL,KAAKuL,MACZS,OAAQhM,KAAKgM,OAEjB,GAWFg4D,EAAa5hE,OAAS,SAAUsI,GAC9B,OAAO,IAAIs5D,EAAat5D,EAAKuB,EAAGvB,EAAKwB,EAAGxB,EAAKa,MAAOb,EAAKsB,OAC3D,EAEA,IAAI7I,EAAW6gE,EACf5gE,EAAOvB,QAAUsB,C,iCCtLjB,IAAI4iI,EAAYtkI,EAAQ,OAKpB+rM,EAAa,WAKfxtM,KAAKm0G,OAAS,EAChB,EAiDA,SAAS7pE,EAAKmjK,GACZ,IAAIznM,EAAKynM,EAAU,GAAG,GAAKA,EAAU,GAAG,GACpCxnM,EAAKwnM,EAAU,GAAG,GAAKA,EAAU,GAAG,GACxC,OAAOjnM,KAAKgnD,KAAKxnD,EAAKA,EAAKC,EAAKA,EAClC,CAEA,SAASZ,EAAOooM,GACd,MAAO,EAAEA,EAAU,GAAG,GAAKA,EAAU,GAAG,IAAM,GAAIA,EAAU,GAAG,GAAKA,EAAU,GAAG,IAAM,EACzF,CAvDAD,EAAWtrM,UAAY,CACrBC,YAAaqrM,EACbE,UAAW,SAAU5oM,EAAOgR,EAAQ4jD,GAGlC,OAFA15D,KAAK2tM,SAAS7oM,EAAOgR,EAAQ4jD,GAEtB15D,KAAK4tM,WAAW9oM,EACzB,EACA8/C,MAAO,WAEL,OADA5kD,KAAKm0G,OAAOhgG,OAAS,EACdnU,IACT,EACA2tM,SAAU,SAAU7oM,EAAOgR,EAAQ4jD,GACjC,IAAIm0I,EAAU/oM,EAAM+oM,QAEpB,GAAKA,EAAL,CAWA,IAPA,IAAIC,EAAY,CACdnhL,OAAQ,GACRkhL,QAAS,GACT/3L,OAAQA,EACRhR,MAAOA,GAGAmR,EAAI,EAAGuY,EAAMq/K,EAAQ15L,OAAQ8B,EAAIuY,EAAKvY,IAAK,CAClD,IAAI83L,EAAQF,EAAQ53L,GAChBylB,EAAMqqG,EAAUioE,cAAct0I,EAAMq0I,EAAO,CAAC,GAChDD,EAAUnhL,OAAO3rB,KAAK,CAAC06B,EAAIm2J,IAAKn2J,EAAIo2J,MACpCgc,EAAUD,QAAQ7sM,KAAK+sM,EACzB,CAEA/tM,KAAKm0G,OAAOnzG,KAAK8sM,EAhBjB,CAiBF,EACAF,WAAY,SAAU9oM,GACpB,IAAK,IAAI6vG,KAAas5F,EACpB,GAAIA,EAAYrsM,eAAe+yG,GAAY,CACzC,IAAIu5F,EAAcD,EAAYt5F,GAAW30G,KAAKm0G,OAAQrvG,GAEtD,GAAIopM,EACF,OAAOA,CAEX,CAEJ,GAaF,IAAID,EAAc,CAChB3tF,MAAO,SAAUjK,EAAOvxG,GACtB,IAAI48L,EAAWrrF,EAAMliG,OAErB,GAAKutL,EAAL,CAIA,IAAIyM,GAAY93F,EAAMqrF,EAAW,IAAM,CAAC,GAAG/0K,OACvCyhL,GAAY/3F,EAAMqrF,EAAW,IAAM,CAAC,GAAG/0K,QAAUwhL,EAErD,GAAIC,GAAYA,EAASj6L,OAAS,GAAKg6L,GAAYA,EAASh6L,OAAS,EAAG,CACtE,IAAI+sG,EAAa52E,EAAK6jK,GAAY7jK,EAAK8jK,IACtCr9J,SAASmwE,KAAgBA,EAAa,GACvCp8G,EAAMo8G,WAAaA,EACnB,IAAImtF,EAAchpM,EAAO8oM,GAGzB,OAFArpM,EAAMq8G,OAASktF,EAAY,GAC3BvpM,EAAMs8G,OAASitF,EAAY,GACpB,CACL3rM,KAAM,QACNoT,OAAQugG,EAAM,GAAGvgG,OACjBhR,MAAOA,EAEX,CAjBA,CAkBF,GAGE3B,EAAWqqM,EACfpqM,EAAOvB,QAAUsB,C,oBC3FjB,IAAImrM,EAAa,WAIftuM,KAAKu/D,KAAO,KAKZv/D,KAAKw/D,KAAO,KACZx/D,KAAKuuM,KAAO,CACd,EAEIC,EAAkBF,EAAWpsM,UAOjCssM,EAAgBC,OAAS,SAAUtwL,GACjC,IAAIuwL,EAAQ,IAAIC,EAAMxwL,GAEtB,OADAne,KAAK4uM,YAAYF,GACVA,CACT,EAOAF,EAAgBI,YAAc,SAAUF,GACjC1uM,KAAKu/D,MAGRv/D,KAAKw/D,KAAK3gC,KAAO6vK,EACjBA,EAAMG,KAAO7uM,KAAKw/D,KAClBkvI,EAAM7vK,KAAO,KACb7+B,KAAKw/D,KAAOkvI,GALZ1uM,KAAKu/D,KAAOv/D,KAAKw/D,KAAOkvI,EAQ1B1uM,KAAKuuM,MACP,EAOAC,EAAgBtkM,OAAS,SAAUwkM,GACjC,IAAIG,EAAOH,EAAMG,KACbhwK,EAAO6vK,EAAM7vK,KAEbgwK,EACFA,EAAKhwK,KAAOA,EAGZ7+B,KAAKu/D,KAAO1gC,EAGVA,EACFA,EAAKgwK,KAAOA,EAGZ7uM,KAAKw/D,KAAOqvI,EAGdH,EAAM7vK,KAAO6vK,EAAMG,KAAO,KAC1B7uM,KAAKuuM,MACP,EAMAC,EAAgBhgL,IAAM,WACpB,OAAOxuB,KAAKuuM,IACd,EAMAC,EAAgB5pJ,MAAQ,WACtB5kD,KAAKu/D,KAAOv/D,KAAKw/D,KAAO,KACxBx/D,KAAKuuM,KAAO,CACd,EAOA,IAAII,EAAQ,SAAUxwL,GAIpBne,KAAK+N,MAAQoQ,EAKbne,KAAK6+B,KAKL7+B,KAAK6uM,IACP,EAQIC,EAAM,SAAUrjL,GAClBzrB,KAAK+uM,MAAQ,IAAIT,EACjBtuM,KAAKgvM,KAAO,CAAC,EACbhvM,KAAKivM,SAAWxjL,GAAW,GAC3BzrB,KAAKkvM,kBAAoB,IAC3B,EAEIC,EAAWL,EAAI5sM,UAOnBitM,EAASC,IAAM,SAAUztM,EAAKoM,GAC5B,IAAIpL,EAAO3C,KAAK+uM,MACZr3K,EAAM13B,KAAKgvM,KACXK,EAAU,KAEd,GAAgB,MAAZ33K,EAAI/1B,GAAc,CACpB,IAAI6sB,EAAM7rB,EAAK6rB,MAEXkgL,EAAQ1uM,KAAKkvM,kBAEjB,GAAI1gL,GAAOxuB,KAAKivM,UAAYzgL,EAAM,EAAG,CAEnC,IAAI8gL,EAAiB3sM,EAAK48D,KAC1B58D,EAAKuH,OAAOolM,UACL53K,EAAI43K,EAAe3tM,KAC1B0tM,EAAUC,EAAevhM,MACzB/N,KAAKkvM,kBAAoBI,CAC3B,CAEIZ,EACFA,EAAM3gM,MAAQA,EAEd2gM,EAAQ,IAAIC,EAAM5gM,GAGpB2gM,EAAM/sM,IAAMA,EACZgB,EAAKisM,YAAYF,GACjBh3K,EAAI/1B,GAAO+sM,CACb,CAEA,OAAOW,CACT,EAOAF,EAASjsM,IAAM,SAAUvB,GACvB,IAAI+sM,EAAQ1uM,KAAKgvM,KAAKrtM,GAClBgB,EAAO3C,KAAK+uM,MAEhB,GAAa,MAATL,EAOF,OALIA,IAAU/rM,EAAK68D,OACjB78D,EAAKuH,OAAOwkM,GACZ/rM,EAAKisM,YAAYF,IAGZA,EAAM3gM,KAEjB,EAMAohM,EAASvqJ,MAAQ,WACf5kD,KAAK+uM,MAAMnqJ,QAEX5kD,KAAKgvM,KAAO,CAAC,CACf,EAEA,IAAI7rM,EAAW2rM,EACf1rM,EAAOvB,QAAUsB,C,kDCzMjB,IAAI2uD,EAAQrwD,EAAQ,OAEhBk8B,EAAOl8B,EAAQ,OAEfs/B,EAAOt/B,EAAQ,MAEfuiE,EAAeviE,EAAQ,OAEvBiG,EAAUjG,EAAQ,OAElB++J,EAAM94J,EAAQ+2J,iBAUduoC,EAAM,CACRjrG,EAAG,EACHwsG,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHM,EAAG,EAEHD,EAAG,GAWD3iM,EAAM,GACNE,EAAM,GACNojJ,EAAO,GACPC,EAAO,GACPr8E,EAAU9mE,KAAKJ,IACfinE,EAAU7mE,KAAKF,IACf6tB,EAAU3tB,KAAK0sB,IACfkB,EAAU5tB,KAAK4sB,IACfm8K,EAAW/oM,KAAKgnD,KAChBtvB,EAAU13B,KAAKiH,IACf+hM,EAAuC,oBAAhBC,aAMvB7I,EAAY,SAAU8I,GACxB1vM,KAAK2vM,WAAcD,EAEf1vM,KAAK2vM,YAKP3vM,KAAKY,KAAO,IAGdZ,KAAK4vM,KAAO,IACd,EAOAhJ,EAAU1kM,UAAY,CACpBC,YAAaykM,EACbiJ,IAAK,EACLC,IAAK,EACLC,IAAK,EACLC,IAAK,EAELC,IAAK,EACLC,IAAK,EACL3B,KAAM,EACN4B,UAAW,KACXC,YAAa,EACbC,SAAU,EACVC,SAAU,EAKVC,SAAU,SAAUxD,EAAI56I,GACtBnyD,KAAKiwM,IAAM/xK,EAAQ,EAAIsiI,EAAMusC,IAAO,EACpC/sM,KAAKkwM,IAAMhyK,EAAQ,EAAIsiI,EAAMruG,IAAO,CACtC,EACA5tB,WAAY,WACV,OAAOvkC,KAAK4vM,IACd,EAMArqK,UAAW,SAAUrR,GAcnB,OAbAl0B,KAAK4vM,KAAO17K,EACZA,GAAOA,EAAIqR,YACXrR,IAAQl0B,KAAKwgK,IAAMtsI,EAAIssI,KAEnBxgK,KAAK2vM,YACP3vM,KAAKuuM,KAAO,GAGVvuM,KAAKmwM,YACPnwM,KAAKmwM,UAAY,KACjBnwM,KAAKowM,YAAc,GAGdpwM,IACT,EAOAq0B,OAAQ,SAAUpoB,EAAGC,GAWnB,OAVAlM,KAAKwwM,QAAQxJ,EAAIjrG,EAAG9vF,EAAGC,GACvBlM,KAAK4vM,MAAQ5vM,KAAK4vM,KAAKv7K,OAAOpoB,EAAGC,GAKjClM,KAAK+vM,IAAM9jM,EACXjM,KAAKgwM,IAAM9jM,EACXlM,KAAK6vM,IAAM5jM,EACXjM,KAAK8vM,IAAM5jM,EACJlM,IACT,EAOAs0B,OAAQ,SAAUroB,EAAGC,GACnB,IAAIukM,EAAavyK,EAAQjyB,EAAIjM,KAAK6vM,KAAO7vM,KAAKiwM,KAAO/xK,EAAQhyB,EAAIlM,KAAK8vM,KAAO9vM,KAAKkwM,KAC/ElwM,KAAKuuM,KAAO,EAYf,OAXAvuM,KAAKwwM,QAAQxJ,EAAIuB,EAAGt8L,EAAGC,GAEnBlM,KAAK4vM,MAAQa,IACfzwM,KAAK0wM,aAAe1wM,KAAK2wM,cAAc1kM,EAAGC,GAAKlM,KAAK4vM,KAAKt7K,OAAOroB,EAAGC,IAGjEukM,IACFzwM,KAAK6vM,IAAM5jM,EACXjM,KAAK8vM,IAAM5jM,GAGNlM,IACT,EAWA2iD,cAAe,SAAU5zB,EAAIC,EAAIC,EAAIE,EAAI4/B,EAAIC,GAS3C,OARAhvD,KAAKwwM,QAAQxJ,EAAIwB,EAAGz5K,EAAIC,EAAIC,EAAIE,EAAI4/B,EAAIC,GAEpChvD,KAAK4vM,OACP5vM,KAAK0wM,aAAe1wM,KAAK4wM,gBAAgB7hL,EAAIC,EAAIC,EAAIE,EAAI4/B,EAAIC,GAAMhvD,KAAK4vM,KAAKjtJ,cAAc5zB,EAAIC,EAAIC,EAAIE,EAAI4/B,EAAIC,IAGjHhvD,KAAK6vM,IAAM9gJ,EACX/uD,KAAK8vM,IAAM9gJ,EACJhvD,IACT,EASAutC,iBAAkB,SAAUxe,EAAIC,EAAIC,EAAIE,GAStC,OARAnvB,KAAKwwM,QAAQxJ,EAAIyB,EAAG15K,EAAIC,EAAIC,EAAIE,GAE5BnvB,KAAK4vM,OACP5vM,KAAK0wM,aAAe1wM,KAAK6wM,mBAAmB9hL,EAAIC,EAAIC,EAAIE,GAAMnvB,KAAK4vM,KAAKriK,iBAAiBxe,EAAIC,EAAIC,EAAIE,IAGvGnvB,KAAK6vM,IAAM5gL,EACXjvB,KAAK8vM,IAAM3gL,EACJnvB,IACT,EAWAwlC,IAAK,SAAUr5B,EAAIC,EAAIX,EAAGL,EAAYiB,EAAUi6L,GAK9C,OAJAtmM,KAAKwwM,QAAQxJ,EAAI0B,EAAGv8L,EAAIC,EAAIX,EAAGA,EAAGL,EAAYiB,EAAWjB,EAAY,EAAGk7L,EAAgB,EAAI,GAC5FtmM,KAAK4vM,MAAQ5vM,KAAK4vM,KAAKpqK,IAAIr5B,EAAIC,EAAIX,EAAGL,EAAYiB,EAAUi6L,GAC5DtmM,KAAK6vM,IAAM17K,EAAQ9nB,GAAYZ,EAAIU,EACnCnM,KAAK8vM,IAAM17K,EAAQ/nB,GAAYZ,EAAIU,EAC5BnM,IACT,EAEA8wM,MAAO,SAAU/hL,EAAIC,EAAIC,EAAIE,EAAIc,GAK/B,OAJIjwB,KAAK4vM,MACP5vM,KAAK4vM,KAAKkB,MAAM/hL,EAAIC,EAAIC,EAAIE,EAAIc,GAG3BjwB,IACT,EAEA0K,KAAM,SAAUuB,EAAGC,EAAGu2B,EAAG80E,GAGvB,OAFAv3G,KAAK4vM,MAAQ5vM,KAAK4vM,KAAKllM,KAAKuB,EAAGC,EAAGu2B,EAAG80E,GACrCv3G,KAAKwwM,QAAQxJ,EAAI+B,EAAG98L,EAAGC,EAAGu2B,EAAG80E,GACtBv3G,IACT,EAKAylC,UAAW,WACTzlC,KAAKwwM,QAAQxJ,EAAIgC,GACjB,IAAI90K,EAAMl0B,KAAK4vM,KACXjgL,EAAK3vB,KAAK+vM,IACV3hK,EAAKpuC,KAAKgwM,IASd,OAPI97K,IACFl0B,KAAK0wM,cAAgB1wM,KAAK2wM,cAAchhL,EAAIye,GAC5Cla,EAAIuR,aAGNzlC,KAAK6vM,IAAMlgL,EACX3vB,KAAK8vM,IAAM1hK,EACJpuC,IACT,EAQAiN,KAAM,SAAUinB,GACdA,GAAOA,EAAIjnB,OACXjN,KAAK+wM,UACP,EAMAr6L,OAAQ,SAAUwd,GAChBA,GAAOA,EAAIxd,SACX1W,KAAK+wM,UACP,EAOAC,YAAa,SAAUr4L,GACrB,GAAIA,aAAoB0mB,MAAO,CAC7Br/B,KAAKmwM,UAAYx3L,EACjB3Y,KAAKqwM,SAAW,EAGhB,IAFA,IAAIY,EAAc,EAETh7L,EAAI,EAAGA,EAAI0C,EAASxE,OAAQ8B,IACnCg7L,GAAet4L,EAAS1C,GAG1BjW,KAAKswM,SAAWW,CAClB,CAEA,OAAOjxM,IACT,EAOAkxM,kBAAmB,SAAUjjM,GAE3B,OADAjO,KAAKowM,YAAcniM,EACZjO,IACT,EAMAwuB,IAAK,WACH,OAAOxuB,KAAKuuM,IACd,EAKAzlJ,QAAS,SAAUloD,GACjB,IAAI4tB,EAAM5tB,EAAKuT,OAETnU,KAAKY,MAAQZ,KAAKY,KAAKuT,QAAUqa,IAAQghL,IAC7CxvM,KAAKY,KAAO,IAAI6uM,aAAajhL,IAG/B,IAAK,IAAIvY,EAAI,EAAGA,EAAIuY,EAAKvY,IACvBjW,KAAKY,KAAKqV,GAAKrV,EAAKqV,GAGtBjW,KAAKuuM,KAAO//K,CACd,EAMA2iL,WAAY,SAAUn8L,GACdA,aAAgBqqB,QACpBrqB,EAAO,CAACA,IAOV,IAJA,IAAIwZ,EAAMxZ,EAAKb,OACXi9L,EAAa,EACbnjM,EAASjO,KAAKuuM,KAETt4L,EAAI,EAAGA,EAAIuY,EAAKvY,IACvBm7L,GAAcp8L,EAAKiB,GAAGuY,MAGpBghL,GAAiBxvM,KAAKY,gBAAgB6uM,eACxCzvM,KAAKY,KAAO,IAAI6uM,aAAaxhM,EAASmjM,IAGxC,IAASn7L,EAAI,EAAGA,EAAIuY,EAAKvY,IAGvB,IAFA,IAAIo7L,EAAiBr8L,EAAKiB,GAAGrV,KAEpByhD,EAAI,EAAGA,EAAIgvJ,EAAel9L,OAAQkuC,IACzCriD,KAAKY,KAAKqN,KAAYojM,EAAehvJ,GAIzCriD,KAAKuuM,KAAOtgM,CACd,EAMAuiM,QAAS,SAAU3wJ,GACjB,GAAK7/C,KAAK2vM,UAAV,CAIA,IAAI/uM,EAAOZ,KAAKY,KAEZZ,KAAKuuM,KAAO1+L,UAAUsE,OAASvT,EAAKuT,SAGtCnU,KAAKsxM,cAEL1wM,EAAOZ,KAAKY,MAGd,IAAK,IAAIqV,EAAI,EAAGA,EAAIpG,UAAUsE,OAAQ8B,IACpCrV,EAAKZ,KAAKuuM,QAAU1+L,UAAUoG,GAGhCjW,KAAKuxM,SAAW1xJ,CAhBhB,CAiBF,EACAyxJ,YAAa,WAEX,KAAMtxM,KAAKY,gBAAgBy+B,OAAQ,CAGjC,IAFA,IAAI8gB,EAAU,GAELlqC,EAAI,EAAGA,EAAIjW,KAAKuuM,KAAMt4L,IAC7BkqC,EAAQlqC,GAAKjW,KAAKY,KAAKqV,GAGzBjW,KAAKY,KAAOu/C,CACd,CACF,EAOAuwJ,WAAY,WACV,OAAO1wM,KAAKmwM,SACd,EACAQ,cAAe,SAAU5hL,EAAIC,GAC3B,IAWIwiL,EAEA/sM,EAbAgtM,EAAUzxM,KAAKswM,SACfriM,EAASjO,KAAKowM,YACdz3L,EAAW3Y,KAAKmwM,UAChBj8K,EAAMl0B,KAAK4vM,KACXjgL,EAAK3vB,KAAK6vM,IACVzhK,EAAKpuC,KAAK8vM,IACV9pM,EAAK+oB,EAAKY,EACV1pB,EAAK+oB,EAAKof,EACV9D,EAAOilK,EAASvpM,EAAKA,EAAKC,EAAKA,GAC/BgG,EAAI0jB,EACJzjB,EAAIkiC,EAEJsjK,EAAQ/4L,EAASxE,OAErBnO,GAAMskC,EACNrkC,GAAMqkC,EAEFr8B,EAAS,IAEXA,EAASwjM,EAAUxjM,GAGrBA,GAAUwjM,EACVxlM,GAAKgC,EAASjI,EACdkG,GAAK+B,EAAShI,EAEd,MAAOD,EAAK,GAAKiG,GAAK8iB,GAAM/oB,EAAK,GAAKiG,GAAK8iB,GAAY,GAAN/oB,IAAYC,EAAK,GAAKiG,GAAK8iB,GAAM/oB,EAAK,GAAKiG,GAAK8iB,GAC/FvqB,EAAMzE,KAAKqwM,SACXmB,EAAO74L,EAASlU,GAChBwH,GAAKjG,EAAKwrM,EACVtlM,GAAKjG,EAAKurM,EACVxxM,KAAKqwM,UAAY5rM,EAAM,GAAKitM,EAExB1rM,EAAK,GAAKiG,EAAI0jB,GAAM3pB,EAAK,GAAKiG,EAAI0jB,GAAM1pB,EAAK,GAAKiG,EAAIkiC,GAAMnoC,EAAK,GAAKiG,EAAIkiC,GAI9Ela,EAAIzvB,EAAM,EAAI,SAAW,UAAUuB,GAAM,EAAIsnE,EAAQrhE,EAAG8iB,GAAMs+C,EAAQphE,EAAG8iB,GAAK9oB,GAAM,EAAIqnE,EAAQphE,EAAG8iB,GAAMq+C,EAAQnhE,EAAG8iB,IAItHhpB,EAAKiG,EAAI8iB,EACT9oB,EAAKiG,EAAI8iB,EACThvB,KAAKowM,aAAeb,EAASvpM,EAAKA,EAAKC,EAAKA,EAC9C,EAEA2qM,gBAAiB,SAAU7hL,EAAIC,EAAIC,EAAIE,EAAI4/B,EAAIC,GAC7C,IAMI3wB,EACAr4B,EACAC,EAKAgG,EACAC,EAdAulM,EAAUzxM,KAAKswM,SACfriM,EAASjO,KAAKowM,YACdz3L,EAAW3Y,KAAKmwM,UAChBj8K,EAAMl0B,KAAK4vM,KACXjgL,EAAK3vB,KAAK6vM,IACVzhK,EAAKpuC,KAAK8vM,IAIVlI,EAAU91I,EAAM81I,QAChB+J,EAAY,EACZltM,EAAMzE,KAAKqwM,SACXqB,EAAQ/4L,EAASxE,OAGjBy9L,EAAS,EASb,IAPI3jM,EAAS,IAEXA,EAASwjM,EAAUxjM,GAGrBA,GAAUwjM,EAELpzK,EAAI,EAAGA,EAAI,EAAGA,GAAK,GACtBr4B,EAAK4hM,EAAQj4K,EAAIZ,EAAIE,EAAI8/B,EAAI1wB,EAAI,IAAOupK,EAAQj4K,EAAIZ,EAAIE,EAAI8/B,EAAI1wB,GAChEp4B,EAAK2hM,EAAQx5J,EAAIpf,EAAIG,EAAI6/B,EAAI3wB,EAAI,IAAOupK,EAAQx5J,EAAIpf,EAAIG,EAAI6/B,EAAI3wB,GAChEszK,GAAapC,EAASvpM,EAAKA,EAAKC,EAAKA,GAIvC,KAAOxB,EAAMitM,EAAOjtM,IAGlB,GAFAmtM,GAAUj5L,EAASlU,GAEfmtM,EAAS3jM,EACX,MAIJowB,GAAKuzK,EAAS3jM,GAAU0jM,EAExB,MAAOtzK,GAAK,EACVpyB,EAAI27L,EAAQj4K,EAAIZ,EAAIE,EAAI8/B,EAAI1wB,GAC5BnyB,EAAI07L,EAAQx5J,EAAIpf,EAAIG,EAAI6/B,EAAI3wB,GAG5B55B,EAAM,EAAIyvB,EAAIG,OAAOpoB,EAAGC,GAAKgoB,EAAII,OAAOroB,EAAGC,GAC3CmyB,GAAK1lB,EAASlU,GAAOktM,EACrBltM,GAAOA,EAAM,GAAKitM,EAIpBjtM,EAAM,IAAM,GAAKyvB,EAAII,OAAOy6B,EAAIC,GAChChpD,EAAK+oD,EAAK9iD,EACVhG,EAAK+oD,EAAK9iD,EACVlM,KAAKowM,aAAeb,EAASvpM,EAAKA,EAAKC,EAAKA,EAC9C,EACA4qM,mBAAoB,SAAU9hL,EAAIC,EAAIC,EAAIE,GAExC,IAAI4/B,EAAK9/B,EACL+/B,EAAK7/B,EACTF,GAAMA,EAAK,EAAIF,GAAM,EACrBI,GAAMA,EAAK,EAAIH,GAAM,EACrBD,GAAM/uB,KAAK6vM,IAAM,EAAI9gL,GAAM,EAC3BC,GAAMhvB,KAAK8vM,IAAM,EAAI9gL,GAAM,EAE3BhvB,KAAK4wM,gBAAgB7hL,EAAIC,EAAIC,EAAIE,EAAI4/B,EAAIC,EAC3C,EAMA+hJ,SAAU,WACR,IAAInwM,EAAOZ,KAAKY,KAEZA,aAAgBy+B,QAClBz+B,EAAKuT,OAASnU,KAAKuuM,KAEfiB,IACFxvM,KAAKY,KAAO,IAAI6uM,aAAa7uM,IAGnC,EAKA+7B,gBAAiB,WACfv2B,EAAI,GAAKA,EAAI,GAAKsjJ,EAAK,GAAKA,EAAK,GAAKz7F,OAAOC,UAC7C5nD,EAAI,GAAKA,EAAI,GAAKqjJ,EAAK,GAAKA,EAAK,IAAM17F,OAAOC,UAO9C,IANA,IAAIttD,EAAOZ,KAAKY,KACZynM,EAAK,EACLC,EAAK,EACL34K,EAAK,EACLye,EAAK,EAEAn4B,EAAI,EAAGA,EAAIrV,EAAKuT,QAAS,CAChC,IAAI0rC,EAAMj/C,EAAKqV,KAaf,OAXS,GAALA,IAKFoyL,EAAKznM,EAAKqV,GACVqyL,EAAK1nM,EAAKqV,EAAI,GACd0Z,EAAK04K,EACLj6J,EAAKk6J,GAGCzoJ,GACN,KAAKmnJ,EAAIjrG,EAGPpsE,EAAK/uB,EAAKqV,KACVm4B,EAAKxtC,EAAKqV,KACVoyL,EAAK14K,EACL24K,EAAKl6J,EACLs7G,EAAK,GAAK/5H,EACV+5H,EAAK,GAAKt7G,EACVu7G,EAAK,GAAKh6H,EACVg6H,EAAK,GAAKv7G,EACV,MAEF,KAAK44J,EAAIuB,EACPxnK,EAAK8wK,SAASxJ,EAAIC,EAAI1nM,EAAKqV,GAAIrV,EAAKqV,EAAI,GAAIyzI,EAAMC,GAClD0+C,EAAKznM,EAAKqV,KACVqyL,EAAK1nM,EAAKqV,KACV,MAEF,KAAK+wL,EAAIwB,EACPznK,EAAK+wK,UAAUzJ,EAAIC,EAAI1nM,EAAKqV,KAAMrV,EAAKqV,KAAMrV,EAAKqV,KAAMrV,EAAKqV,KAAMrV,EAAKqV,GAAIrV,EAAKqV,EAAI,GAAIyzI,EAAMC,GAC/F0+C,EAAKznM,EAAKqV,KACVqyL,EAAK1nM,EAAKqV,KACV,MAEF,KAAK+wL,EAAIyB,EACP1nK,EAAKgxK,cAAc1J,EAAIC,EAAI1nM,EAAKqV,KAAMrV,EAAKqV,KAAMrV,EAAKqV,GAAIrV,EAAKqV,EAAI,GAAIyzI,EAAMC,GAC7E0+C,EAAKznM,EAAKqV,KACVqyL,EAAK1nM,EAAKqV,KACV,MAEF,KAAK+wL,EAAI0B,EAEP,IAAIv8L,EAAKvL,EAAKqV,KACV7J,EAAKxL,EAAKqV,KACV0yL,EAAK/nM,EAAKqV,KACV2yL,EAAKhoM,EAAKqV,KACV7K,EAAaxK,EAAKqV,KAClB5J,EAAWzL,EAAKqV,KAAO7K,EAGvBk7L,GADM1lM,EAAKqV,KACK,EAAIrV,EAAKqV,MAEpB,GAALA,IAGF0Z,EAAKwE,EAAQ/oB,GAAcu9L,EAAKx8L,EAChCiiC,EAAKha,EAAQhpB,GAAcw9L,EAAKx8L,GAGlC20B,EAAKixK,QAAQ7lM,EAAIC,EAAIu8L,EAAIC,EAAIx9L,EAAYiB,EAAUi6L,EAAe58C,EAAMC,GACxE0+C,EAAKl0K,EAAQ9nB,GAAYs8L,EAAKx8L,EAC9Bm8L,EAAKl0K,EAAQ/nB,GAAYu8L,EAAKx8L,EAC9B,MAEF,KAAK46L,EAAI+B,EACPp5K,EAAK04K,EAAKznM,EAAKqV,KACfm4B,EAAKk6J,EAAK1nM,EAAKqV,KACf,IAAI1K,EAAQ3K,EAAKqV,KACbjK,EAASpL,EAAKqV,KAElB8qB,EAAK8wK,SAASliL,EAAIye,EAAIze,EAAKpkB,EAAO6iC,EAAKpiC,EAAQ09I,EAAMC,GACrD,MAEF,KAAKq9C,EAAIgC,EACPX,EAAK14K,EACL24K,EAAKl6J,EACL,MAIJzQ,EAAKv3B,IAAIA,EAAKA,EAAKsjJ,GACnB/rH,EAAKr3B,IAAIA,EAAKA,EAAKqjJ,EACrB,CAOA,OAJU,IAAN1zI,IACF7P,EAAI,GAAKA,EAAI,GAAKE,EAAI,GAAKA,EAAI,GAAK,GAG/B,IAAI09D,EAAa59D,EAAI,GAAIA,EAAI,GAAIE,EAAI,GAAKF,EAAI,GAAIE,EAAI,GAAKF,EAAI,GACxE,EAOA6rM,YAAa,SAAU/9K,GASrB,IARA,IACIvE,EAAIye,EACJi6J,EAAIC,EACJr8L,EAAGC,EAHHuyB,EAAIz+B,KAAKY,KAITsxM,EAAKlyM,KAAKiwM,IACVkC,EAAKnyM,KAAKkwM,IACV1hL,EAAMxuB,KAAKuuM,KAENt4L,EAAI,EAAGA,EAAIuY,GAAM,CACxB,IAAIqxB,EAAMphB,EAAExoB,KAaZ,OAXS,GAALA,IAKFoyL,EAAK5pK,EAAExoB,GACPqyL,EAAK7pK,EAAExoB,EAAI,GACX0Z,EAAK04K,EACLj6J,EAAKk6J,GAGCzoJ,GACN,KAAKmnJ,EAAIjrG,EACPpsE,EAAK04K,EAAK5pK,EAAExoB,KACZm4B,EAAKk6J,EAAK7pK,EAAExoB,KACZie,EAAIG,OAAOg0K,EAAIC,GACf,MAEF,KAAKtB,EAAIuB,EACPt8L,EAAIwyB,EAAExoB,KACN/J,EAAIuyB,EAAExoB,MAEFioB,EAAQjyB,EAAIo8L,GAAM6J,GAAMh0K,EAAQhyB,EAAIo8L,GAAM6J,GAAMl8L,IAAMuY,EAAM,KAC9D0F,EAAII,OAAOroB,EAAGC,GACdm8L,EAAKp8L,EACLq8L,EAAKp8L,GAGP,MAEF,KAAK86L,EAAIwB,EACPt0K,EAAIyuB,cAAclkB,EAAExoB,KAAMwoB,EAAExoB,KAAMwoB,EAAExoB,KAAMwoB,EAAExoB,KAAMwoB,EAAExoB,KAAMwoB,EAAExoB,MAC5DoyL,EAAK5pK,EAAExoB,EAAI,GACXqyL,EAAK7pK,EAAExoB,EAAI,GACX,MAEF,KAAK+wL,EAAIyB,EACPv0K,EAAIqZ,iBAAiB9O,EAAExoB,KAAMwoB,EAAExoB,KAAMwoB,EAAExoB,KAAMwoB,EAAExoB,MAC/CoyL,EAAK5pK,EAAExoB,EAAI,GACXqyL,EAAK7pK,EAAExoB,EAAI,GACX,MAEF,KAAK+wL,EAAI0B,EACP,IAAIv8L,EAAKsyB,EAAExoB,KACP7J,EAAKqyB,EAAExoB,KACP0yL,EAAKlqK,EAAExoB,KACP2yL,EAAKnqK,EAAExoB,KACP4yL,EAAQpqK,EAAExoB,KACV6yL,EAASrqK,EAAExoB,KACXm8L,EAAM3zK,EAAExoB,KACRo8L,EAAK5zK,EAAExoB,KACPxK,EAAIk9L,EAAKC,EAAKD,EAAKC,EACnB0J,EAAS3J,EAAKC,EAAK,EAAID,EAAKC,EAC5B2J,EAAS5J,EAAKC,EAAKA,EAAKD,EAAK,EAC7B6J,EAAYhsM,KAAKiH,IAAIk7L,EAAKC,GAAM,KAChCv8L,EAAWw8L,EAAQC,EAEnB0J,GACFt+K,EAAI20C,UAAU18D,EAAIC,GAClB8nB,EAAIs4B,OAAO4lJ,GACXl+K,EAAIztB,MAAM6rM,EAAQC,GAClBr+K,EAAIsR,IAAI,EAAG,EAAG/5B,EAAGo9L,EAAOx8L,EAAU,EAAIgmM,GACtCn+K,EAAIztB,MAAM,EAAI6rM,EAAQ,EAAIC,GAC1Br+K,EAAIs4B,QAAQ4lJ,GACZl+K,EAAI20C,WAAW18D,GAAKC,IAEpB8nB,EAAIsR,IAAIr5B,EAAIC,EAAIX,EAAGo9L,EAAOx8L,EAAU,EAAIgmM,GAGjC,GAALp8L,IAGF0Z,EAAKwE,EAAQ00K,GAASF,EAAKx8L,EAC3BiiC,EAAKha,EAAQy0K,GAASD,EAAKx8L,GAG7Bi8L,EAAKl0K,EAAQ9nB,GAAYs8L,EAAKx8L,EAC9Bm8L,EAAKl0K,EAAQ/nB,GAAYu8L,EAAKx8L,EAC9B,MAEF,KAAK46L,EAAI+B,EACPp5K,EAAK04K,EAAK5pK,EAAExoB,GACZm4B,EAAKk6J,EAAK7pK,EAAExoB,EAAI,GAChBie,EAAIxpB,KAAK+zB,EAAExoB,KAAMwoB,EAAExoB,KAAMwoB,EAAExoB,KAAMwoB,EAAExoB,MACnC,MAEF,KAAK+wL,EAAIgC,EACP90K,EAAIuR,YACJ4iK,EAAK14K,EACL24K,EAAKl6J,EAEX,CACF,GAEFw4J,EAAUI,IAAMA,EAChB,IAAI7jM,EAAWyjM,EACfxjM,EAAOvB,QAAUsB,C,wBCxvBjB,SAASsvM,IAAQ,CAiJjB,SAASC,EAAYxpM,EAAMgmK,EAAY5c,EAAQD,GAM7C,IALA,IAAIsgD,EAAe,EACfC,EAAe1jC,EAAW/6J,OAC1B0+L,EAAS,EACTC,EAAS,EAENH,EAAeC,EAAcD,IAAgB,CAClD,IAAIpxM,EAAY2tK,EAAWyjC,GAE3B,GAAKpxM,EAAU8tM,QAaR,CAGL,IAFI/gL,EAAU,GAELrY,EAAI68L,EAAQ78L,EAAI68L,EAASvxM,EAAUyV,MAAOf,IACjDqY,EAAQttB,KAAKiV,GAGf1U,EAAU+sB,QAAUA,EACpBwkL,GAAUvxM,EAAUyV,KACtB,KAtBwB,CAGtB,IAFA,IAAIsX,EAAU,GAELrY,EAAI48L,EAAQ58L,EAAI48L,EAAStxM,EAAUyV,MAAOf,IACjDqY,EAAQttB,KAAKiV,GAGf1U,EAAU+sB,QAAUA,EACpBukL,GAAUtxM,EAAUyV,MAEfzV,EAAUwxM,QACbD,GAAUvxM,EAAUyV,MAExB,CAUF,CAEA,OAAOk4J,CACT,CAEA,SAAS8jC,EAAUh+L,GACjB,MAAO,CACL69L,OAAQ79L,EAAK69L,OACb3jC,WAAYl6J,EAAKk6J,WAAWlsK,MAAM,GAEtC,C,SAzLAyvM,EAAKvwM,UAAY,CACfgH,KAAM,SAAUmpJ,EAAQC,EAAQh9E,GACzBA,IACHA,EAAS,SAAU7mD,EAAGC,GACpB,OAAOD,IAAMC,CACf,GAGF1uB,KAAKs1E,OAASA,EACd,IAAI1/C,EAAO51B,KACXqyJ,EAASA,EAAOrvJ,QAChBsvJ,EAASA,EAAOtvJ,QAEhB,IAAIiwM,EAAS3gD,EAAOn+I,OAChB++L,EAAS7gD,EAAOl+I,OAChBg/L,EAAa,EACbC,EAAgBH,EAASC,EACzBG,EAAW,CAAC,CACdR,QAAS,EACT3jC,WAAY,KAGV4jC,EAAS9yM,KAAKszM,cAAcD,EAAS,GAAI/gD,EAAQD,EAAQ,GAE7D,GAAIghD,EAAS,GAAGR,OAAS,GAAKI,GAAUH,EAAS,GAAKI,EAAQ,CAG5D,IAFA,IAAI5kL,EAAU,GAELrY,EAAI,EAAGA,EAAIq8I,EAAOn+I,OAAQ8B,IACjCqY,EAAQttB,KAAKiV,GAIf,MAAO,CAAC,CACNqY,QAASA,EACTtX,MAAOs7I,EAAOn+I,QAElB,CAGA,SAASo/L,IACP,IAAK,IAAIC,GAAgB,EAAIL,EAAYK,GAAgBL,EAAYK,GAAgB,EAAG,CACtF,IAAIC,EACAC,EAAUL,EAASG,EAAe,GAClCG,EAAaN,EAASG,EAAe,GACrCV,GAAUa,EAAaA,EAAWd,OAAS,GAAKW,EAEhDE,IAEFL,EAASG,EAAe,QAAK/8I,GAG/B,IAAIm9I,EAASF,GAAWA,EAAQb,OAAS,EAAII,EACzCY,EAAYF,GAAc,GAAKb,GAAUA,EAASI,EAEtD,GAAKU,GAAWC,EAAhB,CAqBA,IAZKD,GAAUC,GAAaH,EAAQb,OAASc,EAAWd,QACtDY,EAAWT,EAAUW,GACrB/9K,EAAKk+K,cAAcL,EAASvkC,gBAAYz4G,GAAW,KAEnDg9I,EAAWC,EAEXD,EAASZ,SACTj9K,EAAKk+K,cAAcL,EAASvkC,YAAY,OAAMz4G,IAGhDq8I,EAASl9K,EAAK09K,cAAcG,EAAUnhD,EAAQD,EAAQmhD,GAElDC,EAASZ,OAAS,GAAKI,GAAUH,EAAS,GAAKI,EACjD,OAAOR,EAAY98K,EAAM69K,EAASvkC,WAAY5c,EAAQD,GAGtDghD,EAASG,GAAgBC,CArB3B,MAFEJ,EAASG,QAAgB/8I,CAyB7B,CAEA08I,GACF,CAEA,MAAOA,GAAcC,EAAe,CAClC,IAAIjwG,EAAMowG,IAEV,GAAIpwG,EACF,OAAOA,CAEX,CACF,EACA2wG,cAAe,SAAU5kC,EAAY6jC,EAAO1D,GAC1C,IAAI/mI,EAAO4mG,EAAWA,EAAW/6J,OAAS,GAEtCm0D,GAAQA,EAAKyqI,QAAUA,GAASzqI,EAAK+mI,UAAYA,EAGnDngC,EAAWA,EAAW/6J,OAAS,GAAK,CAClC6C,MAAOsxD,EAAKtxD,MAAQ,EACpB+7L,MAAOA,EACP1D,QAASA,GAGXngC,EAAWluK,KAAK,CACdgW,MAAO,EACP+7L,MAAOA,EACP1D,QAASA,GAGf,EACAiE,cAAe,SAAUG,EAAUnhD,EAAQD,EAAQmhD,GACjD,IAAIP,EAAS3gD,EAAOn+I,OAChB++L,EAAS7gD,EAAOl+I,OAChB0+L,EAASY,EAASZ,OAClBC,EAASD,EAASW,EAClBO,EAAc,EAElB,MAAOlB,EAAS,EAAII,GAAUH,EAAS,EAAII,GAAUlzM,KAAKs1E,OAAOg9E,EAAOugD,EAAS,GAAIxgD,EAAOygD,EAAS,IACnGD,IACAC,IACAiB,IAUF,OAPIA,GACFN,EAASvkC,WAAWluK,KAAK,CACvBgW,MAAO+8L,IAIXN,EAASZ,OAASA,EACXC,CACT,EACAkB,SAAU,SAAUjmM,GAClB,OAAOA,EAAM/K,OACf,EACAuU,KAAM,SAAUxJ,GACd,OAAOA,EAAM/K,OACf,GA+CF,IAAIixM,EAAY,IAAIxB,EAEpB,SAAStvM,EAASkvJ,EAAQC,EAAQzzF,GAChC,OAAOo1I,EAAU/qM,KAAKmpJ,EAAQC,EAAQzzF,EACxC,CAEAz7D,EAAOvB,QAAUsB,C,uBCrMjB,IAAIw6B,EAAOl8B,EAAQ,OAEfqwD,EAAQrwD,EAAQ,OAKhB6rE,EAAU9mE,KAAKJ,IACfinE,EAAU7mE,KAAKF,IACf8tB,EAAU5tB,KAAK4sB,IACfe,EAAU3tB,KAAK0sB,IACf7B,EAAgB,EAAV7qB,KAAK0L,GACXqM,EAAQof,EAAKv7B,SACb0tB,EAAM6N,EAAKv7B,SACX8xM,EAAYv2K,EAAKv7B,SASrB,SAASg/B,EAAWzU,EAAQvmB,EAAKE,GAC/B,GAAsB,IAAlBqmB,EAAOxY,OAAX,CAIA,IAKI8B,EALAmI,EAAIuO,EAAO,GACXvB,EAAOhN,EAAE,GACTkN,EAAQlN,EAAE,GACViN,EAAMjN,EAAE,GACRmN,EAASnN,EAAE,GAGf,IAAKnI,EAAI,EAAGA,EAAI0W,EAAOxY,OAAQ8B,IAC7BmI,EAAIuO,EAAO1W,GACXmV,EAAOkiD,EAAQliD,EAAMhN,EAAE,IACvBkN,EAAQ+hD,EAAQ/hD,EAAOlN,EAAE,IACzBiN,EAAMiiD,EAAQjiD,EAAKjN,EAAE,IACrBmN,EAAS8hD,EAAQ9hD,EAAQnN,EAAE,IAG7BhY,EAAI,GAAKglB,EACThlB,EAAI,GAAKilB,EACT/kB,EAAI,GAAKglB,EACThlB,EAAI,GAAKilB,CApBT,CAqBF,CAYA,SAASsmL,EAASliL,EAAIye,EAAIrf,EAAIC,EAAI5oB,EAAKE,GACrCF,EAAI,GAAKknE,EAAQ39C,EAAIZ,GACrB3oB,EAAI,GAAKknE,EAAQl/B,EAAIpf,GACrB1oB,EAAI,GAAK+mE,EAAQ19C,EAAIZ,GACrBzoB,EAAI,GAAK+mE,EAAQj/B,EAAIpf,EACvB,CAEA,IAAImlL,EAAO,GACPC,EAAO,GAgBX,SAAStC,EAAUniL,EAAIye,EAAIrf,EAAIC,EAAIC,EAAIE,EAAI4/B,EAAIC,EAAI5oD,EAAKE,GACtD,IAEI2P,EAFA4xL,EAAe/1I,EAAM+1I,aACrBD,EAAU91I,EAAM81I,QAEhB5lK,EAAI6lK,EAAal4K,EAAIZ,EAAIE,EAAI8/B,EAAIolJ,GAMrC,IALA/tM,EAAI,GAAKG,IACTH,EAAI,GAAKG,IACTD,EAAI,IAAMC,IACVD,EAAI,IAAMC,IAEL0P,EAAI,EAAGA,EAAI+rB,EAAG/rB,IAAK,CACtB,IAAIhK,EAAI27L,EAAQj4K,EAAIZ,EAAIE,EAAI8/B,EAAIolJ,EAAKl+L,IACrC7P,EAAI,GAAKknE,EAAQrhE,EAAG7F,EAAI,IACxBE,EAAI,GAAK+mE,EAAQphE,EAAG3F,EAAI,GAC1B,CAIA,IAFA07B,EAAI6lK,EAAaz5J,EAAIpf,EAAIG,EAAI6/B,EAAIolJ,GAE5Bn+L,EAAI,EAAGA,EAAI+rB,EAAG/rB,IAAK,CACtB,IAAI/J,EAAI07L,EAAQx5J,EAAIpf,EAAIG,EAAI6/B,EAAIolJ,EAAKn+L,IACrC7P,EAAI,GAAKknE,EAAQphE,EAAG9F,EAAI,IACxBE,EAAI,GAAK+mE,EAAQnhE,EAAG5F,EAAI,GAC1B,CAEAF,EAAI,GAAKknE,EAAQ39C,EAAIvpB,EAAI,IACzBE,EAAI,GAAK+mE,EAAQ19C,EAAIrpB,EAAI,IACzBF,EAAI,GAAKknE,EAAQve,EAAI3oD,EAAI,IACzBE,EAAI,GAAK+mE,EAAQte,EAAIzoD,EAAI,IACzBF,EAAI,GAAKknE,EAAQl/B,EAAIhoC,EAAI,IACzBE,EAAI,GAAK+mE,EAAQj/B,EAAI9nC,EAAI,IACzBF,EAAI,GAAKknE,EAAQte,EAAI5oD,EAAI,IACzBE,EAAI,GAAK+mE,EAAQre,EAAI1oD,EAAI,GAC3B,CAeA,SAASyrM,EAAcpiL,EAAIye,EAAIrf,EAAIC,EAAIC,EAAIE,EAAI/oB,EAAKE,GAClD,IAAI0hM,EAAoBl2I,EAAMk2I,kBAC1BjqK,EAAc+zB,EAAM/zB,YAEpB4M,EAAK0iC,EAAQC,EAAQ06H,EAAkBr4K,EAAIZ,EAAIE,GAAK,GAAI,GACxD2b,EAAKyiC,EAAQC,EAAQ06H,EAAkB55J,EAAIpf,EAAIG,GAAK,GAAI,GACxDljB,EAAI8xB,EAAYpO,EAAIZ,EAAIE,EAAI0b,GAC5Bz+B,EAAI6xB,EAAYqQ,EAAIpf,EAAIG,EAAIyb,GAChCxkC,EAAI,GAAKknE,EAAQ39C,EAAIV,EAAIhjB,GACzB7F,EAAI,GAAKknE,EAAQl/B,EAAIjf,EAAIjjB,GACzB5F,EAAI,GAAK+mE,EAAQ19C,EAAIV,EAAIhjB,GACzB3F,EAAI,GAAK+mE,EAAQj/B,EAAIjf,EAAIjjB,EAC3B,CAiBA,SAAS8lM,EAAQ/lM,EAAGC,EAAGy8L,EAAIC,EAAIx9L,EAAYiB,EAAUi6L,EAAelgM,EAAKE,GACvE,IAAIo7C,EAAU/jB,EAAKv3B,IACfu7C,EAAUhkB,EAAKr3B,IACf4C,EAAO1C,KAAKiH,IAAIrC,EAAaiB,GAEjC,GAAInD,EAAOmoB,EAAM,MAAQnoB,EAAO,KAM9B,OAJA9C,EAAI,GAAK6F,EAAI08L,EACbviM,EAAI,GAAK8F,EAAI08L,EACbtiM,EAAI,GAAK2F,EAAI08L,OACbriM,EAAI,GAAK4F,EAAI08L,GA6Bf,GAzBArqL,EAAM,GAAK4V,EAAQ/oB,GAAcu9L,EAAK18L,EACtCsS,EAAM,GAAK6V,EAAQhpB,GAAcw9L,EAAK18L,EACtC4jB,EAAI,GAAKqE,EAAQ9nB,GAAYs8L,EAAK18L,EAClC6jB,EAAI,GAAKsE,EAAQ/nB,GAAYu8L,EAAK18L,EAClCw1C,EAAQt7C,EAAKmY,EAAOuR,GACpB6xB,EAAQr7C,EAAKiY,EAAOuR,GAEpB1kB,GAA0BimB,EAEtBjmB,EAAa,IACfA,GAA0BimB,GAG5BhlB,GAAsBglB,EAElBhlB,EAAW,IACbA,GAAsBglB,GAGpBjmB,EAAaiB,IAAai6L,EAC5Bj6L,GAAYglB,EACHjmB,EAAaiB,GAAYi6L,IAClCl7L,GAAcimB,GAGZi1K,EAAe,CACjB,IAAIt0K,EAAM3lB,EACVA,EAAWjB,EACXA,EAAa4mB,CACf,CAIA,IAAK,IAAIY,EAAQ,EAAGA,EAAQvmB,EAAUumB,GAASpsB,KAAK0L,GAAK,EACnD0gB,EAAQxnB,IACV8oM,EAAU,GAAK//K,EAAQvB,GAAS+1K,EAAK18L,EACrCioM,EAAU,GAAK9/K,EAAQxB,GAASg2K,EAAK18L,EACrCw1C,EAAQt7C,EAAK8tM,EAAW9tM,GACxBu7C,EAAQr7C,EAAK4tM,EAAW5tM,GAG9B,CAEAzE,EAAQu/B,WAAaA,EACrBv/B,EAAQgwM,SAAWA,EACnBhwM,EAAQiwM,UAAYA,EACpBjwM,EAAQkwM,cAAgBA,EACxBlwM,EAAQmwM,QAAUA,C,wBC5NlB,IAAIprH,EAAUnlF,EAAQ,OAElB4yM,EAAWztH,EAAQxkF,OACnB47B,EAAe4oD,EAAQ3oD,WAOvBi1E,EAAU1sG,KAAK0qE,IACfq+H,EAAW/oM,KAAKgnD,KAChBy5I,EAAU,KACVqN,EAAkB,KAClBC,EAAahF,EAAS,GACtBiF,EAAY,EAAI,EAEhBC,EAAMJ,IAENK,EAAML,IAENM,EAAMN,IAEV,SAASO,EAAaz2L,GACpB,OAAOA,GAAO8oL,GAAW9oL,EAAM8oL,CACjC,CAEA,SAAS4N,EAAgB12L,GACvB,OAAOA,EAAM8oL,GAAW9oL,GAAO8oL,CACjC,CAaA,SAASW,EAAQtpK,EAAIC,EAAIC,EAAIiiK,EAAIpiK,GAC/B,IAAIy2K,EAAO,EAAIz2K,EACf,OAAOy2K,EAAOA,GAAQA,EAAOx2K,EAAK,EAAID,EAAIE,GAAMF,EAAIA,GAAKA,EAAIoiK,EAAK,EAAIqU,EAAOt2K,EAC/E,CAaA,SAASu2K,EAAkBz2K,EAAIC,EAAIC,EAAIiiK,EAAIpiK,GACzC,IAAIy2K,EAAO,EAAIz2K,EACf,OAAO,KAAOE,EAAKD,GAAMw2K,EAAO,GAAKt2K,EAAKD,GAAMF,GAAKy2K,GAAQrU,EAAKjiK,GAAMH,EAAIA,EAC9E,CAcA,SAASkpK,EAAYjpK,EAAIC,EAAIC,EAAIiiK,EAAItiL,EAAKi/K,GAExC,IAAI3uK,EAAIgyK,EAAK,GAAKliK,EAAKC,GAAMF,EACzB5P,EAAI,GAAK8P,EAAU,EAALD,EAASD,GACvB+sH,EAAI,GAAK9sH,EAAKD,GACdG,EAAIH,EAAKngB,EACTuqL,EAAIh6K,EAAIA,EAAI,EAAID,EAAI48H,EACpB2pD,EAAItmL,EAAI28H,EAAI,EAAI58H,EAAIgQ,EACpB+pK,EAAIn9C,EAAIA,EAAI,EAAI38H,EAAI+P,EACpBuD,EAAI,EAER,GAAI4yK,EAAalM,IAAMkM,EAAaI,GAClC,GAAIJ,EAAalmL,GACf0uK,EAAM,GAAK,MACN,CACL,IAAI6X,GAAM5pD,EAAI38H,EAEVumL,GAAM,GAAKA,GAAM,IACnB7X,EAAMp7J,KAAOizK,EAEjB,KACK,CACL,IAAIC,EAAOF,EAAIA,EAAI,EAAItM,EAAIF,EAE3B,GAAIoM,EAAaM,GAAO,CACtB,IAAIC,EAAIH,EAAItM,EAGRhI,GAFAuU,GAAMvmL,EAAID,EAAI0mL,GAERA,EAAI,GAEVF,GAAM,GAAKA,GAAM,IACnB7X,EAAMp7J,KAAOizK,GAGXvU,GAAM,GAAKA,GAAM,IACnBtD,EAAMp7J,KAAO0+J,EAEjB,MAAO,GAAIwU,EAAO,EAAG,CACnB,IAAIE,EAAW7F,EAAS2F,GACpBG,EAAK3M,EAAIh6K,EAAI,IAAMD,IAAMumL,EAAII,GAC7BE,EAAK5M,EAAIh6K,EAAI,IAAMD,IAAMumL,EAAII,GAG/BC,EADEA,EAAK,GACDniG,GAASmiG,EAAIb,GAEdthG,EAAQmiG,EAAIb,GAIjBc,EADEA,EAAK,GACDpiG,GAASoiG,EAAId,GAEdthG,EAAQoiG,EAAId,GAGfS,IAAOvmL,GAAK2mL,EAAKC,KAAQ,EAAI7mL,GAE7BwmL,GAAM,GAAKA,GAAM,IACnB7X,EAAMp7J,KAAOizK,EAEjB,KAAO,CACL,IAAIM,GAAK,EAAI7M,EAAIh6K,EAAI,EAAID,EAAIumL,IAAM,EAAIzF,EAAS7G,EAAIA,EAAIA,IACpDG,EAAQriM,KAAKgvM,KAAKD,GAAK,EACvBE,EAAQlG,EAAS7G,GACjB12K,EAAMxrB,KAAK0sB,IAAI21K,GAGflI,GAFAsU,IAAOvmL,EAAI,EAAI+mL,EAAQzjL,IAAQ,EAAIvD,GACnCiyK,IAAOhyK,EAAI+mL,GAASzjL,EAAMuiL,EAAa/tM,KAAK4sB,IAAIy1K,MAAY,EAAIp6K,KACzDC,EAAI+mL,GAASzjL,EAAMuiL,EAAa/tM,KAAK4sB,IAAIy1K,MAAY,EAAIp6K,IAEhEwmL,GAAM,GAAKA,GAAM,IACnB7X,EAAMp7J,KAAOizK,GAGXvU,GAAM,GAAKA,GAAM,IACnBtD,EAAMp7J,KAAO0+J,GAGXC,GAAM,GAAKA,GAAM,IACnBvD,EAAMp7J,KAAO2+J,EAEjB,CACF,CAEA,OAAO3+J,CACT,CAaA,SAAS6lK,EAAavpK,EAAIC,EAAIC,EAAIiiK,EAAI0G,GACpC,IAAIz4K,EAAI,EAAI8P,EAAK,GAAKD,EAAK,EAAID,EAC3B7P,EAAI,EAAI8P,EAAK,EAAIkiK,EAAK,EAAIniK,EAAK,EAAIE,EACnC6sH,EAAI,EAAI9sH,EAAK,EAAID,EACjB0D,EAAI,EAER,GAAI4yK,EAAanmL,IACf,GAAIomL,EAAgBnmL,GAAI,CACtB,IAAIumL,GAAM5pD,EAAI38H,EAEVumL,GAAM,GAAKA,GAAM,IACnB9N,EAAQnlK,KAAOizK,EAEnB,MACK,CACL,IAAIC,EAAOxmL,EAAIA,EAAI,EAAID,EAAI48H,EAE3B,GAAIupD,EAAaM,GACf/N,EAAQ,IAAMz4K,GAAK,EAAID,QAClB,GAAIymL,EAAO,EAAG,CACnB,IAAIE,EAAW7F,EAAS2F,GAEpBxU,GADAuU,IAAOvmL,EAAI0mL,IAAa,EAAI3mL,KACrBC,EAAI0mL,IAAa,EAAI3mL,IAE5BwmL,GAAM,GAAKA,GAAM,IACnB9N,EAAQnlK,KAAOizK,GAGbvU,GAAM,GAAKA,GAAM,IACnByG,EAAQnlK,KAAO0+J,EAEnB,CACF,CAEA,OAAO1+J,CACT,CAaA,SAAS0zK,EAAep3K,EAAIC,EAAIC,EAAIiiK,EAAIpiK,EAAGmvJ,GACzC,IAAImoB,GAAOp3K,EAAKD,GAAMD,EAAIC,EACtBs3K,GAAOp3K,EAAKD,GAAMF,EAAIE,EACtBs3K,GAAOpV,EAAKjiK,GAAMH,EAAIG,EACtBs3K,GAAQF,EAAMD,GAAOt3K,EAAIs3K,EACzBI,GAAQF,EAAMD,GAAOv3K,EAAIu3K,EACzBI,GAASD,EAAOD,GAAQz3K,EAAIy3K,EAEhCtoB,EAAI,GAAKlvJ,EACTkvJ,EAAI,GAAKmoB,EACTnoB,EAAI,GAAKsoB,EACTtoB,EAAI,GAAKwoB,EAETxoB,EAAI,GAAKwoB,EACTxoB,EAAI,GAAKuoB,EACTvoB,EAAI,GAAKqoB,EACTroB,EAAI,GAAKiT,CACX,CAmBA,SAAS+F,EAAkB72K,EAAIye,EAAIrf,EAAIC,EAAIC,EAAIE,EAAI4/B,EAAIC,EAAI/iD,EAAGC,EAAGshL,GAE/D,IAAInvJ,EAGAwwK,EACAhwK,EACAo3K,EACAC,EALAv3K,EAAW,KACXF,EAAIl4B,IAKRkuM,EAAI,GAAKxoM,EACTwoM,EAAI,GAAKvoM,EAGT,IAAK,IAAI0yB,EAAK,EAAGA,EAAK,EAAGA,GAAM,IAC7B81K,EAAI,GAAK9M,EAAQj4K,EAAIZ,EAAIE,EAAI8/B,EAAInwB,GACjC81K,EAAI,GAAK9M,EAAQx5J,EAAIpf,EAAIG,EAAI6/B,EAAIpwB,GACjCq3K,EAAKj4K,EAAay2K,EAAKC,GAEnBuB,EAAKx3K,IACPJ,EAAIO,EACJH,EAAIw3K,GAIRx3K,EAAIl4B,IAEJ,IAAK,IAAI0P,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAC3B,GAAI0oB,EAAW21K,EACb,MAGFzF,EAAOxwK,EAAIM,EACXE,EAAOR,EAAIM,EAEX+1K,EAAI,GAAK9M,EAAQj4K,EAAIZ,EAAIE,EAAI8/B,EAAI8/I,GACjC6F,EAAI,GAAK9M,EAAQx5J,EAAIpf,EAAIG,EAAI6/B,EAAI6/I,GACjCoH,EAAKj4K,EAAa02K,EAAKD,GAEnB5F,GAAQ,GAAKoH,EAAKx3K,GACpBJ,EAAIwwK,EACJpwK,EAAIw3K,IAGJtB,EAAI,GAAK/M,EAAQj4K,EAAIZ,EAAIE,EAAI8/B,EAAIlwB,GACjC81K,EAAI,GAAK/M,EAAQx5J,EAAIpf,EAAIG,EAAI6/B,EAAInwB,GACjCq3K,EAAKl4K,EAAa22K,EAAKF,GAEnB51K,GAAQ,GAAKq3K,EAAKz3K,GACpBJ,EAAIQ,EACJJ,EAAIy3K,GAEJv3K,GAAY,GAGlB,CASA,OANI6uJ,IACFA,EAAI,GAAKoa,EAAQj4K,EAAIZ,EAAIE,EAAI8/B,EAAI1wB,GACjCmvJ,EAAI,GAAKoa,EAAQx5J,EAAIpf,EAAIG,EAAI6/B,EAAI3wB,IAI5BkxK,EAAS9wK,EAClB,CAWA,SAASV,EAAYO,EAAIC,EAAIC,EAAIH,GAC/B,IAAIy2K,EAAO,EAAIz2K,EACf,OAAOy2K,GAAQA,EAAOx2K,EAAK,EAAID,EAAIE,GAAMF,EAAIA,EAAIG,CACnD,CAWA,SAASkM,EAAsBpM,EAAIC,EAAIC,EAAIH,GACzC,OAAO,IAAM,EAAIA,IAAME,EAAKD,GAAMD,GAAKG,EAAKD,GAC9C,CAYA,SAASwpK,EAAgBzpK,EAAIC,EAAIC,EAAIrgB,EAAKi/K,GACxC,IAAI3uK,EAAI6P,EAAK,EAAIC,EAAKC,EAClB9P,EAAI,GAAK6P,EAAKD,GACd+sH,EAAI/sH,EAAKngB,EACT6jB,EAAI,EAER,GAAI4yK,EAAanmL,IACf,GAAIomL,EAAgBnmL,GAAI,CACtB,IAAIumL,GAAM5pD,EAAI38H,EAEVumL,GAAM,GAAKA,GAAM,IACnB7X,EAAMp7J,KAAOizK,EAEjB,MACK,CACL,IAAIC,EAAOxmL,EAAIA,EAAI,EAAID,EAAI48H,EAE3B,GAAIupD,EAAaM,GAAO,CAClBD,GAAMvmL,GAAK,EAAID,GAEfwmL,GAAM,GAAKA,GAAM,IACnB7X,EAAMp7J,KAAOizK,EAEjB,MAAO,GAAIC,EAAO,EAAG,CACnB,IAAIE,EAAW7F,EAAS2F,GAEpBxU,GADAuU,IAAOvmL,EAAI0mL,IAAa,EAAI3mL,KACrBC,EAAI0mL,IAAa,EAAI3mL,IAE5BwmL,GAAM,GAAKA,GAAM,IACnB7X,EAAMp7J,KAAOizK,GAGXvU,GAAM,GAAKA,GAAM,IACnBtD,EAAMp7J,KAAO0+J,EAEjB,CACF,CAEA,OAAO1+J,CACT,CAWA,SAASgmK,EAAkB1pK,EAAIC,EAAIC,GACjC,IAAI23K,EAAU73K,EAAKE,EAAK,EAAID,EAE5B,OAAgB,IAAZ43K,EAEK,IAEC73K,EAAKC,GAAM43K,CAEvB,CAYA,SAASn3K,EAAmBV,EAAIC,EAAIC,EAAIH,EAAGmvJ,GACzC,IAAImoB,GAAOp3K,EAAKD,GAAMD,EAAIC,EACtBs3K,GAAOp3K,EAAKD,GAAMF,EAAIE,EACtBu3K,GAAQF,EAAMD,GAAOt3K,EAAIs3K,EAE7BnoB,EAAI,GAAKlvJ,EACTkvJ,EAAI,GAAKmoB,EACTnoB,EAAI,GAAKsoB,EAETtoB,EAAI,GAAKsoB,EACTtoB,EAAI,GAAKooB,EACTpoB,EAAI,GAAKhvJ,CACX,CAiBA,SAAS0qK,EAAsBv5K,EAAIye,EAAIrf,EAAIC,EAAIC,EAAIE,EAAIljB,EAAGC,EAAGshL,GAE3D,IAAInvJ,EACAM,EAAW,KACXF,EAAIl4B,IACRkuM,EAAI,GAAKxoM,EACTwoM,EAAI,GAAKvoM,EAGT,IAAK,IAAI0yB,EAAK,EAAGA,EAAK,EAAGA,GAAM,IAAM,CACnC81K,EAAI,GAAK32K,EAAYpO,EAAIZ,EAAIE,EAAI2P,GACjC81K,EAAI,GAAK32K,EAAYqQ,EAAIpf,EAAIG,EAAIyP,GACjC,IAAIq3K,EAAKj4K,EAAay2K,EAAKC,GAEvBuB,EAAKx3K,IACPJ,EAAIO,EACJH,EAAIw3K,EAER,CAEAx3K,EAAIl4B,IAEJ,IAAK,IAAI0P,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAC3B,GAAI0oB,EAAW21K,EACb,MAGF,IAAIzF,EAAOxwK,EAAIM,EACXE,EAAOR,EAAIM,EAEf+1K,EAAI,GAAK32K,EAAYpO,EAAIZ,EAAIE,EAAI4/K,GACjC6F,EAAI,GAAK32K,EAAYqQ,EAAIpf,EAAIG,EAAI0/K,GAC7BoH,EAAKj4K,EAAa02K,EAAKD,GAE3B,GAAI5F,GAAQ,GAAKoH,EAAKx3K,EACpBJ,EAAIwwK,EACJpwK,EAAIw3K,MACC,CAELtB,EAAI,GAAK52K,EAAYpO,EAAIZ,EAAIE,EAAI4P,GACjC81K,EAAI,GAAK52K,EAAYqQ,EAAIpf,EAAIG,EAAI0P,GACjC,IAAIq3K,EAAKl4K,EAAa22K,EAAKF,GAEvB51K,GAAQ,GAAKq3K,EAAKz3K,GACpBJ,EAAIQ,EACJJ,EAAIy3K,GAEJv3K,GAAY,EAEhB,CACF,CASA,OANI6uJ,IACFA,EAAI,GAAKzvJ,EAAYpO,EAAIZ,EAAIE,EAAIoP,GACjCmvJ,EAAI,GAAKzvJ,EAAYqQ,EAAIpf,EAAIG,EAAIkP,IAI5BkxK,EAAS9wK,EAClB,CAEA58B,EAAQ+lM,QAAUA,EAClB/lM,EAAQkzM,kBAAoBA,EAC5BlzM,EAAQ0lM,YAAcA,EACtB1lM,EAAQgmM,aAAeA,EACvBhmM,EAAQ6zM,eAAiBA,EACzB7zM,EAAQ2kM,kBAAoBA,EAC5B3kM,EAAQk8B,YAAcA,EACtBl8B,EAAQ6oC,sBAAwBA,EAChC7oC,EAAQkmM,gBAAkBA,EAC1BlmM,EAAQmmM,kBAAoBA,EAC5BnmM,EAAQm9B,mBAAqBA,EAC7Bn9B,EAAQqnM,sBAAwBA,C,oBC5gBhC,IAAIhpH,EAAM,CAAC,EAITA,EAFuB,qBAAd8kD,UAEH,CACJF,QAAS,CAAC,EACVsxE,GAAI,CAAC,EACLp6K,MAAM,EAENklE,iBAAiB,EACjBy/D,cAAc,GAGV01C,EAAOrxE,UAAUsxE,WAGzB,IAAInzM,EAAW+8E,EAIf,SAASm2H,EAAOE,GACd,IAAIH,EAAK,CAAC,EACNtxE,EAAU,CAAC,EAeX0xE,EAAUD,EAAG7kC,MAAM,qBAGnB3sC,EAAKwxE,EAAG7kC,MAAM,mBACf6kC,EAAG7kC,MAAM,6BACRx6I,EAAOq/K,EAAG7kC,MAAM,kBAEhB3M,EAAS,kBAAkB5iB,KAAKo0D,GAiDpC,OA5BIC,IACF1xE,EAAQ0xE,SAAU,EAClB1xE,EAAQm4B,QAAUu5C,EAAQ,IAKxBzxE,IACFD,EAAQC,IAAK,EACbD,EAAQm4B,QAAUl4B,EAAG,IAGnB7tG,IACF4tG,EAAQ5tG,MAAO,EACf4tG,EAAQm4B,QAAU/lI,EAAK,IAKrB6tI,IACFjgC,EAAQigC,QAAS,GAQZ,CACLjgC,QAASA,EACTsxE,GAAIA,EACJp6K,MAAM,EAGNklE,kBAAmBm/B,SAASC,cAAc,UAAU/7F,WACpDo8H,aAAiC,qBAAZ81C,QAKrBC,qBAAsB,iBAAkBvtI,SAAW27D,EAAQC,KAAOD,EAAQ5tG,KAE1Ey/K,uBAAwB,kBAAmBxtI,SAIvC27D,EAAQ5tG,MAAQ4tG,EAAQC,IAAMD,EAAQm4B,SAAW,IAEzD,CAEA75J,EAAOvB,QAAUsB,C,wBC1HjB,IAAI6vG,EAAWvxG,EAAQ,OAEvBI,EAAQs8L,WAAanrF,EAErB,IAAI9yB,EAAMz+E,EAAQ,OAOdm1M,EAAgC,qBAAXztI,UAA4BA,OAAOi4D,iBACxDy1E,EAAkB,iDAEtB,SAASv1C,EAAsB73J,GAE7B,OAAOA,EAAG63J,sBAAwB73J,EAAG63J,wBAA0B,CAC7Dl2I,KAAM,EACNC,IAAK,EAET,CAGA,SAAS2iL,EAAcvkM,EAAIizB,EAAG8wJ,EAAKspB,GAiCjC,OAhCAtpB,EAAMA,GAAO,CAAC,EAWVspB,IAAc52H,EAAIghB,gBACpB61G,EAAettM,EAAIizB,EAAG8wJ,GAQfttG,EAAI4kD,QAAQ0xE,SAAuB,MAAZ95K,EAAEs6K,QAAkBt6K,EAAEs6K,SAAWt6K,EAAEoR,SAC/D0/I,EAAIqE,IAAMn1J,EAAEs6K,OACZxpB,EAAIsE,IAAMp1J,EAAEu6K,QAEQ,MAAbv6K,EAAEoR,SACP0/I,EAAIqE,IAAMn1J,EAAEoR,QACZ0/I,EAAIsE,IAAMp1J,EAAEqR,SAGVgpK,EAAettM,EAAIizB,EAAG8wJ,GAGvBA,CACT,CAEA,SAASupB,EAAettM,EAAIizB,EAAG8wJ,GAE7B,IAAIjtH,EAAM+gG,EAAsB73J,GAChC+jL,EAAIqE,IAAMn1J,EAAEw6K,QAAU32I,EAAIn1C,KAC1BoiK,EAAIsE,IAAMp1J,EAAEy6K,QAAU52I,EAAIl1C,GAC5B,CAOA,SAAS+7G,EAAe39H,EAAIizB,EAAGo6K,GAG7B,GAFAp6K,EAAIA,GAAKysC,OAAOrkE,MAEH,MAAT43B,EAAEm1J,IACJ,OAAOn1J,EAGT,IAAI8jD,EAAY9jD,EAAEh6B,KACd00M,EAAU52H,GAAaA,EAAUrkE,QAAQ,UAAY,EAEzD,GAAKi7L,EAGE,CACL,IAAIrJ,EAAqB,YAAbvtH,EAA0B9jD,EAAE26K,cAAc,GAAK36K,EAAE46K,eAAe,GAC5EvJ,GAASC,EAAcvkM,EAAIskM,EAAOrxK,EAAGo6K,EACvC,MALE9I,EAAcvkM,EAAIizB,EAAGA,EAAGo6K,GACxBp6K,EAAEq1J,QAAUr1J,EAAEskF,WAAatkF,EAAEskF,WAAa,MAAQtkF,EAAE7L,QAAU,GAAK,EAUrE,IAAI0mL,EAAS76K,EAAE66K,OAMf,OAJe,MAAX76K,EAAE6kG,YAA4B9qE,IAAX8gJ,GAAwBV,EAAgB10D,KAAKzlH,EAAEh6B,QACpEg6B,EAAE6kG,MAAiB,EAATg2E,EAAa,EAAa,EAATA,EAAa,EAAa,EAATA,EAAa,EAAI,GAGxD76K,CACT,CAEA,SAAS0kG,EAAiB33H,EAAIjG,EAAM28E,GAC9By2H,EACFntM,EAAG23H,iBAAiB59H,EAAM28E,GAE1B12E,EAAG+tM,YAAY,KAAOh0M,EAAM28E,EAEhC,CAEA,SAASs3H,EAAoBhuM,EAAIjG,EAAM28E,GACjCy2H,EACFntM,EAAGguM,oBAAoBj0M,EAAM28E,GAE7B12E,EAAGiuM,YAAY,KAAOl0M,EAAM28E,EAEhC,CAYA,IAAI9iC,EAAOu5J,EAAc,SAAUl6K,GACjCA,EAAEq8E,iBACFr8E,EAAEi7K,kBACFj7K,EAAEk1J,cAAe,CACnB,EAAI,SAAUl1J,GACZA,EAAEk7K,aAAc,EAChBl7K,EAAEk1J,cAAe,CACnB,EAEA,SAASlxE,EAAahkF,GAEpB,OAAOA,EAAE6kG,MAAQ,CACnB,CAGA1/H,EAAQmsM,cAAgBA,EACxBnsM,EAAQulI,eAAiBA,EACzBvlI,EAAQu/H,iBAAmBA,EAC3Bv/H,EAAQ41M,oBAAsBA,EAC9B51M,EAAQw7C,KAAOA,EACfx7C,EAAQ6+G,aAAeA,C,oBC/IvB,IAAIm3F,EAAU,KAEd,SAAS10M,IACP,OAAO00M,GACT,CAEAz0M,EAAOvB,QAAUsB,C,wBCXjB,IAAIuE,EAAUjG,EAAQ,OAElB2kM,EAAY1+L,EAAQ0+L,UAEpBv1C,EAAM,WAAa,EAEL,IAAdu1C,EACFv1C,EAAM,WACJ,IAAK,IAAIxuG,KAAKxyC,UACZ,MAAM,IAAIwxH,MAAMxxH,UAAUwyC,GAE9B,EACS+jJ,EAAY,IACrBv1C,EAAM,WACJ,IAAK,IAAIxuG,KAAKxyC,UACZ0wJ,QAAQ1P,IAAIhhJ,UAAUwyC,GAE1B,GAGF,IAAIl/C,EAAW0tJ,EACfztJ,EAAOvB,QAAUsB,C,kDCjBjB,IAAI20M,EAAoC,qBAAjBrI,aAA+BpwK,MAAQowK,aAM9D,SAASrtM,IACP,IAAIorL,EAAM,IAAIsqB,EAAU,GAExB,OADAltH,EAAS4iG,GACFA,CACT,CAOA,SAAS5iG,EAAS4iG,GAOhB,OANAA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,CACT,CAQA,SAAS9tJ,EAAK8tJ,EAAKt0H,GAOjB,OANAs0H,EAAI,GAAKt0H,EAAE,GACXs0H,EAAI,GAAKt0H,EAAE,GACXs0H,EAAI,GAAKt0H,EAAE,GACXs0H,EAAI,GAAKt0H,EAAE,GACXs0H,EAAI,GAAKt0H,EAAE,GACXs0H,EAAI,GAAKt0H,EAAE,GACJs0H,CACT,CASA,SAAS3iG,EAAI2iG,EAAKuqB,EAAIC,GAIpB,IAAIC,EAAOF,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAClCE,EAAOH,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAClCG,EAAOJ,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAClCI,EAAOL,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAClCK,EAAON,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAC1CO,EAAOP,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAO9C,OANAvqB,EAAI,GAAKyqB,EACTzqB,EAAI,GAAK0qB,EACT1qB,EAAI,GAAK2qB,EACT3qB,EAAI,GAAK4qB,EACT5qB,EAAI,GAAK6qB,EACT7qB,EAAI,GAAK8qB,EACF9qB,CACT,CASA,SAAS3kH,EAAU2kH,EAAK/+J,EAAG0Q,GAOzB,OANAquJ,EAAI,GAAK/+J,EAAE,GACX++J,EAAI,GAAK/+J,EAAE,GACX++J,EAAI,GAAK/+J,EAAE,GACX++J,EAAI,GAAK/+J,EAAE,GACX++J,EAAI,GAAK/+J,EAAE,GAAK0Q,EAAE,GAClBquJ,EAAI,GAAK/+J,EAAE,GAAK0Q,EAAE,GACXquJ,CACT,CASA,SAAShhI,EAAOghI,EAAK/+J,EAAGkN,GACtB,IAAI48K,EAAK9pL,EAAE,GACP+pL,EAAK/pL,EAAE,GACPgqL,EAAMhqL,EAAE,GACRiqL,EAAKjqL,EAAE,GACPkqL,EAAKlqL,EAAE,GACPmqL,EAAMnqL,EAAE,GACRoqL,EAAKryM,KAAK4sB,IAAIuI,GACdm9K,EAAKtyM,KAAK0sB,IAAIyI,GAOlB,OANA6xJ,EAAI,GAAK+qB,EAAKO,EAAKJ,EAAKG,EACxBrrB,EAAI,IAAM+qB,EAAKM,EAAKH,EAAKI,EACzBtrB,EAAI,GAAKgrB,EAAKM,EAAKH,EAAKE,EACxBrrB,EAAI,IAAMgrB,EAAKK,EAAKC,EAAKH,EACzBnrB,EAAI,GAAKsrB,EAAKL,EAAMI,EAAKD,EACzBprB,EAAI,GAAKsrB,EAAKF,EAAMC,EAAKJ,EAClBjrB,CACT,CASA,SAAS/mL,EAAM+mL,EAAK/+J,EAAG0Q,GACrB,IAAI45K,EAAK55K,EAAE,GACP65K,EAAK75K,EAAE,GAOX,OANAquJ,EAAI,GAAK/+J,EAAE,GAAKsqL,EAChBvrB,EAAI,GAAK/+J,EAAE,GAAKuqL,EAChBxrB,EAAI,GAAK/+J,EAAE,GAAKsqL,EAChBvrB,EAAI,GAAK/+J,EAAE,GAAKuqL,EAChBxrB,EAAI,GAAK/+J,EAAE,GAAKsqL,EAChBvrB,EAAI,GAAK/+J,EAAE,GAAKuqL,EACTxrB,CACT,CAQA,SAASpwC,EAAOowC,EAAK/+J,GACnB,IAAI8pL,EAAK9pL,EAAE,GACP+pL,EAAK/pL,EAAE,GACPgqL,EAAMhqL,EAAE,GACRiqL,EAAKjqL,EAAE,GACPkqL,EAAKlqL,EAAE,GACPmqL,EAAMnqL,EAAE,GACRwqL,EAAMV,EAAKI,EAAKD,EAAKF,EAEzB,OAAKS,GAILA,EAAM,EAAMA,EACZzrB,EAAI,GAAKmrB,EAAKM,EACdzrB,EAAI,IAAMkrB,EAAKO,EACfzrB,EAAI,IAAMgrB,EAAKS,EACfzrB,EAAI,GAAK+qB,EAAKU,EACdzrB,EAAI,IAAMgrB,EAAKI,EAAMD,EAAKF,GAAOQ,EACjCzrB,EAAI,IAAMkrB,EAAKD,EAAMF,EAAKK,GAAOK,EAC1BzrB,GAVE,IAWX,CAEA3rL,EAAQO,OAASA,EACjBP,EAAQ+oF,SAAWA,EACnB/oF,EAAQ69B,KAAOA,EACf79B,EAAQgpF,IAAMA,EACdhpF,EAAQgnE,UAAYA,EACpBhnE,EAAQ2qD,OAASA,EACjB3qD,EAAQ4E,MAAQA,EAChB5E,EAAQu7I,OAASA,C,oBCzKjB,IAAI87D,EAAoB,GACpBC,EAAwB,EAG5B,SAASC,EAAap3K,GACpB,IAAIv2B,EAAI,EAER,MAAOu2B,GAAKk3K,EACVztM,GAAS,EAAJu2B,EACLA,IAAM,EAGR,OAAOA,EAAIv2B,CACb,CAEA,SAAS4tM,EAAiBxkJ,EAAO8jH,EAAIC,EAAI/G,GACvC,IAAIynC,EAAQ3gC,EAAK,EAEjB,GAAI2gC,IAAU1gC,EACZ,OAAO,EAGT,GAAI/G,EAAQh9G,EAAMykJ,KAAUzkJ,EAAM8jH,IAAO,EAAG,CAC1C,MAAO2gC,EAAQ1gC,GAAM/G,EAAQh9G,EAAMykJ,GAAQzkJ,EAAMykJ,EAAQ,IAAM,EAC7DA,IAGFC,EAAW1kJ,EAAO8jH,EAAI2gC,EACxB,MACE,MAAOA,EAAQ1gC,GAAM/G,EAAQh9G,EAAMykJ,GAAQzkJ,EAAMykJ,EAAQ,KAAO,EAC9DA,IAIJ,OAAOA,EAAQ3gC,CACjB,CAEA,SAAS4gC,EAAW1kJ,EAAO8jH,EAAIC,GAC7BA,IAEA,MAAOD,EAAKC,EAAI,CACd,IAAIv6I,EAAIw2B,EAAM8jH,GACd9jH,EAAM8jH,KAAQ9jH,EAAM+jH,GACpB/jH,EAAM+jH,KAAQv6I,CAChB,CACF,CAEA,SAASm7K,EAAoB3kJ,EAAO8jH,EAAIC,EAAIr6J,EAAOszJ,GAKjD,IAJItzJ,IAAUo6J,GACZp6J,IAGKA,EAAQq6J,EAAIr6J,IAAS,CAC1B,IAGIw5I,EAHA0hD,EAAQ5kJ,EAAMt2C,GACd6M,EAAOutJ,EACPrtJ,EAAQ/M,EAGZ,MAAO6M,EAAOE,EACZysI,EAAM3sI,EAAOE,IAAU,EAEnBumJ,EAAQ4nC,EAAO5kJ,EAAMkjG,IAAQ,EAC/BzsI,EAAQysI,EAER3sI,EAAO2sI,EAAM,EAIjB,IAAI/1H,EAAIzjB,EAAQ6M,EAEhB,OAAQ4W,GACN,KAAK,EACH6yB,EAAMzpC,EAAO,GAAKypC,EAAMzpC,EAAO,GAEjC,KAAK,EACHypC,EAAMzpC,EAAO,GAAKypC,EAAMzpC,EAAO,GAEjC,KAAK,EACHypC,EAAMzpC,EAAO,GAAKypC,EAAMzpC,GACxB,MAEF,QACE,MAAO4W,EAAI,EACT6yB,EAAMzpC,EAAO4W,GAAK6yB,EAAMzpC,EAAO4W,EAAI,GACnCA,IAKN6yB,EAAMzpC,GAAQquL,CAChB,CACF,CAEA,SAASC,EAAW3rM,EAAO8mD,EAAOt2C,EAAOpK,EAAQwlM,EAAM9nC,GACrD,IAAI+nC,EAAa,EACbC,EAAY,EACZ5rM,EAAS,EAEb,GAAI4jK,EAAQ9jK,EAAO8mD,EAAMt2C,EAAQo7L,IAAS,EAAG,CAC3CE,EAAY1lM,EAASwlM,EAErB,MAAO1rM,EAAS4rM,GAAahoC,EAAQ9jK,EAAO8mD,EAAMt2C,EAAQo7L,EAAO1rM,IAAW,EAC1E2rM,EAAa3rM,EACbA,EAAyB,GAAfA,GAAU,GAEhBA,GAAU,IACZA,EAAS4rM,GAIT5rM,EAAS4rM,IACX5rM,EAAS4rM,GAGXD,GAAcD,EACd1rM,GAAU0rM,CACZ,KAAO,CACLE,EAAYF,EAAO,EAEnB,MAAO1rM,EAAS4rM,GAAahoC,EAAQ9jK,EAAO8mD,EAAMt2C,EAAQo7L,EAAO1rM,KAAY,EAC3E2rM,EAAa3rM,EACbA,EAAyB,GAAfA,GAAU,GAEhBA,GAAU,IACZA,EAAS4rM,GAIT5rM,EAAS4rM,IACX5rM,EAAS4rM,GAGX,IAAI7nL,EAAM4nL,EACVA,EAAaD,EAAO1rM,EACpBA,EAAS0rM,EAAO3nL,CAClB,CAEA4nL,IAEA,MAAOA,EAAa3rM,EAAQ,CAC1B,IAAIirD,EAAI0gJ,GAAc3rM,EAAS2rM,IAAe,GAE1C/nC,EAAQ9jK,EAAO8mD,EAAMt2C,EAAQ26C,IAAM,EACrC0gJ,EAAa1gJ,EAAI,EAEjBjrD,EAASirD,CAEb,CAEA,OAAOjrD,CACT,CAEA,SAAS6rM,EAAY/rM,EAAO8mD,EAAOt2C,EAAOpK,EAAQwlM,EAAM9nC,GACtD,IAAI+nC,EAAa,EACbC,EAAY,EACZ5rM,EAAS,EAEb,GAAI4jK,EAAQ9jK,EAAO8mD,EAAMt2C,EAAQo7L,IAAS,EAAG,CAC3CE,EAAYF,EAAO,EAEnB,MAAO1rM,EAAS4rM,GAAahoC,EAAQ9jK,EAAO8mD,EAAMt2C,EAAQo7L,EAAO1rM,IAAW,EAC1E2rM,EAAa3rM,EACbA,EAAyB,GAAfA,GAAU,GAEhBA,GAAU,IACZA,EAAS4rM,GAIT5rM,EAAS4rM,IACX5rM,EAAS4rM,GAGX,IAAI7nL,EAAM4nL,EACVA,EAAaD,EAAO1rM,EACpBA,EAAS0rM,EAAO3nL,CAClB,KAAO,CACL6nL,EAAY1lM,EAASwlM,EAErB,MAAO1rM,EAAS4rM,GAAahoC,EAAQ9jK,EAAO8mD,EAAMt2C,EAAQo7L,EAAO1rM,KAAY,EAC3E2rM,EAAa3rM,EACbA,EAAyB,GAAfA,GAAU,GAEhBA,GAAU,IACZA,EAAS4rM,GAIT5rM,EAAS4rM,IACX5rM,EAAS4rM,GAGXD,GAAcD,EACd1rM,GAAU0rM,CACZ,CAEAC,IAEA,MAAOA,EAAa3rM,EAAQ,CAC1B,IAAIirD,EAAI0gJ,GAAc3rM,EAAS2rM,IAAe,GAE1C/nC,EAAQ9jK,EAAO8mD,EAAMt2C,EAAQ26C,IAAM,EACrCjrD,EAASirD,EAET0gJ,EAAa1gJ,EAAI,CAErB,CAEA,OAAOjrD,CACT,CAEA,SAAS8rM,EAAQllJ,EAAOg9G,GACtB,IAIImoC,EACAC,EALAC,EAAYf,EACZhlM,EAAS,EAKTgmM,EAAY,EAChBhmM,EAAS0gD,EAAM1gD,OAMf,IAAI6d,EAAM,GAKV,SAASooL,EAAQC,EAAWC,GAC1BN,EAASG,GAAaE,EACtBJ,EAAUE,GAAaG,EACvBH,GAAa,CACf,CAEA,SAASI,IACP,MAAOJ,EAAY,EAAG,CACpB,IAAIn4K,EAAIm4K,EAAY,EAEpB,GAAIn4K,GAAK,GAAKi4K,EAAUj4K,EAAI,IAAMi4K,EAAUj4K,GAAKi4K,EAAUj4K,EAAI,IAAMA,GAAK,GAAKi4K,EAAUj4K,EAAI,IAAMi4K,EAAUj4K,GAAKi4K,EAAUj4K,EAAI,GAC1Hi4K,EAAUj4K,EAAI,GAAKi4K,EAAUj4K,EAAI,IACnCA,SAEG,GAAIi4K,EAAUj4K,GAAKi4K,EAAUj4K,EAAI,GACtC,MAGFw4K,EAAQx4K,EACV,CACF,CAEA,SAASy4K,IACP,MAAON,EAAY,EAAG,CACpB,IAAIn4K,EAAIm4K,EAAY,EAEhBn4K,EAAI,GAAKi4K,EAAUj4K,EAAI,GAAKi4K,EAAUj4K,EAAI,IAC5CA,IAGFw4K,EAAQx4K,EACV,CACF,CAEA,SAASw4K,EAAQvkM,GACf,IAAIykM,EAASV,EAAS/jM,GAClB0kM,EAAUV,EAAUhkM,GACpB2kM,EAASZ,EAAS/jM,EAAI,GACtBw2C,EAAUwtJ,EAAUhkM,EAAI,GAC5BgkM,EAAUhkM,GAAK0kM,EAAUluJ,EAErBx2C,IAAMkkM,EAAY,IACpBH,EAAS/jM,EAAI,GAAK+jM,EAAS/jM,EAAI,GAC/BgkM,EAAUhkM,EAAI,GAAKgkM,EAAUhkM,EAAI,IAGnCkkM,IACA,IAAI93J,EAAIy3J,EAAYjlJ,EAAM+lJ,GAAS/lJ,EAAO6lJ,EAAQC,EAAS,EAAG9oC,GAC9D6oC,GAAUr4J,EACVs4J,GAAWt4J,EAEK,IAAZs4J,IAIJluJ,EAAUitJ,EAAW7kJ,EAAM6lJ,EAASC,EAAU,GAAI9lJ,EAAO+lJ,EAAQnuJ,EAASA,EAAU,EAAGolH,GAEvE,IAAZplH,IAIAkuJ,GAAWluJ,EACbouJ,EAASH,EAAQC,EAASC,EAAQnuJ,GAElCquJ,EAAUJ,EAAQC,EAASC,EAAQnuJ,IAEvC,CAEA,SAASouJ,EAASH,EAAQC,EAASC,EAAQnuJ,GACzC,IAAIx2C,EAAI,EAER,IAAKA,EAAI,EAAGA,EAAI0kM,EAAS1kM,IACvB+b,EAAI/b,GAAK4+C,EAAM6lJ,EAASzkM,GAG1B,IAAI8kM,EAAU,EACVC,EAAUJ,EACVK,EAAOP,EAGX,GAFA7lJ,EAAMomJ,KAAUpmJ,EAAMmmJ,KAEJ,MAAZvuJ,EAQN,GAAgB,IAAZkuJ,EAAJ,CASA,IACIO,EAAQC,EAAQC,EADhBC,EAAanB,EAGjB,MAAO,EAAG,CACRgB,EAAS,EACTC,EAAS,EACTC,GAAO,EAEP,GACE,GAAIvpC,EAAQh9G,EAAMmmJ,GAAUhpL,EAAI+oL,IAAY,GAK1C,GAJAlmJ,EAAMomJ,KAAUpmJ,EAAMmmJ,KACtBG,IACAD,EAAS,EAES,MAAZzuJ,EAAe,CACnB2uJ,GAAO,EACP,KACF,OAMA,GAJAvmJ,EAAMomJ,KAAUjpL,EAAI+oL,KACpBG,IACAC,EAAS,EAES,MAAZR,EAAe,CACnBS,GAAO,EACP,KACF,SAEMF,EAASC,GAAUE,GAE7B,GAAID,EACF,MAGF,EAAG,CAGD,GAFAF,EAASpB,EAAYjlJ,EAAMmmJ,GAAUhpL,EAAK+oL,EAASJ,EAAS,EAAG9oC,GAEhD,IAAXqpC,EAAc,CAChB,IAAKjlM,EAAI,EAAGA,EAAIilM,EAAQjlM,IACtB4+C,EAAMomJ,EAAOhlM,GAAK+b,EAAI+oL,EAAU9kM,GAOlC,GAJAglM,GAAQC,EACRH,GAAWG,EACXP,GAAWO,EAEPP,GAAW,EAAG,CAChBS,GAAO,EACP,KACF,CACF,CAIA,GAFAvmJ,EAAMomJ,KAAUpmJ,EAAMmmJ,KAEJ,MAAZvuJ,EAAe,CACnB2uJ,GAAO,EACP,KACF,CAIA,GAFAD,EAASzB,EAAW1nL,EAAI+oL,GAAUlmJ,EAAOmmJ,EAASvuJ,EAAS,EAAGolH,GAE/C,IAAXspC,EAAc,CAChB,IAAKllM,EAAI,EAAGA,EAAIklM,EAAQllM,IACtB4+C,EAAMomJ,EAAOhlM,GAAK4+C,EAAMmmJ,EAAU/kM,GAOpC,GAJAglM,GAAQE,EACRH,GAAWG,EACX1uJ,GAAW0uJ,EAEK,IAAZ1uJ,EAAe,CACjB2uJ,GAAO,EACP,KACF,CACF,CAIA,GAFAvmJ,EAAMomJ,KAAUjpL,EAAI+oL,KAEF,MAAZJ,EAAe,CACnBS,GAAO,EACP,KACF,CAEAC,GACF,OAASH,GAAU/B,GAAyBgC,GAAUhC,GAEtD,GAAIiC,EACF,MAGEC,EAAa,IACfA,EAAa,GAGfA,GAAc,CAChB,CAKA,GAHAnB,EAAYmB,EACZnB,EAAY,IAAMA,EAAY,GAEd,IAAZS,EAAe,CACjB,IAAK1kM,EAAI,EAAGA,EAAIw2C,EAASx2C,IACvB4+C,EAAMomJ,EAAOhlM,GAAK4+C,EAAMmmJ,EAAU/kM,GAGpC4+C,EAAMomJ,EAAOxuJ,GAAWz6B,EAAI+oL,EAC9B,KAAO,IAAgB,IAAZJ,EACT,MAAM,IAAIt5E,MAEV,IAAKprH,EAAI,EAAGA,EAAI0kM,EAAS1kM,IACvB4+C,EAAMomJ,EAAOhlM,GAAK+b,EAAI+oL,EAAU9kM,EAEpC,CAlHA,KAPA,CACE,IAAKA,EAAI,EAAGA,EAAIw2C,EAASx2C,IACvB4+C,EAAMomJ,EAAOhlM,GAAK4+C,EAAMmmJ,EAAU/kM,GAGpC4+C,EAAMomJ,EAAOxuJ,GAAWz6B,EAAI+oL,EAE9B,MAdE,IAAK9kM,EAAI,EAAGA,EAAI0kM,EAAS1kM,IACvB4+C,EAAMomJ,EAAOhlM,GAAK+b,EAAI+oL,EAAU9kM,EAgItC,CAEA,SAAS6kM,EAAUJ,EAAQC,EAASC,EAAQnuJ,GAC1C,IAAIx2C,EAAI,EAER,IAAKA,EAAI,EAAGA,EAAIw2C,EAASx2C,IACvB+b,EAAI/b,GAAK4+C,EAAM+lJ,EAAS3kM,GAG1B,IAAI8kM,EAAUL,EAASC,EAAU,EAC7BK,EAAUvuJ,EAAU,EACpBwuJ,EAAOL,EAASnuJ,EAAU,EAC1B6uJ,EAAe,EACfC,EAAa,EAGjB,GAFA1mJ,EAAMomJ,KAAUpmJ,EAAMkmJ,KAEJ,MAAZJ,EAUN,GAAgB,IAAZluJ,EAAJ,CAcA,IAAI4uJ,EAAanB,EAEjB,MAAO,EAAM,CACX,IAAIgB,EAAS,EACTC,EAAS,EACTC,GAAO,EAEX,GACE,GAAIvpC,EAAQ7/I,EAAIgpL,GAAUnmJ,EAAMkmJ,IAAY,GAK1C,GAJAlmJ,EAAMomJ,KAAUpmJ,EAAMkmJ,KACtBG,IACAC,EAAS,EAES,MAAZR,EAAe,CACnBS,GAAO,EACP,KACF,OAMA,GAJAvmJ,EAAMomJ,KAAUjpL,EAAIgpL,KACpBG,IACAD,EAAS,EAES,MAAZzuJ,EAAe,CACnB2uJ,GAAO,EACP,KACF,SAEMF,EAASC,GAAUE,GAE7B,GAAID,EACF,MAGF,EAAG,CAGD,GAFAF,EAASP,EAAUb,EAAY9nL,EAAIgpL,GAAUnmJ,EAAO6lJ,EAAQC,EAASA,EAAU,EAAG9oC,GAEnE,IAAXqpC,EAAc,CAOhB,IANAD,GAAQC,EACRH,GAAWG,EACXP,GAAWO,EACXK,EAAaN,EAAO,EACpBK,EAAeP,EAAU,EAEpB9kM,EAAIilM,EAAS,EAAGjlM,GAAK,EAAGA,IAC3B4+C,EAAM0mJ,EAAatlM,GAAK4+C,EAAMymJ,EAAerlM,GAG/C,GAAgB,IAAZ0kM,EAAe,CACjBS,GAAO,EACP,KACF,CACF,CAIA,GAFAvmJ,EAAMomJ,KAAUjpL,EAAIgpL,KAEF,MAAZvuJ,EAAe,CACnB2uJ,GAAO,EACP,KACF,CAIA,GAFAD,EAAS1uJ,EAAUitJ,EAAW7kJ,EAAMkmJ,GAAU/oL,EAAK,EAAGy6B,EAASA,EAAU,EAAGolH,GAE7D,IAAXspC,EAAc,CAOhB,IANAF,GAAQE,EACRH,GAAWG,EACX1uJ,GAAW0uJ,EACXI,EAAaN,EAAO,EACpBK,EAAeN,EAAU,EAEpB/kM,EAAI,EAAGA,EAAIklM,EAAQllM,IACtB4+C,EAAM0mJ,EAAatlM,GAAK+b,EAAIspL,EAAerlM,GAG7C,GAAIw2C,GAAW,EAAG,CAChB2uJ,GAAO,EACP,KACF,CACF,CAIA,GAFAvmJ,EAAMomJ,KAAUpmJ,EAAMkmJ,KAEJ,MAAZJ,EAAe,CACnBS,GAAO,EACP,KACF,CAEAC,GACF,OAASH,GAAU/B,GAAyBgC,GAAUhC,GAEtD,GAAIiC,EACF,MAGEC,EAAa,IACfA,EAAa,GAGfA,GAAc,CAChB,CAQA,GANAnB,EAAYmB,EAERnB,EAAY,IACdA,EAAY,GAGE,IAAZztJ,EAAe,CAMjB,IALAwuJ,GAAQN,EACRI,GAAWJ,EACXY,EAAaN,EAAO,EACpBK,EAAeP,EAAU,EAEpB9kM,EAAI0kM,EAAU,EAAG1kM,GAAK,EAAGA,IAC5B4+C,EAAM0mJ,EAAatlM,GAAK4+C,EAAMymJ,EAAerlM,GAG/C4+C,EAAMomJ,GAAQjpL,EAAIgpL,EACpB,KAAO,IAAgB,IAAZvuJ,EACT,MAAM,IAAI40E,MAIV,IAFAi6E,EAAeL,GAAQxuJ,EAAU,GAE5Bx2C,EAAI,EAAGA,EAAIw2C,EAASx2C,IACvB4+C,EAAMymJ,EAAerlM,GAAK+b,EAAI/b,EAElC,CA/HA,KAZA,CAME,IALAglM,GAAQN,EACRI,GAAWJ,EACXY,EAAaN,EAAO,EACpBK,EAAeP,EAAU,EAEpB9kM,EAAI0kM,EAAU,EAAG1kM,GAAK,EAAGA,IAC5B4+C,EAAM0mJ,EAAatlM,GAAK4+C,EAAMymJ,EAAerlM,GAG/C4+C,EAAMomJ,GAAQjpL,EAAIgpL,EAEpB,MAnBE,IAFAM,EAAeL,GAAQxuJ,EAAU,GAE5Bx2C,EAAI,EAAGA,EAAIw2C,EAASx2C,IACvB4+C,EAAMymJ,EAAerlM,GAAK+b,EAAI/b,EAkJpC,CA3XA+jM,EAAW,GACXC,EAAY,GA4XZj6M,KAAKu6M,UAAYA,EACjBv6M,KAAKy6M,eAAiBA,EACtBz6M,KAAKo6M,QAAUA,CACjB,CAEA,SAAS1uL,EAAKmpC,EAAOg9G,EAAS8G,EAAIC,GAC3BD,IACHA,EAAK,GAGFC,IACHA,EAAK/jH,EAAM1gD,QAGb,IAAIqnM,EAAY5iC,EAAKD,EAErB,KAAI6iC,EAAY,GAAhB,CAIA,IAAIvB,EAAY,EAEhB,GAAIuB,EAAYtC,EAGd,OAFAe,EAAYZ,EAAiBxkJ,EAAO8jH,EAAIC,EAAI/G,QAC5C2nC,EAAoB3kJ,EAAO8jH,EAAIC,EAAID,EAAKshC,EAAWpoC,GAIrD,IAAI4pC,EAAK,IAAI1B,EAAQllJ,EAAOg9G,GACxB6pC,EAAStC,EAAaoC,GAE1B,EAAG,CAGD,GAFAvB,EAAYZ,EAAiBxkJ,EAAO8jH,EAAIC,EAAI/G,GAExCooC,EAAYyB,EAAQ,CACtB,IAAI1jL,EAAQwjL,EAERxjL,EAAQ0jL,IACV1jL,EAAQ0jL,GAGVlC,EAAoB3kJ,EAAO8jH,EAAIA,EAAK3gJ,EAAO2gJ,EAAKshC,EAAWpoC,GAC3DooC,EAAYjiL,CACd,CAEAyjL,EAAGrB,QAAQzhC,EAAIshC,GACfwB,EAAGlB,YACHiB,GAAavB,EACbthC,GAAMshC,CACR,OAAuB,IAAduB,GAETC,EAAGhB,gBAjCH,CAkCF,CAEAr3M,EAAOvB,QAAU6pB,C,iCCnpBjB,IAAIiwL,EAAiB,CACnB,oBAAqB,EACrB,kBAAmB,EACnB,gBAAiB,EACjB,iBAAkB,EAClB,0BAA2B,EAC3B,yBAA0B,EAE1B,iBAAkB,EAClB,kBAAmB,GAEjBC,EAAc,CAChB,qBAAsB,EACtB,sBAAuB,EACvB,6BAA8B,EAC9B,sBAAuB,EACvB,uBAAwB,EACxB,sBAAuB,EACvB,uBAAwB,EACxB,wBAAyB,EACzB,wBAAyB,GAEvBC,EAAcC,OAAO55M,UAAU+lL,SAC/B8zB,EAAa18K,MAAMn9B,UACnB85M,EAAgBD,EAAWE,QAC3BC,EAAeH,EAAWxpJ,OAC1B4pJ,EAAcJ,EAAW/4M,MACzBo5M,EAAYL,EAAWrkL,IACvB2kL,EAAeN,EAAW/4F,OAE1BniH,EAAU,CAAC,EAEf,SAASgnK,EAAUrkK,EAAMuyF,GACvBl1F,EAAQ2C,GAAQuyF,CAClB,CAmBA,SAASxxE,EAAM2wB,GACb,GAAc,MAAVA,GAAmC,iBAAVA,EAC3B,OAAOA,EAGT,IAAIj5B,EAASi5B,EACTonK,EAAUT,EAAYlkM,KAAKu9B,GAE/B,GAAgB,mBAAZonK,EAA8B,CAChCrgM,EAAS,GAET,IAAK,IAAIhG,EAAI,EAAGuY,EAAM0mB,EAAO/gC,OAAQ8B,EAAIuY,EAAKvY,IAC5CgG,EAAOhG,GAAKsO,EAAM2wB,EAAOj/B,GAE7B,MAAO,GAAI2lM,EAAYU,GAAU,CAC/B,IAAIvwI,EAAO72B,EAAO/yC,YAElB,GAAI+yC,EAAO/yC,YAAYolD,KACrBtrC,EAAS8vD,EAAKxkB,KAAKrS,OACd,CACLj5B,EAAS,IAAI8vD,EAAK72B,EAAO/gC,QAEzB,IAAS8B,EAAI,EAAGuY,EAAM0mB,EAAO/gC,OAAQ8B,EAAIuY,EAAKvY,IAC5CgG,EAAOhG,GAAKsO,EAAM2wB,EAAOj/B,GAE7B,CACF,MAAO,IAAK0lM,EAAeW,KAAaC,EAAYrnK,KAAY2rF,EAAM3rF,GAGpE,IAAK,IAAIvzC,KAFTsa,EAAS,CAAC,EAEMi5B,EACVA,EAAOtzC,eAAeD,KACxBsa,EAAOta,GAAO4iB,EAAM2wB,EAAOvzC,KAKjC,OAAOsa,CACT,CASA,SAASk2E,EAAMr8E,EAAQo/B,EAAQo/H,GAG7B,IAAKtyJ,EAASkzB,KAAYlzB,EAASlM,GACjC,OAAOw+J,EAAY/vJ,EAAM2wB,GAAUp/B,EAGrC,IAAK,IAAInU,KAAOuzC,EACd,GAAIA,EAAOtzC,eAAeD,GAAM,CAC9B,IAAI66M,EAAa1mM,EAAOnU,GACpB86M,EAAavnK,EAAOvzC,IAEpBqgB,EAASy6L,KAAez6L,EAASw6L,IAAgB7pM,EAAQ8pM,IAAgB9pM,EAAQ6pM,IAAgB37E,EAAM47E,IAAgB57E,EAAM27E,IAAgBE,EAAgBD,IAAgBC,EAAgBF,IAAgBD,EAAYE,IAAgBF,EAAYC,IAG9OloC,GAAe3yK,KAAOmU,IAG/BA,EAAOnU,GAAO4iB,EAAM2wB,EAAOvzC,IAAM,IAJjCwwF,EAAMqqH,EAAYC,EAAYnoC,EAMlC,CAGF,OAAOx+J,CACT,CAQA,SAAS0tC,EAASm5J,EAAkBroC,GAGlC,IAFA,IAAIr4J,EAAS0gM,EAAiB,GAErB1mM,EAAI,EAAGuY,EAAMmuL,EAAiBxoM,OAAQ8B,EAAIuY,EAAKvY,IACtDgG,EAASk2E,EAAMl2E,EAAQ0gM,EAAiB1mM,GAAIq+J,GAG9C,OAAOr4J,CACT,CAQA,SAAS1U,EAAOuO,EAAQo/B,GACtB,IAAK,IAAIvzC,KAAOuzC,EACVA,EAAOtzC,eAAeD,KACxBmU,EAAOnU,GAAOuzC,EAAOvzC,IAIzB,OAAOmU,CACT,CASA,SAAS9I,EAAS8I,EAAQo/B,EAAQ0nK,GAChC,IAAK,IAAIj7M,KAAOuzC,EACVA,EAAOtzC,eAAeD,KAASi7M,EAAyB,MAAf1nK,EAAOvzC,GAA8B,MAAfmU,EAAOnU,MACxEmU,EAAOnU,GAAOuzC,EAAOvzC,IAIzB,OAAOmU,CACT,CAEA,IASI85L,EATAlsK,EAAe,WACjB,OAAO7iC,EAAQ6iC,cACjB,EASA,SAASa,IAOP,OANKqrK,IAGHA,EAAOlsK,IAAea,WAAW,OAG5BqrK,CACT,CAOA,SAASzzL,EAAQ04C,EAAO9mD,GACtB,GAAI8mD,EAAO,CACT,GAAIA,EAAM14C,QACR,OAAO04C,EAAM14C,QAAQpO,GAGvB,IAAK,IAAIkI,EAAI,EAAGuY,EAAMqmC,EAAM1gD,OAAQ8B,EAAIuY,EAAKvY,IAC3C,GAAI4+C,EAAM5+C,KAAOlI,EACf,OAAOkI,CAGb,CAEA,OAAQ,CACV,CAUA,SAAS0X,EAAS6+D,EAAOqwH,GACvB,IAAIC,EAAiBtwH,EAAMtqF,UAE3B,SAAS66M,IAAK,CAKd,IAAK,IAAIr4L,KAHTq4L,EAAE76M,UAAY26M,EAAU36M,UACxBsqF,EAAMtqF,UAAY,IAAI66M,EAELD,EACftwH,EAAMtqF,UAAUwiB,GAAQo4L,EAAep4L,GAGzC8nE,EAAMtqF,UAAUC,YAAcqqF,EAC9BA,EAAM2/E,WAAa0wC,CACrB,CASA,SAASriM,EAAM1E,EAAQo/B,EAAQ0nK,GAC7B9mM,EAAS,cAAeA,EAASA,EAAO5T,UAAY4T,EACpDo/B,EAAS,cAAeA,EAASA,EAAOhzC,UAAYgzC,EACpDloC,EAAS8I,EAAQo/B,EAAQ0nK,EAC3B,CAOA,SAASp5B,EAAY5iL,GACnB,GAAKA,EAIL,MAAmB,iBAARA,GAIkB,iBAAfA,EAAKuT,MACrB,CAUA,SAAS3R,EAAK4uG,EAAK55F,EAAIC,GACrB,GAAM25F,GAAO55F,EAIb,GAAI45F,EAAI6qG,SAAW7qG,EAAI6qG,UAAYD,EACjC5qG,EAAI6qG,QAAQzkM,EAAIC,QACX,GAAI25F,EAAIj9F,UAAYi9F,EAAIj9F,OAC7B,IAAK,IAAI8B,EAAI,EAAGuY,EAAM4iF,EAAIj9F,OAAQ8B,EAAIuY,EAAKvY,IACzCuB,EAAGG,KAAKF,EAAS25F,EAAIn7F,GAAIA,EAAGm7F,QAG9B,IAAK,IAAIzvG,KAAOyvG,EACVA,EAAIxvG,eAAeD,IACrB6V,EAAGG,KAAKF,EAAS25F,EAAIzvG,GAAMA,EAAKyvG,EAIxC,CAWA,SAAS15E,EAAI05E,EAAK55F,EAAIC,GACpB,GAAM25F,GAAO55F,EAAb,CAIA,GAAI45F,EAAI15E,KAAO05E,EAAI15E,MAAQ0kL,EACzB,OAAOhrG,EAAI15E,IAAIlgB,EAAIC,GAInB,IAFA,IAAIwE,EAAS,GAEJhG,EAAI,EAAGuY,EAAM4iF,EAAIj9F,OAAQ8B,EAAIuY,EAAKvY,IACzCgG,EAAOjb,KAAKwW,EAAGG,KAAKF,EAAS25F,EAAIn7F,GAAIA,EAAGm7F,IAG1C,OAAOn1F,CAXT,CAaF,CAWA,SAAS+mG,EAAO5R,EAAK55F,EAAIwlM,EAAMvlM,GAC7B,GAAM25F,GAAO55F,EAAb,CAIA,GAAI45F,EAAI4R,QAAU5R,EAAI4R,SAAWq5F,EAC/B,OAAOjrG,EAAI4R,OAAOxrG,EAAIwlM,EAAMvlM,GAE5B,IAAK,IAAIxB,EAAI,EAAGuY,EAAM4iF,EAAIj9F,OAAQ8B,EAAIuY,EAAKvY,IACzC+mM,EAAOxlM,EAAGG,KAAKF,EAASulM,EAAM5rG,EAAIn7F,GAAIA,EAAGm7F,GAG3C,OAAO4rG,CATT,CAWF,CAWA,SAASzqJ,EAAO6+C,EAAK55F,EAAIC,GACvB,GAAM25F,GAAO55F,EAAb,CAIA,GAAI45F,EAAI7+C,QAAU6+C,EAAI7+C,SAAW2pJ,EAC/B,OAAO9qG,EAAI7+C,OAAO/6C,EAAIC,GAItB,IAFA,IAAIwE,EAAS,GAEJhG,EAAI,EAAGuY,EAAM4iF,EAAIj9F,OAAQ8B,EAAIuY,EAAKvY,IACrCuB,EAAGG,KAAKF,EAAS25F,EAAIn7F,GAAIA,EAAGm7F,IAC9Bn1F,EAAOjb,KAAKowG,EAAIn7F,IAIpB,OAAOgG,CAbT,CAeF,CAWA,SAASghM,EAAK7rG,EAAK55F,EAAIC,GACrB,GAAM25F,GAAO55F,EAIb,IAAK,IAAIvB,EAAI,EAAGuY,EAAM4iF,EAAIj9F,OAAQ8B,EAAIuY,EAAKvY,IACzC,GAAIuB,EAAGG,KAAKF,EAAS25F,EAAIn7F,GAAIA,EAAGm7F,GAC9B,OAAOA,EAAIn7F,EAGjB,CASA,SAASxS,EAAKwvJ,EAAMx7I,GAClB,IAAIiG,EAAOy+L,EAAYxkM,KAAK9H,UAAW,GACvC,OAAO,WACL,OAAOojJ,EAAKnwF,MAAMrrD,EAASiG,EAAK9a,OAAOu5M,EAAYxkM,KAAK9H,YAC1D,CACF,CAQA,SAAS3I,EAAM+rJ,GACb,IAAIv1I,EAAOy+L,EAAYxkM,KAAK9H,UAAW,GACvC,OAAO,WACL,OAAOojJ,EAAKnwF,MAAM9iE,KAAM0d,EAAK9a,OAAOu5M,EAAYxkM,KAAK9H,YACvD,CACF,CAQA,SAAS8C,EAAQ5E,GACf,MAAmC,mBAA5B8tM,EAAYlkM,KAAK5J,EAC1B,CAQA,SAASw2E,EAAWx2E,GAClB,MAAwB,oBAAVA,CAChB,CAQA,SAASu2E,EAASv2E,GAChB,MAAmC,oBAA5B8tM,EAAYlkM,KAAK5J,EAC1B,CAQA,SAASiU,EAASjU,GAGhB,IAAIrL,SAAcqL,EAClB,MAAgB,aAATrL,KAAyBqL,GAAiB,UAARrL,CAC3C,CAQA,SAASg6M,EAAgB3uM,GACvB,QAAS4tM,EAAeE,EAAYlkM,KAAK5J,GAC3C,CAQA,SAAS8yH,EAAM9yH,GACb,MAAwB,kBAAVA,GAAgD,kBAAnBA,EAAMolL,UAAwD,kBAAxBplL,EAAMmvM,aACzF,CAQA,SAASz+D,EAAM1wI,GACb,OAAOA,IAAUA,CACnB,CASA,SAASiG,EAAS6/C,GAChB,IAAK,IAAI59C,EAAI,EAAGuY,EAAM3e,UAAUsE,OAAQ8B,EAAIuY,EAAKvY,IAC/C,GAAoB,MAAhBpG,UAAUoG,GACZ,OAAOpG,UAAUoG,EAGvB,CAEA,SAASuK,EAAUw6I,EAAQnoG,GACzB,OAAiB,MAAVmoG,EAAiBA,EAASnoG,CACnC,CAEA,SAAS3rC,EAAU8zI,EAAQnoG,EAAQG,GACjC,OAAiB,MAAVgoG,EAAiBA,EAAmB,MAAVnoG,EAAiBA,EAASG,CAC7D,CAUA,SAAShwD,IACP,OAAOglK,SAASrwJ,KAAKmrD,MAAMq5I,EAAatsM,UAC1C,CAYA,SAASi0E,EAAkB3lE,GACzB,GAAmB,kBAARA,EACT,MAAO,CAACA,EAAKA,EAAKA,EAAKA,GAGzB,IAAIqQ,EAAMrQ,EAAIhK,OAEd,OAAY,IAARqa,EAEK,CAACrQ,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,IACnB,IAARqQ,EAEF,CAACrQ,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,IAG/BA,CACT,CAQA,SAASi+I,EAAOxuF,EAAW46E,GACzB,IAAK56E,EACH,MAAM,IAAIyzD,MAAMmnB,EAEpB,CA3YA3nJ,EAAQ6iC,aAAe,WACrB,OAAO28F,SAASC,cAAc,SAChC,EA2YA,IAAI68E,EAAe,mBAKnB,SAAS19C,EAAeruD,GACtBA,EAAI+rG,IAAgB,CACtB,CAEA,SAASZ,EAAYnrG,GACnB,OAAOA,EAAI+rG,EACb,CAOA,SAASC,EAAQhsG,GACfA,GAAO5uG,EAAK4uG,GAAK,SAAUrjG,EAAOpM,GAChC3B,KAAKqb,IAAI1Z,EAAKoM,EAChB,GAAG/N,KACL,CAGA,IAAIq9M,EAAkB,OAClBC,EAAyB,EA8B7B,SAAS5mJ,EAAc06C,GACrB,OAAO,IAAIgsG,EAAQhsG,EACrB,CAEA,SAAS7oG,IAAQ,CAjCjB60M,EAAQl7M,UAAY,CAClBC,YAAai7M,EAIbl6M,IAAK,SAAUvB,GACb,OAAO3B,KAAKq9M,EAAkB17M,EAChC,EACA0Z,IAAK,SAAU1Z,EAAKoM,GAIlB,OAHA/N,KAAKq9M,EAAkB17M,GAAOoM,EAGvBA,CACT,EAGAvL,KAAM,SAAUgV,EAAIC,GAGlB,IAAK,IAAI8lM,UAFG,IAAZ9lM,IAAuBD,EAAK/T,EAAK+T,EAAIC,IAEbzX,KACtBA,KAAK4B,eAAe27M,IAAgB/lM,EAAGxX,KAAKu9M,GAAcA,EAAYv6M,MAAMs6M,GAEhF,EAEAtsG,UAAW,SAAUrvG,UACZ3B,KAAKq9M,EAAkB17M,EAChC,GASFE,EAAQgmK,UAAYA,EACpBhmK,EAAQ0iB,MAAQA,EAChB1iB,EAAQswF,MAAQA,EAChBtwF,EAAQ2hD,SAAWA,EACnB3hD,EAAQ0F,OAASA,EACjB1F,EAAQmL,SAAWA,EACnBnL,EAAQ6hC,aAAeA,EACvB7hC,EAAQ0iC,WAAaA,EACrB1iC,EAAQsa,QAAUA,EAClBta,EAAQ8rB,SAAWA,EACnB9rB,EAAQ2Y,MAAQA,EAChB3Y,EAAQ2hL,YAAcA,EACtB3hL,EAAQW,KAAOA,EACfX,EAAQ61B,IAAMA,EACd71B,EAAQmhH,OAASA,EACjBnhH,EAAQ0wD,OAASA,EACjB1wD,EAAQo7M,KAAOA,EACfp7M,EAAQ4B,KAAOA,EACf5B,EAAQqF,MAAQA,EAChBrF,EAAQ8Q,QAAUA,EAClB9Q,EAAQ0iF,WAAaA,EACrB1iF,EAAQyiF,SAAWA,EACnBziF,EAAQmgB,SAAWA,EACnBngB,EAAQ66M,gBAAkBA,EAC1B76M,EAAQg/H,MAAQA,EAChBh/H,EAAQ48I,MAAQA,EAChB58I,EAAQmS,SAAWA,EACnBnS,EAAQ2e,UAAYA,EACpB3e,EAAQqlB,UAAYA,EACpBrlB,EAAQmB,MAAQA,EAChBnB,EAAQiiF,kBAAoBA,EAC5BjiF,EAAQu6J,OAASA,EACjBv6J,EAAQ49J,eAAiBA,EACzB59J,EAAQ06M,YAAcA,EACtB16M,EAAQ60D,cAAgBA,EACxB70D,EAAQ0G,KAAOA,C,kDCpqBf,IAAIuvM,EAAoC,qBAAjBrI,aAA+BpwK,MAAQowK,aAQ9D,SAASrtM,EAAO6J,EAAGC,GACjB,IAAIshL,EAAM,IAAIsqB,EAAU,GAYxB,OAVS,MAAL7rM,IACFA,EAAI,GAGG,MAALC,IACFA,EAAI,GAGNshL,EAAI,GAAKvhL,EACTuhL,EAAI,GAAKthL,EACFshL,CACT,CASA,SAAS9tJ,EAAK8tJ,EAAKruJ,GAGjB,OAFAquJ,EAAI,GAAKruJ,EAAE,GACXquJ,EAAI,GAAKruJ,EAAE,GACJquJ,CACT,CAQA,SAASjpK,EAAM4a,GACb,IAAIquJ,EAAM,IAAIsqB,EAAU,GAGxB,OAFAtqB,EAAI,GAAKruJ,EAAE,GACXquJ,EAAI,GAAKruJ,EAAE,GACJquJ,CACT,CAUA,SAASnyK,EAAImyK,EAAK/+J,EAAGC,GAGnB,OAFA8+J,EAAI,GAAK/+J,EACT++J,EAAI,GAAK9+J,EACF8+J,CACT,CASA,SAASrkL,EAAIqkL,EAAK5vJ,EAAIC,GAGpB,OAFA2vJ,EAAI,GAAK5vJ,EAAG,GAAKC,EAAG,GACpB2vJ,EAAI,GAAK5vJ,EAAG,GAAKC,EAAG,GACb2vJ,CACT,CAUA,SAAS3tJ,EAAY2tJ,EAAK5vJ,EAAIC,EAAIpP,GAGhC,OAFA++J,EAAI,GAAK5vJ,EAAG,GAAKC,EAAG,GAAKpP,EACzB++J,EAAI,GAAK5vJ,EAAG,GAAKC,EAAG,GAAKpP,EAClB++J,CACT,CASA,SAAS7tJ,EAAI6tJ,EAAK5vJ,EAAIC,GAGpB,OAFA2vJ,EAAI,GAAK5vJ,EAAG,GAAKC,EAAG,GACpB2vJ,EAAI,GAAK5vJ,EAAG,GAAKC,EAAG,GACb2vJ,CACT,CAQA,SAASh/J,EAAI2Q,GACX,OAAO34B,KAAKgnD,KAAKgwJ,EAAUr+K,GAC7B,CAEA,IAAIhrB,EAASqa,EAQb,SAASgvL,EAAUr+K,GACjB,OAAOA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,EAChC,CAEA,IAAIs+K,EAAeD,EAQnB,SAAS3yH,EAAI2iG,EAAK5vJ,EAAIC,GAGpB,OAFA2vJ,EAAI,GAAK5vJ,EAAG,GAAKC,EAAG,GACpB2vJ,EAAI,GAAK5vJ,EAAG,GAAKC,EAAG,GACb2vJ,CACT,CASA,SAASkwB,EAAIlwB,EAAK5vJ,EAAIC,GAGpB,OAFA2vJ,EAAI,GAAK5vJ,EAAG,GAAKC,EAAG,GACpB2vJ,EAAI,GAAK5vJ,EAAG,GAAKC,EAAG,GACb2vJ,CACT,CASA,SAASmwB,EAAI//K,EAAIC,GACf,OAAOD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,EACpC,CASA,SAASp3B,EAAM+mL,EAAKruJ,EAAGq0E,GAGrB,OAFAg6E,EAAI,GAAKruJ,EAAE,GAAKq0E,EAChBg6E,EAAI,GAAKruJ,EAAE,GAAKq0E,EACTg6E,CACT,CAQA,SAAS5tJ,EAAU4tJ,EAAKruJ,GACtB,IAAIV,EAAIjQ,EAAI2Q,GAUZ,OARU,IAANV,GACF+uJ,EAAI,GAAK,EACTA,EAAI,GAAK,IAETA,EAAI,GAAKruJ,EAAE,GAAKV,EAChB+uJ,EAAI,GAAKruJ,EAAE,GAAKV,GAGX+uJ,CACT,CASA,SAASh9J,EAASoN,EAAIC,GACpB,OAAOr3B,KAAKgnD,MAAM5vB,EAAG,GAAKC,EAAG,KAAOD,EAAG,GAAKC,EAAG,KAAOD,EAAG,GAAKC,EAAG,KAAOD,EAAG,GAAKC,EAAG,IACrF,CAEA,IAAIyM,EAAO9Z,EAQX,SAASotL,EAAehgL,EAAIC,GAC1B,OAAQD,EAAG,GAAKC,EAAG,KAAOD,EAAG,GAAKC,EAAG,KAAOD,EAAG,GAAKC,EAAG,KAAOD,EAAG,GAAKC,EAAG,GAC3E,CAEA,IAAII,EAAa2/K,EAOjB,SAASC,EAAOrwB,EAAKruJ,GAGnB,OAFAquJ,EAAI,IAAMruJ,EAAE,GACZquJ,EAAI,IAAMruJ,EAAE,GACLquJ,CACT,CAUA,SAAShiJ,EAAKgiJ,EAAK5vJ,EAAIC,EAAIQ,GAGzB,OAFAmvJ,EAAI,GAAK5vJ,EAAG,GAAKS,GAAKR,EAAG,GAAKD,EAAG,IACjC4vJ,EAAI,GAAK5vJ,EAAG,GAAKS,GAAKR,EAAG,GAAKD,EAAG,IAC1B4vJ,CACT,CASA,SAAS5wJ,EAAe4wJ,EAAKruJ,EAAG+5B,GAC9B,IAAIjtD,EAAIkzB,EAAE,GACNjzB,EAAIizB,EAAE,GAGV,OAFAquJ,EAAI,GAAKt0H,EAAE,GAAKjtD,EAAIitD,EAAE,GAAKhtD,EAAIgtD,EAAE,GACjCs0H,EAAI,GAAKt0H,EAAE,GAAKjtD,EAAIitD,EAAE,GAAKhtD,EAAIgtD,EAAE,GAC1Bs0H,CACT,CASA,SAASpnL,EAAIonL,EAAK5vJ,EAAIC,GAGpB,OAFA2vJ,EAAI,GAAKhnL,KAAKJ,IAAIw3B,EAAG,GAAIC,EAAG,IAC5B2vJ,EAAI,GAAKhnL,KAAKJ,IAAIw3B,EAAG,GAAIC,EAAG,IACrB2vJ,CACT,CASA,SAASlnL,EAAIknL,EAAK5vJ,EAAIC,GAGpB,OAFA2vJ,EAAI,GAAKhnL,KAAKF,IAAIs3B,EAAG,GAAIC,EAAG,IAC5B2vJ,EAAI,GAAKhnL,KAAKF,IAAIs3B,EAAG,GAAIC,EAAG,IACrB2vJ,CACT,CAEA3rL,EAAQO,OAASA,EACjBP,EAAQ69B,KAAOA,EACf79B,EAAQ0iB,MAAQA,EAChB1iB,EAAQwZ,IAAMA,EACdxZ,EAAQsH,IAAMA,EACdtH,EAAQg+B,YAAcA,EACtBh+B,EAAQ89B,IAAMA,EACd99B,EAAQ2sB,IAAMA,EACd3sB,EAAQsS,OAASA,EACjBtS,EAAQ27M,UAAYA,EACpB37M,EAAQ47M,aAAeA,EACvB57M,EAAQgpF,IAAMA,EACdhpF,EAAQ67M,IAAMA,EACd77M,EAAQ87M,IAAMA,EACd97M,EAAQ4E,MAAQA,EAChB5E,EAAQ+9B,UAAYA,EACpB/9B,EAAQ2uB,SAAWA,EACnB3uB,EAAQyoC,KAAOA,EACfzoC,EAAQ+7M,eAAiBA,EACzB/7M,EAAQo8B,WAAaA,EACrBp8B,EAAQg8M,OAASA,EACjBh8M,EAAQ2pC,KAAOA,EACf3pC,EAAQ+6B,eAAiBA,EACzB/6B,EAAQuE,IAAMA,EACdvE,EAAQyE,IAAMA,C,wBCxTd,IAAI43L,EAASz8L,EAAQ,OAEjB2/H,EAAmB88D,EAAO98D,iBAC1Bq2E,EAAsBvZ,EAAOuZ,oBAC7BrwE,EAAiB82D,EAAO92D,eAExBtlI,EAASL,EAAQ,OAEjBuxG,EAAWvxG,EAAQ,OAEnBy+E,EAAMz+E,EAAQ,OAEd+rM,EAAa/rM,EAAQ,OAErBq8M,EAAoB,IACpBC,EAAoB,CAAC,QAAS,WAAY,aAAc,WAAY,UAAW,YAAa,YAAa,eACzGC,EAAoB,CAAC,aAAc,WAAY,aAC/CC,EAAoB,CACtBC,YAAa,EACbC,UAAW,EACXC,YAAa,EACbC,WAAY,GAEVC,EAAsBx8M,EAAO41B,IAAIqmL,GAAmB,SAAUv6M,GAChE,IAAI+6M,EAAK/6M,EAAK4tB,QAAQ,QAAS,WAC/B,OAAO6sL,EAAkBM,GAAMA,EAAK/6M,CACtC,IAEA,SAASg7M,EAAah7M,GACpB,MAAgB,eAATA,GAAyB08E,EAAI4kD,QAAQ0xE,QAAU,iBAAmBhzM,CAC3E,CAEA,SAASi7M,EAAetsB,EAAOrtL,EAAOw5L,GACpC,IAAIogB,EAAavsB,EAAMwsB,YACb,UAAVrgB,GAAqBogB,EAAW95J,QAChC,IAAIspJ,EAAcwQ,EAAWhR,UAAU5oM,EAAOqtL,EAAMhyG,QAAQ+pD,UAAUplI,EAAM+sL,IAAK/sL,EAAMgtL,IAAK,MAAMh8K,OAAQq8K,EAAM/zB,KAGhH,GAFU,QAAVkgC,GAAmBogB,EAAW95J,QAE1BspJ,EAAa,CACf,IAAIxrM,EAAOwrM,EAAYxrM,KACvBoC,EAAMg8G,aAAep+G,EACrByvL,EAAMhyG,QAAQ2yG,kBAAkB,CAC9Bh9K,OAAQo4L,EAAYp4L,QACnBpT,EAAMwrM,EAAYppM,MACvB,CACF,CAsBA,SAAS85M,EAAcC,GACrBA,EAASC,WAAY,EACrBpkL,aAAamkL,EAASE,aACtBF,EAASE,YAAcziL,YAAW,WAChCuiL,EAASC,WAAY,CACvB,GAAG,IACL,CAEA,IAAIE,EAAc,CAMhB3kG,UAAW,SAAUv1G,GACnBA,EAAQsiI,EAAepnI,KAAKo+J,IAAKt5J,GACjC9E,KAAKkW,QAAQ,YAAapR,EAC5B,EAOAiuL,SAAU,SAAUjuL,GAClBA,EAAQsiI,EAAepnI,KAAKo+J,IAAKt5J,GACjC,IAAIqmE,EAAUrmE,EAAMmuL,WAAanuL,EAAMouL,cAEvC,GAAI/nH,GAAWnrE,KAAKo+J,IAClB,MAAOjzF,GAA+B,GAApBA,EAAQgoH,SAAe,CAEvC,GAAIhoH,IAAYnrE,KAAKo+J,IACnB,OAGFjzF,EAAUA,EAAQ37B,UACpB,CAGFxvC,KAAKkW,QAAQ,WAAYpR,EAC3B,EAOAm6M,WAAY,SAAUn6M,GAGpBA,EAAQsiI,EAAepnI,KAAKo+J,IAAKt5J,GAGjCA,EAAMu7K,WAAY,EAClBrgL,KAAKsyL,iBAAmB,IAAIxxC,KAC5B29D,EAAez+M,KAAM8E,EAAO,SAG5Bk6M,EAAY3kG,UAAU1iG,KAAK3X,KAAM8E,GACjCk6M,EAAY7kG,UAAUxiG,KAAK3X,KAAM8E,GACjC85M,EAAc5+M,KAChB,EAOAk/M,UAAW,SAAUp6M,GACnBA,EAAQsiI,EAAepnI,KAAKo+J,IAAKt5J,GAGjCA,EAAMu7K,WAAY,EAClBo+B,EAAez+M,KAAM8E,EAAO,UAI5Bk6M,EAAY3kG,UAAU1iG,KAAK3X,KAAM8E,GACjC85M,EAAc5+M,KAChB,EAOAm/M,SAAU,SAAUr6M,GAClBA,EAAQsiI,EAAepnI,KAAKo+J,IAAKt5J,GAGjCA,EAAMu7K,WAAY,EAClBo+B,EAAez+M,KAAM8E,EAAO,OAC5Bk6M,EAAY1kG,QAAQ3iG,KAAK3X,KAAM8E,IAU1B,IAAIg8I,KAAS9gJ,KAAKsyL,iBAAmBwrB,GACxCkB,EAAYI,MAAMznM,KAAK3X,KAAM8E,GAG/B85M,EAAc5+M,KAChB,EACAk+M,YAAa,SAAUp5M,GACrBk6M,EAAY7kG,UAAUxiG,KAAK3X,KAAM8E,EAGnC,EACAs5M,YAAa,SAAUt5M,GAMhBu6M,EAAmBv6M,IACtBk6M,EAAY3kG,UAAU1iG,KAAK3X,KAAM8E,EAErC,EACAq5M,UAAW,SAAUr5M,GACnBk6M,EAAY1kG,QAAQ3iG,KAAK3X,KAAM8E,EACjC,EACAu5M,WAAY,SAAUv5M,GAMfu6M,EAAmBv6M,IACtBk6M,EAAYjsB,SAASp7K,KAAK3X,KAAM8E,EAEpC,GAGF,SAASu6M,EAAmBv6M,GAC1B,IAAIw6M,EAAcx6M,EAAMw6M,YACxB,MAAuB,QAAhBA,GAAyC,UAAhBA,CAClC,CAmBA,SAASC,EAAeV,GAWtB,SAASW,EAAiBzpH,EAAI8oH,GAC5B,OAAO,WACL,IAAIA,EAASC,UAIb,OAAO/oH,EAAGjzB,MAAM+7I,EAAUhvM,UAC5B,CACF,CAlBA/N,EAAOU,KAAKw7M,GAAmB,SAAUx6M,GACvCq7M,EAASpqG,UAAUjxG,GAAQ1B,EAAO2B,KAAKu7M,EAAYx7M,GAAOq7M,EAC5D,IACA/8M,EAAOU,KAAK87M,GAAqB,SAAU96M,GACzCq7M,EAASpqG,UAAUjxG,GAAQ1B,EAAO2B,KAAKu7M,EAAYx7M,GAAOq7M,EAC5D,IACA/8M,EAAOU,KAAKu7M,GAAmB,SAAUv6M,GACvCq7M,EAASpqG,UAAUjxG,GAAQg8M,EAAiBR,EAAYx7M,GAAOq7M,EACjE,GAWF,CAEA,SAASY,EAAgBrhD,GA2DvB,SAASshD,EAAcztB,EAAc4sB,GACnC/8M,EAAOU,KAAKyvL,GAAc,SAAUzuL,GAClC49H,EAAiBg9B,EAAKogD,EAAah7M,GAAOq7M,EAASpqG,UAAUjxG,GAC/D,GAAGq7M,EACL,CA9DA7rG,EAASr7F,KAAK3X,MACdA,KAAKo+J,IAAMA,EAMXp+J,KAAK8+M,WAAY,EAMjB9+M,KAAK++M,YAML/+M,KAAK2+M,YAAc,IAAInR,EACvBxtM,KAAKy0G,UAAY,CAAC,EAClB8qG,EAAev/M,MAEXkgF,EAAIy2H,uBAQN+I,EAAcpB,EAAqBt+M,OAc/BkgF,EAAIw2H,sBACNgJ,EAAc1B,EAAmBh+M,MASnC0/M,EAAc3B,EAAmB/9M,MAQrC,CAnGA8B,EAAOU,KAAK,CAAC,QAAS,YAAa,UAAW,aAAc,WAAY,gBAAgB,SAAUgB,GAChGw7M,EAAYx7M,GAAQ,SAAUsB,GAC5BA,EAAQsiI,EAAepnI,KAAKo+J,IAAKt5J,GACjC9E,KAAKkW,QAAQ1S,EAAMsB,EACrB,CACF,IAgGA,IAAI66M,EAAuBF,EAAgBv9M,UAE3Cy9M,EAAqBr3M,QAAU,WAG7B,IAFA,IAAI2pL,EAAe8rB,EAAkBn7M,OAAOo7M,GAEnC/nM,EAAI,EAAGA,EAAIg8K,EAAa99K,OAAQ8B,IAAK,CAC5C,IAAIzS,EAAOyuL,EAAah8K,GACxBwhM,EAAoBz3M,KAAKo+J,IAAKogD,EAAah7M,GAAOxD,KAAKy0G,UAAUjxG,GACnE,CACF,EAEAm8M,EAAqB9sB,UAAY,SAAU3lL,GACzClN,KAAKo+J,IAAI/yJ,MAAM4M,OAAS/K,GAAe,SACzC,EAEApL,EAAO0Y,MAAMilM,EAAiBzsG,GAC9B,IAAI7vG,EAAWs8M,EACfr8M,EAAOvB,QAAUsB,C,wBC5UjB,IAAI6wB,EAAOvyB,EAAQ,OAGf0B,EAAW6wB,EAAKzsB,OAAO,CACzB7E,KAAM,WACNuH,MAAO,CACLi1G,MAAO,MAET0gG,iBAAkB,WAIhB,IAHA,IAAIC,EAAY7/M,KAAK8/M,YACjB5gG,EAAQl/G,KAAKiK,MAAMi1G,MAEdjpG,EAAI,EAAGA,EAAIipG,EAAM/qG,OAAQ8B,IAEhC4pM,EAAYA,GAAa3gG,EAAMjpG,GAAG6pM,YAGpC9/M,KAAK8/M,YAAcD,EACnB7/M,KAAKyvC,QAAUzvC,KAAKyvC,SAAWowK,CACjC,EACAh1B,YAAa,WACX7qL,KAAK4/M,mBAKL,IAHA,IAAI1gG,EAAQl/G,KAAKiK,MAAMi1G,OAAS,GAC5Bz4G,EAAQzG,KAAK+/M,iBAER9pM,EAAI,EAAGA,EAAIipG,EAAM/qG,OAAQ8B,IAC3BipG,EAAMjpG,GAAGjB,MACZkqG,EAAMjpG,GAAG+pM,kBAGX9gG,EAAMjpG,GAAGjB,KAAKu7L,SAAS9pM,EAAM,GAAIA,EAAM,GAE3C,EACAwtB,UAAW,SAAUC,EAAKjqB,GAGxB,IAFA,IAAIi1G,EAAQj1G,EAAMi1G,OAAS,GAElBjpG,EAAI,EAAGA,EAAIipG,EAAM/qG,OAAQ8B,IAChCipG,EAAMjpG,GAAGge,UAAUC,EAAKgrF,EAAMjpG,GAAGhM,OAAO,EAE5C,EACAiwL,WAAY,WAGV,IAFA,IAAIh7E,EAAQl/G,KAAKiK,MAAMi1G,OAAS,GAEvBjpG,EAAI,EAAGA,EAAIipG,EAAM/qG,OAAQ8B,IAChCipG,EAAMjpG,GAAG6pM,aAAc,CAE3B,EACAnjL,gBAAiB,WAGf,OAFA38B,KAAK4/M,mBAEE5rL,EAAK9xB,UAAUy6B,gBAAgBhlB,KAAK3X,KAC7C,IAGFoD,EAAOvB,QAAUsB,C,wBCvDjB,IAAIrB,EAASL,EAAQ,OAEjBqyL,EAAQryL,EAAQ,OAEhBsvL,EAAUtvL,EAAQ,OAElBw+M,EAAWx+M,EAAQ,OAavB,SAASy+M,EAAYn+K,GAInB,IAAK,IAAIv+B,KAHTu+B,EAAOA,GAAQ,CAAC,EAChBgvJ,EAAQp5K,KAAK3X,KAAM+hC,GAEFA,EACXA,EAAKngC,eAAe4B,IAAkB,UAATA,IAC/BxD,KAAKwD,GAAQu+B,EAAKv+B,IAQtBxD,KAAKqL,MAAQ,IAAIyoL,EAAM/xJ,EAAK12B,MAAOrL,MACnCA,KAAKw8I,MAAQ,KAEbx8I,KAAKu4L,YAAc,EAErB,CAEA2nB,EAAYh+M,UAAY,CACtBC,YAAa+9M,EACbx9M,KAAM,cAQN+sC,SAAS,EASTo4B,WAAW,EAOXt5D,EAAG,EAOH6D,GAAI,EAQJ9D,OAAQ,EAQRkqB,WAAW,EAQX0/F,UAAU,EAQVzhH,QAAQ,EAORxB,SAAS,EAOTgD,OAAQ,UAOR0+G,WAAW,EAOXlnH,aAAc,EACdo7K,YAAa,SAAU32J,GAAM,EAC7BgmK,WAAY,SAAUhmK,GAAM,EAO5BgQ,MAAO,SAAUhQ,EAAK+lK,GAAS,EAO/Bt9J,gBAAiB,WAAa,EAS9BG,QAAS,SAAU7wB,EAAGC,GACpB,OAAOlM,KAAKmgN,YAAYl0M,EAAGC,EAC7B,EAMA0tB,SAAU,SAAUpiB,EAAIC,GACtBD,EAAGG,KAAKF,EAASzX,KACnB,EASAmgN,YAAa,SAAUl0M,EAAGC,GACxB,IAAIvD,EAAQ3I,KAAKypE,sBAAsBx9D,EAAGC,GACtCxB,EAAO1K,KAAK28B,kBAChB,OAAOjyB,EAAKoyB,QAAQn0B,EAAM,GAAIA,EAAM,GACtC,EAMA2S,MAAO,WACLtb,KAAKyvC,SAAU,EACfzvC,KAAKw8I,MAAQ,KACbx8I,KAAKu/K,MAAQv/K,KAAKu/K,KAAK2R,SACzB,EAsBA1kJ,aAAc,SAAUnD,GACtB,OAAOrpC,KAAKiqC,QAAQ,QAASZ,EAC/B,EACA4nJ,OAAQ,SAAUtvL,EAAKoM,GACT,UAARpM,EACFovL,EAAQ7uL,UAAU+uL,OAAOt5K,KAAK3X,KAAM2B,EAAKoM,GAEzC/N,KAAKqL,MAAMgQ,IAAItN,EAEnB,EAMAmH,SAAU,SAAUvT,EAAKoM,GAGvB,OAFA/N,KAAKqL,MAAMgQ,IAAI1Z,EAAKoM,GACpB/N,KAAKsb,OAAM,GACJtb,IACT,EAMA+M,SAAU,SAAUqkG,GAGlB,OAFApxG,KAAKqL,MAAQ,IAAIyoL,EAAM1iF,EAAKpxG,MAC5BA,KAAKsb,OAAM,GACJtb,IACT,GAEF8B,EAAO6rB,SAASuyL,EAAanvB,GAC7BjvL,EAAO0Y,MAAM0lM,EAAaD,GAE1B,IAAI98M,EAAW+8M,EACf98M,EAAOvB,QAAUsB,C,iCCrPjB,IAAI2sL,EAAW,SAAU3yI,GACvBn9C,KAAKm9C,WAAaA,GAAc,EAClC,EAEA2yI,EAAS5tL,UAAY,CACnBC,YAAa2tL,EACbswB,aAAc,SAAUnyM,EAAQ1B,GAC9BvM,KAAKm9C,WAAWn8C,KAAK,CACnBiN,OAAQA,EACR1B,MAAOA,GAEX,GAEF,IAAIpJ,EAAW2sL,EACf1sL,EAAOvB,QAAUsB,C,wBCjBjB,IAAI+8M,EAAcz+M,EAAQ,OAEtBuiE,EAAeviE,EAAQ,OAEvBK,EAASL,EAAQ,OAEjB0nM,EAAc1nM,EAAQ,OAQ1B,SAAS4+M,EAAOt+K,GACdm+K,EAAYvoM,KAAK3X,KAAM+hC,EACzB,CAEAs+K,EAAOn+M,UAAY,CACjBC,YAAak+M,EACb39M,KAAM,QACNwhC,MAAO,SAAUhQ,EAAK+lK,GACpB,IAAI5uL,EAAQrL,KAAKqL,MACbi1M,EAAMj1M,EAAMsY,MAEhBtY,EAAM5H,KAAKywB,EAAKl0B,KAAMi6L,GACtB,IAAIt2K,EAAQ3jB,KAAKugN,OAASpX,EAAYqX,oBAAoBF,EAAKtgN,KAAKugN,OAAQvgN,KAAMA,KAAKu+K,QAEvF,GAAK56J,GAAUwlL,EAAY4C,aAAapoL,GAAxC,CAWA,IAAI1X,EAAIZ,EAAMY,GAAK,EACfC,EAAIb,EAAMa,GAAK,EACfX,EAAQF,EAAME,MACdS,EAASX,EAAMW,OACfg1B,EAASrd,EAAMpY,MAAQoY,EAAM3X,OAejC,GAba,MAATT,GAA2B,MAAVS,EAEnBT,EAAQS,EAASg1B,EACE,MAAVh1B,GAA2B,MAATT,EAC3BS,EAAST,EAAQy1B,EACC,MAATz1B,GAA2B,MAAVS,IAC1BT,EAAQoY,EAAMpY,MACdS,EAAS2X,EAAM3X,QAIjBhM,KAAKm2L,aAAajiK,GAEd7oB,EAAMo1M,QAAUp1M,EAAMq1M,QAAS,CACjC,IAAI3T,EAAK1hM,EAAM0hM,IAAM,EACjB56I,EAAK9mD,EAAM8mD,IAAM,EACrBj+B,EAAIwQ,UAAU/gB,EAAOopL,EAAI56I,EAAI9mD,EAAMo1M,OAAQp1M,EAAMq1M,QAASz0M,EAAGC,EAAGX,EAAOS,EACzE,MAAO,GAAIX,EAAM0hM,IAAM1hM,EAAM8mD,GAAI,CAC3B46I,EAAK1hM,EAAM0hM,GACX56I,EAAK9mD,EAAM8mD,GADf,IAEIsuJ,EAASl1M,EAAQwhM,EACjB2T,EAAU10M,EAASmmD,EACvBj+B,EAAIwQ,UAAU/gB,EAAOopL,EAAI56I,EAAIsuJ,EAAQC,EAASz0M,EAAGC,EAAGX,EAAOS,EAC7D,MACEkoB,EAAIwQ,UAAU/gB,EAAO1X,EAAGC,EAAGX,EAAOS,GAGpChM,KAAKq2L,iBAAiBniK,GAEJ,MAAd7oB,EAAMC,MACRtL,KAAK2gN,aAAazsL,EAAKl0B,KAAK28B,kBA7C9B,CA+CF,EACAA,gBAAiB,WACf,IAAItxB,EAAQrL,KAAKqL,MAMjB,OAJKrL,KAAKw8I,QACRx8I,KAAKw8I,MAAQ,IAAIx4E,EAAa34D,EAAMY,GAAK,EAAGZ,EAAMa,GAAK,EAAGb,EAAME,OAAS,EAAGF,EAAMW,QAAU,IAGvFhM,KAAKw8I,KACd,GAEF16I,EAAO6rB,SAAS0yL,EAAQH,GACxB,IAAI/8M,EAAWk9M,EACfj9M,EAAOvB,QAAUsB,C,wBC1FjB,IAAIrB,EAASL,EAAQ,OAEjBquL,EAAWruL,EAAQ,OAWnBm8C,EAAiB,SAAU3xC,EAAGC,EAAG+iB,EAAIE,EAAIguB,EAAYyjK,GAIvD5gN,KAAKiM,EAAS,MAALA,EAAY,EAAIA,EACzBjM,KAAKkM,EAAS,MAALA,EAAY,EAAIA,EACzBlM,KAAKivB,GAAW,MAANA,EAAa,EAAIA,EAC3BjvB,KAAKmvB,GAAW,MAANA,EAAa,EAAIA,EAE3BnvB,KAAK0C,KAAO,SAEZ1C,KAAKk1I,OAAS0rE,IAAe,EAC7B9wB,EAASn4K,KAAK3X,KAAMm9C,EACtB,EAEAS,EAAe17C,UAAY,CACzBC,YAAay7C,GAEf97C,EAAO6rB,SAASiwB,EAAgBkyI,GAChC,IAAI3sL,EAAWy6C,EACfx6C,EAAOvB,QAAUsB,C,wBCjCjB,IAAI+8M,EAAcz+M,EAAQ,OAEtBK,EAASL,EAAQ,OAEjBmlM,EAAYnlM,EAAQ,OAEpBo/M,EAAcp/M,EAAQ,OAEtBsyL,EAAUtyL,EAAQ,OAElByzL,EAAmBnB,EAAQ7xL,UAAUgzL,iBACrCznL,EAAMjH,KAAKiH,IACXqzM,EAAmB,IAAIla,GAAU,GAQrC,SAAS5yK,EAAK+N,GACZm+K,EAAYvoM,KAAK3X,KAAM+hC,GAMvB/hC,KAAKgV,KAAO,IACd,CAEAgf,EAAK9xB,UAAY,CACfC,YAAa6xB,EACbtxB,KAAM,OACNo9M,aAAa,EACbn4H,uBAAwB,EACxBzjD,MAAO,SAAUhQ,EAAK+lK,GACpB,IAcMvvL,EAdFW,EAAQrL,KAAKqL,MACb2J,EAAOhV,KAAKgV,MAAQ8rM,EACpBzkB,EAAYhxL,EAAMgxL,YAClB0kB,EAAU11M,EAAM01M,UAChB9zM,EAAO5B,EAAM4B,KACbyJ,EAASrL,EAAMqL,OACfsqM,EAAkBD,KAAa9zM,EAAKkwC,WACpC8jK,EAAoB5kB,KAAe3lL,EAAOymC,WAC1C+jK,EAAiBH,KAAa9zM,EAAK0W,MACnCw9L,EAAmB9kB,KAAe3lL,EAAOiN,OAC7CtY,EAAM5H,KAAKywB,EAAKl0B,KAAMi6L,GACtBj6L,KAAKm2L,aAAajiK,GAEdl0B,KAAKyvC,WAGHuxK,IACFt2M,EAAOA,GAAQ1K,KAAK28B,kBACpB38B,KAAKohN,cAAgB/1M,EAAM4pL,YAAY/gK,EAAKjnB,EAAMvC,IAGhDu2M,IACFv2M,EAAOA,GAAQ1K,KAAK28B,kBACpB38B,KAAKqhN,gBAAkBh2M,EAAM4pL,YAAY/gK,EAAKxd,EAAQhM,KAKtDs2M,EAEF9sL,EAAIihK,UAAYn1L,KAAKohN,cACZF,IACThtL,EAAIihK,UAAYD,EAAiBv9K,KAAK1K,EAAMinB,IAG1C+sL,EACF/sL,EAAIotL,YAActhN,KAAKqhN,gBACdF,IACTjtL,EAAIotL,YAAcpsB,EAAiBv9K,KAAKjB,EAAQwd,IAGlD,IAAIvb,EAAWtN,EAAMsN,SACjB4oM,EAAiBl2M,EAAMk2M,eACvBC,IAAgBttL,EAAI88K,YAEpBvqM,EAAQzG,KAAK+/M,iBACjB/qM,EAAKu7L,SAAS9pM,EAAM,GAAIA,EAAM,IAM1BzG,KAAK8/M,aAAennM,IAAa6oM,GAAenlB,GAClDrnL,EAAKuwB,UAAUrR,GAEXvb,IAAa6oM,IACfxsM,EAAKg8L,YAAYr4L,GACjB3D,EAAKk8L,kBAAkBqQ,IAGzBvhN,KAAKi0B,UAAUjf,EAAMhV,KAAKiK,OAAO,GAE7BjK,KAAKgV,OACPhV,KAAK8/M,aAAc,KAIrB5rL,EAAIqR,YACJvlC,KAAKgV,KAAKi9L,YAAY/9K,IAGxB6sL,GAAW/rM,EAAK/H,KAAKinB,GAEjBvb,GAAY6oM,IACdttL,EAAI88K,YAAYr4L,GAChBub,EAAIqtL,eAAiBA,GAGvBllB,GAAarnL,EAAK0B,OAAOwd,GAErBvb,GAAY6oM,GAGdttL,EAAI88K,YAAY,IAGlBhxM,KAAKq2L,iBAAiBniK,GAEJ,MAAd7oB,EAAMC,MACRtL,KAAK2gN,aAAazsL,EAAKl0B,KAAK28B,kBAEhC,EAGA1I,UAAW,SAAUC,EAAKutL,EAAU32B,GAAW,EAC/Ck1B,gBAAiB,WACfhgN,KAAKgV,KAAO,IAAI4xL,CAClB,EACAjqK,gBAAiB,WACf,IAAIjyB,EAAO1K,KAAKw8I,MACZnxI,EAAQrL,KAAKqL,MACbq2M,GAAmBh3M,EAEvB,GAAIg3M,EAAiB,CACnB,IAAI1sM,EAAOhV,KAAKgV,KAEXA,IAEHA,EAAOhV,KAAKgV,KAAO,IAAI4xL,GAGrB5mM,KAAK8/M,cACP9qM,EAAKuwB,YACLvlC,KAAKi0B,UAAUjf,EAAMhV,KAAKiK,OAAO,IAGnCS,EAAOsK,EAAK2nB,iBACd,CAIA,GAFA38B,KAAKw8I,MAAQ9xI,EAETW,EAAMgxL,YAAa,CAIrB,IAAIslB,EAAiB3hN,KAAK4hN,kBAAoB5hN,KAAK4hN,gBAAkBl3M,EAAK6Z,SAE1E,GAAIvkB,KAAKyvC,SAAWiyK,EAAiB,CACnCC,EAAejiL,KAAKh1B,GAEpB,IAAI+3B,EAAIp3B,EAAMmC,UAEVq0M,EAAYx2M,EAAM8J,cAAgBnV,KAAK4T,eAAiB,EAEvDvI,EAAM01M,YACTt+K,EAAIj8B,KAAKF,IAAIm8B,EAAGziC,KAAK2nF,wBAA0B,IAK7Ck6H,EAAY,QACdF,EAAep2M,OAASk3B,EAAIo/K,EAC5BF,EAAe31M,QAAUy2B,EAAIo/K,EAC7BF,EAAe11M,GAAKw2B,EAAIo/K,EAAY,EACpCF,EAAez1M,GAAKu2B,EAAIo/K,EAAY,EAExC,CAGA,OAAOF,CACT,CAEA,OAAOj3M,CACT,EACAoyB,QAAS,SAAU7wB,EAAGC,GACpB,IAAI41M,EAAW9hN,KAAKypE,sBAAsBx9D,EAAGC,GACzCxB,EAAO1K,KAAK28B,kBACZtxB,EAAQrL,KAAKqL,MAIjB,GAHAY,EAAI61M,EAAS,GACb51M,EAAI41M,EAAS,GAETp3M,EAAKoyB,QAAQ7wB,EAAGC,GAAI,CACtB,IAAIqX,EAAWvjB,KAAKgV,KAAKpU,KAEzB,GAAIyK,EAAMgxL,YAAa,CACrB,IAAI7uL,EAAYnC,EAAMmC,UAClBq0M,EAAYx2M,EAAM8J,cAAgBnV,KAAK4T,eAAiB,EAE5D,GAAIiuM,EAAY,QAETx2M,EAAM01M,YACTvzM,EAAYhH,KAAKF,IAAIkH,EAAWxN,KAAK2nF,yBAGnCk5H,EAAYpzK,cAAclqB,EAAU/V,EAAYq0M,EAAW51M,EAAGC,IAChE,OAAO,CAGb,CAEA,GAAIb,EAAM01M,UACR,OAAOF,EAAY/jL,QAAQvZ,EAAUtX,EAAGC,EAE5C,CAEA,OAAO,CACT,EAKAoP,MAAO,SAAUukM,GACE,MAAbA,IACFA,GAAY,GAIVA,IACF7/M,KAAK8/M,YAAcD,EACnB7/M,KAAKw8I,MAAQ,MAGfx8I,KAAKyvC,SAAU,EACfzvC,KAAKu/K,MAAQv/K,KAAKu/K,KAAK2R,UAEnBlxL,KAAKoxL,cACPpxL,KAAKoxL,aAAa91K,OAEtB,EAMAmwJ,aAAc,SAAUpiI,GACtB,OAAOrpC,KAAKiqC,QAAQ,QAASZ,EAC/B,EAEA4nJ,OAAQ,SAAUtvL,EAAKoM,GAET,UAARpM,GACF3B,KAAK8M,SAASiB,GACd/N,KAAK8/M,aAAc,EACnB9/M,KAAKw8I,MAAQ,MAEb0jE,EAAYh+M,UAAU+uL,OAAOt5K,KAAK3X,KAAM2B,EAAKoM,EAEjD,EAMAjB,SAAU,SAAUnL,EAAKoM,GACvB,IAAI9D,EAAQjK,KAAKiK,MAEjB,GAAIA,EAAO,CACT,GAAInI,EAAOkgB,SAASrgB,GAClB,IAAK,IAAI6B,KAAQ7B,EACXA,EAAIC,eAAe4B,KACrByG,EAAMzG,GAAQ7B,EAAI6B,SAItByG,EAAMtI,GAAOoM,EAGf/N,KAAKsb,OAAM,EACb,CAEA,OAAOtb,IACT,EACA4T,aAAc,WACZ,IAAIslD,EAAIl5D,KAAK68B,UAKb,OAAOq8B,GAAKzrD,EAAIyrD,EAAE,GAAK,GAAK,OAASzrD,EAAIyrD,EAAE,GAAK,GAAK,MAAQ1yD,KAAKgnD,KAAK//C,EAAIyrD,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,KAAO,CAC3G,GAaFllC,EAAKzsB,OAAS,SAAUyF,GACtB,IAAI+0M,EAAM,SAAUhgL,GAClB/N,EAAKrc,KAAK3X,KAAM+hC,GAEZ/0B,EAAS3B,OAEXrL,KAAKqL,MAAM68C,WAAWl7C,EAAS3B,OAAO,GAIxC,IAAI22M,EAAeh1M,EAAS/C,MAE5B,GAAI+3M,EAAc,CAChBhiN,KAAKiK,MAAQjK,KAAKiK,OAAS,CAAC,EAC5B,IAAIg4M,EAAYjiN,KAAKiK,MAErB,IAAK,IAAIzG,KAAQw+M,GACVC,EAAUrgN,eAAe4B,IAASw+M,EAAapgN,eAAe4B,KACjEy+M,EAAUz+M,GAAQw+M,EAAax+M,GAGrC,CAEAwJ,EAASqc,MAAQrc,EAASqc,KAAK1R,KAAK3X,KAAM+hC,EAC5C,EAIA,IAAK,IAAIv+B,KAFT1B,EAAO6rB,SAASo0L,EAAK/tL,GAEJhnB,EAEF,UAATxJ,GAA6B,UAATA,IACtBu+M,EAAI7/M,UAAUsB,GAAQwJ,EAASxJ,IAInC,OAAOu+M,CACT,EAEAjgN,EAAO6rB,SAASqG,EAAMksL,GACtB,IAAI/8M,EAAW6wB,EACf5wB,EAAOvB,QAAUsB,C,oBC5VjB,IAAI4wL,EAAU,SAAUpwK,EAAOu+L,GAG7BliN,KAAK2jB,MAAQA,EACb3jB,KAAKkiN,OAASA,EAEdliN,KAAK0C,KAAO,SACd,EAEAqxL,EAAQ7xL,UAAUgzL,iBAAmB,SAAUhhK,GAC7C,OAAOA,EAAIiuL,cAAcniN,KAAK2jB,MAAO3jB,KAAKkiN,QAAU,SACtD,EAEA,IAAI/+M,EAAW4wL,EACf3wL,EAAOvB,QAAUsB,C,wBCdjB,IAAIrB,EAASL,EAAQ,OAEjBquL,EAAWruL,EAAQ,OAUnBq8K,EAAiB,SAAU7xK,EAAGC,EAAGT,EAAG0xC,EAAYyjK,GAIlD5gN,KAAKiM,EAAS,MAALA,EAAY,GAAMA,EAC3BjM,KAAKkM,EAAS,MAALA,EAAY,GAAMA,EAC3BlM,KAAKyL,EAAS,MAALA,EAAY,GAAMA,EAE3BzL,KAAK0C,KAAO,SAEZ1C,KAAKk1I,OAAS0rE,IAAe,EAC7B9wB,EAASn4K,KAAK3X,KAAMm9C,EACtB,EAEA2gI,EAAe57K,UAAY,CACzBC,YAAa27K,GAEfh8K,EAAO6rB,SAASmwJ,EAAgBgS,GAChC,IAAI3sL,EAAW26K,EACf16K,EAAOvB,QAAUsB,C,oBC/BjB,IAAIi/M,EAAqB,CAAC,CAAC,aAAc,GAAI,CAAC,gBAAiB,GAAI,CAAC,gBAAiB,GAAI,CAAC,cAAe,QAAS,CAAC,UAAW,QAAS,CAAC,WAAY,SAAU,CAAC,aAAc,KAGzKtuB,EAAQ,SAAU/xJ,EAAMy4I,GAC1Bx6K,KAAKkoD,WAAWnmB,GAAM,GACtB/hC,KAAKw6K,KAAOA,CACd,EAEA,SAAS6nC,EAAqBnuL,EAAKk9E,EAAK1mG,GACtC,IAAIuB,EAAa,MAATmlG,EAAInlG,EAAY,EAAImlG,EAAInlG,EAC5BgjB,EAAe,MAAVmiF,EAAIniF,GAAa,EAAImiF,EAAIniF,GAC9B/iB,EAAa,MAATklG,EAAIllG,EAAY,EAAIklG,EAAIllG,EAC5BijB,EAAe,MAAViiF,EAAIjiF,GAAa,EAAIiiF,EAAIjiF,GAE7BiiF,EAAI8jC,SACPjpI,EAAIA,EAAIvB,EAAKa,MAAQb,EAAKuB,EAC1BgjB,EAAKA,EAAKvkB,EAAKa,MAAQb,EAAKuB,EAC5BC,EAAIA,EAAIxB,EAAKsB,OAAStB,EAAKwB,EAC3BijB,EAAKA,EAAKzkB,EAAKsB,OAAStB,EAAKwB,GAG/B,IAAIo2M,EAAiBpuL,EAAImuL,qBAAqBp2M,EAAGC,EAAG+iB,EAAIE,GACxD,OAAOmzL,CACT,CAEA,SAASC,EAAqBruL,EAAKk9E,EAAK1mG,GACtC,IAAIa,EAAQb,EAAKa,MACbS,EAAStB,EAAKsB,OACd5F,EAAMI,KAAKJ,IAAImF,EAAOS,GACtBC,EAAa,MAATmlG,EAAInlG,EAAY,GAAMmlG,EAAInlG,EAC9BC,EAAa,MAATklG,EAAIllG,EAAY,GAAMklG,EAAIllG,EAC9BT,EAAa,MAAT2lG,EAAI3lG,EAAY,GAAM2lG,EAAI3lG,EAE7B2lG,EAAI8jC,SACPjpI,EAAIA,EAAIV,EAAQb,EAAKuB,EACrBC,EAAIA,EAAIF,EAAStB,EAAKwB,EACtBT,GAAQrF,GAGV,IAAIk8M,EAAiBpuL,EAAIquL,qBAAqBt2M,EAAGC,EAAG,EAAGD,EAAGC,EAAGT,GAC7D,OAAO62M,CACT,CAEAxuB,EAAM5xL,UAAY,CAChBC,YAAa2xL,EAKbtZ,KAAM,KAKNvtK,KAAM,OAKNyJ,OAAQ,KAKRjK,QAAS,EAKTkM,SAAU,KAKV4oM,eAAgB,EAKhBrnM,WAAY,EAKZC,cAAe,EAKfC,cAAe,EAKf5M,UAAW,EAMX2H,eAAe,EAOf7J,KAAM,KASN4a,KAAM,KAONg7C,SAAU,KAMVhwB,UAAW,KAMXC,WAAY,KAOZvgB,SAAU,KAMVwgB,WAAY,KAMZmxI,QAAS,KAKT39J,SAAU,OAKVC,WAAY,KAKZiP,UAAW,KAMXC,WAAY,KASZmuJ,gBAAiB,EAKjBI,eAAgB,KAShBhpK,aAAc,SAMd41C,SAAU,KAMVoyH,WAAY,KAKZ/zJ,UAAW,KAKXC,kBAAmB,KAKnBg+I,aAAc,EAKduX,gBAAiB,cAKjBC,eAAgB,EAKhBC,kBAAmB,EAKnBC,kBAAmB,EAKnBP,mBAAoB,cAKpBC,kBAAmB,EAKnBC,qBAAsB,EAKtBC,qBAAsB,EAOtB0/B,eAAe,EAMf1mL,aAAc,EAUdC,WAAY,KAKZymJ,oBAAqB,KAKrBP,gBAAiB,KAKjBE,gBAAiB,EAKjBO,iBAAkB,EAMlBD,YAAa,KAMbZ,KAAM,KAMNl2G,SAAU,KAMV82I,MAAO,KAKPh/M,KAAM,SAAUywB,EAAKzqB,EAAIwwL,GAKvB,IAJA,IAAI5uL,EAAQrL,KACR0iN,EAAYzoB,GAAUA,EAAO5uL,MAC7Bs3M,GAAaD,EAERzsM,EAAI,EAAGA,EAAImsM,EAAmBjuM,OAAQ8B,IAAK,CAClD,IAAIyO,EAAO09L,EAAmBnsM,GAC1Bk/J,EAAYzwJ,EAAK,IAEjBi+L,GAAat3M,EAAM8pK,KAAeutC,EAAUvtC,MAE9CjhJ,EAAIihJ,GAAa9pK,EAAM8pK,IAAczwJ,EAAK,GAE9C,CAkBA,IAhBIi+L,GAAat3M,EAAM4B,OAASy1M,EAAUz1M,QACxCinB,EAAIihK,UAAY9pL,EAAM4B,OAGpB01M,GAAat3M,EAAMqL,SAAWgsM,EAAUhsM,UAC1Cwd,EAAIotL,YAAcj2M,EAAMqL,SAGtBisM,GAAat3M,EAAMoB,UAAYi2M,EAAUj2M,WAC3CynB,EAAIuQ,YAA+B,MAAjBp5B,EAAMoB,QAAkB,EAAIpB,EAAMoB,UAGlDk2M,GAAat3M,EAAMo3M,QAAUC,EAAUD,SACzCvuL,EAAI6gK,yBAA2B1pL,EAAMo3M,OAAS,eAG5CziN,KAAKq8L,YAAa,CACpB,IAAI7uL,EAAYnC,EAAMmC,UACtB0mB,EAAI1mB,UAAYA,GAAaxN,KAAKmV,eAAiB1L,GAAMA,EAAGmK,aAAenK,EAAGmK,eAAiB,EACjG,CACF,EACAmtM,QAAS,WACP,IAAI9zM,EAAOjN,KAAKiN,KAChB,OAAe,MAARA,GAAyB,SAATA,CACzB,EACAovL,UAAW,WACT,IAAI3lL,EAAS1W,KAAK0W,OAClB,OAAiB,MAAVA,GAA6B,SAAXA,GAAqB1W,KAAKwN,UAAY,CACjE,EASA06C,WAAY,SAAU06J,EAAYtuC,GAChC,GAAIsuC,EACF,IAAK,IAAIp/M,KAAQo/M,GACXA,EAAWhhN,eAAe4B,KAAwB,IAAd8wK,KAAqC,IAAdA,EAAuBt0K,KAAK4B,eAAe4B,GAA4B,MAApBo/M,EAAWp/M,MAC3HxD,KAAKwD,GAAQo/M,EAAWp/M,GAIhC,EAOA6X,IAAK,SAAU+1F,EAAKrjG,GACC,kBAARqjG,EACTpxG,KAAKoxG,GAAOrjG,EAEZ/N,KAAKkoD,WAAWkpD,GAAK,EAEzB,EAMA7sF,MAAO,WACL,IAAIs+L,EAAW,IAAI7iN,KAAKmC,YAExB,OADA0gN,EAAS36J,WAAWloD,MAAM,GACnB6iN,CACT,EACA5tB,YAAa,SAAU/gK,EAAKk9E,EAAK1mG,GAK/B,IAJA,IAAIpG,EAAsB,WAAb8sG,EAAI1uG,KAAoB6/M,EAAuBF,EACxDC,EAAiBh+M,EAAO4vB,EAAKk9E,EAAK1mG,GAClCyyC,EAAai0D,EAAIj0D,WAEZlnC,EAAI,EAAGA,EAAIknC,EAAWhpC,OAAQ8B,IACrCqsM,EAAelC,aAAajjK,EAAWlnC,GAAGhI,OAAQkvC,EAAWlnC,GAAG1J,OAGlE,OAAO+1M,CACT,GAIF,IAFA,IAAIQ,EAAahvB,EAAM5xL,UAEd+T,EAAI,EAAGA,EAAImsM,EAAmBjuM,OAAQ8B,IAAK,CAClD,IAAIyO,EAAO09L,EAAmBnsM,GAExByO,EAAK,KAAMo+L,IACfA,EAAWp+L,EAAK,IAAMA,EAAK,GAE/B,CAGAovK,EAAMmB,YAAc6tB,EAAW7tB,YAC/B,IAAI9xL,EAAW2wL,EACf1wL,EAAOvB,QAAUsB,C,wBC9bjB,IAAI+8M,EAAcz+M,EAAQ,OAEtBK,EAASL,EAAQ,OAEjBgsD,EAAchsD,EAAQ,MAEtBshN,EAAathN,EAAQ,OAQrBmiB,EAAO,SAAUme,GAEnBm+K,EAAYvoM,KAAK3X,KAAM+hC,EACzB,EAEAne,EAAK1hB,UAAY,CACfC,YAAayhB,EACblhB,KAAM,OACNwhC,MAAO,SAAUhQ,EAAK+lK,GACpB,IAAI5uL,EAAQrL,KAAKqL,MAEjBrL,KAAKyvC,SAAWszK,EAAWC,mBAAmB33M,GAAO,GAErDA,EAAM4B,KAAO5B,EAAMqL,OAASrL,EAAM6O,WAAa7O,EAAMgP,YAAchP,EAAM8O,cAAgB9O,EAAM+O,cAAgB,KAC/G,IAAI9O,EAAOD,EAAMC,KAET,MAARA,IAAiBA,GAAQ,IAEzBD,EAAM5H,KAAKywB,EAAKl0B,KAAMi6L,GAEjB8oB,EAAWE,aAAa33M,EAAMD,KAInCrL,KAAKm2L,aAAajiK,GAClB6uL,EAAWG,WAAWljN,KAAMk0B,EAAK5oB,EAAMD,GACvCrL,KAAKq2L,iBAAiBniK,GACxB,EACAyI,gBAAiB,WACf,IAAItxB,EAAQrL,KAAKqL,MAIjB,GAFArL,KAAKyvC,SAAWszK,EAAWC,mBAAmB33M,GAAO,IAEhDrL,KAAKw8I,MAAO,CACf,IAAIlxI,EAAOD,EAAMC,KACT,MAARA,EAAeA,GAAQ,GAAKA,EAAO,GACnC,IAAIZ,EAAO+iD,EAAY9wB,gBAAgBtxB,EAAMC,KAAO,GAAID,EAAM6a,KAAM7a,EAAMkiB,UAAWliB,EAAMmiB,kBAAmBniB,EAAMo3K,YAAap3K,EAAMw2K,MAIvI,GAHAn3K,EAAKuB,GAAKZ,EAAMY,GAAK,EACrBvB,EAAKwB,GAAKb,EAAMa,GAAK,EAEjB62M,EAAWI,UAAU93M,EAAMwZ,WAAYxZ,EAAM62K,iBAAkB,CACjE,IAAIz/I,EAAIp3B,EAAM62K,gBACdx3K,EAAKuB,GAAKw2B,EAAI,EACd/3B,EAAKwB,GAAKu2B,EAAI,EACd/3B,EAAKa,OAASk3B,EACd/3B,EAAKsB,QAAUy2B,CACjB,CAEAziC,KAAKw8I,MAAQ9xI,CACf,CAEA,OAAO1K,KAAKw8I,KACd,GAEF16I,EAAO6rB,SAAS/J,EAAMs8L,GACtB,IAAI/8M,EAAWygB,EACfxgB,EAAOvB,QAAUsB,C,wBCtEjB,IAAI+8E,EAAMz+E,EAAQ,OAgBd2hN,EAAa,CAAC,CAAC,aAAc,GAAI,CAAC,cAAe,QAAS,CAAC,gBAAiB,GAAI,CAAC,gBAAiB,IAEtG,SAASjgN,EAASkgN,GAEhB,OAAOnjI,EAAI4kD,QAAQC,IAAM7kD,EAAI4kD,QAAQm4B,SAAW,GAAK,WACnD,IAEIqmD,EAFAttB,EAAYh2L,KAAKu4L,YACjBltL,EAAQrL,KAAKqL,MAGjB,GAAI2qL,EACF,IAAK,IAAI//K,EAAI,EAAGA,EAAI+/K,EAAU7hL,OAAQ8B,IAAK,CACzC,IAAIW,EAAWo/K,EAAU//K,GACrBhM,EAAQ2M,GAAYA,EAAS3M,MAC7BvH,EAAOkU,GAAYA,EAASlU,KAEhC,GAAIuH,IAAmB,WAATvH,GAAqBuH,EAAMmB,aAAenB,EAAMoC,UAAqB,SAAT3J,KAAqBuH,EAAMsB,QAAUtB,EAAM+B,SAAU,CAC7H,IAAK,IAAIsnB,EAAI,EAAGA,EAAI8vL,EAAWjvM,OAAQmf,IAGrC8vL,EAAW9vL,GAAG,GAAKjoB,EAAM+3M,EAAW9vL,GAAG,IACvCjoB,EAAM+3M,EAAW9vL,GAAG,IAAM8vL,EAAW9vL,GAAG,GAG1CgwL,GAAW,EACX,KACF,CACF,CAKF,GAFAD,EAAavgJ,MAAM9iE,KAAM6P,WAErByzM,EACF,IAAShwL,EAAI,EAAGA,EAAI8vL,EAAWjvM,OAAQmf,IACrCjoB,EAAM+3M,EAAW9vL,GAAG,IAAM8vL,EAAW9vL,GAAG,EAG9C,EAAI+vL,CACN,CAEAjgN,EAAOvB,QAAUsB,C,iCCvDjB,IAAI2rM,EAAMrtM,EAAQ,OAEd8hN,EAAmB,IAAIzU,EAAI,IAM/B,SAAShD,EAAe0X,GACtB,GAA6B,kBAAlBA,EAA4B,CACrC,IAAIC,EAAeF,EAAiBrgN,IAAIsgN,GACxC,OAAOC,GAAgBA,EAAa9/L,KACtC,CACE,OAAO6/L,CAEX,CAcA,SAAShD,EAAoBgD,EAAe7/L,EAAO+/L,EAAQlsM,EAAImsM,GAC7D,GAAKH,EAEE,IAA6B,kBAAlBA,EAA4B,CAE5C,GAAI7/L,GAASA,EAAMigM,eAAiBJ,IAAkBE,EACpD,OAAO//L,EAKT,IAAI8/L,EAAeF,EAAiBrgN,IAAIsgN,GACpCK,EAAc,CAChBH,OAAQA,EACRlsM,GAAIA,EACJmsM,UAAWA,GAgBb,OAbIF,GACF9/L,EAAQ8/L,EAAa9/L,OACpBooL,EAAapoL,IAAU8/L,EAAaK,QAAQ9iN,KAAK6iN,MAEjDlgM,IAAUA,EAAQ,IAAIF,OACvBE,EAAM46J,OAASwlC,EACfR,EAAiBnU,IAAIoU,EAAe7/L,EAAMqgM,eAAiB,CACzDrgM,MAAOA,EACPmgM,QAAS,CAACD,KAEZlgM,EAAM28L,IAAM38L,EAAMigM,aAAeJ,GAG5B7/L,CACT,CAEI,OAAO6/L,CACT,CAjCA,OAAO7/L,CAkCX,CAEA,SAASogM,IACP,IAAIN,EAAezjN,KAAKgkN,eACxBhkN,KAAKu+K,OAASv+K,KAAKgkN,eAAiB,KAEpC,IAAK,IAAI/tM,EAAI,EAAGA,EAAIwtM,EAAaK,QAAQ3vM,OAAQ8B,IAAK,CACpD,IAAI4tM,EAAcJ,EAAaK,QAAQ7tM,GACnCuB,EAAKqsM,EAAYrsM,GACrBA,GAAMA,EAAGxX,KAAM6jN,EAAYF,WAC3BE,EAAYH,OAAOpoM,OACrB,CAEAmoM,EAAaK,QAAQ3vM,OAAS,CAChC,CAEA,SAAS43L,EAAapoL,GACpB,OAAOA,GAASA,EAAMpY,OAASoY,EAAM3X,MACvC,CAEAnK,EAAQiqM,eAAiBA,EACzBjqM,EAAQ2+M,oBAAsBA,EAC9B3+M,EAAQkqM,aAAeA,C,wBCvFvB,IAAIkY,EAAexiN,EAAQ,OAEvByiN,EAAeziN,EAAQ,OAE3B,SAASwyB,EAAUC,EAAKjqB,EAAOw7B,GAC7B,IAAI9Y,EAAS1iB,EAAM0iB,OACfotB,EAAS9vC,EAAM8vC,OAEnB,GAAIptB,GAAUA,EAAOxY,QAAU,EAAG,CAChC,GAAI4lC,GAAqB,WAAXA,EAAqB,CACjC,IAAIoqK,EAAgBD,EAAav3L,EAAQotB,EAAQtU,EAAWx7B,EAAM44C,kBAClE3uB,EAAIG,OAAO1H,EAAO,GAAG,GAAIA,EAAO,GAAG,IAGnC,IAFA,IAAI6B,EAAM7B,EAAOxY,OAER8B,EAAI,EAAGA,GAAKwvB,EAAYjX,EAAMA,EAAM,GAAIvY,IAAK,CACpD,IAAIyqB,EAAMyjL,EAAkB,EAAJluM,GACpBmuM,EAAMD,EAAkB,EAAJluM,EAAQ,GAC5BmI,EAAIuO,GAAQ1W,EAAI,GAAKuY,GACzB0F,EAAIyuB,cAAcjiB,EAAI,GAAIA,EAAI,GAAI0jL,EAAI,GAAIA,EAAI,GAAIhmM,EAAE,GAAIA,EAAE,GAC5D,CACF,KAAO,CACU,WAAX27B,IACFptB,EAASs3L,EAAat3L,EAAQ8Y,IAGhCvR,EAAIG,OAAO1H,EAAO,GAAG,GAAIA,EAAO,GAAG,IAE1B1W,EAAI,EAAb,IAAK,IAAWotB,EAAI1W,EAAOxY,OAAQ8B,EAAIotB,EAAGptB,IACxCie,EAAII,OAAO3H,EAAO1W,GAAG,GAAI0W,EAAO1W,GAAG,GAEvC,CAEAwvB,GAAavR,EAAIuR,WACnB,CACF,CAEA5jC,EAAQoyB,UAAYA,C,sBCpCpB,SAASA,EAAUC,EAAKjqB,GACtB,IAKIu8E,EACA69H,EACAC,EACAC,EAkCAn7F,EA1CAn9G,EAAIhC,EAAMgC,EACVC,EAAIjC,EAAMiC,EACVX,EAAQtB,EAAMsB,MACdS,EAAS/B,EAAM+B,OACfP,EAAIxB,EAAMwB,EAMVF,EAAQ,IACVU,GAAQV,EACRA,GAASA,GAGPS,EAAS,IACXE,GAAQF,EACRA,GAAUA,GAGK,kBAANP,EACT+6E,EAAK69H,EAAKC,EAAKC,EAAK94M,EACXA,aAAa4zB,MACL,IAAb5zB,EAAE0I,OACJqyE,EAAK69H,EAAKC,EAAKC,EAAK94M,EAAE,GACA,IAAbA,EAAE0I,QACXqyE,EAAK89H,EAAK74M,EAAE,GACZ44M,EAAKE,EAAK94M,EAAE,IACU,IAAbA,EAAE0I,QACXqyE,EAAK/6E,EAAE,GACP44M,EAAKE,EAAK94M,EAAE,GACZ64M,EAAK74M,EAAE,KAEP+6E,EAAK/6E,EAAE,GACP44M,EAAK54M,EAAE,GACP64M,EAAK74M,EAAE,GACP84M,EAAK94M,EAAE,IAGT+6E,EAAK69H,EAAKC,EAAKC,EAAK,EAKlB/9H,EAAK69H,EAAK94M,IACZ69G,EAAQ5iC,EAAK69H,EACb79H,GAAMj7E,EAAQ69G,EACdi7F,GAAM94M,EAAQ69G,GAGZk7F,EAAKC,EAAKh5M,IACZ69G,EAAQk7F,EAAKC,EACbD,GAAM/4M,EAAQ69G,EACdm7F,GAAMh5M,EAAQ69G,GAGZi7F,EAAKC,EAAKt4M,IACZo9G,EAAQi7F,EAAKC,EACbD,GAAMr4M,EAASo9G,EACfk7F,GAAMt4M,EAASo9G,GAGb5iC,EAAK+9H,EAAKv4M,IACZo9G,EAAQ5iC,EAAK+9H,EACb/9H,GAAMx6E,EAASo9G,EACfm7F,GAAMv4M,EAASo9G,GAGjBl1F,EAAIG,OAAOpoB,EAAIu6E,EAAIt6E,GACnBgoB,EAAII,OAAOroB,EAAIV,EAAQ84M,EAAIn4M,GACpB,IAAPm4M,GAAYnwL,EAAIqZ,iBAAiBthC,EAAIV,EAAOW,EAAGD,EAAIV,EAAOW,EAAIm4M,GAC9DnwL,EAAII,OAAOroB,EAAIV,EAAOW,EAAIF,EAASs4M,GAC5B,IAAPA,GAAYpwL,EAAIqZ,iBAAiBthC,EAAIV,EAAOW,EAAIF,EAAQC,EAAIV,EAAQ+4M,EAAIp4M,EAAIF,GAC5EkoB,EAAII,OAAOroB,EAAIs4M,EAAIr4M,EAAIF,GAChB,IAAPu4M,GAAYrwL,EAAIqZ,iBAAiBthC,EAAGC,EAAIF,EAAQC,EAAGC,EAAIF,EAASu4M,GAChErwL,EAAII,OAAOroB,EAAGC,EAAIs6E,GACX,IAAPA,GAAYtyD,EAAIqZ,iBAAiBthC,EAAGC,EAAGD,EAAIu6E,EAAIt6E,EACjD,CAEArK,EAAQoyB,UAAYA,C,iCChFpB,IAAI2yD,EAAUnlF,EAAQ,OAElB+iN,EAAQ59H,EAAQxgF,IAChBq+M,EAAQ79H,EAAQtgF,IAChBo+M,EAAU99H,EAAQngF,MAClBk+M,EAAa/9H,EAAQp2D,SACrBo0L,EAAQh+H,EAAQz9E,IAChB07M,EAAUj+H,EAAQriE,MAClBugM,EAAQl+H,EAAQjnD,IAqBpB,SAASx8B,EAASwpB,EAAQotB,EAAQgrK,EAAQC,GACxC,IAIIC,EACAC,EACA9+M,EAAKE,EANL6+M,EAAM,GACNhmL,EAAI,GACJvB,EAAK,GACLC,EAAK,GAKT,GAAImnL,EAAY,CACd5+M,EAAM,CAACG,IAAUA,KACjBD,EAAM,EAAEC,KAAWA,KAEnB,IAAK,IAAI0P,EAAI,EAAGuY,EAAM7B,EAAOxY,OAAQ8B,EAAIuY,EAAKvY,IAC5CuuM,EAAMp+M,EAAKA,EAAKumB,EAAO1W,IACvBwuM,EAAMn+M,EAAKA,EAAKqmB,EAAO1W,IAIzBuuM,EAAMp+M,EAAKA,EAAK4+M,EAAW,IAC3BP,EAAMn+M,EAAKA,EAAK0+M,EAAW,GAC7B,CAEA,IAAS/uM,EAAI,EAAGuY,EAAM7B,EAAOxY,OAAQ8B,EAAIuY,EAAKvY,IAAK,CACjD,IAAInQ,EAAQ6mB,EAAO1W,GAEnB,GAAI8uM,EACFE,EAAYt4L,EAAO1W,EAAIA,EAAI,EAAIuY,EAAM,GACrC02L,EAAYv4L,GAAQ1W,EAAI,GAAKuY,OACxB,CACL,GAAU,IAANvY,GAAWA,IAAMuY,EAAM,EAAG,CAC5B22L,EAAInkN,KAAK6jN,EAAQl4L,EAAO1W,KACxB,QACF,CACEgvM,EAAYt4L,EAAO1W,EAAI,GACvBivM,EAAYv4L,EAAO1W,EAAI,EAE3B,CAEA6uM,EAAM3lL,EAAG+lL,EAAWD,GAEpBP,EAAQvlL,EAAGA,EAAG4a,GACd,IAAIqrK,EAAKT,EAAW7+M,EAAOm/M,GACvBhP,EAAK0O,EAAW7+M,EAAOo/M,GACvBn6L,EAAMq6L,EAAKnP,EAEH,IAARlrL,IACFq6L,GAAMr6L,EACNkrL,GAAMlrL,GAGR25L,EAAQ9mL,EAAIuB,GAAIimL,GAChBV,EAAQ7mL,EAAIsB,EAAG82K,GACf,IAAIp0J,EAAM+iK,EAAM,GAAI9+M,EAAO83B,GACvB8C,EAAMkkL,EAAM,GAAI9+M,EAAO+3B,GAEvBmnL,IACFP,EAAM5iK,EAAKA,EAAKz7C,GAChBo+M,EAAM3iK,EAAKA,EAAKv7C,GAChBm+M,EAAM/jL,EAAKA,EAAKt6B,GAChBo+M,EAAM9jL,EAAKA,EAAKp6B,IAGlB6+M,EAAInkN,KAAK6gD,GACTsjK,EAAInkN,KAAK0/B,EACX,CAMA,OAJIqkL,GACFI,EAAInkN,KAAKmkN,EAAI/nJ,SAGR+nJ,CACT,CAEA/hN,EAAOvB,QAAUsB,C,iCCvGjB,IAAIyjF,EAAUnlF,EAAQ,OAElBkjN,EAAa/9H,EAAQp2D,SAazB,SAAS60L,EAAY/mL,EAAIC,EAAIC,EAAIiiK,EAAIpiK,EAAGqiK,EAAIC,GAC1C,IAAIE,EAAiB,IAAXriK,EAAKF,GACXV,EAAiB,IAAX6iK,EAAKliK,GACf,OAAQ,GAAKA,EAAKC,GAAMqiK,EAAKjjK,GAAM+iK,IAAO,GAAKpiK,EAAKC,GAAM,EAAIqiK,EAAKjjK,GAAM8iK,EAAKG,EAAKxiK,EAAIE,CACzF,CASA,SAASp7B,EAASwpB,EAAQo4L,GAKxB,IAJA,IAAIv2L,EAAM7B,EAAOxY,OACbgvF,EAAM,GACN3yE,EAAW,EAENva,EAAI,EAAGA,EAAIuY,EAAKvY,IACvBua,GAAYm0L,EAAWh4L,EAAO1W,EAAI,GAAI0W,EAAO1W,IAG/C,IAAIm3B,EAAO5c,EAAW,EACtB4c,EAAOA,EAAO5e,EAAMA,EAAM4e,EAE1B,IAASn3B,EAAI,EAAGA,EAAIm3B,EAAMn3B,IAAK,CAC7B,IAGIqoB,EAEAE,EACAiiK,EANA/kK,EAAMzlB,GAAKm3B,EAAO,IAAM23K,EAASv2L,EAAMA,EAAM,GAC7C/pB,EAAM+B,KAAKy+B,MAAMvJ,GACjB+G,EAAI/G,EAAMj3B,EAEV85B,EAAK5R,EAAOloB,EAAM+pB,GAIjBu2L,GAKHzmL,EAAK3R,GAAQloB,EAAM,EAAI+pB,GAAOA,GAC9BgQ,EAAK7R,GAAQloB,EAAM,GAAK+pB,GACxBiyK,EAAK9zK,GAAQloB,EAAM,GAAK+pB,KANxB8P,EAAK3R,EAAe,IAARloB,EAAYA,EAAMA,EAAM,GACpC+5B,EAAK7R,EAAOloB,EAAM+pB,EAAM,EAAIA,EAAM,EAAI/pB,EAAM,GAC5Cg8L,EAAK9zK,EAAOloB,EAAM+pB,EAAM,EAAIA,EAAM,EAAI/pB,EAAM,IAO9C,IAAI6gN,EAAK7iL,EAAIA,EACT8iL,EAAK9iL,EAAI6iL,EACbniH,EAAIniG,KAAK,CAACqkN,EAAY/mL,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIiiK,EAAG,GAAIh+J,EAAG6iL,EAAIC,GAAKF,EAAY/mL,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIiiK,EAAG,GAAIh+J,EAAG6iL,EAAIC,IAC/G,CAEA,OAAOpiH,CACT,CAEA//F,EAAOvB,QAAUsB,C,wBCnEjB,IAAI40D,EAAQt2D,EAAQ,OAEhB+e,EAAYu3C,EAAMv3C,UAClB0G,EAAY6wC,EAAM7wC,UAClB1kB,EAAOu1D,EAAMv1D,KACbshF,EAAoB/rB,EAAM+rB,kBAC1BQ,EAAWvsB,EAAMusB,SACjBtiE,EAAW+1C,EAAM/1C,SAEjByrC,EAAchsD,EAAQ,MAEtB+jN,EAAkB/jN,EAAQ,OAE1B0nM,EAAc1nM,EAAQ,OAGtBgkN,EAAmB,CACrBr6L,KAAM,EACNE,MAAO,EACPjmB,OAAQ,GAENqgN,EAA4B,CAC9Br6L,IAAK,EACLE,OAAQ,EACRsxB,OAAQ,GAOV,SAASmmK,EAAmB33M,GAG1B,OAFAs6M,EAAet6M,GACf7I,EAAK6I,EAAMw2K,KAAM8jC,GACVt6M,CACT,CAEA,SAASs6M,EAAet6M,GACtB,GAAIA,EAAO,CACTA,EAAM6a,KAAOunC,EAAYiuE,SAASrwH,GAClC,IAAIkiB,EAAYliB,EAAMkiB,UACR,WAAdA,IAA2BA,EAAY,UACvCliB,EAAMkiB,UAAyB,MAAbA,GAAqBk4L,EAAiBl4L,GAAaA,EAAY,OAEjF,IAAIC,EAAoBniB,EAAMmiB,mBAAqBniB,EAAMknG,aACnC,WAAtB/kF,IAAmCA,EAAoB,UACvDniB,EAAMmiB,kBAAyC,MAArBA,GAA6Bk4L,EAA0Bl4L,GAAqBA,EAAoB,MAC1H,IAAIi1J,EAAcp3K,EAAMo3K,YAEpBA,IACFp3K,EAAMo3K,YAAc3+F,EAAkBz4E,EAAMo3K,aAEhD,CACF,CAUA,SAASygC,EAAWQ,EAAQxvL,EAAK5oB,EAAMD,EAAOX,GAC5CW,EAAMw2K,KAAO+jC,EAAelC,EAAQxvL,EAAK5oB,EAAMD,EAAOX,GAAQm7M,EAAgBnC,EAAQxvL,EAAK5oB,EAAMD,EAAOX,EAC1G,CAEA,SAASm7M,EAAgBnC,EAAQxvL,EAAK5oB,EAAMD,EAAOX,GACjD,IAAIwb,EAAO4/L,EAAO5xL,EAAK,OAAQ7oB,EAAM6a,MAAQunC,EAAY+7I,cACrD/mB,EAAcp3K,EAAMo3K,YACpBonB,EAAe6Z,EAAOqC,kBAErBlc,IAAgB6Z,EAAOj0K,UAC1Bo6J,EAAe6Z,EAAOqC,kBAAoBt4J,EAAYq8I,eAAex+L,EAAM4a,EAAMu8J,EAAap3K,EAAMsgE,WAGtG,IAAIE,EAAcg+H,EAAah+H,YAC3B49H,EAAYI,EAAa3kH,MACzB+kH,EAAaJ,EAAaI,WAC1B+b,EAASC,EAAep6I,EAAaxgE,EAAOX,GAC5Cw7M,EAAQF,EAAOE,MACfC,EAAQH,EAAOG,MACf54L,EAAYy4L,EAAOz4L,UACnBC,EAAoBw4L,EAAOx4L,kBAE/B44L,EAAkBlyL,EAAK7oB,EAAOX,EAAMw7M,EAAOC,GAC3C,IAAIE,EAAO54J,EAAYu8I,YAAYmc,EAAOt6I,EAAar+C,GACnDmB,EAAQu3L,EACRt3L,EAAQy3L,EACRC,EAAaC,EAAmBl7M,GAEpC,GAAIi7M,GAAc7jC,EAAa,CAE7B,IAAI3uJ,EAAY25B,EAAYx8C,SAAS3F,EAAM4a,GACvC0lD,EAAa93C,EACjB2uJ,IAAgB72G,GAAc62G,EAAY,GAAKA,EAAY,IAC3D,IAAI+jC,EAAO/4J,EAAYs8I,YAAYmc,EAAOt6I,EAAYr+C,GACtD+4L,GAAcG,EAAe/C,EAAQxvL,EAAK7oB,EAAOm7M,EAAMH,EAAMz6I,EAAYC,GAErE42G,IACF9zJ,EAAQ+3L,EAAmBR,EAAO34L,EAAWk1J,GAC7C7zJ,GAAS6zJ,EAAY,GAEzB,CAEAqjC,EAAO5xL,EAAK,YAAa3G,GAAa,QAGtCu4L,EAAO5xL,EAAK,eAAgB,UAE5B4xL,EAAO5xL,EAAK,aAAc7oB,EAAM23K,gBAAkB,GAClD8iC,EAAO5xL,EAAK,cAAe7oB,EAAM03K,iBAAmB,eACpD+iC,EAAO5xL,EAAK,gBAAiB7oB,EAAM43K,mBAAqB,GACxD6iC,EAAO5xL,EAAK,gBAAiB7oB,EAAM63K,mBAAqB,GAExDt0J,GAASq7K,EAAa,EACtB,IAAI/nB,EAAkB72K,EAAM62K,gBACxBr9J,EAAas+L,EAAU93M,EAAMwZ,WAAYq9J,GACzCt9J,EAAW+hM,EAAQt7M,EAAMuZ,UAEzBC,IACFihM,EAAO5xL,EAAK,YAAaguJ,GACzB4jC,EAAO5xL,EAAK,cAAerP,IAGzBD,GACFkhM,EAAO5xL,EAAK,YAAatP,GAG3B,IAAK,IAAI3O,EAAI,EAAGA,EAAIwzL,EAAUt1L,OAAQ8B,IAEpC4O,GAAcqP,EAAI0yL,WAAWnd,EAAUxzL,GAAI0Y,EAAOC,GAClDhK,GAAYsP,EAAI2yL,SAASpd,EAAUxzL,GAAI0Y,EAAOC,GAC9CA,GAASq7K,CAEb,CAEA,SAAS2b,EAAelC,EAAQxvL,EAAK5oB,EAAMD,EAAOX,GAChD,IAAIm/L,EAAe6Z,EAAOqC,kBAErBlc,IAAgB6Z,EAAOj0K,UAC1Bo6J,EAAe6Z,EAAOqC,kBAAoBt4J,EAAYy8I,cAAc5+L,EAAMD,IAG5Ey7M,EAAapD,EAAQxvL,EAAK21K,EAAcx+L,EAAOX,EACjD,CAEA,SAASo8M,EAAapD,EAAQxvL,EAAK21K,EAAcx+L,EAAOX,GACtD,IAAIugE,EAAe4+H,EAAat+L,MAC5BqgE,EAAai+H,EAAaj+H,WAC1BC,EAAcg+H,EAAah+H,YAC3B42G,EAAcp3K,EAAMo3K,YACpBujC,EAASC,EAAep6I,EAAaxgE,EAAOX,GAC5Cw7M,EAAQF,EAAOE,MACfC,EAAQH,EAAOG,MACf54L,EAAYy4L,EAAOz4L,UACnBC,EAAoBw4L,EAAOx4L,kBAE/B44L,EAAkBlyL,EAAK7oB,EAAOX,EAAMw7M,EAAOC,GAC3C,IAAIK,EAAO/4J,EAAYs8I,YAAYmc,EAAOt6I,EAAYr+C,GAClD84L,EAAO54J,EAAYu8I,YAAYmc,EAAOt6I,EAAar+C,GACnD8mG,EAAQkyF,EACRO,EAAUV,EAEV5jC,IACFnuD,GAASmuD,EAAY,GACrBskC,GAAWtkC,EAAY,IAGzB,IAAIluD,EAASD,EAAQrpD,EACrBs7I,EAAmBl7M,IAAUo7M,EAAe/C,EAAQxvL,EAAK7oB,EAAOm7M,EAAMH,EAAMz6I,EAAYC,GAExF,IAAK,IAAI51D,EAAI,EAAGA,EAAI4zL,EAAa3kH,MAAM/wE,OAAQ8B,IAAK,CAClD,IASIyiL,EATA/5K,EAAOkrL,EAAa3kH,MAAMjvE,GAC1Bs1L,EAAS5sL,EAAK4sL,OACdyb,EAAazb,EAAOp3L,OACpB81L,EAAatrL,EAAKsrL,WAClBgd,EAAYtoM,EAAKpT,MACjB27M,EAAY,EACZC,EAAY7yF,EACZ8yF,EAAa7yF,EACb8yF,EAAaL,EAAa,EAG9B,MAAOE,EAAYF,IAAetuB,EAAQ6S,EAAO2b,IAAaxuB,EAAMnrK,WAAiC,SAApBmrK,EAAMnrK,WACrF+5L,EAAW5D,EAAQxvL,EAAKwkK,EAAOrtL,EAAO4+L,EAAY8c,EAASI,EAAW,QACtEF,GAAavuB,EAAMntL,MACnB47M,GAAazuB,EAAMntL,MACnB27M,IAGF,MAAOG,GAAc,IAAM3uB,EAAQ6S,EAAO8b,GAAiC,UAApB3uB,EAAMnrK,WAC3D+5L,EAAW5D,EAAQxvL,EAAKwkK,EAAOrtL,EAAO4+L,EAAY8c,EAASK,EAAY,SACvEH,GAAavuB,EAAMntL,MACnB67M,GAAc1uB,EAAMntL,MACpB87M,IAIFF,IAAcl8I,GAAgBk8I,EAAY7yF,IAAUC,EAAS6yF,GAAcH,GAAa,EAExF,MAAOC,GAAaG,EAClB3uB,EAAQ6S,EAAO2b,GAEfI,EAAW5D,EAAQxvL,EAAKwkK,EAAOrtL,EAAO4+L,EAAY8c,EAASI,EAAYzuB,EAAMntL,MAAQ,EAAG,UACxF47M,GAAazuB,EAAMntL,MACnB27M,IAGFH,GAAW9c,CACb,CACF,CAEA,SAASmc,EAAkBlyL,EAAK7oB,EAAOX,EAAMuB,EAAGC,GAE9C,GAAIxB,GAAQW,EAAMywB,aAAc,CAC9B,IAAItX,EAASnZ,EAAM0wB,WAEJ,WAAXvX,GACFvY,EAAIvB,EAAKa,MAAQ,EAAIb,EAAKuB,EAC1BC,EAAIxB,EAAKsB,OAAS,EAAItB,EAAKwB,GAClBsY,IACTvY,EAAIuY,EAAO,GAAK9Z,EAAKuB,EACrBC,EAAIsY,EAAO,GAAK9Z,EAAKwB,GAGvBgoB,EAAI20C,UAAU58D,EAAGC,GAEjBgoB,EAAIs4B,QAAQnhD,EAAMywB,cAClB5H,EAAI20C,WAAW58D,GAAIC,EACrB,CACF,CAEA,SAASo7M,EAAW5D,EAAQxvL,EAAKwkK,EAAOrtL,EAAO4+L,EAAY8c,EAAS96M,EAAGshB,GACrE,IAAIi+K,EAAangM,EAAMw2K,KAAK6W,EAAMvjB,YAAc,CAAC,EAG7C3nJ,EAAoBkrK,EAAMlrK,kBAC1BthB,EAAI66M,EAAU9c,EAAa,EAEL,QAAtBz8K,EACFthB,EAAI66M,EAAUruB,EAAM1sL,OAAS,EACE,WAAtBwhB,IACTthB,EAAI66M,EAAU9c,EAAavR,EAAM1sL,OAAS,IAG3C0sL,EAAM0T,cAAgBma,EAAmB/a,IAAeib,EAAe/C,EAAQxvL,EAAKs3K,EAA0B,UAAdj+K,EAAwBthB,EAAIysL,EAAMntL,MAAsB,WAAdgiB,EAAyBthB,EAAIysL,EAAMntL,MAAQ,EAAIU,EAAGC,EAAIwsL,EAAM1sL,OAAS,EAAG0sL,EAAMntL,MAAOmtL,EAAM1sL,QACtO,IAAIy2K,EAAciW,EAAMjW,YAEpBA,IACFx2K,EAAIy6M,EAAmBz6M,EAAGshB,EAAWk1J,GACrCv2K,GAAKwsL,EAAM1sL,OAAS,EAAIy2K,EAAY,GAAKiW,EAAM3kK,WAAa,GAG9D+xL,EAAO5xL,EAAK,aAAchN,EAAUskL,EAAWxoB,eAAgB33K,EAAM23K,eAAgB,IACrF8iC,EAAO5xL,EAAK,cAAes3K,EAAWzoB,iBAAmB13K,EAAM03K,iBAAmB,eAClF+iC,EAAO5xL,EAAK,gBAAiBhN,EAAUskL,EAAWvoB,kBAAmB53K,EAAM43K,kBAAmB,IAC9F6iC,EAAO5xL,EAAK,gBAAiBhN,EAAUskL,EAAWtoB,kBAAmB73K,EAAM63K,kBAAmB,IAC9F4iC,EAAO5xL,EAAK,YAAa3G,GAGzBu4L,EAAO5xL,EAAK,eAAgB,UAC5B4xL,EAAO5xL,EAAK,OAAQwkK,EAAMxyK,MAAQunC,EAAY+7I,cAC9C,IAAI3kL,EAAas+L,EAAU3X,EAAW3mL,YAAcxZ,EAAMwZ,WAAYq9J,GAClEt9J,EAAW+hM,EAAQnb,EAAW5mL,UAAYvZ,EAAMuZ,UAChDs9J,EAAkB1hK,EAAUgrL,EAAWtpB,gBAAiB72K,EAAM62K,iBAE9Dr9J,IACFihM,EAAO5xL,EAAK,YAAaguJ,GACzB4jC,EAAO5xL,EAAK,cAAerP,GAC3BqP,EAAI0yL,WAAWluB,EAAMptL,KAAMW,EAAGC,IAG5B0Y,IACFkhM,EAAO5xL,EAAK,YAAatP,GACzBsP,EAAI2yL,SAASnuB,EAAMptL,KAAMW,EAAGC,GAEhC,CAEA,SAASq6M,EAAmBl7M,GAC1B,OAAOA,EAAMm3K,qBAAuBn3K,EAAM82K,iBAAmB92K,EAAM42K,eACrE,CAIA,SAASwkC,EAAe/C,EAAQxvL,EAAK7oB,EAAOY,EAAGC,EAAGX,EAAOS,GACvD,IAAIw2K,EAAsBn3K,EAAMm3K,oBAC5BL,EAAkB92K,EAAM82K,gBACxBF,EAAkB52K,EAAM42K,gBACxBslC,EAAYjjI,EAASk+F,GAMzB,GALAsjC,EAAO5xL,EAAK,aAAc7oB,EAAMu3K,mBAAqB,GACrDkjC,EAAO5xL,EAAK,cAAe7oB,EAAMs3K,oBAAsB,eACvDmjC,EAAO5xL,EAAK,gBAAiB7oB,EAAMw3K,sBAAwB,GAC3DijC,EAAO5xL,EAAK,gBAAiB7oB,EAAMy3K,sBAAwB,GAEvDykC,GAAaplC,GAAmBF,EAAiB,CACnD/tJ,EAAIqR,YACJ,IAAIm9I,EAAmBr3K,EAAMq3K,iBAExBA,EAGH8iC,EAAgBvxL,UAAUC,EAAK,CAC7BjoB,EAAGA,EACHC,EAAGA,EACHX,MAAOA,EACPS,OAAQA,EACRP,EAAGi3K,IAPLxuJ,EAAIxpB,KAAKuB,EAAGC,EAAGX,EAAOS,GAWxBkoB,EAAIuR,WACN,CAEA,GAAI8hL,EACFzB,EAAO5xL,EAAK,YAAasuJ,GACzBtuJ,EAAIjnB,YACC,GAAI+U,EAASwgK,GAAsB,CACxC,IAAI7+J,EAAQ6+J,EAAoB7+J,MAChCA,EAAQwlL,EAAYqX,oBAAoB78L,EAAO,KAAM+/L,EAAQ8D,EAAiBhlC,GAE1E7+J,GAASwlL,EAAY4C,aAAapoL,IACpCuQ,EAAIwQ,UAAU/gB,EAAO1X,EAAGC,EAAGX,EAAOS,EAEtC,CAEIm2K,GAAmBF,IACrB6jC,EAAO5xL,EAAK,YAAaiuJ,GACzB2jC,EAAO5xL,EAAK,cAAe+tJ,GAC3B/tJ,EAAIxd,SAER,CAEA,SAAS8wM,EAAgB7jM,EAAO6+J,GAG9BA,EAAoB7+J,MAAQA,CAC9B,CAEA,SAASsiM,EAAewB,EAAYp8M,EAAOX,GACzC,IAAIw7M,EAAQ76M,EAAMY,GAAK,EACnBk6M,EAAQ96M,EAAMa,GAAK,EACnBqhB,EAAYliB,EAAMkiB,UAClBC,EAAoBniB,EAAMmiB,kBAE9B,GAAI9iB,EAAM,CACR,IAAI4O,EAAejO,EAAMiO,aAEzB,GAAIA,aAAwB+lB,MAE1B6mL,EAAQx7M,EAAKuB,EAAIgE,EAAaqJ,EAAa,GAAI5O,EAAKa,OACpD46M,EAAQz7M,EAAKwB,EAAI+D,EAAaqJ,EAAa,GAAI5O,EAAKsB,YAC/C,CACL,IAAI7G,EAAMsoD,EAAY08I,yBAAyB7wL,EAAc5O,EAAMW,EAAMmgK,cACzE06C,EAAQ/gN,EAAI8G,EACZk6M,EAAQhhN,EAAI+G,EAEZqhB,EAAYA,GAAapoB,EAAIooB,UAC7BC,EAAoBA,GAAqBroB,EAAIqoB,iBAC/C,CAIA,IAAI8zJ,EAAaj2K,EAAMi2K,WAEnBA,IACF4kC,GAAS5kC,EAAW,GACpB6kC,GAAS7kC,EAAW,GAExB,CAEA,MAAO,CACL4kC,MAAOA,EACPC,MAAOA,EACP54L,UAAWA,EACXC,kBAAmBA,EAEvB,CAEA,SAASs4L,EAAO5xL,EAAKxP,EAAM3W,GAMzB,OAFAmmB,EAAIxP,GAAQ3W,EAELmmB,EAAIxP,EACb,CAQA,SAASy+L,EAAUzsM,EAAQlJ,GACzB,OAAiB,MAAVkJ,GAAkBlJ,GAAa,GAAgB,gBAAXkJ,GAAuC,SAAXA,EAAoB,KACzFA,EAAOiN,OAASjN,EAAOymC,WAAa,OAASzmC,CACjD,CAEA,SAASiwM,EAAQ15M,GACf,OAAe,MAARA,GAAyB,SAATA,EAAkB,KACvCA,EAAK0W,OAAS1W,EAAKkwC,WAAa,OAASlwC,CAC7C,CAEA,SAASgD,EAAalC,EAAOknD,GAC3B,MAAqB,kBAAVlnD,EACLA,EAAMmG,YAAY,MAAQ,EACrB86G,WAAWjhH,GAAS,IAAMknD,EAG5B+5D,WAAWjhH,GAGbA,CACT,CAEA,SAAS24M,EAAmBz6M,EAAGshB,EAAWk1J,GACxC,MAAqB,UAAdl1J,EAAwBthB,EAAIw2K,EAAY,GAAmB,WAAdl1J,EAAyBthB,EAAIw2K,EAAY,GAAK,EAAIA,EAAY,GAAK,EAAIx2K,EAAIw2K,EAAY,EAC7I,CAQA,SAASwgC,EAAa33M,EAAMD,GAC1B,OAAe,MAARC,IAAiBA,GAAQD,EAAMm3K,qBAAuBn3K,EAAM82K,iBAAmB92K,EAAM42K,iBAAmB52K,EAAMo3K,YACvH,CAEA5gL,EAAQmhN,mBAAqBA,EAC7BnhN,EAAQqhN,WAAaA,EACrBrhN,EAAQshN,UAAYA,EACpBthN,EAAQ8kN,QAAUA,EAClB9kN,EAAQohN,aAAeA,C,wBClbvB,IAAIF,EAAathN,EAAQ,OAErBuiE,EAAeviE,EAAQ,OAMvBo0L,EAAU,IAAI7xH,EAEdi8I,EAAW,WAAa,EAE5BA,EAAS/9M,UAAY,CACnBC,YAAa89M,EAObU,aAAc,SAAUzsL,EAAKxpB,GAC3B,IAAIW,EAAQrL,KAAKqL,MACjBX,EAAOW,EAAM6jD,UAAYxkD,EAEzB1K,KAAKyvC,SAAWszK,EAAWC,mBAAmB33M,GAAO,GACrD,IAAIC,EAAOD,EAAMC,KAIjB,GAFQ,MAARA,IAAiBA,GAAQ,IAEpBy3M,EAAWE,aAAa33M,EAAMD,GAAnC,CAKA6oB,EAAIwvE,OAEJ,IAAI7mE,EAAY78B,KAAK68B,UAEhBxxB,EAAMm3M,cAOTxiN,KAAKm2L,aAAajiK,GANd2I,IACFg5J,EAAQn2J,KAAKh1B,GACbmrL,EAAQj5J,eAAeC,GACvBnyB,EAAOmrL,GAOXktB,EAAWG,WAAWljN,KAAMk0B,EAAK5oB,EAAMD,EAAOX,GAC9CwpB,EAAIurE,SAnBJ,CAoBF,GAEF,IAAIt8F,EAAW88M,EACf78M,EAAOvB,QAAUsB,C,wBCtDjB,IAAI6wB,EAAOvyB,EAAQ,OAMf0B,EAAW6wB,EAAKzsB,OAAO,CACzB7E,KAAM,MACNuH,MAAO,CACLkC,GAAI,EACJC,GAAI,EACJX,EAAG,EACHL,WAAY,EACZiB,SAAoB,EAAV7F,KAAK0L,GACfge,WAAW,GAEb7kB,MAAO,CACLqL,OAAQ,OACRzJ,KAAM,MAERgnB,UAAW,SAAUC,EAAKjqB,GACxB,IAAIgC,EAAIhC,EAAMkC,GACVD,EAAIjC,EAAMmC,GACVX,EAAIjF,KAAKF,IAAI2D,EAAMwB,EAAG,GACtBL,EAAanB,EAAMmB,WACnBiB,EAAWpC,EAAMoC,SACjB6jB,EAAYjmB,EAAMimB,UAClB+C,EAAQzsB,KAAK0sB,IAAI9nB,GACjB+nB,EAAQ3sB,KAAK4sB,IAAIhoB,GACrB8oB,EAAIG,OAAOpB,EAAQxnB,EAAIQ,EAAGknB,EAAQ1nB,EAAIS,GACtCgoB,EAAIsR,IAAIv5B,EAAGC,EAAGT,EAAGL,EAAYiB,GAAW6jB,EAC1C,IAGF9sB,EAAOvB,QAAUsB,C,wBClCjB,IAAI6wB,EAAOvyB,EAAQ,OAEfk8B,EAAOl8B,EAAQ,OAEfwnM,EAASxnM,EAAQ,OAEjBu9B,EAAqBiqK,EAAOjqK,mBAC5B02K,EAAiBzM,EAAOyM,eACxB33K,EAAckrK,EAAOlrK,YACrB6pK,EAAUqB,EAAOrB,QACjBl9J,EAAwBu+J,EAAOv+J,sBAC/BqqK,EAAoB9L,EAAO8L,kBAM3BvnB,EAAM,GAEV,SAASk6B,EAAaz9M,EAAOo0B,EAAGspL,GAC9B,IAAIh2J,EAAO1nD,EAAM0nD,KACbC,EAAO3nD,EAAM2nD,KAEjB,OAAa,OAATD,GAA0B,OAATC,EACZ,EAAE+1J,EAAY5S,EAAoBnN,GAAS39L,EAAM8kB,GAAI9kB,EAAMglC,KAAMhlC,EAAM0nD,KAAM1nD,EAAMglB,GAAIoP,IAAKspL,EAAY5S,EAAoBnN,GAAS39L,EAAM+kB,GAAI/kB,EAAMilC,KAAMjlC,EAAM2nD,KAAM3nD,EAAMklB,GAAIkP,IAEjL,EAAEspL,EAAYj9K,EAAwB3M,GAAa9zB,EAAM8kB,GAAI9kB,EAAMglC,KAAMhlC,EAAMglB,GAAIoP,IAAKspL,EAAYj9K,EAAwB3M,GAAa9zB,EAAM+kB,GAAI/kB,EAAMilC,KAAMjlC,EAAMklB,GAAIkP,GAEpL,CAEA,IAAIl7B,EAAW6wB,EAAKzsB,OAAO,CACzB7E,KAAM,eACNuH,MAAO,CACL8kB,GAAI,EACJC,GAAI,EACJC,GAAI,EACJE,GAAI,EACJ8f,KAAM,EACNC,KAAM,EAINjkB,QAAS,GAEX5f,MAAO,CACLqL,OAAQ,OACRzJ,KAAM,MAERgnB,UAAW,SAAUC,EAAKjqB,GACxB,IAAI8kB,EAAK9kB,EAAM8kB,GACXC,EAAK/kB,EAAM+kB,GACXC,EAAKhlB,EAAMglB,GACXE,EAAKllB,EAAMklB,GACX8f,EAAOhlC,EAAMglC,KACbC,EAAOjlC,EAAMilC,KACbyiB,EAAO1nD,EAAM0nD,KACbC,EAAO3nD,EAAM2nD,KACb3mC,EAAUhhB,EAAMghB,QAEJ,IAAZA,IAIJiJ,EAAIG,OAAOtF,EAAIC,GAEH,MAAR2iC,GAAwB,MAARC,GACd3mC,EAAU,IACZ+T,EAAmBjQ,EAAIkgB,EAAMhgB,EAAIhE,EAASuiK,GAC1Cv+I,EAAOu+I,EAAI,GACXv+J,EAAKu+J,EAAI,GACTxuJ,EAAmBhQ,EAAIkgB,EAAM/f,EAAIlE,EAASuiK,GAC1Ct+I,EAAOs+I,EAAI,GACXr+J,EAAKq+J,EAAI,IAGXt5J,EAAIqZ,iBAAiB0B,EAAMC,EAAMjgB,EAAIE,KAEjClE,EAAU,IACZyqL,EAAe3mL,EAAIkgB,EAAM0iB,EAAM1iC,EAAIhE,EAASuiK,GAC5Cv+I,EAAOu+I,EAAI,GACX77H,EAAO67H,EAAI,GACXv+J,EAAKu+J,EAAI,GACTkoB,EAAe1mL,EAAIkgB,EAAM0iB,EAAMziC,EAAIlE,EAASuiK,GAC5Ct+I,EAAOs+I,EAAI,GACX57H,EAAO47H,EAAI,GACXr+J,EAAKq+J,EAAI,IAGXt5J,EAAIyuB,cAAc1T,EAAMC,EAAMyiB,EAAMC,EAAM3iC,EAAIE,IAElD,EAOAwgB,QAAS,SAAUtR,GACjB,OAAOqpL,EAAa1nN,KAAKiK,MAAOo0B,GAAG,EACrC,EAOAyR,UAAW,SAAUzR,GACnB,IAAIjgB,EAAIspM,EAAa1nN,KAAKiK,MAAOo0B,GAAG,GACpC,OAAOV,EAAKiC,UAAUxhB,EAAGA,EAC3B,IAGFhb,EAAOvB,QAAUsB,C,wBChHjB,IAAI6wB,EAAOvyB,EAAQ,OAMf0B,EAAW6wB,EAAKzsB,OAAO,CACzB7E,KAAM,SACNuH,MAAO,CACLkC,GAAI,EACJC,GAAI,EACJX,EAAG,GAELwoB,UAAW,SAAUC,EAAKjqB,EAAO6gL,GAG3BA,GACF52J,EAAIG,OAAOpqB,EAAMkC,GAAKlC,EAAMwB,EAAGxB,EAAMmC,IAUvC8nB,EAAIsR,IAAIv7B,EAAMkC,GAAIlC,EAAMmC,GAAInC,EAAMwB,EAAG,EAAa,EAAVjF,KAAK0L,IAAQ,EACvD,IAGF9O,EAAOvB,QAAUsB,C,wBC/BjB,IAAI6wB,EAAOvyB,EAAQ,OAMf0B,EAAW6wB,EAAKzsB,OAAO,CACzB7E,KAAM,OACNuH,MAAO,CAEL8kB,GAAI,EACJC,GAAI,EAEJC,GAAI,EACJE,GAAI,EACJlE,QAAS,GAEX5f,MAAO,CACLqL,OAAQ,OACRzJ,KAAM,MAERgnB,UAAW,SAAUC,EAAKjqB,GACxB,IAAI8kB,EAAK9kB,EAAM8kB,GACXC,EAAK/kB,EAAM+kB,GACXC,EAAKhlB,EAAMglB,GACXE,EAAKllB,EAAMklB,GACXlE,EAAUhhB,EAAMghB,QAEJ,IAAZA,IAIJiJ,EAAIG,OAAOtF,EAAIC,GAEX/D,EAAU,IACZgE,EAAKF,GAAM,EAAI9D,GAAWgE,EAAKhE,EAC/BkE,EAAKH,GAAM,EAAI/D,GAAWkE,EAAKlE,GAGjCiJ,EAAII,OAAOrF,EAAIE,GACjB,EAOAwgB,QAAS,SAAUvxB,GACjB,IAAInU,EAAQjK,KAAKiK,MACjB,MAAO,CAACA,EAAM8kB,IAAM,EAAI3Q,GAAKnU,EAAMglB,GAAK7Q,EAAGnU,EAAM+kB,IAAM,EAAI5Q,GAAKnU,EAAMklB,GAAK/Q,EAC7E,IAGFhb,EAAOvB,QAAUsB,C,wBCrDjB,IAAI6wB,EAAOvyB,EAAQ,OAEfmmN,EAAanmN,EAAQ,OAMrB0B,EAAW6wB,EAAKzsB,OAAO,CACzB7E,KAAM,UACNuH,MAAO,CACL0iB,OAAQ,KACRotB,QAAQ,EACR8I,iBAAkB,MAEpB5uB,UAAW,SAAUC,EAAKjqB,GACxB29M,EAAW3zL,UAAUC,EAAKjqB,GAAO,EACnC,IAGF7G,EAAOvB,QAAUsB,C,wBCpBjB,IAAI6wB,EAAOvyB,EAAQ,OAEfmmN,EAAanmN,EAAQ,OAKrB0B,EAAW6wB,EAAKzsB,OAAO,CACzB7E,KAAM,WACNuH,MAAO,CACL0iB,OAAQ,KACRotB,QAAQ,EACR8I,iBAAkB,MAEpBx3C,MAAO,CACLqL,OAAQ,OACRzJ,KAAM,MAERgnB,UAAW,SAAUC,EAAKjqB,GACxB29M,EAAW3zL,UAAUC,EAAKjqB,GAAO,EACnC,IAGF7G,EAAOvB,QAAUsB,C,wBCvBjB,IAAI6wB,EAAOvyB,EAAQ,OAEf+jN,EAAkB/jN,EAAQ,OAM1B0B,EAAW6wB,EAAKzsB,OAAO,CACzB7E,KAAM,OACNuH,MAAO,CAMLwB,EAAG,EACHQ,EAAG,EACHC,EAAG,EACHX,MAAO,EACPS,OAAQ,GAEVioB,UAAW,SAAUC,EAAKjqB,GACxB,IAAIgC,EAAIhC,EAAMgC,EACVC,EAAIjC,EAAMiC,EACVX,EAAQtB,EAAMsB,MACdS,EAAS/B,EAAM+B,OAEd/B,EAAMwB,EAGT+5M,EAAgBvxL,UAAUC,EAAKjqB,GAF/BiqB,EAAIxpB,KAAKuB,EAAGC,EAAGX,EAAOS,GAKxBkoB,EAAIuR,WAEN,IAGFriC,EAAOvB,QAAUsB,C,wBCvCjB,IAAI6wB,EAAOvyB,EAAQ,OAMf0B,EAAW6wB,EAAKzsB,OAAO,CACzB7E,KAAM,OACNuH,MAAO,CACLkC,GAAI,EACJC,GAAI,EACJX,EAAG,EACHC,GAAI,GAENuoB,UAAW,SAAUC,EAAKjqB,GACxB,IAAIgC,EAAIhC,EAAMkC,GACVD,EAAIjC,EAAMmC,GACVilB,EAAgB,EAAV7qB,KAAK0L,GACfgiB,EAAIG,OAAOpoB,EAAIhC,EAAMwB,EAAGS,GACxBgoB,EAAIsR,IAAIv5B,EAAGC,EAAGjC,EAAMwB,EAAG,EAAG4lB,GAAK,GAC/B6C,EAAIG,OAAOpoB,EAAIhC,EAAMyB,GAAIQ,GACzBgoB,EAAIsR,IAAIv5B,EAAGC,EAAGjC,EAAMyB,GAAI,EAAG2lB,GAAK,EAClC,IAGFjuB,EAAOvB,QAAUsB,C,wBCzBjB,IAAI6wB,EAAOvyB,EAAQ,OAEfggD,EAAoBhgD,EAAQ,OAM5B0B,EAAW6wB,EAAKzsB,OAAO,CACzB7E,KAAM,SACNuH,MAAO,CACLkC,GAAI,EACJC,GAAI,EACJV,GAAI,EACJD,EAAG,EACHL,WAAY,EACZiB,SAAoB,EAAV7F,KAAK0L,GACfge,WAAW,GAEbgU,MAAOud,EAAkBztB,EAAK9xB,UAAUgiC,OACxCjQ,UAAW,SAAUC,EAAKjqB,GACxB,IAAIgC,EAAIhC,EAAMkC,GACVD,EAAIjC,EAAMmC,GACVV,EAAKlF,KAAKF,IAAI2D,EAAMyB,IAAM,EAAG,GAC7BD,EAAIjF,KAAKF,IAAI2D,EAAMwB,EAAG,GACtBL,EAAanB,EAAMmB,WACnBiB,EAAWpC,EAAMoC,SACjB6jB,EAAYjmB,EAAMimB,UAClB+C,EAAQzsB,KAAK0sB,IAAI9nB,GACjB+nB,EAAQ3sB,KAAK4sB,IAAIhoB,GACrB8oB,EAAIG,OAAOpB,EAAQvnB,EAAKO,EAAGknB,EAAQznB,EAAKQ,GACxCgoB,EAAII,OAAOrB,EAAQxnB,EAAIQ,EAAGknB,EAAQ1nB,EAAIS,GACtCgoB,EAAIsR,IAAIv5B,EAAGC,EAAGT,EAAGL,EAAYiB,GAAW6jB,GACxCgE,EAAII,OAAO9tB,KAAK0sB,IAAI7mB,GAAYX,EAAKO,EAAGzF,KAAK4sB,IAAI/mB,GAAYX,EAAKQ,GAEvD,IAAPR,GACFwoB,EAAIsR,IAAIv5B,EAAGC,EAAGR,EAAIW,EAAUjB,EAAY8kB,GAG1CgE,EAAIuR,WACN,IAGFriC,EAAOvB,QAAUsB,C,gCC3CjB,IAAIi7L,EAAW38L,EAAQ,OAEnBovJ,EAAMpvJ,EAAQ,OAEds2D,EAAQt2D,EAAQ,OAEhB6iF,EAAWvsB,EAAMusB,SACjBC,EAAaxsB,EAAMwsB,WACnBviE,EAAW+1C,EAAM/1C,SACjBwhK,EAAczrH,EAAMyrH,YACpBrnK,EAAU47C,EAAM57C,QAMhB20K,EAAa,WAKf9wL,KAAKggD,UAAY,EACnB,EAEA8wI,EAAW5uL,UAAY,CACrBC,YAAa2uL,EAcb7mJ,QAAS,SAAUj1B,EAAMq0B,GACvB,IAAIvzB,EACA+xM,GAAiB,EACjBp+M,EAAKzJ,KACLukD,EAAKvkD,KAAKu/K,KAEd,GAAIvqK,EAAM,CACR,IAAI8yM,EAAe9yM,EAAK6sB,MAAM,KAC1Bnd,EAAOjb,EAEXo+M,EAAqC,UAApBC,EAAa,GAE9B,IAAK,IAAI7xM,EAAI,EAAGotB,EAAIykL,EAAa3zM,OAAQ8B,EAAIotB,EAAGptB,IACzCyO,IAILA,EAAOA,EAAKojM,EAAa7xM,KAGvByO,IACF5O,EAAS4O,EAEb,MACE5O,EAASrM,EAGX,GAAKqM,EAAL,CAKA,IAAIkqC,EAAYv2C,EAAGu2C,UACfhW,EAAW,IAAIo0J,EAAStoL,EAAQuzB,GAapC,OAZAW,EAASG,QAAO,SAAUr0B,GACxBrM,EAAG6R,MAAMusM,EACX,IAAGx9K,MAAK,WAEN2V,EAAUyf,OAAOtjD,EAAQ6jC,EAAWhW,GAAW,EACjD,IACAgW,EAAUh/C,KAAKgpC,GAEXua,GACFA,EAAGwF,UAAUunI,YAAYtnJ,GAGpBA,CAhBP,CAFE6mH,EAAI,aAAe77I,EAAO,+BAAiCvL,EAAG4c,GAmBlE,EAMAwjB,cAAe,SAAUy5J,GAIvB,IAHA,IAAItjJ,EAAYhgD,KAAKggD,UACjBxxB,EAAMwxB,EAAU7rC,OAEX8B,EAAI,EAAGA,EAAIuY,EAAKvY,IACvB+pC,EAAU/pC,GAAGonC,KAAKimJ,GAIpB,OADAtjJ,EAAU7rC,OAAS,EACZnU,IACT,EAgCAmX,UAAW,SAAUrB,EAAQ8jF,EAAM9vD,EAAOi+B,EAAQlJ,EAAUyiI,GAEtDh9G,EAASx6C,IACX+0B,EAAWkJ,EACXA,EAASj+B,EACTA,EAAQ,GAEDy6C,EAAWxc,IAChBlJ,EAAWkJ,EACXA,EAAS,SACTj+B,EAAQ,GAEDy6C,EAAWz6C,IAChB+0B,EAAW/0B,EACXA,EAAQ,GAEDy6C,EAAWqV,IAChB/6B,EAAW+6B,EACXA,EAAO,KAECA,IACNA,EAAO,KAIjB55F,KAAK6pC,gBAEL7pC,KAAK+nN,kBAAkB,GAAI/nN,KAAM8V,EAAQ8jF,EAAM9vD,GAI/C,IAAIkW,EAAYhgD,KAAKggD,UAAUh9C,QAC3BgU,EAAQgpC,EAAU7rC,OAEtB,SAASk2B,IACPrzB,IAEKA,GACH6nD,GAAYA,GAEhB,CAIK7nD,GACH6nD,GAAYA,IAKd,IAAK,IAAI5oD,EAAI,EAAGA,EAAI+pC,EAAU7rC,OAAQ8B,IACpC+pC,EAAU/pC,GAAGo0B,KAAKA,GAAM9rB,MAAMwpD,EAAQu5H,EAE1C,EA2BAymB,kBAAmB,SAAU/yM,EAAMkgC,EAAQp/B,EAAQ8jF,EAAM9vD,GACvD,IAAIk+K,EAAa,CAAC,EACdC,EAAgB,EAEpB,IAAK,IAAIzkN,KAAQsS,EACf,GAAKA,EAAOlU,eAAe4B,GAI3B,GAAoB,MAAhB0xC,EAAO1xC,GACLwe,EAASlM,EAAOtS,MAAWggL,EAAY1tK,EAAOtS,IAChDxD,KAAK+nN,kBAAkB/yM,EAAOA,EAAO,IAAMxR,EAAOA,EAAM0xC,EAAO1xC,GAAOsS,EAAOtS,GAAOo2F,EAAM9vD,IAE1Fk+K,EAAWxkN,GAAQsS,EAAOtS,GAC1BykN,UAEG,GAAoB,MAAhBnyM,EAAOtS,GAGhB,GAAKwR,EAEE,CAEL,IAAIigE,EAAQ,CAAC,EACbA,EAAMjgE,GAAQ,CAAC,EACfigE,EAAMjgE,GAAMxR,GAAQsS,EAAOtS,GAC3BxD,KAAKoN,KAAK6nE,EACZ,MAPEj1E,KAAKoN,KAAK5J,EAAMsS,EAAOtS,IAe7B,OAJIykN,EAAgB,GAClBjoN,KAAKiqC,QAAQj1B,GAAM,GAAOk1B,KAAa,MAAR0vD,EAAe,IAAMA,EAAMouH,GAAYl+K,MAAMA,GAAS,GAGhF9pC,IACT,GAEF,IAAImD,EAAW2tL,EACf1tL,EAAOvB,QAAUsB,C,oBC3PjB,SAASquL,IACPxxL,KAAKM,GAAG,YAAaN,KAAKkoN,WAAYloN,MACtCA,KAAKM,GAAG,YAAaN,KAAKmoN,MAAOnoN,MACjCA,KAAKM,GAAG,UAAWN,KAAKooN,SAAUpoN,MAClCA,KAAKM,GAAG,YAAaN,KAAKooN,SAAUpoN,KAItC,CA4DA,SAASw9K,EAAM1nK,EAAQ4mB,GACrB,MAAO,CACL5mB,OAAQA,EACRosG,UAAWxlF,GAAKA,EAAEwlF,UAEtB,CA/DAsvE,EAAUtvL,UAAY,CACpBC,YAAaqvL,EACb02B,WAAY,SAAUxrL,GACpB,IAAI2rL,EAAiB3rL,EAAE5mB,OAEnBuyM,GAAkBA,EAAe7vL,YACnCx4B,KAAKsoN,gBAAkBD,EACvBA,EAAenwF,UAAW,EAC1Bl4H,KAAK2gH,GAAKjkF,EAAEoR,QACZ9tC,KAAK4gH,GAAKlkF,EAAEqR,QACZ/tC,KAAK8yL,kBAAkBtV,EAAM6qC,EAAgB3rL,GAAI,YAAaA,EAAE53B,OAEpE,EACAqjN,MAAO,SAAUzrL,GACf,IAAI2rL,EAAiBroN,KAAKsoN,gBAE1B,GAAID,EAAgB,CAClB,IAAIp8M,EAAIywB,EAAEoR,QACN5hC,EAAIwwB,EAAEqR,QACN/nC,EAAKiG,EAAIjM,KAAK2gH,GACd16G,EAAKiG,EAAIlM,KAAK4gH,GAClB5gH,KAAK2gH,GAAK10G,EACVjM,KAAK4gH,GAAK10G,EACVm8M,EAAe91K,MAAMvsC,EAAIC,EAAIy2B,GAC7B18B,KAAK8yL,kBAAkBtV,EAAM6qC,EAAgB3rL,GAAI,OAAQA,EAAE53B,OAC3D,IAAIyjN,EAAavoN,KAAKkqI,UAAUj+H,EAAGC,EAAGm8M,GAAgBvyM,OAClD0yM,EAAiBxoN,KAAKyoN,YAC1BzoN,KAAKyoN,YAAcF,EAEfF,IAAmBE,IACjBC,GAAkBD,IAAeC,GACnCxoN,KAAK8yL,kBAAkBtV,EAAMgrC,EAAgB9rL,GAAI,YAAaA,EAAE53B,OAG9DyjN,GAAcA,IAAeC,GAC/BxoN,KAAK8yL,kBAAkBtV,EAAM+qC,EAAY7rL,GAAI,YAAaA,EAAE53B,OAGlE,CACF,EACAsjN,SAAU,SAAU1rL,GAClB,IAAI2rL,EAAiBroN,KAAKsoN,gBAEtBD,IACFA,EAAenwF,UAAW,GAG5Bl4H,KAAK8yL,kBAAkBtV,EAAM6qC,EAAgB3rL,GAAI,UAAWA,EAAE53B,OAE1D9E,KAAKyoN,aACPzoN,KAAK8yL,kBAAkBtV,EAAMx9K,KAAKyoN,YAAa/rL,GAAI,OAAQA,EAAE53B,OAG/D9E,KAAKsoN,gBAAkB,KACvBtoN,KAAKyoN,YAAc,IACrB,GAUF,IAAItlN,EAAWquL,EACfpuL,EAAOvB,QAAUsB,C,iCCxEjB,IAAIulN,EAAYrpL,MAAMn9B,UAAUc,MAO5BgwG,EAAW,WACbhzG,KAAK2oN,WAAa,CAAC,CACrB,EAEA31G,EAAS9wG,UAAY,CACnBC,YAAa6wG,EASb0sD,IAAK,SAAU56J,EAAOq7E,EAAS1oE,GAC7B,IAAImxM,EAAK5oN,KAAK2oN,WAEd,IAAKxoI,IAAYr7E,EACf,OAAO9E,KAGJ4oN,EAAG9jN,KACN8jN,EAAG9jN,GAAS,IAGd,IAAK,IAAImR,EAAI,EAAGA,EAAI2yM,EAAG9jN,GAAOqP,OAAQ8B,IACpC,GAAI2yM,EAAG9jN,GAAOmR,GAAGshG,IAAMp3B,EACrB,OAAOngF,KAUX,OANA4oN,EAAG9jN,GAAO9D,KAAK,CACbu2G,EAAGp3B,EACHu/E,KAAK,EACLxrI,IAAKzc,GAAWzX,OAGXA,IACT,EAQAM,GAAI,SAAUwE,EAAOq7E,EAAS1oE,GAC5B,IAAImxM,EAAK5oN,KAAK2oN,WAEd,IAAKxoI,IAAYr7E,EACf,OAAO9E,KAGJ4oN,EAAG9jN,KACN8jN,EAAG9jN,GAAS,IAGd,IAAK,IAAImR,EAAI,EAAGA,EAAI2yM,EAAG9jN,GAAOqP,OAAQ8B,IACpC,GAAI2yM,EAAG9jN,GAAOmR,GAAGshG,IAAMp3B,EACrB,OAAOngF,KAUX,OANA4oN,EAAG9jN,GAAO9D,KAAK,CACbu2G,EAAGp3B,EACHu/E,KAAK,EACLxrI,IAAKzc,GAAWzX,OAGXA,IACT,EAOAspF,SAAU,SAAUxkF,GAClB,IAAI8jN,EAAK5oN,KAAK2oN,WACd,OAAOC,EAAG9jN,IAAU8jN,EAAG9jN,GAAOqP,MAChC,EAOA+C,IAAK,SAAUpS,EAAOq7E,GACpB,IAAIyoI,EAAK5oN,KAAK2oN,WAEd,IAAK7jN,EAEH,OADA9E,KAAK2oN,WAAa,CAAC,EACZ3oN,KAGT,GAAImgF,EAAS,CACX,GAAIyoI,EAAG9jN,GAAQ,CAGb,IAFA,IAAI2qG,EAAU,GAELx5F,EAAI,EAAGotB,EAAIulL,EAAG9jN,GAAOqP,OAAQ8B,EAAIotB,EAAGptB,IACvC2yM,EAAG9jN,GAAOmR,GAAG,MAAQkqE,GACvBsvB,EAAQzuG,KAAK4nN,EAAG9jN,GAAOmR,IAI3B2yM,EAAG9jN,GAAS2qG,CACd,CAEIm5G,EAAG9jN,IAA+B,IAArB8jN,EAAG9jN,GAAOqP,eAClBy0M,EAAG9jN,EAEd,aACS8jN,EAAG9jN,GAGZ,OAAO9E,IACT,EAOAkW,QAAS,SAAUxT,GACjB,GAAI1C,KAAK2oN,WAAWjmN,GAAO,CACzB,IAAIgb,EAAO7N,UACPquH,EAASxgH,EAAKvJ,OAEd+pH,EAAS,IACXxgH,EAAOgrM,EAAU/wM,KAAK+F,EAAM,IAM9B,IAHA,IAAIkrM,EAAK5oN,KAAK2oN,WAAWjmN,GACrB8rB,EAAMo6L,EAAGz0M,OAEJ8B,EAAI,EAAGA,EAAIuY,GAAM,CAExB,OAAQ0vG,GACN,KAAK,EACH0qF,EAAG3yM,GAAG,KAAK0B,KAAKixM,EAAG3yM,GAAG,QAEtB,MAEF,KAAK,EACH2yM,EAAG3yM,GAAG,KAAK0B,KAAKixM,EAAG3yM,GAAG,OAAQyH,EAAK,IAEnC,MAEF,KAAK,EACHkrM,EAAG3yM,GAAG,KAAK0B,KAAKixM,EAAG3yM,GAAG,OAAQyH,EAAK,GAAIA,EAAK,IAE5C,MAEF,QAEEkrM,EAAG3yM,GAAG,KAAK6sD,MAAM8lJ,EAAG3yM,GAAG,OAAQyH,GAE/B,MAGAkrM,EAAG3yM,GAAG,QACR2yM,EAAGnpJ,OAAOxpD,EAAG,GAEbuY,KAEAvY,GAEJ,CACF,CAEA,OAAOjW,IACT,EAMA6oN,mBAAoB,SAAUnmN,GAC5B,GAAI1C,KAAK2oN,WAAWjmN,GAAO,CACzB,IAAIgb,EAAO7N,UACPquH,EAASxgH,EAAKvJ,OAEd+pH,EAAS,IACXxgH,EAAOgrM,EAAU/wM,KAAK+F,EAAM,EAAGA,EAAKvJ,OAAS,IAO/C,IAJA,IAAI+f,EAAMxW,EAAKA,EAAKvJ,OAAS,GACzBy0M,EAAK5oN,KAAK2oN,WAAWjmN,GACrB8rB,EAAMo6L,EAAGz0M,OAEJ8B,EAAI,EAAGA,EAAIuY,GAAM,CAExB,OAAQ0vG,GACN,KAAK,EACH0qF,EAAG3yM,GAAG,KAAK0B,KAAKuc,GAEhB,MAEF,KAAK,EACH00L,EAAG3yM,GAAG,KAAK0B,KAAKuc,EAAKxW,EAAK,IAE1B,MAEF,KAAK,EACHkrM,EAAG3yM,GAAG,KAAK0B,KAAKuc,EAAKxW,EAAK,GAAIA,EAAK,IAEnC,MAEF,QAEEkrM,EAAG3yM,GAAG,KAAK6sD,MAAM5uC,EAAKxW,GAEtB,MAGAkrM,EAAG3yM,GAAG,QACR2yM,EAAGnpJ,OAAOxpD,EAAG,GAEbuY,KAEAvY,GAEJ,CACF,CAEA,OAAOjW,IACT,GAuFF,IAAImD,EAAW6vG,EACf5vG,EAAOvB,QAAUsB,C,wBCvUjB,IAAI8gE,EAASxiE,EAAQ,OAEjBgtC,EAAShtC,EAAQ,OAOjBqnN,EAAY7kJ,EAAO2mB,SACnBq8G,EAAU,KAEd,SAAS4N,EAAgB12L,GACvB,OAAOA,EAAM8oL,GAAW9oL,GAAO8oL,CACjC,CAOA,IAAIhrD,EAAgB,SAAUl6G,GAC5BA,EAAOA,GAAQ,CAAC,EAEXA,EAAKr7B,WAMR1G,KAAK0G,SAAW,CAAC,EAAG,IAGD,MAAjBq7B,EAAK9vB,WAMPjS,KAAKiS,SAAW,GAGb8vB,EAAKt7B,QAMRzG,KAAKyG,MAAQ,CAAC,EAAG,IASnBzG,KAAKwkB,OAASxkB,KAAKwkB,QAAU,IAC/B,EAEIukM,EAAqB9sE,EAAc/5I,UACvC6mN,EAAmBlsL,UAAY,KAM/BksL,EAAmB3jC,mBAAqB,WACtC,OAAOyvB,EAAgB70M,KAAKiS,WAAa4iM,EAAgB70M,KAAK0G,SAAS,KAAOmuM,EAAgB70M,KAAK0G,SAAS,KAAOmuM,EAAgB70M,KAAKyG,MAAM,GAAK,IAAMouM,EAAgB70M,KAAKyG,MAAM,GAAK,EAC3L,EAEAsiN,EAAmBhiN,gBAAkB,WACnC,IAAIyE,EAASxL,KAAKwL,OACdw9M,EAAqBx9M,GAAUA,EAAOqxB,UACtCuoJ,EAAqBplL,KAAKolL,qBAC1BlsH,EAAIl5D,KAAK68B,UAEPuoJ,GAAsB4jC,GAK5B9vJ,EAAIA,GAAK+K,EAAO7hE,SAEZgjL,EACFplL,KAAK8qF,kBAAkB5xB,GAEvB4vJ,EAAU5vJ,GAIR8vJ,IACE5jC,EACFnhH,EAAO4mB,IAAI3xB,EAAG1tD,EAAOqxB,UAAWq8B,GAEhC+K,EAAOvkC,KAAKw5B,EAAG1tD,EAAOqxB,YAK1B78B,KAAK68B,UAAYq8B,EACjBl5D,KAAKm9I,aAAen9I,KAAKm9I,cAAgBl5E,EAAO7hE,SAChD6hE,EAAOm5E,OAAOp9I,KAAKm9I,aAAcjkF,IAxB/BA,GAAK4vJ,EAAU5vJ,EAyBnB,EAEA6vJ,EAAmBj+H,kBAAoB,SAAU5xB,GAC/C,OAAO+iF,EAAcnxD,kBAAkB9qF,KAAMk5D,EAC/C,EAOA6vJ,EAAmB5yB,aAAe,SAAUjiK,GAC1C,IAAIglC,EAAIl5D,KAAK68B,UACT2jI,EAAMtsI,EAAIssI,KAAO,EAEjBtnG,EACFhlC,EAAIiiK,aAAa31B,EAAMtnG,EAAE,GAAIsnG,EAAMtnG,EAAE,GAAIsnG,EAAMtnG,EAAE,GAAIsnG,EAAMtnG,EAAE,GAAIsnG,EAAMtnG,EAAE,GAAIsnG,EAAMtnG,EAAE,IAErFhlC,EAAIiiK,aAAa31B,EAAK,EAAG,EAAGA,EAAK,EAAG,EAExC,EAEAuoD,EAAmB1yB,iBAAmB,SAAUniK,GAC9C,IAAIssI,EAAMtsI,EAAIssI,KAAO,EACrBtsI,EAAIiiK,aAAa31B,EAAK,EAAG,EAAGA,EAAK,EAAG,EACtC,EAEA,IAAIyoD,EAAe,GAKnBF,EAAmBv/H,mBAAqB,WACtC,GAAKxpF,KAAK68B,UAAV,CAIA,IAAIrxB,EAASxL,KAAKwL,OACd0tD,EAAIl5D,KAAK68B,UAETrxB,GAAUA,EAAOqxB,YAEnBonC,EAAO4mB,IAAIo+H,EAAcz9M,EAAO2xI,aAAcjkF,GAC9CA,EAAI+vJ,GAGN,IAAIlc,EAAK7zI,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAC5B/G,EAAK+G,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAC5BxyD,EAAW1G,KAAK0G,SAChBD,EAAQzG,KAAKyG,MAEbouM,EAAgB9H,EAAK,KACvBA,EAAKvmM,KAAKgnD,KAAKu/I,IAGb8H,EAAgB1iJ,EAAK,KACvBA,EAAK3rD,KAAKgnD,KAAK2E,IAGb+G,EAAE,GAAK,IACT6zI,GAAMA,GAGJ7zI,EAAE,GAAK,IACT/G,GAAMA,GAGRzrD,EAAS,GAAKwyD,EAAE,GAChBxyD,EAAS,GAAKwyD,EAAE,GAChBzyD,EAAM,GAAKsmM,EACXtmM,EAAM,GAAK0rD,EACXnyD,KAAKiS,SAAWzL,KAAKo1B,OAAOs9B,EAAE,GAAK/G,EAAI+G,EAAE,GAAK6zI,EApC9C,CAqCF,EAOAgc,EAAmBhJ,eAAiB,WAClC,IAAI7mJ,EAAIl5D,KAAK68B,UAEb,IAAKq8B,EACH,MAAO,CAAC,EAAG,GAGb,IAAI6zI,EAAKvmM,KAAKgnD,KAAK0L,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IACtC/G,EAAK3rD,KAAKgnD,KAAK0L,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAU1C,OARIA,EAAE,GAAK,IACT6zI,GAAMA,GAGJ7zI,EAAE,GAAK,IACT/G,GAAMA,GAGD,CAAC46I,EAAI56I,EACd,EAUA42J,EAAmBt/I,sBAAwB,SAAUx9D,EAAGC,GACtD,IAAI2xB,EAAK,CAAC5xB,EAAGC,GACTixI,EAAen9I,KAAKm9I,aAMxB,OAJIA,GACF1uG,EAAO7R,eAAeiB,EAAIA,EAAIs/G,GAGzBt/G,CACT,EAUAkrL,EAAmBG,uBAAyB,SAAUj9M,EAAGC,GACvD,IAAI2xB,EAAK,CAAC5xB,EAAGC,GACT2wB,EAAY78B,KAAK68B,UAMrB,OAJIA,GACF4R,EAAO7R,eAAeiB,EAAIA,EAAIhB,GAGzBgB,CACT,EAWAo+G,EAAcnxD,kBAAoB,SAAUh1E,EAAQojD,GAClDA,EAAIA,GAAK,GACT4vJ,EAAU5vJ,GACV,IAAI10C,EAAS1O,EAAO0O,OAChB/d,EAAQqP,EAAOrP,OAAS,CAAC,EAAG,GAC5BwL,EAAW6D,EAAO7D,UAAY,EAC9BvL,EAAWoP,EAAOpP,UAAY,CAAC,EAAG,GAsBtC,OApBI8d,IAEF00C,EAAE,IAAM10C,EAAO,GACf00C,EAAE,IAAM10C,EAAO,IAGjBy/C,EAAOx9D,MAAMyyD,EAAGA,EAAGzyD,GAEfwL,GACFgyD,EAAOzX,OAAO0M,EAAGA,EAAGjnD,GAGlBuS,IAEF00C,EAAE,IAAM10C,EAAO,GACf00C,EAAE,IAAM10C,EAAO,IAGjB00C,EAAE,IAAMxyD,EAAS,GACjBwyD,EAAE,IAAMxyD,EAAS,GACVwyD,CACT,EAEA,IAAI/1D,EAAW84I,EACf74I,EAAOvB,QAAUsB,C,iCC1RjB,IAAIgmN,EAAQ1nN,EAAQ,OAEhB6+H,EAAgB6oF,EAAM7oF,cAEtB8oF,EAAQ3nN,EAAQ,OAEhBuyB,EAAOvyB,EAAQ,OAEf4+M,EAAS5+M,EAAQ,OAEjB4nN,EAAQ5nN,EAAQ,OAEhBwyM,EAAYxyM,EAAQ,OAEpB6nN,EAAkB7nN,EAAQ,OAE1B8nN,EAAkB9nN,EAAQ,OAE1Bs2D,EAAQt2D,EAAQ,OAEhBe,EAAOu1D,EAAMv1D,KAEb8d,EAAW7e,EAAQ,OAEnB+nN,EAAUlpM,EAAStL,KACnBy0M,EAAWnpM,EAASqD,MACpB+lM,EAAUppM,EAAShV,KAMvB,SAASiqL,EAAWp3K,GAClB,OAAOkvH,SAASlvH,EAAK,GACvB,CAEA,SAASwrM,EAAYlgN,GACnB,OAAIA,aAAcuqB,EACTw1L,EACE//M,aAAc42M,EAChBoJ,EACEhgN,aAAc4/M,EAChBK,EAEAF,CAEX,CAEA,SAASI,EAAqBp+M,EAAQgd,GACpC,OAAOA,GAAShd,GAAUgd,EAAMgnB,aAAehkC,CACjD,CAEA,SAASq+M,EAAYr+M,EAAQgd,EAAOshM,GAClC,GAAIF,EAAqBp+M,EAAQgd,IAAUshM,EAAa,CACtD,IAAItvB,EAAcsvB,EAAYtvB,YAC9BA,EAAchvL,EAAOivL,aAAajyK,EAAOgyK,GAAehvL,EAAOs1H,YAAYt4G,EAC7E,CACF,CAEA,SAASuhM,EAAQv+M,EAAQgd,GACvB,GAAIohM,EAAqBp+M,EAAQgd,GAAQ,CACvC,IAAIkyK,EAAalvL,EAAOkvL,WACxBA,EAAalvL,EAAOivL,aAAajyK,EAAOkyK,GAAclvL,EAAOs1H,YAAYt4G,EAC3E,CACF,CAQA,SAASte,EAAOsB,EAAQgd,GAClBA,GAAShd,GAAUgd,EAAMgnB,aAAehkC,GAC1CA,EAAO40H,YAAY53G,EAEvB,CAEA,SAASwhM,EAAkBx3B,GACzB,OAAOA,EAAYy3B,WACrB,CAEA,SAASC,EAAc13B,GACrB,OAAOA,EAAY23B,OACrB,CAMA,IAAIC,EAAa,SAAU1wJ,EAAM6N,GAC/BvnE,KAAK05D,KAAOA,EACZ15D,KAAKunE,QAAUA,EACf,IAAI8iJ,EAAU/pF,EAAc,OAC5B+pF,EAAQ3jD,aAAa,QAAS,8BAC9B2jD,EAAQ3jD,aAAa,UAAW,OAChC2jD,EAAQ3jD,aAAa,cAAe,QACpC2jD,EAAQh/M,MAAM,eAAiB,OAC/BrL,KAAKsqN,gBAAkB,IAAIhB,EAAgBe,GAC3CrqN,KAAKuqN,gBAAkB,IAAIhB,EAAgBc,GAC3C,IAAIG,EAAWnqF,SAASC,cAAc,OACtCkqF,EAASn/M,MAAMk1H,QAAU,oBACzBvgI,KAAKyqN,SAAWJ,EAChBrqN,KAAK0qN,UAAYF,EACjB9wJ,EAAKonE,YAAY0pF,GACjBA,EAAS1pF,YAAYupF,GACrBrqN,KAAKqmJ,SACLrmJ,KAAK2qN,aAAe,EACtB,EAyMA,SAASC,EAAuBtmN,GAC9B,OAAO,WACL8kN,EAAM,2CAA6C9kN,EAAS,IAC9D,CACF,CA3MA8lN,EAAWloN,UAAY,CACrBC,YAAaioN,EACb1lK,QAAS,WACP,MAAO,KACT,EACAgzI,gBAAiB,WACf,OAAO13L,KAAK0qN,SACd,EACAtiF,sBAAuB,WACrB,IAAIuvD,EAAe33L,KAAK03L,kBAExB,GAAIC,EACF,MAAO,CACLtvD,WAAYsvD,EAAatvD,YAAc,EACvCC,UAAWqvD,EAAarvD,WAAa,EAG3C,EACA4oD,QAAS,WACP,IAAIvuL,EAAO3C,KAAKunE,QAAQ8+C,gBAAe,GAEvCrmH,KAAK63L,WAAWl1L,EAClB,EACAk1L,WAAY,SAAUl1L,GACpB3C,KAAKsqN,gBAAgBO,gBACrB7qN,KAAKuqN,gBAAgBM,gBACrB,IAII50M,EAJAo0M,EAAUrqN,KAAKyqN,SACfK,EAAc9qN,KAAK2qN,aACnBI,EAAUpoN,EAAKwR,OACf62M,EAAiB,GAGrB,IAAK/0M,EAAI,EAAGA,EAAI80M,EAAS90M,IAAK,CAC5B,IAAIu8K,EAAc7vL,EAAKsT,GACnBg1M,EAAWtB,EAAYn3B,GAEtBA,EAAY3qH,YACX2qH,EAAY/iJ,UACdw7K,GAAYA,EAAS/mL,MAAMsuJ,GAE3BxyL,KAAKuqN,gBAAgB1nN,OAAO2vL,GAExBA,EAAYnnL,QACdrL,KAAKsqN,gBAAgBznN,OAAO2vL,EAAYnnL,MAAM4B,MAC9CjN,KAAKsqN,gBAAgBznN,OAAO2vL,EAAYnnL,MAAMqL,SAGhD87K,EAAY/iJ,SAAU,GAGxBu7K,EAAehqN,KAAKwxL,GAExB,CAEA,IACI04B,EADAhiN,EAAO+qM,EAAU6W,EAAaE,GAIlC,IAAK/0M,EAAI,EAAGA,EAAI/M,EAAKiL,OAAQ8B,IAAK,CAChC,IAAIqS,EAAOpf,EAAK+M,GAEhB,GAAIqS,EAAK+mL,QACP,IAAK,IAAIhtJ,EAAI,EAAGA,EAAI/5B,EAAKtR,MAAOqrC,IAAK,CAC/BmwI,EAAcs4B,EAAYxiM,EAAKgG,QAAQ+zB,IAA3C,IACI8oK,EAAajB,EAAc13B,GAC3B44B,EAAiBpB,EAAkBx3B,GACvCtoL,EAAOmgN,EAASc,GAChBjhN,EAAOmgN,EAASe,EAClB,CAEJ,CAEA,IAAKn1M,EAAI,EAAGA,EAAI/M,EAAKiL,OAAQ8B,IAAK,CAC5BqS,EAAOpf,EAAK+M,GAEhB,GAAIqS,EAAKyqL,MACP,IAAS1wJ,EAAI,EAAGA,EAAI/5B,EAAKtR,MAAOqrC,IAAK,CAC/BmwI,EAAcw4B,EAAe1iM,EAAKgG,QAAQ+zB,IAC1C8oK,EAAajB,EAAc13B,GAC3B44B,EAAiBpB,EAAkBx3B,GACvC04B,EAAiBrB,EAAYQ,EAASc,EAAYD,GAAkBnB,EAAQM,EAASc,GAEjFA,EACFtB,EAAYQ,EAASe,EAAgBD,GAC5BD,EACTrB,EAAYQ,EAASe,EAAgBF,GAErCnB,EAAQM,EAASe,GAInBvB,EAAYQ,EAASe,EAAgBD,GACrCD,EAAiBE,GAAkBD,GAAcD,EACjDlrN,KAAKsqN,gBAAgBe,iBAAiBF,EAAY34B,GAClDxyL,KAAKuqN,gBAAgBe,SAAS94B,EAChC,MACK,IAAKlqK,EAAK+mL,QACf,IAAShtJ,EAAI,EAAGA,EAAI/5B,EAAKtR,MAAOqrC,IAAK,CAC/BmwI,EAAcw4B,EAAe1iM,EAAKgG,QAAQ+zB,IAC9C6oK,EAAiBC,EAAanB,EAAkBx3B,IAAgB03B,EAAc13B,IAAgB04B,EAC9FlrN,KAAKsqN,gBAAgBgB,SAAS94B,GAC9BxyL,KAAKsqN,gBAAgBe,iBAAiBF,EAAY34B,GAClDxyL,KAAKuqN,gBAAgBe,SAAS94B,EAChC,CAEJ,CAEAxyL,KAAKsqN,gBAAgBiB,eACrBvrN,KAAKuqN,gBAAgBgB,eACrBvrN,KAAK2qN,aAAeK,CACtB,EACAQ,SAAU,SAAUC,GAClB,IAAIpB,EAAUrqN,KAAKyqN,SAEfiB,EAAO1rN,KAAKyqN,SAASkB,qBAAqB,QAE9C,GAAoB,IAAhBD,EAAKv3M,OAAc,CAErB,GAAIs3M,EAAiB,CACfC,EAAOrB,EAAQ5vB,aAAan6D,EAAc,QAC9C+pF,EAAQ3vB,YAsBR,OAnBKgxB,EAAKpoJ,WAERooJ,EAAKpoJ,SAAW,SAAU75D,GACxB,IAAIiO,EAAWg0M,EAAKh0M,SAEpB,IAAKA,EACH,OAAO,EAGT,IAAK,IAAIzB,EAAIyB,EAASvD,OAAS,EAAG8B,GAAK,IAAKA,EAC1C,GAAIyB,EAASzB,KAAOxM,EAClB,OAAO,EAIX,OAAO,CACT,GAGKiiN,CACT,CACE,OAAO,IAEX,CACE,OAAOA,EAAK,EAEhB,EACArlE,OAAQ,WACN,IAAI96I,EAAQvL,KAAK4rN,YAEb5/M,EAAShM,KAAK6rN,aAElB,GAAI7rN,KAAKk3L,SAAW3rL,GAASvL,KAAKm3L,UAAYnrL,EAAQ,CACpDhM,KAAKk3L,OAAS3rL,EACdvL,KAAKm3L,QAAUnrL,EACf,IAAI8/M,EAAgB9rN,KAAK0qN,UAAUr/M,MACnCygN,EAAcvgN,MAAQA,EAAQ,KAC9BugN,EAAc9/M,OAASA,EAAS,KAChC,IAAIq+M,EAAUrqN,KAAKyqN,SAEnBJ,EAAQ3jD,aAAa,QAASn7J,GAC9B8+M,EAAQ3jD,aAAa,SAAU16J,EACjC,CACF,EACAiF,SAAU,WACR,OAAOjR,KAAK4rN,WACd,EACA16M,UAAW,WACT,OAAOlR,KAAK6rN,YACd,EACAD,UAAW,WACT,IAAIlyJ,EAAO15D,KAAK05D,KACZ+tE,EAAMpH,SAASsH,YAAYC,iBAAiBluE,GAChD,OAAQA,EAAKwuE,aAAeqtD,EAAW9tD,EAAIl8H,QAAUgqL,EAAW9tD,EAAI6F,aAAeioD,EAAW9tD,EAAI8F,cAAgB,CACpH,EACAs+E,WAAY,WACV,IAAInyJ,EAAO15D,KAAK05D,KACZ+tE,EAAMpH,SAASsH,YAAYC,iBAAiBluE,GAChD,OAAQA,EAAKioE,cAAgB4zD,EAAW9tD,EAAIz7H,SAAWupL,EAAW9tD,EAAIiG,YAAc6nD,EAAW9tD,EAAIkG,eAAiB,CACtH,EACArlI,QAAS,WACPtI,KAAK05D,KAAK8mE,UAAY,GACtBxgI,KAAKyqN,SAAWzqN,KAAK0qN,UAAY1qN,KAAKunE,QAAU,IAClD,EACA3iB,MAAO,WACD5kD,KAAK0qN,WACP1qN,KAAK05D,KAAK0mE,YAAYpgI,KAAK0qN,UAE/B,EACA9pD,UAAW,WACT5gK,KAAKkxL,UACL,IAAI15J,EAAOx3B,KAAKyqN,SAASsB,UACzB,MAAO,0BAA4BC,SAASx0L,EAC9C,GAUFh1B,EAAK,CAAC,WAAY,cAAe,YAAa,mBAAoB,iBAAkB,YAAa,WAAY,WAAY,aAAc,YAAa,gBAAgB,SAAUgB,GAC5K4mN,EAAWloN,UAAUsB,GAAQonN,EAAuBpnN,EACtD,IACA,IAAIL,EAAWinN,EACfhnN,EAAOvB,QAAUsB,C,sBChUjB,IAAI8oN,EAAS,6BAEb,SAAS3rF,EAAc98H,GACrB,OAAO68H,SAAS6rF,gBAAgBD,EAAQzoN,EAC1C,CAEA3B,EAAQy+H,cAAgBA,C,iCCNxB,IAAI6oF,EAAQ1nN,EAAQ,OAEhB6+H,EAAgB6oF,EAAM7oF,cAEtBsmE,EAAYnlM,EAAQ,OAEpBuiE,EAAeviE,EAAQ,OAEvBgsD,EAAchsD,EAAQ,MAEtBshN,EAAathN,EAAQ,OAErBmiB,EAAOniB,EAAQ,OAKfulM,EAAMJ,EAAUI,IAChBmlB,EAAY9sL,MAAMn9B,UAAUqV,KAC5B60M,EAAO,OACPC,EAAY7lN,KAAK8R,MACjB8b,EAAU5tB,KAAK4sB,IACfe,EAAU3tB,KAAK0sB,IACfhhB,EAAK1L,KAAK0L,GACVmf,EAAgB,EAAV7qB,KAAK0L,GACX0iJ,EAAS,IAAM1iJ,EACf+0L,EAAU,KAEd,SAASqlB,EAAOnuM,GACd,OAAOkuM,EAAgB,IAANluM,GAAa,GAChC,CAEA,SAASy2L,EAAaz2L,GACpB,OAAOA,EAAM8oL,GAAW9oL,GAAO8oL,CACjC,CAEA,SAASslB,EAAYlhN,EAAOmhN,GAC1B,IAAIv/M,EAAOu/M,EAASnhN,EAAMuZ,SAAWvZ,EAAM4B,KAC3C,OAAe,MAARA,GAAgBA,IAASm/M,CAClC,CAEA,SAASK,EAAcphN,EAAOmhN,GAC5B,IAAI91M,EAAS81M,EAASnhN,EAAMwZ,WAAaxZ,EAAMqL,OAC/C,OAAiB,MAAVA,GAAkBA,IAAW01M,CACtC,CAEA,SAASj2B,EAAau2B,EAAOxzJ,GACvBA,GACF9rD,EAAKs/M,EAAO,YAAa,UAAYP,EAAUx0M,KAAKuhD,EAAG,KAAO,IAElE,CAEA,SAAS9rD,EAAK3D,EAAI9H,EAAKwc,KAChBA,GAAoB,WAAbA,EAAIzb,MAAkC,WAAbyb,EAAIzb,OAEvC+G,EAAGi9J,aAAa/kK,EAAKwc,EAEzB,CAEA,SAASwuM,EAAUljN,EAAI9H,EAAKwc,GAC1B1U,EAAGmjN,eAAe,+BAAgCjrN,EAAKwc,EACzD,CAEA,SAAS0uM,EAAUH,EAAOrhN,EAAOmhN,GAC/B,GAAID,EAAYlhN,EAAOmhN,GAAS,CAC9B,IAAIv/M,EAAOu/M,EAASnhN,EAAMuZ,SAAWvZ,EAAM4B,KAC3CA,EAAgB,gBAATA,EAAyBm/M,EAAOn/M,EAiBC,SAApCy/M,EAAM5lD,aAAa,cAA2B75J,IAASm/M,IACzDn/M,EAAO,wBAGTG,EAAKs/M,EAAO,OAAQz/M,GACpBG,EAAKs/M,EAAO,eAAgBrhN,EAAMoB,QACpC,MACEW,EAAKs/M,EAAO,OAAQN,GAGtB,GAAIK,EAAcphN,EAAOmhN,GAAS,CAChC,IAAI91M,EAAS81M,EAASnhN,EAAMwZ,WAAaxZ,EAAMqL,OAC/CA,EAAoB,gBAAXA,EAA2B01M,EAAO11M,EAC3CtJ,EAAKs/M,EAAO,SAAUh2M,GACtB,IAAIo2M,EAAcN,EAASnhN,EAAM62K,gBAAkB72K,EAAMmC,UACrDu/M,EAAc1hN,EAAM8J,cAAgB9J,EAAMmvK,KAAK5mK,eAAiB,EACpExG,EAAKs/M,EAAO,eAAgBI,EAAcC,GAC1C3/M,EAAKs/M,EAAO,cAAe,UAC3Bt/M,EAAKs/M,EAAO,iBAAkBrhN,EAAMoB,SACpC,IAAIkM,EAAWtN,EAAMsN,SAEjBA,GACFvL,EAAKs/M,EAAO,mBAAoBrhN,EAAMsN,SAASpB,KAAK,MACpDnK,EAAKs/M,EAAO,oBAAqBL,EAAUhhN,EAAMk2M,gBAAkB,KAEnEn0M,EAAKs/M,EAAO,mBAAoB,IAIlCrhN,EAAMo8E,SAAWr6E,EAAKs/M,EAAO,iBAAkBrhN,EAAMo8E,SACrDp8E,EAAMwhB,UAAYzf,EAAKs/M,EAAO,kBAAmBrhN,EAAMwhB,UACvDxhB,EAAM2hN,YAAc5/M,EAAKs/M,EAAO,oBAAqBrhN,EAAM2hN,WAC7D,MACE5/M,EAAKs/M,EAAO,SAAUN,EAE1B,CAMA,SAASa,EAAiBj4M,GAKxB,IAJA,IAAIopH,EAAM,GACNx9H,EAAOoU,EAAKpU,KACZssN,EAAal4M,EAAKwZ,MAEbvY,EAAI,EAAGA,EAAIi3M,GAAa,CAC/B,IAAIrtK,EAAMj/C,EAAKqV,KACXk3M,EAAS,GACTC,EAAQ,EAEZ,OAAQvtK,GACN,KAAKmnJ,EAAIjrG,EACPoxH,EAAS,IACTC,EAAQ,EACR,MAEF,KAAKpmB,EAAIuB,EACP4kB,EAAS,IACTC,EAAQ,EACR,MAEF,KAAKpmB,EAAIyB,EACP0kB,EAAS,IACTC,EAAQ,EACR,MAEF,KAAKpmB,EAAIwB,EACP2kB,EAAS,IACTC,EAAQ,EACR,MAEF,KAAKpmB,EAAI0B,EACP,IAAIv8L,EAAKvL,EAAKqV,KACV7J,EAAKxL,EAAKqV,KACV0yL,EAAK/nM,EAAKqV,KACV2yL,EAAKhoM,EAAKqV,KACV4yL,EAAQjoM,EAAKqV,KACb6yL,EAASloM,EAAKqV,KACdm8L,EAAMxxM,EAAKqV,KACXia,EAAYtvB,EAAKqV,KACjBo3M,EAAiB7mN,KAAKiH,IAAIq7L,GAC1BwkB,EAAW1Y,EAAayY,EAAiBh8L,KAASujL,EAAayY,GAC/DrpK,GAAQ,EAGVA,EADEqpK,GAAkBh8L,IAEXujL,EAAayY,KAGbvkB,GAAU52L,GAAM42L,EAAS,GAAKA,EAAS52L,OAAUge,EAG5D,IAAIP,EAAK28L,EAAOngN,EAAKw8L,EAAKx0K,EAAQ00K,IAC9Bz6J,EAAKk+K,EAAOlgN,EAAKw8L,EAAKx0K,EAAQy0K,IAI9BykB,IAEAxkB,EADE54K,EACOmB,EAAM,KAEC,KAANA,EAGZ2yB,GAAQ,EAEE,IAAN/tC,GAMFmoH,EAAIp9H,KAAK,IAAK2uB,EAAIye,IAItB,IAAIniC,EAAIqgN,EAAOngN,EAAKw8L,EAAKx0K,EAAQ00K,EAAQC,IACrC58L,EAAIogN,EAAOlgN,EAAKw8L,EAAKx0K,EAAQy0K,EAAQC,IAEzC1qE,EAAIp9H,KAAK,IAAKsrN,EAAO3jB,GAAK2jB,EAAO1jB,GAAKyjB,EAAUja,EAAMx9C,IAAU5wG,GAAQ9zB,EAAWjkB,EAAGC,GACtF,MAEF,KAAK86L,EAAIgC,EACPmkB,EAAS,IACT,MAEF,KAAKnmB,EAAI+B,EACH98L,EAAIqgN,EAAO1rN,EAAKqV,MAChB/J,EAAIogN,EAAO1rN,EAAKqV,MADpB,IAEIwsB,EAAI6pL,EAAO1rN,EAAKqV,MAChBshG,EAAI+0G,EAAO1rN,EAAKqV,MACpBmoH,EAAIp9H,KAAK,IAAKiL,EAAGC,EAAG,IAAKD,EAAIw2B,EAAGv2B,EAAG,IAAKD,EAAIw2B,EAAGv2B,EAAIqrG,EAAG,IAAKtrG,EAAGC,EAAIqrG,EAAG,IAAKtrG,EAAGC,GAC7E,MAGJihN,GAAU/uF,EAAIp9H,KAAKmsN,GAEnB,IAAK,IAAI75L,EAAI,EAAGA,EAAI85L,EAAO95L,IAEzB8qG,EAAIp9H,KAAKsrN,EAAO1rN,EAAKqV,MAEzB,CAEA,OAAOmoH,EAAI7mH,KAAK,IAClB,CAEA,IAAIiyM,EAAU,CAEdA,MAAgB,SAAU//M,GACxB,IAAI4B,EAAQ5B,EAAG4B,MACXqhN,EAAQjjN,EAAG0gN,QAEVuC,IACHA,EAAQpsF,EAAc,QACtB72H,EAAG0gN,QAAUuC,GAGVjjN,EAAGuL,MACNvL,EAAGu2M,kBAGL,IAAIhrM,EAAOvL,EAAGuL,KAEd,GAAIvL,EAAGq2M,YAAa,CAClB9qM,EAAKuwB,YACL97B,EAAGwqB,UAAUjf,EAAMvL,EAAGQ,OACtBR,EAAGq2M,aAAc,EACjB,IAAIyN,EAAUN,EAAiBj4M,GAE3Bu4M,EAAQpxM,QAAQ,OAAS,GAG3B/O,EAAKs/M,EAAO,IAAKa,EAErB,CAEAV,EAAUH,EAAOrhN,GACjB8qL,EAAau2B,EAAOjjN,EAAGozB,WAEL,MAAdxxB,EAAMC,MACRkiN,EAAoB/jN,EAAIA,EAAGkzB,kBAE/B,GAMI8sL,EAAW,CAEfA,MAAiB,SAAUhgN,GACzB,IAAI4B,EAAQ5B,EAAG4B,MACXsY,EAAQtY,EAAMsY,MAElB,GAAIA,aAAiB8pM,iBAAkB,CACrC,IAAInN,EAAM38L,EAAM28L,IAChB38L,EAAQ28L,CACV,CAEA,GAAK38L,EAAL,CAIA,IAAI1X,EAAIZ,EAAMY,GAAK,EACfC,EAAIb,EAAMa,GAAK,EACfwhN,EAAKriN,EAAME,MACXoiN,EAAKtiN,EAAMW,OACX0gN,EAAQjjN,EAAG0gN,QAEVuC,IACHA,EAAQpsF,EAAc,SACtB72H,EAAG0gN,QAAUuC,GAGX/oM,IAAUla,EAAGmkN,aACfjB,EAAUD,EAAO,OAAQ/oM,GAEzBla,EAAGmkN,WAAajqM,GAGlBvW,EAAKs/M,EAAO,QAASgB,GACrBtgN,EAAKs/M,EAAO,SAAUiB,GACtBvgN,EAAKs/M,EAAO,IAAKzgN,GACjBmB,EAAKs/M,EAAO,IAAKxgN,GACjBiqL,EAAau2B,EAAOjjN,EAAGozB,WAEL,MAAdxxB,EAAMC,MACRkiN,EAAoB/jN,EAAIA,EAAGkzB,kBA1B7B,CA4BF,GAMI+sL,EAAU,CAAC,EACX7zB,EAAU,IAAI7xH,EAEdwpJ,EAAsB,SAAU/jN,EAAIiB,EAAMwkD,GAC5C,IAAI7jD,EAAQ5B,EAAG4B,MACf5B,EAAGgmC,SAAWszK,EAAWC,mBAAmB33M,GAAO,GACnD,IAAIC,EAAOD,EAAMC,KAEjB,GAAY,MAARA,EAAJ,CAIEA,GAAQ,GAGV,IAwBIW,EACAC,EAzBA2hN,EAAYpkN,EAAGwgN,YASnB,GAPK4D,IACHA,EAAYvtF,EAAc,QAC1B72H,EAAGwgN,YAAc4D,GAGnBhB,EAAUgB,EAAWxiN,GAAO,GAExB5B,aAAcma,GAAQna,EAAG4B,MAAMm3M,cAEjCrsB,EAAa03B,EAAWpkN,EAAGozB,gBAE3B,GAAIpzB,EAAGozB,UACLg5J,EAAQn2J,KAAKh1B,GACbmrL,EAAQj5J,eAAenzB,EAAGozB,WAC1BnyB,EAAOmrL,MACF,CACL,IAAIn6J,EAAMjyB,EAAGy/M,uBAAuBx+M,EAAKuB,EAAGvB,EAAKwB,GACjDxB,EAAKuB,EAAIyvB,EAAI,GACbhxB,EAAKwB,EAAIwvB,EAAI,EACf,CAKF,IAAIpiB,EAAejO,EAAMiO,aACrBkX,EAAWnlB,EAAMmgK,aACjBtxF,EAAQ7uE,EAAMkiB,WAAa,OAED,kBAAnBliB,EAAMulB,WACfvlB,EAAMulB,UAAY,MAGpB,IAAI1K,EAAO7a,EAAM6a,MAAQ,CAAC7a,EAAM6lC,WAAa,GAAI7lC,EAAM8lC,YAAc,GAAI9lC,EAAMulB,UAAY,GAAIvlB,EAAM+lC,YAAc,IAAI75B,KAAK,MAAQk2C,EAAY+7I,aAC5I/7K,EAAgBqgM,EAAuBziN,EAAMmiB,mBACjD0hC,EAAWzB,EAAY9wB,gBAAgBrxB,EAAM4a,EAAMg0D,EAAOzsD,GAC1D,IAAIw8K,EAAa/6I,EAAS+6I,WAE1B,GAAI3wL,aAAwB+lB,MAC1BpzB,EAAIvB,EAAKuB,EAAIqN,EAAa,GAC1BpN,EAAIxB,EAAKwB,EAAIoN,EAAa,OACrB,CACL,IAAIu5L,EAASplJ,EAAY08I,yBAAyB7wL,EAAc5O,EAAM8lB,GACtEvkB,EAAI4mM,EAAO5mM,EACXC,EAAI2mM,EAAO3mM,EACXuhB,EAAgBqgM,EAAuBjb,EAAOrlL,mBAC9C0sD,EAAQ24H,EAAOtlL,SACjB,CAEAngB,EAAKygN,EAAW,qBAAsBpgM,GAElCvH,IACF2nM,EAAUxiN,MAAM6a,KAAOA,GAGzB,IAAIu8J,EAAcp3K,EAAMo3K,YAExBr1K,EAAKygN,EAAW,IAAK5hN,GACrBmB,EAAKygN,EAAW,IAAK3hN,GACrB,IAAIu9L,EAAYn+L,EAAKu2B,MAAM,MACvBksL,EAAatkB,EAAUt1L,OACvB65M,EAAa9zI,EAEE,SAAf8zI,GACFA,EAAa,QACbvrC,IAAgBx2K,GAAKw2K,EAAY,KACT,UAAfurC,GACTA,EAAa,MACbvrC,IAAgBx2K,GAAKw2K,EAAY,KACT,WAAfurC,IACTA,EAAa,SACbvrC,IAAgBx2K,IAAMw2K,EAAY,GAAKA,EAAY,IAAM,IAG3D,IAAIx8K,EAAK,EAaT,GAXsB,aAAlBwnB,GACFxnB,GAAMipD,EAASljD,OAASi+L,EACxBxnB,IAAgBx8K,GAAMw8K,EAAY,KACP,WAAlBh1J,GACTxnB,IAAOipD,EAASljD,OAASi+L,GAAc,EACvCxnB,IAAgBv2K,IAAMu2K,EAAY,GAAKA,EAAY,IAAM,IAEzDA,IAAgBx8K,GAAMw8K,EAAY,IAIhCh5K,EAAGwkN,SAAW3iN,GAAQ7B,EAAGykN,aAAehoM,EAAM,CAChD,IAAIioM,EAAY1kN,EAAG2kN,aAAe,GAClC3kN,EAAG2kN,YAAcD,EAEjB,IAAK,IAAIl4M,EAAI,EAAGA,EAAI83M,EAAY93M,IAAK,CAEnC,IAAIo4M,EAAQF,EAAUl4M,GAEjBo4M,EAMHA,EAAM7tF,UAAY,IALlB6tF,EAAQF,EAAUl4M,GAAKqqH,EAAc,SACrCutF,EAAU/sF,YAAYutF,GACtBjhN,EAAKihN,EAAO,qBAAsB5gM,GAClCrgB,EAAKihN,EAAO,cAAeL,IAK7B5gN,EAAKihN,EAAO,IAAKpiN,GACjBmB,EAAKihN,EAAO,IAAKniN,EAAI+J,EAAIg0L,EAAahkM,GACtCooN,EAAMvtF,YAAYT,SAASiuF,eAAe7kB,EAAUxzL,IACtD,CAGA,KAAOA,EAAIk4M,EAAUh6M,OAAQ8B,IAC3B43M,EAAUztF,YAAY+tF,EAAUl4M,IAGlCk4M,EAAUh6M,OAAS45M,EACnBtkN,EAAGwkN,OAAS3iN,EACZ7B,EAAGykN,WAAahoM,CAClB,MAAO,GAAIzc,EAAG2kN,YAAYj6M,OAExB,KAAIqa,EAAM/kB,EAAG2kN,YAAYj6M,OAEzB,IAAS8B,EAAI,EAAGA,EAAIuY,IAAOvY,EAAG,CACxBo4M,EAAQ5kN,EAAG2kN,YAAYn4M,GAEvBo4M,IACFjhN,EAAKihN,EAAO,IAAKpiN,GACjBmB,EAAKihN,EAAO,IAAKniN,EAAI+J,EAAIg0L,EAAahkM,GAE1C,CAT+B,CA1HjC,CAqIF,EAEA,SAAS6nN,EAAuBrgM,GAC9B,MAAsB,WAAlBA,EACK,SACoB,WAAlBA,EACF,WAEA,SAEX,CAEAi8L,EAAQ/I,aAAe6M,EAEvB9D,EAAQxlL,MAAQ,SAAUz6B,GACxB,IAAI4B,EAAQ5B,EAAG4B,MAEG,MAAdA,EAAMC,OAERD,EAAMiO,aAAe,CAAC,EAAG,GACzBk0M,EAAoB/jN,EAAI,CACtBwC,EAAGZ,EAAMY,GAAK,EACdC,EAAGb,EAAMa,GAAK,EACdX,MAAO,EACPS,OAAQ,GACPvC,EAAGkzB,mBAEV,EAEA96B,EAAQmT,KAAOw0M,EACf3nN,EAAQ8hB,MAAQ8lM,EAChB5nN,EAAQyJ,KAAOo+M,C,wBChff,IAAI6E,EAAY9sN,EAAQ,OAEpBK,EAASL,EAAQ,OAEjBwiE,EAASxiE,EAAQ,OAcrB,SAAS8nN,EAAgBc,GACvBkE,EAAU52M,KAAK3X,KAAMqqN,EAAS,WAAY,sBAC5C,CAEAvoN,EAAO6rB,SAAS47L,EAAiBgF,GAOjChF,EAAgBrnN,UAAUW,OAAS,SAAU2vL,GAC3C,IAAIk6B,EAAQ1sN,KAAKkqN,cAAc13B,GAE3Bk6B,GACF1sN,KAAKwuN,UAAU9B,EAAOl6B,EAAY+F,aAAa,GAGjD,IAAI1yG,EAAS7lF,KAAKgqN,kBAAkBx3B,GAEhC3sG,GAGF7lF,KAAKwuN,UAAU3oI,EAAQ2sG,EAAY+F,aAAa,GAGlDv4L,KAAKsrN,SAAS94B,EAChB,EAWA+2B,EAAgBrnN,UAAUssN,UAAY,SAAU57G,EAAUojF,EAAWw2B,GACnE,GAAIx2B,GAAaA,EAAU7hL,OAAS,EAAG,CAErC,IAEIs6M,EACApoM,EAHAqlM,EAAO1rN,KAAK0uN,SAAQ,GACpB93M,EAAWo/K,EAAU,GAGrB53B,EAAMouD,EAAS,WAAa,OAE5B51M,EAASwnJ,IAEX/3I,EAAKzP,EAASwnJ,GAAK0I,aAAa,MAChC2nD,EAAa73M,EAASwnJ,GAEjBstD,EAAKpoJ,SAASmrJ,IAGjB/C,EAAK5qF,YAAY2tF,KAInBpoM,EAAK,WAAarmB,KAAK2uN,SACrB3uN,KAAK2uN,OACPF,EAAazuN,KAAKsgI,cAAc,YAChCmuF,EAAW/nD,aAAa,KAAMrgJ,GAC9BqlM,EAAK5qF,YAAY2tF,GACjB73M,EAASwnJ,GAAOqwD,GAIlB,IAAIxD,EAAWjrN,KAAK2pN,YAAY/yM,GAEhC,GAAIA,EAASimB,WAAajmB,EAASpL,OAAO2xI,eAAiBqvE,EAAQ,CASjE,IAAI3vL,EAAYwC,MAAMn9B,UAAUc,MAAM2U,KAAKf,EAASimB,WAEpDonC,EAAO4mB,IAAIj0E,EAASimB,UAAWjmB,EAASpL,OAAO2xI,aAAcvmI,EAASimB,WACtEouL,EAAS/mL,MAAMttB,GAEfA,EAASimB,UAAYA,CACvB,MACEouL,EAAS/mL,MAAMttB,GAGjB,IAAIg4M,EAAS5uN,KAAKkqN,cAActzM,GAQhC63M,EAAW3tF,YAAY8tF,EAAOC,aAC9Bj8G,EAAS8zD,aAAa,YAAa,QAAUrgJ,EAAK,KAE9C2vK,EAAU7hL,OAAS,GAErBnU,KAAKwuN,UAAUC,EAAYz4B,EAAUhzL,MAAM,GAAIwpN,EAEnD,MAEM55G,GACFA,EAAS8zD,aAAa,YAAa,OAGzC,EAQA6iD,EAAgBrnN,UAAUopN,SAAW,SAAU94B,GAC7C,IAAIs8B,EAAO9uN,KAEPwyL,EAAY+F,aAAe/F,EAAY+F,YAAYpkL,OAAS,GAC9DrS,EAAOU,KAAKgwL,EAAY+F,aAAa,SAAU3hL,GACzCA,EAAS2oH,MACXgvF,EAAUrsN,UAAUopN,SAAS3zM,KAAKm3M,EAAMl4M,EAAS2oH,MAG/C3oH,EAASm4M,UACXR,EAAUrsN,UAAUopN,SAAS3zM,KAAKm3M,EAAMl4M,EAASm4M,SAErD,GAEJ,EAEA,IAAI5rN,EAAWomN,EACfnmN,EAAOvB,QAAUsB,C,wBCzJjB,IAAIgmN,EAAQ1nN,EAAQ,OAEhB6+H,EAAgB6oF,EAAM7oF,cAEtBx+H,EAASL,EAAQ,OAEjBuyB,EAAOvyB,EAAQ,OAEf4+M,EAAS5+M,EAAQ,OAEjB4nN,EAAQ5nN,EAAQ,OAEhB6e,EAAW7e,EAAQ,OAEnB+nN,EAAUlpM,EAAStL,KACnBy0M,EAAWnpM,EAASqD,MACpB+lM,EAAUppM,EAAShV,KAOnB0jN,EAAc,IACdC,EAAY,IAYhB,SAASV,EAAUlE,EAAS6E,EAAUC,GACpCnvN,KAAKyqN,SAAWJ,EAChBrqN,KAAKovN,UAAgC,kBAAbF,EAAwB,CAACA,GAAYA,EAC7DlvN,KAAKqvN,WAAaF,EAClBnvN,KAAK2uN,OAAS,CAChB,CAEAJ,EAAUrsN,UAAUo+H,cAAgBA,EASpCiuF,EAAUrsN,UAAUwsN,QAAU,SAAUjD,GACtC,IAAIpB,EAAUrqN,KAAKyqN,SAEfiB,EAAO1rN,KAAKyqN,SAASkB,qBAAqB,QAE9C,OAAoB,IAAhBD,EAAKv3M,OAEHs3M,GACFC,EAAOrB,EAAQ5vB,aAAaz6L,KAAKsgI,cAAc,QAC/C+pF,EAAQ3vB,YAGHgxB,EAAKpoJ,WAERooJ,EAAKpoJ,SAAW,SAAU75D,GACxB,IAAIiO,EAAWg0M,EAAKh0M,SAEpB,IAAKA,EACH,OAAO,EAGT,IAAK,IAAIzB,EAAIyB,EAASvD,OAAS,EAAG8B,GAAK,IAAKA,EAC1C,GAAIyB,EAASzB,KAAOxM,EAClB,OAAO,EAIX,OAAO,CACT,GAGKiiN,GAEA,KAGFA,EAAK,EAEhB,EAUA6C,EAAUrsN,UAAUW,OAAS,SAAUsoE,EAASmsD,GAC9C,GAAKnsD,EAAL,CAIA,IAAIugJ,EAAO1rN,KAAK0uN,SAAQ,GAExB,GAAIvjJ,EAAQo0D,MAAQmsF,EAAKpoJ,SAAS6H,EAAQo0D,MAEhB,oBAAbjI,GACTA,QAEG,CAEL,IAAI8mC,EAAMp+J,KAAKmJ,IAAIgiE,GAEfizF,IACFjzF,EAAQo0D,KAAO6+B,EAEnB,CAhBA,CAiBF,EAQAmwD,EAAUrsN,UAAUotN,OAAS,SAAUlxD,GACrC,IAAIstD,EAAO1rN,KAAK0uN,SAAQ,GACxBhD,EAAK5qF,YAAYs9B,EACnB,EAQAmwD,EAAUrsN,UAAUqtN,UAAY,SAAUpkJ,GACxC,IAAIugJ,EAAO1rN,KAAK0uN,SAAQ,GACxBhD,EAAKtrF,YAAYj1D,EAAQo0D,KAC3B,EAQAgvF,EAAUrsN,UAAUstN,QAAU,WAC5B,IAAI9D,EAAO1rN,KAAK0uN,SAAQ,GAExB,IAAKhD,EAEH,MAAO,GAGT,IAAI+D,EAAO,GAQX,OAPA3tN,EAAOU,KAAKxC,KAAKovN,WAAW,SAAUM,GACpC,IAAIC,EAAOjE,EAAKC,qBAAqB+D,GAIrCD,EAAOA,EAAK7sN,OAAO,GAAGI,MAAM2U,KAAKg4M,GACnC,IACOF,CACT,EAOAlB,EAAUrsN,UAAU2oN,cAAgB,WAClC,IAAI4E,EAAOzvN,KAAKwvN,UACZV,EAAO9uN,KACX8B,EAAOU,KAAKitN,GAAM,SAAUrxD,GAC1BA,EAAI0wD,EAAKO,YAAcL,CACzB,GACF,EAQAT,EAAUrsN,UAAUopN,SAAW,SAAUltD,GACnCA,IACFA,EAAIp+J,KAAKqvN,YAAcJ,EAE3B,EAMAV,EAAUrsN,UAAUqpN,aAAe,WACjC,IAAIG,EAAO1rN,KAAK0uN,SAAQ,GAExB,GAAKhD,EAAL,CAKA,IAAI+D,EAAOzvN,KAAKwvN,UACZV,EAAO9uN,KACX8B,EAAOU,KAAKitN,GAAM,SAAUrxD,GACtBA,EAAI0wD,EAAKO,cAAgBJ,GAE3BvD,EAAKtrF,YAAYg+B,EAErB,GATA,CAUF,EASAmwD,EAAUrsN,UAAUynN,YAAc,SAAUn3B,GAC1C,OAAIA,aAAuBx+J,EAClBw1L,EACEh3B,aAAuB6tB,EACzBoJ,EACEj3B,aAAuB62B,EACzBK,EAEAF,CAEX,EASA+E,EAAUrsN,UAAU8nN,kBAAoB,SAAUx3B,GAChD,OAAOA,EAAYy3B,WACrB,EASAsE,EAAUrsN,UAAUgoN,cAAgB,SAAU13B,GAC5C,OAAOA,EAAY23B,OACrB,EAEA,IAAIhnN,EAAWorN,EACfnrN,EAAOvB,QAAUsB,C,wBClQjB,IAAIorN,EAAY9sN,EAAQ,OAEpBK,EAASL,EAAQ,OAEjB2nN,EAAQ3nN,EAAQ,OAcpB,SAAS6nN,EAAgBe,GACvBkE,EAAU52M,KAAK3X,KAAMqqN,EAAS,CAAC,iBAAkB,kBAAmB,sBACtE,CAEAvoN,EAAO6rB,SAAS27L,EAAiBiF,GASjCjF,EAAgBpnN,UAAUmpN,iBAAmB,SAAUF,EAAY34B,GACjE,GAAIA,GAAeA,EAAYnnL,MAAO,CACpC,IAAIyjN,EAAO9uN,KACX8B,EAAOU,KAAK,CAAC,OAAQ,WAAW,SAAUs8K,GACxC,GAAI0T,EAAYnnL,MAAMyzK,KAA2D,WAAzC0T,EAAYnnL,MAAMyzK,GAAcp8K,MAA8D,WAAzC8vL,EAAYnnL,MAAMyzK,GAAcp8K,MAAoB,CAC/I,IAGI07J,EAHAl5H,EAAWstJ,EAAYnnL,MAAMyzK,GAC7B4sC,EAAOoD,EAAKJ,SAAQ,GAIpBxpL,EAASq6F,MAEX6+B,EAAMl5H,EAASq6F,KAEVmsF,EAAKpoJ,SAASp+B,EAASq6F,OAE1BuvF,EAAKQ,OAAOlxD,IAIdA,EAAM0wD,EAAK3lN,IAAI+7B,GAGjB4pL,EAAKxD,SAAS94B,GACd,IAAInsK,EAAK+3I,EAAI0I,aAAa,MAC1BqkD,EAAWzkD,aAAaoY,EAAc,QAAUz4J,EAAK,IACvD,CACF,GACF,CACF,EAUAijM,EAAgBpnN,UAAUiH,IAAM,SAAU+7B,GACxC,IAAIk5H,EAEJ,GAAsB,WAAlBl5H,EAASxiC,KACX07J,EAAMp+J,KAAKsgI,cAAc,sBACpB,IAAsB,WAAlBp7F,EAASxiC,KAIlB,OADA0mN,EAAM,0BACC,KAHPhrD,EAAMp+J,KAAKsgI,cAAc,iBAI3B,CAWA,OAJAp7F,EAAS7e,GAAK6e,EAAS7e,IAAMrmB,KAAK2uN,SAClCvwD,EAAIsI,aAAa,KAAM,eAAiBxhI,EAAS7e,IACjDrmB,KAAKwuN,UAAUtpL,EAAUk5H,GACzBp+J,KAAKsvN,OAAOlxD,GACLA,CACT,EAQAkrD,EAAgBpnN,UAAUW,OAAS,SAAUqiC,GAC3C,IAAI4pL,EAAO9uN,KACXuuN,EAAUrsN,UAAUW,OAAO8U,KAAK3X,KAAMklC,GAAU,WAC9C,IAAIxiC,EAAOwiC,EAASxiC,KAChBgtN,EAAUxqL,EAASq6F,KAAKmwF,QAEf,WAAThtN,GAAiC,mBAAZgtN,GAAyC,WAAThtN,GAAiC,mBAAZgtN,EAE5EZ,EAAKN,UAAUtpL,EAAUA,EAASq6F,OAGlCuvF,EAAKS,UAAUrqL,GACf4pL,EAAK3lN,IAAI+7B,GAEb,GACF,EAUAokL,EAAgBpnN,UAAUssN,UAAY,SAAUtpL,EAAUk5H,GACxD,GAAsB,WAAlBl5H,EAASxiC,KACX07J,EAAIsI,aAAa,KAAMxhI,EAASj5B,GAChCmyJ,EAAIsI,aAAa,KAAMxhI,EAASh5B,GAChCkyJ,EAAIsI,aAAa,KAAMxhI,EAASjW,IAChCmvI,EAAIsI,aAAa,KAAMxhI,EAAS/V,QAC3B,IAAsB,WAAlB+V,EAASxiC,KAMlB,YADA0mN,EAAM,0BAJNhrD,EAAIsI,aAAa,KAAMxhI,EAASj5B,GAChCmyJ,EAAIsI,aAAa,KAAMxhI,EAASh5B,GAChCkyJ,EAAIsI,aAAa,IAAKxhI,EAASz5B,EAIjC,CAEIy5B,EAASgwG,OAEXkpB,EAAIsI,aAAa,gBAAiB,kBAGlCtI,EAAIsI,aAAa,gBAAiB,qBAIpCtI,EAAI59B,UAAY,GAIhB,IAFA,IAAIovF,EAAS1qL,EAASiY,WAEblnC,EAAI,EAAGuY,EAAMohM,EAAOz7M,OAAQ8B,EAAIuY,IAAOvY,EAAG,CACjD,IAAIonC,EAAOr9C,KAAKsgI,cAAc,QAC9BjjF,EAAKqpH,aAAa,SAA6B,IAAnBkpD,EAAO35M,GAAGhI,OAAe,KACrDovC,EAAKqpH,aAAa,aAAckpD,EAAO35M,GAAG1J,OAC1C6xJ,EAAIt9B,YAAYzjF,EAClB,CAIAnY,EAASq6F,KAAO6+B,CAClB,EAQAkrD,EAAgBpnN,UAAUopN,SAAW,SAAU94B,GAC7C,GAAIA,EAAYnnL,MAAO,CACrB,IAAI65B,EAAWstJ,EAAYnnL,MAAM4B,KAE7Bi4B,GAAYA,EAASq6F,MACvBgvF,EAAUrsN,UAAUopN,SAAS3zM,KAAK3X,KAAMklC,EAASq6F,MAGnDr6F,EAAWstJ,EAAYnnL,MAAMqL,OAEzBwuB,GAAYA,EAASq6F,MACvBgvF,EAAUrsN,UAAUopN,SAAS3zM,KAAK3X,KAAMklC,EAASq6F,KAErD,CACF,EAEA,IAAIp8H,EAAWmmN,EACflmN,EAAOvB,QAAUsB,C,wBC5LjB1B,EAAQ,OAER,IAAIouN,EAAWpuN,EAAQ,OAEnBquN,EAAkBD,EAASC,gBAE3Bt5B,EAAU/0L,EAAQ,OAEtBquN,EAAgB,MAAOt5B,E,gCCRvB,IAAIsY,EAAMrtM,EAAQ,OAEdsuN,EAAiB,CACnB,YAAe,CAAC,EAAG,EAAG,EAAG,GACzB,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,aAAgB,CAAC,IAAK,IAAK,IAAK,GAChC,KAAQ,CAAC,EAAG,IAAK,IAAK,GACtB,WAAc,CAAC,IAAK,IAAK,IAAK,GAC9B,MAAS,CAAC,IAAK,IAAK,IAAK,GACzB,MAAS,CAAC,IAAK,IAAK,IAAK,GACzB,OAAU,CAAC,IAAK,IAAK,IAAK,GAC1B,MAAS,CAAC,EAAG,EAAG,EAAG,GACnB,eAAkB,CAAC,IAAK,IAAK,IAAK,GAClC,KAAQ,CAAC,EAAG,EAAG,IAAK,GACpB,WAAc,CAAC,IAAK,GAAI,IAAK,GAC7B,MAAS,CAAC,IAAK,GAAI,GAAI,GACvB,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,UAAa,CAAC,GAAI,IAAK,IAAK,GAC5B,WAAc,CAAC,IAAK,IAAK,EAAG,GAC5B,UAAa,CAAC,IAAK,IAAK,GAAI,GAC5B,MAAS,CAAC,IAAK,IAAK,GAAI,GACxB,eAAkB,CAAC,IAAK,IAAK,IAAK,GAClC,SAAY,CAAC,IAAK,IAAK,IAAK,GAC5B,QAAW,CAAC,IAAK,GAAI,GAAI,GACzB,KAAQ,CAAC,EAAG,IAAK,IAAK,GACtB,SAAY,CAAC,EAAG,EAAG,IAAK,GACxB,SAAY,CAAC,EAAG,IAAK,IAAK,GAC1B,cAAiB,CAAC,IAAK,IAAK,GAAI,GAChC,SAAY,CAAC,IAAK,IAAK,IAAK,GAC5B,UAAa,CAAC,EAAG,IAAK,EAAG,GACzB,SAAY,CAAC,IAAK,IAAK,IAAK,GAC5B,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,YAAe,CAAC,IAAK,EAAG,IAAK,GAC7B,eAAkB,CAAC,GAAI,IAAK,GAAI,GAChC,WAAc,CAAC,IAAK,IAAK,EAAG,GAC5B,WAAc,CAAC,IAAK,GAAI,IAAK,GAC7B,QAAW,CAAC,IAAK,EAAG,EAAG,GACvB,WAAc,CAAC,IAAK,IAAK,IAAK,GAC9B,aAAgB,CAAC,IAAK,IAAK,IAAK,GAChC,cAAiB,CAAC,GAAI,GAAI,IAAK,GAC/B,cAAiB,CAAC,GAAI,GAAI,GAAI,GAC9B,cAAiB,CAAC,GAAI,GAAI,GAAI,GAC9B,cAAiB,CAAC,EAAG,IAAK,IAAK,GAC/B,WAAc,CAAC,IAAK,EAAG,IAAK,GAC5B,SAAY,CAAC,IAAK,GAAI,IAAK,GAC3B,YAAe,CAAC,EAAG,IAAK,IAAK,GAC7B,QAAW,CAAC,IAAK,IAAK,IAAK,GAC3B,QAAW,CAAC,IAAK,IAAK,IAAK,GAC3B,WAAc,CAAC,GAAI,IAAK,IAAK,GAC7B,UAAa,CAAC,IAAK,GAAI,GAAI,GAC3B,YAAe,CAAC,IAAK,IAAK,IAAK,GAC/B,YAAe,CAAC,GAAI,IAAK,GAAI,GAC7B,QAAW,CAAC,IAAK,EAAG,IAAK,GACzB,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,WAAc,CAAC,IAAK,IAAK,IAAK,GAC9B,KAAQ,CAAC,IAAK,IAAK,EAAG,GACtB,UAAa,CAAC,IAAK,IAAK,GAAI,GAC5B,KAAQ,CAAC,IAAK,IAAK,IAAK,GACxB,MAAS,CAAC,EAAG,IAAK,EAAG,GACrB,YAAe,CAAC,IAAK,IAAK,GAAI,GAC9B,KAAQ,CAAC,IAAK,IAAK,IAAK,GACxB,SAAY,CAAC,IAAK,IAAK,IAAK,GAC5B,QAAW,CAAC,IAAK,IAAK,IAAK,GAC3B,UAAa,CAAC,IAAK,GAAI,GAAI,GAC3B,OAAU,CAAC,GAAI,EAAG,IAAK,GACvB,MAAS,CAAC,IAAK,IAAK,IAAK,GACzB,MAAS,CAAC,IAAK,IAAK,IAAK,GACzB,SAAY,CAAC,IAAK,IAAK,IAAK,GAC5B,cAAiB,CAAC,IAAK,IAAK,IAAK,GACjC,UAAa,CAAC,IAAK,IAAK,EAAG,GAC3B,aAAgB,CAAC,IAAK,IAAK,IAAK,GAChC,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,WAAc,CAAC,IAAK,IAAK,IAAK,GAC9B,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,qBAAwB,CAAC,IAAK,IAAK,IAAK,GACxC,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,WAAc,CAAC,IAAK,IAAK,IAAK,GAC9B,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,YAAe,CAAC,IAAK,IAAK,IAAK,GAC/B,cAAiB,CAAC,GAAI,IAAK,IAAK,GAChC,aAAgB,CAAC,IAAK,IAAK,IAAK,GAChC,eAAkB,CAAC,IAAK,IAAK,IAAK,GAClC,eAAkB,CAAC,IAAK,IAAK,IAAK,GAClC,eAAkB,CAAC,IAAK,IAAK,IAAK,GAClC,YAAe,CAAC,IAAK,IAAK,IAAK,GAC/B,KAAQ,CAAC,EAAG,IAAK,EAAG,GACpB,UAAa,CAAC,GAAI,IAAK,GAAI,GAC3B,MAAS,CAAC,IAAK,IAAK,IAAK,GACzB,QAAW,CAAC,IAAK,EAAG,IAAK,GACzB,OAAU,CAAC,IAAK,EAAG,EAAG,GACtB,iBAAoB,CAAC,IAAK,IAAK,IAAK,GACpC,WAAc,CAAC,EAAG,EAAG,IAAK,GAC1B,aAAgB,CAAC,IAAK,GAAI,IAAK,GAC/B,aAAgB,CAAC,IAAK,IAAK,IAAK,GAChC,eAAkB,CAAC,GAAI,IAAK,IAAK,GACjC,gBAAmB,CAAC,IAAK,IAAK,IAAK,GACnC,kBAAqB,CAAC,EAAG,IAAK,IAAK,GACnC,gBAAmB,CAAC,GAAI,IAAK,IAAK,GAClC,gBAAmB,CAAC,IAAK,GAAI,IAAK,GAClC,aAAgB,CAAC,GAAI,GAAI,IAAK,GAC9B,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,SAAY,CAAC,IAAK,IAAK,IAAK,GAC5B,YAAe,CAAC,IAAK,IAAK,IAAK,GAC/B,KAAQ,CAAC,EAAG,EAAG,IAAK,GACpB,QAAW,CAAC,IAAK,IAAK,IAAK,GAC3B,MAAS,CAAC,IAAK,IAAK,EAAG,GACvB,UAAa,CAAC,IAAK,IAAK,GAAI,GAC5B,OAAU,CAAC,IAAK,IAAK,EAAG,GACxB,UAAa,CAAC,IAAK,GAAI,EAAG,GAC1B,OAAU,CAAC,IAAK,IAAK,IAAK,GAC1B,cAAiB,CAAC,IAAK,IAAK,IAAK,GACjC,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,cAAiB,CAAC,IAAK,IAAK,IAAK,GACjC,cAAiB,CAAC,IAAK,IAAK,IAAK,GACjC,WAAc,CAAC,IAAK,IAAK,IAAK,GAC9B,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,KAAQ,CAAC,IAAK,IAAK,GAAI,GACvB,KAAQ,CAAC,IAAK,IAAK,IAAK,GACxB,KAAQ,CAAC,IAAK,IAAK,IAAK,GACxB,WAAc,CAAC,IAAK,IAAK,IAAK,GAC9B,OAAU,CAAC,IAAK,EAAG,IAAK,GACxB,IAAO,CAAC,IAAK,EAAG,EAAG,GACnB,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,UAAa,CAAC,GAAI,IAAK,IAAK,GAC5B,YAAe,CAAC,IAAK,GAAI,GAAI,GAC7B,OAAU,CAAC,IAAK,IAAK,IAAK,GAC1B,WAAc,CAAC,IAAK,IAAK,GAAI,GAC7B,SAAY,CAAC,GAAI,IAAK,GAAI,GAC1B,SAAY,CAAC,IAAK,IAAK,IAAK,GAC5B,OAAU,CAAC,IAAK,GAAI,GAAI,GACxB,OAAU,CAAC,IAAK,IAAK,IAAK,GAC1B,QAAW,CAAC,IAAK,IAAK,IAAK,GAC3B,UAAa,CAAC,IAAK,GAAI,IAAK,GAC5B,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,UAAa,CAAC,IAAK,IAAK,IAAK,GAC7B,KAAQ,CAAC,IAAK,IAAK,IAAK,GACxB,YAAe,CAAC,EAAG,IAAK,IAAK,GAC7B,UAAa,CAAC,GAAI,IAAK,IAAK,GAC5B,IAAO,CAAC,IAAK,IAAK,IAAK,GACvB,KAAQ,CAAC,EAAG,IAAK,IAAK,GACtB,QAAW,CAAC,IAAK,IAAK,IAAK,GAC3B,OAAU,CAAC,IAAK,GAAI,GAAI,GACxB,UAAa,CAAC,GAAI,IAAK,IAAK,GAC5B,OAAU,CAAC,IAAK,IAAK,IAAK,GAC1B,MAAS,CAAC,IAAK,IAAK,IAAK,GACzB,MAAS,CAAC,IAAK,IAAK,IAAK,GACzB,WAAc,CAAC,IAAK,IAAK,IAAK,GAC9B,OAAU,CAAC,IAAK,IAAK,EAAG,GACxB,YAAe,CAAC,IAAK,IAAK,GAAI,IAGhC,SAASC,EAAa/5M,GAIpB,OAFAA,EAAIzP,KAAK8R,MAAMrC,GAERA,EAAI,EAAI,EAAIA,EAAI,IAAM,IAAMA,CACrC,CAEA,SAASg6M,EAAch6M,GAIrB,OAFAA,EAAIzP,KAAK8R,MAAMrC,GAERA,EAAI,EAAI,EAAIA,EAAI,IAAM,IAAMA,CACrC,CAEA,SAASi6M,EAAcp7J,GAErB,OAAOA,EAAI,EAAI,EAAIA,EAAI,EAAI,EAAIA,CACjC,CAEA,SAASq7J,EAAY/xF,GAEnB,OAAIA,EAAIjqH,QAAyC,MAA/BiqH,EAAIr6G,OAAOq6G,EAAIjqH,OAAS,GACjC67M,EAAahhG,WAAWoP,GAAO,IAAM,KAGvC4xF,EAAa3iF,SAASjP,EAAK,IACpC,CAEA,SAASgyF,EAAchyF,GAErB,OAAIA,EAAIjqH,QAAyC,MAA/BiqH,EAAIr6G,OAAOq6G,EAAIjqH,OAAS,GACjC+7M,EAAclhG,WAAWoP,GAAO,KAGlC8xF,EAAclhG,WAAWoP,GAClC,CAEA,SAASiyF,EAAYtY,EAAIC,EAAIzgG,GAO3B,OANIA,EAAI,EACNA,GAAK,EACIA,EAAI,IACbA,GAAK,GAGC,EAAJA,EAAQ,EACHwgG,GAAMC,EAAKD,GAAMxgG,EAAI,EAGtB,EAAJA,EAAQ,EACHygG,EAGD,EAAJzgG,EAAQ,EACHwgG,GAAMC,EAAKD,IAAO,EAAI,EAAIxgG,GAAK,EAGjCwgG,CACT,CAEA,SAASuY,EAAW7hM,EAAGC,EAAGtQ,GACxB,OAAOqQ,GAAKC,EAAID,GAAKrQ,CACvB,CAEA,SAASmyM,EAAQ/iC,EAAK/hL,EAAGy4K,EAAGx1J,EAAGD,GAK7B,OAJA++J,EAAI,GAAK/hL,EACT+hL,EAAI,GAAKtJ,EACTsJ,EAAI,GAAK9+J,EACT8+J,EAAI,GAAK/+J,EACF++J,CACT,CAEA,SAASgjC,EAAShjC,EAAK/+J,GAKrB,OAJA++J,EAAI,GAAK/+J,EAAE,GACX++J,EAAI,GAAK/+J,EAAE,GACX++J,EAAI,GAAK/+J,EAAE,GACX++J,EAAI,GAAK/+J,EAAE,GACJ++J,CACT,CAEA,IAAIijC,EAAa,IAAI3hB,EAAI,IACrB4hB,EAAiB,KAErB,SAASC,EAAWC,EAAUC,GAExBH,GACFF,EAASE,EAAgBG,GAG3BH,EAAiBD,EAAWrhB,IAAIwhB,EAAUF,GAAkBG,EAAQ7tN,QACtE,CASA,SAAS0Q,EAAMk9M,EAAUC,GACvB,GAAKD,EAAL,CAIAC,EAAUA,GAAW,GACrB,IAAIC,EAASL,EAAWvtN,IAAI0tN,GAE5B,GAAIE,EACF,OAAON,EAASK,EAASC,GAI3BF,GAAsB,GAEtB,IAAIxyF,EAAMwyF,EAASx/L,QAAQ,KAAM,IAAI2yH,cAErC,GAAI3lB,KAAO2xF,EAGT,OAFAS,EAASK,EAASd,EAAe3xF,IACjCuyF,EAAWC,EAAUC,GACdA,EAIT,GAAsB,MAAlBzyF,EAAIr6G,OAAO,GAAf,CA4BA,IAAIgtM,EAAK3yF,EAAIjiH,QAAQ,KACjB60M,EAAK5yF,EAAIjiH,QAAQ,KAErB,IAAY,IAAR40M,GAAaC,EAAK,IAAM5yF,EAAIjqH,OAAQ,CACtC,IAAI88M,EAAQ7yF,EAAIw/C,OAAO,EAAGmzC,GACtBlmM,EAASuzG,EAAIw/C,OAAOmzC,EAAK,EAAGC,GAAMD,EAAK,IAAIlvL,MAAM,KACjD2C,EAAQ,EAEZ,OAAQysL,GACN,IAAK,OACH,GAAsB,IAAlBpmM,EAAO1W,OAET,YADAo8M,EAAQM,EAAS,EAAG,EAAG,EAAG,GAI5BrsL,EAAQ4rL,EAAcvlM,EAAOguB,OAI/B,IAAK,MACH,OAAsB,IAAlBhuB,EAAO1W,YACTo8M,EAAQM,EAAS,EAAG,EAAG,EAAG,IAI5BN,EAAQM,EAASV,EAAYtlM,EAAO,IAAKslM,EAAYtlM,EAAO,IAAKslM,EAAYtlM,EAAO,IAAK2Z,GACzFmsL,EAAWC,EAAUC,GACdA,GAET,IAAK,OACH,OAAsB,IAAlBhmM,EAAO1W,YACTo8M,EAAQM,EAAS,EAAG,EAAG,EAAG,IAI5BhmM,EAAO,GAAKulM,EAAcvlM,EAAO,IACjCqmM,EAAUrmM,EAAQgmM,GAClBF,EAAWC,EAAUC,GACdA,GAET,IAAK,MACH,OAAsB,IAAlBhmM,EAAO1W,YACTo8M,EAAQM,EAAS,EAAG,EAAG,EAAG,IAI5BK,EAAUrmM,EAAQgmM,GAClBF,EAAWC,EAAUC,GACdA,GAET,QACE,OAEN,CAEAN,EAAQM,EAAS,EAAG,EAAG,EAAG,EAzD1B,KA1BA,CACE,GAAmB,IAAfzyF,EAAIjqH,OAAc,CACpB,IAAIg9M,EAAK9jF,SAASjP,EAAIw/C,OAAO,GAAI,IAEjC,OAAMuzC,GAAM,GAAKA,GAAM,MAKvBZ,EAAQM,GAAe,KAALM,IAAe,GAAU,KAALA,IAAe,EAAQ,IAALA,GAAkB,IAALA,IAAc,EAAQ,GAALA,GAAiB,GAALA,IAAa,EAAG,GAClHR,EAAWC,EAAUC,GACdA,QANLN,EAAQM,EAAS,EAAG,EAAG,EAAG,EAO9B,CAAO,GAAmB,IAAfzyF,EAAIjqH,OAAc,CACvBg9M,EAAK9jF,SAASjP,EAAIw/C,OAAO,GAAI,IAEjC,OAAMuzC,GAAM,GAAKA,GAAM,UAKvBZ,EAAQM,GAAe,SAALM,IAAkB,IAAU,MAALA,IAAgB,EAAQ,IAALA,EAAW,GACvER,EAAWC,EAAUC,GACdA,QANLN,EAAQM,EAAS,EAAG,EAAG,EAAG,EAO9B,CAGF,CA/CA,CA0GF,CAQA,SAASK,EAAUE,EAAMpwB,GACvB,IAAIzpF,GAAKyX,WAAWoiG,EAAK,IAAM,IAAM,KAAO,IAAM,IAI9C59G,EAAI48G,EAAcgB,EAAK,IACvB/tL,EAAI+sL,EAAcgB,EAAK,IACvBpZ,EAAK30K,GAAK,GAAMA,GAAKmwE,EAAI,GAAKnwE,EAAImwE,EAAInwE,EAAImwE,EAC1CukG,EAAS,EAAJ10K,EAAQ20K,EAQjB,OAPAhX,EAAOA,GAAQ,GACfuvB,EAAQvvB,EAAMgvB,EAA8C,IAAjCK,EAAYtY,EAAIC,EAAIzgG,EAAI,EAAI,IAAWy4G,EAAsC,IAAzBK,EAAYtY,EAAIC,EAAIzgG,IAAWy4G,EAA8C,IAAjCK,EAAYtY,EAAIC,EAAIzgG,EAAI,EAAI,IAAW,GAE9I,IAAhB65G,EAAKj9M,SACP6sL,EAAK,GAAKowB,EAAK,IAGVpwB,CACT,CAOA,SAASqwB,EAAUrwB,GACjB,GAAKA,EAAL,CAKA,IAUIswB,EACAC,EAXAxoB,EAAI/H,EAAK,GAAK,IACdwwB,EAAIxwB,EAAK,GAAK,IACdgU,EAAIhU,EAAK,GAAK,IACdywB,EAAOjrN,KAAKJ,IAAI2iM,EAAGyoB,EAAGxc,GAEtB0c,EAAOlrN,KAAKF,IAAIyiM,EAAGyoB,EAAGxc,GAEtBpnJ,EAAQ8jK,EAAOD,EAEflpB,GAAKmpB,EAAOD,GAAQ,EAIxB,GAAc,IAAV7jK,EACF0jK,EAAI,EACJC,EAAI,MACC,CAEHA,EADEhpB,EAAI,GACF36I,GAAS8jK,EAAOD,GAEhB7jK,GAAS,EAAI8jK,EAAOD,GAG1B,IAAIE,IAAWD,EAAO3oB,GAAK,EAAIn7I,EAAQ,GAAKA,EACxCgkK,IAAWF,EAAOF,GAAK,EAAI5jK,EAAQ,GAAKA,EACxCikK,IAAWH,EAAO1c,GAAK,EAAIpnJ,EAAQ,GAAKA,EAExCm7I,IAAM2oB,EACRJ,EAAIO,EAASD,EACJJ,IAAME,EACfJ,EAAI,EAAI,EAAIK,EAASE,EACZ7c,IAAM0c,IACfJ,EAAI,EAAI,EAAIM,EAASD,GAGnBL,EAAI,IACNA,GAAK,GAGHA,EAAI,IACNA,GAAK,EAET,CAEA,IAAIF,EAAO,CAAK,IAAJE,EAASC,EAAGhpB,GAMxB,OAJe,MAAXvH,EAAK,IACPowB,EAAKpwN,KAAKggM,EAAK,IAGVowB,CArDP,CAsDF,CASA,SAASpyC,EAAKzyK,EAAO4sK,GACnB,IAAIhX,EAAWzuJ,EAAMnH,GAErB,GAAI41J,EAAU,CACZ,IAAK,IAAIlsJ,EAAI,EAAGA,EAAI,EAAGA,IAEnBksJ,EAASlsJ,GADPkjK,EAAQ,EACIhX,EAASlsJ,IAAM,EAAIkjK,GAAS,GAE3B,IAAMhX,EAASlsJ,IAAMkjK,EAAQhX,EAASlsJ,GAAK,EAI9D,OAAOmsJ,EAAUD,EAA8B,IAApBA,EAAShuJ,OAAe,OAAS,MAC9D,CACF,CAQA,SAASuyH,EAAMn6H,GACb,IAAI41J,EAAWzuJ,EAAMnH,GAErB,GAAI41J,EACF,QAAS,GAAK,KAAOA,EAAS,IAAM,KAAOA,EAAS,IAAM,KAAMA,EAAS,IAAI8lB,SAAS,IAAIjlL,MAAM,EAEpG,CAUA,SAAS0qL,EAASokC,EAAiBlC,EAAQpiC,GACzC,GAAMoiC,GAAUA,EAAOz7M,QAAa29M,GAAmB,GAAKA,GAAmB,EAA/E,CAIAtkC,EAAMA,GAAO,GACb,IAAIz/K,EAAQ+jN,GAAmBlC,EAAOz7M,OAAS,GAC3C+yM,EAAY1gN,KAAKy+B,MAAMl3B,GACvBs5M,EAAa7gN,KAAK+R,KAAKxK,GACvBgkN,EAAYnC,EAAO1I,GACnB8K,EAAapC,EAAOvI,GACpB4K,EAAKlkN,EAAQm5M,EAKjB,OAJA15B,EAAI,GAAKwiC,EAAaM,EAAWyB,EAAU,GAAIC,EAAW,GAAIC,IAC9DzkC,EAAI,GAAKwiC,EAAaM,EAAWyB,EAAU,GAAIC,EAAW,GAAIC,IAC9DzkC,EAAI,GAAKwiC,EAAaM,EAAWyB,EAAU,GAAIC,EAAW,GAAIC,IAC9DzkC,EAAI,GAAK0iC,EAAcI,EAAWyB,EAAU,GAAIC,EAAW,GAAIC,IACxDzkC,CAbP,CAcF,CAMA,IAAI0kC,EAAiBxkC,EAUrB,SAASliJ,EAAKsmL,EAAiBlC,EAAQuC,GACrC,GAAMvC,GAAUA,EAAOz7M,QAAa29M,GAAmB,GAAKA,GAAmB,EAA/E,CAIA,IAAI/jN,EAAQ+jN,GAAmBlC,EAAOz7M,OAAS,GAC3C+yM,EAAY1gN,KAAKy+B,MAAMl3B,GACvBs5M,EAAa7gN,KAAK+R,KAAKxK,GACvBgkN,EAAYr+M,EAAMk8M,EAAO1I,IACzB8K,EAAat+M,EAAMk8M,EAAOvI,IAC1B4K,EAAKlkN,EAAQm5M,EACb36M,EAAQ61J,EAAU,CAAC4tD,EAAaM,EAAWyB,EAAU,GAAIC,EAAW,GAAIC,IAAMjC,EAAaM,EAAWyB,EAAU,GAAIC,EAAW,GAAIC,IAAMjC,EAAaM,EAAWyB,EAAU,GAAIC,EAAW,GAAIC,IAAM/B,EAAcI,EAAWyB,EAAU,GAAIC,EAAW,GAAIC,KAAO,QACrQ,OAAOE,EAAa,CAClB5lN,MAAOA,EACP26M,UAAWA,EACXG,WAAYA,EACZt5M,MAAOA,GACLxB,CAdJ,CAeF,CAMA,IAAI6lN,EAAa5mL,EAUjB,SAASsnC,EAAUvmE,EAAOgrG,EAAG/D,EAAGnwE,GAG9B,GAFA92B,EAAQmH,EAAMnH,GAEVA,EAKF,OAJAA,EAAQ8kN,EAAU9kN,GACb,MAALgrG,IAAchrG,EAAM,GAAK0jN,EAAc14G,IAClC,MAAL/D,IAAcjnG,EAAM,GAAK6jN,EAAc58G,IAClC,MAALnwE,IAAc92B,EAAM,GAAK6jN,EAAc/sL,IAChC++H,EAAU8uD,EAAU3kN,GAAQ,OAEvC,CASA,SAASwmE,EAAYxmE,EAAOi4B,GAG1B,GAFAj4B,EAAQmH,EAAMnH,GAEVA,GAAkB,MAATi4B,EAEX,OADAj4B,EAAM,GAAK2jN,EAAc1rL,GAClB49H,EAAU71J,EAAO,OAE5B,CAQA,SAAS61J,EAAUiwD,EAAU3vN,GAC3B,GAAK2vN,GAAaA,EAASl+M,OAA3B,CAIA,IAAIy8M,EAAWyB,EAAS,GAAK,IAAMA,EAAS,GAAK,IAAMA,EAAS,GAMhE,MAJa,SAAT3vN,GAA4B,SAATA,GAA4B,SAATA,IACxCkuN,GAAY,IAAMyB,EAAS,IAGtB3vN,EAAO,IAAMkuN,EAAW,GAR/B,CASF,CAEA/uN,EAAQ6R,MAAQA,EAChB7R,EAAQm9K,KAAOA,EACfn9K,EAAQ6kI,MAAQA,EAChB7kI,EAAQ6rL,SAAWA,EACnB7rL,EAAQqwN,eAAiBA,EACzBrwN,EAAQ2pC,KAAOA,EACf3pC,EAAQuwN,WAAaA,EACrBvwN,EAAQixE,UAAYA,EACpBjxE,EAAQkxE,YAAcA,EACtBlxE,EAAQugK,UAAYA,C,iCC5mBpB,IAAIpuI,EAAOvyB,EAAQ,OAEfmlM,EAAYnlM,EAAQ,OAEpB6wN,EAAgB7wN,EAAQ,MAGxB8wN,EAAK,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrGhjB,EAAW/oM,KAAKgnD,KAChBp5B,EAAU5tB,KAAK4sB,IACfe,EAAU3tB,KAAK0sB,IACfhhB,EAAK1L,KAAK0L,GAEVsgN,EAAO,SAAUrzL,GACnB,OAAO34B,KAAKgnD,KAAKruB,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAC1C,EAEIszL,EAAS,SAAUC,EAAGvzL,GACxB,OAAQuzL,EAAE,GAAKvzL,EAAE,GAAKuzL,EAAE,GAAKvzL,EAAE,KAAOqzL,EAAKE,GAAKF,EAAKrzL,GACvD,EAEIwzL,EAAS,SAAUD,EAAGvzL,GACxB,OAAQuzL,EAAE,GAAKvzL,EAAE,GAAKuzL,EAAE,GAAKvzL,EAAE,IAAM,EAAI,GAAK34B,KAAKgvM,KAAKid,EAAOC,EAAGvzL,GACpE,EAEA,SAASyzL,EAAW7jM,EAAIC,EAAIC,EAAIE,EAAI0jM,EAAIxgB,EAAI1J,EAAIC,EAAIkqB,EAAQjzK,EAAK7qC,GAC/D,IAAIo9L,EAAM0gB,GAAU5gN,EAAK,KACrB6gN,EAAK5+L,EAAQi+K,IAAQrjL,EAAKE,GAAM,EAAMmF,EAAQg+K,IAAQpjL,EAAKG,GAAM,EACjE6jM,GAAM,EAAI5+L,EAAQg+K,IAAQrjL,EAAKE,GAAM,EAAMkF,EAAQi+K,IAAQpjL,EAAKG,GAAM,EACtE8jM,EAASF,EAAKA,GAAMpqB,EAAKA,GAAMqqB,EAAKA,GAAMpqB,EAAKA,GAE/CqqB,EAAS,IACXtqB,GAAM4G,EAAS0jB,GACfrqB,GAAM2G,EAAS0jB,IAGjB,IAAIn+J,GAAK+9J,IAAOxgB,GAAM,EAAI,GAAK9C,GAAU5G,EAAKA,GAAMC,EAAKA,GAAMD,EAAKA,GAAMqqB,EAAKA,GAAMpqB,EAAKA,GAAMmqB,EAAKA,KAAQpqB,EAAKA,GAAMqqB,EAAKA,GAAMpqB,EAAKA,GAAMmqB,EAAKA,MAAS,EACxJG,EAAMp+J,EAAI6zI,EAAKqqB,EAAKpqB,EACpBuqB,EAAMr+J,GAAK8zI,EAAKmqB,EAAKpqB,EACrBx8L,GAAM4iB,EAAKE,GAAM,EAAMkF,EAAQi+K,GAAO8gB,EAAM9+L,EAAQg+K,GAAO+gB,EAC3D/mN,GAAM4iB,EAAKG,GAAM,EAAMiF,EAAQg+K,GAAO8gB,EAAM/+L,EAAQi+K,GAAO+gB,EAC3DtqB,EAAQ8pB,EAAO,CAAC,EAAG,GAAI,EAAEI,EAAKG,GAAOvqB,GAAKqqB,EAAKG,GAAOvqB,IACtD8pB,EAAI,EAAEK,EAAKG,GAAOvqB,GAAKqqB,EAAKG,GAAOvqB,GACnCzpK,EAAI,GAAG,EAAI4zL,EAAKG,GAAOvqB,IAAM,EAAIqqB,EAAKG,GAAOvqB,GAC7CE,EAAS6pB,EAAOD,EAAGvzL,GAEnBszL,EAAOC,EAAGvzL,KAAO,IACnB2pK,EAAS52L,GAGPugN,EAAOC,EAAGvzL,IAAM,IAClB2pK,EAAS,GAGA,IAAPuJ,GAAYvJ,EAAS,IACvBA,GAAkB,EAAI52L,GAGb,IAAPmgM,GAAYvJ,EAAS,IACvBA,GAAkB,EAAI52L,GAGxB8C,EAAKw7L,QAAQ3wJ,EAAK1zC,EAAIC,EAAIu8L,EAAIC,EAAIC,EAAOC,EAAQsJ,EAAKC,EACxD,CAEA,SAAS+gB,EAA0BxyN,GACjC,IAAKA,EACH,MAAO,GAIT,IACIohC,EADAqxL,EAAKzyN,EAAKwwB,QAAQ,KAAM,MAAMA,QAAQ,MAAO,KAAKA,QAAQ,KAAM,KAAKA,QAAQ,MAAO,KAGxF,IAAK4Q,EAAI,EAAGA,EAAIuwL,EAAGp+M,OAAQ6tB,IACzBqxL,EAAKA,EAAGjiM,QAAQ,IAAIstG,OAAO6zF,EAAGvwL,GAAI,KAAM,IAAMuwL,EAAGvwL,IAInD,IAMIsxL,EANA9/H,EAAM6/H,EAAGxxL,MAAM,KAEf0xL,EAAM,EACNC,EAAM,EACNx+M,EAAO,IAAI4xL,EACXI,EAAMJ,EAAUI,IAGpB,IAAKhlK,EAAI,EAAGA,EAAIwxD,EAAIr/E,OAAQ6tB,IAAK,CAC/B,IAII6d,EAJAu+E,EAAM5qC,EAAIxxD,GACVqpH,EAAIjtB,EAAIr6G,OAAO,GACf7M,EAAM,EACNkH,EAAIggH,EAAIp7H,MAAM,GAAGouB,QAAQ,OAAQ,MAAMyQ,MAAM,KAG7CzjB,EAAEjK,OAAS,GAAc,KAATiK,EAAE,IACpBA,EAAEg/C,QAGJ,IAAK,IAAInnD,EAAI,EAAGA,EAAImI,EAAEjK,OAAQ8B,IAC5BmI,EAAEnI,GAAK+4G,WAAW5wG,EAAEnI,IAGtB,MAAOiB,EAAMkH,EAAEjK,SAAWkK,MAAMD,EAAElH,IAAO,CACvC,GAAImH,MAAMD,EAAE,IACV,MAGF,IAAIq1M,EACAC,EACA/qB,EACAC,EACAwJ,EACAygB,EACAxgB,EACAtjL,EAAKwkM,EACLvkM,EAAKwkM,EAET,OAAQnoE,GACN,IAAK,IACHkoE,GAAOn1M,EAAElH,KACTs8M,GAAOp1M,EAAElH,KACT2oC,EAAMmnJ,EAAIuB,EACVvzL,EAAKw7L,QAAQ3wJ,EAAK0zK,EAAKC,GACvB,MAEF,IAAK,IACHD,EAAMn1M,EAAElH,KACRs8M,EAAMp1M,EAAElH,KACR2oC,EAAMmnJ,EAAIuB,EACVvzL,EAAKw7L,QAAQ3wJ,EAAK0zK,EAAKC,GACvB,MAEF,IAAK,IACHD,GAAOn1M,EAAElH,KACTs8M,GAAOp1M,EAAElH,KACT2oC,EAAMmnJ,EAAIjrG,EACV/mF,EAAKw7L,QAAQ3wJ,EAAK0zK,EAAKC,GACvBnoE,EAAI,IACJ,MAEF,IAAK,IACHkoE,EAAMn1M,EAAElH,KACRs8M,EAAMp1M,EAAElH,KACR2oC,EAAMmnJ,EAAIjrG,EACV/mF,EAAKw7L,QAAQ3wJ,EAAK0zK,EAAKC,GACvBnoE,EAAI,IACJ,MAEF,IAAK,IACHkoE,GAAOn1M,EAAElH,KACT2oC,EAAMmnJ,EAAIuB,EACVvzL,EAAKw7L,QAAQ3wJ,EAAK0zK,EAAKC,GACvB,MAEF,IAAK,IACHD,EAAMn1M,EAAElH,KACR2oC,EAAMmnJ,EAAIuB,EACVvzL,EAAKw7L,QAAQ3wJ,EAAK0zK,EAAKC,GACvB,MAEF,IAAK,IACHA,GAAOp1M,EAAElH,KACT2oC,EAAMmnJ,EAAIuB,EACVvzL,EAAKw7L,QAAQ3wJ,EAAK0zK,EAAKC,GACvB,MAEF,IAAK,IACHA,EAAMp1M,EAAElH,KACR2oC,EAAMmnJ,EAAIuB,EACVvzL,EAAKw7L,QAAQ3wJ,EAAK0zK,EAAKC,GACvB,MAEF,IAAK,IACH3zK,EAAMmnJ,EAAIwB,EACVxzL,EAAKw7L,QAAQ3wJ,EAAKzhC,EAAElH,KAAQkH,EAAElH,KAAQkH,EAAElH,KAAQkH,EAAElH,KAAQkH,EAAElH,KAAQkH,EAAElH,MACtEq8M,EAAMn1M,EAAElH,EAAM,GACds8M,EAAMp1M,EAAElH,EAAM,GACd,MAEF,IAAK,IACH2oC,EAAMmnJ,EAAIwB,EACVxzL,EAAKw7L,QAAQ3wJ,EAAKzhC,EAAElH,KAASq8M,EAAKn1M,EAAElH,KAASs8M,EAAKp1M,EAAElH,KAASq8M,EAAKn1M,EAAElH,KAASs8M,EAAKp1M,EAAElH,KAASq8M,EAAKn1M,EAAElH,KAASs8M,GAC7GD,GAAOn1M,EAAElH,EAAM,GACfs8M,GAAOp1M,EAAElH,EAAM,GACf,MAEF,IAAK,IACHu8M,EAASF,EACTG,EAASF,EACT,IAAIhlM,EAAMxZ,EAAKwZ,MACXjL,EAAWvO,EAAKpU,KAEhB0yN,IAAYtsB,EAAIwB,IAClBirB,GAAUF,EAAMhwM,EAASiL,EAAM,GAC/BklM,GAAUF,EAAMjwM,EAASiL,EAAM,IAGjCqxB,EAAMmnJ,EAAIwB,EACVz5K,EAAK3Q,EAAElH,KACP8X,EAAK5Q,EAAElH,KACPq8M,EAAMn1M,EAAElH,KACRs8M,EAAMp1M,EAAElH,KACRlC,EAAKw7L,QAAQ3wJ,EAAK4zK,EAAQC,EAAQ3kM,EAAIC,EAAIukM,EAAKC,GAC/C,MAEF,IAAK,IACHC,EAASF,EACTG,EAASF,EACLhlM,EAAMxZ,EAAKwZ,MACXjL,EAAWvO,EAAKpU,KAEhB0yN,IAAYtsB,EAAIwB,IAClBirB,GAAUF,EAAMhwM,EAASiL,EAAM,GAC/BklM,GAAUF,EAAMjwM,EAASiL,EAAM,IAGjCqxB,EAAMmnJ,EAAIwB,EACVz5K,EAAKwkM,EAAMn1M,EAAElH,KACb8X,EAAKwkM,EAAMp1M,EAAElH,KACbq8M,GAAOn1M,EAAElH,KACTs8M,GAAOp1M,EAAElH,KACTlC,EAAKw7L,QAAQ3wJ,EAAK4zK,EAAQC,EAAQ3kM,EAAIC,EAAIukM,EAAKC,GAC/C,MAEF,IAAK,IACHzkM,EAAK3Q,EAAElH,KACP8X,EAAK5Q,EAAElH,KACPq8M,EAAMn1M,EAAElH,KACRs8M,EAAMp1M,EAAElH,KACR2oC,EAAMmnJ,EAAIyB,EACVzzL,EAAKw7L,QAAQ3wJ,EAAK9wB,EAAIC,EAAIukM,EAAKC,GAC/B,MAEF,IAAK,IACHzkM,EAAK3Q,EAAElH,KAASq8M,EAChBvkM,EAAK5Q,EAAElH,KAASs8M,EAChBD,GAAOn1M,EAAElH,KACTs8M,GAAOp1M,EAAElH,KACT2oC,EAAMmnJ,EAAIyB,EACVzzL,EAAKw7L,QAAQ3wJ,EAAK9wB,EAAIC,EAAIukM,EAAKC,GAC/B,MAEF,IAAK,IACHC,EAASF,EACTG,EAASF,EACLhlM,EAAMxZ,EAAKwZ,MACXjL,EAAWvO,EAAKpU,KAEhB0yN,IAAYtsB,EAAIyB,IAClBgrB,GAAUF,EAAMhwM,EAASiL,EAAM,GAC/BklM,GAAUF,EAAMjwM,EAASiL,EAAM,IAGjC+kM,EAAMn1M,EAAElH,KACRs8M,EAAMp1M,EAAElH,KACR2oC,EAAMmnJ,EAAIyB,EACVzzL,EAAKw7L,QAAQ3wJ,EAAK4zK,EAAQC,EAAQH,EAAKC,GACvC,MAEF,IAAK,IACHC,EAASF,EACTG,EAASF,EACLhlM,EAAMxZ,EAAKwZ,MACXjL,EAAWvO,EAAKpU,KAEhB0yN,IAAYtsB,EAAIyB,IAClBgrB,GAAUF,EAAMhwM,EAASiL,EAAM,GAC/BklM,GAAUF,EAAMjwM,EAASiL,EAAM,IAGjC+kM,GAAOn1M,EAAElH,KACTs8M,GAAOp1M,EAAElH,KACT2oC,EAAMmnJ,EAAIyB,EACVzzL,EAAKw7L,QAAQ3wJ,EAAK4zK,EAAQC,EAAQH,EAAKC,GACvC,MAEF,IAAK,IACH7qB,EAAKvqL,EAAElH,KACP0xL,EAAKxqL,EAAElH,KACPk7L,EAAMh0L,EAAElH,KACR27M,EAAKz0M,EAAElH,KACPm7L,EAAKj0L,EAAElH,KACP6X,EAAKwkM,EAAKvkM,EAAKwkM,EACfD,EAAMn1M,EAAElH,KACRs8M,EAAMp1M,EAAElH,KACR2oC,EAAMmnJ,EAAI0B,EACVkqB,EAAW7jM,EAAIC,EAAIukM,EAAKC,EAAKX,EAAIxgB,EAAI1J,EAAIC,EAAIwJ,EAAKvyJ,EAAK7qC,GACvD,MAEF,IAAK,IACH2zL,EAAKvqL,EAAElH,KACP0xL,EAAKxqL,EAAElH,KACPk7L,EAAMh0L,EAAElH,KACR27M,EAAKz0M,EAAElH,KACPm7L,EAAKj0L,EAAElH,KACP6X,EAAKwkM,EAAKvkM,EAAKwkM,EACfD,GAAOn1M,EAAElH,KACTs8M,GAAOp1M,EAAElH,KACT2oC,EAAMmnJ,EAAI0B,EACVkqB,EAAW7jM,EAAIC,EAAIukM,EAAKC,EAAKX,EAAIxgB,EAAI1J,EAAIC,EAAIwJ,EAAKvyJ,EAAK7qC,GACvD,MAEN,CAEU,MAANq2I,GAAmB,MAANA,IACfxrG,EAAMmnJ,EAAIgC,EACVh0L,EAAKw7L,QAAQ3wJ,IAGfyzK,EAAUzzK,CACZ,CAGA,OADA7qC,EAAK+7L,WACE/7L,CACT,CAGA,SAAS2+M,EAAkBv1F,EAAKr8F,GAC9B,IAAI6xL,EAAYR,EAA0Bh1F,GAuB1C,OAtBAr8F,EAAOA,GAAQ,CAAC,EAEhBA,EAAK9N,UAAY,SAAUjf,GACzB,GAAIA,EAAK8zC,QAAS,CAChB9zC,EAAK8zC,QAAQ8qK,EAAUhzN,MAEvB,IAAIszB,EAAMlf,EAAKuvB,aAEXrQ,GACFlf,EAAKi9L,YAAY/9K,EAErB,KAAO,CACDA,EAAMlf,EACV4+M,EAAU3hB,YAAY/9K,EACxB,CACF,EAEA6N,EAAKnF,eAAiB,SAAUs8B,GAC9Bo5J,EAAcsB,EAAW16J,GACzBl5D,KAAKsb,OAAM,EACb,EAEOymB,CACT,CAQA,SAASm8I,EAAiB9/C,EAAKr8F,GAC7B,OAAO,IAAI/N,EAAK2/L,EAAkBv1F,EAAKr8F,GACzC,CAQA,SAASk8I,EAAiB7/C,EAAKr8F,GAC7B,OAAO/N,EAAKzsB,OAAOosN,EAAkBv1F,EAAKr8F,GAC5C,CASA,SAASqjD,EAAUyuI,EAAS9xL,GAI1B,IAHA,IAAI+xL,EAAW,GACXtlM,EAAMqlM,EAAQ1/M,OAET8B,EAAI,EAAGA,EAAIuY,EAAKvY,IAAK,CAC5B,IAAI24M,EAASiF,EAAQ59M,GAEhB24M,EAAO55M,MACV45M,EAAO5O,kBAGL4O,EAAO9O,aACT8O,EAAO36L,UAAU26L,EAAO55M,KAAM45M,EAAO3kN,OAAO,GAG9C6pN,EAAS9yN,KAAK4tN,EAAO55M,KACvB,CAEA,IAAI++M,EAAa,IAAI//L,EAAK+N,GAc1B,OAZAgyL,EAAW/T,kBAEX+T,EAAW9/L,UAAY,SAAUjf,GAC/BA,EAAKm8L,WAAW2iB,GAEhB,IAAI5/L,EAAMlf,EAAKuvB,aAEXrQ,GACFlf,EAAKi9L,YAAY/9K,EAErB,EAEO6/L,CACT,CAEAlyN,EAAQq8K,iBAAmBA,EAC3Br8K,EAAQo8K,iBAAmBA,EAC3Bp8K,EAAQujF,UAAYA,C,uBCxZpB,IAAIwhH,EAAYnlM,EAAQ,OAEpBmlF,EAAUnlF,EAAQ,OAElBolF,EAAmBD,EAAQhqD,eAC3BoqK,EAAMJ,EAAUI,IAChBr6K,EAAS,CAAC,GAAI,GAAI,IAClB4iL,EAAW/oM,KAAKgnD,KAChBwmK,EAAYxtN,KAAKo1B,MAErB,SAASz4B,EAAS6R,EAAMkkD,GACtB,IACIrZ,EACAo0K,EACAh+M,EACAqd,EACA+uB,EALAzhD,EAAOoU,EAAKpU,KAOZm7F,EAAIirG,EAAIjrG,EACRysG,EAAIxB,EAAIwB,EACRD,EAAIvB,EAAIuB,EACRQ,EAAI/B,EAAI+B,EACRL,EAAI1B,EAAI0B,EACRD,EAAIzB,EAAIyB,EAEZ,IAAKxyL,EAAI,EAAGqd,EAAI,EAAGrd,EAAIrV,EAAKuT,QAAS,CAKnC,OAJA0rC,EAAMj/C,EAAKqV,KACXqd,EAAIrd,EACJg+M,EAAS,EAEDp0K,GACN,KAAKk8C,EACHk4H,EAAS,EACT,MAEF,KAAK1rB,EACH0rB,EAAS,EACT,MAEF,KAAKzrB,EACHyrB,EAAS,EACT,MAEF,KAAKxrB,EACHwrB,EAAS,EACT,MAEF,KAAKvrB,EACH,IAAIz8L,EAAIitD,EAAE,GACNhtD,EAAIgtD,EAAE,GACN6zI,EAAKwC,EAASr2I,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IACrC/G,EAAKo9I,EAASr2I,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IACrCtmC,EAAQohM,GAAW96J,EAAE,GAAK/G,EAAI+G,EAAE,GAAK6zI,GAEzCnsM,EAAKqV,IAAM82L,EACXnsM,EAAKqV,MAAQhK,EAEbrL,EAAKqV,IAAMk8C,EACXvxD,EAAKqV,MAAQ/J,EAGbtL,EAAKqV,MAAQ82L,EACbnsM,EAAKqV,MAAQk8C,EAEbvxD,EAAKqV,MAAQ2c,EAEbhyB,EAAKqV,MAAQ2c,EAEb3c,GAAK,EACLqd,EAAIrd,EACJ,MAEF,KAAK8yL,EAEH3qL,EAAE,GAAKxd,EAAKqV,KACZmI,EAAE,GAAKxd,EAAKqV,KACZ4wE,EAAiBzoE,EAAGA,EAAG86C,GACvBt4D,EAAK0yB,KAAOlV,EAAE,GACdxd,EAAK0yB,KAAOlV,EAAE,GAEdA,EAAE,IAAMxd,EAAKqV,KACbmI,EAAE,IAAMxd,EAAKqV,KACb4wE,EAAiBzoE,EAAGA,EAAG86C,GACvBt4D,EAAK0yB,KAAOlV,EAAE,GACdxd,EAAK0yB,KAAOlV,EAAE,GAGlB,IAAKikC,EAAI,EAAGA,EAAI4xK,EAAQ5xK,IAAK,CAC3B,IAAIjkC,EAAIuO,EAAO01B,GACfjkC,EAAE,GAAKxd,EAAKqV,KACZmI,EAAE,GAAKxd,EAAKqV,KACZ4wE,EAAiBzoE,EAAGA,EAAG86C,GAEvBt4D,EAAK0yB,KAAOlV,EAAE,GACdxd,EAAK0yB,KAAOlV,EAAE,EAChB,CACF,CACF,CAEAhb,EAAOvB,QAAUsB,C,wBCnGjB,IAAIimN,EAAQ3nN,EAAQ,OAEhByyN,EAAUzyN,EAAQ,OAElBs2D,EAAQt2D,EAAQ,OAEhBe,EAAOu1D,EAAMv1D,KAOjB,SAAS+yL,EAAWp3K,GAClB,OAAOkvH,SAASlvH,EAAK,GACvB,CAMA,SAASg2M,EAAWz6J,EAAM6N,GACxB2sJ,EAAQE,UACRp0N,KAAK05D,KAAOA,EACZ15D,KAAKunE,QAAUA,EACf,IAAI8sJ,EAAch0F,SAASC,cAAc,OACrCg0F,EAAUj0F,SAASC,cAAc,OACrC+zF,EAAYhpN,MAAMk1H,QAAU,mFAC5B+zF,EAAQjpN,MAAMk1H,QAAU,kCACxB7mE,EAAKonE,YAAYuzF,GACjBr0N,KAAKu0N,SAAWD,EAChBt0N,KAAKw0N,aAAeH,EACpBr0N,KAAKqmJ,SAEL,IAAIouE,EAAoBltJ,EAAQy2H,eAC5B02B,EAAkBntJ,EAAQs2H,aAE9Bt2H,EAAQy2H,eAAiB,SAAUv0L,GACjCgrN,EAAkB98M,KAAK4vD,EAAS99D,GAE5BA,GACFA,EAAGkrN,UAAYlrN,EAAGkrN,SAASL,EAE/B,EAEA/sJ,EAAQs2H,aAAe,SAAUp0L,GAE/BA,EAAGmrN,OAASnrN,EAAGmrN,MAAMN,GACrBI,EAAgB/8M,KAAK4vD,EAAS99D,EAChC,EAEAzJ,KAAK60N,aAAc,CACrB,CA+GA,SAASjK,EAAuBtmN,GAC9B,OAAO,WACL8kN,EAAM,iDAAmD9kN,EAAS,IACpE,CACF,CAjHA6vN,EAAWjyN,UAAY,CACrBC,YAAagyN,EACbzvK,QAAS,WACP,MAAO,KACT,EAKAgzI,gBAAiB,WACf,OAAO13L,KAAKw0N,YACd,EACApsF,sBAAuB,WACrB,IAAIuvD,EAAe33L,KAAK03L,kBAExB,GAAIC,EACF,MAAO,CACLtvD,WAAYsvD,EAAatvD,YAAc,EACvCC,UAAWqvD,EAAarvD,WAAa,EAG3C,EAKA4oD,QAAS,WACP,IAAIvuL,EAAO3C,KAAKunE,QAAQ8+C,gBAAe,GAAM,GAE7CrmH,KAAK63L,WAAWl1L,EAClB,EACAk1L,WAAY,SAAUl1L,GAGpB,IAFA,IAAI2xN,EAAUt0N,KAAKu0N,SAEVt+M,EAAI,EAAGA,EAAItT,EAAKwR,OAAQ8B,IAAK,CACpC,IAAIxM,EAAK9G,EAAKsT,GAEVxM,EAAGo+D,WAAap+D,EAAG0iB,QAChB1iB,EAAGqrN,qBACNrrN,EAAGkrN,SAASL,GAId7qN,EAAGqrN,qBAAsB,IAErBrrN,EAAGqrN,qBACLrrN,EAAGmrN,MAAMN,GAGX7qN,EAAGqrN,qBAAsB,EAErBrrN,EAAGgmC,UACLhmC,EAAGohL,aAAephL,EAAGohL,eACpBphL,EAAGsrN,UAAYtrN,EAAGy6B,OAAOvsB,KAAKlO,EAAI6qN,GACnC7qN,EAAGywL,YAAczwL,EAAGywL,eAIxBzwL,EAAGgmC,SAAU,CACf,CAEIzvC,KAAK60N,cAIP70N,KAAKw0N,aAAa1zF,YAAYwzF,GAE9Bt0N,KAAK60N,aAAc,EAEvB,EACAxuE,OAAQ,SAAU96I,EAAOS,GACnBT,EAAiB,MAATA,EAAgBvL,KAAK4rN,YAAcrgN,EAC3CS,EAAmB,MAAVA,EAAiBhM,KAAK6rN,aAAe7/M,EAElD,GAAIhM,KAAKk3L,QAAU3rL,GAASvL,KAAKm3L,SAAWnrL,EAAQ,CAClDhM,KAAKk3L,OAAS3rL,EACdvL,KAAKm3L,QAAUnrL,EACf,IAAIgpN,EAAmBh1N,KAAKw0N,aAAanpN,MACzC2pN,EAAiBzpN,MAAQA,EAAQ,KACjCypN,EAAiBhpN,OAASA,EAAS,IACrC,CACF,EACA1D,QAAS,WACPtI,KAAK05D,KAAK8mE,UAAY,GACtBxgI,KAAKu0N,SAAWv0N,KAAKw0N,aAAex0N,KAAKunE,QAAU,IACrD,EACAt2D,SAAU,WACR,OAAOjR,KAAKk3L,MACd,EACAhmL,UAAW,WACT,OAAOlR,KAAKm3L,OACd,EACAvyI,MAAO,WACD5kD,KAAKw0N,cACPx0N,KAAK05D,KAAK0mE,YAAYpgI,KAAKw0N,aAE/B,EACA5I,UAAW,WACT,IAAIlyJ,EAAO15D,KAAK05D,KACZ+tE,EAAM/tE,EAAKguE,aACf,OAAQhuE,EAAKwuE,aAAeqtD,EAAW9tD,EAAIl8H,QAAUgqL,EAAW9tD,EAAI6F,aAAeioD,EAAW9tD,EAAI8F,cAAgB,CACpH,EACAs+E,WAAY,WACV,IAAInyJ,EAAO15D,KAAK05D,KACZ+tE,EAAM/tE,EAAKguE,aACf,OAAQhuE,EAAKioE,cAAgB4zD,EAAW9tD,EAAIz7H,SAAWupL,EAAW9tD,EAAIiG,YAAc6nD,EAAW9tD,EAAIkG,eAAiB,CACtH,GAUFnrI,EAAK,CAAC,WAAY,cAAe,YAAa,mBAAoB,iBAAkB,YAAa,WAAY,WAAY,aAAc,YAAa,gBAAgB,SAAUgB,GAC5K2wN,EAAWjyN,UAAUsB,GAAQonN,EAAuBpnN,EACtD,IACA,IAAIL,EAAWgxN,EACf/wN,EAAOvB,QAAUsB,C,wBC9KjB,IAYI8xN,EAZA/0I,EAAMz+E,EAAQ,OAEdyzN,EAAM,gCACNC,EAAwB,qBAAXhsJ,OAAyB,KAAOA,OAC7CisJ,GAAY,EACZC,EAAMF,GAAOA,EAAI90F,SAErB,SAASi1F,EAAW5F,GAClB,OAAOuF,EAAavF,EACtB,CAKA,GAAI2F,IAAQn1I,EAAIghB,gBACd,KACGm0H,EAAIE,WAAWC,OAASH,EAAIE,WAAWpsN,IAAI,QAAS+rN,GAErDD,EAAe,SAAUvF,GACvB,OAAO2F,EAAI/0F,cAAc,UAAYovF,EAAU,kBACjD,CACF,CAAE,MAAOhzL,GACPu4L,EAAe,SAAUvF,GACvB,OAAO2F,EAAI/0F,cAAc,IAAMovF,EAAU,WAAawF,EAAM,mBAC9D,CACF,CAIF,SAASd,IACP,IAAIgB,GAAcC,EAAlB,CAIAD,GAAY,EACZ,IAAIK,EAAcJ,EAAII,YAElBA,EAAYthN,OAAS,GACvBkhN,EAAIK,mBAAmBC,QAAQ,SAAU,8BAGzCF,EAAY,GAAGE,QAAQ,SAAU,6BATnC,CAWF,CAEA9zN,EAAQwzN,IAAMA,EACdxzN,EAAQyzN,WAAaA,EACrBzzN,EAAQuyN,QAAUA,C,gCC/ClB,IAAIl0I,EAAMz+E,EAAQ,OAEdmlF,EAAUnlF,EAAQ,OAElBm7B,EAAiBgqD,EAAQhqD,eAEzBonC,EAAeviE,EAAQ,OAEvBg7J,EAAYh7J,EAAQ,MAEpBgsD,EAAchsD,EAAQ,MAEtBshN,EAAathN,EAAQ,OAErBw+M,EAAWx+M,EAAQ,OAEnBy+M,EAAcz+M,EAAQ,OAEtB4+M,EAAS5+M,EAAQ,OAEjBmiB,EAAOniB,EAAQ,OAEfuyB,EAAOvyB,EAAQ,OAEfmlM,EAAYnlM,EAAQ,OAEpBquL,EAAWruL,EAAQ,OAEnByyN,EAAUzyN,EAAQ,OAIlBulM,EAAMJ,EAAUI,IAChB1uL,EAAQ9R,KAAK8R,MACbk1C,EAAOhnD,KAAKgnD,KACZ//C,EAAMjH,KAAKiH,IACXylB,EAAM1sB,KAAK0sB,IACXE,EAAM5sB,KAAK4sB,IACXi6C,EAAU7mE,KAAKF,IAEnB,IAAK45E,EAAIghB,gBAAiB,CACxB,IAAI00H,EAAQ,IACRC,EAAuB,oCACvB7sB,EAAI,MACJ8sB,EAAK9sB,EAAI,EACT+sB,EAAc,IACdvxJ,EAAS,IAETwxJ,EAAkB,SAAUvsN,GAC9BA,EAAG4B,MAAMk1H,QAAU,uDACnB92H,EAAGwsN,UAAYjtB,EAAI,IAAMA,EACzBv/L,EAAGysN,YAAc,KACnB,EAEIC,EAAsB,SAAU3iH,GAClC,OAAOwpE,OAAOxpE,GAAGpiF,QAAQ,KAAM,SAASA,QAAQ,KAAM,SACxD,EAEIglM,EAAU,SAAU3qN,EAAGy4K,EAAGx1J,GAC5B,MAAO,OAAS,CAACjjB,EAAGy4K,EAAGx1J,GAAGnX,KAAK,KAAO,GACxC,EAEI8+M,EAAS,SAAU7qN,EAAQgd,GACzBA,GAAShd,GAAUgd,EAAMgnB,aAAehkC,GAC1CA,EAAOs1H,YAAYt4G,EAEvB,EAEIte,EAAS,SAAUsB,EAAQgd,GACzBA,GAAShd,GAAUgd,EAAMgnB,aAAehkC,GAC1CA,EAAO40H,YAAY53G,EAEvB,EAEI8tM,EAAY,SAAUhoN,EAAQC,EAAG6D,GAEnC,OAAQ48G,WAAW1gH,IAAW,GAAKynN,GAAe/mG,WAAWzgH,IAAM,GAAKi2D,EAASpyD,CACnF,EAEInC,EAAe,SAAUlC,EAAOknD,GAClC,MAAqB,kBAAVlnD,EACLA,EAAMmG,YAAY,MAAQ,EACrB86G,WAAWjhH,GAAS,IAAMknD,EAG5B+5D,WAAWjhH,GAGbA,CACT,EAMIwoN,EAAqB,SAAU9sN,EAAI8C,EAAOE,GAC5C,IAAI01J,EAAW1F,EAAU/oJ,MAAMnH,GAC/BE,GAAWA,EAEP4R,MAAM5R,KACRA,EAAU,GAGR01J,IACF14J,EAAG8C,MAAQ6pN,EAAQj0D,EAAS,GAAIA,EAAS,GAAIA,EAAS,IACtD14J,EAAGgD,QAAUA,EAAU01J,EAAS,GAEpC,EAEIq0D,EAAmB,SAAUjqN,GAC/B,IAAI41J,EAAW1F,EAAU/oJ,MAAMnH,GAC/B,MAAO,CAAC6pN,EAAQj0D,EAAS,GAAIA,EAAS,GAAIA,EAAS,IAAKA,EAAS,GACnE,EAEIs0D,EAAiB,SAAUhtN,EAAI4B,EAAOqrN,GAExC,IAAIzpN,EAAO5B,EAAM4B,KAEjB,GAAY,MAARA,EAEF,GAAIA,aAAgB6iL,EAAU,CAC5B,IAAI6mC,EACA/jM,EAAQ,EACRgkM,EAAQ,CAAC,EAAG,GAEZx5J,EAAQ,EAERy5J,EAAY,EACZnsN,EAAOgsN,EAAK/5L,kBACZqxG,EAAYtjI,EAAKa,MACjB0iI,EAAavjI,EAAKsB,OAEtB,GAAkB,WAAdiB,EAAKvK,KAAmB,CAC1Bi0N,EAAe,WACf,IAAI95L,EAAY65L,EAAK75L,UACjByB,EAAK,CAACrxB,EAAKhB,EAAI+hI,EAAW/gI,EAAKf,EAAI+hI,GACnC1vG,EAAK,CAACtxB,EAAKgiB,GAAK++G,EAAW/gI,EAAKkiB,GAAK8+G,GAErCpxG,IACFD,EAAe0B,EAAIA,EAAIzB,GACvBD,EAAe2B,EAAIA,EAAI1B,IAGzB,IAAI72B,EAAKu4B,EAAG,GAAKD,EAAG,GAChBr4B,EAAKs4B,EAAG,GAAKD,EAAG,GACpB1L,EAA6B,IAArBpsB,KAAKo1B,MAAM51B,EAAIC,GAAYO,KAAK0L,GAEpC0gB,EAAQ,IACVA,GAAS,KAKPA,EAAQ,OACVA,EAAQ,EAEZ,KAAO,CACL+jM,EAAe,iBACXr4L,EAAK,CAACrxB,EAAKhB,EAAI+hI,EAAW/gI,EAAKf,EAAI+hI,GACnCpxG,EAAY65L,EAAK75L,UADrB,IAEIp2B,EAAQiwN,EAAKjwN,MACb8E,EAAQyiI,EACRhiI,EAASiiI,EACb2oF,EAAQ,EACPt4L,EAAG,GAAK5zB,EAAKuB,GAAKV,GAAQ+yB,EAAG,GAAK5zB,EAAKwB,GAAKF,GAEzC6wB,GACFD,EAAe0B,EAAIA,EAAIzB,GAGzBtxB,GAAS9E,EAAM,GAAKuiM,EACpBh9L,GAAUvF,EAAM,GAAKuiM,EACrB,IAAI9rJ,EAAYmwB,EAAQ9hE,EAAOS,GAC/BoxD,EAAQ,EAAQlgB,EAChB25K,EAAY,EAAI5pN,EAAKxB,EAAIyxC,EAAYkgB,CACvC,CAIA,IAAIhgB,EAAQnwC,EAAKkwC,WAAWn6C,QAC5Bo6C,EAAM1xB,MAAK,SAAUorM,EAAKC,GACxB,OAAOD,EAAI7oN,OAAS8oN,EAAI9oN,MAC1B,IAMA,IALA,IAAIkG,EAASipC,EAAMjpC,OAEf6iN,EAAoB,GACpBpH,EAAS,GAEJ35M,EAAI,EAAGA,EAAI9B,EAAQ8B,IAAK,CAC/B,IAAIonC,EAAOD,EAAMnnC,GACbghN,EAAgBT,EAAiBn5K,EAAK9wC,OAC1CqjN,EAAO5uN,KAAKq8C,EAAKpvC,OAAS4oN,EAAYz5J,EAAQ,IAAM65J,EAAc,IAExD,IAANhhN,GAAWA,IAAM9B,EAAS,GAC5B6iN,EAAkBh2N,KAAKi2N,EAE3B,CAEA,GAAI9iN,GAAU,EAAG,CACf,IAAI+iN,EAASF,EAAkB,GAAG,GAC9BG,EAASH,EAAkB,GAAG,GAC9BI,EAAWJ,EAAkB,GAAG,GAAK3rN,EAAMoB,QAC3C4qN,EAAWL,EAAkB,GAAG,GAAK3rN,EAAMoB,QAC/ChD,EAAG/G,KAAOi0N,EACVltN,EAAGnF,OAAS,OACZmF,EAAGmtN,MAAQ,OACXntN,EAAGmpB,MAAQA,EACXnpB,EAAG8C,MAAQ2qN,EACXztN,EAAG0tN,OAASA,EACZ1tN,EAAGmmN,OAASA,EAAOr4M,KAAK,KAGxB9N,EAAGgD,QAAU4qN,EAEb5tN,EAAG4tN,SAAWD,CAChB,CAEqB,WAAjBT,IACFltN,EAAG6tN,cAAgBV,EAAMr/M,KAAK,KAElC,MAEEg/M,EAAmB9sN,EAAIwD,EAAM5B,EAAMoB,QAGzC,EAEI8qN,EAAmB,SAAU9tN,EAAI4B,GAUb,MAAlBA,EAAMsN,WACRlP,EAAG+tN,UAAYnsN,EAAMsN,SAASpB,KAAK,MAGjB,MAAhBlM,EAAMqL,QAAoBrL,EAAMqL,kBAAkBo5K,GACpDymC,EAAmB9sN,EAAI4B,EAAMqL,OAAQrL,EAAMoB,QAE/C,EAEIgrN,EAAsB,SAAUC,EAAOh1N,EAAM2I,EAAOqrN,GACtD,IAAIiB,EAAiB,QAARj1N,EACT+G,EAAKiuN,EAAM/L,qBAAqBjpN,GAAM,GAEvB,MAAf2I,EAAM3I,IAAiC,SAAhB2I,EAAM3I,KAAqBi1N,IAAWA,GAAUtsN,EAAMmC,YAC/EkqN,EAAMC,EAAS,SAAW,WAAa,OAEnCtsN,EAAM3I,aAAiBotL,GACzB5lL,EAAOwtN,EAAOjuN,GAGXA,IACHA,EAAKyqN,EAAQoB,WAAW5yN,IAG1Bi1N,EAASlB,EAAehtN,EAAI4B,EAAOqrN,GAAQa,EAAiB9tN,EAAI4B,GAChEgrN,EAAOqB,EAAOjuN,KAEdiuN,EAAMC,EAAS,SAAW,WAAa,QACvCztN,EAAOwtN,EAAOjuN,GAElB,EAEIkjB,EAAS,CAAC,GAAI,GAAI,IAElBsgM,EAAmB,SAAUj4M,EAAMkkD,GACrC,IAMI+6J,EACA9G,EACAttK,EACA5pC,EACAoyL,EACAC,EAXAvsG,EAAIirG,EAAIjrG,EACRysG,EAAIxB,EAAIwB,EACRD,EAAIvB,EAAIuB,EACRG,EAAI1B,EAAI0B,EACRD,EAAIzB,EAAIyB,EACRrqE,EAAM,GAONx9H,EAAOoU,EAAKpU,KACZssN,EAAal4M,EAAKwZ,MAEtB,IAAKvY,EAAI,EAAGA,EAAIi3M,GAAa,CAK3B,OAJArtK,EAAMj/C,EAAKqV,KACXk3M,EAAS,GACT8G,EAAS,EAEDp0K,GACN,KAAKk8C,EACHoxH,EAAS,MACT8G,EAAS,EACT5rB,EAAKznM,EAAKqV,KACVqyL,EAAK1nM,EAAKqV,KACV0W,EAAO,GAAG,GAAK07K,EACf17K,EAAO,GAAG,GAAK27K,EACf,MAEF,KAAKC,EACH4kB,EAAS,MACT8G,EAAS,EACT5rB,EAAKznM,EAAKqV,KACVqyL,EAAK1nM,EAAKqV,KACV0W,EAAO,GAAG,GAAK07K,EACf17K,EAAO,GAAG,GAAK27K,EACf,MAEF,KAAKG,EACL,KAAKD,EACH2kB,EAAS,MACT8G,EAAS,EACT,IAIIllK,EACAC,EALAjgC,EAAKnuB,EAAKqV,KACV+Y,EAAKpuB,EAAKqV,KACVgZ,EAAKruB,EAAKqV,KACVkZ,EAAKvuB,EAAKqV,KAIV4pC,IAAQ4oJ,GAEV15I,EAAK9/B,EACL+/B,EAAK7/B,EACLF,GAAMA,EAAK,EAAIF,GAAM,EACrBI,GAAMA,EAAK,EAAIH,GAAM,EACrBD,GAAMs5K,EAAK,EAAIt5K,GAAM,EACrBC,GAAMs5K,EAAK,EAAIt5K,GAAM,IAErB+/B,EAAKnuD,EAAKqV,KACV+4C,EAAKpuD,EAAKqV,MAGZ0W,EAAO,GAAG,GAAKoC,EACfpC,EAAO,GAAG,GAAKqC,EACfrC,EAAO,GAAG,GAAKsC,EACftC,EAAO,GAAG,GAAKwC,EACfxC,EAAO,GAAG,GAAKoiC,EACfpiC,EAAO,GAAG,GAAKqiC,EACfq5I,EAAKt5I,EACLu5I,EAAKt5I,EACL,MAEF,KAAK05I,EACH,IAAIz8L,EAAI,EACJC,EAAI,EACJ6gM,EAAK,EACL56I,EAAK,EACLv/B,EAAQ,EAERsmC,IAEFjtD,EAAIitD,EAAE,GACNhtD,EAAIgtD,EAAE,GACN6zI,EAAKv/I,EAAK0L,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IACjC/G,EAAK3E,EAAK0L,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IACjCtmC,EAAQpsB,KAAKo1B,OAAOs9B,EAAE,GAAK/G,EAAI+G,EAAE,GAAK6zI,IAGxC,IAAI5gM,EAAKvL,EAAKqV,KACV7J,EAAKxL,EAAKqV,KACV0yL,EAAK/nM,EAAKqV,KACV2yL,EAAKhoM,EAAKqV,KACV7K,EAAaxK,EAAKqV,KAAO2c,EACzBvmB,EAAWzL,EAAKqV,KAAO7K,EAAawnB,EAGxC3c,IACA,IAAIia,EAAYtvB,EAAKqV,KACjB0Z,EAAKxjB,EAAK+mB,EAAI9nB,GAAcu9L,EAC5Bv6J,EAAKhiC,EAAKgnB,EAAIhoB,GAAcw9L,EAG5BlmM,GAFAqsB,EAAK5iB,EAAK+mB,EAAI7mB,GAAYs8L,EAC1B35K,EAAK5iB,EAAKgnB,EAAI/mB,GAAYu8L,EACnB14K,EAAY,OAAS,QAE5B1pB,KAAKiH,IAAIkiB,EAAKZ,GAAM,OAElBvoB,KAAKiH,IAAIpB,EAAWjB,GAAc,IAGhC8kB,IACFP,GAAM,IAAMq5K,GAIVxiM,KAAKiH,IAAI2gC,EAAKhiC,GAAM,KAClB8jB,GAAaP,EAAKxjB,IAAO+jB,GAAaP,EAAKxjB,EAC7C6iB,GAAM,IAAMg6K,EAEZh6K,GAAM,IAAMg6K,EAEL94K,GAAake,EAAKhiC,IAAO8jB,GAAake,EAAKhiC,EACpD2iB,GAAM,IAAMi6K,EAEZj6K,GAAM,IAAMi6K,GAKlB5qE,EAAIp9H,KAAK0B,EAAM4V,IAAQnM,EAAKw8L,GAAMoE,EAAK9gM,GAAK+8L,EAAI8sB,GAAKF,EAAOt9M,IAAQlM,EAAKw8L,GAAMz2I,EAAKjmD,GAAK88L,EAAI8sB,GAAKF,EAAOt9M,IAAQnM,EAAKw8L,GAAMoE,EAAK9gM,GAAK+8L,EAAI8sB,GAAKF,EAAOt9M,IAAQlM,EAAKw8L,GAAMz2I,EAAKjmD,GAAK88L,EAAI8sB,GAAKF,EAAOt9M,GAAOqX,EAAKo9K,EAAK9gM,GAAK+8L,EAAI8sB,GAAKF,EAAOt9M,GAAO81B,EAAK+jB,EAAKjmD,GAAK88L,EAAI8sB,GAAKF,EAAOt9M,GAAOyW,EAAKg+K,EAAK9gM,GAAK+8L,EAAI8sB,GAAKF,EAAOt9M,GAAO0W,EAAKmjC,EAAKjmD,GAAK88L,EAAI8sB,IAC/UztB,EAAKt5K,EACLu5K,EAAKt5K,EACL,MAEF,KAAKg4K,EAAI+B,EACP,IAAIzqK,EAAK3R,EAAO,GACZ4R,EAAK5R,EAAO,GAEhB2R,EAAG,GAAK19B,EAAKqV,KACbqoB,EAAG,GAAK19B,EAAKqV,KAEbsoB,EAAG,GAAKD,EAAG,GAAK19B,EAAKqV,KACrBsoB,EAAG,GAAKD,EAAG,GAAK19B,EAAKqV,KAEjBijD,IACFt8B,EAAe0B,EAAIA,EAAI46B,GACvBt8B,EAAe2B,EAAIA,EAAI26B,IAGzB56B,EAAG,GAAKhmB,EAAMgmB,EAAG,GAAK0qK,EAAI8sB,GAC1Bv3L,EAAG,GAAKjmB,EAAMimB,EAAG,GAAKyqK,EAAI8sB,GAC1Bx3L,EAAG,GAAKhmB,EAAMgmB,EAAG,GAAK0qK,EAAI8sB,GAC1Bv3L,EAAG,GAAKjmB,EAAMimB,EAAG,GAAKyqK,EAAI8sB,GAC1B13F,EAAIp9H,KACJ,MAAOs9B,EAAG,GAAIs3L,EAAOt3L,EAAG,GACxB,MAAOC,EAAG,GAAIq3L,EAAOt3L,EAAG,GACxB,MAAOC,EAAG,GAAIq3L,EAAOr3L,EAAG,GACxB,MAAOD,EAAG,GAAIs3L,EAAOr3L,EAAG,IACxB,MAEF,KAAKyoK,EAAIgC,EAEP5qE,EAAIp9H,KAAK,OAGb,GAAIizN,EAAS,EAAG,CACd71F,EAAIp9H,KAAKmsN,GAET,IAAK,IAAI9qK,EAAI,EAAGA,EAAI4xK,EAAQ5xK,IAAK,CAC/B,IAAIjkC,EAAIuO,EAAO01B,GACf6W,GAAKt8B,EAAexe,EAAGA,EAAG86C,GAE1BklE,EAAIp9H,KAAKsX,EAAM8F,EAAE,GAAK4qL,EAAI8sB,GAAKF,EAAOt9M,EAAM8F,EAAE,GAAK4qL,EAAI8sB,GAAKzzK,EAAI4xK,EAAS,EAAI2B,EAAQ,GACvF,CACF,CACF,CAEA,OAAOx3F,EAAI7mH,KAAK,GAClB,EAGAyc,EAAK9xB,UAAU6yN,SAAW,SAAUT,GAClC,IAAIjpN,EAAQrL,KAAKqL,MACbqsN,EAAQ13N,KAAK43N,OAEZF,IACHA,EAAQxD,EAAQoB,WAAW,SAC3BU,EAAgB0B,GAChB13N,KAAK43N,OAASF,GAGhBD,EAAoBC,EAAO,OAAQrsN,EAAOrL,MAC1Cy3N,EAAoBC,EAAO,SAAUrsN,EAAOrL,MAC5C,IAAIk5D,EAAIl5D,KAAK68B,UACTg7L,EAAqB,MAAL3+J,EAChB4+J,EAAWJ,EAAM/L,qBAAqB,UAAU,GAEpD,GAAImM,EAAU,CACZ,IAAItqN,EAAYnC,EAAMmC,UAKtB,GAAIqqN,IAAkBxsN,EAAM8J,cAAe,CACzC,IAAI8jM,EAAM//I,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GACjC1rD,GAAaggD,EAAK//C,EAAIwrM,GACxB,CAEA6e,EAASC,OAASvqN,EAAY,IAChC,CAEA,IAAIwH,EAAOhV,KAAKgV,OAAShV,KAAKgV,KAAO,IAAI4xL,GAErC5mM,KAAK8/M,cACP9qM,EAAKuwB,YACLvlC,KAAKi0B,UAAUjf,EAAMhV,KAAKiK,OAC1B+K,EAAK+7L,WACL/wM,KAAK8/M,aAAc,GAGrB4X,EAAM1iN,KAAOi4M,EAAiBj4M,EAAMhV,KAAK68B,WACzC66L,EAAMrsN,MAAM2sN,OAAS1B,EAAUt2N,KAAKsO,OAAQtO,KAAKuO,EAAGvO,KAAKoS,IAEzDikN,EAAO/B,EAASoD,GAEE,MAAdrsN,EAAMC,KACRtL,KAAK2gN,aAAa2T,EAASt0N,KAAK28B,mBAEhC38B,KAAKi4N,eAAe3D,EAExB,EAEAtgM,EAAK9xB,UAAUyyN,SAAW,SAAUL,GAClCpqN,EAAOoqN,EAASt0N,KAAK43N,QACrB53N,KAAKi4N,eAAe3D,EACtB,EAEAtgM,EAAK9xB,UAAU0yN,MAAQ,SAAUN,GAC/B+B,EAAO/B,EAASt0N,KAAK43N,QACrB53N,KAAKk4N,eAAe5D,EACtB,EAMA,IAAI6D,EAAU,SAAUzvL,GAEtB,MAAsB,kBAARA,GAAoBA,EAAIgnL,SAAyC,QAA9BhnL,EAAIgnL,QAAQ1rM,aAC/D,EAGAq8L,EAAOn+M,UAAU6yN,SAAW,SAAUT,GACpC,IAGI8D,EACAC,EAJAhtN,EAAQrL,KAAKqL,MACbsY,EAAQtY,EAAMsY,MAKlB,GAAIw0M,EAAQx0M,GAAQ,CAClB,IAAI28L,EAAM38L,EAAM28L,IAEhB,GAAIA,IAAQtgN,KAAKs4N,UACfF,EAAKp4N,KAAKu4N,YACVF,EAAKr4N,KAAKw4N,iBACL,CACL,IAAIC,EAAoB90M,EAAM+0M,aAC1BC,EAAkBF,EAAkBltN,MACpCqtN,EAAmBH,EAAkBzsN,OACzCysN,EAAkBltN,MAAQ,OAC1BktN,EAAkBzsN,OAAS,OAE3BosN,EAAKz0M,EAAMpY,MACX8sN,EAAK10M,EAAM3X,OAEXysN,EAAkBltN,MAAQotN,EAC1BF,EAAkBzsN,OAAS4sN,EAE3B54N,KAAKs4N,UAAYhY,EACjBtgN,KAAKu4N,YAAcH,EACnBp4N,KAAKw4N,aAAeH,CACtB,CAEA10M,EAAQ28L,CACV,MACM38L,IAAU3jB,KAAKs4N,YACjBF,EAAKp4N,KAAKu4N,YACVF,EAAKr4N,KAAKw4N,cAId,GAAK70M,EAAL,CAIA,IAAI1X,EAAIZ,EAAMY,GAAK,EACfC,EAAIb,EAAMa,GAAK,EACfwhN,EAAKriN,EAAME,MACXoiN,EAAKtiN,EAAMW,OACXwtF,EAAKnuF,EAAMo1M,OACX/mH,EAAKruF,EAAMq1M,QACX3T,EAAK1hM,EAAM0hM,IAAM,EACjB56I,EAAK9mD,EAAM8mD,IAAM,EACjB0mK,EAAUr/H,GAAME,EAChBg+H,EAAQ13N,KAAK43N,OAEZF,IAGHA,EAAQxD,EAAQmB,IAAI/0F,cAAc,OAClC01F,EAAgB0B,GAChB13N,KAAK43N,OAASF,GAGhB,IAEIx+J,EAFA4/J,EAAapB,EAAMrsN,MACnB0tN,GAAc,EAEdzmB,EAAS,EACTC,EAAS,EASb,GAPIvyM,KAAK68B,YACPq8B,EAAIl5D,KAAK68B,UACTy1K,EAAS9kJ,EAAK0L,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IACrCq5I,EAAS/kJ,EAAK0L,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IACrC6/J,EAAc7/J,EAAE,IAAMA,EAAE,IAGtB6/J,EAAa,CAMf,IAAIz6L,EAAK,CAACryB,EAAGC,GACTqyB,EAAK,CAACtyB,EAAIyhN,EAAIxhN,GACdsyB,EAAK,CAACvyB,EAAGC,EAAIyhN,GACbltB,EAAK,CAACx0L,EAAIyhN,EAAIxhN,EAAIyhN,GACtB/wL,EAAe0B,EAAIA,EAAI46B,GACvBt8B,EAAe2B,EAAIA,EAAI26B,GACvBt8B,EAAe4B,EAAIA,EAAI06B,GACvBt8B,EAAe6jK,EAAIA,EAAIvnI,GACvB,IAAI2zI,EAAOx/H,EAAQ/uC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIiiK,EAAG,IACvCqM,EAAOz/H,EAAQ/uC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIiiK,EAAG,IACvCu4B,EAAkB,GACtBA,EAAgBh4N,KAAK,OAAQk4D,EAAE,GAAKo5I,EAAQsjB,EAAO,OAAQ18J,EAAE,GAAKq5I,EAAQqjB,EAAO,OAAQ18J,EAAE,GAAKo5I,EAAQsjB,EAAO,OAAQ18J,EAAE,GAAKq5I,EAAQqjB,EAAO,MAAOt9M,EAAMrM,EAAIqmM,EAASp5I,EAAE,IAAK08J,EAAO,MAAOt9M,EAAMpM,EAAIqmM,EAASr5I,EAAE,KACjN4/J,EAAW/nM,QAAU,KAAOzY,EAAMu0L,GAAQ,MAAQv0L,EAAMw0L,GAAQ,OAEhEgsB,EAAWvmK,OAASsjK,EAAuB,WAAamD,EAAgBzhN,KAAK,IAAM,sBACrF,MACM2hD,IACFjtD,EAAIA,EAAIqmM,EAASp5I,EAAE,GACnBhtD,EAAIA,EAAIqmM,EAASr5I,EAAE,IAGrB4/J,EAAWvmK,OAAS,GACpBumK,EAAW1tM,KAAO9S,EAAMrM,GAAK,KAC7B6sN,EAAWztM,IAAM/S,EAAMpM,GAAK,KAG9B,IAAI+sN,EAAUj5N,KAAKk5N,SACfC,EAASn5N,KAAKo5N,QAEbH,IACHA,EAAU/E,EAAQmB,IAAI/0F,cAAc,OACpCtgI,KAAKk5N,SAAWD,GAGlB,IAAII,EAAeJ,EAAQ5tN,MAE3B,GAAIwtN,EAAS,CAEX,GAAMT,GAAMC,EAmBVgB,EAAa9tN,MAAQ+M,EAAMg6L,EAAS8lB,EAAK1K,EAAKl0H,GAAM,KACpD6/H,EAAartN,OAASsM,EAAMi6L,EAAS8lB,EAAK1K,EAAKj0H,GAAM,SApBtC,CACf,IAAI4/H,EAAW,IAAI71M,MACfmS,EAAO51B,KAEXs5N,EAAS/6C,OAAS,WAChB+6C,EAAS/6C,OAAS,KAClB65C,EAAKkB,EAAS/tN,MACd8sN,EAAKiB,EAASttN,OAEdqtN,EAAa9tN,MAAQ+M,EAAMg6L,EAAS8lB,EAAK1K,EAAKl0H,GAAM,KACpD6/H,EAAartN,OAASsM,EAAMi6L,EAAS8lB,EAAK1K,EAAKj0H,GAAM,KAErD9jE,EAAK2iM,YAAcH,EACnBxiM,EAAK4iM,aAAeH,EACpBziM,EAAK0iM,UAAY30M,CACnB,EAEA21M,EAAShZ,IAAM38L,CACjB,CAKKw1M,IACHA,EAASjF,EAAQmB,IAAI/0F,cAAc,OACnC64F,EAAO9tN,MAAMkuN,SAAW,SACxBv5N,KAAKo5N,QAAUD,GAGjB,IAAIK,EAAcL,EAAO9tN,MACzBmuN,EAAYjuN,MAAQ+M,GAAOo1M,EAAK3gB,EAAK2gB,EAAKl0H,GAAM84G,GAChDknB,EAAYxtN,OAASsM,GAAOq1M,EAAKx7J,EAAKw7J,EAAKj0H,GAAM64G,GACjDinB,EAAYjnK,OAASsjK,EAAuB,eAAiB9oB,EAAK2gB,EAAKl0H,EAAK84G,EAAS,QAAUngJ,EAAKw7J,EAAKj0H,EAAK64G,EAAS,IAElH4mB,EAAO3pL,YACVkoL,EAAM52F,YAAYq4F,GAGhBF,EAAQzpL,YAAc2pL,GACxBA,EAAOr4F,YAAYm4F,EAEvB,MACEI,EAAa9tN,MAAQ+M,EAAMg6L,EAASob,GAAM,KAC1C2L,EAAartN,OAASsM,EAAMi6L,EAASob,GAAM,KAC3C+J,EAAM52F,YAAYm4F,GAEdE,GAAUA,EAAO3pL,aACnBkoL,EAAMt3F,YAAY+4F,GAClBn5N,KAAKo5N,QAAU,MAInB,IAAIK,EAAY,GACZj1L,EAAQn5B,EAAMoB,QAEd+3B,EAAQ,IACVi1L,GAAa,kBAAoBnhN,EAAc,IAARksB,GAAe,MAGxDi1L,GAAa5D,EAAuB,yBAA2BlyM,EAAQ,wBACvE01M,EAAa9mK,OAASknK,EACtB/B,EAAMrsN,MAAM2sN,OAAS1B,EAAUt2N,KAAKsO,OAAQtO,KAAKuO,EAAGvO,KAAKoS,IAEzDikN,EAAO/B,EAASoD,GAEE,MAAdrsN,EAAMC,MACRtL,KAAK2gN,aAAa2T,EAASt0N,KAAK28B,kBAhJlC,CAkJF,EAEA0jL,EAAOn+M,UAAUyyN,SAAW,SAAUL,GACpCpqN,EAAOoqN,EAASt0N,KAAK43N,QACrB53N,KAAK43N,OAAS,KACd53N,KAAKo5N,QAAU,KACfp5N,KAAKk5N,SAAW,KAChBl5N,KAAKi4N,eAAe3D,EACtB,EAEAjU,EAAOn+M,UAAU0yN,MAAQ,SAAUN,GACjC+B,EAAO/B,EAASt0N,KAAK43N,QACrB53N,KAAKk4N,eAAe5D,EACtB,EAMA,IAsCIoF,EAtCAC,EAAuB,SACvBC,EAAiB,CAAC,EAClBC,EAAsB,EACtBC,EAAsB,IACtBC,EAAS15F,SAASC,cAAc,OAEhC05F,EAAe,SAAUC,GAC3B,IAAI/oL,EAAY0oL,EAAeK,GAE/B,IAAK/oL,EAAW,CAEV2oL,EAAsBC,IACxBD,EAAsB,EACtBD,EAAiB,CAAC,GAGpB,IACIxoL,EADA/lC,EAAQ0uN,EAAO1uN,MAGnB,IACEA,EAAM6a,KAAO+zM,EACb7oL,EAAa/lC,EAAM+lC,WAAWvP,MAAM,KAAK,EAC3C,CAAE,MAAOnF,GAAI,CAEbwU,EAAY,CACV7lC,MAAOA,EAAM6lC,WAAayoL,EAC1BO,QAAS7uN,EAAM8uN,aAAeR,EAC9B5B,OAAQ1sN,EAAM8lC,YAAcwoL,EAC5BzrN,KAAyC,EAAnC8gH,WAAW3jH,EAAMulB,UAAY,IACnCwpM,OAAQhpL,GAAc,mBAExBwoL,EAAeK,GAAc/oL,EAC7B2oL,GACF,CAEA,OAAO3oL,CACT,EAIAuc,EAAYo6G,UAAU,eAAe,SAAUv8J,EAAM41D,GACnD,IAAIm0J,EAAMnB,EAAQmB,IAEbqE,IACHA,EAAgBrE,EAAI/0F,cAAc,OAClCo5F,EAAcruN,MAAMk1H,QAAU,wFAC9B2zF,EAAQmB,IAAIgF,KAAKv5F,YAAY44F,IAG/B,IACEA,EAAcruN,MAAM6a,KAAOg7C,CAC7B,CAAE,MAAOo5J,GAAK,CAMd,OAHAZ,EAAcl5F,UAAY,GAE1Bk5F,EAAc54F,YAAYu0F,EAAI/G,eAAehjN,IACtC,CACLC,MAAOmuN,EAAca,YAEzB,IAiMA,IAhMA,IAAI1kC,EAAU,IAAI7xH,EAEd28I,GAAe,SAAU2T,EAAS5pN,EAAMwkD,EAAUsrK,GACpD,IAAInvN,EAAQrL,KAAKqL,MAEjBrL,KAAKyvC,SAAWszK,EAAWC,mBAAmB33M,GAAO,GACrD,IAAIC,EAAOD,EAAMC,KAIjB,GAFQ,MAARA,IAAiBA,GAAQ,IAEpBA,EAAL,CAMA,GAAID,EAAMw2K,KAAM,CACd,IAAIgoB,EAAep8I,EAAYy8I,cAAc5+L,EAAMD,GACnDC,EAAO,GAEP,IAAK,IAAI2K,EAAI,EAAGA,EAAI4zL,EAAa3kH,MAAM/wE,OAAQ8B,IAAK,CAIlD,IAHA,IAAIs1L,EAAS1B,EAAa3kH,MAAMjvE,GAAGs1L,OAC/BZ,EAAW,GAENr3K,EAAI,EAAGA,EAAIi4K,EAAOp3L,OAAQmf,IACjCq3K,EAAS3pM,KAAKuqM,EAAOj4K,GAAGhoB,MAG1BA,EAAKtK,KAAK2pM,EAASpzL,KAAK,IAC1B,CAEAjM,EAAOA,EAAKiM,KAAK,KACnB,CAEA,IAAItL,EACAC,EACAguE,EAAQ7uE,EAAMkiB,UACdE,EAAgBpiB,EAAMmiB,kBACtB0jB,EAAY8oL,EAAa3uN,EAAM6a,MAE/BA,EAAOgrB,EAAU7lC,MAAQ,IAAM6lC,EAAUgpL,QAAU,IAAMhpL,EAAU6mL,OAAS,IAAM7mL,EAAUhjC,KAAO,OAASgjC,EAAUkpL,OAAS,IACnIlrK,EAAWA,GAAYzB,EAAY9wB,gBAAgBrxB,EAAM4a,EAAMg0D,EAAOzsD,GAEtE,IAAIyrC,EAAIl5D,KAAK68B,UAQb,GANIq8B,IAAMshK,IACR3kC,EAAQn2J,KAAKh1B,GACbmrL,EAAQj5J,eAAes8B,GACvBxuD,EAAOmrL,GAGJ2kC,EAiBHvuN,EAAIvB,EAAKuB,EACTC,EAAIxB,EAAKwB,MAlBM,CACf,IAAIoN,EAAejO,EAAMiO,aACrBkX,EAAWnlB,EAAMmgK,aAErB,GAAIlyJ,aAAwB+lB,MAC1BpzB,EAAIvB,EAAKuB,EAAIgE,EAAaqJ,EAAa,GAAI5O,EAAKa,OAChDW,EAAIxB,EAAKwB,EAAI+D,EAAaqJ,EAAa,GAAI5O,EAAKsB,QAChDkuE,EAAQA,GAAS,WACZ,CACL,IAAI/0E,EAAMsoD,EAAY08I,yBAAyB7wL,EAAc5O,EAAM8lB,GACnEvkB,EAAI9G,EAAI8G,EACRC,EAAI/G,EAAI+G,EAERguE,EAAQA,GAAS/0E,EAAIooB,UACrBE,EAAgBA,GAAiBtoB,EAAIqoB,iBACvC,CACF,CAKAvhB,EAAIwhD,EAAYs8I,YAAY99L,EAAGijD,EAAS3jD,MAAO2uE,GAC/ChuE,EAAIuhD,EAAYu8I,YAAY99L,EAAGgjD,EAASljD,OAAQyhB,GAEhDvhB,GAAKgjD,EAASljD,OAAS,EAoCvB,IAEI4iN,EACA6L,EACAC,EAJApF,EAAapB,EAAQoB,WACrBqF,EAAY36N,KAAK46N,WAKhBD,GAmBHD,EAASC,EAAUjgC,WACnBk0B,EAAS8L,EAAOlgC,YAChBigC,EAAa7L,EAAOp0B,cApBpBmgC,EAAYrF,EAAW,QACvB1G,EAAS0G,EAAW,QACpBmF,EAAanF,EAAW,YACxBoF,EAASpF,EAAW,QAGpBmF,EAAWpvN,MAAM,gBAAkB,OACnC2qN,EAAgB2E,GAChB/L,EAAOiM,YAAa,EACpBJ,EAAWn6N,IAAK,EAChBq6N,EAAUpzK,KAAO,MACjBozK,EAAU19G,GAAK,YACfo5G,EAAOsE,EAAWD,GAClBrE,EAAOsE,EAAW/L,GAClByH,EAAOsE,EAAWF,GAClBz6N,KAAK46N,WAAaD,GAQpB,IAAIt3K,EAAS,CAACp3C,EAAGC,GACb4uN,EAAiBH,EAAUtvN,MAE3B6tD,GAAKshK,GACP59L,EAAeymB,EAAQA,EAAQ6V,GAC/BwhK,EAAOp6N,IAAK,EACZo6N,EAAOz2J,OAAS/K,EAAE,GAAGhuC,QAAQ,GAAK0qM,EAAQ18J,EAAE,GAAGhuC,QAAQ,GAAK0qM,EAAQ18J,EAAE,GAAGhuC,QAAQ,GAAK0qM,EAAQ18J,EAAE,GAAGhuC,QAAQ,GAAK,OAEhHwvM,EAAOzsN,QAAUqK,EAAM+qC,EAAO,KAAO,GAAK,KAAO/qC,EAAM+qC,EAAO,KAAO,GAErEq3K,EAAOl2M,OAAS,MAChBs2M,EAAe1vM,KAAO,MACtB0vM,EAAezvM,IAAM,QAErBqvM,EAAOp6N,IAAK,EACZw6N,EAAe1vM,KAAO9S,EAAMrM,GAAK,KACjC6uN,EAAezvM,IAAM/S,EAAMpM,GAAK,MAGlCuuN,EAAWM,OAAS5E,EAAoB7qN,GAExC,IACEmvN,EAAWpvN,MAAM6a,KAAOA,CAC1B,CACA,MAAOwW,GAAI,CAEX+6L,EAAoBkD,EAAW,OAAQ,CACrC1tN,KAAM5B,EAAMuZ,SACZnY,QAASpB,EAAMoB,SACdzM,MACHy3N,EAAoBkD,EAAW,SAAU,CACvCjkN,OAAQrL,EAAMwZ,WACdpY,QAASpB,EAAMoB,QACfkM,SAAUtN,EAAMsN,UACf3Y,MACH26N,EAAUtvN,MAAM2sN,OAAS1B,EAAUt2N,KAAKsO,OAAQtO,KAAKuO,EAAGvO,KAAKoS,IAE7DikN,EAAO/B,EAASqG,EAtKhB,CAuKF,EAEI1C,GAAiB,SAAU3D,GAC7BpqN,EAAOoqN,EAASt0N,KAAK46N,YACrB56N,KAAK46N,WAAa,IACpB,EAEI1C,GAAiB,SAAU5D,GAC7B+B,EAAO/B,EAASt0N,KAAK46N,WACvB,EAEIj4N,GAAO,CAACs9M,EAAUC,EAAaG,EAAQrsL,EAAMpQ,GAExC3N,GAAI,EAAGA,GAAItT,GAAKwR,OAAQ8B,KAAK,CACpC,IAAIilG,GAAQv4G,GAAKsT,IAAG/T,UACpBg5G,GAAMylG,aAAeA,GACrBzlG,GAAM+8G,eAAiBA,GACvB/8G,GAAMg9G,eAAiBA,EACzB,CAEAt0M,EAAK1hB,UAAU6yN,SAAW,SAAUT,GAClC,IAAIjpN,EAAQrL,KAAKqL,MAEC,MAAdA,EAAMC,KACRtL,KAAK2gN,aAAa2T,EAAS,CACzBroN,EAAGZ,EAAMY,GAAK,EACdC,EAAGb,EAAMa,GAAK,EACdX,MAAO,EACPS,OAAQ,GACPhM,KAAK28B,mBAAmB,GAE3B38B,KAAKi4N,eAAe3D,EAExB,EAEA1wM,EAAK1hB,UAAUyyN,SAAW,SAAUL,GAClCt0N,KAAKi4N,eAAe3D,EACtB,EAEA1wM,EAAK1hB,UAAU0yN,MAAQ,SAAUN,GAC/Bt0N,KAAKk4N,eAAe5D,EACtB,CACF,C,wBCp/BA7yN,EAAQ,MAER,IAAIouN,EAAWpuN,EAAQ,OAEnBquN,EAAkBD,EAASC,gBAE3Bt5B,EAAU/0L,EAAQ,OAEtBquN,EAAgB,MAAOt5B,E,wBCRvB,IAAI3F,EAAOpvL,EAAQ,OAEfy+E,EAAMz+E,EAAQ,OAEdK,EAASL,EAAQ,OAEjBywL,EAAUzwL,EAAQ,OAElBq7L,EAAUr7L,EAAQ,OAElB+0L,EAAU/0L,EAAQ,OAElB48L,EAAY58L,EAAQ,OAEpBu5N,EAAev5N,EAAQ,OAWvBw5N,GAAU/6I,EAAIghB,gBACdg6H,EAAe,CACjBz3L,OAAQ+yJ,GAENp1B,EAAY,CAAC,EAMbnE,EAAU,QAYd,SAAS5zI,EAAK+0I,EAAKr8H,GACjB,IAAIwiB,EAAK,IAAI42K,EAAQtqC,IAAQzyB,EAAKr8H,GAElC,OADAq/H,EAAU78G,EAAGl+B,IAAMk+B,EACZA,CACT,CAOA,SAASj8C,EAAQi8C,GACf,GAAIA,EACFA,EAAGj8C,cACE,CACL,IAAK,IAAI3G,KAAOy/J,EACVA,EAAUx/J,eAAeD,IAC3By/J,EAAUz/J,GAAK2G,UAInB84J,EAAY,CAAC,CACf,CAEA,OAAOphK,IACT,CAQA,SAASo7N,EAAY/0M,GACnB,OAAO+6I,EAAU/6I,EACnB,CAEA,SAASypM,EAAgBtsN,EAAMuoE,GAC7BmvJ,EAAa13N,GAAQuoE,CACvB,CAEA,SAASsvJ,EAAYh1M,UACZ+6I,EAAU/6I,EACnB,CAkBA,IAAI80M,EAAU,SAAU90M,EAAI+3I,EAAKr8H,GAC/BA,EAAOA,GAAQ,CAAC,EAKhB/hC,KAAKo+J,IAAMA,EAKXp+J,KAAKqmB,GAAKA,EACV,IAAIuP,EAAO51B,KACPunE,EAAU,IAAIu1H,EACdw+B,EAAev5L,EAAKy8H,SAExB,GAAIy8D,EAAQ,CACV,IAAKC,EAAaK,IAChB,MAAM,IAAIl6F,MAAM,wDAGlBi6F,EAAe,KACjB,MAAYA,GAAiBJ,EAAaI,KACxCA,EAAe,UAGjB,IAAI72K,EAAU,IAAIy2K,EAAaI,GAAcl9D,EAAK72F,EAASxlC,GAC3D/hC,KAAKunE,QAAUA,EACfvnE,KAAKykD,QAAUA,EACf,IAAI+2K,EAAet7I,EAAIlkD,KAAqD,KAA9C,IAAIg/L,EAAav2K,EAAQizI,mBACvD13L,KAAKmgF,QAAU,IAAI+xG,EAAQ3qH,EAAS9iB,EAAS+2K,EAAa/2K,EAAQiV,MAKlE15D,KAAK+pD,UAAY,IAAIs0I,EAAU,CAC7BC,MAAO,CACLz7L,OAAQf,EAAO2B,KAAKzD,KAAKowE,MAAOpwE,SAGpCA,KAAK+pD,UAAUxrC,QAMfve,KAAKy7N,cAGL,IAAIhH,EAAoBltJ,EAAQy2H,eAC5B02B,EAAkBntJ,EAAQs2H,aAE9Bt2H,EAAQy2H,eAAiB,SAAUv0L,GACjCgrN,EAAkB98M,KAAK4vD,EAAS99D,GAChCA,GAAMA,EAAG4nL,iBAAiBz7J,EAC5B,EAEA2xC,EAAQs2H,aAAe,SAAUp0L,GAC/BirN,EAAgB/8M,KAAK4vD,EAAS99D,GAC9BA,EAAG0nL,YAAYv7J,EACjB,CACF,EAEAulM,EAAQj5N,UAAY,CAClBC,YAAag5N,EAMbn4L,MAAO,WACL,OAAOhjC,KAAKqmB,EACd,EAMAld,IAAK,SAAUM,GACbzJ,KAAKunE,QAAQm2H,QAAQj0L,GACrBzJ,KAAKy7N,eAAgB,CACvB,EAMAvxN,OAAQ,SAAUT,GAChBzJ,KAAKunE,QAAQu2H,QAAQr0L,GACrBzJ,KAAKy7N,eAAgB,CACvB,EAUA32K,YAAa,SAAU42K,EAAQlnC,GAC7Bx0L,KAAKykD,QAAQK,YAAY42K,EAAQlnC,GACjCx0L,KAAKy7N,eAAgB,CACvB,EAKAj6D,mBAAoB,WAIlBxhK,KAAKy7N,eAAgB,EACrBz7N,KAAKykD,QAAQysI,UAKblxL,KAAKy7N,eAAgB,CAKvB,EAKAvqC,QAAS,WACPlxL,KAAKy7N,eAAgB,CACvB,EAKArrJ,MAAO,WACDpwE,KAAKy7N,eACPz7N,KAAKwhK,qBAGHxhK,KAAK27N,oBACP37N,KAAK47N,yBAET,EAOAp8C,SAAU,SAAU/1K,EAAI4B,GAClBrL,KAAKykD,QAAQ+6H,WACfx/K,KAAKykD,QAAQ+6H,SAAS/1K,EAAI4B,GAC1BrL,KAAK83L,eAET,EAMA/X,YAAa,SAAUt2K,GACjBzJ,KAAKykD,QAAQs7H,cACf//K,KAAKykD,QAAQs7H,YAAYt2K,GACzBzJ,KAAK83L,eAET,EAMAK,WAAY,WACNn4L,KAAKykD,QAAQ0zI,aACfn4L,KAAKykD,QAAQ0zI,aACbn4L,KAAK83L,eAET,EAKAA,aAAc,WACZ93L,KAAK27N,oBAAqB,CAC5B,EAKAC,wBAAyB,WACvB57N,KAAK27N,oBAAqB,EAC1B37N,KAAKykD,QAAQqzI,cAAgB93L,KAAKykD,QAAQqzI,cAC5C,EASAzxC,OAAQ,SAAUtkH,GAChBA,EAAOA,GAAQ,CAAC,EAChB/hC,KAAKykD,QAAQ4hG,OAAOtkH,EAAKx2B,MAAOw2B,EAAK/1B,QACrChM,KAAKmgF,QAAQkmE,QACf,EAKAw1E,eAAgB,WACd77N,KAAK+pD,UAAUnF,OACjB,EAKA3zC,SAAU,WACR,OAAOjR,KAAKykD,QAAQxzC,UACtB,EAKAC,UAAW,WACT,OAAOlR,KAAKykD,QAAQvzC,WACtB,EAqBAirL,YAAa,SAAUz/J,EAAG8jI,GACxB,OAAOxgK,KAAKykD,QAAQ03I,YAAYz/J,EAAG8jI,EACrC,EAMA1nD,eAAgB,SAAU5rG,GACxBlN,KAAKmgF,QAAQ24B,eAAe5rG,EAC9B,EAQAg9H,UAAW,SAAUj+H,EAAGC,GACtB,OAAOlM,KAAKmgF,QAAQ+pD,UAAUj+H,EAAGC,EACnC,EASA5L,GAAI,SAAUq0G,EAAW0+E,EAAc57K,GACrCzX,KAAKmgF,QAAQ7/E,GAAGq0G,EAAW0+E,EAAc57K,EAC3C,EAOAP,IAAK,SAAUy9F,EAAW0+E,GACxBrzL,KAAKmgF,QAAQjpE,IAAIy9F,EAAW0+E,EAC9B,EAQAn9K,QAAS,SAAUy+F,EAAW7vG,GAC5B9E,KAAKmgF,QAAQjqE,QAAQy+F,EAAW7vG,EAClC,EAKA8/C,MAAO,WACL5kD,KAAKunE,QAAQu2H,UACb99L,KAAKykD,QAAQG,OACf,EAKAt8C,QAAS,WACPtI,KAAK+pD,UAAU1M,OACfr9C,KAAK4kD,QACL5kD,KAAKunE,QAAQj/D,UACbtI,KAAKykD,QAAQn8C,UACbtI,KAAKmgF,QAAQ73E,UACbtI,KAAK+pD,UAAY/pD,KAAKunE,QAAUvnE,KAAKykD,QAAUzkD,KAAKmgF,QAAU,KAC9Dk7I,EAAYr7N,KAAKqmB,GACnB,GAEFxkB,EAAQo7J,QAAUA,EAClBp7J,EAAQwnB,KAAOA,EACfxnB,EAAQyG,QAAUA,EAClBzG,EAAQu5N,YAAcA,EACtBv5N,EAAQiuN,gBAAkBA,C","sources":["webpack://as-web/./src/components/Header.vue","webpack://as-web/src/components/Header.vue","webpack://as-web/./src/components/Header.vue?6efa","webpack://as-web/./src/components/Header.vue?03e2","webpack://as-web/./node_modules/echarts/index.js","webpack://as-web/./node_modules/echarts/lib/CoordinateSystem.js","webpack://as-web/./node_modules/echarts/lib/ExtensionAPI.js","webpack://as-web/./node_modules/echarts/lib/action/createDataSelectAction.js","webpack://as-web/./node_modules/echarts/lib/action/geoRoam.js","webpack://as-web/./node_modules/echarts/lib/action/roamHelper.js","webpack://as-web/./node_modules/echarts/lib/chart/bar.js","webpack://as-web/./node_modules/echarts/lib/chart/bar/BarSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/bar/BarView.js","webpack://as-web/./node_modules/echarts/lib/chart/bar/BaseBarSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/bar/PictorialBarSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/bar/PictorialBarView.js","webpack://as-web/./node_modules/echarts/lib/chart/bar/barItemStyle.js","webpack://as-web/./node_modules/echarts/lib/chart/bar/helper.js","webpack://as-web/./node_modules/echarts/lib/chart/boxplot.js","webpack://as-web/./node_modules/echarts/lib/chart/boxplot/BoxplotSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/boxplot/BoxplotView.js","webpack://as-web/./node_modules/echarts/lib/chart/boxplot/boxplotLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/boxplot/boxplotVisual.js","webpack://as-web/./node_modules/echarts/lib/chart/candlestick.js","webpack://as-web/./node_modules/echarts/lib/chart/candlestick/CandlestickSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/candlestick/CandlestickView.js","webpack://as-web/./node_modules/echarts/lib/chart/candlestick/candlestickLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/candlestick/candlestickVisual.js","webpack://as-web/./node_modules/echarts/lib/chart/candlestick/preprocessor.js","webpack://as-web/./node_modules/echarts/lib/chart/custom.js","webpack://as-web/./node_modules/echarts/lib/chart/effectScatter.js","webpack://as-web/./node_modules/echarts/lib/chart/effectScatter/EffectScatterSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/effectScatter/EffectScatterView.js","webpack://as-web/./node_modules/echarts/lib/chart/funnel.js","webpack://as-web/./node_modules/echarts/lib/chart/funnel/FunnelSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/funnel/FunnelView.js","webpack://as-web/./node_modules/echarts/lib/chart/funnel/funnelLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/gauge.js","webpack://as-web/./node_modules/echarts/lib/chart/gauge/GaugeSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/gauge/GaugeView.js","webpack://as-web/./node_modules/echarts/lib/chart/gauge/PointerPath.js","webpack://as-web/./node_modules/echarts/lib/chart/graph.js","webpack://as-web/./node_modules/echarts/lib/chart/graph/GraphSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/graph/GraphView.js","webpack://as-web/./node_modules/echarts/lib/chart/graph/adjustEdge.js","webpack://as-web/./node_modules/echarts/lib/chart/graph/categoryFilter.js","webpack://as-web/./node_modules/echarts/lib/chart/graph/categoryVisual.js","webpack://as-web/./node_modules/echarts/lib/chart/graph/circularLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/graph/circularLayoutHelper.js","webpack://as-web/./node_modules/echarts/lib/chart/graph/createView.js","webpack://as-web/./node_modules/echarts/lib/chart/graph/edgeVisual.js","webpack://as-web/./node_modules/echarts/lib/chart/graph/forceHelper.js","webpack://as-web/./node_modules/echarts/lib/chart/graph/forceLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/graph/graphAction.js","webpack://as-web/./node_modules/echarts/lib/chart/graph/simpleLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/graph/simpleLayoutHelper.js","webpack://as-web/./node_modules/echarts/lib/chart/heatmap.js","webpack://as-web/./node_modules/echarts/lib/chart/heatmap/HeatmapLayer.js","webpack://as-web/./node_modules/echarts/lib/chart/heatmap/HeatmapSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/heatmap/HeatmapView.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/EffectLine.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/EffectPolyline.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/EffectSymbol.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/LargeLineDraw.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/LargeSymbolDraw.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/Line.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/LineDraw.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/LinePath.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/Polyline.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/Symbol.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/SymbolDraw.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/WhiskerBoxDraw.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/createGraphFromNodeEdge.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/createListFromArray.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/labelHelper.js","webpack://as-web/./node_modules/echarts/lib/chart/helper/whiskerBoxCommon.js","webpack://as-web/./node_modules/echarts/lib/chart/line.js","webpack://as-web/./node_modules/echarts/lib/chart/line/LineSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/line/LineView.js","webpack://as-web/./node_modules/echarts/lib/chart/line/lineAnimationDiff.js","webpack://as-web/./node_modules/echarts/lib/chart/line/poly.js","webpack://as-web/./node_modules/echarts/lib/chart/lines.js","webpack://as-web/./node_modules/echarts/lib/chart/lines/LinesSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/lines/LinesView.js","webpack://as-web/./node_modules/echarts/lib/chart/lines/linesLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/lines/linesVisual.js","webpack://as-web/./node_modules/echarts/lib/chart/map.js","webpack://as-web/./node_modules/echarts/lib/chart/map/MapSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/map/MapView.js","webpack://as-web/./node_modules/echarts/lib/chart/map/backwardCompat.js","webpack://as-web/./node_modules/echarts/lib/chart/map/mapDataStatistic.js","webpack://as-web/./node_modules/echarts/lib/chart/map/mapSymbolLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/map/mapVisual.js","webpack://as-web/./node_modules/echarts/lib/chart/parallel.js","webpack://as-web/./node_modules/echarts/lib/chart/parallel/ParallelSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/parallel/ParallelView.js","webpack://as-web/./node_modules/echarts/lib/chart/parallel/parallelVisual.js","webpack://as-web/./node_modules/echarts/lib/chart/pictorialBar.js","webpack://as-web/./node_modules/echarts/lib/chart/pie.js","webpack://as-web/./node_modules/echarts/lib/chart/pie/PieSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/pie/PieView.js","webpack://as-web/./node_modules/echarts/lib/chart/pie/labelLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/pie/pieLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/radar.js","webpack://as-web/./node_modules/echarts/lib/chart/radar/RadarSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/radar/RadarView.js","webpack://as-web/./node_modules/echarts/lib/chart/radar/backwardCompat.js","webpack://as-web/./node_modules/echarts/lib/chart/radar/radarLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/sankey.js","webpack://as-web/./node_modules/echarts/lib/chart/sankey/SankeySeries.js","webpack://as-web/./node_modules/echarts/lib/chart/sankey/SankeyView.js","webpack://as-web/./node_modules/echarts/lib/chart/sankey/sankeyLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/sankey/sankeyVisual.js","webpack://as-web/./node_modules/echarts/lib/chart/scatter.js","webpack://as-web/./node_modules/echarts/lib/chart/scatter/ScatterSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/scatter/ScatterView.js","webpack://as-web/./node_modules/echarts/lib/chart/themeRiver.js","webpack://as-web/./node_modules/echarts/lib/chart/themeRiver/ThemeRiverSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/themeRiver/ThemeRiverView.js","webpack://as-web/./node_modules/echarts/lib/chart/themeRiver/themeRiverLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/themeRiver/themeRiverVisual.js","webpack://as-web/./node_modules/echarts/lib/chart/tree.js","webpack://as-web/./node_modules/echarts/lib/chart/tree/TreeSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/tree/TreeView.js","webpack://as-web/./node_modules/echarts/lib/chart/tree/commonLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/tree/layoutHelper.js","webpack://as-web/./node_modules/echarts/lib/chart/tree/orthogonalLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/tree/radialLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/tree/traversalHelper.js","webpack://as-web/./node_modules/echarts/lib/chart/tree/treeAction.js","webpack://as-web/./node_modules/echarts/lib/chart/treemap.js","webpack://as-web/./node_modules/echarts/lib/chart/treemap/Breadcrumb.js","webpack://as-web/./node_modules/echarts/lib/chart/treemap/TreemapSeries.js","webpack://as-web/./node_modules/echarts/lib/chart/treemap/TreemapView.js","webpack://as-web/./node_modules/echarts/lib/chart/treemap/helper.js","webpack://as-web/./node_modules/echarts/lib/chart/treemap/treemapAction.js","webpack://as-web/./node_modules/echarts/lib/chart/treemap/treemapLayout.js","webpack://as-web/./node_modules/echarts/lib/chart/treemap/treemapVisual.js","webpack://as-web/./node_modules/echarts/lib/component/angleAxis.js","webpack://as-web/./node_modules/echarts/lib/component/axis.js","webpack://as-web/./node_modules/echarts/lib/component/axisPointer.js","webpack://as-web/./node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","webpack://as-web/./node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","webpack://as-web/./node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","webpack://as-web/./node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","webpack://as-web/./node_modules/echarts/lib/component/axisPointer/PolarAxisPointer.js","webpack://as-web/./node_modules/echarts/lib/component/axisPointer/SingleAxisPointer.js","webpack://as-web/./node_modules/echarts/lib/component/axisPointer/axisTrigger.js","webpack://as-web/./node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","webpack://as-web/./node_modules/echarts/lib/component/axisPointer/globalListener.js","webpack://as-web/./node_modules/echarts/lib/component/axisPointer/modelHelper.js","webpack://as-web/./node_modules/echarts/lib/component/axisPointer/viewHelper.js","webpack://as-web/./node_modules/echarts/lib/component/axis/AngleAxisView.js","webpack://as-web/./node_modules/echarts/lib/component/axis/AxisBuilder.js","webpack://as-web/./node_modules/echarts/lib/component/axis/AxisView.js","webpack://as-web/./node_modules/echarts/lib/component/axis/CartesianAxisView.js","webpack://as-web/./node_modules/echarts/lib/component/axis/ParallelAxisView.js","webpack://as-web/./node_modules/echarts/lib/component/axis/RadiusAxisView.js","webpack://as-web/./node_modules/echarts/lib/component/axis/SingleAxisView.js","webpack://as-web/./node_modules/echarts/lib/component/axis/cartesianAxisHelper.js","webpack://as-web/./node_modules/echarts/lib/component/axis/parallelAxisAction.js","webpack://as-web/./node_modules/echarts/lib/component/axis/singleAxisHelper.js","webpack://as-web/./node_modules/echarts/lib/component/brush.js","webpack://as-web/./node_modules/echarts/lib/component/brush/BrushModel.js","webpack://as-web/./node_modules/echarts/lib/component/brush/BrushView.js","webpack://as-web/./node_modules/echarts/lib/component/brush/brushAction.js","webpack://as-web/./node_modules/echarts/lib/component/brush/preprocessor.js","webpack://as-web/./node_modules/echarts/lib/component/brush/selector.js","webpack://as-web/./node_modules/echarts/lib/component/brush/visualEncoding.js","webpack://as-web/./node_modules/echarts/lib/component/calendar.js","webpack://as-web/./node_modules/echarts/lib/component/calendar/CalendarView.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoomSelect.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/AxisProxy.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/DataZoomModel.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/DataZoomView.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/InsideZoomModel.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/InsideZoomView.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/SliderZoomModel.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/SliderZoomView.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/dataZoomAction.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/dataZoomProcessor.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/helper.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/history.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/roams.js","webpack://as-web/./node_modules/echarts/lib/component/dataZoom/typeDefaulter.js","webpack://as-web/./node_modules/echarts/lib/component/geo.js","webpack://as-web/./node_modules/echarts/lib/component/geo/GeoView.js","webpack://as-web/./node_modules/echarts/lib/component/graphic.js","webpack://as-web/./node_modules/echarts/lib/component/grid.js","webpack://as-web/./node_modules/echarts/lib/component/gridSimple.js","webpack://as-web/./node_modules/echarts/lib/component/helper/BrushController.js","webpack://as-web/./node_modules/echarts/lib/component/helper/BrushTargetManager.js","webpack://as-web/./node_modules/echarts/lib/component/helper/MapDraw.js","webpack://as-web/./node_modules/echarts/lib/component/helper/RoamController.js","webpack://as-web/./node_modules/echarts/lib/component/helper/brushHelper.js","webpack://as-web/./node_modules/echarts/lib/component/helper/cursorHelper.js","webpack://as-web/./node_modules/echarts/lib/component/helper/interactionMutex.js","webpack://as-web/./node_modules/echarts/lib/component/helper/listComponent.js","webpack://as-web/./node_modules/echarts/lib/component/helper/roamHelper.js","webpack://as-web/./node_modules/echarts/lib/component/helper/selectableMixin.js","webpack://as-web/./node_modules/echarts/lib/component/helper/sliderMove.js","webpack://as-web/./node_modules/echarts/lib/component/legend.js","webpack://as-web/./node_modules/echarts/lib/component/legendScroll.js","webpack://as-web/./node_modules/echarts/lib/component/legend/LegendModel.js","webpack://as-web/./node_modules/echarts/lib/component/legend/LegendView.js","webpack://as-web/./node_modules/echarts/lib/component/legend/ScrollableLegendModel.js","webpack://as-web/./node_modules/echarts/lib/component/legend/ScrollableLegendView.js","webpack://as-web/./node_modules/echarts/lib/component/legend/legendAction.js","webpack://as-web/./node_modules/echarts/lib/component/legend/legendFilter.js","webpack://as-web/./node_modules/echarts/lib/component/legend/scrollableLegendAction.js","webpack://as-web/./node_modules/echarts/lib/component/markArea.js","webpack://as-web/./node_modules/echarts/lib/component/markLine.js","webpack://as-web/./node_modules/echarts/lib/component/markPoint.js","webpack://as-web/./node_modules/echarts/lib/component/marker/MarkAreaModel.js","webpack://as-web/./node_modules/echarts/lib/component/marker/MarkAreaView.js","webpack://as-web/./node_modules/echarts/lib/component/marker/MarkLineModel.js","webpack://as-web/./node_modules/echarts/lib/component/marker/MarkLineView.js","webpack://as-web/./node_modules/echarts/lib/component/marker/MarkPointModel.js","webpack://as-web/./node_modules/echarts/lib/component/marker/MarkPointView.js","webpack://as-web/./node_modules/echarts/lib/component/marker/MarkerModel.js","webpack://as-web/./node_modules/echarts/lib/component/marker/MarkerView.js","webpack://as-web/./node_modules/echarts/lib/component/marker/markerHelper.js","webpack://as-web/./node_modules/echarts/lib/component/parallel.js","webpack://as-web/./node_modules/echarts/lib/component/parallelAxis.js","webpack://as-web/./node_modules/echarts/lib/component/polar.js","webpack://as-web/./node_modules/echarts/lib/component/radar.js","webpack://as-web/./node_modules/echarts/lib/component/radar/RadarView.js","webpack://as-web/./node_modules/echarts/lib/component/radiusAxis.js","webpack://as-web/./node_modules/echarts/lib/component/singleAxis.js","webpack://as-web/./node_modules/echarts/lib/component/timeline.js","webpack://as-web/./node_modules/echarts/lib/component/timeline/SliderTimelineModel.js","webpack://as-web/./node_modules/echarts/lib/component/timeline/SliderTimelineView.js","webpack://as-web/./node_modules/echarts/lib/component/timeline/TimelineAxis.js","webpack://as-web/./node_modules/echarts/lib/component/timeline/TimelineModel.js","webpack://as-web/./node_modules/echarts/lib/component/timeline/TimelineView.js","webpack://as-web/./node_modules/echarts/lib/component/timeline/preprocessor.js","webpack://as-web/./node_modules/echarts/lib/component/timeline/timelineAction.js","webpack://as-web/./node_modules/echarts/lib/component/timeline/typeDefaulter.js","webpack://as-web/./node_modules/echarts/lib/component/title.js","webpack://as-web/./node_modules/echarts/lib/component/toolbox.js","webpack://as-web/./node_modules/echarts/lib/component/toolbox/ToolboxModel.js","webpack://as-web/./node_modules/echarts/lib/component/toolbox/ToolboxView.js","webpack://as-web/./node_modules/echarts/lib/component/toolbox/featureManager.js","webpack://as-web/./node_modules/echarts/lib/component/toolbox/feature/Brush.js","webpack://as-web/./node_modules/echarts/lib/component/toolbox/feature/DataView.js","webpack://as-web/./node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","webpack://as-web/./node_modules/echarts/lib/component/toolbox/feature/MagicType.js","webpack://as-web/./node_modules/echarts/lib/component/toolbox/feature/Restore.js","webpack://as-web/./node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","webpack://as-web/./node_modules/echarts/lib/component/tooltip.js","webpack://as-web/./node_modules/echarts/lib/component/tooltip/TooltipContent.js","webpack://as-web/./node_modules/echarts/lib/component/tooltip/TooltipModel.js","webpack://as-web/./node_modules/echarts/lib/component/tooltip/TooltipView.js","webpack://as-web/./node_modules/echarts/lib/component/visualMap.js","webpack://as-web/./node_modules/echarts/lib/component/visualMapContinuous.js","webpack://as-web/./node_modules/echarts/lib/component/visualMapPiecewise.js","webpack://as-web/./node_modules/echarts/lib/component/visualMap/ContinuousModel.js","webpack://as-web/./node_modules/echarts/lib/component/visualMap/ContinuousView.js","webpack://as-web/./node_modules/echarts/lib/component/visualMap/PiecewiseModel.js","webpack://as-web/./node_modules/echarts/lib/component/visualMap/PiecewiseView.js","webpack://as-web/./node_modules/echarts/lib/component/visualMap/VisualMapModel.js","webpack://as-web/./node_modules/echarts/lib/component/visualMap/VisualMapView.js","webpack://as-web/./node_modules/echarts/lib/component/visualMap/helper.js","webpack://as-web/./node_modules/echarts/lib/component/visualMap/preprocessor.js","webpack://as-web/./node_modules/echarts/lib/component/visualMap/typeDefaulter.js","webpack://as-web/./node_modules/echarts/lib/component/visualMap/visualEncoding.js","webpack://as-web/./node_modules/echarts/lib/component/visualMap/visualMapAction.js","webpack://as-web/./node_modules/echarts/lib/config.js","webpack://as-web/./node_modules/echarts/lib/coord/Axis.js","webpack://as-web/./node_modules/echarts/lib/coord/View.js","webpack://as-web/./node_modules/echarts/lib/coord/axisDefault.js","webpack://as-web/./node_modules/echarts/lib/coord/axisHelper.js","webpack://as-web/./node_modules/echarts/lib/coord/axisModelCommonMixin.js","webpack://as-web/./node_modules/echarts/lib/coord/axisModelCreator.js","webpack://as-web/./node_modules/echarts/lib/coord/calendar/Calendar.js","webpack://as-web/./node_modules/echarts/lib/coord/calendar/CalendarModel.js","webpack://as-web/./node_modules/echarts/lib/coord/calendar/prepareCustom.js","webpack://as-web/./node_modules/echarts/lib/coord/cartesian/Axis2D.js","webpack://as-web/./node_modules/echarts/lib/coord/cartesian/AxisModel.js","webpack://as-web/./node_modules/echarts/lib/coord/cartesian/Cartesian.js","webpack://as-web/./node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","webpack://as-web/./node_modules/echarts/lib/coord/cartesian/Grid.js","webpack://as-web/./node_modules/echarts/lib/coord/cartesian/GridModel.js","webpack://as-web/./node_modules/echarts/lib/coord/cartesian/prepareCustom.js","webpack://as-web/./node_modules/echarts/lib/coord/geo/Geo.js","webpack://as-web/./node_modules/echarts/lib/coord/geo/GeoModel.js","webpack://as-web/./node_modules/echarts/lib/coord/geo/Region.js","webpack://as-web/./node_modules/echarts/lib/coord/geo/fix/diaoyuIsland.js","webpack://as-web/./node_modules/echarts/lib/coord/geo/fix/geoCoord.js","webpack://as-web/./node_modules/echarts/lib/coord/geo/fix/nanhai.js","webpack://as-web/./node_modules/echarts/lib/coord/geo/fix/textCoord.js","webpack://as-web/./node_modules/echarts/lib/coord/geo/geoCreator.js","webpack://as-web/./node_modules/echarts/lib/coord/geo/parseGeoJson.js","webpack://as-web/./node_modules/echarts/lib/coord/geo/prepareCustom.js","webpack://as-web/./node_modules/echarts/lib/coord/parallel/AxisModel.js","webpack://as-web/./node_modules/echarts/lib/coord/parallel/Parallel.js","webpack://as-web/./node_modules/echarts/lib/coord/parallel/ParallelAxis.js","webpack://as-web/./node_modules/echarts/lib/coord/parallel/ParallelModel.js","webpack://as-web/./node_modules/echarts/lib/coord/parallel/parallelCreator.js","webpack://as-web/./node_modules/echarts/lib/coord/parallel/parallelPreprocessor.js","webpack://as-web/./node_modules/echarts/lib/coord/polar/AngleAxis.js","webpack://as-web/./node_modules/echarts/lib/coord/polar/AxisModel.js","webpack://as-web/./node_modules/echarts/lib/coord/polar/Polar.js","webpack://as-web/./node_modules/echarts/lib/coord/polar/PolarModel.js","webpack://as-web/./node_modules/echarts/lib/coord/polar/RadiusAxis.js","webpack://as-web/./node_modules/echarts/lib/coord/polar/polarCreator.js","webpack://as-web/./node_modules/echarts/lib/coord/polar/prepareCustom.js","webpack://as-web/./node_modules/echarts/lib/coord/radar/IndicatorAxis.js","webpack://as-web/./node_modules/echarts/lib/coord/radar/Radar.js","webpack://as-web/./node_modules/echarts/lib/coord/radar/RadarModel.js","webpack://as-web/./node_modules/echarts/lib/coord/single/AxisModel.js","webpack://as-web/./node_modules/echarts/lib/coord/single/Single.js","webpack://as-web/./node_modules/echarts/lib/coord/single/SingleAxis.js","webpack://as-web/./node_modules/echarts/lib/coord/single/prepareCustom.js","webpack://as-web/./node_modules/echarts/lib/coord/single/singleCreator.js","webpack://as-web/./node_modules/echarts/lib/data/DataDiffer.js","webpack://as-web/./node_modules/echarts/lib/data/Graph.js","webpack://as-web/./node_modules/echarts/lib/data/List.js","webpack://as-web/./node_modules/echarts/lib/data/Tree.js","webpack://as-web/./node_modules/echarts/lib/data/helper/completeDimensions.js","webpack://as-web/./node_modules/echarts/lib/data/helper/linkList.js","webpack://as-web/./node_modules/echarts/lib/echarts.js","webpack://as-web/./node_modules/echarts/lib/export.js","webpack://as-web/./node_modules/echarts/lib/helper.js","webpack://as-web/./node_modules/echarts/lib/lang.js","webpack://as-web/./node_modules/echarts/lib/layout/barGrid.js","webpack://as-web/./node_modules/echarts/lib/layout/barPolar.js","webpack://as-web/./node_modules/echarts/lib/layout/points.js","webpack://as-web/./node_modules/echarts/lib/loading/default.js","webpack://as-web/./node_modules/echarts/lib/model/Component.js","webpack://as-web/./node_modules/echarts/lib/model/Global.js","webpack://as-web/./node_modules/echarts/lib/model/Model.js","webpack://as-web/./node_modules/echarts/lib/model/OptionManager.js","webpack://as-web/./node_modules/echarts/lib/model/Series.js","webpack://as-web/./node_modules/echarts/lib/model/globalDefault.js","webpack://as-web/./node_modules/echarts/lib/model/mixin/areaStyle.js","webpack://as-web/./node_modules/echarts/lib/model/mixin/boxLayout.js","webpack://as-web/./node_modules/echarts/lib/model/mixin/colorPalette.js","webpack://as-web/./node_modules/echarts/lib/model/mixin/itemStyle.js","webpack://as-web/./node_modules/echarts/lib/model/mixin/lineStyle.js","webpack://as-web/./node_modules/echarts/lib/model/mixin/makeStyleMapper.js","webpack://as-web/./node_modules/echarts/lib/model/mixin/textStyle.js","webpack://as-web/./node_modules/echarts/lib/preprocessor/backwardCompat.js","webpack://as-web/./node_modules/echarts/lib/preprocessor/helper/compatStyle.js","webpack://as-web/./node_modules/echarts/lib/processor/dataFilter.js","webpack://as-web/./node_modules/echarts/lib/processor/dataSample.js","webpack://as-web/./node_modules/echarts/lib/scale/Interval.js","webpack://as-web/./node_modules/echarts/lib/scale/Log.js","webpack://as-web/./node_modules/echarts/lib/scale/Ordinal.js","webpack://as-web/./node_modules/echarts/lib/scale/Scale.js","webpack://as-web/./node_modules/echarts/lib/scale/Time.js","webpack://as-web/./node_modules/echarts/lib/scale/helper.js","webpack://as-web/./node_modules/echarts/lib/util/animation.js","webpack://as-web/./node_modules/echarts/lib/util/array/nest.js","webpack://as-web/./node_modules/echarts/lib/util/clazz.js","webpack://as-web/./node_modules/echarts/lib/util/component.js","webpack://as-web/./node_modules/echarts/lib/util/format.js","webpack://as-web/./node_modules/echarts/lib/util/graphic.js","webpack://as-web/./node_modules/echarts/lib/util/layout.js","webpack://as-web/./node_modules/echarts/lib/util/model.js","webpack://as-web/./node_modules/echarts/lib/util/number.js","webpack://as-web/./node_modules/echarts/lib/util/symbol.js","webpack://as-web/./node_modules/echarts/lib/util/throttle.js","webpack://as-web/./node_modules/echarts/lib/view/Chart.js","webpack://as-web/./node_modules/echarts/lib/view/Component.js","webpack://as-web/./node_modules/echarts/lib/visual/VisualMapping.js","webpack://as-web/./node_modules/echarts/lib/visual/dataColor.js","webpack://as-web/./node_modules/echarts/lib/visual/seriesColor.js","webpack://as-web/./node_modules/echarts/lib/visual/symbol.js","webpack://as-web/./node_modules/echarts/lib/visual/visualDefault.js","webpack://as-web/./node_modules/echarts/lib/visual/visualSolution.js","webpack://as-web/./node_modules/zrender/lib/Element.js","webpack://as-web/./node_modules/zrender/lib/Handler.js","webpack://as-web/./node_modules/zrender/lib/Layer.js","webpack://as-web/./node_modules/zrender/lib/Painter.js","webpack://as-web/./node_modules/zrender/lib/Storage.js","webpack://as-web/./node_modules/zrender/lib/animation/Animation.js","webpack://as-web/./node_modules/zrender/lib/animation/Animator.js","webpack://as-web/./node_modules/zrender/lib/animation/Clip.js","webpack://as-web/./node_modules/zrender/lib/animation/easing.js","webpack://as-web/./node_modules/zrender/lib/animation/requestAnimationFrame.js","webpack://as-web/./node_modules/zrender/lib/config.js","webpack://as-web/./node_modules/zrender/lib/contain/arc.js","webpack://as-web/./node_modules/zrender/lib/contain/cubic.js","webpack://as-web/./node_modules/zrender/lib/contain/line.js","webpack://as-web/./node_modules/zrender/lib/contain/path.js","webpack://as-web/./node_modules/zrender/lib/contain/polygon.js","webpack://as-web/./node_modules/zrender/lib/contain/quadratic.js","webpack://as-web/./node_modules/zrender/lib/contain/text.js","webpack://as-web/./node_modules/zrender/lib/contain/util.js","webpack://as-web/./node_modules/zrender/lib/contain/windingLine.js","webpack://as-web/./node_modules/zrender/lib/container/Group.js","webpack://as-web/./node_modules/zrender/lib/core/BoundingRect.js","webpack://as-web/./node_modules/zrender/lib/core/GestureMgr.js","webpack://as-web/./node_modules/zrender/lib/core/LRU.js","webpack://as-web/./node_modules/zrender/lib/core/PathProxy.js","webpack://as-web/./node_modules/zrender/lib/core/arrayDiff2.js","webpack://as-web/./node_modules/zrender/lib/core/bbox.js","webpack://as-web/./node_modules/zrender/lib/core/curve.js","webpack://as-web/./node_modules/zrender/lib/core/env.js","webpack://as-web/./node_modules/zrender/lib/core/event.js","webpack://as-web/./node_modules/zrender/lib/core/guid.js","webpack://as-web/./node_modules/zrender/lib/core/log.js","webpack://as-web/./node_modules/zrender/lib/core/matrix.js","webpack://as-web/./node_modules/zrender/lib/core/timsort.js","webpack://as-web/./node_modules/zrender/lib/core/util.js","webpack://as-web/./node_modules/zrender/lib/core/vector.js","webpack://as-web/./node_modules/zrender/lib/dom/HandlerProxy.js","webpack://as-web/./node_modules/zrender/lib/graphic/CompoundPath.js","webpack://as-web/./node_modules/zrender/lib/graphic/Displayable.js","webpack://as-web/./node_modules/zrender/lib/graphic/Gradient.js","webpack://as-web/./node_modules/zrender/lib/graphic/Image.js","webpack://as-web/./node_modules/zrender/lib/graphic/LinearGradient.js","webpack://as-web/./node_modules/zrender/lib/graphic/Path.js","webpack://as-web/./node_modules/zrender/lib/graphic/Pattern.js","webpack://as-web/./node_modules/zrender/lib/graphic/RadialGradient.js","webpack://as-web/./node_modules/zrender/lib/graphic/Style.js","webpack://as-web/./node_modules/zrender/lib/graphic/Text.js","webpack://as-web/./node_modules/zrender/lib/graphic/helper/fixClipWithShadow.js","webpack://as-web/./node_modules/zrender/lib/graphic/helper/image.js","webpack://as-web/./node_modules/zrender/lib/graphic/helper/poly.js","webpack://as-web/./node_modules/zrender/lib/graphic/helper/roundRect.js","webpack://as-web/./node_modules/zrender/lib/graphic/helper/smoothBezier.js","webpack://as-web/./node_modules/zrender/lib/graphic/helper/smoothSpline.js","webpack://as-web/./node_modules/zrender/lib/graphic/helper/text.js","webpack://as-web/./node_modules/zrender/lib/graphic/mixin/RectText.js","webpack://as-web/./node_modules/zrender/lib/graphic/shape/Arc.js","webpack://as-web/./node_modules/zrender/lib/graphic/shape/BezierCurve.js","webpack://as-web/./node_modules/zrender/lib/graphic/shape/Circle.js","webpack://as-web/./node_modules/zrender/lib/graphic/shape/Line.js","webpack://as-web/./node_modules/zrender/lib/graphic/shape/Polygon.js","webpack://as-web/./node_modules/zrender/lib/graphic/shape/Polyline.js","webpack://as-web/./node_modules/zrender/lib/graphic/shape/Rect.js","webpack://as-web/./node_modules/zrender/lib/graphic/shape/Ring.js","webpack://as-web/./node_modules/zrender/lib/graphic/shape/Sector.js","webpack://as-web/./node_modules/zrender/lib/mixin/Animatable.js","webpack://as-web/./node_modules/zrender/lib/mixin/Draggable.js","webpack://as-web/./node_modules/zrender/lib/mixin/Eventful.js","webpack://as-web/./node_modules/zrender/lib/mixin/Transformable.js","webpack://as-web/./node_modules/zrender/lib/svg/Painter.js","webpack://as-web/./node_modules/zrender/lib/svg/core.js","webpack://as-web/./node_modules/zrender/lib/svg/graphic.js","webpack://as-web/./node_modules/zrender/lib/svg/helper/ClippathManager.js","webpack://as-web/./node_modules/zrender/lib/svg/helper/Definable.js","webpack://as-web/./node_modules/zrender/lib/svg/helper/GradientManager.js","webpack://as-web/./node_modules/zrender/lib/svg/svg.js","webpack://as-web/./node_modules/zrender/lib/tool/color.js","webpack://as-web/./node_modules/zrender/lib/tool/path.js","webpack://as-web/./node_modules/zrender/lib/tool/transformPath.js","webpack://as-web/./node_modules/zrender/lib/vml/Painter.js","webpack://as-web/./node_modules/zrender/lib/vml/core.js","webpack://as-web/./node_modules/zrender/lib/vml/graphic.js","webpack://as-web/./node_modules/zrender/lib/vml/vml.js","webpack://as-web/./node_modules/zrender/lib/zrender.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"  \")]),_c('el-dropdown',{attrs:{\"placement\":\"bottom-end\"},on:{\"command\":_vm.handleCommand1}},[_c('span',{staticClass:\"el-dropdown-link\"},[_c('div',{attrs:{\"color\":\"#FF0000 \"}},[_vm._v(\"\")]),_c('i',{staticClass:\"el-icon-arrow-down el-icon--right\"})]),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":\"railway_analysis\"}},[_vm._v(\"\")]),_c('el-dropdown-item',{attrs:{\"command\":\"chart\"}},[_vm._v(\" \")])],1)],1),_c('el-dropdown',{attrs:{\"placement\":\"bottom-end\"},on:{\"command\":_vm.handleCommand}},[_c('span',{staticClass:\"el-dropdown-link avatar\"},[_c('el-avatar',{attrs:{\"size\":\"small\",\"src\":_vm.avatarSrc}}),_c('i',{staticClass:\"el-icon-arrow-down el-icon--right\"})],1),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":\"logout\"}},[_vm._v(\"\")]),_c('el-dropdown-item',{attrs:{\"command\":\"register\"}},[_vm._v(\"\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"header\">\r\n    <div class=\"title\">\r\n      \r\n    </div>\r\n    <el-dropdown @command=\"handleCommand1\" placement=\"bottom-end\">\r\n      <span class=\"el-dropdown-link\">\r\n        <div color=\"#FF0000 \"></div>\r\n        <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n      </span>\r\n      <el-dropdown-menu slot=\"dropdown\">\r\n        <el-dropdown-item command=\"railway_analysis\"></el-dropdown-item>\r\n        <el-dropdown-item command=\"chart\"> </el-dropdown-item>\r\n\r\n      </el-dropdown-menu>\r\n    </el-dropdown>\r\n    <!-- <el-dropdown @command=\"handleCommand2\" placement=\"bottom-end\">\r\n      <span class=\"el-dropdown-link\">\r\n        \r\n        <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n      </span>\r\n      <el-dropdown-menu slot=\"dropdown\">\r\n        <el-dropdown-item command=\"station_manage\"></el-dropdown-item>\r\n        <el-dropdown-item command=\"line_manage\"></el-dropdown-item>\r\n        <el-dropdown-item command=\"section_manage\"></el-dropdown-item>\r\n        <el-dropdown-item command=\"trainRecord_manage\"></el-dropdown-item>\r\n        <el-dropdown-item command=\"busyIndex_manage\"></el-dropdown-item> \r\n        <el-dropdown-item command=\"trainCount_manage\"></el-dropdown-item>\r\n        <el-dropdown-item command=\"intervel_runtime_manage\"></el-dropdown-item>\r\n\r\n      </el-dropdown-menu>\r\n    </el-dropdown>\r\n    <el-dropdown @command=\"handleCommand3\" placement=\"bottom-end\">\r\n      <span class=\"el-dropdown-link\">\r\n        \r\n        <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n      </span>\r\n      <el-dropdown-menu slot=\"dropdown\">\r\n        <el-dropdown-item command=\"user_manage\"></el-dropdown-item>\r\n      </el-dropdown-menu>\r\n    </el-dropdown>\r\n    <el-dropdown @command=\"handleCommand4\" placement=\"bottom-end\">\r\n      <span class=\"el-dropdown-link\">\r\n        \r\n        <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n      </span>\r\n      <el-dropdown-menu slot=\"dropdown\">\r\n        <el-dropdown-item command=\"busy_distribution\"></el-dropdown-item>\r\n        <el-dropdown-item command=\"interval_busy_details\"></el-dropdown-item>\r\n        <el-dropdown-item command=\"train_type_and_count\"></el-dropdown-item>\r\n        <el-dropdown-item command=\"time_series_analysis\"></el-dropdown-item>\r\n        <el-dropdown-item command=\"station_frequency_analysis\"></el-dropdown-item>\r\n        <el-dropdown-item command=\"running_time_distribution\"></el-dropdown-item>        \r\n      </el-dropdown-menu>\r\n    </el-dropdown>\r\n     -->\r\n    <el-dropdown placement=\"bottom-end\" @command=\"handleCommand\" >\r\n      <span class=\"el-dropdown-link avatar\">\r\n        <el-avatar size=\"small\" :src=\"avatarSrc\"></el-avatar>\r\n        <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n      </span>\r\n      <el-dropdown-menu slot=\"dropdown\">\r\n        <el-dropdown-item command=\"logout\"></el-dropdown-item>\r\n        <el-dropdown-item command=\"register\"></el-dropdown-item>\r\n      </el-dropdown-menu>\r\n      \r\n    </el-dropdown>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      avatarSrc: 'https://img.zcool.cn/community/015a605f45ac07a80120a8218319a8.jpg@1280w_1l_2o_100sh.jpg' // \r\n    };\r\n  },\r\n  methods: {\r\n    handleCommand1(command) {\r\n      if (command === 'railway_analysis') {\r\n        this.$router.push('/railway_analysis')\r\n      } else if (command === 'test') {\r\n        // \r\n        this.$router.push('/test')\r\n      } else if (command === 'map') {\r\n        this.$emit('showRank')\r\n      }else if (command === 'chart') {\r\n        this.$router.push('/chart')\r\n      }\r\n    },\r\n    handleCommand2(command) {\r\n      if (command === 'station_manage') {\r\n        this.$router.push('/station_manage')\r\n      } else if (command === 'section_manage') {\r\n        this.$router.push('/section_manage')\r\n      } else if (command === 'line_manage') {\r\n        this.$router.push('/line_manage')\r\n      } else if (command === 'trainRecord_manage') {\r\n        this.$router.push('/trainRecord_manage')\r\n      } else if (command === 'busyIndex_manage') {\r\n        this.$router.push('/busyIndex_manage')\r\n      } else if (command === 'trainCount_manage') {\r\n        this.$router.push('/trainCount_manage')\r\n      }else if (command === 'intervel_runtime_manage') {\r\n        this.$router.push('/intervel_runtime_manage')\r\n      }\r\n    },\r\n    handleCommand3(command) {\r\n      this.$router.push('/user_manage')\r\n    },\r\n    handleCommand4(command) {\r\n      if (command === 'busy_distribution') {\r\n        this.$router.push('/busy_distribution')\r\n      }else if (command === 'time_series_analysis') {\r\n        this.$router.push('/time_series_analysis')\r\n      }else if (command === 'station_frequency_analysis') {\r\n        this.$router.push('/station_frequency_analysis')\r\n      }else if (command === 'train_type_and_count') {\r\n        this.$router.push('/train_type_and_count')\r\n      }else if (command === 'running_time_distribution') {\r\n        this.$router.push('/running_time_distribution')\r\n      }else if( command === 'interval_busy_details'){\r\n        this.$router.push('/interval_busy_details')\r\n      }\r\n    },\r\n    handleLogout() {\r\n      this.$router.push('/login')\r\n    },\r\n    register(){\r\n      this.$router.push('/register')\r\n    },\r\n    handleCommand(command) {\r\n      if (command === 'logout') {\r\n        this.handleLogout();\r\n      } else if (command === 'register') {\r\n        this.register();\r\n      }\r\n    },\r\n\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 20px;\r\n  height: 60px;\r\n  background: linear-gradient(to right, #6a11cb, #2575fc); /*  */\r\n  color: #fff; /*  */\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.title {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  letter-spacing: 1px; /*  */\r\n}\r\n\r\n.el-dropdown-link {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 5px 10px;\r\n  border-radius: 5px; /*  */\r\n  transition: background-color 0.3s, box-shadow 0.3s;\r\n  color: #FFFFFF; /*  */\r\n  font-size: 16px; /*  */\r\n  font-weight: bold; /*  */\r\n  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.6); /*  */\r\n}\r\n\r\n.el-dropdown-link:hover {\r\n  background-color: rgba(255, 255, 255, 0.1); /*  */\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.el-dropdown-menu {\r\n  border-radius: 5px; /*  */\r\n  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); /*  */\r\n}\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Header.vue?vue&type=template&id=17edfde2&scoped=true\"\nimport script from \"./Header.vue?vue&type=script&lang=js\"\nexport * from \"./Header.vue?vue&type=script&lang=js\"\nimport style0 from \"./Header.vue?vue&type=style&index=0&id=17edfde2&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17edfde2\",\n  null\n  \n)\n\nexport default component.exports","var _echarts = require(\"./lib/echarts\");\n\n\nvar _export = require(\"./lib/export\");\n\n(function () {\n  for (var key in _export) {\n    if (_export == null || !_export.hasOwnProperty(key) || key === 'default' || key === '__esModule') return;\n    exports[key] = _export[key];\n  }\n})();\n\nrequire(\"./lib/chart/line\");\n\nrequire(\"./lib/chart/bar\");\n\nrequire(\"./lib/chart/pie\");\n\nrequire(\"./lib/chart/scatter\");\n\nrequire(\"./lib/chart/radar\");\n\nrequire(\"./lib/chart/map\");\n\nrequire(\"./lib/chart/tree\");\n\nrequire(\"./lib/chart/treemap\");\n\nrequire(\"./lib/chart/graph\");\n\nrequire(\"./lib/chart/gauge\");\n\nrequire(\"./lib/chart/funnel\");\n\nrequire(\"./lib/chart/parallel\");\n\nrequire(\"./lib/chart/sankey\");\n\nrequire(\"./lib/chart/boxplot\");\n\nrequire(\"./lib/chart/candlestick\");\n\nrequire(\"./lib/chart/effectScatter\");\n\nrequire(\"./lib/chart/lines\");\n\nrequire(\"./lib/chart/heatmap\");\n\nrequire(\"./lib/chart/pictorialBar\");\n\nrequire(\"./lib/chart/themeRiver\");\n\nrequire(\"./lib/chart/custom\");\n\nrequire(\"./lib/component/graphic\");\n\nrequire(\"./lib/component/grid\");\n\nrequire(\"./lib/component/legendScroll\");\n\nrequire(\"./lib/component/tooltip\");\n\nrequire(\"./lib/component/axisPointer\");\n\nrequire(\"./lib/component/polar\");\n\nrequire(\"./lib/component/geo\");\n\nrequire(\"./lib/component/parallel\");\n\nrequire(\"./lib/component/singleAxis\");\n\nrequire(\"./lib/component/brush\");\n\nrequire(\"./lib/component/calendar\");\n\nrequire(\"./lib/component/title\");\n\nrequire(\"./lib/component/dataZoom\");\n\nrequire(\"./lib/component/visualMap\");\n\nrequire(\"./lib/component/markPoint\");\n\nrequire(\"./lib/component/markLine\");\n\nrequire(\"./lib/component/markArea\");\n\nrequire(\"./lib/component/timeline\");\n\nrequire(\"./lib/component/toolbox\");\n\nrequire(\"zrender/lib/vml/vml\");\n\nrequire(\"zrender/lib/svg/svg\");\n\n(function () {\n  for (var key in _echarts) {\n    if (_echarts == null || !_echarts.hasOwnProperty(key) || key === 'default' || key === '__esModule') return;\n    exports[key] = _echarts[key];\n  }\n})();","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar coordinateSystemCreators = {};\n\nfunction CoordinateSystemManager() {\n  this._coordinateSystems = [];\n}\n\nCoordinateSystemManager.prototype = {\n  constructor: CoordinateSystemManager,\n  create: function (ecModel, api) {\n    var coordinateSystems = [];\n    zrUtil.each(coordinateSystemCreators, function (creater, type) {\n      var list = creater.create(ecModel, api);\n      coordinateSystems = coordinateSystems.concat(list || []);\n    });\n    this._coordinateSystems = coordinateSystems;\n  },\n  update: function (ecModel, api) {\n    zrUtil.each(this._coordinateSystems, function (coordSys) {\n      // FIXME MUST have\n      coordSys.update && coordSys.update(ecModel, api);\n    });\n  },\n  getCoordinateSystems: function () {\n    return this._coordinateSystems.slice();\n  }\n};\n\nCoordinateSystemManager.register = function (type, coordinateSystemCreator) {\n  coordinateSystemCreators[type] = coordinateSystemCreator;\n};\n\nCoordinateSystemManager.get = function (type) {\n  return coordinateSystemCreators[type];\n};\n\nvar _default = CoordinateSystemManager;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar echartsAPIList = ['getDom', 'getZr', 'getWidth', 'getHeight', 'getDevicePixelRatio', 'dispatchAction', 'isDisposed', 'on', 'off', 'getDataURL', 'getConnectedDataURL', 'getModel', 'getOption', 'getViewOfComponentModel', 'getViewOfSeriesModel']; // And `getCoordinateSystems` and `getComponentByElement` will be injected in echarts.js\n\nfunction ExtensionAPI(chartInstance) {\n  zrUtil.each(echartsAPIList, function (name) {\n    this[name] = zrUtil.bind(chartInstance[name], chartInstance);\n  }, this);\n}\n\nvar _default = ExtensionAPI;\nmodule.exports = _default;","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nfunction _default(seriesType, actionInfos) {\n  zrUtil.each(actionInfos, function (actionInfo) {\n    actionInfo.update = 'updateView';\n    /**\n     * @payload\n     * @property {string} seriesName\n     * @property {string} name\n     */\n\n    echarts.registerAction(actionInfo, function (payload, ecModel) {\n      var selected = {};\n      ecModel.eachComponent({\n        mainType: 'series',\n        subType: seriesType,\n        query: payload\n      }, function (seriesModel) {\n        if (seriesModel[actionInfo.method]) {\n          seriesModel[actionInfo.method](payload.name, payload.dataIndex);\n        }\n\n        var data = seriesModel.getData(); // Create selected map\n\n        data.each(function (idx) {\n          var name = data.getName(idx);\n          selected[name] = seriesModel.isSelected(name) || false;\n        });\n      });\n      return {\n        name: payload.name,\n        selected: selected\n      };\n    });\n  });\n}\n\nmodule.exports = _default;","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _roamHelper = require(\"./roamHelper\");\n\nvar updateCenterAndZoom = _roamHelper.updateCenterAndZoom;\n\n/**\n * @payload\n * @property {string} [componentType=series]\n * @property {number} [dx]\n * @property {number} [dy]\n * @property {number} [zoom]\n * @property {number} [originX]\n * @property {number} [originY]\n */\necharts.registerAction({\n  type: 'geoRoam',\n  event: 'geoRoam',\n  update: 'updateLayout'\n}, function (payload, ecModel) {\n  var componentType = payload.componentType || 'series';\n  ecModel.eachComponent({\n    mainType: componentType,\n    query: payload\n  }, function (componentModel) {\n    var geo = componentModel.coordinateSystem;\n\n    if (geo.type !== 'geo') {\n      return;\n    }\n\n    var res = updateCenterAndZoom(geo, payload, componentModel.get('scaleLimit'));\n    componentModel.setCenter && componentModel.setCenter(res.center);\n    componentModel.setZoom && componentModel.setZoom(res.zoom); // All map series with same `map` use the same geo coordinate system\n    // So the center and zoom must be in sync. Include the series not selected by legend\n\n    if (componentType === 'series') {\n      zrUtil.each(componentModel.seriesGroup, function (seriesModel) {\n        seriesModel.setCenter(res.center);\n        seriesModel.setZoom(res.zoom);\n      });\n    }\n  });\n});","/**\n * @param {module:echarts/coord/View} view\n * @param {Object} payload\n * @param {Object} [zoomLimit]\n */\nfunction updateCenterAndZoom(view, payload, zoomLimit) {\n  var previousZoom = view.getZoom();\n  var center = view.getCenter();\n  var zoom = payload.zoom;\n  var point = view.dataToPoint(center);\n\n  if (payload.dx != null && payload.dy != null) {\n    point[0] -= payload.dx;\n    point[1] -= payload.dy;\n    var center = view.pointToData(point);\n    view.setCenter(center);\n  }\n\n  if (zoom != null) {\n    if (zoomLimit) {\n      var zoomMin = zoomLimit.min || 0;\n      var zoomMax = zoomLimit.max || Infinity;\n      zoom = Math.max(Math.min(previousZoom * zoom, zoomMax), zoomMin) / previousZoom;\n    } // Zoom on given point(originX, originY)\n\n\n    view.scale[0] *= zoom;\n    view.scale[1] *= zoom;\n    var position = view.position;\n    var fixX = (payload.originX - position[0]) * (zoom - 1);\n    var fixY = (payload.originY - position[1]) * (zoom - 1);\n    position[0] -= fixX;\n    position[1] -= fixY;\n    view.updateTransform(); // Get the new center\n\n    var center = view.pointToData(point);\n    view.setCenter(center);\n    view.setZoom(zoom * previousZoom);\n  }\n\n  return {\n    center: view.getCenter(),\n    zoom: view.getZoom()\n  };\n}\n\nexports.updateCenterAndZoom = updateCenterAndZoom;","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar barLayoutGrid = require(\"../layout/barGrid\");\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./bar/BarSeries\");\n\nrequire(\"./bar/BarView\");\n\nrequire(\"../component/gridSimple\");\n\n// In case developer forget to include grid component\necharts.registerLayout(zrUtil.curry(barLayoutGrid, 'bar')); // Visual coding for legend\n\necharts.registerVisual(function (ecModel) {\n  ecModel.eachSeriesByType('bar', function (seriesModel) {\n    var data = seriesModel.getData();\n    data.setVisual('legendSymbol', 'roundRect');\n  });\n});","var BaseBarSeries = require(\"./BaseBarSeries\");\n\nvar _default = BaseBarSeries.extend({\n  type: 'series.bar',\n  dependencies: ['grid', 'polar'],\n  brushSelector: 'rect'\n});\n\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _helper = require(\"./helper\");\n\nvar setLabel = _helper.setLabel;\n\nvar Model = require(\"../../model/Model\");\n\nvar barItemStyle = require(\"./barItemStyle\");\n\nvar BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'normal', 'barBorderWidth']; // FIXME\n// Just for compatible with ec2.\n\nzrUtil.extend(Model.prototype, barItemStyle);\n\nvar _default = echarts.extendChartView({\n  type: 'bar',\n  render: function (seriesModel, ecModel, api) {\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\n\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n      this._render(seriesModel, ecModel, api);\n    } else {}\n\n    return this.group;\n  },\n  dispose: zrUtil.noop,\n  _render: function (seriesModel, ecModel, api) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coord = seriesModel.coordinateSystem;\n    var baseAxis = coord.getBaseAxis();\n    var isHorizontalOrRadial;\n\n    if (coord.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n    } else if (coord.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n    }\n\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n    data.diff(oldData).add(function (dataIndex) {\n      if (!data.hasValue(dataIndex)) {\n        return;\n      }\n\n      var itemModel = data.getItemModel(dataIndex);\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\n      var el = elementCreator[coord.type](data, dataIndex, itemModel, layout, isHorizontalOrRadial, animationModel);\n      data.setItemGraphicEl(dataIndex, el);\n      group.add(el);\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n    }).update(function (newIndex, oldIndex) {\n      var el = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex)) {\n        group.remove(el);\n        return;\n      }\n\n      var itemModel = data.getItemModel(newIndex);\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\n\n      if (el) {\n        graphic.updateProps(el, {\n          shape: layout\n        }, animationModel, newIndex);\n      } else {\n        el = elementCreator[coord.type](data, newIndex, itemModel, layout, isHorizontalOrRadial, animationModel, true);\n      }\n\n      data.setItemGraphicEl(newIndex, el); // Add back\n\n      group.add(el);\n      updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n    }).remove(function (dataIndex) {\n      var el = oldData.getItemGraphicEl(dataIndex);\n\n      if (coord.type === 'cartesian2d') {\n        el && removeRect(dataIndex, animationModel, el);\n      } else {\n        el && removeSector(dataIndex, animationModel, el);\n      }\n    }).execute();\n    this._data = data;\n  },\n  remove: function (ecModel, api) {\n    var group = this.group;\n    var data = this._data;\n\n    if (ecModel.get('animation')) {\n      if (data) {\n        data.eachItemGraphicEl(function (el) {\n          if (el.type === 'sector') {\n            removeSector(el.dataIndex, ecModel, el);\n          } else {\n            removeRect(el.dataIndex, ecModel, el);\n          }\n        });\n      }\n    } else {\n      group.removeAll();\n    }\n  }\n});\n\nvar elementCreator = {\n  cartesian2d: function (data, dataIndex, itemModel, layout, isHorizontal, animationModel, isUpdate) {\n    var rect = new graphic.Rect({\n      shape: zrUtil.extend({}, layout)\n    }); // Animation\n\n    if (animationModel) {\n      var rectShape = rect.shape;\n      var animateProperty = isHorizontal ? 'height' : 'width';\n      var animateTarget = {};\n      rectShape[animateProperty] = 0;\n      animateTarget[animateProperty] = layout[animateProperty];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](rect, {\n        shape: animateTarget\n      }, animationModel, dataIndex);\n    }\n\n    return rect;\n  },\n  polar: function (data, dataIndex, itemModel, layout, isRadial, animationModel, isUpdate) {\n    var sector = new graphic.Sector({\n      shape: zrUtil.extend({}, layout)\n    }); // Animation\n\n    if (animationModel) {\n      var sectorShape = sector.shape;\n      var animateProperty = isRadial ? 'r' : 'endAngle';\n      var animateTarget = {};\n      sectorShape[animateProperty] = isRadial ? 0 : layout.startAngle;\n      animateTarget[animateProperty] = layout[animateProperty];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](sector, {\n        shape: animateTarget\n      }, animationModel, dataIndex);\n    }\n\n    return sector;\n  }\n};\n\nfunction removeRect(dataIndex, animationModel, el) {\n  // Not show text when animating\n  el.style.text = null;\n  graphic.updateProps(el, {\n    shape: {\n      width: 0\n    }\n  }, animationModel, dataIndex, function () {\n    el.parent && el.parent.remove(el);\n  });\n}\n\nfunction removeSector(dataIndex, animationModel, el) {\n  // Not show text when animating\n  el.style.text = null;\n  graphic.updateProps(el, {\n    shape: {\n      r: el.shape.r0\n    }\n  }, animationModel, dataIndex, function () {\n    el.parent && el.parent.remove(el);\n  });\n}\n\nvar getLayout = {\n  cartesian2d: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    var fixedLineWidth = getLineWidth(itemModel, layout); // fix layout with lineWidth\n\n    var signX = layout.width > 0 ? 1 : -1;\n    var signY = layout.height > 0 ? 1 : -1;\n    return {\n      x: layout.x + signX * fixedLineWidth / 2,\n      y: layout.y + signY * fixedLineWidth / 2,\n      width: layout.width - signX * fixedLineWidth,\n      height: layout.height - signY * fixedLineWidth\n    };\n  },\n  polar: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    return {\n      cx: layout.cx,\n      cy: layout.cy,\n      r0: layout.r0,\n      r: layout.r,\n      startAngle: layout.startAngle,\n      endAngle: layout.endAngle\n    };\n  }\n};\n\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontal, isPolar) {\n  var color = data.getItemVisual(dataIndex, 'color');\n  var opacity = data.getItemVisual(dataIndex, 'opacity');\n  var itemStyleModel = itemModel.getModel('itemStyle.normal');\n  var hoverStyle = itemModel.getModel('itemStyle.emphasis').getBarItemStyle();\n\n  if (!isPolar) {\n    el.setShape('r', itemStyleModel.get('barBorderRadius') || 0);\n  }\n\n  el.useStyle(zrUtil.defaults({\n    fill: color,\n    opacity: opacity\n  }, itemStyleModel.getBarItemStyle()));\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && el.attr('cursor', cursorStyle);\n  var labelPositionOutside = isHorizontal ? layout.height > 0 ? 'bottom' : 'top' : layout.width > 0 ? 'left' : 'right';\n\n  if (!isPolar) {\n    setLabel(el.style, hoverStyle, itemModel, color, seriesModel, dataIndex, labelPositionOutside);\n  }\n\n  graphic.setHoverStyle(el, hoverStyle);\n} // In case width or height are too small.\n\n\nfunction getLineWidth(itemModel, rawLayout) {\n  var lineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\n  return Math.min(lineWidth, Math.abs(rawLayout.width), Math.abs(rawLayout.height));\n}\n\nmodule.exports = _default;","var SeriesModel = require(\"../../model/Series\");\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\nvar _default = SeriesModel.extend({\n  type: 'series.__base_bar__',\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(option.data, this, ecModel);\n  },\n  getMarkerPosition: function (value) {\n    var coordSys = this.coordinateSystem;\n\n    if (coordSys) {\n      // PENDING if clamp ?\n      var pt = coordSys.dataToPoint(value, true);\n      var data = this.getData();\n      var offset = data.getLayout('offset');\n      var size = data.getLayout('size');\n      var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n      pt[offsetIndex] += offset + size / 2;\n      return pt;\n    }\n\n    return [NaN, NaN];\n  },\n  defaultOption: {\n    zlevel: 0,\n    // \n    z: 2,\n    // \n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // stack: null\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // 0\n    barMinHeight: 0,\n    // 0\n    barMinAngle: 0,\n    // cursor: null,\n    // barMaxWidth: null,\n    // \n    // barWidth: null,\n    // 30%\n    // barGap: '30%',\n    // 20%\n    // barCategoryGap: '20%',\n    // label: {\n    //     normal: {\n    //         show: false\n    //     }\n    // },\n    itemStyle: {// normal: {\n      // color: ''\n      // },\n      // emphasis: {}\n    }\n  }\n});\n\nmodule.exports = _default;","var BaseBarSeries = require(\"./BaseBarSeries\");\n\nvar PictorialBarSeries = BaseBarSeries.extend({\n  type: 'series.pictorialBar',\n  dependencies: ['grid'],\n  defaultOption: {\n    symbol: 'circle',\n    // Customized bar shape\n    symbolSize: null,\n    // Can be ['100%', '100%'], null means auto.\n    symbolRotate: null,\n    symbolPosition: null,\n    // 'start' or 'end' or 'center', null means auto.\n    symbolOffset: null,\n    symbolMargin: null,\n    // start margin and end margin. Can be a number or a percent string.\n    // Auto margin by defualt.\n    symbolRepeat: false,\n    // false/null/undefined, means no repeat.\n    // Can be true, means auto calculate repeat times and cut by data.\n    // Can be a number, specifies repeat times, and do not cut by data.\n    // Can be 'fixed', means auto calculate repeat times but do not cut by data.\n    symbolRepeatDirection: 'end',\n    // 'end' means from 'start' to 'end'.\n    symbolClip: false,\n    symbolBoundingData: null,\n    // Can be 60 or -40 or [-40, 60]\n    symbolPatternSize: 400,\n    // 400 * 400 px\n    barGap: '-100%',\n    // In most case, overlap is needed.\n    // z can be set in data item, which is z2 actually.\n    // Disable progressive\n    progressive: 0,\n    hoverAnimation: false // Open only when needed.\n\n  },\n  getInitialData: function (option) {\n    // Disable stack.\n    option.stack = null;\n    return PictorialBarSeries.superApply(this, 'getInitialData', arguments);\n  }\n});\nvar _default = PictorialBarSeries;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar isNumeric = _number.isNumeric;\n\nvar _helper = require(\"./helper\");\n\nvar setLabel = _helper.setLabel;\nvar BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'normal', 'borderWidth']; // index: +isHorizontal\n\nvar LAYOUT_ATTRS = [{\n  xy: 'x',\n  wh: 'width',\n  index: 0,\n  posDesc: ['left', 'right']\n}, {\n  xy: 'y',\n  wh: 'height',\n  index: 1,\n  posDesc: ['top', 'bottom']\n}];\nvar pathForLineWidth = new graphic.Circle();\nvar BarView = echarts.extendChartView({\n  type: 'pictorialBar',\n  render: function (seriesModel, ecModel, api) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = !!baseAxis.isHorizontal();\n    var coordSysRect = cartesian.grid.getRect();\n    var opt = {\n      ecSize: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      seriesModel: seriesModel,\n      coordSys: cartesian,\n      coordSysExtent: [[coordSysRect.x, coordSysRect.x + coordSysRect.width], [coordSysRect.y, coordSysRect.y + coordSysRect.height]],\n      isHorizontal: isHorizontal,\n      valueDim: LAYOUT_ATTRS[+isHorizontal],\n      categoryDim: LAYOUT_ATTRS[1 - isHorizontal]\n    };\n    data.diff(oldData).add(function (dataIndex) {\n      if (!data.hasValue(dataIndex)) {\n        return;\n      }\n\n      var itemModel = getItemModel(data, dataIndex);\n      var symbolMeta = getSymbolMeta(data, dataIndex, itemModel, opt);\n      var bar = createBar(data, opt, symbolMeta);\n      data.setItemGraphicEl(dataIndex, bar);\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).update(function (newIndex, oldIndex) {\n      var bar = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex)) {\n        group.remove(bar);\n        return;\n      }\n\n      var itemModel = getItemModel(data, newIndex);\n      var symbolMeta = getSymbolMeta(data, newIndex, itemModel, opt);\n      var pictorialShapeStr = getShapeStr(data, symbolMeta);\n\n      if (bar && pictorialShapeStr !== bar.__pictorialShapeStr) {\n        group.remove(bar);\n        data.setItemGraphicEl(newIndex, null);\n        bar = null;\n      }\n\n      if (bar) {\n        updateBar(bar, opt, symbolMeta);\n      } else {\n        bar = createBar(data, opt, symbolMeta, true);\n      }\n\n      data.setItemGraphicEl(newIndex, bar);\n      bar.__pictorialSymbolMeta = symbolMeta; // Add back\n\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).remove(function (dataIndex) {\n      var bar = oldData.getItemGraphicEl(dataIndex);\n      bar && removeBar(oldData, dataIndex, bar.__pictorialSymbolMeta.animationModel, bar);\n    }).execute();\n    this._data = data;\n    return this.group;\n  },\n  dispose: zrUtil.noop,\n  remove: function (ecModel, api) {\n    var group = this.group;\n    var data = this._data;\n\n    if (ecModel.get('animation')) {\n      if (data) {\n        data.eachItemGraphicEl(function (bar) {\n          removeBar(data, bar.dataIndex, ecModel, bar);\n        });\n      }\n    } else {\n      group.removeAll();\n    }\n  }\n}); // Set or calculate default value about symbol, and calculate layout info.\n\nfunction getSymbolMeta(data, dataIndex, itemModel, opt) {\n  var layout = data.getItemLayout(dataIndex);\n  var symbolRepeat = itemModel.get('symbolRepeat');\n  var symbolClip = itemModel.get('symbolClip');\n  var symbolPosition = itemModel.get('symbolPosition') || 'start';\n  var symbolRotate = itemModel.get('symbolRotate');\n  var rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  var symbolPatternSize = itemModel.get('symbolPatternSize') || 2;\n  var isAnimationEnabled = itemModel.isAnimationEnabled();\n  var symbolMeta = {\n    dataIndex: dataIndex,\n    layout: layout,\n    itemModel: itemModel,\n    symbolType: data.getItemVisual(dataIndex, 'symbol') || 'circle',\n    color: data.getItemVisual(dataIndex, 'color'),\n    symbolClip: symbolClip,\n    symbolRepeat: symbolRepeat,\n    symbolRepeatDirection: itemModel.get('symbolRepeatDirection'),\n    symbolPatternSize: symbolPatternSize,\n    rotation: rotation,\n    animationModel: isAnimationEnabled ? itemModel : null,\n    hoverAnimation: isAnimationEnabled && itemModel.get('hoverAnimation'),\n    z2: itemModel.getShallow('z', true) || 0\n  };\n  prepareBarLength(itemModel, symbolRepeat, layout, opt, symbolMeta);\n  prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, symbolMeta.boundingLength, symbolMeta.pxSign, symbolPatternSize, opt, symbolMeta);\n  prepareLineWidth(itemModel, symbolMeta.symbolScale, rotation, opt, symbolMeta);\n  var symbolSize = symbolMeta.symbolSize;\n  var symbolOffset = itemModel.get('symbolOffset');\n\n  if (zrUtil.isArray(symbolOffset)) {\n    symbolOffset = [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])];\n  }\n\n  prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, symbolMeta.valueLineWidth, symbolMeta.boundingLength, symbolMeta.repeatCutLength, opt, symbolMeta);\n  return symbolMeta;\n} // bar length can be negative.\n\n\nfunction prepareBarLength(itemModel, symbolRepeat, layout, opt, output) {\n  var valueDim = opt.valueDim;\n  var symbolBoundingData = itemModel.get('symbolBoundingData');\n  var valueAxis = opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis());\n  var zeroPx = valueAxis.toGlobalCoord(valueAxis.dataToCoord(0));\n  var pxSignIdx = 1 - +(layout[valueDim.wh] <= 0);\n  var boundingLength;\n\n  if (zrUtil.isArray(symbolBoundingData)) {\n    var symbolBoundingExtent = [convertToCoordOnAxis(valueAxis, symbolBoundingData[0]) - zeroPx, convertToCoordOnAxis(valueAxis, symbolBoundingData[1]) - zeroPx];\n    symbolBoundingExtent[1] < symbolBoundingExtent[0] && symbolBoundingExtent.reverse();\n    boundingLength = symbolBoundingExtent[pxSignIdx];\n  } else if (symbolBoundingData != null) {\n    boundingLength = convertToCoordOnAxis(valueAxis, symbolBoundingData) - zeroPx;\n  } else if (symbolRepeat) {\n    boundingLength = opt.coordSysExtent[valueDim.index][pxSignIdx] - zeroPx;\n  } else {\n    boundingLength = layout[valueDim.wh];\n  }\n\n  output.boundingLength = boundingLength;\n\n  if (symbolRepeat) {\n    output.repeatCutLength = layout[valueDim.wh];\n  }\n\n  output.pxSign = boundingLength > 0 ? 1 : boundingLength < 0 ? -1 : 0;\n}\n\nfunction convertToCoordOnAxis(axis, value) {\n  return axis.toGlobalCoord(axis.dataToCoord(axis.scale.parse(value)));\n} // Support ['100%', '100%']\n\n\nfunction prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, boundingLength, pxSign, symbolPatternSize, opt, output) {\n  var valueDim = opt.valueDim;\n  var categoryDim = opt.categoryDim;\n  var categorySize = Math.abs(layout[categoryDim.wh]);\n  var symbolSize = data.getItemVisual(dataIndex, 'symbolSize');\n\n  if (zrUtil.isArray(symbolSize)) {\n    symbolSize = symbolSize.slice();\n  } else {\n    if (symbolSize == null) {\n      symbolSize = '100%';\n    }\n\n    symbolSize = [symbolSize, symbolSize];\n  } // Note: percentage symbolSize (like '100%') do not consider lineWidth, because it is\n  // to complicated to calculate real percent value if considering scaled lineWidth.\n  // So the actual size will bigger than layout size if lineWidth is bigger than zero,\n  // which can be tolerated in pictorial chart.\n\n\n  symbolSize[categoryDim.index] = parsePercent(symbolSize[categoryDim.index], categorySize);\n  symbolSize[valueDim.index] = parsePercent(symbolSize[valueDim.index], symbolRepeat ? categorySize : Math.abs(boundingLength));\n  output.symbolSize = symbolSize; // If x or y is less than zero, show reversed shape.\n\n  var symbolScale = output.symbolScale = [symbolSize[0] / symbolPatternSize, symbolSize[1] / symbolPatternSize]; // Follow convention, 'right' and 'top' is the normal scale.\n\n  symbolScale[valueDim.index] *= (opt.isHorizontal ? -1 : 1) * pxSign;\n}\n\nfunction prepareLineWidth(itemModel, symbolScale, rotation, opt, output) {\n  // In symbols are drawn with scale, so do not need to care about the case that width\n  // or height are too small. But symbol use strokeNoScale, where acture lineWidth should\n  // be calculated.\n  var valueLineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\n\n  if (valueLineWidth) {\n    pathForLineWidth.attr({\n      scale: symbolScale.slice(),\n      rotation: rotation\n    });\n    pathForLineWidth.updateTransform();\n    valueLineWidth /= pathForLineWidth.getLineScale();\n    valueLineWidth *= symbolScale[opt.valueDim.index];\n  }\n\n  output.valueLineWidth = valueLineWidth;\n}\n\nfunction prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, valueLineWidth, boundingLength, repeatCutLength, opt, output) {\n  var categoryDim = opt.categoryDim;\n  var valueDim = opt.valueDim;\n  var pxSign = output.pxSign;\n  var unitLength = Math.max(symbolSize[valueDim.index] + valueLineWidth, 0);\n  var pathLen = unitLength; // Note: rotation will not effect the layout of symbols, because user may\n  // want symbols to rotate on its center, which should not be translated\n  // when rotating.\n\n  if (symbolRepeat) {\n    var absBoundingLength = Math.abs(boundingLength);\n    var symbolMargin = zrUtil.retrieve(itemModel.get('symbolMargin'), '15%') + '';\n    var hasEndGap = false;\n\n    if (symbolMargin.lastIndexOf('!') === symbolMargin.length - 1) {\n      hasEndGap = true;\n      symbolMargin = symbolMargin.slice(0, symbolMargin.length - 1);\n    }\n\n    symbolMargin = parsePercent(symbolMargin, symbolSize[valueDim.index]);\n    var uLenWithMargin = Math.max(unitLength + symbolMargin * 2, 0); // When symbol margin is less than 0, margin at both ends will be subtracted\n    // to ensure that all of the symbols will not be overflow the given area.\n\n    var endFix = hasEndGap ? 0 : symbolMargin * 2; // Both final repeatTimes and final symbolMargin area calculated based on\n    // boundingLength.\n\n    var repeatSpecified = isNumeric(symbolRepeat);\n    var repeatTimes = repeatSpecified ? symbolRepeat : toIntTimes((absBoundingLength + endFix) / uLenWithMargin); // Adjust calculate margin, to ensure each symbol is displayed\n    // entirely in the given layout area.\n\n    var mDiff = absBoundingLength - repeatTimes * unitLength;\n    symbolMargin = mDiff / 2 / (hasEndGap ? repeatTimes : repeatTimes - 1);\n    uLenWithMargin = unitLength + symbolMargin * 2;\n    endFix = hasEndGap ? 0 : symbolMargin * 2; // Update repeatTimes when not all symbol will be shown.\n\n    if (!repeatSpecified && symbolRepeat !== 'fixed') {\n      repeatTimes = repeatCutLength ? toIntTimes((Math.abs(repeatCutLength) + endFix) / uLenWithMargin) : 0;\n    }\n\n    pathLen = repeatTimes * uLenWithMargin - endFix;\n    output.repeatTimes = repeatTimes;\n    output.symbolMargin = symbolMargin;\n  }\n\n  var sizeFix = pxSign * (pathLen / 2);\n  var pathPosition = output.pathPosition = [];\n  pathPosition[categoryDim.index] = layout[categoryDim.wh] / 2;\n  pathPosition[valueDim.index] = symbolPosition === 'start' ? sizeFix : symbolPosition === 'end' ? boundingLength - sizeFix : boundingLength / 2; // 'center'\n\n  if (symbolOffset) {\n    pathPosition[0] += symbolOffset[0];\n    pathPosition[1] += symbolOffset[1];\n  }\n\n  var bundlePosition = output.bundlePosition = [];\n  bundlePosition[categoryDim.index] = layout[categoryDim.xy];\n  bundlePosition[valueDim.index] = layout[valueDim.xy];\n  var barRectShape = output.barRectShape = zrUtil.extend({}, layout);\n  barRectShape[valueDim.wh] = pxSign * Math.max(Math.abs(layout[valueDim.wh]), Math.abs(pathPosition[valueDim.index] + sizeFix));\n  barRectShape[categoryDim.wh] = layout[categoryDim.wh];\n  var clipShape = output.clipShape = {}; // Consider that symbol may be overflow layout rect.\n\n  clipShape[categoryDim.xy] = -layout[categoryDim.xy];\n  clipShape[categoryDim.wh] = opt.ecSize[categoryDim.wh];\n  clipShape[valueDim.xy] = 0;\n  clipShape[valueDim.wh] = layout[valueDim.wh];\n}\n\nfunction createPath(symbolMeta) {\n  var symbolPatternSize = symbolMeta.symbolPatternSize;\n  var path = createSymbol( // Consider texture img, make a big size.\n  symbolMeta.symbolType, -symbolPatternSize / 2, -symbolPatternSize / 2, symbolPatternSize, symbolPatternSize, symbolMeta.color);\n  path.attr({\n    culling: true\n  });\n  path.type !== 'image' && path.setStyle({\n    strokeNoScale: true\n  });\n  return path;\n}\n\nfunction createOrUpdateRepeatSymbols(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var symbolSize = symbolMeta.symbolSize;\n  var valueLineWidth = symbolMeta.valueLineWidth;\n  var pathPosition = symbolMeta.pathPosition;\n  var valueDim = opt.valueDim;\n  var repeatTimes = symbolMeta.repeatTimes || 0;\n  var index = 0;\n  var unit = symbolSize[opt.valueDim.index] + valueLineWidth + symbolMeta.symbolMargin * 2;\n  eachPath(bar, function (path) {\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n\n    if (index < repeatTimes) {\n      updateAttr(path, null, makeTarget(index), symbolMeta, isUpdate);\n    } else {\n      updateAttr(path, null, {\n        scale: [0, 0]\n      }, symbolMeta, isUpdate, function () {\n        bundle.remove(path);\n      });\n    }\n\n    updateHoverAnimation(path, symbolMeta);\n    index++;\n  });\n\n  for (; index < repeatTimes; index++) {\n    var path = createPath(symbolMeta);\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n    bundle.add(path);\n    var target = makeTarget(index);\n    updateAttr(path, {\n      position: target.position,\n      scale: [0, 0]\n    }, {\n      scale: target.scale,\n      rotation: target.rotation\n    }, symbolMeta, isUpdate); // FIXME\n    // If all emphasis/normal through action.\n\n    path.on('mouseover', onMouseOver).on('mouseout', onMouseOut);\n    updateHoverAnimation(path, symbolMeta);\n  }\n\n  function makeTarget(index) {\n    var position = pathPosition.slice(); // (start && pxSign > 0) || (end && pxSign < 0): i = repeatTimes - index\n    // Otherwise: i = index;\n\n    var pxSign = symbolMeta.pxSign;\n    var i = index;\n\n    if (symbolMeta.symbolRepeatDirection === 'start' ? pxSign > 0 : pxSign < 0) {\n      i = repeatTimes - 1 - index;\n    }\n\n    position[valueDim.index] = unit * (i - repeatTimes / 2 + 0.5) + pathPosition[valueDim.index];\n    return {\n      position: position,\n      scale: symbolMeta.symbolScale.slice(),\n      rotation: symbolMeta.rotation\n    };\n  }\n\n  function onMouseOver() {\n    eachPath(bar, function (path) {\n      path.trigger('emphasis');\n    });\n  }\n\n  function onMouseOut() {\n    eachPath(bar, function (path) {\n      path.trigger('normal');\n    });\n  }\n}\n\nfunction createOrUpdateSingleSymbol(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var mainPath = bar.__pictorialMainPath;\n\n  if (!mainPath) {\n    mainPath = bar.__pictorialMainPath = createPath(symbolMeta);\n    bundle.add(mainPath);\n    updateAttr(mainPath, {\n      position: symbolMeta.pathPosition.slice(),\n      scale: [0, 0],\n      rotation: symbolMeta.rotation\n    }, {\n      scale: symbolMeta.symbolScale.slice()\n    }, symbolMeta, isUpdate);\n    mainPath.on('mouseover', onMouseOver).on('mouseout', onMouseOut);\n  } else {\n    updateAttr(mainPath, null, {\n      position: symbolMeta.pathPosition.slice(),\n      scale: symbolMeta.symbolScale.slice(),\n      rotation: symbolMeta.rotation\n    }, symbolMeta, isUpdate);\n  }\n\n  updateHoverAnimation(mainPath, symbolMeta);\n\n  function onMouseOver() {\n    this.trigger('emphasis');\n  }\n\n  function onMouseOut() {\n    this.trigger('normal');\n  }\n} // bar rect is used for label.\n\n\nfunction createOrUpdateBarRect(bar, symbolMeta, isUpdate) {\n  var rectShape = zrUtil.extend({}, symbolMeta.barRectShape);\n  var barRect = bar.__pictorialBarRect;\n\n  if (!barRect) {\n    barRect = bar.__pictorialBarRect = new graphic.Rect({\n      z2: 2,\n      shape: rectShape,\n      silent: true,\n      style: {\n        stroke: 'transparent',\n        fill: 'transparent',\n        lineWidth: 0\n      }\n    });\n    bar.add(barRect);\n  } else {\n    updateAttr(barRect, null, {\n      shape: rectShape\n    }, symbolMeta, isUpdate);\n  }\n}\n\nfunction createOrUpdateClip(bar, opt, symbolMeta, isUpdate) {\n  // If not clip, symbol will be remove and rebuilt.\n  if (symbolMeta.symbolClip) {\n    var clipPath = bar.__pictorialClipPath;\n    var clipShape = zrUtil.extend({}, symbolMeta.clipShape);\n    var valueDim = opt.valueDim;\n    var animationModel = symbolMeta.animationModel;\n    var dataIndex = symbolMeta.dataIndex;\n\n    if (clipPath) {\n      graphic.updateProps(clipPath, {\n        shape: clipShape\n      }, animationModel, dataIndex);\n    } else {\n      clipShape[valueDim.wh] = 0;\n      clipPath = new graphic.Rect({\n        shape: clipShape\n      });\n\n      bar.__pictorialBundle.setClipPath(clipPath);\n\n      bar.__pictorialClipPath = clipPath;\n      var target = {};\n      target[valueDim.wh] = symbolMeta.clipShape[valueDim.wh];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](clipPath, {\n        shape: target\n      }, animationModel, dataIndex);\n    }\n  }\n}\n\nfunction getItemModel(data, dataIndex) {\n  var itemModel = data.getItemModel(dataIndex);\n  itemModel.getAnimationDelayParams = getAnimationDelayParams;\n  itemModel.isAnimationEnabled = isAnimationEnabled;\n  return itemModel;\n}\n\nfunction getAnimationDelayParams(path) {\n  // The order is the same as the z-order, see `symbolRepeatDiretion`.\n  return {\n    index: path.__pictorialAnimationIndex,\n    count: path.__pictorialRepeatTimes\n  };\n}\n\nfunction isAnimationEnabled() {\n  // `animation` prop can be set on itemModel in pictorial bar chart.\n  return this.parentModel.isAnimationEnabled() && !!this.getShallow('animation');\n}\n\nfunction updateHoverAnimation(path, symbolMeta) {\n  path.off('emphasis').off('normal');\n  var scale = symbolMeta.symbolScale.slice();\n  symbolMeta.hoverAnimation && path.on('emphasis', function () {\n    this.animateTo({\n      scale: [scale[0] * 1.1, scale[1] * 1.1]\n    }, 400, 'elasticOut');\n  }).on('normal', function () {\n    this.animateTo({\n      scale: scale.slice()\n    }, 400, 'elasticOut');\n  });\n}\n\nfunction createBar(data, opt, symbolMeta, isUpdate) {\n  // bar is the main element for each data.\n  var bar = new graphic.Group(); // bundle is used for location and clip.\n\n  var bundle = new graphic.Group();\n  bar.add(bundle);\n  bar.__pictorialBundle = bundle;\n  bundle.attr('position', symbolMeta.bundlePosition.slice());\n\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta);\n  }\n\n  createOrUpdateBarRect(bar, symbolMeta, isUpdate);\n  createOrUpdateClip(bar, opt, symbolMeta, isUpdate);\n  bar.__pictorialShapeStr = getShapeStr(data, symbolMeta);\n  bar.__pictorialSymbolMeta = symbolMeta;\n  return bar;\n}\n\nfunction updateBar(bar, opt, symbolMeta) {\n  var animationModel = symbolMeta.animationModel;\n  var dataIndex = symbolMeta.dataIndex;\n  var bundle = bar.__pictorialBundle;\n  graphic.updateProps(bundle, {\n    position: symbolMeta.bundlePosition.slice()\n  }, animationModel, dataIndex);\n\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta, true);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta, true);\n  }\n\n  createOrUpdateBarRect(bar, symbolMeta, true);\n  createOrUpdateClip(bar, opt, symbolMeta, true);\n}\n\nfunction removeBar(data, dataIndex, animationModel, bar) {\n  // Not show text when animating\n  var labelRect = bar.__pictorialBarRect;\n  labelRect && (labelRect.style.text = null);\n  var pathes = [];\n  eachPath(bar, function (path) {\n    pathes.push(path);\n  });\n  bar.__pictorialMainPath && pathes.push(bar.__pictorialMainPath); // I do not find proper remove animation for clip yet.\n\n  bar.__pictorialClipPath && (animationModel = null);\n  zrUtil.each(pathes, function (path) {\n    graphic.updateProps(path, {\n      scale: [0, 0]\n    }, animationModel, dataIndex, function () {\n      bar.parent && bar.parent.remove(bar);\n    });\n  });\n  data.setItemGraphicEl(dataIndex, null);\n}\n\nfunction getShapeStr(data, symbolMeta) {\n  return [data.getItemVisual(symbolMeta.dataIndex, 'symbol') || 'none', !!symbolMeta.symbolRepeat, !!symbolMeta.symbolClip].join(':');\n}\n\nfunction eachPath(bar, cb, context) {\n  // Do not use Group#eachChild, because it do not support remove.\n  zrUtil.each(bar.__pictorialBundle.children(), function (el) {\n    el !== bar.__pictorialBarRect && cb.call(context, el);\n  });\n}\n\nfunction updateAttr(el, immediateAttrs, animationAttrs, symbolMeta, isUpdate, cb) {\n  immediateAttrs && el.attr(immediateAttrs); // when symbolCip used, only clip path has init animation, otherwise it would be weird effect.\n\n  if (symbolMeta.symbolClip && !isUpdate) {\n    animationAttrs && el.attr(animationAttrs);\n  } else {\n    animationAttrs && graphic[isUpdate ? 'updateProps' : 'initProps'](el, animationAttrs, symbolMeta.animationModel, symbolMeta.dataIndex, cb);\n  }\n}\n\nfunction updateCommon(bar, opt, symbolMeta) {\n  var color = symbolMeta.color;\n  var dataIndex = symbolMeta.dataIndex;\n  var itemModel = symbolMeta.itemModel; // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n  var normalStyle = itemModel.getModel('itemStyle.normal').getItemStyle(['color']);\n  var hoverStyle = itemModel.getModel('itemStyle.emphasis').getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  eachPath(bar, function (path) {\n    // PENDING setColor should be before setStyle!!!\n    path.setColor(color);\n    path.setStyle(zrUtil.defaults({\n      fill: color,\n      opacity: symbolMeta.opacity\n    }, normalStyle));\n    graphic.setHoverStyle(path, hoverStyle);\n    cursorStyle && (path.cursor = cursorStyle);\n    path.z2 = symbolMeta.z2;\n  });\n  var barRectHoverStyle = {};\n  var barPositionOutside = opt.valueDim.posDesc[+(symbolMeta.boundingLength > 0)];\n  var barRect = bar.__pictorialBarRect;\n  setLabel(barRect.style, barRectHoverStyle, itemModel, color, opt.seriesModel, dataIndex, barPositionOutside);\n  graphic.setHoverStyle(barRect, barRectHoverStyle);\n}\n\nfunction toIntTimes(times) {\n  var roundedTimes = Math.round(times); // Escapse accurate error\n\n  return Math.abs(times - roundedTimes) < 1e-4 ? roundedTimes : Math.ceil(times);\n}\n\nvar _default = BarView;\nmodule.exports = _default;","var makeStyleMapper = require(\"../../model/mixin/makeStyleMapper\");\n\nvar getBarItemStyle = makeStyleMapper([['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], // Compatitable with 2\n['stroke', 'barBorderColor'], ['lineWidth', 'barBorderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']]);\nvar _default = {\n  getBarItemStyle: function (excludes) {\n    var style = getBarItemStyle(this, excludes);\n\n    if (this.getBorderLineDash) {\n      var lineDash = this.getBorderLineDash();\n      lineDash && (style.lineDash = lineDash);\n    }\n\n    return style;\n  }\n};\nmodule.exports = _default;","var graphic = require(\"../../util/graphic\");\n\nfunction setLabel(normalStyle, hoverStyle, itemModel, color, seriesModel, dataIndex, labelPositionOutside) {\n  var labelModel = itemModel.getModel('label.normal');\n  var hoverLabelModel = itemModel.getModel('label.emphasis');\n  graphic.setLabelStyle(normalStyle, hoverStyle, labelModel, hoverLabelModel, {\n    labelFetcher: seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: seriesModel.getRawValue(dataIndex),\n    isRectText: true,\n    autoColor: color\n  });\n  fixPosition(normalStyle);\n  fixPosition(hoverStyle);\n}\n\nfunction fixPosition(style, labelPositionOutside) {\n  if (style.textPosition === 'outside') {\n    style.textPosition = labelPositionOutside;\n  }\n}\n\nexports.setLabel = setLabel;","var echarts = require(\"../echarts\");\n\nrequire(\"./boxplot/BoxplotSeries\");\n\nrequire(\"./boxplot/BoxplotView\");\n\nvar boxplotVisual = require(\"./boxplot/boxplotVisual\");\n\nvar boxplotLayout = require(\"./boxplot/boxplotLayout\");\n\necharts.registerVisual(boxplotVisual);\necharts.registerLayout(boxplotLayout);","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar _whiskerBoxCommon = require(\"../helper/whiskerBoxCommon\");\n\nvar seriesModelMixin = _whiskerBoxCommon.seriesModelMixin;\nvar BoxplotSeries = SeriesModel.extend({\n  type: 'series.boxplot',\n  dependencies: ['xAxis', 'yAxis', 'grid'],\n  // TODO\n  // box width represents group size, so dimension should have 'size'.\n\n  /**\n   * @see <https://en.wikipedia.org/wiki/Box_plot>\n   * The meanings of 'min' and 'max' depend on user,\n   * and echarts do not need to know it.\n   * @readOnly\n   */\n  defaultValueDimensions: ['min', 'Q1', 'median', 'Q3', 'max'],\n\n  /**\n   * @type {Array.<string>}\n   * @readOnly\n   */\n  dimensions: null,\n\n  /**\n   * @override\n   */\n  defaultOption: {\n    zlevel: 0,\n    // \n    z: 2,\n    // \n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    layout: null,\n    // 'horizontal' or 'vertical'\n    boxWidth: [7, 50],\n    // [min, max] can be percent of band width.\n    itemStyle: {\n      normal: {\n        color: '#fff',\n        borderWidth: 1\n      },\n      emphasis: {\n        borderWidth: 2,\n        shadowBlur: 5,\n        shadowOffsetX: 2,\n        shadowOffsetY: 2,\n        shadowColor: 'rgba(0,0,0,0.4)'\n      }\n    },\n    animationEasing: 'elasticOut',\n    animationDuration: 800\n  }\n});\nzrUtil.mixin(BoxplotSeries, seriesModelMixin, true);\nvar _default = BoxplotSeries;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar ChartView = require(\"../../view/Chart\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _whiskerBoxCommon = require(\"../helper/whiskerBoxCommon\");\n\nvar viewMixin = _whiskerBoxCommon.viewMixin;\nvar BoxplotView = ChartView.extend({\n  type: 'boxplot',\n  getStyleUpdater: function () {\n    return updateStyle;\n  },\n  dispose: zrUtil.noop\n});\nzrUtil.mixin(BoxplotView, viewMixin, true); // Update common properties\n\nvar normalStyleAccessPath = ['itemStyle', 'normal'];\nvar emphasisStyleAccessPath = ['itemStyle', 'emphasis'];\n\nfunction updateStyle(itemGroup, data, idx) {\n  var itemModel = data.getItemModel(idx);\n  var normalItemStyleModel = itemModel.getModel(normalStyleAccessPath);\n  var borderColor = data.getItemVisual(idx, 'color'); // Exclude borderColor.\n\n  var itemStyle = normalItemStyleModel.getItemStyle(['borderColor']);\n  var whiskerEl = itemGroup.childAt(itemGroup.whiskerIndex);\n  whiskerEl.style.set(itemStyle);\n  whiskerEl.style.stroke = borderColor;\n  whiskerEl.dirty();\n  var bodyEl = itemGroup.childAt(itemGroup.bodyIndex);\n  bodyEl.style.set(itemStyle);\n  bodyEl.style.stroke = borderColor;\n  bodyEl.dirty();\n  var hoverStyle = itemModel.getModel(emphasisStyleAccessPath).getItemStyle();\n  graphic.setHoverStyle(itemGroup, hoverStyle);\n}\n\nvar _default = BoxplotView;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar each = zrUtil.each;\n\nfunction _default(ecModel) {\n  var groupResult = groupSeriesByAxis(ecModel);\n  each(groupResult, function (groupItem) {\n    var seriesModels = groupItem.seriesModels;\n\n    if (!seriesModels.length) {\n      return;\n    }\n\n    calculateBase(groupItem);\n    each(seriesModels, function (seriesModel, idx) {\n      layoutSingleSeries(seriesModel, groupItem.boxOffsetList[idx], groupItem.boxWidthList[idx]);\n    });\n  });\n}\n/**\n * Group series by axis.\n */\n\n\nfunction groupSeriesByAxis(ecModel) {\n  var result = [];\n  var axisList = [];\n  ecModel.eachSeriesByType('boxplot', function (seriesModel) {\n    var baseAxis = seriesModel.getBaseAxis();\n    var idx = zrUtil.indexOf(axisList, baseAxis);\n\n    if (idx < 0) {\n      idx = axisList.length;\n      axisList[idx] = baseAxis;\n      result[idx] = {\n        axis: baseAxis,\n        seriesModels: []\n      };\n    }\n\n    result[idx].seriesModels.push(seriesModel);\n  });\n  return result;\n}\n/**\n * Calculate offset and box width for each series.\n */\n\n\nfunction calculateBase(groupItem) {\n  var extent;\n  var baseAxis = groupItem.axis;\n  var seriesModels = groupItem.seriesModels;\n  var seriesCount = seriesModels.length;\n  var boxWidthList = groupItem.boxWidthList = [];\n  var boxOffsetList = groupItem.boxOffsetList = [];\n  var boundList = [];\n  var bandWidth;\n\n  if (baseAxis.type === 'category') {\n    bandWidth = baseAxis.getBandWidth();\n  } else {\n    var maxDataCount = 0;\n    each(seriesModels, function (seriesModel) {\n      maxDataCount = Math.max(maxDataCount, seriesModel.getData().count());\n    });\n    extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / maxDataCount;\n  }\n\n  each(seriesModels, function (seriesModel) {\n    var boxWidthBound = seriesModel.get('boxWidth');\n\n    if (!zrUtil.isArray(boxWidthBound)) {\n      boxWidthBound = [boxWidthBound, boxWidthBound];\n    }\n\n    boundList.push([parsePercent(boxWidthBound[0], bandWidth) || 0, parsePercent(boxWidthBound[1], bandWidth) || 0]);\n  });\n  var availableWidth = bandWidth * 0.8 - 2;\n  var boxGap = availableWidth / seriesCount * 0.3;\n  var boxWidth = (availableWidth - boxGap * (seriesCount - 1)) / seriesCount;\n  var base = boxWidth / 2 - availableWidth / 2;\n  each(seriesModels, function (seriesModel, idx) {\n    boxOffsetList.push(base);\n    base += boxGap + boxWidth;\n    boxWidthList.push(Math.min(Math.max(boxWidth, boundList[idx][0]), boundList[idx][1]));\n  });\n}\n/**\n * Calculate points location for each series.\n */\n\n\nfunction layoutSingleSeries(seriesModel, offset, boxWidth) {\n  var coordSys = seriesModel.coordinateSystem;\n  var data = seriesModel.getData();\n  var halfWidth = boxWidth / 2;\n  var chartLayout = seriesModel.get('layout');\n  var variableDim = chartLayout === 'horizontal' ? 0 : 1;\n  var constDim = 1 - variableDim;\n  var coordDims = ['x', 'y'];\n  var vDims = [];\n  var cDim;\n  zrUtil.each(data.dimensions, function (dimName) {\n    var dimInfo = data.getDimensionInfo(dimName);\n    var coordDim = dimInfo.coordDim;\n\n    if (coordDim === coordDims[constDim]) {\n      vDims.push(dimName);\n    } else if (coordDim === coordDims[variableDim]) {\n      cDim = dimName;\n    }\n  });\n\n  if (cDim == null || vDims.length < 5) {\n    return;\n  }\n\n  data.each([cDim].concat(vDims), function () {\n    var args = arguments;\n    var axisDimVal = args[0];\n    var idx = args[vDims.length + 1];\n    var median = getPoint(args[3]);\n    var end1 = getPoint(args[1]);\n    var end5 = getPoint(args[5]);\n    var whiskerEnds = [[end1, getPoint(args[2])], [end5, getPoint(args[4])]];\n    layEndLine(end1);\n    layEndLine(end5);\n    layEndLine(median);\n    var bodyEnds = [];\n    addBodyEnd(whiskerEnds[0][1], 0);\n    addBodyEnd(whiskerEnds[1][1], 1);\n    data.setItemLayout(idx, {\n      chartLayout: chartLayout,\n      initBaseline: median[constDim],\n      median: median,\n      bodyEnds: bodyEnds,\n      whiskerEnds: whiskerEnds\n    });\n\n    function getPoint(val) {\n      var p = [];\n      p[variableDim] = axisDimVal;\n      p[constDim] = val;\n      var point;\n\n      if (isNaN(axisDimVal) || isNaN(val)) {\n        point = [NaN, NaN];\n      } else {\n        point = coordSys.dataToPoint(p);\n        point[variableDim] += offset;\n      }\n\n      return point;\n    }\n\n    function addBodyEnd(point, start) {\n      var point1 = point.slice();\n      var point2 = point.slice();\n      point1[variableDim] += halfWidth;\n      point2[variableDim] -= halfWidth;\n      start ? bodyEnds.push(point1, point2) : bodyEnds.push(point2, point1);\n    }\n\n    function layEndLine(endCenter) {\n      var line = [endCenter.slice(), endCenter.slice()];\n      line[0][variableDim] -= halfWidth;\n      line[1][variableDim] += halfWidth;\n      whiskerEnds.push(line);\n    }\n  });\n}\n\nmodule.exports = _default;","var borderColorQuery = ['itemStyle', 'normal', 'borderColor'];\n\nfunction _default(ecModel, api) {\n  var globalColors = ecModel.get('color');\n  ecModel.eachRawSeriesByType('boxplot', function (seriesModel) {\n    var defaulColor = globalColors[seriesModel.seriesIndex % globalColors.length];\n    var data = seriesModel.getData();\n    data.setVisual({\n      legendSymbol: 'roundRect',\n      // Use name 'color' but not 'borderColor' for legend usage and\n      // visual coding from other component like dataRange.\n      color: seriesModel.get(borderColorQuery) || defaulColor\n    }); // Only visible series has each data be visual encoded\n\n    if (!ecModel.isSeriesFiltered(seriesModel)) {\n      data.each(function (idx) {\n        var itemModel = data.getItemModel(idx);\n        data.setItemVisual(idx, {\n          color: itemModel.get(borderColorQuery, true)\n        });\n      });\n    }\n  });\n}\n\nmodule.exports = _default;","var echarts = require(\"../echarts\");\n\nrequire(\"./candlestick/CandlestickSeries\");\n\nrequire(\"./candlestick/CandlestickView\");\n\nvar preprocessor = require(\"./candlestick/preprocessor\");\n\nvar candlestickVisual = require(\"./candlestick/candlestickVisual\");\n\nvar candlestickLayout = require(\"./candlestick/candlestickLayout\");\n\necharts.registerPreprocessor(preprocessor);\necharts.registerVisual(candlestickVisual);\necharts.registerLayout(candlestickLayout);","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar _whiskerBoxCommon = require(\"../helper/whiskerBoxCommon\");\n\nvar seriesModelMixin = _whiskerBoxCommon.seriesModelMixin;\nvar CandlestickSeries = SeriesModel.extend({\n  type: 'series.candlestick',\n  dependencies: ['xAxis', 'yAxis', 'grid'],\n\n  /**\n   * @readOnly\n   */\n  defaultValueDimensions: ['open', 'close', 'lowest', 'highest'],\n\n  /**\n   * @type {Array.<string>}\n   * @readOnly\n   */\n  dimensions: null,\n\n  /**\n   * @override\n   */\n  defaultOption: {\n    zlevel: 0,\n    // \n    z: 2,\n    // \n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    layout: null,\n    // 'horizontal' or 'vertical'\n    itemStyle: {\n      normal: {\n        color: '#c23531',\n        //  positive\n        color0: '#314656',\n        //  negative     '#c23531', '#314656'\n        borderWidth: 1,\n        // FIXME\n        // ec2lineStyle.color  lineStyle.color0\n        borderColor: '#c23531',\n        borderColor0: '#314656'\n      },\n      emphasis: {\n        borderWidth: 2\n      }\n    },\n    barMaxWidth: null,\n    barMinWidth: null,\n    barWidth: null,\n    animationUpdate: false,\n    animationEasing: 'linear',\n    animationDuration: 300\n  },\n\n  /**\n   * Get dimension for shadow in dataZoom\n   * @return {string} dimension name\n   */\n  getShadowDim: function () {\n    return 'open';\n  },\n  brushSelector: function (dataIndex, data, selectors) {\n    var itemLayout = data.getItemLayout(dataIndex);\n    return selectors.rect(itemLayout.brushRect);\n  }\n});\nzrUtil.mixin(CandlestickSeries, seriesModelMixin, true);\nvar _default = CandlestickSeries;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar ChartView = require(\"../../view/Chart\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _whiskerBoxCommon = require(\"../helper/whiskerBoxCommon\");\n\nvar viewMixin = _whiskerBoxCommon.viewMixin;\nvar CandlestickView = ChartView.extend({\n  type: 'candlestick',\n  getStyleUpdater: function () {\n    return updateStyle;\n  },\n  dispose: zrUtil.noop\n});\nzrUtil.mixin(CandlestickView, viewMixin, true); // Update common properties\n\nvar normalStyleAccessPath = ['itemStyle', 'normal'];\nvar emphasisStyleAccessPath = ['itemStyle', 'emphasis'];\n\nfunction updateStyle(itemGroup, data, idx) {\n  var itemModel = data.getItemModel(idx);\n  var normalItemStyleModel = itemModel.getModel(normalStyleAccessPath);\n  var color = data.getItemVisual(idx, 'color');\n  var borderColor = data.getItemVisual(idx, 'borderColor') || color; // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n  var itemStyle = normalItemStyleModel.getItemStyle(['color', 'color0', 'borderColor', 'borderColor0']);\n  var whiskerEl = itemGroup.childAt(itemGroup.whiskerIndex);\n  whiskerEl.useStyle(itemStyle);\n  whiskerEl.style.stroke = borderColor;\n  var bodyEl = itemGroup.childAt(itemGroup.bodyIndex);\n  bodyEl.useStyle(itemStyle);\n  bodyEl.style.fill = color;\n  bodyEl.style.stroke = borderColor;\n  var hoverStyle = itemModel.getModel(emphasisStyleAccessPath).getItemStyle();\n  graphic.setHoverStyle(itemGroup, hoverStyle);\n}\n\nvar _default = CandlestickView;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _graphic = require(\"../../util/graphic\");\n\nvar subPixelOptimize = _graphic.subPixelOptimize;\nvar retrieve2 = zrUtil.retrieve2;\n\nfunction _default(ecModel) {\n  ecModel.eachSeriesByType('candlestick', function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var data = seriesModel.getData();\n    var candleWidth = calculateCandleWidth(seriesModel, data);\n    var chartLayout = seriesModel.get('layout');\n    var variableDim = chartLayout === 'horizontal' ? 0 : 1;\n    var constDim = 1 - variableDim;\n    var coordDims = ['x', 'y'];\n    var vDims = [];\n    var cDim;\n    zrUtil.each(data.dimensions, function (dimName) {\n      var dimInfo = data.getDimensionInfo(dimName);\n      var coordDim = dimInfo.coordDim;\n\n      if (coordDim === coordDims[constDim]) {\n        vDims.push(dimName);\n      } else if (coordDim === coordDims[variableDim]) {\n        cDim = dimName;\n      }\n    });\n\n    if (cDim == null || vDims.length < 4) {\n      return;\n    }\n\n    var dataIndex = 0;\n    data.each([cDim].concat(vDims), function () {\n      var args = arguments;\n      var axisDimVal = args[0];\n      var idx = args[vDims.length + 1];\n      var openVal = args[1];\n      var closeVal = args[2];\n      var lowestVal = args[3];\n      var highestVal = args[4];\n      var ocLow = Math.min(openVal, closeVal);\n      var ocHigh = Math.max(openVal, closeVal);\n      var ocLowPoint = getPoint(ocLow);\n      var ocHighPoint = getPoint(ocHigh);\n      var lowestPoint = getPoint(lowestVal);\n      var highestPoint = getPoint(highestVal);\n      var whiskerEnds = [[subPixelOptimizePoint(highestPoint), subPixelOptimizePoint(ocHighPoint)], [subPixelOptimizePoint(lowestPoint), subPixelOptimizePoint(ocLowPoint)]];\n      var bodyEnds = [];\n      addBodyEnd(ocHighPoint, 0);\n      addBodyEnd(ocLowPoint, 1);\n      var sign;\n\n      if (openVal > closeVal) {\n        sign = -1;\n      } else if (openVal < closeVal) {\n        sign = 1;\n      } else {\n        // If close === open, compare with close of last record\n        if (dataIndex > 0) {\n          sign = data.getItemModel(dataIndex - 1).get()[2] <= closeVal ? 1 : -1;\n        } else {\n          // No record of previous, set to be positive\n          sign = 1;\n        }\n      }\n\n      data.setItemLayout(idx, {\n        chartLayout: chartLayout,\n        sign: sign,\n        initBaseline: openVal > closeVal ? ocHighPoint[constDim] : ocLowPoint[constDim],\n        // open point.\n        bodyEnds: bodyEnds,\n        whiskerEnds: whiskerEnds,\n        brushRect: makeBrushRect()\n      });\n      ++dataIndex;\n\n      function getPoint(val) {\n        var p = [];\n        p[variableDim] = axisDimVal;\n        p[constDim] = val;\n        return isNaN(axisDimVal) || isNaN(val) ? [NaN, NaN] : coordSys.dataToPoint(p);\n      }\n\n      function addBodyEnd(point, start) {\n        var point1 = point.slice();\n        var point2 = point.slice();\n        point1[variableDim] = subPixelOptimize(point1[variableDim] + candleWidth / 2, 1, false);\n        point2[variableDim] = subPixelOptimize(point2[variableDim] - candleWidth / 2, 1, true);\n        start ? bodyEnds.push(point1, point2) : bodyEnds.push(point2, point1);\n      }\n\n      function makeBrushRect() {\n        var pmin = getPoint(Math.min(openVal, closeVal, lowestVal, highestVal));\n        var pmax = getPoint(Math.max(openVal, closeVal, lowestVal, highestVal));\n        pmin[variableDim] -= candleWidth / 2;\n        pmax[variableDim] -= candleWidth / 2;\n        return {\n          x: pmin[0],\n          y: pmin[1],\n          width: constDim ? candleWidth : pmax[0] - pmin[0],\n          height: constDim ? pmax[1] - pmin[1] : candleWidth\n        };\n      }\n\n      function subPixelOptimizePoint(point) {\n        point[variableDim] = subPixelOptimize(point[variableDim], 1);\n        return point;\n      }\n    }, true);\n  });\n}\n\nfunction calculateCandleWidth(seriesModel, data) {\n  var baseAxis = seriesModel.getBaseAxis();\n  var extent;\n  var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : (extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / data.count());\n  var barMaxWidth = parsePercent(retrieve2(seriesModel.get('barMaxWidth'), bandWidth), bandWidth);\n  var barMinWidth = parsePercent(retrieve2(seriesModel.get('barMinWidth'), 1), bandWidth);\n  var barWidth = seriesModel.get('barWidth');\n  return barWidth != null ? parsePercent(barWidth, bandWidth) // Put max outer to ensure bar visible in spite of overlap.\n  : Math.max(Math.min(bandWidth / 2, barMaxWidth), barMinWidth);\n}\n\nmodule.exports = _default;","var positiveBorderColorQuery = ['itemStyle', 'normal', 'borderColor'];\nvar negativeBorderColorQuery = ['itemStyle', 'normal', 'borderColor0'];\nvar positiveColorQuery = ['itemStyle', 'normal', 'color'];\nvar negativeColorQuery = ['itemStyle', 'normal', 'color0'];\n\nfunction _default(ecModel, api) {\n  ecModel.eachRawSeriesByType('candlestick', function (seriesModel) {\n    var data = seriesModel.getData();\n    data.setVisual({\n      legendSymbol: 'roundRect'\n    }); // Only visible series has each data be visual encoded\n\n    if (!ecModel.isSeriesFiltered(seriesModel)) {\n      data.each(function (idx) {\n        var itemModel = data.getItemModel(idx);\n        var sign = data.getItemLayout(idx).sign;\n        data.setItemVisual(idx, {\n          color: itemModel.get(sign > 0 ? positiveColorQuery : negativeColorQuery),\n          borderColor: itemModel.get(sign > 0 ? positiveBorderColorQuery : negativeBorderColorQuery)\n        });\n      });\n    }\n  });\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nfunction _default(option) {\n  if (!option || !zrUtil.isArray(option.series)) {\n    return;\n  } // Translate 'k' to 'candlestick'.\n\n\n  zrUtil.each(option.series, function (seriesItem) {\n    if (zrUtil.isObject(seriesItem) && seriesItem.type === 'k') {\n      seriesItem.type = 'candlestick';\n    }\n  });\n}\n\nmodule.exports = _default;","var _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphicUtil = require(\"../util/graphic\");\n\nvar _labelHelper = require(\"./helper/labelHelper\");\n\nvar findLabelValueDim = _labelHelper.findLabelValueDim;\n\nvar createListFromArray = require(\"./helper/createListFromArray\");\n\nvar barGrid = require(\"../layout/barGrid\");\n\nvar DataDiffer = require(\"../data/DataDiffer\");\n\nvar prepareCartesian2d = require(\"../coord/cartesian/prepareCustom\");\n\nvar prepareGeo = require(\"../coord/geo/prepareCustom\");\n\nvar prepareSingleAxis = require(\"../coord/single/prepareCustom\");\n\nvar preparePolar = require(\"../coord/polar/prepareCustom\");\n\nvar prepareCalendar = require(\"../coord/calendar/prepareCustom\");\n\nvar ITEM_STYLE_NORMAL_PATH = ['itemStyle', 'normal'];\nvar ITEM_STYLE_EMPHASIS_PATH = ['itemStyle', 'emphasis'];\nvar LABEL_NORMAL = ['label', 'normal'];\nvar LABEL_EMPHASIS = ['label', 'emphasis']; // Use prefix to avoid index to be the same as el.name,\n// which will cause weird udpate animation.\n\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\n/**\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\n * of each coordinate systems are not required by each coordinate systems directly, but\n * required by the module `custom`.\n *\n * prepareInfoForCustomSeries {Function}: optional\n *     @return {Object} {coordSys: {...}, api: {\n *         coord: function (data, clamp) {}, // return point in global.\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\n *     }}\n */\n\nvar prepareCustoms = {\n  cartesian2d: prepareCartesian2d,\n  geo: prepareGeo,\n  singleAxis: prepareSingleAxis,\n  polar: preparePolar,\n  calendar: prepareCalendar\n}; // ------\n// Model\n// ------\n\necharts.extendSeriesModel({\n  type: 'series.custom',\n  dependencies: ['grid', 'polar', 'geo', 'singleAxis', 'calendar'],\n  defaultOption: {\n    coordinateSystem: 'cartesian2d',\n    // Can be set as 'none'\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // label: {}\n    // itemStyle: {}\n\n  },\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(option.data, this, ecModel);\n  }\n}); // -----\n// View\n// -----\n\necharts.extendChartView({\n  type: 'custom',\n\n  /**\n   * @private\n   * @type {module:echarts/data/List}\n   */\n  _data: null,\n\n  /**\n   * @override\n   */\n  render: function (customSeries, ecModel, api) {\n    var oldData = this._data;\n    var data = customSeries.getData();\n    var group = this.group;\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n    data.diff(oldData).add(function (newIdx) {\n      data.hasValue(newIdx) && createOrUpdate(null, newIdx, renderItem(newIdx), customSeries, group, data);\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      data.hasValue(newIdx) ? createOrUpdate(el, newIdx, renderItem(newIdx), customSeries, group, data) : el && group.remove(el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  },\n\n  /**\n   * @override\n   */\n  dispose: zrUtil.noop\n});\n\nfunction createEl(elOption) {\n  var graphicType = elOption.type;\n  var el;\n\n  if (graphicType === 'path') {\n    var shape = elOption.shape;\n    el = graphicUtil.makePath(shape.pathData, null, {\n      x: shape.x || 0,\n      y: shape.y || 0,\n      width: shape.width || 0,\n      height: shape.height || 0\n    }, 'center');\n    el.__customPathData = elOption.pathData;\n  } else if (graphicType === 'image') {\n    el = new graphicUtil.Image({});\n    el.__customImagePath = elOption.style.image;\n  } else if (graphicType === 'text') {\n    el = new graphicUtil.Text({});\n    el.__customText = elOption.style.text;\n  } else {\n    var Clz = graphicUtil[graphicType.charAt(0).toUpperCase() + graphicType.slice(1)];\n    el = new Clz();\n  }\n\n  el.__customGraphicType = graphicType;\n  el.name = elOption.name;\n  return el;\n}\n\nfunction updateEl(el, dataIndex, elOption, animatableModel, data, isInit) {\n  var targetProps = {};\n  var elOptionStyle = elOption.style || {};\n  elOption.shape && (targetProps.shape = zrUtil.clone(elOption.shape));\n  elOption.position && (targetProps.position = elOption.position.slice());\n  elOption.scale && (targetProps.scale = elOption.scale.slice());\n  elOption.origin && (targetProps.origin = elOption.origin.slice());\n  elOption.rotation && (targetProps.rotation = elOption.rotation);\n\n  if (el.type === 'image' && elOption.style) {\n    var targetStyle = targetProps.style = {};\n    zrUtil.each(['x', 'y', 'width', 'height'], function (prop) {\n      prepareStyleTransition(prop, targetStyle, elOptionStyle, el.style, isInit);\n    });\n  }\n\n  if (el.type === 'text' && elOption.style) {\n    var targetStyle = targetProps.style = {};\n    zrUtil.each(['x', 'y'], function (prop) {\n      prepareStyleTransition(prop, targetStyle, elOptionStyle, el.style, isInit);\n    }); // Compatible with previous: both support\n    // textFill and fill, textStroke and stroke in 'text' element.\n\n    !elOptionStyle.hasOwnProperty('textFill') && elOptionStyle.fill && (elOptionStyle.textFill = elOptionStyle.fill);\n    !elOptionStyle.hasOwnProperty('textStroke') && elOptionStyle.stroke && (elOptionStyle.textStroke = elOptionStyle.stroke);\n  }\n\n  if (el.type !== 'group') {\n    el.useStyle(elOptionStyle); // Init animation.\n\n    if (isInit) {\n      el.style.opacity = 0;\n      var targetOpacity = elOptionStyle.opacity;\n      targetOpacity == null && (targetOpacity = 1);\n      graphicUtil.initProps(el, {\n        style: {\n          opacity: targetOpacity\n        }\n      }, animatableModel, dataIndex);\n    }\n  }\n\n  if (isInit) {\n    el.attr(targetProps);\n  } else {\n    graphicUtil.updateProps(el, targetProps, animatableModel, dataIndex);\n  } // z2 must not be null/undefined, otherwise sort error may occur.\n\n\n  el.attr({\n    z2: elOption.z2 || 0,\n    silent: elOption.silent\n  });\n  elOption.styleEmphasis !== false && graphicUtil.setHoverStyle(el, elOption.styleEmphasis);\n}\n\nfunction prepareStyleTransition(prop, targetStyle, elOptionStyle, oldElStyle, isInit) {\n  if (elOptionStyle[prop] != null && !isInit) {\n    targetStyle[prop] = elOptionStyle[prop];\n    elOptionStyle[prop] = oldElStyle[prop];\n  }\n}\n\nfunction makeRenderItem(customSeries, data, ecModel, api) {\n  var renderItem = customSeries.get('renderItem');\n  var coordSys = customSeries.coordinateSystem;\n  var prepareResult = {};\n\n  if (coordSys) {\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms() : prepareCustoms[coordSys.type](coordSys);\n  }\n\n  var userAPI = zrUtil.defaults({\n    getWidth: api.getWidth,\n    getHeight: api.getHeight,\n    getZr: api.getZr,\n    getDevicePixelRatio: api.getDevicePixelRatio,\n    value: value,\n    style: style,\n    styleEmphasis: styleEmphasis,\n    visual: visual,\n    barLayout: barLayout,\n    currentSeriesIndices: currentSeriesIndices,\n    font: font\n  }, prepareResult.api || {});\n  var userParams = {\n    context: {},\n    seriesId: customSeries.id,\n    seriesName: customSeries.name,\n    seriesIndex: customSeries.seriesIndex,\n    coordSys: prepareResult.coordSys,\n    dataInsideLength: data.count(),\n    encode: wrapEncodeDef(customSeries.getData())\n  }; // Do not support call `api` asynchronously without dataIndexInside input.\n\n  var currDataIndexInside;\n  var currDirty = true;\n  var currItemModel;\n  var currLabelNormalModel;\n  var currLabelEmphasisModel;\n  var currLabelValueDim;\n  var currVisualColor;\n  return function (dataIndexInside) {\n    currDataIndexInside = dataIndexInside;\n    currDirty = true;\n    return renderItem && renderItem(zrUtil.defaults({\n      dataIndexInside: dataIndexInside,\n      dataIndex: data.getRawIndex(dataIndexInside)\n    }, userParams), userAPI) || {};\n  }; // Do not update cache until api called.\n\n  function updateCache(dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n\n    if (currDirty) {\n      currItemModel = data.getItemModel(dataIndexInside);\n      currLabelNormalModel = currItemModel.getModel(LABEL_NORMAL);\n      currLabelEmphasisModel = currItemModel.getModel(LABEL_EMPHASIS);\n      currLabelValueDim = findLabelValueDim(data);\n      currVisualColor = data.getItemVisual(dataIndexInside, 'color');\n      currDirty = false;\n    }\n  }\n  /**\n   * @public\n   * @param {number|string} dim\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   * @return {number|string} value\n   */\n\n\n  function value(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.get(data.getDimension(dim || 0), dataIndexInside);\n  }\n  /**\n   * By default, `visual` is applied to style (to support visualMap).\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\n   * it can be implemented as:\n   * `api.style({stroke: api.visual('color'), fill: null})`;\n   * @public\n   * @param {Object} [extra]\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function style(extra, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    updateCache(dataIndexInside);\n    var itemStyle = currItemModel.getModel(ITEM_STYLE_NORMAL_PATH).getItemStyle();\n    currVisualColor != null && (itemStyle.fill = currVisualColor);\n    var opacity = data.getItemVisual(dataIndexInside, 'opacity');\n    opacity != null && (itemStyle.opacity = opacity);\n\n    if (currLabelValueDim != null) {\n      graphicUtil.setTextStyle(itemStyle, currLabelNormalModel, null, {\n        autoColor: currVisualColor,\n        isRectText: true\n      });\n      itemStyle.text = currLabelNormalModel.getShallow('show') ? zrUtil.retrieve2(customSeries.getFormattedLabel(dataIndexInside, 'normal'), data.get(currLabelValueDim, dataIndexInside)) : null;\n    }\n\n    extra && zrUtil.extend(itemStyle, extra);\n    return itemStyle;\n  }\n  /**\n   * @public\n   * @param {Object} [extra]\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function styleEmphasis(extra, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    updateCache(dataIndexInside);\n    var itemStyle = currItemModel.getModel(ITEM_STYLE_EMPHASIS_PATH).getItemStyle();\n\n    if (currLabelValueDim != null) {\n      graphicUtil.setTextStyle(itemStyle, currLabelEmphasisModel, null, {\n        isRectText: true\n      }, true);\n      itemStyle.text = currLabelEmphasisModel.getShallow('show') ? zrUtil.retrieve3(customSeries.getFormattedLabel(dataIndexInside, 'emphasis'), customSeries.getFormattedLabel(dataIndexInside, 'normal'), data.get(currLabelValueDim, dataIndexInside)) : null;\n    }\n\n    extra && zrUtil.extend(itemStyle, extra);\n    return itemStyle;\n  }\n  /**\n   * @public\n   * @param {string} visualType\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function visual(visualType, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.getItemVisual(dataIndexInside, visualType);\n  }\n  /**\n   * @public\n   * @param {number} opt.count Positive interger.\n   * @param {number} [opt.barWidth]\n   * @param {number} [opt.barMaxWidth]\n   * @param {number} [opt.barGap]\n   * @param {number} [opt.barCategoryGap]\n   * @return {Object} {width, offset, offsetCenter} is not support, return undefined.\n   */\n\n\n  function barLayout(opt) {\n    if (coordSys.getBaseAxis) {\n      var baseAxis = coordSys.getBaseAxis();\n      return barGrid.getLayoutOnAxis(zrUtil.defaults({\n        axis: baseAxis\n      }, opt), api);\n    }\n  }\n  /**\n   * @public\n   * @return {Array.<number>}\n   */\n\n\n  function currentSeriesIndices() {\n    return ecModel.getCurrentSeriesIndices();\n  }\n  /**\n   * @public\n   * @param {Object} opt\n   * @param {string} [opt.fontStyle]\n   * @param {number} [opt.fontWeight]\n   * @param {number} [opt.fontSize]\n   * @param {string} [opt.fontFamily]\n   * @return {string} font string\n   */\n\n\n  function font(opt) {\n    return graphicUtil.getFont(opt, ecModel);\n  }\n}\n\nfunction wrapEncodeDef(data) {\n  var encodeDef = {};\n  zrUtil.each(data.dimensions, function (dimName, dataDimIndex) {\n    var dimInfo = data.getDimensionInfo(dimName);\n\n    if (!dimInfo.isExtraCoord) {\n      var coordDim = dimInfo.coordDim;\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\n      dataDims[dimInfo.coordDimIndex] = dataDimIndex;\n    }\n  });\n  return encodeDef;\n}\n\nfunction createOrUpdate(el, dataIndex, elOption, animatableModel, group, data) {\n  el = doCreateOrUpdate(el, dataIndex, elOption, animatableModel, group, data);\n  el && data.setItemGraphicEl(dataIndex, el);\n}\n\nfunction doCreateOrUpdate(el, dataIndex, elOption, animatableModel, group, data) {\n  var elOptionType = elOption.type;\n\n  if (el && elOptionType !== el.__customGraphicType && (elOptionType !== 'path' || elOption.pathData !== el.__customPathData) && (elOptionType !== 'image' || elOption.style.image !== el.__customImagePath) && (elOptionType !== 'text' || elOption.style.text !== el.__customText)) {\n    group.remove(el);\n    el = null;\n  } // `elOption.type` is undefined when `renderItem` returns nothing.\n\n\n  if (elOptionType == null) {\n    return;\n  }\n\n  var isInit = !el;\n  !el && (el = createEl(elOption));\n  updateEl(el, dataIndex, elOption, animatableModel, data, isInit);\n\n  if (elOptionType === 'group') {\n    var oldChildren = el.children() || [];\n    var newChildren = elOption.children || [];\n\n    if (elOption.diffChildrenByName) {\n      // lower performance.\n      diffGroupChildren({\n        oldChildren: oldChildren,\n        newChildren: newChildren,\n        dataIndex: dataIndex,\n        animatableModel: animatableModel,\n        group: el,\n        data: data\n      });\n    } else {\n      // better performance.\n      var index = 0;\n\n      for (; index < newChildren.length; index++) {\n        doCreateOrUpdate(el.childAt(index), dataIndex, newChildren[index], animatableModel, el, data);\n      }\n\n      for (; index < oldChildren.length; index++) {\n        oldChildren[index] && el.remove(oldChildren[index]);\n      }\n    }\n  }\n\n  group.add(el);\n  return el;\n}\n\nfunction diffGroupChildren(context) {\n  new DataDiffer(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\n}\n\nfunction getKey(item, idx) {\n  var name = item && item.name;\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\n}\n\nfunction processAddUpdate(newIndex, oldIndex) {\n  var context = this.context;\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\n  doCreateOrUpdate(child, context.dataIndex, childOption, context.animatableModel, context.group, context.data);\n}\n\nfunction processRemove(oldIndex) {\n  var context = this.context;\n  var child = context.oldChildren[oldIndex];\n  child && context.group.remove(child);\n}","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"./effectScatter/EffectScatterSeries\");\n\nrequire(\"./effectScatter/EffectScatterView\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar layoutPoints = require(\"../layout/points\");\n\necharts.registerVisual(zrUtil.curry(visualSymbol, 'effectScatter', 'circle', null));\necharts.registerLayout(zrUtil.curry(layoutPoints, 'effectScatter'));","var createListFromArray = require(\"../helper/createListFromArray\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar _default = SeriesModel.extend({\n  type: 'series.effectScatter',\n  dependencies: ['grid', 'polar'],\n  getInitialData: function (option, ecModel) {\n    var list = createListFromArray(option.data, this, ecModel);\n    return list;\n  },\n  brushSelector: 'point',\n  defaultOption: {\n    coordinateSystem: 'cartesian2d',\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    effectType: 'ripple',\n    progressive: 0,\n    // When to show the effect, option: 'render'|'emphasis'\n    showEffectOn: 'render',\n    // Ripple effect config\n    rippleEffect: {\n      period: 4,\n      // Scale of ripple\n      scale: 2.5,\n      // Brush type can be fill or stroke\n      brushType: 'fill'\n    },\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // symbol: null,        // \n    symbolSize: 10 // symbolSize * 2\n    // symbolRotate: null,  // \n    // large: false,\n    // Available when large is true\n    // largeThreshold: 2000,\n    // itemStyle: {\n    //     normal: {\n    //         opacity: 1\n    //     }\n    // }\n\n  }\n});\n\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar SymbolDraw = require(\"../helper/SymbolDraw\");\n\nvar EffectSymbol = require(\"../helper/EffectSymbol\");\n\nvar _default = echarts.extendChartView({\n  type: 'effectScatter',\n  init: function () {\n    this._symbolDraw = new SymbolDraw(EffectSymbol);\n  },\n  render: function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var effectSymbolDraw = this._symbolDraw;\n    effectSymbolDraw.updateData(data);\n    this.group.add(effectSymbolDraw.group);\n  },\n  updateLayout: function () {\n    this._symbolDraw.updateLayout();\n  },\n  remove: function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(api);\n  },\n  dispose: function () {}\n});\n\nmodule.exports = _default;","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"./funnel/FunnelSeries\");\n\nrequire(\"./funnel/FunnelView\");\n\nvar dataColor = require(\"../visual/dataColor\");\n\nvar funnelLayout = require(\"./funnel/funnelLayout\");\n\nvar dataFilter = require(\"../processor/dataFilter\");\n\necharts.registerVisual(zrUtil.curry(dataColor, 'funnel'));\necharts.registerLayout(funnelLayout);\necharts.registerProcessor(zrUtil.curry(dataFilter, 'funnel'));","var echarts = require(\"../../echarts\");\n\nvar List = require(\"../../data/List\");\n\nvar _model = require(\"../../util/model\");\n\nvar defaultEmphasis = _model.defaultEmphasis;\n\nvar completeDimensions = require(\"../../data/helper/completeDimensions\");\n\nvar FunnelSeries = echarts.extendSeriesModel({\n  type: 'series.funnel',\n  init: function (option) {\n    FunnelSeries.superApply(this, 'init', arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n    this.legendDataProvider = function () {\n      return this.getRawData();\n    }; // Extend labelLine emphasis\n\n\n    this._defaultLabelLine(option);\n  },\n  getInitialData: function (option, ecModel) {\n    var dimensions = completeDimensions(['value'], option.data);\n    var list = new List(dimensions, this);\n    list.initData(option.data);\n    return list;\n  },\n  _defaultLabelLine: function (option) {\n    // Extend labelLine emphasis\n    defaultEmphasis(option.labelLine, ['show']);\n    var labelLineNormalOpt = option.labelLine.normal;\n    var labelLineEmphasisOpt = option.labelLine.emphasis; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.normal.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.label.emphasis.show;\n  },\n  // Overwrite\n  getDataParams: function (dataIndex) {\n    var data = this.getData();\n    var params = FunnelSeries.superCall(this, 'getDataParams', dataIndex);\n    var sum = data.getSum('value'); // Percent is 0 if sum is 0\n\n    params.percent = !sum ? 0 : +(data.get('value', dataIndex) / sum * 100).toFixed(2);\n    params.$vars.push('percent');\n    return params;\n  },\n  defaultOption: {\n    zlevel: 0,\n    // \n    z: 2,\n    // \n    legendHoverLink: true,\n    left: 80,\n    top: 60,\n    right: 80,\n    bottom: 60,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    // \n    // min: 0,\n    // max: 100,\n    minSize: '0%',\n    maxSize: '100%',\n    sort: 'descending',\n    // 'ascending', 'descending'\n    gap: 0,\n    funnelAlign: 'center',\n    label: {\n      normal: {\n        show: true,\n        position: 'outer' // formatter: Tooltip.formatter\n\n      },\n      emphasis: {\n        show: true\n      }\n    },\n    labelLine: {\n      normal: {\n        show: true,\n        length: 20,\n        lineStyle: {\n          // color: ,\n          width: 1,\n          type: 'solid'\n        }\n      },\n      emphasis: {}\n    },\n    itemStyle: {\n      normal: {\n        // color: ,\n        borderColor: '#fff',\n        borderWidth: 1\n      },\n      emphasis: {// color: ,\n      }\n    }\n  }\n});\nvar _default = FunnelSeries;\nmodule.exports = _default;","var graphic = require(\"../../util/graphic\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar ChartView = require(\"../../view/Chart\");\n\n/**\n * Piece of pie including Sector, Label, LabelLine\n * @constructor\n * @extends {module:zrender/graphic/Group}\n */\nfunction FunnelPiece(data, idx) {\n  graphic.Group.call(this);\n  var polygon = new graphic.Polygon();\n  var labelLine = new graphic.Polyline();\n  var text = new graphic.Text();\n  this.add(polygon);\n  this.add(labelLine);\n  this.add(text);\n  this.updateData(data, idx, true); // Hover to change label and labelLine\n\n  function onEmphasis() {\n    labelLine.ignore = labelLine.hoverIgnore;\n    text.ignore = text.hoverIgnore;\n  }\n\n  function onNormal() {\n    labelLine.ignore = labelLine.normalIgnore;\n    text.ignore = text.normalIgnore;\n  }\n\n  this.on('emphasis', onEmphasis).on('normal', onNormal).on('mouseover', onEmphasis).on('mouseout', onNormal);\n}\n\nvar funnelPieceProto = FunnelPiece.prototype;\nvar opacityAccessPath = ['itemStyle', 'normal', 'opacity'];\n\nfunnelPieceProto.updateData = function (data, idx, firstCreate) {\n  var polygon = this.childAt(0);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var opacity = data.getItemModel(idx).get(opacityAccessPath);\n  opacity = opacity == null ? 1 : opacity; // Reset style\n\n  polygon.useStyle({});\n\n  if (firstCreate) {\n    polygon.setShape({\n      points: layout.points\n    });\n    polygon.setStyle({\n      opacity: 0\n    });\n    graphic.initProps(polygon, {\n      style: {\n        opacity: opacity\n      }\n    }, seriesModel, idx);\n  } else {\n    graphic.updateProps(polygon, {\n      style: {\n        opacity: opacity\n      },\n      shape: {\n        points: layout.points\n      }\n    }, seriesModel, idx);\n  } // Update common style\n\n\n  var itemStyleModel = itemModel.getModel('itemStyle');\n  var visualColor = data.getItemVisual(idx, 'color');\n  polygon.setStyle(zrUtil.defaults({\n    lineJoin: 'round',\n    fill: visualColor\n  }, itemStyleModel.getModel('normal').getItemStyle(['opacity'])));\n  polygon.hoverStyle = itemStyleModel.getModel('emphasis').getItemStyle();\n\n  this._updateLabel(data, idx);\n\n  graphic.setHoverStyle(this);\n};\n\nfunnelPieceProto._updateLabel = function (data, idx) {\n  var labelLine = this.childAt(1);\n  var labelText = this.childAt(2);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var labelLayout = layout.label;\n  var visualColor = data.getItemVisual(idx, 'color');\n  graphic.updateProps(labelLine, {\n    shape: {\n      points: labelLayout.linePoints || labelLayout.linePoints\n    }\n  }, seriesModel, idx);\n  graphic.updateProps(labelText, {\n    style: {\n      x: labelLayout.x,\n      y: labelLayout.y\n    }\n  }, seriesModel, idx);\n  labelText.attr({\n    rotation: labelLayout.rotation,\n    origin: [labelLayout.x, labelLayout.y],\n    z2: 10\n  });\n  var labelModel = itemModel.getModel('label.normal');\n  var labelHoverModel = itemModel.getModel('label.emphasis');\n  var labelLineModel = itemModel.getModel('labelLine.normal');\n  var labelLineHoverModel = itemModel.getModel('labelLine.emphasis');\n  var visualColor = data.getItemVisual(idx, 'color');\n  graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, labelHoverModel, {\n    labelFetcher: data.hostModel,\n    labelDataIndex: idx,\n    defaultText: data.getName(idx),\n    autoColor: visualColor,\n    useInsideStyle: !!labelLayout.inside\n  }, {\n    textAlign: labelLayout.textAlign,\n    textVerticalAlign: labelLayout.verticalAlign\n  });\n  labelText.ignore = labelText.normalIgnore = !labelModel.get('show');\n  labelText.hoverIgnore = !labelHoverModel.get('show');\n  labelLine.ignore = labelLine.normalIgnore = !labelLineModel.get('show');\n  labelLine.hoverIgnore = !labelLineHoverModel.get('show'); // Default use item visual color\n\n  labelLine.setStyle({\n    stroke: visualColor\n  });\n  labelLine.setStyle(labelLineModel.getModel('lineStyle').getLineStyle());\n  labelLine.hoverStyle = labelLineHoverModel.getModel('lineStyle').getLineStyle();\n};\n\nzrUtil.inherits(FunnelPiece, graphic.Group);\nvar FunnelView = ChartView.extend({\n  type: 'funnel',\n  render: function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    data.diff(oldData).add(function (idx) {\n      var funnelPiece = new FunnelPiece(data, idx);\n      data.setItemGraphicEl(idx, funnelPiece);\n      group.add(funnelPiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n      piePiece.updateData(data, newIdx);\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      group.remove(piePiece);\n    }).execute();\n    this._data = data;\n  },\n  remove: function () {\n    this.group.removeAll();\n    this._data = null;\n  },\n  dispose: function () {}\n});\nvar _default = FunnelView;\nmodule.exports = _default;","var layout = require(\"../../util/layout\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar linearMap = _number.linearMap;\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction getSortedIndices(data, sort) {\n  var valueArr = data.mapArray('value', function (val) {\n    return val;\n  });\n  var indices = [];\n  var isAscending = sort === 'ascending';\n\n  for (var i = 0, len = data.count(); i < len; i++) {\n    indices[i] = i;\n  } // Add custom sortable function & none sortable opetion by \"options.sort\"\n\n\n  if (typeof sort === 'function') {\n    indices.sort(sort);\n  } else if (sort !== 'none') {\n    indices.sort(function (a, b) {\n      return isAscending ? valueArr[a] - valueArr[b] : valueArr[b] - valueArr[a];\n    });\n  }\n\n  return indices;\n}\n\nfunction labelLayout(data) {\n  data.each(function (idx) {\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label.normal');\n    var labelPosition = labelModel.get('position');\n    var labelLineModel = itemModel.getModel('labelLine.normal');\n    var layout = data.getItemLayout(idx);\n    var points = layout.points;\n    var isLabelInside = labelPosition === 'inner' || labelPosition === 'inside' || labelPosition === 'center';\n    var textAlign;\n    var textX;\n    var textY;\n    var linePoints;\n\n    if (isLabelInside) {\n      textX = (points[0][0] + points[1][0] + points[2][0] + points[3][0]) / 4;\n      textY = (points[0][1] + points[1][1] + points[2][1] + points[3][1]) / 4;\n      textAlign = 'center';\n      linePoints = [[textX, textY], [textX, textY]];\n    } else {\n      var x1;\n      var y1;\n      var x2;\n      var labelLineLen = labelLineModel.get('length');\n\n      if (labelPosition === 'left') {\n        // Left side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        x2 = x1 - labelLineLen;\n        textX = x2 - 5;\n        textAlign = 'right';\n      } else {\n        // Right side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        x2 = x1 + labelLineLen;\n        textX = x2 + 5;\n        textAlign = 'left';\n      }\n\n      var y2 = y1;\n      linePoints = [[x1, y1], [x2, y2]];\n      textY = y2;\n    }\n\n    layout.label = {\n      linePoints: linePoints,\n      x: textX,\n      y: textY,\n      verticalAlign: 'middle',\n      textAlign: textAlign,\n      inside: isLabelInside\n    };\n  });\n}\n\nfunction _default(ecModel, api, payload) {\n  ecModel.eachSeriesByType('funnel', function (seriesModel) {\n    var data = seriesModel.getData();\n    var sort = seriesModel.get('sort');\n    var viewRect = getViewRect(seriesModel, api);\n    var indices = getSortedIndices(data, sort);\n    var sizeExtent = [parsePercent(seriesModel.get('minSize'), viewRect.width), parsePercent(seriesModel.get('maxSize'), viewRect.width)];\n    var dataExtent = data.getDataExtent('value');\n    var min = seriesModel.get('min');\n    var max = seriesModel.get('max');\n\n    if (min == null) {\n      min = Math.min(dataExtent[0], 0);\n    }\n\n    if (max == null) {\n      max = dataExtent[1];\n    }\n\n    var funnelAlign = seriesModel.get('funnelAlign');\n    var gap = seriesModel.get('gap');\n    var itemHeight = (viewRect.height - gap * (data.count() - 1)) / data.count();\n    var y = viewRect.y;\n\n    var getLinePoints = function (idx, offY) {\n      // End point index is data.count() and we assign it 0\n      var val = data.get('value', idx) || 0;\n      var itemWidth = linearMap(val, [min, max], sizeExtent, true);\n      var x0;\n\n      switch (funnelAlign) {\n        case 'left':\n          x0 = viewRect.x;\n          break;\n\n        case 'center':\n          x0 = viewRect.x + (viewRect.width - itemWidth) / 2;\n          break;\n\n        case 'right':\n          x0 = viewRect.x + viewRect.width - itemWidth;\n          break;\n      }\n\n      return [[x0, offY], [x0 + itemWidth, offY]];\n    };\n\n    if (sort === 'ascending') {\n      // From bottom to top\n      itemHeight = -itemHeight;\n      gap = -gap;\n      y += viewRect.height;\n      indices = indices.reverse();\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n      var idx = indices[i];\n      var nextIdx = indices[i + 1];\n      var start = getLinePoints(idx, y);\n      var end = getLinePoints(nextIdx, y + itemHeight);\n      y += itemHeight + gap;\n      data.setItemLayout(idx, {\n        points: start.concat(end.slice().reverse())\n      });\n    }\n\n    labelLayout(data);\n  });\n}\n\nmodule.exports = _default;","require(\"./gauge/GaugeSeries\");\n\nrequire(\"./gauge/GaugeView\");","var List = require(\"../../data/List\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar GaugeSeries = SeriesModel.extend({\n  type: 'series.gauge',\n  getInitialData: function (option, ecModel) {\n    var list = new List(['value'], this);\n    var dataOpt = option.data || [];\n\n    if (!zrUtil.isArray(dataOpt)) {\n      dataOpt = [dataOpt];\n    } // Only use the first data item\n\n\n    list.initData(dataOpt);\n    return list;\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    // \n    center: ['50%', '50%'],\n    legendHoverLink: true,\n    radius: '75%',\n    startAngle: 225,\n    endAngle: -45,\n    clockwise: true,\n    // \n    min: 0,\n    // \n    max: 100,\n    // 10\n    splitNumber: 10,\n    // \n    axisLine: {\n      // show\n      show: true,\n      lineStyle: {\n        // lineStyle\n        color: [[0.2, '#91c7ae'], [0.8, '#63869e'], [1, '#c23531']],\n        width: 30\n      }\n    },\n    // \n    splitLine: {\n      // show\n      show: true,\n      // length\n      length: 30,\n      // lineStylelineStyle\n      lineStyle: {\n        color: '#eee',\n        width: 2,\n        type: 'solid'\n      }\n    },\n    // \n    axisTick: {\n      // show\n      show: true,\n      // split\n      splitNumber: 5,\n      // length\n      length: 8,\n      // lineStyle\n      lineStyle: {\n        color: '#eee',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    axisLabel: {\n      show: true,\n      distance: 5,\n      // formatter: null,\n      color: 'auto'\n    },\n    pointer: {\n      show: true,\n      length: '80%',\n      width: 8\n    },\n    itemStyle: {\n      normal: {\n        color: 'auto'\n      }\n    },\n    title: {\n      show: true,\n      // x, ypx\n      offsetCenter: [0, '-40%'],\n      // TEXTSTYLE\n      color: '#333',\n      fontSize: 15\n    },\n    detail: {\n      show: true,\n      backgroundColor: 'rgba(0,0,0,0)',\n      borderWidth: 0,\n      borderColor: '#ccc',\n      width: 100,\n      height: null,\n      // self-adaption\n      padding: [5, 10],\n      // x, ypx\n      offsetCenter: [0, '40%'],\n      // formatter: null,\n      // TEXTSTYLE\n      color: 'auto',\n      fontSize: 30\n    }\n  }\n});\nvar _default = GaugeSeries;\nmodule.exports = _default;","var PointerPath = require(\"./PointerPath\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar ChartView = require(\"../../view/Chart\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar round = _number.round;\nvar linearMap = _number.linearMap;\n\nfunction parsePosition(seriesModel, api) {\n  var center = seriesModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  var size = Math.min(width, height);\n  var cx = parsePercent(center[0], api.getWidth());\n  var cy = parsePercent(center[1], api.getHeight());\n  var r = parsePercent(seriesModel.get('radius'), size / 2);\n  return {\n    cx: cx,\n    cy: cy,\n    r: r\n  };\n}\n\nfunction formatLabel(label, labelFormatter) {\n  if (labelFormatter) {\n    if (typeof labelFormatter === 'string') {\n      label = labelFormatter.replace('{value}', label != null ? label : '');\n    } else if (typeof labelFormatter === 'function') {\n      label = labelFormatter(label);\n    }\n  }\n\n  return label;\n}\n\nvar PI2 = Math.PI * 2;\nvar GaugeView = ChartView.extend({\n  type: 'gauge',\n  render: function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n    var colorList = seriesModel.get('axisLine.lineStyle.color');\n    var posInfo = parsePosition(seriesModel, api);\n\n    this._renderMain(seriesModel, ecModel, api, colorList, posInfo);\n  },\n  dispose: function () {},\n  _renderMain: function (seriesModel, ecModel, api, colorList, posInfo) {\n    var group = this.group;\n    var axisLineModel = seriesModel.getModel('axisLine');\n    var lineStyleModel = axisLineModel.getModel('lineStyle');\n    var clockwise = seriesModel.get('clockwise');\n    var startAngle = -seriesModel.get('startAngle') / 180 * Math.PI;\n    var endAngle = -seriesModel.get('endAngle') / 180 * Math.PI;\n    var angleRangeSpan = (endAngle - startAngle) % PI2;\n    var prevEndAngle = startAngle;\n    var axisLineWidth = lineStyleModel.get('width');\n\n    for (var i = 0; i < colorList.length; i++) {\n      // Clamp\n      var percent = Math.min(Math.max(colorList[i][0], 0), 1);\n      var endAngle = startAngle + angleRangeSpan * percent;\n      var sector = new graphic.Sector({\n        shape: {\n          startAngle: prevEndAngle,\n          endAngle: endAngle,\n          cx: posInfo.cx,\n          cy: posInfo.cy,\n          clockwise: clockwise,\n          r0: posInfo.r - axisLineWidth,\n          r: posInfo.r\n        },\n        silent: true\n      });\n      sector.setStyle({\n        fill: colorList[i][1]\n      });\n      sector.setStyle(lineStyleModel.getLineStyle( // Because we use sector to simulate arc\n      // so the properties for stroking are useless\n      ['color', 'borderWidth', 'borderColor']));\n      group.add(sector);\n      prevEndAngle = endAngle;\n    }\n\n    var getColor = function (percent) {\n      // Less than 0\n      if (percent <= 0) {\n        return colorList[0][1];\n      }\n\n      for (var i = 0; i < colorList.length; i++) {\n        if (colorList[i][0] >= percent && (i === 0 ? 0 : colorList[i - 1][0]) < percent) {\n          return colorList[i][1];\n        }\n      } // More than 1\n\n\n      return colorList[i - 1][1];\n    };\n\n    if (!clockwise) {\n      var tmp = startAngle;\n      startAngle = endAngle;\n      endAngle = tmp;\n    }\n\n    this._renderTicks(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise);\n\n    this._renderPointer(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise);\n\n    this._renderTitle(seriesModel, ecModel, api, getColor, posInfo);\n\n    this._renderDetail(seriesModel, ecModel, api, getColor, posInfo);\n  },\n  _renderTicks: function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise) {\n    var group = this.group;\n    var cx = posInfo.cx;\n    var cy = posInfo.cy;\n    var r = posInfo.r;\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var splitLineModel = seriesModel.getModel('splitLine');\n    var tickModel = seriesModel.getModel('axisTick');\n    var labelModel = seriesModel.getModel('axisLabel');\n    var splitNumber = seriesModel.get('splitNumber');\n    var subSplitNumber = tickModel.get('splitNumber');\n    var splitLineLen = parsePercent(splitLineModel.get('length'), r);\n    var tickLen = parsePercent(tickModel.get('length'), r);\n    var angle = startAngle;\n    var step = (endAngle - startAngle) / splitNumber;\n    var subStep = step / subSplitNumber;\n    var splitLineStyle = splitLineModel.getModel('lineStyle').getLineStyle();\n    var tickLineStyle = tickModel.getModel('lineStyle').getLineStyle();\n\n    for (var i = 0; i <= splitNumber; i++) {\n      var unitX = Math.cos(angle);\n      var unitY = Math.sin(angle); // Split line\n\n      if (splitLineModel.get('show')) {\n        var splitLine = new graphic.Line({\n          shape: {\n            x1: unitX * r + cx,\n            y1: unitY * r + cy,\n            x2: unitX * (r - splitLineLen) + cx,\n            y2: unitY * (r - splitLineLen) + cy\n          },\n          style: splitLineStyle,\n          silent: true\n        });\n\n        if (splitLineStyle.stroke === 'auto') {\n          splitLine.setStyle({\n            stroke: getColor(i / splitNumber)\n          });\n        }\n\n        group.add(splitLine);\n      } // Label\n\n\n      if (labelModel.get('show')) {\n        var label = formatLabel(round(i / splitNumber * (maxVal - minVal) + minVal), labelModel.get('formatter'));\n        var distance = labelModel.get('distance');\n        var autoColor = getColor(i / splitNumber);\n        group.add(new graphic.Text({\n          style: graphic.setTextStyle({}, labelModel, {\n            text: label,\n            x: unitX * (r - splitLineLen - distance) + cx,\n            y: unitY * (r - splitLineLen - distance) + cy,\n            textVerticalAlign: unitY < -0.4 ? 'top' : unitY > 0.4 ? 'bottom' : 'middle',\n            textAlign: unitX < -0.4 ? 'left' : unitX > 0.4 ? 'right' : 'center'\n          }, {\n            autoColor: autoColor\n          }),\n          silent: true\n        }));\n      } // Axis tick\n\n\n      if (tickModel.get('show') && i !== splitNumber) {\n        for (var j = 0; j <= subSplitNumber; j++) {\n          var unitX = Math.cos(angle);\n          var unitY = Math.sin(angle);\n          var tickLine = new graphic.Line({\n            shape: {\n              x1: unitX * r + cx,\n              y1: unitY * r + cy,\n              x2: unitX * (r - tickLen) + cx,\n              y2: unitY * (r - tickLen) + cy\n            },\n            silent: true,\n            style: tickLineStyle\n          });\n\n          if (tickLineStyle.stroke === 'auto') {\n            tickLine.setStyle({\n              stroke: getColor((i + j / subSplitNumber) / splitNumber)\n            });\n          }\n\n          group.add(tickLine);\n          angle += subStep;\n        }\n\n        angle -= subStep;\n      } else {\n        angle += step;\n      }\n    }\n  },\n  _renderPointer: function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise) {\n    var group = this.group;\n    var oldData = this._data;\n\n    if (!seriesModel.get('pointer.show')) {\n      // Remove old element\n      oldData && oldData.eachItemGraphicEl(function (el) {\n        group.remove(el);\n      });\n      return;\n    }\n\n    var valueExtent = [+seriesModel.get('min'), +seriesModel.get('max')];\n    var angleExtent = [startAngle, endAngle];\n    var data = seriesModel.getData();\n    data.diff(oldData).add(function (idx) {\n      var pointer = new PointerPath({\n        shape: {\n          angle: startAngle\n        }\n      });\n      graphic.initProps(pointer, {\n        shape: {\n          angle: linearMap(data.get('value', idx), valueExtent, angleExtent, true)\n        }\n      }, seriesModel);\n      group.add(pointer);\n      data.setItemGraphicEl(idx, pointer);\n    }).update(function (newIdx, oldIdx) {\n      var pointer = oldData.getItemGraphicEl(oldIdx);\n      graphic.updateProps(pointer, {\n        shape: {\n          angle: linearMap(data.get('value', newIdx), valueExtent, angleExtent, true)\n        }\n      }, seriesModel);\n      group.add(pointer);\n      data.setItemGraphicEl(newIdx, pointer);\n    }).remove(function (idx) {\n      var pointer = oldData.getItemGraphicEl(idx);\n      group.remove(pointer);\n    }).execute();\n    data.eachItemGraphicEl(function (pointer, idx) {\n      var itemModel = data.getItemModel(idx);\n      var pointerModel = itemModel.getModel('pointer');\n      pointer.setShape({\n        x: posInfo.cx,\n        y: posInfo.cy,\n        width: parsePercent(pointerModel.get('width'), posInfo.r),\n        r: parsePercent(pointerModel.get('length'), posInfo.r)\n      });\n      pointer.useStyle(itemModel.getModel('itemStyle.normal').getItemStyle());\n\n      if (pointer.style.fill === 'auto') {\n        pointer.setStyle('fill', getColor(linearMap(data.get('value', idx), valueExtent, [0, 1], true)));\n      }\n\n      graphic.setHoverStyle(pointer, itemModel.getModel('itemStyle.emphasis').getItemStyle());\n    });\n    this._data = data;\n  },\n  _renderTitle: function (seriesModel, ecModel, api, getColor, posInfo) {\n    var titleModel = seriesModel.getModel('title');\n\n    if (titleModel.get('show')) {\n      var offsetCenter = titleModel.get('offsetCenter');\n      var x = posInfo.cx + parsePercent(offsetCenter[0], posInfo.r);\n      var y = posInfo.cy + parsePercent(offsetCenter[1], posInfo.r);\n      var minVal = +seriesModel.get('min');\n      var maxVal = +seriesModel.get('max');\n      var value = seriesModel.getData().get('value', 0);\n      var autoColor = getColor(linearMap(value, [minVal, maxVal], [0, 1], true));\n      this.group.add(new graphic.Text({\n        silent: true,\n        style: graphic.setTextStyle({}, titleModel, {\n          x: x,\n          y: y,\n          // FIXME First data name ?\n          text: seriesModel.getData().getName(0),\n          textAlign: 'center',\n          textVerticalAlign: 'middle'\n        }, {\n          autoColor: autoColor,\n          forceRich: true\n        })\n      }));\n    }\n  },\n  _renderDetail: function (seriesModel, ecModel, api, getColor, posInfo) {\n    var detailModel = seriesModel.getModel('detail');\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n\n    if (detailModel.get('show')) {\n      var offsetCenter = detailModel.get('offsetCenter');\n      var x = posInfo.cx + parsePercent(offsetCenter[0], posInfo.r);\n      var y = posInfo.cy + parsePercent(offsetCenter[1], posInfo.r);\n      var width = parsePercent(detailModel.get('width'), posInfo.r);\n      var height = parsePercent(detailModel.get('height'), posInfo.r);\n      var value = seriesModel.getData().get('value', 0);\n      var autoColor = getColor(linearMap(value, [minVal, maxVal], [0, 1], true));\n      this.group.add(new graphic.Text({\n        silent: true,\n        style: graphic.setTextStyle({}, detailModel, {\n          x: x,\n          y: y,\n          text: formatLabel( // FIXME First data name ?\n          value, detailModel.get('formatter')),\n          textWidth: isNaN(width) ? null : width,\n          textHeight: isNaN(height) ? null : height,\n          textAlign: 'center',\n          textVerticalAlign: 'middle'\n        }, {\n          autoColor: autoColor,\n          forceRich: true\n        })\n      }));\n    }\n  }\n});\nvar _default = GaugeView;\nmodule.exports = _default;","var Path = require(\"zrender/lib/graphic/Path\");\n\nvar _default = Path.extend({\n  type: 'echartsGaugePointer',\n  shape: {\n    angle: 0,\n    width: 10,\n    r: 10,\n    x: 0,\n    y: 0\n  },\n  buildPath: function (ctx, shape) {\n    var mathCos = Math.cos;\n    var mathSin = Math.sin;\n    var r = shape.r;\n    var width = shape.width;\n    var angle = shape.angle;\n    var x = shape.x - mathCos(angle) * width * (width >= r / 3 ? 1 : 2);\n    var y = shape.y - mathSin(angle) * width * (width >= r / 3 ? 1 : 2);\n    angle = shape.angle - Math.PI / 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(shape.x + mathCos(angle) * width, shape.y + mathSin(angle) * width);\n    ctx.lineTo(shape.x + mathCos(shape.angle) * r, shape.y + mathSin(shape.angle) * r);\n    ctx.lineTo(shape.x - mathCos(angle) * width, shape.y - mathSin(angle) * width);\n    ctx.lineTo(x, y);\n    return;\n  }\n});\n\nmodule.exports = _default;","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"./graph/GraphSeries\");\n\nrequire(\"./graph/GraphView\");\n\nrequire(\"./graph/graphAction\");\n\nvar categoryFilter = require(\"./graph/categoryFilter\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar categoryVisual = require(\"./graph/categoryVisual\");\n\nvar edgeVisual = require(\"./graph/edgeVisual\");\n\nvar simpleLayout = require(\"./graph/simpleLayout\");\n\nvar circularLayout = require(\"./graph/circularLayout\");\n\nvar forceLayout = require(\"./graph/forceLayout\");\n\nvar createView = require(\"./graph/createView\");\n\necharts.registerProcessor(categoryFilter);\necharts.registerVisual(zrUtil.curry(visualSymbol, 'graph', 'circle', null));\necharts.registerVisual(categoryVisual);\necharts.registerVisual(edgeVisual);\necharts.registerLayout(simpleLayout);\necharts.registerLayout(circularLayout);\necharts.registerLayout(forceLayout); // Graph view coordinate system\n\necharts.registerCoordinateSystem('graphView', {\n  create: createView\n});","var echarts = require(\"../../echarts\");\n\nvar List = require(\"../../data/List\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _model = require(\"../../util/model\");\n\nvar defaultEmphasis = _model.defaultEmphasis;\n\nvar Model = require(\"../../model/Model\");\n\nvar _format = require(\"../../util/format\");\n\nvar encodeHTML = _format.encodeHTML;\n\nvar createGraphFromNodeEdge = require(\"../helper/createGraphFromNodeEdge\");\n\nvar GraphSeries = echarts.extendSeriesModel({\n  type: 'series.graph',\n  init: function (option) {\n    GraphSeries.superApply(this, 'init', arguments); // Provide data for legend select\n\n    this.legendDataProvider = function () {\n      return this._categoriesData;\n    };\n\n    this.fillDataTextStyle(option.edges || option.links);\n\n    this._updateCategoriesData();\n  },\n  mergeOption: function (option) {\n    GraphSeries.superApply(this, 'mergeOption', arguments);\n    this.fillDataTextStyle(option.edges || option.links);\n\n    this._updateCategoriesData();\n  },\n  mergeDefaultAndTheme: function (option) {\n    GraphSeries.superApply(this, 'mergeDefaultAndTheme', arguments);\n    defaultEmphasis(option.edgeLabel, ['show']);\n  },\n  getInitialData: function (option, ecModel) {\n    var edges = option.edges || option.links || [];\n    var nodes = option.data || option.nodes || [];\n    var self = this;\n\n    if (nodes && edges) {\n      return createGraphFromNodeEdge(nodes, edges, this, true, beforeLink).data;\n    }\n\n    function beforeLink(nodeData, edgeData) {\n      // Overwrite nodeData.getItemModel to\n      nodeData.wrapMethod('getItemModel', function (model) {\n        var categoriesModels = self._categoriesModels;\n        var categoryIdx = model.getShallow('category');\n        var categoryModel = categoriesModels[categoryIdx];\n\n        if (categoryModel) {\n          categoryModel.parentModel = model.parentModel;\n          model.parentModel = categoryModel;\n        }\n\n        return model;\n      });\n      var edgeLabelModel = self.getModel('edgeLabel'); // For option `edgeLabel` can be found by label.xxx.xxx on item mode.\n\n      var fakeSeriesModel = new Model({\n        label: edgeLabelModel.option\n      }, edgeLabelModel.parentModel, ecModel);\n      edgeData.wrapMethod('getItemModel', function (model) {\n        model.customizeGetParent(edgeGetParent);\n        return model;\n      });\n\n      function edgeGetParent(path) {\n        path = this.parsePath(path);\n        return path && path[0] === 'label' ? fakeSeriesModel : this.parentModel;\n      }\n    }\n  },\n\n  /**\n   * @return {module:echarts/data/Graph}\n   */\n  getGraph: function () {\n    return this.getData().graph;\n  },\n\n  /**\n   * @return {module:echarts/data/List}\n   */\n  getEdgeData: function () {\n    return this.getGraph().edgeData;\n  },\n\n  /**\n   * @return {module:echarts/data/List}\n   */\n  getCategoriesData: function () {\n    return this._categoriesData;\n  },\n\n  /**\n   * @override\n   */\n  formatTooltip: function (dataIndex, multipleSeries, dataType) {\n    if (dataType === 'edge') {\n      var nodeData = this.getData();\n      var params = this.getDataParams(dataIndex, dataType);\n      var edge = nodeData.graph.getEdgeByIndex(dataIndex);\n      var sourceName = nodeData.getName(edge.node1.dataIndex);\n      var targetName = nodeData.getName(edge.node2.dataIndex);\n      var html = [];\n      sourceName != null && html.push(sourceName);\n      targetName != null && html.push(targetName);\n      html = encodeHTML(html.join(' > '));\n\n      if (params.value) {\n        html += ' : ' + encodeHTML(params.value);\n      }\n\n      return html;\n    } else {\n      // dataType === 'node' or empty\n      return GraphSeries.superApply(this, 'formatTooltip', arguments);\n    }\n  },\n  _updateCategoriesData: function () {\n    var categories = zrUtil.map(this.option.categories || [], function (category) {\n      // Data must has value\n      return category.value != null ? category : zrUtil.extend({\n        value: 0\n      }, category);\n    });\n    var categoriesData = new List(['value'], this);\n    categoriesData.initData(categories);\n    this._categoriesData = categoriesData;\n    this._categoriesModels = categoriesData.mapArray(function (idx) {\n      return categoriesData.getItemModel(idx, true);\n    });\n  },\n  setZoom: function (zoom) {\n    this.option.zoom = zoom;\n  },\n  setCenter: function (center) {\n    this.option.center = center;\n  },\n  isAnimationEnabled: function () {\n    return GraphSeries.superCall(this, 'isAnimationEnabled') // Not enable animation when do force layout\n    && !(this.get('layout') === 'force' && this.get('force.layoutAnimation'));\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // Default option for all coordinate systems\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // geoIndex: 0,\n    legendHoverLink: true,\n    hoverAnimation: true,\n    layout: null,\n    focusNodeAdjacency: false,\n    // Configuration of circular layout\n    circular: {\n      rotateLabel: false\n    },\n    // Configuration of force directed layout\n    force: {\n      initLayout: null,\n      // Node repulsion. Can be an array to represent range.\n      repulsion: [0, 50],\n      gravity: 0.1,\n      // Edge length. Can be an array to represent range.\n      edgeLength: 30,\n      layoutAnimation: true\n    },\n    left: 'center',\n    top: 'center',\n    // right: null,\n    // bottom: null,\n    // width: '80%',\n    // height: '80%',\n    symbol: 'circle',\n    symbolSize: 10,\n    edgeSymbol: ['none', 'none'],\n    edgeSymbolSize: 10,\n    edgeLabel: {\n      normal: {\n        position: 'middle'\n      },\n      emphasis: {}\n    },\n    draggable: false,\n    roam: false,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.6,\n    // cursor: null,\n    // categories: [],\n    // data: []\n    // Or\n    // nodes: []\n    //\n    // links: []\n    // Or\n    // edges: []\n    label: {\n      normal: {\n        show: false,\n        formatter: '{b}'\n      },\n      emphasis: {\n        show: true\n      }\n    },\n    itemStyle: {\n      normal: {},\n      emphasis: {}\n    },\n    lineStyle: {\n      normal: {\n        color: '#aaa',\n        width: 1,\n        curveness: 0,\n        opacity: 0.5\n      },\n      emphasis: {}\n    }\n  }\n});\nvar _default = GraphSeries;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar SymbolDraw = require(\"../helper/SymbolDraw\");\n\nvar LineDraw = require(\"../helper/LineDraw\");\n\nvar RoamController = require(\"../../component/helper/RoamController\");\n\nvar roamHelper = require(\"../../component/helper/roamHelper\");\n\nvar _cursorHelper = require(\"../../component/helper/cursorHelper\");\n\nvar onIrrelevantElement = _cursorHelper.onIrrelevantElement;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar adjustEdge = require(\"./adjustEdge\");\n\nvar nodeOpacityPath = ['itemStyle', 'normal', 'opacity'];\nvar lineOpacityPath = ['lineStyle', 'normal', 'opacity'];\n\nfunction getItemOpacity(item, opacityPath) {\n  return item.getVisual('opacity') || item.getModel().get(opacityPath);\n}\n\nfunction fadeOutItem(item, opacityPath, opacityRatio) {\n  var el = item.getGraphicEl();\n  var opacity = getItemOpacity(item, opacityPath);\n\n  if (opacityRatio != null) {\n    opacity == null && (opacity = 1);\n    opacity *= opacityRatio;\n  }\n\n  el.downplay && el.downplay();\n  el.traverse(function (child) {\n    if (child.type !== 'group') {\n      child.setStyle('opacity', opacity);\n    }\n  });\n}\n\nfunction fadeInItem(item, opacityPath) {\n  var opacity = getItemOpacity(item, opacityPath);\n  var el = item.getGraphicEl();\n  el.highlight && el.highlight();\n  el.traverse(function (child) {\n    if (child.type !== 'group') {\n      child.setStyle('opacity', opacity);\n    }\n  });\n}\n\nvar _default = echarts.extendChartView({\n  type: 'graph',\n  init: function (ecModel, api) {\n    var symbolDraw = new SymbolDraw();\n    var lineDraw = new LineDraw();\n    var group = this.group;\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: group\n    };\n    group.add(symbolDraw.group);\n    group.add(lineDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineDraw = lineDraw;\n    this._firstRender = true;\n  },\n  render: function (seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    this._model = seriesModel;\n    this._nodeScaleRatio = seriesModel.get('nodeScaleRatio');\n    var symbolDraw = this._symbolDraw;\n    var lineDraw = this._lineDraw;\n    var group = this.group;\n\n    if (coordSys.type === 'view') {\n      var groupNewProp = {\n        position: coordSys.position,\n        scale: coordSys.scale\n      };\n\n      if (this._firstRender) {\n        group.attr(groupNewProp);\n      } else {\n        graphic.updateProps(group, groupNewProp, seriesModel);\n      }\n    } // Fix edge contact point with node\n\n\n    adjustEdge(seriesModel.getGraph(), this._getNodeGlobalScale(seriesModel));\n    var data = seriesModel.getData();\n    symbolDraw.updateData(data);\n    var edgeData = seriesModel.getEdgeData();\n    lineDraw.updateData(edgeData);\n\n    this._updateNodeAndLinkScale();\n\n    this._updateController(seriesModel, ecModel, api);\n\n    clearTimeout(this._layoutTimeout);\n    var forceLayout = seriesModel.forceLayout;\n    var layoutAnimation = seriesModel.get('force.layoutAnimation');\n\n    if (forceLayout) {\n      this._startForceLayoutIteration(forceLayout, layoutAnimation);\n    }\n\n    data.eachItemGraphicEl(function (el, idx) {\n      var itemModel = data.getItemModel(idx); // Update draggable\n\n      el.off('drag').off('dragend');\n      var draggable = data.getItemModel(idx).get('draggable');\n\n      if (draggable) {\n        el.on('drag', function () {\n          if (forceLayout) {\n            forceLayout.warmUp();\n            !this._layouting && this._startForceLayoutIteration(forceLayout, layoutAnimation);\n            forceLayout.setFixed(idx); // Write position back to layout\n\n            data.setItemLayout(idx, el.position);\n          }\n        }, this).on('dragend', function () {\n          if (forceLayout) {\n            forceLayout.setUnfixed(idx);\n          }\n        }, this);\n      }\n\n      el.setDraggable(draggable && forceLayout);\n      el.off('mouseover', el.__focusNodeAdjacency);\n      el.off('mouseout', el.__unfocusNodeAdjacency);\n\n      if (itemModel.get('focusNodeAdjacency')) {\n        el.on('mouseover', el.__focusNodeAdjacency = function () {\n          api.dispatchAction({\n            type: 'focusNodeAdjacency',\n            seriesId: seriesModel.id,\n            dataIndex: el.dataIndex\n          });\n        });\n        el.on('mouseout', el.__unfocusNodeAdjacency = function () {\n          api.dispatchAction({\n            type: 'unfocusNodeAdjacency',\n            seriesId: seriesModel.id\n          });\n        });\n      }\n    }, this);\n    data.graph.eachEdge(function (edge) {\n      var el = edge.getGraphicEl();\n      el.off('mouseover', el.__focusNodeAdjacency);\n      el.off('mouseout', el.__unfocusNodeAdjacency);\n\n      if (edge.getModel().get('focusNodeAdjacency')) {\n        el.on('mouseover', el.__focusNodeAdjacency = function () {\n          api.dispatchAction({\n            type: 'focusNodeAdjacency',\n            seriesId: seriesModel.id,\n            edgeDataIndex: edge.dataIndex\n          });\n        });\n        el.on('mouseout', el.__unfocusNodeAdjacency = function () {\n          api.dispatchAction({\n            type: 'unfocusNodeAdjacency',\n            seriesId: seriesModel.id\n          });\n        });\n      }\n    });\n    var circularRotateLabel = seriesModel.get('layout') === 'circular' && seriesModel.get('circular.rotateLabel');\n    var cx = data.getLayout('cx');\n    var cy = data.getLayout('cy');\n    data.eachItemGraphicEl(function (el, idx) {\n      var symbolPath = el.getSymbolPath();\n\n      if (circularRotateLabel) {\n        var pos = data.getItemLayout(idx);\n        var rad = Math.atan2(pos[1] - cy, pos[0] - cx);\n\n        if (rad < 0) {\n          rad = Math.PI * 2 + rad;\n        }\n\n        var isLeft = pos[0] < cx;\n\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n\n        var textPosition = isLeft ? 'left' : 'right';\n        symbolPath.setStyle({\n          textRotation: -rad,\n          textPosition: textPosition,\n          textOrigin: 'center'\n        });\n        symbolPath.hoverStyle && (symbolPath.hoverStyle.textPosition = textPosition);\n      } else {\n        symbolPath.setStyle({\n          textRotation: 0\n        });\n      }\n    });\n    this._firstRender = false;\n  },\n  dispose: function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = {};\n  },\n  focusNodeAdjacency: function (seriesModel, ecModel, api, payload) {\n    var data = this._model.getData();\n\n    var graph = data.graph;\n    var dataIndex = payload.dataIndex;\n    var edgeDataIndex = payload.edgeDataIndex;\n    var node = graph.getNodeByIndex(dataIndex);\n    var edge = graph.getEdgeByIndex(edgeDataIndex);\n\n    if (!node && !edge) {\n      return;\n    }\n\n    graph.eachNode(function (node) {\n      fadeOutItem(node, nodeOpacityPath, 0.1);\n    });\n    graph.eachEdge(function (edge) {\n      fadeOutItem(edge, lineOpacityPath, 0.1);\n    });\n\n    if (node) {\n      fadeInItem(node, nodeOpacityPath);\n      zrUtil.each(node.edges, function (adjacentEdge) {\n        if (adjacentEdge.dataIndex < 0) {\n          return;\n        }\n\n        fadeInItem(adjacentEdge, lineOpacityPath);\n        fadeInItem(adjacentEdge.node1, nodeOpacityPath);\n        fadeInItem(adjacentEdge.node2, nodeOpacityPath);\n      });\n    }\n\n    if (edge) {\n      fadeInItem(edge, lineOpacityPath);\n      fadeInItem(edge.node1, nodeOpacityPath);\n      fadeInItem(edge.node2, nodeOpacityPath);\n    }\n  },\n  unfocusNodeAdjacency: function (seriesModel, ecModel, api, payload) {\n    var graph = this._model.getData().graph;\n\n    graph.eachNode(function (node) {\n      fadeOutItem(node, nodeOpacityPath);\n    });\n    graph.eachEdge(function (edge) {\n      fadeOutItem(edge, lineOpacityPath);\n    });\n  },\n  _startForceLayoutIteration: function (forceLayout, layoutAnimation) {\n    var self = this;\n\n    (function step() {\n      forceLayout.step(function (stopped) {\n        self.updateLayout(self._model);\n        (self._layouting = !stopped) && (layoutAnimation ? self._layoutTimeout = setTimeout(step, 16) : step());\n      });\n    })();\n  },\n  _updateController: function (seriesModel, ecModel, api) {\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n\n    if (seriesModel.coordinateSystem.type !== 'view') {\n      controller.disable();\n      return;\n    }\n\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (dx, dy) {\n      roamHelper.updateViewOnPan(controllerHost, dx, dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        dx: dx,\n        dy: dy\n      });\n    }).on('zoom', function (zoom, mouseX, mouseY) {\n      roamHelper.updateViewOnZoom(controllerHost, zoom, mouseX, mouseY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        zoom: zoom,\n        originX: mouseX,\n        originY: mouseY\n      });\n\n      this._updateNodeAndLinkScale();\n\n      adjustEdge(seriesModel.getGraph(), this._getNodeGlobalScale(seriesModel));\n\n      this._lineDraw.updateLayout();\n    }, this);\n  },\n  _updateNodeAndLinkScale: function () {\n    var seriesModel = this._model;\n    var data = seriesModel.getData();\n\n    var nodeScale = this._getNodeGlobalScale(seriesModel);\n\n    var invScale = [nodeScale, nodeScale];\n    data.eachItemGraphicEl(function (el, idx) {\n      el.attr('scale', invScale);\n    });\n  },\n  _getNodeGlobalScale: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys.type !== 'view') {\n      return 1;\n    }\n\n    var nodeScaleRatio = this._nodeScaleRatio;\n    var groupScale = coordSys.scale;\n    var groupZoom = groupScale && groupScale[0] || 1; // Scale node when zoom changes\n\n    var roamZoom = coordSys.getZoom();\n    var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n    return nodeScale / groupZoom;\n  },\n  updateLayout: function (seriesModel) {\n    adjustEdge(seriesModel.getGraph(), this._getNodeGlobalScale(seriesModel));\n\n    this._symbolDraw.updateLayout();\n\n    this._lineDraw.updateLayout();\n  },\n  remove: function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove();\n    this._lineDraw && this._lineDraw.remove();\n  }\n});\n\nmodule.exports = _default;","var curveTool = require(\"zrender/lib/core/curve\");\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\nvar v1 = [];\nvar v2 = [];\nvar v3 = [];\nvar quadraticAt = curveTool.quadraticAt;\nvar v2DistSquare = vec2.distSquare;\nvar mathAbs = Math.abs;\n\nfunction intersectCurveCircle(curvePoints, center, radius) {\n  var p0 = curvePoints[0];\n  var p1 = curvePoints[1];\n  var p2 = curvePoints[2];\n  var d = Infinity;\n  var t;\n  var radiusSquare = radius * radius;\n  var interval = 0.1;\n\n  for (var _t = 0.1; _t <= 0.9; _t += 0.1) {\n    v1[0] = quadraticAt(p0[0], p1[0], p2[0], _t);\n    v1[1] = quadraticAt(p0[1], p1[1], p2[1], _t);\n    var diff = mathAbs(v2DistSquare(v1, center) - radiusSquare);\n\n    if (diff < d) {\n      d = diff;\n      t = _t;\n    }\n  } // Assume the segment is monotoneFind root through Bisection method\n  // At most 32 iteration\n\n\n  for (var i = 0; i < 32; i++) {\n    // var prev = t - interval;\n    var next = t + interval; // v1[0] = quadraticAt(p0[0], p1[0], p2[0], prev);\n    // v1[1] = quadraticAt(p0[1], p1[1], p2[1], prev);\n\n    v2[0] = quadraticAt(p0[0], p1[0], p2[0], t);\n    v2[1] = quadraticAt(p0[1], p1[1], p2[1], t);\n    v3[0] = quadraticAt(p0[0], p1[0], p2[0], next);\n    v3[1] = quadraticAt(p0[1], p1[1], p2[1], next);\n    var diff = v2DistSquare(v2, center) - radiusSquare;\n\n    if (mathAbs(diff) < 1e-2) {\n      break;\n    } // var prevDiff = v2DistSquare(v1, center) - radiusSquare;\n\n\n    var nextDiff = v2DistSquare(v3, center) - radiusSquare;\n    interval /= 2;\n\n    if (diff < 0) {\n      if (nextDiff >= 0) {\n        t = t + interval;\n      } else {\n        t = t - interval;\n      }\n    } else {\n      if (nextDiff >= 0) {\n        t = t - interval;\n      } else {\n        t = t + interval;\n      }\n    }\n  }\n\n  return t;\n} // Adjust edge to avoid\n\n\nfunction _default(graph, scale) {\n  var tmp0 = [];\n  var quadraticSubdivide = curveTool.quadraticSubdivide;\n  var pts = [[], [], []];\n  var pts2 = [[], []];\n  var v = [];\n  scale /= 2;\n\n  function getSymbolSize(node) {\n    var symbolSize = node.getVisual('symbolSize');\n\n    if (symbolSize instanceof Array) {\n      symbolSize = (symbolSize[0] + symbolSize[1]) / 2;\n    }\n\n    return symbolSize;\n  }\n\n  graph.eachEdge(function (edge, idx) {\n    var linePoints = edge.getLayout();\n    var fromSymbol = edge.getVisual('fromSymbol');\n    var toSymbol = edge.getVisual('toSymbol');\n\n    if (!linePoints.__original) {\n      linePoints.__original = [vec2.clone(linePoints[0]), vec2.clone(linePoints[1])];\n\n      if (linePoints[2]) {\n        linePoints.__original.push(vec2.clone(linePoints[2]));\n      }\n    }\n\n    var originalPoints = linePoints.__original; // Quadratic curve\n\n    if (linePoints[2] != null) {\n      vec2.copy(pts[0], originalPoints[0]);\n      vec2.copy(pts[1], originalPoints[2]);\n      vec2.copy(pts[2], originalPoints[1]);\n\n      if (fromSymbol && fromSymbol != 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        var t = intersectCurveCircle(pts, originalPoints[0], symbolSize * scale); // Subdivide and get the second\n\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[0][0] = tmp0[3];\n        pts[1][0] = tmp0[4];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[0][1] = tmp0[3];\n        pts[1][1] = tmp0[4];\n      }\n\n      if (toSymbol && toSymbol != 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        var t = intersectCurveCircle(pts, originalPoints[1], symbolSize * scale); // Subdivide and get the first\n\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[1][0] = tmp0[1];\n        pts[2][0] = tmp0[2];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[1][1] = tmp0[1];\n        pts[2][1] = tmp0[2];\n      } // Copy back to layout\n\n\n      vec2.copy(linePoints[0], pts[0]);\n      vec2.copy(linePoints[1], pts[2]);\n      vec2.copy(linePoints[2], pts[1]);\n    } // Line\n    else {\n        vec2.copy(pts2[0], originalPoints[0]);\n        vec2.copy(pts2[1], originalPoints[1]);\n        vec2.sub(v, pts2[1], pts2[0]);\n        vec2.normalize(v, v);\n\n        if (fromSymbol && fromSymbol != 'none') {\n          var symbolSize = getSymbolSize(edge.node1);\n          vec2.scaleAndAdd(pts2[0], pts2[0], v, symbolSize * scale);\n        }\n\n        if (toSymbol && toSymbol != 'none') {\n          var symbolSize = getSymbolSize(edge.node2);\n          vec2.scaleAndAdd(pts2[1], pts2[1], v, -symbolSize * scale);\n        }\n\n        vec2.copy(linePoints[0], pts2[0]);\n        vec2.copy(linePoints[1], pts2[1]);\n      }\n  });\n}\n\nmodule.exports = _default;","function _default(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (!legendModels || !legendModels.length) {\n    return;\n  }\n\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var categoriesData = graphSeries.getCategoriesData();\n    var graph = graphSeries.getGraph();\n    var data = graph.data;\n    var categoryNames = categoriesData.mapArray(categoriesData.getName);\n    data.filterSelf(function (idx) {\n      var model = data.getItemModel(idx);\n      var category = model.getShallow('category');\n\n      if (category != null) {\n        if (typeof category === 'number') {\n          category = categoryNames[category];\n        } // If in any legend component the status is not selected.\n\n\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(category)) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    });\n  }, this);\n}\n\nmodule.exports = _default;","function _default(ecModel) {\n  var paletteScope = {};\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var categoriesData = seriesModel.getCategoriesData();\n    var data = seriesModel.getData();\n    var categoryNameIdxMap = {};\n    categoriesData.each(function (idx) {\n      var name = categoriesData.getName(idx); // Add prefix to avoid conflict with Object.prototype.\n\n      categoryNameIdxMap['ec-' + name] = idx;\n      var itemModel = categoriesData.getItemModel(idx);\n      var color = itemModel.get('itemStyle.normal.color') || seriesModel.getColorFromPalette(name, paletteScope);\n      categoriesData.setItemVisual(idx, 'color', color);\n    }); // Assign category color to visual\n\n    if (categoriesData.count()) {\n      data.each(function (idx) {\n        var model = data.getItemModel(idx);\n        var category = model.getShallow('category');\n\n        if (category != null) {\n          if (typeof category === 'string') {\n            category = categoryNameIdxMap['ec-' + category];\n          }\n\n          if (!data.getItemVisual(idx, 'color', true)) {\n            data.setItemVisual(idx, 'color', categoriesData.getItemVisual(category, 'color'));\n          }\n        }\n      });\n    }\n  });\n}\n\nmodule.exports = _default;","var _circularLayoutHelper = require(\"./circularLayoutHelper\");\n\nvar circularLayout = _circularLayoutHelper.circularLayout;\n\nfunction _default(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    if (seriesModel.get('layout') === 'circular') {\n      circularLayout(seriesModel);\n    }\n  });\n}\n\nmodule.exports = _default;","var vec2 = require(\"zrender/lib/core/vector\");\n\nfunction circularLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var rect = coordSys.getBoundingRect();\n  var nodeData = seriesModel.getData();\n  var graph = nodeData.graph;\n  var angle = 0;\n  var sum = nodeData.getSum('value');\n  var unitAngle = Math.PI * 2 / (sum || nodeData.count());\n  var cx = rect.width / 2 + rect.x;\n  var cy = rect.height / 2 + rect.y;\n  var r = Math.min(rect.width, rect.height) / 2;\n  graph.eachNode(function (node) {\n    var value = node.getValue('value');\n    angle += unitAngle * (sum ? value : 1) / 2;\n    node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n    angle += unitAngle * (sum ? value : 1) / 2;\n  });\n  nodeData.setLayout({\n    cx: cx,\n    cy: cy\n  });\n  graph.eachEdge(function (edge) {\n    var curveness = edge.getModel().get('lineStyle.normal.curveness') || 0;\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var cp1;\n    var x12 = (p1[0] + p2[0]) / 2;\n    var y12 = (p1[1] + p2[1]) / 2;\n\n    if (+curveness) {\n      curveness *= 3;\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\n    }\n\n    edge.setLayout([p1, p2, cp1]);\n  });\n}\n\nexports.circularLayout = circularLayout;","var View = require(\"../../coord/View\");\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\nvar bbox = require(\"zrender/lib/core/bbox\");\n\n// FIXME Where to create the simple view coordinate system\nfunction getViewRect(seriesModel, api, aspect) {\n  var option = seriesModel.getBoxLayoutParams();\n  option.aspect = aspect;\n  return getLayoutRect(option, {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction _default(ecModel, api) {\n  var viewList = [];\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var coordSysType = seriesModel.get('coordinateSystem');\n\n    if (!coordSysType || coordSysType === 'view') {\n      var data = seriesModel.getData();\n      var positions = data.mapArray(function (idx) {\n        var itemModel = data.getItemModel(idx);\n        return [+itemModel.get('x'), +itemModel.get('y')];\n      });\n      var min = [];\n      var max = [];\n      bbox.fromPoints(positions, min, max); // If width or height is 0\n\n      if (max[0] - min[0] === 0) {\n        max[0] += 1;\n        min[0] -= 1;\n      }\n\n      if (max[1] - min[1] === 0) {\n        max[1] += 1;\n        min[1] -= 1;\n      }\n\n      var aspect = (max[0] - min[0]) / (max[1] - min[1]); // FIXME If get view rect after data processed?\n\n      var viewRect = getViewRect(seriesModel, api, aspect); // Position may be NaN, use view rect instead\n\n      if (isNaN(aspect)) {\n        min = [viewRect.x, viewRect.y];\n        max = [viewRect.x + viewRect.width, viewRect.y + viewRect.height];\n      }\n\n      var bbWidth = max[0] - min[0];\n      var bbHeight = max[1] - min[1];\n      var viewWidth = viewRect.width;\n      var viewHeight = viewRect.height;\n      var viewCoordSys = seriesModel.coordinateSystem = new View();\n      viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n      viewCoordSys.setBoundingRect(min[0], min[1], bbWidth, bbHeight);\n      viewCoordSys.setViewRect(viewRect.x, viewRect.y, viewWidth, viewHeight); // Update roam info\n\n      viewCoordSys.setCenter(seriesModel.get('center'));\n      viewCoordSys.setZoom(seriesModel.get('zoom'));\n      viewList.push(viewCoordSys);\n    }\n  });\n  return viewList;\n}\n\nmodule.exports = _default;","function normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n\n  return a;\n}\n\nfunction _default(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var edgeData = seriesModel.getEdgeData();\n    var symbolType = normalize(seriesModel.get('edgeSymbol'));\n    var symbolSize = normalize(seriesModel.get('edgeSymbolSize'));\n    var colorQuery = 'lineStyle.normal.color'.split('.');\n    var opacityQuery = 'lineStyle.normal.opacity'.split('.');\n    edgeData.setVisual('fromSymbol', symbolType && symbolType[0]);\n    edgeData.setVisual('toSymbol', symbolType && symbolType[1]);\n    edgeData.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    edgeData.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    edgeData.setVisual('color', seriesModel.get(colorQuery));\n    edgeData.setVisual('opacity', seriesModel.get(opacityQuery));\n    edgeData.each(function (idx) {\n      var itemModel = edgeData.getItemModel(idx);\n      var edge = graph.getEdgeByIndex(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true)); // Edge visual must after node visual\n\n      var color = itemModel.get(colorQuery);\n      var opacity = itemModel.get(opacityQuery);\n\n      switch (color) {\n        case 'source':\n          color = edge.node1.getVisual('color');\n          break;\n\n        case 'target':\n          color = edge.node2.getVisual('color');\n          break;\n      }\n\n      symbolType[0] && edge.setVisual('fromSymbol', symbolType[0]);\n      symbolType[1] && edge.setVisual('toSymbol', symbolType[1]);\n      symbolSize[0] && edge.setVisual('fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && edge.setVisual('toSymbolSize', symbolSize[1]);\n      edge.setVisual('color', color);\n      edge.setVisual('opacity', opacity);\n    });\n  });\n}\n\nmodule.exports = _default;","var vec2 = require(\"zrender/lib/core/vector\");\n\nvar scaleAndAdd = vec2.scaleAndAdd; // function adjacentNode(n, e) {\n//     return e.n1 === n ? e.n2 : e.n1;\n// }\n\nfunction forceLayout(nodes, edges, opts) {\n  var rect = opts.rect;\n  var width = rect.width;\n  var height = rect.height;\n  var center = [rect.x + width / 2, rect.y + height / 2]; // var scale = opts.scale || 1;\n\n  var gravity = opts.gravity == null ? 0.1 : opts.gravity; // for (var i = 0; i < edges.length; i++) {\n  //     var e = edges[i];\n  //     var n1 = e.n1;\n  //     var n2 = e.n2;\n  //     n1.edges = n1.edges || [];\n  //     n2.edges = n2.edges || [];\n  //     n1.edges.push(e);\n  //     n2.edges.push(e);\n  // }\n  // Init position\n\n  for (var i = 0; i < nodes.length; i++) {\n    var n = nodes[i];\n\n    if (!n.p) {\n      // Use the position from first adjecent node with defined position\n      // Or use a random position\n      // From d3\n      // if (n.edges) {\n      //     var j = -1;\n      //     while (++j < n.edges.length) {\n      //         var e = n.edges[j];\n      //         var other = adjacentNode(n, e);\n      //         if (other.p) {\n      //             n.p = vec2.clone(other.p);\n      //             break;\n      //         }\n      //     }\n      // }\n      // if (!n.p) {\n      n.p = vec2.create(width * (Math.random() - 0.5) + center[0], height * (Math.random() - 0.5) + center[1]); // }\n    }\n\n    n.pp = vec2.clone(n.p);\n    n.edges = null;\n  } // Formula in 'Graph Drawing by Force-directed Placement'\n  // var k = scale * Math.sqrt(width * height / nodes.length);\n  // var k2 = k * k;\n\n\n  var friction = 0.6;\n  return {\n    warmUp: function () {\n      friction = 0.5;\n    },\n    setFixed: function (idx) {\n      nodes[idx].fixed = true;\n    },\n    setUnfixed: function (idx) {\n      nodes[idx].fixed = false;\n    },\n    step: function (cb) {\n      var v12 = [];\n      var nLen = nodes.length;\n\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        var n1 = e.n1;\n        var n2 = e.n2;\n        vec2.sub(v12, n2.p, n1.p);\n        var d = vec2.len(v12) - e.d;\n        var w = n2.w / (n1.w + n2.w);\n\n        if (isNaN(w)) {\n          w = 0;\n        }\n\n        vec2.normalize(v12, v12);\n        !n1.fixed && scaleAndAdd(n1.p, n1.p, v12, w * d * friction);\n        !n2.fixed && scaleAndAdd(n2.p, n2.p, v12, -(1 - w) * d * friction);\n      } // Gravity\n\n\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n\n        if (!n.fixed) {\n          vec2.sub(v12, center, n.p); // var d = vec2.len(v12);\n          // vec2.scale(v12, v12, 1 / d);\n          // var gravityFactor = gravity;\n\n          scaleAndAdd(n.p, n.p, v12, gravity * friction);\n        }\n      } // Repulsive\n      // PENDING\n\n\n      for (var i = 0; i < nLen; i++) {\n        var n1 = nodes[i];\n\n        for (var j = i + 1; j < nLen; j++) {\n          var n2 = nodes[j];\n          vec2.sub(v12, n2.p, n1.p);\n          var d = vec2.len(v12);\n\n          if (d === 0) {\n            // Random repulse\n            vec2.set(v12, Math.random() - 0.5, Math.random() - 0.5);\n            d = 1;\n          }\n\n          var repFact = (n1.rep + n2.rep) / d / d;\n          !n1.fixed && scaleAndAdd(n1.pp, n1.pp, v12, repFact);\n          !n2.fixed && scaleAndAdd(n2.pp, n2.pp, v12, -repFact);\n        }\n      }\n\n      var v = [];\n\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n\n        if (!n.fixed) {\n          vec2.sub(v, n.p, n.pp);\n          scaleAndAdd(n.p, n.p, v, friction);\n          vec2.copy(n.pp, n.p);\n        }\n      }\n\n      friction = friction * 0.992;\n      cb && cb(nodes, edges, friction < 0.01);\n    }\n  };\n}\n\nexports.forceLayout = forceLayout;","var _forceHelper = require(\"./forceHelper\");\n\nvar forceLayout = _forceHelper.forceLayout;\n\nvar _simpleLayoutHelper = require(\"./simpleLayoutHelper\");\n\nvar simpleLayout = _simpleLayoutHelper.simpleLayout;\n\nvar _circularLayoutHelper = require(\"./circularLayoutHelper\");\n\nvar circularLayout = _circularLayoutHelper.circularLayout;\n\nvar _number = require(\"../../util/number\");\n\nvar linearMap = _number.linearMap;\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nfunction _default(ecModel) {\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var coordSys = graphSeries.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      return;\n    }\n\n    if (graphSeries.get('layout') === 'force') {\n      var preservedPoints = graphSeries.preservedPoints || {};\n      var graph = graphSeries.getGraph();\n      var nodeData = graph.data;\n      var edgeData = graph.edgeData;\n      var forceModel = graphSeries.getModel('force');\n      var initLayout = forceModel.get('initLayout');\n\n      if (graphSeries.preservedPoints) {\n        nodeData.each(function (idx) {\n          var id = nodeData.getId(idx);\n          nodeData.setItemLayout(idx, preservedPoints[id] || [NaN, NaN]);\n        });\n      } else if (!initLayout || initLayout === 'none') {\n        simpleLayout(graphSeries);\n      } else if (initLayout === 'circular') {\n        circularLayout(graphSeries);\n      }\n\n      var nodeDataExtent = nodeData.getDataExtent('value');\n      var edgeDataExtent = edgeData.getDataExtent('value'); // var edgeDataExtent = edgeData.getDataExtent('value');\n\n      var repulsion = forceModel.get('repulsion');\n      var edgeLength = forceModel.get('edgeLength');\n\n      if (!zrUtil.isArray(repulsion)) {\n        repulsion = [repulsion, repulsion];\n      }\n\n      if (!zrUtil.isArray(edgeLength)) {\n        edgeLength = [edgeLength, edgeLength];\n      } // Larger value has smaller length\n\n\n      edgeLength = [edgeLength[1], edgeLength[0]];\n      var nodes = nodeData.mapArray('value', function (value, idx) {\n        var point = nodeData.getItemLayout(idx);\n        var rep = linearMap(value, nodeDataExtent, repulsion);\n\n        if (isNaN(rep)) {\n          rep = (repulsion[0] + repulsion[1]) / 2;\n        }\n\n        return {\n          w: rep,\n          rep: rep,\n          fixed: nodeData.getItemModel(idx).get('fixed'),\n          p: !point || isNaN(point[0]) || isNaN(point[1]) ? null : point\n        };\n      });\n      var edges = edgeData.mapArray('value', function (value, idx) {\n        var edge = graph.getEdgeByIndex(idx);\n        var d = linearMap(value, edgeDataExtent, edgeLength);\n\n        if (isNaN(d)) {\n          d = (edgeLength[0] + edgeLength[1]) / 2;\n        }\n\n        return {\n          n1: nodes[edge.node1.dataIndex],\n          n2: nodes[edge.node2.dataIndex],\n          d: d,\n          curveness: edge.getModel().get('lineStyle.normal.curveness') || 0\n        };\n      });\n      var coordSys = graphSeries.coordinateSystem;\n      var rect = coordSys.getBoundingRect();\n      var forceInstance = forceLayout(nodes, edges, {\n        rect: rect,\n        gravity: forceModel.get('gravity')\n      });\n      var oldStep = forceInstance.step;\n\n      forceInstance.step = function (cb) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (nodes[i].fixed) {\n            // Write back to layout instance\n            vec2.copy(nodes[i].p, graph.getNodeByIndex(i).getLayout());\n          }\n        }\n\n        oldStep(function (nodes, edges, stopped) {\n          for (var i = 0, l = nodes.length; i < l; i++) {\n            if (!nodes[i].fixed) {\n              graph.getNodeByIndex(i).setLayout(nodes[i].p);\n            }\n\n            preservedPoints[nodeData.getId(i)] = nodes[i].p;\n          }\n\n          for (var i = 0, l = edges.length; i < l; i++) {\n            var e = edges[i];\n            var edge = graph.getEdgeByIndex(i);\n            var p1 = e.n1.p;\n            var p2 = e.n2.p;\n            var points = edge.getLayout();\n            points = points ? points.slice() : [];\n            points[0] = points[0] || [];\n            points[1] = points[1] || [];\n            vec2.copy(points[0], p1);\n            vec2.copy(points[1], p2);\n\n            if (+e.curveness) {\n              points[2] = [(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * e.curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * e.curveness];\n            }\n\n            edge.setLayout(points);\n          } // Update layout\n\n\n          cb && cb(stopped);\n        });\n      };\n\n      graphSeries.forceLayout = forceInstance;\n      graphSeries.preservedPoints = preservedPoints; // Step to get the layout\n\n      forceInstance.step();\n    } else {\n      // Remove prev injected forceLayout instance\n      graphSeries.forceLayout = null;\n    }\n  });\n}\n\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar _roamHelper = require(\"../../action/roamHelper\");\n\nvar updateCenterAndZoom = _roamHelper.updateCenterAndZoom;\nvar actionInfo = {\n  type: 'graphRoam',\n  event: 'graphRoam',\n  update: 'none'\n};\n/**\n * @payload\n * @property {string} name Series name\n * @property {number} [dx]\n * @property {number} [dy]\n * @property {number} [zoom]\n * @property {number} [originX]\n * @property {number} [originY]\n */\n\necharts.registerAction(actionInfo, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'series',\n    query: payload\n  }, function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var res = updateCenterAndZoom(coordSys, payload);\n    seriesModel.setCenter && seriesModel.setCenter(res.center);\n    seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n  });\n});\n/**\n * @payload\n * @property {number} [seriesIndex]\n * @property {string} [seriesId]\n * @property {string} [seriesName]\n * @property {number} [dataIndex]\n */\n\necharts.registerAction({\n  type: 'focusNodeAdjacency',\n  event: 'focusNodeAdjacency',\n  update: 'series.graph:focusNodeAdjacency'\n}, function () {});\n/**\n * @payload\n * @property {number} [seriesIndex]\n * @property {string} [seriesId]\n * @property {string} [seriesName]\n */\n\necharts.registerAction({\n  type: 'unfocusNodeAdjacency',\n  event: 'unfocusNodeAdjacency',\n  update: 'series.graph:unfocusNodeAdjacency'\n}, function () {});","var _simpleLayoutHelper = require(\"./simpleLayoutHelper\");\n\nvar simpleLayout = _simpleLayoutHelper.simpleLayout;\nvar simpleLayoutEdge = _simpleLayoutHelper.simpleLayoutEdge;\n\nfunction _default(ecModel, api) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var layout = seriesModel.get('layout');\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      var data = seriesModel.getData();\n      var dimensions = coordSys.dimensions;\n      data.each(dimensions, function () {\n        var hasValue;\n        var args = arguments;\n        var value = [];\n\n        for (var i = 0; i < dimensions.length; i++) {\n          if (!isNaN(args[i])) {\n            hasValue = true;\n          }\n\n          value.push(args[i]);\n        }\n\n        var idx = args[args.length - 1];\n\n        if (hasValue) {\n          data.setItemLayout(idx, coordSys.dataToPoint(value));\n        } else {\n          // Also {Array.<number>}, not undefined to avoid if...else... statement\n          data.setItemLayout(idx, [NaN, NaN]);\n        }\n      });\n      simpleLayoutEdge(data.graph);\n    } else if (!layout || layout === 'none') {\n      simpleLayout(seriesModel);\n    }\n  });\n}\n\nmodule.exports = _default;","var vec2 = require(\"zrender/lib/core/vector\");\n\nfunction simpleLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var graph = seriesModel.getGraph();\n  graph.eachNode(function (node) {\n    var model = node.getModel();\n    node.setLayout([+model.get('x'), +model.get('y')]);\n  });\n  simpleLayoutEdge(graph);\n}\n\nfunction simpleLayoutEdge(graph) {\n  graph.eachEdge(function (edge) {\n    var curveness = edge.getModel().get('lineStyle.normal.curveness') || 0;\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var points = [p1, p2];\n\n    if (+curveness) {\n      points.push([(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * curveness]);\n    }\n\n    edge.setLayout(points);\n  });\n}\n\nexports.simpleLayout = simpleLayout;\nexports.simpleLayoutEdge = simpleLayoutEdge;","require(\"./heatmap/HeatmapSeries\");\n\nrequire(\"./heatmap/HeatmapView\");","var zrUtil = require(\"zrender/lib/core/util\");\n\n/**\n * @file defines echarts Heatmap Chart\n * @author Ovilia (me@zhangwenli.com)\n * Inspired by https://github.com/mourner/simpleheat\n *\n * @module\n */\nvar GRADIENT_LEVELS = 256;\n/**\n * Heatmap Chart\n *\n * @class\n */\n\nfunction Heatmap() {\n  var canvas = zrUtil.createCanvas();\n  this.canvas = canvas;\n  this.blurSize = 30;\n  this.pointSize = 20;\n  this.maxOpacity = 1;\n  this.minOpacity = 0;\n  this._gradientPixels = {};\n}\n\nHeatmap.prototype = {\n  /**\n   * Renders Heatmap and returns the rendered canvas\n   * @param {Array} data array of data, each has x, y, value\n   * @param {number} width canvas width\n   * @param {number} height canvas height\n   */\n  update: function (data, width, height, normalize, colorFunc, isInRange) {\n    var brush = this._getBrush();\n\n    var gradientInRange = this._getGradient(data, colorFunc, 'inRange');\n\n    var gradientOutOfRange = this._getGradient(data, colorFunc, 'outOfRange');\n\n    var r = this.pointSize + this.blurSize;\n    var canvas = this.canvas;\n    var ctx = canvas.getContext('2d');\n    var len = data.length;\n    canvas.width = width;\n    canvas.height = height;\n\n    for (var i = 0; i < len; ++i) {\n      var p = data[i];\n      var x = p[0];\n      var y = p[1];\n      var value = p[2]; // calculate alpha using value\n\n      var alpha = normalize(value); // draw with the circle brush with alpha\n\n      ctx.globalAlpha = alpha;\n      ctx.drawImage(brush, x - r, y - r);\n    }\n\n    if (!canvas.width || !canvas.height) {\n      // Avoid \"Uncaught DOMException: Failed to execute 'getImageData' on\n      // 'CanvasRenderingContext2D': The source height is 0.\"\n      return canvas;\n    } // colorize the canvas using alpha value and set with gradient\n\n\n    var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    var pixels = imageData.data;\n    var offset = 0;\n    var pixelLen = pixels.length;\n    var minOpacity = this.minOpacity;\n    var maxOpacity = this.maxOpacity;\n    var diffOpacity = maxOpacity - minOpacity;\n\n    while (offset < pixelLen) {\n      var alpha = pixels[offset + 3] / 256;\n      var gradientOffset = Math.floor(alpha * (GRADIENT_LEVELS - 1)) * 4; // Simple optimize to ignore the empty data\n\n      if (alpha > 0) {\n        var gradient = isInRange(alpha) ? gradientInRange : gradientOutOfRange; // Any alpha > 0 will be mapped to [minOpacity, maxOpacity]\n\n        alpha > 0 && (alpha = alpha * diffOpacity + minOpacity);\n        pixels[offset++] = gradient[gradientOffset];\n        pixels[offset++] = gradient[gradientOffset + 1];\n        pixels[offset++] = gradient[gradientOffset + 2];\n        pixels[offset++] = gradient[gradientOffset + 3] * alpha * 256;\n      } else {\n        offset += 4;\n      }\n    }\n\n    ctx.putImageData(imageData, 0, 0);\n    return canvas;\n  },\n\n  /**\n   * get canvas of a black circle brush used for canvas to draw later\n   * @private\n   * @returns {Object} circle brush canvas\n   */\n  _getBrush: function () {\n    var brushCanvas = this._brushCanvas || (this._brushCanvas = zrUtil.createCanvas()); // set brush size\n\n    var r = this.pointSize + this.blurSize;\n    var d = r * 2;\n    brushCanvas.width = d;\n    brushCanvas.height = d;\n    var ctx = brushCanvas.getContext('2d');\n    ctx.clearRect(0, 0, d, d); // in order to render shadow without the distinct circle,\n    // draw the distinct circle in an invisible place,\n    // and use shadowOffset to draw shadow in the center of the canvas\n\n    ctx.shadowOffsetX = d;\n    ctx.shadowBlur = this.blurSize; // draw the shadow in black, and use alpha and shadow blur to generate\n    // color in color map\n\n    ctx.shadowColor = '#000'; // draw circle in the left to the canvas\n\n    ctx.beginPath();\n    ctx.arc(-r, r, this.pointSize, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n    return brushCanvas;\n  },\n\n  /**\n   * get gradient color map\n   * @private\n   */\n  _getGradient: function (data, colorFunc, state) {\n    var gradientPixels = this._gradientPixels;\n    var pixelsSingleState = gradientPixels[state] || (gradientPixels[state] = new Uint8ClampedArray(256 * 4));\n    var color = [0, 0, 0, 0];\n    var off = 0;\n\n    for (var i = 0; i < 256; i++) {\n      colorFunc[state](i / 255, true, color);\n      pixelsSingleState[off++] = color[0];\n      pixelsSingleState[off++] = color[1];\n      pixelsSingleState[off++] = color[2];\n      pixelsSingleState[off++] = color[3];\n    }\n\n    return pixelsSingleState;\n  }\n};\nvar _default = Heatmap;\nmodule.exports = _default;","var SeriesModel = require(\"../../model/Series\");\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\nvar _default = SeriesModel.extend({\n  type: 'series.heatmap',\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(option.data, this, ecModel);\n  },\n  defaultOption: {\n    // Cartesian2D or geo\n    coordinateSystem: 'cartesian2d',\n    zlevel: 0,\n    z: 2,\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Geo coordinate system\n    geoIndex: 0,\n    blurSize: 30,\n    pointSize: 20,\n    maxOpacity: 1,\n    minOpacity: 0\n  }\n});\n\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar HeatmapLayer = require(\"./HeatmapLayer\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nfunction getIsInPiecewiseRange(dataExtent, pieceList, selected) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  pieceList = zrUtil.map(pieceList, function (piece) {\n    return {\n      interval: [(piece.interval[0] - dataExtent[0]) / dataSpan, (piece.interval[1] - dataExtent[0]) / dataSpan]\n    };\n  });\n  var len = pieceList.length;\n  var lastIndex = 0;\n  return function (val) {\n    // Try to find in the location of the last found\n    for (var i = lastIndex; i < len; i++) {\n      var interval = pieceList[i].interval;\n\n      if (interval[0] <= val && val <= interval[1]) {\n        lastIndex = i;\n        break;\n      }\n    }\n\n    if (i === len) {\n      // Not found, back interation\n      for (var i = lastIndex - 1; i >= 0; i--) {\n        var interval = pieceList[i].interval;\n\n        if (interval[0] <= val && val <= interval[1]) {\n          lastIndex = i;\n          break;\n        }\n      }\n    }\n\n    return i >= 0 && i < len && selected[i];\n  };\n}\n\nfunction getIsInContinuousRange(dataExtent, range) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  range = [(range[0] - dataExtent[0]) / dataSpan, (range[1] - dataExtent[0]) / dataSpan];\n  return function (val) {\n    return val >= range[0] && val <= range[1];\n  };\n}\n\nfunction isGeoCoordSys(coordSys) {\n  var dimensions = coordSys.dimensions; // Not use coorSys.type === 'geo' because coordSys maybe extended\n\n  return dimensions[0] === 'lng' && dimensions[1] === 'lat';\n}\n\nvar _default = echarts.extendChartView({\n  type: 'heatmap',\n  render: function (seriesModel, ecModel, api) {\n    var visualMapOfThisSeries;\n    ecModel.eachComponent('visualMap', function (visualMap) {\n      visualMap.eachTargetSeries(function (targetSeries) {\n        if (targetSeries === seriesModel) {\n          visualMapOfThisSeries = visualMap;\n        }\n      });\n    });\n    this.group.removeAll();\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys.type === 'cartesian2d' || coordSys.type === 'calendar') {\n      this._renderOnCartesianAndCalendar(coordSys, seriesModel, api);\n    } else if (isGeoCoordSys(coordSys)) {\n      this._renderOnGeo(coordSys, seriesModel, visualMapOfThisSeries, api);\n    }\n  },\n  dispose: function () {},\n  _renderOnCartesianAndCalendar: function (coordSys, seriesModel, api) {\n    if (coordSys.type === 'cartesian2d') {\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var width = xAxis.getBandWidth();\n      var height = yAxis.getBandWidth();\n    }\n\n    var group = this.group;\n    var data = seriesModel.getData();\n    var itemStyleQuery = 'itemStyle.normal';\n    var hoverItemStyleQuery = 'itemStyle.emphasis';\n    var labelQuery = 'label.normal';\n    var hoverLabelQuery = 'label.emphasis';\n    var style = seriesModel.getModel(itemStyleQuery).getItemStyle(['color']);\n    var hoverStl = seriesModel.getModel(hoverItemStyleQuery).getItemStyle();\n    var labelModel = seriesModel.getModel('label.normal');\n    var hoverLabelModel = seriesModel.getModel('label.emphasis');\n    var coordSysType = coordSys.type;\n    var dataDims = coordSysType === 'cartesian2d' ? [seriesModel.coordDimToDataDim('x')[0], seriesModel.coordDimToDataDim('y')[0], seriesModel.coordDimToDataDim('value')[0]] : [seriesModel.coordDimToDataDim('time')[0], seriesModel.coordDimToDataDim('value')[0]];\n    data.each(function (idx) {\n      var rect;\n\n      if (coordSysType === 'cartesian2d') {\n        // Ignore empty data\n        if (isNaN(data.get(dataDims[2], idx))) {\n          return;\n        }\n\n        var point = coordSys.dataToPoint([data.get(dataDims[0], idx), data.get(dataDims[1], idx)]);\n        rect = new graphic.Rect({\n          shape: {\n            x: point[0] - width / 2,\n            y: point[1] - height / 2,\n            width: width,\n            height: height\n          },\n          style: {\n            fill: data.getItemVisual(idx, 'color'),\n            opacity: data.getItemVisual(idx, 'opacity')\n          }\n        });\n      } else {\n        // Ignore empty data\n        if (isNaN(data.get(dataDims[1], idx))) {\n          return;\n        }\n\n        rect = new graphic.Rect({\n          z2: 1,\n          shape: coordSys.dataToRect([data.get(dataDims[0], idx)]).contentShape,\n          style: {\n            fill: data.getItemVisual(idx, 'color'),\n            opacity: data.getItemVisual(idx, 'opacity')\n          }\n        });\n      }\n\n      var itemModel = data.getItemModel(idx); // Optimization for large datset\n\n      if (data.hasItemOption) {\n        style = itemModel.getModel(itemStyleQuery).getItemStyle(['color']);\n        hoverStl = itemModel.getModel(hoverItemStyleQuery).getItemStyle();\n        labelModel = itemModel.getModel(labelQuery);\n        hoverLabelModel = itemModel.getModel(hoverLabelQuery);\n      }\n\n      var rawValue = seriesModel.getRawValue(idx);\n      var defaultText = '-';\n\n      if (rawValue && rawValue[2] != null) {\n        defaultText = rawValue[2];\n      }\n\n      graphic.setLabelStyle(style, hoverStl, labelModel, hoverLabelModel, {\n        labelFetcher: seriesModel,\n        labelDataIndex: idx,\n        defaultText: defaultText,\n        isRectText: true\n      });\n      rect.setStyle(style);\n      graphic.setHoverStyle(rect, data.hasItemOption ? hoverStl : zrUtil.extend({}, hoverStl));\n      group.add(rect);\n      data.setItemGraphicEl(idx, rect);\n    });\n  },\n  _renderOnGeo: function (geo, seriesModel, visualMapModel, api) {\n    var inRangeVisuals = visualMapModel.targetVisuals.inRange;\n    var outOfRangeVisuals = visualMapModel.targetVisuals.outOfRange; // if (!visualMapping) {\n    //     throw new Error('Data range must have color visuals');\n    // }\n\n    var data = seriesModel.getData();\n    var hmLayer = this._hmLayer || this._hmLayer || new HeatmapLayer();\n    hmLayer.blurSize = seriesModel.get('blurSize');\n    hmLayer.pointSize = seriesModel.get('pointSize');\n    hmLayer.minOpacity = seriesModel.get('minOpacity');\n    hmLayer.maxOpacity = seriesModel.get('maxOpacity');\n    var rect = geo.getViewRect().clone();\n    var roamTransform = geo.getRoamTransform().transform;\n    rect.applyTransform(roamTransform); // Clamp on viewport\n\n    var x = Math.max(rect.x, 0);\n    var y = Math.max(rect.y, 0);\n    var x2 = Math.min(rect.width + rect.x, api.getWidth());\n    var y2 = Math.min(rect.height + rect.y, api.getHeight());\n    var width = x2 - x;\n    var height = y2 - y;\n    var points = data.mapArray(['lng', 'lat', 'value'], function (lng, lat, value) {\n      var pt = geo.dataToPoint([lng, lat]);\n      pt[0] -= x;\n      pt[1] -= y;\n      pt.push(value);\n      return pt;\n    });\n    var dataExtent = visualMapModel.getExtent();\n    var isInRange = visualMapModel.type === 'visualMap.continuous' ? getIsInContinuousRange(dataExtent, visualMapModel.option.range) : getIsInPiecewiseRange(dataExtent, visualMapModel.getPieceList(), visualMapModel.option.selected);\n    hmLayer.update(points, width, height, inRangeVisuals.color.getNormalizer(), {\n      inRange: inRangeVisuals.color.getColorMapper(),\n      outOfRange: outOfRangeVisuals.color.getColorMapper()\n    }, isInRange);\n    var img = new graphic.Image({\n      style: {\n        width: width,\n        height: height,\n        x: x,\n        y: y,\n        image: hmLayer.canvas\n      },\n      silent: true\n    });\n    this.group.add(img);\n  }\n});\n\nmodule.exports = _default;","var graphic = require(\"../../util/graphic\");\n\nvar Line = require(\"./Line\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\nvar curveUtil = require(\"zrender/lib/core/curve\");\n\n/**\n * Provide effect for line\n * @module echarts/chart/helper/EffectLine\n */\n\n/**\n * @constructor\n * @extends {module:zrender/graphic/Group}\n * @alias {module:echarts/chart/helper/Line}\n */\nfunction EffectLine(lineData, idx, seriesScope) {\n  graphic.Group.call(this);\n  this.add(this.createLine(lineData, idx, seriesScope));\n\n  this._updateEffectSymbol(lineData, idx);\n}\n\nvar effectLineProto = EffectLine.prototype;\n\neffectLineProto.createLine = function (lineData, idx, seriesScope) {\n  return new Line(lineData, idx, seriesScope);\n};\n\neffectLineProto._updateEffectSymbol = function (lineData, idx) {\n  var itemModel = lineData.getItemModel(idx);\n  var effectModel = itemModel.getModel('effect');\n  var size = effectModel.get('symbolSize');\n  var symbolType = effectModel.get('symbol');\n\n  if (!zrUtil.isArray(size)) {\n    size = [size, size];\n  }\n\n  var color = effectModel.get('color') || lineData.getItemVisual(idx, 'color');\n  var symbol = this.childAt(1);\n\n  if (this._symbolType !== symbolType) {\n    // Remove previous\n    this.remove(symbol);\n    symbol = createSymbol(symbolType, -0.5, -0.5, 1, 1, color);\n    symbol.z2 = 100;\n    symbol.culling = true;\n    this.add(symbol);\n  } // Symbol may be removed if loop is false\n\n\n  if (!symbol) {\n    return;\n  } // Shadow color is same with color in default\n\n\n  symbol.setStyle('shadowColor', color);\n  symbol.setStyle(effectModel.getItemStyle(['color']));\n  symbol.attr('scale', size);\n  symbol.setColor(color);\n  symbol.attr('scale', size);\n  this._symbolType = symbolType;\n\n  this._updateEffectAnimation(lineData, effectModel, idx);\n};\n\neffectLineProto._updateEffectAnimation = function (lineData, effectModel, idx) {\n  var symbol = this.childAt(1);\n\n  if (!symbol) {\n    return;\n  }\n\n  var self = this;\n  var points = lineData.getItemLayout(idx);\n  var period = effectModel.get('period') * 1000;\n  var loop = effectModel.get('loop');\n  var constantSpeed = effectModel.get('constantSpeed');\n  var delayExpr = zrUtil.retrieve(effectModel.get('delay'), function (idx) {\n    return idx / lineData.count() * period / 3;\n  });\n  var isDelayFunc = typeof delayExpr === 'function'; // Ignore when updating\n\n  symbol.ignore = true;\n  this.updateAnimationPoints(symbol, points);\n\n  if (constantSpeed > 0) {\n    period = this.getLineLength(symbol) / constantSpeed * 1000;\n  }\n\n  if (period !== this._period || loop !== this._loop) {\n    symbol.stopAnimation();\n    var delay = delayExpr;\n\n    if (isDelayFunc) {\n      delay = delayExpr(idx);\n    }\n\n    if (symbol.__t > 0) {\n      delay = -period * symbol.__t;\n    }\n\n    symbol.__t = 0;\n    var animator = symbol.animate('', loop).when(period, {\n      __t: 1\n    }).delay(delay).during(function () {\n      self.updateSymbolPosition(symbol);\n    });\n\n    if (!loop) {\n      animator.done(function () {\n        self.remove(symbol);\n      });\n    }\n\n    animator.start();\n  }\n\n  this._period = period;\n  this._loop = loop;\n};\n\neffectLineProto.getLineLength = function (symbol) {\n  // Not so accurate\n  return vec2.dist(symbol.__p1, symbol.__cp1) + vec2.dist(symbol.__cp1, symbol.__p2);\n};\n\neffectLineProto.updateAnimationPoints = function (symbol, points) {\n  symbol.__p1 = points[0];\n  symbol.__p2 = points[1];\n  symbol.__cp1 = points[2] || [(points[0][0] + points[1][0]) / 2, (points[0][1] + points[1][1]) / 2];\n};\n\neffectLineProto.updateData = function (lineData, idx, seriesScope) {\n  this.childAt(0).updateData(lineData, idx, seriesScope);\n\n  this._updateEffectSymbol(lineData, idx);\n};\n\neffectLineProto.updateSymbolPosition = function (symbol) {\n  var p1 = symbol.__p1;\n  var p2 = symbol.__p2;\n  var cp1 = symbol.__cp1;\n  var t = symbol.__t;\n  var pos = symbol.position;\n  var quadraticAt = curveUtil.quadraticAt;\n  var quadraticDerivativeAt = curveUtil.quadraticDerivativeAt;\n  pos[0] = quadraticAt(p1[0], cp1[0], p2[0], t);\n  pos[1] = quadraticAt(p1[1], cp1[1], p2[1], t); // Tangent\n\n  var tx = quadraticDerivativeAt(p1[0], cp1[0], p2[0], t);\n  var ty = quadraticDerivativeAt(p1[1], cp1[1], p2[1], t);\n  symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2;\n  symbol.ignore = false;\n};\n\neffectLineProto.updateLayout = function (lineData, idx) {\n  this.childAt(0).updateLayout(lineData, idx);\n  var effectModel = lineData.getItemModel(idx).getModel('effect');\n\n  this._updateEffectAnimation(lineData, effectModel, idx);\n};\n\nzrUtil.inherits(EffectLine, graphic.Group);\nvar _default = EffectLine;\nmodule.exports = _default;","var Polyline = require(\"./Polyline\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar EffectLine = require(\"./EffectLine\");\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\n/**\n * Provide effect for line\n * @module echarts/chart/helper/EffectLine\n */\n\n/**\n * @constructor\n * @extends {module:echarts/chart/helper/EffectLine}\n * @alias {module:echarts/chart/helper/Polyline}\n */\nfunction EffectPolyline(lineData, idx, seriesScope) {\n  EffectLine.call(this, lineData, idx, seriesScope);\n  this._lastFrame = 0;\n  this._lastFramePercent = 0;\n}\n\nvar effectPolylineProto = EffectPolyline.prototype; // Overwrite\n\neffectPolylineProto.createLine = function (lineData, idx, seriesScope) {\n  return new Polyline(lineData, idx, seriesScope);\n}; // Overwrite\n\n\neffectPolylineProto.updateAnimationPoints = function (symbol, points) {\n  this._points = points;\n  var accLenArr = [0];\n  var len = 0;\n\n  for (var i = 1; i < points.length; i++) {\n    var p1 = points[i - 1];\n    var p2 = points[i];\n    len += vec2.dist(p1, p2);\n    accLenArr.push(len);\n  }\n\n  if (len === 0) {\n    return;\n  }\n\n  for (var i = 0; i < accLenArr.length; i++) {\n    accLenArr[i] /= len;\n  }\n\n  this._offsets = accLenArr;\n  this._length = len;\n}; // Overwrite\n\n\neffectPolylineProto.getLineLength = function (symbol) {\n  return this._length;\n}; // Overwrite\n\n\neffectPolylineProto.updateSymbolPosition = function (symbol) {\n  var t = symbol.__t;\n  var points = this._points;\n  var offsets = this._offsets;\n  var len = points.length;\n\n  if (!offsets) {\n    // Has length 0\n    return;\n  }\n\n  var lastFrame = this._lastFrame;\n  var frame;\n\n  if (t < this._lastFramePercent) {\n    // Start from the next frame\n    // PENDING start from lastFrame ?\n    var start = Math.min(lastFrame + 1, len - 1);\n\n    for (frame = start; frame >= 0; frame--) {\n      if (offsets[frame] <= t) {\n        break;\n      }\n    } // PENDING really need to do this ?\n\n\n    frame = Math.min(frame, len - 2);\n  } else {\n    for (var frame = lastFrame; frame < len; frame++) {\n      if (offsets[frame] > t) {\n        break;\n      }\n    }\n\n    frame = Math.min(frame - 1, len - 2);\n  }\n\n  vec2.lerp(symbol.position, points[frame], points[frame + 1], (t - offsets[frame]) / (offsets[frame + 1] - offsets[frame]));\n  var tx = points[frame + 1][0] - points[frame][0];\n  var ty = points[frame + 1][1] - points[frame][1];\n  symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2;\n  this._lastFrame = frame;\n  this._lastFramePercent = t;\n  symbol.ignore = false;\n};\n\nzrUtil.inherits(EffectPolyline, EffectLine);\nvar _default = EffectPolyline;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar _graphic = require(\"../../util/graphic\");\n\nvar Group = _graphic.Group;\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar SymbolClz = require(\"./Symbol\");\n\n/**\n * Symbol with ripple effect\n * @module echarts/chart/helper/EffectSymbol\n */\nvar EFFECT_RIPPLE_NUMBER = 3;\n\nfunction normalizeSymbolSize(symbolSize) {\n  if (!zrUtil.isArray(symbolSize)) {\n    symbolSize = [+symbolSize, +symbolSize];\n  }\n\n  return symbolSize;\n}\n\nfunction updateRipplePath(rippleGroup, effectCfg) {\n  rippleGroup.eachChild(function (ripplePath) {\n    ripplePath.attr({\n      z: effectCfg.z,\n      zlevel: effectCfg.zlevel,\n      style: {\n        stroke: effectCfg.brushType === 'stroke' ? effectCfg.color : null,\n        fill: effectCfg.brushType === 'fill' ? effectCfg.color : null\n      }\n    });\n  });\n}\n/**\n * @constructor\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @extends {module:zrender/graphic/Group}\n */\n\n\nfunction EffectSymbol(data, idx) {\n  Group.call(this);\n  var symbol = new SymbolClz(data, idx);\n  var rippleGroup = new Group();\n  this.add(symbol);\n  this.add(rippleGroup);\n\n  rippleGroup.beforeUpdate = function () {\n    this.attr(symbol.getScale());\n  };\n\n  this.updateData(data, idx);\n}\n\nvar effectSymbolProto = EffectSymbol.prototype;\n\neffectSymbolProto.stopEffectAnimation = function () {\n  this.childAt(1).removeAll();\n};\n\neffectSymbolProto.startEffectAnimation = function (effectCfg) {\n  var symbolType = effectCfg.symbolType;\n  var color = effectCfg.color;\n  var rippleGroup = this.childAt(1);\n\n  for (var i = 0; i < EFFECT_RIPPLE_NUMBER; i++) {\n    // var ripplePath = createSymbol(\n    //     symbolType, -0.5, -0.5, 1, 1, color\n    // );\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4136.\n    var ripplePath = createSymbol(symbolType, -1, -1, 2, 2, color);\n    ripplePath.attr({\n      style: {\n        strokeNoScale: true\n      },\n      z2: 99,\n      silent: true,\n      scale: [0.5, 0.5]\n    });\n    var delay = -i / EFFECT_RIPPLE_NUMBER * effectCfg.period + effectCfg.effectOffset; // TODO Configurable effectCfg.period\n\n    ripplePath.animate('', true).when(effectCfg.period, {\n      scale: [effectCfg.rippleScale / 2, effectCfg.rippleScale / 2]\n    }).delay(delay).start();\n    ripplePath.animateStyle(true).when(effectCfg.period, {\n      opacity: 0\n    }).delay(delay).start();\n    rippleGroup.add(ripplePath);\n  }\n\n  updateRipplePath(rippleGroup, effectCfg);\n};\n/**\n * Update effect symbol\n */\n\n\neffectSymbolProto.updateEffectAnimation = function (effectCfg) {\n  var oldEffectCfg = this._effectCfg;\n  var rippleGroup = this.childAt(1); // Must reinitialize effect if following configuration changed\n\n  var DIFFICULT_PROPS = ['symbolType', 'period', 'rippleScale'];\n\n  for (var i = 0; i < DIFFICULT_PROPS.length; i++) {\n    var propName = DIFFICULT_PROPS[i];\n\n    if (oldEffectCfg[propName] !== effectCfg[propName]) {\n      this.stopEffectAnimation();\n      this.startEffectAnimation(effectCfg);\n      return;\n    }\n  }\n\n  updateRipplePath(rippleGroup, effectCfg);\n};\n/**\n * Highlight symbol\n */\n\n\neffectSymbolProto.highlight = function () {\n  this.trigger('emphasis');\n};\n/**\n * Downplay symbol\n */\n\n\neffectSymbolProto.downplay = function () {\n  this.trigger('normal');\n};\n/**\n * Update symbol properties\n * @param  {module:echarts/data/List} data\n * @param  {number} idx\n */\n\n\neffectSymbolProto.updateData = function (data, idx) {\n  var seriesModel = data.hostModel;\n  this.childAt(0).updateData(data, idx);\n  var rippleGroup = this.childAt(1);\n  var itemModel = data.getItemModel(idx);\n  var symbolType = data.getItemVisual(idx, 'symbol');\n  var symbolSize = normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n  var color = data.getItemVisual(idx, 'color');\n  rippleGroup.attr('scale', symbolSize);\n  rippleGroup.traverse(function (ripplePath) {\n    ripplePath.attr({\n      fill: color\n    });\n  });\n  var symbolOffset = itemModel.getShallow('symbolOffset');\n\n  if (symbolOffset) {\n    var pos = rippleGroup.position;\n    pos[0] = parsePercent(symbolOffset[0], symbolSize[0]);\n    pos[1] = parsePercent(symbolOffset[1], symbolSize[1]);\n  }\n\n  rippleGroup.rotation = (itemModel.getShallow('symbolRotate') || 0) * Math.PI / 180 || 0;\n  var effectCfg = {};\n  effectCfg.showEffectOn = seriesModel.get('showEffectOn');\n  effectCfg.rippleScale = itemModel.get('rippleEffect.scale');\n  effectCfg.brushType = itemModel.get('rippleEffect.brushType');\n  effectCfg.period = itemModel.get('rippleEffect.period') * 1000;\n  effectCfg.effectOffset = idx / data.count();\n  effectCfg.z = itemModel.getShallow('z') || 0;\n  effectCfg.zlevel = itemModel.getShallow('zlevel') || 0;\n  effectCfg.symbolType = symbolType;\n  effectCfg.color = color;\n  this.off('mouseover').off('mouseout').off('emphasis').off('normal');\n\n  if (effectCfg.showEffectOn === 'render') {\n    this._effectCfg ? this.updateEffectAnimation(effectCfg) : this.startEffectAnimation(effectCfg);\n    this._effectCfg = effectCfg;\n  } else {\n    // Not keep old effect config\n    this._effectCfg = null;\n    this.stopEffectAnimation();\n    var symbol = this.childAt(0);\n\n    var onEmphasis = function () {\n      symbol.highlight();\n\n      if (effectCfg.showEffectOn !== 'render') {\n        this.startEffectAnimation(effectCfg);\n      }\n    };\n\n    var onNormal = function () {\n      symbol.downplay();\n\n      if (effectCfg.showEffectOn !== 'render') {\n        this.stopEffectAnimation();\n      }\n    };\n\n    this.on('mouseover', onEmphasis, this).on('mouseout', onNormal, this).on('emphasis', onEmphasis, this).on('normal', onNormal, this);\n  }\n\n  this._effectCfg = effectCfg;\n};\n\neffectSymbolProto.fadeOut = function (cb) {\n  this.off('mouseover').off('mouseout').off('emphasis').off('normal');\n  cb && cb();\n};\n\nzrUtil.inherits(EffectSymbol, Group);\nvar _default = EffectSymbol;\nmodule.exports = _default;","var graphic = require(\"../../util/graphic\");\n\nvar lineContain = require(\"zrender/lib/contain/line\");\n\nvar quadraticContain = require(\"zrender/lib/contain/quadratic\");\n\n// TODO Batch by color\nvar LargeLineShape = graphic.extendShape({\n  shape: {\n    polyline: false,\n    segs: []\n  },\n  buildPath: function (path, shape) {\n    var segs = shape.segs;\n    var isPolyline = shape.polyline;\n\n    for (var i = 0; i < segs.length; i++) {\n      var seg = segs[i];\n\n      if (isPolyline) {\n        path.moveTo(seg[0][0], seg[0][1]);\n\n        for (var j = 1; j < seg.length; j++) {\n          path.lineTo(seg[j][0], seg[j][1]);\n        }\n      } else {\n        path.moveTo(seg[0][0], seg[0][1]);\n\n        if (seg.length > 2) {\n          path.quadraticCurveTo(seg[2][0], seg[2][1], seg[1][0], seg[1][1]);\n        } else {\n          path.lineTo(seg[1][0], seg[1][1]);\n        }\n      }\n    }\n  },\n  findDataIndex: function (x, y) {\n    var shape = this.shape;\n    var segs = shape.segs;\n    var isPolyline = shape.polyline;\n    var lineWidth = Math.max(this.style.lineWidth, 1); // Not consider transform\n\n    for (var i = 0; i < segs.length; i++) {\n      var seg = segs[i];\n\n      if (isPolyline) {\n        for (var j = 1; j < seg.length; j++) {\n          if (lineContain.containStroke(seg[j - 1][0], seg[j - 1][1], seg[j][0], seg[j][1], lineWidth, x, y)) {\n            return i;\n          }\n        }\n      } else {\n        if (seg.length > 2) {\n          if (quadraticContain.containStroke(seg[0][0], seg[0][1], seg[2][0], seg[2][1], seg[1][0], seg[1][1], lineWidth, x, y)) {\n            return i;\n          }\n        } else {\n          if (lineContain.containStroke(seg[0][0], seg[0][1], seg[1][0], seg[1][1], lineWidth, x, y)) {\n            return i;\n          }\n        }\n      }\n    }\n\n    return -1;\n  }\n});\n\nfunction LargeLineDraw() {\n  this.group = new graphic.Group();\n  this._lineEl = new LargeLineShape();\n}\n\nvar largeLineProto = LargeLineDraw.prototype;\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n */\n\nlargeLineProto.updateData = function (data) {\n  this.group.removeAll();\n  var lineEl = this._lineEl;\n  var seriesModel = data.hostModel;\n  lineEl.setShape({\n    segs: data.mapArray(data.getItemLayout),\n    polyline: seriesModel.get('polyline')\n  });\n  lineEl.useStyle(seriesModel.getModel('lineStyle.normal').getLineStyle());\n  var visualColor = data.getVisual('color');\n\n  if (visualColor) {\n    lineEl.setStyle('stroke', visualColor);\n  }\n\n  lineEl.setStyle('fill'); // Enable tooltip\n  // PENDING May have performance issue when path is extremely large\n\n  lineEl.seriesIndex = seriesModel.seriesIndex;\n  lineEl.on('mousemove', function (e) {\n    lineEl.dataIndex = null;\n    var dataIndex = lineEl.findDataIndex(e.offsetX, e.offsetY);\n\n    if (dataIndex > 0) {\n      // Provide dataIndex for tooltip\n      lineEl.dataIndex = dataIndex;\n    }\n  }); // Add back\n\n  this.group.add(lineEl);\n};\n\nlargeLineProto.updateLayout = function (seriesModel) {\n  var data = seriesModel.getData();\n\n  this._lineEl.setShape({\n    segs: data.mapArray(data.getItemLayout)\n  });\n};\n\nlargeLineProto.remove = function () {\n  this.group.removeAll();\n};\n\nvar _default = LargeLineDraw;\nmodule.exports = _default;","var graphic = require(\"../../util/graphic\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n// TODO Batch by color\nvar LargeSymbolPath = graphic.extendShape({\n  shape: {\n    points: null,\n    sizes: null\n  },\n  symbolProxy: null,\n  buildPath: function (path, shape) {\n    var points = shape.points;\n    var sizes = shape.sizes;\n    var symbolProxy = this.symbolProxy;\n    var symbolProxyShape = symbolProxy.shape;\n\n    for (var i = 0; i < points.length; i++) {\n      var pt = points[i];\n\n      if (isNaN(pt[0]) || isNaN(pt[1])) {\n        continue;\n      }\n\n      var size = sizes[i];\n\n      if (size[0] < 4) {\n        // Optimize for small symbol\n        path.rect(pt[0] - size[0] / 2, pt[1] - size[1] / 2, size[0], size[1]);\n      } else {\n        symbolProxyShape.x = pt[0] - size[0] / 2;\n        symbolProxyShape.y = pt[1] - size[1] / 2;\n        symbolProxyShape.width = size[0];\n        symbolProxyShape.height = size[1];\n        symbolProxy.buildPath(path, symbolProxyShape, true);\n      }\n    }\n  },\n  findDataIndex: function (x, y) {\n    var shape = this.shape;\n    var points = shape.points;\n    var sizes = shape.sizes; // Not consider transform\n    // Treat each element as a rect\n    // top down traverse\n\n    for (var i = points.length - 1; i >= 0; i--) {\n      var pt = points[i];\n      var size = sizes[i];\n      var x0 = pt[0] - size[0] / 2;\n      var y0 = pt[1] - size[1] / 2;\n\n      if (x >= x0 && y >= y0 && x <= x0 + size[0] && y <= y0 + size[1]) {\n        // i is dataIndex\n        return i;\n      }\n    }\n\n    return -1;\n  }\n});\n\nfunction LargeSymbolDraw() {\n  this.group = new graphic.Group();\n  this._symbolEl = new LargeSymbolPath({// rectHover: true,\n    // cursor: 'default'\n  });\n}\n\nvar largeSymbolProto = LargeSymbolDraw.prototype;\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n */\n\nlargeSymbolProto.updateData = function (data) {\n  this.group.removeAll();\n  var symbolEl = this._symbolEl;\n  var seriesModel = data.hostModel;\n  symbolEl.setShape({\n    points: data.mapArray(data.getItemLayout),\n    sizes: data.mapArray(function (idx) {\n      var size = data.getItemVisual(idx, 'symbolSize');\n\n      if (!(size instanceof Array)) {\n        size = [size, size];\n      }\n\n      return size;\n    })\n  }); // Create symbolProxy to build path for each data\n\n  symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0); // Use symbolProxy setColor method\n\n  symbolEl.setColor = symbolEl.symbolProxy.setColor;\n  symbolEl.useStyle(seriesModel.getModel('itemStyle.normal').getItemStyle(['color']));\n  var visualColor = data.getVisual('color');\n\n  if (visualColor) {\n    symbolEl.setColor(visualColor);\n  } // Enable tooltip\n  // PENDING May have performance issue when path is extremely large\n\n\n  symbolEl.seriesIndex = seriesModel.seriesIndex;\n  symbolEl.on('mousemove', function (e) {\n    symbolEl.dataIndex = null;\n    var dataIndex = symbolEl.findDataIndex(e.offsetX, e.offsetY);\n\n    if (dataIndex >= 0) {\n      // Provide dataIndex for tooltip\n      symbolEl.dataIndex = dataIndex;\n    }\n  }); // Add back\n\n  this.group.add(symbolEl);\n};\n\nlargeSymbolProto.updateLayout = function (seriesModel) {\n  var data = seriesModel.getData();\n\n  this._symbolEl.setShape({\n    points: data.mapArray(data.getItemLayout)\n  });\n};\n\nlargeSymbolProto.remove = function () {\n  this.group.removeAll();\n};\n\nvar _default = LargeSymbolDraw;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar vector = require(\"zrender/lib/core/vector\");\n\nvar symbolUtil = require(\"../../util/symbol\");\n\nvar LinePath = require(\"./LinePath\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar round = _number.round;\n\n/**\n * @module echarts/chart/helper/Line\n */\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\n\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\n/**\n * @inner\n */\n\n\nfunction createSymbol(name, lineData, idx) {\n  var color = lineData.getItemVisual(idx, 'color');\n  var symbolType = lineData.getItemVisual(idx, name);\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n\n  if (!zrUtil.isArray(symbolSize)) {\n    symbolSize = [symbolSize, symbolSize];\n  }\n\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSize[0] / 2, -symbolSize[1] / 2, symbolSize[0], symbolSize[1], color);\n  symbolPath.name = name;\n  return symbolPath;\n}\n\nfunction createLine(points) {\n  var line = new LinePath({\n    name: 'line'\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\n\nfunction setLinePoints(targetShape, points) {\n  var p1 = points[0];\n  var p2 = points[1];\n  var cp1 = points[2];\n  targetShape.x1 = p1[0];\n  targetShape.y1 = p1[1];\n  targetShape.x2 = p2[0];\n  targetShape.y2 = p2[1];\n  targetShape.percent = 1;\n\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\n\nfunction updateSymbolAndLabelBeforeLineUpdate() {\n  var lineGroup = this;\n  var symbolFrom = lineGroup.childOfName('fromSymbol');\n  var symbolTo = lineGroup.childOfName('toSymbol');\n  var label = lineGroup.childOfName('label'); // Quick reject\n\n  if (!symbolFrom && !symbolTo && label.ignore) {\n    return;\n  }\n\n  var invScale = 1;\n  var parentNode = this.parent;\n\n  while (parentNode) {\n    if (parentNode.scale) {\n      invScale /= parentNode.scale[0];\n    }\n\n    parentNode = parentNode.parent;\n  }\n\n  var line = lineGroup.childOfName('line'); // If line not changed\n  // FIXME Parent scale changed\n\n  if (!this.__dirty && !line.__dirty) {\n    return;\n  }\n\n  var percent = line.shape.percent;\n  var fromPos = line.pointAt(0);\n  var toPos = line.pointAt(percent);\n  var d = vector.sub([], toPos, fromPos);\n  vector.normalize(d, d);\n\n  if (symbolFrom) {\n    symbolFrom.attr('position', fromPos);\n    var tangent = line.tangentAt(0);\n    symbolFrom.attr('rotation', Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n    symbolFrom.attr('scale', [invScale * percent, invScale * percent]);\n  }\n\n  if (symbolTo) {\n    symbolTo.attr('position', toPos);\n    var tangent = line.tangentAt(1);\n    symbolTo.attr('rotation', -Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n    symbolTo.attr('scale', [invScale * percent, invScale * percent]);\n  }\n\n  if (!label.ignore) {\n    label.attr('position', toPos);\n    var textPosition;\n    var textAlign;\n    var textVerticalAlign;\n    var distance = 5 * invScale; // End\n\n    if (label.__position === 'end') {\n      textPosition = [d[0] * distance + toPos[0], d[1] * distance + toPos[1]];\n      textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n      textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n    } // Middle\n    else if (label.__position === 'middle') {\n        var halfPercent = percent / 2;\n        var tangent = line.tangentAt(halfPercent);\n        var n = [tangent[1], -tangent[0]];\n        var cp = line.pointAt(halfPercent);\n\n        if (n[1] > 0) {\n          n[0] = -n[0];\n          n[1] = -n[1];\n        }\n\n        textPosition = [cp[0] + n[0] * distance, cp[1] + n[1] * distance];\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        var rotation = -Math.atan2(tangent[1], tangent[0]);\n\n        if (toPos[0] < fromPos[0]) {\n          rotation = Math.PI + rotation;\n        }\n\n        label.attr('rotation', rotation);\n      } // Start\n      else {\n          textPosition = [-d[0] * distance + fromPos[0], -d[1] * distance + fromPos[1]];\n          textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n        }\n\n    label.attr({\n      style: {\n        // Use the user specified text align and baseline first\n        textVerticalAlign: label.__verticalAlign || textVerticalAlign,\n        textAlign: label.__textAlign || textAlign\n      },\n      position: textPosition,\n      scale: [invScale, invScale]\n    });\n  }\n}\n/**\n * @constructor\n * @extends {module:zrender/graphic/Group}\n * @alias {module:echarts/chart/helper/Line}\n */\n\n\nfunction Line(lineData, idx, seriesScope) {\n  graphic.Group.call(this);\n\n  this._createLine(lineData, idx, seriesScope);\n}\n\nvar lineProto = Line.prototype; // Update symbol position and rotation\n\nlineProto.beforeUpdate = updateSymbolAndLabelBeforeLineUpdate;\n\nlineProto._createLine = function (lineData, idx, seriesScope) {\n  var seriesModel = lineData.hostModel;\n  var linePoints = lineData.getItemLayout(idx);\n  var line = createLine(linePoints);\n  line.shape.percent = 0;\n  graphic.initProps(line, {\n    shape: {\n      percent: 1\n    }\n  }, seriesModel, idx);\n  this.add(line);\n  var label = new graphic.Text({\n    name: 'label'\n  });\n  this.add(label);\n  zrUtil.each(SYMBOL_CATEGORIES, function (symbolCategory) {\n    var symbol = createSymbol(symbolCategory, lineData, idx); // symbols must added after line to make sure\n    // it will be updated after line#update.\n    // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n\n    this.add(symbol);\n    this[makeSymbolTypeKey(symbolCategory)] = lineData.getItemVisual(idx, symbolCategory);\n  }, this);\n\n  this._updateCommonStl(lineData, idx, seriesScope);\n};\n\nlineProto.updateData = function (lineData, idx, seriesScope) {\n  var seriesModel = lineData.hostModel;\n  var line = this.childOfName('line');\n  var linePoints = lineData.getItemLayout(idx);\n  var target = {\n    shape: {}\n  };\n  setLinePoints(target.shape, linePoints);\n  graphic.updateProps(line, target, seriesModel, idx);\n  zrUtil.each(SYMBOL_CATEGORIES, function (symbolCategory) {\n    var symbolType = lineData.getItemVisual(idx, symbolCategory);\n    var key = makeSymbolTypeKey(symbolCategory); // Symbol changed\n\n    if (this[key] !== symbolType) {\n      this.remove(this.childOfName(symbolCategory));\n      var symbol = createSymbol(symbolCategory, lineData, idx);\n      this.add(symbol);\n    }\n\n    this[key] = symbolType;\n  }, this);\n\n  this._updateCommonStl(lineData, idx, seriesScope);\n};\n\nlineProto._updateCommonStl = function (lineData, idx, seriesScope) {\n  var seriesModel = lineData.hostModel;\n  var line = this.childOfName('line');\n  var lineStyle = seriesScope && seriesScope.lineStyle;\n  var hoverLineStyle = seriesScope && seriesScope.hoverLineStyle;\n  var labelModel = seriesScope && seriesScope.labelModel;\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel; // Optimization for large dataset\n\n  if (!seriesScope || lineData.hasItemOption) {\n    var itemModel = lineData.getItemModel(idx);\n    lineStyle = itemModel.getModel('lineStyle.normal').getLineStyle();\n    hoverLineStyle = itemModel.getModel('lineStyle.emphasis').getLineStyle();\n    labelModel = itemModel.getModel('label.normal');\n    hoverLabelModel = itemModel.getModel('label.emphasis');\n  }\n\n  var visualColor = lineData.getItemVisual(idx, 'color');\n  var visualOpacity = zrUtil.retrieve3(lineData.getItemVisual(idx, 'opacity'), lineStyle.opacity, 1);\n  line.useStyle(zrUtil.defaults({\n    strokeNoScale: true,\n    fill: 'none',\n    stroke: visualColor,\n    opacity: visualOpacity\n  }, lineStyle));\n  line.hoverStyle = hoverLineStyle; // Update symbol\n\n  zrUtil.each(SYMBOL_CATEGORIES, function (symbolCategory) {\n    var symbol = this.childOfName(symbolCategory);\n\n    if (symbol) {\n      symbol.setColor(visualColor);\n      symbol.setStyle({\n        opacity: visualOpacity\n      });\n    }\n  }, this);\n  var showLabel = labelModel.getShallow('show');\n  var hoverShowLabel = hoverLabelModel.getShallow('show');\n  var label = this.childOfName('label');\n  var defaultLabelColor;\n  var defaultText;\n  var normalText;\n  var emphasisText;\n\n  if (showLabel || hoverShowLabel) {\n    var rawVal = seriesModel.getRawValue(idx);\n    defaultText = rawVal == null ? defaultText = lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal;\n    defaultLabelColor = visualColor || '#000';\n    normalText = zrUtil.retrieve2(seriesModel.getFormattedLabel(idx, 'normal', lineData.dataType), defaultText);\n    emphasisText = zrUtil.retrieve2(seriesModel.getFormattedLabel(idx, 'emphasis', lineData.dataType), normalText);\n  } // label.afterUpdate = lineAfterUpdate;\n\n\n  if (showLabel) {\n    var labelStyle = graphic.setTextStyle(label.style, labelModel, {\n      text: normalText\n    }, {\n      autoColor: defaultLabelColor\n    });\n    label.__textAlign = labelStyle.textAlign;\n    label.__verticalAlign = labelStyle.textVerticalAlign; // 'start', 'middle', 'end'\n\n    label.__position = labelModel.get('position') || 'middle';\n  } else {\n    label.setStyle('text', null);\n  }\n\n  if (hoverShowLabel) {\n    // Only these properties supported in this emphasis style here.\n    label.hoverStyle = {\n      text: emphasisText,\n      textFill: hoverLabelModel.getTextColor(true),\n      // For merging hover style to normal style, do not use\n      // `hoverLabelModel.getFont()` here.\n      fontStyle: hoverLabelModel.getShallow('fontStyle'),\n      fontWeight: hoverLabelModel.getShallow('fontWeight'),\n      fontSize: hoverLabelModel.getShallow('fontSize'),\n      fontFamily: hoverLabelModel.getShallow('fontFamily')\n    };\n  } else {\n    label.hoverStyle = {\n      text: null\n    };\n  }\n\n  label.ignore = !showLabel && !hoverShowLabel;\n  graphic.setHoverStyle(this);\n};\n\nlineProto.highlight = function () {\n  this.trigger('emphasis');\n};\n\nlineProto.downplay = function () {\n  this.trigger('normal');\n};\n\nlineProto.updateLayout = function (lineData, idx) {\n  this.setLinePoints(lineData.getItemLayout(idx));\n};\n\nlineProto.setLinePoints = function (points) {\n  var linePath = this.childOfName('line');\n  setLinePoints(linePath.shape, points);\n  linePath.dirty();\n};\n\nzrUtil.inherits(Line, graphic.Group);\nvar _default = Line;\nmodule.exports = _default;","var graphic = require(\"../../util/graphic\");\n\nvar LineGroup = require(\"./Line\");\n\n/**\n * @module echarts/chart/helper/LineDraw\n */\nfunction isPointNaN(pt) {\n  return isNaN(pt[0]) || isNaN(pt[1]);\n}\n\nfunction lineNeedsDraw(pts) {\n  return !isPointNaN(pts[0]) && !isPointNaN(pts[1]);\n}\n/**\n * @alias module:echarts/component/marker/LineDraw\n * @constructor\n */\n\n\nfunction LineDraw(ctor) {\n  this._ctor = ctor || LineGroup;\n  this.group = new graphic.Group();\n}\n\nvar lineDrawProto = LineDraw.prototype;\n/**\n * @param {module:echarts/data/List} lineData\n */\n\nlineDrawProto.updateData = function (lineData) {\n  var oldLineData = this._lineData;\n  var group = this.group;\n  var LineCtor = this._ctor;\n  var hostModel = lineData.hostModel;\n  var seriesScope = {\n    lineStyle: hostModel.getModel('lineStyle.normal').getLineStyle(),\n    hoverLineStyle: hostModel.getModel('lineStyle.emphasis').getLineStyle(),\n    labelModel: hostModel.getModel('label.normal'),\n    hoverLabelModel: hostModel.getModel('label.emphasis')\n  };\n  lineData.diff(oldLineData).add(function (idx) {\n    if (!lineNeedsDraw(lineData.getItemLayout(idx))) {\n      return;\n    }\n\n    var lineGroup = new LineCtor(lineData, idx, seriesScope);\n    lineData.setItemGraphicEl(idx, lineGroup);\n    group.add(lineGroup);\n  }).update(function (newIdx, oldIdx) {\n    var lineGroup = oldLineData.getItemGraphicEl(oldIdx);\n\n    if (!lineNeedsDraw(lineData.getItemLayout(newIdx))) {\n      group.remove(lineGroup);\n      return;\n    }\n\n    if (!lineGroup) {\n      lineGroup = new LineCtor(lineData, newIdx, seriesScope);\n    } else {\n      lineGroup.updateData(lineData, newIdx, seriesScope);\n    }\n\n    lineData.setItemGraphicEl(newIdx, lineGroup);\n    group.add(lineGroup);\n  }).remove(function (idx) {\n    group.remove(oldLineData.getItemGraphicEl(idx));\n  }).execute();\n  this._lineData = lineData;\n};\n\nlineDrawProto.updateLayout = function () {\n  var lineData = this._lineData;\n  lineData.eachItemGraphicEl(function (el, idx) {\n    el.updateLayout(lineData, idx);\n  }, this);\n};\n\nlineDrawProto.remove = function () {\n  this.group.removeAll();\n};\n\nvar _default = LineDraw;\nmodule.exports = _default;","var graphic = require(\"../../util/graphic\");\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\n/**\n * Line path for bezier and straight line draw\n */\nvar straightLineProto = graphic.Line.prototype;\nvar bezierCurveProto = graphic.BezierCurve.prototype;\n\nfunction isLine(shape) {\n  return isNaN(+shape.cpx1) || isNaN(+shape.cpy1);\n}\n\nvar _default = graphic.extendShape({\n  type: 'ec-line',\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  shape: {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    percent: 1,\n    cpx1: null,\n    cpy1: null\n  },\n  buildPath: function (ctx, shape) {\n    (isLine(shape) ? straightLineProto : bezierCurveProto).buildPath(ctx, shape);\n  },\n  pointAt: function (t) {\n    return isLine(this.shape) ? straightLineProto.pointAt.call(this, t) : bezierCurveProto.pointAt.call(this, t);\n  },\n  tangentAt: function (t) {\n    var shape = this.shape;\n    var p = isLine(shape) ? [shape.x2 - shape.x1, shape.y2 - shape.y1] : bezierCurveProto.tangentAt.call(this, t);\n    return vec2.normalize(p, p);\n  }\n});\n\nmodule.exports = _default;","var graphic = require(\"../../util/graphic\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/**\n * @module echarts/chart/helper/Line\n */\n\n/**\n * @constructor\n * @extends {module:zrender/graphic/Group}\n * @alias {module:echarts/chart/helper/Polyline}\n */\nfunction Polyline(lineData, idx, seriesScope) {\n  graphic.Group.call(this);\n\n  this._createPolyline(lineData, idx, seriesScope);\n}\n\nvar polylineProto = Polyline.prototype;\n\npolylineProto._createPolyline = function (lineData, idx, seriesScope) {\n  // var seriesModel = lineData.hostModel;\n  var points = lineData.getItemLayout(idx);\n  var line = new graphic.Polyline({\n    shape: {\n      points: points\n    }\n  });\n  this.add(line);\n\n  this._updateCommonStl(lineData, idx, seriesScope);\n};\n\npolylineProto.updateData = function (lineData, idx, seriesScope) {\n  var seriesModel = lineData.hostModel;\n  var line = this.childAt(0);\n  var target = {\n    shape: {\n      points: lineData.getItemLayout(idx)\n    }\n  };\n  graphic.updateProps(line, target, seriesModel, idx);\n\n  this._updateCommonStl(lineData, idx, seriesScope);\n};\n\npolylineProto._updateCommonStl = function (lineData, idx, seriesScope) {\n  var line = this.childAt(0);\n  var itemModel = lineData.getItemModel(idx);\n  var visualColor = lineData.getItemVisual(idx, 'color');\n  var lineStyle = seriesScope && seriesScope.lineStyle;\n  var hoverLineStyle = seriesScope && seriesScope.hoverLineStyle;\n\n  if (!seriesScope || lineData.hasItemOption) {\n    lineStyle = itemModel.getModel('lineStyle.normal').getLineStyle();\n    hoverLineStyle = itemModel.getModel('lineStyle.emphasis').getLineStyle();\n  }\n\n  line.useStyle(zrUtil.defaults({\n    strokeNoScale: true,\n    fill: 'none',\n    stroke: visualColor\n  }, lineStyle));\n  line.hoverStyle = hoverLineStyle;\n  graphic.setHoverStyle(this);\n};\n\npolylineProto.updateLayout = function (lineData, idx) {\n  var polyline = this.childAt(0);\n  polyline.setShape('points', lineData.getItemLayout(idx));\n};\n\nzrUtil.inherits(Polyline, graphic.Group);\nvar _default = Polyline;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _labelHelper = require(\"./labelHelper\");\n\nvar findLabelValueDim = _labelHelper.findLabelValueDim;\n\n/**\n * @module echarts/chart/helper/Symbol\n */\nfunction getSymbolSize(data, idx) {\n  var symbolSize = data.getItemVisual(idx, 'symbolSize');\n  return symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\n}\n\nfunction getScale(symbolSize) {\n  return [symbolSize[0] / 2, symbolSize[1] / 2];\n}\n/**\n * @constructor\n * @alias {module:echarts/chart/helper/Symbol}\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @extends {module:zrender/graphic/Group}\n */\n\n\nfunction SymbolClz(data, idx, seriesScope) {\n  graphic.Group.call(this);\n  this.updateData(data, idx, seriesScope);\n}\n\nvar symbolProto = SymbolClz.prototype;\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nsymbolProto._createSymbol = function (symbolType, data, idx, symbolSize) {\n  // Remove paths created before\n  this.removeAll();\n  var color = data.getItemVisual(idx, 'color'); // var symbolPath = createSymbol(\n  //     symbolType, -0.5, -0.5, 1, 1, color\n  // );\n  // If width/height are set too small (e.g., set to 1) on ios10\n  // and macOS Sierra, a circle stroke become a rect, no matter what\n  // the scale is set. So we set width/height as 2. See #4150.\n\n  var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, color);\n  symbolPath.attr({\n    z2: 100,\n    culling: true,\n    scale: getScale(symbolSize)\n  }); // Rewrite drift method\n\n  symbolPath.drift = driftSymbol;\n  this._symbolType = symbolType;\n  this.add(symbolPath);\n};\n/**\n * Stop animation\n * @param {boolean} toLastFrame\n */\n\n\nsymbolProto.stopSymbolAnimation = function (toLastFrame) {\n  this.childAt(0).stopAnimation(toLastFrame);\n};\n/**\n * FIXME:\n * Caution: This method breaks the encapsulation of this module,\n * but it indeed brings convenience. So do not use the method\n * unless you detailedly know all the implements of `Symbol`,\n * especially animation.\n *\n * Get symbol path element.\n */\n\n\nsymbolProto.getSymbolPath = function () {\n  return this.childAt(0);\n};\n/**\n * Get scale(aka, current symbol size).\n * Including the change caused by animation\n */\n\n\nsymbolProto.getScale = function () {\n  return this.childAt(0).scale;\n};\n/**\n * Highlight symbol\n */\n\n\nsymbolProto.highlight = function () {\n  this.childAt(0).trigger('emphasis');\n};\n/**\n * Downplay symbol\n */\n\n\nsymbolProto.downplay = function () {\n  this.childAt(0).trigger('normal');\n};\n/**\n * @param {number} zlevel\n * @param {number} z\n */\n\n\nsymbolProto.setZ = function (zlevel, z) {\n  var symbolPath = this.childAt(0);\n  symbolPath.zlevel = zlevel;\n  symbolPath.z = z;\n};\n\nsymbolProto.setDraggable = function (draggable) {\n  var symbolPath = this.childAt(0);\n  symbolPath.draggable = draggable;\n  symbolPath.cursor = draggable ? 'move' : 'pointer';\n};\n/**\n * Update symbol properties\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Object} [seriesScope]\n * @param {Object} [seriesScope.itemStyle]\n * @param {Object} [seriesScope.hoverItemStyle]\n * @param {Object} [seriesScope.symbolRotate]\n * @param {Object} [seriesScope.symbolOffset]\n * @param {module:echarts/model/Model} [seriesScope.labelModel]\n * @param {module:echarts/model/Model} [seriesScope.hoverLabelModel]\n * @param {boolean} [seriesScope.hoverAnimation]\n * @param {Object} [seriesScope.cursorStyle]\n * @param {module:echarts/model/Model} [seriesScope.itemModel]\n * @param {string} [seriesScope.symbolInnerColor]\n * @param {Object} [seriesScope.fadeIn=false]\n */\n\n\nsymbolProto.updateData = function (data, idx, seriesScope) {\n  this.silent = false;\n  var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n  var seriesModel = data.hostModel;\n  var symbolSize = getSymbolSize(data, idx);\n  var isInit = symbolType !== this._symbolType;\n\n  if (isInit) {\n    this._createSymbol(symbolType, data, idx, symbolSize);\n  } else {\n    var symbolPath = this.childAt(0);\n    symbolPath.silent = false;\n    graphic.updateProps(symbolPath, {\n      scale: getScale(symbolSize)\n    }, seriesModel, idx);\n  }\n\n  this._updateCommon(data, idx, symbolSize, seriesScope);\n\n  if (isInit) {\n    var symbolPath = this.childAt(0);\n    var fadeIn = seriesScope && seriesScope.fadeIn;\n    var target = {\n      scale: symbolPath.scale.slice()\n    };\n    fadeIn && (target.style = {\n      opacity: symbolPath.style.opacity\n    });\n    symbolPath.scale = [0, 0];\n    fadeIn && (symbolPath.style.opacity = 0);\n    graphic.initProps(symbolPath, target, seriesModel, idx);\n  }\n\n  this._seriesModel = seriesModel;\n}; // Update common properties\n\n\nvar normalStyleAccessPath = ['itemStyle', 'normal'];\nvar emphasisStyleAccessPath = ['itemStyle', 'emphasis'];\nvar normalLabelAccessPath = ['label', 'normal'];\nvar emphasisLabelAccessPath = ['label', 'emphasis'];\n/**\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Array.<number>} symbolSize\n * @param {Object} [seriesScope]\n */\n\nsymbolProto._updateCommon = function (data, idx, symbolSize, seriesScope) {\n  var symbolPath = this.childAt(0);\n  var seriesModel = data.hostModel;\n  var color = data.getItemVisual(idx, 'color'); // Reset style\n\n  if (symbolPath.type !== 'image') {\n    symbolPath.useStyle({\n      strokeNoScale: true\n    });\n  }\n\n  var itemStyle = seriesScope && seriesScope.itemStyle;\n  var hoverItemStyle = seriesScope && seriesScope.hoverItemStyle;\n  var symbolRotate = seriesScope && seriesScope.symbolRotate;\n  var symbolOffset = seriesScope && seriesScope.symbolOffset;\n  var labelModel = seriesScope && seriesScope.labelModel;\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel;\n  var hoverAnimation = seriesScope && seriesScope.hoverAnimation;\n  var cursorStyle = seriesScope && seriesScope.cursorStyle;\n\n  if (!seriesScope || data.hasItemOption) {\n    var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx); // Color must be excluded.\n    // Because symbol provide setColor individually to set fill and stroke\n\n    itemStyle = itemModel.getModel(normalStyleAccessPath).getItemStyle(['color']);\n    hoverItemStyle = itemModel.getModel(emphasisStyleAccessPath).getItemStyle();\n    symbolRotate = itemModel.getShallow('symbolRotate');\n    symbolOffset = itemModel.getShallow('symbolOffset');\n    labelModel = itemModel.getModel(normalLabelAccessPath);\n    hoverLabelModel = itemModel.getModel(emphasisLabelAccessPath);\n    hoverAnimation = itemModel.getShallow('hoverAnimation');\n    cursorStyle = itemModel.getShallow('cursor');\n  } else {\n    hoverItemStyle = zrUtil.extend({}, hoverItemStyle);\n  }\n\n  var elStyle = symbolPath.style;\n  symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n\n  if (symbolOffset) {\n    symbolPath.attr('position', [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])]);\n  }\n\n  cursorStyle && symbolPath.attr('cursor', cursorStyle); // PENDING setColor before setStyle!!!\n\n  symbolPath.setColor(color, seriesScope && seriesScope.symbolInnerColor);\n  symbolPath.setStyle(itemStyle);\n  var opacity = data.getItemVisual(idx, 'opacity');\n\n  if (opacity != null) {\n    elStyle.opacity = opacity;\n  }\n\n  var useNameLabel = seriesScope && seriesScope.useNameLabel;\n  var valueDim = !useNameLabel && findLabelValueDim(data);\n\n  if (useNameLabel || valueDim != null) {\n    graphic.setLabelStyle(elStyle, hoverItemStyle, labelModel, hoverLabelModel, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: useNameLabel ? data.getName(idx) : data.get(valueDim, idx),\n      isRectText: true,\n      autoColor: color\n    });\n  }\n\n  symbolPath.off('mouseover').off('mouseout').off('emphasis').off('normal');\n  symbolPath.hoverStyle = hoverItemStyle; // FIXME\n  // Do not use symbol.trigger('emphasis'), but use symbol.highlight() instead.\n\n  graphic.setHoverStyle(symbolPath);\n  var scale = getScale(symbolSize);\n\n  if (hoverAnimation && seriesModel.isAnimationEnabled()) {\n    var onEmphasis = function () {\n      var ratio = scale[1] / scale[0];\n      this.animateTo({\n        scale: [Math.max(scale[0] * 1.1, scale[0] + 3), Math.max(scale[1] * 1.1, scale[1] + 3 * ratio)]\n      }, 400, 'elasticOut');\n    };\n\n    var onNormal = function () {\n      this.animateTo({\n        scale: scale\n      }, 400, 'elasticOut');\n    };\n\n    symbolPath.on('mouseover', onEmphasis).on('mouseout', onNormal).on('emphasis', onEmphasis).on('normal', onNormal);\n  }\n};\n/**\n * @param {Function} cb\n * @param {Object} [opt]\n * @param {Object} [opt.keepLabel=true]\n */\n\n\nsymbolProto.fadeOut = function (cb, opt) {\n  var symbolPath = this.childAt(0); // Avoid mistaken hover when fading out\n\n  this.silent = symbolPath.silent = true; // Not show text when animating\n\n  !(opt && opt.keepLabel) && (symbolPath.style.text = null);\n  graphic.updateProps(symbolPath, {\n    style: {\n      opacity: 0\n    },\n    scale: [0, 0]\n  }, this._seriesModel, this.dataIndex, cb);\n};\n\nzrUtil.inherits(SymbolClz, graphic.Group);\nvar _default = SymbolClz;\nmodule.exports = _default;","var graphic = require(\"../../util/graphic\");\n\nvar SymbolClz = require(\"./Symbol\");\n\n/**\n * @module echarts/chart/helper/SymbolDraw\n */\n\n/**\n * @constructor\n * @alias module:echarts/chart/helper/SymbolDraw\n * @param {module:zrender/graphic/Group} [symbolCtor]\n */\nfunction SymbolDraw(symbolCtor) {\n  this.group = new graphic.Group();\n  this._symbolCtor = symbolCtor || SymbolClz;\n}\n\nvar symbolDrawProto = SymbolDraw.prototype;\n\nfunction symbolNeedsDraw(data, idx, isIgnore) {\n  var point = data.getItemLayout(idx); // Is an object\n  // if (point && point.hasOwnProperty('point')) {\n  //     point = point.point;\n  // }\n\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(isIgnore && isIgnore(idx)) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Array.<boolean>} [isIgnore]\n */\n\n\nsymbolDrawProto.updateData = function (data, isIgnore) {\n  var group = this.group;\n  var seriesModel = data.hostModel;\n  var oldData = this._data;\n  var SymbolCtor = this._symbolCtor;\n  var seriesScope = {\n    itemStyle: seriesModel.getModel('itemStyle.normal').getItemStyle(['color']),\n    hoverItemStyle: seriesModel.getModel('itemStyle.emphasis').getItemStyle(),\n    symbolRotate: seriesModel.get('symbolRotate'),\n    symbolOffset: seriesModel.get('symbolOffset'),\n    hoverAnimation: seriesModel.get('hoverAnimation'),\n    labelModel: seriesModel.getModel('label.normal'),\n    hoverLabelModel: seriesModel.getModel('label.emphasis'),\n    cursorStyle: seriesModel.get('cursor')\n  };\n  data.diff(oldData).add(function (newIdx) {\n    var point = data.getItemLayout(newIdx);\n\n    if (symbolNeedsDraw(data, newIdx, isIgnore)) {\n      var symbolEl = new SymbolCtor(data, newIdx, seriesScope);\n      symbolEl.attr('position', point);\n      data.setItemGraphicEl(newIdx, symbolEl);\n      group.add(symbolEl);\n    }\n  }).update(function (newIdx, oldIdx) {\n    var symbolEl = oldData.getItemGraphicEl(oldIdx);\n    var point = data.getItemLayout(newIdx);\n\n    if (!symbolNeedsDraw(data, newIdx, isIgnore)) {\n      group.remove(symbolEl);\n      return;\n    }\n\n    if (!symbolEl) {\n      symbolEl = new SymbolCtor(data, newIdx);\n      symbolEl.attr('position', point);\n    } else {\n      symbolEl.updateData(data, newIdx, seriesScope);\n      graphic.updateProps(symbolEl, {\n        position: point\n      }, seriesModel);\n    } // Add back\n\n\n    group.add(symbolEl);\n    data.setItemGraphicEl(newIdx, symbolEl);\n  }).remove(function (oldIdx) {\n    var el = oldData.getItemGraphicEl(oldIdx);\n    el && el.fadeOut(function () {\n      group.remove(el);\n    });\n  }).execute();\n  this._data = data;\n};\n\nsymbolDrawProto.updateLayout = function () {\n  var data = this._data;\n\n  if (data) {\n    // Not use animation\n    data.eachItemGraphicEl(function (el, idx) {\n      var point = data.getItemLayout(idx);\n      el.attr('position', point);\n    });\n  }\n};\n\nsymbolDrawProto.remove = function (enableAnimation) {\n  var group = this.group;\n  var data = this._data;\n\n  if (data) {\n    if (enableAnimation) {\n      data.eachItemGraphicEl(function (el) {\n        el.fadeOut(function () {\n          group.remove(el);\n        });\n      });\n    } else {\n      group.removeAll();\n    }\n  }\n};\n\nvar _default = SymbolDraw;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar Path = require(\"zrender/lib/graphic/Path\");\n\n/**\n * @module echarts/chart/helper/Symbol\n */\nvar WhiskerPath = Path.extend({\n  type: 'whiskerInBox',\n  shape: {},\n  buildPath: function (ctx, shape) {\n    for (var i in shape) {\n      if (shape.hasOwnProperty(i) && i.indexOf('ends') === 0) {\n        var pts = shape[i];\n        ctx.moveTo(pts[0][0], pts[0][1]);\n        ctx.lineTo(pts[1][0], pts[1][1]);\n      }\n    }\n  }\n});\n/**\n * @constructor\n * @alias {module:echarts/chart/helper/WhiskerBox}\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Function} styleUpdater\n * @param {boolean} isInit\n * @extends {module:zrender/graphic/Group}\n */\n\nfunction WhiskerBox(data, idx, styleUpdater, isInit) {\n  graphic.Group.call(this);\n  /**\n   * @type {number}\n   * @readOnly\n   */\n\n  this.bodyIndex;\n  /**\n   * @type {number}\n   * @readOnly\n   */\n\n  this.whiskerIndex;\n  /**\n   * @type {Function}\n   */\n\n  this.styleUpdater = styleUpdater;\n\n  this._createContent(data, idx, isInit);\n\n  this.updateData(data, idx, isInit);\n  /**\n   * Last series model.\n   * @type {module:echarts/model/Series}\n   */\n\n  this._seriesModel;\n}\n\nvar whiskerBoxProto = WhiskerBox.prototype;\n\nwhiskerBoxProto._createContent = function (data, idx, isInit) {\n  var itemLayout = data.getItemLayout(idx);\n  var constDim = itemLayout.chartLayout === 'horizontal' ? 1 : 0;\n  var count = 0; // Whisker element.\n\n  this.add(new graphic.Polygon({\n    shape: {\n      points: isInit ? transInit(itemLayout.bodyEnds, constDim, itemLayout) : itemLayout.bodyEnds\n    },\n    style: {\n      strokeNoScale: true\n    },\n    z2: 100\n  }));\n  this.bodyIndex = count++; // Box element.\n\n  var whiskerEnds = zrUtil.map(itemLayout.whiskerEnds, function (ends) {\n    return isInit ? transInit(ends, constDim, itemLayout) : ends;\n  });\n  this.add(new WhiskerPath({\n    shape: makeWhiskerEndsShape(whiskerEnds),\n    style: {\n      strokeNoScale: true\n    },\n    z2: 100\n  }));\n  this.whiskerIndex = count++;\n};\n\nfunction transInit(points, dim, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[dim] = itemLayout.initBaseline;\n    return point;\n  });\n}\n\nfunction makeWhiskerEndsShape(whiskerEnds) {\n  // zr animation only support 2-dim array.\n  var shape = {};\n  zrUtil.each(whiskerEnds, function (ends, i) {\n    shape['ends' + i] = ends;\n  });\n  return shape;\n}\n/**\n * Update symbol properties\n * @param  {module:echarts/data/List} data\n * @param  {number} idx\n */\n\n\nwhiskerBoxProto.updateData = function (data, idx, isInit) {\n  var seriesModel = this._seriesModel = data.hostModel;\n  var itemLayout = data.getItemLayout(idx);\n  var updateMethod = graphic[isInit ? 'initProps' : 'updateProps']; // this.childAt(this.bodyIndex).stopAnimation(true);\n  // this.childAt(this.whiskerIndex).stopAnimation(true);\n\n  updateMethod(this.childAt(this.bodyIndex), {\n    shape: {\n      points: itemLayout.bodyEnds\n    }\n  }, seriesModel, idx);\n  updateMethod(this.childAt(this.whiskerIndex), {\n    shape: makeWhiskerEndsShape(itemLayout.whiskerEnds)\n  }, seriesModel, idx);\n  this.styleUpdater.call(null, this, data, idx);\n};\n\nzrUtil.inherits(WhiskerBox, graphic.Group);\n/**\n * @constructor\n * @alias module:echarts/chart/helper/WhiskerBoxDraw\n */\n\nfunction WhiskerBoxDraw(styleUpdater) {\n  this.group = new graphic.Group();\n  this.styleUpdater = styleUpdater;\n}\n\nvar whiskerBoxDrawProto = WhiskerBoxDraw.prototype;\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n */\n\nwhiskerBoxDrawProto.updateData = function (data) {\n  var group = this.group;\n  var oldData = this._data;\n  var styleUpdater = this.styleUpdater;\n  data.diff(oldData).add(function (newIdx) {\n    if (data.hasValue(newIdx)) {\n      var symbolEl = new WhiskerBox(data, newIdx, styleUpdater, true);\n      data.setItemGraphicEl(newIdx, symbolEl);\n      group.add(symbolEl);\n    }\n  }).update(function (newIdx, oldIdx) {\n    var symbolEl = oldData.getItemGraphicEl(oldIdx); // Empty data\n\n    if (!data.hasValue(newIdx)) {\n      group.remove(symbolEl);\n      return;\n    }\n\n    if (!symbolEl) {\n      symbolEl = new WhiskerBox(data, newIdx, styleUpdater);\n    } else {\n      symbolEl.updateData(data, newIdx);\n    } // Add back\n\n\n    group.add(symbolEl);\n    data.setItemGraphicEl(newIdx, symbolEl);\n  }).remove(function (oldIdx) {\n    var el = oldData.getItemGraphicEl(oldIdx);\n    el && group.remove(el);\n  }).execute();\n  this._data = data;\n};\n/**\n * Remove symbols.\n * @param {module:echarts/data/List} data\n */\n\n\nwhiskerBoxDrawProto.remove = function () {\n  var group = this.group;\n  var data = this._data;\n  this._data = null;\n  data && data.eachItemGraphicEl(function (el) {\n    el && group.remove(el);\n  });\n};\n\nvar _default = WhiskerBoxDraw;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar List = require(\"../../data/List\");\n\nvar Graph = require(\"../../data/Graph\");\n\nvar linkList = require(\"../../data/helper/linkList\");\n\nvar completeDimensions = require(\"../../data/helper/completeDimensions\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nvar createListFromArray = require(\"./createListFromArray\");\n\nfunction _default(nodes, edges, hostModel, directed, beforeLink) {\n  var graph = new Graph(directed);\n\n  for (var i = 0; i < nodes.length; i++) {\n    graph.addNode(zrUtil.retrieve( // Id, name, dataIndex\n    nodes[i].id, nodes[i].name, i), i);\n  }\n\n  var linkNameList = [];\n  var validEdges = [];\n  var linkCount = 0;\n\n  for (var i = 0; i < edges.length; i++) {\n    var link = edges[i];\n    var source = link.source;\n    var target = link.target; // addEdge may fail when source or target not exists\n\n    if (graph.addEdge(source, target, linkCount)) {\n      validEdges.push(link);\n      linkNameList.push(zrUtil.retrieve(link.id, source + ' > ' + target));\n      linkCount++;\n    }\n  }\n\n  var coordSys = hostModel.get('coordinateSystem');\n  var nodeData;\n\n  if (coordSys === 'cartesian2d' || coordSys === 'polar') {\n    nodeData = createListFromArray(nodes, hostModel, hostModel.ecModel);\n  } else {\n    // FIXME\n    var coordSysCtor = CoordinateSystem.get(coordSys); // FIXME\n\n    var dimensionNames = completeDimensions((coordSysCtor && coordSysCtor.type !== 'view' ? coordSysCtor.dimensions || [] : []).concat(['value']), nodes);\n    nodeData = new List(dimensionNames, hostModel);\n    nodeData.initData(nodes);\n  }\n\n  var edgeData = new List(['value'], hostModel);\n  edgeData.initData(validEdges, linkNameList);\n  beforeLink && beforeLink(nodeData, edgeData);\n  linkList({\n    mainData: nodeData,\n    struct: graph,\n    structAttr: 'graph',\n    datas: {\n      node: nodeData,\n      edge: edgeData\n    },\n    datasAttr: {\n      node: 'data',\n      edge: 'edgeData'\n    }\n  }); // Update dataIndex of nodes and edges because invalid edge may be removed\n\n  graph.update();\n  return graph;\n}\n\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar List = require(\"../../data/List\");\n\nvar completeDimensions = require(\"../../data/helper/completeDimensions\");\n\nvar _model = require(\"../../util/model\");\n\nvar getDataItemValue = _model.getDataItemValue;\nvar converDataValue = _model.converDataValue;\nvar isDataItemOption = _model.isDataItemOption;\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nfunction firstDataNotNull(data) {\n  var i = 0;\n\n  while (i < data.length && data[i] == null) {\n    i++;\n  }\n\n  return data[i];\n}\n\nfunction ifNeedCompleteOrdinalData(data) {\n  var sampleItem = firstDataNotNull(data);\n  return sampleItem != null && !zrUtil.isArray(getDataItemValue(sampleItem));\n}\n/**\n * Helper function to create a list from option data\n */\n\n\nfunction createListFromArray(data, seriesModel, ecModel) {\n  // If data is undefined\n  data = data || [];\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var creator = creators[coordSysName];\n  var registeredCoordSys = CoordinateSystem.get(coordSysName);\n  var completeDimOpt = {\n    encodeDef: seriesModel.get('encode'),\n    dimsDef: seriesModel.get('dimensions')\n  }; // FIXME\n\n  var axesInfo = creator && creator(data, seriesModel, ecModel, completeDimOpt);\n  var dimensions = axesInfo && axesInfo.dimensions;\n\n  if (!dimensions) {\n    // Get dimensions from registered coordinate system\n    dimensions = registeredCoordSys && (registeredCoordSys.getDimensionsInfo ? registeredCoordSys.getDimensionsInfo() : registeredCoordSys.dimensions.slice()) || ['x', 'y'];\n    dimensions = completeDimensions(dimensions, data, completeDimOpt);\n  }\n\n  var categoryIndex = axesInfo ? axesInfo.categoryIndex : -1;\n  var list = new List(dimensions, seriesModel);\n  var nameList = createNameList(axesInfo, data);\n  var categories = {};\n  var dimValueGetter = categoryIndex >= 0 && ifNeedCompleteOrdinalData(data) ? function (itemOpt, dimName, dataIndex, dimIndex) {\n    // If any dataItem is like { value: 10 }\n    if (isDataItemOption(itemOpt)) {\n      list.hasItemOption = true;\n    } // Use dataIndex as ordinal value in categoryAxis\n\n\n    return dimIndex === categoryIndex ? dataIndex : converDataValue(getDataItemValue(itemOpt), dimensions[dimIndex]);\n  } : function (itemOpt, dimName, dataIndex, dimIndex) {\n    var value = getDataItemValue(itemOpt);\n    var val = converDataValue(value && value[dimIndex], dimensions[dimIndex]); // If any dataItem is like { value: 10 }\n\n    if (isDataItemOption(itemOpt)) {\n      list.hasItemOption = true;\n    }\n\n    var categoryAxesModels = axesInfo && axesInfo.categoryAxesModels;\n\n    if (categoryAxesModels && categoryAxesModels[dimName]) {\n      // If given value is a category string\n      if (typeof val === 'string') {\n        // Lazy get categories\n        categories[dimName] = categories[dimName] || categoryAxesModels[dimName].getCategories();\n        val = zrUtil.indexOf(categories[dimName], val);\n\n        if (val < 0 && !isNaN(val)) {\n          // In case some one write '1', '2' istead of 1, 2\n          val = +val;\n        }\n      }\n    }\n\n    return val;\n  };\n  list.hasItemOption = false;\n  list.initData(data, nameList, dimValueGetter);\n  return list;\n}\n\nfunction isStackable(axisType) {\n  return axisType !== 'category' && axisType !== 'time';\n}\n\nfunction getDimTypeByAxis(axisType) {\n  return axisType === 'category' ? 'ordinal' : axisType === 'time' ? 'time' : 'float';\n}\n/**\n * Creaters for each coord system.\n */\n\n\nvar creators = {\n  cartesian2d: function (data, seriesModel, ecModel, completeDimOpt) {\n    var axesModels = zrUtil.map(['xAxis', 'yAxis'], function (name) {\n      return ecModel.queryComponents({\n        mainType: name,\n        index: seriesModel.get(name + 'Index'),\n        id: seriesModel.get(name + 'Id')\n      })[0];\n    });\n    var xAxisModel = axesModels[0];\n    var yAxisModel = axesModels[1];\n    var xAxisType = xAxisModel.get('type');\n    var yAxisType = yAxisModel.get('type');\n    var dimensions = [{\n      name: 'x',\n      type: getDimTypeByAxis(xAxisType),\n      stackable: isStackable(xAxisType)\n    }, {\n      name: 'y',\n      // If two category axes\n      type: getDimTypeByAxis(yAxisType),\n      stackable: isStackable(yAxisType)\n    }];\n    var isXAxisCateogry = xAxisType === 'category';\n    var isYAxisCategory = yAxisType === 'category';\n    dimensions = completeDimensions(dimensions, data, completeDimOpt);\n    var categoryAxesModels = {};\n\n    if (isXAxisCateogry) {\n      categoryAxesModels.x = xAxisModel;\n    }\n\n    if (isYAxisCategory) {\n      categoryAxesModels.y = yAxisModel;\n    }\n\n    return {\n      dimensions: dimensions,\n      categoryIndex: isXAxisCateogry ? 0 : isYAxisCategory ? 1 : -1,\n      categoryAxesModels: categoryAxesModels\n    };\n  },\n  singleAxis: function (data, seriesModel, ecModel, completeDimOpt) {\n    var singleAxisModel = ecModel.queryComponents({\n      mainType: 'singleAxis',\n      index: seriesModel.get('singleAxisIndex'),\n      id: seriesModel.get('singleAxisId')\n    })[0];\n    var singleAxisType = singleAxisModel.get('type');\n    var isCategory = singleAxisType === 'category';\n    var dimensions = [{\n      name: 'single',\n      type: getDimTypeByAxis(singleAxisType),\n      stackable: isStackable(singleAxisType)\n    }];\n    dimensions = completeDimensions(dimensions, data, completeDimOpt);\n    var categoryAxesModels = {};\n\n    if (isCategory) {\n      categoryAxesModels.single = singleAxisModel;\n    }\n\n    return {\n      dimensions: dimensions,\n      categoryIndex: isCategory ? 0 : -1,\n      categoryAxesModels: categoryAxesModels\n    };\n  },\n  polar: function (data, seriesModel, ecModel, completeDimOpt) {\n    var polarModel = ecModel.queryComponents({\n      mainType: 'polar',\n      index: seriesModel.get('polarIndex'),\n      id: seriesModel.get('polarId')\n    })[0];\n    var angleAxisModel = polarModel.findAxisModel('angleAxis');\n    var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n    var radiusAxisType = radiusAxisModel.get('type');\n    var angleAxisType = angleAxisModel.get('type');\n    var dimensions = [{\n      name: 'radius',\n      type: getDimTypeByAxis(radiusAxisType),\n      stackable: isStackable(radiusAxisType)\n    }, {\n      name: 'angle',\n      type: getDimTypeByAxis(angleAxisType),\n      stackable: isStackable(angleAxisType)\n    }];\n    var isAngleAxisCateogry = angleAxisType === 'category';\n    var isRadiusAxisCateogry = radiusAxisType === 'category';\n    dimensions = completeDimensions(dimensions, data, completeDimOpt);\n    var categoryAxesModels = {};\n\n    if (isRadiusAxisCateogry) {\n      categoryAxesModels.radius = radiusAxisModel;\n    }\n\n    if (isAngleAxisCateogry) {\n      categoryAxesModels.angle = angleAxisModel;\n    }\n\n    return {\n      dimensions: dimensions,\n      categoryIndex: isAngleAxisCateogry ? 1 : isRadiusAxisCateogry ? 0 : -1,\n      categoryAxesModels: categoryAxesModels\n    };\n  },\n  geo: function (data, seriesModel, ecModel, completeDimOpt) {\n    // TODO Region\n    // \n    return {\n      dimensions: completeDimensions([{\n        name: 'lng'\n      }, {\n        name: 'lat'\n      }], data, completeDimOpt)\n    };\n  }\n};\n\nfunction createNameList(result, data) {\n  var nameList = [];\n  var categoryDim = result && result.dimensions[result.categoryIndex];\n  var categoryAxisModel;\n\n  if (categoryDim) {\n    categoryAxisModel = result.categoryAxesModels[categoryDim.name];\n  }\n\n  if (categoryAxisModel) {\n    // FIXME Two category axis\n    var categories = categoryAxisModel.getCategories();\n\n    if (categories) {\n      var dataLen = data.length; // Ordered data is given explicitly like\n      // [[3, 0.2], [1, 0.3], [2, 0.15]]\n      // or given scatter data,\n      // pick the category\n\n      if (zrUtil.isArray(data[0]) && data[0].length > 1) {\n        nameList = [];\n\n        for (var i = 0; i < dataLen; i++) {\n          nameList[i] = categories[data[i][result.categoryIndex || 0]];\n        }\n      } else {\n        nameList = categories.slice(0);\n      }\n    }\n  }\n\n  return nameList;\n}\n\nvar _default = createListFromArray;\nmodule.exports = _default;","var _model = require(\"../../util/model\");\n\nvar otherDimToDataDim = _model.otherDimToDataDim;\n\n/**\n * @module echarts/chart/helper/Symbol\n */\nfunction findLabelValueDim(data) {\n  var valueDim;\n  var labelDims = otherDimToDataDim(data, 'label');\n\n  if (labelDims.length) {\n    valueDim = labelDims[0];\n  } else {\n    // Get last value dim\n    var dimensions = data.dimensions.slice();\n    var dataType;\n\n    while (dimensions.length && (valueDim = dimensions.pop(), dataType = data.getDimensionInfo(valueDim).type, dataType === 'ordinal' || dataType === 'time')) {} // jshint ignore:line\n\n  }\n\n  return valueDim;\n}\n\nexports.findLabelValueDim = findLabelValueDim;","var List = require(\"../../data/List\");\n\nvar completeDimensions = require(\"../../data/helper/completeDimensions\");\n\nvar WhiskerBoxDraw = require(\"../helper/WhiskerBoxDraw\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar seriesModelMixin = {\n  /**\n   * @private\n   * @type {string}\n   */\n  _baseAxisDim: null,\n\n  /**\n   * @override\n   */\n  getInitialData: function (option, ecModel) {\n    // When both types of xAxis and yAxis are 'value', layout is\n    // needed to be specified by user. Otherwise, layout can be\n    // judged by which axis is category.\n    var categories;\n    var xAxisModel = ecModel.getComponent('xAxis', this.get('xAxisIndex'));\n    var yAxisModel = ecModel.getComponent('yAxis', this.get('yAxisIndex'));\n    var xAxisType = xAxisModel.get('type');\n    var yAxisType = yAxisModel.get('type');\n    var addOrdinal; // FIXME\n    // \n\n    if (xAxisType === 'category') {\n      option.layout = 'horizontal';\n      categories = xAxisModel.getCategories();\n      addOrdinal = true;\n    } else if (yAxisType === 'category') {\n      option.layout = 'vertical';\n      categories = yAxisModel.getCategories();\n      addOrdinal = true;\n    } else {\n      option.layout = option.layout || 'horizontal';\n    }\n\n    var coordDims = ['x', 'y'];\n    var baseAxisDimIndex = option.layout === 'horizontal' ? 0 : 1;\n    var baseAxisDim = this._baseAxisDim = coordDims[baseAxisDimIndex];\n    var otherAxisDim = coordDims[1 - baseAxisDimIndex];\n    var data = option.data;\n    addOrdinal && zrUtil.each(data, function (item, index) {\n      if (item.value && zrUtil.isArray(item.value)) {\n        item.value.unshift(index);\n      } else {\n        zrUtil.isArray(item) && item.unshift(index);\n      }\n    });\n    var defaultValueDimensions = this.defaultValueDimensions;\n    var dimensions = [{\n      name: baseAxisDim,\n      otherDims: {\n        tooltip: false\n      },\n      dimsDef: ['base']\n    }, {\n      name: otherAxisDim,\n      dimsDef: defaultValueDimensions.slice()\n    }];\n    dimensions = completeDimensions(dimensions, data, {\n      encodeDef: this.get('encode'),\n      dimsDef: this.get('dimensions'),\n      // Consider empty data entry.\n      dimCount: defaultValueDimensions.length + 1\n    });\n    var list = new List(dimensions, this);\n    list.initData(data, categories ? categories.slice() : null);\n    return list;\n  },\n\n  /**\n   * If horizontal, base axis is x, otherwise y.\n   * @override\n   */\n  getBaseAxis: function () {\n    var dim = this._baseAxisDim;\n    return this.ecModel.getComponent(dim + 'Axis', this.get(dim + 'AxisIndex')).axis;\n  }\n};\nvar viewMixin = {\n  init: function () {\n    /**\n     * Old data.\n     * @private\n     * @type {module:echarts/chart/helper/WhiskerBoxDraw}\n     */\n    var whiskerBoxDraw = this._whiskerBoxDraw = new WhiskerBoxDraw(this.getStyleUpdater());\n    this.group.add(whiskerBoxDraw.group);\n  },\n  render: function (seriesModel, ecModel, api) {\n    this._whiskerBoxDraw.updateData(seriesModel.getData());\n  },\n  remove: function (ecModel) {\n    this._whiskerBoxDraw.remove();\n  }\n};\nexports.seriesModelMixin = seriesModelMixin;\nexports.viewMixin = viewMixin;","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"./line/LineSeries\");\n\nrequire(\"./line/LineView\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar layoutPoints = require(\"../layout/points\");\n\nvar dataSample = require(\"../processor/dataSample\");\n\nrequire(\"../component/gridSimple\");\n\n// In case developer forget to include grid component\necharts.registerVisual(zrUtil.curry(visualSymbol, 'line', 'circle', 'line'));\necharts.registerLayout(zrUtil.curry(layoutPoints, 'line')); // Down sample after filter\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, zrUtil.curry(dataSample, 'line'));","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar _default = SeriesModel.extend({\n  type: 'series.line',\n  dependencies: ['grid', 'polar'],\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(option.data, this, ecModel);\n  },\n  defaultOption: {\n    zlevel: 0,\n    // \n    z: 2,\n    // \n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // stack: null\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // If clip the overflow value\n    clipOverflow: true,\n    // cursor: null,\n    label: {\n      normal: {\n        position: 'top'\n      }\n    },\n    // itemStyle: {\n    //     normal: {},\n    //     emphasis: {}\n    // },\n    lineStyle: {\n      normal: {\n        width: 2,\n        type: 'solid'\n      }\n    },\n    // areaStyle: {},\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    // \n    symbol: 'emptyCircle',\n    // \n    symbolSize: 4,\n    // \n    symbolRotate: null,\n    //  symbol,  tooltip hover \n    showSymbol: true,\n    // \n    showAllSymbol: false,\n    // \n    connectNulls: false,\n    // 'average', 'max', 'min', 'sum'\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity\n  }\n});\n\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar SymbolDraw = require(\"../helper/SymbolDraw\");\n\nvar SymbolClz = require(\"../helper/Symbol\");\n\nvar lineAnimationDiff = require(\"./lineAnimationDiff\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar _poly = require(\"./poly\");\n\nvar Polyline = _poly.Polyline;\nvar Polygon = _poly.Polygon;\n\nvar ChartView = require(\"../../view/Chart\");\n\n// FIXME step not support polar\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n\n  for (var i = 0; i < points1.length; i++) {\n    var p1 = points1[i];\n    var p2 = points2[i];\n\n    if (p1[0] !== p2[0] || p1[1] !== p2[1]) {\n      return;\n    }\n  }\n\n  return true;\n}\n\nfunction getSmooth(smooth) {\n  return typeof smooth === 'number' ? smooth : smooth ? 0.3 : 0;\n}\n\nfunction getAxisExtentWithGap(axis) {\n  var extent = axis.getGlobalExtent();\n\n  if (axis.onBand) {\n    // Remove extra 1px to avoid line miter in clipped edge\n    var halfBandWidth = axis.getBandWidth() / 2 - 1;\n    var dir = extent[1] > extent[0] ? 1 : -1;\n    extent[0] += dir * halfBandWidth;\n    extent[1] -= dir * halfBandWidth;\n  }\n\n  return extent;\n}\n\nfunction sign(val) {\n  return val >= 0 ? 1 : -1;\n}\n/**\n * @param {module:echarts/coord/cartesian/Cartesian2D|module:echarts/coord/polar/Polar} coordSys\n * @param {module:echarts/data/List} data\n * @param {Array.<Array.<number>>} points\n * @private\n */\n\n\nfunction getStackedOnPoints(coordSys, data) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = 0;\n\n  if (!baseAxis.onZero) {\n    var extent = valueAxis.scale.getExtent();\n\n    if (extent[0] > 0) {\n      // Both positive\n      valueStart = extent[0];\n    } else if (extent[1] < 0) {\n      // Both negative\n      valueStart = extent[1];\n    } // If is one positive, and one negative, onZero shall be true\n\n  }\n\n  var valueDim = valueAxis.dim;\n  var baseDataOffset = valueDim === 'x' || valueDim === 'radius' ? 1 : 0;\n  return data.mapArray([valueDim], function (val, idx) {\n    var stackedOnSameSign;\n    var stackedOn = data.stackedOn; // Find first stacked value with same sign\n\n    while (stackedOn && sign(stackedOn.get(valueDim, idx)) === sign(val)) {\n      stackedOnSameSign = stackedOn;\n      break;\n    }\n\n    var stackedData = [];\n    stackedData[baseDataOffset] = data.get(baseAxis.dim, idx);\n    stackedData[1 - baseDataOffset] = stackedOnSameSign ? stackedOnSameSign.get(valueDim, idx, true) : valueStart;\n    return coordSys.dataToPoint(stackedData);\n  }, true);\n}\n\nfunction createGridClipShape(cartesian, hasAnimation, seriesModel) {\n  var xExtent = getAxisExtentWithGap(cartesian.getAxis('x'));\n  var yExtent = getAxisExtentWithGap(cartesian.getAxis('y'));\n  var isHorizontal = cartesian.getBaseAxis().isHorizontal();\n  var x = Math.min(xExtent[0], xExtent[1]);\n  var y = Math.min(yExtent[0], yExtent[1]);\n  var width = Math.max(xExtent[0], xExtent[1]) - x;\n  var height = Math.max(yExtent[0], yExtent[1]) - y;\n  var lineWidth = seriesModel.get('lineStyle.normal.width') || 2; // Expand clip shape to avoid clipping when line value exceeds axis\n\n  var expandSize = seriesModel.get('clipOverflow') ? lineWidth / 2 : Math.max(width, height);\n\n  if (isHorizontal) {\n    y -= expandSize;\n    height += expandSize * 2;\n  } else {\n    x -= expandSize;\n    width += expandSize * 2;\n  }\n\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape[isHorizontal ? 'width' : 'height'] = 0;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createPolarClipShape(polar, hasAnimation, seriesModel) {\n  var angleAxis = polar.getAngleAxis();\n  var radiusAxis = polar.getRadiusAxis();\n  var radiusExtent = radiusAxis.getExtent();\n  var angleExtent = angleAxis.getExtent();\n  var RADIAN = Math.PI / 180;\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: polar.cx,\n      cy: polar.cy,\n      r0: radiusExtent[0],\n      r: radiusExtent[1],\n      startAngle: -angleExtent[0] * RADIAN,\n      endAngle: -angleExtent[1] * RADIAN,\n      clockwise: angleAxis.inverse\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape.endAngle = -angleExtent[0] * RADIAN;\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: -angleExtent[1] * RADIAN\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createClipShape(coordSys, hasAnimation, seriesModel) {\n  return coordSys.type === 'polar' ? createPolarClipShape(coordSys, hasAnimation, seriesModel) : createGridClipShape(coordSys, hasAnimation, seriesModel);\n}\n\nfunction turnPointsIntoStep(points, coordSys, stepTurnAt) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n\n  for (var i = 0; i < points.length - 1; i++) {\n    var nextPt = points[i + 1];\n    var pt = points[i];\n    stepPoints.push(pt);\n    var stepPt = [];\n\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex]; // default is start\n\n        stepPoints.push(stepPt);\n        break;\n\n      case 'middle':\n        // default is start\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt);\n        stepPoints.push(stepPt2);\n        break;\n\n      default:\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex]; // default is start\n\n        stepPoints.push(stepPt);\n    }\n  } // Last points\n\n\n  points[i] && stepPoints.push(points[i]);\n  return stepPoints;\n}\n\nfunction getVisualGradient(data, coordSys) {\n  var visualMetaList = data.getVisual('visualMeta');\n\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n\n  var visualMeta;\n\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    // Can only be x or y\n    if (visualMetaList[i].dimension < 2) {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n\n  if (!visualMeta || coordSys.type !== 'cartesian2d') {\n    return;\n  } // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n\n\n  var dimension = visualMeta.dimension;\n  var dimName = data.dimensions[dimension];\n  var axis = coordSys.getAxis(dimName); // dataToCoor mapping may not be linear, but must be monotonic.\n\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    return {\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n\n  var tinyExtent = 10; // Arbitrary value: 10px\n\n  var minCoord = colorStops[0].coord - tinyExtent;\n  var maxCoord = colorStops[stopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n\n  zrUtil.each(colorStops, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStops.push({\n    offset: stopLen ? colorStops[stopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStops.unshift({\n    // notice colorStops.length have been changed.\n    offset: stopLen ? colorStops[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  }); // zrUtil.each(colorStops, function (colorStop) {\n  //     // Make sure each offset has rounded px to avoid not sharp edge\n  //     colorStop.offset = (Math.round(colorStop.offset * (end - start) + start) - start) / (end - start);\n  // });\n\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStops, true);\n  gradient[dimName] = minCoord;\n  gradient[dimName + '2'] = maxCoord;\n  return gradient;\n}\n\nvar _default = ChartView.extend({\n  type: 'line',\n  init: function () {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n  },\n  render: function (seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle.normal');\n    var areaStyleModel = seriesModel.getModel('areaStyle.normal');\n    var points = data.mapArray(data.getItemLayout, true);\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = seriesModel.get('animation');\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var stackedOnPoints = getStackedOnPoints(coordSys, data);\n    var showSymbol = seriesModel.get('showSymbol');\n\n    var isSymbolIgnore = showSymbol && !isCoordSysPolar && !seriesModel.get('showAllSymbol') && this._getSymbolIgnoreFunc(data, coordSys); // Remove temporary symbols\n\n\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    }); // Remove previous created symbols if showSymbol changed to false\n\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n\n    group.add(lineGroup); // FIXME step not support polar\n\n    var step = !isCoordSysPolar && seriesModel.get('step'); // Initialization animation or coordinate system changed\n\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, isSymbolIgnore);\n\n      if (step) {\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, coordSys, step);\n        stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n      }\n\n      polyline = this._newPolyline(points, coordSys, hasAnimation);\n\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints, coordSys, hasAnimation);\n      }\n\n      lineGroup.setClipPath(createClipShape(coordSys, true, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints, coordSys, hasAnimation);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      } // Update clipPath\n\n\n      lineGroup.setClipPath(createClipShape(coordSys, false, seriesModel)); // Always update, or it is wrong in the case turning on legend\n      // because points are not changed\n\n      showSymbol && symbolDraw.updateData(data, isSymbolIgnore); // Stop symbol animation and sync with line points\n      // FIXME performance?\n\n      data.eachItemGraphicEl(function (el) {\n        el.stopAnimation(true);\n      }); // In the case data zoom triggerred refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing\n\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._updateAnimation(data, stackedOnPoints, coordSys, api, step);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, coordSys, step);\n            stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n          }\n\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n\n    var visualColor = getVisualGradient(data, coordSys) || data.getVisual('color');\n    polyline.useStyle(zrUtil.defaults( // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    var smooth = seriesModel.get('smooth');\n    smooth = getSmooth(seriesModel.get('smooth'));\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: seriesModel.get('smoothMonotone'),\n      connectNulls: seriesModel.get('connectNulls')\n    });\n\n    if (polygon) {\n      var stackedOn = data.stackedOn;\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel'\n      }));\n\n      if (stackedOn) {\n        var stackedOnSeries = stackedOn.hostModel;\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: seriesModel.get('smoothMonotone'),\n        connectNulls: seriesModel.get('connectNulls')\n      });\n    }\n\n    this._data = data; // Save the coordinate system for transition animation when data changed\n\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n  },\n  dispose: function () {},\n  highlight: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var pt = data.getItemLayout(dataIndex);\n\n        if (!pt) {\n          // Null data\n          return;\n        }\n\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.position = pt;\n        symbol.setZ(seriesModel.get('zlevel'), seriesModel.get('z'));\n        symbol.ignore = isNaN(pt[0]) || isNaN(pt[1]);\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\n\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  },\n  downplay: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  },\n\n  /**\n   * @param {module:zrender/container/Group} group\n   * @param {Array.<Array.<number>>} points\n   * @private\n   */\n  _newPolyline: function (points) {\n    var polyline = this._polyline; // Remove previous created polyline\n\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n\n    polyline = new Polyline({\n      shape: {\n        points: points\n      },\n      silent: true,\n      z2: 10\n    });\n\n    this._lineGroup.add(polyline);\n\n    this._polyline = polyline;\n    return polyline;\n  },\n\n  /**\n   * @param {module:zrender/container/Group} group\n   * @param {Array.<Array.<number>>} stackedOnPoints\n   * @param {Array.<Array.<number>>} points\n   * @private\n   */\n  _newPolygon: function (points, stackedOnPoints) {\n    var polygon = this._polygon; // Remove previous created polygon\n\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n\n    polygon = new Polygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      silent: true\n    });\n\n    this._lineGroup.add(polygon);\n\n    this._polygon = polygon;\n    return polygon;\n  },\n\n  /**\n   * @private\n   */\n  _getSymbolIgnoreFunc: function (data, coordSys) {\n    var categoryAxis = coordSys.getAxesByScale('ordinal')[0]; // `getLabelInterval` is provided by echarts/component/axis\n\n    if (categoryAxis && categoryAxis.isLabelIgnored) {\n      return zrUtil.bind(categoryAxis.isLabelIgnored, categoryAxis);\n    }\n  },\n\n  /**\n   * @private\n   */\n  // FIXME Two value axis\n  _updateAnimation: function (data, stackedOnPoints, coordSys, api, step) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n\n    if (step) {\n      // TODO If stacked series is not step\n      current = turnPointsIntoStep(diff.current, coordSys, step);\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step);\n      next = turnPointsIntoStep(diff.next, coordSys, step);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step);\n    } // `diff.current` is subset of `current` (which should be ensured by\n    // turnPointsIntoStep), so points in `__points` can be updated when\n    // points in `current` are update during animation.\n\n\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    graphic.updateProps(polyline, {\n      shape: {\n        points: next\n      }\n    }, seriesModel);\n\n    if (polygon) {\n      polygon.setShape({\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      graphic.updateProps(polygon, {\n        shape: {\n          points: next,\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel);\n    }\n\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n\n          });\n        }\n      }\n    }\n\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          el.attr('position', polyline.shape.__points[updatedDataInfo[i].ptIdx]);\n        }\n      });\n    }\n  },\n  remove: function (ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n\n    this._lineGroup.removeAll();\n\n    this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\n\n\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._data = null;\n  }\n});\n\nmodule.exports = _default;","// var arrayDiff = require('zrender/src/core/arrayDiff');\n// 'zrender/src/core/arrayDiff' has been used before, but it did\n// not do well in performance when roam with fixed dataZoom window.\nfunction sign(val) {\n  return val >= 0 ? 1 : -1;\n}\n\nfunction getStackedOnPoint(coordSys, data, idx) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = baseAxis.onZero ? 0 : valueAxis.scale.getExtent()[0];\n  var valueDim = valueAxis.dim;\n  var baseDataOffset = valueDim === 'x' || valueDim === 'radius' ? 1 : 0;\n  var stackedOnSameSign;\n  var stackedOn = data.stackedOn;\n  var val = data.get(valueDim, idx); // Find first stacked value with same sign\n\n  while (stackedOn && sign(stackedOn.get(valueDim, idx)) === sign(val)) {\n    stackedOnSameSign = stackedOn;\n    break;\n  }\n\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(baseAxis.dim, idx);\n  stackedData[1 - baseDataOffset] = stackedOnSameSign ? stackedOnSameSign.get(valueDim, idx, true) : valueStart;\n  return coordSys.dataToPoint(stackedData);\n} // function convertToIntId(newIdList, oldIdList) {\n//     // Generate int id instead of string id.\n//     // Compare string maybe slow in score function of arrDiff\n//     // Assume id in idList are all unique\n//     var idIndicesMap = {};\n//     var idx = 0;\n//     for (var i = 0; i < newIdList.length; i++) {\n//         idIndicesMap[newIdList[i]] = idx;\n//         newIdList[i] = idx++;\n//     }\n//     for (var i = 0; i < oldIdList.length; i++) {\n//         var oldId = oldIdList[i];\n//         // Same with newIdList\n//         if (idIndicesMap[oldId]) {\n//             oldIdList[i] = idIndicesMap[oldId];\n//         }\n//         else {\n//             oldIdList[i] = idx++;\n//         }\n//     }\n// }\n\n\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\n\nfunction _default(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys) {\n  var diff = diffData(oldData, newData); // var newIdList = newData.mapArray(newData.getId);\n  // var oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n\n  var currPoints = [];\n  var nextPoints = []; // Points for stacking base line\n\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var dims = newCoordSys.dimensions;\n\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true; // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n\n    switch (diffItem.cmd) {\n      case '=':\n        var currentPt = oldData.getItemLayout(diffItem.idx);\n        var nextPt = newData.getItemLayout(diffItem.idx1); // If previous data is NaN, use next point directly\n\n        if (isNaN(currentPt[0]) || isNaN(currentPt[1])) {\n          currentPt = nextPt.slice();\n        }\n\n        currPoints.push(currentPt);\n        nextPoints.push(nextPt);\n        currStackedPoints.push(oldStackedOnPoints[diffItem.idx]);\n        nextStackedPoints.push(newStackedOnPoints[diffItem.idx1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n\n      case '+':\n        var idx = diffItem.idx;\n        currPoints.push(oldCoordSys.dataToPoint([newData.get(dims[0], idx, true), newData.get(dims[1], idx, true)]));\n        nextPoints.push(newData.getItemLayout(idx).slice());\n        currStackedPoints.push(getStackedOnPoint(oldCoordSys, newData, idx));\n        nextStackedPoints.push(newStackedOnPoints[idx]);\n        rawIndices.push(newData.getRawIndex(idx));\n        break;\n\n      case '-':\n        var idx = diffItem.idx;\n        var rawIndex = oldData.getRawIndex(idx); // Data is replaced. In the case of dynamic data queue\n        // FIXME FIXME FIXME\n\n        if (rawIndex !== idx) {\n          currPoints.push(oldData.getItemLayout(idx));\n          nextPoints.push(newCoordSys.dataToPoint([oldData.get(dims[0], idx, true), oldData.get(dims[1], idx, true)]));\n          currStackedPoints.push(oldStackedOnPoints[idx]);\n          nextStackedPoints.push(getStackedOnPoint(newCoordSys, oldData, idx));\n          rawIndices.push(rawIndex);\n        } else {\n          pointAdded = false;\n        }\n\n    } // Original indices\n\n\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  } // Diff result may be crossed if all items are changed\n  // Sort by data index\n\n\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var sortedCurrPoints = [];\n  var sortedNextPoints = [];\n  var sortedCurrStackedPoints = [];\n  var sortedNextStackedPoints = [];\n  var sortedStatus = [];\n\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    sortedCurrPoints[i] = currPoints[idx];\n    sortedNextPoints[i] = nextPoints[idx];\n    sortedCurrStackedPoints[i] = currStackedPoints[idx];\n    sortedNextStackedPoints[i] = nextStackedPoints[idx];\n    sortedStatus[i] = status[idx];\n  }\n\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}\n\nmodule.exports = _default;","var Path = require(\"zrender/lib/graphic/Path\");\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\nvar fixClipWithShadow = require(\"zrender/lib/graphic/helper/fixClipWithShadow\");\n\n// Poly path support NaN point\nvar vec2Min = vec2.min;\nvar vec2Max = vec2.max;\nvar scaleAndAdd = vec2.scaleAndAdd;\nvar v2Copy = vec2.copy; // Temporary variable\n\nvar v = [];\nvar cp0 = [];\nvar cp1 = [];\n\nfunction isPointNull(p) {\n  return isNaN(p[0]) || isNaN(p[1]);\n}\n\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  var prevIdx = 0;\n  var idx = start;\n\n  for (var k = 0; k < segLen; k++) {\n    var p = points[idx];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(p)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\n      v2Copy(cp0, p);\n    } else {\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextP = points[nextIdx];\n\n        if (connectNulls) {\n          // Find next point not null\n          while (nextP && isPointNull(points[nextIdx])) {\n            nextIdx += dir;\n            nextP = points[nextIdx];\n          }\n        }\n\n        var ratioNextSeg = 0.5;\n        var prevP = points[prevIdx];\n        var nextP = points[nextIdx]; // Last point\n\n        if (!nextP || isPointNull(nextP)) {\n          v2Copy(cp1, p);\n        } else {\n          // If next data is null in not connect case\n          if (isPointNull(nextP) && !connectNulls) {\n            nextP = p;\n          }\n\n          vec2.sub(v, nextP, prevP);\n          var lenPrevSeg;\n          var lenNextSeg;\n\n          if (smoothMonotone === 'x' || smoothMonotone === 'y') {\n            var dim = smoothMonotone === 'x' ? 0 : 1;\n            lenPrevSeg = Math.abs(p[dim] - prevP[dim]);\n            lenNextSeg = Math.abs(p[dim] - nextP[dim]);\n          } else {\n            lenPrevSeg = vec2.dist(p, prevP);\n            lenNextSeg = vec2.dist(p, nextP);\n          } // Use ratio of seg length\n\n\n          ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n          scaleAndAdd(cp1, p, v, -smooth * (1 - ratioNextSeg));\n        } // Smooth constraint\n\n\n        vec2Min(cp0, cp0, smoothMax);\n        vec2Max(cp0, cp0, smoothMin);\n        vec2Min(cp1, cp1, smoothMax);\n        vec2Max(cp1, cp1, smoothMin);\n        ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]); // cp0 of next segment\n\n        scaleAndAdd(cp0, p, v, smooth * ratioNextSeg);\n      } else {\n        ctx.lineTo(p[0], p[1]);\n      }\n    }\n\n    prevIdx = idx;\n    idx += dir;\n  }\n\n  return k;\n}\n\nfunction getBoundingBox(points, smoothConstraint) {\n  var ptMin = [Infinity, Infinity];\n  var ptMax = [-Infinity, -Infinity];\n\n  if (smoothConstraint) {\n    for (var i = 0; i < points.length; i++) {\n      var pt = points[i];\n\n      if (pt[0] < ptMin[0]) {\n        ptMin[0] = pt[0];\n      }\n\n      if (pt[1] < ptMin[1]) {\n        ptMin[1] = pt[1];\n      }\n\n      if (pt[0] > ptMax[0]) {\n        ptMax[0] = pt[0];\n      }\n\n      if (pt[1] > ptMax[1]) {\n        ptMax[1] = pt[1];\n      }\n    }\n  }\n\n  return {\n    min: smoothConstraint ? ptMin : ptMax,\n    max: smoothConstraint ? ptMax : ptMin\n  };\n}\n\nvar Polyline = Path.extend({\n  type: 'ec-polyline',\n  shape: {\n    points: [],\n    smooth: 0,\n    smoothConstraint: true,\n    smoothMonotone: null,\n    connectNulls: false\n  },\n  style: {\n    fill: null,\n    stroke: '#000'\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function (ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length;\n    var result = getBoundingBox(points, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, result.min, result.max, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  }\n});\nvar Polygon = Path.extend({\n  type: 'ec-polygon',\n  shape: {\n    points: [],\n    // Offset between stacked base points and points\n    stackedOnPoints: [],\n    smooth: 0,\n    stackedOnSmooth: 0,\n    smoothConstraint: true,\n    smoothMonotone: null,\n    connectNulls: false\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function (ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length;\n    var smoothMonotone = shape.smoothMonotone;\n    var bbox = getBoundingBox(points, shape.smoothConstraint);\n    var stackedOnBBox = getBoundingBox(stackedOnPoints, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, bbox.min, bbox.max, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, stackedOnBBox.min, stackedOnBBox.max, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  }\n});\nexports.Polyline = Polyline;\nexports.Polygon = Polygon;","var echarts = require(\"../echarts\");\n\nrequire(\"./lines/LinesSeries\");\n\nrequire(\"./lines/LinesView\");\n\nvar linesLayout = require(\"./lines/linesLayout\");\n\nvar linesVisual = require(\"./lines/linesVisual\");\n\necharts.registerLayout(linesLayout);\necharts.registerVisual(linesVisual);","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar List = require(\"../../data/List\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _format = require(\"../../util/format\");\n\nvar encodeHTML = _format.encodeHTML;\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\n// Convert [ [{coord: []}, {coord: []}] ]\n// to [ { coords: [[]] } ]\nfunction preprocessOption(seriesOpt) {\n  var data = seriesOpt.data;\n\n  if (data && data[0] && data[0][0] && data[0][0].coord) {\n    seriesOpt.data = zrUtil.map(data, function (itemOpt) {\n      var coords = [itemOpt[0].coord, itemOpt[1].coord];\n      var target = {\n        coords: coords\n      };\n\n      if (itemOpt[0].name) {\n        target.fromName = itemOpt[0].name;\n      }\n\n      if (itemOpt[1].name) {\n        target.toName = itemOpt[1].name;\n      }\n\n      return zrUtil.mergeAll([target, itemOpt[0], itemOpt[1]]);\n    });\n  }\n}\n\nvar LinesSeries = SeriesModel.extend({\n  type: 'series.lines',\n  dependencies: ['grid', 'polar'],\n  visualColorAccessPath: 'lineStyle.normal.color',\n  init: function (option) {\n    // Not using preprocessor because mergeOption may not have series.type\n    preprocessOption(option);\n    LinesSeries.superApply(this, 'init', arguments);\n  },\n  mergeOption: function (option) {\n    preprocessOption(option);\n    LinesSeries.superApply(this, 'mergeOption', arguments);\n  },\n  getInitialData: function (option, ecModel) {\n    var lineData = new List(['value'], this);\n    lineData.hasItemOption = false;\n    lineData.initData(option.data, [], function (dataItem, dimName, dataIndex, dimIndex) {\n      // dataItem is simply coords\n      if (dataItem instanceof Array) {\n        return NaN;\n      } else {\n        lineData.hasItemOption = true;\n        var value = dataItem.value;\n\n        if (value != null) {\n          return value instanceof Array ? value[dimIndex] : value;\n        }\n      }\n    });\n    return lineData;\n  },\n  formatTooltip: function (dataIndex) {\n    var data = this.getData();\n    var itemModel = data.getItemModel(dataIndex);\n    var name = itemModel.get('name');\n\n    if (name) {\n      return name;\n    }\n\n    var fromName = itemModel.get('fromName');\n    var toName = itemModel.get('toName');\n    var html = [];\n    fromName != null && html.push(fromName);\n    toName != null && html.push(toName);\n    return encodeHTML(html.join(' > '));\n  },\n  defaultOption: {\n    coordinateSystem: 'geo',\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // Cartesian coordinate system\n    xAxisIndex: 0,\n    yAxisIndex: 0,\n    symbol: ['none', 'none'],\n    symbolSize: [10, 10],\n    // Geo coordinate system\n    geoIndex: 0,\n    effect: {\n      show: false,\n      period: 4,\n      // Animation delay. support callback\n      // delay: 0,\n      // If move with constant speed px/sec\n      // period will be ignored if this property is > 0,\n      constantSpeed: 0,\n      symbol: 'circle',\n      symbolSize: 3,\n      loop: true,\n      // Length of trail, 0 - 1\n      trailLength: 0.2 // Same with lineStyle.normal.color\n      // color\n\n    },\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    // If lines are polyline\n    // polyline not support curveness, label, animation\n    polyline: false,\n    label: {\n      normal: {\n        show: false,\n        position: 'end' // distance: 5,\n        // formatter: Tooltip.formatter\n\n      }\n    },\n    lineStyle: {\n      normal: {\n        opacity: 0.5\n      }\n    }\n  }\n});\nvar _default = LinesSeries;\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar LineDraw = require(\"../helper/LineDraw\");\n\nvar EffectLine = require(\"../helper/EffectLine\");\n\nvar Line = require(\"../helper/Line\");\n\nvar Polyline = require(\"../helper/Polyline\");\n\nvar EffectPolyline = require(\"../helper/EffectPolyline\");\n\nvar LargeLineDraw = require(\"../helper/LargeLineDraw\");\n\nvar _default = echarts.extendChartView({\n  type: 'lines',\n  init: function () {},\n  render: function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var lineDraw = this._lineDraw;\n    var hasEffect = seriesModel.get('effect.show');\n    var isPolyline = seriesModel.get('polyline');\n    var isLarge = seriesModel.get('large') && data.count() >= seriesModel.get('largeThreshold');\n\n    if (hasEffect !== this._hasEffet || isPolyline !== this._isPolyline || isLarge !== this._isLarge) {\n      if (lineDraw) {\n        lineDraw.remove();\n      }\n\n      lineDraw = this._lineDraw = isLarge ? new LargeLineDraw() : new LineDraw(isPolyline ? hasEffect ? EffectPolyline : Polyline : hasEffect ? EffectLine : Line);\n      this._hasEffet = hasEffect;\n      this._isPolyline = isPolyline;\n      this._isLarge = isLarge;\n    }\n\n    var zlevel = seriesModel.get('zlevel');\n    var trailLength = seriesModel.get('effect.trailLength');\n    var zr = api.getZr(); // Avoid the drag cause ghost shadow\n    // FIXME Better way ?\n    // SVG doesn't support\n\n    var isSvg = zr.painter.getType() === 'svg';\n\n    if (!isSvg) {\n      zr.painter.getLayer(zlevel).clear(true);\n    } // Config layer with motion blur\n\n\n    if (this._lastZlevel != null && !isSvg) {\n      zr.configLayer(this._lastZlevel, {\n        motionBlur: false\n      });\n    }\n\n    if (hasEffect && trailLength) {\n      if (!isSvg) {\n        zr.configLayer(zlevel, {\n          motionBlur: true,\n          lastFrameAlpha: Math.max(Math.min(trailLength / 10 + 0.9, 1), 0)\n        });\n      }\n    }\n\n    this.group.add(lineDraw.group);\n    lineDraw.updateData(data);\n    this._lastZlevel = zlevel;\n  },\n  updateLayout: function (seriesModel, ecModel, api) {\n    this._lineDraw.updateLayout(seriesModel); // Not use motion when dragging or zooming\n\n\n    var zr = api.getZr();\n    var isSvg = zr.painter.getType() === 'svg';\n\n    if (!isSvg) {\n      zr.painter.getLayer(this._lastZlevel).clear(true);\n    }\n  },\n  remove: function (ecModel, api) {\n    this._lineDraw && this._lineDraw.remove(api, true); // Clear motion when lineDraw is removed\n\n    var zr = api.getZr();\n    var isSvg = zr.painter.getType() === 'svg';\n\n    if (!isSvg) {\n      zr.painter.getLayer(this._lastZlevel).clear(true);\n    }\n  },\n  dispose: function () {}\n});\n\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nfunction _default(ecModel) {\n  ecModel.eachSeriesByType('lines', function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var lineData = seriesModel.getData(); // FIXME Use data dimensions ?\n\n    lineData.each(function (idx) {\n      var itemModel = lineData.getItemModel(idx);\n      var coords = itemModel.option instanceof Array ? itemModel.option : itemModel.get('coords');\n      var pts = [];\n\n      if (seriesModel.get('polyline')) {\n        for (var i = 0; i < coords.length; i++) {\n          pts.push(coordSys.dataToPoint(coords[i]));\n        }\n      } else {\n        pts[0] = coordSys.dataToPoint(coords[0]);\n        pts[1] = coordSys.dataToPoint(coords[1]);\n        var curveness = itemModel.get('lineStyle.normal.curveness');\n\n        if (+curveness) {\n          pts[2] = [(pts[0][0] + pts[1][0]) / 2 - (pts[0][1] - pts[1][1]) * curveness, (pts[0][1] + pts[1][1]) / 2 - (pts[1][0] - pts[0][0]) * curveness];\n        }\n      }\n\n      lineData.setItemLayout(idx, pts);\n    });\n  });\n}\n\nmodule.exports = _default;","function normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n\n  return a;\n}\n\nfunction _default(ecModel) {\n  ecModel.eachSeriesByType('lines', function (seriesModel) {\n    var data = seriesModel.getData();\n    var symbolType = normalize(seriesModel.get('symbol'));\n    var symbolSize = normalize(seriesModel.get('symbolSize'));\n    var opacityQuery = 'lineStyle.normal.opacity'.split('.');\n    data.setVisual('fromSymbol', symbolType && symbolType[0]);\n    data.setVisual('toSymbol', symbolType && symbolType[1]);\n    data.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    data.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    data.setVisual('opacity', seriesModel.get(opacityQuery));\n    data.each(function (idx) {\n      var itemModel = data.getItemModel(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true));\n      var opacity = itemModel.get(opacityQuery);\n      symbolType[0] && data.setItemVisual(idx, 'fromSymbol', symbolType[0]);\n      symbolType[1] && data.setItemVisual(idx, 'toSymbol', symbolType[1]);\n      symbolSize[0] && data.setItemVisual(idx, 'fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && data.setItemVisual(idx, 'toSymbolSize', symbolSize[1]);\n      data.setItemVisual(idx, 'opacity', opacity);\n    });\n  });\n}\n\nmodule.exports = _default;","var echarts = require(\"../echarts\");\n\nrequire(\"./map/MapSeries\");\n\nrequire(\"./map/MapView\");\n\nrequire(\"../action/geoRoam\");\n\nrequire(\"../coord/geo/geoCreator\");\n\nvar mapSymbolLayout = require(\"./map/mapSymbolLayout\");\n\nvar mapVisual = require(\"./map/mapVisual\");\n\nvar mapDataStatistic = require(\"./map/mapDataStatistic\");\n\nvar backwardCompat = require(\"./map/backwardCompat\");\n\nvar createDataSelectAction = require(\"../action/createDataSelectAction\");\n\necharts.registerLayout(mapSymbolLayout);\necharts.registerVisual(mapVisual);\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, mapDataStatistic);\necharts.registerPreprocessor(backwardCompat);\ncreateDataSelectAction('map', [{\n  type: 'mapToggleSelect',\n  event: 'mapselectchanged',\n  method: 'toggleSelected'\n}, {\n  type: 'mapSelect',\n  event: 'mapselected',\n  method: 'select'\n}, {\n  type: 'mapUnSelect',\n  event: 'mapunselected',\n  method: 'unSelect'\n}]);","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar List = require(\"../../data/List\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar completeDimensions = require(\"../../data/helper/completeDimensions\");\n\nvar _format = require(\"../../util/format\");\n\nvar encodeHTML = _format.encodeHTML;\nvar addCommas = _format.addCommas;\n\nvar dataSelectableMixin = require(\"../../component/helper/selectableMixin\");\n\nvar geoCreator = require(\"../../coord/geo/geoCreator\");\n\nvar MapSeries = SeriesModel.extend({\n  type: 'series.map',\n  dependencies: ['geo'],\n  layoutMode: 'box',\n\n  /**\n   * Only first map series of same mapType will drawMap\n   * @type {boolean}\n   */\n  needsDrawMap: false,\n\n  /**\n   * Group of all map series with same mapType\n   * @type {boolean}\n   */\n  seriesGroup: [],\n  init: function (option) {\n    this._fillOption(option, this.getMapType()); // this.option = option;\n\n\n    MapSeries.superApply(this, 'init', arguments);\n    this.updateSelectedMap(option.data);\n  },\n  getInitialData: function (option) {\n    var dimensions = completeDimensions(['value'], option.data || []);\n    var list = new List(dimensions, this);\n    list.initData(option.data);\n    return list;\n  },\n  mergeOption: function (newOption) {\n    this._fillOption(newOption, this.getMapType());\n\n    MapSeries.superApply(this, 'mergeOption', arguments);\n    this.updateSelectedMap(this.option.data);\n  },\n\n  /**\n   * If no host geo model, return null, which means using a\n   * inner exclusive geo model.\n   */\n  getHostGeoModel: function () {\n    var geoIndex = this.option.geoIndex;\n    return geoIndex != null ? this.dependentModels.geo[geoIndex] : null;\n  },\n  getMapType: function () {\n    return (this.getHostGeoModel() || this).option.map;\n  },\n  _fillOption: function (option, mapName) {\n    // Shallow clone\n    // option = zrUtil.extend({}, option);\n    option.data = geoCreator.getFilledRegions(option.data, mapName, option.nameMap); // return option;\n  },\n  getRawValue: function (dataIndex) {\n    // Use value stored in data instead because it is calculated from multiple series\n    // FIXME Provide all value of multiple series ?\n    return this.getData().get('value', dataIndex);\n  },\n\n  /**\n   * Get model of region\n   * @param  {string} name\n   * @return {module:echarts/model/Model}\n   */\n  getRegionModel: function (regionName) {\n    var data = this.getData();\n    return data.getItemModel(data.indexOfName(regionName));\n  },\n\n  /**\n   * Map tooltip formatter\n   *\n   * @param {number} dataIndex\n   */\n  formatTooltip: function (dataIndex) {\n    // FIXME orignalData and data is a bit confusing\n    var data = this.getData();\n    var formattedValue = addCommas(this.getRawValue(dataIndex));\n    var name = data.getName(dataIndex);\n    var seriesGroup = this.seriesGroup;\n    var seriesNames = [];\n\n    for (var i = 0; i < seriesGroup.length; i++) {\n      var otherIndex = seriesGroup[i].originalData.indexOfName(name);\n\n      if (!isNaN(seriesGroup[i].originalData.get('value', otherIndex))) {\n        seriesNames.push(encodeHTML(seriesGroup[i].name));\n      }\n    }\n\n    return seriesNames.join(', ') + '<br />' + encodeHTML(name + ' : ' + formattedValue);\n  },\n\n  /**\n   * @implement\n   */\n  getTooltipPosition: function (dataIndex) {\n    if (dataIndex != null) {\n      var name = this.getData().getName(dataIndex);\n      var geo = this.coordinateSystem;\n      var region = geo.getRegion(name);\n      return region && geo.dataToPoint(region.center);\n    }\n  },\n  setZoom: function (zoom) {\n    this.option.zoom = zoom;\n  },\n  setCenter: function (center) {\n    this.option.center = center;\n  },\n  defaultOption: {\n    // \n    zlevel: 0,\n    // \n    z: 2,\n    coordinateSystem: 'geo',\n    // map should be explicitly specified since ec3.\n    map: '',\n    // If `geoIndex` is not specified, a exclusive geo will be\n    // created. Otherwise use the specified geo component, and\n    // `map` and `mapType` are ignored.\n    // geoIndex: 0,\n    // 'center' | 'left' | 'right' | 'x%' | {number}\n    left: 'center',\n    // 'center' | 'top' | 'bottom' | 'x%' | {number}\n    top: 'center',\n    // right\n    // bottom\n    // width:\n    // height\n    // Aspect is width / height. Inited to be geoJson bbox aspect\n    // This parameter is used for scale this aspect\n    aspectScale: 0.75,\n    ///// Layout with center and size\n    // If you wan't to put map in a fixed size box with right aspect ratio\n    // This two properties may more conveninet\n    // layoutCenter: [50%, 50%]\n    // layoutSize: 100\n    // \n    // 'sum' | 'average' | 'max' | 'min'\n    // mapValueCalculation: 'sum',\n    // \n    // mapValuePrecision: 0,\n    // \n    showLegendSymbol: true,\n    // singlemultiple\n    // selectedMode: false,\n    dataRangeHoverLink: true,\n    // \n    // roam: false,\n    // Define left-top, right-bottom coords to control view\n    // For example, [ [180, 90], [-180, -90] ],\n    // higher priority than center and zoom\n    boundingCoords: null,\n    // Default on center of map\n    center: null,\n    zoom: 1,\n    scaleLimit: null,\n    label: {\n      normal: {\n        show: false,\n        color: '#000'\n      },\n      emphasis: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      }\n    },\n    // scaleLimit: null,\n    itemStyle: {\n      normal: {\n        // color: ,\n        borderWidth: 0.5,\n        borderColor: '#444',\n        areaColor: '#eee'\n      },\n      // \n      emphasis: {\n        areaColor: 'rgba(255,215,0,0.8)'\n      }\n    }\n  }\n});\nzrUtil.mixin(MapSeries, dataSelectableMixin);\nvar _default = MapSeries;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar MapDraw = require(\"../../component/helper/MapDraw\");\n\nvar _default = echarts.extendChartView({\n  type: 'map',\n  render: function (mapModel, ecModel, api, payload) {\n    // Not render if it is an toggleSelect action from self\n    if (payload && payload.type === 'mapToggleSelect' && payload.from === this.uid) {\n      return;\n    }\n\n    var group = this.group;\n    group.removeAll();\n\n    if (mapModel.getHostGeoModel()) {\n      return;\n    } // Not update map if it is an roam action from self\n\n\n    if (!(payload && payload.type === 'geoRoam' && payload.componentType === 'series' && payload.seriesId === mapModel.id)) {\n      if (mapModel.needsDrawMap) {\n        var mapDraw = this._mapDraw || new MapDraw(api, true);\n        group.add(mapDraw.group);\n        mapDraw.draw(mapModel, ecModel, api, this, payload);\n        this._mapDraw = mapDraw;\n      } else {\n        // Remove drawed map\n        this._mapDraw && this._mapDraw.remove();\n        this._mapDraw = null;\n      }\n    } else {\n      var mapDraw = this._mapDraw;\n      mapDraw && group.add(mapDraw.group);\n    }\n\n    mapModel.get('showLegendSymbol') && ecModel.getComponent('legend') && this._renderSymbols(mapModel, ecModel, api);\n  },\n  remove: function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n    this.group.removeAll();\n  },\n  dispose: function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n  },\n  _renderSymbols: function (mapModel, ecModel, api) {\n    var originalData = mapModel.originalData;\n    var group = this.group;\n    originalData.each('value', function (value, idx) {\n      if (isNaN(value)) {\n        return;\n      }\n\n      var layout = originalData.getItemLayout(idx);\n\n      if (!layout || !layout.point) {\n        // Not exists in map\n        return;\n      }\n\n      var point = layout.point;\n      var offset = layout.offset;\n      var circle = new graphic.Circle({\n        style: {\n          // Because the special of map draw.\n          // Which needs statistic of multiple series and draw on one map.\n          // And each series also need a symbol with legend color\n          //\n          // Layout and visual are put one the different data\n          fill: mapModel.getData().getVisual('color')\n        },\n        shape: {\n          cx: point[0] + offset * 9,\n          cy: point[1],\n          r: 3\n        },\n        silent: true,\n        // Do not overlap the first series, on which labels are displayed.\n        z2: !offset ? 10 : 8\n      }); // First data on the same region\n\n      if (!offset) {\n        var fullData = mapModel.mainSeries.getData();\n        var name = originalData.getName(idx);\n        var fullIndex = fullData.indexOfName(name);\n        var itemModel = originalData.getItemModel(idx);\n        var labelModel = itemModel.getModel('label.normal');\n        var hoverLabelModel = itemModel.getModel('label.emphasis');\n        var polygonGroups = fullData.getItemGraphicEl(fullIndex);\n        var normalText = zrUtil.retrieve2(mapModel.getFormattedLabel(idx, 'normal'), name);\n        var emphasisText = zrUtil.retrieve2(mapModel.getFormattedLabel(idx, 'emphasis'), normalText);\n\n        var onEmphasis = function () {\n          var hoverStyle = graphic.setTextStyle({}, hoverLabelModel, {\n            text: hoverLabelModel.get('show') ? emphasisText : null\n          }, {\n            isRectText: true,\n            useInsideStyle: false\n          }, true);\n          circle.style.extendFrom(hoverStyle); // Make label upper than others if overlaps.\n\n          circle.__mapOriginalZ2 = circle.z2;\n          circle.z2 += 1;\n        };\n\n        var onNormal = function () {\n          graphic.setTextStyle(circle.style, labelModel, {\n            text: labelModel.get('show') ? normalText : null,\n            textPosition: labelModel.getShallow('position') || 'bottom'\n          }, {\n            isRectText: true,\n            useInsideStyle: false\n          });\n\n          if (circle.__mapOriginalZ2 != null) {\n            circle.z2 = circle.__mapOriginalZ2;\n            circle.__mapOriginalZ2 = null;\n          }\n        };\n\n        polygonGroups.on('mouseover', onEmphasis).on('mouseout', onNormal).on('emphasis', onEmphasis).on('normal', onNormal);\n        onNormal();\n      }\n\n      group.add(circle);\n    });\n  }\n});\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nfunction _default(option) {\n  // Save geoCoord\n  var mapSeries = [];\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'map') {\n      mapSeries.push(seriesOpt);\n      seriesOpt.map = seriesOpt.map || seriesOpt.mapType; // Put x, y, width, height, x2, y2 in the top level\n\n      zrUtil.defaults(seriesOpt, seriesOpt.mapLocation);\n    }\n  });\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\n// FIXME \n\n/**\n * @param {Array.<module:echarts/data/List>} datas\n * @param {string} statisticType 'average' 'sum'\n * @inner\n */\nfunction dataStatistics(datas, statisticType) {\n  var dataNameMap = {};\n  var dims = ['value'];\n  zrUtil.each(datas, function (data) {\n    data.each(dims, function (value, idx) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var mapKey = 'ec-' + data.getName(idx);\n      dataNameMap[mapKey] = dataNameMap[mapKey] || [];\n\n      if (!isNaN(value)) {\n        dataNameMap[mapKey].push(value);\n      }\n    });\n  });\n  return datas[0].map(dims, function (value, idx) {\n    var mapKey = 'ec-' + datas[0].getName(idx);\n    var sum = 0;\n    var min = Infinity;\n    var max = -Infinity;\n    var len = dataNameMap[mapKey].length;\n\n    for (var i = 0; i < len; i++) {\n      min = Math.min(min, dataNameMap[mapKey][i]);\n      max = Math.max(max, dataNameMap[mapKey][i]);\n      sum += dataNameMap[mapKey][i];\n    }\n\n    var result;\n\n    if (statisticType === 'min') {\n      result = min;\n    } else if (statisticType === 'max') {\n      result = max;\n    } else if (statisticType === 'average') {\n      result = sum / len;\n    } else {\n      result = sum;\n    }\n\n    return len === 0 ? NaN : result;\n  });\n}\n\nfunction _default(ecModel) {\n  var seriesGroups = {};\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var hostGeoModel = seriesModel.getHostGeoModel();\n    var key = hostGeoModel ? 'o' + hostGeoModel.id : 'i' + seriesModel.getMapType();\n    (seriesGroups[key] = seriesGroups[key] || []).push(seriesModel);\n  });\n  zrUtil.each(seriesGroups, function (seriesList, key) {\n    var data = dataStatistics(zrUtil.map(seriesList, function (seriesModel) {\n      return seriesModel.getData();\n    }), seriesList[0].get('mapValueCalculation'));\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].originalData = seriesList[i].getData();\n    } // FIXME Put where?\n\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].seriesGroup = seriesList;\n      seriesList[i].needsDrawMap = i === 0 && !seriesList[i].getHostGeoModel();\n      seriesList[i].setData(data.cloneShallow());\n      seriesList[i].mainSeries = seriesList[0];\n    }\n  });\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nfunction _default(ecModel) {\n  var processedMapType = {};\n  ecModel.eachSeriesByType('map', function (mapSeries) {\n    var mapType = mapSeries.getMapType();\n\n    if (mapSeries.getHostGeoModel() || processedMapType[mapType]) {\n      return;\n    }\n\n    var mapSymbolOffsets = {};\n    zrUtil.each(mapSeries.seriesGroup, function (subMapSeries) {\n      var geo = subMapSeries.coordinateSystem;\n      var data = subMapSeries.originalData;\n\n      if (subMapSeries.get('showLegendSymbol') && ecModel.getComponent('legend')) {\n        data.each('value', function (value, idx) {\n          var name = data.getName(idx);\n          var region = geo.getRegion(name); // If input series.data is [11, 22, '-'/null/undefined, 44],\n          // it will be filled with NaN: [11, 22, NaN, 44] and NaN will\n          // not be drawn. So here must validate if value is NaN.\n\n          if (!region || isNaN(value)) {\n            return;\n          }\n\n          var offset = mapSymbolOffsets[name] || 0;\n          var point = geo.dataToPoint(region.center);\n          mapSymbolOffsets[name] = offset + 1;\n          data.setItemLayout(idx, {\n            point: point,\n            offset: offset\n          });\n        });\n      }\n    }); // Show label of those region not has legendSymbol(which is offset 0)\n\n    var data = mapSeries.getData();\n    data.each(function (idx) {\n      var name = data.getName(idx);\n      var layout = data.getItemLayout(idx) || {};\n      layout.showLabel = !mapSymbolOffsets[name];\n      data.setItemLayout(idx, layout);\n    });\n    processedMapType[mapType] = true;\n  });\n}\n\nmodule.exports = _default;","function _default(ecModel) {\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var colorList = seriesModel.get('color');\n    var itemStyleModel = seriesModel.getModel('itemStyle.normal');\n    var areaColor = itemStyleModel.get('areaColor');\n    var color = itemStyleModel.get('color') || colorList[seriesModel.seriesIndex % colorList.length];\n    seriesModel.getData().setVisual({\n      'areaColor': areaColor,\n      'color': color\n    });\n  });\n}\n\nmodule.exports = _default;","var echarts = require(\"../echarts\");\n\nrequire(\"../component/parallel\");\n\nrequire(\"./parallel/ParallelSeries\");\n\nrequire(\"./parallel/ParallelView\");\n\nvar parallelVisual = require(\"./parallel/parallelVisual\");\n\necharts.registerVisual(parallelVisual);","var List = require(\"../../data/List\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar completeDimensions = require(\"../../data/helper/completeDimensions\");\n\nvar _default = SeriesModel.extend({\n  type: 'series.parallel',\n  dependencies: ['parallel'],\n  visualColorAccessPath: 'lineStyle.normal.color',\n  getInitialData: function (option, ecModel) {\n    var parallelModel = ecModel.getComponent('parallel', this.get('parallelIndex'));\n    var parallelAxisIndices = parallelModel.parallelAxisIndex;\n    var rawData = option.data;\n    var modelDims = parallelModel.dimensions;\n    var dataDims = generateDataDims(modelDims, rawData);\n    var dataDimsInfo = zrUtil.map(dataDims, function (dim, dimIndex) {\n      var modelDimsIndex = zrUtil.indexOf(modelDims, dim);\n      var axisModel = modelDimsIndex >= 0 && ecModel.getComponent('parallelAxis', parallelAxisIndices[modelDimsIndex]);\n\n      if (axisModel && axisModel.get('type') === 'category') {\n        translateCategoryValue(axisModel, dim, rawData);\n        return {\n          name: dim,\n          type: 'ordinal'\n        };\n      } else if (modelDimsIndex < 0) {\n        return completeDimensions.guessOrdinal(rawData, dimIndex) ? {\n          name: dim,\n          type: 'ordinal'\n        } : dim;\n      } else {\n        return dim;\n      }\n    });\n    var list = new List(dataDimsInfo, this);\n    list.initData(rawData); // Anication is forbiden in progressive data mode.\n\n    if (this.option.progressive) {\n      this.option.animation = false;\n    }\n\n    return list;\n  },\n\n  /**\n   * User can get data raw indices on 'axisAreaSelected' event received.\n   *\n   * @public\n   * @param {string} activeState 'active' or 'inactive' or 'normal'\n   * @return {Array.<number>} Raw indices\n   */\n  getRawIndicesByActiveState: function (activeState) {\n    var coordSys = this.coordinateSystem;\n    var data = this.getData();\n    var indices = [];\n    coordSys.eachActiveState(data, function (theActiveState, dataIndex) {\n      if (activeState === theActiveState) {\n        indices.push(data.getRawIndex(dataIndex));\n      }\n    });\n    return indices;\n  },\n  defaultOption: {\n    zlevel: 0,\n    // \n    z: 2,\n    // \n    coordinateSystem: 'parallel',\n    parallelIndex: 0,\n    label: {\n      normal: {\n        show: false\n      },\n      emphasis: {\n        show: false\n      }\n    },\n    inactiveOpacity: 0.05,\n    activeOpacity: 1,\n    lineStyle: {\n      normal: {\n        width: 1,\n        opacity: 0.45,\n        type: 'solid'\n      }\n    },\n    progressive: false,\n    // 100\n    smooth: false,\n    animationEasing: 'linear'\n  }\n});\n\nfunction translateCategoryValue(axisModel, dim, rawData) {\n  var axisData = axisModel.get('data');\n  var numberDim = convertDimNameToNumber(dim);\n\n  if (axisData && axisData.length) {\n    zrUtil.each(rawData, function (dataItem) {\n      if (!dataItem) {\n        return;\n      } // FIXME\n      // time consuming, should use hash?\n\n\n      var index = zrUtil.indexOf(axisData, dataItem[numberDim]);\n      dataItem[numberDim] = index >= 0 ? index : NaN;\n    });\n  } // FIXME\n  // axis data, \n\n}\n\nfunction convertDimNameToNumber(dimName) {\n  return +dimName.replace('dim', '');\n}\n\nfunction generateDataDims(modelDims, rawData) {\n  // parallelModel.dimension should not be regarded as data\n  // dimensions. Consider dimensions = ['dim4', 'dim2', 'dim6'];\n  // We detect max dim by parallelModel.dimensions and fist\n  // item in rawData arbitrarily.\n  var maxDimNum = 0;\n  zrUtil.each(modelDims, function (dimName) {\n    var numberDim = convertDimNameToNumber(dimName);\n    numberDim > maxDimNum && (maxDimNum = numberDim);\n  });\n  var firstItem = rawData[0];\n\n  if (firstItem && firstItem.length - 1 > maxDimNum) {\n    maxDimNum = firstItem.length - 1;\n  }\n\n  var dataDims = [];\n\n  for (var i = 0; i <= maxDimNum; i++) {\n    dataDims.push('dim' + i);\n  }\n\n  return dataDims;\n}\n\nmodule.exports = _default;","var graphic = require(\"../../util/graphic\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar ChartView = require(\"../../view/Chart\");\n\nvar SMOOTH = 0.3;\nvar ParallelView = ChartView.extend({\n  type: 'parallel',\n  init: function () {\n    /**\n     * @type {module:zrender/container/Group}\n     * @private\n     */\n    this._dataGroup = new graphic.Group();\n    this.group.add(this._dataGroup);\n    /**\n     * @type {module:echarts/data/List}\n     */\n\n    this._data;\n  },\n\n  /**\n   * @override\n   */\n  render: function (seriesModel, ecModel, api, payload) {\n    this._renderForNormal(seriesModel, payload); // this[\n    //     seriesModel.option.progressive\n    //         ? '_renderForProgressive'\n    //         : '_renderForNormal'\n    // ](seriesModel);\n\n  },\n  dispose: function () {},\n\n  /**\n   * @private\n   */\n  _renderForNormal: function (seriesModel, payload) {\n    var dataGroup = this._dataGroup;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coordSys = seriesModel.coordinateSystem;\n    var dimensions = coordSys.dimensions;\n    var option = seriesModel.option;\n    var smooth = option.smooth ? SMOOTH : null; // Consider switch between progressive and not.\n    // oldData && oldData.__plProgressive && dataGroup.removeAll();\n\n    data.diff(oldData).add(add).update(update).remove(remove).execute(); // Update style\n\n    updateElCommon(data, smooth); // First create\n\n    if (!this._data) {\n      var clipPath = createGridClipShape(coordSys, seriesModel, function () {\n        // Callback will be invoked immediately if there is no animation\n        setTimeout(function () {\n          dataGroup.removeClipPath();\n        });\n      });\n      dataGroup.setClipPath(clipPath);\n    }\n\n    this._data = data;\n\n    function add(newDataIndex) {\n      addEl(data, dataGroup, newDataIndex, dimensions, coordSys, null, smooth);\n    }\n\n    function update(newDataIndex, oldDataIndex) {\n      var line = oldData.getItemGraphicEl(oldDataIndex);\n      var points = createLinePoints(data, newDataIndex, dimensions, coordSys);\n      data.setItemGraphicEl(newDataIndex, line);\n      var animationModel = payload && payload.animation === false ? null : seriesModel;\n      graphic.updateProps(line, {\n        shape: {\n          points: points\n        }\n      }, animationModel, newDataIndex);\n    }\n\n    function remove(oldDataIndex) {\n      var line = oldData.getItemGraphicEl(oldDataIndex);\n      dataGroup.remove(line);\n    }\n  },\n\n  /**\n   * @private\n   */\n  // _renderForProgressive: function (seriesModel) {\n  //     var dataGroup = this._dataGroup;\n  //     var data = seriesModel.getData();\n  //     var oldData = this._data;\n  //     var coordSys = seriesModel.coordinateSystem;\n  //     var dimensions = coordSys.dimensions;\n  //     var option = seriesModel.option;\n  //     var progressive = option.progressive;\n  //     var smooth = option.smooth ? SMOOTH : null;\n  //     // In progressive animation is disabled, so use simple data diff,\n  //     // which effects performance less.\n  //     // (Typically performance for data with length 7000+ like:\n  //     // simpleDiff: 60ms, addEl: 184ms,\n  //     // in RMBP 2.4GHz intel i7, OSX 10.9 chrome 50.0.2661.102 (64-bit))\n  //     if (simpleDiff(oldData, data, dimensions)) {\n  //         dataGroup.removeAll();\n  //         data.each(function (dataIndex) {\n  //             addEl(data, dataGroup, dataIndex, dimensions, coordSys);\n  //         });\n  //     }\n  //     updateElCommon(data, progressive, smooth);\n  //     // Consider switch between progressive and not.\n  //     data.__plProgressive = true;\n  //     this._data = data;\n  // },\n\n  /**\n   * @override\n   */\n  remove: function () {\n    this._dataGroup && this._dataGroup.removeAll();\n    this._data = null;\n  }\n});\n\nfunction createGridClipShape(coordSys, seriesModel, cb) {\n  var parallelModel = coordSys.model;\n  var rect = coordSys.getRect();\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    }\n  });\n  var dim = parallelModel.get('layout') === 'horizontal' ? 'width' : 'height';\n  rectEl.setShape(dim, 0);\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width,\n      height: rect.height\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nfunction createLinePoints(data, dataIndex, dimensions, coordSys) {\n  var points = [];\n\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimName = dimensions[i];\n    var value = data.get(dimName, dataIndex);\n\n    if (!isEmptyValue(value, coordSys.getAxis(dimName).type)) {\n      points.push(coordSys.dataToPoint(value, dimName));\n    }\n  }\n\n  return points;\n}\n\nfunction addEl(data, dataGroup, dataIndex, dimensions, coordSys) {\n  var points = createLinePoints(data, dataIndex, dimensions, coordSys);\n  var line = new graphic.Polyline({\n    shape: {\n      points: points\n    },\n    silent: true,\n    z2: 10\n  });\n  dataGroup.add(line);\n  data.setItemGraphicEl(dataIndex, line);\n}\n\nfunction updateElCommon(data, smooth) {\n  var seriesStyleModel = data.hostModel.getModel('lineStyle.normal');\n  var lineStyle = seriesStyleModel.getLineStyle();\n  data.eachItemGraphicEl(function (line, dataIndex) {\n    if (data.hasItemOption) {\n      var itemModel = data.getItemModel(dataIndex);\n      var lineStyleModel = itemModel.getModel('lineStyle.normal', seriesStyleModel);\n      lineStyle = lineStyleModel.getLineStyle(['color', 'stroke']);\n    }\n\n    line.useStyle(zrUtil.extend(lineStyle, {\n      fill: null,\n      // lineStyle.color have been set to itemVisual in module:echarts/visual/seriesColor.\n      stroke: data.getItemVisual(dataIndex, 'color'),\n      // lineStyle.opacity have been set to itemVisual in parallelVisual.\n      opacity: data.getItemVisual(dataIndex, 'opacity')\n    }));\n    line.shape.smooth = smooth;\n  });\n} // function simpleDiff(oldData, newData, dimensions) {\n//     var oldLen;\n//     if (!oldData\n//         || !oldData.__plProgressive\n//         || (oldLen = oldData.count()) !== newData.count()\n//     ) {\n//         return true;\n//     }\n//     var dimLen = dimensions.length;\n//     for (var i = 0; i < oldLen; i++) {\n//         for (var j = 0; j < dimLen; j++) {\n//             if (oldData.get(dimensions[j], i) !== newData.get(dimensions[j], i)) {\n//                 return true;\n//             }\n//         }\n//     }\n//     return false;\n// }\n// FIXME\n// ?\n\n\nfunction isEmptyValue(val, axisType) {\n  return axisType === 'category' ? val == null : val == null || isNaN(val); // axisType === 'value'\n}\n\nvar _default = ParallelView;\nmodule.exports = _default;","var opacityAccessPath = ['lineStyle', 'normal', 'opacity'];\n\nfunction _default(ecModel) {\n  ecModel.eachSeriesByType('parallel', function (seriesModel) {\n    var itemStyleModel = seriesModel.getModel('itemStyle.normal');\n    var lineStyleModel = seriesModel.getModel('lineStyle.normal');\n    var globalColors = ecModel.get('color');\n    var color = lineStyleModel.get('color') || itemStyleModel.get('color') || globalColors[seriesModel.seriesIndex % globalColors.length];\n    var inactiveOpacity = seriesModel.get('inactiveOpacity');\n    var activeOpacity = seriesModel.get('activeOpacity');\n    var lineStyle = seriesModel.getModel('lineStyle.normal').getLineStyle();\n    var coordSys = seriesModel.coordinateSystem;\n    var data = seriesModel.getData();\n    var opacityMap = {\n      normal: lineStyle.opacity,\n      active: activeOpacity,\n      inactive: inactiveOpacity\n    };\n    coordSys.eachActiveState(data, function (activeState, dataIndex) {\n      var itemModel = data.getItemModel(dataIndex);\n      var opacity = opacityMap[activeState];\n\n      if (activeState === 'normal') {\n        var itemOpacity = itemModel.get(opacityAccessPath, true);\n        itemOpacity != null && (opacity = itemOpacity);\n      }\n\n      data.setItemVisual(dataIndex, 'opacity', opacity);\n    });\n    data.setVisual('color', color);\n  });\n}\n\nmodule.exports = _default;","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./bar/PictorialBarSeries\");\n\nrequire(\"./bar/PictorialBarView\");\n\nvar barLayoutGrid = require(\"../layout/barGrid\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nrequire(\"../component/gridSimple\");\n\n// In case developer forget to include grid component\necharts.registerLayout(zrUtil.curry(barLayoutGrid, 'pictorialBar'));\necharts.registerVisual(zrUtil.curry(visualSymbol, 'pictorialBar', 'roundRect', null));","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"./pie/PieSeries\");\n\nrequire(\"./pie/PieView\");\n\nvar createDataSelectAction = require(\"../action/createDataSelectAction\");\n\nvar dataColor = require(\"../visual/dataColor\");\n\nvar pieLayout = require(\"./pie/pieLayout\");\n\nvar dataFilter = require(\"../processor/dataFilter\");\n\ncreateDataSelectAction('pie', [{\n  type: 'pieToggleSelect',\n  event: 'pieselectchanged',\n  method: 'toggleSelected'\n}, {\n  type: 'pieSelect',\n  event: 'pieselected',\n  method: 'select'\n}, {\n  type: 'pieUnSelect',\n  event: 'pieunselected',\n  method: 'unSelect'\n}]);\necharts.registerVisual(zrUtil.curry(dataColor, 'pie'));\necharts.registerLayout(zrUtil.curry(pieLayout, 'pie'));\necharts.registerProcessor(zrUtil.curry(dataFilter, 'pie'));","var echarts = require(\"../../echarts\");\n\nvar List = require(\"../../data/List\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar _number = require(\"../../util/number\");\n\nvar getPercentWithPrecision = _number.getPercentWithPrecision;\n\nvar completeDimensions = require(\"../../data/helper/completeDimensions\");\n\nvar dataSelectableMixin = require(\"../../component/helper/selectableMixin\");\n\nvar PieSeries = echarts.extendSeriesModel({\n  type: 'series.pie',\n  // Overwrite\n  init: function (option) {\n    PieSeries.superApply(this, 'init', arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n    this.legendDataProvider = function () {\n      return this.getRawData();\n    };\n\n    this.updateSelectedMap(option.data);\n\n    this._defaultLabelLine(option);\n  },\n  // Overwrite\n  mergeOption: function (newOption) {\n    PieSeries.superCall(this, 'mergeOption', newOption);\n    this.updateSelectedMap(this.option.data);\n  },\n  getInitialData: function (option, ecModel) {\n    var dimensions = completeDimensions(['value'], option.data);\n    var list = new List(dimensions, this);\n    list.initData(option.data);\n    return list;\n  },\n  // Overwrite\n  getDataParams: function (dataIndex) {\n    var data = this.getData();\n    var params = PieSeries.superCall(this, 'getDataParams', dataIndex); // FIXME toFixed?\n\n    var valueList = [];\n    data.each('value', function (value) {\n      valueList.push(value);\n    });\n    params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\n    params.$vars.push('percent');\n    return params;\n  },\n  _defaultLabelLine: function (option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option.labelLine, ['show']);\n    var labelLineNormalOpt = option.labelLine.normal;\n    var labelLineEmphasisOpt = option.labelLine.emphasis; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.normal.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.label.emphasis.show;\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // \n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // \n    clockwise: true,\n    startAngle: 90,\n    // 0\n    minAngle: 0,\n    // \n    selectedOffset: 10,\n    // \n    hoverOffset: 10,\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // singlemultiple\n    // selectedMode: false,\n    // 'radius' | 'area'\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    label: {\n      normal: {\n        // If rotate around circle\n        rotate: false,\n        show: true,\n        // 'outer', 'inside', 'center'\n        position: 'outer' // formatter: Tooltip.formatter\n        // TEXTSTYLE\n        // distance: positioninnerlabel()\n\n      },\n      emphasis: {}\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      normal: {\n        show: true,\n        // \n        length: 15,\n        // \n        length2: 15,\n        smooth: false,\n        lineStyle: {\n          // color: ,\n          width: 1,\n          type: 'solid'\n        }\n      }\n    },\n    itemStyle: {\n      normal: {\n        borderWidth: 1\n      },\n      emphasis: {}\n    },\n    // Animation type canbe expansion, scale\n    animationType: 'expansion',\n    animationEasing: 'cubicOut',\n    data: []\n  }\n});\nzrUtil.mixin(PieSeries, dataSelectableMixin);\nvar _default = PieSeries;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar ChartView = require(\"../../view/Chart\");\n\n/**\n * @param {module:echarts/model/Series} seriesModel\n * @param {boolean} hasAnimation\n * @inner\n */\nfunction updateDataSelected(uid, seriesModel, hasAnimation, api) {\n  var data = seriesModel.getData();\n  var dataIndex = this.dataIndex;\n  var name = data.getName(dataIndex);\n  var selectedOffset = seriesModel.get('selectedOffset');\n  api.dispatchAction({\n    type: 'pieToggleSelect',\n    from: uid,\n    name: name,\n    seriesId: seriesModel.id\n  });\n  data.each(function (idx) {\n    toggleItemSelected(data.getItemGraphicEl(idx), data.getItemLayout(idx), seriesModel.isSelected(data.getName(idx)), selectedOffset, hasAnimation);\n  });\n}\n/**\n * @param {module:zrender/graphic/Sector} el\n * @param {Object} layout\n * @param {boolean} isSelected\n * @param {number} selectedOffset\n * @param {boolean} hasAnimation\n * @inner\n */\n\n\nfunction toggleItemSelected(el, layout, isSelected, selectedOffset, hasAnimation) {\n  var midAngle = (layout.startAngle + layout.endAngle) / 2;\n  var dx = Math.cos(midAngle);\n  var dy = Math.sin(midAngle);\n  var offset = isSelected ? selectedOffset : 0;\n  var position = [dx * offset, dy * offset];\n  hasAnimation // animateTo will stop revious animation like update transition\n  ? el.animate().when(200, {\n    position: position\n  }).start('bounceOut') : el.attr('position', position);\n}\n/**\n * Piece of pie including Sector, Label, LabelLine\n * @constructor\n * @extends {module:zrender/graphic/Group}\n */\n\n\nfunction PiePiece(data, idx) {\n  graphic.Group.call(this);\n  var sector = new graphic.Sector({\n    z2: 2\n  });\n  var polyline = new graphic.Polyline();\n  var text = new graphic.Text();\n  this.add(sector);\n  this.add(polyline);\n  this.add(text);\n  this.updateData(data, idx, true); // Hover to change label and labelLine\n\n  function onEmphasis() {\n    polyline.ignore = polyline.hoverIgnore;\n    text.ignore = text.hoverIgnore;\n  }\n\n  function onNormal() {\n    polyline.ignore = polyline.normalIgnore;\n    text.ignore = text.normalIgnore;\n  }\n\n  this.on('emphasis', onEmphasis).on('normal', onNormal).on('mouseover', onEmphasis).on('mouseout', onNormal);\n}\n\nvar piePieceProto = PiePiece.prototype;\n\npiePieceProto.updateData = function (data, idx, firstCreate) {\n  var sector = this.childAt(0);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var sectorShape = zrUtil.extend({}, layout);\n  sectorShape.label = null;\n\n  if (firstCreate) {\n    sector.setShape(sectorShape);\n    var animationType = seriesModel.getShallow('animationType');\n\n    if (animationType === 'scale') {\n      sector.shape.r = layout.r0;\n      graphic.initProps(sector, {\n        shape: {\n          r: layout.r\n        }\n      }, seriesModel, idx);\n    } // Expansion\n    else {\n        sector.shape.endAngle = layout.startAngle;\n        graphic.updateProps(sector, {\n          shape: {\n            endAngle: layout.endAngle\n          }\n        }, seriesModel, idx);\n      }\n  } else {\n    graphic.updateProps(sector, {\n      shape: sectorShape\n    }, seriesModel, idx);\n  } // Update common style\n\n\n  var itemStyleModel = itemModel.getModel('itemStyle');\n  var visualColor = data.getItemVisual(idx, 'color');\n  sector.useStyle(zrUtil.defaults({\n    lineJoin: 'bevel',\n    fill: visualColor\n  }, itemStyleModel.getModel('normal').getItemStyle()));\n  sector.hoverStyle = itemStyleModel.getModel('emphasis').getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && sector.attr('cursor', cursorStyle); // Toggle selected\n\n  toggleItemSelected(this, data.getItemLayout(idx), itemModel.get('selected'), seriesModel.get('selectedOffset'), seriesModel.get('animation'));\n\n  function onEmphasis() {\n    // Sector may has animation of updating data. Force to move to the last frame\n    // Or it may stopped on the wrong shape\n    sector.stopAnimation(true);\n    sector.animateTo({\n      shape: {\n        r: layout.r + seriesModel.get('hoverOffset')\n      }\n    }, 300, 'elasticOut');\n  }\n\n  function onNormal() {\n    sector.stopAnimation(true);\n    sector.animateTo({\n      shape: {\n        r: layout.r\n      }\n    }, 300, 'elasticOut');\n  }\n\n  sector.off('mouseover').off('mouseout').off('emphasis').off('normal');\n\n  if (itemModel.get('hoverAnimation') && seriesModel.isAnimationEnabled()) {\n    sector.on('mouseover', onEmphasis).on('mouseout', onNormal).on('emphasis', onEmphasis).on('normal', onNormal);\n  }\n\n  this._updateLabel(data, idx);\n\n  graphic.setHoverStyle(this);\n};\n\npiePieceProto._updateLabel = function (data, idx) {\n  var labelLine = this.childAt(1);\n  var labelText = this.childAt(2);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var labelLayout = layout.label;\n  var visualColor = data.getItemVisual(idx, 'color');\n  graphic.updateProps(labelLine, {\n    shape: {\n      points: labelLayout.linePoints || [[labelLayout.x, labelLayout.y], [labelLayout.x, labelLayout.y], [labelLayout.x, labelLayout.y]]\n    }\n  }, seriesModel, idx);\n  graphic.updateProps(labelText, {\n    style: {\n      x: labelLayout.x,\n      y: labelLayout.y\n    }\n  }, seriesModel, idx);\n  labelText.attr({\n    rotation: labelLayout.rotation,\n    origin: [labelLayout.x, labelLayout.y],\n    z2: 10\n  });\n  var labelModel = itemModel.getModel('label.normal');\n  var labelHoverModel = itemModel.getModel('label.emphasis');\n  var labelLineModel = itemModel.getModel('labelLine.normal');\n  var labelLineHoverModel = itemModel.getModel('labelLine.emphasis');\n  var visualColor = data.getItemVisual(idx, 'color');\n  graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, labelHoverModel, {\n    labelFetcher: data.hostModel,\n    labelDataIndex: idx,\n    defaultText: data.getName(idx),\n    autoColor: visualColor,\n    useInsideStyle: !!labelLayout.inside\n  }, {\n    textAlign: labelLayout.textAlign,\n    textVerticalAlign: labelLayout.verticalAlign,\n    opacity: data.getItemVisual(idx, 'opacity')\n  });\n  labelText.ignore = labelText.normalIgnore = !labelModel.get('show');\n  labelText.hoverIgnore = !labelHoverModel.get('show');\n  labelLine.ignore = labelLine.normalIgnore = !labelLineModel.get('show');\n  labelLine.hoverIgnore = !labelLineHoverModel.get('show'); // Default use item visual color\n\n  labelLine.setStyle({\n    stroke: visualColor,\n    opacity: data.getItemVisual(idx, 'opacity')\n  });\n  labelLine.setStyle(labelLineModel.getModel('lineStyle').getLineStyle());\n  labelLine.hoverStyle = labelLineHoverModel.getModel('lineStyle').getLineStyle();\n  var smooth = labelLineModel.get('smooth');\n\n  if (smooth && smooth === true) {\n    smooth = 0.4;\n  }\n\n  labelLine.setShape({\n    smooth: smooth\n  });\n};\n\nzrUtil.inherits(PiePiece, graphic.Group); // Pie view\n\nvar PieView = ChartView.extend({\n  type: 'pie',\n  init: function () {\n    var sectorGroup = new graphic.Group();\n    this._sectorGroup = sectorGroup;\n  },\n  render: function (seriesModel, ecModel, api, payload) {\n    if (payload && payload.from === this.uid) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var hasAnimation = ecModel.get('animation');\n    var isFirstRender = !oldData;\n    var animationType = seriesModel.get('animationType');\n    var onSectorClick = zrUtil.curry(updateDataSelected, this.uid, seriesModel, hasAnimation, api);\n    var selectedMode = seriesModel.get('selectedMode');\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx); // Default expansion animation\n\n      if (isFirstRender && animationType !== 'scale') {\n        piePiece.eachChild(function (child) {\n          child.stopAnimation(true);\n        });\n      }\n\n      selectedMode && piePiece.on('click', onSectorClick);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n      piePiece.updateData(data, newIdx);\n      piePiece.off('click');\n      selectedMode && piePiece.on('click', onSectorClick);\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      group.remove(piePiece);\n    }).execute();\n\n    if (hasAnimation && isFirstRender && data.count() > 0 // Default expansion animation\n    && animationType !== 'scale') {\n      var shape = data.getItemLayout(0);\n      var r = Math.max(api.getWidth(), api.getHeight()) / 2;\n      var removeClipPath = zrUtil.bind(group.removeClipPath, group);\n      group.setClipPath(this._createClipPath(shape.cx, shape.cy, r, shape.startAngle, shape.clockwise, removeClipPath, seriesModel));\n    }\n\n    this._data = data;\n  },\n  dispose: function () {},\n  _createClipPath: function (cx, cy, r, startAngle, clockwise, cb, seriesModel) {\n    var clipPath = new graphic.Sector({\n      shape: {\n        cx: cx,\n        cy: cy,\n        r0: 0,\n        r: r,\n        startAngle: startAngle,\n        endAngle: startAngle,\n        clockwise: clockwise\n      }\n    });\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: startAngle + (clockwise ? 1 : -1) * Math.PI * 2\n      }\n    }, seriesModel, cb);\n    return clipPath;\n  },\n\n  /**\n   * @implement\n   */\n  containPoint: function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  }\n});\nvar _default = PieView;\nmodule.exports = _default;","var textContain = require(\"zrender/lib/contain/text\");\n\n// FIXME emphasis label position is not same with normal label position\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight) {\n  list.sort(function (a, b) {\n    return a.y - b.y;\n  }); // \n\n  function shiftDown(start, end, delta, dir) {\n    for (var j = start; j < end; j++) {\n      list[j].y += delta;\n\n      if (j > start && j + 1 < end && list[j + 1].y > list[j].y + list[j].height) {\n        shiftUp(j, delta / 2);\n        return;\n      }\n    }\n\n    shiftUp(end - 1, delta / 2);\n  } // \n\n\n  function shiftUp(end, delta) {\n    for (var j = end; j >= 0; j--) {\n      list[j].y -= delta;\n\n      if (j > 0 && list[j].y > list[j - 1].y + list[j - 1].height) {\n        break;\n      }\n    }\n  }\n\n  function changeX(list, isDownList, cx, cy, r, dir) {\n    var lastDeltaX = dir > 0 ? isDownList // \n    ? Number.MAX_VALUE // \n    : 0 // \n    : isDownList // \n    ? Number.MAX_VALUE // \n    : 0; // \n\n    for (var i = 0, l = list.length; i < l; i++) {\n      // Not change x for center label\n      if (list[i].position === 'center') {\n        continue;\n      }\n\n      var deltaY = Math.abs(list[i].y - cy);\n      var length = list[i].len;\n      var length2 = list[i].len2;\n      var deltaX = deltaY < r + length ? Math.sqrt((r + length + length2) * (r + length + length2) - deltaY * deltaY) : Math.abs(list[i].x - cx);\n\n      if (isDownList && deltaX >= lastDeltaX) {\n        // \n        deltaX = lastDeltaX - 10;\n      }\n\n      if (!isDownList && deltaX <= lastDeltaX) {\n        // \n        deltaX = lastDeltaX + 10;\n      }\n\n      list[i].x = cx + deltaX * dir;\n      lastDeltaX = deltaX;\n    }\n  }\n\n  var lastY = 0;\n  var delta;\n  var len = list.length;\n  var upList = [];\n  var downList = [];\n\n  for (var i = 0; i < len; i++) {\n    delta = list[i].y - lastY;\n\n    if (delta < 0) {\n      shiftDown(i, len, -delta, dir);\n    }\n\n    lastY = list[i].y + list[i].height;\n  }\n\n  if (viewHeight - lastY < 0) {\n    shiftUp(len - 1, lastY - viewHeight);\n  }\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].y >= cy) {\n      downList.push(list[i]);\n    } else {\n      upList.push(list[i]);\n    }\n  }\n\n  changeX(upList, false, cx, cy, r, dir);\n  changeX(downList, true, cx, cy, r, dir);\n}\n\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight) {\n  var leftList = [];\n  var rightList = [];\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    if (labelLayoutList[i].x < cx) {\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight);\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var linePoints = labelLayoutList[i].linePoints;\n\n    if (linePoints) {\n      var dist = linePoints[1][0] - linePoints[2][0];\n\n      if (labelLayoutList[i].x < cx) {\n        linePoints[2][0] = labelLayoutList[i].x + 3;\n      } else {\n        linePoints[2][0] = labelLayoutList[i].x - 3;\n      }\n\n      linePoints[1][1] = linePoints[2][1] = labelLayoutList[i].y;\n      linePoints[1][0] = linePoints[2][0] + dist;\n    }\n  }\n}\n\nfunction _default(seriesModel, r, viewWidth, viewHeight) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  data.each(function (idx) {\n    var layout = data.getItemLayout(idx);\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label.normal'); // Use position in normal or emphasis\n\n    var labelPosition = labelModel.get('position') || itemModel.get('label.emphasis.position');\n    var labelLineModel = itemModel.getModel('labelLine.normal');\n    var labelLineLen = labelLineModel.get('length');\n    var labelLineLen2 = labelLineModel.get('length2');\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var dx = Math.cos(midAngle);\n    var dy = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = layout.cx;\n    cy = layout.cy;\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n    if (labelPosition === 'center') {\n      textX = layout.cx;\n      textY = layout.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (layout.r + layout.r0) / 2 * dx : layout.r * dx) + cx;\n      var y1 = (isLabelInside ? (layout.r + layout.r0) / 2 * dy : layout.r * dy) + cy;\n      textX = x1 + dx * 3;\n      textY = y1 + dy * 3;\n\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + dx * (labelLineLen + r - layout.r);\n        var y2 = y1 + dy * (labelLineLen + r - layout.r);\n        var x3 = x2 + (dx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n        textX = x3 + (dx < 0 ? -5 : 5);\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n\n      textAlign = isLabelInside ? 'center' : dx > 0 ? 'left' : 'right';\n    }\n\n    var font = labelModel.getFont();\n    var labelRotate = labelModel.get('rotate') ? dx < 0 ? -midAngle + Math.PI : -midAngle : 0;\n    var text = seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx);\n    var textRect = textContain.getBoundingRect(text, font, textAlign, 'top');\n    hasLabelRotate = !!labelRotate;\n    layout.label = {\n      x: textX,\n      y: textY,\n      position: labelPosition,\n      height: textRect.height,\n      len: labelLineLen,\n      len2: labelLineLen2,\n      linePoints: linePoints,\n      textAlign: textAlign,\n      verticalAlign: 'middle',\n      rotation: labelRotate,\n      inside: isLabelInside\n    }; // Not layout the inside label\n\n    if (!isLabelInside) {\n      labelLayoutList.push(layout.label);\n    }\n  });\n\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight);\n  }\n}\n\nmodule.exports = _default;","var _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar linearMap = _number.linearMap;\n\nvar labelLayout = require(\"./labelLayout\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\n\nfunction _default(seriesType, ecModel, api, payload) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width);\n    var cy = parsePercent(center[1], height);\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var data = seriesModel.getData();\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var validDataCount = 0;\n    data.each('value', function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum('value'); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n    var extent = data.getDataExtent('value');\n    extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n    var restAngle = PI2;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    var dir = clockwise ? 1 : -1;\n    data.each('value', function (value, idx) {\n      var angle;\n\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r\n        });\n        return;\n      } // FIXME  2.0  roseType  area \n\n\n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = PI2 / validDataCount;\n      }\n\n      if (angle < minAngle) {\n        angle = minAngle;\n        restAngle -= minAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n\n      var endAngle = currentAngle + dir * angle;\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: currentAngle,\n        endAngle: endAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r\n      });\n      currentAngle = endAngle;\n    }, true); // Some sector is constrained by minAngle\n    // Rest sectors needs recalculate angle\n\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle\n      if (restAngle <= 1e-3) {\n        var angle = PI2 / validDataCount;\n        data.each('value', function (value, idx) {\n          if (!isNaN(value)) {\n            var layout = data.getItemLayout(idx);\n            layout.angle = angle;\n            layout.startAngle = startAngle + dir * idx * angle;\n            layout.endAngle = startAngle + dir * (idx + 1) * angle;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each('value', function (value, idx) {\n          if (!isNaN(value)) {\n            var layout = data.getItemLayout(idx);\n            var angle = layout.angle === minAngle ? minAngle : value * unitRadian;\n            layout.startAngle = currentAngle;\n            layout.endAngle = currentAngle + dir * angle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n\n    labelLayout(seriesModel, r, width, height);\n  });\n}\n\nmodule.exports = _default;","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"../component/radar\");\n\nrequire(\"./radar/RadarSeries\");\n\nrequire(\"./radar/RadarView\");\n\nvar dataColor = require(\"../visual/dataColor\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar radarLayout = require(\"./radar/radarLayout\");\n\nvar dataFilter = require(\"../processor/dataFilter\");\n\nvar backwardCompat = require(\"./radar/backwardCompat\");\n\n// Must use radar component\necharts.registerVisual(zrUtil.curry(dataColor, 'radar'));\necharts.registerVisual(zrUtil.curry(visualSymbol, 'radar', 'circle', null));\necharts.registerLayout(radarLayout);\necharts.registerProcessor(zrUtil.curry(dataFilter, 'radar'));\necharts.registerPreprocessor(backwardCompat);","var SeriesModel = require(\"../../model/Series\");\n\nvar List = require(\"../../data/List\");\n\nvar completeDimensions = require(\"../../data/helper/completeDimensions\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _format = require(\"../../util/format\");\n\nvar encodeHTML = _format.encodeHTML;\nvar RadarSeries = SeriesModel.extend({\n  type: 'series.radar',\n  dependencies: ['radar'],\n  // Overwrite\n  init: function (option) {\n    RadarSeries.superApply(this, 'init', arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n    this.legendDataProvider = function () {\n      return this.getRawData();\n    };\n  },\n  getInitialData: function (option, ecModel) {\n    var data = option.data || [];\n    var dimensions = completeDimensions([], data, {\n      extraPrefix: 'indicator_',\n      extraFromZero: true\n    });\n    var list = new List(dimensions, this);\n    list.initData(data);\n    return list;\n  },\n  formatTooltip: function (dataIndex) {\n    var value = this.getRawValue(dataIndex);\n    var coordSys = this.coordinateSystem;\n    var indicatorAxes = coordSys.getIndicatorAxes();\n    var name = this.getData().getName(dataIndex);\n    return encodeHTML(name === '' ? this.name : name) + '<br/>' + zrUtil.map(indicatorAxes, function (axis, idx) {\n      return encodeHTML(axis.name + ' : ' + value[idx]);\n    }).join('<br />');\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'radar',\n    legendHoverLink: true,\n    radarIndex: 0,\n    lineStyle: {\n      normal: {\n        width: 2,\n        type: 'solid'\n      }\n    },\n    label: {\n      normal: {\n        position: 'top'\n      }\n    },\n    // areaStyle: {\n    // },\n    // itemStyle: {}\n    symbol: 'emptyCircle',\n    symbolSize: 4 // symbolRotate: null\n\n  }\n});\nvar _default = RadarSeries;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar symbolUtil = require(\"../../util/symbol\");\n\nfunction normalizeSymbolSize(symbolSize) {\n  if (!zrUtil.isArray(symbolSize)) {\n    symbolSize = [+symbolSize, +symbolSize];\n  }\n\n  return symbolSize;\n}\n\nvar _default = echarts.extendChartView({\n  type: 'radar',\n  render: function (seriesModel, ecModel, api) {\n    var polar = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n\n    function createSymbol(data, idx) {\n      var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n      var color = data.getItemVisual(idx, 'color');\n\n      if (symbolType === 'none') {\n        return;\n      }\n\n      var symbolSize = normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n      var symbolPath = symbolUtil.createSymbol(symbolType, -1, -1, 2, 2, color);\n      symbolPath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 100,\n        scale: [symbolSize[0] / 2, symbolSize[1] / 2]\n      });\n      return symbolPath;\n    }\n\n    function updateSymbols(oldPoints, newPoints, symbolGroup, data, idx, isInit) {\n      // Simply rerender all\n      symbolGroup.removeAll();\n\n      for (var i = 0; i < newPoints.length - 1; i++) {\n        var symbolPath = createSymbol(data, idx);\n\n        if (symbolPath) {\n          symbolPath.__dimIdx = i;\n\n          if (oldPoints[i]) {\n            symbolPath.attr('position', oldPoints[i]);\n            graphic[isInit ? 'initProps' : 'updateProps'](symbolPath, {\n              position: newPoints[i]\n            }, seriesModel, idx);\n          } else {\n            symbolPath.attr('position', newPoints[i]);\n          }\n\n          symbolGroup.add(symbolPath);\n        }\n      }\n    }\n\n    function getInitialPoints(points) {\n      return zrUtil.map(points, function (pt) {\n        return [polar.cx, polar.cy];\n      });\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var points = data.getItemLayout(idx);\n\n      if (!points) {\n        return;\n      }\n\n      var polygon = new graphic.Polygon();\n      var polyline = new graphic.Polyline();\n      var target = {\n        shape: {\n          points: points\n        }\n      };\n      polygon.shape.points = getInitialPoints(points);\n      polyline.shape.points = getInitialPoints(points);\n      graphic.initProps(polygon, target, seriesModel, idx);\n      graphic.initProps(polyline, target, seriesModel, idx);\n      var itemGroup = new graphic.Group();\n      var symbolGroup = new graphic.Group();\n      itemGroup.add(polyline);\n      itemGroup.add(polygon);\n      itemGroup.add(symbolGroup);\n      updateSymbols(polyline.shape.points, points, symbolGroup, data, idx, true);\n      data.setItemGraphicEl(idx, itemGroup);\n    }).update(function (newIdx, oldIdx) {\n      var itemGroup = oldData.getItemGraphicEl(oldIdx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2);\n      var target = {\n        shape: {\n          points: data.getItemLayout(newIdx)\n        }\n      };\n\n      if (!target.shape.points) {\n        return;\n      }\n\n      updateSymbols(polyline.shape.points, target.shape.points, symbolGroup, data, newIdx, false);\n      graphic.updateProps(polyline, target, seriesModel);\n      graphic.updateProps(polygon, target, seriesModel);\n      data.setItemGraphicEl(newIdx, itemGroup);\n    }).remove(function (idx) {\n      group.remove(oldData.getItemGraphicEl(idx));\n    }).execute();\n    data.eachItemGraphicEl(function (itemGroup, idx) {\n      var itemModel = data.getItemModel(idx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2);\n      var color = data.getItemVisual(idx, 'color');\n      group.add(itemGroup);\n      polyline.useStyle(zrUtil.defaults(itemModel.getModel('lineStyle.normal').getLineStyle(), {\n        fill: 'none',\n        stroke: color\n      }));\n      polyline.hoverStyle = itemModel.getModel('lineStyle.emphasis').getLineStyle();\n      var areaStyleModel = itemModel.getModel('areaStyle.normal');\n      var hoverAreaStyleModel = itemModel.getModel('areaStyle.emphasis');\n      var polygonIgnore = areaStyleModel.isEmpty() && areaStyleModel.parentModel.isEmpty();\n      var hoverPolygonIgnore = hoverAreaStyleModel.isEmpty() && hoverAreaStyleModel.parentModel.isEmpty();\n      hoverPolygonIgnore = hoverPolygonIgnore && polygonIgnore;\n      polygon.ignore = polygonIgnore;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: color,\n        opacity: 0.7\n      }));\n      polygon.hoverStyle = hoverAreaStyleModel.getAreaStyle();\n      var itemStyle = itemModel.getModel('itemStyle.normal').getItemStyle(['color']);\n      var itemHoverStyle = itemModel.getModel('itemStyle.emphasis').getItemStyle();\n      var labelModel = itemModel.getModel('label.normal');\n      var labelHoverModel = itemModel.getModel('label.emphasis');\n      symbolGroup.eachChild(function (symbolPath) {\n        symbolPath.setStyle(itemStyle);\n        symbolPath.hoverStyle = zrUtil.clone(itemHoverStyle);\n        graphic.setLabelStyle(symbolPath.style, symbolPath.hoverStyle, labelModel, labelHoverModel, {\n          labelFetcher: data.hostModel,\n          labelDataIndex: idx,\n          labelDimIndex: symbolPath.__dimIdx,\n          defaultText: data.get(data.dimensions[symbolPath.__dimIdx], idx),\n          autoColor: color,\n          isRectText: true\n        });\n      });\n\n      function onEmphasis() {\n        polygon.attr('ignore', hoverPolygonIgnore);\n      }\n\n      function onNormal() {\n        polygon.attr('ignore', polygonIgnore);\n      }\n\n      itemGroup.off('mouseover').off('mouseout').off('normal').off('emphasis');\n      itemGroup.on('emphasis', onEmphasis).on('mouseover', onEmphasis).on('normal', onNormal).on('mouseout', onNormal);\n      graphic.setHoverStyle(itemGroup);\n    });\n    this._data = data;\n  },\n  remove: function () {\n    this.group.removeAll();\n    this._data = null;\n  },\n  dispose: function () {}\n});\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\n// Backward compat for radar chart in 2\nfunction _default(option) {\n  var polarOptArr = option.polar;\n\n  if (polarOptArr) {\n    if (!zrUtil.isArray(polarOptArr)) {\n      polarOptArr = [polarOptArr];\n    }\n\n    var polarNotRadar = [];\n    zrUtil.each(polarOptArr, function (polarOpt, idx) {\n      if (polarOpt.indicator) {\n        if (polarOpt.type && !polarOpt.shape) {\n          polarOpt.shape = polarOpt.type;\n        }\n\n        option.radar = option.radar || [];\n\n        if (!zrUtil.isArray(option.radar)) {\n          option.radar = [option.radar];\n        }\n\n        option.radar.push(polarOpt);\n      } else {\n        polarNotRadar.push(polarOpt);\n      }\n    });\n    option.polar = polarNotRadar;\n  }\n\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'radar' && seriesOpt.polarIndex) {\n      seriesOpt.radarIndex = seriesOpt.polarIndex;\n    }\n  });\n}\n\nmodule.exports = _default;","function _default(ecModel) {\n  ecModel.eachSeriesByType('radar', function (seriesModel) {\n    var data = seriesModel.getData();\n    var points = [];\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (!coordSys) {\n      return;\n    }\n\n    function pointsConverter(val, idx) {\n      points[idx] = points[idx] || [];\n      points[idx][i] = coordSys.dataToPoint(val, i);\n    }\n\n    for (var i = 0; i < coordSys.getIndicatorAxes().length; i++) {\n      var dim = data.dimensions[i];\n      data.each(dim, pointsConverter);\n    }\n\n    data.each(function (idx) {\n      // Close polygon\n      points[idx][0] && points[idx].push(points[idx][0].slice());\n      data.setItemLayout(idx, points[idx]);\n    });\n  });\n}\n\nmodule.exports = _default;","var echarts = require(\"../echarts\");\n\nrequire(\"./sankey/SankeySeries\");\n\nrequire(\"./sankey/SankeyView\");\n\nvar sankeyLayout = require(\"./sankey/sankeyLayout\");\n\nvar sankeyVisual = require(\"./sankey/sankeyVisual\");\n\necharts.registerLayout(sankeyLayout);\necharts.registerVisual(sankeyVisual);","var SeriesModel = require(\"../../model/Series\");\n\nvar createGraphFromNodeEdge = require(\"../helper/createGraphFromNodeEdge\");\n\nvar _format = require(\"../../util/format\");\n\nvar encodeHTML = _format.encodeHTML;\n\n/**\n * @file Get initial data and define sankey view's series model\n * @author Deqing Li(annong035@gmail.com)\n */\nvar SankeySeries = SeriesModel.extend({\n  type: 'series.sankey',\n  layoutInfo: null,\n\n  /**\n   * Init a graph data structure from data in option series\n   *\n   * @param  {Object} option  the object used to config echarts view\n   * @return {module:echarts/data/List} storage initial data\n   */\n  getInitialData: function (option) {\n    var links = option.edges || option.links;\n    var nodes = option.data || option.nodes;\n\n    if (nodes && links) {\n      var graph = createGraphFromNodeEdge(nodes, links, this, true);\n      return graph.data;\n    }\n  },\n\n  /**\n   * Return the graphic data structure\n   *\n   * @return {module:echarts/data/Graph} graphic data structure\n   */\n  getGraph: function () {\n    return this.getData().graph;\n  },\n\n  /**\n   * Get edge data of graphic data structure\n   *\n   * @return {module:echarts/data/List} data structure of list\n   */\n  getEdgeData: function () {\n    return this.getGraph().edgeData;\n  },\n\n  /**\n   * @override\n   */\n  formatTooltip: function (dataIndex, multipleSeries, dataType) {\n    // dataType === 'node' or empty do not show tooltip by default\n    if (dataType === 'edge') {\n      var params = this.getDataParams(dataIndex, dataType);\n      var rawDataOpt = params.data;\n      var html = rawDataOpt.source + ' -- ' + rawDataOpt.target;\n\n      if (params.value) {\n        html += ' : ' + params.value;\n      }\n\n      return encodeHTML(html);\n    }\n\n    return SankeySeries.superCall(this, 'formatTooltip', dataIndex, multipleSeries);\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    layout: null,\n    // the position of the whole view\n    left: '5%',\n    top: '5%',\n    right: '20%',\n    bottom: '5%',\n    // the dx of the node\n    nodeWidth: 20,\n    // the vertical distance between two nodes\n    nodeGap: 8,\n    // the number of iterations to change the position of the node\n    layoutIterations: 32,\n    label: {\n      normal: {\n        show: true,\n        position: 'right',\n        color: '#000',\n        fontSize: 12\n      },\n      emphasis: {\n        show: true\n      }\n    },\n    itemStyle: {\n      normal: {\n        borderWidth: 1,\n        borderColor: '#333'\n      }\n    },\n    lineStyle: {\n      normal: {\n        color: '#314656',\n        opacity: 0.2,\n        curveness: 0.5\n      },\n      emphasis: {\n        opacity: 0.6\n      }\n    },\n    animationEasing: 'linear',\n    animationDuration: 1000\n  }\n});\nvar _default = SankeySeries;\nmodule.exports = _default;","var graphic = require(\"../../util/graphic\");\n\nvar echarts = require(\"../../echarts\");\n\n/**\n * @file  The file used to draw sankey view\n * @author  Deqing Li(annong035@gmail.com)\n */\nvar SankeyShape = graphic.extendShape({\n  shape: {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    cpx1: 0,\n    cpy1: 0,\n    cpx2: 0,\n    cpy2: 0,\n    extent: 0\n  },\n  buildPath: function (ctx, shape) {\n    var halfExtent = shape.extent / 2;\n    ctx.moveTo(shape.x1, shape.y1 - halfExtent);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1 - halfExtent, shape.cpx2, shape.cpy2 - halfExtent, shape.x2, shape.y2 - halfExtent);\n    ctx.lineTo(shape.x2, shape.y2 + halfExtent);\n    ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + halfExtent, shape.cpx1, shape.cpy1 + halfExtent, shape.x1, shape.y1 + halfExtent);\n    ctx.closePath();\n  }\n});\n\nvar _default = echarts.extendChartView({\n  type: 'sankey',\n\n  /**\n   * @private\n   * @type {module:echarts/chart/sankey/SankeySeries}\n   */\n  _model: null,\n  render: function (seriesModel, ecModel, api) {\n    var graph = seriesModel.getGraph();\n    var group = this.group;\n    var layoutInfo = seriesModel.layoutInfo;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    this._model = seriesModel;\n    group.removeAll();\n    group.attr('position', [layoutInfo.x, layoutInfo.y]); // generate a bezire Curve for each edge\n\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyShape();\n      curve.dataIndex = edge.dataIndex;\n      curve.seriesIndex = seriesModel.seriesIndex;\n      curve.dataType = 'edge';\n      var lineStyleModel = edge.getModel('lineStyle.normal');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var n2Layout = edge.node2.getLayout();\n      var edgeLayout = edge.getLayout();\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      var x1 = n1Layout.x + n1Layout.dx;\n      var y1 = n1Layout.y + edgeLayout.sy + edgeLayout.dy / 2;\n      var x2 = n2Layout.x;\n      var y2 = n2Layout.y + edgeLayout.ty + edgeLayout.dy / 2;\n      var cpx1 = x1 * (1 - curvature) + x2 * curvature;\n      var cpy1 = y1;\n      var cpx2 = x1 * curvature + x2 * (1 - curvature);\n      var cpy2 = y2;\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.setStyle(lineStyleModel.getItemStyle()); // Special color, use source node color or target node color\n\n      switch (curve.style.fill) {\n        case 'source':\n          curve.style.fill = edge.node1.getVisual('color');\n          break;\n\n        case 'target':\n          curve.style.fill = edge.node2.getVisual('color');\n          break;\n      }\n\n      graphic.setHoverStyle(curve, edge.getModel('lineStyle.emphasis').getItemStyle());\n      group.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n    }); // generate a rect  for each node\n\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var labelModel = itemModel.getModel('label.normal');\n      var labelHoverModel = itemModel.getModel('label.emphasis');\n      var rect = new graphic.Rect({\n        shape: {\n          x: layout.x,\n          y: layout.y,\n          width: node.getLayout().dx,\n          height: node.getLayout().dy\n        },\n        style: itemModel.getModel('itemStyle.normal').getItemStyle()\n      });\n      var hoverStyle = node.getModel('itemStyle.emphasis').getItemStyle();\n      graphic.setLabelStyle(rect.style, hoverStyle, labelModel, labelHoverModel, {\n        labelFetcher: seriesModel,\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id,\n        isRectText: true\n      });\n      rect.setStyle('fill', node.getVisual('color'));\n      graphic.setHoverStyle(rect, hoverStyle);\n      group.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      rect.dataType = 'node';\n    });\n\n    if (!this._data && seriesModel.get('animation')) {\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\n        group.removeClipPath();\n      }));\n    }\n\n    this._data = seriesModel.getData();\n  },\n  dispose: function () {}\n}); // add animation to the view\n\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20,\n      height: rect.height + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nmodule.exports = _default;","var layout = require(\"../../util/layout\");\n\nvar nest = require(\"../../util/array/nest\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/**\n * @file The layout algorithm of sankey view\n * @author  Deqing Li(annong035@gmail.com)\n */\nfunction _default(ecModel, api, payload) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var nodeWidth = seriesModel.get('nodeWidth');\n    var nodeGap = seriesModel.get('nodeGap');\n    var layoutInfo = getViewRect(seriesModel, api);\n    seriesModel.layoutInfo = layoutInfo;\n    var width = layoutInfo.width;\n    var height = layoutInfo.height;\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n    var edges = graph.edges;\n    computeNodeValues(nodes);\n    var filteredNodes = zrUtil.filter(nodes, function (node) {\n      return node.getLayout().value === 0;\n    });\n    var iterations = filteredNodes.length !== 0 ? 0 : seriesModel.get('layoutIterations');\n    layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations);\n  });\n}\n/**\n * Get the layout position of the whole view\n *\n * @param {module:echarts/model/Series} seriesModel  the model object of sankey series\n * @param {module:echarts/ExtensionAPI} api  provide the API list that the developer can call\n * @return {module:zrender/core/BoundingRect}  size of rect to draw the sankey view\n */\n\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations) {\n  computeNodeBreadths(nodes, nodeWidth, width);\n  computeNodeDepths(nodes, edges, height, nodeGap, iterations);\n  computeEdgeDepths(nodes);\n}\n/**\n * Compute the value of each node by summing the associated edge's value\n *\n * @param {module:echarts/data/Graph~Node} nodes  node of sankey view\n */\n\n\nfunction computeNodeValues(nodes) {\n  zrUtil.each(nodes, function (node) {\n    var value1 = sum(node.outEdges, getEdgeValue);\n    var value2 = sum(node.inEdges, getEdgeValue);\n    var value = Math.max(value1, value2);\n    node.setLayout({\n      value: value\n    }, true);\n  });\n}\n/**\n * Compute the x-position for each node\n *\n * @param {module:echarts/data/Graph~Node} nodes  node of sankey view\n * @param  {number} nodeWidth  the dx of the node\n * @param  {number} width  the whole width of the area to draw the view\n */\n\n\nfunction computeNodeBreadths(nodes, nodeWidth, width) {\n  var remainNodes = nodes;\n  var nextNode = null;\n  var x = 0;\n  var kx = 0;\n\n  while (remainNodes.length) {\n    nextNode = [];\n\n    for (var i = 0, len = remainNodes.length; i < len; i++) {\n      var node = remainNodes[i];\n      node.setLayout({\n        x: x\n      }, true);\n      node.setLayout({\n        dx: nodeWidth\n      }, true);\n\n      for (var j = 0, lenj = node.outEdges.length; j < lenj; j++) {\n        nextNode.push(node.outEdges[j].node2);\n      }\n    }\n\n    remainNodes = nextNode;\n    ++x;\n  }\n\n  moveSinksRight(nodes, x);\n  kx = (width - nodeWidth) / (x - 1);\n  scaleNodeBreadths(nodes, kx);\n}\n/**\n * All the node without outEgdes are assigned maximum x-position and\n *     be aligned in the last column.\n *\n * @param {module:echarts/data/Graph~Node} nodes  node of sankey view\n * @param {number} x  value (x-1) use to assign to node without outEdges\n *     as x-position\n */\n\n\nfunction moveSinksRight(nodes, x) {\n  zrUtil.each(nodes, function (node) {\n    if (!node.outEdges.length) {\n      node.setLayout({\n        x: x - 1\n      }, true);\n    }\n  });\n}\n/**\n * Scale node x-position to the width\n *\n * @param {module:echarts/data/Graph~Node} nodes  node of sankey view\n * @param {number} kx   multiple used to scale nodes\n */\n\n\nfunction scaleNodeBreadths(nodes, kx) {\n  zrUtil.each(nodes, function (node) {\n    var nodeX = node.getLayout().x * kx;\n    node.setLayout({\n      x: nodeX\n    }, true);\n  });\n}\n/**\n * Using Gauss-Seidel iterations method to compute the node depth(y-position)\n *\n * @param {module:echarts/data/Graph~Node} nodes  node of sankey view\n * @param {module:echarts/data/Graph~Edge} edges  edge of sankey view\n * @param {number} height  the whole height of the area to draw the view\n * @param {number} nodeGap  the vertical distance between two nodes\n *     in the same column.\n * @param {number} iterations  the number of iterations for the algorithm\n */\n\n\nfunction computeNodeDepths(nodes, edges, height, nodeGap, iterations) {\n  var nodesByBreadth = nest().key(function (d) {\n    return d.getLayout().x;\n  }).sortKeys(ascending).entries(nodes).map(function (d) {\n    return d.values;\n  });\n  initializeNodeDepth(nodes, nodesByBreadth, edges, height, nodeGap);\n  resolveCollisions(nodesByBreadth, nodeGap, height);\n\n  for (var alpha = 1; iterations > 0; iterations--) {\n    // 0.99 is a experience parameter, ensure that each iterations of\n    // changes as small as possible.\n    alpha *= 0.99;\n    relaxRightToLeft(nodesByBreadth, alpha);\n    resolveCollisions(nodesByBreadth, nodeGap, height);\n    relaxLeftToRight(nodesByBreadth, alpha);\n    resolveCollisions(nodesByBreadth, nodeGap, height);\n  }\n}\n/**\n * Compute the original y-position for each node\n *\n * @param {module:echarts/data/Graph~Node} nodes  node of sankey view\n * @param {Array.<Array.<module:echarts/data/Graph~Node>>} nodesByBreadth\n *     group by the array of all sankey nodes based on the nodes x-position.\n * @param {module:echarts/data/Graph~Edge} edges  edge of sankey view\n * @param {number} height  the whole height of the area to draw the view\n * @param {number} nodeGap  the vertical distance between two nodes\n */\n\n\nfunction initializeNodeDepth(nodes, nodesByBreadth, edges, height, nodeGap) {\n  var kyArray = [];\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    var n = nodes.length;\n    var sum = 0;\n    zrUtil.each(nodes, function (node) {\n      sum += node.getLayout().value;\n    });\n    var ky = (height - (n - 1) * nodeGap) / sum;\n    kyArray.push(ky);\n  });\n  kyArray.sort(function (a, b) {\n    return a - b;\n  });\n  var ky0 = kyArray[0];\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node, i) {\n      node.setLayout({\n        y: i\n      }, true);\n      var nodeDy = node.getLayout().value * ky0;\n      node.setLayout({\n        dy: nodeDy\n      }, true);\n    });\n  });\n  zrUtil.each(edges, function (edge) {\n    var edgeDy = +edge.getValue() * ky0;\n    edge.setLayout({\n      dy: edgeDy\n    }, true);\n  });\n}\n/**\n * Resolve the collision of initialized depth (y-position)\n *\n * @param {Array.<Array.<module:echarts/data/Graph~Node>>} nodesByBreadth\n *     group by the array of all sankey nodes based on the nodes x-position.\n * @param {number} nodeGap  the vertical distance between two nodes\n * @param {number} height  the whole height of the area to draw the view\n */\n\n\nfunction resolveCollisions(nodesByBreadth, nodeGap, height) {\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    var node;\n    var dy;\n    var y0 = 0;\n    var n = nodes.length;\n    var i;\n    nodes.sort(ascendingDepth);\n\n    for (i = 0; i < n; i++) {\n      node = nodes[i];\n      dy = y0 - node.getLayout().y;\n\n      if (dy > 0) {\n        var nodeY = node.getLayout().y + dy;\n        node.setLayout({\n          y: nodeY\n        }, true);\n      }\n\n      y0 = node.getLayout().y + node.getLayout().dy + nodeGap;\n    } // if the bottommost node goes outside the bounds, push it back up\n\n\n    dy = y0 - nodeGap - height;\n\n    if (dy > 0) {\n      var nodeY = node.getLayout().y - dy;\n      node.setLayout({\n        y: nodeY\n      }, true);\n      y0 = node.getLayout().y;\n\n      for (i = n - 2; i >= 0; --i) {\n        node = nodes[i];\n        dy = node.getLayout().y + node.getLayout().dy + nodeGap - y0;\n\n        if (dy > 0) {\n          nodeY = node.getLayout().y - dy;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n\n        y0 = node.getLayout().y;\n      }\n    }\n  });\n}\n/**\n * Change the y-position of the nodes, except most the right side nodes\n *\n * @param {Array.<Array.<module:echarts/data/Graph~Node>>} nodesByBreadth\n *     group by the array of all sankey nodes based on the node x-position.\n * @param {number} alpha  parameter used to adjust the nodes y-position\n */\n\n\nfunction relaxRightToLeft(nodesByBreadth, alpha) {\n  zrUtil.each(nodesByBreadth.slice().reverse(), function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.outEdges.length) {\n        var y = sum(node.outEdges, weightedTarget) / sum(node.outEdges, getEdgeValue);\n        var nodeY = node.getLayout().y + (y - center(node)) * alpha;\n        node.setLayout({\n          y: nodeY\n        }, true);\n      }\n    });\n  });\n}\n\nfunction weightedTarget(edge) {\n  return center(edge.node2) * edge.getValue();\n}\n/**\n * Change the y-position of the nodes, except most the left side nodes\n *\n * @param {Array.<Array.<module:echarts/data/Graph~Node>>} nodesByBreadth\n *     group by the array of all sankey nodes based on the node x-position.\n * @param {number} alpha  parameter used to adjust the nodes y-position\n */\n\n\nfunction relaxLeftToRight(nodesByBreadth, alpha) {\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.inEdges.length) {\n        var y = sum(node.inEdges, weightedSource) / sum(node.inEdges, getEdgeValue);\n        var nodeY = node.getLayout().y + (y - center(node)) * alpha;\n        node.setLayout({\n          y: nodeY\n        }, true);\n      }\n    });\n  });\n}\n\nfunction weightedSource(edge) {\n  return center(edge.node1) * edge.getValue();\n}\n/**\n * Compute the depth(y-position) of each edge\n *\n * @param {module:echarts/data/Graph~Node} nodes  node of sankey view\n */\n\n\nfunction computeEdgeDepths(nodes) {\n  zrUtil.each(nodes, function (node) {\n    node.outEdges.sort(ascendingTargetDepth);\n    node.inEdges.sort(ascendingSourceDepth);\n  });\n  zrUtil.each(nodes, function (node) {\n    var sy = 0;\n    var ty = 0;\n    zrUtil.each(node.outEdges, function (edge) {\n      edge.setLayout({\n        sy: sy\n      }, true);\n      sy += edge.getLayout().dy;\n    });\n    zrUtil.each(node.inEdges, function (edge) {\n      edge.setLayout({\n        ty: ty\n      }, true);\n      ty += edge.getLayout().dy;\n    });\n  });\n}\n\nfunction ascendingTargetDepth(a, b) {\n  return a.node2.getLayout().y - b.node2.getLayout().y;\n}\n\nfunction ascendingSourceDepth(a, b) {\n  return a.node1.getLayout().y - b.node1.getLayout().y;\n}\n\nfunction sum(array, f) {\n  var sum = 0;\n  var len = array.length;\n  var i = -1;\n\n  while (++i < len) {\n    var value = +f.call(array, array[i], i);\n\n    if (!isNaN(value)) {\n      sum += value;\n    }\n  }\n\n  return sum;\n}\n\nfunction center(node) {\n  return node.getLayout().y + node.getLayout().dy / 2;\n}\n\nfunction ascendingDepth(a, b) {\n  return a.getLayout().y - b.getLayout().y;\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a === b ? 0 : NaN;\n}\n\nfunction getEdgeValue(edge) {\n  return edge.getValue();\n}\n\nmodule.exports = _default;","var VisualMapping = require(\"../../visual/VisualMapping\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/**\n * @file Visual encoding for sankey view\n * @author  Deqing Li(annong035@gmail.com)\n */\nfunction _default(ecModel, payload) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n    nodes.sort(function (a, b) {\n      return a.getLayout().value - b.getLayout().value;\n    });\n    var minValue = nodes[0].getLayout().value;\n    var maxValue = nodes[nodes.length - 1].getLayout().value;\n    zrUtil.each(nodes, function (node) {\n      var mapping = new VisualMapping({\n        type: 'color',\n        mappingMethod: 'linear',\n        dataExtent: [minValue, maxValue],\n        visual: seriesModel.get('color')\n      });\n      var mapValueToColor = mapping.mapValueToVisual(node.getLayout().value);\n      node.setVisual('color', mapValueToColor); // If set itemStyle.normal.color\n\n      var itemModel = node.getModel();\n      var customColor = itemModel.get('itemStyle.normal.color');\n\n      if (customColor != null) {\n        node.setVisual('color', customColor);\n      }\n    });\n  });\n}\n\nmodule.exports = _default;","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"./scatter/ScatterSeries\");\n\nrequire(\"./scatter/ScatterView\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar layoutPoints = require(\"../layout/points\");\n\nrequire(\"../component/gridSimple\");\n\n// In case developer forget to include grid component\necharts.registerVisual(zrUtil.curry(visualSymbol, 'scatter', 'circle', null));\necharts.registerLayout(zrUtil.curry(layoutPoints, 'scatter'));","var createListFromArray = require(\"../helper/createListFromArray\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar _default = SeriesModel.extend({\n  type: 'series.scatter',\n  dependencies: ['grid', 'polar', 'geo', 'singleAxis', 'calendar'],\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(option.data, this, ecModel);\n  },\n  brushSelector: 'point',\n  defaultOption: {\n    coordinateSystem: 'cartesian2d',\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // symbol: null,        // \n    symbolSize: 10,\n    // symbolSize * 2\n    // symbolRotate: null,  // \n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    // cursor: null,\n    // label: {\n    // normal: {\n    // show: false\n    // distance: 5,\n    // formatter: Tooltip.formatter\n    // position: 'top''right'\n    //           'inside'|'left'|'right'|'top'|'bottom'\n    // TEXTSTYLE\n    //     }\n    // },\n    itemStyle: {\n      normal: {\n        opacity: 0.8 // color: \n\n      }\n    }\n  }\n});\n\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar SymbolDraw = require(\"../helper/SymbolDraw\");\n\nvar LargeSymbolDraw = require(\"../helper/LargeSymbolDraw\");\n\necharts.extendChartView({\n  type: 'scatter',\n  init: function () {\n    this._normalSymbolDraw = new SymbolDraw();\n    this._largeSymbolDraw = new LargeSymbolDraw();\n  },\n  render: function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var largeSymbolDraw = this._largeSymbolDraw;\n    var normalSymbolDraw = this._normalSymbolDraw;\n    var group = this.group;\n    var symbolDraw = seriesModel.get('large') && data.count() > seriesModel.get('largeThreshold') ? largeSymbolDraw : normalSymbolDraw;\n    this._symbolDraw = symbolDraw;\n    symbolDraw.updateData(data);\n    group.add(symbolDraw.group);\n    group.remove(symbolDraw === largeSymbolDraw ? normalSymbolDraw.group : largeSymbolDraw.group);\n  },\n  updateLayout: function (seriesModel) {\n    this._symbolDraw.updateLayout(seriesModel);\n  },\n  remove: function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(api, true);\n  },\n  dispose: function () {}\n});","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"../component/singleAxis\");\n\nrequire(\"./themeRiver/ThemeRiverSeries\");\n\nrequire(\"./themeRiver/ThemeRiverView\");\n\nvar themeRiverLayout = require(\"./themeRiver/themeRiverLayout\");\n\nvar themeRiverVisual = require(\"./themeRiver/themeRiverVisual\");\n\nvar dataFilter = require(\"../processor/dataFilter\");\n\necharts.registerLayout(themeRiverLayout);\necharts.registerVisual(themeRiverVisual);\necharts.registerProcessor(zrUtil.curry(dataFilter, 'themeRiver'));","var completeDimensions = require(\"../../data/helper/completeDimensions\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar List = require(\"../../data/List\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _format = require(\"../../util/format\");\n\nvar encodeHTML = _format.encodeHTML;\n\nvar nest = require(\"../../util/array/nest\");\n\n/**\n * @file  Define the themeRiver view's series model\n * @author Deqing Li(annong035@gmail.com)\n */\nvar DATA_NAME_INDEX = 2;\nvar ThemeRiverSeries = SeriesModel.extend({\n  type: 'series.themeRiver',\n  dependencies: ['singleAxis'],\n\n  /**\n   * @readOnly\n   * @type {module:zrender/core/util#HashMap}\n   */\n  nameMap: null,\n\n  /**\n   * @override\n   */\n  init: function (option) {\n    ThemeRiverSeries.superApply(this, 'init', arguments); // Put this function here is for the sake of consistency of code style.\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n    this.legendDataProvider = function () {\n      return this.getRawData();\n    };\n  },\n\n  /**\n   * If there is no value of a certain point in the time for some event,set it value to 0.\n   *\n   * @param {Array} data  initial data in the option\n   * @return {Array}\n   */\n  fixData: function (data) {\n    var rawDataLength = data.length; // grouped data by name\n\n    var dataByName = nest().key(function (dataItem) {\n      return dataItem[2];\n    }).entries(data); // data group in each layer\n\n    var layData = zrUtil.map(dataByName, function (d) {\n      return {\n        name: d.key,\n        dataList: d.values\n      };\n    });\n    var layerNum = layData.length;\n    var largestLayer = -1;\n    var index = -1;\n\n    for (var i = 0; i < layerNum; ++i) {\n      var len = layData[i].dataList.length;\n\n      if (len > largestLayer) {\n        largestLayer = len;\n        index = i;\n      }\n    }\n\n    for (var k = 0; k < layerNum; ++k) {\n      if (k === index) {\n        continue;\n      }\n\n      var name = layData[k].name;\n\n      for (var j = 0; j < largestLayer; ++j) {\n        var timeValue = layData[index].dataList[j][0];\n        var length = layData[k].dataList.length;\n        var keyIndex = -1;\n\n        for (var l = 0; l < length; ++l) {\n          var value = layData[k].dataList[l][0];\n\n          if (value === timeValue) {\n            keyIndex = l;\n            break;\n          }\n        }\n\n        if (keyIndex === -1) {\n          data[rawDataLength] = [];\n          data[rawDataLength][0] = timeValue;\n          data[rawDataLength][1] = 0;\n          data[rawDataLength][2] = name;\n          rawDataLength++;\n        }\n      }\n    }\n\n    return data;\n  },\n\n  /**\n   * @override\n   * @param  {Object} option  the initial option that user gived\n   * @param  {module:echarts/model/Model} ecModel  the model object for themeRiver option\n   * @return {module:echarts/data/List}\n   */\n  getInitialData: function (option, ecModel) {\n    var dimensions = [];\n    var singleAxisModel = ecModel.queryComponents({\n      mainType: 'singleAxis',\n      index: this.get('singleAxisIndex'),\n      id: this.get('singleAxisId')\n    })[0];\n    var axisType = singleAxisModel.get('type');\n    dimensions = [{\n      name: 'time',\n      // FIXME common?\n      type: axisType === 'category' ? 'ordinal' : axisType === 'time' ? 'time' : 'float'\n    }, {\n      name: 'value',\n      type: 'float'\n    }, {\n      name: 'name',\n      type: 'ordinal'\n    }]; // filter the data item with the value of label is undefined\n\n    var filterData = zrUtil.filter(option.data, function (dataItem) {\n      return dataItem[2] !== undefined;\n    });\n    var data = this.fixData(filterData || []);\n    var nameList = [];\n    var nameMap = this.nameMap = zrUtil.createHashMap();\n    var count = 0;\n\n    for (var i = 0; i < data.length; ++i) {\n      nameList.push(data[i][DATA_NAME_INDEX]);\n\n      if (!nameMap.get(data[i][DATA_NAME_INDEX])) {\n        nameMap.set(data[i][DATA_NAME_INDEX], count);\n        count++;\n      }\n    }\n\n    dimensions = completeDimensions(dimensions, data);\n    var list = new List(dimensions, this);\n    list.initData(data, nameList);\n    return list;\n  },\n\n  /**\n   * Used by single coordinate\n   *\n   * @param {string} axisDim  the dimension for single coordinate\n   * @return {Array.<string> } specified dimensions on the axis.\n   */\n  coordDimToDataDim: function (axisDim) {\n    return ['time'];\n  },\n\n  /**\n   * The raw data is divided into multiple layers and each layer\n   *     has same name.\n   *\n   * @return {Array.<Array.<number>>}\n   */\n  getLayerSeries: function () {\n    var data = this.getData();\n    var lenCount = data.count();\n    var indexArr = [];\n\n    for (var i = 0; i < lenCount; ++i) {\n      indexArr[i] = i;\n    } // data group by name\n\n\n    var dataByName = nest().key(function (index) {\n      return data.get('name', index);\n    }).entries(indexArr);\n    var layerSeries = zrUtil.map(dataByName, function (d) {\n      return {\n        name: d.key,\n        indices: d.values\n      };\n    });\n\n    for (var j = 0; j < layerSeries.length; ++j) {\n      layerSeries[j].indices.sort(comparer);\n    }\n\n    function comparer(index1, index2) {\n      return data.get('time', index1) - data.get('time', index2);\n    }\n\n    return layerSeries;\n  },\n\n  /**\n   * Get data indices for show tooltip content\n   *\n   * @param {Array.<string>|string} dim  single coordinate dimension\n   * @param {number} value axis value\n   * @param {module:echarts/coord/single/SingleAxis} baseAxis  single Axis used\n   *     the themeRiver.\n   * @return {Object} {dataIndices, nestestValue}\n   */\n  getAxisTooltipData: function (dim, value, baseAxis) {\n    if (!zrUtil.isArray(dim)) {\n      dim = dim ? [dim] : [];\n    }\n\n    var data = this.getData();\n    var layerSeries = this.getLayerSeries();\n    var indices = [];\n    var layerNum = layerSeries.length;\n    var nestestValue;\n\n    for (var i = 0; i < layerNum; ++i) {\n      var minDist = Number.MAX_VALUE;\n      var nearestIdx = -1;\n      var pointNum = layerSeries[i].indices.length;\n\n      for (var j = 0; j < pointNum; ++j) {\n        var theValue = data.get(dim[0], layerSeries[i].indices[j]);\n        var dist = Math.abs(theValue - value);\n\n        if (dist <= minDist) {\n          nestestValue = theValue;\n          minDist = dist;\n          nearestIdx = layerSeries[i].indices[j];\n        }\n      }\n\n      indices.push(nearestIdx);\n    }\n\n    return {\n      dataIndices: indices,\n      nestestValue: nestestValue\n    };\n  },\n\n  /**\n   * @override\n   * @param {number} dataIndex  index of data\n   */\n  formatTooltip: function (dataIndex) {\n    var data = this.getData();\n    var htmlName = data.get('name', dataIndex);\n    var htmlValue = data.get('value', dataIndex);\n\n    if (isNaN(htmlValue) || htmlValue == null) {\n      htmlValue = '-';\n    }\n\n    return encodeHTML(htmlName + ' : ' + htmlValue);\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'singleAxis',\n    // gap in axis's orthogonal orientation\n    boundaryGap: ['10%', '10%'],\n    // legendHoverLink: true,\n    singleAxisIndex: 0,\n    animationEasing: 'linear',\n    label: {\n      normal: {\n        margin: 4,\n        textAlign: 'right',\n        show: true,\n        position: 'left',\n        color: '#000',\n        fontSize: 11\n      },\n      emphasis: {\n        show: true\n      }\n    }\n  }\n});\nvar _default = ThemeRiverSeries;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar _poly = require(\"../line/poly\");\n\nvar Polygon = _poly.Polygon;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar bind = _util.bind;\nvar extend = _util.extend;\n\nvar DataDiffer = require(\"../../data/DataDiffer\");\n\n/**\n * @file  The file used to draw themeRiver view\n * @author  Deqing Li(annong035@gmail.com)\n */\nvar _default = echarts.extendChartView({\n  type: 'themeRiver',\n  init: function () {\n    this._layers = [];\n  },\n  render: function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var group = this.group;\n    var layerSeries = seriesModel.getLayerSeries();\n    var layoutInfo = data.getLayout('layoutInfo');\n    var rect = layoutInfo.rect;\n    var boundaryGap = layoutInfo.boundaryGap;\n    group.attr('position', [0, rect.y + boundaryGap[0]]);\n\n    function keyGetter(item) {\n      return item.name;\n    }\n\n    var dataDiffer = new DataDiffer(this._layersSeries || [], layerSeries, keyGetter, keyGetter);\n    var newLayersGroups = {};\n    dataDiffer.add(bind(process, this, 'add')).update(bind(process, this, 'update')).remove(bind(process, this, 'remove')).execute();\n\n    function process(status, idx, oldIdx) {\n      var oldLayersGroups = this._layers;\n\n      if (status === 'remove') {\n        group.remove(oldLayersGroups[idx]);\n        return;\n      }\n\n      var points0 = [];\n      var points1 = [];\n      var color;\n      var indices = layerSeries[idx].indices;\n\n      for (var j = 0; j < indices.length; j++) {\n        var layout = data.getItemLayout(indices[j]);\n        var x = layout.x;\n        var y0 = layout.y0;\n        var y = layout.y;\n        points0.push([x, y0]);\n        points1.push([x, y0 + y]);\n        color = data.getItemVisual(indices[j], 'color');\n      }\n\n      var polygon;\n      var text;\n      var textLayout = data.getItemLayout(indices[0]);\n      var itemModel = data.getItemModel(indices[j - 1]);\n      var labelModel = itemModel.getModel('label.normal');\n      var margin = labelModel.get('margin');\n\n      if (status === 'add') {\n        var layerGroup = newLayersGroups[idx] = new graphic.Group();\n        polygon = new Polygon({\n          shape: {\n            points: points0,\n            stackedOnPoints: points1,\n            smooth: 0.4,\n            stackedOnSmooth: 0.4,\n            smoothConstraint: false\n          },\n          z2: 0\n        });\n        text = new graphic.Text({\n          style: {\n            x: textLayout.x - margin,\n            y: textLayout.y0 + textLayout.y / 2\n          }\n        });\n        layerGroup.add(polygon);\n        layerGroup.add(text);\n        group.add(layerGroup);\n        polygon.setClipPath(createGridClipShape(polygon.getBoundingRect(), seriesModel, function () {\n          polygon.removeClipPath();\n        }));\n      } else {\n        var layerGroup = oldLayersGroups[oldIdx];\n        polygon = layerGroup.childAt(0);\n        text = layerGroup.childAt(1);\n        group.add(layerGroup);\n        newLayersGroups[idx] = layerGroup;\n        graphic.updateProps(polygon, {\n          shape: {\n            points: points0,\n            stackedOnPoints: points1\n          }\n        }, seriesModel);\n        graphic.updateProps(text, {\n          style: {\n            x: textLayout.x - margin,\n            y: textLayout.y0 + textLayout.y / 2\n          }\n        }, seriesModel);\n      }\n\n      var hoverItemStyleModel = itemModel.getModel('itemStyle.emphasis');\n      var itemStyleModel = itemModel.getModel('itemStyle.normal');\n      graphic.setTextStyle(text.style, labelModel, {\n        text: labelModel.get('show') ? seriesModel.getFormattedLabel(indices[j - 1], 'normal') || data.getName(indices[j - 1]) : null,\n        textVerticalAlign: 'middle'\n      });\n      polygon.setStyle(extend({\n        fill: color\n      }, itemStyleModel.getItemStyle(['color'])));\n      graphic.setHoverStyle(polygon, hoverItemStyleModel.getItemStyle());\n    }\n\n    this._layersSeries = layerSeries;\n    this._layers = newLayersGroups;\n  },\n  dispose: function () {}\n}); // add animation to the view\n\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20,\n      height: rect.height + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar numberUtil = require(\"../../util/number\");\n\n/**\n * @file  Using layout algorithm transform the raw data to layout information.\n * @author Deqing Li(annong035@gmail.com)\n */\nfunction _default(ecModel, api) {\n  ecModel.eachSeriesByType('themeRiver', function (seriesModel) {\n    var data = seriesModel.getData();\n    var single = seriesModel.coordinateSystem;\n    var layoutInfo = {}; // use the axis boundingRect for view\n\n    var rect = single.getRect();\n    layoutInfo.rect = rect;\n    var boundaryGap = seriesModel.get('boundaryGap');\n    var axis = single.getAxis();\n    layoutInfo.boundaryGap = boundaryGap;\n\n    if (axis.orient === 'horizontal') {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.height);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.height);\n      var height = rect.height - boundaryGap[0] - boundaryGap[1];\n      themeRiverLayout(data, seriesModel, height);\n    } else {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.width);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.width);\n      var width = rect.width - boundaryGap[0] - boundaryGap[1];\n      themeRiverLayout(data, seriesModel, width);\n    }\n\n    data.setLayout('layoutInfo', layoutInfo);\n  });\n}\n/**\n * The layout information about themeriver\n *\n * @param {module:echarts/data/List} data  data in the series\n * @param {module:echarts/model/Series} seriesModel  the model object of themeRiver series\n * @param {number} height  value used to compute every series height\n */\n\n\nfunction themeRiverLayout(data, seriesModel, height) {\n  if (!data.count()) {\n    return;\n  }\n\n  var coordSys = seriesModel.coordinateSystem; // the data in each layer are organized into a series.\n\n  var layerSeries = seriesModel.getLayerSeries(); // the points in each layer.\n\n  var layerPoints = zrUtil.map(layerSeries, function (singleLayer) {\n    return zrUtil.map(singleLayer.indices, function (idx) {\n      var pt = coordSys.dataToPoint(data.get('time', idx));\n      pt[1] = data.get('value', idx);\n      return pt;\n    });\n  });\n  var base = computeBaseline(layerPoints);\n  var baseLine = base.y0;\n  var ky = height / base.max; // set layout information for each item.\n\n  var n = layerSeries.length;\n  var m = layerSeries[0].indices.length;\n  var baseY0;\n\n  for (var j = 0; j < m; ++j) {\n    baseY0 = baseLine[j] * ky;\n    data.setItemLayout(layerSeries[0].indices[j], {\n      layerIndex: 0,\n      x: layerPoints[0][j][0],\n      y0: baseY0,\n      y: layerPoints[0][j][1] * ky\n    });\n\n    for (var i = 1; i < n; ++i) {\n      baseY0 += layerPoints[i - 1][j][1] * ky;\n      data.setItemLayout(layerSeries[i].indices[j], {\n        layerIndex: i,\n        x: layerPoints[i][j][0],\n        y0: baseY0,\n        y: layerPoints[i][j][1] * ky\n      });\n    }\n  }\n}\n/**\n * Compute the baseLine of the rawdata\n * Inspired by Lee Byron's paper Stacked Graphs - Geometry & Aesthetics\n *\n * @param  {Array.<Array>} data  the points in each layer\n * @return {Object}\n */\n\n\nfunction computeBaseline(data) {\n  var layerNum = data.length;\n  var pointNum = data[0].length;\n  var sums = [];\n  var y0 = [];\n  var max = 0;\n  var temp;\n  var base = {};\n\n  for (var i = 0; i < pointNum; ++i) {\n    for (var j = 0, temp = 0; j < layerNum; ++j) {\n      temp += data[j][i][1];\n    }\n\n    if (temp > max) {\n      max = temp;\n    }\n\n    sums.push(temp);\n  }\n\n  for (var k = 0; k < pointNum; ++k) {\n    y0[k] = (max - sums[k]) / 2;\n  }\n\n  max = 0;\n\n  for (var l = 0; l < pointNum; ++l) {\n    var sum = sums[l] + y0[l];\n\n    if (sum > max) {\n      max = sum;\n    }\n  }\n\n  base.y0 = y0;\n  base.max = max;\n  return base;\n}\n\nmodule.exports = _default;","var _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\n\n/**\n * @file Visual encoding for themeRiver view\n * @author  Deqing Li(annong035@gmail.com)\n */\nfunction _default(ecModel) {\n  ecModel.eachSeriesByType('themeRiver', function (seriesModel) {\n    var data = seriesModel.getData();\n    var rawData = seriesModel.getRawData();\n    var colorList = seriesModel.get('color');\n    var idxMap = createHashMap();\n    data.each(function (idx) {\n      idxMap.set(data.getRawIndex(idx), idx);\n    });\n    rawData.each(function (rawIndex) {\n      var name = rawData.getName(rawIndex);\n      var color = colorList[(seriesModel.nameMap.get(name) - 1) % colorList.length];\n      rawData.setItemVisual(rawIndex, 'color', color);\n      var idx = idxMap.get(rawIndex);\n\n      if (idx != null) {\n        data.setItemVisual(idx, 'color', color);\n      }\n    });\n  });\n}\n\nmodule.exports = _default;","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"./tree/TreeSeries\");\n\nrequire(\"./tree/TreeView\");\n\nrequire(\"./tree/treeAction\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar orthogonalLayout = require(\"./tree/orthogonalLayout\");\n\nvar radialLayout = require(\"./tree/radialLayout\");\n\necharts.registerVisual(zrUtil.curry(visualSymbol, 'tree', 'circle', null));\necharts.registerLayout(orthogonalLayout);\necharts.registerLayout(radialLayout);","var SeriesModel = require(\"../../model/Series\");\n\nvar Tree = require(\"../../data/Tree\");\n\nvar _format = require(\"../../util/format\");\n\nvar encodeHTML = _format.encodeHTML;\n\n/**\n * @file Create data struct and define tree view's series model\n */\nvar _default = SeriesModel.extend({\n  type: 'series.tree',\n  layoutInfo: null,\n  // can support the position parameters 'left', 'top','right','bottom', 'width',\n  // 'height' in the setOption() with 'merge' mode normal.\n  layoutMode: 'box',\n\n  /**\n   * Init a tree data structure from data in option series\n   * @param  {Object} option  the object used to config echarts view\n   * @return {module:echarts/data/List} storage initial data\n   */\n  getInitialData: function (option) {\n    //create an virtual root\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    var leaves = option.leaves || {};\n    var treeOption = {};\n    treeOption.leaves = leaves;\n    var tree = Tree.createTree(root, this, treeOption);\n    var treeDepth = 0;\n    tree.eachNode('preorder', function (node) {\n      if (node.depth > treeDepth) {\n        treeDepth = node.depth;\n      }\n    });\n    var expandAndCollapse = option.expandAndCollapse;\n    var expandTreeDepth = expandAndCollapse && option.initialTreeDepth >= 0 ? option.initialTreeDepth : treeDepth;\n    tree.root.eachNode('preorder', function (node) {\n      var item = node.hostTree.data.getRawDataItem(node.dataIndex);\n      node.isExpand = item && item.collapsed != null ? !item.collapsed : node.depth <= expandTreeDepth;\n    });\n    return tree.data;\n  },\n\n  /**\n   * @override\n   * @param {number} dataIndex\n   */\n  formatTooltip: function (dataIndex) {\n    var tree = this.getData().tree;\n    var realRoot = tree.root.children[0];\n    var node = tree.getNodeByDataIndex(dataIndex);\n    var value = node.getValue();\n    var name = node.name;\n\n    while (node && node !== realRoot) {\n      name = node.parentNode.name + '.' + name;\n      node = node.parentNode;\n    }\n\n    return encodeHTML(name + (isNaN(value) || value == null ? '' : ' : ' + value));\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    // the position of the whole view\n    left: '12%',\n    top: '12%',\n    right: '12%',\n    bottom: '12%',\n    // the layout of the tree, two value can be selected, 'orthogonal' or 'radial'\n    layout: 'orthogonal',\n    // the orient of orthoginal layout, can be setted to 'horizontal' or 'vertical'\n    orient: 'horizontal',\n    symbol: 'emptyCircle',\n    symbolSize: 7,\n    expandAndCollapse: true,\n    initialTreeDepth: 2,\n    lineStyle: {\n      normal: {\n        color: '#ccc',\n        width: 1.5,\n        curveness: 0.5\n      }\n    },\n    itemStyle: {\n      normal: {\n        color: 'lightsteelblue',\n        borderColor: '#c23531',\n        borderWidth: 1.5\n      }\n    },\n    label: {\n      normal: {\n        show: true,\n        color: '#555'\n      }\n    },\n    leaves: {\n      label: {\n        normal: {\n          show: true\n        }\n      }\n    },\n    animationEasing: 'linear',\n    animationDuration: 700,\n    animationDurationUpdate: 1000\n  }\n});\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar SymbolClz = require(\"../helper/Symbol\");\n\nvar _layoutHelper = require(\"./layoutHelper\");\n\nvar radialCoordinate = _layoutHelper.radialCoordinate;\n\nvar echarts = require(\"../../echarts\");\n\n/**\n * @file  This file used to draw tree view\n */\nvar _default = echarts.extendChartView({\n  type: 'tree',\n\n  /**\n   * Init the chart\n   * @override\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  init: function (ecModel, api) {\n    /**\n     * @private\n     * @type {module:echarts/data/Tree}\n     */\n    this._oldTree;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this._mainGroup = new graphic.Group();\n    this.group.add(this._mainGroup);\n  },\n  render: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var layoutInfo = seriesModel.layoutInfo;\n    var group = this._mainGroup;\n    var layout = seriesModel.get('layout');\n\n    if (layout === 'radial') {\n      group.attr('position', [layoutInfo.x + layoutInfo.width / 2, layoutInfo.y + layoutInfo.height / 2]);\n    } else {\n      group.attr('position', [layoutInfo.x, layoutInfo.y]);\n    }\n\n    var oldData = this._data;\n    var seriesScope = {\n      expandAndCollapse: seriesModel.get('expandAndCollapse'),\n      layout: layout,\n      orient: seriesModel.get('orient'),\n      curvature: seriesModel.get('lineStyle.normal.curveness'),\n      symbolRotate: seriesModel.get('symbolRotate'),\n      symbolOffset: seriesModel.get('symbolOffset'),\n      hoverAnimation: seriesModel.get('hoverAnimation'),\n      useNameLabel: true,\n      fadeIn: true\n    };\n    data.diff(oldData).add(function (newIdx) {\n      if (symbolNeedsDraw(data, newIdx)) {\n        // create node and edge\n        updateNode(data, newIdx, null, group, seriesModel, seriesScope);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n\n      if (!symbolNeedsDraw(data, newIdx)) {\n        symbolEl && removeNode(data, newIdx, symbolEl, group, seriesModel, seriesScope);\n        return;\n      } // update  node and edge\n\n\n      updateNode(data, newIdx, symbolEl, group, seriesModel, seriesScope);\n    }).remove(function (oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      removeNode(data, oldIdx, symbolEl, group, seriesModel, seriesScope);\n    }).execute();\n\n    if (seriesScope.expandAndCollapse === true) {\n      data.eachItemGraphicEl(function (el, dataIndex) {\n        el.off('click').on('click', function () {\n          api.dispatchAction({\n            type: 'treeExpandAndCollapse',\n            seriesId: seriesModel.id,\n            dataIndex: dataIndex\n          });\n        });\n      });\n    }\n\n    this._data = data;\n  },\n  dispose: function () {},\n  remove: function () {\n    this._mainGroup.removeAll();\n\n    this._data = null;\n  }\n});\n\nfunction symbolNeedsDraw(data, dataIndex) {\n  var layout = data.getItemLayout(dataIndex);\n  return layout && !isNaN(layout.x) && !isNaN(layout.y) && data.getItemVisual(dataIndex, 'symbol') !== 'none';\n}\n\nfunction getTreeNodeStyle(node, itemModel, seriesScope) {\n  seriesScope.itemModel = itemModel;\n  seriesScope.itemStyle = itemModel.getModel('itemStyle.normal').getItemStyle();\n  seriesScope.hoverItemStyle = itemModel.getModel('itemStyle.emphasis').getItemStyle();\n  seriesScope.lineStyle = itemModel.getModel('lineStyle.normal').getLineStyle();\n  seriesScope.labelModel = itemModel.getModel('label.normal');\n  seriesScope.hoverLabelModel = itemModel.getModel('label.emphasis');\n\n  if (node.isExpand === false && node.children.length !== 0) {\n    seriesScope.symbolInnerColor = seriesScope.itemStyle.fill;\n  } else {\n    seriesScope.symbolInnerColor = '#fff';\n  }\n\n  return seriesScope;\n}\n\nfunction updateNode(data, dataIndex, symbolEl, group, seriesModel, seriesScope) {\n  var isInit = !symbolEl;\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var itemModel = node.getModel();\n  var seriesScope = getTreeNodeStyle(node, itemModel, seriesScope);\n  var virtualRoot = data.tree.root;\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceLayout = source.getLayout();\n  var sourceOldLayout = sourceSymbolEl ? {\n    x: sourceSymbolEl.position[0],\n    y: sourceSymbolEl.position[1],\n    rawX: sourceSymbolEl.__radialOldRawX,\n    rawY: sourceSymbolEl.__radialOldRawY\n  } : sourceLayout;\n  var targetLayout = node.getLayout();\n\n  if (isInit) {\n    symbolEl = new SymbolClz(data, dataIndex, seriesScope);\n    symbolEl.attr('position', [sourceOldLayout.x, sourceOldLayout.y]);\n  } else {\n    symbolEl.updateData(data, dataIndex, seriesScope);\n  }\n\n  symbolEl.__radialOldRawX = symbolEl.__radialRawX;\n  symbolEl.__radialOldRawY = symbolEl.__radialRawY;\n  symbolEl.__radialRawX = targetLayout.rawX;\n  symbolEl.__radialRawY = targetLayout.rawY;\n  group.add(symbolEl);\n  data.setItemGraphicEl(dataIndex, symbolEl);\n  graphic.updateProps(symbolEl, {\n    position: [targetLayout.x, targetLayout.y]\n  }, seriesModel);\n  var symbolPath = symbolEl.getSymbolPath();\n\n  if (seriesScope.layout === 'radial') {\n    var realRoot = virtualRoot.children[0];\n    var rootLayout = realRoot.getLayout();\n    var length = realRoot.children.length;\n    var rad;\n    var isLeft;\n\n    if (targetLayout.x === rootLayout.x && node.isExpand === true) {\n      var center = {};\n      center.x = (realRoot.children[0].getLayout().x + realRoot.children[length - 1].getLayout().x) / 2;\n      center.y = (realRoot.children[0].getLayout().y + realRoot.children[length - 1].getLayout().y) / 2;\n      rad = Math.atan2(center.y - rootLayout.y, center.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      isLeft = center.x < rootLayout.x;\n\n      if (isLeft) {\n        rad = rad - Math.PI;\n      }\n    } else {\n      rad = Math.atan2(targetLayout.y - rootLayout.y, targetLayout.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      if (node.children.length === 0 || node.children.length !== 0 && node.isExpand === false) {\n        isLeft = targetLayout.x < rootLayout.x;\n\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n      } else {\n        isLeft = targetLayout.x > rootLayout.x;\n\n        if (!isLeft) {\n          rad = rad - Math.PI;\n        }\n      }\n    }\n\n    var textPosition = isLeft ? 'left' : 'right';\n    symbolPath.setStyle({\n      textPosition: textPosition,\n      textRotation: -rad,\n      textOrigin: 'center',\n      verticalAlign: 'middle'\n    });\n  }\n\n  if (node.parentNode && node.parentNode !== virtualRoot) {\n    var edge = symbolEl.__edge;\n\n    if (!edge) {\n      edge = symbolEl.__edge = new graphic.BezierCurve({\n        shape: getEdgeShape(seriesScope, sourceOldLayout, sourceOldLayout),\n        style: zrUtil.defaults({\n          opacity: 0\n        }, seriesScope.lineStyle)\n      });\n    }\n\n    graphic.updateProps(edge, {\n      shape: getEdgeShape(seriesScope, sourceLayout, targetLayout),\n      style: {\n        opacity: 1\n      }\n    }, seriesModel);\n    group.add(edge);\n  }\n}\n\nfunction removeNode(data, dataIndex, symbolEl, group, seriesModel, seriesScope) {\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var virtualRoot = data.tree.root;\n  var itemModel = node.getModel();\n  var seriesScope = getTreeNodeStyle(node, itemModel, seriesScope);\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceLayout;\n\n  while (sourceLayout = source.getLayout(), sourceLayout == null) {\n    source = source.parentNode === virtualRoot ? source : source.parentNode || source;\n  }\n\n  graphic.updateProps(symbolEl, {\n    position: [sourceLayout.x + 1, sourceLayout.y + 1]\n  }, seriesModel, function () {\n    group.remove(symbolEl);\n    data.setItemGraphicEl(dataIndex, null);\n  });\n  symbolEl.fadeOut(null, {\n    keepLabel: true\n  });\n  var edge = symbolEl.__edge;\n\n  if (edge) {\n    graphic.updateProps(edge, {\n      shape: getEdgeShape(seriesScope, sourceLayout, sourceLayout),\n      style: {\n        opacity: 0\n      }\n    }, seriesModel, function () {\n      group.remove(edge);\n    });\n  }\n}\n\nfunction getEdgeShape(seriesScope, sourceLayout, targetLayout) {\n  var cpx1;\n  var cpy1;\n  var cpx2;\n  var cpy2;\n  var orient = seriesScope.orient;\n\n  if (seriesScope.layout === 'radial') {\n    var x1 = sourceLayout.rawX;\n    var y1 = sourceLayout.rawY;\n    var x2 = targetLayout.rawX;\n    var y2 = targetLayout.rawY;\n    var radialCoor1 = radialCoordinate(x1, y1);\n    var radialCoor2 = radialCoordinate(x1, y1 + (y2 - y1) * seriesScope.curvature);\n    var radialCoor3 = radialCoordinate(x2, y2 + (y1 - y2) * seriesScope.curvature);\n    var radialCoor4 = radialCoordinate(x2, y2);\n    return {\n      x1: radialCoor1.x,\n      y1: radialCoor1.y,\n      x2: radialCoor4.x,\n      y2: radialCoor4.y,\n      cpx1: radialCoor2.x,\n      cpy1: radialCoor2.y,\n      cpx2: radialCoor3.x,\n      cpy2: radialCoor3.y\n    };\n  } else {\n    var x1 = sourceLayout.x;\n    var y1 = sourceLayout.y;\n    var x2 = targetLayout.x;\n    var y2 = targetLayout.y;\n\n    if (orient === 'horizontal') {\n      cpx1 = x1 + (x2 - x1) * seriesScope.curvature;\n      cpy1 = y1;\n      cpx2 = x2 + (x1 - x2) * seriesScope.curvature;\n      cpy2 = y2;\n    }\n\n    if (orient === 'vertical') {\n      cpx1 = x1;\n      cpy1 = y1 + (y2 - y1) * seriesScope.curvature;\n      cpx2 = x2;\n      cpy2 = y2 + (y1 - y2) * seriesScope.curvature;\n    }\n\n    return {\n      x1: x1,\n      y1: y1,\n      x2: x2,\n      y2: y2,\n      cpx1: cpx1,\n      cpy1: cpy1,\n      cpx2: cpx2,\n      cpy2: cpy2\n    };\n  }\n}\n\nmodule.exports = _default;","var _traversalHelper = require(\"./traversalHelper\");\n\nvar eachAfter = _traversalHelper.eachAfter;\nvar eachBefore = _traversalHelper.eachBefore;\n\nvar _layoutHelper = require(\"./layoutHelper\");\n\nvar init = _layoutHelper.init;\nvar firstWalk = _layoutHelper.firstWalk;\nvar secondWalk = _layoutHelper.secondWalk;\nvar sep = _layoutHelper.separation;\nvar radialCoordinate = _layoutHelper.radialCoordinate;\nvar getViewRect = _layoutHelper.getViewRect;\n\nfunction _default(seriesModel, api) {\n  var layoutInfo = getViewRect(seriesModel, api);\n  seriesModel.layoutInfo = layoutInfo;\n  var layout = seriesModel.get('layout');\n  var width = 0;\n  var height = 0;\n  var separation = null;\n\n  if (layout === 'radial') {\n    width = 2 * Math.PI;\n    height = Math.min(layoutInfo.height, layoutInfo.width) / 2;\n    separation = sep(function (node1, node2) {\n      return (node1.parentNode === node2.parentNode ? 1 : 2) / node1.depth;\n    });\n  } else {\n    width = layoutInfo.width;\n    height = layoutInfo.height;\n    separation = sep();\n  }\n\n  var virtualRoot = seriesModel.getData().tree.root;\n  var realRoot = virtualRoot.children[0];\n  init(virtualRoot);\n  eachAfter(realRoot, firstWalk, separation);\n  virtualRoot.hierNode.modifier = -realRoot.hierNode.prelim;\n  eachBefore(realRoot, secondWalk);\n  var left = realRoot;\n  var right = realRoot;\n  var bottom = realRoot;\n  eachBefore(realRoot, function (node) {\n    var x = node.getLayout().x;\n\n    if (x < left.getLayout().x) {\n      left = node;\n    }\n\n    if (x > right.getLayout().x) {\n      right = node;\n    }\n\n    if (node.depth > bottom.depth) {\n      bottom = node;\n    }\n  });\n  var delta = left === right ? 1 : separation(left, right) / 2;\n  var tx = delta - left.getLayout().x;\n  var kx = 0;\n  var ky = 0;\n  var coorX = 0;\n  var coorY = 0;\n\n  if (layout === 'radial') {\n    kx = width / (right.getLayout().x + delta + tx); // here we use (node.depth - 1), bucause the real root's depth is 1\n\n    ky = height / (bottom.depth - 1 || 1);\n    eachBefore(realRoot, function (node) {\n      coorX = (node.getLayout().x + tx) * kx;\n      coorY = (node.depth - 1) * ky;\n      var finalCoor = radialCoordinate(coorX, coorY);\n      node.setLayout({\n        x: finalCoor.x,\n        y: finalCoor.y,\n        rawX: coorX,\n        rawY: coorY\n      }, true);\n    });\n  } else {\n    if (seriesModel.get('orient') === 'horizontal') {\n      ky = height / (right.getLayout().x + delta + tx);\n      kx = width / (bottom.depth - 1 || 1);\n      eachBefore(realRoot, function (node) {\n        coorY = (node.getLayout().x + tx) * ky;\n        coorX = (node.depth - 1) * kx;\n        node.setLayout({\n          x: coorX,\n          y: coorY\n        }, true);\n      });\n    } else {\n      kx = width / (right.getLayout().x + delta + tx);\n      ky = height / (bottom.depth - 1 || 1);\n      eachBefore(realRoot, function (node) {\n        coorX = (node.getLayout().x + tx) * kx;\n        coorY = (node.depth - 1) * ky;\n        node.setLayout({\n          x: coorX,\n          y: coorY\n        }, true);\n      });\n    }\n  }\n}\n\nmodule.exports = _default;","var layout = require(\"../../util/layout\");\n\n/**\n * @file The layout algorithm of node-link tree diagrams. Here we using Reingold-Tilford algorithm to drawing\n *       the tree.\n * @see https://github.com/d3/d3-hierarchy\n */\n\n/**\n * Initialize all computational message for following algorithm\n * @param  {module:echarts/data/Tree~TreeNode} root   The virtual root of the tree\n */\nfunction init(root) {\n  root.hierNode = {\n    defaultAncestor: null,\n    ancestor: root,\n    prelim: 0,\n    modifier: 0,\n    change: 0,\n    shift: 0,\n    i: 0,\n    thread: null\n  };\n  var nodes = [root];\n  var node;\n  var children;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    children = node.children;\n\n    if (node.isExpand && children.length) {\n      var n = children.length;\n\n      for (var i = n - 1; i >= 0; i--) {\n        var child = children[i];\n        child.hierNode = {\n          defaultAncestor: null,\n          ancestor: child,\n          prelim: 0,\n          modifier: 0,\n          change: 0,\n          shift: 0,\n          i: i,\n          thread: null\n        };\n        nodes.push(child);\n      }\n    }\n  }\n}\n/**\n * Computes a preliminary x coordinate for node. Before that, this function is\n * applied recursively to the children of node, as well as the function\n * apportion(). After spacing out the children by calling executeShifts(), the\n * node is placed to the midpoint of its outermost children.\n * @param  {module:echarts/data/Tree~TreeNode} node\n * @param {Function} separation\n */\n\n\nfunction firstWalk(node, separation) {\n  var children = node.isExpand ? node.children : [];\n  var siblings = node.parentNode.children;\n  var subtreeW = node.hierNode.i ? siblings[node.hierNode.i - 1] : null;\n\n  if (children.length) {\n    executeShifts(node);\n    var midPoint = (children[0].hierNode.prelim + children[children.length - 1].hierNode.prelim) / 2;\n\n    if (subtreeW) {\n      node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n      node.hierNode.modifier = node.hierNode.prelim - midPoint;\n    } else {\n      node.hierNode.prelim = midPoint;\n    }\n  } else if (subtreeW) {\n    node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n  }\n\n  node.parentNode.hierNode.defaultAncestor = apportion(node, subtreeW, node.parentNode.hierNode.defaultAncestor || siblings[0], separation);\n}\n/**\n * Computes all real x-coordinates by summing up the modifiers recursively.\n * @param  {module:echarts/data/Tree~TreeNode} node\n */\n\n\nfunction secondWalk(node) {\n  var nodeX = node.hierNode.prelim + node.parentNode.hierNode.modifier;\n  node.setLayout({\n    x: nodeX\n  }, true);\n  node.hierNode.modifier += node.parentNode.hierNode.modifier;\n}\n\nfunction separation(cb) {\n  return arguments.length ? cb : defaultSeparation;\n}\n/**\n * Transform the common coordinate to radial coordinate\n * @param  {number} x\n * @param  {number} y\n * @return {Object}\n */\n\n\nfunction radialCoordinate(x, y) {\n  var radialCoor = {};\n  x -= Math.PI / 2;\n  radialCoor.x = y * Math.cos(x);\n  radialCoor.y = y * Math.sin(x);\n  return radialCoor;\n}\n/**\n * Get the layout position of the whole view\n * @param {module:echarts/model/Series} seriesModel  the model object of sankey series\n * @param {module:echarts/ExtensionAPI} api  provide the API list that the developer can call\n * @return {module:zrender/core/BoundingRect}  size of rect to draw the sankey view\n */\n\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n/**\n * All other shifts, applied to the smaller subtrees between w- and w+, are\n * performed by this function.\n * @param  {module:echarts/data/Tree~TreeNode} node\n */\n\n\nfunction executeShifts(node) {\n  var children = node.children;\n  var n = children.length;\n  var shift = 0;\n  var change = 0;\n\n  while (--n >= 0) {\n    var child = children[n];\n    child.hierNode.prelim += shift;\n    child.hierNode.modifier += shift;\n    change += child.hierNode.change;\n    shift += child.hierNode.shift + change;\n  }\n}\n/**\n * The core of the algorithm. Here, a new subtree is combined with the\n * previous subtrees. Threads are used to traverse the inside and outside\n * contours of the left and right subtree up to the highest common level.\n * Whenever two nodes of the inside contours conflict, we compute the left\n * one of the greatest uncommon ancestors using the function nextAncestor()\n * and call moveSubtree() to shift the subtree and prepare the shifts of\n * smaller subtrees. Finally, we add a new thread (if necessary).\n * @param  {module:echarts/data/Tree~TreeNode} subtreeV\n * @param  {module:echarts/data/Tree~TreeNode} subtreeW\n * @param  {module:echarts/data/Tree~TreeNode} ancestor\n * @param  {Function} separation\n * @return {module:echarts/data/Tree~TreeNode}\n */\n\n\nfunction apportion(subtreeV, subtreeW, ancestor, separation) {\n  if (subtreeW) {\n    var nodeOutRight = subtreeV;\n    var nodeInRight = subtreeV;\n    var nodeOutLeft = nodeInRight.parentNode.children[0];\n    var nodeInLeft = subtreeW;\n    var sumOutRight = nodeOutRight.hierNode.modifier;\n    var sumInRight = nodeInRight.hierNode.modifier;\n    var sumOutLeft = nodeOutLeft.hierNode.modifier;\n    var sumInLeft = nodeInLeft.hierNode.modifier;\n\n    while (nodeInLeft = nextRight(nodeInLeft), nodeInRight = nextLeft(nodeInRight), nodeInLeft && nodeInRight) {\n      nodeOutRight = nextRight(nodeOutRight);\n      nodeOutLeft = nextLeft(nodeOutLeft);\n      nodeOutRight.hierNode.ancestor = subtreeV;\n      var shift = nodeInLeft.hierNode.prelim + sumInLeft - nodeInRight.hierNode.prelim - sumInRight + separation(nodeInLeft, nodeInRight);\n\n      if (shift > 0) {\n        moveSubtree(nextAncestor(nodeInLeft, subtreeV, ancestor), subtreeV, shift);\n        sumInRight += shift;\n        sumOutRight += shift;\n      }\n\n      sumInLeft += nodeInLeft.hierNode.modifier;\n      sumInRight += nodeInRight.hierNode.modifier;\n      sumOutRight += nodeOutRight.hierNode.modifier;\n      sumOutLeft += nodeOutLeft.hierNode.modifier;\n    }\n\n    if (nodeInLeft && !nextRight(nodeOutRight)) {\n      nodeOutRight.hierNode.thread = nodeInLeft;\n      nodeOutRight.hierNode.modifier += sumInLeft - sumOutRight;\n    }\n\n    if (nodeInRight && !nextLeft(nodeOutLeft)) {\n      nodeOutLeft.hierNode.thread = nodeInRight;\n      nodeOutLeft.hierNode.modifier += sumInRight - sumOutLeft;\n      ancestor = subtreeV;\n    }\n  }\n\n  return ancestor;\n}\n/**\n * This function is used to traverse the right contour of a subtree.\n * It returns the rightmost child of node or the thread of node. The function\n * returns null if and only if node is on the highest depth of its subtree.\n * @param  {module:echarts/data/Tree~TreeNode} node\n * @return {module:echarts/data/Tree~TreeNode}\n */\n\n\nfunction nextRight(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[children.length - 1] : node.hierNode.thread;\n}\n/**\n * This function is used to traverse the left contour of a subtree (or a subforest).\n * It returns the leftmost child of node or the thread of node. The function\n * returns null if and only if node is on the highest depth of its subtree.\n * @param  {module:echarts/data/Tree~TreeNode} node\n * @return {module:echarts/data/Tree~TreeNode}\n */\n\n\nfunction nextLeft(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[0] : node.hierNode.thread;\n}\n/**\n * If nodeInLefts ancestor is a sibling of node, returns nodeInLefts ancestor.\n * Otherwise, returns the specified ancestor.\n * @param  {module:echarts/data/Tree~TreeNode} nodeInLeft\n * @param  {module:echarts/data/Tree~TreeNode} node\n * @param  {module:echarts/data/Tree~TreeNode} ancestor\n * @return {module:echarts/data/Tree~TreeNode}\n */\n\n\nfunction nextAncestor(nodeInLeft, node, ancestor) {\n  return nodeInLeft.hierNode.ancestor.parentNode === node.parentNode ? nodeInLeft.hierNode.ancestor : ancestor;\n}\n/**\n * Shifts the current subtree rooted at wr. This is done by increasing prelim(w+) and modifier(w+) by shift.\n * @param  {module:echarts/data/Tree~TreeNode} wl\n * @param  {module:echarts/data/Tree~TreeNode} wr\n * @param  {number} shift [description]\n */\n\n\nfunction moveSubtree(wl, wr, shift) {\n  var change = shift / (wr.hierNode.i - wl.hierNode.i);\n  wr.hierNode.change -= change;\n  wr.hierNode.shift += shift;\n  wr.hierNode.modifier += shift;\n  wr.hierNode.prelim += shift;\n  wl.hierNode.change += change;\n}\n\nfunction defaultSeparation(node1, node2) {\n  return node1.parentNode === node2.parentNode ? 1 : 2;\n}\n\nexports.init = init;\nexports.firstWalk = firstWalk;\nexports.secondWalk = secondWalk;\nexports.separation = separation;\nexports.radialCoordinate = radialCoordinate;\nexports.getViewRect = getViewRect;","var commonLayout = require(\"./commonLayout\");\n\nfunction _default(ecModel, api) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    commonLayout(seriesModel, api);\n  });\n}\n\nmodule.exports = _default;","var commonLayout = require(\"./commonLayout\");\n\nfunction _default(ecModel, api) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    commonLayout(seriesModel, api);\n  });\n}\n\nmodule.exports = _default;","/**\n * Traverse the tree from bottom to top and do something\n * @param  {module:echarts/data/Tree~TreeNode} root  The real root of the tree\n * @param  {Function} callback\n */\nfunction eachAfter(root, callback, separation) {\n  var nodes = [root];\n  var next = [];\n  var node;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    next.push(node);\n\n    if (node.isExpand) {\n      var children = node.children;\n\n      if (children.length) {\n        for (var i = 0; i < children.length; i++) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n\n  while (node = next.pop()) {\n    // jshint ignore:line\n    callback(node, separation);\n  }\n}\n/**\n * Traverse the tree from top to bottom and do something\n * @param  {module:echarts/data/Tree~TreeNode} root  The real root of the tree\n * @param  {Function} callback\n */\n\n\nfunction eachBefore(root, callback) {\n  var nodes = [root];\n  var node;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    callback(node);\n\n    if (node.isExpand) {\n      var children = node.children;\n\n      if (children.length) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n}\n\nexports.eachAfter = eachAfter;\nexports.eachBefore = eachBefore;","var echarts = require(\"../../echarts\");\n\necharts.registerAction({\n  type: 'treeExpandAndCollapse',\n  event: 'treeExpandAndCollapse',\n  update: 'update'\n}, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'series',\n    subType: 'tree',\n    query: payload\n  }, function (seriesModel) {\n    var dataIndex = payload.dataIndex;\n    var tree = seriesModel.getData().tree;\n    var node = tree.getNodeByDataIndex(dataIndex);\n    node.isExpand = !node.isExpand;\n  });\n});","var echarts = require(\"../echarts\");\n\nrequire(\"./treemap/TreemapSeries\");\n\nrequire(\"./treemap/TreemapView\");\n\nrequire(\"./treemap/treemapAction\");\n\nvar treemapVisual = require(\"./treemap/treemapVisual\");\n\nvar treemapLayout = require(\"./treemap/treemapLayout\");\n\necharts.registerVisual(treemapVisual);\necharts.registerLayout(treemapLayout);","var graphic = require(\"../../util/graphic\");\n\nvar layout = require(\"../../util/layout\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _helper = require(\"./helper\");\n\nvar wrapTreePathInfo = _helper.wrapTreePathInfo;\nvar TEXT_PADDING = 8;\nvar ITEM_GAP = 8;\nvar ARRAY_LENGTH = 5;\n\nfunction Breadcrumb(containerGroup) {\n  /**\n   * @private\n   * @type {module:zrender/container/Group}\n   */\n  this.group = new graphic.Group();\n  containerGroup.add(this.group);\n}\n\nBreadcrumb.prototype = {\n  constructor: Breadcrumb,\n  render: function (seriesModel, api, targetNode, onSelect) {\n    var model = seriesModel.getModel('breadcrumb');\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n\n    if (!model.get('show') || !targetNode) {\n      return;\n    }\n\n    var normalStyleModel = model.getModel('itemStyle.normal'); // var emphasisStyleModel = model.getModel('itemStyle.emphasis');\n\n    var textStyleModel = normalStyleModel.getModel('textStyle');\n    var layoutParam = {\n      pos: {\n        left: model.get('left'),\n        right: model.get('right'),\n        top: model.get('top'),\n        bottom: model.get('bottom')\n      },\n      box: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      emptyItemWidth: model.get('emptyItemWidth'),\n      totalWidth: 0,\n      renderList: []\n    };\n\n    this._prepare(targetNode, layoutParam, textStyleModel);\n\n    this._renderContent(seriesModel, layoutParam, normalStyleModel, textStyleModel, onSelect);\n\n    layout.positionElement(thisGroup, layoutParam.pos, layoutParam.box);\n  },\n\n  /**\n   * Prepare render list and total width\n   * @private\n   */\n  _prepare: function (targetNode, layoutParam, textStyleModel) {\n    for (var node = targetNode; node; node = node.parentNode) {\n      var text = node.getModel().get('name');\n      var textRect = textStyleModel.getTextRect(text);\n      var itemWidth = Math.max(textRect.width + TEXT_PADDING * 2, layoutParam.emptyItemWidth);\n      layoutParam.totalWidth += itemWidth + ITEM_GAP;\n      layoutParam.renderList.push({\n        node: node,\n        text: text,\n        width: itemWidth\n      });\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderContent: function (seriesModel, layoutParam, normalStyleModel, textStyleModel, onSelect) {\n    // Start rendering.\n    var lastX = 0;\n    var emptyItemWidth = layoutParam.emptyItemWidth;\n    var height = seriesModel.get('breadcrumb.height');\n    var availableSize = layout.getAvailableSize(layoutParam.pos, layoutParam.box);\n    var totalWidth = layoutParam.totalWidth;\n    var renderList = layoutParam.renderList;\n\n    for (var i = renderList.length - 1; i >= 0; i--) {\n      var item = renderList[i];\n      var itemNode = item.node;\n      var itemWidth = item.width;\n      var text = item.text; // Hdie text and shorten width if necessary.\n\n      if (totalWidth > availableSize.width) {\n        totalWidth -= itemWidth - emptyItemWidth;\n        itemWidth = emptyItemWidth;\n        text = null;\n      }\n\n      var el = new graphic.Polygon({\n        shape: {\n          points: makeItemPoints(lastX, 0, itemWidth, height, i === renderList.length - 1, i === 0)\n        },\n        style: zrUtil.defaults(normalStyleModel.getItemStyle(), {\n          lineJoin: 'bevel',\n          text: text,\n          textFill: textStyleModel.getTextColor(),\n          textFont: textStyleModel.getFont()\n        }),\n        z: 10,\n        onclick: zrUtil.curry(onSelect, itemNode)\n      });\n      this.group.add(el);\n      packEventData(el, seriesModel, itemNode);\n      lastX += itemWidth + ITEM_GAP;\n    }\n  },\n\n  /**\n   * @override\n   */\n  remove: function () {\n    this.group.removeAll();\n  }\n};\n\nfunction makeItemPoints(x, y, itemWidth, itemHeight, head, tail) {\n  var points = [[head ? x : x - ARRAY_LENGTH, y], [x + itemWidth, y], [x + itemWidth, y + itemHeight], [head ? x : x - ARRAY_LENGTH, y + itemHeight]];\n  !tail && points.splice(2, 0, [x + itemWidth + ARRAY_LENGTH, y + itemHeight / 2]);\n  !head && points.push([x, y + itemHeight / 2]);\n  return points;\n} // Package custom mouse event.\n\n\nfunction packEventData(el, seriesModel, itemNode) {\n  el.eventData = {\n    componentType: 'series',\n    componentSubType: 'treemap',\n    seriesIndex: seriesModel.componentIndex,\n    seriesName: seriesModel.name,\n    seriesType: 'treemap',\n    selfType: 'breadcrumb',\n    // Distinguish with click event on treemap node.\n    nodeData: {\n      dataIndex: itemNode && itemNode.dataIndex,\n      name: itemNode && itemNode.name\n    },\n    treePathInfo: itemNode && wrapTreePathInfo(itemNode, seriesModel)\n  };\n}\n\nvar _default = Breadcrumb;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar Tree = require(\"../../data/Tree\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _format = require(\"../../util/format\");\n\nvar encodeHTML = _format.encodeHTML;\nvar addCommas = _format.addCommas;\n\nvar _helper = require(\"./helper\");\n\nvar wrapTreePathInfo = _helper.wrapTreePathInfo;\n\nvar _default = SeriesModel.extend({\n  type: 'series.treemap',\n  layoutMode: 'box',\n  dependencies: ['grid', 'polar'],\n\n  /**\n   * @type {module:echarts/data/Tree~Node}\n   */\n  _viewRoot: null,\n  defaultOption: {\n    // Disable progressive rendering\n    progressive: 0,\n    hoverLayerThreshold: Infinity,\n    // center: ['50%', '50%'],          // not supported in ec3.\n    // size: ['80%', '80%'],            // deprecated, compatible with ec2.\n    left: 'center',\n    top: 'middle',\n    right: null,\n    bottom: null,\n    width: '80%',\n    height: '80%',\n    sort: true,\n    // Can be null or false or true\n    // (order by desc default, asc not supported yet (strange effect))\n    clipWindow: 'origin',\n    // Size of clipped window when zooming. 'origin' or 'fullscreen'\n    squareRatio: 0.5 * (1 + Math.sqrt(5)),\n    // golden ratio\n    leafDepth: null,\n    // Nodes on depth from root are regarded as leaves.\n    // Count from zero (zero represents only view root).\n    drillDownIcon: '',\n    // Use html character temporarily because it is complicated\n    // to align specialized icon. \n    zoomToNodeRatio: 0.32 * 0.32,\n    // Be effective when using zoomToNode. Specify the proportion of the\n    // target node area in the view area.\n    roam: true,\n    // true, false, 'scale' or 'zoom', 'move'.\n    nodeClick: 'zoomToNode',\n    // Leaf node click behaviour: 'zoomToNode', 'link', false.\n    // If leafDepth is set and clicking a node which has children but\n    // be on left depth, the behaviour would be changing root. Otherwise\n    // use behavious defined above.\n    animation: true,\n    animationDurationUpdate: 900,\n    animationEasing: 'quinticInOut',\n    breadcrumb: {\n      show: true,\n      height: 22,\n      left: 'center',\n      top: 'bottom',\n      // right\n      // bottom\n      emptyItemWidth: 25,\n      // Width of empty node.\n      itemStyle: {\n        normal: {\n          color: 'rgba(0,0,0,0.7)',\n          //'#5793f3',\n          borderColor: 'rgba(255,255,255,0.7)',\n          borderWidth: 1,\n          shadowColor: 'rgba(150,150,150,1)',\n          shadowBlur: 3,\n          shadowOffsetX: 0,\n          shadowOffsetY: 0,\n          textStyle: {\n            color: '#fff'\n          }\n        },\n        emphasis: {\n          textStyle: {}\n        }\n      }\n    },\n    label: {\n      normal: {\n        show: true,\n        // Do not use textDistance, for ellipsis rect just the same as treemap node rect.\n        distance: 0,\n        padding: 5,\n        position: 'inside',\n        // Can be [5, '5%'] or position stirng like 'insideTopLeft', ...\n        // formatter: null,\n        color: '#fff',\n        ellipsis: true // align\n        // verticalAlign\n\n      }\n    },\n    upperLabel: {\n      // Label when node is parent.\n      normal: {\n        show: false,\n        position: [0, '50%'],\n        height: 20,\n        // formatter: null,\n        color: '#fff',\n        ellipsis: true,\n        // align: null,\n        verticalAlign: 'middle'\n      },\n      emphasis: {\n        show: true,\n        position: [0, '50%'],\n        color: '#fff',\n        ellipsis: true,\n        verticalAlign: 'middle'\n      }\n    },\n    itemStyle: {\n      normal: {\n        color: null,\n        // Can be 'none' if not necessary.\n        colorAlpha: null,\n        // Can be 'none' if not necessary.\n        colorSaturation: null,\n        // Can be 'none' if not necessary.\n        borderWidth: 0,\n        gapWidth: 0,\n        borderColor: '#fff',\n        borderColorSaturation: null // If specified, borderColor will be ineffective, and the\n        // border color is evaluated by color of current node and\n        // borderColorSaturation.\n\n      },\n      emphasis: {}\n    },\n    visualDimension: 0,\n    // Can be 0, 1, 2, 3.\n    visualMin: null,\n    visualMax: null,\n    color: [],\n    // + treemapSeries.color should not be modified. Please only modified\n    // level[n].color (if necessary).\n    // + Specify color list of each level. level[0].color would be global\n    // color list if not specified. (see method `setDefault`).\n    // + But set as a empty array to forbid fetch color from global palette\n    // when using nodeModel.get('color'), otherwise nodes on deep level\n    // will always has color palette set and are not able to inherit color\n    // from parent node.\n    // + TreemapSeries.color can not be set as 'none', otherwise effect\n    // legend color fetching (see seriesColor.js).\n    colorAlpha: null,\n    // Array. Specify color alpha range of each level, like [0.2, 0.8]\n    colorSaturation: null,\n    // Array. Specify color saturation of each level, like [0.2, 0.5]\n    colorMappingBy: 'index',\n    // 'value' or 'index' or 'id'.\n    visibleMin: 10,\n    // If area less than this threshold (unit: pixel^2), node will not\n    // be rendered. Only works when sort is 'asc' or 'desc'.\n    childrenVisibleMin: null,\n    // If area of a node less than this threshold (unit: pixel^2),\n    // grandchildren will not show.\n    // Why grandchildren? If not grandchildren but children,\n    // some siblings show children and some not,\n    // the appearance may be mess and not consistent,\n    levels: [] // Each item: {\n    //     visibleMin, itemStyle, visualDimension, label\n    // }\n    // data: {\n    //      value: [],\n    //      children: [],\n    //      link: 'http://xxx.xxx.xxx',\n    //      target: 'blank' or 'self'\n    // }\n\n  },\n\n  /**\n   * @override\n   */\n  getInitialData: function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levels = option.levels || [];\n    levels = option.levels = setDefault(levels, ecModel);\n    var treeOption = {};\n    treeOption.levels = levels; // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n\n    return Tree.createTree(root, this, treeOption).data;\n  },\n  optionUpdated: function () {\n    this.resetViewRoot();\n  },\n\n  /**\n   * @override\n   * @param {number} dataIndex\n   * @param {boolean} [mutipleSeries=false]\n   */\n  formatTooltip: function (dataIndex) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var formattedValue = zrUtil.isArray(value) ? addCommas(value[0]) : addCommas(value);\n    var name = data.getName(dataIndex);\n    return encodeHTML(name + ': ' + formattedValue);\n  },\n\n  /**\n   * Add tree path to tooltip param\n   *\n   * @override\n   * @param {number} dataIndex\n   * @return {Object}\n   */\n  getDataParams: function (dataIndex) {\n    var params = SeriesModel.prototype.getDataParams.apply(this, arguments);\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treePathInfo = wrapTreePathInfo(node, this);\n    return params;\n  },\n\n  /**\n   * @public\n   * @param {Object} layoutInfo {\n   *                                x: containerGroup x\n   *                                y: containerGroup y\n   *                                width: containerGroup width\n   *                                height: containerGroup height\n   *                            }\n   */\n  setLayoutInfo: function (layoutInfo) {\n    /**\n     * @readOnly\n     * @type {Object}\n     */\n    this.layoutInfo = this.layoutInfo || {};\n    zrUtil.extend(this.layoutInfo, layoutInfo);\n  },\n\n  /**\n   * @param  {string} id\n   * @return {number} index\n   */\n  mapIdToIndex: function (id) {\n    // A feature is implemented:\n    // index is monotone increasing with the sequence of\n    // input id at the first time.\n    // This feature can make sure that each data item and its\n    // mapped color have the same index between data list and\n    // color list at the beginning, which is useful for user\n    // to adjust data-color mapping.\n\n    /**\n     * @private\n     * @type {Object}\n     */\n    var idIndexMap = this._idIndexMap;\n\n    if (!idIndexMap) {\n      idIndexMap = this._idIndexMap = zrUtil.createHashMap();\n      /**\n       * @private\n       * @type {number}\n       */\n\n      this._idIndexMapCount = 0;\n    }\n\n    var index = idIndexMap.get(id);\n\n    if (index == null) {\n      idIndexMap.set(id, index = this._idIndexMapCount++);\n    }\n\n    return index;\n  },\n  getViewRoot: function () {\n    return this._viewRoot;\n  },\n\n  /**\n   * @param {module:echarts/data/Tree~Node} [viewRoot]\n   */\n  resetViewRoot: function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getData().tree.root;\n\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  }\n});\n/**\n * @param {Object} dataNode\n */\n\n\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value;\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  } // Value should not less than 0.\n\n\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n/**\n * set default to level configuration\n */\n\n\nfunction setDefault(levels, ecModel) {\n  var globalColorList = ecModel.get('color');\n\n  if (!globalColorList) {\n    return;\n  }\n\n  levels = levels || [];\n  var hasColorDefine;\n  zrUtil.each(levels, function (levelDefine) {\n    var model = new Model(levelDefine);\n    var modelColor = model.get('color');\n\n    if (model.get('itemStyle.normal.color') || modelColor && modelColor !== 'none') {\n      hasColorDefine = true;\n    }\n  });\n\n  if (!hasColorDefine) {\n    var level0 = levels[0] || (levels[0] = {});\n    level0.color = globalColorList.slice();\n  }\n\n  return levels;\n}\n\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar DataDiffer = require(\"../../data/DataDiffer\");\n\nvar helper = require(\"./helper\");\n\nvar Breadcrumb = require(\"./Breadcrumb\");\n\nvar RoamController = require(\"../../component/helper/RoamController\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar animationUtil = require(\"../../util/animation\");\n\nvar makeStyleMapper = require(\"../../model/mixin/makeStyleMapper\");\n\nvar bind = zrUtil.bind;\nvar Group = graphic.Group;\nvar Rect = graphic.Rect;\nvar each = zrUtil.each;\nvar DRAG_THRESHOLD = 3;\nvar PATH_LABEL_NOAMAL = ['label', 'normal'];\nvar PATH_LABEL_EMPHASIS = ['label', 'emphasis'];\nvar PATH_UPPERLABEL_NORMAL = ['upperLabel', 'normal'];\nvar PATH_UPPERLABEL_EMPHASIS = ['upperLabel', 'emphasis'];\nvar Z_BASE = 10; // Should bigger than every z.\n\nvar Z_BG = 1;\nvar Z_CONTENT = 2;\nvar getItemStyleEmphasis = makeStyleMapper([['fill', 'color'], // `borderColor` and `borderWidth` has been occupied,\n// so use `stroke` to indicate the stroke of the rect.\n['stroke', 'strokeColor'], ['lineWidth', 'strokeWidth'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']]);\n\nvar getItemStyleNormal = function (model) {\n  // Normal style props should include emphasis style props.\n  var itemStyle = getItemStyleEmphasis(model); // Clear styles set by emphasis.\n\n  itemStyle.stroke = itemStyle.fill = itemStyle.lineWidth = null;\n  return itemStyle;\n};\n\nvar _default = echarts.extendChartView({\n  type: 'treemap',\n\n  /**\n   * @override\n   */\n  init: function (o, api) {\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n    this._containerGroup;\n    /**\n     * @private\n     * @type {Object.<string, Array.<module:zrender/container/Group>>}\n     */\n\n    this._storage = createStorage();\n    /**\n     * @private\n     * @type {module:echarts/data/Tree}\n     */\n\n    this._oldTree;\n    /**\n     * @private\n     * @type {module:echarts/chart/treemap/Breadcrumb}\n     */\n\n    this._breadcrumb;\n    /**\n     * @private\n     * @type {module:echarts/component/helper/RoamController}\n     */\n\n    this._controller;\n    /**\n     * 'ready', 'animating'\n     * @private\n     */\n\n    this._state = 'ready';\n  },\n\n  /**\n   * @override\n   */\n  render: function (seriesModel, ecModel, api, payload) {\n    var models = ecModel.findComponents({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    });\n\n    if (zrUtil.indexOf(models, seriesModel) < 0) {\n      return;\n    }\n\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var targetInfo = helper.retrieveTargetInfo(payload, seriesModel);\n    var payloadType = payload && payload.type;\n    var layoutInfo = seriesModel.layoutInfo;\n    var isInit = !this._oldTree;\n    var thisStorage = this._storage; // Mark new root when action is treemapRootToNode.\n\n    var reRoot = payloadType === 'treemapRootToNode' && targetInfo && thisStorage ? {\n      rootNodeGroup: thisStorage.nodeGroup[targetInfo.node.getRawIndex()],\n      direction: payload.direction\n    } : null;\n\n    var containerGroup = this._giveContainerGroup(layoutInfo);\n\n    var renderResult = this._doRender(containerGroup, seriesModel, reRoot);\n\n    !isInit && (!payloadType || payloadType === 'treemapZoomToNode' || payloadType === 'treemapRootToNode') ? this._doAnimation(containerGroup, renderResult, seriesModel, reRoot) : renderResult.renderFinally();\n\n    this._resetController(api);\n\n    this._renderBreadcrumb(seriesModel, api, targetInfo);\n  },\n\n  /**\n   * @private\n   */\n  _giveContainerGroup: function (layoutInfo) {\n    var containerGroup = this._containerGroup;\n\n    if (!containerGroup) {\n      // FIXME\n      // containerGroupclipclip\n      containerGroup = this._containerGroup = new Group();\n\n      this._initEvents(containerGroup);\n\n      this.group.add(containerGroup);\n    }\n\n    containerGroup.attr('position', [layoutInfo.x, layoutInfo.y]);\n    return containerGroup;\n  },\n\n  /**\n   * @private\n   */\n  _doRender: function (containerGroup, seriesModel, reRoot) {\n    var thisTree = seriesModel.getData().tree;\n    var oldTree = this._oldTree; // Clear last shape records.\n\n    var lastsForAnimation = createStorage();\n    var thisStorage = createStorage();\n    var oldStorage = this._storage;\n    var willInvisibleEls = [];\n    var doRenderNode = zrUtil.curry(renderNode, seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls); // Notice: when thisTree and oldTree are the same tree (see list.cloneShallow),\n    // the oldTree is actually losted, so we can not find all of the old graphic\n    // elements from tree. So we use this stragegy: make element storage, move\n    // from old storage to new storage, clear old storage.\n\n    dualTravel(thisTree.root ? [thisTree.root] : [], oldTree && oldTree.root ? [oldTree.root] : [], containerGroup, thisTree === oldTree || !oldTree, 0); // Process all removing.\n\n    var willDeleteEls = clearStorage(oldStorage);\n    this._oldTree = thisTree;\n    this._storage = thisStorage;\n    return {\n      lastsForAnimation: lastsForAnimation,\n      willDeleteEls: willDeleteEls,\n      renderFinally: renderFinally\n    };\n\n    function dualTravel(thisViewChildren, oldViewChildren, parentGroup, sameTree, depth) {\n      // When 'render' is triggered by action,\n      // 'this' and 'old' may be the same tree,\n      // we use rawIndex in that case.\n      if (sameTree) {\n        oldViewChildren = thisViewChildren;\n        each(thisViewChildren, function (child, index) {\n          !child.isRemoved() && processNode(index, index);\n        });\n      } // Diff hierarchically (diff only in each subtree, but not whole).\n      // because, consistency of view is important.\n      else {\n          new DataDiffer(oldViewChildren, thisViewChildren, getKey, getKey).add(processNode).update(processNode).remove(zrUtil.curry(processNode, null)).execute();\n        }\n\n      function getKey(node) {\n        // Identify by name or raw index.\n        return node.getId();\n      }\n\n      function processNode(newIndex, oldIndex) {\n        var thisNode = newIndex != null ? thisViewChildren[newIndex] : null;\n        var oldNode = oldIndex != null ? oldViewChildren[oldIndex] : null;\n        var group = doRenderNode(thisNode, oldNode, parentGroup, depth);\n        group && dualTravel(thisNode && thisNode.viewChildren || [], oldNode && oldNode.viewChildren || [], group, sameTree, depth + 1);\n      }\n    }\n\n    function clearStorage(storage) {\n      var willDeleteEls = createStorage();\n      storage && each(storage, function (store, storageName) {\n        var delEls = willDeleteEls[storageName];\n        each(store, function (el) {\n          el && (delEls.push(el), el.__tmWillDelete = 1);\n        });\n      });\n      return willDeleteEls;\n    }\n\n    function renderFinally() {\n      each(willDeleteEls, function (els) {\n        each(els, function (el) {\n          el.parent && el.parent.remove(el);\n        });\n      });\n      each(willInvisibleEls, function (el) {\n        el.invisible = true; // Setting invisible is for optimizing, so no need to set dirty,\n        // just mark as invisible.\n\n        el.dirty();\n      });\n    }\n  },\n\n  /**\n   * @private\n   */\n  _doAnimation: function (containerGroup, renderResult, seriesModel, reRoot) {\n    if (!seriesModel.get('animation')) {\n      return;\n    }\n\n    var duration = seriesModel.get('animationDurationUpdate');\n    var easing = seriesModel.get('animationEasing');\n    var animationWrap = animationUtil.createWrap(); // Make delete animations.\n\n    each(renderResult.willDeleteEls, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        if (el.invisible) {\n          return;\n        }\n\n        var parent = el.parent; // Always has parent, and parent is nodeGroup.\n\n        var target;\n\n        if (reRoot && reRoot.direction === 'drillDown') {\n          target = parent === reRoot.rootNodeGroup // This is the content element of view root.\n          // Only `content` will enter this branch, because\n          // `background` and `nodeGroup` will not be deleted.\n          ? {\n            shape: {\n              x: 0,\n              y: 0,\n              width: parent.__tmNodeWidth,\n              height: parent.__tmNodeHeight\n            },\n            style: {\n              opacity: 0\n            } // Others.\n\n          } : {\n            style: {\n              opacity: 0\n            }\n          };\n        } else {\n          var targetX = 0;\n          var targetY = 0;\n\n          if (!parent.__tmWillDelete) {\n            // Let node animate to right-bottom corner, cooperating with fadeout,\n            // which is appropriate for user understanding.\n            // Divided by 2 for reRoot rolling up effect.\n            targetX = parent.__tmNodeWidth / 2;\n            targetY = parent.__tmNodeHeight / 2;\n          }\n\n          target = storageName === 'nodeGroup' ? {\n            position: [targetX, targetY],\n            style: {\n              opacity: 0\n            }\n          } : {\n            shape: {\n              x: targetX,\n              y: targetY,\n              width: 0,\n              height: 0\n            },\n            style: {\n              opacity: 0\n            }\n          };\n        }\n\n        target && animationWrap.add(el, target, duration, easing);\n      });\n    }); // Make other animations\n\n    each(this._storage, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        var last = renderResult.lastsForAnimation[storageName][rawIndex];\n        var target = {};\n\n        if (!last) {\n          return;\n        }\n\n        if (storageName === 'nodeGroup') {\n          if (last.old) {\n            target.position = el.position.slice();\n            el.attr('position', last.old);\n          }\n        } else {\n          if (last.old) {\n            target.shape = zrUtil.extend({}, el.shape);\n            el.setShape(last.old);\n          }\n\n          if (last.fadein) {\n            el.setStyle('opacity', 0);\n            target.style = {\n              opacity: 1\n            };\n          } // When animation is stopped for succedent animation starting,\n          // el.style.opacity might not be 1\n          else if (el.style.opacity !== 1) {\n              target.style = {\n                opacity: 1\n              };\n            }\n        }\n\n        animationWrap.add(el, target, duration, easing);\n      });\n    }, this);\n    this._state = 'animating';\n    animationWrap.done(bind(function () {\n      this._state = 'ready';\n      renderResult.renderFinally();\n    }, this)).start();\n  },\n\n  /**\n   * @private\n   */\n  _resetController: function (api) {\n    var controller = this._controller; // Init controller.\n\n    if (!controller) {\n      controller = this._controller = new RoamController(api.getZr());\n      controller.enable(this.seriesModel.get('roam'));\n      controller.on('pan', bind(this._onPan, this));\n      controller.on('zoom', bind(this._onZoom, this));\n    }\n\n    var rect = new BoundingRect(0, 0, api.getWidth(), api.getHeight());\n    controller.setPointerChecker(function (e, x, y) {\n      return rect.contain(x, y);\n    });\n  },\n\n  /**\n   * @private\n   */\n  _clearController: function () {\n    var controller = this._controller;\n\n    if (controller) {\n      controller.dispose();\n      controller = null;\n    }\n  },\n\n  /**\n   * @private\n   */\n  _onPan: function (dx, dy) {\n    if (this._state !== 'animating' && (Math.abs(dx) > DRAG_THRESHOLD || Math.abs(dy) > DRAG_THRESHOLD)) {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n\n      if (!root) {\n        return;\n      }\n\n      var rootLayout = root.getLayout();\n\n      if (!rootLayout) {\n        return;\n      }\n\n      this.api.dispatchAction({\n        type: 'treemapMove',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rootLayout.x + dx,\n          y: rootLayout.y + dy,\n          width: rootLayout.width,\n          height: rootLayout.height\n        }\n      });\n    }\n  },\n\n  /**\n   * @private\n   */\n  _onZoom: function (scale, mouseX, mouseY) {\n    if (this._state !== 'animating') {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n\n      if (!root) {\n        return;\n      }\n\n      var rootLayout = root.getLayout();\n\n      if (!rootLayout) {\n        return;\n      }\n\n      var rect = new BoundingRect(rootLayout.x, rootLayout.y, rootLayout.width, rootLayout.height);\n      var layoutInfo = this.seriesModel.layoutInfo; // Transform mouse coord from global to containerGroup.\n\n      mouseX -= layoutInfo.x;\n      mouseY -= layoutInfo.y; // Scale root bounding rect.\n\n      var m = matrix.create();\n      matrix.translate(m, m, [-mouseX, -mouseY]);\n      matrix.scale(m, m, [scale, scale]);\n      matrix.translate(m, m, [mouseX, mouseY]);\n      rect.applyTransform(m);\n      this.api.dispatchAction({\n        type: 'treemapRender',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height\n        }\n      });\n    }\n  },\n\n  /**\n   * @private\n   */\n  _initEvents: function (containerGroup) {\n    containerGroup.on('click', function (e) {\n      if (this._state !== 'ready') {\n        return;\n      }\n\n      var nodeClick = this.seriesModel.get('nodeClick', true);\n\n      if (!nodeClick) {\n        return;\n      }\n\n      var targetInfo = this.findTarget(e.offsetX, e.offsetY);\n\n      if (!targetInfo) {\n        return;\n      }\n\n      var node = targetInfo.node;\n\n      if (node.getLayout().isLeafRoot) {\n        this._rootToNode(targetInfo);\n      } else {\n        if (nodeClick === 'zoomToNode') {\n          this._zoomToNode(targetInfo);\n        } else if (nodeClick === 'link') {\n          var itemModel = node.hostTree.data.getItemModel(node.dataIndex);\n          var link = itemModel.get('link', true);\n          var linkTarget = itemModel.get('target', true) || 'blank';\n          link && window.open(link, linkTarget);\n        }\n      }\n    }, this);\n  },\n\n  /**\n   * @private\n   */\n  _renderBreadcrumb: function (seriesModel, api, targetInfo) {\n    if (!targetInfo) {\n      targetInfo = seriesModel.get('leafDepth', true) != null ? {\n        node: seriesModel.getViewRoot() // FIXME\n        // better way?\n        // Find breadcrumb tail on center of containerGroup.\n\n      } : this.findTarget(api.getWidth() / 2, api.getHeight() / 2);\n\n      if (!targetInfo) {\n        targetInfo = {\n          node: seriesModel.getData().tree.root\n        };\n      }\n    }\n\n    (this._breadcrumb || (this._breadcrumb = new Breadcrumb(this.group))).render(seriesModel, api, targetInfo.node, bind(onSelect, this));\n\n    function onSelect(node) {\n      if (this._state !== 'animating') {\n        helper.aboveViewRoot(seriesModel.getViewRoot(), node) ? this._rootToNode({\n          node: node\n        }) : this._zoomToNode({\n          node: node\n        });\n      }\n    }\n  },\n\n  /**\n   * @override\n   */\n  remove: function () {\n    this._clearController();\n\n    this._containerGroup && this._containerGroup.removeAll();\n    this._storage = createStorage();\n    this._state = 'ready';\n    this._breadcrumb && this._breadcrumb.remove();\n  },\n  dispose: function () {\n    this._clearController();\n  },\n\n  /**\n   * @private\n   */\n  _zoomToNode: function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapZoomToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  },\n\n  /**\n   * @private\n   */\n  _rootToNode: function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapRootToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  },\n\n  /**\n   * @public\n   * @param {number} x Global coord x.\n   * @param {number} y Global coord y.\n   * @return {Object} info If not found, return undefined;\n   * @return {number} info.node Target node.\n   * @return {number} info.offsetX x refer to target node.\n   * @return {number} info.offsetY y refer to target node.\n   */\n  findTarget: function (x, y) {\n    var targetInfo;\n    var viewRoot = this.seriesModel.getViewRoot();\n    viewRoot.eachNode({\n      attr: 'viewChildren',\n      order: 'preorder'\n    }, function (node) {\n      var bgEl = this._storage.background[node.getRawIndex()]; // If invisible, there might be no element.\n\n\n      if (bgEl) {\n        var point = bgEl.transformCoordToLocal(x, y);\n        var shape = bgEl.shape; // For performance consideration, dont use 'getBoundingRect'.\n\n        if (shape.x <= point[0] && point[0] <= shape.x + shape.width && shape.y <= point[1] && point[1] <= shape.y + shape.height) {\n          targetInfo = {\n            node: node,\n            offsetX: point[0],\n            offsetY: point[1]\n          };\n        } else {\n          return false; // Suppress visit subtree.\n        }\n      }\n    }, this);\n    return targetInfo;\n  }\n});\n/**\n * @inner\n */\n\n\nfunction createStorage() {\n  return {\n    nodeGroup: [],\n    background: [],\n    content: []\n  };\n}\n/**\n * @inner\n * @return Return undefined means do not travel further.\n */\n\n\nfunction renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth) {\n  // Whether under viewRoot.\n  if (!thisNode) {\n    // Deleting nodes will be performed finally. This method just find\n    // element from old storage, or create new element, set them to new\n    // storage, and set styles.\n    return;\n  } // -------------------------------------------------------------------\n  // Start of closure variables available in \"Procedures in renderNode\".\n\n\n  var thisLayout = thisNode.getLayout();\n\n  if (!thisLayout || !thisLayout.isInView) {\n    return;\n  }\n\n  var thisWidth = thisLayout.width;\n  var thisHeight = thisLayout.height;\n  var borderWidth = thisLayout.borderWidth;\n  var thisInvisible = thisLayout.invisible;\n  var thisRawIndex = thisNode.getRawIndex();\n  var oldRawIndex = oldNode && oldNode.getRawIndex();\n  var thisViewChildren = thisNode.viewChildren;\n  var upperHeight = thisLayout.upperHeight;\n  var isParent = thisViewChildren && thisViewChildren.length;\n  var itemStyleNormalModel = thisNode.getModel('itemStyle.normal');\n  var itemStyleEmphasisModel = thisNode.getModel('itemStyle.emphasis'); // End of closure ariables available in \"Procedures in renderNode\".\n  // -----------------------------------------------------------------\n  // Node group\n\n  var group = giveGraphic('nodeGroup', Group);\n\n  if (!group) {\n    return;\n  }\n\n  parentGroup.add(group); // x,y are not set when el is above view root.\n\n  group.attr('position', [thisLayout.x || 0, thisLayout.y || 0]);\n  group.__tmNodeWidth = thisWidth;\n  group.__tmNodeHeight = thisHeight;\n\n  if (thisLayout.isAboveViewRoot) {\n    return group;\n  } // Background\n\n\n  var bg = giveGraphic('background', Rect, depth, Z_BG);\n  bg && renderBackground(group, bg, isParent && thisLayout.upperHeight); // No children, render content.\n\n  if (!isParent) {\n    var content = giveGraphic('content', Rect, depth, Z_CONTENT);\n    content && renderContent(group, content);\n  }\n\n  return group; // ----------------------------\n  // | Procedures in renderNode |\n  // ----------------------------\n\n  function renderBackground(group, bg, useUpperLabel) {\n    // For tooltip.\n    bg.dataIndex = thisNode.dataIndex;\n    bg.seriesIndex = seriesModel.seriesIndex;\n    bg.setShape({\n      x: 0,\n      y: 0,\n      width: thisWidth,\n      height: thisHeight\n    });\n    var visualBorderColor = thisNode.getVisual('borderColor', true);\n    var emphasisBorderColor = itemStyleEmphasisModel.get('borderColor');\n    updateStyle(bg, function () {\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualBorderColor;\n      var emphasisStyle = getItemStyleEmphasis(itemStyleEmphasisModel);\n      emphasisStyle.fill = emphasisBorderColor;\n\n      if (useUpperLabel) {\n        var upperLabelWidth = thisWidth - 2 * borderWidth;\n        prepareText(normalStyle, emphasisStyle, visualBorderColor, upperLabelWidth, upperHeight, {\n          x: borderWidth,\n          y: 0,\n          width: upperLabelWidth,\n          height: upperHeight\n        });\n      } // For old bg.\n      else {\n          normalStyle.text = emphasisStyle.text = null;\n        }\n\n      bg.setStyle(normalStyle);\n      graphic.setHoverStyle(bg, emphasisStyle);\n    });\n    group.add(bg);\n  }\n\n  function renderContent(group, content) {\n    // For tooltip.\n    content.dataIndex = thisNode.dataIndex;\n    content.seriesIndex = seriesModel.seriesIndex;\n    var contentWidth = Math.max(thisWidth - 2 * borderWidth, 0);\n    var contentHeight = Math.max(thisHeight - 2 * borderWidth, 0);\n    content.culling = true;\n    content.setShape({\n      x: borderWidth,\n      y: borderWidth,\n      width: contentWidth,\n      height: contentHeight\n    });\n    var visualColor = thisNode.getVisual('color', true);\n    updateStyle(content, function () {\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualColor;\n      var emphasisStyle = getItemStyleEmphasis(itemStyleEmphasisModel);\n      prepareText(normalStyle, emphasisStyle, visualColor, contentWidth, contentHeight);\n      content.setStyle(normalStyle);\n      graphic.setHoverStyle(content, emphasisStyle);\n    });\n    group.add(content);\n  }\n\n  function updateStyle(element, cb) {\n    if (!thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      cb();\n\n      if (!element.__tmWillVisible) {\n        element.invisible = false;\n      }\n    } else {\n      // Delay invisible setting utill animation finished,\n      // avoid element vanish suddenly before animation.\n      !element.invisible && willInvisibleEls.push(element);\n    }\n  }\n\n  function prepareText(normalStyle, emphasisStyle, visualColor, width, height, upperLabelRect) {\n    var nodeModel = thisNode.getModel();\n    var text = zrUtil.retrieve(seriesModel.getFormattedLabel(thisNode.dataIndex, 'normal', null, null, upperLabelRect ? 'upperLabel' : 'label'), nodeModel.get('name'));\n\n    if (!upperLabelRect && thisLayout.isLeafRoot) {\n      var iconChar = seriesModel.get('drillDownIcon', true);\n      text = iconChar ? iconChar + ' ' + text : text;\n    }\n\n    var normalLabelModel = nodeModel.getModel(upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL);\n    var emphasisLabelModel = nodeModel.getModel(upperLabelRect ? PATH_UPPERLABEL_EMPHASIS : PATH_LABEL_EMPHASIS);\n    var isShow = normalLabelModel.getShallow('show');\n    graphic.setLabelStyle(normalStyle, emphasisStyle, normalLabelModel, emphasisLabelModel, {\n      defaultText: isShow ? text : null,\n      autoColor: visualColor,\n      isRectText: true\n    });\n    upperLabelRect && (normalStyle.textRect = zrUtil.clone(upperLabelRect));\n    normalStyle.truncate = isShow && normalLabelModel.get('ellipsis') ? {\n      outerWidth: width,\n      outerHeight: height,\n      minChar: 2\n    } : null;\n  }\n\n  function giveGraphic(storageName, Ctor, depth, z) {\n    var element = oldRawIndex != null && oldStorage[storageName][oldRawIndex];\n    var lasts = lastsForAnimation[storageName];\n\n    if (element) {\n      // Remove from oldStorage\n      oldStorage[storageName][oldRawIndex] = null;\n      prepareAnimationWhenHasOld(lasts, element, storageName);\n    } // If invisible and no old element, do not create new element (for optimizing).\n    else if (!thisInvisible) {\n        element = new Ctor({\n          z: calculateZ(depth, z)\n        });\n        element.__tmDepth = depth;\n        element.__tmStorageName = storageName;\n        prepareAnimationWhenNoOld(lasts, element, storageName);\n      } // Set to thisStorage\n\n\n    return thisStorage[storageName][thisRawIndex] = element;\n  }\n\n  function prepareAnimationWhenHasOld(lasts, element, storageName) {\n    var lastCfg = lasts[thisRawIndex] = {};\n    lastCfg.old = storageName === 'nodeGroup' ? element.position.slice() : zrUtil.extend({}, element.shape);\n  } // If a element is new, we need to find the animation start point carefully,\n  // otherwise it will looks strange when 'zoomToNode'.\n\n\n  function prepareAnimationWhenNoOld(lasts, element, storageName) {\n    var lastCfg = lasts[thisRawIndex] = {};\n    var parentNode = thisNode.parentNode;\n\n    if (parentNode && (!reRoot || reRoot.direction === 'drillDown')) {\n      var parentOldX = 0;\n      var parentOldY = 0; // New nodes appear from right-bottom corner in 'zoomToNode' animation.\n      // For convenience, get old bounding rect from background.\n\n      var parentOldBg = lastsForAnimation.background[parentNode.getRawIndex()];\n\n      if (!reRoot && parentOldBg && parentOldBg.old) {\n        parentOldX = parentOldBg.old.width;\n        parentOldY = parentOldBg.old.height;\n      } // When no parent old shape found, its parent is new too,\n      // so we can just use {x:0, y:0}.\n\n\n      lastCfg.old = storageName === 'nodeGroup' ? [0, parentOldY] : {\n        x: parentOldX,\n        y: parentOldY,\n        width: 0,\n        height: 0\n      };\n    } // Fade in, user can be aware that these nodes are new.\n\n\n    lastCfg.fadein = storageName !== 'nodeGroup';\n  }\n} // We can not set all backgroud with the same z, Because the behaviour of\n// drill down and roll up differ background creation sequence from tree\n// hierarchy sequence, which cause that lowser background element overlap\n// upper ones. So we calculate z based on depth.\n// Moreover, we try to shrink down z interval to [0, 1] to avoid that\n// treemap with large z overlaps other components.\n\n\nfunction calculateZ(depth, zInLevel) {\n  var zb = depth * Z_BASE + zInLevel;\n  return (zb - 1) / zb;\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nfunction retrieveTargetInfo(payload, seriesModel) {\n  if (payload && (payload.type === 'treemapZoomToNode' || payload.type === 'treemapRootToNode')) {\n    var root = seriesModel.getData().tree.root;\n    var targetNode = payload.targetNode;\n\n    if (targetNode && root.contains(targetNode)) {\n      return {\n        node: targetNode\n      };\n    }\n\n    var targetNodeId = payload.targetNodeId;\n\n    if (targetNodeId != null && (targetNode = root.getNodeById(targetNodeId))) {\n      return {\n        node: targetNode\n      };\n    }\n  }\n} // Not includes the given node at the last item.\n\n\nfunction getPathToRoot(node) {\n  var path = [];\n\n  while (node) {\n    node = node.parentNode;\n    node && path.push(node);\n  }\n\n  return path.reverse();\n}\n\nfunction aboveViewRoot(viewRoot, node) {\n  var viewPath = getPathToRoot(viewRoot);\n  return zrUtil.indexOf(viewPath, node) >= 0;\n} // From root to the input node (the input node will be included).\n\n\nfunction wrapTreePathInfo(node, seriesModel) {\n  var treePathInfo = [];\n\n  while (node) {\n    var nodeDataIndex = node.dataIndex;\n    treePathInfo.push({\n      name: node.name,\n      dataIndex: nodeDataIndex,\n      value: seriesModel.getRawValue(nodeDataIndex)\n    });\n    node = node.parentNode;\n  }\n\n  treePathInfo.reverse();\n  return treePathInfo;\n}\n\nexports.retrieveTargetInfo = retrieveTargetInfo;\nexports.getPathToRoot = getPathToRoot;\nexports.aboveViewRoot = aboveViewRoot;\nexports.wrapTreePathInfo = wrapTreePathInfo;","var echarts = require(\"../../echarts\");\n\nvar helper = require(\"./helper\");\n\n/**\n * @file Treemap action\n */\nvar noop = function () {};\n\nvar actionTypes = ['treemapZoomToNode', 'treemapRender', 'treemapMove'];\n\nfor (var i = 0; i < actionTypes.length; i++) {\n  echarts.registerAction({\n    type: actionTypes[i],\n    update: 'updateView'\n  }, noop);\n}\n\necharts.registerAction({\n  type: 'treemapRootToNode',\n  update: 'updateView'\n}, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'series',\n    subType: 'treemap',\n    query: payload\n  }, handleRootToNode);\n\n  function handleRootToNode(model, index) {\n    var targetInfo = helper.retrieveTargetInfo(payload, model);\n\n    if (targetInfo) {\n      var originViewRoot = model.getViewRoot();\n\n      if (originViewRoot) {\n        payload.direction = helper.aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n      }\n\n      model.resetViewRoot(targetInfo.node);\n    }\n  }\n});","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar MAX_SAFE_INTEGER = _number.MAX_SAFE_INTEGER;\n\nvar layout = require(\"../../util/layout\");\n\nvar helper = require(\"./helper\");\n\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar retrieveValue = zrUtil.retrieve;\nvar each = zrUtil.each;\nvar PATH_BORDER_WIDTH = ['itemStyle', 'normal', 'borderWidth'];\nvar PATH_GAP_WIDTH = ['itemStyle', 'normal', 'gapWidth'];\nvar PATH_UPPER_LABEL_SHOW = ['upperLabel', 'normal', 'show'];\nvar PATH_UPPER_LABEL_HEIGHT = ['upperLabel', 'normal', 'height'];\n/**\n * @public\n */\n\nfunction _default(ecModel, api, payload) {\n  // Layout result in each node:\n  // {x, y, width, height, area, borderWidth}\n  var condition = {\n    mainType: 'series',\n    subType: 'treemap',\n    query: payload\n  };\n  ecModel.eachComponent(condition, function (seriesModel) {\n    var ecWidth = api.getWidth();\n    var ecHeight = api.getHeight();\n    var seriesOption = seriesModel.option;\n    var layoutInfo = layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    var size = seriesOption.size || []; // Compatible with ec2.\n\n    var containerWidth = parsePercent(retrieveValue(layoutInfo.width, size[0]), ecWidth);\n    var containerHeight = parsePercent(retrieveValue(layoutInfo.height, size[1]), ecHeight); // Fetch payload info.\n\n    var payloadType = payload && payload.type;\n    var targetInfo = helper.retrieveTargetInfo(payload, seriesModel);\n    var rootRect = payloadType === 'treemapRender' || payloadType === 'treemapMove' ? payload.rootRect : null;\n    var viewRoot = seriesModel.getViewRoot();\n    var viewAbovePath = helper.getPathToRoot(viewRoot);\n\n    if (payloadType !== 'treemapMove') {\n      var rootSize = payloadType === 'treemapZoomToNode' ? estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) : rootRect ? [rootRect.width, rootRect.height] : [containerWidth, containerHeight];\n      var sort = seriesOption.sort;\n\n      if (sort && sort !== 'asc' && sort !== 'desc') {\n        sort = 'desc';\n      }\n\n      var options = {\n        squareRatio: seriesOption.squareRatio,\n        sort: sort,\n        leafDepth: seriesOption.leafDepth\n      }; // layout should be cleared because using updateView but not update.\n\n      viewRoot.hostTree.clearLayouts(); // TODO\n      // optimize: if out of view clip, do not layout.\n      // But take care that if do not render node out of view clip,\n      // how to calculate start po\n\n      var viewRootLayout = {\n        x: 0,\n        y: 0,\n        width: rootSize[0],\n        height: rootSize[1],\n        area: rootSize[0] * rootSize[1]\n      };\n      viewRoot.setLayout(viewRootLayout);\n      squarify(viewRoot, options, false, 0); // Supplement layout.\n\n      var viewRootLayout = viewRoot.getLayout();\n      each(viewAbovePath, function (node, index) {\n        var childValue = (viewAbovePath[index + 1] || viewRoot).getValue();\n        node.setLayout(zrUtil.extend({\n          dataExtent: [childValue, childValue],\n          borderWidth: 0,\n          upperHeight: 0\n        }, viewRootLayout));\n      });\n    }\n\n    var treeRoot = seriesModel.getData().tree.root;\n    treeRoot.setLayout(calculateRootPosition(layoutInfo, rootRect, targetInfo), true);\n    seriesModel.setLayoutInfo(layoutInfo); // FIXME\n    // clipec\n\n    prunning(treeRoot, // Transform to base element coordinate system.\n    new BoundingRect(-layoutInfo.x, -layoutInfo.y, ecWidth, ecHeight), viewAbovePath, viewRoot, 0);\n  });\n}\n/**\n * Layout treemap with squarify algorithm.\n * @see https://graphics.ethz.ch/teaching/scivis_common/Literature/squarifiedTreeMaps.pdf\n * @see https://github.com/mbostock/d3/blob/master/src/layout/treemap.js\n *\n * @protected\n * @param {module:echarts/data/Tree~TreeNode} node\n * @param {Object} options\n * @param {string} options.sort 'asc' or 'desc'\n * @param {number} options.squareRatio\n * @param {boolean} hideChildren\n * @param {number} depth\n */\n\n\nfunction squarify(node, options, hideChildren, depth) {\n  var width;\n  var height;\n\n  if (node.isRemoved()) {\n    return;\n  }\n\n  var thisLayout = node.getLayout();\n  width = thisLayout.width;\n  height = thisLayout.height; // Considering border and gap\n\n  var nodeModel = node.getModel();\n  var borderWidth = nodeModel.get(PATH_BORDER_WIDTH);\n  var halfGapWidth = nodeModel.get(PATH_GAP_WIDTH) / 2;\n  var upperLabelHeight = getUpperLabelHeight(nodeModel);\n  var upperHeight = Math.max(borderWidth, upperLabelHeight);\n  var layoutOffset = borderWidth - halfGapWidth;\n  var layoutOffsetUpper = upperHeight - halfGapWidth;\n  var nodeModel = node.getModel();\n  node.setLayout({\n    borderWidth: borderWidth,\n    upperHeight: upperHeight,\n    upperLabelHeight: upperLabelHeight\n  }, true);\n  width = mathMax(width - 2 * layoutOffset, 0);\n  height = mathMax(height - layoutOffset - layoutOffsetUpper, 0);\n  var totalArea = width * height;\n  var viewChildren = initChildren(node, nodeModel, totalArea, options, hideChildren, depth);\n\n  if (!viewChildren.length) {\n    return;\n  }\n\n  var rect = {\n    x: layoutOffset,\n    y: layoutOffsetUpper,\n    width: width,\n    height: height\n  };\n  var rowFixedLength = mathMin(width, height);\n  var best = Infinity; // the best row score so far\n\n  var row = [];\n  row.area = 0;\n\n  for (var i = 0, len = viewChildren.length; i < len;) {\n    var child = viewChildren[i];\n    row.push(child);\n    row.area += child.getLayout().area;\n    var score = worst(row, rowFixedLength, options.squareRatio); // continue with this orientation\n\n    if (score <= best) {\n      i++;\n      best = score;\n    } // abort, and try a different orientation\n    else {\n        row.area -= row.pop().getLayout().area;\n        position(row, rowFixedLength, rect, halfGapWidth, false);\n        rowFixedLength = mathMin(rect.width, rect.height);\n        row.length = row.area = 0;\n        best = Infinity;\n      }\n  }\n\n  if (row.length) {\n    position(row, rowFixedLength, rect, halfGapWidth, true);\n  }\n\n  if (!hideChildren) {\n    var childrenVisibleMin = nodeModel.get('childrenVisibleMin');\n\n    if (childrenVisibleMin != null && totalArea < childrenVisibleMin) {\n      hideChildren = true;\n    }\n  }\n\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    squarify(viewChildren[i], options, hideChildren, depth + 1);\n  }\n}\n/**\n * Set area to each child, and calculate data extent for visual coding.\n */\n\n\nfunction initChildren(node, nodeModel, totalArea, options, hideChildren, depth) {\n  var viewChildren = node.children || [];\n  var orderBy = options.sort;\n  orderBy !== 'asc' && orderBy !== 'desc' && (orderBy = null);\n  var overLeafDepth = options.leafDepth != null && options.leafDepth <= depth; // leafDepth has higher priority.\n\n  if (hideChildren && !overLeafDepth) {\n    return node.viewChildren = [];\n  } // Sort children, order by desc.\n\n\n  viewChildren = zrUtil.filter(viewChildren, function (child) {\n    return !child.isRemoved();\n  });\n  sort(viewChildren, orderBy);\n  var info = statistic(nodeModel, viewChildren, orderBy);\n\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  }\n\n  info.sum = filterByThreshold(nodeModel, totalArea, info.sum, orderBy, viewChildren);\n\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  } // Set area to each child.\n\n\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    var area = viewChildren[i].getValue() / info.sum * totalArea; // Do not use setLayout({...}, true), because it is needed to clear last layout.\n\n    viewChildren[i].setLayout({\n      area: area\n    });\n  }\n\n  if (overLeafDepth) {\n    viewChildren.length && node.setLayout({\n      isLeafRoot: true\n    }, true);\n    viewChildren.length = 0;\n  }\n\n  node.viewChildren = viewChildren;\n  node.setLayout({\n    dataExtent: info.dataExtent\n  }, true);\n  return viewChildren;\n}\n/**\n * Consider 'visibleMin'. Modify viewChildren and get new sum.\n */\n\n\nfunction filterByThreshold(nodeModel, totalArea, sum, orderBy, orderedChildren) {\n  // visibleMin is not supported yet when no option.sort.\n  if (!orderBy) {\n    return sum;\n  }\n\n  var visibleMin = nodeModel.get('visibleMin');\n  var len = orderedChildren.length;\n  var deletePoint = len; // Always travel from little value to big value.\n\n  for (var i = len - 1; i >= 0; i--) {\n    var value = orderedChildren[orderBy === 'asc' ? len - i - 1 : i].getValue();\n\n    if (value / sum * totalArea < visibleMin) {\n      deletePoint = i;\n      sum -= value;\n    }\n  }\n\n  orderBy === 'asc' ? orderedChildren.splice(0, len - deletePoint) : orderedChildren.splice(deletePoint, len - deletePoint);\n  return sum;\n}\n/**\n * Sort\n */\n\n\nfunction sort(viewChildren, orderBy) {\n  if (orderBy) {\n    viewChildren.sort(function (a, b) {\n      var diff = orderBy === 'asc' ? a.getValue() - b.getValue() : b.getValue() - a.getValue();\n      return diff === 0 ? orderBy === 'asc' ? a.dataIndex - b.dataIndex : b.dataIndex - a.dataIndex : diff;\n    });\n  }\n\n  return viewChildren;\n}\n/**\n * Statistic\n */\n\n\nfunction statistic(nodeModel, children, orderBy) {\n  // Calculate sum.\n  var sum = 0;\n\n  for (var i = 0, len = children.length; i < len; i++) {\n    sum += children[i].getValue();\n  } // Statistic data extent for latter visual coding.\n  // Notice: data extent should be calculate based on raw children\n  // but not filtered view children, otherwise visual mapping will not\n  // be stable when zoom (where children is filtered by visibleMin).\n\n\n  var dimension = nodeModel.get('visualDimension');\n  var dataExtent; // The same as area dimension.\n\n  if (!children || !children.length) {\n    dataExtent = [NaN, NaN];\n  } else if (dimension === 'value' && orderBy) {\n    dataExtent = [children[children.length - 1].getValue(), children[0].getValue()];\n    orderBy === 'asc' && dataExtent.reverse();\n  } // Other dimension.\n  else {\n      var dataExtent = [Infinity, -Infinity];\n      each(children, function (child) {\n        var value = child.getValue(dimension);\n        value < dataExtent[0] && (dataExtent[0] = value);\n        value > dataExtent[1] && (dataExtent[1] = value);\n      });\n    }\n\n  return {\n    sum: sum,\n    dataExtent: dataExtent\n  };\n}\n/**\n * Computes the score for the specified row,\n * as the worst aspect ratio.\n */\n\n\nfunction worst(row, rowFixedLength, ratio) {\n  var areaMax = 0;\n  var areaMin = Infinity;\n\n  for (var i = 0, area, len = row.length; i < len; i++) {\n    area = row[i].getLayout().area;\n\n    if (area) {\n      area < areaMin && (areaMin = area);\n      area > areaMax && (areaMax = area);\n    }\n  }\n\n  var squareArea = row.area * row.area;\n  var f = rowFixedLength * rowFixedLength * ratio;\n  return squareArea ? mathMax(f * areaMax / squareArea, squareArea / (f * areaMin)) : Infinity;\n}\n/**\n * Positions the specified row of nodes. Modifies `rect`.\n */\n\n\nfunction position(row, rowFixedLength, rect, halfGapWidth, flush) {\n  // When rowFixedLength === rect.width,\n  // it is horizontal subdivision,\n  // rowFixedLength is the width of the subdivision,\n  // rowOtherLength is the height of the subdivision,\n  // and nodes will be positioned from left to right.\n  // wh[idx0WhenH] means: when horizontal,\n  //      wh[idx0WhenH] => wh[0] => 'width'.\n  //      xy[idx1WhenH] => xy[1] => 'y'.\n  var idx0WhenH = rowFixedLength === rect.width ? 0 : 1;\n  var idx1WhenH = 1 - idx0WhenH;\n  var xy = ['x', 'y'];\n  var wh = ['width', 'height'];\n  var last = rect[xy[idx0WhenH]];\n  var rowOtherLength = rowFixedLength ? row.area / rowFixedLength : 0;\n\n  if (flush || rowOtherLength > rect[wh[idx1WhenH]]) {\n    rowOtherLength = rect[wh[idx1WhenH]]; // over+underflow\n  }\n\n  for (var i = 0, rowLen = row.length; i < rowLen; i++) {\n    var node = row[i];\n    var nodeLayout = {};\n    var step = rowOtherLength ? node.getLayout().area / rowOtherLength : 0;\n    var wh1 = nodeLayout[wh[idx1WhenH]] = mathMax(rowOtherLength - 2 * halfGapWidth, 0); // We use Math.max/min to avoid negative width/height when considering gap width.\n\n    var remain = rect[xy[idx0WhenH]] + rect[wh[idx0WhenH]] - last;\n    var modWH = i === rowLen - 1 || remain < step ? remain : step;\n    var wh0 = nodeLayout[wh[idx0WhenH]] = mathMax(modWH - 2 * halfGapWidth, 0);\n    nodeLayout[xy[idx1WhenH]] = rect[xy[idx1WhenH]] + mathMin(halfGapWidth, wh1 / 2);\n    nodeLayout[xy[idx0WhenH]] = last + mathMin(halfGapWidth, wh0 / 2);\n    last += modWH;\n    node.setLayout(nodeLayout, true);\n  }\n\n  rect[xy[idx1WhenH]] += rowOtherLength;\n  rect[wh[idx1WhenH]] -= rowOtherLength;\n} // Return [containerWidth, containerHeight] as defualt.\n\n\nfunction estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) {\n  // If targetInfo.node exists, we zoom to the node,\n  // so estimate whold width and heigth by target node.\n  var currNode = (targetInfo || {}).node;\n  var defaultSize = [containerWidth, containerHeight];\n\n  if (!currNode || currNode === viewRoot) {\n    return defaultSize;\n  }\n\n  var parent;\n  var viewArea = containerWidth * containerHeight;\n  var area = viewArea * seriesModel.option.zoomToNodeRatio;\n\n  while (parent = currNode.parentNode) {\n    // jshint ignore:line\n    var sum = 0;\n    var siblings = parent.children;\n\n    for (var i = 0, len = siblings.length; i < len; i++) {\n      sum += siblings[i].getValue();\n    }\n\n    var currNodeValue = currNode.getValue();\n\n    if (currNodeValue === 0) {\n      return defaultSize;\n    }\n\n    area *= sum / currNodeValue; // Considering border, suppose aspect ratio is 1.\n\n    var parentModel = parent.getModel();\n    var borderWidth = parentModel.get(PATH_BORDER_WIDTH);\n    var upperHeight = Math.max(borderWidth, getUpperLabelHeight(parentModel, borderWidth));\n    area += 4 * borderWidth * borderWidth + (3 * borderWidth + upperHeight) * Math.pow(area, 0.5);\n    area > MAX_SAFE_INTEGER && (area = MAX_SAFE_INTEGER);\n    currNode = parent;\n  }\n\n  area < viewArea && (area = viewArea);\n  var scale = Math.pow(area / viewArea, 0.5);\n  return [containerWidth * scale, containerHeight * scale];\n} // Root postion base on coord of containerGroup\n\n\nfunction calculateRootPosition(layoutInfo, rootRect, targetInfo) {\n  if (rootRect) {\n    return {\n      x: rootRect.x,\n      y: rootRect.y\n    };\n  }\n\n  var defaultPosition = {\n    x: 0,\n    y: 0\n  };\n\n  if (!targetInfo) {\n    return defaultPosition;\n  } // If targetInfo is fetched by 'retrieveTargetInfo',\n  // old tree and new tree are the same tree,\n  // so the node still exists and we can visit it.\n\n\n  var targetNode = targetInfo.node;\n  var layout = targetNode.getLayout();\n\n  if (!layout) {\n    return defaultPosition;\n  } // Transform coord from local to container.\n\n\n  var targetCenter = [layout.width / 2, layout.height / 2];\n  var node = targetNode;\n\n  while (node) {\n    var nodeLayout = node.getLayout();\n    targetCenter[0] += nodeLayout.x;\n    targetCenter[1] += nodeLayout.y;\n    node = node.parentNode;\n  }\n\n  return {\n    x: layoutInfo.width / 2 - targetCenter[0],\n    y: layoutInfo.height / 2 - targetCenter[1]\n  };\n} // Mark nodes visible for prunning when visual coding and rendering.\n// Prunning depends on layout and root position, so we have to do it after layout.\n\n\nfunction prunning(node, clipRect, viewAbovePath, viewRoot, depth) {\n  var nodeLayout = node.getLayout();\n  var nodeInViewAbovePath = viewAbovePath[depth];\n  var isAboveViewRoot = nodeInViewAbovePath && nodeInViewAbovePath === node;\n\n  if (nodeInViewAbovePath && !isAboveViewRoot || depth === viewAbovePath.length && node !== viewRoot) {\n    return;\n  }\n\n  node.setLayout({\n    // isInView means: viewRoot sub tree + viewAbovePath\n    isInView: true,\n    // invisible only means: outside view clip so that the node can not\n    // see but still layout for animation preparation but not render.\n    invisible: !isAboveViewRoot && !clipRect.intersect(nodeLayout),\n    isAboveViewRoot: isAboveViewRoot\n  }, true); // Transform to child coordinate.\n\n  var childClipRect = new BoundingRect(clipRect.x - nodeLayout.x, clipRect.y - nodeLayout.y, clipRect.width, clipRect.height);\n  each(node.viewChildren || [], function (child) {\n    prunning(child, childClipRect, viewAbovePath, viewRoot, depth + 1);\n  });\n}\n\nfunction getUpperLabelHeight(model) {\n  return model.get(PATH_UPPER_LABEL_SHOW) ? model.get(PATH_UPPER_LABEL_HEIGHT) : 0;\n}\n\nmodule.exports = _default;","var VisualMapping = require(\"../../visual/VisualMapping\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar isArray = zrUtil.isArray;\nvar ITEM_STYLE_NORMAL = 'itemStyle.normal';\n\nfunction _default(ecModel, api, payload) {\n  var condition = {\n    mainType: 'series',\n    subType: 'treemap',\n    query: payload\n  };\n  ecModel.eachComponent(condition, function (seriesModel) {\n    var tree = seriesModel.getData().tree;\n    var root = tree.root;\n    var seriesItemStyleModel = seriesModel.getModel(ITEM_STYLE_NORMAL);\n\n    if (root.isRemoved()) {\n      return;\n    }\n\n    var levelItemStyles = zrUtil.map(tree.levelModels, function (levelModel) {\n      return levelModel ? levelModel.get(ITEM_STYLE_NORMAL) : null;\n    });\n    travelTree(root, // Visual should calculate from tree root but not view root.\n    {}, levelItemStyles, seriesItemStyleModel, seriesModel.getViewRoot().getAncestors(), seriesModel);\n  });\n}\n\nfunction travelTree(node, designatedVisual, levelItemStyles, seriesItemStyleModel, viewRootAncestors, seriesModel) {\n  var nodeModel = node.getModel();\n  var nodeLayout = node.getLayout(); // Optimize\n\n  if (!nodeLayout || nodeLayout.invisible || !nodeLayout.isInView) {\n    return;\n  }\n\n  var nodeItemStyleModel = node.getModel(ITEM_STYLE_NORMAL);\n  var levelItemStyle = levelItemStyles[node.depth];\n  var visuals = buildVisuals(nodeItemStyleModel, designatedVisual, levelItemStyle, seriesItemStyleModel); // calculate border color\n\n  var borderColor = nodeItemStyleModel.get('borderColor');\n  var borderColorSaturation = nodeItemStyleModel.get('borderColorSaturation');\n  var thisNodeColor;\n\n  if (borderColorSaturation != null) {\n    // For performance, do not always execute 'calculateColor'.\n    thisNodeColor = calculateColor(visuals, node);\n    borderColor = calculateBorderColor(borderColorSaturation, thisNodeColor);\n  }\n\n  node.setVisual('borderColor', borderColor);\n  var viewChildren = node.viewChildren;\n\n  if (!viewChildren || !viewChildren.length) {\n    thisNodeColor = calculateColor(visuals, node); // Apply visual to this node.\n\n    node.setVisual('color', thisNodeColor);\n  } else {\n    var mapping = buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren); // Designate visual to children.\n\n    zrUtil.each(viewChildren, function (child, index) {\n      // If higher than viewRoot, only ancestors of viewRoot is needed to visit.\n      if (child.depth >= viewRootAncestors.length || child === viewRootAncestors[child.depth]) {\n        var childVisual = mapVisual(nodeModel, visuals, child, index, mapping, seriesModel);\n        travelTree(child, childVisual, levelItemStyles, seriesItemStyleModel, viewRootAncestors, seriesModel);\n      }\n    });\n  }\n}\n\nfunction buildVisuals(nodeItemStyleModel, designatedVisual, levelItemStyle, seriesItemStyleModel) {\n  var visuals = zrUtil.extend({}, designatedVisual);\n  zrUtil.each(['color', 'colorAlpha', 'colorSaturation'], function (visualName) {\n    // Priority: thisNode > thisLevel > parentNodeDesignated > seriesModel\n    var val = nodeItemStyleModel.get(visualName, true); // Ignore parent\n\n    val == null && levelItemStyle && (val = levelItemStyle[visualName]);\n    val == null && (val = designatedVisual[visualName]);\n    val == null && (val = seriesItemStyleModel.get(visualName));\n    val != null && (visuals[visualName] = val);\n  });\n  return visuals;\n}\n\nfunction calculateColor(visuals) {\n  var color = getValueVisualDefine(visuals, 'color');\n\n  if (color) {\n    var colorAlpha = getValueVisualDefine(visuals, 'colorAlpha');\n    var colorSaturation = getValueVisualDefine(visuals, 'colorSaturation');\n\n    if (colorSaturation) {\n      color = zrColor.modifyHSL(color, null, null, colorSaturation);\n    }\n\n    if (colorAlpha) {\n      color = zrColor.modifyAlpha(color, colorAlpha);\n    }\n\n    return color;\n  }\n}\n\nfunction calculateBorderColor(borderColorSaturation, thisNodeColor) {\n  return thisNodeColor != null ? zrColor.modifyHSL(thisNodeColor, null, null, borderColorSaturation) : null;\n}\n\nfunction getValueVisualDefine(visuals, name) {\n  var value = visuals[name];\n\n  if (value != null && value !== 'none') {\n    return value;\n  }\n}\n\nfunction buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren) {\n  if (!viewChildren || !viewChildren.length) {\n    return;\n  }\n\n  var rangeVisual = getRangeVisual(nodeModel, 'color') || visuals.color != null && visuals.color !== 'none' && (getRangeVisual(nodeModel, 'colorAlpha') || getRangeVisual(nodeModel, 'colorSaturation'));\n\n  if (!rangeVisual) {\n    return;\n  }\n\n  var visualMin = nodeModel.get('visualMin');\n  var visualMax = nodeModel.get('visualMax');\n  var dataExtent = nodeLayout.dataExtent.slice();\n  visualMin != null && visualMin < dataExtent[0] && (dataExtent[0] = visualMin);\n  visualMax != null && visualMax > dataExtent[1] && (dataExtent[1] = visualMax);\n  var colorMappingBy = nodeModel.get('colorMappingBy');\n  var opt = {\n    type: rangeVisual.name,\n    dataExtent: dataExtent,\n    visual: rangeVisual.range\n  };\n\n  if (opt.type === 'color' && (colorMappingBy === 'index' || colorMappingBy === 'id')) {\n    opt.mappingMethod = 'category';\n    opt.loop = true; // categories is ordinal, so do not set opt.categories.\n  } else {\n    opt.mappingMethod = 'linear';\n  }\n\n  var mapping = new VisualMapping(opt);\n  mapping.__drColorMappingBy = colorMappingBy;\n  return mapping;\n} // Notice: If we dont have the attribute 'colorRange', but only use\n// attribute 'color' to represent both concepts of 'colorRange' and 'color',\n// (It means 'colorRange' when 'color' is Array, means 'color' when not array),\n// this problem will be encountered:\n// If a level-1 node dont have children, and its siblings has children,\n// and colorRange is set on level-1, then the node can not be colored.\n// So we separate 'colorRange' and 'color' to different attributes.\n\n\nfunction getRangeVisual(nodeModel, name) {\n  // 'colorRange', 'colorARange', 'colorSRange'.\n  // If not exsits on this node, fetch from levels and series.\n  var range = nodeModel.get(name);\n  return isArray(range) && range.length ? {\n    name: name,\n    range: range\n  } : null;\n}\n\nfunction mapVisual(nodeModel, visuals, child, index, mapping, seriesModel) {\n  var childVisuals = zrUtil.extend({}, visuals);\n\n  if (mapping) {\n    var mappingType = mapping.type;\n    var colorMappingBy = mappingType === 'color' && mapping.__drColorMappingBy;\n    var value = colorMappingBy === 'index' ? index : colorMappingBy === 'id' ? seriesModel.mapIdToIndex(child.getId()) : child.getValue(nodeModel.get('visualDimension'));\n    childVisuals[mappingType] = mapping.mapValueToVisual(value);\n  }\n\n  return childVisuals;\n}\n\nmodule.exports = _default;","require(\"../coord/polar/polarCreator\");\n\nrequire(\"./axis/AngleAxisView\");","require(\"../coord/cartesian/AxisModel\");\n\nrequire(\"./axis/CartesianAxisView\");","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisPointerModelHelper = require(\"./axisPointer/modelHelper\");\n\nvar axisTrigger = require(\"./axisPointer/axisTrigger\");\n\nrequire(\"./axisPointer/AxisPointerModel\");\n\nrequire(\"./axisPointer/AxisPointerView\");\n\nrequire(\"./axisPointer/CartesianAxisPointer\");\n\n// CartesianAxisPointer is not supposed to be required here. But consider\n// echarts.simple.js and online build tooltip, which only require gridSimple,\n// CartesianAxisPointer should be able to required somewhere.\necharts.registerPreprocessor(function (option) {\n  // Always has a global axisPointerModel for default setting.\n  if (option) {\n    (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n    var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n    // is not set, remain null/undefined, otherwise it will\n    // override existent link setting.\n\n    if (link && !zrUtil.isArray(link)) {\n      option.axisPointer.link = [link];\n    }\n  }\n}); // This process should proformed after coordinate systems created\n// and series data processed. So put it on statistic processing stage.\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n  // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n  // allAxesInfo should be updated when setOption performed.\n  ecModel.getComponent('axisPointer').coordSysAxesInfo = axisPointerModelHelper.collect(ecModel, api);\n}); // Broadcast to all views.\n\necharts.registerAction({\n  type: 'updateAxisPointer',\n  event: 'updateAxisPointer',\n  update: ':updateAxisPointer'\n}, axisTrigger);","var echarts = require(\"../../echarts\");\n\nvar AxisPointerModel = echarts.extendComponentModel({\n  type: 'axisPointer',\n  coordSysAxesInfo: null,\n  defaultOption: {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: null,\n    // set default in AxisPonterView.js\n    zlevel: 0,\n    z: 50,\n    type: 'line',\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    // Init value depends on whether handle is used.\n    // [group0, group1, ...]\n    // Each group can be: {\n    //      mapper: function () {},\n    //      singleTooltip: 'multiple',  // 'multiple' or 'single'\n    //      xAxisId: ...,\n    //      yAxisName: ...,\n    //      angleAxisIndex: ...\n    // }\n    // mapper: can be ignored.\n    //      input: {axisInfo, value}\n    //      output: {axisInfo, value}\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      type: 'solid'\n    },\n    shadowStyle: {\n      color: 'rgba(150,150,150,0.3)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      // string | Function\n      precision: 'auto',\n      // Or a number like 0, 1, 2 ...\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      // default: axis line color\n      borderColor: null,\n      borderWidth: 0,\n      shadowBlur: 3,\n      shadowColor: '#aaa' // Considering applicability, common style should\n      // better not have shadowOffset.\n      // shadowOffsetX: 0,\n      // shadowOffsetY: 2\n\n    },\n    handle: {\n      show: false,\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      // jshint ignore:line\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  }\n});\nvar _default = AxisPointerModel;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar globalListener = require(\"./globalListener\");\n\nvar AxisPointerView = echarts.extendComponentView({\n  type: 'axisPointer',\n  render: function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    globalListener.unregister(api.getZr(), 'axisPointer');\n    AxisPointerView.superApply(this._model, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n    AxisPointerView.superApply(this._model, 'dispose', arguments);\n  }\n});\nvar _default = AxisPointerView;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar clazzUtil = require(\"../../util/clazz\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar axisPointerModelHelper = require(\"./modelHelper\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar throttleUtil = require(\"../../util/throttle\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar get = modelUtil.makeGetter();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n * Implemenents {module:echarts/component/axis/IAxisPointer}.\n */\n\nfunction BaseAxisPointer() {}\n\nBaseAxisPointer.prototype = {\n  /**\n   * @private\n   */\n  _group: null,\n\n  /**\n   * @private\n   */\n  _lastGraphicKey: null,\n\n  /**\n   * @private\n   */\n  _handle: null,\n\n  /**\n   * @private\n   */\n  _dragging: false,\n\n  /**\n   * @private\n   */\n  _lastValue: null,\n\n  /**\n   * @private\n   */\n  _lastStatus: null,\n\n  /**\n   * @private\n   */\n  _payloadInfo: null,\n\n  /**\n   * In px, arbitrary value. Do not set too small,\n   * no animation is ok for most cases.\n   * @protected\n   */\n  animationThreshold: 15,\n\n  /**\n   * @implement\n   */\n  render: function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps, axisPointerModel);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  },\n\n  /**\n   * @implement\n   */\n  remove: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @implement\n   */\n  dispose: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @protected\n   */\n  determineAnimation: function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  },\n\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  },\n\n  /**\n   * @protected\n   */\n  createPointerEl: function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = get(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  createLabelEl: function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = get(group).labelEl = new graphic.Rect(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updatePointerEl: function (group, elOption, updateProps) {\n    var pointerEl = get(group).pointerEl;\n\n    if (pointerEl) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updateLabelEl: function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = get(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        shape: elOption.label.shape,\n        position: elOption.label.position\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderHandle: function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    var includeStyles = ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n    handle.setStyle(handleModel.getItemStyle(null, includeStyles)); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.attr('scale', [handleSize[0] / 2, handleSize[1] / 2]);\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  },\n\n  /**\n   * @private\n   */\n  _moveHandleToValue: function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragMove: function (dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    get(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  },\n\n  /**\n   * Throttled method.\n   * @private\n   */\n  _doDispatchAxisPointer: function () {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragEnd: function (moveAnimation) {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  },\n\n  /**\n   * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {number} value\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0}\n   */\n  getHandleTransform: null,\n\n  /**\n   * * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {Object} transform {position, rotation}\n   * @param {Array.<number>} delta [dx, dy]\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0, cursorPoint: [x, y]}\n   */\n  updateHandleTransform: null,\n\n  /**\n   * @private\n   */\n  clear: function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n  },\n\n  /**\n   * @protected\n   */\n  doClear: function () {// Implemented by sub-class if necessary.\n  },\n\n  /**\n   * @protected\n   * @param {Array.<number>} xy\n   * @param {Array.<number>} wh\n   * @param {number} [xDimIndex=0] or 1\n   */\n  buildLabel: function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  }\n};\nBaseAxisPointer.prototype.constructor = BaseAxisPointer;\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(get(el).lastProp, props)) {\n    get(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals = equals && propsEqual(lastProps[key], item);\n    });\n    return !!equals;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get('label.show') ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    position: trans.position.slice(),\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nclazzUtil.enableClassExtend(BaseAxisPointer);\nvar _default = BaseAxisPointer;\nmodule.exports = _default;","var graphic = require(\"../../util/graphic\");\n\nvar BaseAxisPointer = require(\"./BaseAxisPointer\");\n\nvar viewHelper = require(\"./viewHelper\");\n\nvar cartesianAxisHelper = require(\"../axis/cartesianAxisHelper\");\n\nvar AxisView = require(\"../axis/AxisView\");\n\nvar CartesianAxisPointer = BaseAxisPointer.extend({\n  /**\n   * @override\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent, elStyle);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  },\n\n  /**\n   * @override\n   */\n  getHandleTransform: function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    });\n    layoutInfo.labelMargin = axisPointerModel.get('handle.margin');\n    return {\n      position: viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo),\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  },\n\n  /**\n   * @override\n   */\n  updateHandleTransform: function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = transform.position;\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      position: currPosition,\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  }\n});\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent, elStyle) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    graphic.subPixelOptimizeLine({\n      shape: targetShape,\n      style: elStyle\n    });\n    return {\n      type: 'Line',\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent, elStyle) {\n    var bandWidth = axis.getBandWidth();\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nAxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\nvar _default = CartesianAxisPointer;\nmodule.exports = _default;","var formatUtil = require(\"../../util/format\");\n\nvar BaseAxisPointer = require(\"./BaseAxisPointer\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar viewHelper = require(\"./viewHelper\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar AxisBuilder = require(\"../axis/AxisBuilder\");\n\nvar AxisView = require(\"../axis/AxisView\");\n\nvar PolarAxisPointer = BaseAxisPointer.extend({\n  /**\n   * @override\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n\n    if (axis.dim === 'angle') {\n      this.animationThreshold = Math.PI / 18;\n    }\n\n    var polar = axis.polar;\n    var otherAxis = polar.getOtherAxis(axis);\n    var otherExtent = otherAxis.getExtent();\n    var coordValue;\n    coordValue = axis['dataTo' + formatUtil.capitalFirst(axis.dim)](value);\n    var axisPointerType = axisPointerModel.get('type');\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, polar, coordValue, otherExtent, elStyle);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var labelMargin = axisPointerModel.get('label.margin');\n    var labelPos = getLabelPosition(value, axisModel, axisPointerModel, polar, labelMargin);\n    viewHelper.buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos);\n  } // Do not support handle, utill any user requires it.\n\n});\n\nfunction getLabelPosition(value, axisModel, axisPointerModel, polar, labelMargin) {\n  var axis = axisModel.axis;\n  var coord = axis.dataToCoord(value);\n  var axisAngle = polar.getAngleAxis().getExtent()[0];\n  axisAngle = axisAngle / 180 * Math.PI;\n  var radiusExtent = polar.getRadiusAxis().getExtent();\n  var position;\n  var align;\n  var verticalAlign;\n\n  if (axis.dim === 'radius') {\n    var transform = matrix.create();\n    matrix.rotate(transform, transform, axisAngle);\n    matrix.translate(transform, transform, [polar.cx, polar.cy]);\n    position = graphic.applyTransform([coord, -labelMargin], transform);\n    var labelRotation = axisModel.getModel('axisLabel').get('rotate') || 0;\n    var labelLayout = AxisBuilder.innerTextLayout(axisAngle, labelRotation * Math.PI / 180, -1);\n    align = labelLayout.textAlign;\n    verticalAlign = labelLayout.textVerticalAlign;\n  } else {\n    // angle axis\n    var r = radiusExtent[1];\n    position = polar.coordToPoint([r + labelMargin, coord]);\n    var cx = polar.cx;\n    var cy = polar.cy;\n    align = Math.abs(position[0] - cx) / r < 0.3 ? 'center' : position[0] > cx ? 'left' : 'right';\n    verticalAlign = Math.abs(position[1] - cy) / r < 0.3 ? 'middle' : position[1] > cy ? 'top' : 'bottom';\n  }\n\n  return {\n    position: position,\n    align: align,\n    verticalAlign: verticalAlign\n  };\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, polar, coordValue, otherExtent, elStyle) {\n    return axis.dim === 'angle' ? {\n      type: 'Line',\n      shape: viewHelper.makeLineShape(polar.coordToPoint([otherExtent[0], coordValue]), polar.coordToPoint([otherExtent[1], coordValue]))\n    } : {\n      type: 'Circle',\n      shape: {\n        cx: polar.cx,\n        cy: polar.cy,\n        r: coordValue\n      }\n    };\n  },\n  shadow: function (axis, polar, coordValue, otherExtent, elStyle) {\n    var bandWidth = axis.getBandWidth();\n    var radian = Math.PI / 180;\n    return axis.dim === 'angle' ? {\n      type: 'Sector',\n      shape: viewHelper.makeSectorShape(polar.cx, polar.cy, otherExtent[0], otherExtent[1], // In ECharts y is negative if angle is positive\n      (-coordValue - bandWidth / 2) * radian, (-coordValue + bandWidth / 2) * radian)\n    } : {\n      type: 'Sector',\n      shape: viewHelper.makeSectorShape(polar.cx, polar.cy, coordValue - bandWidth / 2, coordValue + bandWidth / 2, 0, Math.PI * 2)\n    };\n  }\n};\nAxisView.registerAxisPointerClass('PolarAxisPointer', PolarAxisPointer);\nvar _default = PolarAxisPointer;\nmodule.exports = _default;","var graphic = require(\"../../util/graphic\");\n\nvar BaseAxisPointer = require(\"./BaseAxisPointer\");\n\nvar viewHelper = require(\"./viewHelper\");\n\nvar singleAxisHelper = require(\"../axis/singleAxisHelper\");\n\nvar AxisView = require(\"../axis/AxisView\");\n\nvar XY = ['x', 'y'];\nvar WH = ['width', 'height'];\nvar SingleAxisPointer = BaseAxisPointer.extend({\n  /**\n   * @override\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var coordSys = axis.coordinateSystem;\n    var otherExtent = getGlobalExtent(coordSys, 1 - getPointDimIndex(axis));\n    var pixelValue = coordSys.dataToPoint(value)[0];\n    var axisPointerType = axisPointerModel.get('type');\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent, elStyle);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = singleAxisHelper.layout(axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  },\n\n  /**\n   * @override\n   */\n  getHandleTransform: function (value, axisModel, axisPointerModel) {\n    var layoutInfo = singleAxisHelper.layout(axisModel, {\n      labelInside: false\n    });\n    layoutInfo.labelMargin = axisPointerModel.get('handle.margin');\n    return {\n      position: viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo),\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  },\n\n  /**\n   * @override\n   */\n  updateHandleTransform: function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var coordSys = axis.coordinateSystem;\n    var dimIndex = getPointDimIndex(axis);\n    var axisExtent = getGlobalExtent(coordSys, dimIndex);\n    var currPosition = transform.position;\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var otherExtent = getGlobalExtent(coordSys, 1 - dimIndex);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex];\n    return {\n      position: currPosition,\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: {\n        verticalAlign: 'middle'\n      }\n    };\n  }\n});\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent, elStyle) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getPointDimIndex(axis));\n    graphic.subPixelOptimizeLine({\n      shape: targetShape,\n      style: elStyle\n    });\n    return {\n      type: 'Line',\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent, elStyle) {\n    var bandWidth = axis.getBandWidth();\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getPointDimIndex(axis))\n    };\n  }\n};\n\nfunction getPointDimIndex(axis) {\n  return axis.isHorizontal() ? 0 : 1;\n}\n\nfunction getGlobalExtent(coordSys, dimIndex) {\n  var rect = coordSys.getRect();\n  return [rect[XY[dimIndex]], rect[XY[dimIndex]] + rect[WH[dimIndex]]];\n}\n\nAxisView.registerAxisPointerClass('SingleAxisPointer', SingleAxisPointer);\nvar _default = SingleAxisPointer;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar modelHelper = require(\"./modelHelper\");\n\nvar findPointFromSeries = require(\"./findPointFromSeries\");\n\nvar each = zrUtil.each;\nvar curry = zrUtil.curry;\nvar get = modelUtil.makeGetter();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @param {Object} coordSysAxesInfo\n * @param {Object} payload\n * @param {string} [payload.currTrigger] 'click' | 'mousemove' | 'leave'\n * @param {Array.<number>} [payload.x] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Array.<number>} [payload.y] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Object} [payload.seriesIndex] finder, optional, restrict target axes.\n * @param {Object} [payload.dataIndex] finder, restrict target axes.\n * @param {Object} [payload.axesInfo] finder, restrict target axes.\n *        [{\n *          axisDim: 'x'|'y'|'angle'|...,\n *          axisIndex: ...,\n *          value: ...\n *        }, ...]\n * @param {Function} [payload.dispatchAction]\n * @param {Object} [payload.tooltipOption]\n * @param {Object|Array.<number>|Function} [payload.position] Tooltip position,\n *        which can be specified in dispatchAction\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n * @return {Object} content of event obj for echarts.connect.\n */\n\nfunction _default(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputFinder = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputFinder);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputFinder);\n  });\n  updateModelActually(showValueMap, axesInfo, outputFinder);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputFinder;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, dontSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By defualt use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    zrUtil.extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!dontSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch, outputFinder); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.coordDimToDataDim(dim);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      false, axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get('label.precision'),\n      formatter: axisPointerModel.get('label.formatter')\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputFinder) {\n  var outputAxesInfo = outputFinder.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n        // If hide, value still need to be set, consider\n        // click legend to toggle axis blank.\n        !axisInfo.useHandle && (option.status = 'hide');\n      } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = get(zr)[highDownKey] || {};\n  var newHighlights = get(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  zrUtil.each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  zrUtil.each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/**\n * @param {Object} finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param {module:echarts/model/Global} ecModel\n * @return {Object} {point: [x, y], el: ...} point Will not be null.\n */\nfunction _default(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n      return seriesModel.coordDimToDataDim(dim)[0];\n    }), dataIndex, true)) || [];\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar get = modelUtil.makeGetter();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nfunction register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  get(zr).records || (get(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = get(zr).records[key] || (get(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (get(zr).initialized) {\n    return;\n  }\n\n  get(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(get(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\nfunction unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (get(zr).records || {})[key];\n\n  if (record) {\n    get(zr).records[key] = null;\n  }\n}\n\nexports.register = register;\nexports.unregister = unregister;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\nvar each = zrUtil.each;\nvar curry = zrUtil.curry; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\n\nfunction collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\n\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = []; // Collect axes info.\n\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n    // for user. So we enable seting tooltip on coordSys model.\n\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n    if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get('axisPointer.type') === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get('axisPointer.axis'));\n\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    } // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n\n\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var key = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n      var axisInfo = result.axesInfo[key] = {\n        key: key,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: []\n      };\n      axesInfoInCoordSys[key] = axisInfo;\n      result.seriesInvolved |= involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[key] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\n\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var volatileOption = {};\n  each(['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'], function (field) {\n    volatileOption[field] = zrUtil.clone(tooltipAxisPointerModel.get(field));\n  }); // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n  // Only these properties can be overrided from tooltip to axisPointer.\n\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n\n  var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n  labelOption.show == null && (labelOption.show = false);\n\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    labelOption.show = true; // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && zrUtil.defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\n\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get('tooltip.trigger', true);\n    var seriesTooltipShow = seriesModel.get('tooltip.show', true);\n\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get('axisPointer.show', true) === false) {\n      return;\n    }\n\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  }, this);\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\n\n\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\n\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || zrUtil.isArray(linkPropValue) && zrUtil.indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\n\nfunction fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n\n  if (!axisInfo) {\n    return;\n  }\n\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n  if (value != null) {\n    value = scale.parse(value);\n  }\n\n  var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n\n  if ( // Pick a value on axis when initializing.\n  value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n\n  option.value = value;\n\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\n\nfunction getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\n\nfunction getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\n\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get('handle.show');\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\n\n\nfunction makeKey(model) {\n  return model.type + '||' + model.id;\n}\n\nexports.collect = collect;\nexports.fixValue = fixValue;\nexports.getAxisInfo = getAxisInfo;\nexports.getAxisPointerModel = getAxisPointerModel;\nexports.makeKey = makeKey;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar AxisBuilder = require(\"../axis/AxisBuilder\");\n\n/**\n * @param {module:echarts/model/Model} axisPointerModel\n */\nfunction buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\n\nfunction buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get('label.precision'),\n    formatter: axisPointerModel.get('label.formatter')\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get('axisLine.lineStyle.color');\n  }\n\n  elOption.label = {\n    shape: {\n      x: 0,\n      y: 0,\n      width: width,\n      height: height,\n      r: labelModel.get('borderRadius')\n    },\n    position: position.slice(),\n    // TODO: rich\n    style: {\n      text: text,\n      textFont: font,\n      textFill: labelModel.getTextColor(),\n      textPosition: 'inside',\n      fill: bgColor,\n      stroke: labelModel.get('borderColor') || 'transparent',\n      lineWidth: labelModel.get('borderWidth') || 0,\n      shadowBlur: labelModel.get('shadowBlur'),\n      shadowColor: labelModel.get('shadowColor'),\n      shadowOffsetX: labelModel.get('shadowOffsetX'),\n      shadowOffsetY: labelModel.get('shadowOffsetY')\n    },\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n/**\n * @param {number} value\n * @param {module:echarts/coord/Axis} axis\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} opt\n * @param {Array.<Object>} seriesDataIndices\n * @param {number|string} opt.precision 'auto' or a number\n * @param {string|Function} opt.formatter label formatter\n */\n\n\nfunction getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  var text = axis.scale.getLabel( // If `precision` is set, width can be fixed (like '12.00500'), which\n  // helps to debounce when when moving label.\n  value, {\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params = {\n      value: axisHelper.getAxisRawValue(axis, value),\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params);\n    }\n  }\n\n  return text;\n}\n/**\n * @param {module:echarts/coord/Axis} axis\n * @param {number} value\n * @param {Object} layoutInfo {\n *  rotation, position, labelOffset, labelDirection, labelMargin\n * }\n */\n\n\nfunction getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\n\nfunction buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get('label.margin');\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\n/**\n * @param {Array.<number>} p1\n * @param {Array.<number>} p2\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\n/**\n * @param {Array.<number>} xy\n * @param {Array.<number>} wh\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\n\nfunction makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}\n\nexports.buildElStyle = buildElStyle;\nexports.buildLabelElOption = buildLabelElOption;\nexports.getValueLabel = getValueLabel;\nexports.getTransformedPosition = getTransformedPosition;\nexports.buildCartesianSingleLabelElOption = buildCartesianSingleLabelElOption;\nexports.makeLineShape = makeLineShape;\nexports.makeRectShape = makeRectShape;\nexports.makeSectorShape = makeSectorShape;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar Model = require(\"../../model/Model\");\n\nvar AxisView = require(\"./AxisView\");\n\nvar elementList = ['axisLine', 'axisLabel', 'axisTick', 'splitLine', 'splitArea'];\n\nfunction getAxisLineShape(polar, rExtent, angle) {\n  rExtent[1] > rExtent[0] && (rExtent = rExtent.slice().reverse());\n  var start = polar.coordToPoint([rExtent[0], angle]);\n  var end = polar.coordToPoint([rExtent[1], angle]);\n  return {\n    x1: start[0],\n    y1: start[1],\n    x2: end[0],\n    y2: end[1]\n  };\n}\n\nfunction getRadiusIdx(polar) {\n  var radiusAxis = polar.getRadiusAxis();\n  return radiusAxis.inverse ? 0 : 1;\n}\n\nvar _default = AxisView.extend({\n  type: 'angleAxis',\n  axisPointerClass: 'PolarAxisPointer',\n  render: function (angleAxisModel, ecModel) {\n    this.group.removeAll();\n\n    if (!angleAxisModel.get('show')) {\n      return;\n    }\n\n    var angleAxis = angleAxisModel.axis;\n    var polar = angleAxis.polar;\n    var radiusExtent = polar.getRadiusAxis().getExtent();\n    var ticksAngles = angleAxis.getTicksCoords();\n\n    if (angleAxis.type !== 'category') {\n      // Remove the last tick which will overlap the first tick\n      ticksAngles.pop();\n    }\n\n    zrUtil.each(elementList, function (name) {\n      if (angleAxisModel.get(name + '.show') && (!angleAxis.scale.isBlank() || name === 'axisLine')) {\n        this['_' + name](angleAxisModel, polar, ticksAngles, radiusExtent);\n      }\n    }, this);\n  },\n\n  /**\n   * @private\n   */\n  _axisLine: function (angleAxisModel, polar, ticksAngles, radiusExtent) {\n    var lineStyleModel = angleAxisModel.getModel('axisLine.lineStyle');\n    var circle = new graphic.Circle({\n      shape: {\n        cx: polar.cx,\n        cy: polar.cy,\n        r: radiusExtent[getRadiusIdx(polar)]\n      },\n      style: lineStyleModel.getLineStyle(),\n      z2: 1,\n      silent: true\n    });\n    circle.style.fill = null;\n    this.group.add(circle);\n  },\n\n  /**\n   * @private\n   */\n  _axisTick: function (angleAxisModel, polar, ticksAngles, radiusExtent) {\n    var tickModel = angleAxisModel.getModel('axisTick');\n    var tickLen = (tickModel.get('inside') ? -1 : 1) * tickModel.get('length');\n    var radius = radiusExtent[getRadiusIdx(polar)];\n    var lines = zrUtil.map(ticksAngles, function (tickAngle) {\n      return new graphic.Line({\n        shape: getAxisLineShape(polar, [radius, radius + tickLen], tickAngle)\n      });\n    });\n    this.group.add(graphic.mergePath(lines, {\n      style: zrUtil.defaults(tickModel.getModel('lineStyle').getLineStyle(), {\n        stroke: angleAxisModel.get('axisLine.lineStyle.color')\n      })\n    }));\n  },\n\n  /**\n   * @private\n   */\n  _axisLabel: function (angleAxisModel, polar, ticksAngles, radiusExtent) {\n    var axis = angleAxisModel.axis;\n    var categoryData = angleAxisModel.get('data');\n    var labelModel = angleAxisModel.getModel('axisLabel');\n    var labels = angleAxisModel.getFormattedLabels();\n    var labelMargin = labelModel.get('margin');\n    var labelsAngles = axis.getLabelsCoords(); // Use length of ticksAngles because it may remove the last tick to avoid overlapping\n\n    for (var i = 0; i < ticksAngles.length; i++) {\n      var r = radiusExtent[getRadiusIdx(polar)];\n      var p = polar.coordToPoint([r + labelMargin, labelsAngles[i]]);\n      var cx = polar.cx;\n      var cy = polar.cy;\n      var labelTextAlign = Math.abs(p[0] - cx) / r < 0.3 ? 'center' : p[0] > cx ? 'left' : 'right';\n      var labelTextVerticalAlign = Math.abs(p[1] - cy) / r < 0.3 ? 'middle' : p[1] > cy ? 'top' : 'bottom';\n\n      if (categoryData && categoryData[i] && categoryData[i].textStyle) {\n        labelModel = new Model(categoryData[i].textStyle, labelModel, labelModel.ecModel);\n      }\n\n      var textEl = new graphic.Text({\n        silent: true\n      });\n      this.group.add(textEl);\n      graphic.setTextStyle(textEl.style, labelModel, {\n        x: p[0],\n        y: p[1],\n        textFill: labelModel.getTextColor() || angleAxisModel.get('axisLine.lineStyle.color'),\n        text: labels[i],\n        textAlign: labelTextAlign,\n        textVerticalAlign: labelTextVerticalAlign\n      });\n    }\n  },\n\n  /**\n   * @private\n   */\n  _splitLine: function (angleAxisModel, polar, ticksAngles, radiusExtent) {\n    var splitLineModel = angleAxisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var lineCount = 0;\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var splitLines = [];\n\n    for (var i = 0; i < ticksAngles.length; i++) {\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(new graphic.Line({\n        shape: getAxisLineShape(polar, radiusExtent, ticksAngles[i])\n      }));\n    } // Simple optimization\n    // Batching the lines if color are the same\n\n\n    for (var i = 0; i < splitLines.length; i++) {\n      this.group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length]\n        }, lineStyleModel.getLineStyle()),\n        silent: true,\n        z: angleAxisModel.get('z')\n      }));\n    }\n  },\n\n  /**\n   * @private\n   */\n  _splitArea: function (angleAxisModel, polar, ticksAngles, radiusExtent) {\n    var splitAreaModel = angleAxisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var lineCount = 0;\n    areaColors = areaColors instanceof Array ? areaColors : [areaColors];\n    var splitAreas = [];\n    var RADIAN = Math.PI / 180;\n    var prevAngle = -ticksAngles[0] * RADIAN;\n    var r0 = Math.min(radiusExtent[0], radiusExtent[1]);\n    var r1 = Math.max(radiusExtent[0], radiusExtent[1]);\n    var clockwise = angleAxisModel.get('clockwise');\n\n    for (var i = 1; i < ticksAngles.length; i++) {\n      var colorIndex = lineCount++ % areaColors.length;\n      splitAreas[colorIndex] = splitAreas[colorIndex] || [];\n      splitAreas[colorIndex].push(new graphic.Sector({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r0: r0,\n          r: r1,\n          startAngle: prevAngle,\n          endAngle: -ticksAngles[i] * RADIAN,\n          clockwise: clockwise\n        },\n        silent: true\n      }));\n      prevAngle = -ticksAngles[i] * RADIAN;\n    } // Simple optimization\n    // Batching the lines if color are the same\n\n\n    for (var i = 0; i < splitAreas.length; i++) {\n      this.group.add(graphic.mergePath(splitAreas[i], {\n        style: zrUtil.defaults({\n          fill: areaColors[i % areaColors.length]\n        }, areaStyleModel.getAreaStyle()),\n        silent: true\n      }));\n    }\n  }\n});\n\nmodule.exports = _default;","var _util = require(\"zrender/lib/core/util\");\n\nvar retrieve = _util.retrieve;\nvar defaults = _util.defaults;\nvar extend = _util.extend;\nvar each = _util.each;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _number = require(\"../../util/number\");\n\nvar isRadianAroundZero = _number.isRadianAroundZero;\nvar remRadian = _number.remRadian;\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar matrixUtil = require(\"zrender/lib/core/matrix\");\n\nvar _vector = require(\"zrender/lib/core/vector\");\n\nvar v2ApplyTransform = _vector.applyTransform;\nvar PI = Math.PI;\n\nfunction makeAxisEventDataBase(axisModel) {\n  var eventData = {\n    componentType: axisModel.mainType\n  };\n  eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n  return eventData;\n}\n/**\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n * for example: (0, 0) ------------> (0, 50)\n *\n * nameDirection or tickDirection or labelDirection is 1 means tick\n * or label is below the standard axis, whereas is -1 means above\n * the standard axis. labelOffset means offset between label and axis,\n * which is useful when 'onZero', where axisLabel is in the grid and\n * label in outside grid.\n *\n * Tips: like always,\n * positive rotation represents anticlockwise, and negative rotation\n * represents clockwise.\n * The direction of position coordinate is the same as the direction\n * of screen coordinate.\n *\n * Do not need to consider axis 'inverse', which is auto processed by\n * axis extent.\n *\n * @param {module:zrender/container/Group} group\n * @param {Object} axisModel\n * @param {Object} opt Standard axis parameters.\n * @param {Array.<number>} opt.position [x, y]\n * @param {number} opt.rotation by radian\n * @param {number} [opt.nameDirection=1] 1 or -1 Used when nameLocation is 'middle' or 'center'.\n * @param {number} [opt.tickDirection=1] 1 or -1\n * @param {number} [opt.labelDirection=1] 1 or -1\n * @param {number} [opt.labelOffset=0] Usefull when onZero.\n * @param {string} [opt.axisLabelShow] default get from axisModel.\n * @param {string} [opt.axisName] default get from axisModel.\n * @param {number} [opt.axisNameAvailableWidth]\n * @param {number} [opt.labelRotate] by degree, default get from axisModel.\n * @param {number} [opt.labelInterval] Default label interval when label\n *                                     interval from model is null or 'auto'.\n * @param {number} [opt.strokeContainThreshold] Default label interval when label\n * @param {number} [opt.nameTruncateMaxWidth]\n */\n\n\nvar AxisBuilder = function (axisModel, opt) {\n  /**\n   * @readOnly\n   */\n  this.opt = opt;\n  /**\n   * @readOnly\n   */\n\n  this.axisModel = axisModel; // Default value\n\n  defaults(opt, {\n    labelOffset: 0,\n    nameDirection: 1,\n    tickDirection: 1,\n    labelDirection: 1,\n    silent: true\n  });\n  /**\n   * @readOnly\n   */\n\n  this.group = new graphic.Group(); // FIXME Not use a seperate text group?\n\n  var dumbGroup = new graphic.Group({\n    position: opt.position.slice(),\n    rotation: opt.rotation\n  }); // this.group.add(dumbGroup);\n  // this._dumbGroup = dumbGroup;\n\n  dumbGroup.updateTransform();\n  this._transform = dumbGroup.transform;\n  this._dumbGroup = dumbGroup;\n};\n\nAxisBuilder.prototype = {\n  constructor: AxisBuilder,\n  hasBuilder: function (name) {\n    return !!builders[name];\n  },\n  add: function (name) {\n    builders[name].call(this);\n  },\n  getGroup: function () {\n    return this.group;\n  }\n};\nvar builders = {\n  /**\n   * @private\n   */\n  axisLine: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n\n    if (!axisModel.get('axisLine.show')) {\n      return;\n    }\n\n    var extent = this.axisModel.axis.getExtent();\n    var matrix = this._transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel('axisLine.lineStyle').getLineStyle());\n    this.group.add(new graphic.Line(graphic.subPixelOptimizeLine({\n      // Id for animation\n      anid: 'line',\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    })));\n    var arrows = axisModel.get('axisLine.symbol');\n    var arrowSize = axisModel.get('axisLine.symbolSize');\n\n    if (arrows != null) {\n      if (typeof arrows === 'string') {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n\n      if (typeof arrowSize === 'string' || typeof arrowSize === 'number') {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n\n      var symbolWidth = arrowSize[0];\n      var symbolHeight = arrowSize[1];\n      each([[opt.rotation + Math.PI / 2, pt1], [opt.rotation - Math.PI / 2, pt2]], function (item, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth / 2, -symbolHeight / 2, symbolWidth, symbolHeight, lineStyle.stroke, true);\n          symbol.attr({\n            rotation: item[0],\n            position: item[1],\n            silent: true\n          });\n          this.group.add(symbol);\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @private\n   */\n  axisTickLabel: function () {\n    var axisModel = this.axisModel;\n    var opt = this.opt;\n    var tickEls = buildAxisTick(this, axisModel, opt);\n    var labelEls = buildAxisLabel(this, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, tickEls);\n  },\n\n  /**\n   * @private\n   */\n  axisName: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n\n    if (!name) {\n      return;\n    }\n\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = this.axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // 'middle'\n    // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n\n    var axisNameAvailableWidth;\n\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth); // FIXME\n    // truncate rich text? (consider performance)\n\n    var truncatedText = ellipsis != null && maxWidth != null ? formatUtil.truncateText(name, maxWidth, textFont, ellipsis, {\n      minChar: 2,\n      placeholder: truncateOpt.placeholder\n    }) : name;\n    var tooltipOpt = axisModel.get('tooltip', true);\n    var mainType = axisModel.mainType;\n    var formatterParams = {\n      componentType: mainType,\n      name: name,\n      $vars: ['name']\n    };\n    formatterParams[mainType + 'Index'] = axisModel.componentIndex;\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'name',\n      __fullText: name,\n      __truncatedText: truncatedText,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: isSilent(axisModel),\n      z2: 1,\n      tooltip: tooltipOpt && tooltipOpt.show ? extend({\n        content: name,\n        formatter: function () {\n          return name;\n        },\n        formatterParams: formatterParams\n      }, tooltipOpt) : null\n    });\n    graphic.setTextStyle(textEl.style, textStyleModel, {\n      text: truncatedText,\n      textFont: textFont,\n      textFill: textStyleModel.getTextColor() || axisModel.get('axisLine.lineStyle.color'),\n      textAlign: labelLayout.textAlign,\n      textVerticalAlign: labelLayout.textVerticalAlign\n    });\n\n    if (axisModel.get('triggerEvent')) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisName';\n      textEl.eventData.name = name;\n    } // FIXME\n\n\n    this._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    this.group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\n/**\n * @public\n * @static\n * @param {Object} opt\n * @param {number} axisRotation in radian\n * @param {number} textRotation in radian\n * @param {number} direction\n * @return {Object} {\n *  rotation, // according to axis\n *  textAlign,\n *  textVerticalAlign\n * }\n */\n\nvar innerTextLayout = AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n  var rotationDiff = remRadian(textRotation - axisRotation);\n  var textAlign;\n  var textVerticalAlign;\n\n  if (isRadianAroundZero(rotationDiff)) {\n    // Label is parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI)) {\n    // Label is inverse parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff > 0 && rotationDiff < PI) {\n      textAlign = direction > 0 ? 'right' : 'left';\n    } else {\n      textAlign = direction > 0 ? 'left' : 'right';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n};\n\nfunction endTextLayout(opt, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - opt.rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nfunction isSilent(axisModel) {\n  var tooltipOpt = axisModel.get('tooltip');\n  return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n  || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n}\n\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n  var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n  var showMaxLabel = axisModel.get('axisLabel.showMaxLabel'); // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\n\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\n\nfunction isTwoLabelOverlapped(current, next, labelLayout) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n\n  if (!firstRect || !nextRect) {\n    return;\n  } // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\n\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\n/**\n * @static\n */\n\n\nvar ifIgnoreOnTick = AxisBuilder.ifIgnoreOnTick = function (axis, i, interval, ticksCnt, showMinLabel, showMaxLabel) {\n  if (i === 0 && showMinLabel || i === ticksCnt - 1 && showMaxLabel) {\n    return false;\n  } // FIXME\n  // Have not consider label overlap (if label is too long) yet.\n\n\n  var rawTick;\n  var scale = axis.scale;\n  return scale.type === 'ordinal' && (typeof interval === 'function' ? (rawTick = scale.getTicks()[i], !interval(rawTick, scale.getLabel(rawTick))) : i % (interval + 1));\n};\n/**\n * @static\n */\n\n\nvar getInterval = AxisBuilder.getInterval = function (model, labelInterval) {\n  var interval = model.get('interval');\n\n  if (interval == null || interval == 'auto') {\n    interval = labelInterval;\n  }\n\n  return interval;\n};\n\nfunction buildAxisTick(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n\n  if (!axisModel.get('axisTick.show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var tickModel = axisModel.getModel('axisTick');\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickLen = tickModel.get('length');\n  var tickInterval = getInterval(tickModel, opt.labelInterval);\n  var ticksCoords = axis.getTicksCoords(tickModel.get('alignWithLabel')); // FIXME\n  // Corresponds to ticksCoords ?\n\n  var ticks = axis.scale.getTicks();\n  var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n  var showMaxLabel = axisModel.get('axisLabel.showMaxLabel');\n  var pt1 = [];\n  var pt2 = [];\n  var matrix = axisBuilder._transform;\n  var tickEls = [];\n  var ticksCnt = ticksCoords.length;\n\n  for (var i = 0; i < ticksCnt; i++) {\n    // Only ordinal scale support tick interval\n    if (ifIgnoreOnTick(axis, i, tickInterval, ticksCnt, showMinLabel, showMaxLabel)) {\n      continue;\n    }\n\n    var tickCoord = ticksCoords[i];\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = opt.tickDirection * tickLen;\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    } // Tick line, Not use group transform to have better line draw\n\n\n    var tickEl = new graphic.Line(graphic.subPixelOptimizeLine({\n      // Id for animation\n      anid: 'tick_' + ticks[i],\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: defaults(lineStyleModel.getLineStyle(), {\n        stroke: axisModel.get('axisLine.lineStyle.color')\n      }),\n      z2: 2,\n      silent: true\n    }));\n    axisBuilder.group.add(tickEl);\n    tickEls.push(tickEl);\n  }\n\n  return tickEls;\n}\n\nfunction buildAxisLabel(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get('axisLabel.show'));\n\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var ticks = axis.scale.getTicks();\n  var labels = axisModel.getFormattedLabels(); // Special label rotate.\n\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var categoryData = axisModel.get('data');\n  var labelEls = [];\n  var silent = isSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n  var showMaxLabel = axisModel.get('axisLabel.showMaxLabel');\n  each(ticks, function (tickVal, index) {\n    if (ifIgnoreOnTick(axis, index, opt.labelInterval, ticks.length, showMinLabel, showMaxLabel)) {\n      return;\n    }\n\n    var itemLabelModel = labelModel;\n\n    if (categoryData && categoryData[tickVal] && categoryData[tickVal].textStyle) {\n      itemLabelModel = new Model(categoryData[tickVal].textStyle, labelModel, axisModel.ecModel);\n    }\n\n    var textColor = itemLabelModel.getTextColor() || axisModel.get('axisLine.lineStyle.color');\n    var tickCoord = axis.dataToCoord(tickVal);\n    var pos = [tickCoord, opt.labelOffset + opt.labelDirection * labelMargin];\n    var labelStr = axis.scale.getLabel(tickVal);\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'label_' + tickVal,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10\n    });\n    graphic.setTextStyle(textEl.style, itemLabelModel, {\n      text: labels[index],\n      textAlign: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n      textVerticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n      textFill: typeof textColor === 'function' ? textColor( // (1) In category axis with data zoom, tick is not the original\n      // index of axis.data. So tick should not be exposed to user\n      // in category axis.\n      // (2) Compatible with previous version, which always returns labelStr.\n      // But in interval scale labelStr is like '223,445', which maked\n      // user repalce ','. So we modify it to return original val but remain\n      // it as 'string' to avoid error in replacing.\n      axis.type === 'category' ? labelStr : axis.type === 'value' ? tickVal + '' : tickVal, index) : textColor\n    }); // Pack data for mouse event\n\n    if (triggerEvent) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisLabel';\n      textEl.eventData.value = labelStr;\n    } // FIXME\n\n\n    axisBuilder._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    axisBuilder.group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\n\nvar _default = AxisBuilder;\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar axisPointerModelHelper = require(\"../axisPointer/modelHelper\");\n\n/**\n * Base class of AxisView.\n */\nvar AxisView = echarts.extendComponentView({\n  type: 'axis',\n\n  /**\n   * @private\n   */\n  _axisPointer: null,\n\n  /**\n   * @protected\n   * @type {string}\n   */\n  axisPointerClass: null,\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    AxisView.superApply(this, 'render', arguments);\n    updateAxisPointer(this, axisModel, ecModel, api, payload, true);\n  },\n\n  /**\n   * Action handler.\n   * @public\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/model/Global} ecModel\n   * @param {module:echarts/ExtensionAPI} api\n   * @param {Object} payload\n   */\n  updateAxisPointer: function (axisModel, ecModel, api, payload, force) {\n    updateAxisPointer(this, axisModel, ecModel, api, payload, false);\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n    AxisView.superApply(this, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    disposeAxisPointer(this, api);\n    AxisView.superApply(this, 'dispose', arguments);\n  }\n});\n\nfunction updateAxisPointer(axisView, axisModel, ecModel, api, payload, forceRender) {\n  var Clazz = AxisView.getAxisPointerClass(axisView.axisPointerClass);\n\n  if (!Clazz) {\n    return;\n  }\n\n  var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n  axisPointerModel ? (axisView._axisPointer || (axisView._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : disposeAxisPointer(axisView, api);\n}\n\nfunction disposeAxisPointer(axisView, ecModel, api) {\n  var axisPointer = axisView._axisPointer;\n  axisPointer && axisPointer.dispose(ecModel, api);\n  axisView._axisPointer = null;\n}\n\nvar axisPointerClazz = [];\n\nAxisView.registerAxisPointerClass = function (type, clazz) {\n  axisPointerClazz[type] = clazz;\n};\n\nAxisView.getAxisPointerClass = function (type) {\n  return type && axisPointerClazz[type];\n};\n\nvar _default = AxisView;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar AxisBuilder = require(\"./AxisBuilder\");\n\nvar AxisView = require(\"./AxisView\");\n\nvar cartesianAxisHelper = require(\"./cartesianAxisHelper\");\n\nvar ifIgnoreOnTick = AxisBuilder.ifIgnoreOnTick;\nvar getInterval = AxisBuilder.getInterval;\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine']; // function getAlignWithLabel(model, axisModel) {\n//     var alignWithLabel = model.get('alignWithLabel');\n//     if (alignWithLabel === 'auto') {\n//         alignWithLabel = axisModel.get('axisTick.alignWithLabel');\n//     }\n//     return alignWithLabel;\n// }\n\nvar CartesianAxisView = AxisView.extend({\n  type: 'cartesianAxis',\n  axisPointerClass: 'CartesianAxisPointer',\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get(name + '.show')) {\n        this['_' + name](axisModel, gridModel, layout.labelInterval);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    CartesianAxisView.superCall(this, 'render', axisModel, ecModel, api, payload);\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @param {number|Function} labelInterval\n   * @private\n   */\n  _splitLine: function (axisModel, gridModel, labelInterval) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var lineInterval = getInterval(splitLineModel, labelInterval);\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords();\n    var ticks = axis.scale.getTicks();\n    var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n    var showMaxLabel = axisModel.get('axisLabel.showMaxLabel');\n    var p1 = [];\n    var p2 = []; // Simple optimization\n    // Batching the lines if color are the same\n\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      if (ifIgnoreOnTick(axis, i, lineInterval, ticksCoords.length, showMinLabel, showMaxLabel)) {\n        continue;\n      }\n\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i]);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n\n      this._axisGroup.add(new graphic.Line(graphic.subPixelOptimizeLine({\n        anid: 'line_' + ticks[i],\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      })));\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @param {number|Function} labelInterval\n   * @private\n   */\n  _splitArea: function (axisModel, gridModel, labelInterval) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitAreaModel = axisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var ticksCoords = axis.getTicksCoords();\n    var ticks = axis.scale.getTicks();\n    var prevX = axis.toGlobalCoord(ticksCoords[0]);\n    var prevY = axis.toGlobalCoord(ticksCoords[0]);\n    var count = 0;\n    var areaInterval = getInterval(splitAreaModel, labelInterval);\n    var areaStyle = areaStyleModel.getAreaStyle();\n    areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n    var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n    var showMaxLabel = axisModel.get('axisLabel.showMaxLabel');\n\n    for (var i = 1; i < ticksCoords.length; i++) {\n      if (ifIgnoreOnTick(axis, i, areaInterval, ticksCoords.length, showMinLabel, showMaxLabel)) {\n        continue;\n      }\n\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i]);\n      var x;\n      var y;\n      var width;\n      var height;\n\n      if (axis.isHorizontal()) {\n        x = prevX;\n        y = gridRect.y;\n        width = tickCoord - x;\n        height = gridRect.height;\n      } else {\n        x = gridRect.x;\n        y = prevY;\n        width = gridRect.width;\n        height = tickCoord - y;\n      }\n\n      var colorIndex = count++ % areaColors.length;\n\n      this._axisGroup.add(new graphic.Rect({\n        anid: 'area_' + ticks[i],\n        shape: {\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        },\n        style: zrUtil.defaults({\n          fill: areaColors[colorIndex]\n        }, areaStyle),\n        silent: true\n      }));\n\n      prevX = x + width;\n      prevY = y + height;\n    }\n  }\n});\nCartesianAxisView.extend({\n  type: 'xAxis'\n});\nCartesianAxisView.extend({\n  type: 'yAxis'\n});","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar AxisBuilder = require(\"./AxisBuilder\");\n\nvar BrushController = require(\"../helper/BrushController\");\n\nvar brushHelper = require(\"../helper/brushHelper\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar elementList = ['axisLine', 'axisTickLabel', 'axisName'];\nvar AxisView = echarts.extendComponentView({\n  type: 'parallelAxis',\n\n  /**\n   * @override\n   */\n  init: function (ecModel, api) {\n    AxisView.superApply(this, 'init', arguments);\n    /**\n     * @type {module:echarts/component/helper/BrushController}\n     */\n\n    (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this));\n  },\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    if (fromAxisAreaSelect(axisModel, ecModel, payload)) {\n      return;\n    }\n\n    this.axisModel = axisModel;\n    this.api = api;\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var coordSysModel = getCoordSysModel(axisModel, ecModel);\n    var coordSys = coordSysModel.coordinateSystem;\n    var areaSelectStyle = axisModel.getAreaSelectStyle();\n    var areaWidth = areaSelectStyle.width;\n    var dim = axisModel.axis.dim;\n    var axisLayout = coordSys.getAxisLayout(dim);\n    var builderOpt = zrUtil.extend({\n      strokeContainThreshold: areaWidth\n    }, axisLayout);\n    var axisBuilder = new AxisBuilder(axisModel, builderOpt);\n    zrUtil.each(elementList, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    this._refreshBrushController(builderOpt, areaSelectStyle, axisModel, coordSysModel, areaWidth, api);\n\n    var animationModel = payload && payload.animation === false ? null : axisModel;\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, animationModel);\n  },\n\n  /**\n   * @override\n   */\n  updateVisual: function (axisModel, ecModel, api, payload) {\n    this._brushController && this._brushController.updateCovers(getCoverInfoList(axisModel));\n  },\n  _refreshBrushController: function (builderOpt, areaSelectStyle, axisModel, coordSysModel, areaWidth, api) {\n    // After filtering, axis may change, select area needs to be update.\n    var extent = axisModel.axis.getExtent();\n    var extentLen = extent[1] - extent[0];\n    var extra = Math.min(30, Math.abs(extentLen) * 0.1); // Arbitrary value.\n    // width/height might be negative, which will be\n    // normalized in BoundingRect.\n\n    var rect = graphic.BoundingRect.create({\n      x: extent[0],\n      y: -areaWidth / 2,\n      width: extentLen,\n      height: areaWidth\n    });\n    rect.x -= extra;\n    rect.width += 2 * extra;\n\n    this._brushController.mount({\n      enableGlobalPan: true,\n      rotation: builderOpt.rotation,\n      position: builderOpt.position\n    }).setPanels([{\n      panelId: 'pl',\n      clipPath: brushHelper.makeRectPanelClipPath(rect),\n      isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, coordSysModel),\n      getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect, 0)\n    }]).enableBrush({\n      brushType: 'lineX',\n      brushStyle: areaSelectStyle,\n      removeOnClick: true\n    }).updateCovers(getCoverInfoList(axisModel));\n  },\n  _onBrush: function (coverInfoList, opt) {\n    // Do not cache these object, because the mey be changed.\n    var axisModel = this.axisModel;\n    var axis = axisModel.axis;\n    var intervals = zrUtil.map(coverInfoList, function (coverInfo) {\n      return [axis.coordToData(coverInfo.range[0], true), axis.coordToData(coverInfo.range[1], true)];\n    }); // If realtime is true, action is not dispatched on drag end, because\n    // the drag end emits the same params with the last drag move event,\n    // and may have some delay when using touch pad.\n\n    if (!axisModel.option.realtime === opt.isEnd || opt.removeOnClick) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'axisAreaSelect',\n        parallelAxisId: axisModel.id,\n        intervals: intervals\n      });\n    }\n  },\n\n  /**\n   * @override\n   */\n  dispose: function () {\n    this._brushController.dispose();\n  }\n});\n\nfunction fromAxisAreaSelect(axisModel, ecModel, payload) {\n  return payload && payload.type === 'axisAreaSelect' && ecModel.findComponents({\n    mainType: 'parallelAxis',\n    query: payload\n  })[0] === axisModel;\n}\n\nfunction getCoverInfoList(axisModel) {\n  var axis = axisModel.axis;\n  return zrUtil.map(axisModel.activeIntervals, function (interval) {\n    return {\n      brushType: 'lineX',\n      panelId: 'pl',\n      range: [axis.dataToCoord(interval[0], true), axis.dataToCoord(interval[1], true)]\n    };\n  });\n}\n\nfunction getCoordSysModel(axisModel, ecModel) {\n  return ecModel.getComponent('parallel', axisModel.get('parallelIndex'));\n}\n\nvar _default = AxisView;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar AxisBuilder = require(\"./AxisBuilder\");\n\nvar AxisView = require(\"./AxisView\");\n\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitLine', 'splitArea'];\n\nvar _default = AxisView.extend({\n  type: 'radiusAxis',\n  axisPointerClass: 'PolarAxisPointer',\n  render: function (radiusAxisModel, ecModel) {\n    this.group.removeAll();\n\n    if (!radiusAxisModel.get('show')) {\n      return;\n    }\n\n    var radiusAxis = radiusAxisModel.axis;\n    var polar = radiusAxis.polar;\n    var angleAxis = polar.getAngleAxis();\n    var ticksCoords = radiusAxis.getTicksCoords();\n    var axisAngle = angleAxis.getExtent()[0];\n    var radiusExtent = radiusAxis.getExtent();\n    var layout = layoutAxis(polar, radiusAxisModel, axisAngle);\n    var axisBuilder = new AxisBuilder(radiusAxisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n    this.group.add(axisBuilder.getGroup());\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (radiusAxisModel.get(name + '.show') && !radiusAxis.scale.isBlank()) {\n        this['_' + name](radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords);\n      }\n    }, this);\n  },\n\n  /**\n   * @private\n   */\n  _splitLine: function (radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords) {\n    var splitLineModel = radiusAxisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var lineCount = 0;\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var splitLines = [];\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(new graphic.Circle({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r: ticksCoords[i]\n        },\n        silent: true\n      }));\n    } // Simple optimization\n    // Batching the lines if color are the same\n\n\n    for (var i = 0; i < splitLines.length; i++) {\n      this.group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length],\n          fill: null\n        }, lineStyleModel.getLineStyle()),\n        silent: true\n      }));\n    }\n  },\n\n  /**\n   * @private\n   */\n  _splitArea: function (radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords) {\n    var splitAreaModel = radiusAxisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var lineCount = 0;\n    areaColors = areaColors instanceof Array ? areaColors : [areaColors];\n    var splitAreas = [];\n    var prevRadius = ticksCoords[0];\n\n    for (var i = 1; i < ticksCoords.length; i++) {\n      var colorIndex = lineCount++ % areaColors.length;\n      splitAreas[colorIndex] = splitAreas[colorIndex] || [];\n      splitAreas[colorIndex].push(new graphic.Sector({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r0: prevRadius,\n          r: ticksCoords[i],\n          startAngle: 0,\n          endAngle: Math.PI * 2\n        },\n        silent: true\n      }));\n      prevRadius = ticksCoords[i];\n    } // Simple optimization\n    // Batching the lines if color are the same\n\n\n    for (var i = 0; i < splitAreas.length; i++) {\n      this.group.add(graphic.mergePath(splitAreas[i], {\n        style: zrUtil.defaults({\n          fill: areaColors[i % areaColors.length]\n        }, areaStyleModel.getAreaStyle()),\n        silent: true\n      }));\n    }\n  }\n});\n/**\n * @inner\n */\n\n\nfunction layoutAxis(polar, radiusAxisModel, axisAngle) {\n  return {\n    position: [polar.cx, polar.cy],\n    rotation: axisAngle / 180 * Math.PI,\n    labelDirection: -1,\n    tickDirection: -1,\n    nameDirection: 1,\n    labelRotate: radiusAxisModel.getModel('axisLabel').get('rotate'),\n    // Over splitLine and splitArea\n    z2: 1\n  };\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar AxisBuilder = require(\"./AxisBuilder\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar singleAxisHelper = require(\"./singleAxisHelper\");\n\nvar AxisView = require(\"./AxisView\");\n\nvar getInterval = AxisBuilder.getInterval;\nvar ifIgnoreOnTick = AxisBuilder.ifIgnoreOnTick;\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttr = 'splitLine';\nvar SingleAxisView = AxisView.extend({\n  type: 'singleAxis',\n  axisPointerClass: 'SingleAxisPointer',\n  render: function (axisModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n    var layout = singleAxisHelper.layout(axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n    group.add(axisBuilder.getGroup());\n\n    if (axisModel.get(selfBuilderAttr + '.show')) {\n      this['_' + selfBuilderAttr](axisModel, layout.labelInterval);\n    }\n\n    SingleAxisView.superCall(this, 'render', axisModel, ecModel, api, payload);\n  },\n  _splitLine: function (axisModel, labelInterval) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineWidth = lineStyleModel.get('width');\n    var lineColors = lineStyleModel.get('color');\n    var lineInterval = getInterval(splitLineModel, labelInterval);\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var gridRect = axisModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var splitLines = [];\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords();\n    var p1 = [];\n    var p2 = [];\n    var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n    var showMaxLabel = axisModel.get('axisLabel.showMaxLabel');\n\n    for (var i = 0; i < ticksCoords.length; ++i) {\n      if (ifIgnoreOnTick(axis, i, lineInterval, ticksCoords.length, showMinLabel, showMaxLabel)) {\n        continue;\n      }\n\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i]);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(new graphic.Line(graphic.subPixelOptimizeLine({\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: {\n          lineWidth: lineWidth\n        },\n        silent: true\n      })));\n    }\n\n    for (var i = 0; i < splitLines.length; ++i) {\n      this.group.add(graphic.mergePath(splitLines[i], {\n        style: {\n          stroke: lineColors[i % lineColors.length],\n          lineDash: lineStyleModel.getLineDash(lineWidth),\n          lineWidth: lineWidth\n        },\n        silent: true\n      }));\n    }\n  }\n});\nvar _default = SingleAxisView;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\n/**\n * @param {Object} opt {labelInside}\n * @return {Object} {\n *  position, rotation, labelDirection, labelOffset,\n *  tickDirection, labelRotate, labelInterval, z2\n * }\n */\nfunction layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var rawAxisPosition = axis.position;\n  var axisPosition = axis.onZero ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n  if (axis.onZero) {\n    var otherAxis = grid.getAxis(axisDim === 'x' ? 'y' : 'x', axis.onZeroAxisIndex);\n    var onZeroCoord = otherAxis.toGlobalCoord(otherAxis.dataToCoord(0));\n    posBound[idx['onZero']] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  } // Axis position\n\n\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = axis.onZero ? posBound[idx[rawAxisPosition]] - posBound[idx['onZero']] : 0;\n\n  if (axisModel.get('axisTick.inside')) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get('axisLabel.inside'))) {\n    layout.labelDirection = -layout.labelDirection;\n  } // Special label rotation\n\n\n  var labelRotate = axisModel.get('axisLabel.rotate');\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // label interval when auto mode.\n\n  layout.labelInterval = axis.getLabelInterval(); // Over splitLine and splitArea\n\n  layout.z2 = 1;\n  return layout;\n}\n\nexports.layout = layout;","var echarts = require(\"../../echarts\");\n\n/**\n * @payload\n * @property {string} parallelAxisId\n * @property {Array.<Array.<number>>} intervals\n */\nvar actionInfo = {\n  type: 'axisAreaSelect',\n  event: 'axisAreaSelected',\n  update: 'updateVisual'\n};\necharts.registerAction(actionInfo, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'parallelAxis',\n    query: payload\n  }, function (parallelAxisModel) {\n    parallelAxisModel.axis.model.setActiveIntervals(payload.intervals);\n  });\n});\n/**\n * @payload\n */\n\necharts.registerAction('parallelAxisExpand', function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'parallel',\n    query: payload\n  }, function (parallelModel) {\n    parallelModel.setAxisExpand(payload);\n  });\n});","var zrUtil = require(\"zrender/lib/core/util\");\n\n/**\n * @param {Object} opt {labelInside}\n * @return {Object} {\n *  position, rotation, labelDirection, labelOffset,\n *  tickDirection, labelRotate, labelInterval, z2\n * }\n */\nfunction layout(axisModel, opt) {\n  opt = opt || {};\n  var single = axisModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var axisPosition = axis.position;\n  var orient = axis.orient;\n  var rect = single.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var positionMap = {\n    horizontal: {\n      top: rectBound[2],\n      bottom: rectBound[3]\n    },\n    vertical: {\n      left: rectBound[0],\n      right: rectBound[1]\n    }\n  };\n  layout.position = [orient === 'vertical' ? positionMap.vertical[axisPosition] : rectBound[0], orient === 'horizontal' ? positionMap.horizontal[axisPosition] : rectBound[3]];\n  var r = {\n    horizontal: 0,\n    vertical: 1\n  };\n  layout.rotation = Math.PI / 2 * r[orient];\n  var directionMap = {\n    top: -1,\n    bottom: 1,\n    right: 1,\n    left: -1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = directionMap[axisPosition];\n\n  if (axisModel.get('axisTick.inside')) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get('axisLabel.inside'))) {\n    layout.labelDirection = -layout.labelDirection;\n  }\n\n  var labelRotation = opt.rotate;\n  labelRotation == null && (labelRotation = axisModel.get('axisLabel.rotate'));\n  layout.labelRotation = axisPosition === 'top' ? -labelRotation : labelRotation;\n  layout.labelInterval = axis.getLabelInterval();\n  layout.z2 = 1;\n  return layout;\n}\n\nexports.layout = layout;","var echarts = require(\"../echarts\");\n\nvar preprocessor = require(\"./brush/preprocessor\");\n\nrequire(\"./brush/visualEncoding\");\n\nrequire(\"./brush/BrushModel\");\n\nrequire(\"./brush/BrushView\");\n\nrequire(\"./brush/brushAction\");\n\nrequire(\"./toolbox/feature/Brush\");\n\n/**\n * Brush component entry\n */\necharts.registerPreprocessor(preprocessor);","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar visualSolution = require(\"../../visual/visualSolution\");\n\nvar Model = require(\"../../model/Model\");\n\nvar DEFAULT_OUT_OF_BRUSH_COLOR = ['#ddd'];\nvar BrushModel = echarts.extendComponentModel({\n  type: 'brush',\n  dependencies: ['geo', 'grid', 'xAxis', 'yAxis', 'parallel', 'series'],\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    // inBrush: null,\n    // outOfBrush: null,\n    toolbox: null,\n    // Default value see preprocessor.\n    brushLink: null,\n    // Series indices array, broadcast using dataIndex.\n    // or 'all', which means all series. 'none' or null means no series.\n    seriesIndex: 'all',\n    // seriesIndex array, specify series controlled by this brush component.\n    geoIndex: null,\n    //\n    xAxisIndex: null,\n    yAxisIndex: null,\n    brushType: 'rect',\n    // Default brushType, see BrushController.\n    brushMode: 'single',\n    // Default brushMode, 'single' or 'multiple'\n    transformable: true,\n    // Default transformable.\n    brushStyle: {\n      // Default brushStyle\n      borderWidth: 1,\n      color: 'rgba(120,140,180,0.3)',\n      borderColor: 'rgba(120,140,180,0.8)'\n    },\n    throttleType: 'fixRate',\n    // Throttle in brushSelected event. 'fixRate' or 'debounce'.\n    // If null, no throttle. Valid only in the first brush component\n    throttleDelay: 0,\n    // Unit: ms, 0 means every event will be triggered.\n    // FIXME\n    // \n    removeOnClick: true,\n    z: 10000\n  },\n\n  /**\n   * @readOnly\n   * @type {Array.<Object>}\n   */\n  areas: [],\n\n  /**\n   * Current activated brush type.\n   * If null, brush is inactived.\n   * see module:echarts/component/helper/BrushController\n   * @readOnly\n   * @type {string}\n   */\n  brushType: null,\n\n  /**\n   * Current brush opt.\n   * see module:echarts/component/helper/BrushController\n   * @readOnly\n   * @type {Object}\n   */\n  brushOption: {},\n\n  /**\n   * @readOnly\n   * @type {Array.<Object>}\n   */\n  coordInfoList: [],\n  optionUpdated: function (newOption, isInit) {\n    var thisOption = this.option;\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, ['inBrush', 'outOfBrush']);\n    thisOption.inBrush = thisOption.inBrush || {}; // Always give default visual, consider setOption at the second time.\n\n    thisOption.outOfBrush = thisOption.outOfBrush || {\n      color: DEFAULT_OUT_OF_BRUSH_COLOR\n    };\n  },\n\n  /**\n   * If ranges is null/undefined, range state remain.\n   *\n   * @param {Array.<Object>} [ranges]\n   */\n  setAreas: function (areas) {\n    // If ranges is null/undefined, range state remain.\n    // This helps user to dispatchAction({type: 'brush'}) with no areas\n    // set but just want to get the current brush select info from a `brush` event.\n    if (!areas) {\n      return;\n    }\n\n    this.areas = zrUtil.map(areas, function (area) {\n      return generateBrushOption(this.option, area);\n    }, this);\n  },\n\n  /**\n   * see module:echarts/component/helper/BrushController\n   * @param {Object} brushOption\n   */\n  setBrushOption: function (brushOption) {\n    this.brushOption = generateBrushOption(this.option, brushOption);\n    this.brushType = this.brushOption.brushType;\n  }\n});\n\nfunction generateBrushOption(option, brushOption) {\n  return zrUtil.merge({\n    brushType: option.brushType,\n    brushMode: option.brushMode,\n    transformable: option.transformable,\n    brushStyle: new Model(option.brushStyle).getItemStyle(),\n    removeOnClick: option.removeOnClick,\n    z: option.z\n  }, brushOption, true);\n}\n\nvar _default = BrushModel;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BrushController = require(\"../helper/BrushController\");\n\nvar _default = echarts.extendComponentView({\n  type: 'brush',\n  init: function (ecModel, api) {\n    /**\n     * @readOnly\n     * @type {module:echarts/model/Global}\n     */\n    this.ecModel = ecModel;\n    /**\n     * @readOnly\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this.api = api;\n    /**\n     * @readOnly\n     * @type {module:echarts/component/brush/BrushModel}\n     */\n\n    this.model;\n    /**\n     * @private\n     * @type {module:echarts/component/helper/BrushController}\n     */\n\n    (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this)).mount();\n  },\n\n  /**\n   * @override\n   */\n  render: function (brushModel) {\n    this.model = brushModel;\n    return updateController.apply(this, arguments);\n  },\n\n  /**\n   * @override\n   */\n  updateView: updateController,\n\n  /**\n   * @override\n   */\n  updateLayout: updateController,\n\n  /**\n   * @override\n   */\n  updateVisual: updateController,\n\n  /**\n   * @override\n   */\n  dispose: function () {\n    this._brushController.dispose();\n  },\n\n  /**\n   * @private\n   */\n  _onBrush: function (areas, opt) {\n    var modelId = this.model.id;\n    this.model.brushTargetManager.setOutputRanges(areas, this.ecModel); // Action is not dispatched on drag end, because the drag end\n    // emits the same params with the last drag move event, and\n    // may have some delay when using touch pad, which makes\n    // animation not smooth (when using debounce).\n\n    (!opt.isEnd || opt.removeOnClick) && this.api.dispatchAction({\n      type: 'brush',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n  }\n});\n\nfunction updateController(brushModel, ecModel, api, payload) {\n  // Do not update controller when drawing.\n  (!payload || payload.$from !== brushModel.id) && this._brushController.setPanels(brushModel.brushTargetManager.makePanelOpts(api)).enableBrush(brushModel.brushOption).updateCovers(brushModel.areas.slice());\n}\n\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\n/**\n * payload: {\n *      brushIndex: number, or,\n *      brushId: string, or,\n *      brushName: string,\n *      globalRanges: Array\n * }\n */\necharts.registerAction({\n  type: 'brush',\n  event: 'brush',\n  update: 'updateView'\n}, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'brush',\n    query: payload\n  }, function (brushModel) {\n    brushModel.setAreas(payload.areas);\n  });\n});\n/**\n * payload: {\n *      brushComponents: [\n *          {\n *              brushId,\n *              brushIndex,\n *              brushName,\n *              series: [\n *                  {\n *                      seriesId,\n *                      seriesIndex,\n *                      seriesName,\n *                      rawIndices: [21, 34, ...]\n *                  },\n *                  ...\n *              ]\n *          },\n *          ...\n *      ]\n * }\n */\n\necharts.registerAction({\n  type: 'brushSelect',\n  event: 'brushSelected',\n  update: 'none'\n}, function () {});","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar DEFAULT_TOOLBOX_BTNS = ['rect', 'polygon', 'keep', 'clear'];\n\nfunction _default(option, isNew) {\n  var brushComponents = option && option.brush;\n\n  if (!zrUtil.isArray(brushComponents)) {\n    brushComponents = brushComponents ? [brushComponents] : [];\n  }\n\n  if (!brushComponents.length) {\n    return;\n  }\n\n  var brushComponentSpecifiedBtns = [];\n  zrUtil.each(brushComponents, function (brushOpt) {\n    var tbs = brushOpt.hasOwnProperty('toolbox') ? brushOpt.toolbox : [];\n\n    if (tbs instanceof Array) {\n      brushComponentSpecifiedBtns = brushComponentSpecifiedBtns.concat(tbs);\n    }\n  });\n  var toolbox = option && option.toolbox;\n\n  if (zrUtil.isArray(toolbox)) {\n    toolbox = toolbox[0];\n  }\n\n  if (!toolbox) {\n    toolbox = {\n      feature: {}\n    };\n    option.toolbox = [toolbox];\n  }\n\n  var toolboxFeature = toolbox.feature || (toolbox.feature = {});\n  var toolboxBrush = toolboxFeature.brush || (toolboxFeature.brush = {});\n  var brushTypes = toolboxBrush.type || (toolboxBrush.type = []);\n  brushTypes.push.apply(brushTypes, brushComponentSpecifiedBtns);\n  removeDuplicate(brushTypes);\n\n  if (isNew && !brushTypes.length) {\n    brushTypes.push.apply(brushTypes, DEFAULT_TOOLBOX_BTNS);\n  }\n}\n\nfunction removeDuplicate(arr) {\n  var map = {};\n  zrUtil.each(arr, function (val) {\n    map[val] = 1;\n  });\n  arr.length = 0;\n  zrUtil.each(map, function (flag, val) {\n    arr.push(val);\n  });\n}\n\nmodule.exports = _default;","var polygonContain = require(\"zrender/lib/contain/polygon\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\n// Key of the first level is brushType: `line`, `rect`, `polygon`.\n// Key of the second level is chart element type: `point`, `rect`.\n// See moudule:echarts/component/helper/BrushController\n// function param:\n//      {Object} itemLayout fetch from data.getItemLayout(dataIndex)\n//      {Object} selectors {point: selector, rect: selector, ...}\n//      {Object} area {range: [[], [], ..], boudingRect}\n// function return:\n//      {boolean} Whether in the given brush.\nvar selector = {\n  lineX: getLineSelectors(0),\n  lineY: getLineSelectors(1),\n  rect: {\n    point: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.contain(itemLayout[0], itemLayout[1]);\n    },\n    rect: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.intersect(itemLayout);\n    }\n  },\n  polygon: {\n    point: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.contain(itemLayout[0], itemLayout[1]) && polygonContain.contain(area.range, itemLayout[0], itemLayout[1]);\n    },\n    rect: function (itemLayout, selectors, area) {\n      var points = area.range;\n\n      if (!itemLayout || points.length <= 1) {\n        return false;\n      }\n\n      var x = itemLayout.x;\n      var y = itemLayout.y;\n      var width = itemLayout.width;\n      var height = itemLayout.height;\n      var p = points[0];\n\n      if (polygonContain.contain(points, x, y) || polygonContain.contain(points, x + width, y) || polygonContain.contain(points, x, y + height) || polygonContain.contain(points, x + width, y + height) || BoundingRect.create(itemLayout).contain(p[0], p[1]) || lineIntersectPolygon(x, y, x + width, y, points) || lineIntersectPolygon(x, y, x, y + height, points) || lineIntersectPolygon(x + width, y, x + width, y + height, points) || lineIntersectPolygon(x, y + height, x + width, y + height, points)) {\n        return true;\n      }\n    }\n  }\n};\n\nfunction getLineSelectors(xyIndex) {\n  var xy = ['x', 'y'];\n  var wh = ['width', 'height'];\n  return {\n    point: function (itemLayout, selectors, area) {\n      if (itemLayout) {\n        var range = area.range;\n        var p = itemLayout[xyIndex];\n        return inLineRange(p, range);\n      }\n    },\n    rect: function (itemLayout, selectors, area) {\n      if (itemLayout) {\n        var range = area.range;\n        var layoutRange = [itemLayout[xy[xyIndex]], itemLayout[xy[xyIndex]] + itemLayout[wh[xyIndex]]];\n        layoutRange[1] < layoutRange[0] && layoutRange.reverse();\n        return inLineRange(layoutRange[0], range) || inLineRange(layoutRange[1], range) || inLineRange(range[0], layoutRange) || inLineRange(range[1], layoutRange);\n      }\n    }\n  };\n}\n\nfunction inLineRange(p, range) {\n  return range[0] <= p && p <= range[1];\n}\n\nfunction lineIntersectPolygon(lx, ly, l2x, l2y, points) {\n  for (var i = 0, p2 = points[points.length - 1]; i < points.length; i++) {\n    var p = points[i];\n\n    if (lineIntersect(lx, ly, l2x, l2y, p[0], p[1], p2[0], p2[1])) {\n      return true;\n    }\n\n    p2 = p;\n  }\n} // Code from <http://blog.csdn.net/rickliuxiao/article/details/6259322> with some fix.\n// See <https://en.wikipedia.org/wiki/Line%E2%80%93line_intersection>\n\n\nfunction lineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n  var delta = determinant(a2x - a1x, b1x - b2x, a2y - a1y, b1y - b2y);\n\n  if (nearZero(delta)) {\n    // parallel\n    return false;\n  }\n\n  var namenda = determinant(b1x - a1x, b1x - b2x, b1y - a1y, b1y - b2y) / delta;\n\n  if (namenda < 0 || namenda > 1) {\n    return false;\n  }\n\n  var miu = determinant(a2x - a1x, b1x - a1x, a2y - a1y, b1y - a1y) / delta;\n\n  if (miu < 0 || miu > 1) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction nearZero(val) {\n  return val <= 1e-6 && val >= -1e-6;\n}\n\nfunction determinant(v1, v2, v3, v4) {\n  return v1 * v4 - v2 * v3;\n}\n\nvar _default = selector;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar visualSolution = require(\"../../visual/visualSolution\");\n\nvar selector = require(\"./selector\");\n\nvar throttleUtil = require(\"../../util/throttle\");\n\nvar BrushTargetManager = require(\"../helper/BrushTargetManager\");\n\nvar STATE_LIST = ['inBrush', 'outOfBrush'];\nvar DISPATCH_METHOD = '__ecBrushSelect';\nvar DISPATCH_FLAG = '__ecInBrushSelectEvent';\nvar PRIORITY_BRUSH = echarts.PRIORITY.VISUAL.BRUSH;\n/**\n * Layout for visual, the priority higher than other layout, and before brush visual.\n */\n\necharts.registerLayout(PRIORITY_BRUSH, function (ecModel, api, payload) {\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel) {\n    payload && payload.type === 'takeGlobalCursor' && brushModel.setBrushOption(payload.key === 'brush' ? payload.brushOption : {\n      brushType: false\n    });\n    var brushTargetManager = brushModel.brushTargetManager = new BrushTargetManager(brushModel.option, ecModel);\n    brushTargetManager.setInputRanges(brushModel.areas, ecModel);\n  });\n});\n/**\n * Register the visual encoding if this modules required.\n */\n\necharts.registerVisual(PRIORITY_BRUSH, function (ecModel, api, payload) {\n  var brushSelected = [];\n  var throttleType;\n  var throttleDelay;\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel, brushIndex) {\n    var thisBrushSelected = {\n      brushId: brushModel.id,\n      brushIndex: brushIndex,\n      brushName: brushModel.name,\n      areas: zrUtil.clone(brushModel.areas),\n      selected: []\n    }; // Every brush component exists in event params, convenient\n    // for user to find by index.\n\n    brushSelected.push(thisBrushSelected);\n    var brushOption = brushModel.option;\n    var brushLink = brushOption.brushLink;\n    var linkedSeriesMap = [];\n    var selectedDataIndexForLink = [];\n    var rangeInfoBySeries = [];\n    var hasBrushExists = 0;\n\n    if (!brushIndex) {\n      // Only the first throttle setting works.\n      throttleType = brushOption.throttleType;\n      throttleDelay = brushOption.throttleDelay;\n    } // Add boundingRect and selectors to range.\n\n\n    var areas = zrUtil.map(brushModel.areas, function (area) {\n      return bindSelector(zrUtil.defaults({\n        boundingRect: boundingRectBuilders[area.brushType](area)\n      }, area));\n    });\n    var visualMappings = visualSolution.createVisualMappings(brushModel.option, STATE_LIST, function (mappingOption) {\n      mappingOption.mappingMethod = 'fixed';\n    });\n    zrUtil.isArray(brushLink) && zrUtil.each(brushLink, function (seriesIndex) {\n      linkedSeriesMap[seriesIndex] = 1;\n    });\n\n    function linkOthers(seriesIndex) {\n      return brushLink === 'all' || linkedSeriesMap[seriesIndex];\n    } // If no supported brush or no brush on the series,\n    // all visuals should be in original state.\n\n\n    function brushed(rangeInfoList) {\n      return !!rangeInfoList.length;\n    }\n    /**\n     * Logic for each series: (If the logic has to be modified one day, do it carefully!)\n     *\n     * ( brushed  && hasBrushExist  && linkOthers  ) => StepA: record,  StepB: visualByRecord.\n     *   !brushed    hasBrushExist                             nothing,        visualByRecord.\n     *                !hasBrushExist                                              nothing.\n     * ( !brushed  && hasBrushExist  && linkOthers  ) => StepA:  nothing,  StepB: visualByRecord.\n     *                !hasBrushExist                                              nothing.\n     * ( brushed  &&                     !linkOthers ) => StepA:  nothing,  StepB: visualByCheck.\n     *   !brushed                                                                  nothing.\n     * ( !brushed  &&                     !linkOthers ) => StepA:  nothing,  StepB:  nothing.\n     */\n    // Step A\n\n\n    ecModel.eachSeries(function (seriesModel, seriesIndex) {\n      var rangeInfoList = rangeInfoBySeries[seriesIndex] = [];\n      seriesModel.subType === 'parallel' ? stepAParallel(seriesModel, seriesIndex, rangeInfoList) : stepAOthers(seriesModel, seriesIndex, rangeInfoList);\n    });\n\n    function stepAParallel(seriesModel, seriesIndex) {\n      var coordSys = seriesModel.coordinateSystem;\n      hasBrushExists |= coordSys.hasAxisBrushed();\n      linkOthers(seriesIndex) && coordSys.eachActiveState(seriesModel.getData(), function (activeState, dataIndex) {\n        activeState === 'active' && (selectedDataIndexForLink[dataIndex] = 1);\n      });\n    }\n\n    function stepAOthers(seriesModel, seriesIndex, rangeInfoList) {\n      var selectorsByBrushType = getSelectorsByBrushType(seriesModel);\n\n      if (!selectorsByBrushType || brushModelNotControll(brushModel, seriesIndex)) {\n        return;\n      }\n\n      zrUtil.each(areas, function (area) {\n        selectorsByBrushType[area.brushType] && brushModel.brushTargetManager.controlSeries(area, seriesModel, ecModel) && rangeInfoList.push(area);\n        hasBrushExists |= brushed(rangeInfoList);\n      });\n\n      if (linkOthers(seriesIndex) && brushed(rangeInfoList)) {\n        var data = seriesModel.getData();\n        data.each(function (dataIndex) {\n          if (checkInRange(selectorsByBrushType, rangeInfoList, data, dataIndex)) {\n            selectedDataIndexForLink[dataIndex] = 1;\n          }\n        });\n      }\n    } // Step B\n\n\n    ecModel.eachSeries(function (seriesModel, seriesIndex) {\n      var seriesBrushSelected = {\n        seriesId: seriesModel.id,\n        seriesIndex: seriesIndex,\n        seriesName: seriesModel.name,\n        dataIndex: []\n      }; // Every series exists in event params, convenient\n      // for user to find series by seriesIndex.\n\n      thisBrushSelected.selected.push(seriesBrushSelected);\n      var selectorsByBrushType = getSelectorsByBrushType(seriesModel);\n      var rangeInfoList = rangeInfoBySeries[seriesIndex];\n      var data = seriesModel.getData();\n      var getValueState = linkOthers(seriesIndex) ? function (dataIndex) {\n        return selectedDataIndexForLink[dataIndex] ? (seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)), 'inBrush') : 'outOfBrush';\n      } : function (dataIndex) {\n        return checkInRange(selectorsByBrushType, rangeInfoList, data, dataIndex) ? (seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)), 'inBrush') : 'outOfBrush';\n      }; // If no supported brush or no brush, all visuals are in original state.\n\n      (linkOthers(seriesIndex) ? hasBrushExists : brushed(rangeInfoList)) && visualSolution.applyVisual(STATE_LIST, visualMappings, data, getValueState);\n    });\n  });\n  dispatchAction(api, throttleType, throttleDelay, brushSelected, payload);\n});\n\nfunction dispatchAction(api, throttleType, throttleDelay, brushSelected, payload) {\n  // This event will not be triggered when `setOpion`, otherwise dead lock may\n  // triggered when do `setOption` in event listener, which we do not find\n  // satisfactory way to solve yet. Some considered resolutions:\n  // (a) Diff with prevoius selected data ant only trigger event when changed.\n  // But store previous data and diff precisely (i.e., not only by dataIndex, but\n  // also detect value changes in selected data) might bring complexity or fragility.\n  // (b) Use spectial param like `silent` to suppress event triggering.\n  // But such kind of volatile param may be weird in `setOption`.\n  if (!payload) {\n    return;\n  }\n\n  var zr = api.getZr();\n\n  if (zr[DISPATCH_FLAG]) {\n    return;\n  }\n\n  if (!zr[DISPATCH_METHOD]) {\n    zr[DISPATCH_METHOD] = doDispatch;\n  }\n\n  var fn = throttleUtil.createOrUpdate(zr, DISPATCH_METHOD, throttleDelay, throttleType);\n  fn(api, brushSelected);\n}\n\nfunction doDispatch(api, brushSelected) {\n  if (!api.isDisposed()) {\n    var zr = api.getZr();\n    zr[DISPATCH_FLAG] = true;\n    api.dispatchAction({\n      type: 'brushSelect',\n      batch: brushSelected\n    });\n    zr[DISPATCH_FLAG] = false;\n  }\n}\n\nfunction checkInRange(selectorsByBrushType, rangeInfoList, data, dataIndex) {\n  for (var i = 0, len = rangeInfoList.length; i < len; i++) {\n    var area = rangeInfoList[i];\n\n    if (selectorsByBrushType[area.brushType](dataIndex, data, area.selectors, area)) {\n      return true;\n    }\n  }\n}\n\nfunction getSelectorsByBrushType(seriesModel) {\n  var brushSelector = seriesModel.brushSelector;\n\n  if (zrUtil.isString(brushSelector)) {\n    var sels = [];\n    zrUtil.each(selector, function (selectorsByElementType, brushType) {\n      sels[brushType] = function (dataIndex, data, selectors, area) {\n        var itemLayout = data.getItemLayout(dataIndex);\n        return selectorsByElementType[brushSelector](itemLayout, selectors, area);\n      };\n    });\n    return sels;\n  } else if (zrUtil.isFunction(brushSelector)) {\n    var bSelector = {};\n    zrUtil.each(selector, function (sel, brushType) {\n      bSelector[brushType] = brushSelector;\n    });\n    return bSelector;\n  }\n\n  return brushSelector;\n}\n\nfunction brushModelNotControll(brushModel, seriesIndex) {\n  var seriesIndices = brushModel.option.seriesIndex;\n  return seriesIndices != null && seriesIndices !== 'all' && (zrUtil.isArray(seriesIndices) ? zrUtil.indexOf(seriesIndices, seriesIndex) < 0 : seriesIndex !== seriesIndices);\n}\n\nfunction bindSelector(area) {\n  var selectors = area.selectors = {};\n  zrUtil.each(selector[area.brushType], function (selFn, elType) {\n    // Do not use function binding or curry for performance.\n    selectors[elType] = function (itemLayout) {\n      return selFn(itemLayout, selectors, area);\n    };\n  });\n  return area;\n}\n\nvar boundingRectBuilders = {\n  lineX: zrUtil.noop,\n  lineY: zrUtil.noop,\n  rect: function (area) {\n    return getBoundingRectFromMinMax(area.range);\n  },\n  polygon: function (area) {\n    var minMax;\n    var range = area.range;\n\n    for (var i = 0, len = range.length; i < len; i++) {\n      minMax = minMax || [[Infinity, -Infinity], [Infinity, -Infinity]];\n      var rg = range[i];\n      rg[0] < minMax[0][0] && (minMax[0][0] = rg[0]);\n      rg[0] > minMax[0][1] && (minMax[0][1] = rg[0]);\n      rg[1] < minMax[1][0] && (minMax[1][0] = rg[1]);\n      rg[1] > minMax[1][1] && (minMax[1][1] = rg[1]);\n    }\n\n    return minMax && getBoundingRectFromMinMax(minMax);\n  }\n};\n\nfunction getBoundingRectFromMinMax(minMax) {\n  return new BoundingRect(minMax[0][0], minMax[1][0], minMax[0][1] - minMax[0][0], minMax[1][1] - minMax[1][0]);\n}","require(\"../coord/calendar/Calendar\");\n\nrequire(\"../coord/calendar/CalendarModel\");\n\nrequire(\"./calendar/CalendarView\");","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar MONTH_TEXT = {\n  EN: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n  CN: ['', '', '', '', '', '', '', '', '', '', '', '']\n};\nvar WEEK_TEXT = {\n  EN: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],\n  CN: ['', '', '', '', '', '', '']\n};\n\nvar _default = echarts.extendComponentView({\n  type: 'calendar',\n\n  /**\n   * top/left line points\n   *  @private\n   */\n  _tlpoints: null,\n\n  /**\n   * bottom/right line points\n   *  @private\n   */\n  _blpoints: null,\n\n  /**\n   * first day of month\n   *  @private\n   */\n  _firstDayOfMonth: null,\n\n  /**\n   * first day point of month\n   *  @private\n   */\n  _firstDayPoints: null,\n  render: function (calendarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n    var coordSys = calendarModel.coordinateSystem; // range info\n\n    var rangeData = coordSys.getRangeInfo();\n    var orient = coordSys.getOrient();\n\n    this._renderDayRect(calendarModel, rangeData, group); // _renderLines must be called prior to following function\n\n\n    this._renderLines(calendarModel, rangeData, orient, group);\n\n    this._renderYearText(calendarModel, rangeData, orient, group);\n\n    this._renderMonthText(calendarModel, orient, group);\n\n    this._renderWeekText(calendarModel, rangeData, orient, group);\n  },\n  // render day rect\n  _renderDayRect: function (calendarModel, rangeData, group) {\n    var coordSys = calendarModel.coordinateSystem;\n    var itemRectStyleModel = calendarModel.getModel('itemStyle.normal').getItemStyle();\n    var sw = coordSys.getCellWidth();\n    var sh = coordSys.getCellHeight();\n\n    for (var i = rangeData.start.time; i <= rangeData.end.time; i = coordSys.getNextNDay(i, 1).time) {\n      var point = coordSys.dataToRect([i], false).tl; // every rect\n\n      var rect = new graphic.Rect({\n        shape: {\n          x: point[0],\n          y: point[1],\n          width: sw,\n          height: sh\n        },\n        cursor: 'default',\n        style: itemRectStyleModel\n      });\n      group.add(rect);\n    }\n  },\n  // render separate line\n  _renderLines: function (calendarModel, rangeData, orient, group) {\n    var self = this;\n    var coordSys = calendarModel.coordinateSystem;\n    var lineStyleModel = calendarModel.getModel('splitLine.lineStyle').getLineStyle();\n    var show = calendarModel.get('splitLine.show');\n    var lineWidth = lineStyleModel.lineWidth;\n    this._tlpoints = [];\n    this._blpoints = [];\n    this._firstDayOfMonth = [];\n    this._firstDayPoints = [];\n    var firstDay = rangeData.start;\n\n    for (var i = 0; firstDay.time <= rangeData.end.time; i++) {\n      addPoints(firstDay.formatedDate);\n\n      if (i === 0) {\n        firstDay = coordSys.getDateInfo(rangeData.start.y + '-' + rangeData.start.m);\n      }\n\n      var date = firstDay.date;\n      date.setMonth(date.getMonth() + 1);\n      firstDay = coordSys.getDateInfo(date);\n    }\n\n    addPoints(coordSys.getNextNDay(rangeData.end.time, 1).formatedDate);\n\n    function addPoints(date) {\n      self._firstDayOfMonth.push(coordSys.getDateInfo(date));\n\n      self._firstDayPoints.push(coordSys.dataToRect([date], false).tl);\n\n      var points = self._getLinePointsOfOneWeek(calendarModel, date, orient);\n\n      self._tlpoints.push(points[0]);\n\n      self._blpoints.push(points[points.length - 1]);\n\n      show && self._drawSplitline(points, lineStyleModel, group);\n    } // render top/left line\n\n\n    show && this._drawSplitline(self._getEdgesPoints(self._tlpoints, lineWidth, orient), lineStyleModel, group); // render bottom/right line\n\n    show && this._drawSplitline(self._getEdgesPoints(self._blpoints, lineWidth, orient), lineStyleModel, group);\n  },\n  // get points at both ends\n  _getEdgesPoints: function (points, lineWidth, orient) {\n    var rs = [points[0].slice(), points[points.length - 1].slice()];\n    var idx = orient === 'horizontal' ? 0 : 1; // both ends of the line are extend half lineWidth\n\n    rs[0][idx] = rs[0][idx] - lineWidth / 2;\n    rs[1][idx] = rs[1][idx] + lineWidth / 2;\n    return rs;\n  },\n  // render split line\n  _drawSplitline: function (points, lineStyleModel, group) {\n    var poyline = new graphic.Polyline({\n      z2: 20,\n      shape: {\n        points: points\n      },\n      style: lineStyleModel\n    });\n    group.add(poyline);\n  },\n  // render month line of one week points\n  _getLinePointsOfOneWeek: function (calendarModel, date, orient) {\n    var coordSys = calendarModel.coordinateSystem;\n    date = coordSys.getDateInfo(date);\n    var points = [];\n\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(date.time, i);\n      var point = coordSys.dataToRect([tmpD.time], false);\n      points[2 * tmpD.day] = point.tl;\n      points[2 * tmpD.day + 1] = point[orient === 'horizontal' ? 'bl' : 'tr'];\n    }\n\n    return points;\n  },\n  _formatterLabel: function (formatter, params) {\n    if (typeof formatter === 'string' && formatter) {\n      return formatUtil.formatTplSimple(formatter, params);\n    }\n\n    if (typeof formatter === 'function') {\n      return formatter(params);\n    }\n\n    return params.nameMap;\n  },\n  _yearTextPositionControl: function (textEl, point, orient, position, margin) {\n    point = point.slice();\n    var aligns = ['center', 'bottom'];\n\n    if (position === 'bottom') {\n      point[1] += margin;\n      aligns = ['center', 'top'];\n    } else if (position === 'left') {\n      point[0] -= margin;\n    } else if (position === 'right') {\n      point[0] += margin;\n      aligns = ['center', 'top'];\n    } else {\n      // top\n      point[1] -= margin;\n    }\n\n    var rotate = 0;\n\n    if (position === 'left' || position === 'right') {\n      rotate = Math.PI / 2;\n    }\n\n    return {\n      rotation: rotate,\n      position: point,\n      style: {\n        textAlign: aligns[0],\n        textVerticalAlign: aligns[1]\n      }\n    };\n  },\n  // render year\n  _renderYearText: function (calendarModel, rangeData, orient, group) {\n    var yearLabel = calendarModel.getModel('yearLabel');\n\n    if (!yearLabel.get('show')) {\n      return;\n    }\n\n    var margin = yearLabel.get('margin');\n    var pos = yearLabel.get('position');\n\n    if (!pos) {\n      pos = orient !== 'horizontal' ? 'top' : 'left';\n    }\n\n    var points = [this._tlpoints[this._tlpoints.length - 1], this._blpoints[0]];\n    var xc = (points[0][0] + points[1][0]) / 2;\n    var yc = (points[0][1] + points[1][1]) / 2;\n    var idx = orient === 'horizontal' ? 0 : 1;\n    var posPoints = {\n      top: [xc, points[idx][1]],\n      bottom: [xc, points[1 - idx][1]],\n      left: [points[1 - idx][0], yc],\n      right: [points[idx][0], yc]\n    };\n    var name = rangeData.start.y;\n\n    if (+rangeData.end.y > +rangeData.start.y) {\n      name = name + '-' + rangeData.end.y;\n    }\n\n    var formatter = yearLabel.get('formatter');\n    var params = {\n      start: rangeData.start.y,\n      end: rangeData.end.y,\n      nameMap: name\n    };\n\n    var content = this._formatterLabel(formatter, params);\n\n    var yearText = new graphic.Text({\n      z2: 30\n    });\n    graphic.setTextStyle(yearText.style, yearLabel, {\n      text: content\n    }), yearText.attr(this._yearTextPositionControl(yearText, posPoints[pos], orient, pos, margin));\n    group.add(yearText);\n  },\n  _monthTextPositionControl: function (point, isCenter, orient, position, margin) {\n    var align = 'left';\n    var vAlign = 'top';\n    var x = point[0];\n    var y = point[1];\n\n    if (orient === 'horizontal') {\n      y = y + margin;\n\n      if (isCenter) {\n        align = 'center';\n      }\n\n      if (position === 'start') {\n        vAlign = 'bottom';\n      }\n    } else {\n      x = x + margin;\n\n      if (isCenter) {\n        vAlign = 'middle';\n      }\n\n      if (position === 'start') {\n        align = 'right';\n      }\n    }\n\n    return {\n      x: x,\n      y: y,\n      textAlign: align,\n      textVerticalAlign: vAlign\n    };\n  },\n  // render month and year text\n  _renderMonthText: function (calendarModel, orient, group) {\n    var monthLabel = calendarModel.getModel('monthLabel');\n\n    if (!monthLabel.get('show')) {\n      return;\n    }\n\n    var nameMap = monthLabel.get('nameMap');\n    var margin = monthLabel.get('margin');\n    var pos = monthLabel.get('position');\n    var align = monthLabel.get('align');\n    var termPoints = [this._tlpoints, this._blpoints];\n\n    if (zrUtil.isString(nameMap)) {\n      nameMap = MONTH_TEXT[nameMap.toUpperCase()] || [];\n    }\n\n    var idx = pos === 'start' ? 0 : 1;\n    var axis = orient === 'horizontal' ? 0 : 1;\n    margin = pos === 'start' ? -margin : margin;\n    var isCenter = align === 'center';\n\n    for (var i = 0; i < termPoints[idx].length - 1; i++) {\n      var tmp = termPoints[idx][i].slice();\n      var firstDay = this._firstDayOfMonth[i];\n\n      if (isCenter) {\n        var firstDayPoints = this._firstDayPoints[i];\n        tmp[axis] = (firstDayPoints[axis] + termPoints[0][i + 1][axis]) / 2;\n      }\n\n      var formatter = monthLabel.get('formatter');\n      var name = nameMap[+firstDay.m - 1];\n      var params = {\n        yyyy: firstDay.y,\n        yy: (firstDay.y + '').slice(2),\n        MM: firstDay.m,\n        M: +firstDay.m,\n        nameMap: name\n      };\n\n      var content = this._formatterLabel(formatter, params);\n\n      var monthText = new graphic.Text({\n        z2: 30\n      });\n      zrUtil.extend(graphic.setTextStyle(monthText.style, monthLabel, {\n        text: content\n      }), this._monthTextPositionControl(tmp, isCenter, orient, pos, margin));\n      group.add(monthText);\n    }\n  },\n  _weekTextPositionControl: function (point, orient, position, margin, cellSize) {\n    var align = 'center';\n    var vAlign = 'middle';\n    var x = point[0];\n    var y = point[1];\n    var isStart = position === 'start';\n\n    if (orient === 'horizontal') {\n      x = x + margin + (isStart ? 1 : -1) * cellSize[0] / 2;\n      align = isStart ? 'right' : 'left';\n    } else {\n      y = y + margin + (isStart ? 1 : -1) * cellSize[1] / 2;\n      vAlign = isStart ? 'bottom' : 'top';\n    }\n\n    return {\n      x: x,\n      y: y,\n      textAlign: align,\n      textVerticalAlign: vAlign\n    };\n  },\n  // render weeks\n  _renderWeekText: function (calendarModel, rangeData, orient, group) {\n    var dayLabel = calendarModel.getModel('dayLabel');\n\n    if (!dayLabel.get('show')) {\n      return;\n    }\n\n    var coordSys = calendarModel.coordinateSystem;\n    var pos = dayLabel.get('position');\n    var nameMap = dayLabel.get('nameMap');\n    var margin = dayLabel.get('margin');\n    var firstDayOfWeek = coordSys.getFirstDayOfWeek();\n\n    if (zrUtil.isString(nameMap)) {\n      nameMap = WEEK_TEXT[nameMap.toUpperCase()] || [];\n    }\n\n    var start = coordSys.getNextNDay(rangeData.end.time, 7 - rangeData.lweek).time;\n    var cellSize = [coordSys.getCellWidth(), coordSys.getCellHeight()];\n    margin = numberUtil.parsePercent(margin, cellSize[orient === 'horizontal' ? 0 : 1]);\n\n    if (pos === 'start') {\n      start = coordSys.getNextNDay(rangeData.start.time, -(7 + rangeData.fweek)).time;\n      margin = -margin;\n    }\n\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(start, i);\n      var point = coordSys.dataToRect([tmpD.time], false).center;\n      var day = i;\n      day = Math.abs((i + firstDayOfWeek) % 7);\n      var weekText = new graphic.Text({\n        z2: 30\n      });\n      zrUtil.extend(graphic.setTextStyle(weekText.style, dayLabel, {\n        text: nameMap[day]\n      }), this._weekTextPositionControl(point, orient, pos, margin, cellSize));\n      group.add(weekText);\n    }\n  }\n});\n\nmodule.exports = _default;","require(\"./dataZoom/typeDefaulter\");\n\nrequire(\"./dataZoom/DataZoomModel\");\n\nrequire(\"./dataZoom/DataZoomView\");\n\nrequire(\"./dataZoom/SliderZoomModel\");\n\nrequire(\"./dataZoom/SliderZoomView\");\n\nrequire(\"./dataZoom/InsideZoomModel\");\n\nrequire(\"./dataZoom/InsideZoomView\");\n\nrequire(\"./dataZoom/dataZoomProcessor\");\n\nrequire(\"./dataZoom/dataZoomAction\");","require(\"./dataZoom/typeDefaulter\");\n\nrequire(\"./dataZoom/DataZoomModel\");\n\nrequire(\"./dataZoom/DataZoomView\");\n\nrequire(\"./dataZoom/SelectZoomModel\");\n\nrequire(\"./dataZoom/SelectZoomView\");\n\nrequire(\"./dataZoom/dataZoomProcessor\");\n\nrequire(\"./dataZoom/dataZoomAction\");","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar helper = require(\"./helper\");\n\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\n/**\n * Operate single axis.\n * One axis can only operated by one axis operator.\n * Different dataZoomModels may be defined to operate the same axis.\n * (i.e. 'inside' data zoom and 'slider' data zoom components)\n * So dataZoomModels share one axisProxy in that case.\n *\n * @class\n */\n\nvar AxisProxy = function (dimName, axisIndex, dataZoomModel, ecModel) {\n  /**\n   * @private\n   * @type {string}\n   */\n  this._dimName = dimName;\n  /**\n   * @private\n   */\n\n  this._axisIndex = axisIndex;\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n\n  this._valueWindow;\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n\n  this._percentWindow;\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n\n  this._dataExtent;\n  /**\n   * {minSpan, maxSpan, minValueSpan, maxValueSpan}\n   * @private\n   * @type {Object}\n   */\n\n  this._minMaxSpan;\n  /**\n   * @readOnly\n   * @type {module: echarts/model/Global}\n   */\n\n  this.ecModel = ecModel;\n  /**\n   * @private\n   * @type {module: echarts/component/dataZoom/DataZoomModel}\n   */\n\n  this._dataZoomModel = dataZoomModel;\n};\n\nAxisProxy.prototype = {\n  constructor: AxisProxy,\n\n  /**\n   * Whether the axisProxy is hosted by dataZoomModel.\n   *\n   * @public\n   * @param {module: echarts/component/dataZoom/DataZoomModel} dataZoomModel\n   * @return {boolean}\n   */\n  hostedBy: function (dataZoomModel) {\n    return this._dataZoomModel === dataZoomModel;\n  },\n\n  /**\n   * @return {Array.<number>} Value can only be NaN or finite value.\n   */\n  getDataValueWindow: function () {\n    return this._valueWindow.slice();\n  },\n\n  /**\n   * @return {Array.<number>}\n   */\n  getDataPercentWindow: function () {\n    return this._percentWindow.slice();\n  },\n\n  /**\n   * @public\n   * @param {number} axisIndex\n   * @return {Array} seriesModels\n   */\n  getTargetSeriesModels: function () {\n    var seriesModels = [];\n    var ecModel = this.ecModel;\n    ecModel.eachSeries(function (seriesModel) {\n      if (helper.isCoordSupported(seriesModel.get('coordinateSystem'))) {\n        var dimName = this._dimName;\n        var axisModel = ecModel.queryComponents({\n          mainType: dimName + 'Axis',\n          index: seriesModel.get(dimName + 'AxisIndex'),\n          id: seriesModel.get(dimName + 'AxisId')\n        })[0];\n\n        if (this._axisIndex === (axisModel && axisModel.componentIndex)) {\n          seriesModels.push(seriesModel);\n        }\n      }\n    }, this);\n    return seriesModels;\n  },\n  getAxisModel: function () {\n    return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\n  },\n  getOtherAxisModel: function () {\n    var axisDim = this._dimName;\n    var ecModel = this.ecModel;\n    var axisModel = this.getAxisModel();\n    var isCartesian = axisDim === 'x' || axisDim === 'y';\n    var otherAxisDim;\n    var coordSysIndexName;\n\n    if (isCartesian) {\n      coordSysIndexName = 'gridIndex';\n      otherAxisDim = axisDim === 'x' ? 'y' : 'x';\n    } else {\n      coordSysIndexName = 'polarIndex';\n      otherAxisDim = axisDim === 'angle' ? 'radius' : 'angle';\n    }\n\n    var foundOtherAxisModel;\n    ecModel.eachComponent(otherAxisDim + 'Axis', function (otherAxisModel) {\n      if ((otherAxisModel.get(coordSysIndexName) || 0) === (axisModel.get(coordSysIndexName) || 0)) {\n        foundOtherAxisModel = otherAxisModel;\n      }\n    });\n    return foundOtherAxisModel;\n  },\n  getMinMaxSpan: function () {\n    return zrUtil.clone(this._minMaxSpan);\n  },\n\n  /**\n   * Only calculate by given range and this._dataExtent, do not change anything.\n   *\n   * @param {Object} opt\n   * @param {number} [opt.start]\n   * @param {number} [opt.end]\n   * @param {number} [opt.startValue]\n   * @param {number} [opt.endValue]\n   */\n  calculateDataWindow: function (opt) {\n    var dataExtent = this._dataExtent;\n    var axisModel = this.getAxisModel();\n    var scale = axisModel.axis.scale;\n\n    var rangePropMode = this._dataZoomModel.getRangePropMode();\n\n    var percentExtent = [0, 100];\n    var percentWindow = [opt.start, opt.end];\n    var valueWindow = [];\n    each(['startValue', 'endValue'], function (prop) {\n      valueWindow.push(opt[prop] != null ? scale.parse(opt[prop]) : null);\n    }); // Normalize bound.\n\n    each([0, 1], function (idx) {\n      var boundValue = valueWindow[idx];\n      var boundPercent = percentWindow[idx]; // Notice: dataZoom is based either on `percentProp` ('start', 'end') or\n      // on `valueProp` ('startValue', 'endValue'). The former one is suitable\n      // for cases that a dataZoom component controls multiple axes with different\n      // unit or extent, and the latter one is suitable for accurate zoom by pixel\n      // (e.g., in dataZoomSelect). `valueProp` can be calculated from `percentProp`,\n      // but it is awkward that `percentProp` can not be obtained from `valueProp`\n      // accurately (because all of values that are overflow the `dataExtent` will\n      // be calculated to percent '100%'). So we have to use\n      // `dataZoom.getRangePropMode()` to mark which prop is used.\n      // `rangePropMode` is updated only when setOption or dispatchAction, otherwise\n      // it remains its original value.\n\n      if (rangePropMode[idx] === 'percent') {\n        if (boundPercent == null) {\n          boundPercent = percentExtent[idx];\n        } // Use scale.parse to math round for category or time axis.\n\n\n        boundValue = scale.parse(numberUtil.linearMap(boundPercent, percentExtent, dataExtent, true));\n      } else {\n        // Calculating `percent` from `value` may be not accurate, because\n        // This calculation can not be inversed, because all of values that\n        // are overflow the `dataExtent` will be calculated to percent '100%'\n        boundPercent = numberUtil.linearMap(boundValue, dataExtent, percentExtent, true);\n      } // valueWindow[idx] = round(boundValue);\n      // percentWindow[idx] = round(boundPercent);\n\n\n      valueWindow[idx] = boundValue;\n      percentWindow[idx] = boundPercent;\n    });\n    return {\n      valueWindow: asc(valueWindow),\n      percentWindow: asc(percentWindow)\n    };\n  },\n\n  /**\n   * Notice: reset should not be called before series.restoreData() called,\n   * so it is recommanded to be called in \"process stage\" but not \"model init\n   * stage\".\n   *\n   * @param {module: echarts/component/dataZoom/DataZoomModel} dataZoomModel\n   */\n  reset: function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    } // Culculate data window and data extent, and record them.\n\n\n    this._dataExtent = calculateDataExtent(this, this._dimName, this.getTargetSeriesModels());\n    var dataWindow = this.calculateDataWindow(dataZoomModel.option);\n    this._valueWindow = dataWindow.valueWindow;\n    this._percentWindow = dataWindow.percentWindow;\n    setMinMaxSpan(this); // Update axis setting then.\n\n    setAxisModel(this);\n  },\n\n  /**\n   * @param {module: echarts/component/dataZoom/DataZoomModel} dataZoomModel\n   */\n  restore: function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    this._valueWindow = this._percentWindow = null;\n    setAxisModel(this, true);\n  },\n\n  /**\n   * @param {module: echarts/component/dataZoom/DataZoomModel} dataZoomModel\n   */\n  filterData: function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    var axisDim = this._dimName;\n    var seriesModels = this.getTargetSeriesModels();\n    var filterMode = dataZoomModel.get('filterMode');\n    var valueWindow = this._valueWindow;\n\n    if (filterMode === 'none') {\n      return;\n    } // FIXME\n    // Toolbox may has dataZoom injected. And if there are stacked bar chart\n    // with NaN data, NaN will be filtered and stack will be wrong.\n    // So we need to force the mode to be set empty.\n    // In fect, it is not a big deal that do not support filterMode-'filter'\n    // when using toolbox#dataZoom, utill tooltip#dataZoom support \"single axis\n    // selection\" some day, which might need \"adapt to data extent on the\n    // otherAxis\", which is disabled by filterMode-'empty'.\n\n\n    var otherAxisModel = this.getOtherAxisModel();\n\n    if (dataZoomModel.get('$fromToolbox') && otherAxisModel && otherAxisModel.get('type') === 'category') {\n      filterMode = 'empty';\n    } // Process series data\n\n\n    each(seriesModels, function (seriesModel) {\n      var seriesData = seriesModel.getData();\n      var dataDims = seriesModel.coordDimToDataDim(axisDim);\n\n      if (filterMode === 'weakFilter') {\n        seriesData && seriesData.filterSelf(function (dataIndex) {\n          var leftOut;\n          var rightOut;\n          var hasValue;\n\n          for (var i = 0; i < dataDims.length; i++) {\n            var value = seriesData.get(dataDims[i], dataIndex);\n            var thisHasValue = !isNaN(value);\n            var thisLeftOut = value < valueWindow[0];\n            var thisRightOut = value > valueWindow[1];\n\n            if (thisHasValue && !thisLeftOut && !thisRightOut) {\n              return true;\n            }\n\n            thisHasValue && (hasValue = true);\n            thisLeftOut && (leftOut = true);\n            thisRightOut && (rightOut = true);\n          } // If both left out and right out, do not filter.\n\n\n          return hasValue && leftOut && rightOut;\n        });\n      } else {\n        seriesData && each(dataDims, function (dim) {\n          if (filterMode === 'empty') {\n            seriesModel.setData(seriesData.map(dim, function (value) {\n              return !isInWindow(value) ? NaN : value;\n            }));\n          } else {\n            seriesData.filterSelf(dim, isInWindow);\n          }\n        });\n      }\n    });\n\n    function isInWindow(value) {\n      return value >= valueWindow[0] && value <= valueWindow[1];\n    }\n  }\n};\n\nfunction calculateDataExtent(axisProxy, axisDim, seriesModels) {\n  var dataExtent = [Infinity, -Infinity];\n  each(seriesModels, function (seriesModel) {\n    var seriesData = seriesModel.getData();\n\n    if (seriesData) {\n      each(seriesModel.coordDimToDataDim(axisDim), function (dim) {\n        var seriesExtent = seriesData.getDataExtent(dim);\n        seriesExtent[0] < dataExtent[0] && (dataExtent[0] = seriesExtent[0]);\n        seriesExtent[1] > dataExtent[1] && (dataExtent[1] = seriesExtent[1]);\n      });\n    }\n  });\n\n  if (dataExtent[1] < dataExtent[0]) {\n    dataExtent = [NaN, NaN];\n  } // It is important to get \"consistent\" extent when more then one axes is\n  // controlled by a `dataZoom`, otherwise those axes will not be synchronized\n  // when zooming. But it is difficult to know what is \"consistent\", considering\n  // axes have different type or even different meanings (For example, two\n  // time axes are used to compare data of the same date in different years).\n  // So basically dataZoom just obtains extent by series.data (in category axis\n  // extent can be obtained from axis.data).\n  // Nevertheless, user can set min/max/scale on axes to make extent of axes\n  // consistent.\n\n\n  fixExtentByAxis(axisProxy, dataExtent);\n  return dataExtent;\n}\n\nfunction fixExtentByAxis(axisProxy, dataExtent) {\n  var axisModel = axisProxy.getAxisModel();\n  var min = axisModel.getMin(true); // For category axis, if min/max/scale are not set, extent is determined\n  // by axis.data by default.\n\n  var isCategoryAxis = axisModel.get('type') === 'category';\n  var axisDataLen = isCategoryAxis && (axisModel.get('data') || []).length;\n\n  if (min != null && min !== 'dataMin' && typeof min !== 'function') {\n    dataExtent[0] = min;\n  } else if (isCategoryAxis) {\n    dataExtent[0] = axisDataLen > 0 ? 0 : NaN;\n  }\n\n  var max = axisModel.getMax(true);\n\n  if (max != null && max !== 'dataMax' && typeof max !== 'function') {\n    dataExtent[1] = max;\n  } else if (isCategoryAxis) {\n    dataExtent[1] = axisDataLen > 0 ? axisDataLen - 1 : NaN;\n  }\n\n  if (!axisModel.get('scale', true)) {\n    dataExtent[0] > 0 && (dataExtent[0] = 0);\n    dataExtent[1] < 0 && (dataExtent[1] = 0);\n  } // For value axis, if min/max/scale are not set, we just use the extent obtained\n  // by series data, which may be a little different from the extent calculated by\n  // `axisHelper.getScaleExtent`. But the different just affects the experience a\n  // little when zooming. So it will not be fixed until some users require it strongly.\n\n\n  return dataExtent;\n}\n\nfunction setAxisModel(axisProxy, isRestore) {\n  var axisModel = axisProxy.getAxisModel();\n  var percentWindow = axisProxy._percentWindow;\n  var valueWindow = axisProxy._valueWindow;\n\n  if (!percentWindow) {\n    return;\n  } // [0, 500]: arbitrary value, guess axis extent.\n\n\n  var precision = numberUtil.getPixelPrecision(valueWindow, [0, 500]);\n  precision = Math.min(precision, 20); // isRestore or isFull\n\n  var useOrigin = isRestore || percentWindow[0] === 0 && percentWindow[1] === 100;\n  axisModel.setRange(useOrigin ? null : +valueWindow[0].toFixed(precision), useOrigin ? null : +valueWindow[1].toFixed(precision));\n}\n\nfunction setMinMaxSpan(axisProxy) {\n  var minMaxSpan = axisProxy._minMaxSpan = {};\n  var dataZoomModel = axisProxy._dataZoomModel;\n  each(['min', 'max'], function (minMax) {\n    minMaxSpan[minMax + 'Span'] = dataZoomModel.get(minMax + 'Span'); // minValueSpan and maxValueSpan has higher priority than minSpan and maxSpan\n\n    var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\n\n    if (valueSpan != null) {\n      minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\n      valueSpan = axisProxy.getAxisModel().axis.scale.parse(valueSpan);\n\n      if (valueSpan != null) {\n        var dataExtent = axisProxy._dataExtent;\n        minMaxSpan[minMax + 'Span'] = numberUtil.linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\n      }\n    }\n  });\n}\n\nvar _default = AxisProxy;\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar helper = require(\"./helper\");\n\nvar AxisProxy = require(\"./AxisProxy\");\n\nvar each = zrUtil.each;\nvar eachAxisDim = helper.eachAxisDim;\nvar DataZoomModel = echarts.extendComponentModel({\n  type: 'dataZoom',\n  dependencies: ['xAxis', 'yAxis', 'zAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series'],\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    zlevel: 0,\n    z: 4,\n    // Higher than normal component (z: 2).\n    orient: null,\n    // Default auto by axisIndex. Possible value: 'horizontal', 'vertical'.\n    xAxisIndex: null,\n    // Default the first horizontal category axis.\n    yAxisIndex: null,\n    // Default the first vertical category axis.\n    filterMode: 'filter',\n    // Possible values: 'filter' or 'empty' or 'weakFilter'.\n    // 'filter': data items which are out of window will be removed. This option is\n    //          applicable when filtering outliers. For each data item, it will be\n    //          filtered if one of the relevant dimensions is out of the window.\n    // 'weakFilter': data items which are out of window will be removed. This option\n    //          is applicable when filtering outliers. For each data item, it will be\n    //          filtered only if all  of the relevant dimensions are out of the same\n    //          side of the window.\n    // 'empty': data items which are out of window will be set to empty.\n    //          This option is applicable when user should not neglect\n    //          that there are some data items out of window.\n    // 'none': Do not filter.\n    // Taking line chart as an example, line will be broken in\n    // the filtered points when filterModel is set to 'empty', but\n    // be connected when set to 'filter'.\n    throttle: null,\n    // Dispatch action by the fixed rate, avoid frequency.\n    // default 100. Do not throttle when use null/undefined.\n    // If animation === true and animationDurationUpdate > 0,\n    // default value is 100, otherwise 20.\n    start: 0,\n    // Start percent. 0 ~ 100\n    end: 100,\n    // End percent. 0 ~ 100\n    startValue: null,\n    // Start value. If startValue specified, start is ignored.\n    endValue: null,\n    // End value. If endValue specified, end is ignored.\n    minSpan: null,\n    // 0 ~ 100\n    maxSpan: null,\n    // 0 ~ 100\n    minValueSpan: null,\n    // The range of dataZoom can not be smaller than that.\n    maxValueSpan: null,\n    // The range of dataZoom can not be larger than that.\n    rangeMode: null // Array, can be 'value' or 'percent'.\n\n  },\n\n  /**\n   * @override\n   */\n  init: function (option, parentModel, ecModel) {\n    /**\n     * key like x_0, y_1\n     * @private\n     * @type {Object}\n     */\n    this._dataIntervalByAxis = {};\n    /**\n     * @private\n     */\n\n    this._dataInfo = {};\n    /**\n     * key like x_0, y_1\n     * @private\n     */\n\n    this._axisProxies = {};\n    /**\n     * @readOnly\n     */\n\n    this.textStyleModel;\n    /**\n     * @private\n     */\n\n    this._autoThrottle = true;\n    /**\n     * 'percent' or 'value'\n     * @private\n     */\n\n    this._rangePropMode = ['percent', 'percent'];\n    var rawOption = retrieveRaw(option);\n    this.mergeDefaultAndTheme(option, ecModel);\n    this.doInit(rawOption);\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function (newOption) {\n    var rawOption = retrieveRaw(newOption); //FIX #2591\n\n    zrUtil.merge(this.option, newOption, true);\n    this.doInit(rawOption);\n  },\n\n  /**\n   * @protected\n   */\n  doInit: function (rawOption) {\n    var thisOption = this.option; // Disable realtime view update if canvas is not supported.\n\n    if (!env.canvasSupported) {\n      thisOption.realtime = false;\n    }\n\n    this._setDefaultThrottle(rawOption);\n\n    updateRangeUse(this, rawOption);\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      // start/end has higher priority over startValue/endValue if they\n      // both set, but we should make chart.setOption({endValue: 1000})\n      // effective, rather than chart.setOption({endValue: 1000, end: null}).\n      if (this._rangePropMode[index] === 'value') {\n        thisOption[names[0]] = null;\n      } // Otherwise do nothing and use the merge result.\n\n    }, this);\n    this.textStyleModel = this.getModel('textStyle');\n\n    this._resetTarget();\n\n    this._giveAxisProxies();\n  },\n\n  /**\n   * @private\n   */\n  _giveAxisProxies: function () {\n    var axisProxies = this._axisProxies;\n    this.eachTargetAxis(function (dimNames, axisIndex, dataZoomModel, ecModel) {\n      var axisModel = this.dependentModels[dimNames.axis][axisIndex]; // If exists, share axisProxy with other dataZoomModels.\n\n      var axisProxy = axisModel.__dzAxisProxy || ( // Use the first dataZoomModel as the main model of axisProxy.\n      axisModel.__dzAxisProxy = new AxisProxy(dimNames.name, axisIndex, this, ecModel)); // FIXME\n      // dispose __dzAxisProxy\n\n      axisProxies[dimNames.name + '_' + axisIndex] = axisProxy;\n    }, this);\n  },\n\n  /**\n   * @private\n   */\n  _resetTarget: function () {\n    var thisOption = this.option;\n\n    var autoMode = this._judgeAutoMode();\n\n    eachAxisDim(function (dimNames) {\n      var axisIndexName = dimNames.axisIndex;\n      thisOption[axisIndexName] = modelUtil.normalizeToArray(thisOption[axisIndexName]);\n    }, this);\n\n    if (autoMode === 'axisIndex') {\n      this._autoSetAxisIndex();\n    } else if (autoMode === 'orient') {\n      this._autoSetOrient();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _judgeAutoMode: function () {\n    // Auto set only works for setOption at the first time.\n    // The following is user's reponsibility. So using merged\n    // option is OK.\n    var thisOption = this.option;\n    var hasIndexSpecified = false;\n    eachAxisDim(function (dimNames) {\n      // When user set axisIndex as a empty array, we think that user specify axisIndex\n      // but do not want use auto mode. Because empty array may be encountered when\n      // some error occured.\n      if (thisOption[dimNames.axisIndex] != null) {\n        hasIndexSpecified = true;\n      }\n    }, this);\n    var orient = thisOption.orient;\n\n    if (orient == null && hasIndexSpecified) {\n      return 'orient';\n    } else if (!hasIndexSpecified) {\n      if (orient == null) {\n        thisOption.orient = 'horizontal';\n      }\n\n      return 'axisIndex';\n    }\n  },\n\n  /**\n   * @private\n   */\n  _autoSetAxisIndex: function () {\n    var autoAxisIndex = true;\n    var orient = this.get('orient', true);\n    var thisOption = this.option;\n    var dependentModels = this.dependentModels;\n\n    if (autoAxisIndex) {\n      // Find axis that parallel to dataZoom as default.\n      var dimName = orient === 'vertical' ? 'y' : 'x';\n\n      if (dependentModels[dimName + 'Axis'].length) {\n        thisOption[dimName + 'AxisIndex'] = [0];\n        autoAxisIndex = false;\n      } else {\n        each(dependentModels.singleAxis, function (singleAxisModel) {\n          if (autoAxisIndex && singleAxisModel.get('orient', true) === orient) {\n            thisOption.singleAxisIndex = [singleAxisModel.componentIndex];\n            autoAxisIndex = false;\n          }\n        });\n      }\n    }\n\n    if (autoAxisIndex) {\n      // Find the first category axis as default. (consider polar)\n      eachAxisDim(function (dimNames) {\n        if (!autoAxisIndex) {\n          return;\n        }\n\n        var axisIndices = [];\n        var axisModels = this.dependentModels[dimNames.axis];\n\n        if (axisModels.length && !axisIndices.length) {\n          for (var i = 0, len = axisModels.length; i < len; i++) {\n            if (axisModels[i].get('type') === 'category') {\n              axisIndices.push(i);\n            }\n          }\n        }\n\n        thisOption[dimNames.axisIndex] = axisIndices;\n\n        if (axisIndices.length) {\n          autoAxisIndex = false;\n        }\n      }, this);\n    }\n\n    if (autoAxisIndex) {\n      // FIXME\n      // ec2xAxisIndexyAxisIndexscatterdataZoom\n      // Grid.js#getScaleByOptiontimelogaxis type\n      // If both dataZoom.xAxisIndex and dataZoom.yAxisIndex is not specified,\n      // dataZoom component auto adopts series that reference to\n      // both xAxis and yAxis which type is 'value'.\n      this.ecModel.eachSeries(function (seriesModel) {\n        if (this._isSeriesHasAllAxesTypeOf(seriesModel, 'value')) {\n          eachAxisDim(function (dimNames) {\n            var axisIndices = thisOption[dimNames.axisIndex];\n            var axisIndex = seriesModel.get(dimNames.axisIndex);\n            var axisId = seriesModel.get(dimNames.axisId);\n            var axisModel = seriesModel.ecModel.queryComponents({\n              mainType: dimNames.axis,\n              index: axisIndex,\n              id: axisId\n            })[0];\n            axisIndex = axisModel.componentIndex;\n\n            if (zrUtil.indexOf(axisIndices, axisIndex) < 0) {\n              axisIndices.push(axisIndex);\n            }\n          });\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _autoSetOrient: function () {\n    var dim; // Find the first axis\n\n    this.eachTargetAxis(function (dimNames) {\n      !dim && (dim = dimNames.name);\n    }, this);\n    this.option.orient = dim === 'y' ? 'vertical' : 'horizontal';\n  },\n\n  /**\n   * @private\n   */\n  _isSeriesHasAllAxesTypeOf: function (seriesModel, axisType) {\n    // FIXME\n    // seriesxAxisIndexyAxisIndex\n    // series.type === scatter\n    var is = true;\n    eachAxisDim(function (dimNames) {\n      var seriesAxisIndex = seriesModel.get(dimNames.axisIndex);\n      var axisModel = this.dependentModels[dimNames.axis][seriesAxisIndex];\n\n      if (!axisModel || axisModel.get('type') !== axisType) {\n        is = false;\n      }\n    }, this);\n    return is;\n  },\n\n  /**\n   * @private\n   */\n  _setDefaultThrottle: function (rawOption) {\n    // When first time user set throttle, auto throttle ends.\n    if (rawOption.hasOwnProperty('throttle')) {\n      this._autoThrottle = false;\n    }\n\n    if (this._autoThrottle) {\n      var globalOption = this.ecModel.option;\n      this.option.throttle = globalOption.animation && globalOption.animationDurationUpdate > 0 ? 100 : 20;\n    }\n  },\n\n  /**\n   * @public\n   */\n  getFirstTargetAxisModel: function () {\n    var firstAxisModel;\n    eachAxisDim(function (dimNames) {\n      if (firstAxisModel == null) {\n        var indices = this.get(dimNames.axisIndex);\n\n        if (indices.length) {\n          firstAxisModel = this.dependentModels[dimNames.axis][indices[0]];\n        }\n      }\n    }, this);\n    return firstAxisModel;\n  },\n\n  /**\n   * @public\n   * @param {Function} callback param: axisModel, dimNames, axisIndex, dataZoomModel, ecModel\n   */\n  eachTargetAxis: function (callback, context) {\n    var ecModel = this.ecModel;\n    eachAxisDim(function (dimNames) {\n      each(this.get(dimNames.axisIndex), function (axisIndex) {\n        callback.call(context, dimNames, axisIndex, this, ecModel);\n      }, this);\n    }, this);\n  },\n\n  /**\n   * @param {string} dimName\n   * @param {number} axisIndex\n   * @return {module:echarts/component/dataZoom/AxisProxy} If not found, return null/undefined.\n   */\n  getAxisProxy: function (dimName, axisIndex) {\n    return this._axisProxies[dimName + '_' + axisIndex];\n  },\n\n  /**\n   * @param {string} dimName\n   * @param {number} axisIndex\n   * @return {module:echarts/model/Model} If not found, return null/undefined.\n   */\n  getAxisModel: function (dimName, axisIndex) {\n    var axisProxy = this.getAxisProxy(dimName, axisIndex);\n    return axisProxy && axisProxy.getAxisModel();\n  },\n\n  /**\n   * If not specified, set to undefined.\n   *\n   * @public\n   * @param {Object} opt\n   * @param {number} [opt.start]\n   * @param {number} [opt.end]\n   * @param {number} [opt.startValue]\n   * @param {number} [opt.endValue]\n   * @param {boolean} [ignoreUpdateRangeUsg=false]\n   */\n  setRawRange: function (opt, ignoreUpdateRangeUsg) {\n    var option = this.option;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names) {\n      // If only one of 'start' and 'startValue' is not null/undefined, the other\n      // should be cleared, which enable clear the option.\n      // If both of them are not set, keep option with the original value, which\n      // enable use only set start but not set end when calling `dispatchAction`.\n      // The same as 'end' and 'endValue'.\n      if (opt[names[0]] != null || opt[names[1]] != null) {\n        option[names[0]] = opt[names[0]];\n        option[names[1]] = opt[names[1]];\n      }\n    }, this);\n    !ignoreUpdateRangeUsg && updateRangeUse(this, opt);\n  },\n\n  /**\n   * @public\n   * @return {Array.<number>} [startPercent, endPercent]\n   */\n  getPercentRange: function () {\n    var axisProxy = this.findRepresentativeAxisProxy();\n\n    if (axisProxy) {\n      return axisProxy.getDataPercentWindow();\n    }\n  },\n\n  /**\n   * @public\n   * For example, chart.getModel().getComponent('dataZoom').getValueRange('y', 0);\n   *\n   * @param {string} [axisDimName]\n   * @param {number} [axisIndex]\n   * @return {Array.<number>} [startValue, endValue] value can only be '-' or finite number.\n   */\n  getValueRange: function (axisDimName, axisIndex) {\n    if (axisDimName == null && axisIndex == null) {\n      var axisProxy = this.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        return axisProxy.getDataValueWindow();\n      }\n    } else {\n      return this.getAxisProxy(axisDimName, axisIndex).getDataValueWindow();\n    }\n  },\n\n  /**\n   * @public\n   * @param {module:echarts/model/Model} [axisModel] If axisModel given, find axisProxy\n   *      corresponding to the axisModel\n   * @return {module:echarts/component/dataZoom/AxisProxy}\n   */\n  findRepresentativeAxisProxy: function (axisModel) {\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    } // Find the first hosted axisProxy\n\n\n    var axisProxies = this._axisProxies;\n\n    for (var key in axisProxies) {\n      if (axisProxies.hasOwnProperty(key) && axisProxies[key].hostedBy(this)) {\n        return axisProxies[key];\n      }\n    } // If no hosted axis find not hosted axisProxy.\n    // Consider this case: dataZoomModel1 and dataZoomModel2 control the same axis,\n    // and the option.start or option.end settings are different. The percentRange\n    // should follow axisProxy.\n    // (We encounter this problem in toolbox data zoom.)\n\n\n    for (var key in axisProxies) {\n      if (axisProxies.hasOwnProperty(key) && !axisProxies[key].hostedBy(this)) {\n        return axisProxies[key];\n      }\n    }\n  },\n\n  /**\n   * @return {Array.<string>}\n   */\n  getRangePropMode: function () {\n    return this._rangePropMode.slice();\n  }\n});\n\nfunction retrieveRaw(option) {\n  var ret = {};\n  each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\n    option.hasOwnProperty(name) && (ret[name] = option[name]);\n  });\n  return ret;\n}\n\nfunction updateRangeUse(dataZoomModel, rawOption) {\n  var rangePropMode = dataZoomModel._rangePropMode;\n  var rangeModeInOption = dataZoomModel.get('rangeMode');\n  each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n    var percentSpecified = rawOption[names[0]] != null;\n    var valueSpecified = rawOption[names[1]] != null;\n\n    if (percentSpecified && !valueSpecified) {\n      rangePropMode[index] = 'percent';\n    } else if (!percentSpecified && valueSpecified) {\n      rangePropMode[index] = 'value';\n    } else if (rangeModeInOption) {\n      rangePropMode[index] = rangeModeInOption[index];\n    } else if (percentSpecified) {\n      // percentSpecified && valueSpecified\n      rangePropMode[index] = 'percent';\n    } // else remain its original setting.\n\n  });\n}\n\nvar _default = DataZoomModel;\nmodule.exports = _default;","var ComponentView = require(\"../../view/Component\");\n\nvar _default = ComponentView.extend({\n  type: 'dataZoom',\n  render: function (dataZoomModel, ecModel, api, payload) {\n    this.dataZoomModel = dataZoomModel;\n    this.ecModel = ecModel;\n    this.api = api;\n  },\n\n  /**\n   * Find the first target coordinate system.\n   *\n   * @protected\n   * @return {Object} {\n   *                   grid: [\n   *                       {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\n   *                       {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\n   *                       ...\n   *                   ],  // cartesians must not be null/undefined.\n   *                   polar: [\n   *                       {model: coord0, axisModels: [axis4], coordIndex: 0},\n   *                       ...\n   *                   ],  // polars must not be null/undefined.\n   *                   singleAxis: [\n   *                       {model: coord0, axisModels: [], coordIndex: 0}\n   *                   ]\n   */\n  getTargetCoordInfo: function () {\n    var dataZoomModel = this.dataZoomModel;\n    var ecModel = this.ecModel;\n    var coordSysLists = {};\n    dataZoomModel.eachTargetAxis(function (dimNames, axisIndex) {\n      var axisModel = ecModel.getComponent(dimNames.axis, axisIndex);\n\n      if (axisModel) {\n        var coordModel = axisModel.getCoordSysModel();\n        coordModel && save(coordModel, axisModel, coordSysLists[coordModel.mainType] || (coordSysLists[coordModel.mainType] = []), coordModel.componentIndex);\n      }\n    }, this);\n\n    function save(coordModel, axisModel, store, coordIndex) {\n      var item;\n\n      for (var i = 0; i < store.length; i++) {\n        if (store[i].model === coordModel) {\n          item = store[i];\n          break;\n        }\n      }\n\n      if (!item) {\n        store.push(item = {\n          model: coordModel,\n          axisModels: [],\n          coordIndex: coordIndex\n        });\n      }\n\n      item.axisModels.push(axisModel);\n    }\n\n    return coordSysLists;\n  }\n});\n\nmodule.exports = _default;","var DataZoomModel = require(\"./DataZoomModel\");\n\nvar _default = DataZoomModel.extend({\n  type: 'dataZoom.inside',\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    disabled: false,\n    // Whether disable this inside zoom.\n    zoomLock: false,\n    // Whether disable zoom but only pan.\n    zoomOnMouseWheel: true,\n    // Can be: true / false / 'shift' / 'ctrl' / 'alt'.\n    moveOnMouseMove: true,\n    // Can be: true / false / 'shift' / 'ctrl' / 'alt'.\n    preventDefaultMouseMove: true\n  }\n});\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar DataZoomView = require(\"./DataZoomView\");\n\nvar sliderMove = require(\"../helper/sliderMove\");\n\nvar roams = require(\"./roams\");\n\nvar bind = zrUtil.bind;\nvar InsideZoomView = DataZoomView.extend({\n  type: 'dataZoom.inside',\n\n  /**\n   * @override\n   */\n  init: function (ecModel, api) {\n    /**\n     * 'throttle' is used in this.dispatchAction, so we save range\n     * to avoid missing some 'pan' info.\n     * @private\n     * @type {Array.<number>}\n     */\n    this._range;\n  },\n\n  /**\n   * @override\n   */\n  render: function (dataZoomModel, ecModel, api, payload) {\n    InsideZoomView.superApply(this, 'render', arguments); // Notice: origin this._range should be maintained, and should not be re-fetched\n    // from dataZoomModel when payload.type is 'dataZoom', otherwise 'pan' or 'zoom'\n    // info will be missed because of 'throttle' of this.dispatchAction.\n\n    if (roams.shouldRecordRange(payload, dataZoomModel.id)) {\n      this._range = dataZoomModel.getPercentRange();\n    } // Reset controllers.\n\n\n    zrUtil.each(this.getTargetCoordInfo(), function (coordInfoList, coordSysName) {\n      var allCoordIds = zrUtil.map(coordInfoList, function (coordInfo) {\n        return roams.generateCoordId(coordInfo.model);\n      });\n      zrUtil.each(coordInfoList, function (coordInfo) {\n        var coordModel = coordInfo.model;\n        var dataZoomOption = dataZoomModel.option;\n        roams.register(api, {\n          coordId: roams.generateCoordId(coordModel),\n          allCoordIds: allCoordIds,\n          containsPoint: function (e, x, y) {\n            return coordModel.coordinateSystem.containPoint([x, y]);\n          },\n          dataZoomId: dataZoomModel.id,\n          throttleRate: dataZoomModel.get('throttle', true),\n          panGetRange: bind(this._onPan, this, coordInfo, coordSysName),\n          zoomGetRange: bind(this._onZoom, this, coordInfo, coordSysName),\n          zoomLock: dataZoomOption.zoomLock,\n          disabled: dataZoomOption.disabled,\n          roamControllerOpt: {\n            zoomOnMouseWheel: dataZoomOption.zoomOnMouseWheel,\n            moveOnMouseMove: dataZoomOption.moveOnMouseMove,\n            preventDefaultMouseMove: dataZoomOption.preventDefaultMouseMove\n          }\n        });\n      }, this);\n    }, this);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function () {\n    roams.unregister(this.api, this.dataZoomModel.id);\n    InsideZoomView.superApply(this, 'dispose', arguments);\n    this._range = null;\n  },\n\n  /**\n   * @private\n   */\n  _onPan: function (coordInfo, coordSysName, controller, dx, dy, oldX, oldY, newX, newY) {\n    var range = this._range.slice(); // Calculate transform by the first axis.\n\n\n    var axisModel = coordInfo.axisModels[0];\n\n    if (!axisModel) {\n      return;\n    }\n\n    var directionInfo = getDirectionInfo[coordSysName]([oldX, oldY], [newX, newY], axisModel, controller, coordInfo);\n    var percentDelta = directionInfo.signal * (range[1] - range[0]) * directionInfo.pixel / directionInfo.pixelLength;\n    sliderMove(percentDelta, range, [0, 100], 'all');\n    return this._range = range;\n  },\n\n  /**\n   * @private\n   */\n  _onZoom: function (coordInfo, coordSysName, controller, scale, mouseX, mouseY) {\n    var range = this._range.slice(); // Calculate transform by the first axis.\n\n\n    var axisModel = coordInfo.axisModels[0];\n\n    if (!axisModel) {\n      return;\n    }\n\n    var directionInfo = getDirectionInfo[coordSysName](null, [mouseX, mouseY], axisModel, controller, coordInfo);\n    var percentPoint = (directionInfo.signal > 0 ? directionInfo.pixelStart + directionInfo.pixelLength - directionInfo.pixel : directionInfo.pixel - directionInfo.pixelStart) / directionInfo.pixelLength * (range[1] - range[0]) + range[0];\n    scale = Math.max(1 / scale, 0);\n    range[0] = (range[0] - percentPoint) * scale + percentPoint;\n    range[1] = (range[1] - percentPoint) * scale + percentPoint; // Restrict range.\n\n    var minMaxSpan = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    sliderMove(0, range, [0, 100], 0, minMaxSpan.minSpan, minMaxSpan.maxSpan);\n    return this._range = range;\n  }\n});\nvar getDirectionInfo = {\n  grid: function (oldPoint, newPoint, axisModel, controller, coordInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var rect = coordInfo.model.coordinateSystem.getRect();\n    oldPoint = oldPoint || [0, 0];\n\n    if (axis.dim === 'x') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // axis.dim === 'y'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  },\n  polar: function (oldPoint, newPoint, axisModel, controller, coordInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var polar = coordInfo.model.coordinateSystem;\n    var radiusExtent = polar.getRadiusAxis().getExtent();\n    var angleExtent = polar.getAngleAxis().getExtent();\n    oldPoint = oldPoint ? polar.pointToCoord(oldPoint) : [0, 0];\n    newPoint = polar.pointToCoord(newPoint);\n\n    if (axisModel.mainType === 'radiusAxis') {\n      ret.pixel = newPoint[0] - oldPoint[0]; // ret.pixelLength = Math.abs(radiusExtent[1] - radiusExtent[0]);\n      // ret.pixelStart = Math.min(radiusExtent[0], radiusExtent[1]);\n\n      ret.pixelLength = radiusExtent[1] - radiusExtent[0];\n      ret.pixelStart = radiusExtent[0];\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'angleAxis'\n      ret.pixel = newPoint[1] - oldPoint[1]; // ret.pixelLength = Math.abs(angleExtent[1] - angleExtent[0]);\n      // ret.pixelStart = Math.min(angleExtent[0], angleExtent[1]);\n\n      ret.pixelLength = angleExtent[1] - angleExtent[0];\n      ret.pixelStart = angleExtent[0];\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  },\n  singleAxis: function (oldPoint, newPoint, axisModel, controller, coordInfo) {\n    var axis = axisModel.axis;\n    var rect = coordInfo.model.coordinateSystem.getRect();\n    var ret = {};\n    oldPoint = oldPoint || [0, 0];\n\n    if (axis.orient === 'horizontal') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'vertical'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  }\n};\nvar _default = InsideZoomView;\nmodule.exports = _default;","var DataZoomModel = require(\"./DataZoomModel\");\n\nvar _default = DataZoomModel.extend({\n  type: 'dataZoom.select'\n});\n\nmodule.exports = _default;","var DataZoomView = require(\"./DataZoomView\");\n\nvar _default = DataZoomView.extend({\n  type: 'dataZoom.select'\n});\n\nmodule.exports = _default;","var DataZoomModel = require(\"./DataZoomModel\");\n\nvar SliderZoomModel = DataZoomModel.extend({\n  type: 'dataZoom.slider',\n  layoutMode: 'box',\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    show: true,\n    // ph => placeholder. Using placehoder here because\n    // deault value can only be drived in view stage.\n    right: 'ph',\n    // Default align to grid rect.\n    top: 'ph',\n    // Default align to grid rect.\n    width: 'ph',\n    // Default align to grid rect.\n    height: 'ph',\n    // Default align to grid rect.\n    left: null,\n    // Default align to grid rect.\n    bottom: null,\n    // Default align to grid rect.\n    backgroundColor: 'rgba(47,69,84,0)',\n    // Background of slider zoom component.\n    // dataBackgroundColor: '#ddd',         // Background coor of data shadow and border of box,\n    // highest priority, remain for compatibility of\n    // previous version, but not recommended any more.\n    dataBackground: {\n      lineStyle: {\n        color: '#2f4554',\n        width: 0.5,\n        opacity: 0.3\n      },\n      areaStyle: {\n        color: 'rgba(47,69,84,0.3)',\n        opacity: 0.3\n      }\n    },\n    borderColor: '#ddd',\n    // border color of the box. For compatibility,\n    // if dataBackgroundColor is set, borderColor\n    // is ignored.\n    fillerColor: 'rgba(167,183,204,0.4)',\n    // Color of selected area.\n    // handleColor: 'rgba(89,170,216,0.95)',     // Color of handle.\n    // handleIcon: 'path://M4.9,17.8c0-1.4,4.5-10.5,5.5-12.4c0-0.1,0.6-1.1,0.9-1.1c0.4,0,0.9,1,0.9,1.1c1.1,2.2,5.4,11,5.4,12.4v17.8c0,1.5-0.6,2.1-1.3,2.1H6.1c-0.7,0-1.3-0.6-1.3-2.1V17.8z',\n    handleIcon: 'M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z',\n    // Percent of the slider height\n    handleSize: '100%',\n    handleStyle: {\n      color: '#a7b7cc'\n    },\n    labelPrecision: null,\n    labelFormatter: null,\n    showDetail: true,\n    showDataShadow: 'auto',\n    // Default auto decision.\n    realtime: true,\n    zoomLock: false,\n    // Whether disable zoom.\n    textStyle: {\n      color: '#333'\n    }\n  }\n});\nvar _default = SliderZoomModel;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar throttle = require(\"../../util/throttle\");\n\nvar DataZoomView = require(\"./DataZoomView\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar layout = require(\"../../util/layout\");\n\nvar sliderMove = require(\"../helper/sliderMove\");\n\nvar Rect = graphic.Rect;\nvar linearMap = numberUtil.linearMap;\nvar asc = numberUtil.asc;\nvar bind = zrUtil.bind;\nvar each = zrUtil.each; // Constants\n\nvar DEFAULT_LOCATION_EDGE_GAP = 7;\nvar DEFAULT_FRAME_BORDER_WIDTH = 1;\nvar DEFAULT_FILLER_SIZE = 30;\nvar HORIZONTAL = 'horizontal';\nvar VERTICAL = 'vertical';\nvar LABEL_GAP = 5;\nvar SHOW_DATA_SHADOW_SERIES_TYPE = ['line', 'bar', 'candlestick', 'scatter'];\nvar SliderZoomView = DataZoomView.extend({\n  type: 'dataZoom.slider',\n  init: function (ecModel, api) {\n    /**\n     * @private\n     * @type {Object}\n     */\n    this._displayables = {};\n    /**\n     * @private\n     * @type {string}\n     */\n\n    this._orient;\n    /**\n     * [0, 100]\n     * @private\n     */\n\n    this._range;\n    /**\n     * [coord of the first handle, coord of the second handle]\n     * @private\n     */\n\n    this._handleEnds;\n    /**\n     * [length, thick]\n     * @private\n     * @type {Array.<number>}\n     */\n\n    this._size;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this._handleWidth;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this._handleHeight;\n    /**\n     * @private\n     */\n\n    this._location;\n    /**\n     * @private\n     */\n\n    this._dragging;\n    /**\n     * @private\n     */\n\n    this._dataShadowInfo;\n    this.api = api;\n  },\n\n  /**\n   * @override\n   */\n  render: function (dataZoomModel, ecModel, api, payload) {\n    SliderZoomView.superApply(this, 'render', arguments);\n    throttle.createOrUpdate(this, '_dispatchZoomAction', this.dataZoomModel.get('throttle'), 'fixRate');\n    this._orient = dataZoomModel.get('orient');\n\n    if (this.dataZoomModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    } // Notice: this._resetInterval() should not be executed when payload.type\n    // is 'dataZoom', origin this._range should be maintained, otherwise 'pan'\n    // or 'zoom' info will be missed because of 'throttle' of this.dispatchAction,\n\n\n    if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) {\n      this._buildView();\n    }\n\n    this._updateView();\n  },\n\n  /**\n   * @override\n   */\n  remove: function () {\n    SliderZoomView.superApply(this, 'remove', arguments);\n    throttle.clear(this, '_dispatchZoomAction');\n  },\n\n  /**\n   * @override\n   */\n  dispose: function () {\n    SliderZoomView.superApply(this, 'dispose', arguments);\n    throttle.clear(this, '_dispatchZoomAction');\n  },\n  _buildView: function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n\n    this._resetLocation();\n\n    this._resetInterval();\n\n    var barGroup = this._displayables.barGroup = new graphic.Group();\n\n    this._renderBackground();\n\n    this._renderHandle();\n\n    this._renderDataShadow();\n\n    thisGroup.add(barGroup);\n\n    this._positionGroup();\n  },\n\n  /**\n   * @private\n   */\n  _resetLocation: function () {\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api; // If some of x/y/width/height are not specified,\n    // auto-adapt according to target grid.\n\n    var coordRect = this._findCoordRect();\n\n    var ecSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }; // Default align by coordinate system rect.\n\n    var positionInfo = this._orient === HORIZONTAL ? {\n      // Why using 'right', because right should be used in vertical,\n      // and it is better to be consistent for dealing with position param merge.\n      right: ecSize.width - coordRect.x - coordRect.width,\n      top: ecSize.height - DEFAULT_FILLER_SIZE - DEFAULT_LOCATION_EDGE_GAP,\n      width: coordRect.width,\n      height: DEFAULT_FILLER_SIZE\n    } : {\n      // vertical\n      right: DEFAULT_LOCATION_EDGE_GAP,\n      top: coordRect.y,\n      width: DEFAULT_FILLER_SIZE,\n      height: coordRect.height\n    }; // Do not write back to option and replace value 'ph', because\n    // the 'ph' value should be recalculated when resize.\n\n    var layoutParams = layout.getLayoutParams(dataZoomModel.option); // Replace the placeholder value.\n\n    zrUtil.each(['right', 'top', 'width', 'height'], function (name) {\n      if (layoutParams[name] === 'ph') {\n        layoutParams[name] = positionInfo[name];\n      }\n    });\n    var layoutRect = layout.getLayoutRect(layoutParams, ecSize, dataZoomModel.padding);\n    this._location = {\n      x: layoutRect.x,\n      y: layoutRect.y\n    };\n    this._size = [layoutRect.width, layoutRect.height];\n    this._orient === VERTICAL && this._size.reverse();\n  },\n\n  /**\n   * @private\n   */\n  _positionGroup: function () {\n    var thisGroup = this.group;\n    var location = this._location;\n    var orient = this._orient; // Just use the first axis to determine mapping.\n\n    var targetAxisModel = this.dataZoomModel.getFirstTargetAxisModel();\n    var inverse = targetAxisModel && targetAxisModel.get('inverse');\n    var barGroup = this._displayables.barGroup;\n    var otherAxisInverse = (this._dataShadowInfo || {}).otherAxisInverse; // Transform barGroup.\n\n    barGroup.attr(orient === HORIZONTAL && !inverse ? {\n      scale: otherAxisInverse ? [1, 1] : [1, -1]\n    } : orient === HORIZONTAL && inverse ? {\n      scale: otherAxisInverse ? [-1, 1] : [-1, -1]\n    } : orient === VERTICAL && !inverse ? {\n      scale: otherAxisInverse ? [1, -1] : [1, 1],\n      rotation: Math.PI / 2 // Dont use Math.PI, considering shadow direction.\n\n    } : {\n      scale: otherAxisInverse ? [-1, -1] : [-1, 1],\n      rotation: Math.PI / 2\n    }); // Position barGroup\n\n    var rect = thisGroup.getBoundingRect([barGroup]);\n    thisGroup.attr('position', [location.x - rect.x, location.y - rect.y]);\n  },\n\n  /**\n   * @private\n   */\n  _getViewExtent: function () {\n    return [0, this._size[0]];\n  },\n  _renderBackground: function () {\n    var dataZoomModel = this.dataZoomModel;\n    var size = this._size;\n    var barGroup = this._displayables.barGroup;\n    barGroup.add(new Rect({\n      silent: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: dataZoomModel.get('backgroundColor')\n      },\n      z2: -40\n    })); // Click panel, over shadow, below handles.\n\n    barGroup.add(new Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: 'transparent'\n      },\n      z2: 0,\n      onclick: zrUtil.bind(this._onClickPanelClick, this)\n    }));\n  },\n  _renderDataShadow: function () {\n    var info = this._dataShadowInfo = this._prepareDataShadowInfo();\n\n    if (!info) {\n      return;\n    }\n\n    var size = this._size;\n    var seriesModel = info.series;\n    var data = seriesModel.getRawData();\n    var otherDim = seriesModel.getShadowDim ? seriesModel.getShadowDim() // @see candlestick\n    : info.otherDim;\n\n    if (otherDim == null) {\n      return;\n    }\n\n    var otherDataExtent = data.getDataExtent(otherDim); // Nice extent.\n\n    var otherOffset = (otherDataExtent[1] - otherDataExtent[0]) * 0.3;\n    otherDataExtent = [otherDataExtent[0] - otherOffset, otherDataExtent[1] + otherOffset];\n    var otherShadowExtent = [0, size[1]];\n    var thisShadowExtent = [0, size[0]];\n    var areaPoints = [[size[0], 0], [0, 0]];\n    var linePoints = [];\n    var step = thisShadowExtent[1] / (data.count() - 1);\n    var thisCoord = 0; // Optimize for large data shadow\n\n    var stride = Math.round(data.count() / size[0]);\n    var lastIsEmpty;\n    data.each([otherDim], function (value, index) {\n      if (stride > 0 && index % stride) {\n        thisCoord += step;\n        return;\n      } // FIXME\n      // Should consider axis.min/axis.max when drawing dataShadow.\n      // FIXME\n      // list\n\n\n      var isEmpty = value == null || isNaN(value) || value === ''; // See #4235.\n\n      var otherCoord = isEmpty ? 0 : linearMap(value, otherDataExtent, otherShadowExtent, true); // Attempt to draw data shadow precisely when there are empty value.\n\n      if (isEmpty && !lastIsEmpty && index) {\n        areaPoints.push([areaPoints[areaPoints.length - 1][0], 0]);\n        linePoints.push([linePoints[linePoints.length - 1][0], 0]);\n      } else if (!isEmpty && lastIsEmpty) {\n        areaPoints.push([thisCoord, 0]);\n        linePoints.push([thisCoord, 0]);\n      }\n\n      areaPoints.push([thisCoord, otherCoord]);\n      linePoints.push([thisCoord, otherCoord]);\n      thisCoord += step;\n      lastIsEmpty = isEmpty;\n    });\n    var dataZoomModel = this.dataZoomModel; // var dataBackgroundModel = dataZoomModel.getModel('dataBackground');\n\n    this._displayables.barGroup.add(new graphic.Polygon({\n      shape: {\n        points: areaPoints\n      },\n      style: zrUtil.defaults({\n        fill: dataZoomModel.get('dataBackgroundColor')\n      }, dataZoomModel.getModel('dataBackground.areaStyle').getAreaStyle()),\n      silent: true,\n      z2: -20\n    }));\n\n    this._displayables.barGroup.add(new graphic.Polyline({\n      shape: {\n        points: linePoints\n      },\n      style: dataZoomModel.getModel('dataBackground.lineStyle').getLineStyle(),\n      silent: true,\n      z2: -19\n    }));\n  },\n  _prepareDataShadowInfo: function () {\n    var dataZoomModel = this.dataZoomModel;\n    var showDataShadow = dataZoomModel.get('showDataShadow');\n\n    if (showDataShadow === false) {\n      return;\n    } // Find a representative series.\n\n\n    var result;\n    var ecModel = this.ecModel;\n    dataZoomModel.eachTargetAxis(function (dimNames, axisIndex) {\n      var seriesModels = dataZoomModel.getAxisProxy(dimNames.name, axisIndex).getTargetSeriesModels();\n      zrUtil.each(seriesModels, function (seriesModel) {\n        if (result) {\n          return;\n        }\n\n        if (showDataShadow !== true && zrUtil.indexOf(SHOW_DATA_SHADOW_SERIES_TYPE, seriesModel.get('type')) < 0) {\n          return;\n        }\n\n        var thisAxis = ecModel.getComponent(dimNames.axis, axisIndex).axis;\n        var otherDim = getOtherDim(dimNames.name);\n        var otherAxisInverse;\n        var coordSys = seriesModel.coordinateSystem;\n\n        if (otherDim != null && coordSys.getOtherAxis) {\n          otherAxisInverse = coordSys.getOtherAxis(thisAxis).inverse;\n        }\n\n        result = {\n          thisAxis: thisAxis,\n          series: seriesModel,\n          thisDim: dimNames.name,\n          otherDim: otherDim,\n          otherAxisInverse: otherAxisInverse\n        };\n      }, this);\n    }, this);\n    return result;\n  },\n  _renderHandle: function () {\n    var displaybles = this._displayables;\n    var handles = displaybles.handles = [];\n    var handleLabels = displaybles.handleLabels = [];\n    var barGroup = this._displayables.barGroup;\n    var size = this._size;\n    var dataZoomModel = this.dataZoomModel;\n    barGroup.add(displaybles.filler = new Rect({\n      draggable: true,\n      cursor: getCursor(this._orient),\n      drift: bind(this._onDragMove, this, 'all'),\n      onmousemove: function (e) {\n        // Fot mobile devicem, prevent screen slider on the button.\n        eventTool.stop(e.event);\n      },\n      ondragstart: bind(this._showDataInfo, this, true),\n      ondragend: bind(this._onDragEnd, this),\n      onmouseover: bind(this._showDataInfo, this, true),\n      onmouseout: bind(this._showDataInfo, this, false),\n      style: {\n        fill: dataZoomModel.get('fillerColor'),\n        textPosition: 'inside'\n      }\n    })); // Frame border.\n\n    barGroup.add(new Rect(graphic.subPixelOptimizeRect({\n      silent: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        stroke: dataZoomModel.get('dataBackgroundColor') || dataZoomModel.get('borderColor'),\n        lineWidth: DEFAULT_FRAME_BORDER_WIDTH,\n        fill: 'rgba(0,0,0,0)'\n      }\n    })));\n    each([0, 1], function (handleIndex) {\n      var path = graphic.createIcon(dataZoomModel.get('handleIcon'), {\n        cursor: getCursor(this._orient),\n        draggable: true,\n        drift: bind(this._onDragMove, this, handleIndex),\n        onmousemove: function (e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        ondragend: bind(this._onDragEnd, this),\n        onmouseover: bind(this._showDataInfo, this, true),\n        onmouseout: bind(this._showDataInfo, this, false)\n      }, {\n        x: -1,\n        y: 0,\n        width: 2,\n        height: 2\n      });\n      var bRect = path.getBoundingRect();\n      this._handleHeight = numberUtil.parsePercent(dataZoomModel.get('handleSize'), this._size[1]);\n      this._handleWidth = bRect.width / bRect.height * this._handleHeight;\n      path.setStyle(dataZoomModel.getModel('handleStyle').getItemStyle());\n      var handleColor = dataZoomModel.get('handleColor'); // Compatitable with previous version\n\n      if (handleColor != null) {\n        path.style.fill = handleColor;\n      }\n\n      barGroup.add(handles[handleIndex] = path);\n      var textStyleModel = dataZoomModel.textStyleModel;\n      this.group.add(handleLabels[handleIndex] = new graphic.Text({\n        silent: true,\n        invisible: true,\n        style: {\n          x: 0,\n          y: 0,\n          text: '',\n          textVerticalAlign: 'middle',\n          textAlign: 'center',\n          textFill: textStyleModel.getTextColor(),\n          textFont: textStyleModel.getFont()\n        },\n        z2: 10\n      }));\n    }, this);\n  },\n\n  /**\n   * @private\n   */\n  _resetInterval: function () {\n    var range = this._range = this.dataZoomModel.getPercentRange();\n\n    var viewExtent = this._getViewExtent();\n\n    this._handleEnds = [linearMap(range[0], [0, 100], viewExtent, true), linearMap(range[1], [0, 100], viewExtent, true)];\n  },\n\n  /**\n   * @private\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\n   * @param {number} delta\n   */\n  _updateInterval: function (handleIndex, delta) {\n    var dataZoomModel = this.dataZoomModel;\n    var handleEnds = this._handleEnds;\n\n    var viewExtend = this._getViewExtent();\n\n    var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    var percentExtent = [0, 100];\n    sliderMove(delta, handleEnds, viewExtend, dataZoomModel.get('zoomLock') ? 'all' : handleIndex, minMaxSpan.minSpan != null ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\n    this._range = asc([linearMap(handleEnds[0], viewExtend, percentExtent, true), linearMap(handleEnds[1], viewExtend, percentExtent, true)]);\n  },\n\n  /**\n   * @private\n   */\n  _updateView: function (nonRealtime) {\n    var displaybles = this._displayables;\n    var handleEnds = this._handleEnds;\n    var handleInterval = asc(handleEnds.slice());\n    var size = this._size;\n    each([0, 1], function (handleIndex) {\n      // Handles\n      var handle = displaybles.handles[handleIndex];\n      var handleHeight = this._handleHeight;\n      handle.attr({\n        scale: [handleHeight / 2, handleHeight / 2],\n        position: [handleEnds[handleIndex], size[1] / 2 - handleHeight / 2]\n      });\n    }, this); // Filler\n\n    displaybles.filler.setShape({\n      x: handleInterval[0],\n      y: 0,\n      width: handleInterval[1] - handleInterval[0],\n      height: size[1]\n    });\n\n    this._updateDataInfo(nonRealtime);\n  },\n\n  /**\n   * @private\n   */\n  _updateDataInfo: function (nonRealtime) {\n    var dataZoomModel = this.dataZoomModel;\n    var displaybles = this._displayables;\n    var handleLabels = displaybles.handleLabels;\n    var orient = this._orient;\n    var labelTexts = ['', '']; // FIXME\n    // dateformatterautoformatterec2 date.getAutoFormatter\n\n    if (dataZoomModel.get('showDetail')) {\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        var axis = axisProxy.getAxisModel().axis;\n        var range = this._range;\n        var dataInterval = nonRealtime // See #4434, data and axis are not processed and reset yet in non-realtime mode.\n        ? axisProxy.calculateDataWindow({\n          start: range[0],\n          end: range[1]\n        }).valueWindow : axisProxy.getDataValueWindow();\n        labelTexts = [this._formatLabel(dataInterval[0], axis), this._formatLabel(dataInterval[1], axis)];\n      }\n    }\n\n    var orderedHandleEnds = asc(this._handleEnds.slice());\n    setLabel.call(this, 0);\n    setLabel.call(this, 1);\n\n    function setLabel(handleIndex) {\n      // Label\n      // Text should not transform by barGroup.\n      // Ignore handlers transform\n      var barTransform = graphic.getTransform(displaybles.handles[handleIndex].parent, this.group);\n      var direction = graphic.transformDirection(handleIndex === 0 ? 'right' : 'left', barTransform);\n      var offset = this._handleWidth / 2 + LABEL_GAP;\n      var textPoint = graphic.applyTransform([orderedHandleEnds[handleIndex] + (handleIndex === 0 ? -offset : offset), this._size[1] / 2], barTransform);\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        textVerticalAlign: orient === HORIZONTAL ? 'middle' : direction,\n        textAlign: orient === HORIZONTAL ? direction : 'center',\n        text: labelTexts[handleIndex]\n      });\n    }\n  },\n\n  /**\n   * @private\n   */\n  _formatLabel: function (value, axis) {\n    var dataZoomModel = this.dataZoomModel;\n    var labelFormatter = dataZoomModel.get('labelFormatter');\n    var labelPrecision = dataZoomModel.get('labelPrecision');\n\n    if (labelPrecision == null || labelPrecision === 'auto') {\n      labelPrecision = axis.getPixelPrecision();\n    }\n\n    var valueStr = value == null || isNaN(value) ? '' // FIXME Glue code\n    : axis.type === 'category' || axis.type === 'time' ? axis.scale.getLabel(Math.round(value)) // param of toFixed should less then 20.\n    : value.toFixed(Math.min(labelPrecision, 20));\n    return zrUtil.isFunction(labelFormatter) ? labelFormatter(value, valueStr) : zrUtil.isString(labelFormatter) ? labelFormatter.replace('{value}', valueStr) : valueStr;\n  },\n\n  /**\n   * @private\n   * @param {boolean} showOrHide true: show, false: hide\n   */\n  _showDataInfo: function (showOrHide) {\n    // Always show when drgging.\n    showOrHide = this._dragging || showOrHide;\n    var handleLabels = this._displayables.handleLabels;\n    handleLabels[0].attr('invisible', !showOrHide);\n    handleLabels[1].attr('invisible', !showOrHide);\n  },\n  _onDragMove: function (handleIndex, dx, dy) {\n    this._dragging = true; // Transform dx, dy to bar coordination.\n\n    var barTransform = this._displayables.barGroup.getLocalTransform();\n\n    var vertex = graphic.applyTransform([dx, dy], barTransform, true);\n\n    this._updateInterval(handleIndex, vertex[0]);\n\n    var realtime = this.dataZoomModel.get('realtime');\n\n    this._updateView(!realtime);\n\n    if (realtime) {\n      realtime && this._dispatchZoomAction();\n    }\n  },\n  _onDragEnd: function () {\n    this._dragging = false;\n\n    this._showDataInfo(false);\n\n    this._dispatchZoomAction();\n  },\n  _onClickPanelClick: function (e) {\n    var size = this._size;\n\n    var localPoint = this._displayables.barGroup.transformCoordToLocal(e.offsetX, e.offsetY);\n\n    if (localPoint[0] < 0 || localPoint[0] > size[0] || localPoint[1] < 0 || localPoint[1] > size[1]) {\n      return;\n    }\n\n    var handleEnds = this._handleEnds;\n    var center = (handleEnds[0] + handleEnds[1]) / 2;\n\n    this._updateInterval('all', localPoint[0] - center);\n\n    this._updateView();\n\n    this._dispatchZoomAction();\n  },\n\n  /**\n   * This action will be throttled.\n   * @private\n   */\n  _dispatchZoomAction: function () {\n    var range = this._range;\n    this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      dataZoomId: this.dataZoomModel.id,\n      start: range[0],\n      end: range[1]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _findCoordRect: function () {\n    // Find the grid coresponding to the first axis referred by dataZoom.\n    var rect;\n    each(this.getTargetCoordInfo(), function (coordInfoList) {\n      if (!rect && coordInfoList.length) {\n        var coordSys = coordInfoList[0].model.coordinateSystem;\n        rect = coordSys.getRect && coordSys.getRect();\n      }\n    });\n\n    if (!rect) {\n      var width = this.api.getWidth();\n      var height = this.api.getHeight();\n      rect = {\n        x: width * 0.2,\n        y: height * 0.2,\n        width: width * 0.6,\n        height: height * 0.6\n      };\n    }\n\n    return rect;\n  }\n});\n\nfunction getOtherDim(thisDim) {\n  // FIXME\n  // getOtherAxis\n  var map = {\n    x: 'y',\n    y: 'x',\n    radius: 'angle',\n    angle: 'radius'\n  };\n  return map[thisDim];\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nvar _default = SliderZoomView;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar helper = require(\"./helper\");\n\necharts.registerAction('dataZoom', function (payload, ecModel) {\n  var linkedNodesFinder = helper.createLinkedNodesFinder(zrUtil.bind(ecModel.eachComponent, ecModel, 'dataZoom'), helper.eachAxisDim, function (model, dimNames) {\n    return model.get(dimNames.axisIndex);\n  });\n  var effectedModels = [];\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    query: payload\n  }, function (model, index) {\n    effectedModels.push.apply(effectedModels, linkedNodesFinder(model).nodes);\n  });\n  zrUtil.each(effectedModels, function (dataZoomModel, index) {\n    dataZoomModel.setRawRange({\n      start: payload.start,\n      end: payload.end,\n      startValue: payload.startValue,\n      endValue: payload.endValue\n    });\n  });\n});","var echarts = require(\"../../echarts\");\n\necharts.registerProcessor(function (ecModel, api) {\n  ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n    // We calculate window and reset axis here but not in model\n    // init stage and not after action dispatch handler, because\n    // reset should be called after seriesData.restoreData.\n    dataZoomModel.eachTargetAxis(resetSingleAxis); // Caution: data zoom filtering is order sensitive when using\n    // percent range and no min/max/scale set on axis.\n    // For example, we have dataZoom definition:\n    // [\n    //      {xAxisIndex: 0, start: 30, end: 70},\n    //      {yAxisIndex: 0, start: 20, end: 80}\n    // ]\n    // In this case, [20, 80] of y-dataZoom should be based on data\n    // that have filtered by x-dataZoom using range of [30, 70],\n    // but should not be based on full raw data. Thus sliding\n    // x-dataZoom will change both ranges of xAxis and yAxis,\n    // while sliding y-dataZoom will only change the range of yAxis.\n    // So we should filter x-axis after reset x-axis immediately,\n    // and then reset y-axis and filter y-axis.\n\n    dataZoomModel.eachTargetAxis(filterSingleAxis);\n  });\n  ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n    // Fullfill all of the range props so that user\n    // is able to get them from chart.getOption().\n    var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n    var percentRange = axisProxy.getDataPercentWindow();\n    var valueRange = axisProxy.getDataValueWindow();\n    dataZoomModel.setRawRange({\n      start: percentRange[0],\n      end: percentRange[1],\n      startValue: valueRange[0],\n      endValue: valueRange[1]\n    }, true);\n  });\n});\n\nfunction resetSingleAxis(dimNames, axisIndex, dataZoomModel) {\n  dataZoomModel.getAxisProxy(dimNames.name, axisIndex).reset(dataZoomModel);\n}\n\nfunction filterSingleAxis(dimNames, axisIndex, dataZoomModel) {\n  dataZoomModel.getAxisProxy(dimNames.name, axisIndex).filterData(dataZoomModel);\n}","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar AXIS_DIMS = ['x', 'y', 'z', 'radius', 'angle', 'single']; // Supported coords.\n\nvar COORDS = ['cartesian2d', 'polar', 'singleAxis'];\n/**\n * @param {string} coordType\n * @return {boolean}\n */\n\nfunction isCoordSupported(coordType) {\n  return zrUtil.indexOf(COORDS, coordType) >= 0;\n}\n/**\n * Create \"each\" method to iterate names.\n *\n * @pubilc\n * @param  {Array.<string>} names\n * @param  {Array.<string>=} attrs\n * @return {Function}\n */\n\n\nfunction createNameEach(names, attrs) {\n  names = names.slice();\n  var capitalNames = zrUtil.map(names, formatUtil.capitalFirst);\n  attrs = (attrs || []).slice();\n  var capitalAttrs = zrUtil.map(attrs, formatUtil.capitalFirst);\n  return function (callback, context) {\n    zrUtil.each(names, function (name, index) {\n      var nameObj = {\n        name: name,\n        capital: capitalNames[index]\n      };\n\n      for (var j = 0; j < attrs.length; j++) {\n        nameObj[attrs[j]] = name + capitalAttrs[j];\n      }\n\n      callback.call(context, nameObj);\n    });\n  };\n}\n/**\n * Iterate each dimension name.\n *\n * @public\n * @param {Function} callback The parameter is like:\n *                            {\n *                                name: 'angle',\n *                                capital: 'Angle',\n *                                axis: 'angleAxis',\n *                                axisIndex: 'angleAixs',\n *                                index: 'angleIndex'\n *                            }\n * @param {Object} context\n */\n\n\nvar eachAxisDim = createNameEach(AXIS_DIMS, ['axisIndex', 'axis', 'index', 'id']);\n/**\n * If tow dataZoomModels has the same axis controlled, we say that they are 'linked'.\n * dataZoomModels and 'links' make up one or more graphics.\n * This function finds the graphic where the source dataZoomModel is in.\n *\n * @public\n * @param {Function} forEachNode Node iterator.\n * @param {Function} forEachEdgeType edgeType iterator\n * @param {Function} edgeIdGetter Giving node and edgeType, return an array of edge id.\n * @return {Function} Input: sourceNode, Output: Like {nodes: [], dims: {}}\n */\n\nfunction createLinkedNodesFinder(forEachNode, forEachEdgeType, edgeIdGetter) {\n  return function (sourceNode) {\n    var result = {\n      nodes: [],\n      records: {} // key: edgeType.name, value: Object (key: edge id, value: boolean).\n\n    };\n    forEachEdgeType(function (edgeType) {\n      result.records[edgeType.name] = {};\n    });\n\n    if (!sourceNode) {\n      return result;\n    }\n\n    absorb(sourceNode, result);\n    var existsLink;\n\n    do {\n      existsLink = false;\n      forEachNode(processSingleNode);\n    } while (existsLink);\n\n    function processSingleNode(node) {\n      if (!isNodeAbsorded(node, result) && isLinked(node, result)) {\n        absorb(node, result);\n        existsLink = true;\n      }\n    }\n\n    return result;\n  };\n\n  function isNodeAbsorded(node, result) {\n    return zrUtil.indexOf(result.nodes, node) >= 0;\n  }\n\n  function isLinked(node, result) {\n    var hasLink = false;\n    forEachEdgeType(function (edgeType) {\n      zrUtil.each(edgeIdGetter(node, edgeType) || [], function (edgeId) {\n        result.records[edgeType.name][edgeId] && (hasLink = true);\n      });\n    });\n    return hasLink;\n  }\n\n  function absorb(node, result) {\n    result.nodes.push(node);\n    forEachEdgeType(function (edgeType) {\n      zrUtil.each(edgeIdGetter(node, edgeType) || [], function (edgeId) {\n        result.records[edgeType.name][edgeId] = true;\n      });\n    });\n  }\n}\n\nexports.isCoordSupported = isCoordSupported;\nexports.createNameEach = createNameEach;\nexports.eachAxisDim = eachAxisDim;\nexports.createLinkedNodesFinder = createLinkedNodesFinder;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar each = zrUtil.each;\nvar ATTR = '\\0_ec_hist_store';\n/**\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} newSnapshot {dataZoomId, batch: [payloadInfo, ...]}\n */\n\nfunction push(ecModel, newSnapshot) {\n  var store = giveStore(ecModel); // If previous dataZoom can not be found,\n  // complete an range with current range.\n\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = store.length - 1;\n\n    for (; i >= 0; i--) {\n      var snapshot = store[i];\n\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        store[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  store.push(newSnapshot);\n}\n/**\n * @param {module:echarts/model/Global} ecModel\n * @return {Object} snapshot\n */\n\n\nfunction pop(ecModel) {\n  var store = giveStore(ecModel);\n  var head = store[store.length - 1];\n  store.length > 1 && store.pop(); // Find top for all dataZoom.\n\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = store.length - 1; i >= 0; i--) {\n      var batchItem = store[i][dataZoomId];\n\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\n/**\n * @param {module:echarts/model/Global} ecModel\n */\n\n\nfunction clear(ecModel) {\n  ecModel[ATTR] = null;\n}\n/**\n * @param {module:echarts/model/Global} ecModel\n * @return {number} records. always >= 1.\n */\n\n\nfunction count(ecModel) {\n  return giveStore(ecModel).length;\n}\n/**\n * [{key: dataZoomId, value: {dataZoomId, range}}, ...]\n * History length of each dataZoom may be different.\n * this._history[0] is used to store origin range.\n * @type {Array.<Object>}\n */\n\n\nfunction giveStore(ecModel) {\n  var store = ecModel[ATTR];\n\n  if (!store) {\n    store = ecModel[ATTR] = [{}];\n  }\n\n  return store;\n}\n\nexports.push = push;\nexports.pop = pop;\nexports.clear = clear;\nexports.count = count;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar RoamController = require(\"../../component/helper/RoamController\");\n\nvar throttleUtil = require(\"../../util/throttle\");\n\n// Only create one roam controller for each coordinate system.\n// one roam controller might be refered by two inside data zoom\n// components (for example, one for x and one for y). When user\n// pan or zoom, only dispatch one action for those data zoom\n// components.\nvar curry = zrUtil.curry;\nvar ATTR = '\\0_ec_dataZoom_roams';\n/**\n * @public\n * @param {module:echarts/ExtensionAPI} api\n * @param {Object} dataZoomInfo\n * @param {string} dataZoomInfo.coordId\n * @param {Function} dataZoomInfo.containsPoint\n * @param {Array.<string>} dataZoomInfo.allCoordIds\n * @param {string} dataZoomInfo.dataZoomId\n * @param {number} dataZoomInfo.throttleRate\n * @param {Function} dataZoomInfo.panGetRange\n * @param {Function} dataZoomInfo.zoomGetRange\n * @param {boolean} [dataZoomInfo.zoomLock]\n * @param {boolean} [dataZoomInfo.disabled]\n */\n\nfunction register(api, dataZoomInfo) {\n  var store = giveStore(api);\n  var theDataZoomId = dataZoomInfo.dataZoomId;\n  var theCoordId = dataZoomInfo.coordId; // Do clean when a dataZoom changes its target coordnate system.\n  // Avoid memory leak, dispose all not-used-registered.\n\n  zrUtil.each(store, function (record, coordId) {\n    var dataZoomInfos = record.dataZoomInfos;\n\n    if (dataZoomInfos[theDataZoomId] && zrUtil.indexOf(dataZoomInfo.allCoordIds, theCoordId) < 0) {\n      delete dataZoomInfos[theDataZoomId];\n      record.count--;\n    }\n  });\n  cleanStore(store);\n  var record = store[theCoordId]; // Create if needed.\n\n  if (!record) {\n    record = store[theCoordId] = {\n      coordId: theCoordId,\n      dataZoomInfos: {},\n      count: 0\n    };\n    record.controller = createController(api, record);\n    record.dispatchAction = zrUtil.curry(dispatchAction, api);\n  } // Update reference of dataZoom.\n\n\n  !record.dataZoomInfos[theDataZoomId] && record.count++;\n  record.dataZoomInfos[theDataZoomId] = dataZoomInfo;\n  var controllerParams = mergeControllerParams(record.dataZoomInfos);\n  record.controller.enable(controllerParams.controlType, controllerParams.opt); // Consider resize, area should be always updated.\n\n  record.controller.setPointerChecker(dataZoomInfo.containsPoint); // Update throttle.\n\n  throttleUtil.createOrUpdate(record, 'dispatchAction', dataZoomInfo.throttleRate, 'fixRate');\n}\n/**\n * @public\n * @param {module:echarts/ExtensionAPI} api\n * @param {string} dataZoomId\n */\n\n\nfunction unregister(api, dataZoomId) {\n  var store = giveStore(api);\n  zrUtil.each(store, function (record) {\n    record.controller.dispose();\n    var dataZoomInfos = record.dataZoomInfos;\n\n    if (dataZoomInfos[dataZoomId]) {\n      delete dataZoomInfos[dataZoomId];\n      record.count--;\n    }\n  });\n  cleanStore(store);\n}\n/**\n * @public\n */\n\n\nfunction shouldRecordRange(payload, dataZoomId) {\n  if (payload && payload.type === 'dataZoom' && payload.batch) {\n    for (var i = 0, len = payload.batch.length; i < len; i++) {\n      if (payload.batch[i].dataZoomId === dataZoomId) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n/**\n * @public\n */\n\n\nfunction generateCoordId(coordModel) {\n  return coordModel.type + '\\0_' + coordModel.id;\n}\n/**\n * Key: coordId, value: {dataZoomInfos: [], count, controller}\n * @type {Array.<Object>}\n */\n\n\nfunction giveStore(api) {\n  // Mount store on zrender instance, so that we do not\n  // need to worry about dispose.\n  var zr = api.getZr();\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n\nfunction createController(api, newRecord) {\n  var controller = new RoamController(api.getZr());\n  controller.on('pan', curry(onPan, newRecord));\n  controller.on('zoom', curry(onZoom, newRecord));\n  return controller;\n}\n\nfunction cleanStore(store) {\n  zrUtil.each(store, function (record, coordId) {\n    if (!record.count) {\n      record.controller.dispose();\n      delete store[coordId];\n    }\n  });\n}\n\nfunction onPan(record, dx, dy, oldX, oldY, newX, newY) {\n  wrapAndDispatch(record, function (info) {\n    return info.panGetRange(record.controller, dx, dy, oldX, oldY, newX, newY);\n  });\n}\n\nfunction onZoom(record, scale, mouseX, mouseY) {\n  wrapAndDispatch(record, function (info) {\n    return info.zoomGetRange(record.controller, scale, mouseX, mouseY);\n  });\n}\n\nfunction wrapAndDispatch(record, getRange) {\n  var batch = [];\n  zrUtil.each(record.dataZoomInfos, function (info) {\n    var range = getRange(info);\n    !info.disabled && range && batch.push({\n      dataZoomId: info.dataZoomId,\n      start: range[0],\n      end: range[1]\n    });\n  });\n  record.dispatchAction(batch);\n}\n/**\n * This action will be throttled.\n */\n\n\nfunction dispatchAction(api, batch) {\n  api.dispatchAction({\n    type: 'dataZoom',\n    batch: batch\n  });\n}\n/**\n * Merge roamController settings when multiple dataZooms share one roamController.\n */\n\n\nfunction mergeControllerParams(dataZoomInfos) {\n  var controlType;\n  var opt = {};\n  var typePriority = {\n    'true': 2,\n    'move': 1,\n    'false': 0,\n    'undefined': -1\n  };\n  zrUtil.each(dataZoomInfos, function (dataZoomInfo) {\n    var oneType = dataZoomInfo.disabled ? false : dataZoomInfo.zoomLock ? 'move' : true;\n    typePriority[oneType] > typePriority[controlType] && (controlType = oneType); // Do not support that different 'shift'/'ctrl'/'alt' setting used in one coord sys.\n\n    zrUtil.extend(opt, dataZoomInfo.roamControllerOpt);\n  });\n  return {\n    controlType: controlType,\n    opt: opt\n  };\n}\n\nexports.register = register;\nexports.unregister = unregister;\nexports.shouldRecordRange = shouldRecordRange;\nexports.generateCoordId = generateCoordId;","var Component = require(\"../../model/Component\");\n\nComponent.registerSubTypeDefaulter('dataZoom', function () {\n  // Default 'slider' when no type specified.\n  return 'slider';\n});","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"../coord/geo/GeoModel\");\n\nrequire(\"../coord/geo/geoCreator\");\n\nrequire(\"./geo/GeoView\");\n\nrequire(\"../action/geoRoam\");\n\nfunction makeAction(method, actionInfo) {\n  actionInfo.update = 'updateView';\n  echarts.registerAction(actionInfo, function (payload, ecModel) {\n    var selected = {};\n    ecModel.eachComponent({\n      mainType: 'geo',\n      query: payload\n    }, function (geoModel) {\n      geoModel[method](payload.name);\n      var geo = geoModel.coordinateSystem;\n      zrUtil.each(geo.regions, function (region) {\n        selected[region.name] = geoModel.isSelected(region.name) || false;\n      });\n    });\n    return {\n      selected: selected,\n      name: payload.name\n    };\n  });\n}\n\nmakeAction('toggleSelected', {\n  type: 'geoToggleSelect',\n  event: 'geoselectchanged'\n});\nmakeAction('select', {\n  type: 'geoSelect',\n  event: 'geoselected'\n});\nmakeAction('unSelect', {\n  type: 'geoUnSelect',\n  event: 'geounselected'\n});","var MapDraw = require(\"../helper/MapDraw\");\n\nvar echarts = require(\"../../echarts\");\n\nvar _default = echarts.extendComponentView({\n  type: 'geo',\n  init: function (ecModel, api) {\n    var mapDraw = new MapDraw(api, true);\n    this._mapDraw = mapDraw;\n    this.group.add(mapDraw.group);\n  },\n  render: function (geoModel, ecModel, api, payload) {\n    // Not render if it is an toggleSelect action from self\n    if (payload && payload.type === 'geoToggleSelect' && payload.from === this.uid) {\n      return;\n    }\n\n    var mapDraw = this._mapDraw;\n\n    if (geoModel.get('show')) {\n      mapDraw.draw(geoModel, ecModel, api, this, payload);\n    } else {\n      this._mapDraw.group.removeAll();\n    }\n\n    this.group.silent = geoModel.get('silent');\n  },\n  dispose: function () {\n    this._mapDraw && this._mapDraw.remove();\n  }\n});\n\nmodule.exports = _default;","var _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../util/model\");\n\nvar graphicUtil = require(\"../util/graphic\");\n\nvar layoutUtil = require(\"../util/layout\");\n\n// -------------\n// Preprocessor\n// -------------\necharts.registerPreprocessor(function (option) {\n  var graphicOption = option.graphic; // Convert\n  // {graphic: [{left: 10, type: 'circle'}, ...]}\n  // or\n  // {graphic: {left: 10, type: 'circle'}}\n  // to\n  // {graphic: [{elements: [{left: 10, type: 'circle'}, ...]}]}\n\n  if (zrUtil.isArray(graphicOption)) {\n    if (!graphicOption[0] || !graphicOption[0].elements) {\n      option.graphic = [{\n        elements: graphicOption\n      }];\n    } else {\n      // Only one graphic instance can be instantiated. (We dont\n      // want that too many views are created in echarts._viewMap)\n      option.graphic = [option.graphic[0]];\n    }\n  } else if (graphicOption && !graphicOption.elements) {\n    option.graphic = [{\n      elements: [graphicOption]\n    }];\n  }\n}); // ------\n// Model\n// ------\n\nvar GraphicModel = echarts.extendComponentModel({\n  type: 'graphic',\n  defaultOption: {\n    // Extra properties for each elements:\n    //\n    // left/right/top/bottom: (like 12, '22%', 'center', default undefined)\n    //      If left/rigth is set, shape.x/shape.cx/position will not be used.\n    //      If top/bottom is set, shape.y/shape.cy/position will not be used.\n    //      This mechanism is useful when you want to position a group/element\n    //      against the right side or the center of this container.\n    //\n    // width/height: (can only be pixel value, default 0)\n    //      Only be used to specify contianer(group) size, if needed. And\n    //      can not be percentage value (like '33%'). See the reason in the\n    //      layout algorithm below.\n    //\n    // bounding: (enum: 'all' (default) | 'raw')\n    //      Specify how to calculate boundingRect when locating.\n    //      'all': Get uioned and transformed boundingRect\n    //          from both itself and its descendants.\n    //          This mode simplies confining a group of elements in the bounding\n    //          of their ancester container (e.g., using 'right: 0').\n    //      'raw': Only use the boundingRect of itself and before transformed.\n    //          This mode is similar to css behavior, which is useful when you\n    //          want an element to be able to overflow its container. (Consider\n    //          a rotated circle needs to be located in a corner.)\n    // Note: elements is always behind its ancestors in this elements array.\n    elements: [],\n    parentId: null\n  },\n\n  /**\n   * Save el options for the sake of the performance (only update modified graphics).\n   * The order is the same as those in option. (ancesters -> descendants)\n   *\n   * @private\n   * @type {Array.<Object>}\n   */\n  _elOptionsToUpdate: null,\n\n  /**\n   * @override\n   */\n  mergeOption: function (option) {\n    // Prevent default merge to elements\n    var elements = this.option.elements;\n    this.option.elements = null;\n    GraphicModel.superApply(this, 'mergeOption', arguments);\n    this.option.elements = elements;\n  },\n\n  /**\n   * @override\n   */\n  optionUpdated: function (newOption, isInit) {\n    var thisOption = this.option;\n    var newList = (isInit ? thisOption : newOption).elements;\n    var existList = thisOption.elements = isInit ? [] : thisOption.elements;\n    var flattenedList = [];\n\n    this._flatten(newList, flattenedList);\n\n    var mappingResult = modelUtil.mappingToExists(existList, flattenedList);\n    modelUtil.makeIdAndName(mappingResult); // Clear elOptionsToUpdate\n\n    var elOptionsToUpdate = this._elOptionsToUpdate = [];\n    zrUtil.each(mappingResult, function (resultItem, index) {\n      var newElOption = resultItem.option;\n\n      if (!newElOption) {\n        return;\n      }\n\n      elOptionsToUpdate.push(newElOption);\n      setKeyInfoToNewElOption(resultItem, newElOption);\n      mergeNewElOptionToExist(existList, index, newElOption);\n      setLayoutInfoToExist(existList[index], newElOption);\n    }, this); // Clean\n\n    for (var i = existList.length - 1; i >= 0; i--) {\n      if (existList[i] == null) {\n        existList.splice(i, 1);\n      } else {\n        // $action should be volatile, otherwise option gotten from\n        // `getOption` will contain unexpected $action.\n        delete existList[i].$action;\n      }\n    }\n  },\n\n  /**\n   * Convert\n   * [{\n   *  type: 'group',\n   *  id: 'xx',\n   *  children: [{type: 'circle'}, {type: 'polygon'}]\n   * }]\n   * to\n   * [\n   *  {type: 'group', id: 'xx'},\n   *  {type: 'circle', parentId: 'xx'},\n   *  {type: 'polygon', parentId: 'xx'}\n   * ]\n   *\n   * @private\n   * @param {Array.<Object>} optionList option list\n   * @param {Array.<Object>} result result of flatten\n   * @param {Object} parentOption parent option\n   */\n  _flatten: function (optionList, result, parentOption) {\n    zrUtil.each(optionList, function (option) {\n      if (!option) {\n        return;\n      }\n\n      if (parentOption) {\n        option.parentOption = parentOption;\n      }\n\n      result.push(option);\n      var children = option.children;\n\n      if (option.type === 'group' && children) {\n        this._flatten(children, result, option);\n      } // Deleting for JSON output, and for not affecting group creation.\n\n\n      delete option.children;\n    }, this);\n  },\n  // FIXME\n  // Pass to view using payload? setOption has a payload?\n  useElOptionsToUpdate: function () {\n    var els = this._elOptionsToUpdate; // Clear to avoid render duplicately when zooming.\n\n    this._elOptionsToUpdate = null;\n    return els;\n  }\n}); // -----\n// View\n// -----\n\necharts.extendComponentView({\n  type: 'graphic',\n\n  /**\n   * @override\n   */\n  init: function (ecModel, api) {\n    /**\n     * @private\n     * @type {module:zrender/core/util.HashMap}\n     */\n    this._elMap = zrUtil.createHashMap();\n    /**\n     * @private\n     * @type {module:echarts/graphic/GraphicModel}\n     */\n\n    this._lastGraphicModel;\n  },\n\n  /**\n   * @override\n   */\n  render: function (graphicModel, ecModel, api) {\n    // Having leveraged between use cases and algorithm complexity, a very\n    // simple layout mechanism is used:\n    // The size(width/height) can be determined by itself or its parent (not\n    // implemented yet), but can not by its children. (Top-down travel)\n    // The location(x/y) can be determined by the bounding rect of itself\n    // (can including its descendants or not) and the size of its parent.\n    // (Bottom-up travel)\n    // When `chart.clear()` or `chart.setOption({...}, true)` with the same id,\n    // view will be reused.\n    if (graphicModel !== this._lastGraphicModel) {\n      this._clear();\n    }\n\n    this._lastGraphicModel = graphicModel;\n\n    this._updateElements(graphicModel, api);\n\n    this._relocate(graphicModel, api);\n  },\n\n  /**\n   * Update graphic elements.\n   *\n   * @private\n   * @param {Object} graphicModel graphic model\n   * @param {module:echarts/ExtensionAPI} api extension API\n   */\n  _updateElements: function (graphicModel, api) {\n    var elOptionsToUpdate = graphicModel.useElOptionsToUpdate();\n\n    if (!elOptionsToUpdate) {\n      return;\n    }\n\n    var elMap = this._elMap;\n    var rootGroup = this.group; // Top-down tranverse to assign graphic settings to each elements.\n\n    zrUtil.each(elOptionsToUpdate, function (elOption) {\n      var $action = elOption.$action;\n      var id = elOption.id;\n      var existEl = elMap.get(id);\n      var parentId = elOption.parentId;\n      var targetElParent = parentId != null ? elMap.get(parentId) : rootGroup;\n\n      if (elOption.type === 'text') {\n        var elOptionStyle = elOption.style; // In top/bottom mode, textVerticalAlign should not be used, which cause\n        // inaccurately locating.\n\n        if (elOption.hv && elOption.hv[1]) {\n          elOptionStyle.textVerticalAlign = elOptionStyle.textBaseline = null;\n        } // Compatible with previous setting: both support fill and textFill,\n        // stroke and textStroke.\n\n\n        !elOptionStyle.hasOwnProperty('textFill') && elOptionStyle.fill && (elOptionStyle.textFill = elOptionStyle.fill);\n        !elOptionStyle.hasOwnProperty('textStroke') && elOptionStyle.stroke && (elOptionStyle.textStroke = elOptionStyle.stroke);\n      } // Remove unnecessary props to avoid potential problems.\n\n\n      var elOptionCleaned = getCleanedElOption(elOption); // For simple, do not support parent change, otherwise reorder is needed.\n\n      if (!$action || $action === 'merge') {\n        existEl ? existEl.attr(elOptionCleaned) : createEl(id, targetElParent, elOptionCleaned, elMap);\n      } else if ($action === 'replace') {\n        removeEl(existEl, elMap);\n        createEl(id, targetElParent, elOptionCleaned, elMap);\n      } else if ($action === 'remove') {\n        removeEl(existEl, elMap);\n      }\n\n      var el = elMap.get(id);\n\n      if (el) {\n        el.__ecGraphicWidth = elOption.width;\n        el.__ecGraphicHeight = elOption.height;\n      }\n    });\n  },\n\n  /**\n   * Locate graphic elements.\n   *\n   * @private\n   * @param {Object} graphicModel graphic model\n   * @param {module:echarts/ExtensionAPI} api extension API\n   */\n  _relocate: function (graphicModel, api) {\n    var elOptions = graphicModel.option.elements;\n    var rootGroup = this.group;\n    var elMap = this._elMap; // Bottom-up tranvese all elements (consider ec resize) to locate elements.\n\n    for (var i = elOptions.length - 1; i >= 0; i--) {\n      var elOption = elOptions[i];\n      var el = elMap.get(elOption.id);\n\n      if (!el) {\n        continue;\n      }\n\n      var parentEl = el.parent;\n      var containerInfo = parentEl === rootGroup ? {\n        width: api.getWidth(),\n        height: api.getHeight()\n      } : {\n        // Like 'position:absolut' in css, default 0.\n        width: parentEl.__ecGraphicWidth || 0,\n        height: parentEl.__ecGraphicHeight || 0\n      };\n      layoutUtil.positionElement(el, elOption, containerInfo, null, {\n        hv: elOption.hv,\n        boundingMode: elOption.bounding\n      });\n    }\n  },\n\n  /**\n   * Clear all elements.\n   *\n   * @private\n   */\n  _clear: function () {\n    var elMap = this._elMap;\n    elMap.each(function (el) {\n      removeEl(el, elMap);\n    });\n    this._elMap = zrUtil.createHashMap();\n  },\n\n  /**\n   * @override\n   */\n  dispose: function () {\n    this._clear();\n  }\n});\n\nfunction createEl(id, targetElParent, elOption, elMap) {\n  var graphicType = elOption.type;\n  var Clz = graphicUtil[graphicType.charAt(0).toUpperCase() + graphicType.slice(1)];\n  var el = new Clz(elOption);\n  targetElParent.add(el);\n  elMap.set(id, el);\n  el.__ecGraphicId = id;\n}\n\nfunction removeEl(existEl, elMap) {\n  var existElParent = existEl && existEl.parent;\n\n  if (existElParent) {\n    existEl.type === 'group' && existEl.traverse(function (el) {\n      removeEl(el, elMap);\n    });\n    elMap.removeKey(existEl.__ecGraphicId);\n    existElParent.remove(existEl);\n  }\n} // Remove unnecessary props to avoid potential problems.\n\n\nfunction getCleanedElOption(elOption) {\n  elOption = zrUtil.extend({}, elOption);\n  zrUtil.each(['id', 'parentId', '$action', 'hv', 'bounding'].concat(layoutUtil.LOCATION_PARAMS), function (name) {\n    delete elOption[name];\n  });\n  return elOption;\n}\n\nfunction isSetLoc(obj, props) {\n  var isSet;\n  zrUtil.each(props, function (prop) {\n    obj[prop] != null && obj[prop] !== 'auto' && (isSet = true);\n  });\n  return isSet;\n}\n\nfunction setKeyInfoToNewElOption(resultItem, newElOption) {\n  var existElOption = resultItem.exist; // Set id and type after id assigned.\n\n  newElOption.id = resultItem.keyInfo.id;\n  !newElOption.type && existElOption && (newElOption.type = existElOption.type); // Set parent id if not specified\n\n  if (newElOption.parentId == null) {\n    var newElParentOption = newElOption.parentOption;\n\n    if (newElParentOption) {\n      newElOption.parentId = newElParentOption.id;\n    } else if (existElOption) {\n      newElOption.parentId = existElOption.parentId;\n    }\n  } // Clear\n\n\n  newElOption.parentOption = null;\n}\n\nfunction mergeNewElOptionToExist(existList, index, newElOption) {\n  // Update existing options, for `getOption` feature.\n  var newElOptCopy = zrUtil.extend({}, newElOption);\n  var existElOption = existList[index];\n  var $action = newElOption.$action || 'merge';\n\n  if ($action === 'merge') {\n    if (existElOption) {\n      // We can ensure that newElOptCopy and existElOption are not\n      // the same object, so `merge` will not change newElOptCopy.\n      zrUtil.merge(existElOption, newElOptCopy, true); // Rigid body, use ignoreSize.\n\n      layoutUtil.mergeLayoutParam(existElOption, newElOptCopy, {\n        ignoreSize: true\n      }); // Will be used in render.\n\n      layoutUtil.copyLayoutParams(newElOption, existElOption);\n    } else {\n      existList[index] = newElOptCopy;\n    }\n  } else if ($action === 'replace') {\n    existList[index] = newElOptCopy;\n  } else if ($action === 'remove') {\n    // null will be cleaned later.\n    existElOption && (existList[index] = null);\n  }\n}\n\nfunction setLayoutInfoToExist(existItem, newElOption) {\n  if (!existItem) {\n    return;\n  }\n\n  existItem.hv = newElOption.hv = [// Rigid body, dont care `width`.\n  isSetLoc(newElOption, ['left', 'right']), // Rigid body, dont care `height`.\n  isSetLoc(newElOption, ['top', 'bottom'])]; // Give default group size. Otherwise layout error may occur.\n\n  if (existItem.type === 'group') {\n    existItem.width == null && (existItem.width = newElOption.width = 0);\n    existItem.height == null && (existItem.height = newElOption.height = 0);\n  }\n}","require(\"./gridSimple\");\n\nrequire(\"./axisPointer/CartesianAxisPointer\");\n\nrequire(\"./axisPointer\");","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../util/graphic\");\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./axis\");\n\n// Grid view\necharts.extendComponentView({\n  type: 'grid',\n  render: function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new graphic.Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: zrUtil.defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  }\n});\necharts.registerPreprocessor(function (option) {\n  // Only create grid when need\n  if (option.xAxis && option.yAxis && !option.grid) {\n    option.grid = {};\n  }\n});","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Eventful = require(\"zrender/lib/mixin/Eventful\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar interactionMutex = require(\"./interactionMutex\");\n\nvar DataDiffer = require(\"../../data/DataDiffer\");\n\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar map = zrUtil.map;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(0,0,0,0.3)',\n    fill: 'rgba(0,0,0,0.1)'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * @alias module:echarts/component/helper/BrushController\n * @constructor\n * @mixin {module:zrender/mixin/Eventful}\n * @event module:echarts/component/helper/BrushController#brush\n *        params:\n *            areas: Array.<Array>, coord relates to container group,\n *                                    If no container specified, to global.\n *            opt {\n *                isEnd: boolean,\n *                removeOnClick: boolean\n *            }\n *\n * @param {module:zrender/zrender~ZRender} zr\n */\n\nfunction BrushController(zr) {\n  Eventful.call(this);\n  /**\n   * @type {module:zrender/zrender~ZRender}\n   * @private\n   */\n\n  this._zr = zr;\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n\n  this.group = new graphic.Group();\n  /**\n   * Only for drawing (after enabledBrush).\n   *     'line', 'rect', 'polygon' or false\n   *     If passing false/null/undefined, disable brush.\n   *     If passing 'auto', determined by panel.defaultBrushType\n   * @private\n   * @type {string}\n   */\n\n  this._brushType;\n  /**\n   * Only for drawing (after enabledBrush).\n   *\n   * @private\n   * @type {Object}\n   */\n\n  this._brushOption;\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._panels;\n  /**\n   * @private\n   * @type {Array.<nubmer>}\n   */\n\n  this._track = [];\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  this._dragging;\n  /**\n   * @private\n   * @type {Array}\n   */\n\n  this._covers = [];\n  /**\n   * @private\n   * @type {moudule:zrender/container/Group}\n   */\n\n  this._creatingCover;\n  /**\n   * `true` means global panel\n   * @private\n   * @type {module:zrender/container/Group|boolean}\n   */\n\n  this._creatingPanel;\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  this._enableGlobalPan;\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this._uid = 'brushController_' + baseUID++;\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._handlers = {};\n  each(mouseHandlers, function (handler, eventName) {\n    this._handlers[eventName] = zrUtil.bind(handler, this);\n  }, this);\n}\n\nBrushController.prototype = {\n  constructor: BrushController,\n\n  /**\n   * If set to null/undefined/false, select disabled.\n   * @param {Object} brushOption\n   * @param {string|boolean} brushOption.brushType 'line', 'rect', 'polygon' or false\n   *                          If passing false/null/undefined, disable brush.\n   *                          If passing 'auto', determined by panel.defaultBrushType.\n   *                              ('auto' can not be used in global panel)\n   * @param {number} [brushOption.brushMode='single'] 'single' or 'multiple'\n   * @param {boolean} [brushOption.transformable=true]\n   * @param {boolean} [brushOption.removeOnClick=false]\n   * @param {Object} [brushOption.brushStyle]\n   * @param {number} [brushOption.brushStyle.width]\n   * @param {number} [brushOption.brushStyle.lineWidth]\n   * @param {string} [brushOption.brushStyle.stroke]\n   * @param {string} [brushOption.brushStyle.fill]\n   * @param {number} [brushOption.z]\n   */\n  enableBrush: function (brushOption) {\n    this._brushType && doDisableBrush(this);\n    brushOption.brushType && doEnableBrush(this, brushOption);\n    return this;\n  },\n\n  /**\n   * @param {Array.<Object>} panelOpts If not pass, it is global brush.\n   *        Each items: {\n   *            panelId, // mandatory.\n   *            clipPath, // mandatory. function.\n   *            isTargetByCursor, // mandatory. function.\n   *            defaultBrushType, // optional, only used when brushType is 'auto'.\n   *            getLinearBrushOtherExtent, // optional. function.\n   *        }\n   */\n  setPanels: function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels = this._panels = {};\n      zrUtil.each(panelOpts, function (panelOpts) {\n        panels[panelOpts.panelId] = zrUtil.clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n\n    return this;\n  },\n\n  /**\n   * @param {Object} [opt]\n   * @return {boolean} [opt.enableGlobalPan=false]\n   */\n  mount: function (opt) {\n    opt = opt || {};\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n\n    this._zr.add(thisGroup);\n\n    thisGroup.attr({\n      position: opt.position || [0, 0],\n      rotation: opt.rotation || 0,\n      scale: opt.scale || [1, 1]\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  },\n  eachCover: function (cb, context) {\n    each(this._covers, cb, context);\n  },\n\n  /**\n   * Update covers.\n   * @param {Array.<Object>} brushOptionList Like:\n   *        [\n   *            {id: 'xx', brushType: 'line', range: [23, 44], brushStyle, transformable},\n   *            {id: 'yy', brushType: 'rect', range: [[23, 44], [23, 54]]},\n   *            ...\n   *        ]\n   *        `brushType` is required in each cover info. (can not be 'auto')\n   *        `id` is not mandatory.\n   *        `brushStyle`, `transformable` is not mandatory, use DEFAULT_BRUSH_OPT by default.\n   *        If brushOptionList is null/undefined, all covers removed.\n   */\n  updateCovers: function (brushOptionList) {\n    brushOptionList = zrUtil.map(brushOptionList, function (brushOption) {\n      return zrUtil.merge(zrUtil.clone(DEFAULT_BRUSH_OPT), brushOption, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, brushOptionList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushOption = brushOptionList[newIndex]; // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbiden.\n\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushOption, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushOption));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  },\n  unmount: function () {\n    this.enableBrush(false); // container may 'removeAll' outside.\n\n    clearCovers(this);\n\n    this._zr.remove(this.group);\n\n    return this;\n  },\n  dispose: function () {\n    this.unmount();\n    this.off();\n  }\n};\nzrUtil.mixin(BrushController, Eventful);\n\nfunction doEnableBrush(controller, brushOption) {\n  var zr = controller._zr; // Consider roam, which takes globalPan too.\n\n  if (!controller._enableGlobalPan) {\n    interactionMutex.take(zr, MUTEX_RESOURCE_KEY, controller._uid);\n  }\n\n  each(controller._handlers, function (handler, eventName) {\n    zr.on(eventName, handler);\n  });\n  controller._brushType = brushOption.brushType;\n  controller._brushOption = zrUtil.merge(zrUtil.clone(DEFAULT_BRUSH_OPT), brushOption, true);\n}\n\nfunction doDisableBrush(controller) {\n  var zr = controller._zr;\n  interactionMutex.release(zr, MUTEX_RESOURCE_KEY, controller._uid);\n  each(controller._handlers, function (handler, eventName) {\n    zr.off(eventName, handler);\n  });\n  controller._brushType = controller._brushOption = null;\n}\n\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\n\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n\n  return creatingCover;\n}\n\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\n\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\n\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\n\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n} // return target panel or `true` (means global panel)\n\n\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return true; // Global panel\n  }\n\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n} // Return a panel or true\n\n\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return true; // Global panel\n  }\n\n  var panelId = cover.__brushOption.panelId; // User may give cover without coord sys info,\n  // which is then treated as global panel.\n\n  return panelId != null ? panels[panelId] : true;\n}\n\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\n\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = zrUtil.clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', areas, {\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\n\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n\n  if (!track.length) {\n    return false;\n  }\n\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\n\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n\nfunction createBaseRectCover(doDrift, controller, brushOption, edgeNames) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(doDrift, controller, cover, 'nswe'),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNames, function (name) {\n    cover.add(new graphic.Rect({\n      name: name,\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(doDrift, controller, cover, name),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\n\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\n\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each(['w', 'e', 'n', 's', 'se', 'sw', 'ne', 'nw'], function (name) {\n    var el = cover.childOfName(name);\n    var globalDir = getGlobalDirection(controller, name);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\n\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\n\nfunction makeStyle(brushOption) {\n  return zrUtil.defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\n\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], // x range\n  [min[1], max[1]] // y range\n  ];\n}\n\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\n\nfunction getGlobalDirection(controller, localDirection) {\n  if (localDirection.length > 1) {\n    localDirection = localDirection.split('');\n    var globalDir = [getGlobalDirection(controller, localDirection[0]), getGlobalDirection(controller, localDirection[1])];\n    (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n    return globalDir.join('');\n  } else {\n    var map = {\n      w: 'left',\n      e: 'right',\n      n: 'top',\n      s: 'bottom'\n    };\n    var inverseMap = {\n      left: 'w',\n      right: 'e',\n      top: 'n',\n      bottom: 's'\n    };\n    var globalDir = graphic.transformDirection(map[localDirection], getTransform(controller));\n    return inverseMap[globalDir];\n  }\n}\n\nfunction driftRect(toRectRange, fromRectRange, controller, cover, name, dx, dy, e) {\n  var brushOption = cover.__brushOption;\n  var rectRange = toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(name.split(''), function (namePart) {\n    var ind = DIRECTION_MAP[namePart];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction driftPolygon(controller, cover, dx, dy, e) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\n\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== true ? panel.clipPath(data, controller._transform) : zrUtil.clone(data);\n}\n\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\n\nfunction resetCursor(controller, e, localCursorPoint) {\n  // Check active\n  if (!controller._brushType) {\n    return;\n  }\n\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint); // Check whether in covers.\n\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n\n      if (currPanel && (currPanel === true || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n\n  currPanel && zr.setCursorStyle('crosshair');\n}\n\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\n\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\n\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n\n  controller._track.push(localCursorPoint.slice());\n\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = zrUtil.clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === true ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n\n      controller._covers.push(creatingCover);\n    }\n\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n\n  return eventParams;\n}\n\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    return panel.defaultBrushType;\n  }\n\n  return brushType;\n}\n\nvar mouseHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mose out side the browser.\n      handleDragEnd.call(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n    resetCursor(this, e, localCursorPoint);\n\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: handleDragEnd //,\n  // FIXME\n  // in tooltip, globalout should not be triggered.\n  // globalout: handleDragEnd\n\n};\n\nfunction handleDragEnd(e) {\n  if (this._dragging) {\n    preventDefault(e);\n    var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n    var eventParams = updateCoverByMouse(this, e, localCursorPoint, true);\n    this._dragging = false;\n    this._track = [];\n    this._creatingCover = null; // trigger event shoule be at final, after procedure will be nested.\n\n    eventParams && trigger(this, eventParams);\n  }\n}\n/**\n * key: brushType\n * @type {Object}\n */\n\n\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover(curry(driftRect, function (range) {\n        return range;\n      }, function (range) {\n        return range;\n      }), controller, brushOption, ['w', 'e', 'n', 's', 'se', 'sw', 'ne', 'nw']);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group(); // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0)); // Use graphic.Polygon close the shape.\n\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\n\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover(curry(driftRect, function (range) {\n        var rectRange = [range, [0, 100]];\n        xyIndex && rectRange.reverse();\n        return rectRange;\n      }, function (rectRange) {\n        return rectRange[xyIndex];\n      }), controller, brushOption, [['w', 'e'], ['n', 's']][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent; // If brushWidth not specified, fit the panel.\n\n      var panel = getPanelByCover(controller, cover);\n\n      if (panel !== true && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex, controller._transform);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\n\nvar _default = BrushController;\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar brushHelper = require(\"./brushHelper\");\n\nvar each = zrUtil.each;\nvar indexOf = zrUtil.indexOf;\nvar curry = zrUtil.curry;\nvar COORD_CONVERTS = ['dataToPoint', 'pointToData']; // FIXME\n// how to genarialize to more coordinate systems.\n\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\n/**\n * [option in constructor]:\n * {\n *     Index/Id/Name of geo, xAxis, yAxis, grid: See util/model#parseFinder.\n * }\n *\n *\n * [targetInfo]:\n *\n * There can be multiple axes in a single targetInfo. Consider the case\n * of `grid` component, a targetInfo represents a grid which contains one or more\n * cartesian and one or more axes. And consider the case of parallel system,\n * which has multiple axes in a coordinate system.\n * Can be {\n *     panelId: ...,\n *     coordSys: <a representitive cartesian in grid (first cartesian by default)>,\n *     coordSyses: all cartesians.\n *     gridModel: <grid component>\n *     xAxes: correspond to coordSyses on index\n *     yAxes: correspond to coordSyses on index\n * }\n * or {\n *     panelId: ...,\n *     coordSys: <geo coord sys>\n *     coordSyses: [<geo coord sys>]\n *     geoModel: <geo component>\n * }\n *\n *\n * [panelOpt]:\n *\n * Make from targetInfo. Input to BrushController.\n * {\n *     panelId: ...,\n *     rect: ...\n * }\n *\n *\n * [area]:\n *\n * Generated by BrushController or user input.\n * {\n *     panelId: Used to locate coordInfo directly. If user inpput, no panelId.\n *     brushType: determine how to convert to/from coord('rect' or 'polygon' or 'lineX/Y').\n *     Index/Id/Name of geo, xAxis, yAxis, grid: See util/model#parseFinder.\n *     range: pixel range.\n *     coordRange: representitive coord range (the first one of coordRanges).\n *     coordRanges: <Array> coord ranges, used in multiple cartesian in one grid.\n * }\n */\n\n/**\n * @param {Object} option contains Index/Id/Name of xAxis/yAxis/geo/grid\n *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} [opt]\n * @param {Array.<string>} [opt.include] include coordinate system types.\n */\n\nfunction BrushTargetManager(option, ecModel, opt) {\n  /**\n   * @private\n   * @type {Array.<Object>}\n   */\n  var targetInfoList = this._targetInfoList = [];\n  var info = {};\n  var foundCpts = parseFinder(ecModel, option);\n  each(targetInfoBuilders, function (builder, type) {\n    if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n      builder(foundCpts, targetInfoList, info);\n    }\n  });\n}\n\nvar proto = BrushTargetManager.prototype;\n\nproto.setOutputRanges = function (areas, ecModel) {\n  this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n    (area.coordRanges || (area.coordRanges = [])).push(coordRange); // area.coordRange is the first of area.coordRanges\n\n    if (!area.coordRange) {\n      area.coordRange = coordRange; // In 'category' axis, coord to pixel is not reversible, so we can not\n      // rebuild range by coordRange accrately, which may bring trouble when\n      // brushing only one item. So we use __rangeOffset to rebuilding range\n      // by coordRange. And this it only used in brush component so it is no\n      // need to be adapted to coordRanges.\n\n      var result = coordConvert[area.brushType](0, coordSys, coordRange);\n      area.__rangeOffset = {\n        offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n        xyMinMax: result.xyMinMax\n      };\n    }\n  });\n};\n\nproto.matchOutputRanges = function (areas, ecModel, cb) {\n  each(areas, function (area) {\n    var targetInfo = this.findTargetInfo(area, ecModel);\n\n    if (targetInfo && targetInfo !== true) {\n      zrUtil.each(targetInfo.coordSyses, function (coordSys) {\n        var result = coordConvert[area.brushType](1, coordSys, area.range);\n        cb(area, result.values, coordSys, ecModel);\n      });\n    }\n  }, this);\n};\n\nproto.setInputRanges = function (areas, ecModel) {\n  each(areas, function (area) {\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    area.range = area.range || []; // convert coordRange to global range and set panelId.\n\n    if (targetInfo && targetInfo !== true) {\n      area.panelId = targetInfo.panelId; // (1) area.range shoule always be calculate from coordRange but does\n      // not keep its original value, for the sake of the dataZoom scenario,\n      // where area.coordRange remains unchanged but area.range may be changed.\n      // (2) Only support converting one coordRange to pixel range in brush\n      // component. So do not consider `coordRanges`.\n      // (3) About __rangeOffset, see comment above.\n\n      var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n      var rangeOffset = area.__rangeOffset;\n      area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n    }\n  }, this);\n};\n\nproto.makePanelOpts = function (api, getDefaultBrushType) {\n  return zrUtil.map(this._targetInfoList, function (targetInfo) {\n    var rect = targetInfo.getPanelRect();\n    return {\n      panelId: targetInfo.panelId,\n      defaultBrushType: getDefaultBrushType && getDefaultBrushType(targetInfo),\n      clipPath: brushHelper.makeRectPanelClipPath(rect),\n      isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n      getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n    };\n  });\n};\n\nproto.controlSeries = function (area, seriesModel, ecModel) {\n  // Check whether area is bound in coord, and series do not belong to that coord.\n  // If do not do this check, some brush (like lineX) will controll all axes.\n  var targetInfo = this.findTargetInfo(area, ecModel);\n  return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n};\n/**\n * If return Object, a coord found.\n * If reutrn true, global found.\n * Otherwise nothing found.\n *\n * @param {Object} area\n * @param {Array} targetInfoList\n * @return {Object|boolean}\n */\n\n\nproto.findTargetInfo = function (area, ecModel) {\n  var targetInfoList = this._targetInfoList;\n  var foundCpts = parseFinder(ecModel, area);\n\n  for (var i = 0; i < targetInfoList.length; i++) {\n    var targetInfo = targetInfoList[i];\n    var areaPanelId = area.panelId;\n\n    if (areaPanelId) {\n      if (targetInfo.panelId === areaPanelId) {\n        return targetInfo;\n      }\n    } else {\n      for (var i = 0; i < targetInfoMatchers.length; i++) {\n        if (targetInfoMatchers[i](foundCpts, targetInfo)) {\n          return targetInfo;\n        }\n      }\n    }\n  }\n\n  return true;\n};\n\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\n\nfunction parseFinder(ecModel, option) {\n  return modelUtil.parseFinder(ecModel, option, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\n\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels; // Remove duplicated.\n\n    var gridModelMap = zrUtil.createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilder.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilder.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n}, // geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilder = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.grid.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone(); // geo roam and zoom transform\n\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange) {\n    var xminymin = coordSys[COORD_CONVERTS[to]]([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]]);\n    var xmaxymax = coordSys[COORD_CONVERTS[to]]([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]]);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = zrUtil.map(rangeOrCoordRange, function (item) {\n      var p = coordSys[COORD_CONVERTS[to]](item);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\n\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(zrUtil.map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i])) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\n\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return zrUtil.map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\n\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n} // We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n\n\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\n\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\n\nvar _default = BrushTargetManager;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar RoamController = require(\"./RoamController\");\n\nvar roamHelper = require(\"../../component/helper/roamHelper\");\n\nvar _cursorHelper = require(\"../../component/helper/cursorHelper\");\n\nvar onIrrelevantElement = _cursorHelper.onIrrelevantElement;\n\nvar graphic = require(\"../../util/graphic\");\n\nfunction getFixedItemStyle(model, scale) {\n  var itemStyle = model.getItemStyle();\n  var areaColor = model.get('areaColor'); // If user want the color not to be changed when hover,\n  // they should both set areaColor and color to be null.\n\n  if (areaColor != null) {\n    itemStyle.fill = areaColor;\n  }\n\n  return itemStyle;\n}\n\nfunction updateMapSelectHandler(mapDraw, mapOrGeoModel, group, api, fromView) {\n  group.off('click');\n  group.off('mousedown');\n\n  if (mapOrGeoModel.get('selectedMode')) {\n    group.on('mousedown', function () {\n      mapDraw._mouseDownFlag = true;\n    });\n    group.on('click', function (e) {\n      if (!mapDraw._mouseDownFlag) {\n        return;\n      }\n\n      mapDraw._mouseDownFlag = false;\n      var el = e.target;\n\n      while (!el.__regions) {\n        el = el.parent;\n      }\n\n      if (!el) {\n        return;\n      }\n\n      var action = {\n        type: (mapOrGeoModel.mainType === 'geo' ? 'geo' : 'map') + 'ToggleSelect',\n        batch: zrUtil.map(el.__regions, function (region) {\n          return {\n            name: region.name,\n            from: fromView.uid\n          };\n        })\n      };\n      action[mapOrGeoModel.mainType + 'Id'] = mapOrGeoModel.id;\n      api.dispatchAction(action);\n      updateMapSelected(mapOrGeoModel, group);\n    });\n  }\n}\n\nfunction updateMapSelected(mapOrGeoModel, group) {\n  // FIXME\n  group.eachChild(function (otherRegionEl) {\n    zrUtil.each(otherRegionEl.__regions, function (region) {\n      otherRegionEl.trigger(mapOrGeoModel.isSelected(region.name) ? 'emphasis' : 'normal');\n    });\n  });\n}\n/**\n * @alias module:echarts/component/helper/MapDraw\n * @param {module:echarts/ExtensionAPI} api\n * @param {boolean} updateGroup\n */\n\n\nfunction MapDraw(api, updateGroup) {\n  var group = new graphic.Group();\n  /**\n   * @type {module:echarts/component/helper/RoamController}\n   * @private\n   */\n\n  this._controller = new RoamController(api.getZr());\n  /**\n   * @type {Object} {target, zoom, zoomLimit}\n   * @private\n   */\n\n  this._controllerHost = {\n    target: updateGroup ? group : null\n  };\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n\n  this.group = group;\n  /**\n   * @type {boolean}\n   * @private\n   */\n\n  this._updateGroup = updateGroup;\n  /**\n   * This flag is used to make sure that only one among\n   * `pan`, `zoom`, `click` can occurs, otherwise 'selected'\n   * action may be triggered when `pan`, which is unexpected.\n   * @type {booelan}\n   */\n\n  this._mouseDownFlag;\n}\n\nMapDraw.prototype = {\n  constructor: MapDraw,\n  draw: function (mapOrGeoModel, ecModel, api, fromView, payload) {\n    var isGeo = mapOrGeoModel.mainType === 'geo'; // Map series has data. GEO model that controlled by map series\n    // will be assigned with map data. Other GEO model has no data.\n\n    var data = mapOrGeoModel.getData && mapOrGeoModel.getData();\n    isGeo && ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'map'\n    }, function (mapSeries) {\n      if (!data && mapSeries.getHostGeoModel() === mapOrGeoModel) {\n        data = mapSeries.getData();\n      }\n    });\n    var geo = mapOrGeoModel.coordinateSystem;\n    var group = this.group;\n    var scale = geo.scale;\n    var groupNewProp = {\n      position: geo.position,\n      scale: scale\n    }; // No animation when first draw or in action\n\n    if (!group.childAt(0) || payload) {\n      group.attr(groupNewProp);\n    } else {\n      graphic.updateProps(group, groupNewProp, mapOrGeoModel);\n    }\n\n    group.removeAll();\n    var itemStyleAccessPath = ['itemStyle', 'normal'];\n    var hoverItemStyleAccessPath = ['itemStyle', 'emphasis'];\n    var labelAccessPath = ['label', 'normal'];\n    var hoverLabelAccessPath = ['label', 'emphasis'];\n    var nameMap = zrUtil.createHashMap();\n    zrUtil.each(geo.regions, function (region) {\n      // Consider in GeoJson properties.name may be duplicated, for example,\n      // there is multiple region named \"United Kindom\" or \"France\" (so many\n      // colonies). And it is not appropriate to merge them in geo, which\n      // will make them share the same label and bring trouble in label\n      // location calculation.\n      var regionGroup = nameMap.get(region.name) || nameMap.set(region.name, new graphic.Group());\n      var compoundPath = new graphic.CompoundPath({\n        shape: {\n          paths: []\n        }\n      });\n      regionGroup.add(compoundPath);\n      var regionModel = mapOrGeoModel.getRegionModel(region.name) || mapOrGeoModel;\n      var itemStyleModel = regionModel.getModel(itemStyleAccessPath);\n      var hoverItemStyleModel = regionModel.getModel(hoverItemStyleAccessPath);\n      var itemStyle = getFixedItemStyle(itemStyleModel, scale);\n      var hoverItemStyle = getFixedItemStyle(hoverItemStyleModel, scale);\n      var labelModel = regionModel.getModel(labelAccessPath);\n      var hoverLabelModel = regionModel.getModel(hoverLabelAccessPath);\n      var dataIdx; // Use the itemStyle in data if has data\n\n      if (data) {\n        dataIdx = data.indexOfName(region.name); // Only visual color of each item will be used. It can be encoded by dataRange\n        // But visual color of series is used in symbol drawing\n        //\n        // Visual color for each series is for the symbol draw\n\n        var visualColor = data.getItemVisual(dataIdx, 'color', true);\n\n        if (visualColor) {\n          itemStyle.fill = visualColor;\n        }\n      }\n\n      zrUtil.each(region.geometries, function (geometry) {\n        if (geometry.type !== 'polygon') {\n          return;\n        }\n\n        compoundPath.shape.paths.push(new graphic.Polygon({\n          shape: {\n            points: geometry.exterior\n          }\n        }));\n\n        for (var i = 0; i < (geometry.interiors ? geometry.interiors.length : 0); i++) {\n          compoundPath.shape.paths.push(new graphic.Polygon({\n            shape: {\n              points: geometry.interiors[i]\n            }\n          }));\n        }\n      });\n      compoundPath.setStyle(itemStyle);\n      compoundPath.style.strokeNoScale = true;\n      compoundPath.culling = true; // Label\n\n      var showLabel = labelModel.get('show');\n      var hoverShowLabel = hoverLabelModel.get('show');\n      var isDataNaN = data && isNaN(data.get('value', dataIdx));\n      var itemLayout = data && data.getItemLayout(dataIdx); // In the following cases label will be drawn\n      // 1. In map series and data value is NaN\n      // 2. In geo component\n      // 4. Region has no series legendSymbol, which will be add a showLabel flag in mapSymbolLayout\n\n      if (isGeo || isDataNaN && (showLabel || hoverShowLabel) || itemLayout && itemLayout.showLabel) {\n        var query = !isGeo ? dataIdx : region.name;\n        var labelFetcher; // Consider dataIdx not found.\n\n        if (!data || dataIdx >= 0) {\n          labelFetcher = mapOrGeoModel;\n        }\n\n        var textEl = new graphic.Text({\n          position: region.center.slice(),\n          scale: [1 / scale[0], 1 / scale[1]],\n          z2: 10,\n          silent: true\n        });\n        graphic.setLabelStyle(textEl.style, textEl.hoverStyle = {}, labelModel, hoverLabelModel, {\n          labelFetcher: labelFetcher,\n          labelDataIndex: query,\n          defaultText: region.name,\n          useInsideStyle: false\n        }, {\n          textAlign: 'center',\n          textVerticalAlign: 'middle'\n        });\n        regionGroup.add(textEl);\n      } // setItemGraphicEl, setHoverStyle after all polygons and labels\n      // are added to the rigionGroup\n\n\n      if (data) {\n        data.setItemGraphicEl(dataIdx, regionGroup);\n      } else {\n        var regionModel = mapOrGeoModel.getRegionModel(region.name); // Package custom mouse event for geo component\n\n        compoundPath.eventData = {\n          componentType: 'geo',\n          geoIndex: mapOrGeoModel.componentIndex,\n          name: region.name,\n          region: regionModel && regionModel.option || {}\n        };\n      }\n\n      var groupRegions = regionGroup.__regions || (regionGroup.__regions = []);\n      groupRegions.push(region);\n      graphic.setHoverStyle(regionGroup, hoverItemStyle, {\n        hoverSilentOnTouch: !!mapOrGeoModel.get('selectedMode')\n      });\n      group.add(regionGroup);\n    });\n\n    this._updateController(mapOrGeoModel, ecModel, api);\n\n    updateMapSelectHandler(this, mapOrGeoModel, group, api, fromView);\n    updateMapSelected(mapOrGeoModel, group);\n  },\n  remove: function () {\n    this.group.removeAll();\n\n    this._controller.dispose();\n\n    this._controllerHost = {};\n  },\n  _updateController: function (mapOrGeoModel, ecModel, api) {\n    var geo = mapOrGeoModel.coordinateSystem;\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    controllerHost.zoomLimit = mapOrGeoModel.get('scaleLimit');\n    controllerHost.zoom = geo.getZoom(); // roamType is will be set default true if it is null\n\n    controller.enable(mapOrGeoModel.get('roam') || false);\n    var mainType = mapOrGeoModel.mainType;\n\n    function makeActionBase() {\n      var action = {\n        type: 'geoRoam',\n        componentType: mainType\n      };\n      action[mainType + 'Id'] = mapOrGeoModel.id;\n      return action;\n    }\n\n    controller.off('pan').on('pan', function (dx, dy) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnPan(controllerHost, dx, dy);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        dx: dx,\n        dy: dy\n      }));\n    }, this);\n    controller.off('zoom').on('zoom', function (zoom, mouseX, mouseY) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnZoom(controllerHost, zoom, mouseX, mouseY);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        zoom: zoom,\n        originX: mouseX,\n        originY: mouseY\n      }));\n\n      if (this._updateGroup) {\n        var group = this.group;\n        var scale = group.scale;\n        group.traverse(function (el) {\n          if (el.type === 'text') {\n            el.attr('scale', [1 / scale[0], 1 / scale[1]]);\n          }\n        });\n      }\n    }, this);\n    controller.setPointerChecker(function (e, x, y) {\n      return geo.getViewRectAfterRoam().contain(x, y) && !onIrrelevantElement(e, api, mapOrGeoModel);\n    });\n  }\n};\nvar _default = MapDraw;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Eventful = require(\"zrender/lib/mixin/Eventful\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar interactionMutex = require(\"./interactionMutex\");\n\n/**\n * @alias module:echarts/component/helper/RoamController\n * @constructor\n * @mixin {module:zrender/mixin/Eventful}\n *\n * @param {module:zrender/zrender~ZRender} zr\n */\nfunction RoamController(zr) {\n  /**\n   * @type {Function}\n   */\n  this.pointerChecker;\n  /**\n   * @type {module:zrender}\n   */\n\n  this._zr = zr;\n  /**\n   * @type {Object}\n   */\n\n  this._opt = {}; // Avoid two roamController bind the same handler\n\n  var bind = zrUtil.bind;\n  var mousedownHandler = bind(mousedown, this);\n  var mousemoveHandler = bind(mousemove, this);\n  var mouseupHandler = bind(mouseup, this);\n  var mousewheelHandler = bind(mousewheel, this);\n  var pinchHandler = bind(pinch, this);\n  Eventful.call(this);\n  /**\n   * @param {Function} pointerChecker\n   *                   input: x, y\n   *                   output: boolean\n   */\n\n  this.setPointerChecker = function (pointerChecker) {\n    this.pointerChecker = pointerChecker;\n  };\n  /**\n   * Notice: only enable needed types. For example, if 'zoom'\n   * is not needed, 'zoom' should not be enabled, otherwise\n   * default mousewheel behaviour (scroll page) will be disabled.\n   *\n   * @param  {boolean|string} [controlType=true] Specify the control type,\n   *                          which can be null/undefined or true/false\n   *                          or 'pan/move' or 'zoom'/'scale'\n   * @param {Object} [opt]\n   * @param {Object} [opt.zoomOnMouseWheel=true]\n   * @param {Object} [opt.moveOnMouseMove=true]\n   * @param {Object} [opt.preventDefaultMouseMove=true] When pan.\n   */\n\n\n  this.enable = function (controlType, opt) {\n    // Disable previous first\n    this.disable();\n    this._opt = zrUtil.defaults(zrUtil.clone(opt) || {}, {\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      preventDefaultMouseMove: true\n    });\n\n    if (controlType == null) {\n      controlType = true;\n    }\n\n    if (controlType === true || controlType === 'move' || controlType === 'pan') {\n      zr.on('mousedown', mousedownHandler);\n      zr.on('mousemove', mousemoveHandler);\n      zr.on('mouseup', mouseupHandler);\n    }\n\n    if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n      zr.on('mousewheel', mousewheelHandler);\n      zr.on('pinch', pinchHandler);\n    }\n  };\n\n  this.disable = function () {\n    zr.off('mousedown', mousedownHandler);\n    zr.off('mousemove', mousemoveHandler);\n    zr.off('mouseup', mouseupHandler);\n    zr.off('mousewheel', mousewheelHandler);\n    zr.off('pinch', pinchHandler);\n  };\n\n  this.dispose = this.disable;\n\n  this.isDragging = function () {\n    return this._dragging;\n  };\n\n  this.isPinching = function () {\n    return this._pinching;\n  };\n}\n\nzrUtil.mixin(RoamController, Eventful);\n\nfunction mousedown(e) {\n  if (eventTool.notLeftMouse(e) || e.target && e.target.draggable) {\n    return;\n  }\n\n  var x = e.offsetX;\n  var y = e.offsetY; // Only check on mosedown, but not mousemove.\n  // Mouse can be out of target when mouse moving.\n\n  if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n    this._x = x;\n    this._y = y;\n    this._dragging = true;\n  }\n}\n\nfunction mousemove(e) {\n  if (eventTool.notLeftMouse(e) || !checkKeyBinding(this, 'moveOnMouseMove', e) || !this._dragging || e.gestureEvent === 'pinch' || interactionMutex.isTaken(this._zr, 'globalPan')) {\n    return;\n  }\n\n  var x = e.offsetX;\n  var y = e.offsetY;\n  var oldX = this._x;\n  var oldY = this._y;\n  var dx = x - oldX;\n  var dy = y - oldY;\n  this._x = x;\n  this._y = y;\n  this._opt.preventDefaultMouseMove && eventTool.stop(e.event);\n  this.trigger('pan', dx, dy, oldX, oldY, x, y);\n}\n\nfunction mouseup(e) {\n  if (!eventTool.notLeftMouse(e)) {\n    this._dragging = false;\n  }\n}\n\nfunction mousewheel(e) {\n  // wheelDelta maybe -0 in chrome mac.\n  if (!checkKeyBinding(this, 'zoomOnMouseWheel', e) || e.wheelDelta === 0) {\n    return;\n  } // Convenience:\n  // Mac and VM Windows on Mac: scroll up: zoom out.\n  // Windows: scroll up: zoom in.\n\n\n  var zoomDelta = e.wheelDelta > 0 ? 1.1 : 1 / 1.1;\n  zoom.call(this, e, zoomDelta, e.offsetX, e.offsetY);\n}\n\nfunction pinch(e) {\n  if (interactionMutex.isTaken(this._zr, 'globalPan')) {\n    return;\n  }\n\n  var zoomDelta = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n  zoom.call(this, e, zoomDelta, e.pinchX, e.pinchY);\n}\n\nfunction zoom(e, zoomDelta, zoomX, zoomY) {\n  if (this.pointerChecker && this.pointerChecker(e, zoomX, zoomY)) {\n    // When mouse is out of roamController rect,\n    // default befavoius should not be be disabled, otherwise\n    // page sliding is disabled, contrary to expectation.\n    eventTool.stop(e.event);\n    this.trigger('zoom', zoomDelta, zoomX, zoomY);\n  }\n}\n\nfunction checkKeyBinding(roamController, prop, e) {\n  var setting = roamController._opt[prop];\n  return setting && (!zrUtil.isString(setting) || e.event[setting + 'Key']);\n}\n\nvar _default = RoamController;\nmodule.exports = _default;","var BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar _cursorHelper = require(\"./cursorHelper\");\n\nvar onIrrelevantElement = _cursorHelper.onIrrelevantElement;\n\nvar graphicUtil = require(\"../../util/graphic\");\n\nfunction makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints, transform) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\n\nfunction makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\n\nfunction makeRectIsTargetByCursor(rect, api, targetModel) {\n  rect = normalizeRect(rect);\n  return function (e, localCursorPoint, transform) {\n    return rect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n} // Consider width/height is negative.\n\n\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}\n\nexports.makeRectPanelClipPath = makeRectPanelClipPath;\nexports.makeLinearBrushOtherExtent = makeLinearBrushOtherExtent;\nexports.makeRectIsTargetByCursor = makeRectIsTargetByCursor;","var IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nfunction onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES[model.mainType] && coordSys && coordSys.model !== targetCoordSysModel;\n}\n\nexports.onIrrelevantElement = onIrrelevantElement;","var echarts = require(\"../../echarts\");\n\nvar ATTR = '\\0_ec_interaction_mutex';\n\nfunction take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\n\nfunction release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\n\nfunction isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\n\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n\n\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, function () {});\nexports.take = take;\nexports.release = release;\nexports.isTaken = isTaken;","var _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\nvar layoutBox = _layout.box;\nvar positionElement = _layout.positionElement;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\nfunction layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\n\nfunction makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  var rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}\n\nexports.layout = layout;\nexports.makeBackground = makeBackground;","/**\n * For geo and graph.\n *\n * @param {Object} controllerHost\n * @param {module:zrender/Element} controllerHost.target\n */\nfunction updateViewOnPan(controllerHost, dx, dy) {\n  var target = controllerHost.target;\n  var pos = target.position;\n  pos[0] += dx;\n  pos[1] += dy;\n  target.dirty();\n}\n/**\n * For geo and graph.\n *\n * @param {Object} controllerHost\n * @param {module:zrender/Element} controllerHost.target\n * @param {number} controllerHost.zoom\n * @param {number} controllerHost.zoomLimit like: {min: 1, max: 2}\n */\n\n\nfunction updateViewOnZoom(controllerHost, zoomDelta, zoomX, zoomY) {\n  var target = controllerHost.target;\n  var zoomLimit = controllerHost.zoomLimit;\n  var pos = target.position;\n  var scale = target.scale;\n  var newZoom = controllerHost.zoom = controllerHost.zoom || 1;\n  newZoom *= zoomDelta;\n\n  if (zoomLimit) {\n    var zoomMin = zoomLimit.min || 0;\n    var zoomMax = zoomLimit.max || Infinity;\n    newZoom = Math.max(Math.min(zoomMax, newZoom), zoomMin);\n  }\n\n  var zoomScale = newZoom / controllerHost.zoom;\n  controllerHost.zoom = newZoom; // Keep the mouse center when scaling\n\n  pos[0] -= (zoomX - pos[0]) * (zoomScale - 1);\n  pos[1] -= (zoomY - pos[1]) * (zoomScale - 1);\n  scale[0] *= zoomScale;\n  scale[1] *= zoomScale;\n  target.dirty();\n}\n\nexports.updateViewOnPan = updateViewOnPan;\nexports.updateViewOnZoom = updateViewOnZoom;","var zrUtil = require(\"zrender/lib/core/util\");\n\n/**\n * Data selectable mixin for chart series.\n * To eanble data select, option of series must have `selectedMode`.\n * And each data item will use `selected` to toggle itself selected status\n */\nvar _default = {\n  updateSelectedMap: function (targetList) {\n    this._targetList = targetList.slice();\n    this._selectTargetMap = zrUtil.reduce(targetList || [], function (targetMap, target) {\n      targetMap.set(target.name, target);\n      return targetMap;\n    }, zrUtil.createHashMap());\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  // PENGING If selectedMode is null ?\n  select: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      this._selectTargetMap.each(function (target) {\n        target.selected = false;\n      });\n    }\n\n    target && (target.selected = true);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  unSelect: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name); // var selectedMode = this.get('selectedMode');\n    // selectedMode !== 'single' && target && (target.selected = false);\n\n    target && (target.selected = false);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  toggleSelected: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n\n    if (target != null) {\n      this[target.selected ? 'unSelect' : 'select'](name, id);\n      return target.selected;\n    }\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  isSelected: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    return target && target.selected;\n  }\n};\nmodule.exports = _default;","/**\n * Calculate slider move result.\n * Usage:\n * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\n * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\n * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\n *\n * @param {number} delta Move length.\n * @param {Array.<number>} handleEnds handleEnds[0] can be bigger then handleEnds[1].\n *              handleEnds will be modified in this method.\n * @param {Array.<number>} extent handleEnds is restricted by extent.\n *              extent[0] should less or equals than extent[1].\n * @param {number|string} handleIndex Can be 'all', means that both move the two handleEnds,\n *              where the input minSpan and maxSpan will not work.\n * @param {number} [minSpan] The range of dataZoom can not be smaller than that.\n *              If not set, handle0 and cross handle1. If set as a non-negative\n *              number (including `0`), handles will push each other when reaching\n *              the minSpan.\n * @param {number} [maxSpan] The range of dataZoom can not be larger than that.\n * @return {Array.<number>} The input handleEnds.\n */\nfunction _default(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n  // Normalize firstly.\n  handleEnds[0] = restrict(handleEnds[0], extent);\n  handleEnds[1] = restrict(handleEnds[1], extent);\n  delta = delta || 0;\n  var extentSpan = extent[1] - extent[0]; // Notice maxSpan and minSpan can be null/undefined.\n\n  if (minSpan != null) {\n    minSpan = restrict(minSpan, [0, extentSpan]);\n  }\n\n  if (maxSpan != null) {\n    maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n  }\n\n  if (handleIndex === 'all') {\n    minSpan = maxSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n    handleIndex = 0;\n  }\n\n  var originalDistSign = getSpanSign(handleEnds, handleIndex);\n  handleEnds[handleIndex] += delta; // Restrict in extent.\n\n  var extentMinSpan = minSpan || 0;\n  var realExtent = extent.slice();\n  originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n  handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent); // Expand span.\n\n  var currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n    // If minSpan exists, 'cross' is forbinden.\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n  } // Shrink span.\n\n\n  var currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (maxSpan != null && currDistSign.span > maxSpan) {\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n  }\n\n  return handleEnds;\n}\n\nfunction getSpanSign(handleEnds, handleIndex) {\n  var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex]; // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n  // is at left of handleEnds[1] for non-cross case.\n\n  return {\n    span: Math.abs(dist),\n    sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n  };\n}\n\nfunction restrict(value, extend) {\n  return Math.min(extend[1], Math.max(extend[0], value));\n}\n\nmodule.exports = _default;","var echarts = require(\"../echarts\");\n\nrequire(\"./legend/LegendModel\");\n\nrequire(\"./legend/legendAction\");\n\nrequire(\"./legend/LegendView\");\n\nvar legendFilter = require(\"./legend/legendFilter\");\n\nvar Component = require(\"../model/Component\");\n\n// Do not contain scrollable legend, for sake of file size.\n// Series Filter\necharts.registerProcessor(legendFilter);\nComponent.registerSubTypeDefaulter('legend', function () {\n  // Default 'plain' when no type specified.\n  return 'plain';\n});","require(\"./legend\");\n\nrequire(\"./legend/ScrollableLegendModel\");\n\nrequire(\"./legend/ScrollableLegendView\");\n\nrequire(\"./legend/scrollableLegendAction\");","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\nvar LegendModel = echarts.extendComponentModel({\n  type: 'legend.plain',\n  dependencies: ['series'],\n  layoutMode: {\n    type: 'box',\n    // legend.width/height are maxWidth/maxHeight actually,\n    // whereas realy width/height is calculated by its content.\n    // (Setting {left: 10, right: 10} does not make sense).\n    // So consider the case:\n    // `setOption({legend: {left: 10});`\n    // then `setOption({legend: {right: 10});`\n    // The previous `left` should be cleared by setting `ignoreSize`.\n    ignoreSize: true\n  },\n  init: function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n  },\n  mergeOption: function (option) {\n    LegendModel.superCall(this, 'mergeOption', option);\n  },\n  optionUpdated: function () {\n    this._updateData(this.ecModel);\n\n    var legendData = this._data; // If selectedMode is single, try to select one\n\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false; // If has any selected in option.selected\n\n      for (var i = 0; i < legendData.length; i++) {\n        var name = legendData[i].get('name');\n\n        if (this.isSelected(name)) {\n          // Force to unselect others\n          this.select(name);\n          hasSelected = true;\n          break;\n        }\n      } // Try select the first if selectedMode is single\n\n\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  },\n  _updateData: function (ecModel) {\n    var legendData = zrUtil.map(this.get('data') || [], function (dataItem) {\n      // Can be string or number\n      if (typeof dataItem === 'string' || typeof dataItem === 'number') {\n        dataItem = {\n          name: dataItem\n        };\n      }\n\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    this._data = legendData;\n    var availableNames = zrUtil.map(ecModel.getSeries(), function (series) {\n      return series.name;\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.legendDataProvider) {\n        var data = seriesModel.legendDataProvider();\n        availableNames = availableNames.concat(data.mapArray(data.getName));\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n\n    this._availableNames = availableNames;\n  },\n\n  /**\n   * @return {Array.<module:echarts/model/Model>}\n   */\n  getData: function () {\n    return this._data;\n  },\n\n  /**\n   * @param {string} name\n   */\n  select: function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n\n    selected[name] = true;\n  },\n\n  /**\n   * @param {string} name\n   */\n  unSelect: function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  },\n\n  /**\n   * @param {string} name\n   */\n  toggleSelected: function (name) {\n    var selected = this.option.selected; // Default is true\n\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  },\n\n  /**\n   * @param {string} name\n   */\n  isSelected: function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  },\n  defaultOption: {\n    // \n    zlevel: 0,\n    // \n    z: 4,\n    show: true,\n    // \n    // 'horizontal' | 'vertical'\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    // \n    // 'auto' | 'left' | 'right'\n    //  'auto',  x \n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    // \n    borderColor: '#ccc',\n    borderRadius: 0,\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // itempx10\n    // \n    itemGap: 10,\n    // \n    itemWidth: 25,\n    // \n    itemHeight: 14,\n    // \n    inactiveColor: '#ccc',\n    textStyle: {\n      // \n      color: '#333'\n    },\n    // formatter: '',\n    // \n    selectedMode: true,\n    // LEGEND.SELECTED\n    // selected: null,\n    // legend.dataitem\n    // data: [],\n    // Tooltip \n    tooltip: {\n      show: false\n    }\n  }\n});\nvar _default = LegendModel;\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _listComponent = require(\"../helper/listComponent\");\n\nvar makeBackground = _listComponent.makeBackground;\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar _default = echarts.extendComponentView({\n  type: 'legend.plain',\n  newlineDisabled: false,\n\n  /**\n   * @override\n   */\n  init: function () {\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n    this.group.add(this._contentGroup = new Group());\n    /**\n     * @private\n     * @type {module:zrender/Element}\n     */\n\n    this._backgroundEl;\n  },\n\n  /**\n   * @protected\n   */\n  getContentGroup: function () {\n    return this._contentGroup;\n  },\n\n  /**\n   * @override\n   */\n  render: function (legendModel, ecModel, api) {\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && legendModel.get('orient') === 'vertical' ? 'right' : 'left';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.attr('position', [layoutRect.x - mainRect.x, layoutRect.y - mainRect.y]); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  },\n\n  /**\n   * @protected\n   */\n  resetInner: function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n  },\n\n  /**\n   * @protected\n   */\n  renderInner: function (itemAlign, legendModel, ecModel, api) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    each(legendModel.getData(), function (itemModel, dataIndex) {\n      var name = itemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        contentGroup.add(new Group({\n          newline: true\n        }));\n        return;\n      }\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Series legend\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var color = data.getVisual('color'); // If color is a callback function\n\n        if (typeof color === 'function') {\n          // Use the first data\n          color = color(seriesModel.getDataParams(0));\n        } // Using rect symbol defaultly\n\n\n        var legendSymbolType = data.getVisual('legendSymbol') || 'roundRect';\n        var symbolType = data.getVisual('symbol');\n\n        var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, selectMode);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, api)).on('mouseover', curry(dispatchHighlightAction, seriesModel, null, api)).on('mouseout', curry(dispatchDownplayAction, seriesModel, null, api));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Data legend of pie, funnel\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendDataProvider) {\n            var data = seriesModel.legendDataProvider();\n            var idx = data.indexOfName(name);\n\n            if (idx < 0) {\n              return;\n            }\n\n            var color = data.getItemVisual(idx, 'color');\n            var legendSymbolType = 'roundRect';\n\n            var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, null, itemAlign, color, selectMode);\n\n            itemGroup.on('click', curry(dispatchSelectAction, name, api)) // FIXME Should not specify the series name\n            .on('mouseover', curry(dispatchHighlightAction, seriesModel, name, api)).on('mouseout', curry(dispatchDownplayAction, seriesModel, name, api));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n    }, this);\n  },\n  _createItem: function (name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, selectMode) {\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var inactiveColor = legendModel.get('inactiveColor');\n    var isSelected = legendModel.isSelected(name);\n    var itemGroup = new Group();\n    var textStyleModel = itemModel.getModel('textStyle');\n    var itemIcon = itemModel.get('icon');\n    var tooltipModel = itemModel.getModel('tooltip');\n    var legendGlobalTooltipModel = tooltipModel.parentModel; // Use user given icon first\n\n    legendSymbolType = itemIcon || legendSymbolType;\n    itemGroup.add(createSymbol(legendSymbolType, 0, 0, itemWidth, itemHeight, isSelected ? color : inactiveColor, true)); // Compose symbols\n    // PENDING\n\n    if (!itemIcon && symbolType // At least show one symbol, can't be all none\n    && (symbolType !== legendSymbolType || symbolType == 'none')) {\n      var size = itemHeight * 0.8;\n\n      if (symbolType === 'none') {\n        symbolType = 'circle';\n      } // Put symbol in the center\n\n\n      itemGroup.add(createSymbol(symbolType, (itemWidth - size) / 2, (itemHeight - size) / 2, size, size, isSelected ? color : inactiveColor));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (typeof formatter === 'string' && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (typeof formatter === 'function') {\n      content = formatter(name);\n    }\n\n    itemGroup.add(new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        textFill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        textAlign: textAlign,\n        textVerticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true,\n      tooltip: tooltipModel.get('show') ? zrUtil.extend({\n        content: name,\n        // Defaul formatter\n        formatter: legendGlobalTooltipModel.get('formatter', true) || function () {\n          return name;\n        },\n        formatterParams: {\n          componentType: 'legend',\n          legendIndex: legendModel.componentIndex,\n          name: name,\n          $vars: ['name']\n        }\n      }, tooltipModel.option) : null\n    });\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    graphic.setHoverStyle(itemGroup);\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  },\n\n  /**\n   * @protected\n   */\n  layoutInner: function (legendModel, itemAlign, maxSize) {\n    var contentGroup = this.getContentGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    contentGroup.attr('position', [-contentRect.x, -contentRect.y]);\n    return this.group.getBoundingRect();\n  }\n});\n\nfunction dispatchSelectAction(name, api) {\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: name\n  });\n}\n\nfunction dispatchHighlightAction(seriesModel, dataName, api) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    seriesModel.get('legendHoverLink') && api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesModel.name,\n      name: dataName\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesModel, dataName, api) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    seriesModel.get('legendHoverLink') && api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesModel.name,\n      name: dataName\n    });\n  }\n}\n\nmodule.exports = _default;","var LegendModel = require(\"./LegendModel\");\n\nvar _layout = require(\"../../util/layout\");\n\nvar mergeLayoutParam = _layout.mergeLayoutParam;\nvar getLayoutParams = _layout.getLayoutParams;\nvar ScrollableLegendModel = LegendModel.extend({\n  type: 'legend.scroll',\n\n  /**\n   * @param {number} scrollDataIndex\n   */\n  setScrollDataIndex: function (scrollDataIndex) {\n    this.option.scrollDataIndex = scrollDataIndex;\n  },\n  defaultOption: {\n    scrollDataIndex: 0,\n    pageButtonItemGap: 5,\n    pageButtonGap: null,\n    pageButtonPosition: 'end',\n    // 'start' or 'end'\n    pageFormatter: '{current}/{total}',\n    // If null/undefined, do not show page.\n    pageIcons: {\n      horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\n      vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\n    },\n    pageIconColor: '#2f4554',\n    pageIconInactiveColor: '#aaa',\n    pageIconSize: 15,\n    // Can be [10, 3], which represents [width, height]\n    pageTextStyle: {\n      color: '#333'\n    },\n    animationDurationUpdate: 800\n  },\n\n  /**\n   * @override\n   */\n  init: function (option, parentModel, ecModel, extraOpt) {\n    var inputPositionParams = getLayoutParams(option);\n    ScrollableLegendModel.superCall(this, 'init', option, parentModel, ecModel, extraOpt);\n    mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function (option, extraOpt) {\n    ScrollableLegendModel.superCall(this, 'mergeOption', option, extraOpt);\n    mergeAndNormalizeLayoutParams(this, this.option, option);\n  },\n  getOrient: function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  }\n}); // Do not `ignoreSize` to enable setting {left: 10, right: 10}.\n\nfunction mergeAndNormalizeLayoutParams(legendModel, target, raw) {\n  var orient = legendModel.getOrient();\n  var ignoreSize = [1, 1];\n  ignoreSize[orient.index] = 0;\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: ignoreSize\n  });\n}\n\nvar _default = ScrollableLegendModel;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar LegendView = require(\"./LegendView\");\n\n/**\n * Separate legend and scrollable legend to reduce package size.\n */\nvar Group = graphic.Group;\nvar WH = ['width', 'height'];\nvar XY = ['x', 'y'];\nvar ScrollableLegendView = LegendView.extend({\n  type: 'legend.scroll',\n  newlineDisabled: true,\n  init: function () {\n    ScrollableLegendView.superCall(this, 'init');\n    /**\n     * @private\n     * @type {number} For `scroll`.\n     */\n\n    this._currentIndex = 0;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this.group.add(this._containerGroup = new Group());\n\n    this._containerGroup.add(this.getContentGroup());\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n\n    this.group.add(this._controllerGroup = new Group());\n    /**\n     *\n     * @private\n     */\n\n    this._showController;\n  },\n\n  /**\n   * @override\n   */\n  resetInner: function () {\n    ScrollableLegendView.superCall(this, 'resetInner');\n\n    this._controllerGroup.removeAll();\n\n    this._containerGroup.removeClipPath();\n\n    this._containerGroup.__rectSize = null;\n  },\n\n  /**\n   * @override\n   */\n  renderInner: function (itemAlign, legendModel, ecModel, api) {\n    var me = this; // Render content items.\n\n    ScrollableLegendView.superCall(this, 'renderInner', itemAlign, legendModel, ecModel, api);\n    var controllerGroup = this._controllerGroup;\n    var pageIconSize = legendModel.get('pageIconSize', true);\n\n    if (!zrUtil.isArray(pageIconSize)) {\n      pageIconSize = [pageIconSize, pageIconSize];\n    }\n\n    createPageButton('pagePrev', 0);\n    var pageTextStyleModel = legendModel.getModel('pageTextStyle');\n    controllerGroup.add(new graphic.Text({\n      name: 'pageText',\n      style: {\n        textFill: pageTextStyleModel.getTextColor(),\n        font: pageTextStyleModel.getFont(),\n        textVerticalAlign: 'middle',\n        textAlign: 'center'\n      },\n      silent: true\n    }));\n    createPageButton('pageNext', 1);\n\n    function createPageButton(name, iconIdx) {\n      var pageDataIndexName = name + 'DataIndex';\n      var icon = graphic.createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\n        // Buttons will be created in each render, so we do not need\n        // to worry about avoiding using legendModel kept in scope.\n        onclick: zrUtil.bind(me._pageGo, me, pageDataIndexName, legendModel, api)\n      }, {\n        x: -pageIconSize[0] / 2,\n        y: -pageIconSize[1] / 2,\n        width: pageIconSize[0],\n        height: pageIconSize[1]\n      });\n      icon.name = name;\n      controllerGroup.add(icon);\n    }\n  },\n\n  /**\n   * @override\n   */\n  layoutInner: function (legendModel, itemAlign, maxSize) {\n    var contentGroup = this.getContentGroup();\n    var containerGroup = this._containerGroup;\n    var controllerGroup = this._controllerGroup;\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var hw = WH[1 - orientIdx];\n    var yx = XY[1 - orientIdx]; // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\n    layoutUtil.box( // Buttons in controller are layout always horizontally.\n    'horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\n    var contentRect = contentGroup.getBoundingRect();\n    var controllerRect = controllerGroup.getBoundingRect();\n    var showController = this._showController = contentRect[wh] > maxSize[wh];\n    var contentPos = [-contentRect.x, -contentRect.y]; // Remain contentPos when scroll animation perfroming.\n\n    contentPos[orientIdx] = contentGroup.position[orientIdx]; // Layout container group based on 0.\n\n    var containerPos = [0, 0];\n    var controllerPos = [-controllerRect.x, -controllerRect.y];\n    var pageButtonGap = zrUtil.retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true)); // Place containerGroup and controllerGroup and contentGroup.\n\n    if (showController) {\n      var pageButtonPosition = legendModel.get('pageButtonPosition', true); // controller is on the right / bottom.\n\n      if (pageButtonPosition === 'end') {\n        controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\n      } // controller is on the left / top.\n      else {\n          containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\n        }\n    } // Always align controller to content as 'middle'.\n\n\n    controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\n    contentGroup.attr('position', contentPos);\n    containerGroup.attr('position', containerPos);\n    controllerGroup.attr('position', controllerPos); // Calculate `mainRect` and set `clipPath`.\n    // mainRect should not be calculated by `this.group.getBoundingRect()`\n    // for sake of the overflow.\n\n    var mainRect = this.group.getBoundingRect();\n    var mainRect = {\n      x: 0,\n      y: 0\n    }; // Consider content may be overflow (should be clipped).\n\n    mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\n    mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]); // `containerRect[yx] + containerPos[1 - orientIdx]` is 0.\n\n    mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\n    containerGroup.__rectSize = maxSize[wh];\n\n    if (showController) {\n      var clipShape = {\n        x: 0,\n        y: 0\n      };\n      clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\n      clipShape[hw] = mainRect[hw];\n      containerGroup.setClipPath(new graphic.Rect({\n        shape: clipShape\n      })); // Consider content may be larger than container, container rect\n      // can not be obtained from `containerGroup.getBoundingRect()`.\n\n      containerGroup.__rectSize = clipShape[wh];\n    } else {\n      // Do not remove or ignore controller. Keep them set as place holders.\n      controllerGroup.eachChild(function (child) {\n        child.attr({\n          invisible: true,\n          silent: true\n        });\n      });\n    } // Content translate animation.\n\n\n    var pageInfo = this._getPageInfo(legendModel);\n\n    pageInfo.pageIndex != null && graphic.updateProps(contentGroup, {\n      position: pageInfo.contentPosition\n    }, // When switch from \"show controller\" to \"not show controller\", view should be\n    // updated immediately without animation, otherwise causes weird efffect.\n    showController ? legendModel : false);\n\n    this._updatePageInfoView(legendModel, pageInfo);\n\n    return mainRect;\n  },\n  _pageGo: function (to, legendModel, api) {\n    var scrollDataIndex = this._getPageInfo(legendModel)[to];\n\n    scrollDataIndex != null && api.dispatchAction({\n      type: 'legendScroll',\n      scrollDataIndex: scrollDataIndex,\n      legendId: legendModel.id\n    });\n  },\n  _updatePageInfoView: function (legendModel, pageInfo) {\n    var controllerGroup = this._controllerGroup;\n    zrUtil.each(['pagePrev', 'pageNext'], function (name) {\n      var canJump = pageInfo[name + 'DataIndex'] != null;\n      var icon = controllerGroup.childOfName(name);\n\n      if (icon) {\n        icon.setStyle('fill', canJump ? legendModel.get('pageIconColor', true) : legendModel.get('pageIconInactiveColor', true));\n        icon.cursor = canJump ? 'pointer' : 'default';\n      }\n    });\n    var pageText = controllerGroup.childOfName('pageText');\n    var pageFormatter = legendModel.get('pageFormatter');\n    var pageIndex = pageInfo.pageIndex;\n    var current = pageIndex != null ? pageIndex + 1 : 0;\n    var total = pageInfo.pageCount;\n    pageText && pageFormatter && pageText.setStyle('text', zrUtil.isString(pageFormatter) ? pageFormatter.replace('{current}', current).replace('{total}', total) : pageFormatter({\n      current: current,\n      total: total\n    }));\n  },\n\n  /**\n   * @param {module:echarts/model/Model} legendModel\n   * @return {Object} {\n   *  contentPosition: Array.<number>, null when data item not found.\n   *  pageIndex: number, null when data item not found.\n   *  pageCount: number, always be a number, can be 0.\n   *  pagePrevDataIndex: number, null when no next page.\n   *  pageNextDataIndex: number, null when no previous page.\n   * }\n   */\n  _getPageInfo: function (legendModel) {\n    // Align left or top by the current dataIndex.\n    var currDataIndex = legendModel.get('scrollDataIndex', true);\n    var contentGroup = this.getContentGroup();\n    var contentRect = contentGroup.getBoundingRect();\n    var containerRectSize = this._containerGroup.__rectSize;\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var hw = WH[1 - orientIdx];\n    var xy = XY[orientIdx];\n    var contentPos = contentGroup.position.slice();\n    var pageIndex;\n    var pagePrevDataIndex;\n    var pageNextDataIndex;\n    var targetItemGroup;\n\n    if (this._showController) {\n      contentGroup.eachChild(function (child) {\n        if (child.__legendDataIndex === currDataIndex) {\n          targetItemGroup = child;\n        }\n      });\n    } else {\n      targetItemGroup = contentGroup.childAt(0);\n    }\n\n    var pageCount = containerRectSize ? Math.ceil(contentRect[wh] / containerRectSize) : 0;\n\n    if (targetItemGroup) {\n      var itemRect = targetItemGroup.getBoundingRect();\n      var itemLoc = targetItemGroup.position[orientIdx] + itemRect[xy];\n      contentPos[orientIdx] = -itemLoc - contentRect[xy];\n      pageIndex = Math.floor(pageCount * (itemLoc + itemRect[xy] + containerRectSize / 2) / contentRect[wh]);\n      pageIndex = contentRect[wh] && pageCount ? Math.max(0, Math.min(pageCount - 1, pageIndex)) : -1;\n      var winRect = {\n        x: 0,\n        y: 0\n      };\n      winRect[wh] = containerRectSize;\n      winRect[hw] = contentRect[hw];\n      winRect[xy] = -contentPos[orientIdx] - contentRect[xy];\n      var startIdx;\n      var children = contentGroup.children();\n      contentGroup.eachChild(function (child, index) {\n        var itemRect = getItemRect(child);\n\n        if (itemRect.intersect(winRect)) {\n          startIdx == null && (startIdx = index); // It is user-friendly that the last item shown in the\n          // current window is shown at the begining of next window.\n\n          pageNextDataIndex = child.__legendDataIndex;\n        } // If the last item is shown entirely, no next page.\n\n\n        if (index === children.length - 1 && itemRect[xy] + itemRect[wh] <= winRect[xy] + winRect[wh]) {\n          pageNextDataIndex = null;\n        }\n      }); // Always align based on the left/top most item, so the left/top most\n      // item in the previous window is needed to be found here.\n\n      if (startIdx != null) {\n        var startItem = children[startIdx];\n        var startRect = getItemRect(startItem);\n        winRect[xy] = startRect[xy] + startRect[wh] - winRect[wh]; // If the first item is shown entirely, no previous page.\n\n        if (startIdx <= 0 && startRect[xy] >= winRect[xy]) {\n          pagePrevDataIndex = null;\n        } else {\n          while (startIdx > 0 && getItemRect(children[startIdx - 1]).intersect(winRect)) {\n            startIdx--;\n          }\n\n          pagePrevDataIndex = children[startIdx].__legendDataIndex;\n        }\n      }\n    }\n\n    return {\n      contentPosition: contentPos,\n      pageIndex: pageIndex,\n      pageCount: pageCount,\n      pagePrevDataIndex: pagePrevDataIndex,\n      pageNextDataIndex: pageNextDataIndex\n    };\n\n    function getItemRect(el) {\n      var itemRect = el.getBoundingRect().clone();\n      itemRect[xy] += el.position[orientIdx];\n      return itemRect;\n    }\n  }\n});\nvar _default = ScrollableLegendView;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var selectedMap = {};\n  var isToggleSelect = methodName === 'toggleSelected';\n  var isSelected; // Update all legend components\n\n  ecModel.eachComponent('legend', function (legendModel) {\n    if (isToggleSelect && isSelected != null) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n    } else {\n      legendModel[methodName](payload.name);\n      isSelected = legendModel.isSelected(payload.name);\n    }\n\n    var legendData = legendModel.getData();\n    zrUtil.each(legendData, function (model) {\n      var name = model.get('name'); // Wrap element\n\n      if (name === '\\n' || name === '') {\n        return;\n      }\n\n      var isItemSelected = legendModel.isSelected(name);\n\n      if (selectedMap.hasOwnProperty(name)) {\n        // Unselected if any legend is unselected\n        selectedMap[name] = selectedMap[name] && isItemSelected;\n      } else {\n        selectedMap[name] = isItemSelected;\n      }\n    });\n  }); // Return the event explicitly\n\n  return {\n    name: payload.name,\n    selected: selectedMap\n  };\n}\n/**\n * @event legendToggleSelect\n * @type {Object}\n * @property {string} type 'legendToggleSelect'\n * @property {string} [from]\n * @property {string} name Series name or data item name\n */\n\n\necharts.registerAction('legendToggleSelect', 'legendselectchanged', zrUtil.curry(legendSelectActionHandler, 'toggleSelected'));\n/**\n * @event legendSelect\n * @type {Object}\n * @property {string} type 'legendSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendSelect', 'legendselected', zrUtil.curry(legendSelectActionHandler, 'select'));\n/**\n * @event legendUnSelect\n * @type {Object}\n * @property {string} type 'legendUnSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendUnSelect', 'legendunselected', zrUtil.curry(legendSelectActionHandler, 'unSelect'));","function _default(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n}\n\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\n/**\n * @event legendScroll\n * @type {Object}\n * @property {string} type 'legendScroll'\n * @property {string} scrollDataIndex\n */\necharts.registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\n  var scrollDataIndex = payload.scrollDataIndex;\n  scrollDataIndex != null && ecModel.eachComponent({\n    mainType: 'legend',\n    subType: 'scroll',\n    query: payload\n  }, function (legendModel) {\n    legendModel.setScrollDataIndex(scrollDataIndex);\n  });\n});","var echarts = require(\"../echarts\");\n\nrequire(\"./marker/MarkAreaModel\");\n\nrequire(\"./marker/MarkAreaView\");\n\necharts.registerPreprocessor(function (opt) {\n  // Make sure markArea component is enabled\n  opt.markArea = opt.markArea || {};\n});","var echarts = require(\"../echarts\");\n\nrequire(\"./marker/MarkLineModel\");\n\nrequire(\"./marker/MarkLineView\");\n\necharts.registerPreprocessor(function (opt) {\n  // Make sure markLine component is enabled\n  opt.markLine = opt.markLine || {};\n});","var echarts = require(\"../echarts\");\n\nrequire(\"./marker/MarkPointModel\");\n\nrequire(\"./marker/MarkPointView\");\n\n// HINT Markpoint can't be used too much\necharts.registerPreprocessor(function (opt) {\n  // Make sure markPoint component is enabled\n  opt.markPoint = opt.markPoint || {};\n});","var MarkerModel = require(\"./MarkerModel\");\n\nvar _default = MarkerModel.extend({\n  type: 'markArea',\n  defaultOption: {\n    zlevel: 0,\n    // PENDING\n    z: 1,\n    tooltip: {\n      trigger: 'item'\n    },\n    // markArea should fixed on the coordinate system\n    animation: false,\n    label: {\n      normal: {\n        show: true,\n        position: 'top'\n      },\n      emphasis: {\n        show: true,\n        position: 'top'\n      }\n    },\n    itemStyle: {\n      normal: {\n        // color and borderColor default to use color from series\n        // color: 'auto'\n        // borderColor: 'auto'\n        borderWidth: 0\n      }\n    }\n  }\n});\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar colorUtil = require(\"zrender/lib/tool/color\");\n\nvar List = require(\"../../data/List\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar markerHelper = require(\"./markerHelper\");\n\nvar MarkerView = require(\"./MarkerView\");\n\n// TODO Better on polar\nvar markAreaTransform = function (seriesModel, coordSys, maModel, item) {\n  var lt = markerHelper.dataTransform(seriesModel, item[0]);\n  var rb = markerHelper.dataTransform(seriesModel, item[1]);\n  var retrieve = zrUtil.retrieve; // FIXME make sure lt is less than rb\n\n  var ltCoord = lt.coord;\n  var rbCoord = rb.coord;\n  ltCoord[0] = retrieve(ltCoord[0], -Infinity);\n  ltCoord[1] = retrieve(ltCoord[1], -Infinity);\n  rbCoord[0] = retrieve(rbCoord[0], Infinity);\n  rbCoord[1] = retrieve(rbCoord[1], Infinity); // Merge option into one\n\n  var result = zrUtil.mergeAll([{}, lt, rb]);\n  result.coord = [lt.coord, rb.coord];\n  result.x0 = lt.x;\n  result.y0 = lt.y;\n  result.x1 = rb.x;\n  result.y1 = rb.y;\n  return result;\n};\n\nfunction isInifinity(val) {\n  return !isNaN(val) && !isFinite(val);\n} // If a markArea has one dim\n\n\nfunction ifMarkLineHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  return isInifinity(fromCoord[otherDimIndex]) && isInifinity(toCoord[otherDimIndex]);\n}\n\nfunction markAreaFilter(coordSys, item) {\n  var fromCoord = item.coord[0];\n  var toCoord = item.coord[1];\n\n  if (coordSys.type === 'cartesian2d') {\n    // In case\n    // {\n    //  markArea: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n    if (fromCoord && toCoord && (ifMarkLineHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkLineHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n  }\n\n  return markerHelper.dataFilter(coordSys, {\n    coord: fromCoord,\n    x: item.x0,\n    y: item.y0\n  }) || markerHelper.dataFilter(coordSys, {\n    coord: toCoord,\n    x: item.x1,\n    y: item.y1\n  });\n} // dims can be ['x0', 'y0'], ['x1', 'y1'], ['x0', 'y1'], ['x1', 'y0']\n\n\nfunction getSingleMarkerEndPoint(data, idx, dims, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get(dims[0]), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get(dims[1]), api.getHeight());\n\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPoisition\n      point = seriesModel.getMarkerPosition(data.getValues(dims, idx));\n    } else {\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      point = coordSys.dataToPoint([x, y], true);\n    }\n\n    if (coordSys.type === 'cartesian2d') {\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n\n      if (isInifinity(x)) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[dims[0] === 'x0' ? 0 : 1]);\n      } else if (isInifinity(y)) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[dims[1] === 'y0' ? 0 : 1]);\n      }\n    } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n\n  return point;\n}\n\nvar dimPermutations = [['x0', 'y0'], ['x1', 'y0'], ['x1', 'y1'], ['x0', 'y1']];\nMarkerView.extend({\n  type: 'markArea',\n  updateLayout: function (markAreaModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var maModel = seriesModel.markAreaModel;\n\n      if (maModel) {\n        var areaData = maModel.getData();\n        areaData.each(function (idx) {\n          var points = zrUtil.map(dimPermutations, function (dim) {\n            return getSingleMarkerEndPoint(areaData, idx, dim, seriesModel, api);\n          }); // Layout\n\n          areaData.setItemLayout(idx, points);\n          var el = areaData.getItemGraphicEl(idx);\n          el.setShape('points', points);\n        });\n      }\n    }, this);\n  },\n  renderSeries: function (seriesModel, maModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesName = seriesModel.name;\n    var seriesData = seriesModel.getData();\n    var areaGroupMap = this.markerGroupMap;\n    var polygonGroup = areaGroupMap.get(seriesName) || areaGroupMap.set(seriesName, {\n      group: new graphic.Group()\n    });\n    this.group.add(polygonGroup.group);\n    polygonGroup.__keep = true;\n    var areaData = createList(coordSys, seriesModel, maModel); // Line data for tooltip and formatter\n\n    maModel.setData(areaData); // Update visual and layout of line\n\n    areaData.each(function (idx) {\n      // Layout\n      areaData.setItemLayout(idx, zrUtil.map(dimPermutations, function (dim) {\n        return getSingleMarkerEndPoint(areaData, idx, dim, seriesModel, api);\n      })); // Visual\n\n      areaData.setItemVisual(idx, {\n        color: seriesData.getVisual('color')\n      });\n    });\n    areaData.diff(polygonGroup.__data).add(function (idx) {\n      var polygon = new graphic.Polygon({\n        shape: {\n          points: areaData.getItemLayout(idx)\n        }\n      });\n      areaData.setItemGraphicEl(idx, polygon);\n      polygonGroup.group.add(polygon);\n    }).update(function (newIdx, oldIdx) {\n      var polygon = polygonGroup.__data.getItemGraphicEl(oldIdx);\n\n      graphic.updateProps(polygon, {\n        shape: {\n          points: areaData.getItemLayout(newIdx)\n        }\n      }, maModel, newIdx);\n      polygonGroup.group.add(polygon);\n      areaData.setItemGraphicEl(newIdx, polygon);\n    }).remove(function (idx) {\n      var polygon = polygonGroup.__data.getItemGraphicEl(idx);\n\n      polygonGroup.group.remove(polygon);\n    }).execute();\n    areaData.eachItemGraphicEl(function (polygon, idx) {\n      var itemModel = areaData.getItemModel(idx);\n      var labelModel = itemModel.getModel('label.normal');\n      var labelHoverModel = itemModel.getModel('label.emphasis');\n      var color = areaData.getItemVisual(idx, 'color');\n      polygon.useStyle(zrUtil.defaults(itemModel.getModel('itemStyle.normal').getItemStyle(), {\n        fill: colorUtil.modifyAlpha(color, 0.4),\n        stroke: color\n      }));\n      polygon.hoverStyle = itemModel.getModel('itemStyle.emphasis').getItemStyle();\n      graphic.setLabelStyle(polygon.style, polygon.hoverStyle, labelModel, labelHoverModel, {\n        labelFetcher: maModel,\n        labelDataIndex: idx,\n        defaultText: areaData.getName(idx) || '',\n        isRectText: true,\n        autoColor: color\n      });\n      graphic.setHoverStyle(polygon, {});\n      polygon.dataModel = maModel;\n    });\n    polygonGroup.__data = areaData;\n    polygonGroup.group.silent = maModel.get('silent') || seriesModel.get('silent');\n  }\n});\n/**\n * @inner\n * @param {module:echarts/coord/*} coordSys\n * @param {module:echarts/model/Series} seriesModel\n * @param {module:echarts/model/Model} mpModel\n */\n\nfunction createList(coordSys, seriesModel, maModel) {\n  var coordDimsInfos;\n  var areaData;\n  var dims = ['x0', 'y0', 'x1', 'y1'];\n\n  if (coordSys) {\n    coordDimsInfos = zrUtil.map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.coordDimToDataDim(coordDim)[0]) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      info.name = coordDim;\n      return info;\n    });\n    areaData = new List(zrUtil.map(dims, function (dim, idx) {\n      return {\n        name: dim,\n        type: coordDimsInfos[idx % 2].type\n      };\n    }), maModel);\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n    areaData = new List(coordDimsInfos, maModel);\n  }\n\n  var optData = zrUtil.map(maModel.get('data'), zrUtil.curry(markAreaTransform, seriesModel, coordSys, maModel));\n\n  if (coordSys) {\n    optData = zrUtil.filter(optData, zrUtil.curry(markAreaFilter, coordSys));\n  }\n\n  var dimValueGetter = coordSys ? function (item, dimName, dataIndex, dimIndex) {\n    return item.coord[Math.floor(dimIndex / 2)][dimIndex % 2];\n  } : function (item) {\n    return item.value;\n  };\n  areaData.initData(optData, null, dimValueGetter);\n  areaData.hasItemOption = true;\n  return areaData;\n}","var MarkerModel = require(\"./MarkerModel\");\n\nvar _default = MarkerModel.extend({\n  type: 'markLine',\n  defaultOption: {\n    zlevel: 0,\n    z: 5,\n    symbol: ['circle', 'arrow'],\n    symbolSize: [8, 16],\n    //symbolRotate: 0,\n    precision: 2,\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      normal: {\n        show: true,\n        position: 'end'\n      },\n      emphasis: {\n        show: true\n      }\n    },\n    lineStyle: {\n      normal: {\n        type: 'dashed'\n      },\n      emphasis: {\n        width: 3\n      }\n    },\n    animationEasing: 'linear'\n  }\n});\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar List = require(\"../../data/List\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar markerHelper = require(\"./markerHelper\");\n\nvar LineDraw = require(\"../../chart/helper/LineDraw\");\n\nvar MarkerView = require(\"./MarkerView\");\n\nvar markLineTransform = function (seriesModel, coordSys, mlModel, item) {\n  var data = seriesModel.getData(); // Special type markLine like 'min', 'max', 'average'\n\n  var mlType = item.type;\n\n  if (!zrUtil.isArray(item) && (mlType === 'min' || mlType === 'max' || mlType === 'average' // In case\n  // data: [{\n  //   yAxis: 10\n  // }]\n  || item.xAxis != null || item.yAxis != null)) {\n    var valueAxis;\n    var valueDataDim;\n    var value;\n\n    if (item.yAxis != null || item.xAxis != null) {\n      valueDataDim = item.yAxis != null ? 'y' : 'x';\n      valueAxis = coordSys.getAxis(valueDataDim);\n      value = zrUtil.retrieve(item.yAxis, item.xAxis);\n    } else {\n      var axisInfo = markerHelper.getAxisInfo(item, data, coordSys, seriesModel);\n      valueDataDim = axisInfo.valueDataDim;\n      valueAxis = axisInfo.valueAxis;\n      value = markerHelper.numCalculate(data, valueDataDim, mlType);\n    }\n\n    var valueIndex = valueDataDim === 'x' ? 0 : 1;\n    var baseIndex = 1 - valueIndex;\n    var mlFrom = zrUtil.clone(item);\n    var mlTo = {};\n    mlFrom.type = null;\n    mlFrom.coord = [];\n    mlTo.coord = [];\n    mlFrom.coord[baseIndex] = -Infinity;\n    mlTo.coord[baseIndex] = Infinity;\n    var precision = mlModel.get('precision');\n\n    if (precision >= 0 && typeof value === 'number') {\n      value = +value.toFixed(Math.min(precision, 20));\n    }\n\n    mlFrom.coord[valueIndex] = mlTo.coord[valueIndex] = value;\n    item = [mlFrom, mlTo, {\n      // Extra option for tooltip and label\n      type: mlType,\n      valueIndex: item.valueIndex,\n      // Force to use the value of calculated value.\n      value: value\n    }];\n  }\n\n  item = [markerHelper.dataTransform(seriesModel, item[0]), markerHelper.dataTransform(seriesModel, item[1]), zrUtil.extend({}, item[2])]; // Avoid line data type is extended by from(to) data type\n\n  item[2].type = item[2].type || ''; // Merge from option and to option into line option\n\n  zrUtil.merge(item[2], item[0]);\n  zrUtil.merge(item[2], item[1]);\n  return item;\n};\n\nfunction isInifinity(val) {\n  return !isNaN(val) && !isFinite(val);\n} // If a markLine has one dim\n\n\nfunction ifMarkLineHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  var dimName = coordSys.dimensions[dimIndex];\n  return isInifinity(fromCoord[otherDimIndex]) && isInifinity(toCoord[otherDimIndex]) && fromCoord[dimIndex] === toCoord[dimIndex] && coordSys.getAxis(dimName).containData(fromCoord[dimIndex]);\n}\n\nfunction markLineFilter(coordSys, item) {\n  if (coordSys.type === 'cartesian2d') {\n    var fromCoord = item[0].coord;\n    var toCoord = item[1].coord; // In case\n    // {\n    //  markLine: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n\n    if (fromCoord && toCoord && (ifMarkLineHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkLineHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n  }\n\n  return markerHelper.dataFilter(coordSys, item[0]) && markerHelper.dataFilter(coordSys, item[1]);\n}\n\nfunction updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPoisition\n      point = seriesModel.getMarkerPosition(data.getValues(data.dimensions, idx));\n    } else {\n      var dims = coordSys.dimensions;\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      point = coordSys.dataToPoint([x, y]);\n    } // Expand line to the edge of grid if value on one axis is Inifnity\n    // In case\n    //  markLine: {\n    //    data: [{\n    //      yAxis: 2\n    //      // or\n    //      type: 'average'\n    //    }]\n    //  }\n\n\n    if (coordSys.type === 'cartesian2d') {\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var dims = coordSys.dimensions;\n\n      if (isInifinity(data.get(dims[0], idx))) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[isFrom ? 0 : 1]);\n      } else if (isInifinity(data.get(dims[1], idx))) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[isFrom ? 0 : 1]);\n      }\n    } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n\n  data.setItemLayout(idx, point);\n}\n\nvar _default = MarkerView.extend({\n  type: 'markLine',\n  updateLayout: function (markLineModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mlModel = seriesModel.markLineModel;\n\n      if (mlModel) {\n        var mlData = mlModel.getData();\n        var fromData = mlModel.__from;\n        var toData = mlModel.__to; // Update visual and layout of from symbol and to symbol\n\n        fromData.each(function (idx) {\n          updateSingleMarkerEndLayout(fromData, idx, true, seriesModel, api);\n          updateSingleMarkerEndLayout(toData, idx, false, seriesModel, api);\n        }); // Update layout of line\n\n        mlData.each(function (idx) {\n          mlData.setItemLayout(idx, [fromData.getItemLayout(idx), toData.getItemLayout(idx)]);\n        });\n        this.markerGroupMap.get(seriesModel.id).updateLayout();\n      }\n    }, this);\n  },\n  renderSeries: function (seriesModel, mlModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var lineDrawMap = this.markerGroupMap;\n    var lineDraw = lineDrawMap.get(seriesId) || lineDrawMap.set(seriesId, new LineDraw());\n    this.group.add(lineDraw.group);\n    var mlData = createList(coordSys, seriesModel, mlModel);\n    var fromData = mlData.from;\n    var toData = mlData.to;\n    var lineData = mlData.line;\n    mlModel.__from = fromData;\n    mlModel.__to = toData; // Line data for tooltip and formatter\n\n    mlModel.setData(lineData);\n    var symbolType = mlModel.get('symbol');\n    var symbolSize = mlModel.get('symbolSize');\n\n    if (!zrUtil.isArray(symbolType)) {\n      symbolType = [symbolType, symbolType];\n    }\n\n    if (typeof symbolSize === 'number') {\n      symbolSize = [symbolSize, symbolSize];\n    } // Update visual and layout of from symbol and to symbol\n\n\n    mlData.from.each(function (idx) {\n      updateDataVisualAndLayout(fromData, idx, true);\n      updateDataVisualAndLayout(toData, idx, false);\n    }); // Update visual and layout of line\n\n    lineData.each(function (idx) {\n      var lineColor = lineData.getItemModel(idx).get('lineStyle.normal.color');\n      lineData.setItemVisual(idx, {\n        color: lineColor || fromData.getItemVisual(idx, 'color')\n      });\n      lineData.setItemLayout(idx, [fromData.getItemLayout(idx), toData.getItemLayout(idx)]);\n      lineData.setItemVisual(idx, {\n        'fromSymbolSize': fromData.getItemVisual(idx, 'symbolSize'),\n        'fromSymbol': fromData.getItemVisual(idx, 'symbol'),\n        'toSymbolSize': toData.getItemVisual(idx, 'symbolSize'),\n        'toSymbol': toData.getItemVisual(idx, 'symbol')\n      });\n    });\n    lineDraw.updateData(lineData); // Set host model for tooltip\n    // FIXME\n\n    mlData.line.eachItemGraphicEl(function (el, idx) {\n      el.traverse(function (child) {\n        child.dataModel = mlModel;\n      });\n    });\n\n    function updateDataVisualAndLayout(data, idx, isFrom) {\n      var itemModel = data.getItemModel(idx);\n      updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api);\n      data.setItemVisual(idx, {\n        symbolSize: itemModel.get('symbolSize') || symbolSize[isFrom ? 0 : 1],\n        symbol: itemModel.get('symbol', true) || symbolType[isFrom ? 0 : 1],\n        color: itemModel.get('itemStyle.normal.color') || seriesData.getVisual('color')\n      });\n    }\n\n    lineDraw.__keep = true;\n    lineDraw.group.silent = mlModel.get('silent') || seriesModel.get('silent');\n  }\n});\n/**\n * @inner\n * @param {module:echarts/coord/*} coordSys\n * @param {module:echarts/model/Series} seriesModel\n * @param {module:echarts/model/Model} mpModel\n */\n\n\nfunction createList(coordSys, seriesModel, mlModel) {\n  var coordDimsInfos;\n\n  if (coordSys) {\n    coordDimsInfos = zrUtil.map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.coordDimToDataDim(coordDim)[0]) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      info.name = coordDim;\n      return info;\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n\n  var fromData = new List(coordDimsInfos, mlModel);\n  var toData = new List(coordDimsInfos, mlModel); // No dimensions\n\n  var lineData = new List([], mlModel);\n  var optData = zrUtil.map(mlModel.get('data'), zrUtil.curry(markLineTransform, seriesModel, coordSys, mlModel));\n\n  if (coordSys) {\n    optData = zrUtil.filter(optData, zrUtil.curry(markLineFilter, coordSys));\n  }\n\n  var dimValueGetter = coordSys ? markerHelper.dimValueGetter : function (item) {\n    return item.value;\n  };\n  fromData.initData(zrUtil.map(optData, function (item) {\n    return item[0];\n  }), null, dimValueGetter);\n  toData.initData(zrUtil.map(optData, function (item) {\n    return item[1];\n  }), null, dimValueGetter);\n  lineData.initData(zrUtil.map(optData, function (item) {\n    return item[2];\n  }));\n  lineData.hasItemOption = true;\n  return {\n    from: fromData,\n    to: toData,\n    line: lineData\n  };\n}\n\nmodule.exports = _default;","var MarkerModel = require(\"./MarkerModel\");\n\nvar _default = MarkerModel.extend({\n  type: 'markPoint',\n  defaultOption: {\n    zlevel: 0,\n    z: 5,\n    symbol: 'pin',\n    symbolSize: 50,\n    //symbolRotate: 0,\n    //symbolOffset: [0, 0]\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      normal: {\n        show: true,\n        position: 'inside'\n      },\n      emphasis: {\n        show: true\n      }\n    },\n    itemStyle: {\n      normal: {\n        borderWidth: 2\n      }\n    }\n  }\n});\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar SymbolDraw = require(\"../../chart/helper/SymbolDraw\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar List = require(\"../../data/List\");\n\nvar markerHelper = require(\"./markerHelper\");\n\nvar MarkerView = require(\"./MarkerView\");\n\nfunction updateMarkerLayout(mpData, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  mpData.each(function (idx) {\n    var itemModel = mpData.getItemModel(idx);\n    var point;\n    var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n    var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n\n    if (!isNaN(xPx) && !isNaN(yPx)) {\n      point = [xPx, yPx];\n    } // Chart like bar may have there own marker positioning logic\n    else if (seriesModel.getMarkerPosition) {\n        // Use the getMarkerPoisition\n        point = seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions, idx));\n      } else if (coordSys) {\n        var x = mpData.get(coordSys.dimensions[0], idx);\n        var y = mpData.get(coordSys.dimensions[1], idx);\n        point = coordSys.dataToPoint([x, y]);\n      } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n\n    mpData.setItemLayout(idx, point);\n  });\n}\n\nvar _default = MarkerView.extend({\n  type: 'markPoint',\n  updateLayout: function (markPointModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mpModel = seriesModel.markPointModel;\n\n      if (mpModel) {\n        updateMarkerLayout(mpModel.getData(), seriesModel, api);\n        this.markerGroupMap.get(seriesModel.id).updateLayout(mpModel);\n      }\n    }, this);\n  },\n  renderSeries: function (seriesModel, mpModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var symbolDrawMap = this.markerGroupMap;\n    var symbolDraw = symbolDrawMap.get(seriesId) || symbolDrawMap.set(seriesId, new SymbolDraw());\n    var mpData = createList(coordSys, seriesModel, mpModel); // FIXME\n\n    mpModel.setData(mpData);\n    updateMarkerLayout(mpModel.getData(), seriesModel, api);\n    mpData.each(function (idx) {\n      var itemModel = mpData.getItemModel(idx);\n      var symbolSize = itemModel.getShallow('symbolSize');\n\n      if (typeof symbolSize === 'function') {\n        // FIXME  ECharts 2.x2.x \n        symbolSize = symbolSize(mpModel.getRawValue(idx), mpModel.getDataParams(idx));\n      }\n\n      mpData.setItemVisual(idx, {\n        symbolSize: symbolSize,\n        color: itemModel.get('itemStyle.normal.color') || seriesData.getVisual('color'),\n        symbol: itemModel.getShallow('symbol')\n      });\n    }); // TODO Text are wrong\n\n    symbolDraw.updateData(mpData);\n    this.group.add(symbolDraw.group); // Set host model for tooltip\n    // FIXME\n\n    mpData.eachItemGraphicEl(function (el) {\n      el.traverse(function (child) {\n        child.dataModel = mpModel;\n      });\n    });\n    symbolDraw.__keep = true;\n    symbolDraw.group.silent = mpModel.get('silent') || seriesModel.get('silent');\n  }\n});\n/**\n * @inner\n * @param {module:echarts/coord/*} [coordSys]\n * @param {module:echarts/model/Series} seriesModel\n * @param {module:echarts/model/Model} mpModel\n */\n\n\nfunction createList(coordSys, seriesModel, mpModel) {\n  var coordDimsInfos;\n\n  if (coordSys) {\n    coordDimsInfos = zrUtil.map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.coordDimToDataDim(coordDim)[0]) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      info.name = coordDim;\n      return info;\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n\n  var mpData = new List(coordDimsInfos, mpModel);\n  var dataOpt = zrUtil.map(mpModel.get('data'), zrUtil.curry(markerHelper.dataTransform, seriesModel));\n\n  if (coordSys) {\n    dataOpt = zrUtil.filter(dataOpt, zrUtil.curry(markerHelper.dataFilter, coordSys));\n  }\n\n  mpData.initData(dataOpt, null, coordSys ? markerHelper.dimValueGetter : function (item) {\n    return item.value;\n  });\n  return mpData;\n}\n\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar addCommas = formatUtil.addCommas;\nvar encodeHTML = formatUtil.encodeHTML;\n\nfunction fillLabel(opt) {\n  modelUtil.defaultEmphasis(opt.label, ['show']);\n}\n\nvar MarkerModel = echarts.extendComponentModel({\n  type: 'marker',\n  dependencies: ['series', 'grid', 'polar', 'geo'],\n\n  /**\n   * @overrite\n   */\n  init: function (option, parentModel, ecModel, extraOpt) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    this.mergeOption(option, ecModel, extraOpt.createdBySelf, true);\n  },\n\n  /**\n   * @return {boolean}\n   */\n  isAnimationEnabled: function () {\n    if (env.node) {\n      return false;\n    }\n\n    var hostSeries = this.__hostSeries;\n    return this.getShallow('animation') && hostSeries && hostSeries.isAnimationEnabled();\n  },\n  mergeOption: function (newOpt, ecModel, createdBySelf, isInit) {\n    var MarkerModel = this.constructor;\n    var modelPropName = this.mainType + 'Model';\n\n    if (!createdBySelf) {\n      ecModel.eachSeries(function (seriesModel) {\n        var markerOpt = seriesModel.get(this.mainType);\n        var markerModel = seriesModel[modelPropName];\n\n        if (!markerOpt || !markerOpt.data) {\n          seriesModel[modelPropName] = null;\n          return;\n        }\n\n        if (!markerModel) {\n          if (isInit) {\n            // Default label emphasis `position` and `show`\n            fillLabel(markerOpt);\n          }\n\n          zrUtil.each(markerOpt.data, function (item) {\n            // FIXME Overwrite fillLabel method ?\n            if (item instanceof Array) {\n              fillLabel(item[0]);\n              fillLabel(item[1]);\n            } else {\n              fillLabel(item);\n            }\n          });\n          markerModel = new MarkerModel(markerOpt, this, ecModel);\n          zrUtil.extend(markerModel, {\n            mainType: this.mainType,\n            // Use the same series index and name\n            seriesIndex: seriesModel.seriesIndex,\n            name: seriesModel.name,\n            createdBySelf: true\n          });\n          markerModel.__hostSeries = seriesModel;\n        } else {\n          markerModel.mergeOption(markerOpt, ecModel, true);\n        }\n\n        seriesModel[modelPropName] = markerModel;\n      }, this);\n    }\n  },\n  formatTooltip: function (dataIndex) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var formattedValue = zrUtil.isArray(value) ? zrUtil.map(value, addCommas).join(', ') : addCommas(value);\n    var name = data.getName(dataIndex);\n    var html = encodeHTML(this.name);\n\n    if (value != null || name) {\n      html += '<br />';\n    }\n\n    if (name) {\n      html += encodeHTML(name);\n\n      if (value != null) {\n        html += ' : ';\n      }\n    }\n\n    if (value != null) {\n      html += encodeHTML(formattedValue);\n    }\n\n    return html;\n  },\n  getData: function () {\n    return this._data;\n  },\n  setData: function (data) {\n    this._data = data;\n  }\n});\nzrUtil.mixin(MarkerModel, modelUtil.dataFormatMixin);\nvar _default = MarkerModel;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _default = echarts.extendComponentView({\n  type: 'marker',\n  init: function () {\n    /**\n     * Markline grouped by series\n     * @private\n     * @type {module:zrender/core/util.HashMap}\n     */\n    this.markerGroupMap = zrUtil.createHashMap();\n  },\n  render: function (markerModel, ecModel, api) {\n    var markerGroupMap = this.markerGroupMap;\n    markerGroupMap.each(function (item) {\n      item.__keep = false;\n    });\n    var markerModelKey = this.type + 'Model';\n    ecModel.eachSeries(function (seriesModel) {\n      var markerModel = seriesModel[markerModelKey];\n      markerModel && this.renderSeries(seriesModel, markerModel, ecModel, api);\n    }, this);\n    markerGroupMap.each(function (item) {\n      !item.__keep && this.group.remove(item.group);\n    }, this);\n  },\n  renderSeries: function () {}\n});\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar indexOf = zrUtil.indexOf;\n\nfunction hasXOrY(item) {\n  return !(isNaN(parseFloat(item.x)) && isNaN(parseFloat(item.y)));\n}\n\nfunction hasXAndY(item) {\n  return !isNaN(parseFloat(item.x)) && !isNaN(parseFloat(item.y));\n}\n\nfunction getPrecision(data, valueAxisDim, dataIndex) {\n  var precision = -1;\n\n  do {\n    precision = Math.max(numberUtil.getPrecision(data.get(valueAxisDim, dataIndex)), precision);\n    data = data.stackedOn;\n  } while (data);\n\n  return precision;\n}\n\nfunction markerTypeCalculatorWithExtent(mlType, data, otherDataDim, targetDataDim, otherCoordIndex, targetCoordIndex) {\n  var coordArr = [];\n  var value = numCalculate(data, targetDataDim, mlType);\n  var dataIndex = data.indicesOfNearest(targetDataDim, value, true)[0];\n  coordArr[otherCoordIndex] = data.get(otherDataDim, dataIndex, true);\n  coordArr[targetCoordIndex] = data.get(targetDataDim, dataIndex, true);\n  var precision = getPrecision(data, targetDataDim, dataIndex);\n  precision = Math.min(precision, 20);\n\n  if (precision >= 0) {\n    coordArr[targetCoordIndex] = +coordArr[targetCoordIndex].toFixed(precision);\n  }\n\n  return coordArr;\n}\n\nvar curry = zrUtil.curry; // TODO Specified percent\n\nvar markerTypeCalculator = {\n  /**\n   * @method\n   * @param {module:echarts/data/List} data\n   * @param {string} baseAxisDim\n   * @param {string} valueAxisDim\n   */\n  min: curry(markerTypeCalculatorWithExtent, 'min'),\n\n  /**\n   * @method\n   * @param {module:echarts/data/List} data\n   * @param {string} baseAxisDim\n   * @param {string} valueAxisDim\n   */\n  max: curry(markerTypeCalculatorWithExtent, 'max'),\n\n  /**\n   * @method\n   * @param {module:echarts/data/List} data\n   * @param {string} baseAxisDim\n   * @param {string} valueAxisDim\n   */\n  average: curry(markerTypeCalculatorWithExtent, 'average')\n};\n/**\n * Transform markPoint data item to format used in List by do the following\n * 1. Calculate statistic like `max`, `min`, `average`\n * 2. Convert `item.xAxis`, `item.yAxis` to `item.coord` array\n * @param  {module:echarts/model/Series} seriesModel\n * @param  {module:echarts/coord/*} [coordSys]\n * @param  {Object} item\n * @return {Object}\n */\n\nfunction dataTransform(seriesModel, item) {\n  var data = seriesModel.getData();\n  var coordSys = seriesModel.coordinateSystem; // 1. If not specify the position with pixel directly\n  // 2. If `coord` is not a data array. Which uses `xAxis`,\n  // `yAxis` to specify the coord on each dimension\n  // parseFloat first because item.x and item.y can be percent string like '20%'\n\n  if (item && !hasXAndY(item) && !zrUtil.isArray(item.coord) && coordSys) {\n    var dims = coordSys.dimensions;\n    var axisInfo = getAxisInfo(item, data, coordSys, seriesModel); // Clone the option\n    // Transform the properties xAxis, yAxis, radiusAxis, angleAxis, geoCoord to value\n\n    item = zrUtil.clone(item);\n\n    if (item.type && markerTypeCalculator[item.type] && axisInfo.baseAxis && axisInfo.valueAxis) {\n      var otherCoordIndex = indexOf(dims, axisInfo.baseAxis.dim);\n      var targetCoordIndex = indexOf(dims, axisInfo.valueAxis.dim);\n      item.coord = markerTypeCalculator[item.type](data, axisInfo.baseDataDim, axisInfo.valueDataDim, otherCoordIndex, targetCoordIndex); // Force to use the value of calculated value.\n\n      item.value = item.coord[targetCoordIndex];\n    } else {\n      // FIXME Only has one of xAxis and yAxis.\n      var coord = [item.xAxis != null ? item.xAxis : item.radiusAxis, item.yAxis != null ? item.yAxis : item.angleAxis]; // Each coord support max, min, average\n\n      for (var i = 0; i < 2; i++) {\n        if (markerTypeCalculator[coord[i]]) {\n          var dataDim = seriesModel.coordDimToDataDim(dims[i])[0];\n          coord[i] = numCalculate(data, dataDim, coord[i]);\n        }\n      }\n\n      item.coord = coord;\n    }\n  }\n\n  return item;\n}\n\nfunction getAxisInfo(item, data, coordSys, seriesModel) {\n  var ret = {};\n\n  if (item.valueIndex != null || item.valueDim != null) {\n    ret.valueDataDim = item.valueIndex != null ? data.getDimension(item.valueIndex) : item.valueDim;\n    ret.valueAxis = coordSys.getAxis(seriesModel.dataDimToCoordDim(ret.valueDataDim));\n    ret.baseAxis = coordSys.getOtherAxis(ret.valueAxis);\n    ret.baseDataDim = seriesModel.coordDimToDataDim(ret.baseAxis.dim)[0];\n  } else {\n    ret.baseAxis = seriesModel.getBaseAxis();\n    ret.valueAxis = coordSys.getOtherAxis(ret.baseAxis);\n    ret.baseDataDim = seriesModel.coordDimToDataDim(ret.baseAxis.dim)[0];\n    ret.valueDataDim = seriesModel.coordDimToDataDim(ret.valueAxis.dim)[0];\n  }\n\n  return ret;\n}\n/**\n * Filter data which is out of coordinateSystem range\n * [dataFilter description]\n * @param  {module:echarts/coord/*} [coordSys]\n * @param  {Object} item\n * @return {boolean}\n */\n\n\nfunction dataFilter(coordSys, item) {\n  // Alwalys return true if there is no coordSys\n  return coordSys && coordSys.containData && item.coord && !hasXOrY(item) ? coordSys.containData(item.coord) : true;\n}\n\nfunction dimValueGetter(item, dimName, dataIndex, dimIndex) {\n  // x, y, radius, angle\n  if (dimIndex < 2) {\n    return item.coord && item.coord[dimIndex];\n  }\n\n  return item.value;\n}\n\nfunction numCalculate(data, valueDataDim, type) {\n  if (type === 'average') {\n    var sum = 0;\n    var count = 0;\n    data.each(valueDataDim, function (val, idx) {\n      if (!isNaN(val)) {\n        sum += val;\n        count++;\n      }\n    }, true);\n    return sum / count;\n  } else {\n    return data.getDataExtent(valueDataDim, true)[type === 'max' ? 1 : 0];\n  }\n}\n\nexports.dataTransform = dataTransform;\nexports.getAxisInfo = getAxisInfo;\nexports.dataFilter = dataFilter;\nexports.dimValueGetter = dimValueGetter;\nexports.numCalculate = numCalculate;","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar throttleUtil = require(\"../util/throttle\");\n\nvar parallelPreprocessor = require(\"../coord/parallel/parallelPreprocessor\");\n\nrequire(\"../coord/parallel/parallelCreator\");\n\nrequire(\"../coord/parallel/ParallelModel\");\n\nrequire(\"./parallelAxis\");\n\nvar CLICK_THRESHOLD = 5; // > 4\n// Parallel view\n\necharts.extendComponentView({\n  type: 'parallel',\n  render: function (parallelModel, ecModel, api) {\n    this._model = parallelModel;\n    this._api = api;\n\n    if (!this._handlers) {\n      this._handlers = {};\n      zrUtil.each(handlers, function (handler, eventName) {\n        api.getZr().on(eventName, this._handlers[eventName] = zrUtil.bind(handler, this));\n      }, this);\n    }\n\n    throttleUtil.createOrUpdate(this, '_throttledDispatchExpand', parallelModel.get('axisExpandRate'), 'fixRate');\n  },\n  dispose: function (ecModel, api) {\n    zrUtil.each(this._handlers, function (handler, eventName) {\n      api.getZr().off(eventName, handler);\n    });\n    this._handlers = null;\n  },\n\n  /**\n   * @param {Object} [opt] If null, cancle the last action triggering for debounce.\n   */\n  _throttledDispatchExpand: function (opt) {\n    this._dispatchExpand(opt);\n  },\n  _dispatchExpand: function (opt) {\n    opt && this._api.dispatchAction(zrUtil.extend({\n      type: 'parallelAxisExpand'\n    }, opt));\n  }\n});\nvar handlers = {\n  mousedown: function (e) {\n    if (checkTrigger(this, 'click')) {\n      this._mouseDownPoint = [e.offsetX, e.offsetY];\n    }\n  },\n  mouseup: function (e) {\n    var mouseDownPoint = this._mouseDownPoint;\n\n    if (checkTrigger(this, 'click') && mouseDownPoint) {\n      var point = [e.offsetX, e.offsetY];\n      var dist = Math.pow(mouseDownPoint[0] - point[0], 2) + Math.pow(mouseDownPoint[1] - point[1], 2);\n\n      if (dist > CLICK_THRESHOLD) {\n        return;\n      }\n\n      var result = this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX, e.offsetY]);\n\n      result.behavior !== 'none' && this._dispatchExpand({\n        axisExpandWindow: result.axisExpandWindow\n      });\n    }\n\n    this._mouseDownPoint = null;\n  },\n  mousemove: function (e) {\n    // Should do nothing when brushing.\n    if (this._mouseDownPoint || !checkTrigger(this, 'mousemove')) {\n      return;\n    }\n\n    var model = this._model;\n    var result = model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX, e.offsetY]);\n    var behavior = result.behavior;\n    behavior === 'jump' && this._throttledDispatchExpand.debounceNextCall(model.get('axisExpandDebounce'));\n\n    this._throttledDispatchExpand(behavior === 'none' ? null // Cancle the last trigger, in case that mouse slide out of the area quickly.\n    : {\n      axisExpandWindow: result.axisExpandWindow,\n      // Jumping uses animation, and sliding suppresses animation.\n      animation: behavior === 'jump' ? null : false\n    });\n  }\n};\n\nfunction checkTrigger(view, triggerOn) {\n  var model = view._model;\n  return model.get('axisExpandable') && model.get('axisExpandTriggerOn') === triggerOn;\n}\n\necharts.registerPreprocessor(parallelPreprocessor);","require(\"../coord/parallel/parallelCreator\");\n\nrequire(\"./axis/parallelAxisAction\");\n\nrequire(\"./axis/ParallelAxisView\");","var echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar barPolar = require(\"../layout/barPolar\");\n\nrequire(\"../coord/polar/polarCreator\");\n\nrequire(\"./angleAxis\");\n\nrequire(\"./radiusAxis\");\n\nrequire(\"./axisPointer\");\n\nrequire(\"./axisPointer/PolarAxisPointer\");\n\n// For reducing size of echarts.min, barLayoutPolar is required by polar.\necharts.registerLayout(zrUtil.curry(barPolar, 'bar')); // Polar view\n\necharts.extendComponentView({\n  type: 'polar'\n});","require(\"../coord/radar/Radar\");\n\nrequire(\"../coord/radar/RadarModel\");\n\nrequire(\"./radar/RadarView\");","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar AxisBuilder = require(\"../axis/AxisBuilder\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\n\nvar _default = echarts.extendComponentView({\n  type: 'radar',\n  render: function (radarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n\n    this._buildAxes(radarModel);\n\n    this._buildSplitLineAndArea(radarModel);\n  },\n  _buildAxes: function (radarModel) {\n    var radar = radarModel.coordinateSystem;\n    var indicatorAxes = radar.getIndicatorAxes();\n    var axisBuilders = zrUtil.map(indicatorAxes, function (indicatorAxis) {\n      var axisBuilder = new AxisBuilder(indicatorAxis.model, {\n        position: [radar.cx, radar.cy],\n        rotation: indicatorAxis.angle,\n        labelDirection: -1,\n        tickDirection: -1,\n        nameDirection: 1\n      });\n      return axisBuilder;\n    });\n    zrUtil.each(axisBuilders, function (axisBuilder) {\n      zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n      this.group.add(axisBuilder.getGroup());\n    }, this);\n  },\n  _buildSplitLineAndArea: function (radarModel) {\n    var radar = radarModel.coordinateSystem;\n    var indicatorAxes = radar.getIndicatorAxes();\n\n    if (!indicatorAxes.length) {\n      return;\n    }\n\n    var shape = radarModel.get('shape');\n    var splitLineModel = radarModel.getModel('splitLine');\n    var splitAreaModel = radarModel.getModel('splitArea');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var showSplitLine = splitLineModel.get('show');\n    var showSplitArea = splitAreaModel.get('show');\n    var splitLineColors = lineStyleModel.get('color');\n    var splitAreaColors = areaStyleModel.get('color');\n    splitLineColors = zrUtil.isArray(splitLineColors) ? splitLineColors : [splitLineColors];\n    splitAreaColors = zrUtil.isArray(splitAreaColors) ? splitAreaColors : [splitAreaColors];\n    var splitLines = [];\n    var splitAreas = [];\n\n    function getColorIndex(areaOrLine, areaOrLineColorList, idx) {\n      var colorIndex = idx % areaOrLineColorList.length;\n      areaOrLine[colorIndex] = areaOrLine[colorIndex] || [];\n      return colorIndex;\n    }\n\n    if (shape === 'circle') {\n      var ticksRadius = indicatorAxes[0].getTicksCoords();\n      var cx = radar.cx;\n      var cy = radar.cy;\n\n      for (var i = 0; i < ticksRadius.length; i++) {\n        if (showSplitLine) {\n          var colorIndex = getColorIndex(splitLines, splitLineColors, i);\n          splitLines[colorIndex].push(new graphic.Circle({\n            shape: {\n              cx: cx,\n              cy: cy,\n              r: ticksRadius[i]\n            }\n          }));\n        }\n\n        if (showSplitArea && i < ticksRadius.length - 1) {\n          var colorIndex = getColorIndex(splitAreas, splitAreaColors, i);\n          splitAreas[colorIndex].push(new graphic.Ring({\n            shape: {\n              cx: cx,\n              cy: cy,\n              r0: ticksRadius[i],\n              r: ticksRadius[i + 1]\n            }\n          }));\n        }\n      }\n    } // Polyyon\n    else {\n        var realSplitNumber;\n        var axesTicksPoints = zrUtil.map(indicatorAxes, function (indicatorAxis, idx) {\n          var ticksCoords = indicatorAxis.getTicksCoords();\n          realSplitNumber = realSplitNumber == null ? ticksCoords.length - 1 : Math.min(ticksCoords.length - 1, realSplitNumber);\n          return zrUtil.map(ticksCoords, function (tickCoord) {\n            return radar.coordToPoint(tickCoord, idx);\n          });\n        });\n        var prevPoints = [];\n\n        for (var i = 0; i <= realSplitNumber; i++) {\n          var points = [];\n\n          for (var j = 0; j < indicatorAxes.length; j++) {\n            points.push(axesTicksPoints[j][i]);\n          } // Close\n\n\n          if (points[0]) {\n            points.push(points[0].slice());\n          } else {}\n\n          if (showSplitLine) {\n            var colorIndex = getColorIndex(splitLines, splitLineColors, i);\n            splitLines[colorIndex].push(new graphic.Polyline({\n              shape: {\n                points: points\n              }\n            }));\n          }\n\n          if (showSplitArea && prevPoints) {\n            var colorIndex = getColorIndex(splitAreas, splitAreaColors, i - 1);\n            splitAreas[colorIndex].push(new graphic.Polygon({\n              shape: {\n                points: points.concat(prevPoints)\n              }\n            }));\n          }\n\n          prevPoints = points.slice().reverse();\n        }\n      }\n\n    var lineStyle = lineStyleModel.getLineStyle();\n    var areaStyle = areaStyleModel.getAreaStyle(); // Add splitArea before splitLine\n\n    zrUtil.each(splitAreas, function (splitAreas, idx) {\n      this.group.add(graphic.mergePath(splitAreas, {\n        style: zrUtil.defaults({\n          stroke: 'none',\n          fill: splitAreaColors[idx % splitAreaColors.length]\n        }, areaStyle),\n        silent: true\n      }));\n    }, this);\n    zrUtil.each(splitLines, function (splitLines, idx) {\n      this.group.add(graphic.mergePath(splitLines, {\n        style: zrUtil.defaults({\n          fill: 'none',\n          stroke: splitLineColors[idx % splitLineColors.length]\n        }, lineStyle),\n        silent: true\n      }));\n    }, this);\n  }\n});\n\nmodule.exports = _default;","require(\"../coord/polar/polarCreator\");\n\nrequire(\"./axis/RadiusAxisView\");","var echarts = require(\"../echarts\");\n\nrequire(\"../coord/single/singleCreator\");\n\nrequire(\"./axis/SingleAxisView\");\n\nrequire(\"../coord/single/AxisModel\");\n\nrequire(\"./axisPointer\");\n\nrequire(\"./axisPointer/SingleAxisPointer\");\n\necharts.extendComponentView({\n  type: 'single'\n});","var echarts = require(\"../echarts\");\n\nvar preprocessor = require(\"./timeline/preprocessor\");\n\nrequire(\"./timeline/typeDefaulter\");\n\nrequire(\"./timeline/timelineAction\");\n\nrequire(\"./timeline/SliderTimelineModel\");\n\nrequire(\"./timeline/SliderTimelineView\");\n\n/**\n * DataZoom component entry\n */\necharts.registerPreprocessor(preprocessor);","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar TimelineModel = require(\"./TimelineModel\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar SliderTimelineModel = TimelineModel.extend({\n  type: 'timeline.slider',\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    backgroundColor: 'rgba(0,0,0,0)',\n    // \n    borderColor: '#ccc',\n    // \n    borderWidth: 0,\n    // px0\n    orient: 'horizontal',\n    // 'vertical'\n    inverse: false,\n    tooltip: {\n      // boolean or Object\n      trigger: 'item' // data item may also have tootip attr.\n\n    },\n    symbol: 'emptyCircle',\n    symbolSize: 10,\n    lineStyle: {\n      show: true,\n      width: 2,\n      color: '#304654'\n    },\n    label: {\n      // \n      position: 'auto',\n      // auto left right top bottom\n      // When using number, label position is not\n      // restricted by viewRect.\n      // positive: right/bottom, negative: left/top\n      normal: {\n        show: true,\n        interval: 'auto',\n        rotate: 0,\n        // formatter: null,\n        // TEXTSTYLE\n        color: '#304654'\n      },\n      emphasis: {\n        show: true,\n        // TEXTSTYLE\n        color: '#c23531'\n      }\n    },\n    itemStyle: {\n      normal: {\n        color: '#304654',\n        borderWidth: 1\n      },\n      emphasis: {\n        color: '#c23531'\n      }\n    },\n    checkpointStyle: {\n      symbol: 'circle',\n      symbolSize: 13,\n      color: '#c23531',\n      borderWidth: 5,\n      borderColor: 'rgba(194,53,49, 0.5)',\n      animation: true,\n      animationDuration: 300,\n      animationEasing: 'quinticInOut'\n    },\n    controlStyle: {\n      show: true,\n      showPlayBtn: true,\n      showPrevBtn: true,\n      showNextBtn: true,\n      itemSize: 22,\n      itemGap: 12,\n      position: 'left',\n      // 'left' 'right' 'top' 'bottom'\n      playIcon: 'path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z',\n      // jshint ignore:line\n      stopIcon: 'path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z',\n      // jshint ignore:line\n      nextIcon: 'path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z',\n      // jshint ignore:line\n      prevIcon: 'path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z',\n      // jshint ignore:line\n      normal: {\n        color: '#304654',\n        borderColor: '#304654',\n        borderWidth: 1\n      },\n      emphasis: {\n        color: '#c23531',\n        borderColor: '#c23531',\n        borderWidth: 2\n      }\n    },\n    data: []\n  }\n});\nzrUtil.mixin(SliderTimelineModel, modelUtil.dataFormatMixin);\nvar _default = SliderTimelineModel;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar layout = require(\"../../util/layout\");\n\nvar TimelineView = require(\"./TimelineView\");\n\nvar TimelineAxis = require(\"./TimelineAxis\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar _format = require(\"../../util/format\");\n\nvar encodeHTML = _format.encodeHTML;\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar PI = Math.PI;\n\nvar _default = TimelineView.extend({\n  type: 'timeline.slider',\n  init: function (ecModel, api) {\n    this.api = api;\n    /**\n     * @private\n     * @type {module:echarts/component/timeline/TimelineAxis}\n     */\n\n    this._axis;\n    /**\n     * @private\n     * @type {module:zrender/core/BoundingRect}\n     */\n\n    this._viewRect;\n    /**\n     * @type {number}\n     */\n\n    this._timer;\n    /**\n     * @type {module:zrender/Element}\n     */\n\n    this._currentPointer;\n    /**\n     * @type {module:zrender/container/Group}\n     */\n\n    this._mainGroup;\n    /**\n     * @type {module:zrender/container/Group}\n     */\n\n    this._labelGroup;\n  },\n\n  /**\n   * @override\n   */\n  render: function (timelineModel, ecModel, api, payload) {\n    this.model = timelineModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    this.group.removeAll();\n\n    if (timelineModel.get('show', true)) {\n      var layoutInfo = this._layout(timelineModel, api);\n\n      var mainGroup = this._createGroup('mainGroup');\n\n      var labelGroup = this._createGroup('labelGroup');\n      /**\n       * @private\n       * @type {module:echarts/component/timeline/TimelineAxis}\n       */\n\n\n      var axis = this._axis = this._createAxis(layoutInfo, timelineModel);\n\n      timelineModel.formatTooltip = function (dataIndex) {\n        return encodeHTML(axis.scale.getLabel(dataIndex));\n      };\n\n      each(['AxisLine', 'AxisTick', 'Control', 'CurrentPointer'], function (name) {\n        this['_render' + name](layoutInfo, mainGroup, axis, timelineModel);\n      }, this);\n\n      this._renderAxisLabel(layoutInfo, labelGroup, axis, timelineModel);\n\n      this._position(layoutInfo, timelineModel);\n    }\n\n    this._doPlayStop();\n  },\n\n  /**\n   * @override\n   */\n  remove: function () {\n    this._clearTimer();\n\n    this.group.removeAll();\n  },\n\n  /**\n   * @override\n   */\n  dispose: function () {\n    this._clearTimer();\n  },\n  _layout: function (timelineModel, api) {\n    var labelPosOpt = timelineModel.get('label.normal.position');\n    var orient = timelineModel.get('orient');\n    var viewRect = getViewRect(timelineModel, api); // Auto label offset.\n\n    if (labelPosOpt == null || labelPosOpt === 'auto') {\n      labelPosOpt = orient === 'horizontal' ? viewRect.y + viewRect.height / 2 < api.getHeight() / 2 ? '-' : '+' : viewRect.x + viewRect.width / 2 < api.getWidth() / 2 ? '+' : '-';\n    } else if (isNaN(labelPosOpt)) {\n      labelPosOpt = {\n        horizontal: {\n          top: '-',\n          bottom: '+'\n        },\n        vertical: {\n          left: '-',\n          right: '+'\n        }\n      }[orient][labelPosOpt];\n    }\n\n    var labelAlignMap = {\n      horizontal: 'center',\n      vertical: labelPosOpt >= 0 || labelPosOpt === '+' ? 'left' : 'right'\n    };\n    var labelBaselineMap = {\n      horizontal: labelPosOpt >= 0 || labelPosOpt === '+' ? 'top' : 'bottom',\n      vertical: 'middle'\n    };\n    var rotationMap = {\n      horizontal: 0,\n      vertical: PI / 2\n    }; // Position\n\n    var mainLength = orient === 'vertical' ? viewRect.height : viewRect.width;\n    var controlModel = timelineModel.getModel('controlStyle');\n    var showControl = controlModel.get('show');\n    var controlSize = showControl ? controlModel.get('itemSize') : 0;\n    var controlGap = showControl ? controlModel.get('itemGap') : 0;\n    var sizePlusGap = controlSize + controlGap; // Special label rotate.\n\n    var labelRotation = timelineModel.get('label.normal.rotate') || 0;\n    labelRotation = labelRotation * PI / 180; // To radian.\n\n    var playPosition;\n    var prevBtnPosition;\n    var nextBtnPosition;\n    var axisExtent;\n    var controlPosition = controlModel.get('position', true);\n    var showControl = controlModel.get('show', true);\n    var showPlayBtn = showControl && controlModel.get('showPlayBtn', true);\n    var showPrevBtn = showControl && controlModel.get('showPrevBtn', true);\n    var showNextBtn = showControl && controlModel.get('showNextBtn', true);\n    var xLeft = 0;\n    var xRight = mainLength; // position[0] means left, position[1] means middle.\n\n    if (controlPosition === 'left' || controlPosition === 'bottom') {\n      showPlayBtn && (playPosition = [0, 0], xLeft += sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [xLeft, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    } else {\n      // 'top' 'right'\n      showPlayBtn && (playPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [0, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    }\n\n    axisExtent = [xLeft, xRight];\n\n    if (timelineModel.get('inverse')) {\n      axisExtent.reverse();\n    }\n\n    return {\n      viewRect: viewRect,\n      mainLength: mainLength,\n      orient: orient,\n      rotation: rotationMap[orient],\n      labelRotation: labelRotation,\n      labelPosOpt: labelPosOpt,\n      labelAlign: timelineModel.get('label.normal.align') || labelAlignMap[orient],\n      labelBaseline: timelineModel.get('label.normal.verticalAlign') || timelineModel.get('label.normal.baseline') || labelBaselineMap[orient],\n      // Based on mainGroup.\n      playPosition: playPosition,\n      prevBtnPosition: prevBtnPosition,\n      nextBtnPosition: nextBtnPosition,\n      axisExtent: axisExtent,\n      controlSize: controlSize,\n      controlGap: controlGap\n    };\n  },\n  _position: function (layoutInfo, timelineModel) {\n    // Position is be called finally, because bounding rect is needed for\n    // adapt content to fill viewRect (auto adapt offset).\n    // Timeline may be not all in the viewRect when 'offset' is specified\n    // as a number, because it is more appropriate that label aligns at\n    // 'offset' but not the other edge defined by viewRect.\n    var mainGroup = this._mainGroup;\n    var labelGroup = this._labelGroup;\n    var viewRect = layoutInfo.viewRect;\n\n    if (layoutInfo.orient === 'vertical') {\n      // transfrom to horizontal, inverse rotate by left-top point.\n      var m = matrix.create();\n      var rotateOriginX = viewRect.x;\n      var rotateOriginY = viewRect.y + viewRect.height;\n      matrix.translate(m, m, [-rotateOriginX, -rotateOriginY]);\n      matrix.rotate(m, m, -PI / 2);\n      matrix.translate(m, m, [rotateOriginX, rotateOriginY]);\n      viewRect = viewRect.clone();\n      viewRect.applyTransform(m);\n    }\n\n    var viewBound = getBound(viewRect);\n    var mainBound = getBound(mainGroup.getBoundingRect());\n    var labelBound = getBound(labelGroup.getBoundingRect());\n    var mainPosition = mainGroup.position;\n    var labelsPosition = labelGroup.position;\n    labelsPosition[0] = mainPosition[0] = viewBound[0][0];\n    var labelPosOpt = layoutInfo.labelPosOpt;\n\n    if (isNaN(labelPosOpt)) {\n      // '+' or '-'\n      var mainBoundIdx = labelPosOpt === '+' ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      toBound(labelsPosition, labelBound, viewBound, 1, 1 - mainBoundIdx);\n    } else {\n      var mainBoundIdx = labelPosOpt >= 0 ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      labelsPosition[1] = mainPosition[1] + labelPosOpt;\n    }\n\n    mainGroup.attr('position', mainPosition);\n    labelGroup.attr('position', labelsPosition);\n    mainGroup.rotation = labelGroup.rotation = layoutInfo.rotation;\n    setOrigin(mainGroup);\n    setOrigin(labelGroup);\n\n    function setOrigin(targetGroup) {\n      var pos = targetGroup.position;\n      targetGroup.origin = [viewBound[0][0] - pos[0], viewBound[1][0] - pos[1]];\n    }\n\n    function getBound(rect) {\n      // [[xmin, xmax], [ymin, ymax]]\n      return [[rect.x, rect.x + rect.width], [rect.y, rect.y + rect.height]];\n    }\n\n    function toBound(fromPos, from, to, dimIdx, boundIdx) {\n      fromPos[dimIdx] += to[dimIdx][boundIdx] - from[dimIdx][boundIdx];\n    }\n  },\n  _createAxis: function (layoutInfo, timelineModel) {\n    var data = timelineModel.getData();\n    var axisType = timelineModel.get('axisType');\n    var scale = axisHelper.createScaleByModel(timelineModel, axisType);\n    var dataExtent = data.getDataExtent('value');\n    scale.setExtent(dataExtent[0], dataExtent[1]);\n\n    this._customizeScale(scale, data);\n\n    scale.niceTicks();\n    var axis = new TimelineAxis('value', scale, layoutInfo.axisExtent, axisType);\n    axis.model = timelineModel;\n    return axis;\n  },\n  _customizeScale: function (scale, data) {\n    scale.getTicks = function () {\n      return data.mapArray(['value'], function (value) {\n        return value;\n      });\n    };\n\n    scale.getTicksLabels = function () {\n      return zrUtil.map(this.getTicks(), scale.getLabel, scale);\n    };\n  },\n  _createGroup: function (name) {\n    var newGroup = this['_' + name] = new graphic.Group();\n    this.group.add(newGroup);\n    return newGroup;\n  },\n  _renderAxisLine: function (layoutInfo, group, axis, timelineModel) {\n    var axisExtent = axis.getExtent();\n\n    if (!timelineModel.get('lineStyle.show')) {\n      return;\n    }\n\n    group.add(new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        y1: 0,\n        x2: axisExtent[1],\n        y2: 0\n      },\n      style: zrUtil.extend({\n        lineCap: 'round'\n      }, timelineModel.getModel('lineStyle').getLineStyle()),\n      silent: true,\n      z2: 1\n    }));\n  },\n\n  /**\n   * @private\n   */\n  _renderAxisTick: function (layoutInfo, group, axis, timelineModel) {\n    var data = timelineModel.getData();\n    var ticks = axis.scale.getTicks();\n    each(ticks, function (value, dataIndex) {\n      var tickCoord = axis.dataToCoord(value);\n      var itemModel = data.getItemModel(dataIndex);\n      var itemStyleModel = itemModel.getModel('itemStyle.normal');\n      var hoverStyleModel = itemModel.getModel('itemStyle.emphasis');\n      var symbolOpt = {\n        position: [tickCoord, 0],\n        onclick: bind(this._changeTimeline, this, dataIndex)\n      };\n      var el = giveSymbol(itemModel, itemStyleModel, group, symbolOpt);\n      graphic.setHoverStyle(el, hoverStyleModel.getItemStyle());\n\n      if (itemModel.get('tooltip')) {\n        el.dataIndex = dataIndex;\n        el.dataModel = timelineModel;\n      } else {\n        el.dataIndex = el.dataModel = null;\n      }\n    }, this);\n  },\n\n  /**\n   * @private\n   */\n  _renderAxisLabel: function (layoutInfo, group, axis, timelineModel) {\n    var labelModel = timelineModel.getModel('label.normal');\n\n    if (!labelModel.get('show')) {\n      return;\n    }\n\n    var data = timelineModel.getData();\n    var ticks = axis.scale.getTicks();\n    var labels = axisHelper.getFormattedLabels(axis, labelModel.get('formatter'));\n    var labelInterval = axis.getLabelInterval();\n    each(ticks, function (tick, dataIndex) {\n      if (axis.isLabelIgnored(dataIndex, labelInterval)) {\n        return;\n      }\n\n      var itemModel = data.getItemModel(dataIndex);\n      var normalLabelModel = itemModel.getModel('label.normal');\n      var hoverLabelModel = itemModel.getModel('label.emphasis');\n      var tickCoord = axis.dataToCoord(tick);\n      var textEl = new graphic.Text({\n        position: [tickCoord, 0],\n        rotation: layoutInfo.labelRotation - layoutInfo.rotation,\n        onclick: bind(this._changeTimeline, this, dataIndex),\n        silent: false\n      });\n      graphic.setTextStyle(textEl.style, normalLabelModel, {\n        text: labels[dataIndex],\n        textAlign: layoutInfo.labelAlign,\n        textVerticalAlign: layoutInfo.labelBaseline\n      });\n      group.add(textEl);\n      graphic.setHoverStyle(textEl, graphic.setTextStyle({}, hoverLabelModel));\n    }, this);\n  },\n\n  /**\n   * @private\n   */\n  _renderControl: function (layoutInfo, group, axis, timelineModel) {\n    var controlSize = layoutInfo.controlSize;\n    var rotation = layoutInfo.rotation;\n    var itemStyle = timelineModel.getModel('controlStyle.normal').getItemStyle();\n    var hoverStyle = timelineModel.getModel('controlStyle.emphasis').getItemStyle();\n    var rect = [0, -controlSize / 2, controlSize, controlSize];\n    var playState = timelineModel.getPlayState();\n    var inverse = timelineModel.get('inverse', true);\n    makeBtn(layoutInfo.nextBtnPosition, 'controlStyle.nextIcon', bind(this._changeTimeline, this, inverse ? '-' : '+'));\n    makeBtn(layoutInfo.prevBtnPosition, 'controlStyle.prevIcon', bind(this._changeTimeline, this, inverse ? '+' : '-'));\n    makeBtn(layoutInfo.playPosition, 'controlStyle.' + (playState ? 'stopIcon' : 'playIcon'), bind(this._handlePlayClick, this, !playState), true);\n\n    function makeBtn(position, iconPath, onclick, willRotate) {\n      if (!position) {\n        return;\n      }\n\n      var opt = {\n        position: position,\n        origin: [controlSize / 2, 0],\n        rotation: willRotate ? -rotation : 0,\n        rectHover: true,\n        style: itemStyle,\n        onclick: onclick\n      };\n      var btn = makeIcon(timelineModel, iconPath, rect, opt);\n      group.add(btn);\n      graphic.setHoverStyle(btn, hoverStyle);\n    }\n  },\n  _renderCurrentPointer: function (layoutInfo, group, axis, timelineModel) {\n    var data = timelineModel.getData();\n    var currentIndex = timelineModel.getCurrentIndex();\n    var pointerModel = data.getItemModel(currentIndex).getModel('checkpointStyle');\n    var me = this;\n    var callback = {\n      onCreate: function (pointer) {\n        pointer.draggable = true;\n        pointer.drift = bind(me._handlePointerDrag, me);\n        pointer.ondragend = bind(me._handlePointerDragend, me);\n        pointerMoveTo(pointer, currentIndex, axis, timelineModel, true);\n      },\n      onUpdate: function (pointer) {\n        pointerMoveTo(pointer, currentIndex, axis, timelineModel);\n      }\n    }; // Reuse when exists, for animation and drag.\n\n    this._currentPointer = giveSymbol(pointerModel, pointerModel, this._mainGroup, {}, this._currentPointer, callback);\n  },\n  _handlePlayClick: function (nextState) {\n    this._clearTimer();\n\n    this.api.dispatchAction({\n      type: 'timelinePlayChange',\n      playState: nextState,\n      from: this.uid\n    });\n  },\n  _handlePointerDrag: function (dx, dy, e) {\n    this._clearTimer();\n\n    this._pointerChangeTimeline([e.offsetX, e.offsetY]);\n  },\n  _handlePointerDragend: function (e) {\n    this._pointerChangeTimeline([e.offsetX, e.offsetY], true);\n  },\n  _pointerChangeTimeline: function (mousePos, trigger) {\n    var toCoord = this._toAxisCoord(mousePos)[0];\n\n    var axis = this._axis;\n    var axisExtent = numberUtil.asc(axis.getExtent().slice());\n    toCoord > axisExtent[1] && (toCoord = axisExtent[1]);\n    toCoord < axisExtent[0] && (toCoord = axisExtent[0]);\n    this._currentPointer.position[0] = toCoord;\n\n    this._currentPointer.dirty();\n\n    var targetDataIndex = this._findNearestTick(toCoord);\n\n    var timelineModel = this.model;\n\n    if (trigger || targetDataIndex !== timelineModel.getCurrentIndex() && timelineModel.get('realtime')) {\n      this._changeTimeline(targetDataIndex);\n    }\n  },\n  _doPlayStop: function () {\n    this._clearTimer();\n\n    if (this.model.getPlayState()) {\n      this._timer = setTimeout(bind(handleFrame, this), this.model.get('playInterval'));\n    }\n\n    function handleFrame() {\n      // Do not cache\n      var timelineModel = this.model;\n\n      this._changeTimeline(timelineModel.getCurrentIndex() + (timelineModel.get('rewind', true) ? -1 : 1));\n    }\n  },\n  _toAxisCoord: function (vertex) {\n    var trans = this._mainGroup.getLocalTransform();\n\n    return graphic.applyTransform(vertex, trans, true);\n  },\n  _findNearestTick: function (axisCoord) {\n    var data = this.model.getData();\n    var dist = Infinity;\n    var targetDataIndex;\n    var axis = this._axis;\n    data.each(['value'], function (value, dataIndex) {\n      var coord = axis.dataToCoord(value);\n      var d = Math.abs(coord - axisCoord);\n\n      if (d < dist) {\n        dist = d;\n        targetDataIndex = dataIndex;\n      }\n    });\n    return targetDataIndex;\n  },\n  _clearTimer: function () {\n    if (this._timer) {\n      clearTimeout(this._timer);\n      this._timer = null;\n    }\n  },\n  _changeTimeline: function (nextIndex) {\n    var currentIndex = this.model.getCurrentIndex();\n\n    if (nextIndex === '+') {\n      nextIndex = currentIndex + 1;\n    } else if (nextIndex === '-') {\n      nextIndex = currentIndex - 1;\n    }\n\n    this.api.dispatchAction({\n      type: 'timelineChange',\n      currentIndex: nextIndex,\n      from: this.uid\n    });\n  }\n});\n\nfunction getViewRect(model, api) {\n  return layout.getLayoutRect(model.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  }, model.get('padding'));\n}\n\nfunction makeIcon(timelineModel, objPath, rect, opts) {\n  var icon = graphic.makePath(timelineModel.get(objPath).replace(/^path:\\/\\//, ''), zrUtil.clone(opts || {}), new BoundingRect(rect[0], rect[1], rect[2], rect[3]), 'center');\n  return icon;\n}\n/**\n * Create symbol or update symbol\n * opt: basic position and event handlers\n */\n\n\nfunction giveSymbol(hostModel, itemStyleModel, group, opt, symbol, callback) {\n  var color = itemStyleModel.get('color');\n\n  if (!symbol) {\n    var symbolType = hostModel.get('symbol');\n    symbol = createSymbol(symbolType, -1, -1, 2, 2, color);\n    symbol.setStyle('strokeNoScale', true);\n    group.add(symbol);\n    callback && callback.onCreate(symbol);\n  } else {\n    symbol.setColor(color);\n    group.add(symbol); // Group may be new, also need to add.\n\n    callback && callback.onUpdate(symbol);\n  } // Style\n\n\n  var itemStyle = itemStyleModel.getItemStyle(['color', 'symbol', 'symbolSize']);\n  symbol.setStyle(itemStyle); // Transform and events.\n\n  opt = zrUtil.merge({\n    rectHover: true,\n    z2: 100\n  }, opt, true);\n  var symbolSize = hostModel.get('symbolSize');\n  symbolSize = symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\n  symbolSize[0] /= 2;\n  symbolSize[1] /= 2;\n  opt.scale = symbolSize;\n  var symbolOffset = hostModel.get('symbolOffset');\n\n  if (symbolOffset) {\n    var pos = opt.position = opt.position || [0, 0];\n    pos[0] += numberUtil.parsePercent(symbolOffset[0], symbolSize[0]);\n    pos[1] += numberUtil.parsePercent(symbolOffset[1], symbolSize[1]);\n  }\n\n  var symbolRotate = hostModel.get('symbolRotate');\n  opt.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  symbol.attr(opt); // FIXME\n  // (1) When symbol.style.strokeNoScale is true and updateTransform is not performed,\n  // getBoundingRect will return wrong result.\n  // (This is supposed to be resolved in zrender, but it is a little difficult to\n  // leverage performance and auto updateTransform)\n  // (2) All of ancesters of symbol do not scale, so we can just updateTransform symbol.\n\n  symbol.updateTransform();\n  return symbol;\n}\n\nfunction pointerMoveTo(pointer, dataIndex, axis, timelineModel, noAnimation) {\n  if (pointer.dragging) {\n    return;\n  }\n\n  var pointerModel = timelineModel.getModel('checkpointStyle');\n  var toCoord = axis.dataToCoord(timelineModel.getData().get(['value'], dataIndex));\n\n  if (noAnimation || !pointerModel.get('animation', true)) {\n    pointer.attr({\n      position: [toCoord, 0]\n    });\n  } else {\n    pointer.stopAnimation(true);\n    pointer.animateTo({\n      position: [toCoord, 0]\n    }, pointerModel.get('animationDuration', true), pointerModel.get('animationEasing', true));\n  }\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../../coord/Axis\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\n/**\n * Extend axis 2d\n * @constructor module:echarts/coord/cartesian/Axis2D\n * @extends {module:echarts/coord/cartesian/Axis}\n * @param {string} dim\n * @param {*} scale\n * @param {Array.<number>} coordExtent\n * @param {string} axisType\n * @param {string} position\n */\nvar TimelineAxis = function (dim, scale, coordExtent, axisType) {\n  Axis.call(this, dim, scale, coordExtent);\n  /**\n   * Axis type\n   *  - 'category'\n   *  - 'value'\n   *  - 'time'\n   *  - 'log'\n   * @type {string}\n   */\n\n  this.type = axisType || 'value';\n  /**\n   * @private\n   * @type {number}\n   */\n\n  this._autoLabelInterval;\n  /**\n   * Axis model\n   * @param {module:echarts/component/TimelineModel}\n   */\n\n  this.model = null;\n};\n\nTimelineAxis.prototype = {\n  constructor: TimelineAxis,\n\n  /**\n   * @public\n   * @return {number}\n   */\n  getLabelInterval: function () {\n    var timelineModel = this.model;\n    var labelModel = timelineModel.getModel('label.normal');\n    var labelInterval = labelModel.get('interval');\n\n    if (labelInterval != null && labelInterval != 'auto') {\n      return labelInterval;\n    }\n\n    var labelInterval = this._autoLabelInterval;\n\n    if (!labelInterval) {\n      labelInterval = this._autoLabelInterval = axisHelper.getAxisLabelInterval(zrUtil.map(this.scale.getTicks(), this.dataToCoord, this), axisHelper.getFormattedLabels(this, labelModel.get('formatter')), labelModel.getFont(), timelineModel.get('orient') === 'horizontal' ? 0 : 90, labelModel.get('rotate'));\n    }\n\n    return labelInterval;\n  },\n\n  /**\n   * If label is ignored.\n   * Automatically used when axis is category and label can not be all shown\n   * @public\n   * @param  {number} idx\n   * @return {boolean}\n   */\n  isLabelIgnored: function (idx) {\n    if (this.type === 'category') {\n      var labelInterval = this.getLabelInterval();\n      return typeof labelInterval === 'function' && !labelInterval(idx, this.scale.getLabel(idx)) || idx % (labelInterval + 1);\n    }\n  }\n};\nzrUtil.inherits(TimelineAxis, Axis);\nvar _default = TimelineAxis;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\nvar List = require(\"../../data/List\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar TimelineModel = ComponentModel.extend({\n  type: 'timeline',\n  layoutMode: 'box',\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    zlevel: 0,\n    // \n    z: 4,\n    // \n    show: true,\n    axisType: 'time',\n    //  value, category\n    realtime: true,\n    left: '20%',\n    top: null,\n    right: '20%',\n    bottom: 0,\n    width: null,\n    height: 40,\n    padding: 5,\n    controlPosition: 'left',\n    // 'left' 'right' 'top' 'bottom' 'none'\n    autoPlay: false,\n    rewind: false,\n    // \n    loop: true,\n    playInterval: 2000,\n    // ms\n    currentIndex: 0,\n    itemStyle: {\n      normal: {},\n      emphasis: {}\n    },\n    label: {\n      normal: {\n        color: '#000'\n      },\n      emphasis: {}\n    },\n    data: []\n  },\n\n  /**\n   * @override\n   */\n  init: function (option, parentModel, ecModel) {\n    /**\n     * @private\n     * @type {module:echarts/data/List}\n     */\n    this._data;\n    /**\n     * @private\n     * @type {Array.<string>}\n     */\n\n    this._names;\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._initData();\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function (option) {\n    TimelineModel.superApply(this, 'mergeOption', arguments);\n\n    this._initData();\n  },\n\n  /**\n   * @param {number} [currentIndex]\n   */\n  setCurrentIndex: function (currentIndex) {\n    if (currentIndex == null) {\n      currentIndex = this.option.currentIndex;\n    }\n\n    var count = this._data.count();\n\n    if (this.option.loop) {\n      currentIndex = (currentIndex % count + count) % count;\n    } else {\n      currentIndex >= count && (currentIndex = count - 1);\n      currentIndex < 0 && (currentIndex = 0);\n    }\n\n    this.option.currentIndex = currentIndex;\n  },\n\n  /**\n   * @return {number} currentIndex\n   */\n  getCurrentIndex: function () {\n    return this.option.currentIndex;\n  },\n\n  /**\n   * @return {boolean}\n   */\n  isIndexMax: function () {\n    return this.getCurrentIndex() >= this._data.count() - 1;\n  },\n\n  /**\n   * @param {boolean} state true: play, false: stop\n   */\n  setPlayState: function (state) {\n    this.option.autoPlay = !!state;\n  },\n\n  /**\n   * @return {boolean} true: play, false: stop\n   */\n  getPlayState: function () {\n    return !!this.option.autoPlay;\n  },\n\n  /**\n   * @private\n   */\n  _initData: function () {\n    var thisOption = this.option;\n    var dataArr = thisOption.data || [];\n    var axisType = thisOption.axisType;\n    var names = this._names = [];\n\n    if (axisType === 'category') {\n      var idxArr = [];\n      zrUtil.each(dataArr, function (item, index) {\n        var value = modelUtil.getDataItemValue(item);\n        var newItem;\n\n        if (zrUtil.isObject(item)) {\n          newItem = zrUtil.clone(item);\n          newItem.value = index;\n        } else {\n          newItem = index;\n        }\n\n        idxArr.push(newItem);\n\n        if (!zrUtil.isString(value) && (value == null || isNaN(value))) {\n          value = '';\n        }\n\n        names.push(value + '');\n      });\n      dataArr = idxArr;\n    }\n\n    var dimType = {\n      category: 'ordinal',\n      time: 'time'\n    }[axisType] || 'number';\n    var data = this._data = new List([{\n      name: 'value',\n      type: dimType\n    }], this);\n    data.initData(dataArr, names);\n  },\n  getData: function () {\n    return this._data;\n  },\n\n  /**\n   * @public\n   * @return {Array.<string>} categoreis\n   */\n  getCategories: function () {\n    if (this.get('axisType') === 'category') {\n      return this._names.slice();\n    }\n  }\n});\nvar _default = TimelineModel;\nmodule.exports = _default;","var ComponentView = require(\"../../view/Component\");\n\nvar _default = ComponentView.extend({\n  type: 'timeline'\n});\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nfunction _default(option) {\n  var timelineOpt = option && option.timeline;\n\n  if (!zrUtil.isArray(timelineOpt)) {\n    timelineOpt = timelineOpt ? [timelineOpt] : [];\n  }\n\n  zrUtil.each(timelineOpt, function (opt) {\n    if (!opt) {\n      return;\n    }\n\n    compatibleEC2(opt);\n  });\n}\n\nfunction compatibleEC2(opt) {\n  var type = opt.type;\n  var ec2Types = {\n    'number': 'value',\n    'time': 'time'\n  }; // Compatible with ec2\n\n  if (ec2Types[type]) {\n    opt.axisType = ec2Types[type];\n    delete opt.type;\n  }\n\n  transferItem(opt);\n\n  if (has(opt, 'controlPosition')) {\n    var controlStyle = opt.controlStyle || (opt.controlStyle = {});\n\n    if (!has(controlStyle, 'position')) {\n      controlStyle.position = opt.controlPosition;\n    }\n\n    if (controlStyle.position === 'none' && !has(controlStyle, 'show')) {\n      controlStyle.show = false;\n      delete controlStyle.position;\n    }\n\n    delete opt.controlPosition;\n  }\n\n  zrUtil.each(opt.data || [], function (dataItem) {\n    if (zrUtil.isObject(dataItem) && !zrUtil.isArray(dataItem)) {\n      if (!has(dataItem, 'value') && has(dataItem, 'name')) {\n        // In ec2, using name as value.\n        dataItem.value = dataItem.name;\n      }\n\n      transferItem(dataItem);\n    }\n  });\n}\n\nfunction transferItem(opt) {\n  var itemStyle = opt.itemStyle || (opt.itemStyle = {});\n  var itemStyleEmphasis = itemStyle.emphasis || (itemStyle.emphasis = {}); // Transfer label out\n\n  var label = opt.label || opt.label || {};\n  var labelNormal = label.normal || (label.normal = {});\n  var excludeLabelAttr = {\n    normal: 1,\n    emphasis: 1\n  };\n  zrUtil.each(label, function (value, name) {\n    if (!excludeLabelAttr[name] && !has(labelNormal, name)) {\n      labelNormal[name] = value;\n    }\n  });\n\n  if (itemStyleEmphasis.label && !has(label, 'emphasis')) {\n    label.emphasis = itemStyleEmphasis.label;\n    delete itemStyleEmphasis.label;\n  }\n}\n\nfunction has(obj, attr) {\n  return obj.hasOwnProperty(attr);\n}\n\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\necharts.registerAction({\n  type: 'timelineChange',\n  event: 'timelineChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var timelineModel = ecModel.getComponent('timeline');\n\n  if (timelineModel && payload.currentIndex != null) {\n    timelineModel.setCurrentIndex(payload.currentIndex);\n\n    if (!timelineModel.get('loop', true) && timelineModel.isIndexMax()) {\n      timelineModel.setPlayState(false);\n    }\n  } // Set normalized currentIndex to payload.\n\n\n  ecModel.resetOption('timeline');\n  return zrUtil.defaults({\n    currentIndex: timelineModel.option.currentIndex\n  }, payload);\n});\necharts.registerAction({\n  type: 'timelinePlayChange',\n  event: 'timelinePlayChanged',\n  update: 'update'\n}, function (payload, ecModel) {\n  var timelineModel = ecModel.getComponent('timeline');\n\n  if (timelineModel && payload.playState != null) {\n    timelineModel.setPlayState(payload.playState);\n  }\n});","var Component = require(\"../../model/Component\");\n\nComponent.registerSubTypeDefaulter('timeline', function () {\n  // Only slider now.\n  return 'slider';\n});","var echarts = require(\"../echarts\");\n\nvar graphic = require(\"../util/graphic\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n// Model\necharts.extendComponentModel({\n  type: 'title',\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n  defaultOption: {\n    // \n    zlevel: 0,\n    // \n    z: 6,\n    show: true,\n    text: '',\n    // \n    // link: null,\n    // self | blank\n    target: 'blank',\n    subtext: '',\n    // \n    // sublink: null,\n    // self | blank\n    subtarget: 'blank',\n    // 'center'  'left'  'right'\n    //  {number}xpx\n    left: 0,\n    // 'top'  'bottom'  'center'\n    //  {number}ypx\n    top: 0,\n    // \n    // 'auto' | 'left' | 'right' | 'center'\n    //  left \n    // textAlign: null\n    //\n    // \n    // 'auto' | 'top' | 'bottom' | 'middle'\n    //  top \n    // textBaseline: null\n    backgroundColor: 'rgba(0,0,0,0)',\n    // \n    borderColor: '#ccc',\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // px10\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bolder',\n      color: '#333'\n    },\n    subtextStyle: {\n      color: '#aaa'\n    }\n  }\n}); // View\n\necharts.extendComponentView({\n  type: 'title',\n  render: function (titleModel, ecModel, api) {\n    this.group.removeAll();\n\n    if (!titleModel.get('show')) {\n      return;\n    }\n\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textBaseline = titleModel.get('textBaseline');\n    var textEl = new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: titleModel.get('text'),\n        textFill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: graphic.setTextStyle({}, subtextStyleModel, {\n        text: subText,\n        textFill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        textVerticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    textEl.silent = !link;\n    subTextEl.silent = !sublink;\n\n    if (link) {\n      textEl.on('click', function () {\n        window.open(link, '_' + titleModel.get('target'));\n      });\n    }\n\n    if (sublink) {\n      subTextEl.on('click', function () {\n        window.open(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n\n    group.add(textEl);\n    subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding')); // Adjust text align based on position\n\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right');\n\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      } // Adjust layout by text align\n\n\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n\n    if (!textBaseline) {\n      textBaseline = titleModel.get('top') || titleModel.get('bottom');\n\n      if (textBaseline === 'center') {\n        textBaseline = 'middle';\n      }\n\n      if (textBaseline === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textBaseline === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n\n      textBaseline = textBaseline || 'top';\n    }\n\n    group.attr('position', [layoutRect.x, layoutRect.y]);\n    var alignStyle = {\n      textAlign: textAlign,\n      textVerticalAlign: textBaseline\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle); // Render background\n    // Get groupRect again because textAlign has been changed\n\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      silent: true\n    });\n    graphic.subPixelOptimizeRect(rect);\n    group.add(rect);\n  }\n});","require(\"./toolbox/ToolboxModel\");\n\nrequire(\"./toolbox/ToolboxView\");\n\nrequire(\"./toolbox/feature/SaveAsImage\");\n\nrequire(\"./toolbox/feature/MagicType\");\n\nrequire(\"./toolbox/feature/DataView\");\n\nrequire(\"./toolbox/feature/DataZoom\");\n\nrequire(\"./toolbox/feature/Restore\");","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar featureManager = require(\"./featureManager\");\n\nvar ToolboxModel = echarts.extendComponentModel({\n  type: 'toolbox',\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n  mergeDefaultAndTheme: function (option) {\n    ToolboxModel.superApply(this, 'mergeDefaultAndTheme', arguments);\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.get(featureName);\n      Feature && zrUtil.merge(featureOpt, Feature.defaultOption);\n    });\n  },\n  defaultOption: {\n    show: true,\n    z: 6,\n    zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      normal: {\n        borderColor: '#666',\n        color: 'none'\n      },\n      emphasis: {\n        borderColor: '#3E98C5'\n      } // textStyle: {},\n      // feature\n\n    }\n  }\n});\nvar _default = ToolboxModel;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar featureManager = require(\"./featureManager\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar Model = require(\"../../model/Model\");\n\nvar DataDiffer = require(\"../../data/DataDiffer\");\n\nvar listComponentHelper = require(\"../helper/listComponent\");\n\nvar _default = echarts.extendComponentView({\n  type: 'toolbox',\n  render: function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature;\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            model: featureModel,\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = featureManager.get(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature(featureModel, ecModel, api);\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exsit.\n\n        if (!feature) {\n          return;\n        }\n\n        feature.model = featureModel;\n        feature.ecModel = ecModel;\n        feature.api = api;\n      }\n\n      if (!featureName && oldName) {\n        feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n\n      if (!featureModel.get('show') || feature.unusable) {\n        feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status; // FIXME\n\n        iconPaths[iconName] && iconPaths[iconName].trigger(status);\n      };\n\n      if (feature.render) {\n        feature.render(featureModel, ecModel, api, payload);\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle'); // If one feature has mutiple icon. they are orginaized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n\n      if (typeof icons === 'string') {\n        var icon = icons;\n        var title = titles;\n        icons = {};\n        titles = {};\n        icons[featureName] = icon;\n        titles[featureName] = title;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(icons, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        });\n        path.setStyle(iconStyleModel.getModel('normal').getItemStyle());\n        path.hoverStyle = iconStyleModel.getModel('emphasis').getItemStyle();\n        graphic.setHoverStyle(path);\n\n        if (toolboxModel.get('showTitle')) {\n          path.__title = titles[iconName];\n          path.on('mouseover', function () {\n            // Should not reuse above hoverStyle, which might be modified.\n            var hoverStyle = iconStyleModel.getModel('emphasis').getItemStyle();\n            path.setStyle({\n              text: titles[iconName],\n              textPosition: hoverStyle.textPosition || 'bottom',\n              textFill: hoverStyle.fill || hoverStyle.stroke || '#000',\n              textAlign: hoverStyle.textAlign || 'center'\n            });\n          }).on('mouseout', function () {\n            path.setStyle({\n              textFill: null\n            });\n          });\n        }\n\n        path.trigger(featureModel.get('iconStatus.' + iconName) || 'normal');\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    group.eachChild(function (icon) {\n      var titleText = icon.__title;\n      var hoverStyle = icon.hoverStyle; // May be background element\n\n      if (hoverStyle && titleText) {\n        var rect = textContain.getBoundingRect(titleText, textContain.makeFont(hoverStyle));\n        var offsetX = icon.position[0] + group.position[0];\n        var offsetY = icon.position[1] + group.position[1] + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          hoverStyle.textPosition = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 8;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          hoverStyle.textPosition = ['100%', topOffset];\n          hoverStyle.textAlign = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          hoverStyle.textPosition = [0, topOffset];\n          hoverStyle.textAlign = 'left';\n        }\n      }\n    });\n  },\n  updateView: function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  },\n  updateLayout: function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n    });\n  },\n  remove: function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  },\n  dispose: function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature.dispose && feature.dispose(ecModel, api);\n    });\n  }\n});\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nmodule.exports = _default;","var features = {};\n\nfunction register(name, ctor) {\n  features[name] = ctor;\n}\n\nfunction get(name) {\n  return features[name];\n}\n\nexports.register = register;\nexports.get = get;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar featureManager = require(\"../featureManager\");\n\nvar lang = require(\"../../../lang\");\n\nvar brushLang = lang.toolbox.brush;\n\nfunction Brush(model, ecModel, api) {\n  this.model = model;\n  this.ecModel = ecModel;\n  this.api = api;\n  /**\n   * @private\n   * @type {string}\n   */\n\n  this._brushType;\n  /**\n   * @private\n   * @type {string}\n   */\n\n  this._brushMode;\n}\n\nBrush.defaultOption = {\n  show: true,\n  type: ['rect', 'polygon', 'lineX', 'lineY', 'keep', 'clear'],\n  icon: {\n    rect: 'M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13',\n    // jshint ignore:line\n    polygon: 'M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2',\n    // jshint ignore:line\n    lineX: 'M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4',\n    // jshint ignore:line\n    lineY: 'M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4',\n    // jshint ignore:line\n    keep: 'M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z',\n    // jshint ignore:line\n    clear: 'M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2' // jshint ignore:line\n\n  },\n  // `rect`, `polygon`, `lineX`, `lineY`, `keep`, `clear`\n  title: zrUtil.clone(brushLang.title)\n};\nvar proto = Brush.prototype;\n\nproto.render = proto.updateView = proto.updateLayout = function (featureModel, ecModel, api) {\n  var brushType;\n  var brushMode;\n  var isBrushed;\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel) {\n    brushType = brushModel.brushType;\n    brushMode = brushModel.brushOption.brushMode || 'single';\n    isBrushed |= brushModel.areas.length;\n  });\n  this._brushType = brushType;\n  this._brushMode = brushMode;\n  zrUtil.each(featureModel.get('type', true), function (type) {\n    featureModel.setIconStatus(type, (type === 'keep' ? brushMode === 'multiple' : type === 'clear' ? isBrushed : type === brushType) ? 'emphasis' : 'normal');\n  });\n};\n\nproto.getIcons = function () {\n  var model = this.model;\n  var availableIcons = model.get('icon', true);\n  var icons = {};\n  zrUtil.each(model.get('type', true), function (type) {\n    if (availableIcons[type]) {\n      icons[type] = availableIcons[type];\n    }\n  });\n  return icons;\n};\n\nproto.onclick = function (ecModel, api, type) {\n  var brushType = this._brushType;\n  var brushMode = this._brushMode;\n\n  if (type === 'clear') {\n    // Trigger parallel action firstly\n    api.dispatchAction({\n      type: 'axisAreaSelect',\n      intervals: []\n    });\n    api.dispatchAction({\n      type: 'brush',\n      command: 'clear',\n      // Clear all areas of all brush components.\n      areas: []\n    });\n  } else {\n    api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'brush',\n      brushOption: {\n        brushType: type === 'keep' ? brushType : brushType === type ? false : type,\n        brushMode: type === 'keep' ? brushMode === 'multiple' ? 'single' : 'multiple' : brushMode\n      }\n    });\n  }\n};\n\nfeatureManager.register('brush', Brush);\nvar _default = Brush;\nmodule.exports = _default;","var echarts = require(\"../../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar lang = require(\"../../../lang\");\n\nvar featureManager = require(\"../featureManager\");\n\nvar dataViewLang = lang.toolbox.dataView;\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n * @param {module:echarts/model/Global} ecModel\n * @return {Object}\n * @inner\n */\n\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      var baseAxis = coordSys.getBaseAxis();\n\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @param {Array.<module:echarts/model/Series>} series\n * @return {string}\n * @inner\n */\n\n\nfunction assembleSeriesWithCategoryAxis(series) {\n  var tables = [];\n  zrUtil.each(series, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    }));\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      columns.push(series.getRawData().mapArray(valueAxisDim, function (val) {\n        return val;\n      }));\n    }); // Assemble table content\n\n    var lines = [headers.join(ITEM_SPLITER)];\n\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n\n      lines.push(items.join(ITEM_SPLITER));\n    }\n\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n * @param {Array.<module:echarts/model/Series>} series\n * @return {string}\n * @inner\n */\n\n\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * @param {module:echarts/model/Global}\n * @return {Object}\n * @inner\n */\n\n\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\n\n\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\n\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\n\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n\n  return {\n    series: series,\n    categories: categories\n  };\n}\n/**\n * @param {string} str\n * @return {Array.<Object>}\n * @inner\n */\n\n\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    var items = trim(lines[i]).split(itemSplitRegex);\n    var name = '';\n    var value;\n    var hasName = false;\n\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n\n  return {\n    name: seriesName,\n    data: data\n  };\n}\n/**\n * @param {string} str\n * @param {Array.<Object>} blockMetaList\n * @return {Object}\n * @inner\n */\n\n\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\n/**\n * @alias {module:echarts/component/toolbox/feature/DataView}\n * @constructor\n * @param {module:echarts/model/Model} model\n */\n\n\nfunction DataView(model) {\n  this._dom = null;\n  this.model = model;\n}\n\nDataView.defaultOption = {\n  show: true,\n  readOnly: false,\n  optionToContent: null,\n  contentToOption: null,\n  icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n  title: zrUtil.clone(dataViewLang.title),\n  lang: zrUtil.clone(dataViewLang.lang),\n  backgroundColor: '#fff',\n  textColor: '#000',\n  textareaColor: '#fff',\n  textareaBorderColor: '#333',\n  buttonColor: '#c23531',\n  buttonTextColor: '#fff'\n};\n\nDataView.prototype.onclick = function (ecModel, api) {\n  var container = api.getDom();\n  var model = this.model;\n\n  if (this._dom) {\n    container.removeChild(this._dom);\n  }\n\n  var root = document.createElement('div');\n  root.style.cssText = 'position:absolute;left:5px;top:5px;bottom:5px;right:5px;';\n  root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n  var header = document.createElement('h4');\n  var lang = model.get('lang') || [];\n  header.innerHTML = lang[0] || model.get('title');\n  header.style.cssText = 'margin: 10px 20px;';\n  header.style.color = model.get('textColor');\n  var viewMain = document.createElement('div');\n  var textarea = document.createElement('textarea');\n  viewMain.style.cssText = 'display:block;width:100%;overflow:auto;';\n  var optionToContent = model.get('optionToContent');\n  var contentToOption = model.get('contentToOption');\n  var result = getContentFromModel(ecModel);\n\n  if (typeof optionToContent === 'function') {\n    var htmlOrDom = optionToContent(api.getOption());\n\n    if (typeof htmlOrDom === 'string') {\n      viewMain.innerHTML = htmlOrDom;\n    } else if (zrUtil.isDom(htmlOrDom)) {\n      viewMain.appendChild(htmlOrDom);\n    }\n  } else {\n    // Use default textarea\n    viewMain.appendChild(textarea);\n    textarea.readOnly = model.get('readOnly');\n    textarea.style.cssText = 'width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;';\n    textarea.style.color = model.get('textColor');\n    textarea.style.borderColor = model.get('textareaBorderColor');\n    textarea.style.backgroundColor = model.get('textareaColor');\n    textarea.value = result.value;\n  }\n\n  var blockMetaList = result.meta;\n  var buttonContainer = document.createElement('div');\n  buttonContainer.style.cssText = 'position:absolute;bottom:0;left:0;right:0;';\n  var buttonStyle = 'float:right;margin-right:20px;border:none;' + 'cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n  var closeButton = document.createElement('div');\n  var refreshButton = document.createElement('div');\n  buttonStyle += ';background-color:' + model.get('buttonColor');\n  buttonStyle += ';color:' + model.get('buttonTextColor');\n  var self = this;\n\n  function close() {\n    container.removeChild(root);\n    self._dom = null;\n  }\n\n  eventTool.addEventListener(closeButton, 'click', close);\n  eventTool.addEventListener(refreshButton, 'click', function () {\n    var newOption;\n\n    try {\n      if (typeof contentToOption === 'function') {\n        newOption = contentToOption(viewMain, api.getOption());\n      } else {\n        newOption = parseContents(textarea.value, blockMetaList);\n      }\n    } catch (e) {\n      close();\n      throw new Error('Data view format error ' + e);\n    }\n\n    if (newOption) {\n      api.dispatchAction({\n        type: 'changeDataView',\n        newOption: newOption\n      });\n    }\n\n    close();\n  });\n  closeButton.innerHTML = lang[1];\n  refreshButton.innerHTML = lang[2];\n  refreshButton.style.cssText = buttonStyle;\n  closeButton.style.cssText = buttonStyle;\n  !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n  buttonContainer.appendChild(closeButton); // http://stackoverflow.com/questions/6637341/use-tab-to-indent-in-textarea\n\n  eventTool.addEventListener(textarea, 'keydown', function (e) {\n    if ((e.keyCode || e.which) === 9) {\n      // get caret position/selection\n      var val = this.value;\n      var start = this.selectionStart;\n      var end = this.selectionEnd; // set textarea value to: text before caret + tab + text after caret\n\n      this.value = val.substring(0, start) + ITEM_SPLITER + val.substring(end); // put caret at right position again\n\n      this.selectionStart = this.selectionEnd = start + 1; // prevent the focus lose\n\n      eventTool.stop(e);\n    }\n  });\n  root.appendChild(header);\n  root.appendChild(viewMain);\n  root.appendChild(buttonContainer);\n  viewMain.style.height = container.clientHeight - 80 + 'px';\n  container.appendChild(root);\n  this._dom = root;\n};\n\nDataView.prototype.remove = function (ecModel, api) {\n  this._dom && api.getDom().removeChild(this._dom);\n};\n\nDataView.prototype.dispose = function (ecModel, api) {\n  this.remove(ecModel, api);\n};\n/**\n * @inner\n */\n\n\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      if (zrUtil.isObject(newVal) && !zrUtil.isArray(newVal)) {\n        newVal = newVal.value;\n      } // Original data has option\n\n\n      return zrUtil.defaults({\n        value: newVal\n      }, original);\n    } else {\n      return newVal;\n    }\n  });\n}\n\nfeatureManager.register('dataView', DataView);\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nvar _default = DataView;\nmodule.exports = _default;","var echarts = require(\"../../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BrushController = require(\"../../helper/BrushController\");\n\nvar BrushTargetManager = require(\"../../helper/BrushTargetManager\");\n\nvar history = require(\"../../dataZoom/history\");\n\nvar sliderMove = require(\"../../helper/sliderMove\");\n\nvar lang = require(\"../../../lang\");\n\nvar featureManager = require(\"../featureManager\");\n\nrequire(\"../../dataZoomSelect\");\n\n// Use dataZoomSelect\nvar dataZoomLang = lang.toolbox.dataZoom;\nvar each = zrUtil.each; // Spectial component id start with \\0ec\\0, see echarts/model/Global.js~hasInnerId\n\nvar DATA_ZOOM_ID_BASE = '\\0_ec_\\0toolbox-dataZoom_';\n\nfunction DataZoom(model, ecModel, api) {\n  /**\n   * @private\n   * @type {module:echarts/component/helper/BrushController}\n   */\n  (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this)).mount();\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  this._isZoomActive;\n}\n\nDataZoom.defaultOption = {\n  show: true,\n  // Icon group\n  icon: {\n    zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n    back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n  },\n  // `zoom`, `back`\n  title: zrUtil.clone(dataZoomLang.title)\n};\nvar proto = DataZoom.prototype;\n\nproto.render = function (featureModel, ecModel, api, payload) {\n  this.model = featureModel;\n  this.ecModel = ecModel;\n  this.api = api;\n  updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n  updateBackBtnStatus(featureModel, ecModel);\n};\n\nproto.onclick = function (ecModel, api, type) {\n  handlers[type].call(this);\n};\n\nproto.remove = function (ecModel, api) {\n  this._brushController.unmount();\n};\n\nproto.dispose = function (ecModel, api) {\n  this._brushController.dispose();\n};\n/**\n * @private\n */\n\n\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\n/**\n * @private\n */\n\nproto._onBrush = function (areas, opt) {\n  if (!opt.isEnd || !areas.length) {\n    return;\n  }\n\n  var snapshot = {};\n  var ecModel = this.ecModel;\n\n  this._brushController.updateCovers([]); // remove cover\n\n\n  var brushTargetManager = new BrushTargetManager(retrieveAxisSetting(this.model.option), ecModel, {\n    include: ['grid']\n  });\n  brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n    if (coordSys.type !== 'cartesian2d') {\n      return;\n    }\n\n    var brushType = area.brushType;\n\n    if (brushType === 'rect') {\n      setBatch('x', coordSys, coordRange[0]);\n      setBatch('y', coordSys, coordRange[1]);\n    } else {\n      setBatch({\n        lineX: 'x',\n        lineY: 'y'\n      }[brushType], coordSys, coordRange);\n    }\n  });\n  history.push(ecModel, snapshot);\n\n  this._dispatchZoomAction(snapshot);\n\n  function setBatch(dimName, coordSys, minMax) {\n    var axis = coordSys.getAxis(dimName);\n    var axisModel = axis.model;\n    var dataZoomModel = findDataZoom(dimName, axisModel, ecModel); // Restrict range.\n\n    var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n\n    if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n      minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n    }\n\n    dataZoomModel && (snapshot[dataZoomModel.id] = {\n      dataZoomId: dataZoomModel.id,\n      startValue: minMax[0],\n      endValue: minMax[1]\n    });\n  }\n\n  function findDataZoom(dimName, axisModel, ecModel) {\n    var found;\n    ecModel.eachComponent({\n      mainType: 'dataZoom',\n      subType: 'select'\n    }, function (dzModel) {\n      var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n      has && (found = dzModel);\n    });\n    return found;\n  }\n};\n/**\n * @private\n */\n\n\nproto._dispatchZoomAction = function (snapshot) {\n  var batch = []; // Convert from hash map to array.\n\n  each(snapshot, function (batchItem, dataZoomId) {\n    batch.push(zrUtil.clone(batchItem));\n  });\n  batch.length && this.api.dispatchAction({\n    type: 'dataZoom',\n    from: this.uid,\n    batch: batch\n  });\n};\n\nfunction retrieveAxisSetting(option) {\n  var setting = {}; // Compatible with previous setting: null => all axis, false => no axis.\n\n  zrUtil.each(['xAxisIndex', 'yAxisIndex'], function (name) {\n    setting[name] = option[name];\n    setting[name] == null && (setting[name] = 'all');\n    (setting[name] === false || setting[name] === 'none') && (setting[name] = []);\n  });\n  return setting;\n}\n\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\n\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(retrieveAxisSetting(featureModel.option), ecModel, {\n    include: ['grid']\n  });\n\n  view._brushController.setPanels(brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  })).enableBrush(zoomActive ? {\n    brushType: 'auto',\n    brushStyle: {\n      // FIXME user customized?\n      lineWidth: 0,\n      fill: 'rgba(0,0,0,0.2)'\n    }\n  } : false);\n}\n\nfeatureManager.register('dataZoom', DataZoom); // Create special dataZoom option for select\n\necharts.registerPreprocessor(function (option) {\n  if (!option) {\n    return;\n  }\n\n  var dataZoomOpts = option.dataZoom || (option.dataZoom = []);\n\n  if (!zrUtil.isArray(dataZoomOpts)) {\n    option.dataZoom = dataZoomOpts = [dataZoomOpts];\n  }\n\n  var toolboxOpt = option.toolbox;\n\n  if (toolboxOpt) {\n    // Assume there is only one toolbox\n    if (zrUtil.isArray(toolboxOpt)) {\n      toolboxOpt = toolboxOpt[0];\n    }\n\n    if (toolboxOpt && toolboxOpt.feature) {\n      var dataZoomOpt = toolboxOpt.feature.dataZoom;\n      addForAxis('xAxis', dataZoomOpt);\n      addForAxis('yAxis', dataZoomOpt);\n    }\n  }\n\n  function addForAxis(axisName, dataZoomOpt) {\n    if (!dataZoomOpt) {\n      return;\n    } // Try not to modify model, because it is not merged yet.\n\n\n    var axisIndicesName = axisName + 'Index';\n    var givenAxisIndices = dataZoomOpt[axisIndicesName];\n\n    if (givenAxisIndices != null && givenAxisIndices != 'all' && !zrUtil.isArray(givenAxisIndices)) {\n      givenAxisIndices = givenAxisIndices === false || givenAxisIndices === 'none' ? [] : [givenAxisIndices];\n    }\n\n    forEachComponent(axisName, function (axisOpt, axisIndex) {\n      if (givenAxisIndices != null && givenAxisIndices != 'all' && zrUtil.indexOf(givenAxisIndices, axisIndex) === -1) {\n        return;\n      }\n\n      var newOpt = {\n        type: 'select',\n        $fromToolbox: true,\n        // Id for merge mapping.\n        id: DATA_ZOOM_ID_BASE + axisName + axisIndex\n      }; // FIXME\n      // Only support one axis now.\n\n      newOpt[axisIndicesName] = axisIndex;\n      dataZoomOpts.push(newOpt);\n    });\n  }\n\n  function forEachComponent(mainType, cb) {\n    var opts = option[mainType];\n\n    if (!zrUtil.isArray(opts)) {\n      opts = opts ? [opts] : [];\n    }\n\n    each(opts, cb);\n  }\n});\nvar _default = DataZoom;\nmodule.exports = _default;","var echarts = require(\"../../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar lang = require(\"../../../lang\");\n\nvar featureManager = require(\"../featureManager\");\n\nvar magicTypeLang = lang.toolbox.magicType;\n\nfunction MagicType(model) {\n  this.model = model;\n}\n\nMagicType.defaultOption = {\n  show: true,\n  type: [],\n  // Icon group\n  icon: {\n    line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n    bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n    stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z',\n    // jshint ignore:line\n    tiled: 'M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z'\n  },\n  // `line`, `bar`, `stack`, `tiled`\n  title: zrUtil.clone(magicTypeLang.title),\n  option: {},\n  seriesIndex: {}\n};\nvar proto = MagicType.prototype;\n\nproto.getIcons = function () {\n  var model = this.model;\n  var availableIcons = model.get('icon');\n  var icons = {};\n  zrUtil.each(model.get('type'), function (type) {\n    if (availableIcons[type]) {\n      icons[type] = availableIcons[type];\n    }\n  });\n  return icons;\n};\n\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get('option.line') || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get('option.bar') || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line' || seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        stack: '__ec_magicType_stack__'\n      }, model.get('option.stack') || {}, true);\n    }\n  },\n  'tiled': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line' || seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        stack: ''\n      }, model.get('option.tiled') || {}, true);\n    }\n  }\n};\nvar radioTypes = [['line', 'bar'], ['stack', 'tiled']];\n\nproto.onclick = function (ecModel, api, type) {\n  var model = this.model;\n  var seriesIndex = model.get('seriesIndex.' + type); // Not supported magicType\n\n  if (!seriesOptGenreator[type]) {\n    return;\n  }\n\n  var newOption = {\n    series: []\n  };\n\n  var generateNewSeriesTypes = function (seriesModel) {\n    var seriesType = seriesModel.subType;\n    var seriesId = seriesModel.id;\n    var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n\n    if (newSeriesOpt) {\n      // PENDING If merge original option?\n      zrUtil.defaults(newSeriesOpt, seriesModel.option);\n      newOption.series.push(newSeriesOpt);\n    } // Modify boundaryGap\n\n\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n      var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n      if (categoryAxis) {\n        var axisDim = categoryAxis.dim;\n        var axisType = axisDim + 'Axis';\n        var axisModel = ecModel.queryComponents({\n          mainType: axisType,\n          index: seriesModel.get(name + 'Index'),\n          id: seriesModel.get(name + 'Id')\n        })[0];\n        var axisIndex = axisModel.componentIndex;\n        newOption[axisType] = newOption[axisType] || [];\n\n        for (var i = 0; i <= axisIndex; i++) {\n          newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n        }\n\n        newOption[axisType][axisIndex].boundaryGap = type === 'bar' ? true : false;\n      }\n    }\n  };\n\n  zrUtil.each(radioTypes, function (radio) {\n    if (zrUtil.indexOf(radio, type) >= 0) {\n      zrUtil.each(radio, function (item) {\n        model.setIconStatus(item, 'normal');\n      });\n    }\n  });\n  model.setIconStatus(type, 'emphasis');\n  ecModel.eachComponent({\n    mainType: 'series',\n    query: seriesIndex == null ? null : {\n      seriesIndex: seriesIndex\n    }\n  }, generateNewSeriesTypes);\n  api.dispatchAction({\n    type: 'changeMagicType',\n    currentType: type,\n    newOption: newOption\n  });\n};\n\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nfeatureManager.register('magicType', MagicType);\nvar _default = MagicType;\nmodule.exports = _default;","var echarts = require(\"../../../echarts\");\n\nvar history = require(\"../../dataZoom/history\");\n\nvar lang = require(\"../../../lang\");\n\nvar featureManager = require(\"../featureManager\");\n\nvar restoreLang = lang.toolbox.restore;\n\nfunction Restore(model) {\n  this.model = model;\n}\n\nRestore.defaultOption = {\n  show: true,\n  icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n  title: restoreLang.title\n};\nvar proto = Restore.prototype;\n\nproto.onclick = function (ecModel, api, type) {\n  history.clear(ecModel);\n  api.dispatchAction({\n    type: 'restore',\n    from: this.uid\n  });\n};\n\nfeatureManager.register('restore', Restore);\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nvar _default = Restore;\nmodule.exports = _default;","var env = require(\"zrender/lib/core/env\");\n\nvar lang = require(\"../../../lang\");\n\nvar featureManager = require(\"../featureManager\");\n\nvar saveAsImageLang = lang.toolbox.saveAsImage;\n\nfunction SaveAsImage(model) {\n  this.model = model;\n}\n\nSaveAsImage.defaultOption = {\n  show: true,\n  icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n  title: saveAsImageLang.title,\n  type: 'png',\n  // Default use option.backgroundColor\n  // backgroundColor: '#fff',\n  name: '',\n  excludeComponents: ['toolbox'],\n  pixelRatio: 1,\n  lang: saveAsImageLang.lang.slice()\n};\nSaveAsImage.prototype.unusable = !env.canvasSupported;\nvar proto = SaveAsImage.prototype;\n\nproto.onclick = function (ecModel, api) {\n  var model = this.model;\n  var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n  var $a = document.createElement('a');\n  var type = model.get('type', true) || 'png';\n  $a.download = title + '.' + type;\n  $a.target = '_blank';\n  var url = api.getConnectedDataURL({\n    type: type,\n    backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n    excludeComponents: model.get('excludeComponents'),\n    pixelRatio: model.get('pixelRatio')\n  });\n  $a.href = url; // Chrome and Firefox\n\n  if (typeof MouseEvent === 'function' && !env.browser.ie && !env.browser.edge) {\n    var evt = new MouseEvent('click', {\n      view: window,\n      bubbles: true,\n      cancelable: false\n    });\n    $a.dispatchEvent(evt);\n  } // IE\n  else {\n      if (window.navigator.msSaveOrOpenBlob) {\n        var bstr = atob(url.split(',')[1]);\n        var n = bstr.length;\n        var u8arr = new Uint8Array(n);\n\n        while (n--) {\n          u8arr[n] = bstr.charCodeAt(n);\n        }\n\n        var blob = new Blob([u8arr]);\n        window.navigator.msSaveOrOpenBlob(blob, title + '.' + type);\n      } else {\n        var lang = model.get('lang');\n        var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n        var tab = window.open();\n        tab.document.write(html);\n      }\n    }\n};\n\nfeatureManager.register('saveAsImage', SaveAsImage);\nvar _default = SaveAsImage;\nmodule.exports = _default;","var echarts = require(\"../echarts\");\n\nrequire(\"./axisPointer\");\n\nrequire(\"./tooltip/TooltipModel\");\n\nrequire(\"./tooltip/TooltipView\");\n\n// FIXME Better way to pack data in graphic element\n\n/**\n * @action\n * @property {string} type\n * @property {number} seriesIndex\n * @property {number} dataIndex\n * @property {number} [x]\n * @property {number} [y]\n */\necharts.registerAction({\n  type: 'showTip',\n  event: 'showTip',\n  update: 'tooltip:manuallyShowTip'\n}, // noop\nfunction () {});\necharts.registerAction({\n  type: 'hideTip',\n  event: 'hideTip',\n  update: 'tooltip:manuallyHideTip'\n}, // noop\nfunction () {});","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar eventUtil = require(\"zrender/lib/core/event\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar each = zrUtil.each;\nvar toCamelCase = formatUtil.toCamelCase;\nvar vendors = ['', '-webkit-', '-moz-', '-o-'];\nvar gCssText = 'position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;';\n/**\n * @param {number} duration\n * @return {string}\n * @inner\n */\n\nfunction assembleTransition(duration) {\n  var transitionCurve = 'cubic-bezier(0.23, 1, 0.32, 1)';\n  var transitionText = 'left ' + duration + 's ' + transitionCurve + ',' + 'top ' + duration + 's ' + transitionCurve;\n  return zrUtil.map(vendors, function (vendorPrefix) {\n    return vendorPrefix + 'transition:' + transitionText;\n  }).join(';');\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n/**\n * @param {Object} tooltipModel\n * @return {string}\n * @inner\n */\n\n\nfunction assembleCssText(tooltipModel) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = tooltipModel.get('padding'); // Animation transition. Do not animate when transitionDuration is 0.\n\n  transitionDuration && cssText.push(assembleTransition(transitionDuration));\n\n  if (backgroundColor) {\n    if (env.canvasSupported) {\n      cssText.push('background-Color:' + backgroundColor);\n    } else {\n      // for ie\n      cssText.push('background-Color:#' + zrColor.toHex(backgroundColor));\n      cssText.push('filter:alpha(opacity=70)');\n    }\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + formatUtil.normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n}\n/**\n * @alias module:echarts/component/tooltip/TooltipContent\n * @constructor\n */\n\n\nfunction TooltipContent(container, api) {\n  var el = document.createElement('div');\n  var zr = this._zr = api.getZr();\n  this.el = el;\n  this._x = api.getWidth() / 2;\n  this._y = api.getHeight() / 2;\n  container.appendChild(el);\n  this._container = container;\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout;\n  var self = this;\n\n  el.onmouseenter = function () {\n    // clear the timeout in hideLater and keep showing tooltip\n    if (self._enterable) {\n      clearTimeout(self._hideTimeout);\n      self._show = true;\n    }\n\n    self._inContent = true;\n  };\n\n  el.onmousemove = function (e) {\n    e = e || window.event;\n\n    if (!self._enterable) {\n      // Try trigger zrender event to avoid mouse\n      // in and out shape too frequently\n      var handler = zr.handler;\n      eventUtil.normalizeEvent(container, e, true);\n      handler.dispatch('mousemove', e);\n    }\n  };\n\n  el.onmouseleave = function () {\n    if (self._enterable) {\n      if (self._show) {\n        self.hideLater(self._hideDelay);\n      }\n    }\n\n    self._inContent = false;\n  };\n}\n\nTooltipContent.prototype = {\n  constructor: TooltipContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var stl = container.currentStyle || document.defaultView.getComputedStyle(container);\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && stl.position !== 'absolute') {\n      domStyle.position = 'relative';\n    } // Hide the tooltip\n    // PENDING\n    // this.hide();\n\n  },\n  show: function (tooltipModel) {\n    clearTimeout(this._hideTimeout);\n    var el = this.el;\n    el.style.cssText = gCssText + assembleCssText(tooltipModel) // http://stackoverflow.com/questions/21125587/css3-transition-not-working-in-chrome-anymore\n    + ';left:' + this._x + 'px;top:' + this._y + 'px;' + (tooltipModel.get('extraCssText') || '');\n    el.style.display = el.innerHTML ? 'block' : 'none';\n    this._show = true;\n  },\n  setContent: function (content) {\n    this.el.innerHTML = content == null ? '' : content;\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var el = this.el;\n    return [el.clientWidth, el.clientHeight];\n  },\n  moveTo: function (x, y) {\n    // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n    var zr = this._zr;\n    var viewportRootOffset;\n\n    if (zr && zr.painter && (viewportRootOffset = zr.painter.getViewportRootOffset())) {\n      x += viewportRootOffset.offsetLeft;\n      y += viewportRootOffset.offsetTop;\n    }\n\n    var style = this.el.style;\n    style.left = x + 'px';\n    style.top = y + 'px';\n    this._x = x;\n    this._y = y;\n  },\n  hide: function () {\n    this.el.style.display = 'none';\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  }\n};\nvar _default = TooltipContent;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar _default = echarts.extendComponentModel({\n  type: 'tooltip',\n  dependencies: ['axisPointer'],\n  defaultOption: {\n    zlevel: 0,\n    z: 8,\n    show: true,\n    // tooltip\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    // 'single' | 'multipleByCoordSys'\n    //  {Array} | {Function}\n    // position: null\n    // Consider triggered from axisPointer handle, verticalAlign should be 'middle'\n    // align: null,\n    // verticalAlign: null,\n    //  content  viewRect  false \n    confine: false,\n    // {string}Template  {Function}\n    // formatter: null\n    showDelay: 0,\n    // ms\n    hideDelay: 100,\n    // s\n    transitionDuration: 0.4,\n    enterable: false,\n    // 0.7\n    backgroundColor: 'rgba(50,50,50,0.7)',\n    // \n    borderColor: '#333',\n    // px4\n    borderRadius: 4,\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // Extra css text\n    extraCssText: '',\n    // \n    axisPointer: {\n      // \n      // 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // type  line  tooltip line \n      //  'x' | 'y' | 'angle' | 'radius' | 'auto'\n      //  'auto' cateogry  x \n      //  angle \n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {} // lineStyle and shadowStyle should not be specified here,\n        // otherwise it will always override those styles on option.axisPointer.\n\n      }\n    },\n    textStyle: {\n      color: '#fff',\n      fontSize: 14\n    }\n  }\n});\n\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar TooltipContent = require(\"./TooltipContent\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar findPointFromSeries = require(\"../axisPointer/findPointFromSeries\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar Model = require(\"../../model/Model\");\n\nvar globalListener = require(\"../axisPointer/globalListener\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar axisPointerViewHelper = require(\"../axisPointer/viewHelper\");\n\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar parsePercent = numberUtil.parsePercent;\nvar proxyRect = new graphic.Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar _default = echarts.extendComponentView({\n  type: 'tooltip',\n  init: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    var tooltipContent = new TooltipContent(api.getDom(), api);\n    this._tooltipContent = tooltipContent;\n  },\n  render: function (tooltipModel, ecModel, api) {\n    if (env.node) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    /**\n     * @private\n     * @type {module:echarts/component/tooltip/TooltipModel}\n     */\n\n    this._tooltipModel = tooltipModel;\n    /**\n     * @private\n     * @type {module:echarts/model/Global}\n     */\n\n    this._ecModel = ecModel;\n    /**\n     * @private\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this._api = api;\n    /**\n     * Should be cleaned when render.\n     * @private\n     * @type {Array.<Array.<Object>>}\n     */\n\n    this._lastDataByCoordSys = null;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update();\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow();\n  },\n  _initGlobalListener: function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  },\n  _keepShow: function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api; // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && tooltipModel.get('triggerOn') !== 'none') {\n      var self = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        self.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self._lastX,\n          y: self._lastY\n        });\n      });\n    }\n  },\n\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  manuallyShowTip: function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n\n    if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.position = [payload.x, payload.y];\n      el.update();\n      el.tooltip = payload.tooltip; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        event: {},\n        dataByCoordSys: payload.dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          position: payload.position,\n          target: pointInfo.el,\n          event: {}\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target,\n        event: {}\n      }, dispatchAction);\n    }\n  },\n  manuallyHideTip: function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  },\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  _manuallyAxisShowTip: function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model, tooltipModel]);\n\n    if (tooltipModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  },\n  _tryShow: function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } // Always show item tooltip if mouse is on the element with dataIndex\n    else if (el && el.dataIndex != null) {\n        this._lastDataByCoordSys = null;\n\n        this._showSeriesItemTooltip(e, el, dispatchAction);\n      } // Tooltip provided directly. Like legend.\n      else if (el && el.tooltip) {\n          this._lastDataByCoordSys = null;\n\n          this._showComponentItemTooltip(e, el, dispatchAction);\n        } else {\n          this._lastDataByCoordSys = null;\n\n          this._hide(dispatchAction);\n        }\n  },\n  _showOrMove: function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easyer to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = zrUtil.bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  },\n  _showAxisTooltip: function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleDefaultHTML = [];\n    var singleParamsList = [];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption, globalTooltipModel]);\n    each(dataByCoordSys, function (itemCoordSys) {\n      // var coordParamList = [];\n      // var coordDefaultHTML = [];\n      // var coordTooltipModel = buildTooltipModel([\n      //     e.tooltipOption,\n      //     itemCoordSys.tooltipOption,\n      //     ecModel.getComponent(itemCoordSys.coordSysMainType, itemCoordSys.coordSysIndex),\n      //     globalTooltipModel\n      // ]);\n      // var displayMode = coordTooltipModel.get('displayMode');\n      // var paramsList = displayMode === 'single' ? singleParamsList : [];\n      each(itemCoordSys.dataByAxis, function (item) {\n        var axisModel = ecModel.getComponent(item.axisDim + 'Axis', item.axisIndex);\n        var axisValue = item.value;\n        var seriesDefaultHTML = [];\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var valueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, item.seriesDataIndices, item.valueLabelOpt);\n        zrUtil.each(item.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var dataParams = series && series.getDataParams(dataIndex);\n          dataParams.axisDim = item.axisDim;\n          dataParams.axisIndex = item.axisIndex;\n          dataParams.axisType = item.axisType;\n          dataParams.axisId = item.axisId;\n          dataParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, axisValue);\n          dataParams.axisValueLabel = valueLabel;\n\n          if (dataParams) {\n            singleParamsList.push(dataParams);\n            seriesDefaultHTML.push(series.formatTooltip(dataIndex, true));\n          }\n        }); // Default tooltip content\n        // FIXME\n        // (1) shold be the first data which has name?\n        // (2) themeRiver, firstDataIndex is array, and first line is unnecessary.\n\n        var firstLine = valueLabel;\n        singleDefaultHTML.push((firstLine ? formatUtil.encodeHTML(firstLine) + '<br />' : '') + seriesDefaultHTML.join('<br />'));\n      });\n    }, this); // In most case, the second axis is shown upper than the first one.\n\n    singleDefaultHTML.reverse();\n    singleDefaultHTML = singleDefaultHTML.join('<br /><br />');\n    var positionExpr = e.position;\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, singleParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, singleDefaultHTML, singleParamsList, Math.random(), point[0], point[1], positionExpr);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  },\n  _showSeriesItemTooltip: function (e, el, dispatchAction) {\n    var ecModel = this._ecModel; // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = el.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = el.dataModel || seriesModel;\n    var dataIndex = el.dataIndex;\n    var dataType = el.dataType;\n    var data = dataModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model, this._tooltipModel]);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var defaultHtml = dataModel.formatTooltip(dataIndex, false, dataType);\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, defaultHtml, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  },\n  _showComponentItemTooltip: function (e, el, dispatchAction) {\n    var tooltipOpt = el.tooltip;\n\n    if (typeof tooltipOpt === 'string') {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var subTooltipModel = new Model(tooltipOpt, this._tooltipModel, this._ecModel);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on cooridinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      this._showTooltipContent(subTooltipModel, defaultHtml, subTooltipModel.get('formatterParams') || {}, asyncTicket, e.offsetX, e.offsetY, e.position, el);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  },\n  _showTooltipContent: function (tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    if (formatter && typeof formatter === 'string') {\n      html = formatUtil.formatTpl(formatter, params, true);\n    } else if (typeof formatter === 'function') {\n      var callback = bind(function (cbTicket, html) {\n        if (cbTicket === this._ticket) {\n          tooltipContent.setContent(html);\n\n          this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n        }\n      }, this);\n      this._ticket = asyncTicket;\n      html = formatter(params, asyncTicket, callback);\n    }\n\n    tooltipContent.setContent(html);\n    tooltipContent.show(tooltipModel);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  },\n\n  /**\n   * @param  {string|Function|Array.<number>|Object} positionExpr\n   * @param  {number} x Mouse x\n   * @param  {number} y Mouse y\n   * @param  {boolean} confine Whether confine tooltip content in view rect.\n   * @param  {Object|<Array.<Object>} params\n   * @param  {module:zrender/Element} el target element\n   * @param  {module:echarts/ExtensionAPI} api\n   * @return {Array.<number>}\n   */\n  _updatePosition: function (tooltipModel, positionExpr, x, y, content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (typeof positionExpr === 'function') {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (zrUtil.isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (zrUtil.isObject(positionExpr)) {\n      positionExpr.width = contentSize[0];\n      positionExpr.height = contentSize[1];\n      var layoutRect = layoutUtil.getLayoutRect(positionExpr, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (typeof positionExpr === 'string' && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize);\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content.el, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (tooltipModel.get('confine')) {\n      var pos = confineTooltipPosition(x, y, content.el, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  },\n  // FIXME\n  // Should we remove this but leave this to user?\n  _updateContentNotChangedOnAxis: function (dataByCoordSys) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || {};\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged &= lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged &= lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged &= lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    return !!contentNotChanged;\n  },\n  _hide: function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  },\n  dispose: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    this._tooltipContent.hide();\n\n    globalListener.unregister('itemTooltip', api);\n  }\n});\n/**\n * @param {Array.<Object|module:echarts/model/Model>} modelCascade\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade) {\n  var resultModel = modelCascade.pop();\n\n  while (modelCascade.length) {\n    var tooltipOpt = modelCascade.pop();\n\n    if (tooltipOpt) {\n      if (tooltipOpt instanceof Model) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (typeof tooltipOpt === 'string') {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      resultModel = new Model(tooltipOpt, resultModel, resultModel.ecModel);\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, el, viewWidth, viewHeight, gapH, gapV) {\n  var size = getOuterSize(el);\n  var width = size.width;\n  var height = size.height;\n\n  if (gapH != null) {\n    if (x + width + gapH > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, el, viewWidth, viewHeight) {\n  var size = getOuterSize(el);\n  var width = size.width;\n  var height = size.height;\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction getOuterSize(el) {\n  var width = el.clientWidth;\n  var height = el.clientHeight; // Consider browser compatibility.\n  // IE8 does not support getComputedStyle.\n\n  if (document.defaultView && document.defaultView.getComputedStyle) {\n    var stl = document.defaultView.getComputedStyle(el);\n\n    if (stl) {\n      width += parseInt(stl.paddingLeft, 10) + parseInt(stl.paddingRight, 10) + parseInt(stl.borderLeftWidth, 10) + parseInt(stl.borderRightWidth, 10);\n      height += parseInt(stl.paddingTop, 10) + parseInt(stl.paddingBottom, 10) + parseInt(stl.borderTopWidth, 10) + parseInt(stl.borderBottomWidth, 10);\n    }\n  }\n\n  return {\n    width: width,\n    height: height\n  };\n}\n\nfunction calcTooltipPosition(position, rect, contentSize) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var gap = 5;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - gap;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + gap;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n\nmodule.exports = _default;","require(\"./visualMapContinuous\");\n\nrequire(\"./visualMapPiecewise\");","var echarts = require(\"../echarts\");\n\nvar preprocessor = require(\"./visualMap/preprocessor\");\n\nrequire(\"./visualMap/typeDefaulter\");\n\nrequire(\"./visualMap/visualEncoding\");\n\nrequire(\"./visualMap/ContinuousModel\");\n\nrequire(\"./visualMap/ContinuousView\");\n\nrequire(\"./visualMap/visualMapAction\");\n\n/**\n * DataZoom component entry\n */\necharts.registerPreprocessor(preprocessor);","var echarts = require(\"../echarts\");\n\nvar preprocessor = require(\"./visualMap/preprocessor\");\n\nrequire(\"./visualMap/typeDefaulter\");\n\nrequire(\"./visualMap/visualEncoding\");\n\nrequire(\"./visualMap/PiecewiseModel\");\n\nrequire(\"./visualMap/PiecewiseView\");\n\nrequire(\"./visualMap/visualMapAction\");\n\n/**\n * DataZoom component entry\n */\necharts.registerPreprocessor(preprocessor);","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapModel = require(\"./VisualMapModel\");\n\nvar numberUtil = require(\"../../util/number\");\n\n// Constant\nvar DEFAULT_BAR_BOUND = [20, 140];\nvar ContinuousModel = VisualMapModel.extend({\n  type: 'visualMap.continuous',\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    align: 'auto',\n    // 'auto', 'left', 'right', 'top', 'bottom'\n    calculable: false,\n    // This prop effect default component type determine,\n    // See echarts/component/visualMap/typeDefaulter.\n    range: null,\n    // selected range. In default case `range` is [min, max]\n    // and can auto change along with modification of min max,\n    // util use specifid a range.\n    realtime: true,\n    // Whether realtime update.\n    itemHeight: null,\n    // The length of the range control edge.\n    itemWidth: null,\n    // The length of the other side.\n    hoverLink: true,\n    // Enable hover highlight.\n    hoverLinkDataSize: null,\n    // The size of hovered data.\n    hoverLinkOnHandle: null // Whether trigger hoverLink when hover handle.\n    // If not specified, follow the value of `realtime`.\n\n  },\n\n  /**\n   * @override\n   */\n  optionUpdated: function (newOption, isInit) {\n    ContinuousModel.superApply(this, 'optionUpdated', arguments);\n    this.resetExtent();\n    this.resetVisual(function (mappingOption) {\n      mappingOption.mappingMethod = 'linear';\n      mappingOption.dataExtent = this.getExtent();\n    });\n\n    this._resetRange();\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  resetItemSize: function () {\n    ContinuousModel.superApply(this, 'resetItemSize', arguments);\n    var itemSize = this.itemSize;\n    this._orient === 'horizontal' && itemSize.reverse();\n    (itemSize[0] == null || isNaN(itemSize[0])) && (itemSize[0] = DEFAULT_BAR_BOUND[0]);\n    (itemSize[1] == null || isNaN(itemSize[1])) && (itemSize[1] = DEFAULT_BAR_BOUND[1]);\n  },\n\n  /**\n   * @private\n   */\n  _resetRange: function () {\n    var dataExtent = this.getExtent();\n    var range = this.option.range;\n\n    if (!range || range.auto) {\n      // `range` should always be array (so we dont use other\n      // value like 'auto') for user-friend. (consider getOption).\n      dataExtent.auto = 1;\n      this.option.range = dataExtent;\n    } else if (zrUtil.isArray(range)) {\n      if (range[0] > range[1]) {\n        range.reverse();\n      }\n\n      range[0] = Math.max(range[0], dataExtent[0]);\n      range[1] = Math.min(range[1], dataExtent[1]);\n    }\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  completeVisualOption: function () {\n    VisualMapModel.prototype.completeVisualOption.apply(this, arguments);\n    zrUtil.each(this.stateList, function (state) {\n      var symbolSize = this.option.controller[state].symbolSize;\n\n      if (symbolSize && symbolSize[0] !== symbolSize[1]) {\n        symbolSize[0] = 0; // For good looking.\n      }\n    }, this);\n  },\n\n  /**\n   * @override\n   */\n  setSelected: function (selected) {\n    this.option.range = selected.slice();\n\n    this._resetRange();\n  },\n\n  /**\n   * @public\n   */\n  getSelected: function () {\n    var dataExtent = this.getExtent();\n    var dataInterval = numberUtil.asc((this.get('range') || []).slice()); // Clamp\n\n    dataInterval[0] > dataExtent[1] && (dataInterval[0] = dataExtent[1]);\n    dataInterval[1] > dataExtent[1] && (dataInterval[1] = dataExtent[1]);\n    dataInterval[0] < dataExtent[0] && (dataInterval[0] = dataExtent[0]);\n    dataInterval[1] < dataExtent[0] && (dataInterval[1] = dataExtent[0]);\n    return dataInterval;\n  },\n\n  /**\n   * @override\n   */\n  getValueState: function (value) {\n    var range = this.option.range;\n    var dataExtent = this.getExtent(); // When range[0] === dataExtent[0], any value larger than dataExtent[0] maps to 'inRange'.\n    // range[1] is processed likewise.\n\n    return (range[0] <= dataExtent[0] || range[0] <= value) && (range[1] >= dataExtent[1] || value <= range[1]) ? 'inRange' : 'outOfRange';\n  },\n\n  /**\n   * @params {Array.<number>} range target value: range[0] <= value && value <= range[1]\n   * @return {Array.<Object>} [{seriesId, dataIndices: <Array.<number>>}, ...]\n   */\n  findTargetDataIndices: function (range) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimension(data), function (value, dataIndex) {\n        range[0] <= value && value <= range[1] && dataIndices.push(dataIndex);\n      }, true, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  },\n\n  /**\n   * @implement\n   */\n  getVisualMeta: function (getColorVisual) {\n    var oVals = getColorStopValues(this, 'outOfRange', this.getExtent());\n    var iVals = getColorStopValues(this, 'inRange', this.option.range.slice());\n    var stops = [];\n\n    function setStop(value, valueState) {\n      stops.push({\n        value: value,\n        color: getColorVisual(value, valueState)\n      });\n    } // Format to: outOfRange -- inRange -- outOfRange.\n\n\n    var iIdx = 0;\n    var oIdx = 0;\n    var iLen = iVals.length;\n    var oLen = oVals.length;\n\n    for (; oIdx < oLen && (!iVals.length || oVals[oIdx] <= iVals[0]); oIdx++) {\n      // If oVal[oIdx] === iVals[iIdx], oVal[oIdx] should be ignored.\n      if (oVals[oIdx] < iVals[iIdx]) {\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    for (var first = 1; iIdx < iLen; iIdx++, first = 0) {\n      // If range is full, value beyond min, max will be clamped.\n      // make a singularity\n      first && stops.length && setStop(iVals[iIdx], 'outOfRange');\n      setStop(iVals[iIdx], 'inRange');\n    }\n\n    for (var first = 1; oIdx < oLen; oIdx++) {\n      if (!iVals.length || iVals[iVals.length - 1] < oVals[oIdx]) {\n        // make a singularity\n        if (first) {\n          stops.length && setStop(stops[stops.length - 1].value, 'outOfRange');\n          first = 0;\n        }\n\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    var stopsLen = stops.length;\n    return {\n      stops: stops,\n      outerColors: [stopsLen ? stops[0].color : 'transparent', stopsLen ? stops[stopsLen - 1].color : 'transparent']\n    };\n  }\n});\n\nfunction getColorStopValues(visualMapModel, valueState, dataExtent) {\n  if (dataExtent[0] === dataExtent[1]) {\n    return dataExtent.slice();\n  } // When using colorHue mapping, it is not linear color any more.\n  // Moreover, canvas gradient seems not to be accurate linear.\n  // FIXME\n  // Should be arbitrary value 100? or based on pixel size?\n\n\n  var count = 200;\n  var step = (dataExtent[1] - dataExtent[0]) / count;\n  var value = dataExtent[0];\n  var stopValues = [];\n\n  for (var i = 0; i <= count && value < dataExtent[1]; i++) {\n    stopValues.push(value);\n    value += step;\n  }\n\n  stopValues.push(dataExtent[1]);\n  return stopValues;\n}\n\nvar _default = ContinuousModel;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar LinearGradient = require(\"zrender/lib/graphic/LinearGradient\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar VisualMapView = require(\"./VisualMapView\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar sliderMove = require(\"../helper/sliderMove\");\n\nvar helper = require(\"./helper\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar linearMap = numberUtil.linearMap;\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max; // Arbitrary value\n\nvar HOVER_LINK_SIZE = 12;\nvar HOVER_LINK_OUT = 6; // Notice:\n// Any \"interval\" should be by the order of [low, high].\n// \"handle0\" (handleIndex === 0) maps to\n// low data value: this._dataInterval[0] and has low coord.\n// \"handle1\" (handleIndex === 1) maps to\n// high data value: this._dataInterval[1] and has high coord.\n// The logic of transform is implemented in this._createBarGroup.\n\nvar ContinuousView = VisualMapView.extend({\n  type: 'visualMap.continuous',\n\n  /**\n   * @override\n   */\n  init: function () {\n    ContinuousView.superApply(this, 'init', arguments);\n    /**\n     * @private\n     */\n\n    this._shapes = {};\n    /**\n     * @private\n     */\n\n    this._dataInterval = [];\n    /**\n     * @private\n     */\n\n    this._handleEnds = [];\n    /**\n     * @private\n     */\n\n    this._orient;\n    /**\n     * @private\n     */\n\n    this._useHandle;\n    /**\n     * @private\n     */\n\n    this._hoverLinkDataIndices = [];\n    /**\n     * @private\n     */\n\n    this._dragging;\n    /**\n     * @private\n     */\n\n    this._hovering;\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  doRender: function (visualMapModel, ecModel, api, payload) {\n    if (!payload || payload.type !== 'selectDataRange' || payload.from !== this.uid) {\n      this._buildView();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _buildView: function () {\n    this.group.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var thisGroup = this.group;\n    this._orient = visualMapModel.get('orient');\n    this._useHandle = visualMapModel.get('calculable');\n\n    this._resetInterval();\n\n    this._renderBar(thisGroup);\n\n    var dataRangeText = visualMapModel.get('text');\n\n    this._renderEndsText(thisGroup, dataRangeText, 0);\n\n    this._renderEndsText(thisGroup, dataRangeText, 1); // Do this for background size calculation.\n\n\n    this._updateView(true); // After updating view, inner shapes is built completely,\n    // and then background can be rendered.\n\n\n    this.renderBackground(thisGroup); // Real update view\n\n    this._updateView();\n\n    this._enableHoverLinkToSeries();\n\n    this._enableHoverLinkFromSeries();\n\n    this.positionGroup(thisGroup);\n  },\n\n  /**\n   * @private\n   */\n  _renderEndsText: function (group, dataRangeText, endsIndex) {\n    if (!dataRangeText) {\n      return;\n    } // Compatible with ec2, text[0] map to high value, text[1] map low value.\n\n\n    var text = dataRangeText[1 - endsIndex];\n    text = text != null ? text + '' : '';\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var itemSize = visualMapModel.itemSize;\n    var barGroup = this._shapes.barGroup;\n\n    var position = this._applyTransform([itemSize[0] / 2, endsIndex === 0 ? -textGap : itemSize[1] + textGap], barGroup);\n\n    var align = this._applyTransform(endsIndex === 0 ? 'bottom' : 'top', barGroup);\n\n    var orient = this._orient;\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    this.group.add(new graphic.Text({\n      style: {\n        x: position[0],\n        y: position[1],\n        textVerticalAlign: orient === 'horizontal' ? 'middle' : align,\n        textAlign: orient === 'horizontal' ? align : 'center',\n        text: text,\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    }));\n  },\n\n  /**\n   * @private\n   */\n  _renderBar: function (targetGroup) {\n    var visualMapModel = this.visualMapModel;\n    var shapes = this._shapes;\n    var itemSize = visualMapModel.itemSize;\n    var orient = this._orient;\n    var useHandle = this._useHandle;\n    var itemAlign = helper.getItemAlign(visualMapModel, this.api, itemSize);\n\n    var barGroup = shapes.barGroup = this._createBarGroup(itemAlign); // Bar\n\n\n    barGroup.add(shapes.outOfRange = createPolygon());\n    barGroup.add(shapes.inRange = createPolygon(null, useHandle ? getCursor(this._orient) : null, zrUtil.bind(this._dragHandle, this, 'all', false), zrUtil.bind(this._dragHandle, this, 'all', true)));\n    var textRect = visualMapModel.textStyleModel.getTextRect('');\n    var textSize = mathMax(textRect.width, textRect.height); // Handle\n\n    if (useHandle) {\n      shapes.handleThumbs = [];\n      shapes.handleLabels = [];\n      shapes.handleLabelPoints = [];\n\n      this._createHandle(barGroup, 0, itemSize, textSize, orient, itemAlign);\n\n      this._createHandle(barGroup, 1, itemSize, textSize, orient, itemAlign);\n    }\n\n    this._createIndicator(barGroup, itemSize, textSize, orient);\n\n    targetGroup.add(barGroup);\n  },\n\n  /**\n   * @private\n   */\n  _createHandle: function (barGroup, handleIndex, itemSize, textSize, orient) {\n    var onDrift = zrUtil.bind(this._dragHandle, this, handleIndex, false);\n    var onDragEnd = zrUtil.bind(this._dragHandle, this, handleIndex, true);\n    var handleThumb = createPolygon(createHandlePoints(handleIndex, textSize), getCursor(this._orient), onDrift, onDragEnd);\n    handleThumb.position[0] = itemSize[0];\n    barGroup.add(handleThumb); // Text is always horizontal layout but should not be effected by\n    // transform (orient/inverse). So label is built separately but not\n    // use zrender/graphic/helper/RectText, and is located based on view\n    // group (according to handleLabelPoint) but not barGroup.\n\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var handleLabel = new graphic.Text({\n      draggable: true,\n      drift: onDrift,\n      onmousemove: function (e) {\n        // Fot mobile devicem, prevent screen slider on the button.\n        eventTool.stop(e.event);\n      },\n      ondragend: onDragEnd,\n      style: {\n        x: 0,\n        y: 0,\n        text: '',\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    });\n    this.group.add(handleLabel);\n    var handleLabelPoint = [orient === 'horizontal' ? textSize / 2 : textSize * 1.5, orient === 'horizontal' ? handleIndex === 0 ? -(textSize * 1.5) : textSize * 1.5 : handleIndex === 0 ? -textSize / 2 : textSize / 2];\n    var shapes = this._shapes;\n    shapes.handleThumbs[handleIndex] = handleThumb;\n    shapes.handleLabelPoints[handleIndex] = handleLabelPoint;\n    shapes.handleLabels[handleIndex] = handleLabel;\n  },\n\n  /**\n   * @private\n   */\n  _createIndicator: function (barGroup, itemSize, textSize, orient) {\n    var indicator = createPolygon([[0, 0]], 'move');\n    indicator.position[0] = itemSize[0];\n    indicator.attr({\n      invisible: true,\n      silent: true\n    });\n    barGroup.add(indicator);\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var indicatorLabel = new graphic.Text({\n      silent: true,\n      invisible: true,\n      style: {\n        x: 0,\n        y: 0,\n        text: '',\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    });\n    this.group.add(indicatorLabel);\n    var indicatorLabelPoint = [orient === 'horizontal' ? textSize / 2 : HOVER_LINK_OUT + 3, 0];\n    var shapes = this._shapes;\n    shapes.indicator = indicator;\n    shapes.indicatorLabel = indicatorLabel;\n    shapes.indicatorLabelPoint = indicatorLabelPoint;\n  },\n\n  /**\n   * @private\n   */\n  _dragHandle: function (handleIndex, isEnd, dx, dy) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    this._dragging = !isEnd;\n\n    if (!isEnd) {\n      // Transform dx, dy to bar coordination.\n      var vertex = this._applyTransform([dx, dy], this._shapes.barGroup, true);\n\n      this._updateInterval(handleIndex, vertex[1]); // Considering realtime, update view should be executed\n      // before dispatch action.\n\n\n      this._updateView();\n    } // dragEnd do not dispatch action when realtime.\n\n\n    if (isEnd === !this.visualMapModel.get('realtime')) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'selectDataRange',\n        from: this.uid,\n        visualMapId: this.visualMapModel.id,\n        selected: this._dataInterval.slice()\n      });\n    }\n\n    if (isEnd) {\n      !this._hovering && this._clearHoverLinkToSeries();\n    } else if (useHoverLinkOnHandle(this.visualMapModel)) {\n      this._doHoverLinkToSeries(this._handleEnds[handleIndex], false);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _resetInterval: function () {\n    var visualMapModel = this.visualMapModel;\n    var dataInterval = this._dataInterval = visualMapModel.getSelected();\n    var dataExtent = visualMapModel.getExtent();\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    this._handleEnds = [linearMap(dataInterval[0], dataExtent, sizeExtent, true), linearMap(dataInterval[1], dataExtent, sizeExtent, true)];\n  },\n\n  /**\n   * @private\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\n   * @param {number} dx\n   * @param {number} dy\n   */\n  _updateInterval: function (handleIndex, delta) {\n    delta = delta || 0;\n    var visualMapModel = this.visualMapModel;\n    var handleEnds = this._handleEnds;\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    sliderMove(delta, handleEnds, sizeExtent, handleIndex, // cross is forbiden\n    0);\n    var dataExtent = visualMapModel.getExtent(); // Update data interval.\n\n    this._dataInterval = [linearMap(handleEnds[0], sizeExtent, dataExtent, true), linearMap(handleEnds[1], sizeExtent, dataExtent, true)];\n  },\n\n  /**\n   * @private\n   */\n  _updateView: function (forSketch) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var shapes = this._shapes;\n    var outOfRangeHandleEnds = [0, visualMapModel.itemSize[1]];\n    var inRangeHandleEnds = forSketch ? outOfRangeHandleEnds : this._handleEnds;\n\n    var visualInRange = this._createBarVisual(this._dataInterval, dataExtent, inRangeHandleEnds, 'inRange');\n\n    var visualOutOfRange = this._createBarVisual(dataExtent, dataExtent, outOfRangeHandleEnds, 'outOfRange');\n\n    shapes.inRange.setStyle({\n      fill: visualInRange.barColor,\n      opacity: visualInRange.opacity\n    }).setShape('points', visualInRange.barPoints);\n    shapes.outOfRange.setStyle({\n      fill: visualOutOfRange.barColor,\n      opacity: visualOutOfRange.opacity\n    }).setShape('points', visualOutOfRange.barPoints);\n\n    this._updateHandle(inRangeHandleEnds, visualInRange);\n  },\n\n  /**\n   * @private\n   */\n  _createBarVisual: function (dataInterval, dataExtent, handleEnds, forceState) {\n    var opts = {\n      forceState: forceState,\n      convertOpacityToAlpha: true\n    };\n\n    var colorStops = this._makeColorGradient(dataInterval, opts);\n\n    var symbolSizes = [this.getControllerVisual(dataInterval[0], 'symbolSize', opts), this.getControllerVisual(dataInterval[1], 'symbolSize', opts)];\n\n    var barPoints = this._createBarPoints(handleEnds, symbolSizes);\n\n    return {\n      barColor: new LinearGradient(0, 0, 0, 1, colorStops),\n      barPoints: barPoints,\n      handlesColor: [colorStops[0].color, colorStops[colorStops.length - 1].color]\n    };\n  },\n\n  /**\n   * @private\n   */\n  _makeColorGradient: function (dataInterval, opts) {\n    // Considering colorHue, which is not linear, so we have to sample\n    // to calculate gradient color stops, but not only caculate head\n    // and tail.\n    var sampleNumber = 100; // Arbitrary value.\n\n    var colorStops = [];\n    var step = (dataInterval[1] - dataInterval[0]) / sampleNumber;\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[0], 'color', opts),\n      offset: 0\n    });\n\n    for (var i = 1; i < sampleNumber; i++) {\n      var currValue = dataInterval[0] + step * i;\n\n      if (currValue > dataInterval[1]) {\n        break;\n      }\n\n      colorStops.push({\n        color: this.getControllerVisual(currValue, 'color', opts),\n        offset: i / sampleNumber\n      });\n    }\n\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[1], 'color', opts),\n      offset: 1\n    });\n    return colorStops;\n  },\n\n  /**\n   * @private\n   */\n  _createBarPoints: function (handleEnds, symbolSizes) {\n    var itemSize = this.visualMapModel.itemSize;\n    return [[itemSize[0] - symbolSizes[0], handleEnds[0]], [itemSize[0], handleEnds[0]], [itemSize[0], handleEnds[1]], [itemSize[0] - symbolSizes[1], handleEnds[1]]];\n  },\n\n  /**\n   * @private\n   */\n  _createBarGroup: function (itemAlign) {\n    var orient = this._orient;\n    var inverse = this.visualMapModel.get('inverse');\n    return new graphic.Group(orient === 'horizontal' && !inverse ? {\n      scale: itemAlign === 'bottom' ? [1, 1] : [-1, 1],\n      rotation: Math.PI / 2\n    } : orient === 'horizontal' && inverse ? {\n      scale: itemAlign === 'bottom' ? [-1, 1] : [1, 1],\n      rotation: -Math.PI / 2\n    } : orient === 'vertical' && !inverse ? {\n      scale: itemAlign === 'left' ? [1, -1] : [-1, -1]\n    } : {\n      scale: itemAlign === 'left' ? [1, 1] : [-1, 1]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _updateHandle: function (handleEnds, visualInRange) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    var shapes = this._shapes;\n    var visualMapModel = this.visualMapModel;\n    var handleThumbs = shapes.handleThumbs;\n    var handleLabels = shapes.handleLabels;\n    each([0, 1], function (handleIndex) {\n      var handleThumb = handleThumbs[handleIndex];\n      handleThumb.setStyle('fill', visualInRange.handlesColor[handleIndex]);\n      handleThumb.position[1] = handleEnds[handleIndex]; // Update handle label position.\n\n      var textPoint = graphic.applyTransform(shapes.handleLabelPoints[handleIndex], graphic.getTransform(handleThumb, this.group));\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        text: visualMapModel.formatValueText(this._dataInterval[handleIndex]),\n        textVerticalAlign: 'middle',\n        textAlign: this._applyTransform(this._orient === 'horizontal' ? handleIndex === 0 ? 'bottom' : 'top' : 'left', shapes.barGroup)\n      });\n    }, this);\n  },\n\n  /**\n   * @private\n   * @param {number} cursorValue\n   * @param {number} textValue\n   * @param {string} [rangeSymbol]\n   * @param {number} [halfHoverLinkSize]\n   */\n  _showIndicator: function (cursorValue, textValue, rangeSymbol, halfHoverLinkSize) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var itemSize = visualMapModel.itemSize;\n    var sizeExtent = [0, itemSize[1]];\n    var pos = linearMap(cursorValue, dataExtent, sizeExtent, true);\n    var shapes = this._shapes;\n    var indicator = shapes.indicator;\n\n    if (!indicator) {\n      return;\n    }\n\n    indicator.position[1] = pos;\n    indicator.attr('invisible', false);\n    indicator.setShape('points', createIndicatorPoints(!!rangeSymbol, halfHoverLinkSize, pos, itemSize[1]));\n    var opts = {\n      convertOpacityToAlpha: true\n    };\n    var color = this.getControllerVisual(cursorValue, 'color', opts);\n    indicator.setStyle('fill', color); // Update handle label position.\n\n    var textPoint = graphic.applyTransform(shapes.indicatorLabelPoint, graphic.getTransform(indicator, this.group));\n    var indicatorLabel = shapes.indicatorLabel;\n    indicatorLabel.attr('invisible', false);\n\n    var align = this._applyTransform('left', shapes.barGroup);\n\n    var orient = this._orient;\n    indicatorLabel.setStyle({\n      text: (rangeSymbol ? rangeSymbol : '') + visualMapModel.formatValueText(textValue),\n      textVerticalAlign: orient === 'horizontal' ? align : 'middle',\n      textAlign: orient === 'horizontal' ? 'center' : align,\n      x: textPoint[0],\n      y: textPoint[1]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _enableHoverLinkToSeries: function () {\n    var self = this;\n\n    this._shapes.barGroup.on('mousemove', function (e) {\n      self._hovering = true;\n\n      if (!self._dragging) {\n        var itemSize = self.visualMapModel.itemSize;\n\n        var pos = self._applyTransform([e.offsetX, e.offsetY], self._shapes.barGroup, true, true); // For hover link show when hover handle, which might be\n        // below or upper than sizeExtent.\n\n\n        pos[1] = mathMin(mathMax(0, pos[1]), itemSize[1]);\n\n        self._doHoverLinkToSeries(pos[1], 0 <= pos[0] && pos[0] <= itemSize[0]);\n      }\n    }).on('mouseout', function () {\n      // When mouse is out of handle, hoverLink still need\n      // to be displayed when realtime is set as false.\n      self._hovering = false;\n      !self._dragging && self._clearHoverLinkToSeries();\n    });\n  },\n\n  /**\n   * @private\n   */\n  _enableHoverLinkFromSeries: function () {\n    var zr = this.api.getZr();\n\n    if (this.visualMapModel.option.hoverLink) {\n      zr.on('mouseover', this._hoverLinkFromSeriesMouseOver, this);\n      zr.on('mouseout', this._hideIndicator, this);\n    } else {\n      this._clearHoverLinkFromSeries();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _doHoverLinkToSeries: function (cursorPos, hoverOnBar) {\n    var visualMapModel = this.visualMapModel;\n    var itemSize = visualMapModel.itemSize;\n\n    if (!visualMapModel.option.hoverLink) {\n      return;\n    }\n\n    var sizeExtent = [0, itemSize[1]];\n    var dataExtent = visualMapModel.getExtent(); // For hover link show when hover handle, which might be below or upper than sizeExtent.\n\n    cursorPos = mathMin(mathMax(sizeExtent[0], cursorPos), sizeExtent[1]);\n    var halfHoverLinkSize = getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent);\n    var hoverRange = [cursorPos - halfHoverLinkSize, cursorPos + halfHoverLinkSize];\n    var cursorValue = linearMap(cursorPos, sizeExtent, dataExtent, true);\n    var valueRange = [linearMap(hoverRange[0], sizeExtent, dataExtent, true), linearMap(hoverRange[1], sizeExtent, dataExtent, true)]; // Consider data range is out of visualMap range, see test/visualMap-continuous.html,\n    // where china and india has very large population.\n\n    hoverRange[0] < sizeExtent[0] && (valueRange[0] = -Infinity);\n    hoverRange[1] > sizeExtent[1] && (valueRange[1] = Infinity); // Do not show indicator when mouse is over handle,\n    // otherwise labels overlap, especially when dragging.\n\n    if (hoverOnBar) {\n      if (valueRange[0] === -Infinity) {\n        this._showIndicator(cursorValue, valueRange[1], '< ', halfHoverLinkSize);\n      } else if (valueRange[1] === Infinity) {\n        this._showIndicator(cursorValue, valueRange[0], '> ', halfHoverLinkSize);\n      } else {\n        this._showIndicator(cursorValue, cursorValue, ' ', halfHoverLinkSize);\n      }\n    } // When realtime is set as false, handles, which are in barGroup,\n    // also trigger hoverLink, which help user to realize where they\n    // focus on when dragging. (see test/heatmap-large.html)\n    // When realtime is set as true, highlight will not show when hover\n    // handle, because the label on handle, which displays a exact value\n    // but not range, might mislead users.\n\n\n    var oldBatch = this._hoverLinkDataIndices;\n    var newBatch = [];\n\n    if (hoverOnBar || useHoverLinkOnHandle(visualMapModel)) {\n      newBatch = this._hoverLinkDataIndices = visualMapModel.findTargetDataIndices(valueRange);\n    }\n\n    var resultBatches = modelUtil.compressBatches(oldBatch, newBatch);\n\n    this._dispatchHighDown('downplay', helper.convertDataIndex(resultBatches[0]));\n\n    this._dispatchHighDown('highlight', helper.convertDataIndex(resultBatches[1]));\n  },\n\n  /**\n   * @private\n   */\n  _hoverLinkFromSeriesMouseOver: function (e) {\n    var el = e.target;\n    var visualMapModel = this.visualMapModel;\n\n    if (!el || el.dataIndex == null) {\n      return;\n    }\n\n    var dataModel = this.ecModel.getSeriesByIndex(el.seriesIndex);\n\n    if (!visualMapModel.isTargetSeries(dataModel)) {\n      return;\n    }\n\n    var data = dataModel.getData(el.dataType);\n    var dim = data.getDimension(visualMapModel.getDataDimension(data));\n    var value = data.get(dim, el.dataIndex, true);\n\n    if (!isNaN(value)) {\n      this._showIndicator(value, value);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _hideIndicator: function () {\n    var shapes = this._shapes;\n    shapes.indicator && shapes.indicator.attr('invisible', true);\n    shapes.indicatorLabel && shapes.indicatorLabel.attr('invisible', true);\n  },\n\n  /**\n   * @private\n   */\n  _clearHoverLinkToSeries: function () {\n    this._hideIndicator();\n\n    var indices = this._hoverLinkDataIndices;\n\n    this._dispatchHighDown('downplay', helper.convertDataIndex(indices));\n\n    indices.length = 0;\n  },\n\n  /**\n   * @private\n   */\n  _clearHoverLinkFromSeries: function () {\n    this._hideIndicator();\n\n    var zr = this.api.getZr();\n    zr.off('mouseover', this._hoverLinkFromSeriesMouseOver);\n    zr.off('mouseout', this._hideIndicator);\n  },\n\n  /**\n   * @private\n   */\n  _applyTransform: function (vertex, element, inverse, global) {\n    var transform = graphic.getTransform(element, global ? null : this.group);\n    return graphic[zrUtil.isArray(vertex) ? 'applyTransform' : 'transformDirection'](vertex, transform, inverse);\n  },\n\n  /**\n   * @private\n   */\n  _dispatchHighDown: function (type, batch) {\n    batch && batch.length && this.api.dispatchAction({\n      type: type,\n      batch: batch\n    });\n  },\n\n  /**\n   * @override\n   */\n  dispose: function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  },\n\n  /**\n   * @override\n   */\n  remove: function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  }\n});\n\nfunction createPolygon(points, cursor, onDrift, onDragEnd) {\n  return new graphic.Polygon({\n    shape: {\n      points: points\n    },\n    draggable: !!onDrift,\n    cursor: cursor,\n    drift: onDrift,\n    onmousemove: function (e) {\n      // Fot mobile devicem, prevent screen slider on the button.\n      eventTool.stop(e.event);\n    },\n    ondragend: onDragEnd\n  });\n}\n\nfunction createHandlePoints(handleIndex, textSize) {\n  return handleIndex === 0 ? [[0, 0], [textSize, 0], [textSize, -textSize]] : [[0, 0], [textSize, 0], [textSize, textSize]];\n}\n\nfunction createIndicatorPoints(isRange, halfHoverLinkSize, pos, extentMax) {\n  return isRange ? [// indicate range\n  [0, -mathMin(halfHoverLinkSize, mathMax(pos, 0))], [HOVER_LINK_OUT, 0], [0, mathMin(halfHoverLinkSize, mathMax(extentMax - pos, 0))]] : [// indicate single value\n  [0, 0], [5, -5], [5, 5]];\n}\n\nfunction getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent) {\n  var halfHoverLinkSize = HOVER_LINK_SIZE / 2;\n  var hoverLinkDataSize = visualMapModel.get('hoverLinkDataSize');\n\n  if (hoverLinkDataSize) {\n    halfHoverLinkSize = linearMap(hoverLinkDataSize, dataExtent, sizeExtent, true) / 2;\n  }\n\n  return halfHoverLinkSize;\n}\n\nfunction useHoverLinkOnHandle(visualMapModel) {\n  var hoverLinkOnHandle = visualMapModel.get('hoverLinkOnHandle');\n  return !!(hoverLinkOnHandle == null ? visualMapModel.get('realtime') : hoverLinkOnHandle);\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nvar _default = ContinuousView;\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapModel = require(\"./VisualMapModel\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\nvar visualDefault = require(\"../../visual/visualDefault\");\n\nvar _number = require(\"../../util/number\");\n\nvar reformIntervals = _number.reformIntervals;\nvar PiecewiseModel = VisualMapModel.extend({\n  type: 'visualMap.piecewise',\n\n  /**\n   * Order Rule:\n   *\n   * option.categories / option.pieces / option.text / option.selected:\n   *     If !option.inverse,\n   *     Order when vertical: ['top', ..., 'bottom'].\n   *     Order when horizontal: ['left', ..., 'right'].\n   *     If option.inverse, the meaning of\n   *     the order should be reversed.\n   *\n   * this._pieceList:\n   *     The order is always [low, ..., high].\n   *\n   * Mapping from location to low-high:\n   *     If !option.inverse\n   *     When vertical, top is high.\n   *     When horizontal, right is high.\n   *     If option.inverse, reverse.\n   */\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    selected: null,\n    // Object. If not specified, means selected.\n    // When pieces and splitNumber: {'0': true, '5': true}\n    // When categories: {'cate1': false, 'cate3': true}\n    // When selected === false, means all unselected.\n    minOpen: false,\n    // Whether include values that smaller than `min`.\n    maxOpen: false,\n    // Whether include values that bigger than `max`.\n    align: 'auto',\n    // 'auto', 'left', 'right'\n    itemWidth: 20,\n    // When put the controller vertically, it is the length of\n    // horizontal side of each item. Otherwise, vertical side.\n    itemHeight: 14,\n    // When put the controller vertically, it is the length of\n    // vertical side of each item. Otherwise, horizontal side.\n    itemSymbol: 'roundRect',\n    pieceList: null,\n    // Each item is Object, with some of those attrs:\n    // {min, max, lt, gt, lte, gte, value,\n    // color, colorSaturation, colorAlpha, opacity,\n    // symbol, symbolSize}, which customize the range or visual\n    // coding of the certain piece. Besides, see \"Order Rule\".\n    categories: null,\n    // category names, like: ['some1', 'some2', 'some3'].\n    // Attr min/max are ignored when categories set. See \"Order Rule\"\n    splitNumber: 5,\n    // If set to 5, auto split five pieces equally.\n    // If set to 0 and component type not set, component type will be\n    // determined as \"continuous\". (It is less reasonable but for ec2\n    // compatibility, see echarts/component/visualMap/typeDefaulter)\n    selectedMode: 'multiple',\n    // Can be 'multiple' or 'single'.\n    itemGap: 10,\n    // The gap between two items, in px.\n    hoverLink: true,\n    // Enable hover highlight.\n    showLabel: null // By default, when text is used, label will hide (the logic\n    // is remained for compatibility reason)\n\n  },\n\n  /**\n   * @override\n   */\n  optionUpdated: function (newOption, isInit) {\n    PiecewiseModel.superApply(this, 'optionUpdated', arguments);\n    /**\n     * The order is always [low, ..., high].\n     * [{text: string, interval: Array.<number>}, ...]\n     * @private\n     * @type {Array.<Object>}\n     */\n\n    this._pieceList = [];\n    this.resetExtent();\n    /**\n     * 'pieces', 'categories', 'splitNumber'\n     * @type {string}\n     */\n\n    var mode = this._mode = this._determineMode();\n\n    resetMethods[this._mode].call(this);\n\n    this._resetSelected(newOption, isInit);\n\n    var categories = this.option.categories;\n    this.resetVisual(function (mappingOption, state) {\n      if (mode === 'categories') {\n        mappingOption.mappingMethod = 'category';\n        mappingOption.categories = zrUtil.clone(categories);\n      } else {\n        mappingOption.dataExtent = this.getExtent();\n        mappingOption.mappingMethod = 'piecewise';\n        mappingOption.pieceList = zrUtil.map(this._pieceList, function (piece) {\n          var piece = zrUtil.clone(piece);\n\n          if (state !== 'inRange') {\n            // FIXME\n            // outOfRange do not support special visual in pieces.\n            piece.visual = null;\n          }\n\n          return piece;\n        });\n      }\n    });\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  completeVisualOption: function () {\n    // Consider this case:\n    // visualMap: {\n    //      pieces: [{symbol: 'circle', lt: 0}, {symbol: 'rect', gte: 0}]\n    // }\n    // where no inRange/outOfRange set but only pieces. So we should make\n    // default inRange/outOfRange for this case, otherwise visuals that only\n    // appear in `pieces` will not be taken into account in visual encoding.\n    var option = this.option;\n    var visualTypesInPieces = {};\n    var visualTypes = VisualMapping.listVisualTypes();\n    var isCategory = this.isCategory();\n    zrUtil.each(option.pieces, function (piece) {\n      zrUtil.each(visualTypes, function (visualType) {\n        if (piece.hasOwnProperty(visualType)) {\n          visualTypesInPieces[visualType] = 1;\n        }\n      });\n    });\n    zrUtil.each(visualTypesInPieces, function (v, visualType) {\n      var exists = 0;\n      zrUtil.each(this.stateList, function (state) {\n        exists |= has(option, state, visualType) || has(option.target, state, visualType);\n      }, this);\n      !exists && zrUtil.each(this.stateList, function (state) {\n        (option[state] || (option[state] = {}))[visualType] = visualDefault.get(visualType, state === 'inRange' ? 'active' : 'inactive', isCategory);\n      });\n    }, this);\n\n    function has(obj, state, visualType) {\n      return obj && obj[state] && (zrUtil.isObject(obj[state]) ? obj[state].hasOwnProperty(visualType) : obj[state] === visualType // e.g., inRange: 'symbol'\n      );\n    }\n\n    VisualMapModel.prototype.completeVisualOption.apply(this, arguments);\n  },\n  _resetSelected: function (newOption, isInit) {\n    var thisOption = this.option;\n    var pieceList = this._pieceList; // Selected do not merge but all override.\n\n    var selected = (isInit ? thisOption : newOption).selected || {};\n    thisOption.selected = selected; // Consider 'not specified' means true.\n\n    zrUtil.each(pieceList, function (piece, index) {\n      var key = this.getSelectedMapKey(piece);\n\n      if (!selected.hasOwnProperty(key)) {\n        selected[key] = true;\n      }\n    }, this);\n\n    if (thisOption.selectedMode === 'single') {\n      // Ensure there is only one selected.\n      var hasSel = false;\n      zrUtil.each(pieceList, function (piece, index) {\n        var key = this.getSelectedMapKey(piece);\n\n        if (selected[key]) {\n          hasSel ? selected[key] = false : hasSel = true;\n        }\n      }, this);\n    } // thisOption.selectedMode === 'multiple', default: all selected.\n\n  },\n\n  /**\n   * @public\n   */\n  getSelectedMapKey: function (piece) {\n    return this._mode === 'categories' ? piece.value + '' : piece.index + '';\n  },\n\n  /**\n   * @public\n   */\n  getPieceList: function () {\n    return this._pieceList;\n  },\n\n  /**\n   * @private\n   * @return {string}\n   */\n  _determineMode: function () {\n    var option = this.option;\n    return option.pieces && option.pieces.length > 0 ? 'pieces' : this.option.categories ? 'categories' : 'splitNumber';\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  setSelected: function (selected) {\n    this.option.selected = zrUtil.clone(selected);\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  getValueState: function (value) {\n    var index = VisualMapping.findPieceIndex(value, this._pieceList);\n    return index != null ? this.option.selected[this.getSelectedMapKey(this._pieceList[index])] ? 'inRange' : 'outOfRange' : 'outOfRange';\n  },\n\n  /**\n   * @public\n   * @params {number} pieceIndex piece index in visualMapModel.getPieceList()\n   * @return {Array.<Object>} [{seriesId, dataIndices: <Array.<number>>}, ...]\n   */\n  findTargetDataIndices: function (pieceIndex) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimension(data), function (value, dataIndex) {\n        // Should always base on model pieceList, because it is order sensitive.\n        var pIdx = VisualMapping.findPieceIndex(value, this._pieceList);\n        pIdx === pieceIndex && dataIndices.push(dataIndex);\n      }, true, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  },\n\n  /**\n   * @private\n   * @param {Object} piece piece.value or piece.interval is required.\n   * @return {number} Can be Infinity or -Infinity\n   */\n  getRepresentValue: function (piece) {\n    var representValue;\n\n    if (this.isCategory()) {\n      representValue = piece.value;\n    } else {\n      if (piece.value != null) {\n        representValue = piece.value;\n      } else {\n        var pieceInterval = piece.interval || [];\n        representValue = pieceInterval[0] === -Infinity && pieceInterval[1] === Infinity ? 0 : (pieceInterval[0] + pieceInterval[1]) / 2;\n      }\n    }\n\n    return representValue;\n  },\n  getVisualMeta: function (getColorVisual) {\n    // Do not support category. (category axis is ordinal, numerical)\n    if (this.isCategory()) {\n      return;\n    }\n\n    var stops = [];\n    var outerColors = [];\n    var visualMapModel = this;\n\n    function setStop(interval, valueState) {\n      var representValue = visualMapModel.getRepresentValue({\n        interval: interval\n      });\n\n      if (!valueState) {\n        valueState = visualMapModel.getValueState(representValue);\n      }\n\n      var color = getColorVisual(representValue, valueState);\n\n      if (interval[0] === -Infinity) {\n        outerColors[0] = color;\n      } else if (interval[1] === Infinity) {\n        outerColors[1] = color;\n      } else {\n        stops.push({\n          value: interval[0],\n          color: color\n        }, {\n          value: interval[1],\n          color: color\n        });\n      }\n    } // Suplement\n\n\n    var pieceList = this._pieceList.slice();\n\n    if (!pieceList.length) {\n      pieceList.push({\n        interval: [-Infinity, Infinity]\n      });\n    } else {\n      var edge = pieceList[0].interval[0];\n      edge !== -Infinity && pieceList.unshift({\n        interval: [-Infinity, edge]\n      });\n      edge = pieceList[pieceList.length - 1].interval[1];\n      edge !== Infinity && pieceList.push({\n        interval: [edge, Infinity]\n      });\n    }\n\n    var curr = -Infinity;\n    zrUtil.each(pieceList, function (piece) {\n      var interval = piece.interval;\n\n      if (interval) {\n        // Fulfill gap.\n        interval[0] > curr && setStop([curr, interval[0]], 'outOfRange');\n        setStop(interval.slice());\n        curr = interval[1];\n      }\n    }, this);\n    return {\n      stops: stops,\n      outerColors: outerColors\n    };\n  }\n});\n/**\n * Key is this._mode\n * @type {Object}\n * @this {module:echarts/component/viusalMap/PiecewiseMode}\n */\n\nvar resetMethods = {\n  splitNumber: function () {\n    var thisOption = this.option;\n    var pieceList = this._pieceList;\n    var precision = Math.min(thisOption.precision, 20);\n    var dataExtent = this.getExtent();\n    var splitNumber = thisOption.splitNumber;\n    splitNumber = Math.max(parseInt(splitNumber, 10), 1);\n    thisOption.splitNumber = splitNumber;\n    var splitStep = (dataExtent[1] - dataExtent[0]) / splitNumber; // Precision auto-adaption\n\n    while (+splitStep.toFixed(precision) !== splitStep && precision < 5) {\n      precision++;\n    }\n\n    thisOption.precision = precision;\n    splitStep = +splitStep.toFixed(precision);\n    var index = 0;\n\n    if (thisOption.minOpen) {\n      pieceList.push({\n        index: index++,\n        interval: [-Infinity, dataExtent[0]],\n        close: [0, 0]\n      });\n    }\n\n    for (var curr = dataExtent[0], len = index + splitNumber; index < len; curr += splitStep) {\n      var max = index === splitNumber - 1 ? dataExtent[1] : curr + splitStep;\n      pieceList.push({\n        index: index++,\n        interval: [curr, max],\n        close: [1, 1]\n      });\n    }\n\n    if (thisOption.maxOpen) {\n      pieceList.push({\n        index: index++,\n        interval: [dataExtent[1], Infinity],\n        close: [0, 0]\n      });\n    }\n\n    reformIntervals(pieceList);\n    zrUtil.each(pieceList, function (piece) {\n      piece.text = this.formatValueText(piece.interval);\n    }, this);\n  },\n  categories: function () {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.categories, function (cate) {\n      // FIXME categorypieceListvisualMappingpieceList\n      // \n      this._pieceList.push({\n        text: this.formatValueText(cate, true),\n        value: cate\n      });\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, this._pieceList);\n  },\n  pieces: function () {\n    var thisOption = this.option;\n    var pieceList = this._pieceList;\n    zrUtil.each(thisOption.pieces, function (pieceListItem, index) {\n      if (!zrUtil.isObject(pieceListItem)) {\n        pieceListItem = {\n          value: pieceListItem\n        };\n      }\n\n      var item = {\n        text: '',\n        index: index\n      };\n\n      if (pieceListItem.label != null) {\n        item.text = pieceListItem.label;\n      }\n\n      if (pieceListItem.hasOwnProperty('value')) {\n        var value = item.value = pieceListItem.value;\n        item.interval = [value, value];\n        item.close = [1, 1];\n      } else {\n        // `min` `max` is legacy option.\n        // `lt` `gt` `lte` `gte` is recommanded.\n        var interval = item.interval = [];\n        var close = item.close = [0, 0];\n        var closeList = [1, 0, 1];\n        var infinityList = [-Infinity, Infinity];\n        var useMinMax = [];\n\n        for (var lg = 0; lg < 2; lg++) {\n          var names = [['gte', 'gt', 'min'], ['lte', 'lt', 'max']][lg];\n\n          for (var i = 0; i < 3 && interval[lg] == null; i++) {\n            interval[lg] = pieceListItem[names[i]];\n            close[lg] = closeList[i];\n            useMinMax[lg] = i === 2;\n          }\n\n          interval[lg] == null && (interval[lg] = infinityList[lg]);\n        }\n\n        useMinMax[0] && interval[1] === Infinity && (close[0] = 0);\n        useMinMax[1] && interval[0] === -Infinity && (close[1] = 0);\n\n        if (interval[0] === interval[1] && close[0] && close[1]) {\n          // Consider: [{min: 5, max: 5, visual: {...}}, {min: 0, max: 5}],\n          // we use value to lift the priority when min === max\n          item.value = interval[0];\n        }\n      }\n\n      item.visual = VisualMapping.retrieveVisuals(pieceListItem);\n      pieceList.push(item);\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, pieceList); // Only pieces\n\n    reformIntervals(pieceList);\n    zrUtil.each(pieceList, function (piece) {\n      var close = piece.close;\n      var edgeSymbols = [['<', ''][close[1]], ['>', ''][close[0]]];\n      piece.text = piece.text || this.formatValueText(piece.value != null ? piece.value : piece.interval, false, edgeSymbols);\n    }, this);\n  }\n};\n\nfunction normalizeReverse(thisOption, pieceList) {\n  var inverse = thisOption.inverse;\n\n  if (thisOption.orient === 'vertical' ? !inverse : inverse) {\n    pieceList.reverse();\n  }\n}\n\nvar _default = PiecewiseModel;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapView = require(\"./VisualMapView\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar layout = require(\"../../util/layout\");\n\nvar helper = require(\"./helper\");\n\nvar PiecewiseVisualMapView = VisualMapView.extend({\n  type: 'visualMap.piecewise',\n\n  /**\n   * @protected\n   * @override\n   */\n  doRender: function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var textStyleModel = visualMapModel.textStyleModel;\n    var textFont = textStyleModel.getFont();\n    var textFill = textStyleModel.getTextColor();\n\n    var itemAlign = this._getItemAlign();\n\n    var itemSize = visualMapModel.itemSize;\n\n    var viewData = this._getViewData();\n\n    var endsText = viewData.endsText;\n    var showLabel = zrUtil.retrieve(visualMapModel.get('showLabel', true), !endsText);\n    endsText && this._renderEndsText(thisGroup, endsText[0], itemSize, showLabel, itemAlign);\n    zrUtil.each(viewData.viewPieceList, renderItem, this);\n    endsText && this._renderEndsText(thisGroup, endsText[1], itemSize, showLabel, itemAlign);\n    layout.box(visualMapModel.get('orient'), thisGroup, visualMapModel.get('itemGap'));\n    this.renderBackground(thisGroup);\n    this.positionGroup(thisGroup);\n\n    function renderItem(item) {\n      var piece = item.piece;\n      var itemGroup = new graphic.Group();\n      itemGroup.onclick = zrUtil.bind(this._onItemClick, this, piece);\n\n      this._enableHoverLink(itemGroup, item.indexInModelPieceList);\n\n      var representValue = visualMapModel.getRepresentValue(piece);\n\n      this._createItemSymbol(itemGroup, representValue, [0, 0, itemSize[0], itemSize[1]]);\n\n      if (showLabel) {\n        var visualState = this.visualMapModel.getValueState(representValue);\n        itemGroup.add(new graphic.Text({\n          style: {\n            x: itemAlign === 'right' ? -textGap : itemSize[0] + textGap,\n            y: itemSize[1] / 2,\n            text: piece.text,\n            textVerticalAlign: 'middle',\n            textAlign: itemAlign,\n            textFont: textFont,\n            textFill: textFill,\n            opacity: visualState === 'outOfRange' ? 0.5 : 1\n          }\n        }));\n      }\n\n      thisGroup.add(itemGroup);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _enableHoverLink: function (itemGroup, pieceIndex) {\n    itemGroup.on('mouseover', zrUtil.bind(onHoverLink, this, 'highlight')).on('mouseout', zrUtil.bind(onHoverLink, this, 'downplay'));\n\n    function onHoverLink(method) {\n      var visualMapModel = this.visualMapModel;\n      visualMapModel.option.hoverLink && this.api.dispatchAction({\n        type: method,\n        batch: helper.convertDataIndex(visualMapModel.findTargetDataIndices(pieceIndex))\n      });\n    }\n  },\n\n  /**\n   * @private\n   */\n  _getItemAlign: function () {\n    var visualMapModel = this.visualMapModel;\n    var modelOption = visualMapModel.option;\n\n    if (modelOption.orient === 'vertical') {\n      return helper.getItemAlign(visualMapModel, this.api, visualMapModel.itemSize);\n    } else {\n      // horizontal, most case left unless specifying right.\n      var align = modelOption.align;\n\n      if (!align || align === 'auto') {\n        align = 'left';\n      }\n\n      return align;\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderEndsText: function (group, text, itemSize, showLabel, itemAlign) {\n    if (!text) {\n      return;\n    }\n\n    var itemGroup = new graphic.Group();\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    itemGroup.add(new graphic.Text({\n      style: {\n        x: showLabel ? itemAlign === 'right' ? itemSize[0] : 0 : itemSize[0] / 2,\n        y: itemSize[1] / 2,\n        textVerticalAlign: 'middle',\n        textAlign: showLabel ? itemAlign : 'center',\n        text: text,\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    }));\n    group.add(itemGroup);\n  },\n\n  /**\n   * @private\n   * @return {Object} {peiceList, endsText} The order is the same as screen pixel order.\n   */\n  _getViewData: function () {\n    var visualMapModel = this.visualMapModel;\n    var viewPieceList = zrUtil.map(visualMapModel.getPieceList(), function (piece, index) {\n      return {\n        piece: piece,\n        indexInModelPieceList: index\n      };\n    });\n    var endsText = visualMapModel.get('text'); // Consider orient and inverse.\n\n    var orient = visualMapModel.get('orient');\n    var inverse = visualMapModel.get('inverse'); // Order of model pieceList is always [low, ..., high]\n\n    if (orient === 'horizontal' ? inverse : !inverse) {\n      viewPieceList.reverse();\n    } // Origin order of endsText is [high, low]\n    else if (endsText) {\n        endsText = endsText.slice().reverse();\n      }\n\n    return {\n      viewPieceList: viewPieceList,\n      endsText: endsText\n    };\n  },\n\n  /**\n   * @private\n   */\n  _createItemSymbol: function (group, representValue, shapeParam) {\n    group.add(createSymbol(this.getControllerVisual(representValue, 'symbol'), shapeParam[0], shapeParam[1], shapeParam[2], shapeParam[3], this.getControllerVisual(representValue, 'color')));\n  },\n\n  /**\n   * @private\n   */\n  _onItemClick: function (piece) {\n    var visualMapModel = this.visualMapModel;\n    var option = visualMapModel.option;\n    var selected = zrUtil.clone(option.selected);\n    var newKey = visualMapModel.getSelectedMapKey(piece);\n\n    if (option.selectedMode === 'single') {\n      selected[newKey] = true;\n      zrUtil.each(selected, function (o, key) {\n        selected[key] = key === newKey;\n      });\n    } else {\n      selected[newKey] = !selected[newKey];\n    }\n\n    this.api.dispatchAction({\n      type: 'selectDataRange',\n      from: this.uid,\n      visualMapId: this.visualMapModel.id,\n      selected: selected\n    });\n  }\n});\nvar _default = PiecewiseVisualMapView;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar visualDefault = require(\"../../visual/visualDefault\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\nvar visualSolution = require(\"../../visual/visualSolution\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar mapVisual = VisualMapping.mapVisual;\nvar eachVisual = VisualMapping.eachVisual;\nvar isArray = zrUtil.isArray;\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\nvar linearMap = numberUtil.linearMap;\nvar noop = zrUtil.noop;\nvar DEFAULT_COLOR = ['#f6efa6', '#d88273', '#bf444c'];\nvar VisualMapModel = echarts.extendComponentModel({\n  type: 'visualMap',\n  dependencies: ['series'],\n\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  stateList: ['inRange', 'outOfRange'],\n\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  replacableOptionKeys: ['inRange', 'outOfRange', 'target', 'controller', 'color'],\n\n  /**\n   * [lowerBound, upperBound]\n   *\n   * @readOnly\n   * @type {Array.<number>}\n   */\n  dataBound: [-Infinity, Infinity],\n\n  /**\n   * @readOnly\n   * @type {string|Object}\n   */\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    show: true,\n    zlevel: 0,\n    z: 4,\n    seriesIndex: 'all',\n    // 'all' or null/undefined: all series.\n    // A number or an array of number: the specified series.\n    // set min: 0, max: 200, only for campatible with ec2.\n    // In fact min max should not have default value.\n    min: 0,\n    // min value, must specified if pieces is not specified.\n    max: 200,\n    // max value, must specified if pieces is not specified.\n    dimension: null,\n    inRange: null,\n    // 'color', 'colorHue', 'colorSaturation', 'colorLightness', 'colorAlpha',\n    // 'symbol', 'symbolSize'\n    outOfRange: null,\n    // 'color', 'colorHue', 'colorSaturation',\n    // 'colorLightness', 'colorAlpha',\n    // 'symbol', 'symbolSize'\n    left: 0,\n    // 'center'  'left'  'right'  {number} (px)\n    right: null,\n    // The same as left.\n    top: null,\n    // 'top'  'bottom'  'center'  {number} (px)\n    bottom: 0,\n    // The same as top.\n    itemWidth: null,\n    itemHeight: null,\n    inverse: false,\n    orient: 'vertical',\n    // 'horizontal'  'vertical'\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    // \n    contentColor: '#5793f3',\n    inactiveColor: '#aaa',\n    borderWidth: 0,\n    // px0\n    padding: 5,\n    // px5\n    // css\n    textGap: 10,\n    //\n    precision: 0,\n    // 0\n    color: null,\n    //deprecatedec2piecesinRange/outOfRange\n    formatter: null,\n    text: null,\n    // ['', '']ec2text[0]text[1]\n    textStyle: {\n      color: '#333' // \n\n    }\n  },\n\n  /**\n   * @protected\n   */\n  init: function (option, parentModel, ecModel) {\n    /**\n     * @private\n     * @type {Array.<number>}\n     */\n    this._dataExtent;\n    /**\n     * @readOnly\n     */\n\n    this.targetVisuals = {};\n    /**\n     * @readOnly\n     */\n\n    this.controllerVisuals = {};\n    /**\n     * @readOnly\n     */\n\n    this.textStyleModel;\n    /**\n     * [width, height]\n     * @readOnly\n     * @type {Array.<number>}\n     */\n\n    this.itemSize;\n    this.mergeDefaultAndTheme(option, ecModel);\n  },\n\n  /**\n   * @protected\n   */\n  optionUpdated: function (newOption, isInit) {\n    var thisOption = this.option; // FIXME\n    // necessary?\n    // Disable realtime view update if canvas is not supported.\n\n    if (!env.canvasSupported) {\n      thisOption.realtime = false;\n    }\n\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, this.replacableOptionKeys);\n    this.textStyleModel = this.getModel('textStyle');\n    this.resetItemSize();\n    this.completeVisualOption();\n  },\n\n  /**\n   * @protected\n   */\n  resetVisual: function (supplementVisualOption) {\n    var stateList = this.stateList;\n    supplementVisualOption = zrUtil.bind(supplementVisualOption, this);\n    this.controllerVisuals = visualSolution.createVisualMappings(this.option.controller, stateList, supplementVisualOption);\n    this.targetVisuals = visualSolution.createVisualMappings(this.option.target, stateList, supplementVisualOption);\n  },\n\n  /**\n   * @protected\n   * @return {Array.<number>} An array of series indices.\n   */\n  getTargetSeriesIndices: function () {\n    var optionSeriesIndex = this.option.seriesIndex;\n    var seriesIndices = [];\n\n    if (optionSeriesIndex == null || optionSeriesIndex === 'all') {\n      this.ecModel.eachSeries(function (seriesModel, index) {\n        seriesIndices.push(index);\n      });\n    } else {\n      seriesIndices = modelUtil.normalizeToArray(optionSeriesIndex);\n    }\n\n    return seriesIndices;\n  },\n\n  /**\n   * @public\n   */\n  eachTargetSeries: function (callback, context) {\n    zrUtil.each(this.getTargetSeriesIndices(), function (seriesIndex) {\n      callback.call(context, this.ecModel.getSeriesByIndex(seriesIndex));\n    }, this);\n  },\n\n  /**\n   * @pubilc\n   */\n  isTargetSeries: function (seriesModel) {\n    var is = false;\n    this.eachTargetSeries(function (model) {\n      model === seriesModel && (is = true);\n    });\n    return is;\n  },\n\n  /**\n   * @example\n   * this.formatValueText(someVal); // format single numeric value to text.\n   * this.formatValueText(someVal, true); // format single category value to text.\n   * this.formatValueText([min, max]); // format numeric min-max to text.\n   * this.formatValueText([this.dataBound[0], max]); // using data lower bound.\n   * this.formatValueText([min, this.dataBound[1]]); // using data upper bound.\n   *\n   * @param {number|Array.<number>} value Real value, or this.dataBound[0 or 1].\n   * @param {boolean} [isCategory=false] Only available when value is number.\n   * @param {Array.<string>} edgeSymbols Open-close symbol when value is interval.\n   * @return {string}\n   * @protected\n   */\n  formatValueText: function (value, isCategory, edgeSymbols) {\n    var option = this.option;\n    var precision = option.precision;\n    var dataBound = this.dataBound;\n    var formatter = option.formatter;\n    var isMinMax;\n    var textValue;\n    edgeSymbols = edgeSymbols || ['<', '>'];\n\n    if (zrUtil.isArray(value)) {\n      value = value.slice();\n      isMinMax = true;\n    }\n\n    textValue = isCategory ? value : isMinMax ? [toFixed(value[0]), toFixed(value[1])] : toFixed(value);\n\n    if (zrUtil.isString(formatter)) {\n      return formatter.replace('{value}', isMinMax ? textValue[0] : textValue).replace('{value2}', isMinMax ? textValue[1] : textValue);\n    } else if (zrUtil.isFunction(formatter)) {\n      return isMinMax ? formatter(value[0], value[1]) : formatter(value);\n    }\n\n    if (isMinMax) {\n      if (value[0] === dataBound[0]) {\n        return edgeSymbols[0] + ' ' + textValue[1];\n      } else if (value[1] === dataBound[1]) {\n        return edgeSymbols[1] + ' ' + textValue[0];\n      } else {\n        return textValue[0] + ' - ' + textValue[1];\n      }\n    } else {\n      // Format single value (includes category case).\n      return textValue;\n    }\n\n    function toFixed(val) {\n      return val === dataBound[0] ? 'min' : val === dataBound[1] ? 'max' : (+val).toFixed(Math.min(precision, 20));\n    }\n  },\n\n  /**\n   * @protected\n   */\n  resetExtent: function () {\n    var thisOption = this.option; // Can not calculate data extent by data here.\n    // Because series and data may be modified in processing stage.\n    // So we do not support the feature \"auto min/max\".\n\n    var extent = asc([thisOption.min, thisOption.max]);\n    this._dataExtent = extent;\n  },\n\n  /**\n   * @public\n   * @param {module:echarts/data/List} list\n   * @return {string} Concrete dimention. If return null/undefined,\n   *                  no dimension used.\n   */\n  getDataDimension: function (list) {\n    var optDim = this.option.dimension;\n    return optDim != null ? optDim : list.dimensions.length - 1;\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  getExtent: function () {\n    return this._dataExtent.slice();\n  },\n\n  /**\n   * @protected\n   */\n  completeVisualOption: function () {\n    var thisOption = this.option;\n    var base = {\n      inRange: thisOption.inRange,\n      outOfRange: thisOption.outOfRange\n    };\n    var target = thisOption.target || (thisOption.target = {});\n    var controller = thisOption.controller || (thisOption.controller = {});\n    zrUtil.merge(target, base); // Do not override\n\n    zrUtil.merge(controller, base); // Do not override\n\n    var isCategory = this.isCategory();\n    completeSingle.call(this, target);\n    completeSingle.call(this, controller);\n    completeInactive.call(this, target, 'inRange', 'outOfRange'); // completeInactive.call(this, target, 'outOfRange', 'inRange');\n\n    completeController.call(this, controller);\n\n    function completeSingle(base) {\n      // Compatible with ec2 dataRange.color.\n      // The mapping order of dataRange.color is: [high value, ..., low value]\n      // whereas inRange.color and outOfRange.color is [low value, ..., high value]\n      // Notice: ec2 has no inverse.\n      if (isArray(thisOption.color) // If there has been inRange: {symbol: ...}, adding color is a mistake.\n      // So adding color only when no inRange defined.\n      && !base.inRange) {\n        base.inRange = {\n          color: thisOption.color.slice().reverse()\n        };\n      } // Compatible with previous logic, always give a defautl color, otherwise\n      // simple config with no inRange and outOfRange will not work.\n      // Originally we use visualMap.color as the default color, but setOption at\n      // the second time the default color will be erased. So we change to use\n      // constant DEFAULT_COLOR.\n      // If user do not want the defualt color, set inRange: {color: null}.\n\n\n      base.inRange = base.inRange || {\n        color: DEFAULT_COLOR\n      }; // If using shortcut like: {inRange: 'symbol'}, complete default value.\n\n      each(this.stateList, function (state) {\n        var visualType = base[state];\n\n        if (zrUtil.isString(visualType)) {\n          var defa = visualDefault.get(visualType, 'active', isCategory);\n\n          if (defa) {\n            base[state] = {};\n            base[state][visualType] = defa;\n          } else {\n            // Mark as not specified.\n            delete base[state];\n          }\n        }\n      }, this);\n    }\n\n    function completeInactive(base, stateExist, stateAbsent) {\n      var optExist = base[stateExist];\n      var optAbsent = base[stateAbsent];\n\n      if (optExist && !optAbsent) {\n        optAbsent = base[stateAbsent] = {};\n        each(optExist, function (visualData, visualType) {\n          if (!VisualMapping.isValidType(visualType)) {\n            return;\n          }\n\n          var defa = visualDefault.get(visualType, 'inactive', isCategory);\n\n          if (defa != null) {\n            optAbsent[visualType] = defa; // Compatibable with ec2:\n            // Only inactive color to rgba(0,0,0,0) can not\n            // make label transparent, so use opacity also.\n\n            if (visualType === 'color' && !optAbsent.hasOwnProperty('opacity') && !optAbsent.hasOwnProperty('colorAlpha')) {\n              optAbsent.opacity = [0, 0];\n            }\n          }\n        });\n      }\n    }\n\n    function completeController(controller) {\n      var symbolExists = (controller.inRange || {}).symbol || (controller.outOfRange || {}).symbol;\n      var symbolSizeExists = (controller.inRange || {}).symbolSize || (controller.outOfRange || {}).symbolSize;\n      var inactiveColor = this.get('inactiveColor');\n      each(this.stateList, function (state) {\n        var itemSize = this.itemSize;\n        var visuals = controller[state]; // Set inactive color for controller if no other color\n        // attr (like colorAlpha) specified.\n\n        if (!visuals) {\n          visuals = controller[state] = {\n            color: isCategory ? inactiveColor : [inactiveColor]\n          };\n        } // Consistent symbol and symbolSize if not specified.\n\n\n        if (visuals.symbol == null) {\n          visuals.symbol = symbolExists && zrUtil.clone(symbolExists) || (isCategory ? 'roundRect' : ['roundRect']);\n        }\n\n        if (visuals.symbolSize == null) {\n          visuals.symbolSize = symbolSizeExists && zrUtil.clone(symbolSizeExists) || (isCategory ? itemSize[0] : [itemSize[0], itemSize[0]]);\n        } // Filter square and none.\n\n\n        visuals.symbol = mapVisual(visuals.symbol, function (symbol) {\n          return symbol === 'none' || symbol === 'square' ? 'roundRect' : symbol;\n        }); // Normalize symbolSize\n\n        var symbolSize = visuals.symbolSize;\n\n        if (symbolSize != null) {\n          var max = -Infinity; // symbolSize can be object when categories defined.\n\n          eachVisual(symbolSize, function (value) {\n            value > max && (max = value);\n          });\n          visuals.symbolSize = mapVisual(symbolSize, function (value) {\n            return linearMap(value, [0, max], [0, itemSize[0]], true);\n          });\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  resetItemSize: function () {\n    this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))];\n  },\n\n  /**\n   * @public\n   */\n  isCategory: function () {\n    return !!this.option.categories;\n  },\n\n  /**\n   * @public\n   * @abstract\n   */\n  setSelected: noop,\n\n  /**\n   * @public\n   * @abstract\n   * @param {*|module:echarts/data/List} valueOrData\n   * @param {number} dataIndex\n   * @return {string} state See this.stateList\n   */\n  getValueState: noop,\n\n  /**\n   * FIXME\n   * Do not publish to thirt-part-dev temporarily\n   * util the interface is stable. (Should it return\n   * a function but not visual meta?)\n   *\n   * @pubilc\n   * @abstract\n   * @param {Function} getColorVisual\n   *        params: value, valueState\n   *        return: color\n   * @return {Object} visualMeta\n   *        should includes {stops, outerColors}\n   *        outerColor means [colorBeyondMinValue, colorBeyondMaxValue]\n   */\n  getVisualMeta: noop\n});\nvar _default = VisualMapModel;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar layout = require(\"../../util/layout\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\nvar _default = echarts.extendComponentView({\n  type: 'visualMap',\n\n  /**\n   * @readOnly\n   * @type {Object}\n   */\n  autoPositionValues: {\n    left: 1,\n    right: 1,\n    top: 1,\n    bottom: 1\n  },\n  init: function (ecModel, api) {\n    /**\n     * @readOnly\n     * @type {module:echarts/model/Global}\n     */\n    this.ecModel = ecModel;\n    /**\n     * @readOnly\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this.api = api;\n    /**\n     * @readOnly\n     * @type {module:echarts/component/visualMap/visualMapModel}\n     */\n\n    this.visualMapModel;\n  },\n\n  /**\n   * @protected\n   */\n  render: function (visualMapModel, ecModel, api, payload) {\n    this.visualMapModel = visualMapModel;\n\n    if (visualMapModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n\n    this.doRender.apply(this, arguments);\n  },\n\n  /**\n   * @protected\n   */\n  renderBackground: function (group) {\n    var visualMapModel = this.visualMapModel;\n    var padding = formatUtil.normalizeCssArray(visualMapModel.get('padding') || 0);\n    var rect = group.getBoundingRect();\n    group.add(new graphic.Rect({\n      z2: -1,\n      // Lay background rect on the lowest layer.\n      silent: true,\n      shape: {\n        x: rect.x - padding[3],\n        y: rect.y - padding[0],\n        width: rect.width + padding[3] + padding[1],\n        height: rect.height + padding[0] + padding[2]\n      },\n      style: {\n        fill: visualMapModel.get('backgroundColor'),\n        stroke: visualMapModel.get('borderColor'),\n        lineWidth: visualMapModel.get('borderWidth')\n      }\n    }));\n  },\n\n  /**\n   * @protected\n   * @param {number} targetValue can be Infinity or -Infinity\n   * @param {string=} visualCluster Only can be 'color' 'opacity' 'symbol' 'symbolSize'\n   * @param {Object} [opts]\n   * @param {string=} [opts.forceState] Specify state, instead of using getValueState method.\n   * @param {string=} [opts.convertOpacityToAlpha=false] For color gradient in controller widget.\n   * @return {*} Visual value.\n   */\n  getControllerVisual: function (targetValue, visualCluster, opts) {\n    opts = opts || {};\n    var forceState = opts.forceState;\n    var visualMapModel = this.visualMapModel;\n    var visualObj = {}; // Default values.\n\n    if (visualCluster === 'symbol') {\n      visualObj.symbol = visualMapModel.get('itemSymbol');\n    }\n\n    if (visualCluster === 'color') {\n      var defaultColor = visualMapModel.get('contentColor');\n      visualObj.color = defaultColor;\n    }\n\n    function getter(key) {\n      return visualObj[key];\n    }\n\n    function setter(key, value) {\n      visualObj[key] = value;\n    }\n\n    var mappings = visualMapModel.controllerVisuals[forceState || visualMapModel.getValueState(targetValue)];\n    var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n    zrUtil.each(visualTypes, function (type) {\n      var visualMapping = mappings[type];\n\n      if (opts.convertOpacityToAlpha && type === 'opacity') {\n        type = 'colorAlpha';\n        visualMapping = mappings.__alphaForOpacity;\n      }\n\n      if (VisualMapping.dependsOn(type, visualCluster)) {\n        visualMapping && visualMapping.applyVisual(targetValue, getter, setter);\n      }\n    });\n    return visualObj[visualCluster];\n  },\n\n  /**\n   * @protected\n   */\n  positionGroup: function (group) {\n    var model = this.visualMapModel;\n    var api = this.api;\n    layout.positionElement(group, model.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  },\n\n  /**\n   * @protected\n   * @abstract\n   */\n  doRender: zrUtil.noop\n});\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\n/**\n * @param {module:echarts/component/visualMap/VisualMapModel} visualMapModel\\\n * @param {module:echarts/ExtensionAPI} api\n * @param {Array.<number>} itemSize always [short, long]\n * @return {string} 'left' or 'right' or 'top' or 'bottom'\n */\nfunction getItemAlign(visualMapModel, api, itemSize) {\n  var modelOption = visualMapModel.option;\n  var itemAlign = modelOption.align;\n\n  if (itemAlign != null && itemAlign !== 'auto') {\n    return itemAlign;\n  } // Auto decision align.\n\n\n  var ecSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var realIndex = modelOption.orient === 'horizontal' ? 1 : 0;\n  var paramsSet = [['left', 'right', 'width'], ['top', 'bottom', 'height']];\n  var reals = paramsSet[realIndex];\n  var fakeValue = [0, null, 10];\n  var layoutInput = {};\n\n  for (var i = 0; i < 3; i++) {\n    layoutInput[paramsSet[1 - realIndex][i]] = fakeValue[i];\n    layoutInput[reals[i]] = i === 2 ? itemSize[0] : modelOption[reals[i]];\n  }\n\n  var rParam = [['x', 'width', 3], ['y', 'height', 0]][realIndex];\n  var rect = getLayoutRect(layoutInput, ecSize, modelOption.padding);\n  return reals[(rect.margin[rParam[2]] || 0) + rect[rParam[0]] + rect[rParam[1]] * 0.5 < ecSize[rParam[1]] * 0.5 ? 0 : 1];\n}\n/**\n * Prepare dataIndex for outside usage, where dataIndex means rawIndex, and\n * dataIndexInside means filtered index.\n */\n\n\nfunction convertDataIndex(batch) {\n  zrUtil.each(batch || [], function (batchItem) {\n    if (batch.dataIndex != null) {\n      batch.dataIndexInside = batch.dataIndex;\n      batch.dataIndex = null;\n    }\n  });\n  return batch;\n}\n\nexports.getItemAlign = getItemAlign;\nexports.convertDataIndex = convertDataIndex;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar each = zrUtil.each;\n\nfunction _default(option) {\n  var visualMap = option && option.visualMap;\n\n  if (!zrUtil.isArray(visualMap)) {\n    visualMap = visualMap ? [visualMap] : [];\n  }\n\n  each(visualMap, function (opt) {\n    if (!opt) {\n      return;\n    } // rename splitList to pieces\n\n\n    if (has(opt, 'splitList') && !has(opt, 'pieces')) {\n      opt.pieces = opt.splitList;\n      delete opt.splitList;\n    }\n\n    var pieces = opt.pieces;\n\n    if (pieces && zrUtil.isArray(pieces)) {\n      each(pieces, function (piece) {\n        if (zrUtil.isObject(piece)) {\n          if (has(piece, 'start') && !has(piece, 'min')) {\n            piece.min = piece.start;\n          }\n\n          if (has(piece, 'end') && !has(piece, 'max')) {\n            piece.max = piece.end;\n          }\n        }\n      });\n    }\n  });\n}\n\nfunction has(obj, name) {\n  return obj && obj.hasOwnProperty && obj.hasOwnProperty(name);\n}\n\nmodule.exports = _default;","var Component = require(\"../../model/Component\");\n\nComponent.registerSubTypeDefaulter('visualMap', function (option) {\n  // Compatible with ec2, when splitNumber === 0, continuous visualMap will be used.\n  return !option.categories && (!(option.pieces ? option.pieces.length > 0 : option.splitNumber > 0) || option.calculable) ? 'continuous' : 'piecewise';\n});","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar visualSolution = require(\"../../visual/visualSolution\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\necharts.registerVisual(echarts.PRIORITY.VISUAL.COMPONENT, function (ecModel) {\n  ecModel.eachComponent('visualMap', function (visualMapModel) {\n    processSingleVisualMap(visualMapModel, ecModel);\n  });\n  prepareVisualMeta(ecModel);\n});\n\nfunction processSingleVisualMap(visualMapModel, ecModel) {\n  visualMapModel.eachTargetSeries(function (seriesModel) {\n    var data = seriesModel.getData();\n    visualSolution.applyVisual(visualMapModel.stateList, visualMapModel.targetVisuals, data, visualMapModel.getValueState, visualMapModel, visualMapModel.getDataDimension(data));\n  });\n} // Only support color.\n\n\nfunction prepareVisualMeta(ecModel) {\n  ecModel.eachSeries(function (seriesModel) {\n    var data = seriesModel.getData();\n    var visualMetaList = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      if (visualMapModel.isTargetSeries(seriesModel)) {\n        var visualMeta = visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual, null, seriesModel, visualMapModel)) || {\n          stops: [],\n          outerColors: []\n        };\n        visualMeta.dimension = visualMapModel.getDataDimension(data);\n        visualMetaList.push(visualMeta);\n      }\n    }); // console.log(JSON.stringify(visualMetaList.map(a => a.stops)));\n\n    seriesModel.getData().setVisual('visualMeta', visualMetaList);\n  });\n} // FIXME\n// performance and export for heatmap?\n// value can be Infinity or -Infinity\n\n\nfunction getColorVisual(seriesModel, visualMapModel, value, valueState) {\n  var mappings = visualMapModel.targetVisuals[valueState];\n  var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n  var resultVisual = {\n    color: seriesModel.getData().getVisual('color') // default color.\n\n  };\n\n  for (var i = 0, len = visualTypes.length; i < len; i++) {\n    var type = visualTypes[i];\n    var mapping = mappings[type === 'opacity' ? '__alphaForOpacity' : type];\n    mapping && mapping.applyVisual(value, getVisual, setVisual);\n  }\n\n  return resultVisual.color;\n\n  function getVisual(key) {\n    return resultVisual[key];\n  }\n\n  function setVisual(key, value) {\n    resultVisual[key] = value;\n  }\n}","var echarts = require(\"../../echarts\");\n\nvar actionInfo = {\n  type: 'selectDataRange',\n  event: 'dataRangeSelected',\n  // FIXME use updateView appears wrong\n  update: 'update'\n};\necharts.registerAction(actionInfo, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'visualMap',\n    query: payload\n  }, function (model) {\n    model.setSelected(payload.selected);\n  });\n});","// (1) The code `if (__DEV__) ...` can be removed by build tool.\n// (2) If intend to use `__DEV__`, this module should be imported. Use a global\n// variable `__DEV__` may cause that miss the declaration (see #6535), or the\n// declaration is behind of the using position (for example in `Model.extent`,\n// And tools like rollup can not analysis the dependency if not import).\nvar dev; // In browser\n\nif (typeof window !== 'undefined') {\n  dev = window.__DEV__;\n} // In node\nelse if (typeof global !== 'undefined') {\n    dev = global.__DEV__;\n  }\n\nif (typeof dev === 'undefined') {\n  dev = true;\n}\n\nvar __DEV__ = dev;\nexports.__DEV__ = __DEV__;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar numberUtil = require(\"../util/number\");\n\nvar axisHelper = require(\"./axisHelper\");\n\nvar linearMap = numberUtil.linearMap;\n\nfunction fixExtentWithBands(extent, nTick) {\n  var size = extent[1] - extent[0];\n  var len = nTick;\n  var margin = size / len / 2;\n  extent[0] += margin;\n  extent[1] -= margin;\n}\n\nvar normalizedExtent = [0, 1];\n/**\n * @name module:echarts/coord/CartesianAxis\n * @constructor\n */\n\nvar Axis = function (dim, scale, extent) {\n  /**\n   * Axis dimension. Such as 'x', 'y', 'z', 'angle', 'radius'\n   * @type {string}\n   */\n  this.dim = dim;\n  /**\n   * Axis scale\n   * @type {module:echarts/coord/scale/*}\n   */\n\n  this.scale = scale;\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n\n  this._extent = extent || [0, 0];\n  /**\n   * @type {boolean}\n   */\n\n  this.inverse = false;\n  /**\n   * Usually true when axis has a ordinal scale\n   * @type {boolean}\n   */\n\n  this.onBand = false;\n  /**\n   * @private\n   * @type {number}\n   */\n\n  this._labelInterval;\n};\n\nAxis.prototype = {\n  constructor: Axis,\n\n  /**\n   * If axis extent contain given coord\n   * @param {number} coord\n   * @return {boolean}\n   */\n  contain: function (coord) {\n    var extent = this._extent;\n    var min = Math.min(extent[0], extent[1]);\n    var max = Math.max(extent[0], extent[1]);\n    return coord >= min && coord <= max;\n  },\n\n  /**\n   * If axis extent contain given data\n   * @param {number} data\n   * @return {boolean}\n   */\n  containData: function (data) {\n    return this.contain(this.dataToCoord(data));\n  },\n\n  /**\n   * Get coord extent.\n   * @return {Array.<number>}\n   */\n  getExtent: function () {\n    return this._extent.slice();\n  },\n\n  /**\n   * Get precision used for formatting\n   * @param {Array.<number>} [dataExtent]\n   * @return {number}\n   */\n  getPixelPrecision: function (dataExtent) {\n    return numberUtil.getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\n  },\n\n  /**\n   * Set coord extent\n   * @param {number} start\n   * @param {number} end\n   */\n  setExtent: function (start, end) {\n    var extent = this._extent;\n    extent[0] = start;\n    extent[1] = end;\n  },\n\n  /**\n   * Convert data to coord. Data is the rank if it has a ordinal scale\n   * @param {number} data\n   * @param  {boolean} clamp\n   * @return {number}\n   */\n  dataToCoord: function (data, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    data = scale.normalize(data);\n\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n\n    return linearMap(data, normalizedExtent, extent, clamp);\n  },\n\n  /**\n   * Convert coord to data. Data is the rank if it has a ordinal scale\n   * @param {number} coord\n   * @param  {boolean} clamp\n   * @return {number}\n   */\n  coordToData: function (coord, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n\n    var t = linearMap(coord, extent, normalizedExtent, clamp);\n    return this.scale.scale(t);\n  },\n\n  /**\n   * Convert pixel point to data in axis\n   * @param {Array.<number>} point\n   * @param  {boolean} clamp\n   * @return {number} data\n   */\n  pointToData: function (point, clamp) {// Should be implemented in derived class if necessary.\n  },\n\n  /**\n   * @return {Array.<number>}\n   */\n  getTicksCoords: function (alignWithLabel) {\n    if (this.onBand && !alignWithLabel) {\n      var bands = this.getBands();\n      var coords = [];\n\n      for (var i = 0; i < bands.length; i++) {\n        coords.push(bands[i][0]);\n      }\n\n      if (bands[i - 1]) {\n        coords.push(bands[i - 1][1]);\n      }\n\n      return coords;\n    } else {\n      return zrUtil.map(this.scale.getTicks(), this.dataToCoord, this);\n    }\n  },\n\n  /**\n   * Coords of labels are on the ticks or on the middle of bands\n   * @return {Array.<number>}\n   */\n  getLabelsCoords: function () {\n    return zrUtil.map(this.scale.getTicks(), this.dataToCoord, this);\n  },\n\n  /**\n   * Get bands.\n   *\n   * If axis has labels [1, 2, 3, 4]. Bands on the axis are\n   * |---1---|---2---|---3---|---4---|.\n   *\n   * @return {Array}\n   */\n  // FIXME Situation when labels is on ticks\n  getBands: function () {\n    var extent = this.getExtent();\n    var bands = [];\n    var len = this.scale.count();\n    var start = extent[0];\n    var end = extent[1];\n    var span = end - start;\n\n    for (var i = 0; i < len; i++) {\n      bands.push([span * i / len + start, span * (i + 1) / len + start]);\n    }\n\n    return bands;\n  },\n\n  /**\n   * Get width of band\n   * @return {number}\n   */\n  getBandWidth: function () {\n    var axisExtent = this._extent;\n    var dataExtent = this.scale.getExtent();\n    var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0); // Fix #2728, avoid NaN when only one data.\n\n    len === 0 && (len = 1);\n    var size = Math.abs(axisExtent[1] - axisExtent[0]);\n    return Math.abs(size) / len;\n  },\n\n  /**\n   * @abstract\n   * @return {boolean} Is horizontal\n   */\n  isHorizontal: null,\n\n  /**\n   * @abstract\n   * @return {number} Get axis rotate, by degree.\n   */\n  getRotate: null,\n\n  /**\n   * Get interval of the axis label.\n   * To get precise result, at least one of `getRotate` and `isHorizontal`\n   * should be implemented.\n   * @return {number}\n   */\n  getLabelInterval: function () {\n    var labelInterval = this._labelInterval;\n\n    if (!labelInterval) {\n      var axisModel = this.model;\n      var labelModel = axisModel.getModel('axisLabel');\n      labelInterval = labelModel.get('interval');\n\n      if (this.type === 'category' && (labelInterval == null || labelInterval === 'auto')) {\n        labelInterval = axisHelper.getAxisLabelInterval(zrUtil.map(this.scale.getTicks(), this.dataToCoord, this), axisModel.getFormattedLabels(), labelModel.getFont(), this.getRotate ? this.getRotate() : this.isHorizontal && !this.isHorizontal() ? 90 : 0, labelModel.get('rotate'));\n      }\n\n      this._labelInterval = labelInterval;\n    }\n\n    return labelInterval;\n  }\n};\nvar _default = Axis;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar vector = require(\"zrender/lib/core/vector\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar Transformable = require(\"zrender/lib/mixin/Transformable\");\n\n/**\n * Simple view coordinate system\n * Mapping given x, y to transformd view x, y\n */\nvar v2ApplyTransform = vector.applyTransform; // Dummy transform node\n\nfunction TransformDummy() {\n  Transformable.call(this);\n}\n\nzrUtil.mixin(TransformDummy, Transformable);\n\nfunction View(name) {\n  /**\n   * @type {string}\n   */\n  this.name = name;\n  /**\n   * @type {Object}\n   */\n\n  this.zoomLimit;\n  Transformable.call(this);\n  this._roamTransform = new TransformDummy();\n  this._viewTransform = new TransformDummy();\n  this._center;\n  this._zoom;\n}\n\nView.prototype = {\n  constructor: View,\n  type: 'view',\n\n  /**\n   * @param {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['x', 'y'],\n\n  /**\n   * Set bounding rect\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  // PENDING to getRect\n  setBoundingRect: function (x, y, width, height) {\n    this._rect = new BoundingRect(x, y, width, height);\n    return this._rect;\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  // PENDING to getRect\n  getBoundingRect: function () {\n    return this._rect;\n  },\n\n  /**\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  setViewRect: function (x, y, width, height) {\n    this.transformTo(x, y, width, height);\n    this._viewRect = new BoundingRect(x, y, width, height);\n  },\n\n  /**\n   * Transformed to particular position and size\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  transformTo: function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var viewTransform = this._viewTransform;\n    viewTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    viewTransform.decomposeTransform();\n\n    this._updateTransform();\n  },\n\n  /**\n   * Set center of view\n   * @param {Array.<number>} [centerCoord]\n   */\n  setCenter: function (centerCoord) {\n    if (!centerCoord) {\n      return;\n    }\n\n    this._center = centerCoord;\n\n    this._updateCenterAndZoom();\n  },\n\n  /**\n   * @param {number} zoom\n   */\n  setZoom: function (zoom) {\n    zoom = zoom || 1;\n    var zoomLimit = this.zoomLimit;\n\n    if (zoomLimit) {\n      if (zoomLimit.max != null) {\n        zoom = Math.min(zoomLimit.max, zoom);\n      }\n\n      if (zoomLimit.min != null) {\n        zoom = Math.max(zoomLimit.min, zoom);\n      }\n    }\n\n    this._zoom = zoom;\n\n    this._updateCenterAndZoom();\n  },\n\n  /**\n   * Get default center without roam\n   */\n  getDefaultCenter: function () {\n    // Rect before any transform\n    var rawRect = this.getBoundingRect();\n    var cx = rawRect.x + rawRect.width / 2;\n    var cy = rawRect.y + rawRect.height / 2;\n    return [cx, cy];\n  },\n  getCenter: function () {\n    return this._center || this.getDefaultCenter();\n  },\n  getZoom: function () {\n    return this._zoom || 1;\n  },\n\n  /**\n   * @return {Array.<number}\n   */\n  getRoamTransform: function () {\n    return this._roamTransform;\n  },\n  _updateCenterAndZoom: function () {\n    // Must update after view transform updated\n    var viewTransformMatrix = this._viewTransform.getLocalTransform();\n\n    var roamTransform = this._roamTransform;\n    var defaultCenter = this.getDefaultCenter();\n    var center = this.getCenter();\n    var zoom = this.getZoom();\n    center = vector.applyTransform([], center, viewTransformMatrix);\n    defaultCenter = vector.applyTransform([], defaultCenter, viewTransformMatrix);\n    roamTransform.origin = center;\n    roamTransform.position = [defaultCenter[0] - center[0], defaultCenter[1] - center[1]];\n    roamTransform.scale = [zoom, zoom];\n\n    this._updateTransform();\n  },\n\n  /**\n   * Update transform from roam and mapLocation\n   * @private\n   */\n  _updateTransform: function () {\n    var roamTransform = this._roamTransform;\n    var viewTransform = this._viewTransform;\n    viewTransform.parent = roamTransform;\n    roamTransform.updateTransform();\n    viewTransform.updateTransform();\n    viewTransform.transform && matrix.copy(this.transform || (this.transform = []), viewTransform.transform);\n\n    if (this.transform) {\n      this.invTransform = this.invTransform || [];\n      matrix.invert(this.invTransform, this.transform);\n    } else {\n      this.invTransform = null;\n    }\n\n    this.decomposeTransform();\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getViewRect: function () {\n    return this._viewRect;\n  },\n\n  /**\n   * Get view rect after roam transform\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getViewRectAfterRoam: function () {\n    var rect = this.getBoundingRect().clone();\n    rect.applyTransform(this.transform);\n    return rect;\n  },\n\n  /**\n   * Convert a single (lon, lat) data item to (x, y) point.\n   * @param {Array.<number>} data\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data) {\n    var transform = this.transform;\n    return transform ? v2ApplyTransform([], data, transform) : [data[0], data[1]];\n  },\n\n  /**\n   * Convert a (x, y) point to (lon, lat) data\n   * @param {Array.<number>} point\n   * @return {Array.<number>}\n   */\n  pointToData: function (point) {\n    var invTransform = this.invTransform;\n    return invTransform ? v2ApplyTransform([], point, invTransform) : [point[0], point[1]];\n  },\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  convertToPixel: zrUtil.curry(doConvert, 'dataToPoint'),\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  convertFromPixel: zrUtil.curry(doConvert, 'pointToData'),\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  containPoint: function (point) {\n    return this.getViewRectAfterRoam().contain(point[0], point[1]);\n  }\n  /**\n   * @return {number}\n   */\n  // getScalarScale: function () {\n  //     // Use determinant square root of transform to mutiply scalar\n  //     var m = this.transform;\n  //     var det = Math.sqrt(Math.abs(m[0] * m[3] - m[2] * m[1]));\n  //     return det;\n  // }\n\n};\nzrUtil.mixin(View, Transformable);\n\nfunction doConvert(methodName, ecModel, finder, value) {\n  var seriesModel = finder.seriesModel;\n  var coordSys = seriesModel ? seriesModel.coordinateSystem : null; // e.g., graph.\n\n  return coordSys === this ? coordSys[methodName](value) : null;\n}\n\nvar _default = View;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar defaultOption = {\n  show: true,\n  zlevel: 0,\n  // \n  z: 0,\n  // \n  // \n  inverse: false,\n  // \n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // degree\n  nameRotate: null,\n  // Adapt to axis rotate, when nameLocation is 'middle'.\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // \n  nameTextStyle: {},\n  // \n  nameGap: 15,\n  silent: false,\n  // Default false to support tooltip.\n  triggerEvent: false,\n  // Default false to avoid legacy user event listener fail.\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  // \n  axisLine: {\n    // show\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    // lineStyle\n    lineStyle: {\n      color: '#333',\n      width: 1,\n      type: 'solid'\n    },\n    // \n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  // \n  axisTick: {\n    // show\n    show: true,\n    // grid\n    inside: false,\n    // length\n    length: 5,\n    // lineStyle\n    lineStyle: {\n      width: 1\n    }\n  },\n  // axis.axisLabel\n  axisLabel: {\n    show: true,\n    // grid\n    inside: false,\n    rotate: 0,\n    showMinLabel: null,\n    // true | false | null (auto)\n    showMaxLabel: null,\n    // true | false | null (auto)\n    margin: 8,\n    // formatter: null,\n    // TEXTSTYLE\n    fontSize: 12\n  },\n  // \n  splitLine: {\n    // show\n    show: true,\n    // lineStylelineStyle\n    lineStyle: {\n      color: ['#ccc'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  // \n  splitArea: {\n    // show\n    show: false,\n    // areaStyleareaStyle\n    areaStyle: {\n      color: ['rgba(250,250,250,0.3)', 'rgba(200,200,200,0.3)']\n    }\n  }\n};\nvar axisDefault = {};\naxisDefault.categoryAxis = zrUtil.merge({\n  // \n  boundaryGap: true,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  // \n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  // axis.axisLabel\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\naxisDefault.valueAxis = zrUtil.merge({\n  // \n  boundaryGap: [0, 0],\n  // ,  'dataMin' \n  // min: null,\n  //  'dataMax' \n  // max: null,\n  // Readonly prop, specifies start value of the range when using data zoom.\n  // rangeStart: null\n  // Readonly prop, specifies end value of the range when using data zoom.\n  // rangeEnd: null\n  // 0_min_max\n  // scale: false,\n  // 5\n  splitNumber: 5 // Minimum interval\n  // minInterval: null\n  // maxInterval: null\n\n}, defaultOption); // FIXME\n\naxisDefault.timeAxis = zrUtil.defaults({\n  scale: true,\n  min: 'dataMin',\n  max: 'dataMax'\n}, axisDefault.valueAxis);\naxisDefault.logAxis = zrUtil.defaults({\n  scale: true,\n  logBase: 10\n}, axisDefault.valueAxis);\nvar _default = axisDefault;\nmodule.exports = _default;","var _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar OrdinalScale = require(\"../scale/Ordinal\");\n\nvar IntervalScale = require(\"../scale/Interval\");\n\nvar Scale = require(\"../scale/Scale\");\n\nvar numberUtil = require(\"../util/number\");\n\nrequire(\"../scale/Time\");\n\nrequire(\"../scale/Log\");\n\n/**\n * Get axis scale extent before niced.\n * Item of returned array can only be number (including Infinity and NaN).\n */\nfunction getScaleExtent(scale, model) {\n  var scaleType = scale.type;\n  var min = model.getMin();\n  var max = model.getMax();\n  var fixMin = min != null;\n  var fixMax = max != null;\n  var originalExtent = scale.getExtent();\n  var axisDataLen;\n  var boundaryGap;\n  var span;\n\n  if (scaleType === 'ordinal') {\n    axisDataLen = (model.get('data') || []).length;\n  } else {\n    boundaryGap = model.get('boundaryGap');\n\n    if (!zrUtil.isArray(boundaryGap)) {\n      boundaryGap = [boundaryGap || 0, boundaryGap || 0];\n    }\n\n    if (typeof boundaryGap[0] === 'boolean') {\n      boundaryGap = [0, 0];\n    }\n\n    boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], 1);\n    boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], 1);\n    span = originalExtent[1] - originalExtent[0] || Math.abs(originalExtent[0]);\n  } // Notice: When min/max is not set (that is, when there are null/undefined,\n  // which is the most common case), these cases should be ensured:\n  // (1) For 'ordinal', show all axis.data.\n  // (2) For others:\n  //      + `boundaryGap` is applied (if min/max set, boundaryGap is\n  //      disabled).\n  //      + If `needCrossZero`, min/max should be zero, otherwise, min/max should\n  //      be the result that originalExtent enlarged by boundaryGap.\n  // (3) If no data, it should be ensured that `scale.setBlank` is set.\n  // FIXME\n  // (1) When min/max is 'dataMin' or 'dataMax', should boundaryGap be able to used?\n  // (2) When `needCrossZero` and all data is positive/negative, should it be ensured\n  // that the results processed by boundaryGap are positive/negative?\n\n\n  if (min == null) {\n    min = scaleType === 'ordinal' ? axisDataLen ? 0 : NaN : originalExtent[0] - boundaryGap[0] * span;\n  }\n\n  if (max == null) {\n    max = scaleType === 'ordinal' ? axisDataLen ? axisDataLen - 1 : NaN : originalExtent[1] + boundaryGap[1] * span;\n  }\n\n  if (min === 'dataMin') {\n    min = originalExtent[0];\n  } else if (typeof min === 'function') {\n    min = min({\n      min: originalExtent[0],\n      max: originalExtent[1]\n    });\n  }\n\n  if (max === 'dataMax') {\n    max = originalExtent[1];\n  } else if (typeof max === 'function') {\n    max = max({\n      min: originalExtent[0],\n      max: originalExtent[1]\n    });\n  }\n\n  (min == null || !isFinite(min)) && (min = NaN);\n  (max == null || !isFinite(max)) && (max = NaN);\n  scale.setBlank(zrUtil.eqNaN(min) || zrUtil.eqNaN(max)); // Evaluate if axis needs cross zero\n\n  if (model.getNeedCrossZero()) {\n    // Axis is over zero and min is not set\n    if (min > 0 && max > 0 && !fixMin) {\n      min = 0;\n    } // Axis is under zero and max is not set\n\n\n    if (min < 0 && max < 0 && !fixMax) {\n      max = 0;\n    }\n  }\n\n  return [min, max];\n}\n\nfunction niceScaleExtent(scale, model) {\n  var extent = getScaleExtent(scale, model);\n  var fixMin = model.getMin() != null;\n  var fixMax = model.getMax() != null;\n  var splitNumber = model.get('splitNumber');\n\n  if (scale.type === 'log') {\n    scale.base = model.get('logBase');\n  }\n\n  var scaleType = scale.type;\n  scale.setExtent(extent[0], extent[1]);\n  scale.niceExtent({\n    splitNumber: splitNumber,\n    fixMin: fixMin,\n    fixMax: fixMax,\n    minInterval: scaleType === 'interval' || scaleType === 'time' ? model.get('minInterval') : null,\n    maxInterval: scaleType === 'interval' || scaleType === 'time' ? model.get('maxInterval') : null\n  }); // If some one specified the min, max. And the default calculated interval\n  // is not good enough. He can specify the interval. It is often appeared\n  // in angle axis with angle 0 - 360. Interval calculated in interval scale is hard\n  // to be 60.\n  // FIXME\n\n  var interval = model.get('interval');\n\n  if (interval != null) {\n    scale.setInterval && scale.setInterval(interval);\n  }\n}\n/**\n * @param {module:echarts/model/Model} model\n * @param {string} [axisType] Default retrieve from model.type\n * @return {module:echarts/scale/*}\n */\n\n\nfunction createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale(model.getCategories(), [Infinity, -Infinity]);\n\n      case 'value':\n        return new IntervalScale();\n      // Extended scale, like time and log\n\n      default:\n        return (Scale.getClass(axisType) || IntervalScale).create(model);\n    }\n  }\n}\n/**\n * Check if the axis corss 0\n */\n\n\nfunction ifAxisCrossZero(axis) {\n  var dataExtent = axis.scale.getExtent();\n  var min = dataExtent[0];\n  var max = dataExtent[1];\n  return !(min > 0 && max > 0 || min < 0 && max < 0);\n}\n/**\n * @param {Array.<number>} tickCoords In axis self coordinate.\n * @param {Array.<string>} labels\n * @param {string} font\n * @param {number} axisRotate 0: towards right horizontally, clock-wise is negative.\n * @param {number} [labelRotate=0] 0: towards right horizontally, clock-wise is negative.\n * @return {number}\n */\n\n\nfunction getAxisLabelInterval(tickCoords, labels, font, axisRotate, labelRotate) {\n  var textSpaceTakenRect;\n  var autoLabelInterval = 0;\n  var accumulatedLabelInterval = 0;\n  var rotation = (axisRotate - labelRotate) / 180 * Math.PI;\n  var step = 1;\n\n  if (labels.length > 40) {\n    // Simple optimization for large amount of labels\n    step = Math.floor(labels.length / 40);\n  }\n\n  for (var i = 0; i < tickCoords.length; i += step) {\n    var tickCoord = tickCoords[i]; // Not precise, do not consider align and vertical align\n    // and each distance from axis line yet.\n\n    var rect = textContain.getBoundingRect(labels[i], font, 'center', 'top');\n    rect.x += tickCoord * Math.cos(rotation);\n    rect.y += tickCoord * Math.sin(rotation); // Magic number\n\n    rect.width *= 1.3;\n    rect.height *= 1.3;\n\n    if (!textSpaceTakenRect) {\n      textSpaceTakenRect = rect.clone();\n    } // There is no space for current label;\n    else if (textSpaceTakenRect.intersect(rect)) {\n        accumulatedLabelInterval++;\n        autoLabelInterval = Math.max(autoLabelInterval, accumulatedLabelInterval);\n      } else {\n        textSpaceTakenRect.union(rect); // Reset\n\n        accumulatedLabelInterval = 0;\n      }\n  }\n\n  if (autoLabelInterval === 0 && step > 1) {\n    return step;\n  }\n\n  return (autoLabelInterval + 1) * step - 1;\n}\n/**\n * @param {Object} axis\n * @param {Function} labelFormatter\n * @return {Array.<string>}\n */\n\n\nfunction getFormattedLabels(axis, labelFormatter) {\n  var scale = axis.scale;\n  var labels = scale.getTicksLabels();\n  var ticks = scale.getTicks();\n\n  if (typeof labelFormatter === 'string') {\n    labelFormatter = function (tpl) {\n      return function (val) {\n        return tpl.replace('{value}', val != null ? val : '');\n      };\n    }(labelFormatter); // Consider empty array\n\n\n    return zrUtil.map(labels, labelFormatter);\n  } else if (typeof labelFormatter === 'function') {\n    return zrUtil.map(ticks, function (tick, idx) {\n      return labelFormatter(getAxisRawValue(axis, tick), idx);\n    }, this);\n  } else {\n    return labels;\n  }\n}\n\nfunction getAxisRawValue(axis, value) {\n  // In category axis with data zoom, tick is not the original\n  // index of axis.data. So tick should not be exposed to user\n  // in category axis.\n  return axis.type === 'category' ? axis.scale.getLabel(value) : value;\n}\n\nexports.getScaleExtent = getScaleExtent;\nexports.niceScaleExtent = niceScaleExtent;\nexports.createScaleByModel = createScaleByModel;\nexports.ifAxisCrossZero = ifAxisCrossZero;\nexports.getAxisLabelInterval = getAxisLabelInterval;\nexports.getFormattedLabels = getFormattedLabels;\nexports.getAxisRawValue = getAxisRawValue;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisHelper = require(\"./axisHelper\");\n\nfunction getName(obj) {\n  if (zrUtil.isObject(obj) && obj.value != null) {\n    return obj.value;\n  } else {\n    return obj + '';\n  }\n}\n\nvar _default = {\n  /**\n   * Format labels\n   * @return {Array.<string>}\n   */\n  getFormattedLabels: function () {\n    return axisHelper.getFormattedLabels(this.axis, this.get('axisLabel.formatter'));\n  },\n\n  /**\n   * Get categories\n   */\n  getCategories: function () {\n    return this.get('type') === 'category' && zrUtil.map(this.get('data'), getName);\n  },\n\n  /**\n   * @param {boolean} origin\n   * @return {number|string} min value or 'dataMin' or null/undefined (means auto) or NaN\n   */\n  getMin: function (origin) {\n    var option = this.option;\n    var min = !origin && option.rangeStart != null ? option.rangeStart : option.min;\n\n    if (this.axis && min != null && min !== 'dataMin' && typeof min !== 'function' && !zrUtil.eqNaN(min)) {\n      min = this.axis.scale.parse(min);\n    }\n\n    return min;\n  },\n\n  /**\n   * @param {boolean} origin\n   * @return {number|string} max value or 'dataMax' or null/undefined (means auto) or NaN\n   */\n  getMax: function (origin) {\n    var option = this.option;\n    var max = !origin && option.rangeEnd != null ? option.rangeEnd : option.max;\n\n    if (this.axis && max != null && max !== 'dataMax' && typeof max !== 'function' && !zrUtil.eqNaN(max)) {\n      max = this.axis.scale.parse(max);\n    }\n\n    return max;\n  },\n\n  /**\n   * @return {boolean}\n   */\n  getNeedCrossZero: function () {\n    var option = this.option;\n    return option.rangeStart != null || option.rangeEnd != null ? false : !option.scale;\n  },\n\n  /**\n   * Should be implemented by each axis model if necessary.\n   * @return {module:echarts/model/Component} coordinate system model\n   */\n  getCoordSysModel: zrUtil.noop,\n\n  /**\n   * @param {number} rangeStart Can only be finite number or null/undefined or NaN.\n   * @param {number} rangeEnd Can only be finite number or null/undefined or NaN.\n   */\n  setRange: function (rangeStart, rangeEnd) {\n    this.option.rangeStart = rangeStart;\n    this.option.rangeEnd = rangeEnd;\n  },\n\n  /**\n   * Reset range\n   */\n  resetRange: function () {\n    // rangeStart and rangeEnd is readonly.\n    this.option.rangeStart = this.option.rangeEnd = null;\n  }\n};\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisDefault = require(\"./axisDefault\");\n\nvar ComponentModel = require(\"../model/Component\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutParams = _layout.getLayoutParams;\nvar mergeLayoutParam = _layout.mergeLayoutParam;\n// FIXME axisType is fixed ?\nvar AXIS_TYPES = ['value', 'category', 'time', 'log'];\n/**\n * Generate sub axis model class\n * @param {string} axisName 'x' 'y' 'radius' 'angle' 'parallel'\n * @param {module:echarts/model/Component} BaseAxisModelClass\n * @param {Function} axisTypeDefaulter\n * @param {Object} [extraDefaultOption]\n */\n\nfunction _default(axisName, BaseAxisModelClass, axisTypeDefaulter, extraDefaultOption) {\n  zrUtil.each(AXIS_TYPES, function (axisType) {\n    BaseAxisModelClass.extend({\n      type: axisName + 'Axis.' + axisType,\n      mergeDefaultAndTheme: function (option, ecModel) {\n        var layoutMode = this.layoutMode;\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        zrUtil.merge(option, themeModel.get(axisType + 'Axis'));\n        zrUtil.merge(option, this.getDefaultOption());\n        option.type = axisTypeDefaulter(axisName, option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      },\n      defaultOption: zrUtil.mergeAll([{}, axisDefault[axisType + 'Axis'], extraDefaultOption], true)\n    });\n  });\n  ComponentModel.registerSubTypeDefaulter(axisName + 'Axis', zrUtil.curry(axisTypeDefaulter, axisName));\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar layout = require(\"../../util/layout\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\n// (24*60*60*1000)\nvar PROXIMATE_ONE_DAY = 86400000;\n/**\n * Calendar\n *\n * @constructor\n *\n * @param {Object} calendarModel calendarModel\n * @param {Object} ecModel       ecModel\n * @param {Object} api           api\n */\n\nfunction Calendar(calendarModel, ecModel, api) {\n  this._model = calendarModel;\n}\n\nCalendar.prototype = {\n  constructor: Calendar,\n  type: 'calendar',\n  dimensions: ['time', 'value'],\n  // Required in createListFromData\n  getDimensionsInfo: function () {\n    return [{\n      name: 'time',\n      type: 'time'\n    }];\n  },\n  getRangeInfo: function () {\n    return this._rangeInfo;\n  },\n  getModel: function () {\n    return this._model;\n  },\n  getRect: function () {\n    return this._rect;\n  },\n  getCellWidth: function () {\n    return this._sw;\n  },\n  getCellHeight: function () {\n    return this._sh;\n  },\n  getOrient: function () {\n    return this._orient;\n  },\n\n  /**\n   * getFirstDayOfWeek\n   *\n   * @example\n   *     0 : start at Sunday\n   *     1 : start at Monday\n   *\n   * @return {number}\n   */\n  getFirstDayOfWeek: function () {\n    return this._firstDayOfWeek;\n  },\n\n  /**\n   * get date info\n   *\n   * @param  {string|number} date date\n   * @return {Object}\n   * {\n   *      y: string, local full year, eg., '1940',\n   *      m: string, local month, from '01' ot '12',\n   *      d: string, local date, from '01' to '31' (if exists),\n   *      day: It is not date.getDay(). It is the location of the cell in a week, from 0 to 6,\n   *      time: timestamp,\n   *      formatedDate: string, yyyy-MM-dd,\n   *      date: original date object.\n   * }\n   */\n  getDateInfo: function (date) {\n    date = numberUtil.parseDate(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    m = m < 10 ? '0' + m : m;\n    var d = date.getDate();\n    d = d < 10 ? '0' + d : d;\n    var day = date.getDay();\n    day = Math.abs((day + 7 - this.getFirstDayOfWeek()) % 7);\n    return {\n      y: y,\n      m: m,\n      d: d,\n      day: day,\n      time: date.getTime(),\n      formatedDate: y + '-' + m + '-' + d,\n      date: date\n    };\n  },\n  getNextNDay: function (date, n) {\n    n = n || 0;\n\n    if (n === 0) {\n      return this.getDateInfo(date);\n    }\n\n    date = new Date(this.getDateInfo(date).time);\n    date.setDate(date.getDate() + n);\n    return this.getDateInfo(date);\n  },\n  update: function (ecModel, api) {\n    this._firstDayOfWeek = +this._model.getModel('dayLabel').get('firstDay');\n    this._orient = this._model.get('orient');\n    this._lineWidth = this._model.getModel('itemStyle.normal').getItemStyle().lineWidth || 0;\n    this._rangeInfo = this._getRangeInfo(this._initRangeOption());\n    var weeks = this._rangeInfo.weeks || 1;\n    var whNames = ['width', 'height'];\n\n    var cellSize = this._model.get('cellSize').slice();\n\n    var layoutParams = this._model.getBoxLayoutParams();\n\n    var cellNumbers = this._orient === 'horizontal' ? [weeks, 7] : [7, weeks];\n    zrUtil.each([0, 1], function (idx) {\n      if (cellSizeSpecified(cellSize, idx)) {\n        layoutParams[whNames[idx]] = cellSize[idx] * cellNumbers[idx];\n      }\n    });\n    var whGlobal = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var calendarRect = this._rect = layout.getLayoutRect(layoutParams, whGlobal);\n    zrUtil.each([0, 1], function (idx) {\n      if (!cellSizeSpecified(cellSize, idx)) {\n        cellSize[idx] = calendarRect[whNames[idx]] / cellNumbers[idx];\n      }\n    });\n\n    function cellSizeSpecified(cellSize, idx) {\n      return cellSize[idx] != null && cellSize[idx] !== 'auto';\n    }\n\n    this._sw = cellSize[0];\n    this._sh = cellSize[1];\n  },\n\n  /**\n   * Convert a time data(time, value) item to (x, y) point.\n   *\n   * @override\n   * @param  {Array|number} data data\n   * @param  {boolean} [clamp=true] out of range\n   * @return {Array} point\n   */\n  dataToPoint: function (data, clamp) {\n    zrUtil.isArray(data) && (data = data[0]);\n    clamp == null && (clamp = true);\n    var dayInfo = this.getDateInfo(data);\n    var range = this._rangeInfo;\n    var date = dayInfo.formatedDate; // if not in range return [NaN, NaN]\n\n    if (clamp && !(dayInfo.time >= range.start.time && dayInfo.time <= range.end.time)) {\n      return [NaN, NaN];\n    }\n\n    var week = dayInfo.day;\n\n    var nthWeek = this._getRangeInfo([range.start.time, date]).nthWeek;\n\n    if (this._orient === 'vertical') {\n      return [this._rect.x + week * this._sw + this._sw / 2, this._rect.y + nthWeek * this._sh + this._sh / 2];\n    }\n\n    return [this._rect.x + nthWeek * this._sw + this._sw / 2, this._rect.y + week * this._sh + this._sh / 2];\n  },\n\n  /**\n   * Convert a (x, y) point to time data\n   *\n   * @override\n   * @param  {string} point point\n   * @return {string}       data\n   */\n  pointToData: function (point) {\n    var date = this.pointToDate(point);\n    return date && date.time;\n  },\n\n  /**\n   * Convert a time date item to (x, y) four point.\n   *\n   * @param  {Array} data  date[0] is date\n   * @param  {boolean} [clamp=true]  out of range\n   * @return {Object}       point\n   */\n  dataToRect: function (data, clamp) {\n    var point = this.dataToPoint(data, clamp);\n    return {\n      contentShape: {\n        x: point[0] - (this._sw - this._lineWidth) / 2,\n        y: point[1] - (this._sh - this._lineWidth) / 2,\n        width: this._sw - this._lineWidth,\n        height: this._sh - this._lineWidth\n      },\n      center: point,\n      tl: [point[0] - this._sw / 2, point[1] - this._sh / 2],\n      tr: [point[0] + this._sw / 2, point[1] - this._sh / 2],\n      br: [point[0] + this._sw / 2, point[1] + this._sh / 2],\n      bl: [point[0] - this._sw / 2, point[1] + this._sh / 2]\n    };\n  },\n\n  /**\n   * Convert a (x, y) point to time date\n   *\n   * @param  {Array} point point\n   * @return {Object}       date\n   */\n  pointToDate: function (point) {\n    var nthX = Math.floor((point[0] - this._rect.x) / this._sw) + 1;\n    var nthY = Math.floor((point[1] - this._rect.y) / this._sh) + 1;\n    var range = this._rangeInfo.range;\n\n    if (this._orient === 'vertical') {\n      return this._getDateByWeeksAndDay(nthY, nthX - 1, range);\n    }\n\n    return this._getDateByWeeksAndDay(nthX, nthY - 1, range);\n  },\n\n  /**\n   * @inheritDoc\n   */\n  convertToPixel: zrUtil.curry(doConvert, 'dataToPoint'),\n\n  /**\n   * @inheritDoc\n   */\n  convertFromPixel: zrUtil.curry(doConvert, 'pointToData'),\n\n  /**\n   * initRange\n   *\n   * @private\n   * @return {Array} [start, end]\n   */\n  _initRangeOption: function () {\n    var range = this._model.get('range');\n\n    var rg = range;\n\n    if (zrUtil.isArray(rg) && rg.length === 1) {\n      rg = rg[0];\n    }\n\n    if (/^\\d{4}$/.test(rg)) {\n      range = [rg + '-01-01', rg + '-12-31'];\n    }\n\n    if (/^\\d{4}[\\/|-]\\d{1,2}$/.test(rg)) {\n      var start = this.getDateInfo(rg);\n      var firstDay = start.date;\n      firstDay.setMonth(firstDay.getMonth() + 1);\n      var end = this.getNextNDay(firstDay, -1);\n      range = [start.formatedDate, end.formatedDate];\n    }\n\n    if (/^\\d{4}[\\/|-]\\d{1,2}[\\/|-]\\d{1,2}$/.test(rg)) {\n      range = [rg, rg];\n    }\n\n    var tmp = this._getRangeInfo(range);\n\n    if (tmp.start.time > tmp.end.time) {\n      range.reverse();\n    }\n\n    return range;\n  },\n\n  /**\n   * range info\n   *\n   * @private\n   * @param  {Array} range range ['2017-01-01', '2017-07-08']\n   *  If range[0] > range[1], they will not be reversed.\n   * @return {Object}       obj\n   */\n  _getRangeInfo: function (range) {\n    range = [this.getDateInfo(range[0]), this.getDateInfo(range[1])];\n    var reversed;\n\n    if (range[0].time > range[1].time) {\n      reversed = true;\n      range.reverse();\n    }\n\n    var allDay = Math.floor(range[1].time / PROXIMATE_ONE_DAY) - Math.floor(range[0].time / PROXIMATE_ONE_DAY) + 1; // Consider case:\n    // Firstly set system timezone as \"Time Zone: America/Toronto\",\n    // ```\n    // var first = new Date(1478412000000 - 3600 * 1000 * 2.5);\n    // var second = new Date(1478412000000);\n    // var allDays = Math.floor(second / ONE_DAY) - Math.floor(first / ONE_DAY) + 1;\n    // ```\n    // will get wrong result because of DST. So we should fix it.\n\n    var date = new Date(range[0].time);\n    var startDateNum = date.getDate();\n    var endDateNum = range[1].date.getDate();\n    date.setDate(startDateNum + allDay - 1); // The bias can not over a month, so just compare date.\n\n    if (date.getDate() !== endDateNum) {\n      var sign = date.getTime() - range[1].time > 0 ? 1 : -1;\n\n      while (date.getDate() !== endDateNum && (date.getTime() - range[1].time) * sign > 0) {\n        allDay -= sign;\n        date.setDate(startDateNum + allDay - 1);\n      }\n    }\n\n    var weeks = Math.floor((allDay + range[0].day + 6) / 7);\n    var nthWeek = reversed ? -weeks + 1 : weeks - 1;\n    reversed && range.reverse();\n    return {\n      range: [range[0].formatedDate, range[1].formatedDate],\n      start: range[0],\n      end: range[1],\n      allDay: allDay,\n      weeks: weeks,\n      // From 0.\n      nthWeek: nthWeek,\n      fweek: range[0].day,\n      lweek: range[1].day\n    };\n  },\n\n  /**\n   * get date by nthWeeks and week day in range\n   *\n   * @private\n   * @param  {number} nthWeek the week\n   * @param  {number} day   the week day\n   * @param  {Array} range [d1, d2]\n   * @return {Object}\n   */\n  _getDateByWeeksAndDay: function (nthWeek, day, range) {\n    var rangeInfo = this._getRangeInfo(range);\n\n    if (nthWeek > rangeInfo.weeks || nthWeek === 0 && day < rangeInfo.fweek || nthWeek === rangeInfo.weeks && day > rangeInfo.lweek) {\n      return false;\n    }\n\n    var nthDay = (nthWeek - 1) * 7 - rangeInfo.fweek + day;\n    var date = new Date(rangeInfo.start.time);\n    date.setDate(rangeInfo.start.d + nthDay);\n    return this.getDateInfo(date);\n  }\n};\nCalendar.dimensions = Calendar.prototype.dimensions;\nCalendar.getDimensionsInfo = Calendar.prototype.getDimensionsInfo;\n\nCalendar.create = function (ecModel, api) {\n  var calendarList = [];\n  ecModel.eachComponent('calendar', function (calendarModel) {\n    var calendar = new Calendar(calendarModel, ecModel, api);\n    calendarList.push(calendar);\n    calendarModel.coordinateSystem = calendar;\n  });\n  ecModel.eachSeries(function (calendarSeries) {\n    if (calendarSeries.get('coordinateSystem') === 'calendar') {\n      // Inject coordinate system\n      calendarSeries.coordinateSystem = calendarList[calendarSeries.get('calendarIndex') || 0];\n    }\n  });\n  return calendarList;\n};\n\nfunction doConvert(methodName, ecModel, finder, value) {\n  var calendarModel = finder.calendarModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = calendarModel ? calendarModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem : null;\n  return coordSys === this ? coordSys[methodName](value) : null;\n}\n\nCoordinateSystem.register('calendar', Calendar);\nvar _default = Calendar;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutParams = _layout.getLayoutParams;\nvar sizeCalculable = _layout.sizeCalculable;\nvar mergeLayoutParam = _layout.mergeLayoutParam;\nvar CalendarModel = ComponentModel.extend({\n  type: 'calendar',\n\n  /**\n   * @type {module:echarts/coord/calendar/Calendar}\n   */\n  coordinateSystem: null,\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    left: 80,\n    top: 60,\n    cellSize: 20,\n    // horizontal vertical\n    orient: 'horizontal',\n    // month separate line style\n    splitLine: {\n      show: true,\n      lineStyle: {\n        color: '#000',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    // rect style  temporarily unused emphasis\n    itemStyle: {\n      normal: {\n        color: '#fff',\n        borderWidth: 1,\n        borderColor: '#ccc'\n      }\n    },\n    // week text style\n    dayLabel: {\n      show: true,\n      // a week first day\n      firstDay: 0,\n      // start end\n      position: 'start',\n      margin: '50%',\n      // 50% of cellSize\n      nameMap: 'en',\n      color: '#000'\n    },\n    // month text style\n    monthLabel: {\n      show: true,\n      // start end\n      position: 'start',\n      margin: 5,\n      // center or left\n      align: 'center',\n      // cn en []\n      nameMap: 'en',\n      formatter: null,\n      color: '#000'\n    },\n    // year text style\n    yearLabel: {\n      show: true,\n      // top bottom left right\n      position: null,\n      margin: 30,\n      formatter: null,\n      color: '#ccc',\n      fontFamily: 'sans-serif',\n      fontWeight: 'bolder',\n      fontSize: 20\n    }\n  },\n\n  /**\n   * @override\n   */\n  init: function (option, parentModel, ecModel, extraOpt) {\n    var inputPositionParams = getLayoutParams(option);\n    CalendarModel.superApply(this, 'init', arguments);\n    mergeAndNormalizeLayoutParams(option, inputPositionParams);\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function (option, extraOpt) {\n    CalendarModel.superApply(this, 'mergeOption', arguments);\n    mergeAndNormalizeLayoutParams(this.option, option);\n  }\n});\n\nfunction mergeAndNormalizeLayoutParams(target, raw) {\n  // Normalize cellSize\n  var cellSize = target.cellSize;\n\n  if (!zrUtil.isArray(cellSize)) {\n    cellSize = target.cellSize = [cellSize, cellSize];\n  } else if (cellSize.length === 1) {\n    cellSize[1] = cellSize[0];\n  }\n\n  var ignoreSize = zrUtil.map([0, 1], function (hvIdx) {\n    // If user have set `width` or both `left` and `right`, cellSize\n    // will be automatically set to 'auto', otherwise the default\n    // setting of cellSize will make `width` setting not work.\n    if (sizeCalculable(raw, hvIdx)) {\n      cellSize[hvIdx] = 'auto';\n    }\n\n    return cellSize[hvIdx] != null && cellSize[hvIdx] !== 'auto';\n  });\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: ignoreSize\n  });\n}\n\nvar _default = CalendarModel;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nfunction _default(coordSys) {\n  var rect = coordSys.getRect();\n  var rangeInfo = coordSys.getRangeInfo();\n  return {\n    coordSys: {\n      type: 'calendar',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height,\n      cellWidth: coordSys.getCellWidth(),\n      cellHeight: coordSys.getCellHeight(),\n      rangeInfo: {\n        start: rangeInfo.start,\n        end: rangeInfo.end,\n        weeks: rangeInfo.weeks,\n        dayCount: rangeInfo.allDay\n      }\n    },\n    api: {\n      coord: zrUtil.bind(coordSys.dataToPoint, coordSys)\n    }\n  };\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../Axis\");\n\n/**\n * Extend axis 2d\n * @constructor module:echarts/coord/cartesian/Axis2D\n * @extends {module:echarts/coord/cartesian/Axis}\n * @param {string} dim\n * @param {*} scale\n * @param {Array.<number>} coordExtent\n * @param {string} axisType\n * @param {string} position\n */\nvar Axis2D = function (dim, scale, coordExtent, axisType, position) {\n  Axis.call(this, dim, scale, coordExtent);\n  /**\n   * Axis type\n   *  - 'category'\n   *  - 'value'\n   *  - 'time'\n   *  - 'log'\n   * @type {string}\n   */\n\n  this.type = axisType || 'value';\n  /**\n   * Axis position\n   *  - 'top'\n   *  - 'bottom'\n   *  - 'left'\n   *  - 'right'\n   */\n\n  this.position = position || 'bottom';\n};\n\nAxis2D.prototype = {\n  constructor: Axis2D,\n\n  /**\n   * Index of axis, can be used as key\n   */\n  index: 0,\n\n  /**\n   * If axis is on the zero position of the other axis\n   * @type {boolean}\n   */\n  onZero: false,\n\n  /**\n   * Axis model\n   * @param {module:echarts/coord/cartesian/AxisModel}\n   */\n  model: null,\n  isHorizontal: function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  },\n\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n  getGlobalExtent: function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  },\n  getOtherAxis: function () {\n    this.grid.getOtherAxis();\n  },\n\n  /**\n   * If label is ignored.\n   * Automatically used when axis is category and label can not be all shown\n   * @param  {number}  idx\n   * @return {boolean}\n   */\n  isLabelIgnored: function (idx) {\n    if (this.type === 'category') {\n      var labelInterval = this.getLabelInterval();\n      return typeof labelInterval === 'function' && !labelInterval(idx, this.scale.getLabel(idx)) || idx % (labelInterval + 1);\n    }\n  },\n\n  /**\n   * @override\n   */\n  pointToData: function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  },\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var localCoord = axis.toLocalCoord(80);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toLocalCoord: null,\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var globalCoord = axis.toLocalCoord(40);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toGlobalCoord: null\n};\nzrUtil.inherits(Axis2D, Axis);\nvar _default = Axis2D;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\nvar axisModelCreator = require(\"../axisModelCreator\");\n\nvar axisModelCommonMixin = require(\"../axisModelCommonMixin\");\n\nvar AxisModel = ComponentModel.extend({\n  type: 'cartesian2dAxis',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Axis2D}\n   */\n  axis: null,\n\n  /**\n   * @override\n   */\n  init: function () {\n    AxisModel.superApply(this, 'init', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function () {\n    AxisModel.superApply(this, 'mergeOption', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  restoreData: function () {\n    AxisModel.superApply(this, 'restoreData', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   * @return {module:echarts/model/Component}\n   */\n  getCoordSysModel: function () {\n    return this.ecModel.queryComponents({\n      mainType: 'grid',\n      index: this.option.gridIndex,\n      id: this.option.gridId\n    })[0];\n  }\n});\n\nfunction getAxisType(axisDim, option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}\n\nzrUtil.merge(AxisModel.prototype, axisModelCommonMixin);\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  // Offset is for multiple axis on the same position\n  offset: 0\n};\naxisModelCreator('x', AxisModel, getAxisType, extraOption);\naxisModelCreator('y', AxisModel, getAxisType, extraOption);\nvar _default = AxisModel;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\n/**\n * Cartesian coordinate system\n * @module  echarts/coord/Cartesian\n *\n */\nfunction dimAxisMapper(dim) {\n  return this._axes[dim];\n}\n/**\n * @alias module:echarts/coord/Cartesian\n * @constructor\n */\n\n\nvar Cartesian = function (name) {\n  this._axes = {};\n  this._dimList = [];\n  /**\n   * @type {string}\n   */\n\n  this.name = name || '';\n};\n\nCartesian.prototype = {\n  constructor: Cartesian,\n  type: 'cartesian',\n\n  /**\n   * Get axis\n   * @param  {number|string} dim\n   * @return {module:echarts/coord/Cartesian~Axis}\n   */\n  getAxis: function (dim) {\n    return this._axes[dim];\n  },\n\n  /**\n   * Get axes list\n   * @return {Array.<module:echarts/coord/Cartesian~Axis>}\n   */\n  getAxes: function () {\n    return zrUtil.map(this._dimList, dimAxisMapper, this);\n  },\n\n  /**\n   * Get axes list by given scale type\n   */\n  getAxesByScale: function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  },\n\n  /**\n   * Add axis\n   * @param {module:echarts/coord/Cartesian.Axis}\n   */\n  addAxis: function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  },\n\n  /**\n   * Convert data to coord in nd space\n   * @param {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  dataToCoord: function (val) {\n    return this._dataCoordConvert(val, 'dataToCoord');\n  },\n\n  /**\n   * Convert coord in nd space to data\n   * @param  {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  coordToData: function (val) {\n    return this._dataCoordConvert(val, 'coordToData');\n  },\n  _dataCoordConvert: function (input, method) {\n    var dimList = this._dimList;\n    var output = input instanceof Array ? [] : {};\n\n    for (var i = 0; i < dimList.length; i++) {\n      var dim = dimList[i];\n      var axis = this._axes[dim];\n      output[dim] = axis[method](input[dim]);\n    }\n\n    return output;\n  }\n};\nvar _default = Cartesian;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Cartesian = require(\"./Cartesian\");\n\nfunction Cartesian2D(name) {\n  Cartesian.call(this, name);\n}\n\nCartesian2D.prototype = {\n  constructor: Cartesian2D,\n  type: 'cartesian2d',\n\n  /**\n   * @type {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['x', 'y'],\n\n  /**\n   * Base axis will be used on stacking.\n   *\n   * @return {module:echarts/coord/cartesian/Axis2D}\n   */\n  getBaseAxis: function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  },\n\n  /**\n   * If contain point\n   * @param {Array.<number>} point\n   * @return {boolean}\n   */\n  containPoint: function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  },\n\n  /**\n   * If contain data\n   * @param {Array.<number>} data\n   * @return {boolean}\n   */\n  containData: function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {boolean} [clamp=false]\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, clamp) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    return [xAxis.toGlobalCoord(xAxis.dataToCoord(data[0], clamp)), yAxis.toGlobalCoord(yAxis.dataToCoord(data[1], clamp))];\n  },\n\n  /**\n   * @param {Array.<number>} point\n   * @param {boolean} [clamp=false]\n   * @return {Array.<number>}\n   */\n  pointToData: function (point, clamp) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    return [xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp), yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp)];\n  },\n\n  /**\n   * Get other axis\n   * @param {module:echarts/coord/cartesian/Axis2D} axis\n   */\n  getOtherAxis: function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  }\n};\nzrUtil.inherits(Cartesian2D, Cartesian);\nvar _default = Cartesian2D;\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar Cartesian2D = require(\"./Cartesian2D\");\n\nvar Axis2D = require(\"./Axis2D\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nrequire(\"./GridModel\");\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\n// Depends on GridModel, AxisModel, which performs preprocess.\nvar each = zrUtil.each;\nvar ifAxisCrossZero = axisHelper.ifAxisCrossZero;\nvar niceScaleExtent = axisHelper.niceScaleExtent;\n/**\n * Check if the axis is used in the specified grid\n * @inner\n */\n\nfunction isAxisUsedInTheGrid(axisModel, gridModel, ecModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction rotateTextRect(textRect, rotate) {\n  var rotateRadians = rotate * Math.PI / 180;\n  var boundingBox = textRect.plain();\n  var beforeWidth = boundingBox.width;\n  var beforeHeight = boundingBox.height;\n  var afterWidth = beforeWidth * Math.cos(rotateRadians) + beforeHeight * Math.sin(rotateRadians);\n  var afterHeight = beforeWidth * Math.sin(rotateRadians) + beforeHeight * Math.cos(rotateRadians);\n  var rotatedRect = new BoundingRect(boundingBox.x, boundingBox.y, afterWidth, afterHeight);\n  return rotatedRect;\n}\n\nfunction getLabelUnionRect(axis) {\n  var axisModel = axis.model;\n  var labels = axisModel.getFormattedLabels();\n  var axisLabelModel = axisModel.getModel('axisLabel');\n  var rect;\n  var step = 1;\n  var labelCount = labels.length;\n\n  if (labelCount > 40) {\n    // Simple optimization for large amount of labels\n    step = Math.ceil(labelCount / 40);\n  }\n\n  for (var i = 0; i < labelCount; i += step) {\n    if (!axis.isLabelIgnored(i)) {\n      var unrotatedSingleRect = axisLabelModel.getTextRect(labels[i]);\n      var singleRect = rotateTextRect(unrotatedSingleRect, axisLabelModel.get('rotate') || 0);\n      rect ? rect.union(singleRect) : rect = singleRect;\n    }\n  }\n\n  return rect;\n}\n\nfunction Grid(gridModel, ecModel, api) {\n  /**\n   * @type {Object.<string, module:echarts/coord/cartesian/Cartesian2D>}\n   * @private\n   */\n  this._coordsMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Cartesian>}\n   * @private\n   */\n\n  this._coordsList = [];\n  /**\n   * @type {Object.<string, module:echarts/coord/cartesian/Axis2D>}\n   * @private\n   */\n\n  this._axesMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Axis2D>}\n   * @private\n   */\n\n  this._axesList = [];\n\n  this._initCartesian(gridModel, ecModel, api);\n\n  this.model = gridModel;\n}\n\nvar gridProto = Grid.prototype;\ngridProto.type = 'grid';\ngridProto.axisPointerEnabled = true;\n\ngridProto.getRect = function () {\n  return this._rect;\n};\n\ngridProto.update = function (ecModel, api) {\n  var axesMap = this._axesMap;\n\n  this._updateScale(ecModel, this.model);\n\n  each(axesMap.x, function (xAxis) {\n    niceScaleExtent(xAxis.scale, xAxis.model);\n  });\n  each(axesMap.y, function (yAxis) {\n    niceScaleExtent(yAxis.scale, yAxis.model);\n  });\n  each(axesMap.x, function (xAxis) {\n    fixAxisOnZero(axesMap, 'y', xAxis);\n  });\n  each(axesMap.y, function (yAxis) {\n    fixAxisOnZero(axesMap, 'x', yAxis);\n  }); // Resize again if containLabel is enabled\n  // FIXME It may cause getting wrong grid size in data processing stage\n\n  this.resize(this.model, api);\n};\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis) {\n  // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n  var axes = axesMap[otherAxisDim];\n\n  if (!axis.onZero) {\n    return;\n  }\n\n  var onZeroAxisIndex = axis.onZeroAxisIndex; // If target axis is specified.\n\n  if (onZeroAxisIndex != null) {\n    var otherAxis = axes[onZeroAxisIndex];\n\n    if (otherAxis && canNotOnZeroToAxis(otherAxis)) {\n      axis.onZero = false;\n    }\n\n    return;\n  }\n\n  for (var idx in axes) {\n    if (axes.hasOwnProperty(idx)) {\n      var otherAxis = axes[idx];\n\n      if (otherAxis && !canNotOnZeroToAxis(otherAxis)) {\n        onZeroAxisIndex = +idx;\n        break;\n      }\n    }\n  }\n\n  if (onZeroAxisIndex == null) {\n    axis.onZero = false;\n  }\n\n  axis.onZeroAxisIndex = onZeroAxisIndex;\n}\n\nfunction canNotOnZeroToAxis(axis) {\n  return axis.type === 'category' || axis.type === 'time' || !ifAxisCrossZero(axis);\n}\n/**\n * Resize the grid\n * @param {module:echarts/coord/cartesian/GridModel} gridModel\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\ngridProto.resize = function (gridModel, api, ignoreContainLabel) {\n  var gridRect = getLayoutRect(gridModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n  this._rect = gridRect;\n  var axesList = this._axesList;\n  adjustAxes(); // Minus label size\n\n  if (!ignoreContainLabel && gridModel.get('containLabel')) {\n    each(axesList, function (axis) {\n      if (!axis.model.get('axisLabel.inside')) {\n        var labelUnionRect = getLabelUnionRect(axis);\n\n        if (labelUnionRect) {\n          var dim = axis.isHorizontal() ? 'height' : 'width';\n          var margin = axis.model.get('axisLabel.margin');\n          gridRect[dim] -= labelUnionRect[dim] + margin;\n\n          if (axis.position === 'top') {\n            gridRect.y += labelUnionRect.height + margin;\n          } else if (axis.position === 'left') {\n            gridRect.x += labelUnionRect.width + margin;\n          }\n        }\n      }\n    });\n    adjustAxes();\n  }\n\n  function adjustAxes() {\n    each(axesList, function (axis) {\n      var isHorizontal = axis.isHorizontal();\n      var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n      var idx = axis.inverse ? 1 : 0;\n      axis.setExtent(extent[idx], extent[1 - idx]);\n      updateAxisTransfrom(axis, isHorizontal ? gridRect.x : gridRect.y);\n    });\n  }\n};\n/**\n * @param {string} axisType\n * @param {number} [axisIndex]\n */\n\n\ngridProto.getAxis = function (axisType, axisIndex) {\n  var axesMapOnDim = this._axesMap[axisType];\n\n  if (axesMapOnDim != null) {\n    if (axisIndex == null) {\n      // Find first axis\n      for (var name in axesMapOnDim) {\n        if (axesMapOnDim.hasOwnProperty(name)) {\n          return axesMapOnDim[name];\n        }\n      }\n    }\n\n    return axesMapOnDim[axisIndex];\n  }\n};\n/**\n * @return {Array.<module:echarts/coord/Axis>}\n */\n\n\ngridProto.getAxes = function () {\n  return this._axesList.slice();\n};\n/**\n * Usage:\n *      grid.getCartesian(xAxisIndex, yAxisIndex);\n *      grid.getCartesian(xAxisIndex);\n *      grid.getCartesian(null, yAxisIndex);\n *      grid.getCartesian({xAxisIndex: ..., yAxisIndex: ...});\n *\n * @param {number|Object} [xAxisIndex]\n * @param {number} [yAxisIndex]\n */\n\n\ngridProto.getCartesian = function (xAxisIndex, yAxisIndex) {\n  if (xAxisIndex != null && yAxisIndex != null) {\n    var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n    return this._coordsMap[key];\n  }\n\n  if (zrUtil.isObject(xAxisIndex)) {\n    yAxisIndex = xAxisIndex.yAxisIndex;\n    xAxisIndex = xAxisIndex.xAxisIndex;\n  } // When only xAxisIndex or yAxisIndex given, find its first cartesian.\n\n\n  for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n    if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n      return coordList[i];\n    }\n  }\n};\n\ngridProto.getCartesians = function () {\n  return this._coordsList.slice();\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertToPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertFromPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n};\n/**\n * @inner\n */\n\n\ngridProto._findConvertTarget = function (ecModel, finder) {\n  var seriesModel = finder.seriesModel;\n  var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis')[0];\n  var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis')[0];\n  var gridModel = finder.gridModel;\n  var coordsList = this._coordsList;\n  var cartesian;\n  var axis;\n\n  if (seriesModel) {\n    cartesian = seriesModel.coordinateSystem;\n    zrUtil.indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n  } else if (xAxisModel && yAxisModel) {\n    cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  } else if (xAxisModel) {\n    axis = this.getAxis('x', xAxisModel.componentIndex);\n  } else if (yAxisModel) {\n    axis = this.getAxis('y', yAxisModel.componentIndex);\n  } // Lowest priority.\n  else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n\n  return {\n    cartesian: cartesian,\n    axis: axis\n  };\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.containPoint = function (point) {\n  var coord = this._coordsList[0];\n\n  if (coord) {\n    return coord.containPoint(point);\n  }\n};\n/**\n * Initialize cartesian coordinate systems\n * @private\n */\n\n\ngridProto._initCartesian = function (gridModel, ecModel, api) {\n  var axisPositionUsed = {\n    left: false,\n    right: false,\n    top: false,\n    bottom: false\n  };\n  var axesMap = {\n    x: {},\n    y: {}\n  };\n  var axesCount = {\n    x: 0,\n    y: 0\n  }; /// Create axis\n\n  ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n  ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n  if (!axesCount.x || !axesCount.y) {\n    // Roll back when there no either x or y axis\n    this._axesMap = {};\n    this._axesList = [];\n    return;\n  }\n\n  this._axesMap = axesMap; /// Create cartesian2d\n\n  each(axesMap.x, function (xAxis, xAxisIndex) {\n    each(axesMap.y, function (yAxis, yAxisIndex) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      var cartesian = new Cartesian2D(key);\n      cartesian.grid = this;\n      cartesian.model = gridModel;\n      this._coordsMap[key] = cartesian;\n\n      this._coordsList.push(cartesian);\n\n      cartesian.addAxis(xAxis);\n      cartesian.addAxis(yAxis);\n    }, this);\n  }, this);\n\n  function createAxisCreator(axisType) {\n    return function (axisModel, idx) {\n      if (!isAxisUsedInTheGrid(axisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var axisPosition = axisModel.get('position');\n\n      if (axisType === 'x') {\n        // Fix position\n        if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n          // Default bottom of X\n          axisPosition = 'bottom';\n\n          if (axisPositionUsed[axisPosition]) {\n            axisPosition = axisPosition === 'top' ? 'bottom' : 'top';\n          }\n        }\n      } else {\n        // Fix position\n        if (axisPosition !== 'left' && axisPosition !== 'right') {\n          // Default left of Y\n          axisPosition = 'left';\n\n          if (axisPositionUsed[axisPosition]) {\n            axisPosition = axisPosition === 'left' ? 'right' : 'left';\n          }\n        }\n      }\n\n      axisPositionUsed[axisPosition] = true;\n      var axis = new Axis2D(axisType, axisHelper.createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n      var isCategory = axis.type === 'category';\n      axis.onBand = isCategory && axisModel.get('boundaryGap');\n      axis.inverse = axisModel.get('inverse');\n      axis.onZero = axisModel.get('axisLine.onZero');\n      axis.onZeroAxisIndex = axisModel.get('axisLine.onZeroAxisIndex'); // Inject axis into axisModel\n\n      axisModel.axis = axis; // Inject axisModel into axis\n\n      axis.model = axisModel; // Inject grid info axis\n\n      axis.grid = this; // Index of axis, can be used as key\n\n      axis.index = idx;\n\n      this._axesList.push(axis);\n\n      axesMap[axisType][idx] = axis;\n      axesCount[axisType]++;\n    };\n  }\n};\n/**\n * Update cartesian properties from series\n * @param  {module:echarts/model/Option} option\n * @private\n */\n\n\ngridProto._updateScale = function (ecModel, gridModel) {\n  // Reset scale\n  zrUtil.each(this._axesList, function (axis) {\n    axis.scale.setExtent(Infinity, -Infinity);\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (isCartesian2D(seriesModel)) {\n      var axesModels = findAxesModels(seriesModel, ecModel);\n      var xAxisModel = axesModels[0];\n      var yAxisModel = axesModels[1];\n\n      if (!isAxisUsedInTheGrid(xAxisModel, gridModel, ecModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      var data = seriesModel.getData();\n      var xAxis = cartesian.getAxis('x');\n      var yAxis = cartesian.getAxis('y');\n\n      if (data.type === 'list') {\n        unionExtent(data, xAxis, seriesModel);\n        unionExtent(data, yAxis, seriesModel);\n      }\n    }\n  }, this);\n\n  function unionExtent(data, axis, seriesModel) {\n    each(seriesModel.coordDimToDataDim(axis.dim), function (dim) {\n      axis.scale.unionExtentFromData(data, dim);\n    });\n  }\n};\n/**\n * @param {string} [dim] 'x' or 'y' or 'auto' or null/undefined\n * @return {Object} {baseAxes: [], otherAxes: []}\n */\n\n\ngridProto.getTooltipAxes = function (dim) {\n  var baseAxes = [];\n  var otherAxes = [];\n  each(this.getCartesians(), function (cartesian) {\n    var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n    var otherAxis = cartesian.getOtherAxis(baseAxis);\n    zrUtil.indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n    zrUtil.indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n  });\n  return {\n    baseAxes: baseAxes,\n    otherAxes: otherAxes\n  };\n};\n/**\n * @inner\n */\n\n\nfunction updateAxisTransfrom(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nvar axesTypes = ['xAxis', 'yAxis'];\n/**\n * @inner\n */\n\nfunction findAxesModels(seriesModel, ecModel) {\n  return zrUtil.map(axesTypes, function (axisType) {\n    var axisModel = seriesModel.getReferringComponents(axisType)[0];\n    return axisModel;\n  });\n}\n/**\n * @inner\n */\n\n\nfunction isCartesian2D(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\n\nGrid.create = function (ecModel, api) {\n  var grids = [];\n  ecModel.eachComponent('grid', function (gridModel, idx) {\n    var grid = new Grid(gridModel, ecModel, api);\n    grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n    // should be performed in create stage.\n\n    grid.resize(gridModel, api, true);\n    gridModel.coordinateSystem = grid;\n    grids.push(grid);\n  }); // Inject the coordinateSystems into seriesModel\n\n  ecModel.eachSeries(function (seriesModel) {\n    if (!isCartesian2D(seriesModel)) {\n      return;\n    }\n\n    var axesModels = findAxesModels(seriesModel, ecModel);\n    var xAxisModel = axesModels[0];\n    var yAxisModel = axesModels[1];\n    var gridModel = xAxisModel.getCoordSysModel();\n    var grid = gridModel.coordinateSystem;\n    seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  });\n  return grids;\n}; // For deciding which dimensions to use when creating list data\n\n\nGrid.dimensions = Grid.prototype.dimensions = Cartesian2D.prototype.dimensions;\nCoordinateSystem.register('cartesian2d', Grid);\nvar _default = Grid;\nmodule.exports = _default;","require(\"./AxisModel\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\n// Grid \n//  Cartesian2D \nvar _default = ComponentModel.extend({\n  type: 'grid',\n  dependencies: ['xAxis', 'yAxis'],\n  layoutMode: 'box',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Grid}\n   */\n  coordinateSystem: null,\n  defaultOption: {\n    show: false,\n    zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 60,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  }\n});\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map(['x', 'y'], function (dim, dimIdx) {\n    var axis = this.getAxis(dim);\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    return axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n  }, this);\n}\n\nfunction _default(coordSys) {\n  var rect = coordSys.grid.getRect();\n  return {\n    coordSys: {\n      // The name exposed to user is always 'cartesian2d' but not 'grid'.\n      type: 'cartesian2d',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: zrUtil.bind(coordSys.dataToPoint, coordSys),\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar parseGeoJson = require(\"./parseGeoJson\");\n\nvar View = require(\"../View\");\n\nvar fixNanhai = require(\"./fix/nanhai\");\n\nvar fixTextCoord = require(\"./fix/textCoord\");\n\nvar fixGeoCoord = require(\"./fix/geoCoord\");\n\nvar fixDiaoyuIsland = require(\"./fix/diaoyuIsland\");\n\n// Geo fix functions\nvar geoFixFuncs = [fixNanhai, fixTextCoord, fixGeoCoord, fixDiaoyuIsland];\n/**\n * [Geo description]\n * @param {string} name Geo name\n * @param {string} map Map type\n * @param {Object} geoJson\n * @param {Object} [specialAreas]\n *        Specify the positioned areas by left, top, width, height\n * @param {Object.<string, string>} [nameMap]\n *        Specify name alias\n */\n\nfunction Geo(name, map, geoJson, specialAreas, nameMap) {\n  View.call(this, name);\n  /**\n   * Map type\n   * @type {string}\n   */\n\n  this.map = map;\n  this._nameCoordMap = zrUtil.createHashMap();\n  this.loadGeoJson(geoJson, specialAreas, nameMap);\n}\n\nGeo.prototype = {\n  constructor: Geo,\n  type: 'geo',\n\n  /**\n   * @param {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['lng', 'lat'],\n\n  /**\n   * If contain given lng,lat coord\n   * @param {Array.<number>}\n   * @readOnly\n   */\n  containCoord: function (coord) {\n    var regions = this.regions;\n\n    for (var i = 0; i < regions.length; i++) {\n      if (regions[i].contain(coord)) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /**\n   * @param {Object} geoJson\n   * @param {Object} [specialAreas]\n   *        Specify the positioned areas by left, top, width, height\n   * @param {Object.<string, string>} [nameMap]\n   *        Specify name alias\n   */\n  loadGeoJson: function (geoJson, specialAreas, nameMap) {\n    // https://jsperf.com/try-catch-performance-overhead\n    try {\n      this.regions = geoJson ? parseGeoJson(geoJson) : [];\n    } catch (e) {\n      throw 'Invalid geoJson format\\n' + e.message;\n    }\n\n    specialAreas = specialAreas || {};\n    nameMap = nameMap || {};\n    var regions = this.regions;\n    var regionsMap = zrUtil.createHashMap();\n\n    for (var i = 0; i < regions.length; i++) {\n      var regionName = regions[i].name; // Try use the alias in nameMap\n\n      regionName = nameMap.hasOwnProperty(regionName) ? nameMap[regionName] : regionName;\n      regions[i].name = regionName;\n      regionsMap.set(regionName, regions[i]); // Add geoJson\n\n      this.addGeoCoord(regionName, regions[i].center); // Some area like Alaska in USA map needs to be tansformed\n      // to look better\n\n      var specialArea = specialAreas[regionName];\n\n      if (specialArea) {\n        regions[i].transformTo(specialArea.left, specialArea.top, specialArea.width, specialArea.height);\n      }\n    }\n\n    this._regionsMap = regionsMap;\n    this._rect = null;\n    zrUtil.each(geoFixFuncs, function (fixFunc) {\n      fixFunc(this);\n    }, this);\n  },\n  // Overwrite\n  transformTo: function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    rect = rect.clone(); // Longitute is inverted\n\n    rect.y = -rect.y - rect.height;\n    var viewTransform = this._viewTransform;\n    viewTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    viewTransform.decomposeTransform();\n    var scale = viewTransform.scale;\n    scale[1] = -scale[1];\n    viewTransform.updateTransform();\n\n    this._updateTransform();\n  },\n\n  /**\n   * @param {string} name\n   * @return {module:echarts/coord/geo/Region}\n   */\n  getRegion: function (name) {\n    return this._regionsMap.get(name);\n  },\n  getRegionByCoord: function (coord) {\n    var regions = this.regions;\n\n    for (var i = 0; i < regions.length; i++) {\n      if (regions[i].contain(coord)) {\n        return regions[i];\n      }\n    }\n  },\n\n  /**\n   * Add geoCoord for indexing by name\n   * @param {string} name\n   * @param {Array.<number>} geoCoord\n   */\n  addGeoCoord: function (name, geoCoord) {\n    this._nameCoordMap.set(name, geoCoord);\n  },\n\n  /**\n   * Get geoCoord by name\n   * @param {string} name\n   * @return {Array.<number>}\n   */\n  getGeoCoord: function (name) {\n    return this._nameCoordMap.get(name);\n  },\n  // Overwrite\n  getBoundingRect: function () {\n    if (this._rect) {\n      return this._rect;\n    }\n\n    var rect;\n    var regions = this.regions;\n\n    for (var i = 0; i < regions.length; i++) {\n      var regionRect = regions[i].getBoundingRect();\n      rect = rect || regionRect.clone();\n      rect.union(regionRect);\n    } // FIXME Always return new ?\n\n\n    return this._rect = rect || new BoundingRect(0, 0, 0, 0);\n  },\n\n  /**\n   * @param {string|Array.<number>} data\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data) {\n    if (typeof data === 'string') {\n      // Map area name to geoCoord\n      data = this.getGeoCoord(data);\n    }\n\n    if (data) {\n      return View.prototype.dataToPoint.call(this, data);\n    }\n  },\n\n  /**\n   * @inheritDoc\n   */\n  convertToPixel: zrUtil.curry(doConvert, 'dataToPoint'),\n\n  /**\n   * @inheritDoc\n   */\n  convertFromPixel: zrUtil.curry(doConvert, 'pointToData')\n};\nzrUtil.mixin(Geo, View);\n\nfunction doConvert(methodName, ecModel, finder, value) {\n  var geoModel = finder.geoModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = geoModel ? geoModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem // For map.\n  || (seriesModel.getReferringComponents('geo')[0] || {}).coordinateSystem : null;\n  return coordSys === this ? coordSys[methodName](value) : null;\n}\n\nvar _default = Geo;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\nvar Model = require(\"../../model/Model\");\n\nvar selectableMixin = require(\"../../component/helper/selectableMixin\");\n\nvar geoCreator = require(\"./geoCreator\");\n\nvar GeoModel = ComponentModel.extend({\n  type: 'geo',\n\n  /**\n   * @type {module:echarts/coord/geo/Geo}\n   */\n  coordinateSystem: null,\n  layoutMode: 'box',\n  init: function (option) {\n    ComponentModel.prototype.init.apply(this, arguments); // Default label emphasis `show`\n\n    modelUtil.defaultEmphasis(option.label, ['show']);\n  },\n  optionUpdated: function () {\n    var option = this.option;\n    var self = this;\n    option.regions = geoCreator.getFilledRegions(option.regions, option.map, option.nameMap);\n    this._optionModelMap = zrUtil.reduce(option.regions || [], function (optionModelMap, regionOpt) {\n      if (regionOpt.name) {\n        optionModelMap.set(regionOpt.name, new Model(regionOpt, self));\n      }\n\n      return optionModelMap;\n    }, zrUtil.createHashMap());\n    this.updateSelectedMap(option.regions);\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 0,\n    show: true,\n    left: 'center',\n    top: 'center',\n    // width:,\n    // height:,\n    // right\n    // bottom\n    // Aspect is width / height. Inited to be geoJson bbox aspect\n    // This parameter is used for scale this aspect\n    aspectScale: 0.75,\n    ///// Layout with center and size\n    // If you wan't to put map in a fixed size box with right aspect ratio\n    // This two properties may more conveninet\n    // layoutCenter: [50%, 50%]\n    // layoutSize: 100\n    silent: false,\n    // Map type\n    map: '',\n    // Define left-top, right-bottom coords to control view\n    // For example, [ [180, 90], [-180, -90] ]\n    boundingCoords: null,\n    // Default on center of map\n    center: null,\n    zoom: 1,\n    scaleLimit: null,\n    // selectedMode: false\n    label: {\n      normal: {\n        show: false,\n        color: '#000'\n      },\n      emphasis: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      }\n    },\n    itemStyle: {\n      normal: {\n        // color: ,\n        borderWidth: 0.5,\n        borderColor: '#444',\n        color: '#eee'\n      },\n      emphasis: {\n        // \n        color: 'rgba(255,215,0,0.8)'\n      }\n    },\n    regions: []\n  },\n\n  /**\n   * Get model of region\n   * @param  {string} name\n   * @return {module:echarts/model/Model}\n   */\n  getRegionModel: function (name) {\n    return this._optionModelMap.get(name) || new Model(null, this, this.ecModel);\n  },\n\n  /**\n   * Format label\n   * @param {string} name Region name\n   * @param {string} [status='normal'] 'normal' or 'emphasis'\n   * @return {string}\n   */\n  getFormattedLabel: function (name, status) {\n    var regionModel = this.getRegionModel(name);\n    var formatter = regionModel.get('label.' + status + '.formatter');\n    var params = {\n      name: name\n    };\n\n    if (typeof formatter === 'function') {\n      params.status = status;\n      return formatter(params);\n    } else if (typeof formatter === 'string') {\n      return formatter.replace('{a}', name != null ? name : '');\n    }\n  },\n  setZoom: function (zoom) {\n    this.option.zoom = zoom;\n  },\n  setCenter: function (center) {\n    this.option.center = center;\n  }\n});\nzrUtil.mixin(GeoModel, selectableMixin);\nvar _default = GeoModel;\nmodule.exports = _default;","var BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar bbox = require(\"zrender/lib/core/bbox\");\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\nvar polygonContain = require(\"zrender/lib/contain/polygon\");\n\n/**\n * @module echarts/coord/geo/Region\n */\n\n/**\n * @param {string} name\n * @param {Array} geometries\n * @param {Array.<number>} cp\n */\nfunction Region(name, geometries, cp) {\n  /**\n   * @type {string}\n   * @readOnly\n   */\n  this.name = name;\n  /**\n   * @type {Array.<Array>}\n   * @readOnly\n   */\n\n  this.geometries = geometries;\n\n  if (!cp) {\n    var rect = this.getBoundingRect();\n    cp = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  } else {\n    cp = [cp[0], cp[1]];\n  }\n  /**\n   * @type {Array.<number>}\n   */\n\n\n  this.center = cp;\n}\n\nRegion.prototype = {\n  constructor: Region,\n  properties: null,\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getBoundingRect: function () {\n    var rect = this._rect;\n\n    if (rect) {\n      return rect;\n    }\n\n    var MAX_NUMBER = Number.MAX_VALUE;\n    var min = [MAX_NUMBER, MAX_NUMBER];\n    var max = [-MAX_NUMBER, -MAX_NUMBER];\n    var min2 = [];\n    var max2 = [];\n    var geometries = this.geometries;\n\n    for (var i = 0; i < geometries.length; i++) {\n      // Only support polygon\n      if (geometries[i].type !== 'polygon') {\n        continue;\n      } // Doesn't consider hole\n\n\n      var exterior = geometries[i].exterior;\n      bbox.fromPoints(exterior, min2, max2);\n      vec2.min(min, min, min2);\n      vec2.max(max, max, max2);\n    } // No data\n\n\n    if (i === 0) {\n      min[0] = min[1] = max[0] = max[1] = 0;\n    }\n\n    return this._rect = new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n  },\n\n  /**\n   * @param {<Array.<number>} coord\n   * @return {boolean}\n   */\n  contain: function (coord) {\n    var rect = this.getBoundingRect();\n    var geometries = this.geometries;\n\n    if (!rect.contain(coord[0], coord[1])) {\n      return false;\n    }\n\n    loopGeo: for (var i = 0, len = geometries.length; i < len; i++) {\n      // Only support polygon.\n      if (geometries[i].type !== 'polygon') {\n        continue;\n      }\n\n      var exterior = geometries[i].exterior;\n      var interiors = geometries[i].interiors;\n\n      if (polygonContain.contain(exterior, coord[0], coord[1])) {\n        // Not in the region if point is in the hole.\n        for (var k = 0; k < (interiors ? interiors.length : 0); k++) {\n          if (polygonContain.contain(interiors[k])) {\n            continue loopGeo;\n          }\n        }\n\n        return true;\n      }\n    }\n\n    return false;\n  },\n  transformTo: function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var aspect = rect.width / rect.height;\n\n    if (!width) {\n      width = aspect * height;\n    } else if (!height) {\n      height = width / aspect;\n    }\n\n    var target = new BoundingRect(x, y, width, height);\n    var transform = rect.calculateTransform(target);\n    var geometries = this.geometries;\n\n    for (var i = 0; i < geometries.length; i++) {\n      // Only support polygon.\n      if (geometries[i].type !== 'polygon') {\n        continue;\n      }\n\n      var exterior = geometries[i].exterior;\n      var interiors = geometries[i].interiors;\n\n      for (var p = 0; p < exterior.length; p++) {\n        vec2.applyTransform(exterior[p], exterior[p], transform);\n      }\n\n      for (var h = 0; h < (interiors ? interiors.length : 0); h++) {\n        for (var p = 0; p < interiors[h].length; p++) {\n          vec2.applyTransform(interiors[h][p], interiors[h][p], transform);\n        }\n      }\n    }\n\n    rect = this._rect;\n    rect.copy(target); // Update center\n\n    this.center = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n};\nvar _default = Region;\nmodule.exports = _default;","// Fix for \n// var Region = require('../Region');\n// var zrUtil = require('zrender/src/core/util');\n// var geoCoord = [126, 25];\nvar points = [[[123.45165252685547, 25.73527164402261], [123.49731445312499, 25.73527164402261], [123.49731445312499, 25.750734064600884], [123.45165252685547, 25.750734064600884], [123.45165252685547, 25.73527164402261]]];\n\nfunction _default(geo) {\n  if (geo.map === 'china') {\n    for (var i = 0, len = geo.regions.length; i < len; ++i) {\n      if (geo.regions[i].name === '') {\n        geo.regions[i].geometries.push({\n          type: 'polygon',\n          exterior: points[0]\n        });\n      }\n    }\n  }\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar geoCoordMap = {\n  'Russia': [100, 60],\n  'United States': [-99, 38],\n  'United States of America': [-99, 38]\n};\n\nfunction _default(geo) {\n  zrUtil.each(geo.regions, function (region) {\n    var geoCoord = geoCoordMap[region.name];\n\n    if (geoCoord) {\n      var cp = region.center;\n      cp[0] = geoCoord[0];\n      cp[1] = geoCoord[1];\n    }\n  });\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Region = require(\"../Region\");\n\n// Fix for \nvar geoCoord = [126, 25];\nvar points = [[[0, 3.5], [7, 11.2], [15, 11.9], [30, 7], [42, 0.7], [52, 0.7], [56, 7.7], [59, 0.7], [64, 0.7], [64, 0], [5, 0], [0, 3.5]], [[13, 16.1], [19, 14.7], [16, 21.7], [11, 23.1], [13, 16.1]], [[12, 32.2], [14, 38.5], [15, 38.5], [13, 32.2], [12, 32.2]], [[16, 47.6], [12, 53.2], [13, 53.2], [18, 47.6], [16, 47.6]], [[6, 64.4], [8, 70], [9, 70], [8, 64.4], [6, 64.4]], [[23, 82.6], [29, 79.8], [30, 79.8], [25, 82.6], [23, 82.6]], [[37, 70.7], [43, 62.3], [44, 62.3], [39, 70.7], [37, 70.7]], [[48, 51.1], [51, 45.5], [53, 45.5], [50, 51.1], [48, 51.1]], [[51, 35], [51, 28.7], [53, 28.7], [53, 35], [51, 35]], [[52, 22.4], [55, 17.5], [56, 17.5], [53, 22.4], [52, 22.4]], [[58, 12.6], [62, 7], [63, 7], [60, 12.6], [58, 12.6]], [[0, 3.5], [0, 93.1], [64, 93.1], [64, 0], [63, 0], [63, 92.4], [1, 92.4], [1, 3.5], [0, 3.5]]];\n\nfor (var i = 0; i < points.length; i++) {\n  for (var k = 0; k < points[i].length; k++) {\n    points[i][k][0] /= 10.5;\n    points[i][k][1] /= -10.5 / 0.75;\n    points[i][k][0] += geoCoord[0];\n    points[i][k][1] += geoCoord[1];\n  }\n}\n\nfunction _default(geo) {\n  if (geo.map === 'china') {\n    geo.regions.push(new Region('', zrUtil.map(points, function (exterior) {\n      return {\n        type: 'polygon',\n        exterior: exterior\n      };\n    }), geoCoord));\n  }\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar coordsOffsetMap = {\n  '': [32, 80],\n  // \n  '': [0, -10],\n  '': [10, 5],\n  '': [-10, 10],\n  //'': [-10, 0],\n  '': [5, 5]\n};\n\nfunction _default(geo) {\n  zrUtil.each(geo.regions, function (region) {\n    var coordFix = coordsOffsetMap[region.name];\n\n    if (coordFix) {\n      var cp = region.center;\n      cp[0] += coordFix[0] / 10.5;\n      cp[1] += -coordFix[1] / (10.5 / 0.75);\n    }\n  });\n}\n\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Geo = require(\"./Geo\");\n\nvar layout = require(\"../../util/layout\");\n\nvar numberUtil = require(\"../../util/number\");\n\n/**\n * Resize method bound to the geo\n * @param {module:echarts/coord/geo/GeoModel|module:echarts/chart/map/MapModel} geoModel\n * @param {module:echarts/ExtensionAPI} api\n */\nfunction resizeGeo(geoModel, api) {\n  var boundingCoords = geoModel.get('boundingCoords');\n\n  if (boundingCoords != null) {\n    var leftTop = boundingCoords[0];\n    var rightBottom = boundingCoords[1];\n\n    if (isNaN(leftTop[0]) || isNaN(leftTop[1]) || isNaN(rightBottom[0]) || isNaN(rightBottom[1])) {} else {\n      this.setBoundingRect(leftTop[0], leftTop[1], rightBottom[0] - leftTop[0], rightBottom[1] - leftTop[1]);\n    }\n  }\n\n  var rect = this.getBoundingRect();\n  var boxLayoutOption;\n  var center = geoModel.get('layoutCenter');\n  var size = geoModel.get('layoutSize');\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  var aspectScale = geoModel.get('aspectScale') || 0.75;\n  var aspect = rect.width / rect.height * aspectScale;\n  var useCenterAndSize = false;\n\n  if (center && size) {\n    center = [numberUtil.parsePercent(center[0], viewWidth), numberUtil.parsePercent(center[1], viewHeight)];\n    size = numberUtil.parsePercent(size, Math.min(viewWidth, viewHeight));\n\n    if (!isNaN(center[0]) && !isNaN(center[1]) && !isNaN(size)) {\n      useCenterAndSize = true;\n    } else {}\n  }\n\n  var viewRect;\n\n  if (useCenterAndSize) {\n    var viewRect = {};\n\n    if (aspect > 1) {\n      // Width is same with size\n      viewRect.width = size;\n      viewRect.height = size / aspect;\n    } else {\n      viewRect.height = size;\n      viewRect.width = size * aspect;\n    }\n\n    viewRect.y = center[1] - viewRect.height / 2;\n    viewRect.x = center[0] - viewRect.width / 2;\n  } else {\n    // Use left/top/width/height\n    boxLayoutOption = geoModel.getBoxLayoutParams(); // 0.75 rate\n\n    boxLayoutOption.aspect = aspect;\n    viewRect = layout.getLayoutRect(boxLayoutOption, {\n      width: viewWidth,\n      height: viewHeight\n    });\n  }\n\n  this.setViewRect(viewRect.x, viewRect.y, viewRect.width, viewRect.height);\n  this.setCenter(geoModel.get('center'));\n  this.setZoom(geoModel.get('zoom'));\n}\n/**\n * @param {module:echarts/coord/Geo} geo\n * @param {module:echarts/model/Model} model\n * @inner\n */\n\n\nfunction setGeoCoords(geo, model) {\n  zrUtil.each(model.get('geoCoord'), function (geoCoord, name) {\n    geo.addGeoCoord(name, geoCoord);\n  });\n}\n\nvar geoCreator = {\n  // For deciding which dimensions to use when creating list data\n  dimensions: Geo.prototype.dimensions,\n  create: function (ecModel, api) {\n    var geoList = []; // FIXME Create each time may be slow\n\n    ecModel.eachComponent('geo', function (geoModel, idx) {\n      var name = geoModel.get('map');\n      var mapData = echarts.getMap(name);\n      var geo = new Geo(name + idx, name, mapData && mapData.geoJson, mapData && mapData.specialAreas, geoModel.get('nameMap'));\n      geo.zoomLimit = geoModel.get('scaleLimit');\n      geoList.push(geo);\n      setGeoCoords(geo, geoModel);\n      geoModel.coordinateSystem = geo;\n      geo.model = geoModel; // Inject resize method\n\n      geo.resize = resizeGeo;\n      geo.resize(geoModel, api);\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var coordSys = seriesModel.get('coordinateSystem');\n\n      if (coordSys === 'geo') {\n        var geoIndex = seriesModel.get('geoIndex') || 0;\n        seriesModel.coordinateSystem = geoList[geoIndex];\n      }\n    }); // If has map series\n\n    var mapModelGroupBySeries = {};\n    ecModel.eachSeriesByType('map', function (seriesModel) {\n      if (!seriesModel.getHostGeoModel()) {\n        var mapType = seriesModel.getMapType();\n        mapModelGroupBySeries[mapType] = mapModelGroupBySeries[mapType] || [];\n        mapModelGroupBySeries[mapType].push(seriesModel);\n      }\n    });\n    zrUtil.each(mapModelGroupBySeries, function (mapSeries, mapType) {\n      var mapData = echarts.getMap(mapType);\n      var nameMapList = zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('nameMap');\n      });\n      var geo = new Geo(mapType, mapType, mapData && mapData.geoJson, mapData && mapData.specialAreas, zrUtil.mergeAll(nameMapList));\n      geo.zoomLimit = zrUtil.retrieve.apply(null, zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('scaleLimit');\n      }));\n      geoList.push(geo); // Inject resize method\n\n      geo.resize = resizeGeo;\n      geo.resize(mapSeries[0], api);\n      zrUtil.each(mapSeries, function (singleMapSeries) {\n        singleMapSeries.coordinateSystem = geo;\n        setGeoCoords(geo, singleMapSeries);\n      });\n    });\n    return geoList;\n  },\n\n  /**\n   * Fill given regions array\n   * @param  {Array.<Object>} originRegionArr\n   * @param  {string} mapName\n   * @param  {Object} [nameMap]\n   * @return {Array}\n   */\n  getFilledRegions: function (originRegionArr, mapName, nameMap) {\n    // Not use the original\n    var regionsArr = (originRegionArr || []).slice();\n    nameMap = nameMap || {};\n    var map = echarts.getMap(mapName);\n    var geoJson = map && map.geoJson;\n\n    if (!geoJson) {\n      return originRegionArr;\n    }\n\n    var dataNameMap = zrUtil.createHashMap();\n    var features = geoJson.features;\n\n    for (var i = 0; i < regionsArr.length; i++) {\n      dataNameMap.set(regionsArr[i].name, regionsArr[i]);\n    }\n\n    for (var i = 0; i < features.length; i++) {\n      var name = features[i].properties.name;\n\n      if (!dataNameMap.get(name)) {\n        if (nameMap.hasOwnProperty(name)) {\n          name = nameMap[name];\n        }\n\n        regionsArr.push({\n          name: name\n        });\n      }\n    }\n\n    return regionsArr;\n  }\n};\necharts.registerCoordinateSystem('geo', geoCreator);\nvar _default = geoCreator;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Region = require(\"./Region\");\n\n/**\n * Parse and decode geo json\n * @module echarts/coord/geo/parseGeoJson\n */\nfunction decode(json) {\n  if (!json.UTF8Encoding) {\n    return json;\n  }\n\n  var encodeScale = json.UTF8Scale;\n\n  if (encodeScale == null) {\n    encodeScale = 1024;\n  }\n\n  var features = json.features;\n\n  for (var f = 0; f < features.length; f++) {\n    var feature = features[f];\n    var geometry = feature.geometry;\n    var coordinates = geometry.coordinates;\n    var encodeOffsets = geometry.encodeOffsets;\n\n    for (var c = 0; c < coordinates.length; c++) {\n      var coordinate = coordinates[c];\n\n      if (geometry.type === 'Polygon') {\n        coordinates[c] = decodePolygon(coordinate, encodeOffsets[c], encodeScale);\n      } else if (geometry.type === 'MultiPolygon') {\n        for (var c2 = 0; c2 < coordinate.length; c2++) {\n          var polygon = coordinate[c2];\n          coordinate[c2] = decodePolygon(polygon, encodeOffsets[c][c2], encodeScale);\n        }\n      }\n    }\n  } // Has been decoded\n\n\n  json.UTF8Encoding = false;\n  return json;\n}\n\nfunction decodePolygon(coordinate, encodeOffsets, encodeScale) {\n  var result = [];\n  var prevX = encodeOffsets[0];\n  var prevY = encodeOffsets[1];\n\n  for (var i = 0; i < coordinate.length; i += 2) {\n    var x = coordinate.charCodeAt(i) - 64;\n    var y = coordinate.charCodeAt(i + 1) - 64; // ZigZag decoding\n\n    x = x >> 1 ^ -(x & 1);\n    y = y >> 1 ^ -(y & 1); // Delta deocding\n\n    x += prevX;\n    y += prevY;\n    prevX = x;\n    prevY = y; // Dequantize\n\n    result.push([x / encodeScale, y / encodeScale]);\n  }\n\n  return result;\n}\n/**\n * @alias module:echarts/coord/geo/parseGeoJson\n * @param {Object} geoJson\n * @return {module:zrender/container/Group}\n */\n\n\nfunction _default(geoJson) {\n  decode(geoJson);\n  return zrUtil.map(zrUtil.filter(geoJson.features, function (featureObj) {\n    // Output of mapshaper may have geometry null\n    return featureObj.geometry && featureObj.properties && featureObj.geometry.coordinates.length > 0;\n  }), function (featureObj) {\n    var properties = featureObj.properties;\n    var geo = featureObj.geometry;\n    var coordinates = geo.coordinates;\n    var geometries = [];\n\n    if (geo.type === 'Polygon') {\n      geometries.push({\n        type: 'polygon',\n        // According to the GeoJSON specification.\n        // First must be exterior, and the rest are all interior(holes).\n        exterior: coordinates[0],\n        interiors: coordinates.slice(1)\n      });\n    }\n\n    if (geo.type === 'MultiPolygon') {\n      zrUtil.each(coordinates, function (item) {\n        if (item[0]) {\n          geometries.push({\n            type: 'polygon',\n            exterior: item[0],\n            interiors: item.slice(1)\n          });\n        }\n      });\n    }\n\n    var region = new Region(properties.name, geometries, properties.cp);\n    region.properties = properties;\n    return region;\n  });\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map([0, 1], function (dimIdx) {\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var p1 = [];\n    var p2 = [];\n    p1[dimIdx] = val - halfSize;\n    p2[dimIdx] = val + halfSize;\n    p1[1 - dimIdx] = p2[1 - dimIdx] = dataItem[1 - dimIdx];\n    return Math.abs(this.dataToPoint(p1)[dimIdx] - this.dataToPoint(p2)[dimIdx]);\n  }, this);\n}\n\nfunction _default(coordSys) {\n  var rect = coordSys.getBoundingRect();\n  return {\n    coordSys: {\n      type: 'geo',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: zrUtil.bind(coordSys.dataToPoint, coordSys),\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\nvar makeStyleMapper = require(\"../../model/mixin/makeStyleMapper\");\n\nvar axisModelCreator = require(\"../axisModelCreator\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar axisModelCommonMixin = require(\"../axisModelCommonMixin\");\n\nvar AxisModel = ComponentModel.extend({\n  type: 'baseParallelAxis',\n\n  /**\n   * @type {module:echarts/coord/parallel/Axis}\n   */\n  axis: null,\n\n  /**\n   * @type {Array.<Array.<number>}\n   * @readOnly\n   */\n  activeIntervals: [],\n\n  /**\n   * @return {Object}\n   */\n  getAreaSelectStyle: function () {\n    return makeStyleMapper([['fill', 'color'], ['lineWidth', 'borderWidth'], ['stroke', 'borderColor'], ['width', 'width'], ['opacity', 'opacity']])(this.getModel('areaSelectStyle'));\n  },\n\n  /**\n   * The code of this feature is put on AxisModel but not ParallelAxis,\n   * because axisModel can be alive after echarts updating but instance of\n   * ParallelAxis having been disposed. this._activeInterval should be kept\n   * when action dispatched (i.e. legend click).\n   *\n   * @param {Array.<Array<number>>} intervals interval.length === 0\n   *                                          means set all active.\n   * @public\n   */\n  setActiveIntervals: function (intervals) {\n    var activeIntervals = this.activeIntervals = zrUtil.clone(intervals); // Normalize\n\n    if (activeIntervals) {\n      for (var i = activeIntervals.length - 1; i >= 0; i--) {\n        numberUtil.asc(activeIntervals[i]);\n      }\n    }\n  },\n\n  /**\n   * @param {number|string} [value] When attempting to detect 'no activeIntervals set',\n   *                         value can not be input.\n   * @return {string} 'normal': no activeIntervals set,\n   *                  'active',\n   *                  'inactive'.\n   * @public\n   */\n  getActiveState: function (value) {\n    var activeIntervals = this.activeIntervals;\n\n    if (!activeIntervals.length) {\n      return 'normal';\n    }\n\n    if (value == null) {\n      return 'inactive';\n    }\n\n    for (var i = 0, len = activeIntervals.length; i < len; i++) {\n      if (activeIntervals[i][0] <= value && value <= activeIntervals[i][1]) {\n        return 'active';\n      }\n    }\n\n    return 'inactive';\n  }\n});\nvar defaultOption = {\n  type: 'value',\n\n  /**\n   * @type {Array.<number>}\n   */\n  dim: null,\n  // 0, 1, 2, ...\n  // parallelIndex: null,\n  areaSelectStyle: {\n    width: 20,\n    borderWidth: 1,\n    borderColor: 'rgba(160,197,232)',\n    color: 'rgba(160,197,232)',\n    opacity: 0.3\n  },\n  realtime: true,\n  // Whether realtime update view when select.\n  z: 10\n};\nzrUtil.merge(AxisModel.prototype, axisModelCommonMixin);\n\nfunction getAxisType(axisName, option) {\n  return option.type || (option.data ? 'category' : 'value');\n}\n\naxisModelCreator('parallel', AxisModel, getAxisType, defaultOption);\nvar _default = AxisModel;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar ParallelAxis = require(\"./ParallelAxis\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar sliderMove = require(\"../../component/helper/sliderMove\");\n\n/**\n * Parallel Coordinates\n * <https://en.wikipedia.org/wiki/Parallel_coordinates>\n */\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar round = numberUtil.round;\nvar PI = Math.PI;\n\nfunction Parallel(parallelModel, ecModel, api) {\n  /**\n   * key: dimension\n   * @type {Object.<string, module:echarts/coord/parallel/Axis>}\n   * @private\n   */\n  this._axesMap = zrUtil.createHashMap();\n  /**\n   * key: dimension\n   * value: {position: [], rotation, }\n   * @type {Object.<string, Object>}\n   * @private\n   */\n\n  this._axesLayout = {};\n  /**\n   * Always follow axis order.\n   * @type {Array.<string>}\n   * @readOnly\n   */\n\n  this.dimensions = parallelModel.dimensions;\n  /**\n   * @type {module:zrender/core/BoundingRect}\n   */\n\n  this._rect;\n  /**\n   * @type {module:echarts/coord/parallel/ParallelModel}\n   */\n\n  this._model = parallelModel;\n\n  this._init(parallelModel, ecModel, api);\n}\n\nParallel.prototype = {\n  type: 'parallel',\n  constructor: Parallel,\n\n  /**\n   * Initialize cartesian coordinate systems\n   * @private\n   */\n  _init: function (parallelModel, ecModel, api) {\n    var dimensions = parallelModel.dimensions;\n    var parallelAxisIndex = parallelModel.parallelAxisIndex;\n    each(dimensions, function (dim, idx) {\n      var axisIndex = parallelAxisIndex[idx];\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n\n      var axis = this._axesMap.set(dim, new ParallelAxis(dim, axisHelper.createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisIndex));\n\n      var isCategory = axis.type === 'category';\n      axis.onBand = isCategory && axisModel.get('boundaryGap');\n      axis.inverse = axisModel.get('inverse'); // Injection\n\n      axisModel.axis = axis;\n      axis.model = axisModel;\n      axis.coordinateSystem = axisModel.coordinateSystem = this;\n    }, this);\n  },\n\n  /**\n   * Update axis scale after data processed\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  update: function (ecModel, api) {\n    this._updateAxesFromSeries(this._model, ecModel);\n  },\n\n  /**\n   * @override\n   */\n  containPoint: function (point) {\n    var layoutInfo = this._makeLayoutInfo();\n\n    var axisBase = layoutInfo.axisBase;\n    var layoutBase = layoutInfo.layoutBase;\n    var pixelDimIndex = layoutInfo.pixelDimIndex;\n    var pAxis = point[1 - pixelDimIndex];\n    var pLayout = point[pixelDimIndex];\n    return pAxis >= axisBase && pAxis <= axisBase + layoutInfo.axisLength && pLayout >= layoutBase && pLayout <= layoutBase + layoutInfo.layoutLength;\n  },\n  getModel: function () {\n    return this._model;\n  },\n\n  /**\n   * Update properties from series\n   * @private\n   */\n  _updateAxesFromSeries: function (parallelModel, ecModel) {\n    ecModel.eachSeries(function (seriesModel) {\n      if (!parallelModel.contains(seriesModel, ecModel)) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      each(this.dimensions, function (dim) {\n        var axis = this._axesMap.get(dim);\n\n        axis.scale.unionExtentFromData(data, dim);\n        axisHelper.niceScaleExtent(axis.scale, axis.model);\n      }, this);\n    }, this);\n  },\n\n  /**\n   * Resize the parallel coordinate system.\n   * @param {module:echarts/coord/parallel/ParallelModel} parallelModel\n   * @param {module:echarts/ExtensionAPI} api\n   */\n  resize: function (parallelModel, api) {\n    this._rect = layoutUtil.getLayoutRect(parallelModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n\n    this._layoutAxes();\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getRect: function () {\n    return this._rect;\n  },\n\n  /**\n   * @private\n   */\n  _makeLayoutInfo: function () {\n    var parallelModel = this._model;\n    var rect = this._rect;\n    var xy = ['x', 'y'];\n    var wh = ['width', 'height'];\n    var layout = parallelModel.get('layout');\n    var pixelDimIndex = layout === 'horizontal' ? 0 : 1;\n    var layoutLength = rect[wh[pixelDimIndex]];\n    var layoutExtent = [0, layoutLength];\n    var axisCount = this.dimensions.length;\n    var axisExpandWidth = restrict(parallelModel.get('axisExpandWidth'), layoutExtent);\n    var axisExpandCount = restrict(parallelModel.get('axisExpandCount') || 0, [0, axisCount]);\n    var axisExpandable = parallelModel.get('axisExpandable') && axisCount > 3 && axisCount > axisExpandCount && axisExpandCount > 1 && axisExpandWidth > 0 && layoutLength > 0; // `axisExpandWindow` is According to the coordinates of [0, axisExpandLength],\n    // for sake of consider the case that axisCollapseWidth is 0 (when screen is narrow),\n    // where collapsed axes should be overlapped.\n\n    var axisExpandWindow = parallelModel.get('axisExpandWindow');\n    var winSize;\n\n    if (!axisExpandWindow) {\n      winSize = restrict(axisExpandWidth * (axisExpandCount - 1), layoutExtent);\n      var axisExpandCenter = parallelModel.get('axisExpandCenter') || mathFloor(axisCount / 2);\n      axisExpandWindow = [axisExpandWidth * axisExpandCenter - winSize / 2];\n      axisExpandWindow[1] = axisExpandWindow[0] + winSize;\n    } else {\n      winSize = restrict(axisExpandWindow[1] - axisExpandWindow[0], layoutExtent);\n      axisExpandWindow[1] = axisExpandWindow[0] + winSize;\n    }\n\n    var axisCollapseWidth = (layoutLength - winSize) / (axisCount - axisExpandCount); // Avoid axisCollapseWidth is too small.\n\n    axisCollapseWidth < 3 && (axisCollapseWidth = 0); // Find the first and last indices > ewin[0] and < ewin[1].\n\n    var winInnerIndices = [mathFloor(round(axisExpandWindow[0] / axisExpandWidth, 1)) + 1, mathCeil(round(axisExpandWindow[1] / axisExpandWidth, 1)) - 1]; // Pos in ec coordinates.\n\n    var axisExpandWindow0Pos = axisCollapseWidth / axisExpandWidth * axisExpandWindow[0];\n    return {\n      layout: layout,\n      pixelDimIndex: pixelDimIndex,\n      layoutBase: rect[xy[pixelDimIndex]],\n      layoutLength: layoutLength,\n      axisBase: rect[xy[1 - pixelDimIndex]],\n      axisLength: rect[wh[1 - pixelDimIndex]],\n      axisExpandable: axisExpandable,\n      axisExpandWidth: axisExpandWidth,\n      axisCollapseWidth: axisCollapseWidth,\n      axisExpandWindow: axisExpandWindow,\n      axisCount: axisCount,\n      winInnerIndices: winInnerIndices,\n      axisExpandWindow0Pos: axisExpandWindow0Pos\n    };\n  },\n\n  /**\n   * @private\n   */\n  _layoutAxes: function () {\n    var rect = this._rect;\n    var axes = this._axesMap;\n    var dimensions = this.dimensions;\n\n    var layoutInfo = this._makeLayoutInfo();\n\n    var layout = layoutInfo.layout;\n    axes.each(function (axis) {\n      var axisExtent = [0, layoutInfo.axisLength];\n      var idx = axis.inverse ? 1 : 0;\n      axis.setExtent(axisExtent[idx], axisExtent[1 - idx]);\n    });\n    each(dimensions, function (dim, idx) {\n      var posInfo = (layoutInfo.axisExpandable ? layoutAxisWithExpand : layoutAxisWithoutExpand)(idx, layoutInfo);\n      var positionTable = {\n        horizontal: {\n          x: posInfo.position,\n          y: layoutInfo.axisLength\n        },\n        vertical: {\n          x: 0,\n          y: posInfo.position\n        }\n      };\n      var rotationTable = {\n        horizontal: PI / 2,\n        vertical: 0\n      };\n      var position = [positionTable[layout].x + rect.x, positionTable[layout].y + rect.y];\n      var rotation = rotationTable[layout];\n      var transform = matrix.create();\n      matrix.rotate(transform, transform, rotation);\n      matrix.translate(transform, transform, position); // TODO\n      // tick\n      // TODO\n      // axis order  dimensions\n\n      this._axesLayout[dim] = {\n        position: position,\n        rotation: rotation,\n        transform: transform,\n        axisNameAvailableWidth: posInfo.axisNameAvailableWidth,\n        axisLabelShow: posInfo.axisLabelShow,\n        nameTruncateMaxWidth: posInfo.nameTruncateMaxWidth,\n        tickDirection: 1,\n        labelDirection: 1,\n        labelInterval: axes.get(dim).getLabelInterval()\n      };\n    }, this);\n  },\n\n  /**\n   * Get axis by dim.\n   * @param {string} dim\n   * @return {module:echarts/coord/parallel/ParallelAxis} [description]\n   */\n  getAxis: function (dim) {\n    return this._axesMap.get(dim);\n  },\n\n  /**\n   * Convert a dim value of a single item of series data to Point.\n   * @param {*} value\n   * @param {string} dim\n   * @return {Array}\n   */\n  dataToPoint: function (value, dim) {\n    return this.axisCoordToPoint(this._axesMap.get(dim).dataToCoord(value), dim);\n  },\n\n  /**\n   * Travel data for one time, get activeState of each data item.\n   * @param {module:echarts/data/List} data\n   * @param {Functio} cb param: {string} activeState 'active' or 'inactive' or 'normal'\n   *                            {number} dataIndex\n   * @param {Object} context\n   */\n  eachActiveState: function (data, callback, context) {\n    var dimensions = this.dimensions;\n    var axesMap = this._axesMap;\n    var hasActiveSet = this.hasAxisBrushed();\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      var values = data.getValues(dimensions, i);\n      var activeState;\n\n      if (!hasActiveSet) {\n        activeState = 'normal';\n      } else {\n        activeState = 'active';\n\n        for (var j = 0, lenj = dimensions.length; j < lenj; j++) {\n          var dimName = dimensions[j];\n          var state = axesMap.get(dimName).model.getActiveState(values[j], j);\n\n          if (state === 'inactive') {\n            activeState = 'inactive';\n            break;\n          }\n        }\n      }\n\n      callback.call(context, activeState, i);\n    }\n  },\n\n  /**\n   * Whether has any activeSet.\n   * @return {boolean}\n   */\n  hasAxisBrushed: function () {\n    var dimensions = this.dimensions;\n    var axesMap = this._axesMap;\n    var hasActiveSet = false;\n\n    for (var j = 0, lenj = dimensions.length; j < lenj; j++) {\n      if (axesMap.get(dimensions[j]).model.getActiveState() !== 'normal') {\n        hasActiveSet = true;\n      }\n    }\n\n    return hasActiveSet;\n  },\n\n  /**\n   * Convert coords of each axis to Point.\n   *  Return point. For example: [10, 20]\n   * @param {Array.<number>} coords\n   * @param {string} dim\n   * @return {Array.<number>}\n   */\n  axisCoordToPoint: function (coord, dim) {\n    var axisLayout = this._axesLayout[dim];\n    return graphic.applyTransform([coord, 0], axisLayout.transform);\n  },\n\n  /**\n   * Get axis layout.\n   */\n  getAxisLayout: function (dim) {\n    return zrUtil.clone(this._axesLayout[dim]);\n  },\n\n  /**\n   * @param {Array.<number>} point\n   * @return {Object} {axisExpandWindow, delta, behavior: 'jump' | 'slide' | 'none'}.\n   */\n  getSlidedAxisExpandWindow: function (point) {\n    var layoutInfo = this._makeLayoutInfo();\n\n    var pixelDimIndex = layoutInfo.pixelDimIndex;\n    var axisExpandWindow = layoutInfo.axisExpandWindow.slice();\n    var winSize = axisExpandWindow[1] - axisExpandWindow[0];\n    var extent = [0, layoutInfo.axisExpandWidth * (layoutInfo.axisCount - 1)]; // Out of the area of coordinate system.\n\n    if (!this.containPoint(point)) {\n      return {\n        behavior: 'none',\n        axisExpandWindow: axisExpandWindow\n      };\n    } // Conver the point from global to expand coordinates.\n\n\n    var pointCoord = point[pixelDimIndex] - layoutInfo.layoutBase - layoutInfo.axisExpandWindow0Pos; // For dragging operation convenience, the window should not be\n    // slided when mouse is the center area of the window.\n\n    var delta;\n    var behavior = 'slide';\n    var axisCollapseWidth = layoutInfo.axisCollapseWidth;\n\n    var triggerArea = this._model.get('axisExpandSlideTriggerArea'); // But consider touch device, jump is necessary.\n\n\n    var useJump = triggerArea[0] != null;\n\n    if (axisCollapseWidth) {\n      if (useJump && axisCollapseWidth && pointCoord < winSize * triggerArea[0]) {\n        behavior = 'jump';\n        delta = pointCoord - winSize * triggerArea[2];\n      } else if (useJump && axisCollapseWidth && pointCoord > winSize * (1 - triggerArea[0])) {\n        behavior = 'jump';\n        delta = pointCoord - winSize * (1 - triggerArea[2]);\n      } else {\n        (delta = pointCoord - winSize * triggerArea[1]) >= 0 && (delta = pointCoord - winSize * (1 - triggerArea[1])) <= 0 && (delta = 0);\n      }\n\n      delta *= layoutInfo.axisExpandWidth / axisCollapseWidth;\n      delta ? sliderMove(delta, axisExpandWindow, extent, 'all') // Avoid nonsense triger on mousemove.\n      : behavior = 'none';\n    } // When screen is too narrow, make it visible and slidable, although it is hard to interact.\n    else {\n        var winSize = axisExpandWindow[1] - axisExpandWindow[0];\n        var pos = extent[1] * pointCoord / winSize;\n        axisExpandWindow = [mathMax(0, pos - winSize / 2)];\n        axisExpandWindow[1] = mathMin(extent[1], axisExpandWindow[0] + winSize);\n        axisExpandWindow[0] = axisExpandWindow[1] - winSize;\n      }\n\n    return {\n      axisExpandWindow: axisExpandWindow,\n      behavior: behavior\n    };\n  }\n};\n\nfunction restrict(len, extent) {\n  return mathMin(mathMax(len, extent[0]), extent[1]);\n}\n\nfunction layoutAxisWithoutExpand(axisIndex, layoutInfo) {\n  var step = layoutInfo.layoutLength / (layoutInfo.axisCount - 1);\n  return {\n    position: step * axisIndex,\n    axisNameAvailableWidth: step,\n    axisLabelShow: true\n  };\n}\n\nfunction layoutAxisWithExpand(axisIndex, layoutInfo) {\n  var layoutLength = layoutInfo.layoutLength;\n  var axisExpandWidth = layoutInfo.axisExpandWidth;\n  var axisCount = layoutInfo.axisCount;\n  var axisCollapseWidth = layoutInfo.axisCollapseWidth;\n  var winInnerIndices = layoutInfo.winInnerIndices;\n  var position;\n  var axisNameAvailableWidth = axisCollapseWidth;\n  var axisLabelShow = false;\n  var nameTruncateMaxWidth;\n\n  if (axisIndex < winInnerIndices[0]) {\n    position = axisIndex * axisCollapseWidth;\n    nameTruncateMaxWidth = axisCollapseWidth;\n  } else if (axisIndex <= winInnerIndices[1]) {\n    position = layoutInfo.axisExpandWindow0Pos + axisIndex * axisExpandWidth - layoutInfo.axisExpandWindow[0];\n    axisNameAvailableWidth = axisExpandWidth;\n    axisLabelShow = true;\n  } else {\n    position = layoutLength - (axisCount - 1 - axisIndex) * axisCollapseWidth;\n    nameTruncateMaxWidth = axisCollapseWidth;\n  }\n\n  return {\n    position: position,\n    axisNameAvailableWidth: axisNameAvailableWidth,\n    axisLabelShow: axisLabelShow,\n    nameTruncateMaxWidth: nameTruncateMaxWidth\n  };\n}\n\nvar _default = Parallel;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../Axis\");\n\n/**\n * @constructor module:echarts/coord/parallel/ParallelAxis\n * @extends {module:echarts/coord/Axis}\n * @param {string} dim\n * @param {*} scale\n * @param {Array.<number>} coordExtent\n * @param {string} axisType\n */\nvar ParallelAxis = function (dim, scale, coordExtent, axisType, axisIndex) {\n  Axis.call(this, dim, scale, coordExtent);\n  /**\n   * Axis type\n   *  - 'category'\n   *  - 'value'\n   *  - 'time'\n   *  - 'log'\n   * @type {string}\n   */\n\n  this.type = axisType || 'value';\n  /**\n   * @type {number}\n   * @readOnly\n   */\n\n  this.axisIndex = axisIndex;\n};\n\nParallelAxis.prototype = {\n  constructor: ParallelAxis,\n\n  /**\n   * Axis model\n   * @param {module:echarts/coord/parallel/AxisModel}\n   */\n  model: null,\n\n  /**\n   * @override\n   */\n  isHorizontal: function () {\n    return this.coordinateSystem.getModel().get('layout') !== 'horizontal';\n  }\n};\nzrUtil.inherits(ParallelAxis, Axis);\nvar _default = ParallelAxis;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Component = require(\"../../model/Component\");\n\nrequire(\"./AxisModel\");\n\nvar _default = Component.extend({\n  type: 'parallel',\n  dependencies: ['parallelAxis'],\n\n  /**\n   * @type {module:echarts/coord/parallel/Parallel}\n   */\n  coordinateSystem: null,\n\n  /**\n   * Each item like: 'dim0', 'dim1', 'dim2', ...\n   * @type {Array.<string>}\n   * @readOnly\n   */\n  dimensions: null,\n\n  /**\n   * Coresponding to dimensions.\n   * @type {Array.<number>}\n   * @readOnly\n   */\n  parallelAxisIndex: null,\n  layoutMode: 'box',\n  defaultOption: {\n    zlevel: 0,\n    z: 0,\n    left: 80,\n    top: 60,\n    right: 80,\n    bottom: 60,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    layout: 'horizontal',\n    // 'horizontal' or 'vertical'\n    // FIXME\n    // naming?\n    axisExpandable: false,\n    axisExpandCenter: null,\n    axisExpandCount: 0,\n    axisExpandWidth: 50,\n    // FIXME '10%' ?\n    axisExpandRate: 17,\n    axisExpandDebounce: 50,\n    // [out, in, jumpTarget]. In percentage. If use [null, 0.05], null means full.\n    // Do not doc to user until necessary.\n    axisExpandSlideTriggerArea: [-0.15, 0.05, 0.4],\n    axisExpandTriggerOn: 'click',\n    // 'mousemove' or 'click'\n    parallelAxisDefault: null\n  },\n\n  /**\n   * @override\n   */\n  init: function () {\n    Component.prototype.init.apply(this, arguments);\n    this.mergeOption({});\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function (newOption) {\n    var thisOption = this.option;\n    newOption && zrUtil.merge(thisOption, newOption, true);\n\n    this._initDimensions();\n  },\n\n  /**\n   * Whether series or axis is in this coordinate system.\n   * @param {module:echarts/model/Series|module:echarts/coord/parallel/AxisModel} model\n   * @param {module:echarts/model/Global} ecModel\n   */\n  contains: function (model, ecModel) {\n    var parallelIndex = model.get('parallelIndex');\n    return parallelIndex != null && ecModel.getComponent('parallel', parallelIndex) === this;\n  },\n  setAxisExpand: function (opt) {\n    zrUtil.each(['axisExpandable', 'axisExpandCenter', 'axisExpandCount', 'axisExpandWidth', 'axisExpandWindow'], function (name) {\n      if (opt.hasOwnProperty(name)) {\n        this.option[name] = opt[name];\n      }\n    }, this);\n  },\n\n  /**\n   * @private\n   */\n  _initDimensions: function () {\n    var dimensions = this.dimensions = [];\n    var parallelAxisIndex = this.parallelAxisIndex = [];\n    var axisModels = zrUtil.filter(this.dependentModels.parallelAxis, function (axisModel) {\n      // Can not use this.contains here, because\n      // initialization has not been completed yet.\n      return (axisModel.get('parallelIndex') || 0) === this.componentIndex;\n    }, this);\n    zrUtil.each(axisModels, function (axisModel) {\n      dimensions.push('dim' + axisModel.get('dim'));\n      parallelAxisIndex.push(axisModel.componentIndex);\n    });\n  }\n});\n\nmodule.exports = _default;","var Parallel = require(\"./Parallel\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\n/**\n * Parallel coordinate system creater.\n */\nfunction create(ecModel, api) {\n  var coordSysList = [];\n  ecModel.eachComponent('parallel', function (parallelModel, idx) {\n    var coordSys = new Parallel(parallelModel, ecModel, api);\n    coordSys.name = 'parallel_' + idx;\n    coordSys.resize(parallelModel, api);\n    parallelModel.coordinateSystem = coordSys;\n    coordSys.model = parallelModel;\n    coordSysList.push(coordSys);\n  }); // Inject the coordinateSystems into seriesModel\n\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'parallel') {\n      var parallelModel = ecModel.queryComponents({\n        mainType: 'parallel',\n        index: seriesModel.get('parallelIndex'),\n        id: seriesModel.get('parallelId')\n      })[0];\n      seriesModel.coordinateSystem = parallelModel.coordinateSystem;\n    }\n  });\n  return coordSysList;\n}\n\nCoordinateSystem.register('parallel', {\n  create: create\n});","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\nfunction _default(option) {\n  createParallelIfNeeded(option);\n  mergeAxisOptionFromParallel(option);\n}\n/**\n * Create a parallel coordinate if not exists.\n * @inner\n */\n\n\nfunction createParallelIfNeeded(option) {\n  if (option.parallel) {\n    return;\n  }\n\n  var hasParallelSeries = false;\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'parallel') {\n      hasParallelSeries = true;\n    }\n  });\n\n  if (hasParallelSeries) {\n    option.parallel = [{}];\n  }\n}\n/**\n * Merge aixs definition from parallel option (if exists) to axis option.\n * @inner\n */\n\n\nfunction mergeAxisOptionFromParallel(option) {\n  var axes = modelUtil.normalizeToArray(option.parallelAxis);\n  zrUtil.each(axes, function (axisOption) {\n    if (!zrUtil.isObject(axisOption)) {\n      return;\n    }\n\n    var parallelIndex = axisOption.parallelIndex || 0;\n    var parallelOption = modelUtil.normalizeToArray(option.parallel)[parallelIndex];\n\n    if (parallelOption && parallelOption.parallelAxisDefault) {\n      zrUtil.merge(axisOption, parallelOption.parallelAxisDefault, false);\n    }\n  });\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../Axis\");\n\nfunction AngleAxis(scale, angleExtent) {\n  angleExtent = angleExtent || [0, 360];\n  Axis.call(this, 'angle', scale, angleExtent);\n  /**\n   * Axis type\n   *  - 'category'\n   *  - 'value'\n   *  - 'time'\n   *  - 'log'\n   * @type {string}\n   */\n\n  this.type = 'category';\n}\n\nAngleAxis.prototype = {\n  constructor: AngleAxis,\n\n  /**\n   * @override\n   */\n  pointToData: function (point, clamp) {\n    return this.polar.pointToData(point, clamp)[this.dim === 'radius' ? 0 : 1];\n  },\n  dataToAngle: Axis.prototype.dataToCoord,\n  angleToData: Axis.prototype.coordToData\n};\nzrUtil.inherits(AngleAxis, Axis);\nvar _default = AngleAxis;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\nvar axisModelCreator = require(\"../axisModelCreator\");\n\nvar axisModelCommonMixin = require(\"../axisModelCommonMixin\");\n\nvar PolarAxisModel = ComponentModel.extend({\n  type: 'polarAxis',\n\n  /**\n   * @type {module:echarts/coord/polar/AngleAxis|module:echarts/coord/polar/RadiusAxis}\n   */\n  axis: null,\n\n  /**\n   * @override\n   */\n  getCoordSysModel: function () {\n    return this.ecModel.queryComponents({\n      mainType: 'polar',\n      index: this.option.polarIndex,\n      id: this.option.polarId\n    })[0];\n  }\n});\nzrUtil.merge(PolarAxisModel.prototype, axisModelCommonMixin);\nvar polarAxisDefaultExtendedOption = {\n  angle: {\n    // polarIndex: 0,\n    // polarId: '',\n    startAngle: 90,\n    clockwise: true,\n    splitNumber: 12,\n    axisLabel: {\n      rotate: false\n    }\n  },\n  radius: {\n    // polarIndex: 0,\n    // polarId: '',\n    splitNumber: 5\n  }\n};\n\nfunction getAxisType(axisDim, option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}\n\naxisModelCreator('angle', PolarAxisModel, getAxisType, polarAxisDefaultExtendedOption.angle);\naxisModelCreator('radius', PolarAxisModel, getAxisType, polarAxisDefaultExtendedOption.radius);","var RadiusAxis = require(\"./RadiusAxis\");\n\nvar AngleAxis = require(\"./AngleAxis\");\n\n/**\n * @module echarts/coord/polar/Polar\n */\n\n/**\n * @alias {module:echarts/coord/polar/Polar}\n * @constructor\n * @param {string} name\n */\nvar Polar = function (name) {\n  /**\n   * @type {string}\n   */\n  this.name = name || '';\n  /**\n   * x of polar center\n   * @type {number}\n   */\n\n  this.cx = 0;\n  /**\n   * y of polar center\n   * @type {number}\n   */\n\n  this.cy = 0;\n  /**\n   * @type {module:echarts/coord/polar/RadiusAxis}\n   * @private\n   */\n\n  this._radiusAxis = new RadiusAxis();\n  /**\n   * @type {module:echarts/coord/polar/AngleAxis}\n   * @private\n   */\n\n  this._angleAxis = new AngleAxis();\n  this._radiusAxis.polar = this._angleAxis.polar = this;\n};\n\nPolar.prototype = {\n  type: 'polar',\n  axisPointerEnabled: true,\n  constructor: Polar,\n\n  /**\n   * @param {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['radius', 'angle'],\n\n  /**\n   * @type {module:echarts/coord/PolarModel}\n   */\n  model: null,\n\n  /**\n   * If contain coord\n   * @param {Array.<number>} point\n   * @return {boolean}\n   */\n  containPoint: function (point) {\n    var coord = this.pointToCoord(point);\n    return this._radiusAxis.contain(coord[0]) && this._angleAxis.contain(coord[1]);\n  },\n\n  /**\n   * If contain data\n   * @param {Array.<number>} data\n   * @return {boolean}\n   */\n  containData: function (data) {\n    return this._radiusAxis.containData(data[0]) && this._angleAxis.containData(data[1]);\n  },\n\n  /**\n   * @param {string} dim\n   * @return {module:echarts/coord/polar/AngleAxis|module:echarts/coord/polar/RadiusAxis}\n   */\n  getAxis: function (dim) {\n    return this['_' + dim + 'Axis'];\n  },\n\n  /**\n   * @return {Array.<module:echarts/coord/Axis>}\n   */\n  getAxes: function () {\n    return [this._radiusAxis, this._angleAxis];\n  },\n\n  /**\n   * Get axes by type of scale\n   * @param {string} scaleType\n   * @return {module:echarts/coord/polar/AngleAxis|module:echarts/coord/polar/RadiusAxis}\n   */\n  getAxesByScale: function (scaleType) {\n    var axes = [];\n    var angleAxis = this._angleAxis;\n    var radiusAxis = this._radiusAxis;\n    angleAxis.scale.type === scaleType && axes.push(angleAxis);\n    radiusAxis.scale.type === scaleType && axes.push(radiusAxis);\n    return axes;\n  },\n\n  /**\n   * @return {module:echarts/coord/polar/AngleAxis}\n   */\n  getAngleAxis: function () {\n    return this._angleAxis;\n  },\n\n  /**\n   * @return {module:echarts/coord/polar/RadiusAxis}\n   */\n  getRadiusAxis: function () {\n    return this._radiusAxis;\n  },\n\n  /**\n   * @param {module:echarts/coord/polar/Axis}\n   * @return {module:echarts/coord/polar/Axis}\n   */\n  getOtherAxis: function (axis) {\n    var angleAxis = this._angleAxis;\n    return axis === angleAxis ? this._radiusAxis : angleAxis;\n  },\n\n  /**\n   * Base axis will be used on stacking.\n   *\n   * @return {module:echarts/coord/polar/Axis}\n   */\n  getBaseAxis: function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAngleAxis();\n  },\n\n  /**\n   * @param {string} [dim] 'radius' or 'angle' or 'auto' or null/undefined\n   * @return {Object} {baseAxes: [], otherAxes: []}\n   */\n  getTooltipAxes: function (dim) {\n    var baseAxis = dim != null && dim !== 'auto' ? this.getAxis(dim) : this.getBaseAxis();\n    return {\n      baseAxes: [baseAxis],\n      otherAxes: [this.getOtherAxis(baseAxis)]\n    };\n  },\n\n  /**\n   * Convert a single data item to (x, y) point.\n   * Parameter data is an array which the first element is radius and the second is angle\n   * @param {Array.<number>} data\n   * @param {boolean} [clamp=false]\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, clamp) {\n    return this.coordToPoint([this._radiusAxis.dataToRadius(data[0], clamp), this._angleAxis.dataToAngle(data[1], clamp)]);\n  },\n\n  /**\n   * Convert a (x, y) point to data\n   * @param {Array.<number>} point\n   * @param {boolean} [clamp=false]\n   * @return {Array.<number>}\n   */\n  pointToData: function (point, clamp) {\n    var coord = this.pointToCoord(point);\n    return [this._radiusAxis.radiusToData(coord[0], clamp), this._angleAxis.angleToData(coord[1], clamp)];\n  },\n\n  /**\n   * Convert a (x, y) point to (radius, angle) coord\n   * @param {Array.<number>} point\n   * @return {Array.<number>}\n   */\n  pointToCoord: function (point) {\n    var dx = point[0] - this.cx;\n    var dy = point[1] - this.cy;\n    var angleAxis = this.getAngleAxis();\n    var extent = angleAxis.getExtent();\n    var minAngle = Math.min(extent[0], extent[1]);\n    var maxAngle = Math.max(extent[0], extent[1]); // Fix fixed extent in polarCreator\n    // FIXME\n\n    angleAxis.inverse ? minAngle = maxAngle - 360 : maxAngle = minAngle + 360;\n    var radius = Math.sqrt(dx * dx + dy * dy);\n    dx /= radius;\n    dy /= radius;\n    var radian = Math.atan2(-dy, dx) / Math.PI * 180; // move to angleExtent\n\n    var dir = radian < minAngle ? 1 : -1;\n\n    while (radian < minAngle || radian > maxAngle) {\n      radian += dir * 360;\n    }\n\n    return [radius, radian];\n  },\n\n  /**\n   * Convert a (radius, angle) coord to (x, y) point\n   * @param {Array.<number>} coord\n   * @return {Array.<number>}\n   */\n  coordToPoint: function (coord) {\n    var radius = coord[0];\n    var radian = coord[1] / 180 * Math.PI;\n    var x = Math.cos(radian) * radius + this.cx; // Inverse the y\n\n    var y = -Math.sin(radian) * radius + this.cy;\n    return [x, y];\n  }\n};\nvar _default = Polar;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nrequire(\"./AxisModel\");\n\nvar _default = echarts.extendComponentModel({\n  type: 'polar',\n  dependencies: ['polarAxis', 'angleAxis'],\n\n  /**\n   * @type {module:echarts/coord/polar/Polar}\n   */\n  coordinateSystem: null,\n\n  /**\n   * @param {string} axisType\n   * @return {module:echarts/coord/polar/AxisModel}\n   */\n  findAxisModel: function (axisType) {\n    var foundAxisModel;\n    var ecModel = this.ecModel;\n    ecModel.eachComponent(axisType, function (axisModel) {\n      if (axisModel.getCoordSysModel() === this) {\n        foundAxisModel = axisModel;\n      }\n    }, this);\n    return foundAxisModel;\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 0,\n    center: ['50%', '50%'],\n    radius: '80%'\n  }\n});\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../Axis\");\n\nfunction RadiusAxis(scale, radiusExtent) {\n  Axis.call(this, 'radius', scale, radiusExtent);\n  /**\n   * Axis type\n   *  - 'category'\n   *  - 'value'\n   *  - 'time'\n   *  - 'log'\n   * @type {string}\n   */\n\n  this.type = 'category';\n}\n\nRadiusAxis.prototype = {\n  constructor: RadiusAxis,\n\n  /**\n   * @override\n   */\n  pointToData: function (point, clamp) {\n    return this.polar.pointToData(point, clamp)[this.dim === 'radius' ? 0 : 1];\n  },\n  dataToRadius: Axis.prototype.dataToCoord,\n  radiusToData: Axis.prototype.coordToData\n};\nzrUtil.inherits(RadiusAxis, Axis);\nvar _default = RadiusAxis;\nmodule.exports = _default;","var _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Polar = require(\"./Polar\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar createScaleByModel = _axisHelper.createScaleByModel;\nvar niceScaleExtent = _axisHelper.niceScaleExtent;\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nrequire(\"./PolarModel\");\n\n// TODO Axis scale\n//  PolarModel \n\n/**\n * Resize method bound to the polar\n * @param {module:echarts/coord/polar/PolarModel} polarModel\n * @param {module:echarts/ExtensionAPI} api\n */\nfunction resizePolar(polar, polarModel, api) {\n  var center = polarModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  polar.cx = parsePercent(center[0], width);\n  polar.cy = parsePercent(center[1], height);\n  var radiusAxis = polar.getRadiusAxis();\n  var size = Math.min(width, height) / 2;\n  var radius = parsePercent(polarModel.get('radius'), size);\n  radiusAxis.inverse ? radiusAxis.setExtent(radius, 0) : radiusAxis.setExtent(0, radius);\n}\n/**\n * Update polar\n */\n\n\nfunction updatePolarScale(ecModel, api) {\n  var polar = this;\n  var angleAxis = polar.getAngleAxis();\n  var radiusAxis = polar.getRadiusAxis(); // Reset scale\n\n  angleAxis.scale.setExtent(Infinity, -Infinity);\n  radiusAxis.scale.setExtent(Infinity, -Infinity);\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.coordinateSystem === polar) {\n      var data = seriesModel.getData();\n      radiusAxis.scale.unionExtentFromData(data, 'radius');\n      angleAxis.scale.unionExtentFromData(data, 'angle');\n    }\n  });\n  niceScaleExtent(angleAxis.scale, angleAxis.model);\n  niceScaleExtent(radiusAxis.scale, radiusAxis.model); // Fix extent of category angle axis\n\n  if (angleAxis.type === 'category' && !angleAxis.onBand) {\n    var extent = angleAxis.getExtent();\n    var diff = 360 / angleAxis.scale.count();\n    angleAxis.inverse ? extent[1] += diff : extent[1] -= diff;\n    angleAxis.setExtent(extent[0], extent[1]);\n  }\n}\n/**\n * Set common axis properties\n * @param {module:echarts/coord/polar/AngleAxis|module:echarts/coord/polar/RadiusAxis}\n * @param {module:echarts/coord/polar/AxisModel}\n * @inner\n */\n\n\nfunction setAxis(axis, axisModel) {\n  axis.type = axisModel.get('type');\n  axis.scale = createScaleByModel(axisModel);\n  axis.onBand = axisModel.get('boundaryGap') && axis.type === 'category';\n  axis.inverse = axisModel.get('inverse');\n\n  if (axisModel.mainType === 'angleAxis') {\n    axis.inverse ^= axisModel.get('clockwise');\n    var startAngle = axisModel.get('startAngle');\n    axis.setExtent(startAngle, startAngle + (axis.inverse ? -360 : 360));\n  } // Inject axis instance\n\n\n  axisModel.axis = axis;\n  axis.model = axisModel;\n}\n\nvar polarCreator = {\n  dimensions: Polar.prototype.dimensions,\n  create: function (ecModel, api) {\n    var polarList = [];\n    ecModel.eachComponent('polar', function (polarModel, idx) {\n      var polar = new Polar(idx); // Inject resize and update method\n\n      polar.update = updatePolarScale;\n      var radiusAxis = polar.getRadiusAxis();\n      var angleAxis = polar.getAngleAxis();\n      var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n      var angleAxisModel = polarModel.findAxisModel('angleAxis');\n      setAxis(radiusAxis, radiusAxisModel);\n      setAxis(angleAxis, angleAxisModel);\n      resizePolar(polar, polarModel, api);\n      polarList.push(polar);\n      polarModel.coordinateSystem = polar;\n      polar.model = polarModel;\n    }); // Inject coordinateSystem to series\n\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.get('coordinateSystem') === 'polar') {\n        var polarModel = ecModel.queryComponents({\n          mainType: 'polar',\n          index: seriesModel.get('polarIndex'),\n          id: seriesModel.get('polarId')\n        })[0];\n        seriesModel.coordinateSystem = polarModel.coordinateSystem;\n      }\n    });\n    return polarList;\n  }\n};\nCoordinateSystem.register('polar', polarCreator);","var zrUtil = require(\"zrender/lib/core/util\");\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  return zrUtil.map(['Radius', 'Angle'], function (dim, dimIdx) {\n    var axis = this['get' + dim + 'Axis']();\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var method = 'dataTo' + dim;\n    var result = axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis[method](val - halfSize) - axis[method](val + halfSize));\n\n    if (dim === 'Angle') {\n      result = result * Math.PI / 180;\n    }\n\n    return result;\n  }, this);\n}\n\nfunction _default(coordSys) {\n  var radiusAxis = coordSys.getRadiusAxis();\n  var angleAxis = coordSys.getAngleAxis();\n  var radius = radiusAxis.getExtent();\n  radius[0] > radius[1] && radius.reverse();\n  return {\n    coordSys: {\n      type: 'polar',\n      cx: coordSys.cx,\n      cy: coordSys.cy,\n      r: radius[1],\n      r0: radius[0]\n    },\n    api: {\n      coord: zrUtil.bind(function (data) {\n        var radius = radiusAxis.dataToRadius(data[0]);\n        var angle = angleAxis.dataToAngle(data[1]);\n        var coord = coordSys.coordToPoint([radius, angle]);\n        coord.push(radius, angle * Math.PI / 180);\n        return coord;\n      }),\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../Axis\");\n\nfunction IndicatorAxis(dim, scale, radiusExtent) {\n  Axis.call(this, dim, scale, radiusExtent);\n  /**\n   * Axis type\n   *  - 'category'\n   *  - 'value'\n   *  - 'time'\n   *  - 'log'\n   * @type {string}\n   */\n\n  this.type = 'value';\n  this.angle = 0;\n  /**\n   * Indicator name\n   * @type {string}\n   */\n\n  this.name = '';\n  /**\n   * @type {module:echarts/model/Model}\n   */\n\n  this.model;\n}\n\nzrUtil.inherits(IndicatorAxis, Axis);\nvar _default = IndicatorAxis;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar IndicatorAxis = require(\"./IndicatorAxis\");\n\nvar IntervalScale = require(\"../../scale/Interval\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar _axisHelper = require(\"../axisHelper\");\n\nvar getScaleExtent = _axisHelper.getScaleExtent;\nvar niceScaleExtent = _axisHelper.niceScaleExtent;\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\n// TODO clockwise\nfunction Radar(radarModel, ecModel, api) {\n  this._model = radarModel;\n  /**\n   * Radar dimensions\n   * @type {Array.<string>}\n   */\n\n  this.dimensions = [];\n  this._indicatorAxes = zrUtil.map(radarModel.getIndicatorModels(), function (indicatorModel, idx) {\n    var dim = 'indicator_' + idx;\n    var indicatorAxis = new IndicatorAxis(dim, new IntervalScale());\n    indicatorAxis.name = indicatorModel.get('name'); // Inject model and axis\n\n    indicatorAxis.model = indicatorModel;\n    indicatorModel.axis = indicatorAxis;\n    this.dimensions.push(dim);\n    return indicatorAxis;\n  }, this);\n  this.resize(radarModel, api);\n  /**\n   * @type {number}\n   * @readOnly\n   */\n\n  this.cx;\n  /**\n   * @type {number}\n   * @readOnly\n   */\n\n  this.cy;\n  /**\n   * @type {number}\n   * @readOnly\n   */\n\n  this.r;\n  /**\n   * @type {number}\n   * @readOnly\n   */\n\n  this.startAngle;\n}\n\nRadar.prototype.getIndicatorAxes = function () {\n  return this._indicatorAxes;\n};\n\nRadar.prototype.dataToPoint = function (value, indicatorIndex) {\n  var indicatorAxis = this._indicatorAxes[indicatorIndex];\n  return this.coordToPoint(indicatorAxis.dataToCoord(value), indicatorIndex);\n};\n\nRadar.prototype.coordToPoint = function (coord, indicatorIndex) {\n  var indicatorAxis = this._indicatorAxes[indicatorIndex];\n  var angle = indicatorAxis.angle;\n  var x = this.cx + coord * Math.cos(angle);\n  var y = this.cy - coord * Math.sin(angle);\n  return [x, y];\n};\n\nRadar.prototype.pointToData = function (pt) {\n  var dx = pt[0] - this.cx;\n  var dy = pt[1] - this.cy;\n  var radius = Math.sqrt(dx * dx + dy * dy);\n  dx /= radius;\n  dy /= radius;\n  var radian = Math.atan2(-dy, dx); // Find the closest angle\n  // FIXME index can calculated directly\n\n  var minRadianDiff = Infinity;\n  var closestAxis;\n  var closestAxisIdx = -1;\n\n  for (var i = 0; i < this._indicatorAxes.length; i++) {\n    var indicatorAxis = this._indicatorAxes[i];\n    var diff = Math.abs(radian - indicatorAxis.angle);\n\n    if (diff < minRadianDiff) {\n      closestAxis = indicatorAxis;\n      closestAxisIdx = i;\n      minRadianDiff = diff;\n    }\n  }\n\n  return [closestAxisIdx, +(closestAxis && closestAxis.coodToData(radius))];\n};\n\nRadar.prototype.resize = function (radarModel, api) {\n  var center = radarModel.get('center');\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  var viewSize = Math.min(viewWidth, viewHeight) / 2;\n  this.cx = numberUtil.parsePercent(center[0], viewWidth);\n  this.cy = numberUtil.parsePercent(center[1], viewHeight);\n  this.startAngle = radarModel.get('startAngle') * Math.PI / 180;\n  this.r = numberUtil.parsePercent(radarModel.get('radius'), viewSize);\n  zrUtil.each(this._indicatorAxes, function (indicatorAxis, idx) {\n    indicatorAxis.setExtent(0, this.r);\n    var angle = this.startAngle + idx * Math.PI * 2 / this._indicatorAxes.length; // Normalize to [-PI, PI]\n\n    angle = Math.atan2(Math.sin(angle), Math.cos(angle));\n    indicatorAxis.angle = angle;\n  }, this);\n};\n\nRadar.prototype.update = function (ecModel, api) {\n  var indicatorAxes = this._indicatorAxes;\n  var radarModel = this._model;\n  zrUtil.each(indicatorAxes, function (indicatorAxis) {\n    indicatorAxis.scale.setExtent(Infinity, -Infinity);\n  });\n  ecModel.eachSeriesByType('radar', function (radarSeries, idx) {\n    if (radarSeries.get('coordinateSystem') !== 'radar' || ecModel.getComponent('radar', radarSeries.get('radarIndex')) !== radarModel) {\n      return;\n    }\n\n    var data = radarSeries.getData();\n    zrUtil.each(indicatorAxes, function (indicatorAxis) {\n      indicatorAxis.scale.unionExtentFromData(data, indicatorAxis.dim);\n    });\n  }, this);\n  var splitNumber = radarModel.get('splitNumber');\n\n  function increaseInterval(interval) {\n    var exp10 = Math.pow(10, Math.floor(Math.log(interval) / Math.LN10)); // Increase interval\n\n    var f = interval / exp10;\n\n    if (f === 2) {\n      f = 5;\n    } else {\n      // f is 2 or 5\n      f *= 2;\n    }\n\n    return f * exp10;\n  } // Force all the axis fixing the maxSplitNumber.\n\n\n  zrUtil.each(indicatorAxes, function (indicatorAxis, idx) {\n    var rawExtent = getScaleExtent(indicatorAxis.scale, indicatorAxis.model);\n    niceScaleExtent(indicatorAxis.scale, indicatorAxis.model);\n    var axisModel = indicatorAxis.model;\n    var scale = indicatorAxis.scale;\n    var fixedMin = axisModel.getMin();\n    var fixedMax = axisModel.getMax();\n    var interval = scale.getInterval();\n\n    if (fixedMin != null && fixedMax != null) {\n      // User set min, max, divide to get new interval\n      scale.setExtent(+fixedMin, +fixedMax);\n      scale.setInterval((fixedMax - fixedMin) / splitNumber);\n    } else if (fixedMin != null) {\n      var max; // User set min, expand extent on the other side\n\n      do {\n        max = fixedMin + interval * splitNumber;\n        scale.setExtent(+fixedMin, max); // Interval must been set after extent\n        // FIXME\n\n        scale.setInterval(interval);\n        interval = increaseInterval(interval);\n      } while (max < rawExtent[1] && isFinite(max) && isFinite(rawExtent[1]));\n    } else if (fixedMax != null) {\n      var min; // User set min, expand extent on the other side\n\n      do {\n        min = fixedMax - interval * splitNumber;\n        scale.setExtent(min, +fixedMax);\n        scale.setInterval(interval);\n        interval = increaseInterval(interval);\n      } while (min > rawExtent[0] && isFinite(min) && isFinite(rawExtent[0]));\n    } else {\n      var nicedSplitNumber = scale.getTicks().length - 1;\n\n      if (nicedSplitNumber > splitNumber) {\n        interval = increaseInterval(interval);\n      } // PENDING\n\n\n      var center = Math.round((rawExtent[0] + rawExtent[1]) / 2 / interval) * interval;\n      var halfSplitNumber = Math.round(splitNumber / 2);\n      scale.setExtent(numberUtil.round(center - halfSplitNumber * interval), numberUtil.round(center + (splitNumber - halfSplitNumber) * interval));\n      scale.setInterval(interval);\n    }\n  });\n};\n/**\n * Radar dimensions is based on the data\n * @type {Array}\n */\n\n\nRadar.dimensions = [];\n\nRadar.create = function (ecModel, api) {\n  var radarList = [];\n  ecModel.eachComponent('radar', function (radarModel) {\n    var radar = new Radar(radarModel, ecModel, api);\n    radarList.push(radar);\n    radarModel.coordinateSystem = radar;\n  });\n  ecModel.eachSeriesByType('radar', function (radarSeries) {\n    if (radarSeries.get('coordinateSystem') === 'radar') {\n      // Inject coordinate system\n      radarSeries.coordinateSystem = radarList[radarSeries.get('radarIndex') || 0];\n    }\n  });\n  return radarList;\n};\n\nCoordinateSystem.register('radar', Radar);\nvar _default = Radar;\nmodule.exports = _default;","var echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisDefault = require(\"../axisDefault\");\n\nvar Model = require(\"../../model/Model\");\n\nvar axisModelCommonMixin = require(\"../axisModelCommonMixin\");\n\nvar valueAxisDefault = axisDefault.valueAxis;\n\nfunction defaultsShow(opt, show) {\n  return zrUtil.defaults({\n    show: show\n  }, opt);\n}\n\nvar RadarModel = echarts.extendComponentModel({\n  type: 'radar',\n  optionUpdated: function () {\n    var boundaryGap = this.get('boundaryGap');\n    var splitNumber = this.get('splitNumber');\n    var scale = this.get('scale');\n    var axisLine = this.get('axisLine');\n    var axisTick = this.get('axisTick');\n    var axisLabel = this.get('axisLabel');\n    var nameTextStyle = this.get('name');\n    var showName = this.get('name.show');\n    var nameFormatter = this.get('name.formatter');\n    var nameGap = this.get('nameGap');\n    var triggerEvent = this.get('triggerEvent');\n    var indicatorModels = zrUtil.map(this.get('indicator') || [], function (indicatorOpt) {\n      // PENDING\n      if (indicatorOpt.max != null && indicatorOpt.max > 0 && !indicatorOpt.min) {\n        indicatorOpt.min = 0;\n      } else if (indicatorOpt.min != null && indicatorOpt.min < 0 && !indicatorOpt.max) {\n        indicatorOpt.max = 0;\n      }\n\n      var iNameTextStyle = nameTextStyle;\n\n      if (indicatorOpt.color != null) {\n        iNameTextStyle = zrUtil.defaults({\n          color: indicatorOpt.color\n        }, nameTextStyle);\n      } // Use same configuration\n\n\n      indicatorOpt = zrUtil.merge(zrUtil.clone(indicatorOpt), {\n        boundaryGap: boundaryGap,\n        splitNumber: splitNumber,\n        scale: scale,\n        axisLine: axisLine,\n        axisTick: axisTick,\n        axisLabel: axisLabel,\n        // Competitable with 2 and use text\n        name: indicatorOpt.text,\n        nameLocation: 'end',\n        nameGap: nameGap,\n        // min: 0,\n        nameTextStyle: iNameTextStyle,\n        triggerEvent: triggerEvent\n      }, false);\n\n      if (!showName) {\n        indicatorOpt.name = '';\n      }\n\n      if (typeof nameFormatter === 'string') {\n        var indName = indicatorOpt.name;\n        indicatorOpt.name = nameFormatter.replace('{value}', indName != null ? indName : '');\n      } else if (typeof nameFormatter === 'function') {\n        indicatorOpt.name = nameFormatter(indicatorOpt.name, indicatorOpt);\n      }\n\n      var model = zrUtil.extend(new Model(indicatorOpt, null, this.ecModel), axisModelCommonMixin); // For triggerEvent.\n\n      model.mainType = 'radar';\n      model.componentIndex = this.componentIndex;\n      return model;\n    }, this);\n\n    this.getIndicatorModels = function () {\n      return indicatorModels;\n    };\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 0,\n    center: ['50%', '50%'],\n    radius: '75%',\n    startAngle: 90,\n    name: {\n      show: true // formatter: null\n      // textStyle: {}\n\n    },\n    boundaryGap: [0, 0],\n    splitNumber: 5,\n    nameGap: 15,\n    scale: false,\n    // Polygon or circle\n    shape: 'polygon',\n    axisLine: zrUtil.merge({\n      lineStyle: {\n        color: '#bbb'\n      }\n    }, valueAxisDefault.axisLine),\n    axisLabel: defaultsShow(valueAxisDefault.axisLabel, false),\n    axisTick: defaultsShow(valueAxisDefault.axisTick, false),\n    splitLine: defaultsShow(valueAxisDefault.splitLine, true),\n    splitArea: defaultsShow(valueAxisDefault.splitArea, true),\n    // {text, min, max}\n    indicator: []\n  }\n});\nvar _default = RadarModel;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\nvar axisModelCreator = require(\"../axisModelCreator\");\n\nvar axisModelCommonMixin = require(\"../axisModelCommonMixin\");\n\nvar AxisModel = ComponentModel.extend({\n  type: 'singleAxis',\n  layoutMode: 'box',\n\n  /**\n   * @type {module:echarts/coord/single/SingleAxis}\n   */\n  axis: null,\n\n  /**\n   * @type {module:echarts/coord/single/Single}\n   */\n  coordinateSystem: null,\n\n  /**\n   * @override\n   */\n  getCoordSysModel: function () {\n    return this;\n  }\n});\nvar defaultOption = {\n  left: '5%',\n  top: '5%',\n  right: '5%',\n  bottom: '5%',\n  type: 'value',\n  position: 'bottom',\n  orient: 'horizontal',\n  axisLine: {\n    show: true,\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    }\n  },\n  // Single coordinate system and single axis is the,\n  // which is used as the parent tooltip model.\n  // same model, so we set default tooltip show as true.\n  tooltip: {\n    show: true\n  },\n  axisTick: {\n    show: true,\n    length: 6,\n    lineStyle: {\n      width: 2\n    }\n  },\n  axisLabel: {\n    show: true,\n    interval: 'auto'\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      type: 'dashed',\n      opacity: 0.2\n    }\n  }\n};\n\nfunction getAxisType(axisName, option) {\n  return option.type || (option.data ? 'category' : 'value');\n}\n\nzrUtil.merge(AxisModel.prototype, axisModelCommonMixin);\naxisModelCreator('single', AxisModel, getAxisType, defaultOption);\nvar _default = AxisModel;\nmodule.exports = _default;","var SingleAxis = require(\"./SingleAxis\");\n\nvar axisHelper = require(\"../axisHelper\");\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\n/**\n * Single coordinates system.\n */\n\n/**\n * Create a single coordinates system.\n *\n * @param {module:echarts/coord/single/AxisModel} axisModel\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n */\nfunction Single(axisModel, ecModel, api) {\n  /**\n   * @type {string}\n   * @readOnly\n   */\n  this.dimension = 'single';\n  /**\n   * Add it just for draw tooltip.\n   *\n   * @type {Array.<string>}\n   * @readOnly\n   */\n\n  this.dimensions = ['single'];\n  /**\n   * @private\n   * @type {module:echarts/coord/single/SingleAxis}.\n   */\n\n  this._axis = null;\n  /**\n   * @private\n   * @type {module:zrender/core/BoundingRect}\n   */\n\n  this._rect;\n\n  this._init(axisModel, ecModel, api);\n  /**\n   * @type {module:echarts/coord/single/AxisModel}\n   */\n\n\n  this.model = axisModel;\n}\n\nSingle.prototype = {\n  type: 'singleAxis',\n  axisPointerEnabled: true,\n  constructor: Single,\n\n  /**\n   * Initialize single coordinate system.\n   *\n   * @param  {module:echarts/coord/single/AxisModel} axisModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @private\n   */\n  _init: function (axisModel, ecModel, api) {\n    var dim = this.dimension;\n    var axis = new SingleAxis(dim, axisHelper.createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisModel.get('position'));\n    var isCategory = axis.type === 'category';\n    axis.onBand = isCategory && axisModel.get('boundaryGap');\n    axis.inverse = axisModel.get('inverse');\n    axis.orient = axisModel.get('orient');\n    axisModel.axis = axis;\n    axis.model = axisModel;\n    axis.coordinateSystem = this;\n    this._axis = axis;\n  },\n\n  /**\n   * Update axis scale after data processed\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  update: function (ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.coordinateSystem === this) {\n        var data = seriesModel.getData();\n        var dim = this.dimension;\n\n        this._axis.scale.unionExtentFromData(data, seriesModel.coordDimToDataDim(dim));\n\n        axisHelper.niceScaleExtent(this._axis.scale, this._axis.model);\n      }\n    }, this);\n  },\n\n  /**\n   * Resize the single coordinate system.\n   *\n   * @param  {module:echarts/coord/single/AxisModel} axisModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  resize: function (axisModel, api) {\n    this._rect = getLayoutRect({\n      left: axisModel.get('left'),\n      top: axisModel.get('top'),\n      right: axisModel.get('right'),\n      bottom: axisModel.get('bottom'),\n      width: axisModel.get('width'),\n      height: axisModel.get('height')\n    }, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n\n    this._adjustAxis();\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getRect: function () {\n    return this._rect;\n  },\n\n  /**\n   * @private\n   */\n  _adjustAxis: function () {\n    var rect = this._rect;\n    var axis = this._axis;\n    var isHorizontal = axis.isHorizontal();\n    var extent = isHorizontal ? [0, rect.width] : [0, rect.height];\n    var idx = axis.reverse ? 1 : 0;\n    axis.setExtent(extent[idx], extent[1 - idx]);\n\n    this._updateAxisTransform(axis, isHorizontal ? rect.x : rect.y);\n  },\n\n  /**\n   * @param  {module:echarts/coord/single/SingleAxis} axis\n   * @param  {number} coordBase\n   */\n  _updateAxisTransform: function (axis, coordBase) {\n    var axisExtent = axis.getExtent();\n    var extentSum = axisExtent[0] + axisExtent[1];\n    var isHorizontal = axis.isHorizontal();\n    axis.toGlobalCoord = isHorizontal ? function (coord) {\n      return coord + coordBase;\n    } : function (coord) {\n      return extentSum - coord + coordBase;\n    };\n    axis.toLocalCoord = isHorizontal ? function (coord) {\n      return coord - coordBase;\n    } : function (coord) {\n      return extentSum - coord + coordBase;\n    };\n  },\n\n  /**\n   * Get axis.\n   *\n   * @return {module:echarts/coord/single/SingleAxis}\n   */\n  getAxis: function () {\n    return this._axis;\n  },\n\n  /**\n   * Get axis, add it just for draw tooltip.\n   *\n   * @return {[type]} [description]\n   */\n  getBaseAxis: function () {\n    return this._axis;\n  },\n\n  /**\n   * @return {Array.<module:echarts/coord/Axis>}\n   */\n  getAxes: function () {\n    return [this._axis];\n  },\n\n  /**\n   * @return {Object} {baseAxes: [], otherAxes: []}\n   */\n  getTooltipAxes: function () {\n    return {\n      baseAxes: [this.getAxis()]\n    };\n  },\n\n  /**\n   * If contain point.\n   *\n   * @param  {Array.<number>} point\n   * @return {boolean}\n   */\n  containPoint: function (point) {\n    var rect = this.getRect();\n    var axis = this.getAxis();\n    var orient = axis.orient;\n\n    if (orient === 'horizontal') {\n      return axis.contain(axis.toLocalCoord(point[0])) && point[1] >= rect.y && point[1] <= rect.y + rect.height;\n    } else {\n      return axis.contain(axis.toLocalCoord(point[1])) && point[0] >= rect.y && point[0] <= rect.y + rect.height;\n    }\n  },\n\n  /**\n   * @param {Array.<number>} point\n   * @return {Array.<number>}\n   */\n  pointToData: function (point) {\n    var axis = this.getAxis();\n    return [axis.coordToData(axis.toLocalCoord(point[axis.orient === 'horizontal' ? 0 : 1]))];\n  },\n\n  /**\n   * Convert the series data to concrete point.\n   *\n   * @param  {number|Array.<number>} val\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (val) {\n    var axis = this.getAxis();\n    var rect = this.getRect();\n    var pt = [];\n    var idx = axis.orient === 'horizontal' ? 0 : 1;\n\n    if (val instanceof Array) {\n      val = val[0];\n    }\n\n    pt[idx] = axis.toGlobalCoord(axis.dataToCoord(+val));\n    pt[1 - idx] = idx === 0 ? rect.y + rect.height / 2 : rect.x + rect.width / 2;\n    return pt;\n  }\n};\nvar _default = Single;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../Axis\");\n\n/**\n * @constructor  module:echarts/coord/single/SingleAxis\n * @extends {module:echarts/coord/Axis}\n * @param {string} dim\n * @param {*} scale\n * @param {Array.<number>} coordExtent\n * @param {string} axisType\n * @param {string} position\n */\nvar SingleAxis = function (dim, scale, coordExtent, axisType, position) {\n  Axis.call(this, dim, scale, coordExtent);\n  /**\n   * Axis type\n   * - 'category'\n   * - 'value'\n   * - 'time'\n   * - 'log'\n   * @type {string}\n   */\n\n  this.type = axisType || 'value';\n  /**\n   * Axis position\n   *  - 'top'\n   *  - 'bottom'\n   *  - 'left'\n   *  - 'right'\n   *  @type {string}\n   */\n\n  this.position = position || 'bottom';\n  /**\n   * Axis orient\n   *  - 'horizontal'\n   *  - 'vertical'\n   * @type {[type]}\n   */\n\n  this.orient = null;\n  /**\n   * @type {number}\n   */\n\n  this._labelInterval = null;\n};\n\nSingleAxis.prototype = {\n  constructor: SingleAxis,\n\n  /**\n   * Axis model\n   * @type {module:echarts/coord/single/AxisModel}\n   */\n  model: null,\n\n  /**\n   * Judge the orient of the axis.\n   * @return {boolean}\n   */\n  isHorizontal: function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  },\n\n  /**\n   * @override\n   */\n  pointToData: function (point, clamp) {\n    return this.coordinateSystem.pointToData(point, clamp)[0];\n  },\n\n  /**\n   * Convert the local coord(processed by dataToCoord())\n   * to global coord(concrete pixel coord).\n   * designated by module:echarts/coord/single/Single.\n   * @type {Function}\n   */\n  toGlobalCoord: null,\n\n  /**\n   * Convert the global coord to local coord.\n   * designated by module:echarts/coord/single/Single.\n   * @type {Function}\n   */\n  toLocalCoord: null\n};\nzrUtil.inherits(SingleAxis, Axis);\nvar _default = SingleAxis;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  var axis = this.getAxis();\n  var val = dataItem instanceof Array ? dataItem[0] : dataItem;\n  var halfSize = (dataSize instanceof Array ? dataSize[0] : dataSize) / 2;\n  return axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n}\n\nfunction _default(coordSys) {\n  var rect = coordSys.getRect();\n  return {\n    coordSys: {\n      type: 'singleAxis',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: zrUtil.bind(coordSys.dataToPoint, coordSys),\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}\n\nmodule.exports = _default;","var Single = require(\"./Single\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\n/**\n * Single coordinate system creator.\n */\n\n/**\n * Create single coordinate system and inject it into seriesModel.\n *\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n * @return {Array.<module:echarts/coord/single/Single>}\n */\nfunction create(ecModel, api) {\n  var singles = [];\n  ecModel.eachComponent('singleAxis', function (axisModel, idx) {\n    var single = new Single(axisModel, ecModel, api);\n    single.name = 'single_' + idx;\n    single.resize(axisModel, api);\n    axisModel.coordinateSystem = single;\n    singles.push(single);\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'singleAxis') {\n      var singleAxisModel = ecModel.queryComponents({\n        mainType: 'singleAxis',\n        index: seriesModel.get('singleAxisIndex'),\n        id: seriesModel.get('singleAxisId')\n      })[0];\n      seriesModel.coordinateSystem = singleAxisModel && singleAxisModel.coordinateSystem;\n    }\n  });\n  return singles;\n}\n\nCoordinateSystem.register('single', {\n  create: create,\n  dimensions: Single.prototype.dimensions\n});","function defaultKeyGetter(item) {\n  return item;\n}\n/**\n * @param {Array} oldArr\n * @param {Array} newArr\n * @param {Function} oldKeyGetter\n * @param {Function} newKeyGetter\n * @param {Object} [context] Can be visited by this.context in callback.\n */\n\n\nfunction DataDiffer(oldArr, newArr, oldKeyGetter, newKeyGetter, context) {\n  this._old = oldArr;\n  this._new = newArr;\n  this._oldKeyGetter = oldKeyGetter || defaultKeyGetter;\n  this._newKeyGetter = newKeyGetter || defaultKeyGetter;\n  this.context = context;\n}\n\nDataDiffer.prototype = {\n  constructor: DataDiffer,\n\n  /**\n   * Callback function when add a data\n   */\n  add: function (func) {\n    this._add = func;\n    return this;\n  },\n\n  /**\n   * Callback function when update a data\n   */\n  update: function (func) {\n    this._update = func;\n    return this;\n  },\n\n  /**\n   * Callback function when remove a data\n   */\n  remove: function (func) {\n    this._remove = func;\n    return this;\n  },\n  execute: function () {\n    var oldArr = this._old;\n    var newArr = this._new;\n    var oldDataIndexMap = {};\n    var newDataIndexMap = {};\n    var oldDataKeyArr = [];\n    var newDataKeyArr = [];\n    var i;\n    initIndexMap(oldArr, oldDataIndexMap, oldDataKeyArr, '_oldKeyGetter', this);\n    initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter', this); // Travel by inverted order to make sure order consistency\n    // when duplicate keys exists (consider newDataIndex.pop() below).\n    // For performance consideration, these code below do not look neat.\n\n    for (i = 0; i < oldArr.length; i++) {\n      var key = oldDataKeyArr[i];\n      var idx = newDataIndexMap[key]; // idx can never be empty array here. see 'set null' logic below.\n\n      if (idx != null) {\n        // Consider there is duplicate key (for example, use dataItem.name as key).\n        // We should make sure every item in newArr and oldArr can be visited.\n        var len = idx.length;\n\n        if (len) {\n          len === 1 && (newDataIndexMap[key] = null);\n          idx = idx.unshift();\n        } else {\n          newDataIndexMap[key] = null;\n        }\n\n        this._update && this._update(idx, i);\n      } else {\n        this._remove && this._remove(i);\n      }\n    }\n\n    for (var i = 0; i < newDataKeyArr.length; i++) {\n      var key = newDataKeyArr[i];\n\n      if (newDataIndexMap.hasOwnProperty(key)) {\n        var idx = newDataIndexMap[key];\n\n        if (idx == null) {\n          continue;\n        } // idx can never be empty array here. see 'set null' logic above.\n\n\n        if (!idx.length) {\n          this._add && this._add(idx);\n        } else {\n          for (var j = 0, len = idx.length; j < len; j++) {\n            this._add && this._add(idx[j]);\n          }\n        }\n      }\n    }\n  }\n};\n\nfunction initIndexMap(arr, map, keyArr, keyGetterName, dataDiffer) {\n  for (var i = 0; i < arr.length; i++) {\n    // Add prefix to avoid conflict with Object.prototype.\n    var key = '_ec_' + dataDiffer[keyGetterName](arr[i], i);\n    var existence = map[key];\n\n    if (existence == null) {\n      keyArr.push(key);\n      map[key] = i;\n    } else {\n      if (!existence.length) {\n        map[key] = existence = [existence];\n      }\n\n      existence.push(i);\n    }\n  }\n}\n\nvar _default = DataDiffer;\nmodule.exports = _default;","var _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/**\n * Graph data structure\n *\n * @module echarts/data/Graph\n * @author Yi Shen(https://www.github.com/pissang)\n */\n// id may be function name of Object, add a prefix to avoid this problem.\nfunction generateNodeKey(id) {\n  return '_EC_' + id;\n}\n/**\n * @alias module:echarts/data/Graph\n * @constructor\n * @param {boolean} directed\n */\n\n\nvar Graph = function (directed) {\n  /**\n   * \n   * @type {boolean}\n   * @private\n   */\n  this._directed = directed || false;\n  /**\n   * @type {Array.<module:echarts/data/Graph.Node>}\n   * @readOnly\n   */\n\n  this.nodes = [];\n  /**\n   * @type {Array.<module:echarts/data/Graph.Edge>}\n   * @readOnly\n   */\n\n  this.edges = [];\n  /**\n   * @type {Object.<string, module:echarts/data/Graph.Node>}\n   * @private\n   */\n\n  this._nodesMap = {};\n  /**\n   * @type {Object.<string, module:echarts/data/Graph.Edge>}\n   * @private\n   */\n\n  this._edgesMap = {};\n  /**\n   * @type {module:echarts/data/List}\n   * @readOnly\n   */\n\n  this.data;\n  /**\n   * @type {module:echarts/data/List}\n   * @readOnly\n   */\n\n  this.edgeData;\n};\n\nvar graphProto = Graph.prototype;\n/**\n * @type {string}\n */\n\ngraphProto.type = 'graph';\n/**\n * If is directed graph\n * @return {boolean}\n */\n\ngraphProto.isDirected = function () {\n  return this._directed;\n};\n/**\n * Add a new node\n * @param {string} id\n * @param {number} [dataIndex]\n */\n\n\ngraphProto.addNode = function (id, dataIndex) {\n  id = id || '' + dataIndex;\n  var nodesMap = this._nodesMap;\n\n  if (nodesMap[generateNodeKey(id)]) {\n    return;\n  }\n\n  var node = new Node(id, dataIndex);\n  node.hostGraph = this;\n  this.nodes.push(node);\n  nodesMap[generateNodeKey(id)] = node;\n  return node;\n};\n/**\n * Get node by data index\n * @param  {number} dataIndex\n * @return {module:echarts/data/Graph~Node}\n */\n\n\ngraphProto.getNodeByIndex = function (dataIndex) {\n  var rawIdx = this.data.getRawIndex(dataIndex);\n  return this.nodes[rawIdx];\n};\n/**\n * Get node by id\n * @param  {string} id\n * @return {module:echarts/data/Graph.Node}\n */\n\n\ngraphProto.getNodeById = function (id) {\n  return this._nodesMap[generateNodeKey(id)];\n};\n/**\n * Add a new edge\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {number} [dataIndex=-1]\n * @return {module:echarts/data/Graph.Edge}\n */\n\n\ngraphProto.addEdge = function (n1, n2, dataIndex) {\n  var nodesMap = this._nodesMap;\n  var edgesMap = this._edgesMap; // PNEDING\n\n  if (typeof n1 === 'number') {\n    n1 = this.nodes[n1];\n  }\n\n  if (typeof n2 === 'number') {\n    n2 = this.nodes[n2];\n  }\n\n  if (!(n1 instanceof Node)) {\n    n1 = nodesMap[generateNodeKey(n1)];\n  }\n\n  if (!(n2 instanceof Node)) {\n    n2 = nodesMap[generateNodeKey(n2)];\n  }\n\n  if (!n1 || !n2) {\n    return;\n  }\n\n  var key = n1.id + '-' + n2.id; // PENDING\n\n  if (edgesMap[key]) {\n    return;\n  }\n\n  var edge = new Edge(n1, n2, dataIndex);\n  edge.hostGraph = this;\n\n  if (this._directed) {\n    n1.outEdges.push(edge);\n    n2.inEdges.push(edge);\n  }\n\n  n1.edges.push(edge);\n\n  if (n1 !== n2) {\n    n2.edges.push(edge);\n  }\n\n  this.edges.push(edge);\n  edgesMap[key] = edge;\n  return edge;\n};\n/**\n * Get edge by data index\n * @param  {number} dataIndex\n * @return {module:echarts/data/Graph~Node}\n */\n\n\ngraphProto.getEdgeByIndex = function (dataIndex) {\n  var rawIdx = this.edgeData.getRawIndex(dataIndex);\n  return this.edges[rawIdx];\n};\n/**\n * Get edge by two linked nodes\n * @param  {module:echarts/data/Graph.Node|string} n1\n * @param  {module:echarts/data/Graph.Node|string} n2\n * @return {module:echarts/data/Graph.Edge}\n */\n\n\ngraphProto.getEdge = function (n1, n2) {\n  if (n1 instanceof Node) {\n    n1 = n1.id;\n  }\n\n  if (n2 instanceof Node) {\n    n2 = n2.id;\n  }\n\n  var edgesMap = this._edgesMap;\n\n  if (this._directed) {\n    return edgesMap[n1 + '-' + n2];\n  } else {\n    return edgesMap[n1 + '-' + n2] || edgesMap[n2 + '-' + n1];\n  }\n};\n/**\n * Iterate all nodes\n * @param  {Function} cb\n * @param  {*} [context]\n */\n\n\ngraphProto.eachNode = function (cb, context) {\n  var nodes = this.nodes;\n  var len = nodes.length;\n\n  for (var i = 0; i < len; i++) {\n    if (nodes[i].dataIndex >= 0) {\n      cb.call(context, nodes[i], i);\n    }\n  }\n};\n/**\n * Iterate all edges\n * @param  {Function} cb\n * @param  {*} [context]\n */\n\n\ngraphProto.eachEdge = function (cb, context) {\n  var edges = this.edges;\n  var len = edges.length;\n\n  for (var i = 0; i < len; i++) {\n    if (edges[i].dataIndex >= 0 && edges[i].node1.dataIndex >= 0 && edges[i].node2.dataIndex >= 0) {\n      cb.call(context, edges[i], i);\n    }\n  }\n};\n/**\n * Breadth first traverse\n * @param {Function} cb\n * @param {module:echarts/data/Graph.Node} startNode\n * @param {string} [direction='none'] 'none'|'in'|'out'\n * @param {*} [context]\n */\n\n\ngraphProto.breadthFirstTraverse = function (cb, startNode, direction, context) {\n  if (!(startNode instanceof Node)) {\n    startNode = this._nodesMap[generateNodeKey(startNode)];\n  }\n\n  if (!startNode) {\n    return;\n  }\n\n  var edgeType = direction === 'out' ? 'outEdges' : direction === 'in' ? 'inEdges' : 'edges';\n\n  for (var i = 0; i < this.nodes.length; i++) {\n    this.nodes[i].__visited = false;\n  }\n\n  if (cb.call(context, startNode, null)) {\n    return;\n  }\n\n  var queue = [startNode];\n\n  while (queue.length) {\n    var currentNode = queue.shift();\n    var edges = currentNode[edgeType];\n\n    for (var i = 0; i < edges.length; i++) {\n      var e = edges[i];\n      var otherNode = e.node1 === currentNode ? e.node2 : e.node1;\n\n      if (!otherNode.__visited) {\n        if (cb.call(context, otherNode, currentNode)) {\n          // Stop traversing\n          return;\n        }\n\n        queue.push(otherNode);\n        otherNode.__visited = true;\n      }\n    }\n  }\n}; // TODO\n// graphProto.depthFirstTraverse = function (\n//     cb, startNode, direction, context\n// ) {\n// };\n// Filter update\n\n\ngraphProto.update = function () {\n  var data = this.data;\n  var edgeData = this.edgeData;\n  var nodes = this.nodes;\n  var edges = this.edges;\n\n  for (var i = 0, len = nodes.length; i < len; i++) {\n    nodes[i].dataIndex = -1;\n  }\n\n  for (var i = 0, len = data.count(); i < len; i++) {\n    nodes[data.getRawIndex(i)].dataIndex = i;\n  }\n\n  edgeData.filterSelf(function (idx) {\n    var edge = edges[edgeData.getRawIndex(idx)];\n    return edge.node1.dataIndex >= 0 && edge.node2.dataIndex >= 0;\n  }); // Update edge\n\n  for (var i = 0, len = edges.length; i < len; i++) {\n    edges[i].dataIndex = -1;\n  }\n\n  for (var i = 0, len = edgeData.count(); i < len; i++) {\n    edges[edgeData.getRawIndex(i)].dataIndex = i;\n  }\n};\n/**\n * @return {module:echarts/data/Graph}\n */\n\n\ngraphProto.clone = function () {\n  var graph = new Graph(this._directed);\n  var nodes = this.nodes;\n  var edges = this.edges;\n\n  for (var i = 0; i < nodes.length; i++) {\n    graph.addNode(nodes[i].id, nodes[i].dataIndex);\n  }\n\n  for (var i = 0; i < edges.length; i++) {\n    var e = edges[i];\n    graph.addEdge(e.node1.id, e.node2.id, e.dataIndex);\n  }\n\n  return graph;\n};\n/**\n * @alias module:echarts/data/Graph.Node\n */\n\n\nfunction Node(id, dataIndex) {\n  /**\n  * @type {string}\n  */\n  this.id = id == null ? '' : id;\n  /**\n  * @type {Array.<module:echarts/data/Graph.Edge>}\n  */\n\n  this.inEdges = [];\n  /**\n  * @type {Array.<module:echarts/data/Graph.Edge>}\n  */\n\n  this.outEdges = [];\n  /**\n  * @type {Array.<module:echarts/data/Graph.Edge>}\n  */\n\n  this.edges = [];\n  /**\n   * @type {module:echarts/data/Graph}\n   */\n\n  this.hostGraph;\n  /**\n   * @type {number}\n   */\n\n  this.dataIndex = dataIndex == null ? -1 : dataIndex;\n}\n\nNode.prototype = {\n  constructor: Node,\n\n  /**\n   * @return {number}\n   */\n  degree: function () {\n    return this.edges.length;\n  },\n\n  /**\n   * @return {number}\n   */\n  inDegree: function () {\n    return this.inEdges.length;\n  },\n\n  /**\n  * @return {number}\n  */\n  outDegree: function () {\n    return this.outEdges.length;\n  },\n\n  /**\n   * @param {string} [path]\n   * @return {module:echarts/model/Model}\n   */\n  getModel: function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var graph = this.hostGraph;\n    var itemModel = graph.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  }\n};\n/**\n * \n * @alias module:echarts/data/Graph.Edge\n * @param {module:echarts/data/Graph.Node} n1\n * @param {module:echarts/data/Graph.Node} n2\n * @param {number} [dataIndex=-1]\n */\n\nfunction Edge(n1, n2, dataIndex) {\n  /**\n   * 1\n   * @type {module:echarts/data/Graph.Node}\n   */\n  this.node1 = n1;\n  /**\n   * 2\n   * @type {module:echarts/data/Graph.Node}\n   */\n\n  this.node2 = n2;\n  this.dataIndex = dataIndex == null ? -1 : dataIndex;\n}\n/**\n * @param {string} [path]\n * @return {module:echarts/model/Model}\n */\n\n\nEdge.prototype.getModel = function (path) {\n  if (this.dataIndex < 0) {\n    return;\n  }\n\n  var graph = this.hostGraph;\n  var itemModel = graph.edgeData.getItemModel(this.dataIndex);\n  return itemModel.getModel(path);\n};\n\nvar createGraphDataProxyMixin = function (hostName, dataName) {\n  return {\n    /**\n     * @param {string=} [dimension='value'] Default 'value'. can be 'a', 'b', 'c', 'd', 'e'.\n     * @return {number}\n     */\n    getValue: function (dimension) {\n      var data = this[hostName][dataName];\n      return data.get(data.getDimension(dimension || 'value'), this.dataIndex);\n    },\n\n    /**\n     * @param {Object|string} key\n     * @param {*} [value]\n     */\n    setVisual: function (key, value) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemVisual(this.dataIndex, key, value);\n    },\n\n    /**\n     * @param {string} key\n     * @return {boolean}\n     */\n    getVisual: function (key, ignoreParent) {\n      return this[hostName][dataName].getItemVisual(this.dataIndex, key, ignoreParent);\n    },\n\n    /**\n     * @param {Object} layout\n     * @return {boolean} [merge=false]\n     */\n    setLayout: function (layout, merge) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemLayout(this.dataIndex, layout, merge);\n    },\n\n    /**\n     * @return {Object}\n     */\n    getLayout: function () {\n      return this[hostName][dataName].getItemLayout(this.dataIndex);\n    },\n\n    /**\n     * @return {module:zrender/Element}\n     */\n    getGraphicEl: function () {\n      return this[hostName][dataName].getItemGraphicEl(this.dataIndex);\n    },\n\n    /**\n     * @return {number}\n     */\n    getRawIndex: function () {\n      return this[hostName][dataName].getRawIndex(this.dataIndex);\n    }\n  };\n};\n\nzrUtil.mixin(Node, createGraphDataProxyMixin('hostGraph', 'data'));\nzrUtil.mixin(Edge, createGraphDataProxyMixin('hostGraph', 'edgeData'));\nGraph.Node = Node;\nGraph.Edge = Edge;\nvar _default = Graph;\nmodule.exports = _default;","var _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../model/Model\");\n\nvar DataDiffer = require(\"./DataDiffer\");\n\nvar modelUtil = require(\"../util/model\");\n\n/**\n * List for data storage\n * @module echarts/data/List\n */\nvar isObject = zrUtil.isObject;\nvar UNDEFINED = 'undefined';\nvar globalObj = typeof window === UNDEFINED ? global : window;\nvar dataCtors = {\n  'float': typeof globalObj.Float64Array === UNDEFINED ? Array : globalObj.Float64Array,\n  'int': typeof globalObj.Int32Array === UNDEFINED ? Array : globalObj.Int32Array,\n  // Ordinal data type can be string or int\n  'ordinal': Array,\n  'number': Array,\n  'time': Array\n};\nvar TRANSFERABLE_PROPERTIES = ['stackedOn', 'hasItemOption', '_nameList', '_idList', '_rawData'];\n\nfunction transferProperties(a, b) {\n  zrUtil.each(TRANSFERABLE_PROPERTIES.concat(b.__wrappedMethods || []), function (propName) {\n    if (b.hasOwnProperty(propName)) {\n      a[propName] = b[propName];\n    }\n  });\n  a.__wrappedMethods = b.__wrappedMethods;\n}\n\nfunction DefaultDataProvider(dataArray) {\n  this._array = dataArray || [];\n}\n\nDefaultDataProvider.prototype.pure = false;\n\nDefaultDataProvider.prototype.count = function () {\n  return this._array.length;\n};\n\nDefaultDataProvider.prototype.getItem = function (idx) {\n  return this._array[idx];\n};\n/**\n * @constructor\n * @alias module:echarts/data/List\n *\n * @param {Array.<string|Object>} dimensions\n *      For example, ['someDimName', {name: 'someDimName', type: 'someDimType'}, ...].\n *      Dimensions should be concrete names like x, y, z, lng, lat, angle, radius\n * @param {module:echarts/model/Model} hostModel\n */\n\n\nvar List = function (dimensions, hostModel) {\n  dimensions = dimensions || ['x', 'y'];\n  var dimensionInfos = {};\n  var dimensionNames = [];\n\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimensionName;\n    var dimensionInfo = {};\n\n    if (typeof dimensions[i] === 'string') {\n      dimensionName = dimensions[i];\n      dimensionInfo = {\n        name: dimensionName,\n        coordDim: dimensionName,\n        coordDimIndex: 0,\n        stackable: false,\n        // Type can be 'float', 'int', 'number'\n        // Default is number, Precision of float may not enough\n        type: 'number'\n      };\n    } else {\n      dimensionInfo = dimensions[i];\n      dimensionName = dimensionInfo.name;\n      dimensionInfo.type = dimensionInfo.type || 'number';\n\n      if (!dimensionInfo.coordDim) {\n        dimensionInfo.coordDim = dimensionName;\n        dimensionInfo.coordDimIndex = 0;\n      }\n    }\n\n    dimensionInfo.otherDims = dimensionInfo.otherDims || {};\n    dimensionNames.push(dimensionName);\n    dimensionInfos[dimensionName] = dimensionInfo;\n  }\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n\n\n  this.dimensions = dimensionNames;\n  /**\n   * Infomation of each data dimension, like data type.\n   * @type {Object}\n   */\n\n  this._dimensionInfos = dimensionInfos;\n  /**\n   * @type {module:echarts/model/Model}\n   */\n\n  this.hostModel = hostModel;\n  /**\n   * @type {module:echarts/model/Model}\n   */\n\n  this.dataType;\n  /**\n   * Indices stores the indices of data subset after filtered.\n   * This data subset will be used in chart.\n   * @type {Array.<number>}\n   * @readOnly\n   */\n\n  this.indices = [];\n  /**\n   * Data storage\n   * @type {Object.<key, TypedArray|Array>}\n   * @private\n   */\n\n  this._storage = {};\n  /**\n   * @type {Array.<string>}\n   */\n\n  this._nameList = [];\n  /**\n   * @type {Array.<string>}\n   */\n\n  this._idList = [];\n  /**\n   * Models of data option is stored sparse for optimizing memory cost\n   * @type {Array.<module:echarts/model/Model>}\n   * @private\n   */\n\n  this._optionModels = [];\n  /**\n   * @param {module:echarts/data/List}\n   */\n\n  this.stackedOn = null;\n  /**\n   * Global visual properties after visual coding\n   * @type {Object}\n   * @private\n   */\n\n  this._visual = {};\n  /**\n   * Globel layout properties.\n   * @type {Object}\n   * @private\n   */\n\n  this._layout = {};\n  /**\n   * Item visual properties after visual coding\n   * @type {Array.<Object>}\n   * @private\n   */\n\n  this._itemVisuals = [];\n  /**\n   * Item layout properties after layout\n   * @type {Array.<Object>}\n   * @private\n   */\n\n  this._itemLayouts = [];\n  /**\n   * Graphic elemnents\n   * @type {Array.<module:zrender/Element>}\n   * @private\n   */\n\n  this._graphicEls = [];\n  /**\n   * @type {Array.<Array|Object>}\n   * @private\n   */\n\n  this._rawData;\n  /**\n   * @type {Object}\n   * @private\n   */\n\n  this._extent;\n};\n\nvar listProto = List.prototype;\nlistProto.type = 'list';\n/**\n * If each data item has it's own option\n * @type {boolean}\n */\n\nlistProto.hasItemOption = true;\n/**\n * Get dimension name\n * @param {string|number} dim\n *        Dimension can be concrete names like x, y, z, lng, lat, angle, radius\n *        Or a ordinal number. For example getDimensionInfo(0) will return 'x' or 'lng' or 'radius'\n * @return {string} Concrete dim name.\n */\n\nlistProto.getDimension = function (dim) {\n  if (!isNaN(dim)) {\n    dim = this.dimensions[dim] || dim;\n  }\n\n  return dim;\n};\n/**\n * Get type and stackable info of particular dimension\n * @param {string|number} dim\n *        Dimension can be concrete names like x, y, z, lng, lat, angle, radius\n *        Or a ordinal number. For example getDimensionInfo(0) will return 'x' or 'lng' or 'radius'\n */\n\n\nlistProto.getDimensionInfo = function (dim) {\n  return zrUtil.clone(this._dimensionInfos[this.getDimension(dim)]);\n};\n/**\n * Initialize from data\n * @param {Array.<Object|number|Array>} data\n * @param {Array.<string>} [nameList]\n * @param {Function} [dimValueGetter] (dataItem, dimName, dataIndex, dimIndex) => number\n */\n\n\nlistProto.initData = function (data, nameList, dimValueGetter) {\n  data = data || [];\n  var isDataArray = zrUtil.isArray(data);\n\n  if (isDataArray) {\n    data = new DefaultDataProvider(data);\n  }\n\n  this._rawData = data; // Clear\n\n  var storage = this._storage = {};\n  var indices = this.indices = [];\n  var dimensions = this.dimensions;\n  var dimensionInfoMap = this._dimensionInfos;\n  var size = data.count();\n  var idList = [];\n  var nameRepeatCount = {};\n  var nameDimIdx;\n  nameList = nameList || []; // Init storage\n\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimInfo = dimensionInfoMap[dimensions[i]];\n    dimInfo.otherDims.itemName === 0 && (nameDimIdx = i);\n    var DataCtor = dataCtors[dimInfo.type];\n    storage[dimensions[i]] = new DataCtor(size);\n  }\n\n  var self = this;\n\n  if (!dimValueGetter) {\n    self.hasItemOption = false;\n  } // Default dim value getter\n\n\n  dimValueGetter = dimValueGetter || function (dataItem, dimName, dataIndex, dimIndex) {\n    var value = modelUtil.getDataItemValue(dataItem); // If any dataItem is like { value: 10 }\n\n    if (modelUtil.isDataItemOption(dataItem)) {\n      self.hasItemOption = true;\n    }\n\n    return modelUtil.converDataValue(value instanceof Array ? value[dimIndex] // If value is a single number or something else not array.\n    : value, dimensionInfoMap[dimName]);\n  };\n\n  for (var i = 0; i < size; i++) {\n    // NOTICE: Try not to write things into dataItem\n    var dataItem = data.getItem(i); // Each data item is value\n    // [1, 2]\n    // 2\n    // Bar chart, line chart which uses category axis\n    // only gives the 'y' value. 'x' value is the indices of cateogry\n    // Use a tempValue to normalize the value to be a (x, y) value\n    // Store the data by dimensions\n\n    for (var k = 0; k < dimensions.length; k++) {\n      var dim = dimensions[k];\n      var dimStorage = storage[dim]; // PENDING NULL is empty or zero\n\n      dimStorage[i] = dimValueGetter(dataItem, dim, i, k);\n    }\n\n    indices.push(i);\n  } // Use the name in option and create id\n\n\n  for (var i = 0; i < size; i++) {\n    var dataItem = data.getItem(i);\n\n    if (!nameList[i] && dataItem) {\n      if (dataItem.name != null) {\n        nameList[i] = dataItem.name;\n      } else if (nameDimIdx != null) {\n        nameList[i] = storage[dimensions[nameDimIdx]][i];\n      }\n    }\n\n    var name = nameList[i] || ''; // Try using the id in option\n\n    var id = dataItem && dataItem.id;\n\n    if (!id && name) {\n      // Use name as id and add counter to avoid same name\n      nameRepeatCount[name] = nameRepeatCount[name] || 0;\n      id = name;\n\n      if (nameRepeatCount[name] > 0) {\n        id += '__ec__' + nameRepeatCount[name];\n      }\n\n      nameRepeatCount[name]++;\n    }\n\n    id && (idList[i] = id);\n  }\n\n  this._nameList = nameList;\n  this._idList = idList;\n};\n/**\n * @return {number}\n */\n\n\nlistProto.count = function () {\n  return this.indices.length;\n};\n/**\n * Get value. Return NaN if idx is out of range.\n * @param {string} dim Dim must be concrete name.\n * @param {number} idx\n * @param {boolean} stack\n * @return {number}\n */\n\n\nlistProto.get = function (dim, idx, stack) {\n  var storage = this._storage;\n  var dataIndex = this.indices[idx]; // If value not exists\n\n  if (dataIndex == null || !storage[dim]) {\n    return NaN;\n  }\n\n  var value = storage[dim][dataIndex]; // FIXME ordinal data type is not stackable\n\n  if (stack) {\n    var dimensionInfo = this._dimensionInfos[dim];\n\n    if (dimensionInfo && dimensionInfo.stackable) {\n      var stackedOn = this.stackedOn;\n\n      while (stackedOn) {\n        // Get no stacked data of stacked on\n        var stackedValue = stackedOn.get(dim, idx); // Considering positive stack, negative stack and empty data\n\n        if (value >= 0 && stackedValue > 0 || // Positive stack\n        value <= 0 && stackedValue < 0 // Negative stack\n        ) {\n            value += stackedValue;\n          }\n\n        stackedOn = stackedOn.stackedOn;\n      }\n    }\n  }\n\n  return value;\n};\n/**\n * Get value for multi dimensions.\n * @param {Array.<string>} [dimensions] If ignored, using all dimensions.\n * @param {number} idx\n * @param {boolean} stack\n * @return {number}\n */\n\n\nlistProto.getValues = function (dimensions, idx, stack) {\n  var values = [];\n\n  if (!zrUtil.isArray(dimensions)) {\n    stack = idx;\n    idx = dimensions;\n    dimensions = this.dimensions;\n  }\n\n  for (var i = 0, len = dimensions.length; i < len; i++) {\n    values.push(this.get(dimensions[i], idx, stack));\n  }\n\n  return values;\n};\n/**\n * If value is NaN. Inlcuding '-'\n * @param {string} dim\n * @param {number} idx\n * @return {number}\n */\n\n\nlistProto.hasValue = function (idx) {\n  var dimensions = this.dimensions;\n  var dimensionInfos = this._dimensionInfos;\n\n  for (var i = 0, len = dimensions.length; i < len; i++) {\n    if ( // Ordinal type can be string or number\n    dimensionInfos[dimensions[i]].type !== 'ordinal' && isNaN(this.get(dimensions[i], idx))) {\n      return false;\n    }\n  }\n\n  return true;\n};\n/**\n * Get extent of data in one dimension\n * @param {string} dim\n * @param {boolean} stack\n * @param {Function} filter\n */\n\n\nlistProto.getDataExtent = function (dim, stack, filter) {\n  dim = this.getDimension(dim);\n  var dimData = this._storage[dim];\n  var dimInfo = this.getDimensionInfo(dim);\n  stack = dimInfo && dimInfo.stackable && stack;\n  var dimExtent = (this._extent || (this._extent = {}))[dim + !!stack];\n  var value;\n\n  if (dimExtent) {\n    return dimExtent;\n  } // var dimInfo = this._dimensionInfos[dim];\n\n\n  if (dimData) {\n    var min = Infinity;\n    var max = -Infinity; // var isOrdinal = dimInfo.type === 'ordinal';\n\n    for (var i = 0, len = this.count(); i < len; i++) {\n      value = this.get(dim, i, stack); // FIXME\n      // if (isOrdinal && typeof value === 'string') {\n      //     value = zrUtil.indexOf(dimData, value);\n      // }\n\n      if (!filter || filter(value, dim, i)) {\n        value < min && (min = value);\n        value > max && (max = value);\n      }\n    }\n\n    return this._extent[dim + !!stack] = [min, max];\n  } else {\n    return [Infinity, -Infinity];\n  }\n};\n/**\n * Get sum of data in one dimension\n * @param {string} dim\n * @param {boolean} stack\n */\n\n\nlistProto.getSum = function (dim, stack) {\n  var dimData = this._storage[dim];\n  var sum = 0;\n\n  if (dimData) {\n    for (var i = 0, len = this.count(); i < len; i++) {\n      var value = this.get(dim, i, stack);\n\n      if (!isNaN(value)) {\n        sum += value;\n      }\n    }\n  }\n\n  return sum;\n};\n/**\n * Retreive the index with given value\n * @param {number} idx\n * @param {number} value\n * @return {number}\n */\n// FIXME Precision of float value\n\n\nlistProto.indexOf = function (dim, value) {\n  var storage = this._storage;\n  var dimData = storage[dim];\n  var indices = this.indices;\n\n  if (dimData) {\n    for (var i = 0, len = indices.length; i < len; i++) {\n      var rawIndex = indices[i];\n\n      if (dimData[rawIndex] === value) {\n        return i;\n      }\n    }\n  }\n\n  return -1;\n};\n/**\n * Retreive the index with given name\n * @param {number} idx\n * @param {number} name\n * @return {number}\n */\n\n\nlistProto.indexOfName = function (name) {\n  var indices = this.indices;\n  var nameList = this._nameList;\n\n  for (var i = 0, len = indices.length; i < len; i++) {\n    var rawIndex = indices[i];\n\n    if (nameList[rawIndex] === name) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n/**\n * Retreive the index with given raw data index\n * @param {number} idx\n * @param {number} name\n * @return {number}\n */\n\n\nlistProto.indexOfRawIndex = function (rawIndex) {\n  // Indices are ascending\n  var indices = this.indices; // If rawIndex === dataIndex\n\n  var rawDataIndex = indices[rawIndex];\n\n  if (rawDataIndex != null && rawDataIndex === rawIndex) {\n    return rawIndex;\n  }\n\n  var left = 0;\n  var right = indices.length - 1;\n\n  while (left <= right) {\n    var mid = (left + right) / 2 | 0;\n\n    if (indices[mid] < rawIndex) {\n      left = mid + 1;\n    } else if (indices[mid] > rawIndex) {\n      right = mid - 1;\n    } else {\n      return mid;\n    }\n  }\n\n  return -1;\n};\n/**\n * Retreive the index of nearest value\n * @param {string} dim\n * @param {number} value\n * @param {boolean} stack If given value is after stacked\n * @param {number} [maxDistance=Infinity]\n * @return {Array.<number>} Considere multiple points has the same value.\n */\n\n\nlistProto.indicesOfNearest = function (dim, value, stack, maxDistance) {\n  var storage = this._storage;\n  var dimData = storage[dim];\n  var nearestIndices = [];\n\n  if (!dimData) {\n    return nearestIndices;\n  }\n\n  if (maxDistance == null) {\n    maxDistance = Infinity;\n  }\n\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n\n  for (var i = 0, len = this.count(); i < len; i++) {\n    var diff = value - this.get(dim, i, stack);\n    var dist = Math.abs(diff);\n\n    if (diff <= maxDistance && dist <= minDist) {\n      // For the case of two data are same on xAxis, which has sequence data.\n      // Show the nearest index\n      // https://github.com/ecomfe/echarts/issues/2869\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        nearestIndices.length = 0;\n      }\n\n      nearestIndices.push(i);\n    }\n  }\n\n  return nearestIndices;\n};\n/**\n * Get raw data index\n * @param {number} idx\n * @return {number}\n */\n\n\nlistProto.getRawIndex = function (idx) {\n  var rawIdx = this.indices[idx];\n  return rawIdx == null ? -1 : rawIdx;\n};\n/**\n * Get raw data item\n * @param {number} idx\n * @return {number}\n */\n\n\nlistProto.getRawDataItem = function (idx) {\n  return this._rawData.getItem(this.getRawIndex(idx));\n};\n/**\n * @param {number} idx\n * @param {boolean} [notDefaultIdx=false]\n * @return {string}\n */\n\n\nlistProto.getName = function (idx) {\n  return this._nameList[this.indices[idx]] || '';\n};\n/**\n * @param {number} idx\n * @param {boolean} [notDefaultIdx=false]\n * @return {string}\n */\n\n\nlistProto.getId = function (idx) {\n  return this._idList[this.indices[idx]] || this.getRawIndex(idx) + '';\n};\n\nfunction normalizeDimensions(dimensions) {\n  if (!zrUtil.isArray(dimensions)) {\n    dimensions = [dimensions];\n  }\n\n  return dimensions;\n}\n/**\n * Data iteration\n * @param {string|Array.<string>}\n * @param {Function} cb\n * @param {boolean} [stack=false]\n * @param {*} [context=this]\n *\n * @example\n *  list.each('x', function (x, idx) {});\n *  list.each(['x', 'y'], function (x, y, idx) {});\n *  list.each(function (idx) {})\n */\n\n\nlistProto.each = function (dims, cb, stack, context) {\n  if (typeof dims === 'function') {\n    context = stack;\n    stack = cb;\n    cb = dims;\n    dims = [];\n  }\n\n  dims = zrUtil.map(normalizeDimensions(dims), this.getDimension, this);\n  var value = [];\n  var dimSize = dims.length;\n  var indices = this.indices;\n  context = context || this;\n\n  for (var i = 0; i < indices.length; i++) {\n    // Simple optimization\n    switch (dimSize) {\n      case 0:\n        cb.call(context, i);\n        break;\n\n      case 1:\n        cb.call(context, this.get(dims[0], i, stack), i);\n        break;\n\n      case 2:\n        cb.call(context, this.get(dims[0], i, stack), this.get(dims[1], i, stack), i);\n        break;\n\n      default:\n        for (var k = 0; k < dimSize; k++) {\n          value[k] = this.get(dims[k], i, stack);\n        } // Index\n\n\n        value[k] = i;\n        cb.apply(context, value);\n    }\n  }\n};\n/**\n * Data filter\n * @param {string|Array.<string>}\n * @param {Function} cb\n * @param {boolean} [stack=false]\n * @param {*} [context=this]\n */\n\n\nlistProto.filterSelf = function (dimensions, cb, stack, context) {\n  if (typeof dimensions === 'function') {\n    context = stack;\n    stack = cb;\n    cb = dimensions;\n    dimensions = [];\n  }\n\n  dimensions = zrUtil.map(normalizeDimensions(dimensions), this.getDimension, this);\n  var newIndices = [];\n  var value = [];\n  var dimSize = dimensions.length;\n  var indices = this.indices;\n  context = context || this;\n\n  for (var i = 0; i < indices.length; i++) {\n    var keep; // Simple optimization\n\n    if (!dimSize) {\n      keep = cb.call(context, i);\n    } else if (dimSize === 1) {\n      keep = cb.call(context, this.get(dimensions[0], i, stack), i);\n    } else {\n      for (var k = 0; k < dimSize; k++) {\n        value[k] = this.get(dimensions[k], i, stack);\n      }\n\n      value[k] = i;\n      keep = cb.apply(context, value);\n    }\n\n    if (keep) {\n      newIndices.push(indices[i]);\n    }\n  }\n\n  this.indices = newIndices; // Reset data extent\n\n  this._extent = {};\n  return this;\n};\n/**\n * Data mapping to a plain array\n * @param {string|Array.<string>} [dimensions]\n * @param {Function} cb\n * @param {boolean} [stack=false]\n * @param {*} [context=this]\n * @return {Array}\n */\n\n\nlistProto.mapArray = function (dimensions, cb, stack, context) {\n  if (typeof dimensions === 'function') {\n    context = stack;\n    stack = cb;\n    cb = dimensions;\n    dimensions = [];\n  }\n\n  var result = [];\n  this.each(dimensions, function () {\n    result.push(cb && cb.apply(this, arguments));\n  }, stack, context);\n  return result;\n};\n\nfunction cloneListForMapAndSample(original, excludeDimensions) {\n  var allDimensions = original.dimensions;\n  var list = new List(zrUtil.map(allDimensions, original.getDimensionInfo, original), original.hostModel); // FIXME If needs stackedOn, value may already been stacked\n\n  transferProperties(list, original);\n  var storage = list._storage = {};\n  var originalStorage = original._storage; // Init storage\n\n  for (var i = 0; i < allDimensions.length; i++) {\n    var dim = allDimensions[i];\n    var dimStore = originalStorage[dim];\n\n    if (zrUtil.indexOf(excludeDimensions, dim) >= 0) {\n      storage[dim] = new dimStore.constructor(originalStorage[dim].length);\n    } else {\n      // Direct reference for other dimensions\n      storage[dim] = originalStorage[dim];\n    }\n  }\n\n  return list;\n}\n/**\n * Data mapping to a new List with given dimensions\n * @param {string|Array.<string>} dimensions\n * @param {Function} cb\n * @param {boolean} [stack=false]\n * @param {*} [context=this]\n * @return {Array}\n */\n\n\nlistProto.map = function (dimensions, cb, stack, context) {\n  dimensions = zrUtil.map(normalizeDimensions(dimensions), this.getDimension, this);\n  var list = cloneListForMapAndSample(this, dimensions); // Following properties are all immutable.\n  // So we can reference to the same value\n\n  var indices = list.indices = this.indices;\n  var storage = list._storage;\n  var tmpRetValue = [];\n  this.each(dimensions, function () {\n    var idx = arguments[arguments.length - 1];\n    var retValue = cb && cb.apply(this, arguments);\n\n    if (retValue != null) {\n      // a number\n      if (typeof retValue === 'number') {\n        tmpRetValue[0] = retValue;\n        retValue = tmpRetValue;\n      }\n\n      for (var i = 0; i < retValue.length; i++) {\n        var dim = dimensions[i];\n        var dimStore = storage[dim];\n        var rawIdx = indices[idx];\n\n        if (dimStore) {\n          dimStore[rawIdx] = retValue[i];\n        }\n      }\n    }\n  }, stack, context);\n  return list;\n};\n/**\n * Large data down sampling on given dimension\n * @param {string} dimension\n * @param {number} rate\n * @param {Function} sampleValue\n * @param {Function} sampleIndex Sample index for name and id\n */\n\n\nlistProto.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n  var list = cloneListForMapAndSample(this, [dimension]);\n  var storage = this._storage;\n  var targetStorage = list._storage;\n  var originalIndices = this.indices;\n  var indices = list.indices = [];\n  var frameValues = [];\n  var frameIndices = [];\n  var frameSize = Math.floor(1 / rate);\n  var dimStore = targetStorage[dimension];\n  var len = this.count(); // Copy data from original data\n\n  for (var i = 0; i < storage[dimension].length; i++) {\n    targetStorage[dimension][i] = storage[dimension][i];\n  }\n\n  for (var i = 0; i < len; i += frameSize) {\n    // Last frame\n    if (frameSize > len - i) {\n      frameSize = len - i;\n      frameValues.length = frameSize;\n    }\n\n    for (var k = 0; k < frameSize; k++) {\n      var idx = originalIndices[i + k];\n      frameValues[k] = dimStore[idx];\n      frameIndices[k] = idx;\n    }\n\n    var value = sampleValue(frameValues);\n    var idx = frameIndices[sampleIndex(frameValues, value) || 0]; // Only write value on the filtered data\n\n    dimStore[idx] = value;\n    indices.push(idx);\n  }\n\n  return list;\n};\n/**\n * Get model of one data item.\n *\n * @param {number} idx\n */\n// FIXME Model proxy ?\n\n\nlistProto.getItemModel = function (idx) {\n  var hostModel = this.hostModel;\n  idx = this.indices[idx];\n  return new Model(this._rawData.getItem(idx), hostModel, hostModel && hostModel.ecModel);\n};\n/**\n * Create a data differ\n * @param {module:echarts/data/List} otherList\n * @return {module:echarts/data/DataDiffer}\n */\n\n\nlistProto.diff = function (otherList) {\n  var idList = this._idList;\n  var otherIdList = otherList && otherList._idList;\n  var val; // Use prefix to avoid index to be the same as otherIdList[idx],\n  // which will cause weird udpate animation.\n\n  var prefix = 'e\\0\\0';\n  return new DataDiffer(otherList ? otherList.indices : [], this.indices, function (idx) {\n    return (val = otherIdList[idx]) != null ? val : prefix + idx;\n  }, function (idx) {\n    return (val = idList[idx]) != null ? val : prefix + idx;\n  });\n};\n/**\n * Get visual property.\n * @param {string} key\n */\n\n\nlistProto.getVisual = function (key) {\n  var visual = this._visual;\n  return visual && visual[key];\n};\n/**\n * Set visual property\n * @param {string|Object} key\n * @param {*} [value]\n *\n * @example\n *  setVisual('color', color);\n *  setVisual({\n *      'color': color\n *  });\n */\n\n\nlistProto.setVisual = function (key, val) {\n  if (isObject(key)) {\n    for (var name in key) {\n      if (key.hasOwnProperty(name)) {\n        this.setVisual(name, key[name]);\n      }\n    }\n\n    return;\n  }\n\n  this._visual = this._visual || {};\n  this._visual[key] = val;\n};\n/**\n * Set layout property.\n * @param {string|Object} key\n * @param {*} [val]\n */\n\n\nlistProto.setLayout = function (key, val) {\n  if (isObject(key)) {\n    for (var name in key) {\n      if (key.hasOwnProperty(name)) {\n        this.setLayout(name, key[name]);\n      }\n    }\n\n    return;\n  }\n\n  this._layout[key] = val;\n};\n/**\n * Get layout property.\n * @param  {string} key.\n * @return {*}\n */\n\n\nlistProto.getLayout = function (key) {\n  return this._layout[key];\n};\n/**\n * Get layout of single data item\n * @param {number} idx\n */\n\n\nlistProto.getItemLayout = function (idx) {\n  return this._itemLayouts[idx];\n};\n/**\n * Set layout of single data item\n * @param {number} idx\n * @param {Object} layout\n * @param {boolean=} [merge=false]\n */\n\n\nlistProto.setItemLayout = function (idx, layout, merge) {\n  this._itemLayouts[idx] = merge ? zrUtil.extend(this._itemLayouts[idx] || {}, layout) : layout;\n};\n/**\n * Clear all layout of single data item\n */\n\n\nlistProto.clearItemLayouts = function () {\n  this._itemLayouts.length = 0;\n};\n/**\n * Get visual property of single data item\n * @param {number} idx\n * @param {string} key\n * @param {boolean} [ignoreParent=false]\n */\n\n\nlistProto.getItemVisual = function (idx, key, ignoreParent) {\n  var itemVisual = this._itemVisuals[idx];\n  var val = itemVisual && itemVisual[key];\n\n  if (val == null && !ignoreParent) {\n    // Use global visual property\n    return this.getVisual(key);\n  }\n\n  return val;\n};\n/**\n * Set visual property of single data item\n *\n * @param {number} idx\n * @param {string|Object} key\n * @param {*} [value]\n *\n * @example\n *  setItemVisual(0, 'color', color);\n *  setItemVisual(0, {\n *      'color': color\n *  });\n */\n\n\nlistProto.setItemVisual = function (idx, key, value) {\n  var itemVisual = this._itemVisuals[idx] || {};\n  this._itemVisuals[idx] = itemVisual;\n\n  if (isObject(key)) {\n    for (var name in key) {\n      if (key.hasOwnProperty(name)) {\n        itemVisual[name] = key[name];\n      }\n    }\n\n    return;\n  }\n\n  itemVisual[key] = value;\n};\n/**\n * Clear itemVisuals and list visual.\n */\n\n\nlistProto.clearAllVisual = function () {\n  this._visual = {};\n  this._itemVisuals = [];\n};\n\nvar setItemDataAndSeriesIndex = function (child) {\n  child.seriesIndex = this.seriesIndex;\n  child.dataIndex = this.dataIndex;\n  child.dataType = this.dataType;\n};\n/**\n * Set graphic element relative to data. It can be set as null\n * @param {number} idx\n * @param {module:zrender/Element} [el]\n */\n\n\nlistProto.setItemGraphicEl = function (idx, el) {\n  var hostModel = this.hostModel;\n\n  if (el) {\n    // Add data index and series index for indexing the data by element\n    // Useful in tooltip\n    el.dataIndex = idx;\n    el.dataType = this.dataType;\n    el.seriesIndex = hostModel && hostModel.seriesIndex;\n\n    if (el.type === 'group') {\n      el.traverse(setItemDataAndSeriesIndex, el);\n    }\n  }\n\n  this._graphicEls[idx] = el;\n};\n/**\n * @param {number} idx\n * @return {module:zrender/Element}\n */\n\n\nlistProto.getItemGraphicEl = function (idx) {\n  return this._graphicEls[idx];\n};\n/**\n * @param {Function} cb\n * @param {*} context\n */\n\n\nlistProto.eachItemGraphicEl = function (cb, context) {\n  zrUtil.each(this._graphicEls, function (el, idx) {\n    if (el) {\n      cb && cb.call(context, el, idx);\n    }\n  });\n};\n/**\n * Shallow clone a new list except visual and layout properties, and graph elements.\n * New list only change the indices.\n */\n\n\nlistProto.cloneShallow = function () {\n  var dimensionInfoList = zrUtil.map(this.dimensions, this.getDimensionInfo, this);\n  var list = new List(dimensionInfoList, this.hostModel); // FIXME\n\n  list._storage = this._storage;\n  transferProperties(list, this); // Clone will not change the data extent and indices\n\n  list.indices = this.indices.slice();\n\n  if (this._extent) {\n    list._extent = zrUtil.extend({}, this._extent);\n  }\n\n  return list;\n};\n/**\n * Wrap some method to add more feature\n * @param {string} methodName\n * @param {Function} injectFunction\n */\n\n\nlistProto.wrapMethod = function (methodName, injectFunction) {\n  var originalMethod = this[methodName];\n\n  if (typeof originalMethod !== 'function') {\n    return;\n  }\n\n  this.__wrappedMethods = this.__wrappedMethods || [];\n\n  this.__wrappedMethods.push(methodName);\n\n  this[methodName] = function () {\n    var res = originalMethod.apply(this, arguments);\n    return injectFunction.apply(this, [res].concat(zrUtil.slice(arguments)));\n  };\n}; // Methods that create a new list based on this list should be listed here.\n// Notice that those method should `RETURN` the new list.\n\n\nlistProto.TRANSFERABLE_METHODS = ['cloneShallow', 'downSample', 'map']; // Methods that change indices of this list should be listed here.\n\nlistProto.CHANGABLE_METHODS = ['filterSelf'];\nvar _default = List;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../model/Model\");\n\nvar List = require(\"./List\");\n\nvar linkList = require(\"./helper/linkList\");\n\nvar completeDimensions = require(\"./helper/completeDimensions\");\n\n/**\n * Tree data structure\n *\n * @module echarts/data/Tree\n */\n\n/**\n * @constructor module:echarts/data/Tree~TreeNode\n * @param {string} name\n * @param {module:echarts/data/Tree} hostTree\n */\nvar TreeNode = function (name, hostTree) {\n  /**\n   * @type {string}\n   */\n  this.name = name || '';\n  /**\n   * Depth of node\n   *\n   * @type {number}\n   * @readOnly\n   */\n\n  this.depth = 0;\n  /**\n   * Height of the subtree rooted at this node.\n   * @type {number}\n   * @readOnly\n   */\n\n  this.height = 0;\n  /**\n   * @type {module:echarts/data/Tree~TreeNode}\n   * @readOnly\n   */\n\n  this.parentNode = null;\n  /**\n   * Reference to list item.\n   * Do not persistent dataIndex outside,\n   * besause it may be changed by list.\n   * If dataIndex -1,\n   * this node is logical deleted (filtered) in list.\n   *\n   * @type {Object}\n   * @readOnly\n   */\n\n  this.dataIndex = -1;\n  /**\n   * @type {Array.<module:echarts/data/Tree~TreeNode>}\n   * @readOnly\n   */\n\n  this.children = [];\n  /**\n   * @type {Array.<module:echarts/data/Tree~TreeNode>}\n   * @pubilc\n   */\n\n  this.viewChildren = [];\n  /**\n   * @type {moduel:echarts/data/Tree}\n   * @readOnly\n   */\n\n  this.hostTree = hostTree;\n};\n\nTreeNode.prototype = {\n  constructor: TreeNode,\n\n  /**\n   * The node is removed.\n   * @return {boolean} is removed.\n   */\n  isRemoved: function () {\n    return this.dataIndex < 0;\n  },\n\n  /**\n   * Travel this subtree (include this node).\n   * Usage:\n   *    node.eachNode(function () { ... }); // preorder\n   *    node.eachNode('preorder', function () { ... }); // preorder\n   *    node.eachNode('postorder', function () { ... }); // postorder\n   *    node.eachNode(\n   *        {order: 'postorder', attr: 'viewChildren'},\n   *        function () { ... }\n   *    ); // postorder\n   *\n   * @param {(Object|string)} options If string, means order.\n   * @param {string=} options.order 'preorder' or 'postorder'\n   * @param {string=} options.attr 'children' or 'viewChildren'\n   * @param {Function} cb If in preorder and return false,\n   *                      its subtree will not be visited.\n   * @param {Object} [context]\n   */\n  eachNode: function (options, cb, context) {\n    if (typeof options === 'function') {\n      context = cb;\n      cb = options;\n      options = null;\n    }\n\n    options = options || {};\n\n    if (zrUtil.isString(options)) {\n      options = {\n        order: options\n      };\n    }\n\n    var order = options.order || 'preorder';\n    var children = this[options.attr || 'children'];\n    var suppressVisitSub;\n    order === 'preorder' && (suppressVisitSub = cb.call(context, this));\n\n    for (var i = 0; !suppressVisitSub && i < children.length; i++) {\n      children[i].eachNode(options, cb, context);\n    }\n\n    order === 'postorder' && cb.call(context, this);\n  },\n\n  /**\n   * Update depth and height of this subtree.\n   *\n   * @param  {number} depth\n   */\n  updateDepthAndHeight: function (depth) {\n    var height = 0;\n    this.depth = depth;\n\n    for (var i = 0; i < this.children.length; i++) {\n      var child = this.children[i];\n      child.updateDepthAndHeight(depth + 1);\n\n      if (child.height > height) {\n        height = child.height;\n      }\n    }\n\n    this.height = height + 1;\n  },\n\n  /**\n   * @param  {string} id\n   * @return {module:echarts/data/Tree~TreeNode}\n   */\n  getNodeById: function (id) {\n    if (this.getId() === id) {\n      return this;\n    }\n\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].getNodeById(id);\n\n      if (res) {\n        return res;\n      }\n    }\n  },\n\n  /**\n   * @param {module:echarts/data/Tree~TreeNode} node\n   * @return {boolean}\n   */\n  contains: function (node) {\n    if (node === this) {\n      return true;\n    }\n\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].contains(node);\n\n      if (res) {\n        return res;\n      }\n    }\n  },\n\n  /**\n   * @param {boolean} includeSelf Default false.\n   * @return {Array.<module:echarts/data/Tree~TreeNode>} order: [root, child, grandchild, ...]\n   */\n  getAncestors: function (includeSelf) {\n    var ancestors = [];\n    var node = includeSelf ? this : this.parentNode;\n\n    while (node) {\n      ancestors.push(node);\n      node = node.parentNode;\n    }\n\n    ancestors.reverse();\n    return ancestors;\n  },\n\n  /**\n   * @param {string|Array=} [dimension='value'] Default 'value'. can be 0, 1, 2, 3\n   * @return {number} Value.\n   */\n  getValue: function (dimension) {\n    var data = this.hostTree.data;\n    return data.get(data.getDimension(dimension || 'value'), this.dataIndex);\n  },\n\n  /**\n   * @param {Object} layout\n   * @param {boolean=} [merge=false]\n   */\n  setLayout: function (layout, merge) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemLayout(this.dataIndex, layout, merge);\n  },\n\n  /**\n   * @return {Object} layout\n   */\n  getLayout: function () {\n    return this.hostTree.data.getItemLayout(this.dataIndex);\n  },\n\n  /**\n   * @param {string} [path]\n   * @return {module:echarts/model/Model}\n   */\n  getModel: function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var hostTree = this.hostTree;\n    var itemModel = hostTree.data.getItemModel(this.dataIndex);\n    var levelModel = this.getLevelModel();\n    var leavesModel;\n\n    if (!levelModel && (this.children.length === 0 || this.children.length !== 0 && this.isExpand === false)) {\n      leavesModel = this.getLeavesModel();\n    }\n\n    return itemModel.getModel(path, (levelModel || leavesModel || hostTree.hostModel).getModel(path));\n  },\n\n  /**\n   * @return {module:echarts/model/Model}\n   */\n  getLevelModel: function () {\n    return (this.hostTree.levelModels || [])[this.depth];\n  },\n\n  /**\n   * @return {module:echarts/model/Model}\n   */\n  getLeavesModel: function () {\n    return this.hostTree.leavesModel;\n  },\n\n  /**\n   * @example\n   *  setItemVisual('color', color);\n   *  setItemVisual({\n   *      'color': color\n   *  });\n   */\n  setVisual: function (key, value) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemVisual(this.dataIndex, key, value);\n  },\n\n  /**\n   * Get item visual\n   */\n  getVisual: function (key, ignoreParent) {\n    return this.hostTree.data.getItemVisual(this.dataIndex, key, ignoreParent);\n  },\n\n  /**\n   * @public\n   * @return {number}\n   */\n  getRawIndex: function () {\n    return this.hostTree.data.getRawIndex(this.dataIndex);\n  },\n\n  /**\n   * @public\n   * @return {string}\n   */\n  getId: function () {\n    return this.hostTree.data.getId(this.dataIndex);\n  }\n};\n/**\n * @constructor\n * @alias module:echarts/data/Tree\n * @param {module:echarts/model/Model} hostModel\n * @param {Array.<Object>} levelOptions\n * @param {Object} leavesOption\n */\n\nfunction Tree(hostModel, levelOptions, leavesOption) {\n  /**\n   * @type {module:echarts/data/Tree~TreeNode}\n   * @readOnly\n   */\n  this.root;\n  /**\n   * @type {module:echarts/data/List}\n   * @readOnly\n   */\n\n  this.data;\n  /**\n   * Index of each item is the same as the raw index of coresponding list item.\n   * @private\n   * @type {Array.<module:echarts/data/Tree~TreeNode}\n   */\n\n  this._nodes = [];\n  /**\n   * @private\n   * @readOnly\n   * @type {module:echarts/model/Model}\n   */\n\n  this.hostModel = hostModel;\n  /**\n   * @private\n   * @readOnly\n   * @type {Array.<module:echarts/model/Model}\n   */\n\n  this.levelModels = zrUtil.map(levelOptions || [], function (levelDefine) {\n    return new Model(levelDefine, hostModel, hostModel.ecModel);\n  });\n  this.leavesModel = new Model(leavesOption || {}, hostModel, hostModel.ecModel);\n}\n\nTree.prototype = {\n  constructor: Tree,\n  type: 'tree',\n\n  /**\n   * Travel this subtree (include this node).\n   * Usage:\n   *    node.eachNode(function () { ... }); // preorder\n   *    node.eachNode('preorder', function () { ... }); // preorder\n   *    node.eachNode('postorder', function () { ... }); // postorder\n   *    node.eachNode(\n   *        {order: 'postorder', attr: 'viewChildren'},\n   *        function () { ... }\n   *    ); // postorder\n   *\n   * @param {(Object|string)} options If string, means order.\n   * @param {string=} options.order 'preorder' or 'postorder'\n   * @param {string=} options.attr 'children' or 'viewChildren'\n   * @param {Function} cb\n   * @param {Object}   [context]\n   */\n  eachNode: function (options, cb, context) {\n    this.root.eachNode(options, cb, context);\n  },\n\n  /**\n   * @param {number} dataIndex\n   * @return {module:echarts/data/Tree~TreeNode}\n   */\n  getNodeByDataIndex: function (dataIndex) {\n    var rawIndex = this.data.getRawIndex(dataIndex);\n    return this._nodes[rawIndex];\n  },\n\n  /**\n   * @param {string} name\n   * @return {module:echarts/data/Tree~TreeNode}\n   */\n  getNodeByName: function (name) {\n    return this.root.getNodeByName(name);\n  },\n\n  /**\n   * Update item available by list,\n   * when list has been performed options like 'filterSelf' or 'map'.\n   */\n  update: function () {\n    var data = this.data;\n    var nodes = this._nodes;\n\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n  },\n\n  /**\n   * Clear all layouts\n   */\n  clearLayouts: function () {\n    this.data.clearItemLayouts();\n  }\n};\n/**\n * data node format:\n * {\n *     name: ...\n *     value: ...\n *     children: [\n *         {\n *             name: ...\n *             value: ...\n *             children: ...\n *         },\n *         ...\n *     ]\n * }\n *\n * @static\n * @param {Object} dataRoot Root node.\n * @param {module:echarts/model/Model} hostModel\n * @param {Object} treeOptions\n * @param {Array.<Object>} treeOptions.levels\n * @param {Array.<Object>} treeOptions.leaves\n * @return module:echarts/data/Tree\n */\n\nTree.createTree = function (dataRoot, hostModel, treeOptions) {\n  var tree = new Tree(hostModel, treeOptions.levels, treeOptions.leaves);\n  var listData = [];\n  var dimMax = 1;\n  buildHierarchy(dataRoot);\n\n  function buildHierarchy(dataNode, parentNode) {\n    var value = dataNode.value;\n    dimMax = Math.max(dimMax, zrUtil.isArray(value) ? value.length : 1);\n    listData.push(dataNode);\n    var node = new TreeNode(dataNode.name, tree);\n    parentNode ? addChild(node, parentNode) : tree.root = node;\n\n    tree._nodes.push(node);\n\n    var children = dataNode.children;\n\n    if (children) {\n      for (var i = 0; i < children.length; i++) {\n        buildHierarchy(children[i], node);\n      }\n    }\n  }\n\n  tree.root.updateDepthAndHeight(0);\n  var dimensions = completeDimensions([{\n    name: 'value'\n  }], listData, {\n    dimCount: dimMax\n  });\n  var list = new List(dimensions, hostModel);\n  list.initData(listData);\n  linkList({\n    mainData: list,\n    struct: tree,\n    structAttr: 'tree'\n  });\n  tree.update();\n  return tree;\n};\n/**\n * It is needed to consider the mess of 'list', 'hostModel' when creating a TreeNote,\n * so this function is not ready and not necessary to be public.\n *\n * @param {(module:echarts/data/Tree~TreeNode|Object)} child\n */\n\n\nfunction addChild(child, node) {\n  var children = node.children;\n\n  if (child.parentNode === node) {\n    return;\n  }\n\n  children.push(child);\n  child.parentNode = node;\n}\n\nvar _default = Tree;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar _model = require(\"../../util/model\");\n\nvar normalizeToArray = _model.normalizeToArray;\n\n/**\n * Complete dimensions by data (guess dimension).\n */\nvar each = zrUtil.each;\nvar isString = zrUtil.isString;\nvar defaults = zrUtil.defaults;\nvar OTHER_DIMS = {\n  tooltip: 1,\n  label: 1,\n  itemName: 1\n};\n/**\n * Complete the dimensions array, by user defined `dimension` and `encode`,\n * and guessing from the data structure.\n * If no 'value' dimension specified, the first no-named dimension will be\n * named as 'value'.\n *\n * @param {Array.<string>} sysDims Necessary dimensions, like ['x', 'y'], which\n *      provides not only dim template, but also default order.\n *      `name` of each item provides default coord name.\n *      [{dimsDef: []}, ...] can be specified to give names.\n * @param {Array} data Data list. [[1, 2, 3], [2, 3, 4]].\n * @param {Object} [opt]\n * @param {Array.<Object|string>} [opt.dimsDef] option.series.dimensions User defined dimensions\n *      For example: ['asdf', {name, type}, ...].\n * @param {Object} [opt.encodeDef] option.series.encode {x: 2, y: [3, 1], tooltip: [1, 2], label: 3}\n * @param {string} [opt.extraPrefix] Prefix of name when filling the left dimensions.\n * @param {string} [opt.extraFromZero] If specified, extra dim names will be:\n *                      extraPrefix + 0, extraPrefix + extraBaseIndex + 1 ...\n *                      If not specified, extra dim names will be:\n *                      extraPrefix, extraPrefix + 0, extraPrefix + 1 ...\n * @param {number} [opt.dimCount] If not specified, guess by the first data item.\n * @return {Array.<Object>} [{\n *      name: string mandatory,\n *      coordDim: string mandatory,\n *      coordDimIndex: number mandatory,\n *      type: string optional,\n *      tooltipName: string optional,\n *      otherDims: {\n *          tooltip: number optional,\n *          label: number optional\n *      },\n *      isExtraCoord: boolean true or undefined.\n *      other props ...\n * }]\n */\n\nfunction completeDimensions(sysDims, data, opt) {\n  data = data || [];\n  opt = opt || {};\n  sysDims = (sysDims || []).slice();\n  var dimsDef = (opt.dimsDef || []).slice();\n  var encodeDef = zrUtil.createHashMap(opt.encodeDef);\n  var dataDimNameMap = zrUtil.createHashMap();\n  var coordDimNameMap = zrUtil.createHashMap(); // var valueCandidate;\n\n  var result = [];\n  var dimCount = opt.dimCount;\n\n  if (dimCount == null) {\n    var value0 = retrieveValue(data[0]);\n    dimCount = Math.max(zrUtil.isArray(value0) && value0.length || 1, sysDims.length, dimsDef.length);\n    each(sysDims, function (sysDimItem) {\n      var sysDimItemDimsDef = sysDimItem.dimsDef;\n      sysDimItemDimsDef && (dimCount = Math.max(dimCount, sysDimItemDimsDef.length));\n    });\n  } // Apply user defined dims (`name` and `type`) and init result.\n\n\n  for (var i = 0; i < dimCount; i++) {\n    var dimDefItem = isString(dimsDef[i]) ? {\n      name: dimsDef[i]\n    } : dimsDef[i] || {};\n    var userDimName = dimDefItem.name;\n    var resultItem = result[i] = {\n      otherDims: {}\n    }; // Name will be applied later for avoiding duplication.\n\n    if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\n      // Only if `series.dimensions` is defined in option, tooltipName\n      // will be set, and dimension will be diplayed vertically in\n      // tooltip by default.\n      resultItem.name = resultItem.tooltipName = userDimName;\n      dataDimNameMap.set(userDimName, i);\n    }\n\n    dimDefItem.type != null && (resultItem.type = dimDefItem.type);\n  } // Set `coordDim` and `coordDimIndex` by `encodeDef` and normalize `encodeDef`.\n\n\n  encodeDef.each(function (dataDims, coordDim) {\n    dataDims = encodeDef.set(coordDim, normalizeToArray(dataDims).slice());\n    each(dataDims, function (resultDimIdx, coordDimIndex) {\n      // The input resultDimIdx can be dim name or index.\n      isString(resultDimIdx) && (resultDimIdx = dataDimNameMap.get(resultDimIdx));\n\n      if (resultDimIdx != null && resultDimIdx < dimCount) {\n        dataDims[coordDimIndex] = resultDimIdx;\n        applyDim(result[resultDimIdx], coordDim, coordDimIndex);\n      }\n    });\n  }); // Apply templetes and default order from `sysDims`.\n\n  var availDimIdx = 0;\n  each(sysDims, function (sysDimItem, sysDimIndex) {\n    var coordDim;\n    var sysDimItem;\n    var sysDimItemDimsDef;\n    var sysDimItemOtherDims;\n\n    if (isString(sysDimItem)) {\n      coordDim = sysDimItem;\n      sysDimItem = {};\n    } else {\n      coordDim = sysDimItem.name;\n      sysDimItem = zrUtil.clone(sysDimItem); // `coordDimIndex` should not be set directly.\n\n      sysDimItemDimsDef = sysDimItem.dimsDef;\n      sysDimItemOtherDims = sysDimItem.otherDims;\n      sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;\n    }\n\n    var dataDims = normalizeToArray(encodeDef.get(coordDim)); // dimensions provides default dim sequences.\n\n    if (!dataDims.length) {\n      for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\n        while (availDimIdx < result.length && result[availDimIdx].coordDim != null) {\n          availDimIdx++;\n        }\n\n        availDimIdx < result.length && dataDims.push(availDimIdx++);\n      }\n    } // Apply templates.\n\n\n    each(dataDims, function (resultDimIdx, coordDimIndex) {\n      var resultItem = result[resultDimIdx];\n      applyDim(defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\n\n      if (resultItem.name == null && sysDimItemDimsDef) {\n        resultItem.name = resultItem.tooltipName = sysDimItemDimsDef[coordDimIndex];\n      }\n\n      sysDimItemOtherDims && defaults(resultItem.otherDims, sysDimItemOtherDims);\n    });\n  }); // Make sure the first extra dim is 'value'.\n\n  var extra = opt.extraPrefix || 'value'; // Set dim `name` and other `coordDim` and other props.\n\n  for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\n    var resultItem = result[resultDimIdx] = result[resultDimIdx] || {};\n    var coordDim = resultItem.coordDim;\n    coordDim == null && (resultItem.coordDim = genName(extra, coordDimNameMap, opt.extraFromZero), resultItem.coordDimIndex = 0, resultItem.isExtraCoord = true);\n    resultItem.name == null && (resultItem.name = genName(resultItem.coordDim, dataDimNameMap));\n    resultItem.type == null && guessOrdinal(data, resultDimIdx) && (resultItem.type = 'ordinal');\n  }\n\n  return result;\n\n  function applyDim(resultItem, coordDim, coordDimIndex) {\n    if (OTHER_DIMS[coordDim]) {\n      resultItem.otherDims[coordDim] = coordDimIndex;\n    } else {\n      resultItem.coordDim = coordDim;\n      resultItem.coordDimIndex = coordDimIndex;\n      coordDimNameMap.set(coordDim, true);\n    }\n  }\n\n  function genName(name, map, fromZero) {\n    if (fromZero || map.get(name) != null) {\n      var i = 0;\n\n      while (map.get(name + i) != null) {\n        i++;\n      }\n\n      name += i;\n    }\n\n    map.set(name, true);\n    return name;\n  }\n} // The rule should not be complex, otherwise user might not\n// be able to known where the data is wrong.\n\n\nvar guessOrdinal = completeDimensions.guessOrdinal = function (data, dimIndex) {\n  for (var i = 0, len = data.length; i < len; i++) {\n    var value = retrieveValue(data[i]);\n\n    if (!zrUtil.isArray(value)) {\n      return false;\n    }\n\n    var value = value[dimIndex]; // Consider usage convenience, '1', '2' will be treated as \"number\".\n    // `isFinit('')` get `true`.\n\n    if (value != null && isFinite(value) && value !== '') {\n      return false;\n    } else if (isString(value) && value !== '-') {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nfunction retrieveValue(o) {\n  return zrUtil.isArray(o) ? o : zrUtil.isObject(o) ? o.value : o;\n}\n\nvar _default = completeDimensions;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\n/**\n * Link lists and struct (graph or tree)\n */\nvar each = zrUtil.each;\nvar DATAS = '\\0__link_datas';\nvar MAIN_DATA = '\\0__link_mainData'; // Caution:\n// In most case, either list or its shallow clones (see list.cloneShallow)\n// is active in echarts process. So considering heap memory consumption,\n// we do not clone tree or graph, but share them among list and its shallow clones.\n// But in some rare case, we have to keep old list (like do animation in chart). So\n// please take care that both the old list and the new list share the same tree/graph.\n\n/**\n * @param {Object} opt\n * @param {module:echarts/data/List} opt.mainData\n * @param {Object} [opt.struct] For example, instance of Graph or Tree.\n * @param {string} [opt.structAttr] designation: list[structAttr] = struct;\n * @param {Object} [opt.datas] {dataType: data},\n *                 like: {node: nodeList, edge: edgeList}.\n *                 Should contain mainData.\n * @param {Object} [opt.datasAttr] {dataType: attr},\n *                 designation: struct[datasAttr[dataType]] = list;\n */\n\nfunction linkList(opt) {\n  var mainData = opt.mainData;\n  var datas = opt.datas;\n\n  if (!datas) {\n    datas = {\n      main: mainData\n    };\n    opt.datasAttr = {\n      main: 'data'\n    };\n  }\n\n  opt.datas = opt.mainData = null;\n  linkAll(mainData, datas, opt); // Porxy data original methods.\n\n  each(datas, function (data) {\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\n      data.wrapMethod(methodName, zrUtil.curry(transferInjection, opt));\n    });\n  }); // Beyond transfer, additional features should be added to `cloneShallow`.\n\n  mainData.wrapMethod('cloneShallow', zrUtil.curry(cloneShallowInjection, opt)); // Only mainData trigger change, because struct.update may trigger\n  // another changable methods, which may bring about dead lock.\n\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\n    mainData.wrapMethod(methodName, zrUtil.curry(changeInjection, opt));\n  }); // Make sure datas contains mainData.\n\n  zrUtil.assert(datas[mainData.dataType] === mainData);\n}\n\nfunction transferInjection(opt, res) {\n  if (isMainData(this)) {\n    // Transfer datas to new main data.\n    var datas = zrUtil.extend({}, this[DATAS]);\n    datas[this.dataType] = res;\n    linkAll(res, datas, opt);\n  } else {\n    // Modify the reference in main data to point newData.\n    linkSingle(res, this.dataType, this[MAIN_DATA], opt);\n  }\n\n  return res;\n}\n\nfunction changeInjection(opt, res) {\n  opt.struct && opt.struct.update(this);\n  return res;\n}\n\nfunction cloneShallowInjection(opt, res) {\n  // cloneShallow, which brings about some fragilities, may be inappropriate\n  // to be exposed as an API. So for implementation simplicity we can make\n  // the restriction that cloneShallow of not-mainData should not be invoked\n  // outside, but only be invoked here.\n  each(res[DATAS], function (data, dataType) {\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\n  });\n  return res;\n}\n/**\n * Supplement method to List.\n *\n * @public\n * @param {string} [dataType] If not specified, return mainData.\n * @return {module:echarts/data/List}\n */\n\n\nfunction getLinkedData(dataType) {\n  var mainData = this[MAIN_DATA];\n  return dataType == null || mainData == null ? mainData : mainData[DATAS][dataType];\n}\n\nfunction isMainData(data) {\n  return data[MAIN_DATA] === data;\n}\n\nfunction linkAll(mainData, datas, opt) {\n  mainData[DATAS] = {};\n  each(datas, function (data, dataType) {\n    linkSingle(data, dataType, mainData, opt);\n  });\n}\n\nfunction linkSingle(data, dataType, mainData, opt) {\n  mainData[DATAS][dataType] = data;\n  data[MAIN_DATA] = mainData;\n  data.dataType = dataType;\n\n  if (opt.struct) {\n    data[opt.structAttr] = opt.struct;\n    opt.struct[opt.datasAttr[dataType]] = data;\n  } // Supplement method.\n\n\n  data.getLinkedData = getLinkedData;\n}\n\nvar _default = linkList;\nmodule.exports = _default;","var _config = require(\"./config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrender = require(\"zrender/lib/zrender\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar colorTool = require(\"zrender/lib/tool/color\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar timsort = require(\"zrender/lib/core/timsort\");\n\nvar Eventful = require(\"zrender/lib/mixin/Eventful\");\n\nvar GlobalModel = require(\"./model/Global\");\n\nvar ExtensionAPI = require(\"./ExtensionAPI\");\n\nvar CoordinateSystemManager = require(\"./CoordinateSystem\");\n\nvar OptionManager = require(\"./model/OptionManager\");\n\nvar backwardCompat = require(\"./preprocessor/backwardCompat\");\n\nvar ComponentModel = require(\"./model/Component\");\n\nvar SeriesModel = require(\"./model/Series\");\n\nvar ComponentView = require(\"./view/Component\");\n\nvar ChartView = require(\"./view/Chart\");\n\nvar graphic = require(\"./util/graphic\");\n\nvar modelUtil = require(\"./util/model\");\n\nvar _throttle = require(\"./util/throttle\");\n\nvar throttle = _throttle.throttle;\n\nvar seriesColor = require(\"./visual/seriesColor\");\n\nvar loadingDefault = require(\"./loading/default\");\n\n/*!\n * ECharts, a javascript interactive chart library.\n *\n * Copyright (c) 2015, Baidu Inc.\n * All rights reserved.\n *\n * LICENSE\n * https://github.com/ecomfe/echarts/blob/master/LICENSE.txt\n */\nvar each = zrUtil.each;\nvar parseClassType = ComponentModel.parseClassType;\nvar version = '3.8.4';\nvar dependencies = {\n  zrender: '3.7.3'\n};\nvar PRIORITY_PROCESSOR_FILTER = 1000;\nvar PRIORITY_PROCESSOR_STATISTIC = 5000;\nvar PRIORITY_VISUAL_LAYOUT = 1000;\nvar PRIORITY_VISUAL_GLOBAL = 2000;\nvar PRIORITY_VISUAL_CHART = 3000;\nvar PRIORITY_VISUAL_COMPONENT = 4000; // FIXME\n// necessary?\n\nvar PRIORITY_VISUAL_BRUSH = 5000;\nvar PRIORITY = {\n  PROCESSOR: {\n    FILTER: PRIORITY_PROCESSOR_FILTER,\n    STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n  },\n  VISUAL: {\n    LAYOUT: PRIORITY_VISUAL_LAYOUT,\n    GLOBAL: PRIORITY_VISUAL_GLOBAL,\n    CHART: PRIORITY_VISUAL_CHART,\n    COMPONENT: PRIORITY_VISUAL_COMPONENT,\n    BRUSH: PRIORITY_VISUAL_BRUSH\n  }\n}; // Main process have three entries: `setOption`, `dispatchAction` and `resize`,\n// where they must not be invoked nestedly, except the only case: invoke\n// dispatchAction with updateMethod \"none\" in main process.\n// This flag is used to carry out this rule.\n// All events will be triggered out side main process (i.e. when !this[IN_MAIN_PROCESS]).\n\nvar IN_MAIN_PROCESS = '__flagInMainProcess';\nvar HAS_GRADIENT_OR_PATTERN_BG = '__hasGradientOrPatternBg';\nvar OPTION_UPDATED = '__optionUpdated';\nvar ACTION_REG = /^[a-zA-Z0-9_]+$/;\n\nfunction createRegisterEventWithLowercaseName(method) {\n  return function (eventName, handler, context) {\n    // Event name is all lowercase\n    eventName = eventName && eventName.toLowerCase();\n    Eventful.prototype[method].call(this, eventName, handler, context);\n  };\n}\n/**\n * @module echarts~MessageCenter\n */\n\n\nfunction MessageCenter() {\n  Eventful.call(this);\n}\n\nMessageCenter.prototype.on = createRegisterEventWithLowercaseName('on');\nMessageCenter.prototype.off = createRegisterEventWithLowercaseName('off');\nMessageCenter.prototype.one = createRegisterEventWithLowercaseName('one');\nzrUtil.mixin(MessageCenter, Eventful);\n/**\n * @module echarts~ECharts\n */\n\nfunction ECharts(dom, theme, opts) {\n  opts = opts || {}; // Get theme by name\n\n  if (typeof theme === 'string') {\n    theme = themeStorage[theme];\n  }\n  /**\n   * @type {string}\n   */\n\n\n  this.id;\n  /**\n   * Group id\n   * @type {string}\n   */\n\n  this.group;\n  /**\n   * @type {HTMLElement}\n   * @private\n   */\n\n  this._dom = dom;\n  var defaultRenderer = 'canvas';\n\n  /**\n   * @type {module:zrender/ZRender}\n   * @private\n   */\n  var zr = this._zr = zrender.init(dom, {\n    renderer: opts.renderer || defaultRenderer,\n    devicePixelRatio: opts.devicePixelRatio,\n    width: opts.width,\n    height: opts.height\n  });\n  /**\n   * Expect 60 pfs.\n   * @type {Function}\n   * @private\n   */\n\n  this._throttledZrFlush = throttle(zrUtil.bind(zr.flush, zr), 17);\n  var theme = zrUtil.clone(theme);\n  theme && backwardCompat(theme, true);\n  /**\n   * @type {Object}\n   * @private\n   */\n\n  this._theme = theme;\n  /**\n   * @type {Array.<module:echarts/view/Chart>}\n   * @private\n   */\n\n  this._chartsViews = [];\n  /**\n   * @type {Object.<string, module:echarts/view/Chart>}\n   * @private\n   */\n\n  this._chartsMap = {};\n  /**\n   * @type {Array.<module:echarts/view/Component>}\n   * @private\n   */\n\n  this._componentsViews = [];\n  /**\n   * @type {Object.<string, module:echarts/view/Component>}\n   * @private\n   */\n\n  this._componentsMap = {};\n  /**\n   * @type {module:echarts/CoordinateSystem}\n   * @private\n   */\n\n  this._coordSysMgr = new CoordinateSystemManager();\n  /**\n   * @type {module:echarts/ExtensionAPI}\n   * @private\n   */\n\n  this._api = createExtensionAPI(this);\n  Eventful.call(this);\n  /**\n   * @type {module:echarts~MessageCenter}\n   * @private\n   */\n\n  this._messageCenter = new MessageCenter(); // Init mouse events\n\n  this._initEvents(); // In case some people write `window.onresize = chart.resize`\n\n\n  this.resize = zrUtil.bind(this.resize, this); // Can't dispatch action during rendering procedure\n\n  this._pendingActions = []; // Sort on demand\n\n  function prioritySortFunc(a, b) {\n    return a.prio - b.prio;\n  }\n\n  timsort(visualFuncs, prioritySortFunc);\n  timsort(dataProcessorFuncs, prioritySortFunc);\n  zr.animation.on('frame', this._onframe, this); // ECharts instance can be used as value.\n\n  zrUtil.setAsPrimitive(this);\n}\n\nvar echartsProto = ECharts.prototype;\n\nechartsProto._onframe = function () {\n  // Lazy update\n  if (this[OPTION_UPDATED]) {\n    var silent = this[OPTION_UPDATED].silent;\n    this[IN_MAIN_PROCESS] = true;\n    updateMethods.prepareAndUpdate.call(this);\n    this[IN_MAIN_PROCESS] = false;\n    this[OPTION_UPDATED] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  }\n};\n/**\n * @return {HTMLElement}\n */\n\n\nechartsProto.getDom = function () {\n  return this._dom;\n};\n/**\n * @return {module:zrender~ZRender}\n */\n\n\nechartsProto.getZr = function () {\n  return this._zr;\n};\n/**\n * Usage:\n * chart.setOption(option, notMerge, lazyUpdate);\n * chart.setOption(option, {\n *     notMerge: ...,\n *     lazyUpdate: ...,\n *     silent: ...\n * });\n *\n * @param {Object} option\n * @param {Object|boolean} [opts] opts or notMerge.\n * @param {boolean} [opts.notMerge=false]\n * @param {boolean} [opts.lazyUpdate=false] Useful when setOption frequently.\n */\n\n\nechartsProto.setOption = function (option, notMerge, lazyUpdate) {\n  var silent;\n\n  if (zrUtil.isObject(notMerge)) {\n    lazyUpdate = notMerge.lazyUpdate;\n    silent = notMerge.silent;\n    notMerge = notMerge.notMerge;\n  }\n\n  this[IN_MAIN_PROCESS] = true;\n\n  if (!this._model || notMerge) {\n    var optionManager = new OptionManager(this._api);\n    var theme = this._theme;\n    var ecModel = this._model = new GlobalModel(null, null, theme, optionManager);\n    ecModel.init(null, null, theme, optionManager);\n  }\n\n  this._model.setOption(option, optionPreprocessorFuncs);\n\n  if (lazyUpdate) {\n    this[OPTION_UPDATED] = {\n      silent: silent\n    };\n    this[IN_MAIN_PROCESS] = false;\n  } else {\n    updateMethods.prepareAndUpdate.call(this); // Ensure zr refresh sychronously, and then pixel in canvas can be\n    // fetched after `setOption`.\n\n    this._zr.flush();\n\n    this[OPTION_UPDATED] = false;\n    this[IN_MAIN_PROCESS] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  }\n};\n/**\n * @DEPRECATED\n */\n\n\nechartsProto.setTheme = function () {\n  console.log('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\n};\n/**\n * @return {module:echarts/model/Global}\n */\n\n\nechartsProto.getModel = function () {\n  return this._model;\n};\n/**\n * @return {Object}\n */\n\n\nechartsProto.getOption = function () {\n  return this._model && this._model.getOption();\n};\n/**\n * @return {number}\n */\n\n\nechartsProto.getWidth = function () {\n  return this._zr.getWidth();\n};\n/**\n * @return {number}\n */\n\n\nechartsProto.getHeight = function () {\n  return this._zr.getHeight();\n};\n/**\n * @return {number}\n */\n\n\nechartsProto.getDevicePixelRatio = function () {\n  return this._zr.painter.dpr || window.devicePixelRatio || 1;\n};\n/**\n * Get canvas which has all thing rendered\n * @param {Object} opts\n * @param {string} [opts.backgroundColor]\n * @return {string}\n */\n\n\nechartsProto.getRenderedCanvas = function (opts) {\n  if (!env.canvasSupported) {\n    return;\n  }\n\n  opts = opts || {};\n  opts.pixelRatio = opts.pixelRatio || 1;\n  opts.backgroundColor = opts.backgroundColor || this._model.get('backgroundColor');\n  var zr = this._zr;\n  var list = zr.storage.getDisplayList(); // Stop animations\n\n  zrUtil.each(list, function (el) {\n    el.stopAnimation(true);\n  });\n  return zr.painter.getRenderedCanvas(opts);\n};\n/**\n * Get svg data url\n * @return {string}\n */\n\n\nechartsProto.getSvgDataUrl = function () {\n  if (!env.svgSupported) {\n    return;\n  }\n\n  var zr = this._zr;\n  var list = zr.storage.getDisplayList(); // Stop animations\n\n  zrUtil.each(list, function (el) {\n    el.stopAnimation(true);\n  });\n  return zr.painter.pathToSvg();\n};\n/**\n * @return {string}\n * @param {Object} opts\n * @param {string} [opts.type='png']\n * @param {string} [opts.pixelRatio=1]\n * @param {string} [opts.backgroundColor]\n * @param {string} [opts.excludeComponents]\n */\n\n\nechartsProto.getDataURL = function (opts) {\n  opts = opts || {};\n  var excludeComponents = opts.excludeComponents;\n  var ecModel = this._model;\n  var excludesComponentViews = [];\n  var self = this;\n  each(excludeComponents, function (componentType) {\n    ecModel.eachComponent({\n      mainType: componentType\n    }, function (component) {\n      var view = self._componentsMap[component.__viewId];\n\n      if (!view.group.ignore) {\n        excludesComponentViews.push(view);\n        view.group.ignore = true;\n      }\n    });\n  });\n  var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataUrl() : this.getRenderedCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n  each(excludesComponentViews, function (view) {\n    view.group.ignore = false;\n  });\n  return url;\n};\n/**\n * @return {string}\n * @param {Object} opts\n * @param {string} [opts.type='png']\n * @param {string} [opts.pixelRatio=1]\n * @param {string} [opts.backgroundColor]\n */\n\n\nechartsProto.getConnectedDataURL = function (opts) {\n  if (!env.canvasSupported) {\n    return;\n  }\n\n  var groupId = this.group;\n  var mathMin = Math.min;\n  var mathMax = Math.max;\n  var MAX_NUMBER = Infinity;\n\n  if (connectedGroups[groupId]) {\n    var left = MAX_NUMBER;\n    var top = MAX_NUMBER;\n    var right = -MAX_NUMBER;\n    var bottom = -MAX_NUMBER;\n    var canvasList = [];\n    var dpr = opts && opts.pixelRatio || 1;\n    zrUtil.each(instances, function (chart, id) {\n      if (chart.group === groupId) {\n        var canvas = chart.getRenderedCanvas(zrUtil.clone(opts));\n        var boundingRect = chart.getDom().getBoundingClientRect();\n        left = mathMin(boundingRect.left, left);\n        top = mathMin(boundingRect.top, top);\n        right = mathMax(boundingRect.right, right);\n        bottom = mathMax(boundingRect.bottom, bottom);\n        canvasList.push({\n          dom: canvas,\n          left: boundingRect.left,\n          top: boundingRect.top\n        });\n      }\n    });\n    left *= dpr;\n    top *= dpr;\n    right *= dpr;\n    bottom *= dpr;\n    var width = right - left;\n    var height = bottom - top;\n    var targetCanvas = zrUtil.createCanvas();\n    targetCanvas.width = width;\n    targetCanvas.height = height;\n    var zr = zrender.init(targetCanvas);\n    each(canvasList, function (item) {\n      var img = new graphic.Image({\n        style: {\n          x: item.left * dpr - left,\n          y: item.top * dpr - top,\n          image: item.dom\n        }\n      });\n      zr.add(img);\n    });\n    zr.refreshImmediately();\n    return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n  } else {\n    return this.getDataURL(opts);\n  }\n};\n/**\n * Convert from logical coordinate system to pixel coordinate system.\n * See CoordinateSystem#convertToPixel.\n * @param {string|Object} finder\n *        If string, e.g., 'geo', means {geoIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex / seriesId / seriesName,\n *            geoIndex / geoId, geoName,\n *            bmapIndex / bmapId / bmapName,\n *            xAxisIndex / xAxisId / xAxisName,\n *            yAxisIndex / yAxisId / yAxisName,\n *            gridIndex / gridId / gridName,\n *            ... (can be extended)\n *        }\n * @param {Array|number} value\n * @return {Array|number} result\n */\n\n\nechartsProto.convertToPixel = zrUtil.curry(doConvertPixel, 'convertToPixel');\n/**\n * Convert from pixel coordinate system to logical coordinate system.\n * See CoordinateSystem#convertFromPixel.\n * @param {string|Object} finder\n *        If string, e.g., 'geo', means {geoIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex / seriesId / seriesName,\n *            geoIndex / geoId / geoName,\n *            bmapIndex / bmapId / bmapName,\n *            xAxisIndex / xAxisId / xAxisName,\n *            yAxisIndex / yAxisId / yAxisName\n *            gridIndex / gridId / gridName,\n *            ... (can be extended)\n *        }\n * @param {Array|number} value\n * @return {Array|number} result\n */\n\nechartsProto.convertFromPixel = zrUtil.curry(doConvertPixel, 'convertFromPixel');\n\nfunction doConvertPixel(methodName, finder, value) {\n  var ecModel = this._model;\n\n  var coordSysList = this._coordSysMgr.getCoordinateSystems();\n\n  var result;\n  finder = modelUtil.parseFinder(ecModel, finder);\n\n  for (var i = 0; i < coordSysList.length; i++) {\n    var coordSys = coordSysList[i];\n\n    if (coordSys[methodName] && (result = coordSys[methodName](ecModel, finder, value)) != null) {\n      return result;\n    }\n  }\n}\n/**\n * Is the specified coordinate systems or components contain the given pixel point.\n * @param {string|Object} finder\n *        If string, e.g., 'geo', means {geoIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex / seriesId / seriesName,\n *            geoIndex / geoId / geoName,\n *            bmapIndex / bmapId / bmapName,\n *            xAxisIndex / xAxisId / xAxisName,\n *            yAxisIndex / yAxisId / yAxisName,\n *            gridIndex / gridId / gridName,\n *            ... (can be extended)\n *        }\n * @param {Array|number} value\n * @return {boolean} result\n */\n\n\nechartsProto.containPixel = function (finder, value) {\n  var ecModel = this._model;\n  var result;\n  finder = modelUtil.parseFinder(ecModel, finder);\n  zrUtil.each(finder, function (models, key) {\n    key.indexOf('Models') >= 0 && zrUtil.each(models, function (model) {\n      var coordSys = model.coordinateSystem;\n\n      if (coordSys && coordSys.containPoint) {\n        result |= !!coordSys.containPoint(value);\n      } else if (key === 'seriesModels') {\n        var view = this._chartsMap[model.__viewId];\n\n        if (view && view.containPoint) {\n          result |= view.containPoint(value, model);\n        } else {}\n      } else {}\n    }, this);\n  }, this);\n  return !!result;\n};\n/**\n * Get visual from series or data.\n * @param {string|Object} finder\n *        If string, e.g., 'series', means {seriesIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex / seriesId / seriesName,\n *            dataIndex / dataIndexInside\n *        }\n *        If dataIndex is not specified, series visual will be fetched,\n *        but not data item visual.\n *        If all of seriesIndex, seriesId, seriesName are not specified,\n *        visual will be fetched from first series.\n * @param {string} visualType 'color', 'symbol', 'symbolSize'\n */\n\n\nechartsProto.getVisual = function (finder, visualType) {\n  var ecModel = this._model;\n  finder = modelUtil.parseFinder(ecModel, finder, {\n    defaultMainType: 'series'\n  });\n  var seriesModel = finder.seriesModel;\n  var data = seriesModel.getData();\n  var dataIndexInside = finder.hasOwnProperty('dataIndexInside') ? finder.dataIndexInside : finder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(finder.dataIndex) : null;\n  return dataIndexInside != null ? data.getItemVisual(dataIndexInside, visualType) : data.getVisual(visualType);\n};\n/**\n * Get view of corresponding component model\n * @param  {module:echarts/model/Component} componentModel\n * @return {module:echarts/view/Component}\n */\n\n\nechartsProto.getViewOfComponentModel = function (componentModel) {\n  return this._componentsMap[componentModel.__viewId];\n};\n/**\n * Get view of corresponding series model\n * @param  {module:echarts/model/Series} seriesModel\n * @return {module:echarts/view/Chart}\n */\n\n\nechartsProto.getViewOfSeriesModel = function (seriesModel) {\n  return this._chartsMap[seriesModel.__viewId];\n};\n\nvar updateMethods = {\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  update: function (payload) {\n    // console.profile && console.profile('update');\n    var ecModel = this._model;\n    var api = this._api;\n    var coordSysMgr = this._coordSysMgr;\n    var zr = this._zr; // update before setOption\n\n    if (!ecModel) {\n      return;\n    } // Fixme First time update ?\n\n\n    ecModel.restoreData(); // TODO\n    // Save total ecModel here for undo/redo (after restoring data and before processing data).\n    // Undo (restoration of total ecModel) can be carried out in 'action' or outside API call.\n    // Create new coordinate system each update\n    // In LineView may save the old coordinate system and use it to get the orignal point\n\n    coordSysMgr.create(this._model, this._api);\n    processData.call(this, ecModel, api);\n    stackSeriesData.call(this, ecModel);\n    coordSysMgr.update(ecModel, api);\n    doVisualEncoding.call(this, ecModel, payload);\n    doRender.call(this, ecModel, payload); // Set background\n\n    var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\n    var painter = zr.painter; // TODO all use clearColor ?\n\n    if (painter.isSingleCanvas && painter.isSingleCanvas()) {\n      zr.configLayer(0, {\n        clearColor: backgroundColor\n      });\n    } else {\n      // In IE8\n      if (!env.canvasSupported) {\n        var colorArr = colorTool.parse(backgroundColor);\n        backgroundColor = colorTool.stringify(colorArr, 'rgb');\n\n        if (colorArr[3] === 0) {\n          backgroundColor = 'transparent';\n        }\n      }\n\n      if (backgroundColor.colorStops || backgroundColor.image) {\n        // Gradient background\n        // FIXME Fixed layer\n        zr.configLayer(0, {\n          clearColor: backgroundColor\n        });\n        this[HAS_GRADIENT_OR_PATTERN_BG] = true;\n        this._dom.style.background = 'transparent';\n      } else {\n        if (this[HAS_GRADIENT_OR_PATTERN_BG]) {\n          zr.configLayer(0, {\n            clearColor: null\n          });\n        }\n\n        this[HAS_GRADIENT_OR_PATTERN_BG] = false;\n        this._dom.style.background = backgroundColor;\n      }\n    }\n\n    each(postUpdateFuncs, function (func) {\n      func(ecModel, api);\n    }); // console.profile && console.profileEnd('update');\n  },\n\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  updateView: function (payload) {\n    var ecModel = this._model; // update before setOption\n\n    if (!ecModel) {\n      return;\n    }\n\n    ecModel.eachSeries(function (seriesModel) {\n      seriesModel.getData().clearAllVisual();\n    });\n    doVisualEncoding.call(this, ecModel, payload);\n    invokeUpdateMethod.call(this, 'updateView', ecModel, payload);\n  },\n\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  updateVisual: function (payload) {\n    var ecModel = this._model; // update before setOption\n\n    if (!ecModel) {\n      return;\n    }\n\n    ecModel.eachSeries(function (seriesModel) {\n      seriesModel.getData().clearAllVisual();\n    });\n    doVisualEncoding.call(this, ecModel, payload, true);\n    invokeUpdateMethod.call(this, 'updateVisual', ecModel, payload);\n  },\n\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  updateLayout: function (payload) {\n    var ecModel = this._model; // update before setOption\n\n    if (!ecModel) {\n      return;\n    }\n\n    doLayout.call(this, ecModel, payload);\n    invokeUpdateMethod.call(this, 'updateLayout', ecModel, payload);\n  },\n\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  prepareAndUpdate: function (payload) {\n    var ecModel = this._model;\n    prepareView.call(this, 'component', ecModel);\n    prepareView.call(this, 'chart', ecModel);\n    updateMethods.update.call(this, payload);\n  }\n};\n/**\n * @private\n */\n\nfunction updateDirectly(ecIns, method, payload, mainType, subType) {\n  var ecModel = ecIns._model; // broadcast\n\n  if (!mainType) {\n    each(ecIns._componentsViews.concat(ecIns._chartsViews), callView);\n    return;\n  }\n\n  var query = {};\n  query[mainType + 'Id'] = payload[mainType + 'Id'];\n  query[mainType + 'Index'] = payload[mainType + 'Index'];\n  query[mainType + 'Name'] = payload[mainType + 'Name'];\n  var condition = {\n    mainType: mainType,\n    query: query\n  };\n  subType && (condition.subType = subType); // subType may be '' by parseClassType;\n  // If dispatchAction before setOption, do nothing.\n\n  ecModel && ecModel.eachComponent(condition, function (model, index) {\n    callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n  }, ecIns);\n\n  function callView(view) {\n    view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n  }\n}\n/**\n * Resize the chart\n * @param {Object} opts\n * @param {number} [opts.width] Can be 'auto' (the same as null/undefined)\n * @param {number} [opts.height] Can be 'auto' (the same as null/undefined)\n * @param {boolean} [opts.silent=false]\n */\n\n\nechartsProto.resize = function (opts) {\n  this[IN_MAIN_PROCESS] = true;\n\n  this._zr.resize(opts);\n\n  var optionChanged = this._model && this._model.resetOption('media');\n\n  var updateMethod = optionChanged ? 'prepareAndUpdate' : 'update';\n  updateMethods[updateMethod].call(this); // Resize loading effect\n\n  this._loadingFX && this._loadingFX.resize();\n  this[IN_MAIN_PROCESS] = false;\n  var silent = opts && opts.silent;\n  flushPendingActions.call(this, silent);\n  triggerUpdatedEvent.call(this, silent);\n};\n/**\n * Show loading effect\n * @param  {string} [name='default']\n * @param  {Object} [cfg]\n */\n\n\nechartsProto.showLoading = function (name, cfg) {\n  if (zrUtil.isObject(name)) {\n    cfg = name;\n    name = '';\n  }\n\n  name = name || 'default';\n  this.hideLoading();\n\n  if (!loadingEffects[name]) {\n    return;\n  }\n\n  var el = loadingEffects[name](this._api, cfg);\n  var zr = this._zr;\n  this._loadingFX = el;\n  zr.add(el);\n};\n/**\n * Hide loading effect\n */\n\n\nechartsProto.hideLoading = function () {\n  this._loadingFX && this._zr.remove(this._loadingFX);\n  this._loadingFX = null;\n};\n/**\n * @param {Object} eventObj\n * @return {Object}\n */\n\n\nechartsProto.makeActionFromEvent = function (eventObj) {\n  var payload = zrUtil.extend({}, eventObj);\n  payload.type = eventActionMap[eventObj.type];\n  return payload;\n};\n/**\n * @pubilc\n * @param {Object} payload\n * @param {string} [payload.type] Action type\n * @param {Object|boolean} [opt] If pass boolean, means opt.silent\n * @param {boolean} [opt.silent=false] Whether trigger events.\n * @param {boolean} [opt.flush=undefined]\n *                  true: Flush immediately, and then pixel in canvas can be fetched\n *                      immediately. Caution: it might affect performance.\n *                  false: Not not flush.\n *                  undefined: Auto decide whether perform flush.\n */\n\n\nechartsProto.dispatchAction = function (payload, opt) {\n  if (!zrUtil.isObject(opt)) {\n    opt = {\n      silent: !!opt\n    };\n  }\n\n  if (!actions[payload.type]) {\n    return;\n  } // Avoid dispatch action before setOption. Especially in `connect`.\n\n\n  if (!this._model) {\n    return;\n  } // May dispatchAction in rendering procedure\n\n\n  if (this[IN_MAIN_PROCESS]) {\n    this._pendingActions.push(payload);\n\n    return;\n  }\n\n  doDispatchAction.call(this, payload, opt.silent);\n\n  if (opt.flush) {\n    this._zr.flush(true);\n  } else if (opt.flush !== false && env.browser.weChat) {\n    // In WeChat embeded browser, `requestAnimationFrame` and `setInterval`\n    // hang when sliding page (on touch event), which cause that zr does not\n    // refresh util user interaction finished, which is not expected.\n    // But `dispatchAction` may be called too frequently when pan on touch\n    // screen, which impacts performance if do not throttle them.\n    this._throttledZrFlush();\n  }\n\n  flushPendingActions.call(this, opt.silent);\n  triggerUpdatedEvent.call(this, opt.silent);\n};\n\nfunction doDispatchAction(payload, silent) {\n  var payloadType = payload.type;\n  var escapeConnect = payload.escapeConnect;\n  var actionWrap = actions[payloadType];\n  var actionInfo = actionWrap.actionInfo;\n  var cptType = (actionInfo.update || 'update').split(':');\n  var updateMethod = cptType.pop();\n  cptType = cptType[0] != null && parseClassType(cptType[0]);\n  this[IN_MAIN_PROCESS] = true;\n  var payloads = [payload];\n  var batched = false; // Batch action\n\n  if (payload.batch) {\n    batched = true;\n    payloads = zrUtil.map(payload.batch, function (item) {\n      item = zrUtil.defaults(zrUtil.extend({}, item), payload);\n      item.batch = null;\n      return item;\n    });\n  }\n\n  var eventObjBatch = [];\n  var eventObj;\n  var isHighDown = payloadType === 'highlight' || payloadType === 'downplay';\n  each(payloads, function (batchItem) {\n    // Action can specify the event by return it.\n    eventObj = actionWrap.action(batchItem, this._model, this._api); // Emit event outside\n\n    eventObj = eventObj || zrUtil.extend({}, batchItem); // Convert type to eventType\n\n    eventObj.type = actionInfo.event || eventObj.type;\n    eventObjBatch.push(eventObj); // light update does not perform data process, layout and visual.\n\n    if (isHighDown) {\n      // method, payload, mainType, subType\n      updateDirectly(this, updateMethod, batchItem, 'series');\n    } else if (cptType) {\n      updateDirectly(this, updateMethod, batchItem, cptType.main, cptType.sub);\n    }\n  }, this);\n\n  if (updateMethod !== 'none' && !isHighDown && !cptType) {\n    // Still dirty\n    if (this[OPTION_UPDATED]) {\n      // FIXME Pass payload ?\n      updateMethods.prepareAndUpdate.call(this, payload);\n      this[OPTION_UPDATED] = false;\n    } else {\n      updateMethods[updateMethod].call(this, payload);\n    }\n  } // Follow the rule of action batch\n\n\n  if (batched) {\n    eventObj = {\n      type: actionInfo.event || payloadType,\n      escapeConnect: escapeConnect,\n      batch: eventObjBatch\n    };\n  } else {\n    eventObj = eventObjBatch[0];\n  }\n\n  this[IN_MAIN_PROCESS] = false;\n  !silent && this._messageCenter.trigger(eventObj.type, eventObj);\n}\n\nfunction flushPendingActions(silent) {\n  var pendingActions = this._pendingActions;\n\n  while (pendingActions.length) {\n    var payload = pendingActions.shift();\n    doDispatchAction.call(this, payload, silent);\n  }\n}\n\nfunction triggerUpdatedEvent(silent) {\n  !silent && this.trigger('updated');\n}\n/**\n * Register event\n * @method\n */\n\n\nechartsProto.on = createRegisterEventWithLowercaseName('on');\nechartsProto.off = createRegisterEventWithLowercaseName('off');\nechartsProto.one = createRegisterEventWithLowercaseName('one');\n/**\n * @param {string} methodName\n * @private\n */\n\nfunction invokeUpdateMethod(methodName, ecModel, payload) {\n  var api = this._api; // Update all components\n\n  each(this._componentsViews, function (component) {\n    var componentModel = component.__model;\n    component[methodName](componentModel, ecModel, api, payload);\n    updateZ(componentModel, component);\n  }, this); // Upate all charts\n\n  ecModel.eachSeries(function (seriesModel, idx) {\n    var chart = this._chartsMap[seriesModel.__viewId];\n    chart[methodName](seriesModel, ecModel, api, payload);\n    updateZ(seriesModel, chart);\n    updateProgressiveAndBlend(seriesModel, chart);\n  }, this); // If use hover layer\n\n  updateHoverLayerStatus(this._zr, ecModel); // Post render\n\n  each(postUpdateFuncs, function (func) {\n    func(ecModel, api);\n  });\n}\n/**\n * Prepare view instances of charts and components\n * @param  {module:echarts/model/Global} ecModel\n * @private\n */\n\n\nfunction prepareView(type, ecModel) {\n  var isComponent = type === 'component';\n  var viewList = isComponent ? this._componentsViews : this._chartsViews;\n  var viewMap = isComponent ? this._componentsMap : this._chartsMap;\n  var zr = this._zr;\n\n  for (var i = 0; i < viewList.length; i++) {\n    viewList[i].__alive = false;\n  }\n\n  ecModel[isComponent ? 'eachComponent' : 'eachSeries'](function (componentType, model) {\n    if (isComponent) {\n      if (componentType === 'series') {\n        return;\n      }\n    } else {\n      model = componentType;\n    } // Consider: id same and type changed.\n\n\n    var viewId = '_ec_' + model.id + '_' + model.type;\n    var view = viewMap[viewId];\n\n    if (!view) {\n      var classType = parseClassType(model.type);\n      var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) : ChartView.getClass(classType.sub);\n\n      if (Clazz) {\n        view = new Clazz();\n        view.init(ecModel, this._api);\n        viewMap[viewId] = view;\n        viewList.push(view);\n        zr.add(view.group);\n      } else {\n        // Error\n        return;\n      }\n    }\n\n    model.__viewId = view.__id = viewId;\n    view.__alive = true;\n    view.__model = model;\n    view.group.__ecComponentInfo = {\n      mainType: model.mainType,\n      index: model.componentIndex\n    };\n  }, this);\n\n  for (var i = 0; i < viewList.length;) {\n    var view = viewList[i];\n\n    if (!view.__alive) {\n      zr.remove(view.group);\n      view.dispose(ecModel, this._api);\n      viewList.splice(i, 1);\n      delete viewMap[view.__id];\n      view.__id = view.group.__ecComponentInfo = null;\n    } else {\n      i++;\n    }\n  }\n}\n/**\n * Processor data in each series\n *\n * @param {module:echarts/model/Global} ecModel\n * @private\n */\n\n\nfunction processData(ecModel, api) {\n  each(dataProcessorFuncs, function (process) {\n    process.func(ecModel, api);\n  });\n}\n/**\n * @private\n */\n\n\nfunction stackSeriesData(ecModel) {\n  var stackedDataMap = {};\n  ecModel.eachSeries(function (series) {\n    var stack = series.get('stack');\n    var data = series.getData();\n\n    if (stack && data.type === 'list') {\n      var previousStack = stackedDataMap[stack]; // Avoid conflict with Object.prototype\n\n      if (stackedDataMap.hasOwnProperty(stack) && previousStack) {\n        data.stackedOn = previousStack;\n      }\n\n      stackedDataMap[stack] = data;\n    }\n  });\n}\n/**\n * Layout before each chart render there series, special visual encoding stage\n *\n * @param {module:echarts/model/Global} ecModel\n * @private\n */\n\n\nfunction doLayout(ecModel, payload) {\n  var api = this._api;\n  each(visualFuncs, function (visual) {\n    if (visual.isLayout) {\n      visual.func(ecModel, api, payload);\n    }\n  });\n}\n/**\n * Encode visual infomation from data after data processing\n *\n * @param {module:echarts/model/Global} ecModel\n * @param {object} layout\n * @param {boolean} [excludesLayout]\n * @private\n */\n\n\nfunction doVisualEncoding(ecModel, payload, excludesLayout) {\n  var api = this._api;\n  ecModel.clearColorPalette();\n  ecModel.eachSeries(function (seriesModel) {\n    seriesModel.clearColorPalette();\n  });\n  each(visualFuncs, function (visual) {\n    (!excludesLayout || !visual.isLayout) && visual.func(ecModel, api, payload);\n  });\n}\n/**\n * Render each chart and component\n * @private\n */\n\n\nfunction doRender(ecModel, payload) {\n  var api = this._api; // Render all components\n\n  each(this._componentsViews, function (componentView) {\n    var componentModel = componentView.__model;\n    componentView.render(componentModel, ecModel, api, payload);\n    updateZ(componentModel, componentView);\n  }, this);\n  each(this._chartsViews, function (chart) {\n    chart.__alive = false;\n  }, this); // Render all charts\n\n  ecModel.eachSeries(function (seriesModel, idx) {\n    var chartView = this._chartsMap[seriesModel.__viewId];\n    chartView.__alive = true;\n    chartView.render(seriesModel, ecModel, api, payload);\n    chartView.group.silent = !!seriesModel.get('silent');\n    updateZ(seriesModel, chartView);\n    updateProgressiveAndBlend(seriesModel, chartView);\n  }, this); // If use hover layer\n\n  updateHoverLayerStatus(this._zr, ecModel); // Remove groups of unrendered charts\n\n  each(this._chartsViews, function (chart) {\n    if (!chart.__alive) {\n      chart.remove(ecModel, api);\n    }\n  }, this);\n}\n\nvar MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\n/**\n * @private\n */\n\nechartsProto._initEvents = function () {\n  each(MOUSE_EVENT_NAMES, function (eveName) {\n    this._zr.on(eveName, function (e) {\n      var ecModel = this.getModel();\n      var el = e.target;\n      var params; // no e.target when 'globalout'.\n\n      if (eveName === 'globalout') {\n        params = {};\n      } else if (el && el.dataIndex != null) {\n        var dataModel = el.dataModel || ecModel.getSeriesByIndex(el.seriesIndex);\n        params = dataModel && dataModel.getDataParams(el.dataIndex, el.dataType) || {};\n      } // If element has custom eventData of components\n      else if (el && el.eventData) {\n          params = zrUtil.extend({}, el.eventData);\n        }\n\n      if (params) {\n        params.event = e;\n        params.type = eveName;\n        this.trigger(eveName, params);\n      }\n    }, this);\n  }, this);\n  each(eventActionMap, function (actionType, eventType) {\n    this._messageCenter.on(eventType, function (event) {\n      this.trigger(eventType, event);\n    }, this);\n  }, this);\n};\n/**\n * @return {boolean}\n */\n\n\nechartsProto.isDisposed = function () {\n  return this._disposed;\n};\n/**\n * Clear\n */\n\n\nechartsProto.clear = function () {\n  this.setOption({\n    series: []\n  }, true);\n};\n/**\n * Dispose instance\n */\n\n\nechartsProto.dispose = function () {\n  if (this._disposed) {\n    return;\n  }\n\n  this._disposed = true;\n  var api = this._api;\n  var ecModel = this._model;\n  each(this._componentsViews, function (component) {\n    component.dispose(ecModel, api);\n  });\n  each(this._chartsViews, function (chart) {\n    chart.dispose(ecModel, api);\n  }); // Dispose after all views disposed\n\n  this._zr.dispose();\n\n  delete instances[this.id];\n};\n\nzrUtil.mixin(ECharts, Eventful);\n\nfunction updateHoverLayerStatus(zr, ecModel) {\n  var storage = zr.storage;\n  var elCount = 0;\n  storage.traverse(function (el) {\n    if (!el.isGroup) {\n      elCount++;\n    }\n  });\n\n  if (elCount > ecModel.get('hoverLayerThreshold') && !env.node) {\n    storage.traverse(function (el) {\n      if (!el.isGroup) {\n        el.useHoverLayer = true;\n      }\n    });\n  }\n}\n/**\n * Update chart progressive and blend.\n * @param {module:echarts/model/Series|module:echarts/model/Component} model\n * @param {module:echarts/view/Component|module:echarts/view/Chart} view\n */\n\n\nfunction updateProgressiveAndBlend(seriesModel, chartView) {\n  // Progressive configuration\n  var elCount = 0;\n  chartView.group.traverse(function (el) {\n    if (el.type !== 'group' && !el.ignore) {\n      elCount++;\n    }\n  });\n  var frameDrawNum = +seriesModel.get('progressive');\n  var needProgressive = elCount > seriesModel.get('progressiveThreshold') && frameDrawNum && !env.node;\n\n  if (needProgressive) {\n    chartView.group.traverse(function (el) {\n      // FIXME marker and other components\n      if (!el.isGroup) {\n        el.progressive = needProgressive ? Math.floor(elCount++ / frameDrawNum) : -1;\n\n        if (needProgressive) {\n          el.stopAnimation(true);\n        }\n      }\n    });\n  } // Blend configration\n\n\n  var blendMode = seriesModel.get('blendMode') || null;\n  chartView.group.traverse(function (el) {\n    // FIXME marker and other components\n    if (!el.isGroup) {\n      el.setStyle('blend', blendMode);\n    }\n  });\n}\n/**\n * @param {module:echarts/model/Series|module:echarts/model/Component} model\n * @param {module:echarts/view/Component|module:echarts/view/Chart} view\n */\n\n\nfunction updateZ(model, view) {\n  var z = model.get('z');\n  var zlevel = model.get('zlevel'); // Set z and zlevel\n\n  view.group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n    }\n  });\n}\n\nfunction createExtensionAPI(ecInstance) {\n  var coordSysMgr = ecInstance._coordSysMgr;\n  return zrUtil.extend(new ExtensionAPI(ecInstance), {\n    // Inject methods\n    getCoordinateSystems: zrUtil.bind(coordSysMgr.getCoordinateSystems, coordSysMgr),\n    getComponentByElement: function (el) {\n      while (el) {\n        var modelInfo = el.__ecComponentInfo;\n\n        if (modelInfo != null) {\n          return ecInstance._model.getComponent(modelInfo.mainType, modelInfo.index);\n        }\n\n        el = el.parent;\n      }\n    }\n  });\n}\n/**\n * @type {Object} key: actionType.\n * @inner\n */\n\n\nvar actions = {};\n/**\n * Map eventType to actionType\n * @type {Object}\n */\n\nvar eventActionMap = {};\n/**\n * Data processor functions of each stage\n * @type {Array.<Object.<string, Function>>}\n * @inner\n */\n\nvar dataProcessorFuncs = [];\n/**\n * @type {Array.<Function>}\n * @inner\n */\n\nvar optionPreprocessorFuncs = [];\n/**\n * @type {Array.<Function>}\n * @inner\n */\n\nvar postUpdateFuncs = [];\n/**\n * Visual encoding functions of each stage\n * @type {Array.<Object.<string, Function>>}\n * @inner\n */\n\nvar visualFuncs = [];\n/**\n * Theme storage\n * @type {Object.<key, Object>}\n */\n\nvar themeStorage = {};\n/**\n * Loading effects\n */\n\nvar loadingEffects = {};\nvar instances = {};\nvar connectedGroups = {};\nvar idBase = new Date() - 0;\nvar groupIdBase = new Date() - 0;\nvar DOM_ATTRIBUTE_KEY = '_echarts_instance_';\nvar mapDataStores = {};\n\nfunction enableConnect(chart) {\n  var STATUS_PENDING = 0;\n  var STATUS_UPDATING = 1;\n  var STATUS_UPDATED = 2;\n  var STATUS_KEY = '__connectUpdateStatus';\n\n  function updateConnectedChartsStatus(charts, status) {\n    for (var i = 0; i < charts.length; i++) {\n      var otherChart = charts[i];\n      otherChart[STATUS_KEY] = status;\n    }\n  }\n\n  zrUtil.each(eventActionMap, function (actionType, eventType) {\n    chart._messageCenter.on(eventType, function (event) {\n      if (connectedGroups[chart.group] && chart[STATUS_KEY] !== STATUS_PENDING) {\n        if (event && event.escapeConnect) {\n          return;\n        }\n\n        var action = chart.makeActionFromEvent(event);\n        var otherCharts = [];\n        zrUtil.each(instances, function (otherChart) {\n          if (otherChart !== chart && otherChart.group === chart.group) {\n            otherCharts.push(otherChart);\n          }\n        });\n        updateConnectedChartsStatus(otherCharts, STATUS_PENDING);\n        each(otherCharts, function (otherChart) {\n          if (otherChart[STATUS_KEY] !== STATUS_UPDATING) {\n            otherChart.dispatchAction(action);\n          }\n        });\n        updateConnectedChartsStatus(otherCharts, STATUS_UPDATED);\n      }\n    });\n  });\n}\n/**\n * @param {HTMLElement} dom\n * @param {Object} [theme]\n * @param {Object} opts\n * @param {number} [opts.devicePixelRatio] Use window.devicePixelRatio by default\n * @param {string} [opts.renderer] Currently only 'canvas' is supported.\n * @param {number} [opts.width] Use clientWidth of the input `dom` by default.\n *                              Can be 'auto' (the same as null/undefined)\n * @param {number} [opts.height] Use clientHeight of the input `dom` by default.\n *                               Can be 'auto' (the same as null/undefined)\n */\n\n\nfunction init(dom, theme, opts) {\n  var existInstance = getInstanceByDom(dom);\n\n  if (existInstance) {\n    return existInstance;\n  }\n\n  var chart = new ECharts(dom, theme, opts);\n  chart.id = 'ec_' + idBase++;\n  instances[chart.id] = chart;\n\n  if (dom.setAttribute) {\n    dom.setAttribute(DOM_ATTRIBUTE_KEY, chart.id);\n  } else {\n    dom[DOM_ATTRIBUTE_KEY] = chart.id;\n  }\n\n  enableConnect(chart);\n  return chart;\n}\n/**\n * @return {string|Array.<module:echarts~ECharts>} groupId\n */\n\n\nfunction connect(groupId) {\n  // Is array of charts\n  if (zrUtil.isArray(groupId)) {\n    var charts = groupId;\n    groupId = null; // If any chart has group\n\n    zrUtil.each(charts, function (chart) {\n      if (chart.group != null) {\n        groupId = chart.group;\n      }\n    });\n    groupId = groupId || 'g_' + groupIdBase++;\n    zrUtil.each(charts, function (chart) {\n      chart.group = groupId;\n    });\n  }\n\n  connectedGroups[groupId] = true;\n  return groupId;\n}\n/**\n * @DEPRECATED\n * @return {string} groupId\n */\n\n\nfunction disConnect(groupId) {\n  connectedGroups[groupId] = false;\n}\n/**\n * @return {string} groupId\n */\n\n\nvar disconnect = disConnect;\n/**\n * Dispose a chart instance\n * @param  {module:echarts~ECharts|HTMLDomElement|string} chart\n */\n\nfunction dispose(chart) {\n  if (typeof chart === 'string') {\n    chart = instances[chart];\n  } else if (!(chart instanceof ECharts)) {\n    // Try to treat as dom\n    chart = getInstanceByDom(chart);\n  }\n\n  if (chart instanceof ECharts && !chart.isDisposed()) {\n    chart.dispose();\n  }\n}\n/**\n * @param  {HTMLElement} dom\n * @return {echarts~ECharts}\n */\n\n\nfunction getInstanceByDom(dom) {\n  var key;\n\n  if (dom.getAttribute) {\n    key = dom.getAttribute(DOM_ATTRIBUTE_KEY);\n  } else {\n    key = dom[DOM_ATTRIBUTE_KEY];\n  }\n\n  return instances[key];\n}\n/**\n * @param {string} key\n * @return {echarts~ECharts}\n */\n\n\nfunction getInstanceById(key) {\n  return instances[key];\n}\n/**\n * Register theme\n */\n\n\nfunction registerTheme(name, theme) {\n  themeStorage[name] = theme;\n}\n/**\n * Register option preprocessor\n * @param {Function} preprocessorFunc\n */\n\n\nfunction registerPreprocessor(preprocessorFunc) {\n  optionPreprocessorFuncs.push(preprocessorFunc);\n}\n/**\n * @param {number} [priority=1000]\n * @param {Function} processorFunc\n */\n\n\nfunction registerProcessor(priority, processorFunc) {\n  if (typeof priority === 'function') {\n    processorFunc = priority;\n    priority = PRIORITY_PROCESSOR_FILTER;\n  }\n\n  dataProcessorFuncs.push({\n    prio: priority,\n    func: processorFunc\n  });\n}\n/**\n * Register postUpdater\n * @param {Function} postUpdateFunc\n */\n\n\nfunction registerPostUpdate(postUpdateFunc) {\n  postUpdateFuncs.push(postUpdateFunc);\n}\n/**\n * Usage:\n * registerAction('someAction', 'someEvent', function () { ... });\n * registerAction('someAction', function () { ... });\n * registerAction(\n *     {type: 'someAction', event: 'someEvent', update: 'updateView'},\n *     function () { ... }\n * );\n *\n * @param {(string|Object)} actionInfo\n * @param {string} actionInfo.type\n * @param {string} [actionInfo.event]\n * @param {string} [actionInfo.update]\n * @param {string} [eventName]\n * @param {Function} action\n */\n\n\nfunction registerAction(actionInfo, eventName, action) {\n  if (typeof eventName === 'function') {\n    action = eventName;\n    eventName = '';\n  }\n\n  var actionType = zrUtil.isObject(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {\n    event: eventName\n  }][0]; // Event name is all lowercase\n\n  actionInfo.event = (actionInfo.event || actionType).toLowerCase();\n  eventName = actionInfo.event; // Validate action type and event name.\n\n  zrUtil.assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\n\n  if (!actions[actionType]) {\n    actions[actionType] = {\n      action: action,\n      actionInfo: actionInfo\n    };\n  }\n\n  eventActionMap[eventName] = actionType;\n}\n/**\n * @param {string} type\n * @param {*} CoordinateSystem\n */\n\n\nfunction registerCoordinateSystem(type, CoordinateSystem) {\n  CoordinateSystemManager.register(type, CoordinateSystem);\n}\n/**\n * Get dimensions of specified coordinate system.\n * @param {string} type\n * @return {Array.<string|Object>}\n */\n\n\nfunction getCoordinateSystemDimensions(type) {\n  var coordSysCreator = CoordinateSystemManager.get(type);\n\n  if (coordSysCreator) {\n    return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n  }\n}\n/**\n * Layout is a special stage of visual encoding\n * Most visual encoding like color are common for different chart\n * But each chart has it's own layout algorithm\n *\n * @param {number} [priority=1000]\n * @param {Function} layoutFunc\n */\n\n\nfunction registerLayout(priority, layoutFunc) {\n  if (typeof priority === 'function') {\n    layoutFunc = priority;\n    priority = PRIORITY_VISUAL_LAYOUT;\n  }\n\n  visualFuncs.push({\n    prio: priority,\n    func: layoutFunc,\n    isLayout: true\n  });\n}\n/**\n * @param {number} [priority=3000]\n * @param {Function} visualFunc\n */\n\n\nfunction registerVisual(priority, visualFunc) {\n  if (typeof priority === 'function') {\n    visualFunc = priority;\n    priority = PRIORITY_VISUAL_CHART;\n  }\n\n  visualFuncs.push({\n    prio: priority,\n    func: visualFunc\n  });\n}\n/**\n * @param {string} name\n */\n\n\nfunction registerLoading(name, loadingFx) {\n  loadingEffects[name] = loadingFx;\n}\n/**\n * @param {Object} opts\n * @param {string} [superClass]\n */\n\n\nfunction extendComponentModel(opts\n/*, superClass*/\n) {\n  // var Clazz = ComponentModel;\n  // if (superClass) {\n  //     var classType = parseClassType(superClass);\n  //     Clazz = ComponentModel.getClass(classType.main, classType.sub, true);\n  // }\n  return ComponentModel.extend(opts);\n}\n/**\n * @param {Object} opts\n * @param {string} [superClass]\n */\n\n\nfunction extendComponentView(opts\n/*, superClass*/\n) {\n  // var Clazz = ComponentView;\n  // if (superClass) {\n  //     var classType = parseClassType(superClass);\n  //     Clazz = ComponentView.getClass(classType.main, classType.sub, true);\n  // }\n  return ComponentView.extend(opts);\n}\n/**\n * @param {Object} opts\n * @param {string} [superClass]\n */\n\n\nfunction extendSeriesModel(opts\n/*, superClass*/\n) {\n  // var Clazz = SeriesModel;\n  // if (superClass) {\n  //     superClass = 'series.' + superClass.replace('series.', '');\n  //     var classType = parseClassType(superClass);\n  //     Clazz = ComponentModel.getClass(classType.main, classType.sub, true);\n  // }\n  return SeriesModel.extend(opts);\n}\n/**\n * @param {Object} opts\n * @param {string} [superClass]\n */\n\n\nfunction extendChartView(opts\n/*, superClass*/\n) {\n  // var Clazz = ChartView;\n  // if (superClass) {\n  //     superClass = superClass.replace('series.', '');\n  //     var classType = parseClassType(superClass);\n  //     Clazz = ChartView.getClass(classType.main, true);\n  // }\n  return ChartView.extend(opts);\n}\n/**\n * ZRender need a canvas context to do measureText.\n * But in node environment canvas may be created by node-canvas.\n * So we need to specify how to create a canvas instead of using document.createElement('canvas')\n *\n * Be careful of using it in the browser.\n *\n * @param {Function} creator\n * @example\n *     var Canvas = require('canvas');\n *     var echarts = require('echarts');\n *     echarts.setCanvasCreator(function () {\n *         // Small size is enough.\n *         return new Canvas(32, 32);\n *     });\n */\n\n\nfunction setCanvasCreator(creator) {\n  zrUtil.$override('createCanvas', creator);\n}\n/**\n * @param {string} mapName\n * @param {Object|string} geoJson\n * @param {Object} [specialAreas]\n *\n * @example\n *     $.get('USA.json', function (geoJson) {\n *         echarts.registerMap('USA', geoJson);\n *         // Or\n *         echarts.registerMap('USA', {\n *             geoJson: geoJson,\n *             specialAreas: {}\n *         })\n *     });\n */\n\n\nfunction registerMap(mapName, geoJson, specialAreas) {\n  if (geoJson.geoJson && !geoJson.features) {\n    specialAreas = geoJson.specialAreas;\n    geoJson = geoJson.geoJson;\n  }\n\n  if (typeof geoJson === 'string') {\n    geoJson = typeof JSON !== 'undefined' && JSON.parse ? JSON.parse(geoJson) : new Function('return (' + geoJson + ');')();\n  }\n\n  mapDataStores[mapName] = {\n    geoJson: geoJson,\n    specialAreas: specialAreas\n  };\n}\n/**\n * @param {string} mapName\n * @return {Object}\n */\n\n\nfunction getMap(mapName) {\n  return mapDataStores[mapName];\n}\n\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesColor);\nregisterPreprocessor(backwardCompat);\nregisterLoading('default', loadingDefault); // Default actions\n\nregisterAction({\n  type: 'highlight',\n  event: 'highlight',\n  update: 'highlight'\n}, zrUtil.noop);\nregisterAction({\n  type: 'downplay',\n  event: 'downplay',\n  update: 'downplay'\n}, zrUtil.noop); // For backward compatibility, where the namespace `dataTool` will\n// be mounted on `echarts` is the extension `dataTool` is imported.\n\nvar dataTool = {};\nexports.version = version;\nexports.dependencies = dependencies;\nexports.PRIORITY = PRIORITY;\nexports.init = init;\nexports.connect = connect;\nexports.disConnect = disConnect;\nexports.disconnect = disconnect;\nexports.dispose = dispose;\nexports.getInstanceByDom = getInstanceByDom;\nexports.getInstanceById = getInstanceById;\nexports.registerTheme = registerTheme;\nexports.registerPreprocessor = registerPreprocessor;\nexports.registerProcessor = registerProcessor;\nexports.registerPostUpdate = registerPostUpdate;\nexports.registerAction = registerAction;\nexports.registerCoordinateSystem = registerCoordinateSystem;\nexports.getCoordinateSystemDimensions = getCoordinateSystemDimensions;\nexports.registerLayout = registerLayout;\nexports.registerVisual = registerVisual;\nexports.registerLoading = registerLoading;\nexports.extendComponentModel = extendComponentModel;\nexports.extendComponentView = extendComponentView;\nexports.extendSeriesModel = extendSeriesModel;\nexports.extendChartView = extendChartView;\nexports.setCanvasCreator = setCanvasCreator;\nexports.registerMap = registerMap;\nexports.getMap = getMap;\nexports.dataTool = dataTool;var ___ec_export = require(\"./export\");\n(function () {\n    for (var key in ___ec_export) {\n        if (___ec_export.hasOwnProperty(key)) {\n            exports[key] = ___ec_export[key];\n        }\n    }\n})();","var zrender = require(\"zrender/lib/zrender\");\n\nexports.zrender = zrender;\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nexports.matrix = matrix;\n\nvar vector = require(\"zrender/lib/core/vector\");\n\nexports.vector = vector;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar colorTool = require(\"zrender/lib/tool/color\");\n\nexports.color = colorTool;\n\nvar graphic = require(\"./util/graphic\");\n\nexports.graphic = graphic;\n\nvar numberUtil = require(\"./util/number\");\n\nexports.number = numberUtil;\n\nvar formatUtil = require(\"./util/format\");\n\nexports.format = formatUtil;\n\nvar _throttle = require(\"./util/throttle\");\n\nvar throttle = _throttle.throttle;\nexports.throttle = _throttle.throttle;\n\nvar ecHelper = require(\"./helper\");\n\nexports.helper = ecHelper;\n\nvar _List = require(\"./data/List\");\n\nexports.List = _List;\n\nvar _Model = require(\"./model/Model\");\n\nexports.Model = _Model;\n\nvar _Axis = require(\"./coord/Axis\");\n\nexports.Axis = _Axis;\n\nvar _env = require(\"zrender/lib/core/env\");\n\nexports.env = _env;\n\nvar _parseGeoJson = require(\"./coord/geo/parseGeoJson\");\n\nexports.parseGeoJson = _parseGeoJson;\n\n/**\n * Do not mount those modules on 'src/echarts' for better tree shaking.\n */\nvar ecUtil = {};\nzrUtil.each(['map', 'each', 'filter', 'indexOf', 'inherits', 'reduce', 'filter', 'bind', 'curry', 'isArray', 'isString', 'isObject', 'isFunction', 'extend', 'defaults', 'clone', 'merge'], function (name) {\n  ecUtil[name] = zrUtil[name];\n});\nexports.util = ecUtil;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar createListFromArray = require(\"./chart/helper/createListFromArray\");\n\nvar axisHelper = require(\"./coord/axisHelper\");\n\nvar axisModelCommonMixin = require(\"./coord/axisModelCommonMixin\");\n\nvar Model = require(\"./model/Model\");\n\nvar _completeDimensions = require(\"./data/helper/completeDimensions\");\n\nexports.completeDimensions = _completeDimensions;\n\nvar _symbol = require(\"./util/symbol\");\n\nexports.createSymbol = _symbol.createSymbol;\n\n/**\n * Create a muti dimension List structure from seriesModel.\n * @param  {module:echarts/model/Model} seriesModel\n * @return {module:echarts/data/List} list\n */\nfunction createList(seriesModel) {\n  var data = seriesModel.get('data');\n  return createListFromArray(data, seriesModel, seriesModel.ecModel);\n}\n/**\n * @see {module:echarts/data/helper/completeDimensions}\n */\n\n\n/**\n * Create scale\n * @param {Array.<number>} dataExtent\n * @param {Object|module:echarts/Model} option\n */\nfunction createScale(dataExtent, option) {\n  var axisModel = option;\n\n  if (!(option instanceof Model)) {\n    axisModel = new Model(option);\n    zrUtil.mixin(axisModel, axisModelCommonMixin);\n  }\n\n  var scale = axisHelper.createScaleByModel(axisModel);\n  scale.setExtent(dataExtent[0], dataExtent[1]);\n  axisHelper.niceScaleExtent(scale, axisModel);\n  return scale;\n}\n/**\n * Mixin common methods to axis model,\n *\n * Inlcude methods\n * `getFormattedLabels() => Array.<string>`\n * `getCategories() => Array.<string>`\n * `getMin(origin: boolean) => number`\n * `getMax(origin: boolean) => number`\n * `getNeedCrossZero() => boolean`\n * `setRange(start: number, end: number)`\n * `resetRange()`\n */\n\n\nfunction mixinAxisModelCommonMethods(Model) {\n  zrUtil.mixin(Model, axisModelCommonMixin);\n}\n\nexports.createList = createList;\nexports.createScale = createScale;\nexports.mixinAxisModelCommonMethods = mixinAxisModelCommonMethods;","var _default = {\n  toolbox: {\n    brush: {\n      title: {\n        rect: '',\n        polygon: '',\n        lineX: '',\n        lineY: '',\n        keep: '',\n        clear: ''\n      }\n    },\n    dataView: {\n      title: '',\n      lang: ['', '', '']\n    },\n    dataZoom: {\n      title: {\n        zoom: '',\n        back: ''\n      }\n    },\n    magicType: {\n      title: {\n        line: '',\n        bar: '',\n        stack: '',\n        tiled: ''\n      }\n    },\n    restore: {\n      title: ''\n    },\n    saveAsImage: {\n      title: '',\n      lang: ['']\n    }\n  }\n};\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar _number = require(\"../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar STACK_PREFIX = '__ec_stack_';\n\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\n}\n\nfunction getAxisKey(axis) {\n  return axis.dim + axis.index;\n}\n/**\n * @param {Object} opt\n * @param {module:echarts/coord/Axis} opt.axis Only support category axis currently.\n * @param {number} opt.count Positive interger.\n * @param {number} [opt.barWidth]\n * @param {number} [opt.barMaxWidth]\n * @param {number} [opt.barGap]\n * @param {number} [opt.barCategoryGap]\n * @return {Object} {width, offset, offsetCenter} If axis.type is not 'category', return undefined.\n */\n\n\nfunction getLayoutOnAxis(opt, api) {\n  var params = [];\n  var baseAxis = opt.axis;\n  var axisKey = 'axis0';\n\n  if (baseAxis.type !== 'category') {\n    return;\n  }\n\n  var bandWidth = baseAxis.getBandWidth();\n\n  for (var i = 0; i < opt.count || 0; i++) {\n    params.push(zrUtil.defaults({\n      bandWidth: bandWidth,\n      axisKey: axisKey,\n      stackId: STACK_PREFIX + i\n    }, opt));\n  }\n\n  var widthAndOffsets = doCalBarWidthAndOffset(params, api);\n  var result = [];\n\n  for (var i = 0; i < opt.count; i++) {\n    var item = widthAndOffsets[axisKey][STACK_PREFIX + i];\n    item.offsetCenter = item.offset + item.width / 2;\n    result.push(item);\n  }\n\n  return result;\n}\n\nfunction calBarWidthAndOffset(barSeries, api) {\n  var seriesInfoList = zrUtil.map(barSeries, function (seriesModel) {\n    var data = seriesModel.getData();\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n    return {\n      bandWidth: bandWidth,\n      barWidth: barWidth,\n      barMaxWidth: barMaxWidth,\n      barGap: barGap,\n      barCategoryGap: barCategoryGap,\n      axisKey: getAxisKey(baseAxis),\n      stackId: getSeriesStackId(seriesModel)\n    };\n  });\n  return doCalBarWidthAndOffset(seriesInfoList, api);\n}\n\nfunction doCalBarWidthAndOffset(seriesInfoList, api) {\n  // Columns info on each category axis. Key is cartesian name\n  var columnsMap = {};\n  zrUtil.each(seriesInfoList, function (seriesInfo, idx) {\n    var axisKey = seriesInfo.axisKey;\n    var bandWidth = seriesInfo.bandWidth;\n    var columnsOnAxis = columnsMap[axisKey] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: '20%',\n      gap: '30%',\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[axisKey] = columnsOnAxis;\n    var stackId = seriesInfo.stackId;\n\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    }; // Caution: In a single coordinate system, these barGrid attributes\n    // will be shared by series. Consider that they have default values,\n    // only the attributes set on the last series will work.\n    // Do not change this fact unless there will be a break change.\n    // TODO\n\n    var barWidth = seriesInfo.barWidth;\n\n    if (barWidth && !stacks[stackId].width) {\n      // See #6312, do not restrict width.\n      stacks[stackId].width = barWidth;\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n\n    var barMaxWidth = seriesInfo.barMaxWidth;\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    var barGap = seriesInfo.barGap;\n    barGap != null && (columnsOnAxis.gap = barGap);\n    var barCategoryGap = seriesInfo.barCategoryGap;\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  zrUtil.each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGap = parsePercent(columnsOnAxis.categoryGap, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0); // Find if any auto calculated bar exceeded maxBarWidth\n\n    zrUtil.each(stacks, function (column, stack) {\n      var maxWidth = column.maxWidth;\n\n      if (maxWidth && maxWidth < autoWidth) {\n        maxWidth = Math.min(maxWidth, remainedWidth);\n\n        if (column.width) {\n          maxWidth = Math.min(maxWidth, column.width);\n        }\n\n        remainedWidth -= maxWidth;\n        column.width = maxWidth;\n        autoWidthCount--;\n      }\n    }); // Recalculate width again\n\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    zrUtil.each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n\n    var offset = -widthSum / 2;\n    zrUtil.each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\n/**\n * @param {string} seriesType\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\nfunction barLayoutGrid(seriesType, ecModel, api) {\n  var barWidthAndOffset = calBarWidthAndOffset(zrUtil.filter(ecModel.getSeriesByType(seriesType), function (seriesModel) {\n    return !ecModel.isSeriesFiltered(seriesModel) && seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\n  }));\n  var lastStackCoords = {};\n  var lastStackCoordsOrigin = {};\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for cartesian2d only\n    if (seriesModel.coordinateSystem.type !== 'cartesian2d') {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    var valueAxis = cartesian.getOtherAxis(baseAxis);\n    var barMinHeight = seriesModel.get('barMinHeight') || 0;\n    var valueAxisStart = baseAxis.onZero ? valueAxis.toGlobalCoord(valueAxis.dataToCoord(0)) : valueAxis.getGlobalExtent()[0];\n    var coordDims = [seriesModel.coordDimToDataDim('x')[0], seriesModel.coordDimToDataDim('y')[0]];\n    var coords = data.mapArray(coordDims, function (x, y) {\n      return cartesian.dataToPoint([x, y]);\n    }, true);\n    lastStackCoords[stackId] = lastStackCoords[stackId] || [];\n    lastStackCoordsOrigin[stackId] = lastStackCoordsOrigin[stackId] || []; // Fix #4243\n\n    data.setLayout({\n      offset: columnOffset,\n      size: columnWidth\n    });\n    data.each(seriesModel.coordDimToDataDim(valueAxis.dim)[0], function (value, idx) {\n      if (isNaN(value)) {\n        return;\n      }\n\n      if (!lastStackCoords[stackId][idx]) {\n        lastStackCoords[stackId][idx] = {\n          p: valueAxisStart,\n          // Positive stack\n          n: valueAxisStart // Negative stack\n\n        };\n        lastStackCoordsOrigin[stackId][idx] = {\n          p: valueAxisStart,\n          // Positive stack\n          n: valueAxisStart // Negative stack\n\n        };\n      }\n\n      var sign = value >= 0 ? 'p' : 'n';\n      var coord = coords[idx];\n      var lastCoord = lastStackCoords[stackId][idx][sign];\n      var lastCoordOrigin = lastStackCoordsOrigin[stackId][idx][sign];\n      var x;\n      var y;\n      var width;\n      var height;\n\n      if (valueAxis.isHorizontal()) {\n        x = lastCoord;\n        y = coord[1] + columnOffset;\n        width = coord[0] - lastCoordOrigin;\n        height = columnWidth;\n        lastStackCoordsOrigin[stackId][idx][sign] += width;\n\n        if (Math.abs(width) < barMinHeight) {\n          width = (width < 0 ? -1 : 1) * barMinHeight;\n        }\n\n        lastStackCoords[stackId][idx][sign] += width;\n      } else {\n        x = coord[0] + columnOffset;\n        y = lastCoord;\n        width = columnWidth;\n        height = coord[1] - lastCoordOrigin;\n        lastStackCoordsOrigin[stackId][idx][sign] += height;\n\n        if (Math.abs(height) < barMinHeight) {\n          // Include zero to has a positive bar\n          height = (height <= 0 ? -1 : 1) * barMinHeight;\n        }\n\n        lastStackCoords[stackId][idx][sign] += height;\n      }\n\n      data.setItemLayout(idx, {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      });\n    }, true);\n  }, this);\n}\n\nbarLayoutGrid.getLayoutOnAxis = getLayoutOnAxis;\nvar _default = barLayoutGrid;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar _number = require(\"../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || '__ec_stack_' + seriesModel.seriesIndex;\n}\n\nfunction getAxisKey(axis) {\n  return axis.dim;\n}\n/**\n * @param {string} seriesType\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\nfunction barLayoutPolar(seriesType, ecModel, api) {\n  var width = api.getWidth();\n  var height = api.getHeight();\n  var lastStackCoords = {};\n  var lastStackCoordsOrigin = {};\n  var barWidthAndOffset = calRadialBar(zrUtil.filter(ecModel.getSeriesByType(seriesType), function (seriesModel) {\n    return !ecModel.isSeriesFiltered(seriesModel) && seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'polar';\n  }));\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for polar only\n    if (seriesModel.coordinateSystem.type !== 'polar') {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var polar = seriesModel.coordinateSystem;\n    var angleAxis = polar.getAngleAxis();\n    var baseAxis = polar.getBaseAxis();\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    var valueAxis = polar.getOtherAxis(baseAxis);\n    var center = seriesModel.get('center') || ['50%', '50%'];\n    var cx = parsePercent(center[0], width);\n    var cy = parsePercent(center[1], height);\n    var barMinHeight = seriesModel.get('barMinHeight') || 0;\n    var barMinAngle = seriesModel.get('barMinAngle') || 0;\n    var valueAxisStart = valueAxis.getExtent()[0];\n    var valueMax = valueAxis.model.get('max');\n    var valueMin = valueAxis.model.get('min');\n    var coordDims = [seriesModel.coordDimToDataDim('radius')[0], seriesModel.coordDimToDataDim('angle')[0]];\n    var coords = data.mapArray(coordDims, function (radius, angle) {\n      return polar.dataToPoint([radius, angle]);\n    }, true);\n    lastStackCoords[stackId] = lastStackCoords[stackId] || [];\n    lastStackCoordsOrigin[stackId] = lastStackCoordsOrigin[stackId] || []; // Fix #4243\n\n    data.each(seriesModel.coordDimToDataDim(valueAxis.dim)[0], function (value, idx) {\n      if (isNaN(value)) {\n        return;\n      }\n\n      if (!lastStackCoords[stackId][idx]) {\n        lastStackCoords[stackId][idx] = {\n          p: valueAxisStart,\n          // Positive stack\n          n: valueAxisStart // Negative stack\n\n        };\n        lastStackCoordsOrigin[stackId][idx] = {\n          p: valueAxisStart,\n          // Positive stack\n          n: valueAxisStart // Negative stack\n\n        };\n      }\n\n      var sign = value >= 0 ? 'p' : 'n';\n      var coord = polar.pointToCoord(coords[idx]);\n      var lastCoordOrigin = lastStackCoordsOrigin[stackId][idx][sign];\n      var r0;\n      var r;\n      var startAngle;\n      var endAngle;\n\n      if (valueAxis.dim === 'radius') {\n        // radial sector\n        r0 = lastCoordOrigin;\n        r = coord[0];\n        startAngle = (-coord[1] + columnOffset) * Math.PI / 180;\n        endAngle = startAngle + columnWidth * Math.PI / 180;\n\n        if (Math.abs(r) < barMinHeight) {\n          r = r0 + (r < 0 ? -1 : 1) * barMinHeight;\n        }\n\n        lastStackCoordsOrigin[stackId][idx][sign] = r;\n      } else {\n        // tangential sector\n        r0 = coord[0] + columnOffset;\n        r = r0 + columnWidth; // clamp data if min or max is defined for valueAxis\n\n        if (valueMax != null) {\n          value = Math.min(value, valueMax);\n        }\n\n        if (valueMin != null) {\n          value = Math.max(value, valueMin);\n        }\n\n        var angle = angleAxis.dataToAngle(value);\n\n        if (Math.abs(angle - lastCoordOrigin) < barMinAngle) {\n          angle = lastCoordOrigin - (value < 0 ? -1 : 1) * barMinAngle;\n        }\n\n        startAngle = -lastCoordOrigin * Math.PI / 180;\n        endAngle = -angle * Math.PI / 180; // if the previous stack is at the end of the ring,\n        // add a round to differentiate it from origin\n\n        var extent = angleAxis.getExtent();\n        var stackCoord = angle;\n\n        if (stackCoord === extent[0] && value > 0) {\n          stackCoord = extent[1];\n        } else if (stackCoord === extent[1] && value < 0) {\n          stackCoord = extent[0];\n        }\n\n        lastStackCoordsOrigin[stackId][idx][sign] = stackCoord;\n      }\n\n      data.setItemLayout(idx, {\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: r,\n        startAngle: startAngle,\n        endAngle: endAngle\n      });\n    }, true);\n  }, this);\n}\n/**\n * Calculate bar width and offset for radial bar charts\n */\n\n\nfunction calRadialBar(barSeries, api) {\n  // Columns info on each category axis. Key is polar name\n  var columnsMap = {};\n  zrUtil.each(barSeries, function (seriesModel, idx) {\n    var data = seriesModel.getData();\n    var polar = seriesModel.coordinateSystem;\n    var baseAxis = polar.getBaseAxis();\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    var columnsOnAxis = columnsMap[getAxisKey(baseAxis)] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: '20%',\n      gap: '30%',\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[getAxisKey(baseAxis)] = columnsOnAxis;\n    var stackId = getSeriesStackId(seriesModel);\n\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    };\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n\n    if (barWidth && !stacks[stackId].width) {\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      stacks[stackId].width = barWidth;\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    barGap != null && (columnsOnAxis.gap = barGap);\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  zrUtil.each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGap = parsePercent(columnsOnAxis.categoryGap, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0); // Find if any auto calculated bar exceeded maxBarWidth\n\n    zrUtil.each(stacks, function (column, stack) {\n      var maxWidth = column.maxWidth;\n\n      if (maxWidth && maxWidth < autoWidth) {\n        maxWidth = Math.min(maxWidth, remainedWidth);\n\n        if (column.width) {\n          maxWidth = Math.min(maxWidth, column.width);\n        }\n\n        remainedWidth -= maxWidth;\n        column.width = maxWidth;\n        autoWidthCount--;\n      }\n    }); // Recalculate width again\n\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    zrUtil.each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n\n    var offset = -widthSum / 2;\n    zrUtil.each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\n\nvar _default = barLayoutPolar;\nmodule.exports = _default;","function _default(seriesType, ecModel) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (!coordSys) {\n      return;\n    }\n\n    var dims = [];\n    var coordDims = coordSys.dimensions;\n\n    for (var i = 0; i < coordDims.length; i++) {\n      dims.push(seriesModel.coordDimToDataDim(coordSys.dimensions[i])[0]);\n    }\n\n    if (dims.length === 1) {\n      data.each(dims[0], function (x, idx) {\n        // Also {Array.<number>}, not undefined to avoid if...else... statement\n        data.setItemLayout(idx, isNaN(x) ? [NaN, NaN] : coordSys.dataToPoint(x));\n      });\n    } else if (dims.length === 2) {\n      data.each(dims, function (x, y, idx) {\n        // Also {Array.<number>}, not undefined to avoid if...else... statement\n        data.setItemLayout(idx, isNaN(x) || isNaN(y) ? [NaN, NaN] : coordSys.dataToPoint([x, y]));\n      }, true);\n    }\n  });\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../util/graphic\");\n\nvar PI = Math.PI;\n/**\n * @param {module:echarts/ExtensionAPI} api\n * @param {Object} [opts]\n * @param {string} [opts.text]\n * @param {string} [opts.color]\n * @param {string} [opts.textColor]\n * @return {module:zrender/Element}\n */\n\nfunction _default(api, opts) {\n  opts = opts || {};\n  zrUtil.defaults(opts, {\n    text: 'loading',\n    color: '#c23531',\n    textColor: '#000',\n    maskColor: 'rgba(255, 255, 255, 0.8)',\n    zlevel: 0\n  });\n  var mask = new graphic.Rect({\n    style: {\n      fill: opts.maskColor\n    },\n    zlevel: opts.zlevel,\n    z: 10000\n  });\n  var arc = new graphic.Arc({\n    shape: {\n      startAngle: -PI / 2,\n      endAngle: -PI / 2 + 0.1,\n      r: 10\n    },\n    style: {\n      stroke: opts.color,\n      lineCap: 'round',\n      lineWidth: 5\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  var labelRect = new graphic.Rect({\n    style: {\n      fill: 'none',\n      text: opts.text,\n      textPosition: 'right',\n      textDistance: 10,\n      textFill: opts.textColor\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  arc.animateShape(true).when(1000, {\n    endAngle: PI * 3 / 2\n  }).start('circularInOut');\n  arc.animateShape(true).when(1000, {\n    startAngle: PI * 3 / 2\n  }).delay(300).start('circularInOut');\n  var group = new graphic.Group();\n  group.add(arc);\n  group.add(labelRect);\n  group.add(mask); // Inject resize\n\n  group.resize = function () {\n    var cx = api.getWidth() / 2;\n    var cy = api.getHeight() / 2;\n    arc.setShape({\n      cx: cx,\n      cy: cy\n    });\n    var r = arc.shape.r;\n    labelRect.setShape({\n      x: cx - r,\n      y: cy - r,\n      width: r * 2,\n      height: r * 2\n    });\n    mask.setShape({\n      x: 0,\n      y: 0,\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n\n  group.resize();\n  return group;\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"./Model\");\n\nvar componentUtil = require(\"../util/component\");\n\nvar clazzUtil = require(\"../util/clazz\");\n\nvar layout = require(\"../util/layout\");\n\nvar boxLayoutMixin = require(\"./mixin/boxLayout\");\n\n/**\n * Component model\n *\n * @module echarts/model/Component\n */\nvar arrayPush = Array.prototype.push;\n/**\n * @alias module:echarts/model/Component\n * @constructor\n * @param {Object} option\n * @param {module:echarts/model/Model} parentModel\n * @param {module:echarts/model/Model} ecModel\n */\n\nvar ComponentModel = Model.extend({\n  type: 'component',\n\n  /**\n   * @readOnly\n   * @type {string}\n   */\n  id: '',\n\n  /**\n   * @readOnly\n   */\n  name: '',\n\n  /**\n   * @readOnly\n   * @type {string}\n   */\n  mainType: '',\n\n  /**\n   * @readOnly\n   * @type {string}\n   */\n  subType: '',\n\n  /**\n   * @readOnly\n   * @type {number}\n   */\n  componentIndex: 0,\n\n  /**\n   * @type {Object}\n   * @protected\n   */\n  defaultOption: null,\n\n  /**\n   * @type {module:echarts/model/Global}\n   * @readOnly\n   */\n  ecModel: null,\n\n  /**\n   * key: componentType\n   * value:  Component model list, can not be null.\n   * @type {Object.<string, Array.<module:echarts/model/Model>>}\n   * @readOnly\n   */\n  dependentModels: [],\n\n  /**\n   * @type {string}\n   * @readOnly\n   */\n  uid: null,\n\n  /**\n   * Support merge layout params.\n   * Only support 'box' now (left/right/top/bottom/width/height).\n   * @type {string|Object} Object can be {ignoreSize: true}\n   * @readOnly\n   */\n  layoutMode: null,\n  $constructor: function (option, parentModel, ecModel, extraOpt) {\n    Model.call(this, option, parentModel, ecModel, extraOpt);\n    this.uid = componentUtil.getUID('componentModel');\n  },\n  init: function (option, parentModel, ecModel, extraOpt) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  },\n  mergeDefaultAndTheme: function (option, ecModel) {\n    var layoutMode = this.layoutMode;\n    var inputPositionParams = layoutMode ? layout.getLayoutParams(option) : {};\n    var themeModel = ecModel.getTheme();\n    zrUtil.merge(option, themeModel.get(this.mainType));\n    zrUtil.merge(option, this.getDefaultOption());\n\n    if (layoutMode) {\n      layout.mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  },\n  mergeOption: function (option, extraOpt) {\n    zrUtil.merge(this.option, option, true);\n    var layoutMode = this.layoutMode;\n\n    if (layoutMode) {\n      layout.mergeLayoutParam(this.option, option, layoutMode);\n    }\n  },\n  // Hooker after init or mergeOption\n  optionUpdated: function (newCptOption, isInit) {},\n  getDefaultOption: function () {\n    if (!clazzUtil.hasOwn(this, '__defaultOption')) {\n      var optList = [];\n      var Class = this.constructor;\n\n      while (Class) {\n        var opt = Class.prototype.defaultOption;\n        opt && optList.push(opt);\n        Class = Class.superClass;\n      }\n\n      var defaultOption = {};\n\n      for (var i = optList.length - 1; i >= 0; i--) {\n        defaultOption = zrUtil.merge(defaultOption, optList[i], true);\n      }\n\n      clazzUtil.set(this, '__defaultOption', defaultOption);\n    }\n\n    return clazzUtil.get(this, '__defaultOption');\n  },\n  getReferringComponents: function (mainType) {\n    return this.ecModel.queryComponents({\n      mainType: mainType,\n      index: this.get(mainType + 'Index', true),\n      id: this.get(mainType + 'Id', true)\n    });\n  }\n}); // Reset ComponentModel.extend, add preConstruct.\n// clazzUtil.enableClassExtend(\n//     ComponentModel,\n//     function (option, parentModel, ecModel, extraOpt) {\n//         // Set dependentModels, componentIndex, name, id, mainType, subType.\n//         zrUtil.extend(this, extraOpt);\n//         this.uid = componentUtil.getUID('componentModel');\n//         // this.setReadOnly([\n//         //     'type', 'id', 'uid', 'name', 'mainType', 'subType',\n//         //     'dependentModels', 'componentIndex'\n//         // ]);\n//     }\n// );\n// Add capability of registerClass, getClass, hasClass, registerSubTypeDefaulter and so on.\n\nclazzUtil.enableClassManagement(ComponentModel, {\n  registerWhenExtend: true\n});\ncomponentUtil.enableSubTypeDefaulter(ComponentModel); // Add capability of ComponentModel.topologicalTravel.\n\ncomponentUtil.enableTopologicalTravel(ComponentModel, getDependencies);\n\nfunction getDependencies(componentType) {\n  var deps = [];\n  zrUtil.each(ComponentModel.getClassesByMainType(componentType), function (Clazz) {\n    arrayPush.apply(deps, Clazz.prototype.dependencies || []);\n  }); // Ensure main type\n\n  return zrUtil.map(deps, function (type) {\n    return clazzUtil.parseClassType(type).main;\n  });\n}\n\nzrUtil.mixin(ComponentModel, boxLayoutMixin);\nvar _default = ComponentModel;\nmodule.exports = _default;","var _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../util/model\");\n\nvar Model = require(\"./Model\");\n\nvar ComponentModel = require(\"./Component\");\n\nvar globalDefault = require(\"./globalDefault\");\n\nvar colorPaletteMinin = require(\"./mixin/colorPalette\");\n\n/**\n * ECharts global model\n *\n * @module {echarts/model/Global}\n */\n\n/**\n * Caution: If the mechanism should be changed some day, these cases\n * should be considered:\n *\n * (1) In `merge option` mode, if using the same option to call `setOption`\n * many times, the result should be the same (try our best to ensure that).\n * (2) In `merge option` mode, if a component has no id/name specified, it\n * will be merged by index, and the result sequence of the components is\n * consistent to the original sequence.\n * (3) `reset` feature (in toolbox). Find detailed info in comments about\n * `mergeOption` in module:echarts/model/OptionManager.\n */\nvar each = zrUtil.each;\nvar filter = zrUtil.filter;\nvar map = zrUtil.map;\nvar isArray = zrUtil.isArray;\nvar indexOf = zrUtil.indexOf;\nvar isObject = zrUtil.isObject;\nvar OPTION_INNER_KEY = '\\0_ec_inner';\n/**\n * @alias module:echarts/model/Global\n *\n * @param {Object} option\n * @param {module:echarts/model/Model} parentModel\n * @param {Object} theme\n */\n\nvar GlobalModel = Model.extend({\n  constructor: GlobalModel,\n  init: function (option, parentModel, theme, optionManager) {\n    theme = theme || {};\n    this.option = null; // Mark as not initialized.\n\n    /**\n     * @type {module:echarts/model/Model}\n     * @private\n     */\n\n    this._theme = new Model(theme);\n    /**\n     * @type {module:echarts/model/OptionManager}\n     */\n\n    this._optionManager = optionManager;\n  },\n  setOption: function (option, optionPreprocessorFuncs) {\n    zrUtil.assert(!(OPTION_INNER_KEY in option), 'please use chart.getOption()');\n\n    this._optionManager.setOption(option, optionPreprocessorFuncs);\n\n    this.resetOption(null);\n  },\n\n  /**\n   * @param {string} type null/undefined: reset all.\n   *                      'recreate': force recreate all.\n   *                      'timeline': only reset timeline option\n   *                      'media': only reset media query option\n   * @return {boolean} Whether option changed.\n   */\n  resetOption: function (type) {\n    var optionChanged = false;\n    var optionManager = this._optionManager;\n\n    if (!type || type === 'recreate') {\n      var baseOption = optionManager.mountOption(type === 'recreate');\n\n      if (!this.option || type === 'recreate') {\n        initBase.call(this, baseOption);\n      } else {\n        this.restoreData();\n        this.mergeOption(baseOption);\n      }\n\n      optionChanged = true;\n    }\n\n    if (type === 'timeline' || type === 'media') {\n      this.restoreData();\n    }\n\n    if (!type || type === 'recreate' || type === 'timeline') {\n      var timelineOption = optionManager.getTimelineOption(this);\n      timelineOption && (this.mergeOption(timelineOption), optionChanged = true);\n    }\n\n    if (!type || type === 'recreate' || type === 'media') {\n      var mediaOptions = optionManager.getMediaOption(this, this._api);\n\n      if (mediaOptions.length) {\n        each(mediaOptions, function (mediaOption) {\n          this.mergeOption(mediaOption, optionChanged = true);\n        }, this);\n      }\n    }\n\n    return optionChanged;\n  },\n\n  /**\n   * @protected\n   */\n  mergeOption: function (newOption) {\n    var option = this.option;\n    var componentsMap = this._componentsMap;\n    var newCptTypes = []; //  component model  merge\n\n    each(newOption, function (componentOption, mainType) {\n      if (componentOption == null) {\n        return;\n      }\n\n      if (!ComponentModel.hasClass(mainType)) {\n        option[mainType] = option[mainType] == null ? zrUtil.clone(componentOption) : zrUtil.merge(option[mainType], componentOption, true);\n      } else {\n        newCptTypes.push(mainType);\n      }\n    }); // FIXME OPTION \n\n    ComponentModel.topologicalTravel(newCptTypes, ComponentModel.getAllClassMainTypes(), visitComponent, this);\n    this._seriesIndices = this._seriesIndices || [];\n\n    function visitComponent(mainType, dependencies) {\n      var newCptOptionList = modelUtil.normalizeToArray(newOption[mainType]);\n      var mapResult = modelUtil.mappingToExists(componentsMap.get(mainType), newCptOptionList);\n      modelUtil.makeIdAndName(mapResult); // Set mainType and complete subType.\n\n      each(mapResult, function (item, index) {\n        var opt = item.option;\n\n        if (isObject(opt)) {\n          item.keyInfo.mainType = mainType;\n          item.keyInfo.subType = determineSubType(mainType, opt, item.exist);\n        }\n      });\n      var dependentModels = getComponentsByTypes(componentsMap, dependencies);\n      option[mainType] = [];\n      componentsMap.set(mainType, []);\n      each(mapResult, function (resultItem, index) {\n        var componentModel = resultItem.exist;\n        var newCptOption = resultItem.option;\n        zrUtil.assert(isObject(newCptOption) || componentModel, 'Empty component definition'); // Consider where is no new option and should be merged using {},\n        // see removeEdgeAndAdd in topologicalTravel and\n        // ComponentModel.getAllClassMainTypes.\n\n        if (!newCptOption) {\n          componentModel.mergeOption({}, this);\n          componentModel.optionUpdated({}, false);\n        } else {\n          var ComponentModelClass = ComponentModel.getClass(mainType, resultItem.keyInfo.subType, true);\n\n          if (componentModel && componentModel instanceof ComponentModelClass) {\n            componentModel.name = resultItem.keyInfo.name;\n            componentModel.mergeOption(newCptOption, this);\n            componentModel.optionUpdated(newCptOption, false);\n          } else {\n            // PENDING Global as parent ?\n            var extraOpt = zrUtil.extend({\n              dependentModels: dependentModels,\n              componentIndex: index\n            }, resultItem.keyInfo);\n            componentModel = new ComponentModelClass(newCptOption, this, this, extraOpt);\n            zrUtil.extend(componentModel, extraOpt);\n            componentModel.init(newCptOption, this, this, extraOpt); // Call optionUpdated after init.\n            // newCptOption has been used as componentModel.option\n            // and may be merged with theme and default, so pass null\n            // to avoid confusion.\n\n            componentModel.optionUpdated(null, true);\n          }\n        }\n\n        componentsMap.get(mainType)[index] = componentModel;\n        option[mainType][index] = componentModel.option;\n      }, this); // Backup series for filtering.\n\n      if (mainType === 'series') {\n        this._seriesIndices = createSeriesIndices(componentsMap.get('series'));\n      }\n    }\n  },\n\n  /**\n   * Get option for output (cloned option and inner info removed)\n   * @public\n   * @return {Object}\n   */\n  getOption: function () {\n    var option = zrUtil.clone(this.option);\n    each(option, function (opts, mainType) {\n      if (ComponentModel.hasClass(mainType)) {\n        var opts = modelUtil.normalizeToArray(opts);\n\n        for (var i = opts.length - 1; i >= 0; i--) {\n          // Remove options with inner id.\n          if (modelUtil.isIdInner(opts[i])) {\n            opts.splice(i, 1);\n          }\n        }\n\n        option[mainType] = opts;\n      }\n    });\n    delete option[OPTION_INNER_KEY];\n    return option;\n  },\n\n  /**\n   * @return {module:echarts/model/Model}\n   */\n  getTheme: function () {\n    return this._theme;\n  },\n\n  /**\n   * @param {string} mainType\n   * @param {number} [idx=0]\n   * @return {module:echarts/model/Component}\n   */\n  getComponent: function (mainType, idx) {\n    var list = this._componentsMap.get(mainType);\n\n    if (list) {\n      return list[idx || 0];\n    }\n  },\n\n  /**\n   * If none of index and id and name used, return all components with mainType.\n   * @param {Object} condition\n   * @param {string} condition.mainType\n   * @param {string} [condition.subType] If ignore, only query by mainType\n   * @param {number|Array.<number>} [condition.index] Either input index or id or name.\n   * @param {string|Array.<string>} [condition.id] Either input index or id or name.\n   * @param {string|Array.<string>} [condition.name] Either input index or id or name.\n   * @return {Array.<module:echarts/model/Component>}\n   */\n  queryComponents: function (condition) {\n    var mainType = condition.mainType;\n\n    if (!mainType) {\n      return [];\n    }\n\n    var index = condition.index;\n    var id = condition.id;\n    var name = condition.name;\n\n    var cpts = this._componentsMap.get(mainType);\n\n    if (!cpts || !cpts.length) {\n      return [];\n    }\n\n    var result;\n\n    if (index != null) {\n      if (!isArray(index)) {\n        index = [index];\n      }\n\n      result = filter(map(index, function (idx) {\n        return cpts[idx];\n      }), function (val) {\n        return !!val;\n      });\n    } else if (id != null) {\n      var isIdArray = isArray(id);\n      result = filter(cpts, function (cpt) {\n        return isIdArray && indexOf(id, cpt.id) >= 0 || !isIdArray && cpt.id === id;\n      });\n    } else if (name != null) {\n      var isNameArray = isArray(name);\n      result = filter(cpts, function (cpt) {\n        return isNameArray && indexOf(name, cpt.name) >= 0 || !isNameArray && cpt.name === name;\n      });\n    } else {\n      // Return all components with mainType\n      result = cpts.slice();\n    }\n\n    return filterBySubType(result, condition);\n  },\n\n  /**\n   * The interface is different from queryComponents,\n   * which is convenient for inner usage.\n   *\n   * @usage\n   * var result = findComponents(\n   *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}}\n   * );\n   * var result = findComponents(\n   *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}}\n   * );\n   * var result = findComponents(\n   *     {mainType: 'series'},\n   *     function (model, index) {...}\n   * );\n   * // result like [component0, componnet1, ...]\n   *\n   * @param {Object} condition\n   * @param {string} condition.mainType Mandatory.\n   * @param {string} [condition.subType] Optional.\n   * @param {Object} [condition.query] like {xxxIndex, xxxId, xxxName},\n   *        where xxx is mainType.\n   *        If query attribute is null/undefined or has no index/id/name,\n   *        do not filtering by query conditions, which is convenient for\n   *        no-payload situations or when target of action is global.\n   * @param {Function} [condition.filter] parameter: component, return boolean.\n   * @return {Array.<module:echarts/model/Component>}\n   */\n  findComponents: function (condition) {\n    var query = condition.query;\n    var mainType = condition.mainType;\n    var queryCond = getQueryCond(query);\n    var result = queryCond ? this.queryComponents(queryCond) : this._componentsMap.get(mainType);\n    return doFilter(filterBySubType(result, condition));\n\n    function getQueryCond(q) {\n      var indexAttr = mainType + 'Index';\n      var idAttr = mainType + 'Id';\n      var nameAttr = mainType + 'Name';\n      return q && (q[indexAttr] != null || q[idAttr] != null || q[nameAttr] != null) ? {\n        mainType: mainType,\n        // subType will be filtered finally.\n        index: q[indexAttr],\n        id: q[idAttr],\n        name: q[nameAttr]\n      } : null;\n    }\n\n    function doFilter(res) {\n      return condition.filter ? filter(res, condition.filter) : res;\n    }\n  },\n\n  /**\n   * @usage\n   * eachComponent('legend', function (legendModel, index) {\n   *     ...\n   * });\n   * eachComponent(function (componentType, model, index) {\n   *     // componentType does not include subType\n   *     // (componentType is 'xxx' but not 'xxx.aa')\n   * });\n   * eachComponent(\n   *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}},\n   *     function (model, index) {...}\n   * );\n   * eachComponent(\n   *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}},\n   *     function (model, index) {...}\n   * );\n   *\n   * @param {string|Object=} mainType When mainType is object, the definition\n   *                                  is the same as the method 'findComponents'.\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachComponent: function (mainType, cb, context) {\n    var componentsMap = this._componentsMap;\n\n    if (typeof mainType === 'function') {\n      context = cb;\n      cb = mainType;\n      componentsMap.each(function (components, componentType) {\n        each(components, function (component, index) {\n          cb.call(context, componentType, component, index);\n        });\n      });\n    } else if (zrUtil.isString(mainType)) {\n      each(componentsMap.get(mainType), cb, context);\n    } else if (isObject(mainType)) {\n      var queryResult = this.findComponents(mainType);\n      each(queryResult, cb, context);\n    }\n  },\n\n  /**\n   * @param {string} name\n   * @return {Array.<module:echarts/model/Series>}\n   */\n  getSeriesByName: function (name) {\n    var series = this._componentsMap.get('series');\n\n    return filter(series, function (oneSeries) {\n      return oneSeries.name === name;\n    });\n  },\n\n  /**\n   * @param {number} seriesIndex\n   * @return {module:echarts/model/Series}\n   */\n  getSeriesByIndex: function (seriesIndex) {\n    return this._componentsMap.get('series')[seriesIndex];\n  },\n\n  /**\n   * @param {string} subType\n   * @return {Array.<module:echarts/model/Series>}\n   */\n  getSeriesByType: function (subType) {\n    var series = this._componentsMap.get('series');\n\n    return filter(series, function (oneSeries) {\n      return oneSeries.subType === subType;\n    });\n  },\n\n  /**\n   * @return {Array.<module:echarts/model/Series>}\n   */\n  getSeries: function () {\n    return this._componentsMap.get('series').slice();\n  },\n\n  /**\n   * After filtering, series may be different\n   * frome raw series.\n   *\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachSeries: function (cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n\n      cb.call(context, series, rawSeriesIndex);\n    }, this);\n  },\n\n  /**\n   * Iterate raw series before filtered.\n   *\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachRawSeries: function (cb, context) {\n    each(this._componentsMap.get('series'), cb, context);\n  },\n\n  /**\n   * After filtering, series may be different.\n   * frome raw series.\n   *\n   * @parma {string} subType\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachSeriesByType: function (subType, cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n\n      if (series.subType === subType) {\n        cb.call(context, series, rawSeriesIndex);\n      }\n    }, this);\n  },\n\n  /**\n   * Iterate raw series before filtered of given type.\n   *\n   * @parma {string} subType\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachRawSeriesByType: function (subType, cb, context) {\n    return each(this.getSeriesByType(subType), cb, context);\n  },\n\n  /**\n   * @param {module:echarts/model/Series} seriesModel\n   */\n  isSeriesFiltered: function (seriesModel) {\n    assertSeriesInitialized(this);\n    return zrUtil.indexOf(this._seriesIndices, seriesModel.componentIndex) < 0;\n  },\n\n  /**\n   * @return {Array.<number>}\n   */\n  getCurrentSeriesIndices: function () {\n    return (this._seriesIndices || []).slice();\n  },\n\n  /**\n   * @param {Function} cb\n   * @param {*} context\n   */\n  filterSeries: function (cb, context) {\n    assertSeriesInitialized(this);\n    var filteredSeries = filter(this._componentsMap.get('series'), cb, context);\n    this._seriesIndices = createSeriesIndices(filteredSeries);\n  },\n  restoreData: function () {\n    var componentsMap = this._componentsMap;\n    this._seriesIndices = createSeriesIndices(componentsMap.get('series'));\n    var componentTypes = [];\n    componentsMap.each(function (components, componentType) {\n      componentTypes.push(componentType);\n    });\n    ComponentModel.topologicalTravel(componentTypes, ComponentModel.getAllClassMainTypes(), function (componentType, dependencies) {\n      each(componentsMap.get(componentType), function (component) {\n        component.restoreData();\n      });\n    });\n  }\n});\n/**\n * @inner\n */\n\nfunction mergeTheme(option, theme) {\n  zrUtil.each(theme, function (themeItem, name) {\n    //  component model  merge  model \n    if (!ComponentModel.hasClass(name)) {\n      if (typeof themeItem === 'object') {\n        option[name] = !option[name] ? zrUtil.clone(themeItem) : zrUtil.merge(option[name], themeItem, false);\n      } else {\n        if (option[name] == null) {\n          option[name] = themeItem;\n        }\n      }\n    }\n  });\n}\n\nfunction initBase(baseOption) {\n  baseOption = baseOption; // Using OPTION_INNER_KEY to mark that this option can not be used outside,\n  // i.e. `chart.setOption(chart.getModel().option);` is forbiden.\n\n  this.option = {};\n  this.option[OPTION_INNER_KEY] = 1;\n  /**\n   * Init with series: [], in case of calling findSeries method\n   * before series initialized.\n   * @type {Object.<string, Array.<module:echarts/model/Model>>}\n   * @private\n   */\n\n  this._componentsMap = zrUtil.createHashMap({\n    series: []\n  });\n  /**\n   * Mapping between filtered series list and raw series list.\n   * key: filtered series indices, value: raw series indices.\n   * @type {Array.<nubmer>}\n   * @private\n   */\n\n  this._seriesIndices = null;\n  mergeTheme(baseOption, this._theme.option); // TODO Needs clone when merging to the unexisted property\n\n  zrUtil.merge(baseOption, globalDefault, false);\n  this.mergeOption(baseOption);\n}\n/**\n * @inner\n * @param {Array.<string>|string} types model types\n * @return {Object} key: {string} type, value: {Array.<Object>} models\n */\n\n\nfunction getComponentsByTypes(componentsMap, types) {\n  if (!zrUtil.isArray(types)) {\n    types = types ? [types] : [];\n  }\n\n  var ret = {};\n  each(types, function (type) {\n    ret[type] = (componentsMap.get(type) || []).slice();\n  });\n  return ret;\n}\n/**\n * @inner\n */\n\n\nfunction determineSubType(mainType, newCptOption, existComponent) {\n  var subType = newCptOption.type ? newCptOption.type : existComponent ? existComponent.subType // Use determineSubType only when there is no existComponent.\n  : ComponentModel.determineSubType(mainType, newCptOption); // tooltip, markline, markpoint may always has no subType\n\n  return subType;\n}\n/**\n * @inner\n */\n\n\nfunction createSeriesIndices(seriesModels) {\n  return map(seriesModels, function (series) {\n    return series.componentIndex;\n  }) || [];\n}\n/**\n * @inner\n */\n\n\nfunction filterBySubType(components, condition) {\n  // Using hasOwnProperty for restrict. Consider\n  // subType is undefined in user payload.\n  return condition.hasOwnProperty('subType') ? filter(components, function (cpt) {\n    return cpt.subType === condition.subType;\n  }) : components;\n}\n/**\n * @inner\n */\n\n\nfunction assertSeriesInitialized(ecModel) {}\n\nzrUtil.mixin(GlobalModel, colorPaletteMinin);\nvar _default = GlobalModel;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar clazzUtil = require(\"../util/clazz\");\n\nvar lineStyleMixin = require(\"./mixin/lineStyle\");\n\nvar areaStyleMixin = require(\"./mixin/areaStyle\");\n\nvar textStyleMixin = require(\"./mixin/textStyle\");\n\nvar itemStyleMixin = require(\"./mixin/itemStyle\");\n\n/**\n * @module echarts/model/Model\n */\nvar mixin = zrUtil.mixin;\n/**\n * @alias module:echarts/model/Model\n * @constructor\n * @param {Object} option\n * @param {module:echarts/model/Model} [parentModel]\n * @param {module:echarts/model/Global} [ecModel]\n */\n\nfunction Model(option, parentModel, ecModel) {\n  /**\n   * @type {module:echarts/model/Model}\n   * @readOnly\n   */\n  this.parentModel = parentModel;\n  /**\n   * @type {module:echarts/model/Global}\n   * @readOnly\n   */\n\n  this.ecModel = ecModel;\n  /**\n   * @type {Object}\n   * @protected\n   */\n\n  this.option = option; // Simple optimization\n  // if (this.init) {\n  //     if (arguments.length <= 4) {\n  //         this.init(option, parentModel, ecModel, extraOpt);\n  //     }\n  //     else {\n  //         this.init.apply(this, arguments);\n  //     }\n  // }\n}\n\nModel.prototype = {\n  constructor: Model,\n\n  /**\n   * Model \n   * @param {Object} option\n   */\n  init: null,\n\n  /**\n   *  Option merge\n   */\n  mergeOption: function (option) {\n    zrUtil.merge(this.option, option, true);\n  },\n\n  /**\n   * @param {string|Array.<string>} path\n   * @param {boolean} [ignoreParent=false]\n   * @return {*}\n   */\n  get: function (path, ignoreParent) {\n    if (path == null) {\n      return this.option;\n    }\n\n    return doGet(this.option, this.parsePath(path), !ignoreParent && getParent(this, path));\n  },\n\n  /**\n   * @param {string} key\n   * @param {boolean} [ignoreParent=false]\n   * @return {*}\n   */\n  getShallow: function (key, ignoreParent) {\n    var option = this.option;\n    var val = option == null ? option : option[key];\n    var parentModel = !ignoreParent && getParent(this, key);\n\n    if (val == null && parentModel) {\n      val = parentModel.getShallow(key);\n    }\n\n    return val;\n  },\n\n  /**\n   * @param {string|Array.<string>} [path]\n   * @param {module:echarts/model/Model} [parentModel]\n   * @return {module:echarts/model/Model}\n   */\n  getModel: function (path, parentModel) {\n    var obj = path == null ? this.option : doGet(this.option, path = this.parsePath(path));\n    var thisParentModel;\n    parentModel = parentModel || (thisParentModel = getParent(this, path)) && thisParentModel.getModel(path);\n    return new Model(obj, parentModel, this.ecModel);\n  },\n\n  /**\n   * If model has option\n   */\n  isEmpty: function () {\n    return this.option == null;\n  },\n  restoreData: function () {},\n  // Pending\n  clone: function () {\n    var Ctor = this.constructor;\n    return new Ctor(zrUtil.clone(this.option));\n  },\n  setReadOnly: function (properties) {\n    clazzUtil.setReadOnly(this, properties);\n  },\n  // If path is null/undefined, return null/undefined.\n  parsePath: function (path) {\n    if (typeof path === 'string') {\n      path = path.split('.');\n    }\n\n    return path;\n  },\n\n  /**\n   * @param {Function} getParentMethod\n   *        param {Array.<string>|string} path\n   *        return {module:echarts/model/Model}\n   */\n  customizeGetParent: function (getParentMethod) {\n    clazzUtil.set(this, 'getParent', getParentMethod);\n  },\n  isAnimationEnabled: function () {\n    if (!env.node) {\n      if (this.option.animation != null) {\n        return !!this.option.animation;\n      } else if (this.parentModel) {\n        return this.parentModel.isAnimationEnabled();\n      }\n    }\n  }\n};\n\nfunction doGet(obj, pathArr, parentModel) {\n  for (var i = 0; i < pathArr.length; i++) {\n    // Ignore empty\n    if (!pathArr[i]) {\n      continue;\n    } // obj could be number/string/... (like 0)\n\n\n    obj = obj && typeof obj === 'object' ? obj[pathArr[i]] : null;\n\n    if (obj == null) {\n      break;\n    }\n  }\n\n  if (obj == null && parentModel) {\n    obj = parentModel.get(pathArr);\n  }\n\n  return obj;\n} // `path` can be null/undefined\n\n\nfunction getParent(model, path) {\n  var getParentMethod = clazzUtil.get(model, 'getParent');\n  return getParentMethod ? getParentMethod.call(model, path) : model.parentModel;\n} // Enable Model.extend.\n\n\nclazzUtil.enableClassExtend(Model);\nmixin(Model, lineStyleMixin);\nmixin(Model, areaStyleMixin);\nmixin(Model, textStyleMixin);\nmixin(Model, itemStyleMixin);\nvar _default = Model;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../util/model\");\n\nvar ComponentModel = require(\"./Component\");\n\n/**\n * ECharts option manager\n *\n * @module {echarts/model/OptionManager}\n */\nvar each = zrUtil.each;\nvar clone = zrUtil.clone;\nvar map = zrUtil.map;\nvar merge = zrUtil.merge;\nvar QUERY_REG = /^(min|max)?(.+)$/;\n/**\n * TERM EXPLANATIONS:\n *\n * [option]:\n *\n *     An object that contains definitions of components. For example:\n *     var option = {\n *         title: {...},\n *         legend: {...},\n *         visualMap: {...},\n *         series: [\n *             {data: [...]},\n *             {data: [...]},\n *             ...\n *         ]\n *     };\n *\n * [rawOption]:\n *\n *     An object input to echarts.setOption. 'rawOption' may be an\n *     'option', or may be an object contains multi-options. For example:\n *     var option = {\n *         baseOption: {\n *             title: {...},\n *             legend: {...},\n *             series: [\n *                 {data: [...]},\n *                 {data: [...]},\n *                 ...\n *             ]\n *         },\n *         timeline: {...},\n *         options: [\n *             {title: {...}, series: {data: [...]}},\n *             {title: {...}, series: {data: [...]}},\n *             ...\n *         ],\n *         media: [\n *             {\n *                 query: {maxWidth: 320},\n *                 option: {series: {x: 20}, visualMap: {show: false}}\n *             },\n *             {\n *                 query: {minWidth: 320, maxWidth: 720},\n *                 option: {series: {x: 500}, visualMap: {show: true}}\n *             },\n *             {\n *                 option: {series: {x: 1200}, visualMap: {show: true}}\n *             }\n *         ]\n *     };\n *\n * @alias module:echarts/model/OptionManager\n * @param {module:echarts/ExtensionAPI} api\n */\n\nfunction OptionManager(api) {\n  /**\n   * @private\n   * @type {module:echarts/ExtensionAPI}\n   */\n  this._api = api;\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n\n  this._timelineOptions = [];\n  /**\n   * @private\n   * @type {Array.<Object>}\n   */\n\n  this._mediaList = [];\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._mediaDefault;\n  /**\n   * -1, means default.\n   * empty means no media.\n   * @private\n   * @type {Array.<number>}\n   */\n\n  this._currentMediaIndices = [];\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._optionBackup;\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._newBaseOption;\n} // timeline.notMerge is not supported in ec3. Firstly there is rearly\n// case that notMerge is needed. Secondly supporting 'notMerge' requires\n// rawOption cloned and backuped when timeline changed, which does no\n// good to performance. What's more, that both timeline and setOption\n// method supply 'notMerge' brings complex and some problems.\n// Consider this case:\n// (step1) chart.setOption({timeline: {notMerge: false}, ...}, false);\n// (step2) chart.setOption({timeline: {notMerge: true}, ...}, false);\n\n\nOptionManager.prototype = {\n  constructor: OptionManager,\n\n  /**\n   * @public\n   * @param {Object} rawOption Raw option.\n   * @param {module:echarts/model/Global} ecModel\n   * @param {Array.<Function>} optionPreprocessorFuncs\n   * @return {Object} Init option\n   */\n  setOption: function (rawOption, optionPreprocessorFuncs) {\n    rawOption = clone(rawOption, true); // FIXME\n    //  timeline options  media baseOption\n\n    var oldOptionBackup = this._optionBackup;\n    var newParsedOption = parseRawOption.call(this, rawOption, optionPreprocessorFuncs, !oldOptionBackup);\n    this._newBaseOption = newParsedOption.baseOption; // For setOption at second time (using merge mode);\n\n    if (oldOptionBackup) {\n      // Only baseOption can be merged.\n      mergeOption(oldOptionBackup.baseOption, newParsedOption.baseOption); // For simplicity, timeline options and media options do not support merge,\n      // that is, if you `setOption` twice and both has timeline options, the latter\n      // timeline opitons will not be merged to the formers, but just substitude them.\n\n      if (newParsedOption.timelineOptions.length) {\n        oldOptionBackup.timelineOptions = newParsedOption.timelineOptions;\n      }\n\n      if (newParsedOption.mediaList.length) {\n        oldOptionBackup.mediaList = newParsedOption.mediaList;\n      }\n\n      if (newParsedOption.mediaDefault) {\n        oldOptionBackup.mediaDefault = newParsedOption.mediaDefault;\n      }\n    } else {\n      this._optionBackup = newParsedOption;\n    }\n  },\n\n  /**\n   * @param {boolean} isRecreate\n   * @return {Object}\n   */\n  mountOption: function (isRecreate) {\n    var optionBackup = this._optionBackup; // TODO\n    // resetclone\n\n    this._timelineOptions = map(optionBackup.timelineOptions, clone);\n    this._mediaList = map(optionBackup.mediaList, clone);\n    this._mediaDefault = clone(optionBackup.mediaDefault);\n    this._currentMediaIndices = [];\n    return clone(isRecreate // this._optionBackup.baseOption, which is created at the first `setOption`\n    // called, and is merged into every new option by inner method `mergeOption`\n    // each time `setOption` called, can be only used in `isRecreate`, because\n    // its reliability is under suspicion. In other cases option merge is\n    // performed by `model.mergeOption`.\n    ? optionBackup.baseOption : this._newBaseOption);\n  },\n\n  /**\n   * @param {module:echarts/model/Global} ecModel\n   * @return {Object}\n   */\n  getTimelineOption: function (ecModel) {\n    var option;\n    var timelineOptions = this._timelineOptions;\n\n    if (timelineOptions.length) {\n      // getTimelineOption can only be called after ecModel inited,\n      // so we can get currentIndex from timelineModel.\n      var timelineModel = ecModel.getComponent('timeline');\n\n      if (timelineModel) {\n        option = clone(timelineOptions[timelineModel.getCurrentIndex()], true);\n      }\n    }\n\n    return option;\n  },\n\n  /**\n   * @param {module:echarts/model/Global} ecModel\n   * @return {Array.<Object>}\n   */\n  getMediaOption: function (ecModel) {\n    var ecWidth = this._api.getWidth();\n\n    var ecHeight = this._api.getHeight();\n\n    var mediaList = this._mediaList;\n    var mediaDefault = this._mediaDefault;\n    var indices = [];\n    var result = []; // No media defined.\n\n    if (!mediaList.length && !mediaDefault) {\n      return result;\n    } // Multi media may be applied, the latter defined media has higher priority.\n\n\n    for (var i = 0, len = mediaList.length; i < len; i++) {\n      if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {\n        indices.push(i);\n      }\n    } // FIXME\n    // mediaDefault\n\n\n    if (!indices.length && mediaDefault) {\n      indices = [-1];\n    }\n\n    if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {\n      result = map(indices, function (index) {\n        return clone(index === -1 ? mediaDefault.option : mediaList[index].option);\n      });\n    } // Otherwise return nothing.\n\n\n    this._currentMediaIndices = indices;\n    return result;\n  }\n};\n\nfunction parseRawOption(rawOption, optionPreprocessorFuncs, isNew) {\n  var timelineOptions = [];\n  var mediaList = [];\n  var mediaDefault;\n  var baseOption; // Compatible with ec2.\n\n  var timelineOpt = rawOption.timeline;\n\n  if (rawOption.baseOption) {\n    baseOption = rawOption.baseOption;\n  } // For timeline\n\n\n  if (timelineOpt || rawOption.options) {\n    baseOption = baseOption || {};\n    timelineOptions = (rawOption.options || []).slice();\n  } // For media query\n\n\n  if (rawOption.media) {\n    baseOption = baseOption || {};\n    var media = rawOption.media;\n    each(media, function (singleMedia) {\n      if (singleMedia && singleMedia.option) {\n        if (singleMedia.query) {\n          mediaList.push(singleMedia);\n        } else if (!mediaDefault) {\n          // Use the first media default.\n          mediaDefault = singleMedia;\n        }\n      }\n    });\n  } // For normal option\n\n\n  if (!baseOption) {\n    baseOption = rawOption;\n  } // Set timelineOpt to baseOption in ec3,\n  // which is convenient for merge option.\n\n\n  if (!baseOption.timeline) {\n    baseOption.timeline = timelineOpt;\n  } // Preprocess.\n\n\n  each([baseOption].concat(timelineOptions).concat(zrUtil.map(mediaList, function (media) {\n    return media.option;\n  })), function (option) {\n    each(optionPreprocessorFuncs, function (preProcess) {\n      preProcess(option, isNew);\n    });\n  });\n  return {\n    baseOption: baseOption,\n    timelineOptions: timelineOptions,\n    mediaDefault: mediaDefault,\n    mediaList: mediaList\n  };\n}\n/**\n * @see <http://www.w3.org/TR/css3-mediaqueries/#media1>\n * Support: width, height, aspectRatio\n * Can use max or min as prefix.\n */\n\n\nfunction applyMediaQuery(query, ecWidth, ecHeight) {\n  var realMap = {\n    width: ecWidth,\n    height: ecHeight,\n    aspectratio: ecWidth / ecHeight // lowser case for convenientce.\n\n  };\n  var applicatable = true;\n  zrUtil.each(query, function (value, attr) {\n    var matched = attr.match(QUERY_REG);\n\n    if (!matched || !matched[1] || !matched[2]) {\n      return;\n    }\n\n    var operator = matched[1];\n    var realAttr = matched[2].toLowerCase();\n\n    if (!compare(realMap[realAttr], value, operator)) {\n      applicatable = false;\n    }\n  });\n  return applicatable;\n}\n\nfunction compare(real, expect, operator) {\n  if (operator === 'min') {\n    return real >= expect;\n  } else if (operator === 'max') {\n    return real <= expect;\n  } else {\n    // Equals\n    return real === expect;\n  }\n}\n\nfunction indicesEquals(indices1, indices2) {\n  // indices is always order by asc and has only finite number.\n  return indices1.join(',') === indices2.join(',');\n}\n/**\n * Consider case:\n * `chart.setOption(opt1);`\n * Then user do some interaction like dataZoom, dataView changing.\n * `chart.setOption(opt2);`\n * Then user press 'reset button' in toolbox.\n *\n * After doing that all of the interaction effects should be reset, the\n * chart should be the same as the result of invoke\n * `chart.setOption(opt1); chart.setOption(opt2);`.\n *\n * Although it is not able ensure that\n * `chart.setOption(opt1); chart.setOption(opt2);` is equivalents to\n * `chart.setOption(merge(opt1, opt2));` exactly,\n * this might be the only simple way to implement that feature.\n *\n * MEMO: We've considered some other approaches:\n * 1. Each model handle its self restoration but not uniform treatment.\n *     (Too complex in logic and error-prone)\n * 2. Use a shadow ecModel. (Performace expensive)\n */\n\n\nfunction mergeOption(oldOption, newOption) {\n  newOption = newOption || {};\n  each(newOption, function (newCptOpt, mainType) {\n    if (newCptOpt == null) {\n      return;\n    }\n\n    var oldCptOpt = oldOption[mainType];\n\n    if (!ComponentModel.hasClass(mainType)) {\n      oldOption[mainType] = merge(oldCptOpt, newCptOpt, true);\n    } else {\n      newCptOpt = modelUtil.normalizeToArray(newCptOpt);\n      oldCptOpt = modelUtil.normalizeToArray(oldCptOpt);\n      var mapResult = modelUtil.mappingToExists(oldCptOpt, newCptOpt);\n      oldOption[mainType] = map(mapResult, function (item) {\n        return item.option && item.exist ? merge(item.exist, item.option, true) : item.exist || item.option;\n      });\n    }\n  });\n}\n\nvar _default = OptionManager;\nmodule.exports = _default;","var _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _format = require(\"../util/format\");\n\nvar formatTime = _format.formatTime;\nvar encodeHTML = _format.encodeHTML;\nvar addCommas = _format.addCommas;\nvar getTooltipMarker = _format.getTooltipMarker;\n\nvar _clazz = require(\"../util/clazz\");\n\nvar set = _clazz.set;\nvar get = _clazz.get;\n\nvar modelUtil = require(\"../util/model\");\n\nvar ComponentModel = require(\"./Component\");\n\nvar colorPaletteMixin = require(\"./mixin/colorPalette\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutParams = _layout.getLayoutParams;\nvar mergeLayoutParam = _layout.mergeLayoutParam;\nvar SeriesModel = ComponentModel.extend({\n  type: 'series.__base__',\n\n  /**\n   * @readOnly\n   */\n  seriesIndex: 0,\n  // coodinateSystem will be injected in the echarts/CoordinateSystem\n  coordinateSystem: null,\n\n  /**\n   * @type {Object}\n   * @protected\n   */\n  defaultOption: null,\n\n  /**\n   * Data provided for legend\n   * @type {Function}\n   */\n  // PENDING\n  legendDataProvider: null,\n\n  /**\n   * Access path of color for visual\n   */\n  visualColorAccessPath: 'itemStyle.normal.color',\n\n  /**\n   * Support merge layout params.\n   * Only support 'box' now (left/right/top/bottom/width/height).\n   * @type {string|Object} Object can be {ignoreSize: true}\n   * @readOnly\n   */\n  layoutMode: null,\n  init: function (option, parentModel, ecModel, extraOpt) {\n    /**\n     * @type {number}\n     * @readOnly\n     */\n    this.seriesIndex = this.componentIndex;\n    this.mergeDefaultAndTheme(option, ecModel);\n    var data = this.getInitialData(option, ecModel);\n\n    /**\n     * @type {module:echarts/data/List|module:echarts/data/Tree|module:echarts/data/Graph}\n     * @private\n     */\n    set(this, 'dataBeforeProcessed', data); // If we reverse the order (make data firstly, and then make\n    // dataBeforeProcessed by cloneShallow), cloneShallow will\n    // cause data.graph.data !== data when using\n    // module:echarts/data/Graph or module:echarts/data/Tree.\n    // See module:echarts/data/helper/linkList\n\n    this.restoreData();\n  },\n\n  /**\n   * Util for merge default and theme to option\n   * @param  {Object} option\n   * @param  {module:echarts/model/Global} ecModel\n   */\n  mergeDefaultAndTheme: function (option, ecModel) {\n    var layoutMode = this.layoutMode;\n    var inputPositionParams = layoutMode ? getLayoutParams(option) : {}; // Backward compat: using subType on theme.\n    // But if name duplicate between series subType\n    // (for example: parallel) add component mainType,\n    // add suffix 'Series'.\n\n    var themeSubType = this.subType;\n\n    if (ComponentModel.hasClass(themeSubType)) {\n      themeSubType += 'Series';\n    }\n\n    zrUtil.merge(option, ecModel.getTheme().get(this.subType));\n    zrUtil.merge(option, this.getDefaultOption()); // Default label emphasis `show`\n\n    modelUtil.defaultEmphasis(option.label, ['show']);\n    this.fillDataTextStyle(option.data);\n\n    if (layoutMode) {\n      mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  },\n  mergeOption: function (newSeriesOption, ecModel) {\n    newSeriesOption = zrUtil.merge(this.option, newSeriesOption, true);\n    this.fillDataTextStyle(newSeriesOption.data);\n    var layoutMode = this.layoutMode;\n\n    if (layoutMode) {\n      mergeLayoutParam(this.option, newSeriesOption, layoutMode);\n    }\n\n    var data = this.getInitialData(newSeriesOption, ecModel); // TODO Merge data?\n\n    if (data) {\n      set(this, 'data', data);\n      set(this, 'dataBeforeProcessed', data.cloneShallow());\n    }\n  },\n  fillDataTextStyle: function (data) {\n    // Default data label emphasis `show`\n    // FIXME Tree structure data ?\n    // FIXME Performance ?\n    if (data) {\n      var props = ['show'];\n\n      for (var i = 0; i < data.length; i++) {\n        if (data[i] && data[i].label) {\n          modelUtil.defaultEmphasis(data[i].label, props);\n        }\n      }\n    }\n  },\n\n  /**\n   * Init a data structure from data related option in series\n   * Must be overwritten\n   */\n  getInitialData: function () {},\n\n  /**\n   * @param {string} [dataType]\n   * @return {module:echarts/data/List}\n   */\n  getData: function (dataType) {\n    var data = get(this, 'data');\n    return dataType == null ? data : data.getLinkedData(dataType);\n  },\n\n  /**\n   * @param {module:echarts/data/List} data\n   */\n  setData: function (data) {\n    set(this, 'data', data);\n  },\n\n  /**\n   * Get data before processed\n   * @return {module:echarts/data/List}\n   */\n  getRawData: function () {\n    return get(this, 'dataBeforeProcessed');\n  },\n\n  /**\n   * Coord dimension to data dimension.\n   *\n   * By default the result is the same as dimensions of series data.\n   * But in some series data dimensions are different from coord dimensions (i.e.\n   * candlestick and boxplot). Override this method to handle those cases.\n   *\n   * Coord dimension to data dimension can be one-to-many\n   *\n   * @param {string} coordDim\n   * @return {Array.<string>} dimensions on the axis.\n   */\n  coordDimToDataDim: function (coordDim) {\n    return modelUtil.coordDimToDataDim(this.getData(), coordDim);\n  },\n\n  /**\n   * Convert data dimension to coord dimension.\n   *\n   * @param {string|number} dataDim\n   * @return {string}\n   */\n  dataDimToCoordDim: function (dataDim) {\n    return modelUtil.dataDimToCoordDim(this.getData(), dataDim);\n  },\n\n  /**\n   * Get base axis if has coordinate system and has axis.\n   * By default use coordSys.getBaseAxis();\n   * Can be overrided for some chart.\n   * @return {type} description\n   */\n  getBaseAxis: function () {\n    var coordSys = this.coordinateSystem;\n    return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();\n  },\n  // FIXME\n\n  /**\n   * Default tooltip formatter\n   *\n   * @param {number} dataIndex\n   * @param {boolean} [multipleSeries=false]\n   * @param {number} [dataType]\n   */\n  formatTooltip: function (dataIndex, multipleSeries, dataType) {\n    function formatArrayValue(value) {\n      var vertially = zrUtil.reduce(value, function (vertially, val, idx) {\n        var dimItem = data.getDimensionInfo(idx);\n        return vertially |= dimItem && dimItem.tooltip !== false && dimItem.tooltipName != null;\n      }, 0);\n      var result = [];\n      var tooltipDims = modelUtil.otherDimToDataDim(data, 'tooltip');\n      tooltipDims.length ? zrUtil.each(tooltipDims, function (dimIdx) {\n        setEachItem(data.get(dimIdx, dataIndex), dimIdx);\n      }) // By default, all dims is used on tooltip.\n      : zrUtil.each(value, setEachItem);\n\n      function setEachItem(val, dimIdx) {\n        var dimInfo = data.getDimensionInfo(dimIdx); // If `dimInfo.tooltip` is not set, show tooltip.\n\n        if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n          return;\n        }\n\n        var dimType = dimInfo.type;\n        var valStr = (vertially ? '- ' + (dimInfo.tooltipName || dimInfo.name) + ': ' : '') + (dimType === 'ordinal' ? val + '' : dimType === 'time' ? multipleSeries ? '' : formatTime('yyyy/MM/dd hh:mm:ss', val) : addCommas(val));\n        valStr && result.push(encodeHTML(valStr));\n      }\n\n      return (vertially ? '<br/>' : '') + result.join(vertially ? '<br/>' : ', ');\n    }\n\n    var data = get(this, 'data');\n    var value = this.getRawValue(dataIndex);\n    var formattedValue = zrUtil.isArray(value) ? formatArrayValue(value) : encodeHTML(addCommas(value));\n    var name = data.getName(dataIndex);\n    var color = data.getItemVisual(dataIndex, 'color');\n\n    if (zrUtil.isObject(color) && color.colorStops) {\n      color = (color.colorStops[0] || {}).color;\n    }\n\n    color = color || 'transparent';\n    var colorEl = getTooltipMarker(color);\n    var seriesName = this.name; // FIXME\n\n    if (seriesName === '\\0-') {\n      // Not show '-'\n      seriesName = '';\n    }\n\n    seriesName = seriesName ? encodeHTML(seriesName) + (!multipleSeries ? '<br/>' : ': ') : '';\n    return !multipleSeries ? seriesName + colorEl + (name ? encodeHTML(name) + ': ' + formattedValue : formattedValue) : colorEl + seriesName + formattedValue;\n  },\n\n  /**\n   * @return {boolean}\n   */\n  isAnimationEnabled: function () {\n    if (env.node) {\n      return false;\n    }\n\n    var animationEnabled = this.getShallow('animation');\n\n    if (animationEnabled) {\n      if (this.getData().count() > this.getShallow('animationThreshold')) {\n        animationEnabled = false;\n      }\n    }\n\n    return animationEnabled;\n  },\n  restoreData: function () {\n    set(this, 'data', get(this, 'dataBeforeProcessed').cloneShallow());\n  },\n  getColorFromPalette: function (name, scope) {\n    var ecModel = this.ecModel; // PENDING\n\n    var color = colorPaletteMixin.getColorFromPalette.call(this, name, scope);\n\n    if (!color) {\n      color = ecModel.getColorFromPalette(name, scope);\n    }\n\n    return color;\n  },\n\n  /**\n   * Get data indices for show tooltip content. See tooltip.\n   * @abstract\n   * @param {Array.<string>|string} dim\n   * @param {Array.<number>} value\n   * @param {module:echarts/coord/single/SingleAxis} baseAxis\n   * @return {Object} {dataIndices, nestestValue}.\n   */\n  getAxisTooltipData: null,\n\n  /**\n   * See tooltip.\n   * @abstract\n   * @param {number} dataIndex\n   * @return {Array.<number>} Point of tooltip. null/undefined can be returned.\n   */\n  getTooltipPosition: null\n});\nzrUtil.mixin(SeriesModel, modelUtil.dataFormatMixin);\nzrUtil.mixin(SeriesModel, colorPaletteMixin);\nvar _default = SeriesModel;\nmodule.exports = _default;","var platform = ''; // Navigator not exists in node\n\nif (typeof navigator !== 'undefined') {\n  platform = navigator.platform || '';\n}\n\nvar _default = {\n  // \n  // backgroundColor: 'rgba(0,0,0,0)',\n  // https://dribbble.com/shots/1065960-Infographic-Pie-chart-visualization\n  // color: ['#5793f3', '#d14a61', '#fd9c35', '#675bba', '#fec42c', '#dd4444', '#d4df5a', '#cd4870'],\n  // \n  // color: ['#bcd3bb', '#e88f70', '#edc1a5', '#9dc5c8', '#e1e8c8', '#7b7c68', '#e5b5b5', '#f0b489', '#928ea8', '#bda29a'],\n  // color: ['#cc5664', '#9bd6ec', '#ea946e', '#8acaaa', '#f1ec64', '#ee8686', '#a48dc1', '#5da6bc', '#b9dcae'],\n  // \n  color: ['#c23531', '#2f4554', '#61a0a8', '#d48265', '#91c7ae', '#749f83', '#ca8622', '#bda29a', '#6e7074', '#546570', '#c4ccd3'],\n  //  Grid \n  // grid: {},\n  // \n  textStyle: {\n    // color: '#000',\n    // decoration: 'none',\n    // PENDING\n    fontFamily: platform.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif',\n    // fontFamily: 'Arial, Verdana, sans-serif',\n    fontSize: 12,\n    fontStyle: 'normal',\n    fontWeight: 'normal'\n  },\n  // http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/\n  // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n  // Default is source-over\n  blendMode: null,\n  animation: 'auto',\n  animationDuration: 1000,\n  animationDurationUpdate: 300,\n  animationEasing: 'exponentialOut',\n  animationEasingUpdate: 'cubicOut',\n  animationThreshold: 2000,\n  // Configuration for progressive/incremental rendering\n  progressiveThreshold: 3000,\n  progressive: 400,\n  // Threshold of if use single hover layer to optimize.\n  // It is recommended that `hoverLayerThreshold` is equivalent to or less than\n  // `progressiveThreshold`, otherwise hover will cause restart of progressive,\n  // which is unexpected.\n  // see example <echarts/test/heatmap-large.html>.\n  hoverLayerThreshold: 3000,\n  // See: module:echarts/scale/Time\n  useUTC: false\n};\nmodule.exports = _default;","var makeStyleMapper = require(\"./makeStyleMapper\");\n\nvar getAreaStyle = makeStyleMapper([['fill', 'color'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['opacity'], ['shadowColor']]);\nvar _default = {\n  getAreaStyle: function (excludes, includes) {\n    return getAreaStyle(this, excludes, includes);\n  }\n};\nmodule.exports = _default;","var _default = {\n  getBoxLayoutParams: function () {\n    return {\n      left: this.get('left'),\n      top: this.get('top'),\n      right: this.get('right'),\n      bottom: this.get('bottom'),\n      width: this.get('width'),\n      height: this.get('height')\n    };\n  }\n};\nmodule.exports = _default;","var _clazz = require(\"../../util/clazz\");\n\nvar set = _clazz.set;\nvar get = _clazz.get;\nvar _default = {\n  clearColorPalette: function () {\n    set(this, 'colorIdx', 0);\n    set(this, 'colorNameMap', {});\n  },\n  getColorFromPalette: function (name, scope) {\n    scope = scope || this;\n    var colorIdx = get(scope, 'colorIdx') || 0;\n    var colorNameMap = get(scope, 'colorNameMap') || set(scope, 'colorNameMap', {}); // Use `hasOwnProperty` to avoid conflict with Object.prototype.\n\n    if (colorNameMap.hasOwnProperty(name)) {\n      return colorNameMap[name];\n    }\n\n    var colorPalette = this.get('color', true) || [];\n\n    if (!colorPalette.length) {\n      return;\n    }\n\n    var color = colorPalette[colorIdx];\n\n    if (name) {\n      colorNameMap[name] = color;\n    }\n\n    set(scope, 'colorIdx', (colorIdx + 1) % colorPalette.length);\n    return color;\n  }\n};\nmodule.exports = _default;","var makeStyleMapper = require(\"./makeStyleMapper\");\n\nvar getItemStyle = makeStyleMapper([['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['textPosition'], ['textAlign']]);\nvar _default = {\n  getItemStyle: function (excludes, includes) {\n    var style = getItemStyle(this, excludes, includes);\n    var lineDash = this.getBorderLineDash();\n    lineDash && (style.lineDash = lineDash);\n    return style;\n  },\n  getBorderLineDash: function () {\n    var lineType = this.get('borderType');\n    return lineType === 'solid' || lineType == null ? null : lineType === 'dashed' ? [5, 5] : [1, 1];\n  }\n};\nmodule.exports = _default;","var makeStyleMapper = require(\"./makeStyleMapper\");\n\nvar getLineStyle = makeStyleMapper([['lineWidth', 'width'], ['stroke', 'color'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']]);\nvar _default = {\n  getLineStyle: function (excludes) {\n    var style = getLineStyle(this, excludes);\n    var lineDash = this.getLineDash(style.lineWidth);\n    lineDash && (style.lineDash = lineDash);\n    return style;\n  },\n  getLineDash: function (lineWidth) {\n    if (lineWidth == null) {\n      lineWidth = 1;\n    }\n\n    var lineType = this.get('type');\n    var dotSize = Math.max(lineWidth, 2);\n    var dashSize = lineWidth * 4;\n    return lineType === 'solid' || lineType == null ? null : lineType === 'dashed' ? [dashSize, dashSize] : [dotSize, dotSize];\n  }\n};\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\n// TODO Parse shadow style\n// TODO Only shallow path support\nfunction _default(properties) {\n  // Normalize\n  for (var i = 0; i < properties.length; i++) {\n    if (!properties[i][1]) {\n      properties[i][1] = properties[i][0];\n    }\n  }\n\n  return function (model, excludes, includes) {\n    var style = {};\n\n    for (var i = 0; i < properties.length; i++) {\n      var propName = properties[i][1];\n\n      if (excludes && zrUtil.indexOf(excludes, propName) >= 0 || includes && zrUtil.indexOf(includes, propName) < 0) {\n        continue;\n      }\n\n      var val = model.getShallow(propName);\n\n      if (val != null) {\n        style[properties[i][0]] = val;\n      }\n    }\n\n    return style;\n  };\n}\n\nmodule.exports = _default;","var textContain = require(\"zrender/lib/contain/text\");\n\nvar graphicUtil = require(\"../../util/graphic\");\n\nvar PATH_COLOR = ['textStyle', 'color'];\nvar _default = {\n  /**\n   * Get color property or get color from option.textStyle.color\n   * @param {boolean} [isEmphasis]\n   * @return {string}\n   */\n  getTextColor: function (isEmphasis) {\n    var ecModel = this.ecModel;\n    return this.getShallow('color') || (!isEmphasis && ecModel ? ecModel.get(PATH_COLOR) : null);\n  },\n\n  /**\n   * Create font string from fontStyle, fontWeight, fontSize, fontFamily\n   * @return {string}\n   */\n  getFont: function () {\n    return graphicUtil.getFont({\n      fontStyle: this.getShallow('fontStyle'),\n      fontWeight: this.getShallow('fontWeight'),\n      fontSize: this.getShallow('fontSize'),\n      fontFamily: this.getShallow('fontFamily')\n    }, this.ecModel);\n  },\n  getTextRect: function (text) {\n    return textContain.getBoundingRect(text, this.getFont(), this.getShallow('align'), this.getShallow('verticalAlign') || this.getShallow('baseline'), this.getShallow('padding'), this.getShallow('rich'), this.getShallow('truncateText'));\n  }\n};\nmodule.exports = _default;","var _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar isArray = _util.isArray;\nvar isObject = _util.isObject;\n\nvar compatStyle = require(\"./helper/compatStyle\");\n\nvar _model = require(\"../util/model\");\n\nvar normalizeToArray = _model.normalizeToArray;\n\n// Compatitable with 2.0\nfunction get(opt, path) {\n  path = path.split(',');\n  var obj = opt;\n\n  for (var i = 0; i < path.length; i++) {\n    obj = obj && obj[path[i]];\n\n    if (obj == null) {\n      break;\n    }\n  }\n\n  return obj;\n}\n\nfunction set(opt, path, val, overwrite) {\n  path = path.split(',');\n  var obj = opt;\n  var key;\n\n  for (var i = 0; i < path.length - 1; i++) {\n    key = path[i];\n\n    if (obj[key] == null) {\n      obj[key] = {};\n    }\n\n    obj = obj[key];\n  }\n\n  if (overwrite || obj[path[i]] == null) {\n    obj[path[i]] = val;\n  }\n}\n\nfunction compatLayoutProperties(option) {\n  each(LAYOUT_PROPERTIES, function (prop) {\n    if (prop[0] in option && !(prop[1] in option)) {\n      option[prop[1]] = option[prop[0]];\n    }\n  });\n}\n\nvar LAYOUT_PROPERTIES = [['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']];\nvar COMPATITABLE_COMPONENTS = ['grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline'];\nvar COMPATITABLE_SERIES = ['bar', 'boxplot', 'candlestick', 'chord', 'effectScatter', 'funnel', 'gauge', 'lines', 'graph', 'heatmap', 'line', 'map', 'parallel', 'pie', 'radar', 'sankey', 'scatter', 'treemap'];\n\nfunction _default(option, isTheme) {\n  compatStyle(option, isTheme); // Make sure series array for model initialization.\n\n  option.series = normalizeToArray(option.series);\n  each(option.series, function (seriesOpt) {\n    if (!isObject(seriesOpt)) {\n      return;\n    }\n\n    var seriesType = seriesOpt.type;\n\n    if (seriesType === 'pie' || seriesType === 'gauge') {\n      if (seriesOpt.clockWise != null) {\n        seriesOpt.clockwise = seriesOpt.clockWise;\n      }\n    }\n\n    if (seriesType === 'gauge') {\n      var pointerColor = get(seriesOpt, 'pointer.color');\n      pointerColor != null && set(seriesOpt, 'itemStyle.normal.color', pointerColor);\n    }\n\n    for (var i = 0; i < COMPATITABLE_SERIES.length; i++) {\n      if (COMPATITABLE_SERIES[i] === seriesOpt.type) {\n        compatLayoutProperties(seriesOpt);\n        break;\n      }\n    }\n  }); // dataRange has changed to visualMap\n\n  if (option.dataRange) {\n    option.visualMap = option.dataRange;\n  }\n\n  each(COMPATITABLE_COMPONENTS, function (componentName) {\n    var options = option[componentName];\n\n    if (options) {\n      if (!isArray(options)) {\n        options = [options];\n      }\n\n      each(options, function (option) {\n        compatLayoutProperties(option);\n      });\n    }\n  });\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar POSSIBLE_STYLES = ['areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle', 'chordStyle', 'label', 'labelLine'];\n\nfunction compatItemStyle(opt) {\n  var itemStyleOpt = opt && opt.itemStyle;\n\n  if (!itemStyleOpt) {\n    return;\n  }\n\n  for (var i = 0, len = POSSIBLE_STYLES.length; i < len; i++) {\n    var styleName = POSSIBLE_STYLES[i];\n    var normalItemStyleOpt = itemStyleOpt.normal;\n    var emphasisItemStyleOpt = itemStyleOpt.emphasis;\n\n    if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {\n      opt[styleName] = opt[styleName] || {};\n\n      if (!opt[styleName].normal) {\n        opt[styleName].normal = normalItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].normal, normalItemStyleOpt[styleName]);\n      }\n\n      normalItemStyleOpt[styleName] = null;\n    }\n\n    if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {\n      opt[styleName] = opt[styleName] || {};\n\n      if (!opt[styleName].emphasis) {\n        opt[styleName].emphasis = emphasisItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);\n      }\n\n      emphasisItemStyleOpt[styleName] = null;\n    }\n  }\n}\n\nfunction compatTextStyle(opt, propName) {\n  var labelOptSingle = isObject(opt) && opt[propName];\n  var textStyle = isObject(labelOptSingle) && labelOptSingle.textStyle;\n\n  if (textStyle) {\n    for (var i = 0, len = modelUtil.TEXT_STYLE_OPTIONS.length; i < len; i++) {\n      var propName = modelUtil.TEXT_STYLE_OPTIONS[i];\n\n      if (textStyle.hasOwnProperty(propName)) {\n        labelOptSingle[propName] = textStyle[propName];\n      }\n    }\n  }\n}\n\nfunction compatLabelTextStyle(labelOpt) {\n  if (isObject(labelOpt)) {\n    compatTextStyle(labelOpt, 'normal');\n    compatTextStyle(labelOpt, 'emphasis');\n  }\n}\n\nfunction processSeries(seriesOpt) {\n  if (!isObject(seriesOpt)) {\n    return;\n  }\n\n  compatItemStyle(seriesOpt);\n  compatLabelTextStyle(seriesOpt.label); // treemap\n\n  compatLabelTextStyle(seriesOpt.upperLabel); // graph\n\n  compatLabelTextStyle(seriesOpt.edgeLabel);\n  var markPoint = seriesOpt.markPoint;\n  compatItemStyle(markPoint);\n  compatLabelTextStyle(markPoint && markPoint.label);\n  var markLine = seriesOpt.markLine;\n  compatItemStyle(seriesOpt.markLine);\n  compatLabelTextStyle(markLine && markLine.label);\n  var markArea = seriesOpt.markArea;\n  compatLabelTextStyle(markArea && markArea.label); // For gauge\n\n  compatTextStyle(seriesOpt, 'axisLabel');\n  compatTextStyle(seriesOpt, 'title');\n  compatTextStyle(seriesOpt, 'detail');\n  var data = seriesOpt.data;\n\n  if (data) {\n    for (var i = 0; i < data.length; i++) {\n      compatItemStyle(data[i]);\n      compatLabelTextStyle(data[i] && data[i].label);\n    }\n  } // mark point data\n\n\n  var markPoint = seriesOpt.markPoint;\n\n  if (markPoint && markPoint.data) {\n    var mpData = markPoint.data;\n\n    for (var i = 0; i < mpData.length; i++) {\n      compatItemStyle(mpData[i]);\n      compatLabelTextStyle(mpData[i] && mpData[i].label);\n    }\n  } // mark line data\n\n\n  var markLine = seriesOpt.markLine;\n\n  if (markLine && markLine.data) {\n    var mlData = markLine.data;\n\n    for (var i = 0; i < mlData.length; i++) {\n      if (zrUtil.isArray(mlData[i])) {\n        compatItemStyle(mlData[i][0]);\n        compatLabelTextStyle(mlData[i][0] && mlData[i][0].label);\n        compatItemStyle(mlData[i][1]);\n        compatLabelTextStyle(mlData[i][1] && mlData[i][1].label);\n      } else {\n        compatItemStyle(mlData[i]);\n        compatLabelTextStyle(mlData[i] && mlData[i].label);\n      }\n    }\n  }\n}\n\nfunction toArr(o) {\n  return zrUtil.isArray(o) ? o : o ? [o] : [];\n}\n\nfunction toObj(o) {\n  return (zrUtil.isArray(o) ? o[0] : o) || {};\n}\n\nfunction _default(option, isTheme) {\n  each(toArr(option.series), function (seriesOpt) {\n    isObject(seriesOpt) && processSeries(seriesOpt);\n  });\n  var axes = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar'];\n  isTheme && axes.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis');\n  each(axes, function (axisName) {\n    each(toArr(option[axisName]), function (axisOpt) {\n      if (axisOpt) {\n        compatTextStyle(axisOpt, 'axisLabel');\n        compatTextStyle(axisOpt.axisPointer, 'label');\n      }\n    });\n  });\n  each(toArr(option.parallel), function (parallelOpt) {\n    var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;\n    compatTextStyle(parallelAxisDefault, 'axisLabel');\n    compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, 'label');\n  });\n  each(toArr(option.calendar), function (calendarOpt) {\n    compatTextStyle(calendarOpt, 'dayLabel');\n    compatTextStyle(calendarOpt, 'monthLabel');\n    compatTextStyle(calendarOpt, 'yearLabel');\n  }); // radar.name.textStyle\n\n  each(toArr(option.radar), function (radarOpt) {\n    compatTextStyle(radarOpt, 'name');\n  });\n  each(toArr(option.geo), function (geoOpt) {\n    if (isObject(geoOpt)) {\n      compatLabelTextStyle(geoOpt.label);\n      each(toArr(geoOpt.regions), function (regionObj) {\n        compatLabelTextStyle(regionObj.label);\n      });\n    }\n  });\n  compatLabelTextStyle(toObj(option.timeline).label);\n  compatTextStyle(toObj(option.axisPointer), 'label');\n  compatTextStyle(toObj(option.tooltip).axisPointer, 'label');\n}\n\nmodule.exports = _default;","function _default(seriesType, ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (!legendModels || !legendModels.length) {\n    return;\n  }\n\n  ecModel.eachSeriesByType(seriesType, function (series) {\n    var data = series.getData();\n    data.filterSelf(function (idx) {\n      var name = data.getName(idx); // If in any legend component the status is not selected.\n\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(name)) {\n          return false;\n        }\n      }\n\n      return true;\n    }, this);\n  }, this);\n}\n\nmodule.exports = _default;","var samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    } // Return NaN if count is 0\n\n\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    }\n\n    return max;\n  },\n  min: function (frame) {\n    var min = Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    }\n\n    return min;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\n\nvar indexSampler = function (frame, value) {\n  return Math.round(frame.length / 2);\n};\n\nfunction _default(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var sampling = seriesModel.get('sampling');\n    var coordSys = seriesModel.coordinateSystem; // Only cartesian2d support down sampling\n\n    if (coordSys.type === 'cartesian2d' && sampling) {\n      var baseAxis = coordSys.getBaseAxis();\n      var valueAxis = coordSys.getOtherAxis(baseAxis);\n      var extent = baseAxis.getExtent(); // Coordinste system has been resized\n\n      var size = extent[1] - extent[0];\n      var rate = Math.round(data.count() / size);\n\n      if (rate > 1) {\n        var sampler;\n\n        if (typeof sampling === 'string') {\n          sampler = samplers[sampling];\n        } else if (typeof sampling === 'function') {\n          sampler = sampling;\n        }\n\n        if (sampler) {\n          data = data.downSample(valueAxis.dim, 1 / rate, sampler, indexSampler);\n          seriesModel.setData(data);\n        }\n      }\n    }\n  }, this);\n}\n\nmodule.exports = _default;","var numberUtil = require(\"../util/number\");\n\nvar formatUtil = require(\"../util/format\");\n\nvar Scale = require(\"./Scale\");\n\nvar helper = require(\"./helper\");\n\n/**\n * Interval scale\n * @module echarts/scale/Interval\n */\nvar roundNumber = numberUtil.round;\n/**\n * @alias module:echarts/coord/scale/Interval\n * @constructor\n */\n\nvar IntervalScale = Scale.extend({\n  type: 'interval',\n  _interval: 0,\n  _intervalPrecision: 2,\n  setExtent: function (start, end) {\n    var thisExtent = this._extent; //start,end may be a Number like '25',so...\n\n    if (!isNaN(start)) {\n      thisExtent[0] = parseFloat(start);\n    }\n\n    if (!isNaN(end)) {\n      thisExtent[1] = parseFloat(end);\n    }\n  },\n  unionExtent: function (other) {\n    var extent = this._extent;\n    other[0] < extent[0] && (extent[0] = other[0]);\n    other[1] > extent[1] && (extent[1] = other[1]); // unionExtent may called by it's sub classes\n\n    IntervalScale.prototype.setExtent.call(this, extent[0], extent[1]);\n  },\n\n  /**\n   * Get interval\n   */\n  getInterval: function () {\n    return this._interval;\n  },\n\n  /**\n   * Set interval\n   */\n  setInterval: function (interval) {\n    this._interval = interval; // Dropped auto calculated niceExtent and use user setted extent\n    // We assume user wan't to set both interval, min, max to get a better result\n\n    this._niceExtent = this._extent.slice();\n    this._intervalPrecision = helper.getIntervalPrecision(interval);\n  },\n\n  /**\n   * @return {Array.<number>}\n   */\n  getTicks: function () {\n    return helper.intervalScaleGetTicks(this._interval, this._extent, this._niceExtent, this._intervalPrecision);\n  },\n\n  /**\n   * @return {Array.<string>}\n   */\n  getTicksLabels: function () {\n    var labels = [];\n    var ticks = this.getTicks();\n\n    for (var i = 0; i < ticks.length; i++) {\n      labels.push(this.getLabel(ticks[i]));\n    }\n\n    return labels;\n  },\n\n  /**\n   * @param {number} data\n   * @param {Object} [opt]\n   * @param {number|string} [opt.precision] If 'auto', use nice presision.\n   * @param {boolean} [opt.pad] returns 1.50 but not 1.5 if precision is 2.\n   * @return {string}\n   */\n  getLabel: function (data, opt) {\n    if (data == null) {\n      return '';\n    }\n\n    var precision = opt && opt.precision;\n\n    if (precision == null) {\n      precision = numberUtil.getPrecisionSafe(data) || 0;\n    } else if (precision === 'auto') {\n      // Should be more precise then tick.\n      precision = this._intervalPrecision;\n    } // (1) If `precision` is set, 12.005 should be display as '12.00500'.\n    // (2) Use roundNumber (toFixed) to avoid scientific notation like '3.5e-7'.\n\n\n    data = roundNumber(data, precision, true);\n    return formatUtil.addCommas(data);\n  },\n\n  /**\n   * Update interval and extent of intervals for nice ticks\n   *\n   * @param {number} [splitNumber = 5] Desired number of ticks\n   * @param {number} [minInterval]\n   * @param {number} [maxInterval]\n   */\n  niceTicks: function (splitNumber, minInterval, maxInterval) {\n    splitNumber = splitNumber || 5;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n\n    if (!isFinite(span)) {\n      return;\n    } // User may set axis min 0 and data are all negative\n    // FIXME If it needs to reverse ?\n\n\n    if (span < 0) {\n      span = -span;\n      extent.reverse();\n    }\n\n    var result = helper.intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval);\n    this._intervalPrecision = result.intervalPrecision;\n    this._interval = result.interval;\n    this._niceExtent = result.niceTickExtent;\n  },\n\n  /**\n   * Nice extent.\n   * @param {Object} opt\n   * @param {number} [opt.splitNumber = 5] Given approx tick number\n   * @param {boolean} [opt.fixMin=false]\n   * @param {boolean} [opt.fixMax=false]\n   * @param {boolean} [opt.minInterval]\n   * @param {boolean} [opt.maxInterval]\n   */\n  niceExtent: function (opt) {\n    var extent = this._extent; // If extent start and end are same, expand them\n\n    if (extent[0] === extent[1]) {\n      if (extent[0] !== 0) {\n        // Expand extent\n        var expandSize = extent[0]; // In the fowllowing case\n        //      Axis has been fixed max 100\n        //      Plus data are all 100 and axis extent are [100, 100].\n        // Extend to the both side will cause expanded max is larger than fixed max.\n        // So only expand to the smaller side.\n\n        if (!opt.fixMax) {\n          extent[1] += expandSize / 2;\n          extent[0] -= expandSize / 2;\n        } else {\n          extent[0] -= expandSize / 2;\n        }\n      } else {\n        extent[1] = 1;\n      }\n    }\n\n    var span = extent[1] - extent[0]; // If there are no data and extent are [Infinity, -Infinity]\n\n    if (!isFinite(span)) {\n      extent[0] = 0;\n      extent[1] = 1;\n    }\n\n    this.niceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval); // var extent = this._extent;\n\n    var interval = this._interval;\n\n    if (!opt.fixMin) {\n      extent[0] = roundNumber(Math.floor(extent[0] / interval) * interval);\n    }\n\n    if (!opt.fixMax) {\n      extent[1] = roundNumber(Math.ceil(extent[1] / interval) * interval);\n    }\n  }\n});\n/**\n * @return {module:echarts/scale/Time}\n */\n\nIntervalScale.create = function () {\n  return new IntervalScale();\n};\n\nvar _default = IntervalScale;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Scale = require(\"./Scale\");\n\nvar numberUtil = require(\"../util/number\");\n\nvar IntervalScale = require(\"./Interval\");\n\n/**\n * Log scale\n * @module echarts/scale/Log\n */\n// Use some method of IntervalScale\nvar scaleProto = Scale.prototype;\nvar intervalScaleProto = IntervalScale.prototype;\nvar getPrecisionSafe = numberUtil.getPrecisionSafe;\nvar roundingErrorFix = numberUtil.round;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar mathPow = Math.pow;\nvar mathLog = Math.log;\nvar LogScale = Scale.extend({\n  type: 'log',\n  base: 10,\n  $constructor: function () {\n    Scale.apply(this, arguments);\n    this._originalScale = new IntervalScale();\n  },\n\n  /**\n   * @return {Array.<number>}\n   */\n  getTicks: function () {\n    var originalScale = this._originalScale;\n    var extent = this._extent;\n    var originalExtent = originalScale.getExtent();\n    return zrUtil.map(intervalScaleProto.getTicks.call(this), function (val) {\n      var powVal = numberUtil.round(mathPow(this.base, val)); // Fix #4158\n\n      powVal = val === extent[0] && originalScale.__fixMin ? fixRoundingError(powVal, originalExtent[0]) : powVal;\n      powVal = val === extent[1] && originalScale.__fixMax ? fixRoundingError(powVal, originalExtent[1]) : powVal;\n      return powVal;\n    }, this);\n  },\n\n  /**\n   * @param {number} val\n   * @return {string}\n   */\n  getLabel: intervalScaleProto.getLabel,\n\n  /**\n   * @param  {number} val\n   * @return {number}\n   */\n  scale: function (val) {\n    val = scaleProto.scale.call(this, val);\n    return mathPow(this.base, val);\n  },\n\n  /**\n   * @param {number} start\n   * @param {number} end\n   */\n  setExtent: function (start, end) {\n    var base = this.base;\n    start = mathLog(start) / mathLog(base);\n    end = mathLog(end) / mathLog(base);\n    intervalScaleProto.setExtent.call(this, start, end);\n  },\n\n  /**\n   * @return {number} end\n   */\n  getExtent: function () {\n    var base = this.base;\n    var extent = scaleProto.getExtent.call(this);\n    extent[0] = mathPow(base, extent[0]);\n    extent[1] = mathPow(base, extent[1]); // Fix #4158\n\n    var originalScale = this._originalScale;\n    var originalExtent = originalScale.getExtent();\n    originalScale.__fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\n    originalScale.__fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\n    return extent;\n  },\n\n  /**\n   * @param  {Array.<number>} extent\n   */\n  unionExtent: function (extent) {\n    this._originalScale.unionExtent(extent);\n\n    var base = this.base;\n    extent[0] = mathLog(extent[0]) / mathLog(base);\n    extent[1] = mathLog(extent[1]) / mathLog(base);\n    scaleProto.unionExtent.call(this, extent);\n  },\n\n  /**\n   * @override\n   */\n  unionExtentFromData: function (data, dim) {\n    this.unionExtent(data.getDataExtent(dim, true, function (val) {\n      return val > 0;\n    }));\n  },\n\n  /**\n   * Update interval and extent of intervals for nice ticks\n   * @param  {number} [approxTickNum = 10] Given approx tick number\n   */\n  niceTicks: function (approxTickNum) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n\n    if (span === Infinity || span <= 0) {\n      return;\n    }\n\n    var interval = numberUtil.quantity(span);\n    var err = approxTickNum / span * interval; // Filter ticks to get closer to the desired count.\n\n    if (err <= 0.5) {\n      interval *= 10;\n    } // Interval should be integer\n\n\n    while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\n      interval *= 10;\n    }\n\n    var niceExtent = [numberUtil.round(mathCeil(extent[0] / interval) * interval), numberUtil.round(mathFloor(extent[1] / interval) * interval)];\n    this._interval = interval;\n    this._niceExtent = niceExtent;\n  },\n\n  /**\n   * Nice extent.\n   * @override\n   */\n  niceExtent: function (opt) {\n    intervalScaleProto.niceExtent.call(this, opt);\n    var originalScale = this._originalScale;\n    originalScale.__fixMin = opt.fixMin;\n    originalScale.__fixMax = opt.fixMax;\n  }\n});\nzrUtil.each(['contain', 'normalize'], function (methodName) {\n  LogScale.prototype[methodName] = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return scaleProto[methodName].call(this, val);\n  };\n});\n\nLogScale.create = function () {\n  return new LogScale();\n};\n\nfunction fixRoundingError(val, originalVal) {\n  return roundingErrorFix(val, getPrecisionSafe(originalVal));\n}\n\nvar _default = LogScale;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Scale = require(\"./Scale\");\n\n/**\n * Linear continuous scale\n * @module echarts/coord/scale/Ordinal\n *\n * http://en.wikipedia.org/wiki/Level_of_measurement\n */\n// FIXME only one data\nvar scaleProto = Scale.prototype;\nvar OrdinalScale = Scale.extend({\n  type: 'ordinal',\n  init: function (data, extent) {\n    this._data = data;\n    this._extent = extent || [0, data.length - 1];\n  },\n  parse: function (val) {\n    return typeof val === 'string' ? zrUtil.indexOf(this._data, val) // val might be float.\n    : Math.round(val);\n  },\n  contain: function (rank) {\n    rank = this.parse(rank);\n    return scaleProto.contain.call(this, rank) && this._data[rank] != null;\n  },\n\n  /**\n   * Normalize given rank or name to linear [0, 1]\n   * @param {number|string} [val]\n   * @return {number}\n   */\n  normalize: function (val) {\n    return scaleProto.normalize.call(this, this.parse(val));\n  },\n  scale: function (val) {\n    return Math.round(scaleProto.scale.call(this, val));\n  },\n\n  /**\n   * @return {Array}\n   */\n  getTicks: function () {\n    var ticks = [];\n    var extent = this._extent;\n    var rank = extent[0];\n\n    while (rank <= extent[1]) {\n      ticks.push(rank);\n      rank++;\n    }\n\n    return ticks;\n  },\n\n  /**\n   * Get item on rank n\n   * @param {number} n\n   * @return {string}\n   */\n  getLabel: function (n) {\n    return this._data[n];\n  },\n\n  /**\n   * @return {number}\n   */\n  count: function () {\n    return this._extent[1] - this._extent[0] + 1;\n  },\n\n  /**\n   * @override\n   */\n  unionExtentFromData: function (data, dim) {\n    this.unionExtent(data.getDataExtent(dim, false));\n  },\n  niceTicks: zrUtil.noop,\n  niceExtent: zrUtil.noop\n});\n/**\n * @return {module:echarts/scale/Time}\n */\n\nOrdinalScale.create = function () {\n  return new OrdinalScale();\n};\n\nvar _default = OrdinalScale;\nmodule.exports = _default;","var clazzUtil = require(\"../util/clazz\");\n\n/**\n * // Scale class management\n * @module echarts/scale/Scale\n */\n\n/**\n * @param {Object} [setting]\n */\nfunction Scale(setting) {\n  this._setting = setting || {};\n  /**\n   * Extent\n   * @type {Array.<number>}\n   * @protected\n   */\n\n  this._extent = [Infinity, -Infinity];\n  /**\n   * Step is calculated in adjustExtent\n   * @type {Array.<number>}\n   * @protected\n   */\n\n  this._interval = 0;\n  this.init && this.init.apply(this, arguments);\n}\n/**\n * Parse input val to valid inner number.\n * @param {*} val\n * @return {number}\n */\n\n\nScale.prototype.parse = function (val) {\n  // Notice: This would be a trap here, If the implementation\n  // of this method depends on extent, and this method is used\n  // before extent set (like in dataZoom), it would be wrong.\n  // Nevertheless, parse does not depend on extent generally.\n  return val;\n};\n\nScale.prototype.getSetting = function (name) {\n  return this._setting[name];\n};\n\nScale.prototype.contain = function (val) {\n  var extent = this._extent;\n  return val >= extent[0] && val <= extent[1];\n};\n/**\n * Normalize value to linear [0, 1], return 0.5 if extent span is 0\n * @param {number} val\n * @return {number}\n */\n\n\nScale.prototype.normalize = function (val) {\n  var extent = this._extent;\n\n  if (extent[1] === extent[0]) {\n    return 0.5;\n  }\n\n  return (val - extent[0]) / (extent[1] - extent[0]);\n};\n/**\n * Scale normalized value\n * @param {number} val\n * @return {number}\n */\n\n\nScale.prototype.scale = function (val) {\n  var extent = this._extent;\n  return val * (extent[1] - extent[0]) + extent[0];\n};\n/**\n * Set extent from data\n * @param {Array.<number>} other\n */\n\n\nScale.prototype.unionExtent = function (other) {\n  var extent = this._extent;\n  other[0] < extent[0] && (extent[0] = other[0]);\n  other[1] > extent[1] && (extent[1] = other[1]); // not setExtent because in log axis it may transformed to power\n  // this.setExtent(extent[0], extent[1]);\n};\n/**\n * Set extent from data\n * @param {module:echarts/data/List} data\n * @param {string} dim\n */\n\n\nScale.prototype.unionExtentFromData = function (data, dim) {\n  this.unionExtent(data.getDataExtent(dim, true));\n};\n/**\n * Get extent\n * @return {Array.<number>}\n */\n\n\nScale.prototype.getExtent = function () {\n  return this._extent.slice();\n};\n/**\n * Set extent\n * @param {number} start\n * @param {number} end\n */\n\n\nScale.prototype.setExtent = function (start, end) {\n  var thisExtent = this._extent;\n\n  if (!isNaN(start)) {\n    thisExtent[0] = start;\n  }\n\n  if (!isNaN(end)) {\n    thisExtent[1] = end;\n  }\n};\n/**\n * @return {Array.<string>}\n */\n\n\nScale.prototype.getTicksLabels = function () {\n  var labels = [];\n  var ticks = this.getTicks();\n\n  for (var i = 0; i < ticks.length; i++) {\n    labels.push(this.getLabel(ticks[i]));\n  }\n\n  return labels;\n};\n/**\n * When axis extent depends on data and no data exists,\n * axis ticks should not be drawn, which is named 'blank'.\n */\n\n\nScale.prototype.isBlank = function () {\n  return this._isBlank;\n},\n/**\n * When axis extent depends on data and no data exists,\n * axis ticks should not be drawn, which is named 'blank'.\n */\nScale.prototype.setBlank = function (isBlank) {\n  this._isBlank = isBlank;\n};\nclazzUtil.enableClassExtend(Scale);\nclazzUtil.enableClassManagement(Scale, {\n  registerWhenExtend: true\n});\nvar _default = Scale;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar numberUtil = require(\"../util/number\");\n\nvar formatUtil = require(\"../util/format\");\n\nvar scaleHelper = require(\"./helper\");\n\nvar IntervalScale = require(\"./Interval\");\n\n// [About UTC and local time zone]:\n// In most cases, `number.parseDate` will treat input data string as local time\n// (except time zone is specified in time string). And `format.formateTime` returns\n// local time by default. option.useUTC is false by default. This design have\n// concidered these common case:\n// (1) Time that is persistent in server is in UTC, but it is needed to be diplayed\n// in local time by default.\n// (2) By default, the input data string (e.g., '2011-01-02') should be displayed\n// as its original time, without any time difference.\nvar intervalScaleProto = IntervalScale.prototype;\nvar mathCeil = Math.ceil;\nvar mathFloor = Math.floor;\nvar ONE_SECOND = 1000;\nvar ONE_MINUTE = ONE_SECOND * 60;\nvar ONE_HOUR = ONE_MINUTE * 60;\nvar ONE_DAY = ONE_HOUR * 24; // FIXME \n\nvar bisect = function (a, x, lo, hi) {\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n\n    if (a[mid][1] < x) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return lo;\n};\n/**\n * @alias module:echarts/coord/scale/Time\n * @constructor\n */\n\n\nvar TimeScale = IntervalScale.extend({\n  type: 'time',\n\n  /**\n   * @override\n   */\n  getLabel: function (val) {\n    var stepLvl = this._stepLvl;\n    var date = new Date(val);\n    return formatUtil.formatTime(stepLvl[0], date, this.getSetting('useUTC'));\n  },\n\n  /**\n   * @override\n   */\n  niceExtent: function (opt) {\n    var extent = this._extent; // If extent start and end are same, expand them\n\n    if (extent[0] === extent[1]) {\n      // Expand extent\n      extent[0] -= ONE_DAY;\n      extent[1] += ONE_DAY;\n    } // If there are no data and extent are [Infinity, -Infinity]\n\n\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\n      var d = new Date();\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      extent[0] = extent[1] - ONE_DAY;\n    }\n\n    this.niceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval); // var extent = this._extent;\n\n    var interval = this._interval;\n\n    if (!opt.fixMin) {\n      extent[0] = numberUtil.round(mathFloor(extent[0] / interval) * interval);\n    }\n\n    if (!opt.fixMax) {\n      extent[1] = numberUtil.round(mathCeil(extent[1] / interval) * interval);\n    }\n  },\n\n  /**\n   * @override\n   */\n  niceTicks: function (approxTickNum, minInterval, maxInterval) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    var approxInterval = span / approxTickNum;\n\n    if (minInterval != null && approxInterval < minInterval) {\n      approxInterval = minInterval;\n    }\n\n    if (maxInterval != null && approxInterval > maxInterval) {\n      approxInterval = maxInterval;\n    }\n\n    var scaleLevelsLen = scaleLevels.length;\n    var idx = bisect(scaleLevels, approxInterval, 0, scaleLevelsLen);\n    var level = scaleLevels[Math.min(idx, scaleLevelsLen - 1)];\n    var interval = level[1]; // Same with interval scale if span is much larger than 1 year\n\n    if (level[0] === 'year') {\n      var yearSpan = span / interval; // From \"Nice Numbers for Graph Labels\" of Graphic Gems\n      // var niceYearSpan = numberUtil.nice(yearSpan, false);\n\n      var yearStep = numberUtil.nice(yearSpan / approxTickNum, true);\n      interval *= yearStep;\n    }\n\n    var timezoneOffset = this.getSetting('useUTC') ? 0 : new Date(+extent[0] || +extent[1]).getTimezoneOffset() * 60 * 1000;\n    var niceExtent = [Math.round(mathCeil((extent[0] - timezoneOffset) / interval) * interval + timezoneOffset), Math.round(mathFloor((extent[1] - timezoneOffset) / interval) * interval + timezoneOffset)];\n    scaleHelper.fixExtent(niceExtent, extent);\n    this._stepLvl = level; // Interval will be used in getTicks\n\n    this._interval = interval;\n    this._niceExtent = niceExtent;\n  },\n  parse: function (val) {\n    // val might be float.\n    return +numberUtil.parseDate(val);\n  }\n});\nzrUtil.each(['contain', 'normalize'], function (methodName) {\n  TimeScale.prototype[methodName] = function (val) {\n    return intervalScaleProto[methodName].call(this, this.parse(val));\n  };\n}); // Steps from d3\n\nvar scaleLevels = [// Format              interval\n['hh:mm:ss', ONE_SECOND], // 1s\n['hh:mm:ss', ONE_SECOND * 5], // 5s\n['hh:mm:ss', ONE_SECOND * 10], // 10s\n['hh:mm:ss', ONE_SECOND * 15], // 15s\n['hh:mm:ss', ONE_SECOND * 30], // 30s\n['hh:mm\\nMM-dd', ONE_MINUTE], // 1m\n['hh:mm\\nMM-dd', ONE_MINUTE * 5], // 5m\n['hh:mm\\nMM-dd', ONE_MINUTE * 10], // 10m\n['hh:mm\\nMM-dd', ONE_MINUTE * 15], // 15m\n['hh:mm\\nMM-dd', ONE_MINUTE * 30], // 30m\n['hh:mm\\nMM-dd', ONE_HOUR], // 1h\n['hh:mm\\nMM-dd', ONE_HOUR * 2], // 2h\n['hh:mm\\nMM-dd', ONE_HOUR * 6], // 6h\n['hh:mm\\nMM-dd', ONE_HOUR * 12], // 12h\n['MM-dd\\nyyyy', ONE_DAY], // 1d\n['MM-dd\\nyyyy', ONE_DAY * 2], // 2d\n['MM-dd\\nyyyy', ONE_DAY * 3], // 3d\n['MM-dd\\nyyyy', ONE_DAY * 4], // 4d\n['MM-dd\\nyyyy', ONE_DAY * 5], // 5d\n['MM-dd\\nyyyy', ONE_DAY * 6], // 6d\n['week', ONE_DAY * 7], // 7d\n['MM-dd\\nyyyy', ONE_DAY * 10], // 10d\n['week', ONE_DAY * 14], // 2w\n['week', ONE_DAY * 21], // 3w\n['month', ONE_DAY * 31], // 1M\n['week', ONE_DAY * 42], // 6w\n['month', ONE_DAY * 62], // 2M\n['week', ONE_DAY * 42], // 10w\n['quarter', ONE_DAY * 380 / 4], // 3M\n['month', ONE_DAY * 31 * 4], // 4M\n['month', ONE_DAY * 31 * 5], // 5M\n['half-year', ONE_DAY * 380 / 2], // 6M\n['month', ONE_DAY * 31 * 8], // 8M\n['month', ONE_DAY * 31 * 10], // 10M\n['year', ONE_DAY * 380] // 1Y\n];\n/**\n * @param {module:echarts/model/Model}\n * @return {module:echarts/scale/Time}\n */\n\nTimeScale.create = function (model) {\n  return new TimeScale({\n    useUTC: model.ecModel.get('useUTC')\n  });\n};\n\nvar _default = TimeScale;\nmodule.exports = _default;","var numberUtil = require(\"../util/number\");\n\n/**\n * For testable.\n */\nvar roundNumber = numberUtil.round;\n/**\n * @param {Array.<number>} extent Both extent[0] and extent[1] should be valid number.\n *                                Should be extent[0] < extent[1].\n * @param {number} splitNumber splitNumber should be >= 1.\n * @param {number} [minInterval]\n * @param {number} [maxInterval]\n * @return {Object} {interval, intervalPrecision, niceTickExtent}\n */\n\nfunction intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval) {\n  var result = {};\n  var span = extent[1] - extent[0];\n  var interval = result.interval = numberUtil.nice(span / splitNumber, true);\n\n  if (minInterval != null && interval < minInterval) {\n    interval = result.interval = minInterval;\n  }\n\n  if (maxInterval != null && interval > maxInterval) {\n    interval = result.interval = maxInterval;\n  } // Tow more digital for tick.\n\n\n  var precision = result.intervalPrecision = getIntervalPrecision(interval); // Niced extent inside original extent\n\n  var niceTickExtent = result.niceTickExtent = [roundNumber(Math.ceil(extent[0] / interval) * interval, precision), roundNumber(Math.floor(extent[1] / interval) * interval, precision)];\n  fixExtent(niceTickExtent, extent);\n  return result;\n}\n/**\n * @param {number} interval\n * @return {number} interval precision\n */\n\n\nfunction getIntervalPrecision(interval) {\n  // Tow more digital for tick.\n  return numberUtil.getPrecisionSafe(interval) + 2;\n}\n\nfunction clamp(niceTickExtent, idx, extent) {\n  niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\n} // In some cases (e.g., splitNumber is 1), niceTickExtent may be out of extent.\n\n\nfunction fixExtent(niceTickExtent, extent) {\n  !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\n  !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\n  clamp(niceTickExtent, 0, extent);\n  clamp(niceTickExtent, 1, extent);\n\n  if (niceTickExtent[0] > niceTickExtent[1]) {\n    niceTickExtent[0] = niceTickExtent[1];\n  }\n}\n\nfunction intervalScaleGetTicks(interval, extent, niceTickExtent, intervalPrecision) {\n  var ticks = []; // If interval is 0, return [];\n\n  if (!interval) {\n    return ticks;\n  } // Consider this case: using dataZoom toolbox, zoom and zoom.\n\n\n  var safeLimit = 10000;\n\n  if (extent[0] < niceTickExtent[0]) {\n    ticks.push(extent[0]);\n  }\n\n  var tick = niceTickExtent[0];\n\n  while (tick <= niceTickExtent[1]) {\n    ticks.push(tick); // Avoid rounding error\n\n    tick = roundNumber(tick + interval, intervalPrecision);\n\n    if (tick === ticks[ticks.length - 1]) {\n      // Consider out of safe float point, e.g.,\n      // -3711126.9907707 + 2e-10 === -3711126.9907707\n      break;\n    }\n\n    if (ticks.length > safeLimit) {\n      return [];\n    }\n  } // Consider this case: the last item of ticks is smaller\n  // than niceTickExtent[1] and niceTickExtent[1] === extent[1].\n\n\n  if (extent[1] > (ticks.length ? ticks[ticks.length - 1] : niceTickExtent[1])) {\n    ticks.push(extent[1]);\n  }\n\n  return ticks;\n}\n\nexports.intervalScaleNiceTicks = intervalScaleNiceTicks;\nexports.getIntervalPrecision = getIntervalPrecision;\nexports.fixExtent = fixExtent;\nexports.intervalScaleGetTicks = intervalScaleGetTicks;","var zrUtil = require(\"zrender/lib/core/util\");\n\n/**\n * @param {number} [time=500] Time in ms\n * @param {string} [easing='linear']\n * @param {number} [delay=0]\n * @param {Function} [callback]\n *\n * @example\n *  // Animate position\n *  animation\n *      .createWrap()\n *      .add(el1, {position: [10, 10]})\n *      .add(el2, {shape: {width: 500}, style: {fill: 'red'}}, 400)\n *      .done(function () { // done })\n *      .start('cubicOut');\n */\nfunction createWrap() {\n  var storage = [];\n  var elExistsMap = {};\n  var doneCallback;\n  return {\n    /**\n     * Caution: a el can only be added once, otherwise 'done'\n     * might not be called. This method checks this (by el.id),\n     * suppresses adding and returns false when existing el found.\n     *\n     * @param {modele:zrender/Element} el\n     * @param {Object} target\n     * @param {number} [time=500]\n     * @param {number} [delay=0]\n     * @param {string} [easing='linear']\n     * @return {boolean} Whether adding succeeded.\n     *\n     * @example\n     *     add(el, target, time, delay, easing);\n     *     add(el, target, time, easing);\n     *     add(el, target, time);\n     *     add(el, target);\n     */\n    add: function (el, target, time, delay, easing) {\n      if (zrUtil.isString(delay)) {\n        easing = delay;\n        delay = 0;\n      }\n\n      if (elExistsMap[el.id]) {\n        return false;\n      }\n\n      elExistsMap[el.id] = 1;\n      storage.push({\n        el: el,\n        target: target,\n        time: time,\n        delay: delay,\n        easing: easing\n      });\n      return true;\n    },\n\n    /**\n     * Only execute when animation finished. Will not execute when any\n     * of 'stop' or 'stopAnimation' called.\n     *\n     * @param {Function} callback\n     */\n    done: function (callback) {\n      doneCallback = callback;\n      return this;\n    },\n\n    /**\n     * Will stop exist animation firstly.\n     */\n    start: function () {\n      var count = storage.length;\n\n      for (var i = 0, len = storage.length; i < len; i++) {\n        var item = storage[i];\n        item.el.animateTo(item.target, item.time, item.delay, item.easing, done);\n      }\n\n      return this;\n\n      function done() {\n        count--;\n\n        if (!count) {\n          storage.length = 0;\n          elExistsMap = {};\n          doneCallback && doneCallback();\n        }\n      }\n    }\n  };\n}\n\nexports.createWrap = createWrap;","var zrUtil = require(\"zrender/lib/core/util\");\n\n/**\n * nest helper used to group by the array.\n * can specified the keys and sort the keys.\n */\nfunction nest() {\n  var keysFunction = [];\n  var sortKeysFunction = [];\n  /**\n   * map an Array into the mapObject.\n   * @param {Array} array\n   * @param {number} depth\n   */\n\n  function map(array, depth) {\n    if (depth >= keysFunction.length) {\n      return array;\n    }\n\n    var i = -1;\n    var n = array.length;\n    var keyFunction = keysFunction[depth++];\n    var mapObject = {};\n    var valuesByKey = {};\n\n    while (++i < n) {\n      var keyValue = keyFunction(array[i]);\n      var values = valuesByKey[keyValue];\n\n      if (values) {\n        values.push(array[i]);\n      } else {\n        valuesByKey[keyValue] = [array[i]];\n      }\n    }\n\n    zrUtil.each(valuesByKey, function (value, key) {\n      mapObject[key] = map(value, depth);\n    });\n    return mapObject;\n  }\n  /**\n   * transform the Map Object to multidimensional Array\n   * @param {Object} map\n   * @param {number} depth\n   */\n\n\n  function entriesMap(mapObject, depth) {\n    if (depth >= keysFunction.length) {\n      return mapObject;\n    }\n\n    var array = [];\n    var sortKeyFunction = sortKeysFunction[depth++];\n    zrUtil.each(mapObject, function (value, key) {\n      array.push({\n        key: key,\n        values: entriesMap(value, depth)\n      });\n    });\n\n    if (sortKeyFunction) {\n      return array.sort(function (a, b) {\n        return sortKeyFunction(a.key, b.key);\n      });\n    } else {\n      return array;\n    }\n  }\n\n  return {\n    /**\n     * specified the key to groupby the arrays.\n     * users can specified one more keys.\n     * @param {Function} d\n     */\n    key: function (d) {\n      keysFunction.push(d);\n      return this;\n    },\n\n    /**\n     * specified the comparator to sort the keys\n     * @param {Function} order\n     */\n    sortKeys: function (order) {\n      sortKeysFunction[keysFunction.length - 1] = order;\n      return this;\n    },\n\n    /**\n     * the array to be grouped by.\n     * @param {Array} array\n     */\n    entries: function (array) {\n      return entriesMap(map(array, 0), 0);\n    }\n  };\n}\n\nmodule.exports = nest;","var _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar TYPE_DELIMITER = '.';\nvar IS_CONTAINER = '___EC__COMPONENT__CONTAINER___';\nvar MEMBER_PRIFIX = '\\0ec_\\0';\n/**\n * Hide private class member.\n * The same behavior as `host[name] = value;` (can be right-value)\n * @public\n */\n\nfunction set(host, name, value) {\n  return host[MEMBER_PRIFIX + name] = value;\n}\n/**\n * Hide private class member.\n * The same behavior as `host[name];`\n * @public\n */\n\n\nfunction get(host, name) {\n  return host[MEMBER_PRIFIX + name];\n}\n/**\n * For hidden private class member.\n * The same behavior as `host.hasOwnProperty(name);`\n * @public\n */\n\n\nfunction hasOwn(host, name) {\n  return host.hasOwnProperty(MEMBER_PRIFIX + name);\n}\n/**\n * Notice, parseClassType('') should returns {main: '', sub: ''}\n * @public\n */\n\n\nfunction parseClassType(componentType) {\n  var ret = {\n    main: '',\n    sub: ''\n  };\n\n  if (componentType) {\n    componentType = componentType.split(TYPE_DELIMITER);\n    ret.main = componentType[0] || '';\n    ret.sub = componentType[1] || '';\n  }\n\n  return ret;\n}\n/**\n * @public\n */\n\n\nfunction checkClassType(componentType) {\n  zrUtil.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType \"' + componentType + '\" illegal');\n}\n/**\n * @public\n */\n\n\nfunction enableClassExtend(RootClass, mandatoryMethods) {\n  RootClass.$constructor = RootClass;\n\n  RootClass.extend = function (proto) {\n    var superClass = this;\n\n    var ExtendedClass = function () {\n      if (!proto.$constructor) {\n        superClass.apply(this, arguments);\n      } else {\n        proto.$constructor.apply(this, arguments);\n      }\n    };\n\n    zrUtil.extend(ExtendedClass.prototype, proto);\n    ExtendedClass.extend = this.extend;\n    ExtendedClass.superCall = superCall;\n    ExtendedClass.superApply = superApply;\n    zrUtil.inherits(ExtendedClass, this);\n    ExtendedClass.superClass = superClass;\n    return ExtendedClass;\n  };\n} // superCall should have class info, which can not be fetch from 'this'.\n// Consider this case:\n// class A has method f,\n// class B inherits class A, overrides method f, f call superApply('f'),\n// class C inherits class B, do not overrides method f,\n// then when method of class C is called, dead loop occured.\n\n\nfunction superCall(context, methodName) {\n  var args = zrUtil.slice(arguments, 2);\n  return this.superClass.prototype[methodName].apply(context, args);\n}\n\nfunction superApply(context, methodName, args) {\n  return this.superClass.prototype[methodName].apply(context, args);\n}\n/**\n * @param {Object} entity\n * @param {Object} options\n * @param {boolean} [options.registerWhenExtend]\n * @public\n */\n\n\nfunction enableClassManagement(entity, options) {\n  options = options || {};\n  /**\n   * Component model classes\n   * key: componentType,\n   * value:\n   *     componentClass, when componentType is 'xxx'\n   *     or Object.<subKey, componentClass>, when componentType is 'xxx.yy'\n   * @type {Object}\n   */\n\n  var storage = {};\n\n  entity.registerClass = function (Clazz, componentType) {\n    if (componentType) {\n      checkClassType(componentType);\n      componentType = parseClassType(componentType);\n\n      if (!componentType.sub) {\n        storage[componentType.main] = Clazz;\n      } else if (componentType.sub !== IS_CONTAINER) {\n        var container = makeContainer(componentType);\n        container[componentType.sub] = Clazz;\n      }\n    }\n\n    return Clazz;\n  };\n\n  entity.getClass = function (componentMainType, subType, throwWhenNotFound) {\n    var Clazz = storage[componentMainType];\n\n    if (Clazz && Clazz[IS_CONTAINER]) {\n      Clazz = subType ? Clazz[subType] : null;\n    }\n\n    if (throwWhenNotFound && !Clazz) {\n      throw new Error(!subType ? componentMainType + '.' + 'type should be specified.' : 'Component ' + componentMainType + '.' + (subType || '') + ' not exists. Load it first.');\n    }\n\n    return Clazz;\n  };\n\n  entity.getClassesByMainType = function (componentType) {\n    componentType = parseClassType(componentType);\n    var result = [];\n    var obj = storage[componentType.main];\n\n    if (obj && obj[IS_CONTAINER]) {\n      zrUtil.each(obj, function (o, type) {\n        type !== IS_CONTAINER && result.push(o);\n      });\n    } else {\n      result.push(obj);\n    }\n\n    return result;\n  };\n\n  entity.hasClass = function (componentType) {\n    // Just consider componentType.main.\n    componentType = parseClassType(componentType);\n    return !!storage[componentType.main];\n  };\n  /**\n   * @return {Array.<string>} Like ['aa', 'bb'], but can not be ['aa.xx']\n   */\n\n\n  entity.getAllClassMainTypes = function () {\n    var types = [];\n    zrUtil.each(storage, function (obj, type) {\n      types.push(type);\n    });\n    return types;\n  };\n  /**\n   * If a main type is container and has sub types\n   * @param  {string}  mainType\n   * @return {boolean}\n   */\n\n\n  entity.hasSubTypes = function (componentType) {\n    componentType = parseClassType(componentType);\n    var obj = storage[componentType.main];\n    return obj && obj[IS_CONTAINER];\n  };\n\n  entity.parseClassType = parseClassType;\n\n  function makeContainer(componentType) {\n    var container = storage[componentType.main];\n\n    if (!container || !container[IS_CONTAINER]) {\n      container = storage[componentType.main] = {};\n      container[IS_CONTAINER] = true;\n    }\n\n    return container;\n  }\n\n  if (options.registerWhenExtend) {\n    var originalExtend = entity.extend;\n\n    if (originalExtend) {\n      entity.extend = function (proto) {\n        var ExtendedClass = originalExtend.call(this, proto);\n        return entity.registerClass(ExtendedClass, proto.type);\n      };\n    }\n  }\n\n  return entity;\n}\n/**\n * @param {string|Array.<string>} properties\n */\n\n\nfunction setReadOnly(obj, properties) {// FIXME It seems broken in IE8 simulation of IE11\n  // if (!zrUtil.isArray(properties)) {\n  //     properties = properties != null ? [properties] : [];\n  // }\n  // zrUtil.each(properties, function (prop) {\n  //     var value = obj[prop];\n  //     Object.defineProperty\n  //         && Object.defineProperty(obj, prop, {\n  //             value: value, writable: false\n  //         });\n  //     zrUtil.isArray(obj[prop])\n  //         && Object.freeze\n  //         && Object.freeze(obj[prop]);\n  // });\n}\n\nexports.set = set;\nexports.get = get;\nexports.hasOwn = hasOwn;\nexports.parseClassType = parseClassType;\nexports.enableClassExtend = enableClassExtend;\nexports.enableClassManagement = enableClassManagement;\nexports.setReadOnly = setReadOnly;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar _clazz = require(\"./clazz\");\n\nvar parseClassType = _clazz.parseClassType;\nvar base = 0;\nvar DELIMITER = '_';\n/**\n * @public\n * @param {string} type\n * @return {string}\n */\n\nfunction getUID(type) {\n  // Considering the case of crossing js context,\n  // use Math.random to make id as unique as possible.\n  return [type || '', base++, Math.random()].join(DELIMITER);\n}\n/**\n * @inner\n */\n\n\nfunction enableSubTypeDefaulter(entity) {\n  var subTypeDefaulters = {};\n\n  entity.registerSubTypeDefaulter = function (componentType, defaulter) {\n    componentType = parseClassType(componentType);\n    subTypeDefaulters[componentType.main] = defaulter;\n  };\n\n  entity.determineSubType = function (componentType, option) {\n    var type = option.type;\n\n    if (!type) {\n      var componentTypeMain = parseClassType(componentType).main;\n\n      if (entity.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {\n        type = subTypeDefaulters[componentTypeMain](option);\n      }\n    }\n\n    return type;\n  };\n\n  return entity;\n}\n/**\n * Topological travel on Activity Network (Activity On Vertices).\n * Dependencies is defined in Model.prototype.dependencies, like ['xAxis', 'yAxis'].\n *\n * If 'xAxis' or 'yAxis' is absent in componentTypeList, just ignore it in topology.\n *\n * If there is circle dependencey, Error will be thrown.\n *\n */\n\n\nfunction enableTopologicalTravel(entity, dependencyGetter) {\n  /**\n   * @public\n   * @param {Array.<string>} targetNameList Target Component type list.\n   *                                           Can be ['aa', 'bb', 'aa.xx']\n   * @param {Array.<string>} fullNameList By which we can build dependency graph.\n   * @param {Function} callback Params: componentType, dependencies.\n   * @param {Object} context Scope of callback.\n   */\n  entity.topologicalTravel = function (targetNameList, fullNameList, callback, context) {\n    if (!targetNameList.length) {\n      return;\n    }\n\n    var result = makeDepndencyGraph(fullNameList);\n    var graph = result.graph;\n    var stack = result.noEntryList;\n    var targetNameSet = {};\n    zrUtil.each(targetNameList, function (name) {\n      targetNameSet[name] = true;\n    });\n\n    while (stack.length) {\n      var currComponentType = stack.pop();\n      var currVertex = graph[currComponentType];\n      var isInTargetNameSet = !!targetNameSet[currComponentType];\n\n      if (isInTargetNameSet) {\n        callback.call(context, currComponentType, currVertex.originalDeps.slice());\n        delete targetNameSet[currComponentType];\n      }\n\n      zrUtil.each(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);\n    }\n\n    zrUtil.each(targetNameSet, function () {\n      throw new Error('Circle dependency may exists');\n    });\n\n    function removeEdge(succComponentType) {\n      graph[succComponentType].entryCount--;\n\n      if (graph[succComponentType].entryCount === 0) {\n        stack.push(succComponentType);\n      }\n    } // Consider this case: legend depends on series, and we call\n    // chart.setOption({series: [...]}), where only series is in option.\n    // If we do not have 'removeEdgeAndAdd', legendModel.mergeOption will\n    // not be called, but only sereis.mergeOption is called. Thus legend\n    // have no chance to update its local record about series (like which\n    // name of series is available in legend).\n\n\n    function removeEdgeAndAdd(succComponentType) {\n      targetNameSet[succComponentType] = true;\n      removeEdge(succComponentType);\n    }\n  };\n  /**\n   * DepndencyGraph: {Object}\n   * key: conponentType,\n   * value: {\n   *     successor: [conponentTypes...],\n   *     originalDeps: [conponentTypes...],\n   *     entryCount: {number}\n   * }\n   */\n\n\n  function makeDepndencyGraph(fullNameList) {\n    var graph = {};\n    var noEntryList = [];\n    zrUtil.each(fullNameList, function (name) {\n      var thisItem = createDependencyGraphItem(graph, name);\n      var originalDeps = thisItem.originalDeps = dependencyGetter(name);\n      var availableDeps = getAvailableDependencies(originalDeps, fullNameList);\n      thisItem.entryCount = availableDeps.length;\n\n      if (thisItem.entryCount === 0) {\n        noEntryList.push(name);\n      }\n\n      zrUtil.each(availableDeps, function (dependentName) {\n        if (zrUtil.indexOf(thisItem.predecessor, dependentName) < 0) {\n          thisItem.predecessor.push(dependentName);\n        }\n\n        var thatItem = createDependencyGraphItem(graph, dependentName);\n\n        if (zrUtil.indexOf(thatItem.successor, dependentName) < 0) {\n          thatItem.successor.push(name);\n        }\n      });\n    });\n    return {\n      graph: graph,\n      noEntryList: noEntryList\n    };\n  }\n\n  function createDependencyGraphItem(graph, name) {\n    if (!graph[name]) {\n      graph[name] = {\n        predecessor: [],\n        successor: []\n      };\n    }\n\n    return graph[name];\n  }\n\n  function getAvailableDependencies(originalDeps, fullNameList) {\n    var availableDeps = [];\n    zrUtil.each(originalDeps, function (dep) {\n      zrUtil.indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);\n    });\n    return availableDeps;\n  }\n}\n\nexports.getUID = getUID;\nexports.enableSubTypeDefaulter = enableSubTypeDefaulter;\nexports.enableTopologicalTravel = enableTopologicalTravel;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar numberUtil = require(\"./number\");\n\n/**\n * ,\n * @param {string|number} x\n * @return {string}\n */\nfunction addCommas(x) {\n  if (isNaN(x)) {\n    return '-';\n  }\n\n  x = (x + '').split('.');\n  return x[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,') + (x.length > 1 ? '.' + x[1] : '');\n}\n/**\n * @param {string} str\n * @param {boolean} [upperCaseFirst=false]\n * @return {string} str\n */\n\n\nfunction toCamelCase(str, upperCaseFirst) {\n  str = (str || '').toLowerCase().replace(/-(.)/g, function (match, group1) {\n    return group1.toUpperCase();\n  });\n\n  if (upperCaseFirst && str) {\n    str = str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  return str;\n}\n\nvar normalizeCssArray = zrUtil.normalizeCssArray;\n\nfunction encodeHTML(source) {\n  return String(source).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;');\n}\n\nvar TPL_VAR_ALIAS = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];\n\nvar wrapVar = function (varName, seriesIdx) {\n  return '{' + varName + (seriesIdx == null ? '' : seriesIdx) + '}';\n};\n/**\n * Template formatter\n * @param {string} tpl\n * @param {Array.<Object>|Object} paramsList\n * @param {boolean} [encode=false]\n * @return {string}\n */\n\n\nfunction formatTpl(tpl, paramsList, encode) {\n  if (!zrUtil.isArray(paramsList)) {\n    paramsList = [paramsList];\n  }\n\n  var seriesLen = paramsList.length;\n\n  if (!seriesLen) {\n    return '';\n  }\n\n  var $vars = paramsList[0].$vars || [];\n\n  for (var i = 0; i < $vars.length; i++) {\n    var alias = TPL_VAR_ALIAS[i];\n    var val = wrapVar(alias, 0);\n    tpl = tpl.replace(wrapVar(alias), encode ? encodeHTML(val) : val);\n  }\n\n  for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {\n    for (var k = 0; k < $vars.length; k++) {\n      var val = paramsList[seriesIdx][$vars[k]];\n      tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k], seriesIdx), encode ? encodeHTML(val) : val);\n    }\n  }\n\n  return tpl;\n}\n/**\n * simple Template formatter\n *\n * @param {string} tpl\n * @param {Object} param\n * @param {boolean} [encode=false]\n * @return {string}\n */\n\n\nfunction formatTplSimple(tpl, param, encode) {\n  zrUtil.each(param, function (value, key) {\n    tpl = tpl.replace('{' + key + '}', encode ? encodeHTML(value) : value);\n  });\n  return tpl;\n}\n/**\n * @param {string} color\n * @param {string} [extraCssText]\n * @return {string}\n */\n\n\nfunction getTooltipMarker(color, extraCssText) {\n  return color ? '<span style=\"display:inline-block;margin-right:5px;' + 'border-radius:10px;width:9px;height:9px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>' : '';\n}\n/**\n * @param {string} str\n * @return {string}\n * @inner\n */\n\n\nvar s2d = function (str) {\n  return str < 10 ? '0' + str : str;\n};\n/**\n * ISO Date format\n * @param {string} tpl\n * @param {number} value\n * @param {boolean} [isUTC=false] Default in local time.\n *           see `module:echarts/scale/Time`\n *           and `module:echarts/util/number#parseDate`.\n * @inner\n */\n\n\nfunction formatTime(tpl, value, isUTC) {\n  if (tpl === 'week' || tpl === 'month' || tpl === 'quarter' || tpl === 'half-year' || tpl === 'year') {\n    tpl = 'MM-dd\\nyyyy';\n  }\n\n  var date = numberUtil.parseDate(value);\n  var utc = isUTC ? 'UTC' : '';\n  var y = date['get' + utc + 'FullYear']();\n  var M = date['get' + utc + 'Month']() + 1;\n  var d = date['get' + utc + 'Date']();\n  var h = date['get' + utc + 'Hours']();\n  var m = date['get' + utc + 'Minutes']();\n  var s = date['get' + utc + 'Seconds']();\n  tpl = tpl.replace('MM', s2d(M)).replace('M', M).replace('yyyy', y).replace('yy', y % 100).replace('dd', s2d(d)).replace('d', d).replace('hh', s2d(h)).replace('h', h).replace('mm', s2d(m)).replace('m', m).replace('ss', s2d(s)).replace('s', s);\n  return tpl;\n}\n/**\n * Capital first\n * @param {string} str\n * @return {string}\n */\n\n\nfunction capitalFirst(str) {\n  return str ? str.charAt(0).toUpperCase() + str.substr(1) : str;\n}\n\nvar truncateText = textContain.truncateText;\nvar getTextRect = textContain.getBoundingRect;\nexports.addCommas = addCommas;\nexports.toCamelCase = toCamelCase;\nexports.normalizeCssArray = normalizeCssArray;\nexports.encodeHTML = encodeHTML;\nexports.formatTpl = formatTpl;\nexports.formatTplSimple = formatTplSimple;\nexports.getTooltipMarker = getTooltipMarker;\nexports.formatTime = formatTime;\nexports.capitalFirst = capitalFirst;\nexports.truncateText = truncateText;\nexports.getTextRect = getTextRect;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar pathTool = require(\"zrender/lib/tool/path\");\n\nvar colorTool = require(\"zrender/lib/tool/color\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar vector = require(\"zrender/lib/core/vector\");\n\nvar Path = require(\"zrender/lib/graphic/Path\");\n\nvar Transformable = require(\"zrender/lib/mixin/Transformable\");\n\nvar Image = require(\"zrender/lib/graphic/Image\");\n\nexports.Image = Image;\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nexports.Group = Group;\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n\nexports.Text = Text;\n\nvar Circle = require(\"zrender/lib/graphic/shape/Circle\");\n\nexports.Circle = Circle;\n\nvar Sector = require(\"zrender/lib/graphic/shape/Sector\");\n\nexports.Sector = Sector;\n\nvar Ring = require(\"zrender/lib/graphic/shape/Ring\");\n\nexports.Ring = Ring;\n\nvar Polygon = require(\"zrender/lib/graphic/shape/Polygon\");\n\nexports.Polygon = Polygon;\n\nvar Polyline = require(\"zrender/lib/graphic/shape/Polyline\");\n\nexports.Polyline = Polyline;\n\nvar Rect = require(\"zrender/lib/graphic/shape/Rect\");\n\nexports.Rect = Rect;\n\nvar Line = require(\"zrender/lib/graphic/shape/Line\");\n\nexports.Line = Line;\n\nvar BezierCurve = require(\"zrender/lib/graphic/shape/BezierCurve\");\n\nexports.BezierCurve = BezierCurve;\n\nvar Arc = require(\"zrender/lib/graphic/shape/Arc\");\n\nexports.Arc = Arc;\n\nvar CompoundPath = require(\"zrender/lib/graphic/CompoundPath\");\n\nexports.CompoundPath = CompoundPath;\n\nvar LinearGradient = require(\"zrender/lib/graphic/LinearGradient\");\n\nexports.LinearGradient = LinearGradient;\n\nvar RadialGradient = require(\"zrender/lib/graphic/RadialGradient\");\n\nexports.RadialGradient = RadialGradient;\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nexports.BoundingRect = BoundingRect;\nvar round = Math.round;\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar EMPTY_OBJ = {};\n/**\n * Extend shape with parameters\n */\n\nfunction extendShape(opts) {\n  return Path.extend(opts);\n}\n/**\n * Extend path\n */\n\n\nfunction extendPath(pathData, opts) {\n  return pathTool.extendFromString(pathData, opts);\n}\n/**\n * Create a path element from path data string\n * @param {string} pathData\n * @param {Object} opts\n * @param {module:zrender/core/BoundingRect} rect\n * @param {string} [layout=cover] 'center' or 'cover'\n */\n\n\nfunction makePath(pathData, opts, rect, layout) {\n  var path = pathTool.createFromString(pathData, opts);\n  var boundingRect = path.getBoundingRect();\n\n  if (rect) {\n    if (layout === 'center') {\n      rect = centerGraphic(rect, boundingRect);\n    }\n\n    resizePath(path, rect);\n  }\n\n  return path;\n}\n/**\n * Create a image element from image url\n * @param {string} imageUrl image url\n * @param {Object} opts options\n * @param {module:zrender/core/BoundingRect} rect constrain rect\n * @param {string} [layout=cover] 'center' or 'cover'\n */\n\n\nfunction makeImage(imageUrl, rect, layout) {\n  var path = new Image({\n    style: {\n      image: imageUrl,\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    onload: function (img) {\n      if (layout === 'center') {\n        var boundingRect = {\n          width: img.width,\n          height: img.height\n        };\n        path.setStyle(centerGraphic(rect, boundingRect));\n      }\n    }\n  });\n  return path;\n}\n/**\n * Get position of centered element in bounding box.\n *\n * @param  {Object} rect         element local bounding box\n * @param  {Object} boundingRect constraint bounding box\n * @return {Object} element position containing x, y, width, and height\n */\n\n\nfunction centerGraphic(rect, boundingRect) {\n  // Set rect to center, keep width / height ratio.\n  var aspect = boundingRect.width / boundingRect.height;\n  var width = rect.height * aspect;\n  var height;\n\n  if (width <= rect.width) {\n    height = rect.height;\n  } else {\n    width = rect.width;\n    height = width / aspect;\n  }\n\n  var cx = rect.x + rect.width / 2;\n  var cy = rect.y + rect.height / 2;\n  return {\n    x: cx - width / 2,\n    y: cy - height / 2,\n    width: width,\n    height: height\n  };\n}\n\nvar mergePath = pathTool.mergePath;\n/**\n * Resize a path to fit the rect\n * @param {module:zrender/graphic/Path} path\n * @param {Object} rect\n */\n\nfunction resizePath(path, rect) {\n  if (!path.applyTransform) {\n    return;\n  }\n\n  var pathRect = path.getBoundingRect();\n  var m = pathRect.calculateTransform(rect);\n  path.applyTransform(m);\n}\n/**\n * Sub pixel optimize line for canvas\n *\n * @param {Object} param\n * @param {Object} [param.shape]\n * @param {number} [param.shape.x1]\n * @param {number} [param.shape.y1]\n * @param {number} [param.shape.x2]\n * @param {number} [param.shape.y2]\n * @param {Object} [param.style]\n * @param {number} [param.style.lineWidth]\n * @return {Object} Modified param\n */\n\n\nfunction subPixelOptimizeLine(param) {\n  var shape = param.shape;\n  var lineWidth = param.style.lineWidth;\n\n  if (round(shape.x1 * 2) === round(shape.x2 * 2)) {\n    shape.x1 = shape.x2 = subPixelOptimize(shape.x1, lineWidth, true);\n  }\n\n  if (round(shape.y1 * 2) === round(shape.y2 * 2)) {\n    shape.y1 = shape.y2 = subPixelOptimize(shape.y1, lineWidth, true);\n  }\n\n  return param;\n}\n/**\n * Sub pixel optimize rect for canvas\n *\n * @param {Object} param\n * @param {Object} [param.shape]\n * @param {number} [param.shape.x]\n * @param {number} [param.shape.y]\n * @param {number} [param.shape.width]\n * @param {number} [param.shape.height]\n * @param {Object} [param.style]\n * @param {number} [param.style.lineWidth]\n * @return {Object} Modified param\n */\n\n\nfunction subPixelOptimizeRect(param) {\n  var shape = param.shape;\n  var lineWidth = param.style.lineWidth;\n  var originX = shape.x;\n  var originY = shape.y;\n  var originWidth = shape.width;\n  var originHeight = shape.height;\n  shape.x = subPixelOptimize(shape.x, lineWidth, true);\n  shape.y = subPixelOptimize(shape.y, lineWidth, true);\n  shape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - shape.x, originWidth === 0 ? 0 : 1);\n  shape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - shape.y, originHeight === 0 ? 0 : 1);\n  return param;\n}\n/**\n * Sub pixel optimize for canvas\n *\n * @param {number} position Coordinate, such as x, y\n * @param {number} lineWidth Should be nonnegative integer.\n * @param {boolean=} positiveOrNegative Default false (negative).\n * @return {number} Optimized position.\n */\n\n\nfunction subPixelOptimize(position, lineWidth, positiveOrNegative) {\n  // Assure that (position + lineWidth / 2) is near integer edge,\n  // otherwise line will be fuzzy in canvas.\n  var doubledPosition = round(position * 2);\n  return (doubledPosition + round(lineWidth)) % 2 === 0 ? doubledPosition / 2 : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n}\n\nfunction hasFillOrStroke(fillOrStroke) {\n  return fillOrStroke != null && fillOrStroke != 'none';\n}\n\nfunction liftColor(color) {\n  return typeof color === 'string' ? colorTool.lift(color, -0.1) : color;\n}\n/**\n * @private\n */\n\n\nfunction cacheElementStl(el) {\n  if (el.__hoverStlDirty) {\n    var stroke = el.style.stroke;\n    var fill = el.style.fill; // Create hoverStyle on mouseover\n\n    var hoverStyle = el.__hoverStl;\n    hoverStyle.fill = hoverStyle.fill || (hasFillOrStroke(fill) ? liftColor(fill) : null);\n    hoverStyle.stroke = hoverStyle.stroke || (hasFillOrStroke(stroke) ? liftColor(stroke) : null);\n    var normalStyle = {};\n\n    for (var name in hoverStyle) {\n      // See comment in `doSingleEnterHover`.\n      if (hoverStyle[name] != null) {\n        normalStyle[name] = el.style[name];\n      }\n    }\n\n    el.__normalStl = normalStyle;\n    el.__hoverStlDirty = false;\n  }\n}\n/**\n * @private\n */\n\n\nfunction doSingleEnterHover(el) {\n  if (el.__isHover) {\n    return;\n  }\n\n  cacheElementStl(el);\n\n  if (el.useHoverLayer) {\n    el.__zr && el.__zr.addHover(el, el.__hoverStl);\n  } else {\n    var style = el.style;\n    var insideRollbackOpt = style.insideRollbackOpt; // Consider case: only `position: 'top'` is set on emphasis, then text\n    // color should be returned to `autoColor`, rather than remain '#fff'.\n    // So we should rollback then apply again after style merging.\n\n    insideRollbackOpt && rollbackInsideStyle(style); // styles can be:\n    // {\n    //     label: {\n    //         normal: {\n    //             show: false,\n    //             position: 'outside',\n    //             fontSize: 18\n    //         },\n    //         emphasis: {\n    //             show: true\n    //         }\n    //     }\n    // },\n    // where properties of `emphasis` may not appear in `normal`. We previously use\n    // module:echarts/util/model#defaultEmphasis to merge `normal` to `emphasis`.\n    // But consider rich text and setOption in merge mode, it is impossible to cover\n    // all properties in merge. So we use merge mode when setting style here, where\n    // only properties that is not `null/undefined` can be set. The disadventage:\n    // null/undefined can not be used to remove style any more in `emphasis`.\n\n    style.extendFrom(el.__hoverStl); // Do not save `insideRollback`.\n\n    if (insideRollbackOpt) {\n      applyInsideStyle(style, style.insideOriginalTextPosition, insideRollbackOpt); // textFill may be rollbacked to null.\n\n      if (style.textFill == null) {\n        style.textFill = insideRollbackOpt.autoColor;\n      }\n    }\n\n    el.dirty(false);\n    el.z2 += 1;\n  }\n\n  el.__isHover = true;\n}\n/**\n * @inner\n */\n\n\nfunction doSingleLeaveHover(el) {\n  if (!el.__isHover) {\n    return;\n  }\n\n  var normalStl = el.__normalStl;\n\n  if (el.useHoverLayer) {\n    el.__zr && el.__zr.removeHover(el);\n  } else {\n    // Consider null/undefined value, should use\n    // `setStyle` but not `extendFrom(stl, true)`.\n    normalStl && el.setStyle(normalStl);\n    el.z2 -= 1;\n  }\n\n  el.__isHover = false;\n}\n/**\n * @inner\n */\n\n\nfunction doEnterHover(el) {\n  el.type === 'group' ? el.traverse(function (child) {\n    if (child.type !== 'group') {\n      doSingleEnterHover(child);\n    }\n  }) : doSingleEnterHover(el);\n}\n\nfunction doLeaveHover(el) {\n  el.type === 'group' ? el.traverse(function (child) {\n    if (child.type !== 'group') {\n      doSingleLeaveHover(child);\n    }\n  }) : doSingleLeaveHover(el);\n}\n/**\n * @inner\n */\n\n\nfunction setElementHoverStl(el, hoverStl) {\n  // If element has sepcified hoverStyle, then use it instead of given hoverStyle\n  // Often used when item group has a label element and it's hoverStyle is different\n  el.__hoverStl = el.hoverStyle || hoverStl || {};\n  el.__hoverStlDirty = true;\n\n  if (el.__isHover) {\n    cacheElementStl(el);\n  }\n}\n/**\n * @inner\n */\n\n\nfunction onElementMouseOver(e) {\n  if (this.__hoverSilentOnTouch && e.zrByTouch) {\n    return;\n  } // Only if element is not in emphasis status\n\n\n  !this.__isEmphasis && doEnterHover(this);\n}\n/**\n * @inner\n */\n\n\nfunction onElementMouseOut(e) {\n  if (this.__hoverSilentOnTouch && e.zrByTouch) {\n    return;\n  } // Only if element is not in emphasis status\n\n\n  !this.__isEmphasis && doLeaveHover(this);\n}\n/**\n * @inner\n */\n\n\nfunction enterEmphasis() {\n  this.__isEmphasis = true;\n  doEnterHover(this);\n}\n/**\n * @inner\n */\n\n\nfunction leaveEmphasis() {\n  this.__isEmphasis = false;\n  doLeaveHover(this);\n}\n/**\n * Set hover style of element.\n * This method can be called repeatly without side-effects.\n * @param {module:zrender/Element} el\n * @param {Object} [hoverStyle]\n * @param {Object} [opt]\n * @param {boolean} [opt.hoverSilentOnTouch=false]\n *        In touch device, mouseover event will be trigger on touchstart event\n *        (see module:zrender/dom/HandlerProxy). By this mechanism, we can\n *        conviniently use hoverStyle when tap on touch screen without additional\n *        code for compatibility.\n *        But if the chart/component has select feature, which usually also use\n *        hoverStyle, there might be conflict between 'select-highlight' and\n *        'hover-highlight' especially when roam is enabled (see geo for example).\n *        In this case, hoverSilentOnTouch should be used to disable hover-highlight\n *        on touch device.\n */\n\n\nfunction setHoverStyle(el, hoverStyle, opt) {\n  el.__hoverSilentOnTouch = opt && opt.hoverSilentOnTouch;\n  el.type === 'group' ? el.traverse(function (child) {\n    if (child.type !== 'group') {\n      setElementHoverStl(child, hoverStyle);\n    }\n  }) : setElementHoverStl(el, hoverStyle); // Duplicated function will be auto-ignored, see Eventful.js.\n\n  el.on('mouseover', onElementMouseOver).on('mouseout', onElementMouseOut); // Emphasis, normal can be triggered manually\n\n  el.on('emphasis', enterEmphasis).on('normal', leaveEmphasis);\n}\n/**\n * @param {Object|module:zrender/graphic/Style} normalStyle\n * @param {Object} emphasisStyle\n * @param {module:echarts/model/Model} normalModel\n * @param {module:echarts/model/Model} emphasisModel\n * @param {Object} opt Check `opt` of `setTextStyleCommon` to find other props.\n * @param {Object} [opt.defaultText]\n * @param {module:echarts/model/Model} [opt.labelFetcher] Fetch text by\n *      `opt.labelFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex)`\n * @param {module:echarts/model/Model} [opt.labelDataIndex] Fetch text by\n *      `opt.textFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex)`\n * @param {module:echarts/model/Model} [opt.labelDimIndex] Fetch text by\n *      `opt.textFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex)`\n * @param {Object} [normalSpecified]\n * @param {Object} [emphasisSpecified]\n */\n\n\nfunction setLabelStyle(normalStyle, emphasisStyle, normalModel, emphasisModel, opt, normalSpecified, emphasisSpecified) {\n  opt = opt || EMPTY_OBJ;\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex; // This scenario, `label.normal.show = true; label.emphasis.show = false`,\n  // is not supported util someone requests.\n\n  var showNormal = normalModel.getShallow('show');\n  var showEmphasis = emphasisModel.getShallow('show'); // Consider performance, only fetch label when necessary.\n  // If `normal.show` is `false` and `emphasis.show` is `true` and `emphasis.formatter` is not set,\n  // label should be displayed, where text is fetched by `normal.formatter` or `opt.defaultText`.\n\n  var baseText = showNormal || showEmphasis ? zrUtil.retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex) : null, opt.defaultText) : null;\n  var normalStyleText = showNormal ? baseText : null;\n  var emphasisStyleText = showEmphasis ? zrUtil.retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, 'emphasis', null, labelDimIndex) : null, baseText) : null; // Optimize: If style.text is null, text will not be drawn.\n\n  if (normalStyleText != null || emphasisStyleText != null) {\n    // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n    // If we set default values on `emphasisStyle`, consider case:\n    // Firstly, `setOption(... label: {normal: {text: null}, emphasis: {show: true}} ...);`\n    // Secondly, `setOption(... label: {noraml: {show: true, text: 'abc', color: 'red'} ...);`\n    // Then the 'red' will not work on emphasis.\n    setTextStyle(normalStyle, normalModel, normalSpecified, opt);\n    setTextStyle(emphasisStyle, emphasisModel, emphasisSpecified, opt, true);\n  }\n\n  normalStyle.text = normalStyleText;\n  emphasisStyle.text = emphasisStyleText;\n}\n/**\n * Set basic textStyle properties.\n * @param {Object|module:zrender/graphic/Style} textStyle\n * @param {module:echarts/model/Model} model\n * @param {Object} [specifiedTextStyle] Can be overrided by settings in model.\n * @param {Object} [opt] See `opt` of `setTextStyleCommon`.\n * @param {boolean} [isEmphasis]\n */\n\n\nfunction setTextStyle(textStyle, textStyleModel, specifiedTextStyle, opt, isEmphasis) {\n  setTextStyleCommon(textStyle, textStyleModel, opt, isEmphasis);\n  specifiedTextStyle && zrUtil.extend(textStyle, specifiedTextStyle);\n  textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n  return textStyle;\n}\n/**\n * Set text option in the style.\n * @deprecated\n * @param {Object} textStyle\n * @param {module:echarts/model/Model} labelModel\n * @param {string|boolean} defaultColor Default text color.\n *        If set as false, it will be processed as a emphasis style.\n */\n\n\nfunction setText(textStyle, labelModel, defaultColor) {\n  var opt = {\n    isRectText: true\n  };\n  var isEmphasis;\n\n  if (defaultColor === false) {\n    isEmphasis = true;\n  } else {\n    // Support setting color as 'auto' to get visual color.\n    opt.autoColor = defaultColor;\n  }\n\n  setTextStyleCommon(textStyle, labelModel, opt, isEmphasis);\n  textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n}\n/**\n * {\n *      disableBox: boolean, Whether diable drawing box of block (outer most).\n *      isRectText: boolean,\n *      autoColor: string, specify a color when color is 'auto',\n *              for textFill, textStroke, textBackgroundColor, and textBorderColor.\n *              If autoColor specified, it is used as default textFill.\n *      useInsideStyle:\n *              `true`: Use inside style (textFill, textStroke, textStrokeWidth)\n *                  if `textFill` is not specified.\n *              `false`: Do not use inside style.\n *              `null/undefined`: use inside style if `isRectText` is true and\n *                  `textFill` is not specified and textPosition contains `'inside'`.\n *      forceRich: boolean\n * }\n */\n\n\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isEmphasis) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n\n  if (opt.isRectText) {\n    var textPosition = textStyleModel.getShallow('position') || (isEmphasis ? null : 'inside'); // 'outside' is not a valid zr textPostion value, but used\n    // in bar series, and magric type should be considered.\n\n    textPosition === 'outside' && (textPosition = 'top');\n    textStyle.textPosition = textPosition;\n    textStyle.textOffset = textStyleModel.getShallow('offset');\n    var labelRotate = textStyleModel.getShallow('rotate');\n    labelRotate != null && (labelRotate *= Math.PI / 180);\n    textStyle.textRotation = labelRotate;\n    textStyle.textDistance = zrUtil.retrieve2(textStyleModel.getShallow('distance'), isEmphasis ? null : 5);\n  }\n\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle; // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             normal: {\n  //                 rich: {\n  //                     // no 'a' here but using parent 'a'.\n  //                 }\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n\n  if (richItemNames) {\n    richResult = {};\n\n    for (var name in richItemNames) {\n      if (richItemNames.hasOwnProperty(name)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name]); // In rich, never `disableBox`.\n\n        setTokenTextStyle(richResult[name] = {}, richTextStyle, globalTextStyle, opt, isEmphasis);\n      }\n    }\n  }\n\n  textStyle.rich = richResult;\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isEmphasis, true);\n\n  if (opt.forceRich && !opt.textStyle) {\n    opt.textStyle = {};\n  }\n\n  return textStyle;\n} // Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             normal: {\n//                 rich: {\n//                     // no 'a' here but using parent 'a'.\n//                 }\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n\n\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n\n      for (var name in rich) {\n        if (rich.hasOwnProperty(name)) {\n          richItemNameMap[name] = 1;\n        }\n      }\n    }\n\n    textStyleModel = textStyleModel.parentModel;\n  }\n\n  return richItemNameMap;\n}\n\nfunction setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isEmphasis, isBlock) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isEmphasis && globalTextStyle || EMPTY_OBJ;\n  textStyle.textFill = getAutoColor(textStyleModel.getShallow('color'), opt) || globalTextStyle.color;\n  textStyle.textStroke = getAutoColor(textStyleModel.getShallow('textBorderColor'), opt) || globalTextStyle.textBorderColor;\n  textStyle.textStrokeWidth = zrUtil.retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n\n  if (!isEmphasis) {\n    if (isBlock) {\n      // Always set `insideRollback`, for clearing previous.\n      var originalTextPosition = textStyle.textPosition;\n      textStyle.insideRollback = applyInsideStyle(textStyle, originalTextPosition, opt); // Save original textPosition, because style.textPosition will be repalced by\n      // real location (like [10, 30]) in zrender.\n\n      textStyle.insideOriginalTextPosition = originalTextPosition;\n      textStyle.insideRollbackOpt = opt;\n    } // Set default finally.\n\n\n    if (textStyle.textFill == null) {\n      textStyle.textFill = opt.autoColor;\n    }\n  } // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n\n\n  textStyle.fontStyle = textStyleModel.getShallow('fontStyle') || globalTextStyle.fontStyle;\n  textStyle.fontWeight = textStyleModel.getShallow('fontWeight') || globalTextStyle.fontWeight;\n  textStyle.fontSize = textStyleModel.getShallow('fontSize') || globalTextStyle.fontSize;\n  textStyle.fontFamily = textStyleModel.getShallow('fontFamily') || globalTextStyle.fontFamily;\n  textStyle.textAlign = textStyleModel.getShallow('align');\n  textStyle.textVerticalAlign = textStyleModel.getShallow('verticalAlign') || textStyleModel.getShallow('baseline');\n  textStyle.textLineHeight = textStyleModel.getShallow('lineHeight');\n  textStyle.textWidth = textStyleModel.getShallow('width');\n  textStyle.textHeight = textStyleModel.getShallow('height');\n  textStyle.textTag = textStyleModel.getShallow('tag');\n\n  if (!isBlock || !opt.disableBox) {\n    textStyle.textBackgroundColor = getAutoColor(textStyleModel.getShallow('backgroundColor'), opt);\n    textStyle.textPadding = textStyleModel.getShallow('padding');\n    textStyle.textBorderColor = getAutoColor(textStyleModel.getShallow('borderColor'), opt);\n    textStyle.textBorderWidth = textStyleModel.getShallow('borderWidth');\n    textStyle.textBorderRadius = textStyleModel.getShallow('borderRadius');\n    textStyle.textBoxShadowColor = textStyleModel.getShallow('shadowColor');\n    textStyle.textBoxShadowBlur = textStyleModel.getShallow('shadowBlur');\n    textStyle.textBoxShadowOffsetX = textStyleModel.getShallow('shadowOffsetX');\n    textStyle.textBoxShadowOffsetY = textStyleModel.getShallow('shadowOffsetY');\n  }\n\n  textStyle.textShadowColor = textStyleModel.getShallow('textShadowColor') || globalTextStyle.textShadowColor;\n  textStyle.textShadowBlur = textStyleModel.getShallow('textShadowBlur') || globalTextStyle.textShadowBlur;\n  textStyle.textShadowOffsetX = textStyleModel.getShallow('textShadowOffsetX') || globalTextStyle.textShadowOffsetX;\n  textStyle.textShadowOffsetY = textStyleModel.getShallow('textShadowOffsetY') || globalTextStyle.textShadowOffsetY;\n}\n\nfunction getAutoColor(color, opt) {\n  return color !== 'auto' ? color : opt && opt.autoColor ? opt.autoColor : null;\n}\n\nfunction applyInsideStyle(textStyle, textPosition, opt) {\n  var useInsideStyle = opt.useInsideStyle;\n  var insideRollback;\n\n  if (textStyle.textFill == null && useInsideStyle !== false && (useInsideStyle === true || opt.isRectText && textPosition // textPosition can be [10, 30]\n  && typeof textPosition === 'string' && textPosition.indexOf('inside') >= 0)) {\n    insideRollback = {\n      textFill: null,\n      textStroke: textStyle.textStroke,\n      textStrokeWidth: textStyle.textStrokeWidth\n    };\n    textStyle.textFill = '#fff'; // Consider text with #fff overflow its container.\n\n    if (textStyle.textStroke == null) {\n      textStyle.textStroke = opt.autoColor;\n      textStyle.textStrokeWidth == null && (textStyle.textStrokeWidth = 2);\n    }\n  }\n\n  return insideRollback;\n}\n\nfunction rollbackInsideStyle(style) {\n  var insideRollback = style.insideRollback;\n\n  if (insideRollback) {\n    style.textFill = insideRollback.textFill;\n    style.textStroke = insideRollback.textStroke;\n    style.textStrokeWidth = insideRollback.textStrokeWidth;\n  }\n}\n\nfunction getFont(opt, ecModel) {\n  // ecModel or default text style model.\n  var gTextStyleModel = ecModel || ecModel.getModel('textStyle');\n  return [// FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' ');\n}\n\nfunction animateOrSetProps(isUpdate, el, props, animatableModel, dataIndex, cb) {\n  if (typeof dataIndex === 'function') {\n    cb = dataIndex;\n    dataIndex = null;\n  } // Do not check 'animation' property directly here. Consider this case:\n  // animation model is an `itemModel`, whose does not have `isAnimationEnabled`\n  // but its parent model (`seriesModel`) does.\n\n\n  var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\n\n  if (animationEnabled) {\n    var postfix = isUpdate ? 'Update' : '';\n    var duration = animatableModel.getShallow('animationDuration' + postfix);\n    var animationEasing = animatableModel.getShallow('animationEasing' + postfix);\n    var animationDelay = animatableModel.getShallow('animationDelay' + postfix);\n\n    if (typeof animationDelay === 'function') {\n      animationDelay = animationDelay(dataIndex, animatableModel.getAnimationDelayParams ? animatableModel.getAnimationDelayParams(el, dataIndex) : null);\n    }\n\n    if (typeof duration === 'function') {\n      duration = duration(dataIndex);\n    }\n\n    duration > 0 ? el.animateTo(props, duration, animationDelay || 0, animationEasing, cb, !!cb) : (el.stopAnimation(), el.attr(props), cb && cb());\n  } else {\n    el.stopAnimation();\n    el.attr(props);\n    cb && cb();\n  }\n}\n/**\n * Update graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So if do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n *\n * @param {module:zrender/Element} el\n * @param {Object} props\n * @param {module:echarts/model/Model} [animatableModel]\n * @param {number} [dataIndex]\n * @param {Function} [cb]\n * @example\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, dataIndex, function () { console.log('Animation done!'); });\n *     // Or\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, function () { console.log('Animation done!'); });\n */\n\n\nfunction updateProps(el, props, animatableModel, dataIndex, cb) {\n  animateOrSetProps(true, el, props, animatableModel, dataIndex, cb);\n}\n/**\n * Init graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So if do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n *\n * @param {module:zrender/Element} el\n * @param {Object} props\n * @param {module:echarts/model/Model} [animatableModel]\n * @param {number} [dataIndex]\n * @param {Function} cb\n */\n\n\nfunction initProps(el, props, animatableModel, dataIndex, cb) {\n  animateOrSetProps(false, el, props, animatableModel, dataIndex, cb);\n}\n/**\n * Get transform matrix of target (param target),\n * in coordinate of its ancestor (param ancestor)\n *\n * @param {module:zrender/mixin/Transformable} target\n * @param {module:zrender/mixin/Transformable} [ancestor]\n */\n\n\nfunction getTransform(target, ancestor) {\n  var mat = matrix.identity([]);\n\n  while (target && target !== ancestor) {\n    matrix.mul(mat, target.getLocalTransform(), mat);\n    target = target.parent;\n  }\n\n  return mat;\n}\n/**\n * Apply transform to an vertex.\n * @param {Array.<number>} target [x, y]\n * @param {Array.<number>|TypedArray.<number>|Object} transform Can be:\n *      + Transform matrix: like [1, 0, 0, 1, 0, 0]\n *      + {position, rotation, scale}, the same as `zrender/Transformable`.\n * @param {boolean=} invert Whether use invert matrix.\n * @return {Array.<number>} [x, y]\n */\n\n\nfunction applyTransform(target, transform, invert) {\n  if (transform && !zrUtil.isArrayLike(transform)) {\n    transform = Transformable.getLocalTransform(transform);\n  }\n\n  if (invert) {\n    transform = matrix.invert([], transform);\n  }\n\n  return vector.applyTransform([], target, transform);\n}\n/**\n * @param {string} direction 'left' 'right' 'top' 'bottom'\n * @param {Array.<number>} transform Transform matrix: like [1, 0, 0, 1, 0, 0]\n * @param {boolean=} invert Whether use invert matrix.\n * @return {string} Transformed direction. 'left' 'right' 'top' 'bottom'\n */\n\n\nfunction transformDirection(direction, transform, invert) {\n  // Pick a base, ensure that transform result will not be (0, 0).\n  var hBase = transform[4] === 0 || transform[5] === 0 || transform[0] === 0 ? 1 : Math.abs(2 * transform[4] / transform[0]);\n  var vBase = transform[4] === 0 || transform[5] === 0 || transform[2] === 0 ? 1 : Math.abs(2 * transform[4] / transform[2]);\n  var vertex = [direction === 'left' ? -hBase : direction === 'right' ? hBase : 0, direction === 'top' ? -vBase : direction === 'bottom' ? vBase : 0];\n  vertex = applyTransform(vertex, transform, invert);\n  return Math.abs(vertex[0]) > Math.abs(vertex[1]) ? vertex[0] > 0 ? 'right' : 'left' : vertex[1] > 0 ? 'bottom' : 'top';\n}\n/**\n * Apply group transition animation from g1 to g2.\n * If no animatableModel, no animation.\n */\n\n\nfunction groupTransition(g1, g2, animatableModel, cb) {\n  if (!g1 || !g2) {\n    return;\n  }\n\n  function getElMap(g) {\n    var elMap = {};\n    g.traverse(function (el) {\n      if (!el.isGroup && el.anid) {\n        elMap[el.anid] = el;\n      }\n    });\n    return elMap;\n  }\n\n  function getAnimatableProps(el) {\n    var obj = {\n      position: vector.clone(el.position),\n      rotation: el.rotation\n    };\n\n    if (el.shape) {\n      obj.shape = zrUtil.extend({}, el.shape);\n    }\n\n    return obj;\n  }\n\n  var elMap1 = getElMap(g1);\n  g2.traverse(function (el) {\n    if (!el.isGroup && el.anid) {\n      var oldEl = elMap1[el.anid];\n\n      if (oldEl) {\n        var newProp = getAnimatableProps(el);\n        el.attr(getAnimatableProps(oldEl));\n        updateProps(el, newProp, animatableModel, el.dataIndex);\n      } // else {\n      //     if (el.previousProps) {\n      //         graphic.updateProps\n      //     }\n      // }\n\n    }\n  });\n}\n/**\n * @param {Array.<Array.<number>>} points Like: [[23, 44], [53, 66], ...]\n * @param {Object} rect {x, y, width, height}\n * @return {Array.<Array.<number>>} A new clipped points.\n */\n\n\nfunction clipPointsByRect(points, rect) {\n  return zrUtil.map(points, function (point) {\n    var x = point[0];\n    x = mathMax(x, rect.x);\n    x = mathMin(x, rect.x + rect.width);\n    var y = point[1];\n    y = mathMax(y, rect.y);\n    y = mathMin(y, rect.y + rect.height);\n    return [x, y];\n  });\n}\n/**\n * @param {Object} targetRect {x, y, width, height}\n * @param {Object} rect {x, y, width, height}\n * @return {Object} A new clipped rect. If rect size are negative, return undefined.\n */\n\n\nfunction clipRectByRect(targetRect, rect) {\n  var x = mathMax(targetRect.x, rect.x);\n  var x2 = mathMin(targetRect.x + targetRect.width, rect.x + rect.width);\n  var y = mathMax(targetRect.y, rect.y);\n  var y2 = mathMin(targetRect.y + targetRect.height, rect.y + rect.height);\n\n  if (x2 >= x && y2 >= y) {\n    return {\n      x: x,\n      y: y,\n      width: x2 - x,\n      height: y2 - y\n    };\n  }\n}\n/**\n * @param {string} iconStr Support 'image://' or 'path://' or direct svg path.\n * @param {Object} [opt] Properties of `module:zrender/Element`, except `style`.\n * @param {Object} [rect] {x, y, width, height}\n * @return {module:zrender/Element} Icon path or image element.\n */\n\n\nfunction createIcon(iconStr, opt, rect) {\n  opt = zrUtil.extend({\n    rectHover: true\n  }, opt);\n  var style = opt.style = {\n    strokeNoScale: true\n  };\n  rect = rect || {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  };\n\n  if (iconStr) {\n    return iconStr.indexOf('image://') === 0 ? (style.image = iconStr.slice(8), zrUtil.defaults(style, rect), new Image(opt)) : makePath(iconStr.replace('path://', ''), opt, rect, 'center');\n  }\n}\n\nexports.extendShape = extendShape;\nexports.extendPath = extendPath;\nexports.makePath = makePath;\nexports.makeImage = makeImage;\nexports.mergePath = mergePath;\nexports.resizePath = resizePath;\nexports.subPixelOptimizeLine = subPixelOptimizeLine;\nexports.subPixelOptimizeRect = subPixelOptimizeRect;\nexports.subPixelOptimize = subPixelOptimize;\nexports.setHoverStyle = setHoverStyle;\nexports.setLabelStyle = setLabelStyle;\nexports.setTextStyle = setTextStyle;\nexports.setText = setText;\nexports.getFont = getFont;\nexports.updateProps = updateProps;\nexports.initProps = initProps;\nexports.getTransform = getTransform;\nexports.applyTransform = applyTransform;\nexports.transformDirection = transformDirection;\nexports.groupTransition = groupTransition;\nexports.clipPointsByRect = clipPointsByRect;\nexports.clipRectByRect = clipRectByRect;\nexports.createIcon = createIcon;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar _number = require(\"./number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar formatUtil = require(\"./format\");\n\n// Layout helpers for each component positioning\nvar each = zrUtil.each;\n/**\n * @public\n */\n\nvar LOCATION_PARAMS = ['left', 'right', 'top', 'bottom', 'width', 'height'];\n/**\n * @public\n */\n\nvar HV_NAMES = [['width', 'left', 'right'], ['height', 'top', 'bottom']];\n\nfunction boxLayout(orient, group, gap, maxWidth, maxHeight) {\n  var x = 0;\n  var y = 0;\n\n  if (maxWidth == null) {\n    maxWidth = Infinity;\n  }\n\n  if (maxHeight == null) {\n    maxHeight = Infinity;\n  }\n\n  var currentLineMaxSize = 0;\n  group.eachChild(function (child, idx) {\n    var position = child.position;\n    var rect = child.getBoundingRect();\n    var nextChild = group.childAt(idx + 1);\n    var nextChildRect = nextChild && nextChild.getBoundingRect();\n    var nextX;\n    var nextY;\n\n    if (orient === 'horizontal') {\n      var moveX = rect.width + (nextChildRect ? -nextChildRect.x + rect.x : 0);\n      nextX = x + moveX; // Wrap when width exceeds maxWidth or meet a `newline` group\n      // FIXME compare before adding gap?\n\n      if (nextX > maxWidth || child.newline) {\n        x = 0;\n        nextX = moveX;\n        y += currentLineMaxSize + gap;\n        currentLineMaxSize = rect.height;\n      } else {\n        // FIXME: consider rect.y is not `0`?\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);\n      }\n    } else {\n      var moveY = rect.height + (nextChildRect ? -nextChildRect.y + rect.y : 0);\n      nextY = y + moveY; // Wrap when width exceeds maxHeight or meet a `newline` group\n\n      if (nextY > maxHeight || child.newline) {\n        x += currentLineMaxSize + gap;\n        y = 0;\n        nextY = moveY;\n        currentLineMaxSize = rect.width;\n      } else {\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);\n      }\n    }\n\n    if (child.newline) {\n      return;\n    }\n\n    position[0] = x;\n    position[1] = y;\n    orient === 'horizontal' ? x = nextX + gap : y = nextY + gap;\n  });\n}\n/**\n * VBox or HBox layouting\n * @param {string} orient\n * @param {module:zrender/container/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\n\nvar box = boxLayout;\n/**\n * VBox layouting\n * @param {module:zrender/container/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\nvar vbox = zrUtil.curry(boxLayout, 'vertical');\n/**\n * HBox layouting\n * @param {module:zrender/container/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\nvar hbox = zrUtil.curry(boxLayout, 'horizontal');\n/**\n * If x or x2 is not specified or 'center' 'left' 'right',\n * the width would be as long as possible.\n * If y or y2 is not specified or 'middle' 'top' 'bottom',\n * the height would be as long as possible.\n *\n * @param {Object} positionInfo\n * @param {number|string} [positionInfo.x]\n * @param {number|string} [positionInfo.y]\n * @param {number|string} [positionInfo.x2]\n * @param {number|string} [positionInfo.y2]\n * @param {Object} containerRect {width, height}\n * @param {string|number} margin\n * @return {Object} {width, height}\n */\n\nfunction getAvailableSize(positionInfo, containerRect, margin) {\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var x = parsePercent(positionInfo.x, containerWidth);\n  var y = parsePercent(positionInfo.y, containerHeight);\n  var x2 = parsePercent(positionInfo.x2, containerWidth);\n  var y2 = parsePercent(positionInfo.y2, containerHeight);\n  (isNaN(x) || isNaN(parseFloat(positionInfo.x))) && (x = 0);\n  (isNaN(x2) || isNaN(parseFloat(positionInfo.x2))) && (x2 = containerWidth);\n  (isNaN(y) || isNaN(parseFloat(positionInfo.y))) && (y = 0);\n  (isNaN(y2) || isNaN(parseFloat(positionInfo.y2))) && (y2 = containerHeight);\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  return {\n    width: Math.max(x2 - x - margin[1] - margin[3], 0),\n    height: Math.max(y2 - y - margin[0] - margin[2], 0)\n  };\n}\n/**\n * Parse position info.\n *\n * @param {Object} positionInfo\n * @param {number|string} [positionInfo.left]\n * @param {number|string} [positionInfo.top]\n * @param {number|string} [positionInfo.right]\n * @param {number|string} [positionInfo.bottom]\n * @param {number|string} [positionInfo.width]\n * @param {number|string} [positionInfo.height]\n * @param {number|string} [positionInfo.aspect] Aspect is width / height\n * @param {Object} containerRect\n * @param {string|number} [margin]\n *\n * @return {module:zrender/core/BoundingRect}\n */\n\n\nfunction getLayoutRect(positionInfo, containerRect, margin) {\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var left = parsePercent(positionInfo.left, containerWidth);\n  var top = parsePercent(positionInfo.top, containerHeight);\n  var right = parsePercent(positionInfo.right, containerWidth);\n  var bottom = parsePercent(positionInfo.bottom, containerHeight);\n  var width = parsePercent(positionInfo.width, containerWidth);\n  var height = parsePercent(positionInfo.height, containerHeight);\n  var verticalMargin = margin[2] + margin[0];\n  var horizontalMargin = margin[1] + margin[3];\n  var aspect = positionInfo.aspect; // If width is not specified, calculate width from left and right\n\n  if (isNaN(width)) {\n    width = containerWidth - right - horizontalMargin - left;\n  }\n\n  if (isNaN(height)) {\n    height = containerHeight - bottom - verticalMargin - top;\n  }\n\n  if (aspect != null) {\n    // If width and height are not given\n    // 1. Graph should not exceeds the container\n    // 2. Aspect must be keeped\n    // 3. Graph should take the space as more as possible\n    // FIXME\n    // Margin is not considered, because there is no case that both\n    // using margin and aspect so far.\n    if (isNaN(width) && isNaN(height)) {\n      if (aspect > containerWidth / containerHeight) {\n        width = containerWidth * 0.8;\n      } else {\n        height = containerHeight * 0.8;\n      }\n    } // Calculate width or height with given aspect\n\n\n    if (isNaN(width)) {\n      width = aspect * height;\n    }\n\n    if (isNaN(height)) {\n      height = width / aspect;\n    }\n  } // If left is not specified, calculate left from right and width\n\n\n  if (isNaN(left)) {\n    left = containerWidth - right - width - horizontalMargin;\n  }\n\n  if (isNaN(top)) {\n    top = containerHeight - bottom - height - verticalMargin;\n  } // Align left and top\n\n\n  switch (positionInfo.left || positionInfo.right) {\n    case 'center':\n      left = containerWidth / 2 - width / 2 - margin[3];\n      break;\n\n    case 'right':\n      left = containerWidth - width - horizontalMargin;\n      break;\n  }\n\n  switch (positionInfo.top || positionInfo.bottom) {\n    case 'middle':\n    case 'center':\n      top = containerHeight / 2 - height / 2 - margin[0];\n      break;\n\n    case 'bottom':\n      top = containerHeight - height - verticalMargin;\n      break;\n  } // If something is wrong and left, top, width, height are calculated as NaN\n\n\n  left = left || 0;\n  top = top || 0;\n\n  if (isNaN(width)) {\n    // Width may be NaN if only one value is given except width\n    width = containerWidth - horizontalMargin - left - (right || 0);\n  }\n\n  if (isNaN(height)) {\n    // Height may be NaN if only one value is given except height\n    height = containerHeight - verticalMargin - top - (bottom || 0);\n  }\n\n  var rect = new BoundingRect(left + margin[3], top + margin[0], width, height);\n  rect.margin = margin;\n  return rect;\n}\n/**\n * Position a zr element in viewport\n *  Group position is specified by either\n *  {left, top}, {right, bottom}\n *  If all properties exists, right and bottom will be igonred.\n *\n * Logic:\n *     1. Scale (against origin point in parent coord)\n *     2. Rotate (against origin point in parent coord)\n *     3. Traslate (with el.position by this method)\n * So this method only fixes the last step 'Traslate', which does not affect\n * scaling and rotating.\n *\n * If be called repeatly with the same input el, the same result will be gotten.\n *\n * @param {module:zrender/Element} el Should have `getBoundingRect` method.\n * @param {Object} positionInfo\n * @param {number|string} [positionInfo.left]\n * @param {number|string} [positionInfo.top]\n * @param {number|string} [positionInfo.right]\n * @param {number|string} [positionInfo.bottom]\n * @param {number|string} [positionInfo.width] Only for opt.boundingModel: 'raw'\n * @param {number|string} [positionInfo.height] Only for opt.boundingModel: 'raw'\n * @param {Object} containerRect\n * @param {string|number} margin\n * @param {Object} [opt]\n * @param {Array.<number>} [opt.hv=[1,1]] Only horizontal or only vertical.\n * @param {Array.<number>} [opt.boundingMode='all']\n *        Specify how to calculate boundingRect when locating.\n *        'all': Position the boundingRect that is transformed and uioned\n *               both itself and its descendants.\n *               This mode simplies confine the elements in the bounding\n *               of their container (e.g., using 'right: 0').\n *        'raw': Position the boundingRect that is not transformed and only itself.\n *               This mode is useful when you want a element can overflow its\n *               container. (Consider a rotated circle needs to be located in a corner.)\n *               In this mode positionInfo.width/height can only be number.\n */\n\n\nfunction positionElement(el, positionInfo, containerRect, margin, opt) {\n  var h = !opt || !opt.hv || opt.hv[0];\n  var v = !opt || !opt.hv || opt.hv[1];\n  var boundingMode = opt && opt.boundingMode || 'all';\n\n  if (!h && !v) {\n    return;\n  }\n\n  var rect;\n\n  if (boundingMode === 'raw') {\n    rect = el.type === 'group' ? new BoundingRect(0, 0, +positionInfo.width || 0, +positionInfo.height || 0) : el.getBoundingRect();\n  } else {\n    rect = el.getBoundingRect();\n\n    if (el.needLocalTransform()) {\n      var transform = el.getLocalTransform(); // Notice: raw rect may be inner object of el,\n      // which should not be modified.\n\n      rect = rect.clone();\n      rect.applyTransform(transform);\n    }\n  } // The real width and height can not be specified but calculated by the given el.\n\n\n  positionInfo = getLayoutRect(zrUtil.defaults({\n    width: rect.width,\n    height: rect.height\n  }, positionInfo), containerRect, margin); // Because 'tranlate' is the last step in transform\n  // (see zrender/core/Transformable#getLocalTransfrom),\n  // we can just only modify el.position to get final result.\n\n  var elPos = el.position;\n  var dx = h ? positionInfo.x - rect.x : 0;\n  var dy = v ? positionInfo.y - rect.y : 0;\n  el.attr('position', boundingMode === 'raw' ? [dx, dy] : [elPos[0] + dx, elPos[1] + dy]);\n}\n/**\n * @param {Object} option Contains some of the properties in HV_NAMES.\n * @param {number} hvIdx 0: horizontal; 1: vertical.\n */\n\n\nfunction sizeCalculable(option, hvIdx) {\n  return option[HV_NAMES[hvIdx][0]] != null || option[HV_NAMES[hvIdx][1]] != null && option[HV_NAMES[hvIdx][2]] != null;\n}\n/**\n * Consider Case:\n * When defulat option has {left: 0, width: 100}, and we set {right: 0}\n * through setOption or media query, using normal zrUtil.merge will cause\n * {right: 0} does not take effect.\n *\n * @example\n * ComponentModel.extend({\n *     init: function () {\n *         ...\n *         var inputPositionParams = layout.getLayoutParams(option);\n *         this.mergeOption(inputPositionParams);\n *     },\n *     mergeOption: function (newOption) {\n *         newOption && zrUtil.merge(thisOption, newOption, true);\n *         layout.mergeLayoutParam(thisOption, newOption);\n *     }\n * });\n *\n * @param {Object} targetOption\n * @param {Object} newOption\n * @param {Object|string} [opt]\n * @param {boolean|Array.<boolean>} [opt.ignoreSize=false] Used for the components\n *  that width (or height) should not be calculated by left and right (or top and bottom).\n */\n\n\nfunction mergeLayoutParam(targetOption, newOption, opt) {\n  !zrUtil.isObject(opt) && (opt = {});\n  var ignoreSize = opt.ignoreSize;\n  !zrUtil.isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);\n  var hResult = merge(HV_NAMES[0], 0);\n  var vResult = merge(HV_NAMES[1], 1);\n  copy(HV_NAMES[0], targetOption, hResult);\n  copy(HV_NAMES[1], targetOption, vResult);\n\n  function merge(names, hvIdx) {\n    var newParams = {};\n    var newValueCount = 0;\n    var merged = {};\n    var mergedValueCount = 0;\n    var enoughParamNumber = 2;\n    each(names, function (name) {\n      merged[name] = targetOption[name];\n    });\n    each(names, function (name) {\n      // Consider case: newOption.width is null, which is\n      // set by user for removing width setting.\n      hasProp(newOption, name) && (newParams[name] = merged[name] = newOption[name]);\n      hasValue(newParams, name) && newValueCount++;\n      hasValue(merged, name) && mergedValueCount++;\n    });\n\n    if (ignoreSize[hvIdx]) {\n      // Only one of left/right is premitted to exist.\n      if (hasValue(newOption, names[1])) {\n        merged[names[2]] = null;\n      } else if (hasValue(newOption, names[2])) {\n        merged[names[1]] = null;\n      }\n\n      return merged;\n    } // Case: newOption: {width: ..., right: ...},\n    // or targetOption: {right: ...} and newOption: {width: ...},\n    // There is no conflict when merged only has params count\n    // little than enoughParamNumber.\n\n\n    if (mergedValueCount === enoughParamNumber || !newValueCount) {\n      return merged;\n    } // Case: newOption: {width: ..., right: ...},\n    // Than we can make sure user only want those two, and ignore\n    // all origin params in targetOption.\n    else if (newValueCount >= enoughParamNumber) {\n        return newParams;\n      } else {\n        // Chose another param from targetOption by priority.\n        for (var i = 0; i < names.length; i++) {\n          var name = names[i];\n\n          if (!hasProp(newParams, name) && hasProp(targetOption, name)) {\n            newParams[name] = targetOption[name];\n            break;\n          }\n        }\n\n        return newParams;\n      }\n  }\n\n  function hasProp(obj, name) {\n    return obj.hasOwnProperty(name);\n  }\n\n  function hasValue(obj, name) {\n    return obj[name] != null && obj[name] !== 'auto';\n  }\n\n  function copy(names, target, source) {\n    each(names, function (name) {\n      target[name] = source[name];\n    });\n  }\n}\n/**\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n * @param {Object} source\n * @return {Object} Result contains those props.\n */\n\n\nfunction getLayoutParams(source) {\n  return copyLayoutParams({}, source);\n}\n/**\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n * @param {Object} source\n * @return {Object} Result contains those props.\n */\n\n\nfunction copyLayoutParams(target, source) {\n  source && target && each(LOCATION_PARAMS, function (name) {\n    source.hasOwnProperty(name) && (target[name] = source[name]);\n  });\n  return target;\n}\n\nexports.LOCATION_PARAMS = LOCATION_PARAMS;\nexports.HV_NAMES = HV_NAMES;\nexports.box = box;\nexports.vbox = vbox;\nexports.hbox = hbox;\nexports.getAvailableSize = getAvailableSize;\nexports.getLayoutRect = getLayoutRect;\nexports.positionElement = positionElement;\nexports.sizeCalculable = sizeCalculable;\nexports.mergeLayoutParam = mergeLayoutParam;\nexports.getLayoutParams = getLayoutParams;\nexports.copyLayoutParams = copyLayoutParams;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar formatUtil = require(\"./format\");\n\nvar nubmerUtil = require(\"./number\");\n\nvar Model = require(\"../model/Model\");\n\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\n/**\n * If value is not array, then translate it to array.\n * @param  {*} value\n * @return {Array} [value] or value\n */\n\nfunction normalizeToArray(value) {\n  return value instanceof Array ? value : value == null ? [] : [value];\n}\n/**\n * Sync default option between normal and emphasis like `position` and `show`\n * In case some one will write code like\n *     label: {\n *         normal: {\n *             show: false,\n *             position: 'outside',\n *             fontSize: 18\n *         },\n *         emphasis: {\n *             show: true\n *         }\n *     }\n * @param {Object} opt\n * @param {Array.<string>} subOpts\n */\n\n\nfunction defaultEmphasis(opt, subOpts) {\n  if (opt) {\n    var emphasisOpt = opt.emphasis = opt.emphasis || {};\n    var normalOpt = opt.normal = opt.normal || {}; // Default emphasis option from normal\n\n    for (var i = 0, len = subOpts.length; i < len; i++) {\n      var subOptName = subOpts[i];\n\n      if (!emphasisOpt.hasOwnProperty(subOptName) && normalOpt.hasOwnProperty(subOptName)) {\n        emphasisOpt[subOptName] = normalOpt[subOptName];\n      }\n    }\n  }\n}\n\nvar TEXT_STYLE_OPTIONS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth', 'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY', 'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding']; // modelUtil.LABEL_OPTIONS = modelUtil.TEXT_STYLE_OPTIONS.concat([\n//     'position', 'offset', 'rotate', 'origin', 'show', 'distance', 'formatter',\n//     'fontStyle', 'fontWeight', 'fontSize', 'fontFamily',\n//     // FIXME: deprecated, check and remove it.\n//     'textStyle'\n// ]);\n\n/**\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n * This helper method retieves value from data.\n * @param {string|number|Date|Array|Object} dataItem\n * @return {number|string|Date|Array.<number|string|Date>}\n */\n\nfunction getDataItemValue(dataItem) {\n  // Performance sensitive.\n  return dataItem && (dataItem.value == null ? dataItem : dataItem.value);\n}\n/**\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n * This helper method determine if dataItem has extra option besides value\n * @param {string|number|Date|Array|Object} dataItem\n */\n\n\nfunction isDataItemOption(dataItem) {\n  return isObject(dataItem) && !(dataItem instanceof Array); // // markLine data can be array\n  // && !(dataItem[0] && isObject(dataItem[0]) && !(dataItem[0] instanceof Array));\n}\n/**\n * This helper method convert value in data.\n * @param {string|number|Date} value\n * @param {Object|string} [dimInfo] If string (like 'x'), dimType defaults 'number'.\n */\n\n\nfunction converDataValue(value, dimInfo) {\n  // Performance sensitive.\n  var dimType = dimInfo && dimInfo.type;\n\n  if (dimType === 'ordinal') {\n    return value;\n  }\n\n  if (dimType === 'time' // spead up when using timestamp\n  && typeof value !== 'number' && value != null && value !== '-') {\n    value = +nubmerUtil.parseDate(value);\n  } // dimType defaults 'number'.\n  // If dimType is not ordinal and value is null or undefined or NaN or '-',\n  // parse to NaN.\n\n\n  return value == null || value === '' ? NaN : +value; // If string (like '-'), using '+' parse to NaN\n}\n/**\n * Create a model proxy to be used in tooltip for edge data, markLine data, markPoint data.\n * @param {module:echarts/data/List} data\n * @param {Object} opt\n * @param {string} [opt.seriesIndex]\n * @param {Object} [opt.name]\n * @param {Object} [opt.mainType]\n * @param {Object} [opt.subType]\n */\n\n\nfunction createDataFormatModel(data, opt) {\n  var model = new Model();\n  zrUtil.mixin(model, dataFormatMixin);\n  model.seriesIndex = opt.seriesIndex;\n  model.name = opt.name || '';\n  model.mainType = opt.mainType;\n  model.subType = opt.subType;\n\n  model.getData = function () {\n    return data;\n  };\n\n  return model;\n} // PENDING A little ugly\n\n\nvar dataFormatMixin = {\n  /**\n   * Get params for formatter\n   * @param {number} dataIndex\n   * @param {string} [dataType]\n   * @return {Object}\n   */\n  getDataParams: function (dataIndex, dataType) {\n    var data = this.getData(dataType);\n    var rawValue = this.getRawValue(dataIndex, dataType);\n    var rawDataIndex = data.getRawIndex(dataIndex);\n    var name = data.getName(dataIndex, true);\n    var itemOpt = data.getRawDataItem(dataIndex);\n    var color = data.getItemVisual(dataIndex, 'color');\n    return {\n      componentType: this.mainType,\n      componentSubType: this.subType,\n      seriesType: this.mainType === 'series' ? this.subType : null,\n      seriesIndex: this.seriesIndex,\n      seriesId: this.id,\n      seriesName: this.name,\n      name: name,\n      dataIndex: rawDataIndex,\n      data: itemOpt,\n      dataType: dataType,\n      value: rawValue,\n      color: color,\n      marker: formatUtil.getTooltipMarker(color),\n      // Param name list for mapping `a`, `b`, `c`, `d`, `e`\n      $vars: ['seriesName', 'name', 'value']\n    };\n  },\n\n  /**\n   * Format label\n   * @param {number} dataIndex\n   * @param {string} [status='normal'] 'normal' or 'emphasis'\n   * @param {string} [dataType]\n   * @param {number} [dimIndex]\n   * @param {string} [labelProp='label']\n   * @return {string}\n   */\n  getFormattedLabel: function (dataIndex, status, dataType, dimIndex, labelProp) {\n    status = status || 'normal';\n    var data = this.getData(dataType);\n    var itemModel = data.getItemModel(dataIndex);\n    var params = this.getDataParams(dataIndex, dataType);\n\n    if (dimIndex != null && params.value instanceof Array) {\n      params.value = params.value[dimIndex];\n    }\n\n    var formatter = itemModel.get([labelProp || 'label', status, 'formatter']);\n\n    if (typeof formatter === 'function') {\n      params.status = status;\n      return formatter(params);\n    } else if (typeof formatter === 'string') {\n      return formatUtil.formatTpl(formatter, params);\n    }\n  },\n\n  /**\n   * Get raw value in option\n   * @param {number} idx\n   * @param {string} [dataType]\n   * @return {Object}\n   */\n  getRawValue: function (idx, dataType) {\n    var data = this.getData(dataType);\n    var dataItem = data.getRawDataItem(idx);\n\n    if (dataItem != null) {\n      return isObject(dataItem) && !(dataItem instanceof Array) ? dataItem.value : dataItem;\n    }\n  },\n\n  /**\n   * Should be implemented.\n   * @param {number} dataIndex\n   * @param {boolean} [multipleSeries=false]\n   * @param {number} [dataType]\n   * @return {string} tooltip string\n   */\n  formatTooltip: zrUtil.noop\n};\n/**\n * Mapping to exists for merge.\n *\n * @public\n * @param {Array.<Object>|Array.<module:echarts/model/Component>} exists\n * @param {Object|Array.<Object>} newCptOptions\n * @return {Array.<Object>} Result, like [{exist: ..., option: ...}, {}],\n *                          index of which is the same as exists.\n */\n\nfunction mappingToExists(exists, newCptOptions) {\n  // Mapping by the order by original option (but not order of\n  // new option) in merge mode. Because we should ensure\n  // some specified index (like xAxisIndex) is consistent with\n  // original option, which is easy to understand, espatially in\n  // media query. And in most case, merge option is used to\n  // update partial option but not be expected to change order.\n  newCptOptions = (newCptOptions || []).slice();\n  var result = zrUtil.map(exists || [], function (obj, index) {\n    return {\n      exist: obj\n    };\n  }); // Mapping by id or name if specified.\n\n  each(newCptOptions, function (cptOption, index) {\n    if (!isObject(cptOption)) {\n      return;\n    } // id has highest priority.\n\n\n    for (var i = 0; i < result.length; i++) {\n      if (!result[i].option // Consider name: two map to one.\n      && cptOption.id != null && result[i].exist.id === cptOption.id + '') {\n        result[i].option = cptOption;\n        newCptOptions[index] = null;\n        return;\n      }\n    }\n\n    for (var i = 0; i < result.length; i++) {\n      var exist = result[i].exist;\n\n      if (!result[i].option // Consider name: two map to one.\n      // Can not match when both ids exist but different.\n      && (exist.id == null || cptOption.id == null) && cptOption.name != null && !isIdInner(cptOption) && !isIdInner(exist) && exist.name === cptOption.name + '') {\n        result[i].option = cptOption;\n        newCptOptions[index] = null;\n        return;\n      }\n    }\n  }); // Otherwise mapping by index.\n\n  each(newCptOptions, function (cptOption, index) {\n    if (!isObject(cptOption)) {\n      return;\n    }\n\n    var i = 0;\n\n    for (; i < result.length; i++) {\n      var exist = result[i].exist;\n\n      if (!result[i].option // Existing model that already has id should be able to\n      // mapped to (because after mapping performed model may\n      // be assigned with a id, whish should not affect next\n      // mapping), except those has inner id.\n      && !isIdInner(exist) // Caution:\n      // Do not overwrite id. But name can be overwritten,\n      // because axis use name as 'show label text'.\n      // 'exist' always has id and name and we dont\n      // need to check it.\n      && cptOption.id == null) {\n        result[i].option = cptOption;\n        break;\n      }\n    }\n\n    if (i >= result.length) {\n      result.push({\n        option: cptOption\n      });\n    }\n  });\n  return result;\n}\n/**\n * Make id and name for mapping result (result of mappingToExists)\n * into `keyInfo` field.\n *\n * @public\n * @param {Array.<Object>} Result, like [{exist: ..., option: ...}, {}],\n *                          which order is the same as exists.\n * @return {Array.<Object>} The input.\n */\n\n\nfunction makeIdAndName(mapResult) {\n  // We use this id to hash component models and view instances\n  // in echarts. id can be specified by user, or auto generated.\n  // The id generation rule ensures new view instance are able\n  // to mapped to old instance when setOption are called in\n  // no-merge mode. So we generate model id by name and plus\n  // type in view id.\n  // name can be duplicated among components, which is convenient\n  // to specify multi components (like series) by one name.\n  // Ensure that each id is distinct.\n  var idMap = zrUtil.createHashMap();\n  each(mapResult, function (item, index) {\n    var existCpt = item.exist;\n    existCpt && idMap.set(existCpt.id, item);\n  });\n  each(mapResult, function (item, index) {\n    var opt = item.option;\n    zrUtil.assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, 'id duplicates: ' + (opt && opt.id));\n    opt && opt.id != null && idMap.set(opt.id, item);\n    !item.keyInfo && (item.keyInfo = {});\n  }); // Make name and id.\n\n  each(mapResult, function (item, index) {\n    var existCpt = item.exist;\n    var opt = item.option;\n    var keyInfo = item.keyInfo;\n\n    if (!isObject(opt)) {\n      return;\n    } // name can be overwitten. Consider case: axis.name = '20km'.\n    // But id generated by name will not be changed, which affect\n    // only in that case: setOption with 'not merge mode' and view\n    // instance will be recreated, which can be accepted.\n\n\n    keyInfo.name = opt.name != null ? opt.name + '' : existCpt ? existCpt.name : '\\0-'; // name may be displayed on screen, so use '-'.\n\n    if (existCpt) {\n      keyInfo.id = existCpt.id;\n    } else if (opt.id != null) {\n      keyInfo.id = opt.id + '';\n    } else {\n      // Consider this situatoin:\n      //  optionA: [{name: 'a'}, {name: 'a'}, {..}]\n      //  optionB [{..}, {name: 'a'}, {name: 'a'}]\n      // Series with the same name between optionA and optionB\n      // should be mapped.\n      var idNum = 0;\n\n      do {\n        keyInfo.id = '\\0' + keyInfo.name + '\\0' + idNum++;\n      } while (idMap.get(keyInfo.id));\n    }\n\n    idMap.set(keyInfo.id, item);\n  });\n}\n/**\n * @public\n * @param {Object} cptOption\n * @return {boolean}\n */\n\n\nfunction isIdInner(cptOption) {\n  return isObject(cptOption) && cptOption.id && (cptOption.id + '').indexOf('\\0_ec_\\0') === 0;\n}\n/**\n * A helper for removing duplicate items between batchA and batchB,\n * and in themselves, and categorize by series.\n *\n * @param {Array.<Object>} batchA Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n * @param {Array.<Object>} batchB Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n * @return {Array.<Array.<Object>, Array.<Object>>} result: [resultBatchA, resultBatchB]\n */\n\n\nfunction compressBatches(batchA, batchB) {\n  var mapA = {};\n  var mapB = {};\n  makeMap(batchA || [], mapA);\n  makeMap(batchB || [], mapB, mapA);\n  return [mapToArray(mapA), mapToArray(mapB)];\n\n  function makeMap(sourceBatch, map, otherMap) {\n    for (var i = 0, len = sourceBatch.length; i < len; i++) {\n      var seriesId = sourceBatch[i].seriesId;\n      var dataIndices = normalizeToArray(sourceBatch[i].dataIndex);\n      var otherDataIndices = otherMap && otherMap[seriesId];\n\n      for (var j = 0, lenj = dataIndices.length; j < lenj; j++) {\n        var dataIndex = dataIndices[j];\n\n        if (otherDataIndices && otherDataIndices[dataIndex]) {\n          otherDataIndices[dataIndex] = null;\n        } else {\n          (map[seriesId] || (map[seriesId] = {}))[dataIndex] = 1;\n        }\n      }\n    }\n  }\n\n  function mapToArray(map, isData) {\n    var result = [];\n\n    for (var i in map) {\n      if (map.hasOwnProperty(i) && map[i] != null) {\n        if (isData) {\n          result.push(+i);\n        } else {\n          var dataIndices = mapToArray(map[i], true);\n          dataIndices.length && result.push({\n            seriesId: i,\n            dataIndex: dataIndices\n          });\n        }\n      }\n    }\n\n    return result;\n  }\n}\n/**\n * @param {module:echarts/data/List} data\n * @param {Object} payload Contains dataIndex (means rawIndex) / dataIndexInside / name\n *                         each of which can be Array or primary type.\n * @return {number|Array.<number>} dataIndex If not found, return undefined/null.\n */\n\n\nfunction queryDataIndex(data, payload) {\n  if (payload.dataIndexInside != null) {\n    return payload.dataIndexInside;\n  } else if (payload.dataIndex != null) {\n    return zrUtil.isArray(payload.dataIndex) ? zrUtil.map(payload.dataIndex, function (value) {\n      return data.indexOfRawIndex(value);\n    }) : data.indexOfRawIndex(payload.dataIndex);\n  } else if (payload.name != null) {\n    return zrUtil.isArray(payload.name) ? zrUtil.map(payload.name, function (value) {\n      return data.indexOfName(value);\n    }) : data.indexOfName(payload.name);\n  }\n}\n/**\n * Enable property storage to any host object.\n * Notice: Serialization is not supported.\n *\n * For example:\n * var get = modelUitl.makeGetter();\n *\n * function some(hostObj) {\n *      get(hostObj)._someProperty = 1212;\n *      ...\n * }\n *\n * @return {Function}\n */\n\n\nvar makeGetter = function () {\n  var index = 0;\n  return function () {\n    var key = '\\0__ec_prop_getter_' + index++;\n    return function (hostObj) {\n      return hostObj[key] || (hostObj[key] = {});\n    };\n  };\n}();\n/**\n * @param {module:echarts/model/Global} ecModel\n * @param {string|Object} finder\n *        If string, e.g., 'geo', means {geoIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex, seriesId, seriesName,\n *            geoIndex, geoId, geoName,\n *            bmapIndex, bmapId, bmapName,\n *            xAxisIndex, xAxisId, xAxisName,\n *            yAxisIndex, yAxisId, yAxisName,\n *            gridIndex, gridId, gridName,\n *            ... (can be extended)\n *        }\n *        Each properties can be number|string|Array.<number>|Array.<string>\n *        For example, a finder could be\n *        {\n *            seriesIndex: 3,\n *            geoId: ['aa', 'cc'],\n *            gridName: ['xx', 'rr']\n *        }\n *        xxxIndex can be set as 'all' (means all xxx) or 'none' (means not specify)\n *        If nothing or null/undefined specified, return nothing.\n * @param {Object} [opt]\n * @param {string} [opt.defaultMainType]\n * @param {Array.<string>} [opt.includeMainTypes]\n * @return {Object} result like:\n *        {\n *            seriesModels: [seriesModel1, seriesModel2],\n *            seriesModel: seriesModel1, // The first model\n *            geoModels: [geoModel1, geoModel2],\n *            geoModel: geoModel1, // The first model\n *            ...\n *        }\n */\n\n\nfunction parseFinder(ecModel, finder, opt) {\n  if (zrUtil.isString(finder)) {\n    var obj = {};\n    obj[finder + 'Index'] = 0;\n    finder = obj;\n  }\n\n  var defaultMainType = opt && opt.defaultMainType;\n\n  if (defaultMainType && !has(finder, defaultMainType + 'Index') && !has(finder, defaultMainType + 'Id') && !has(finder, defaultMainType + 'Name')) {\n    finder[defaultMainType + 'Index'] = 0;\n  }\n\n  var result = {};\n  each(finder, function (value, key) {\n    var value = finder[key]; // Exclude 'dataIndex' and other illgal keys.\n\n    if (key === 'dataIndex' || key === 'dataIndexInside') {\n      result[key] = value;\n      return;\n    }\n\n    var parsedKey = key.match(/^(\\w+)(Index|Id|Name)$/) || [];\n    var mainType = parsedKey[1];\n    var queryType = (parsedKey[2] || '').toLowerCase();\n\n    if (!mainType || !queryType || value == null || queryType === 'index' && value === 'none' || opt && opt.includeMainTypes && zrUtil.indexOf(opt.includeMainTypes, mainType) < 0) {\n      return;\n    }\n\n    var queryParam = {\n      mainType: mainType\n    };\n\n    if (queryType !== 'index' || value !== 'all') {\n      queryParam[queryType] = value;\n    }\n\n    var models = ecModel.queryComponents(queryParam);\n    result[mainType + 'Models'] = models;\n    result[mainType + 'Model'] = models[0];\n  });\n  return result;\n}\n/**\n * @see {module:echarts/data/helper/completeDimensions}\n * @param {module:echarts/data/List} data\n * @param {string|number} dataDim\n * @return {string}\n */\n\n\nfunction dataDimToCoordDim(data, dataDim) {\n  var dimensions = data.dimensions;\n  dataDim = data.getDimension(dataDim);\n\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimItem = data.getDimensionInfo(dimensions[i]);\n\n    if (dimItem.name === dataDim) {\n      return dimItem.coordDim;\n    }\n  }\n}\n/**\n * @see {module:echarts/data/helper/completeDimensions}\n * @param {module:echarts/data/List} data\n * @param {string} coordDim\n * @return {Array.<string>} data dimensions on the coordDim.\n */\n\n\nfunction coordDimToDataDim(data, coordDim) {\n  var dataDim = [];\n  each(data.dimensions, function (dimName) {\n    var dimItem = data.getDimensionInfo(dimName);\n\n    if (dimItem.coordDim === coordDim) {\n      dataDim[dimItem.coordDimIndex] = dimItem.name;\n    }\n  });\n  return dataDim;\n}\n/**\n * @see {module:echarts/data/helper/completeDimensions}\n * @param {module:echarts/data/List} data\n * @param {string} otherDim Can be `otherDims`\n *                        like 'label' or 'tooltip'.\n * @return {Array.<string>} data dimensions on the otherDim.\n */\n\n\nfunction otherDimToDataDim(data, otherDim) {\n  var dataDim = [];\n  each(data.dimensions, function (dimName) {\n    var dimItem = data.getDimensionInfo(dimName);\n    var otherDims = dimItem.otherDims;\n    var dimIndex = otherDims[otherDim];\n\n    if (dimIndex != null && dimIndex !== false) {\n      dataDim[dimIndex] = dimItem.name;\n    }\n  });\n  return dataDim;\n}\n\nfunction has(obj, prop) {\n  return obj && obj.hasOwnProperty(prop);\n}\n\nexports.normalizeToArray = normalizeToArray;\nexports.defaultEmphasis = defaultEmphasis;\nexports.TEXT_STYLE_OPTIONS = TEXT_STYLE_OPTIONS;\nexports.getDataItemValue = getDataItemValue;\nexports.isDataItemOption = isDataItemOption;\nexports.converDataValue = converDataValue;\nexports.createDataFormatModel = createDataFormatModel;\nexports.dataFormatMixin = dataFormatMixin;\nexports.mappingToExists = mappingToExists;\nexports.makeIdAndName = makeIdAndName;\nexports.isIdInner = isIdInner;\nexports.compressBatches = compressBatches;\nexports.queryDataIndex = queryDataIndex;\nexports.makeGetter = makeGetter;\nexports.parseFinder = parseFinder;\nexports.dataDimToCoordDim = dataDimToCoordDim;\nexports.coordDimToDataDim = coordDimToDataDim;\nexports.otherDimToDataDim = otherDimToDataDim;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar RADIAN_EPSILON = 1e-4;\n\nfunction _trim(str) {\n  return str.replace(/^\\s+/, '').replace(/\\s+$/, '');\n}\n/**\n * Linear mapping a value from domain to range\n * @memberOf module:echarts/util/number\n * @param  {(number|Array.<number>)} val\n * @param  {Array.<number>} domain Domain extent domain[0] can be bigger than domain[1]\n * @param  {Array.<number>} range  Range extent range[0] can be bigger than range[1]\n * @param  {boolean} clamp\n * @return {(number|Array.<number>}\n */\n\n\nfunction linearMap(val, domain, range, clamp) {\n  var subDomain = domain[1] - domain[0];\n  var subRange = range[1] - range[0];\n\n  if (subDomain === 0) {\n    return subRange === 0 ? range[0] : (range[0] + range[1]) / 2;\n  } // Avoid accuracy problem in edge, such as\n  // 146.39 - 62.83 === 83.55999999999999.\n  // See echarts/test/ut/spec/util/number.js#linearMap#accuracyError\n  // It is a little verbose for efficiency considering this method\n  // is a hotspot.\n\n\n  if (clamp) {\n    if (subDomain > 0) {\n      if (val <= domain[0]) {\n        return range[0];\n      } else if (val >= domain[1]) {\n        return range[1];\n      }\n    } else {\n      if (val >= domain[0]) {\n        return range[0];\n      } else if (val <= domain[1]) {\n        return range[1];\n      }\n    }\n  } else {\n    if (val === domain[0]) {\n      return range[0];\n    }\n\n    if (val === domain[1]) {\n      return range[1];\n    }\n  }\n\n  return (val - domain[0]) / subDomain * subRange + range[0];\n}\n/**\n * Convert a percent string to absolute number.\n * Returns NaN if percent is not a valid string or number\n * @memberOf module:echarts/util/number\n * @param {string|number} percent\n * @param {number} all\n * @return {number}\n */\n\n\nfunction parsePercent(percent, all) {\n  switch (percent) {\n    case 'center':\n    case 'middle':\n      percent = '50%';\n      break;\n\n    case 'left':\n    case 'top':\n      percent = '0%';\n      break;\n\n    case 'right':\n    case 'bottom':\n      percent = '100%';\n      break;\n  }\n\n  if (typeof percent === 'string') {\n    if (_trim(percent).match(/%$/)) {\n      return parseFloat(percent) / 100 * all;\n    }\n\n    return parseFloat(percent);\n  }\n\n  return percent == null ? NaN : +percent;\n}\n/**\n * (1) Fix rounding error of float numbers.\n * (2) Support return string to avoid scientific notation like '3.5e-7'.\n *\n * @param {number} x\n * @param {number} [precision]\n * @param {boolean} [returnStr]\n * @return {number|string}\n */\n\n\nfunction round(x, precision, returnStr) {\n  if (precision == null) {\n    precision = 10;\n  } // Avoid range error\n\n\n  precision = Math.min(Math.max(0, precision), 20);\n  x = (+x).toFixed(precision);\n  return returnStr ? x : +x;\n}\n\nfunction asc(arr) {\n  arr.sort(function (a, b) {\n    return a - b;\n  });\n  return arr;\n}\n/**\n * Get precision\n * @param {number} val\n */\n\n\nfunction getPrecision(val) {\n  val = +val;\n\n  if (isNaN(val)) {\n    return 0;\n  } // It is much faster than methods converting number to string as follows\n  //      var tmp = val.toString();\n  //      return tmp.length - 1 - tmp.indexOf('.');\n  // especially when precision is low\n\n\n  var e = 1;\n  var count = 0;\n\n  while (Math.round(val * e) / e !== val) {\n    e *= 10;\n    count++;\n  }\n\n  return count;\n}\n/**\n * @param {string|number} val\n * @return {number}\n */\n\n\nfunction getPrecisionSafe(val) {\n  var str = val.toString(); // Consider scientific notation: '3.4e-12' '3.4e+12'\n\n  var eIndex = str.indexOf('e');\n\n  if (eIndex > 0) {\n    var precision = +str.slice(eIndex + 1);\n    return precision < 0 ? -precision : 0;\n  } else {\n    var dotIndex = str.indexOf('.');\n    return dotIndex < 0 ? 0 : str.length - 1 - dotIndex;\n  }\n}\n/**\n * Minimal dicernible data precisioin according to a single pixel.\n *\n * @param {Array.<number>} dataExtent\n * @param {Array.<number>} pixelExtent\n * @return {number} precision\n */\n\n\nfunction getPixelPrecision(dataExtent, pixelExtent) {\n  var log = Math.log;\n  var LN10 = Math.LN10;\n  var dataQuantity = Math.floor(log(dataExtent[1] - dataExtent[0]) / LN10);\n  var sizeQuantity = Math.round(log(Math.abs(pixelExtent[1] - pixelExtent[0])) / LN10); // toFixed() digits argument must be between 0 and 20.\n\n  var precision = Math.min(Math.max(-dataQuantity + sizeQuantity, 0), 20);\n  return !isFinite(precision) ? 20 : precision;\n}\n/**\n * Get a data of given precision, assuring the sum of percentages\n * in valueList is 1.\n * The largest remainer method is used.\n * https://en.wikipedia.org/wiki/Largest_remainder_method\n *\n * @param {Array.<number>} valueList a list of all data\n * @param {number} idx index of the data to be processed in valueList\n * @param {number} precision integer number showing digits of precision\n * @return {number} percent ranging from 0 to 100\n */\n\n\nfunction getPercentWithPrecision(valueList, idx, precision) {\n  if (!valueList[idx]) {\n    return 0;\n  }\n\n  var sum = zrUtil.reduce(valueList, function (acc, val) {\n    return acc + (isNaN(val) ? 0 : val);\n  }, 0);\n\n  if (sum === 0) {\n    return 0;\n  }\n\n  var digits = Math.pow(10, precision);\n  var votesPerQuota = zrUtil.map(valueList, function (val) {\n    return (isNaN(val) ? 0 : val) / sum * digits * 100;\n  });\n  var targetSeats = digits * 100;\n  var seats = zrUtil.map(votesPerQuota, function (votes) {\n    // Assign automatic seats.\n    return Math.floor(votes);\n  });\n  var currentSum = zrUtil.reduce(seats, function (acc, val) {\n    return acc + val;\n  }, 0);\n  var remainder = zrUtil.map(votesPerQuota, function (votes, idx) {\n    return votes - seats[idx];\n  }); // Has remainding votes.\n\n  while (currentSum < targetSeats) {\n    // Find next largest remainder.\n    var max = Number.NEGATIVE_INFINITY;\n    var maxId = null;\n\n    for (var i = 0, len = remainder.length; i < len; ++i) {\n      if (remainder[i] > max) {\n        max = remainder[i];\n        maxId = i;\n      }\n    } // Add a vote to max remainder.\n\n\n    ++seats[maxId];\n    remainder[maxId] = 0;\n    ++currentSum;\n  }\n\n  return seats[idx] / digits;\n} // Number.MAX_SAFE_INTEGER, ie do not support.\n\n\nvar MAX_SAFE_INTEGER = 9007199254740991;\n/**\n * To 0 - 2 * PI, considering negative radian.\n * @param {number} radian\n * @return {number}\n */\n\nfunction remRadian(radian) {\n  var pi2 = Math.PI * 2;\n  return (radian % pi2 + pi2) % pi2;\n}\n/**\n * @param {type} radian\n * @return {boolean}\n */\n\n\nfunction isRadianAroundZero(val) {\n  return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;\n}\n\nvar TIME_REG = /^(?:(\\d{4})(?:[-\\/](\\d{1,2})(?:[-\\/](\\d{1,2})(?:[T ](\\d{1,2})(?::(\\d\\d)(?::(\\d\\d)(?:[.,](\\d+))?)?)?(Z|[\\+\\-]\\d\\d:?\\d\\d)?)?)?)?)?$/; // jshint ignore:line\n\n/**\n * @param {string|Date|number} value These values can be accepted:\n *   + An instance of Date, represent a time in its own time zone.\n *   + Or string in a subset of ISO 8601, only including:\n *     + only year, month, date: '2012-03', '2012-03-01', '2012-03-01 05', '2012-03-01 05:06',\n *     + separated with T or space: '2012-03-01T12:22:33.123', '2012-03-01 12:22:33.123',\n *     + time zone: '2012-03-01T12:22:33Z', '2012-03-01T12:22:33+8000', '2012-03-01T12:22:33-05:00',\n *     all of which will be treated as local time if time zone is not specified\n *     (see <https://momentjs.com/>).\n *   + Or other string format, including (all of which will be treated as loacal time):\n *     '2012', '2012-3-1', '2012/3/1', '2012/03/01',\n *     '2009/6/12 2:00', '2009/6/12 2:05:08', '2009/6/12 2:05:08.123'\n *   + a timestamp, which represent a time in UTC.\n * @return {Date} date\n */\n\nfunction parseDate(value) {\n  if (value instanceof Date) {\n    return value;\n  } else if (typeof value === 'string') {\n    // Different browsers parse date in different way, so we parse it manually.\n    // Some other issues:\n    // new Date('1970-01-01') is UTC,\n    // new Date('1970/01/01') and new Date('1970-1-01') is local.\n    // See issue #3623\n    var match = TIME_REG.exec(value);\n\n    if (!match) {\n      // return Invalid Date.\n      return new Date(NaN);\n    } // Use local time when no timezone offset specifed.\n\n\n    if (!match[8]) {\n      // match[n] can only be string or undefined.\n      // But take care of '12' + 1 => '121'.\n      return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, +match[7] || 0);\n    } // Timezoneoffset of Javascript Date has considered DST (Daylight Saving Time,\n    // https://tc39.github.io/ecma262/#sec-daylight-saving-time-adjustment).\n    // For example, system timezone is set as \"Time Zone: America/Toronto\",\n    // then these code will get different result:\n    // `new Date(1478411999999).getTimezoneOffset();  // get 240`\n    // `new Date(1478412000000).getTimezoneOffset();  // get 300`\n    // So we should not use `new Date`, but use `Date.UTC`.\n    else {\n        var hour = +match[4] || 0;\n\n        if (match[8].toUpperCase() !== 'Z') {\n          hour -= match[8].slice(0, 3);\n        }\n\n        return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, +match[7] || 0));\n      }\n  } else if (value == null) {\n    return new Date(NaN);\n  }\n\n  return new Date(Math.round(value));\n}\n/**\n * Quantity of a number. e.g. 0.1, 1, 10, 100\n *\n * @param  {number} val\n * @return {number}\n */\n\n\nfunction quantity(val) {\n  return Math.pow(10, quantityExponent(val));\n}\n\nfunction quantityExponent(val) {\n  return Math.floor(Math.log(val) / Math.LN10);\n}\n/**\n * find a nice number approximately equal to x. Round the number if round = true,\n * take ceiling if round = false. The primary observation is that the nicest\n * numbers in decimal are 1, 2, and 5, and all power-of-ten multiples of these numbers.\n *\n * See \"Nice Numbers for Graph Labels\" of Graphic Gems.\n *\n * @param  {number} val Non-negative value.\n * @param  {boolean} round\n * @return {number}\n */\n\n\nfunction nice(val, round) {\n  var exponent = quantityExponent(val);\n  var exp10 = Math.pow(10, exponent);\n  var f = val / exp10; // 1 <= f < 10\n\n  var nf;\n\n  if (round) {\n    if (f < 1.5) {\n      nf = 1;\n    } else if (f < 2.5) {\n      nf = 2;\n    } else if (f < 4) {\n      nf = 3;\n    } else if (f < 7) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  } else {\n    if (f < 1) {\n      nf = 1;\n    } else if (f < 2) {\n      nf = 2;\n    } else if (f < 3) {\n      nf = 3;\n    } else if (f < 5) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  }\n\n  val = nf * exp10; // Fix 3 * 0.1 === 0.30000000000000004 issue (see IEEE 754).\n  // 20 is the uppper bound of toFixed.\n\n  return exponent >= -20 ? +val.toFixed(exponent < 0 ? -exponent : 0) : val;\n}\n/**\n * Order intervals asc, and split them when overlap.\n * expect(numberUtil.reformIntervals([\n *     {interval: [18, 62], close: [1, 1]},\n *     {interval: [-Infinity, -70], close: [0, 0]},\n *     {interval: [-70, -26], close: [1, 1]},\n *     {interval: [-26, 18], close: [1, 1]},\n *     {interval: [62, 150], close: [1, 1]},\n *     {interval: [106, 150], close: [1, 1]},\n *     {interval: [150, Infinity], close: [0, 0]}\n * ])).toEqual([\n *     {interval: [-Infinity, -70], close: [0, 0]},\n *     {interval: [-70, -26], close: [1, 1]},\n *     {interval: [-26, 18], close: [0, 1]},\n *     {interval: [18, 62], close: [0, 1]},\n *     {interval: [62, 150], close: [0, 1]},\n *     {interval: [150, Infinity], close: [0, 0]}\n * ]);\n * @param {Array.<Object>} list, where `close` mean open or close\n *        of the interval, and Infinity can be used.\n * @return {Array.<Object>} The origin list, which has been reformed.\n */\n\n\nfunction reformIntervals(list) {\n  list.sort(function (a, b) {\n    return littleThan(a, b, 0) ? -1 : 1;\n  });\n  var curr = -Infinity;\n  var currClose = 1;\n\n  for (var i = 0; i < list.length;) {\n    var interval = list[i].interval;\n    var close = list[i].close;\n\n    for (var lg = 0; lg < 2; lg++) {\n      if (interval[lg] <= curr) {\n        interval[lg] = curr;\n        close[lg] = !lg ? 1 - currClose : 1;\n      }\n\n      curr = interval[lg];\n      currClose = close[lg];\n    }\n\n    if (interval[0] === interval[1] && close[0] * close[1] !== 1) {\n      list.splice(i, 1);\n    } else {\n      i++;\n    }\n  }\n\n  return list;\n\n  function littleThan(a, b, lg) {\n    return a.interval[lg] < b.interval[lg] || a.interval[lg] === b.interval[lg] && (a.close[lg] - b.close[lg] === (!lg ? 1 : -1) || !lg && littleThan(a, b, 1));\n  }\n}\n/**\n * parseFloat NaNs numeric-cast false positives (null|true|false|\"\")\n * ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n * subtraction forces infinities to NaN\n *\n * @param {*} v\n * @return {boolean}\n */\n\n\nfunction isNumeric(v) {\n  return v - parseFloat(v) >= 0;\n}\n\nexports.linearMap = linearMap;\nexports.parsePercent = parsePercent;\nexports.round = round;\nexports.asc = asc;\nexports.getPrecision = getPrecision;\nexports.getPrecisionSafe = getPrecisionSafe;\nexports.getPixelPrecision = getPixelPrecision;\nexports.getPercentWithPrecision = getPercentWithPrecision;\nexports.MAX_SAFE_INTEGER = MAX_SAFE_INTEGER;\nexports.remRadian = remRadian;\nexports.isRadianAroundZero = isRadianAroundZero;\nexports.parseDate = parseDate;\nexports.quantity = quantity;\nexports.nice = nice;\nexports.reformIntervals = reformIntervals;\nexports.isNumeric = isNumeric;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"./graphic\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\n// Symbol factory\n\n/**\n * Triangle shape\n * @inner\n */\nvar Triangle = graphic.extendShape({\n  type: 'triangle',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy + height);\n    path.lineTo(cx - width, cy + height);\n    path.closePath();\n  }\n});\n/**\n * Diamond shape\n * @inner\n */\n\nvar Diamond = graphic.extendShape({\n  type: 'diamond',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy);\n    path.lineTo(cx, cy + height);\n    path.lineTo(cx - width, cy);\n    path.closePath();\n  }\n});\n/**\n * Pin shape\n * @inner\n */\n\nvar Pin = graphic.extendShape({\n  type: 'pin',\n  shape: {\n    // x, y on the cusp\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var w = shape.width / 5 * 3; // Height must be larger than width\n\n    var h = Math.max(w, shape.height);\n    var r = w / 2; // Dist on y with tangent point and circle center\n\n    var dy = r * r / (h - r);\n    var cy = y - h + r + dy;\n    var angle = Math.asin(dy / r); // Dist on x with tangent point and circle center\n\n    var dx = Math.cos(angle) * r;\n    var tanX = Math.sin(angle);\n    var tanY = Math.cos(angle);\n    var cpLen = r * 0.6;\n    var cpLen2 = r * 0.7;\n    path.moveTo(x - dx, cy + dy);\n    path.arc(x, cy, r, Math.PI - angle, Math.PI * 2 + angle);\n    path.bezierCurveTo(x + dx - tanX * cpLen, cy + dy + tanY * cpLen, x, y - cpLen2, x, y);\n    path.bezierCurveTo(x, y - cpLen2, x - dx + tanX * cpLen, cy + dy + tanY * cpLen, x - dx, cy + dy);\n    path.closePath();\n  }\n});\n/**\n * Arrow shape\n * @inner\n */\n\nvar Arrow = graphic.extendShape({\n  type: 'arrow',\n  shape: {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (ctx, shape) {\n    var height = shape.height;\n    var width = shape.width;\n    var x = shape.x;\n    var y = shape.y;\n    var dx = width / 3 * 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + dx, y + height);\n    ctx.lineTo(x, y + height / 4 * 3);\n    ctx.lineTo(x - dx, y + height);\n    ctx.lineTo(x, y);\n    ctx.closePath();\n  }\n});\n/**\n * Map of path contructors\n * @type {Object.<string, module:zrender/graphic/Path>}\n */\n\nvar symbolCtors = {\n  line: graphic.Line,\n  rect: graphic.Rect,\n  roundRect: graphic.Rect,\n  square: graphic.Rect,\n  circle: graphic.Circle,\n  diamond: Diamond,\n  pin: Pin,\n  arrow: Arrow,\n  triangle: Triangle\n};\nvar symbolShapeMakers = {\n  line: function (x, y, w, h, shape) {\n    // FIXME\n    shape.x1 = x;\n    shape.y1 = y + h / 2;\n    shape.x2 = x + w;\n    shape.y2 = y + h / 2;\n  },\n  rect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n  },\n  roundRect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n    shape.r = Math.min(w, h) / 4;\n  },\n  square: function (x, y, w, h, shape) {\n    var size = Math.min(w, h);\n    shape.x = x;\n    shape.y = y;\n    shape.width = size;\n    shape.height = size;\n  },\n  circle: function (x, y, w, h, shape) {\n    // Put circle in the center of square\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.r = Math.min(w, h) / 2;\n  },\n  diamond: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  pin: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  arrow: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  triangle: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  }\n};\nvar symbolBuildProxies = {};\nzrUtil.each(symbolCtors, function (Ctor, name) {\n  symbolBuildProxies[name] = new Ctor();\n});\nvar SymbolClz = graphic.extendShape({\n  type: 'symbol',\n  shape: {\n    symbolType: '',\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  beforeBrush: function () {\n    var style = this.style;\n    var shape = this.shape; // FIXME\n\n    if (shape.symbolType === 'pin' && style.textPosition === 'inside') {\n      style.textPosition = ['50%', '40%'];\n      style.textAlign = 'center';\n      style.textVerticalAlign = 'middle';\n    }\n  },\n  buildPath: function (ctx, shape, inBundle) {\n    var symbolType = shape.symbolType;\n    var proxySymbol = symbolBuildProxies[symbolType];\n\n    if (shape.symbolType !== 'none') {\n      if (!proxySymbol) {\n        // Default rect\n        symbolType = 'rect';\n        proxySymbol = symbolBuildProxies[symbolType];\n      }\n\n      symbolShapeMakers[symbolType](shape.x, shape.y, shape.width, shape.height, proxySymbol.shape);\n      proxySymbol.buildPath(ctx, proxySymbol.shape, inBundle);\n    }\n  }\n}); // Provide setColor helper method to avoid determine if set the fill or stroke outside\n\nfunction symbolPathSetColor(color, innerColor) {\n  if (this.type !== 'image') {\n    var symbolStyle = this.style;\n    var symbolShape = this.shape;\n\n    if (symbolShape && symbolShape.symbolType === 'line') {\n      symbolStyle.stroke = color;\n    } else if (this.__isEmptyBrush) {\n      symbolStyle.stroke = color;\n      symbolStyle.fill = innerColor || '#fff';\n    } else {\n      // FIXME  onlyStroke ?\n      symbolStyle.fill && (symbolStyle.fill = color);\n      symbolStyle.stroke && (symbolStyle.stroke = color);\n    }\n\n    this.dirty(false);\n  }\n}\n/**\n * Create a symbol element with given symbol configuration: shape, x, y, width, height, color\n * @param {string} symbolType\n * @param {number} x\n * @param {number} y\n * @param {number} w\n * @param {number} h\n * @param {string} color\n * @param {boolean} [keepAspect=false] whether to keep the ratio of w/h,\n *                            for path and image only.\n */\n\n\nfunction createSymbol(symbolType, x, y, w, h, color, keepAspect) {\n  // TODO Support image object, DynamicImage.\n  var isEmpty = symbolType.indexOf('empty') === 0;\n\n  if (isEmpty) {\n    symbolType = symbolType.substr(5, 1).toLowerCase() + symbolType.substr(6);\n  }\n\n  var symbolPath;\n\n  if (symbolType.indexOf('image://') === 0) {\n    symbolPath = graphic.makeImage(symbolType.slice(8), new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else if (symbolType.indexOf('path://') === 0) {\n    symbolPath = graphic.makePath(symbolType.slice(7), {}, new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else {\n    symbolPath = new SymbolClz({\n      shape: {\n        symbolType: symbolType,\n        x: x,\n        y: y,\n        width: w,\n        height: h\n      }\n    });\n  }\n\n  symbolPath.__isEmptyBrush = isEmpty;\n  symbolPath.setColor = symbolPathSetColor;\n  symbolPath.setColor(color);\n  return symbolPath;\n}\n\nexports.createSymbol = createSymbol;","var ORIGIN_METHOD = '\\0__throttleOriginMethod';\nvar RATE = '\\0__throttleRate';\nvar THROTTLE_TYPE = '\\0__throttleType';\n/**\n * @public\n * @param {(Function)} fn\n * @param {number} [delay=0] Unit: ms.\n * @param {boolean} [debounce=false]\n *        true: If call interval less than `delay`, only the last call works.\n *        false: If call interval less than `delay, call works on fixed rate.\n * @return {(Function)} throttled fn.\n */\n\nfunction throttle(fn, delay, debounce) {\n  var currCall;\n  var lastCall = 0;\n  var lastExec = 0;\n  var timer = null;\n  var diff;\n  var scope;\n  var args;\n  var debounceNextCall;\n  delay = delay || 0;\n\n  function exec() {\n    lastExec = new Date().getTime();\n    timer = null;\n    fn.apply(scope, args || []);\n  }\n\n  var cb = function () {\n    currCall = new Date().getTime();\n    scope = this;\n    args = arguments;\n    var thisDelay = debounceNextCall || delay;\n    var thisDebounce = debounceNextCall || debounce;\n    debounceNextCall = null;\n    diff = currCall - (thisDebounce ? lastCall : lastExec) - thisDelay;\n    clearTimeout(timer);\n\n    if (thisDebounce) {\n      timer = setTimeout(exec, thisDelay);\n    } else {\n      if (diff >= 0) {\n        exec();\n      } else {\n        timer = setTimeout(exec, -diff);\n      }\n    }\n\n    lastCall = currCall;\n  };\n  /**\n   * Clear throttle.\n   * @public\n   */\n\n\n  cb.clear = function () {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n  };\n  /**\n   * Enable debounce once.\n   */\n\n\n  cb.debounceNextCall = function (debounceDelay) {\n    debounceNextCall = debounceDelay;\n  };\n\n  return cb;\n}\n/**\n * Create throttle method or update throttle rate.\n *\n * @example\n * ComponentView.prototype.render = function () {\n *     ...\n *     throttle.createOrUpdate(\n *         this,\n *         '_dispatchAction',\n *         this.model.get('throttle'),\n *         'fixRate'\n *     );\n * };\n * ComponentView.prototype.remove = function () {\n *     throttle.clear(this, '_dispatchAction');\n * };\n * ComponentView.prototype.dispose = function () {\n *     throttle.clear(this, '_dispatchAction');\n * };\n *\n * @public\n * @param {Object} obj\n * @param {string} fnAttr\n * @param {number} [rate]\n * @param {string} [throttleType='fixRate'] 'fixRate' or 'debounce'\n * @return {Function} throttled function.\n */\n\n\nfunction createOrUpdate(obj, fnAttr, rate, throttleType) {\n  var fn = obj[fnAttr];\n\n  if (!fn) {\n    return;\n  }\n\n  var originFn = fn[ORIGIN_METHOD] || fn;\n  var lastThrottleType = fn[THROTTLE_TYPE];\n  var lastRate = fn[RATE];\n\n  if (lastRate !== rate || lastThrottleType !== throttleType) {\n    if (rate == null || !throttleType) {\n      return obj[fnAttr] = originFn;\n    }\n\n    fn = obj[fnAttr] = throttle(originFn, rate, throttleType === 'debounce');\n    fn[ORIGIN_METHOD] = originFn;\n    fn[THROTTLE_TYPE] = throttleType;\n    fn[RATE] = rate;\n  }\n\n  return fn;\n}\n/**\n * Clear throttle. Example see throttle.createOrUpdate.\n *\n * @public\n * @param {Object} obj\n * @param {string} fnAttr\n */\n\n\nfunction clear(obj, fnAttr) {\n  var fn = obj[fnAttr];\n\n  if (fn && fn[ORIGIN_METHOD]) {\n    obj[fnAttr] = fn[ORIGIN_METHOD];\n  }\n}\n\nexports.throttle = throttle;\nexports.createOrUpdate = createOrUpdate;\nexports.clear = clear;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nvar componentUtil = require(\"../util/component\");\n\nvar clazzUtil = require(\"../util/clazz\");\n\nvar modelUtil = require(\"../util/model\");\n\nfunction Chart() {\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n  this.group = new Group();\n  /**\n   * @type {string}\n   * @readOnly\n   */\n\n  this.uid = componentUtil.getUID('viewChart');\n}\n\nChart.prototype = {\n  type: 'chart',\n\n  /**\n   * Init the chart\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  init: function (ecModel, api) {},\n\n  /**\n   * Render the chart\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  render: function (seriesModel, ecModel, api, payload) {},\n\n  /**\n   * Highlight series or specified data item\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  highlight: function (seriesModel, ecModel, api, payload) {\n    toggleHighlight(seriesModel.getData(), payload, 'emphasis');\n  },\n\n  /**\n   * Downplay series or specified data item\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  downplay: function (seriesModel, ecModel, api, payload) {\n    toggleHighlight(seriesModel.getData(), payload, 'normal');\n  },\n\n  /**\n   * Remove self\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  remove: function (ecModel, api) {\n    this.group.removeAll();\n  },\n\n  /**\n   * Dispose self\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  dispose: function () {}\n  /**\n   * The view contains the given point.\n   * @interface\n   * @param {Array.<number>} point\n   * @return {boolean}\n   */\n  // containPoint: function () {}\n\n};\nvar chartProto = Chart.prototype;\n\nchartProto.updateView = chartProto.updateLayout = chartProto.updateVisual = function (seriesModel, ecModel, api, payload) {\n  this.render(seriesModel, ecModel, api, payload);\n};\n/**\n * Set state of single element\n * @param  {module:zrender/Element} el\n * @param  {string} state\n */\n\n\nfunction elSetState(el, state) {\n  if (el) {\n    el.trigger(state);\n\n    if (el.type === 'group') {\n      for (var i = 0; i < el.childCount(); i++) {\n        elSetState(el.childAt(i), state);\n      }\n    }\n  }\n}\n/**\n * @param  {module:echarts/data/List} data\n * @param  {Object} payload\n * @param  {string} state 'normal'|'emphasis'\n * @inner\n */\n\n\nfunction toggleHighlight(data, payload, state) {\n  var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n  if (dataIndex != null) {\n    zrUtil.each(modelUtil.normalizeToArray(dataIndex), function (dataIdx) {\n      elSetState(data.getItemGraphicEl(dataIdx), state);\n    });\n  } else {\n    data.eachItemGraphicEl(function (el) {\n      elSetState(el, state);\n    });\n  }\n} // Enable Chart.extend.\n\n\nclazzUtil.enableClassExtend(Chart, ['dispose']); // Add capability of registerClass, getClass, hasClass, registerSubTypeDefaulter and so on.\n\nclazzUtil.enableClassManagement(Chart, {\n  registerWhenExtend: true\n});\nvar _default = Chart;\nmodule.exports = _default;","var Group = require(\"zrender/lib/container/Group\");\n\nvar componentUtil = require(\"../util/component\");\n\nvar clazzUtil = require(\"../util/clazz\");\n\nvar Component = function () {\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n  this.group = new Group();\n  /**\n   * @type {string}\n   * @readOnly\n   */\n\n  this.uid = componentUtil.getUID('viewComponent');\n};\n\nComponent.prototype = {\n  constructor: Component,\n  init: function (ecModel, api) {},\n  render: function (componentModel, ecModel, api, payload) {},\n  dispose: function () {}\n};\nvar componentProto = Component.prototype;\n\ncomponentProto.updateView = componentProto.updateLayout = componentProto.updateVisual = function (seriesModel, ecModel, api, payload) {// Do nothing;\n}; // Enable Component.extend.\n\n\nclazzUtil.enableClassExtend(Component); // Enable capability of registerClass, getClass, hasClass, registerSubTypeDefaulter and so on.\n\nclazzUtil.enableClassManagement(Component, {\n  registerWhenExtend: true\n});\nvar _default = Component;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar _number = require(\"../util/number\");\n\nvar linearMap = _number.linearMap;\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar CATEGORY_DEFAULT_VISUAL_INDEX = -1;\n/**\n * @param {Object} option\n * @param {string} [option.type] See visualHandlers.\n * @param {string} [option.mappingMethod] 'linear' or 'piecewise' or 'category' or 'fixed'\n * @param {Array.<number>=} [option.dataExtent] [minExtent, maxExtent],\n *                                              required when mappingMethod is 'linear'\n * @param {Array.<Object>=} [option.pieceList] [\n *                                             {value: someValue},\n *                                             {interval: [min1, max1], visual: {...}},\n *                                             {interval: [min2, max2]}\n *                                             ],\n *                                            required when mappingMethod is 'piecewise'.\n *                                            Visual for only each piece can be specified.\n * @param {Array.<string|Object>=} [option.categories] ['cate1', 'cate2']\n *                                            required when mappingMethod is 'category'.\n *                                            If no option.categories, categories is set\n *                                            as [0, 1, 2, ...].\n * @param {boolean} [option.loop=false] Whether loop mapping when mappingMethod is 'category'.\n * @param {(Array|Object|*)} [option.visual]  Visual data.\n *                                            when mappingMethod is 'category',\n *                                            visual data can be array or object\n *                                            (like: {cate1: '#222', none: '#fff'})\n *                                            or primary types (which represents\n *                                            defualt category visual), otherwise visual\n *                                            can be array or primary (which will be\n *                                            normalized to array).\n *\n */\n\nvar VisualMapping = function (option) {\n  var mappingMethod = option.mappingMethod;\n  var visualType = option.type;\n  /**\n   * @readOnly\n   * @type {Object}\n   */\n\n  var thisOption = this.option = zrUtil.clone(option);\n  /**\n   * @readOnly\n   * @type {string}\n   */\n\n  this.type = visualType;\n  /**\n   * @readOnly\n   * @type {string}\n   */\n\n  this.mappingMethod = mappingMethod;\n  /**\n   * @private\n   * @type {Function}\n   */\n\n  this._normalizeData = normalizers[mappingMethod];\n  var visualHandler = visualHandlers[visualType];\n  /**\n   * @public\n   * @type {Function}\n   */\n\n  this.applyVisual = visualHandler.applyVisual;\n  /**\n   * @public\n   * @type {Function}\n   */\n\n  this.getColorMapper = visualHandler.getColorMapper;\n  /**\n   * @private\n   * @type {Function}\n   */\n\n  this._doMap = visualHandler._doMap[mappingMethod];\n\n  if (mappingMethod === 'piecewise') {\n    normalizeVisualRange(thisOption);\n    preprocessForPiecewise(thisOption);\n  } else if (mappingMethod === 'category') {\n    thisOption.categories ? preprocessForSpecifiedCategory(thisOption) // categories is ordinal when thisOption.categories not specified,\n    // which need no more preprocess except normalize visual.\n    : normalizeVisualRange(thisOption, true);\n  } else {\n    // mappingMethod === 'linear' or 'fixed'\n    zrUtil.assert(mappingMethod !== 'linear' || thisOption.dataExtent);\n    normalizeVisualRange(thisOption);\n  }\n};\n\nVisualMapping.prototype = {\n  constructor: VisualMapping,\n  mapValueToVisual: function (value) {\n    var normalized = this._normalizeData(value);\n\n    return this._doMap(normalized, value);\n  },\n  getNormalizer: function () {\n    return zrUtil.bind(this._normalizeData, this);\n  }\n};\nvar visualHandlers = VisualMapping.visualHandlers = {\n  color: {\n    applyVisual: makeApplyVisual('color'),\n\n    /**\n     * Create a mapper function\n     * @return {Function}\n     */\n    getColorMapper: function () {\n      var thisOption = this.option;\n      return zrUtil.bind(thisOption.mappingMethod === 'category' ? function (value, isNormalized) {\n        !isNormalized && (value = this._normalizeData(value));\n        return doMapCategory.call(this, value);\n      } : function (value, isNormalized, out) {\n        // If output rgb array\n        // which will be much faster and useful in pixel manipulation\n        var returnRGBArray = !!out;\n        !isNormalized && (value = this._normalizeData(value));\n        out = zrColor.fastLerp(value, thisOption.parsedVisual, out);\n        return returnRGBArray ? out : zrColor.stringify(out, 'rgba');\n      }, this);\n    },\n    _doMap: {\n      linear: function (normalized) {\n        return zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n      },\n      category: doMapCategory,\n      piecewise: function (normalized, value) {\n        var result = getSpecifiedVisual.call(this, value);\n\n        if (result == null) {\n          result = zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n        }\n\n        return result;\n      },\n      fixed: doMapFixed\n    }\n  },\n  colorHue: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, value);\n  }),\n  colorSaturation: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, null, value);\n  }),\n  colorLightness: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, null, null, value);\n  }),\n  colorAlpha: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyAlpha(color, value);\n  }),\n  opacity: {\n    applyVisual: makeApplyVisual('opacity'),\n    _doMap: makeDoMap([0, 1])\n  },\n  symbol: {\n    applyVisual: function (value, getter, setter) {\n      var symbolCfg = this.mapValueToVisual(value);\n\n      if (zrUtil.isString(symbolCfg)) {\n        setter('symbol', symbolCfg);\n      } else if (isObject(symbolCfg)) {\n        for (var name in symbolCfg) {\n          if (symbolCfg.hasOwnProperty(name)) {\n            setter(name, symbolCfg[name]);\n          }\n        }\n      }\n    },\n    _doMap: {\n      linear: doMapToArray,\n      category: doMapCategory,\n      piecewise: function (normalized, value) {\n        var result = getSpecifiedVisual.call(this, value);\n\n        if (result == null) {\n          result = doMapToArray.call(this, normalized);\n        }\n\n        return result;\n      },\n      fixed: doMapFixed\n    }\n  },\n  symbolSize: {\n    applyVisual: makeApplyVisual('symbolSize'),\n    _doMap: makeDoMap([0, 1])\n  }\n};\n\nfunction preprocessForPiecewise(thisOption) {\n  var pieceList = thisOption.pieceList;\n  thisOption.hasSpecialVisual = false;\n  zrUtil.each(pieceList, function (piece, index) {\n    piece.originIndex = index; // piece.visual is \"result visual value\" but not\n    // a visual range, so it does not need to be normalized.\n\n    if (piece.visual != null) {\n      thisOption.hasSpecialVisual = true;\n    }\n  });\n}\n\nfunction preprocessForSpecifiedCategory(thisOption) {\n  // Hash categories.\n  var categories = thisOption.categories;\n  var visual = thisOption.visual;\n  var categoryMap = thisOption.categoryMap = {};\n  each(categories, function (cate, index) {\n    categoryMap[cate] = index;\n  }); // Process visual map input.\n\n  if (!zrUtil.isArray(visual)) {\n    var visualArr = [];\n\n    if (zrUtil.isObject(visual)) {\n      each(visual, function (v, cate) {\n        var index = categoryMap[cate];\n        visualArr[index != null ? index : CATEGORY_DEFAULT_VISUAL_INDEX] = v;\n      });\n    } else {\n      // Is primary type, represents default visual.\n      visualArr[CATEGORY_DEFAULT_VISUAL_INDEX] = visual;\n    }\n\n    visual = setVisualToOption(thisOption, visualArr);\n  } // Remove categories that has no visual,\n  // then we can mapping them to CATEGORY_DEFAULT_VISUAL_INDEX.\n\n\n  for (var i = categories.length - 1; i >= 0; i--) {\n    if (visual[i] == null) {\n      delete categoryMap[categories[i]];\n      categories.pop();\n    }\n  }\n}\n\nfunction normalizeVisualRange(thisOption, isCategory) {\n  var visual = thisOption.visual;\n  var visualArr = [];\n\n  if (zrUtil.isObject(visual)) {\n    each(visual, function (v) {\n      visualArr.push(v);\n    });\n  } else if (visual != null) {\n    visualArr.push(visual);\n  }\n\n  var doNotNeedPair = {\n    color: 1,\n    symbol: 1\n  };\n\n  if (!isCategory && visualArr.length === 1 && !doNotNeedPair.hasOwnProperty(thisOption.type)) {\n    // Do not care visualArr.length === 0, which is illegal.\n    visualArr[1] = visualArr[0];\n  }\n\n  setVisualToOption(thisOption, visualArr);\n}\n\nfunction makePartialColorVisualHandler(applyValue) {\n  return {\n    applyVisual: function (value, getter, setter) {\n      value = this.mapValueToVisual(value); // Must not be array value\n\n      setter('color', applyValue(getter('color'), value));\n    },\n    _doMap: makeDoMap([0, 1])\n  };\n}\n\nfunction doMapToArray(normalized) {\n  var visual = this.option.visual;\n  return visual[Math.round(linearMap(normalized, [0, 1], [0, visual.length - 1], true))] || {};\n}\n\nfunction makeApplyVisual(visualType) {\n  return function (value, getter, setter) {\n    setter(visualType, this.mapValueToVisual(value));\n  };\n}\n\nfunction doMapCategory(normalized) {\n  var visual = this.option.visual;\n  return visual[this.option.loop && normalized !== CATEGORY_DEFAULT_VISUAL_INDEX ? normalized % visual.length : normalized];\n}\n\nfunction doMapFixed() {\n  return this.option.visual[0];\n}\n\nfunction makeDoMap(sourceExtent) {\n  return {\n    linear: function (normalized) {\n      return linearMap(normalized, sourceExtent, this.option.visual, true);\n    },\n    category: doMapCategory,\n    piecewise: function (normalized, value) {\n      var result = getSpecifiedVisual.call(this, value);\n\n      if (result == null) {\n        result = linearMap(normalized, sourceExtent, this.option.visual, true);\n      }\n\n      return result;\n    },\n    fixed: doMapFixed\n  };\n}\n\nfunction getSpecifiedVisual(value) {\n  var thisOption = this.option;\n  var pieceList = thisOption.pieceList;\n\n  if (thisOption.hasSpecialVisual) {\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList);\n    var piece = pieceList[pieceIndex];\n\n    if (piece && piece.visual) {\n      return piece.visual[this.type];\n    }\n  }\n}\n\nfunction setVisualToOption(thisOption, visualArr) {\n  thisOption.visual = visualArr;\n\n  if (thisOption.type === 'color') {\n    thisOption.parsedVisual = zrUtil.map(visualArr, function (item) {\n      return zrColor.parse(item);\n    });\n  }\n\n  return visualArr;\n}\n/**\n * Normalizers by mapping methods.\n */\n\n\nvar normalizers = {\n  linear: function (value) {\n    return linearMap(value, this.option.dataExtent, [0, 1], true);\n  },\n  piecewise: function (value) {\n    var pieceList = this.option.pieceList;\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList, true);\n\n    if (pieceIndex != null) {\n      return linearMap(pieceIndex, [0, pieceList.length - 1], [0, 1], true);\n    }\n  },\n  category: function (value) {\n    var index = this.option.categories ? this.option.categoryMap[value] : value; // ordinal\n\n    return index == null ? CATEGORY_DEFAULT_VISUAL_INDEX : index;\n  },\n  fixed: zrUtil.noop\n};\n/**\n * List available visual types.\n *\n * @public\n * @return {Array.<string>}\n */\n\nVisualMapping.listVisualTypes = function () {\n  var visualTypes = [];\n  zrUtil.each(visualHandlers, function (handler, key) {\n    visualTypes.push(key);\n  });\n  return visualTypes;\n};\n/**\n * @public\n */\n\n\nVisualMapping.addVisualHandler = function (name, handler) {\n  visualHandlers[name] = handler;\n};\n/**\n * @public\n */\n\n\nVisualMapping.isValidType = function (visualType) {\n  return visualHandlers.hasOwnProperty(visualType);\n};\n/**\n * Convinent method.\n * Visual can be Object or Array or primary type.\n *\n * @public\n */\n\n\nVisualMapping.eachVisual = function (visual, callback, context) {\n  if (zrUtil.isObject(visual)) {\n    zrUtil.each(visual, callback, context);\n  } else {\n    callback.call(context, visual);\n  }\n};\n\nVisualMapping.mapVisual = function (visual, callback, context) {\n  var isPrimary;\n  var newVisual = zrUtil.isArray(visual) ? [] : zrUtil.isObject(visual) ? {} : (isPrimary = true, null);\n  VisualMapping.eachVisual(visual, function (v, key) {\n    var newVal = callback.call(context, v, key);\n    isPrimary ? newVisual = newVal : newVisual[key] = newVal;\n  });\n  return newVisual;\n};\n/**\n * @public\n * @param {Object} obj\n * @return {Object} new object containers visual values.\n *                 If no visuals, return null.\n */\n\n\nVisualMapping.retrieveVisuals = function (obj) {\n  var ret = {};\n  var hasVisual;\n  obj && each(visualHandlers, function (h, visualType) {\n    if (obj.hasOwnProperty(visualType)) {\n      ret[visualType] = obj[visualType];\n      hasVisual = true;\n    }\n  });\n  return hasVisual ? ret : null;\n};\n/**\n * Give order to visual types, considering colorSaturation, colorAlpha depends on color.\n *\n * @public\n * @param {(Object|Array)} visualTypes If Object, like: {color: ..., colorSaturation: ...}\n *                                     IF Array, like: ['color', 'symbol', 'colorSaturation']\n * @return {Array.<string>} Sorted visual types.\n */\n\n\nVisualMapping.prepareVisualTypes = function (visualTypes) {\n  if (isObject(visualTypes)) {\n    var types = [];\n    each(visualTypes, function (item, type) {\n      types.push(type);\n    });\n    visualTypes = types;\n  } else if (zrUtil.isArray(visualTypes)) {\n    visualTypes = visualTypes.slice();\n  } else {\n    return [];\n  }\n\n  visualTypes.sort(function (type1, type2) {\n    // color should be front of colorSaturation, colorAlpha, ...\n    // symbol and symbolSize do not matter.\n    return type2 === 'color' && type1 !== 'color' && type1.indexOf('color') === 0 ? 1 : -1;\n  });\n  return visualTypes;\n};\n/**\n * 'color', 'colorSaturation', 'colorAlpha', ... are depends on 'color'.\n * Other visuals are only depends on themself.\n *\n * @public\n * @param {string} visualType1\n * @param {string} visualType2\n * @return {boolean}\n */\n\n\nVisualMapping.dependsOn = function (visualType1, visualType2) {\n  return visualType2 === 'color' ? !!(visualType1 && visualType1.indexOf(visualType2) === 0) : visualType1 === visualType2;\n};\n/**\n * @param {number} value\n * @param {Array.<Object>} pieceList [{value: ..., interval: [min, max]}, ...]\n *                         Always from small to big.\n * @param {boolean} [findClosestWhenOutside=false]\n * @return {number} index\n */\n\n\nVisualMapping.findPieceIndex = function (value, pieceList, findClosestWhenOutside) {\n  var possibleI;\n  var abs = Infinity; // value has the higher priority.\n\n  for (var i = 0, len = pieceList.length; i < len; i++) {\n    var pieceValue = pieceList[i].value;\n\n    if (pieceValue != null) {\n      if (pieceValue === value // FIXME\n      // It is supposed to compare value according to value type of dimension,\n      // but currently value type can exactly be string or number.\n      // Compromise for numeric-like string (like '12'), especially\n      // in the case that visualMap.categories is ['22', '33'].\n      || typeof pieceValue === 'string' && pieceValue === value + '') {\n        return i;\n      }\n\n      findClosestWhenOutside && updatePossible(pieceValue, i);\n    }\n  }\n\n  for (var i = 0, len = pieceList.length; i < len; i++) {\n    var piece = pieceList[i];\n    var interval = piece.interval;\n    var close = piece.close;\n\n    if (interval) {\n      if (interval[0] === -Infinity) {\n        if (littleThan(close[1], value, interval[1])) {\n          return i;\n        }\n      } else if (interval[1] === Infinity) {\n        if (littleThan(close[0], interval[0], value)) {\n          return i;\n        }\n      } else if (littleThan(close[0], interval[0], value) && littleThan(close[1], value, interval[1])) {\n        return i;\n      }\n\n      findClosestWhenOutside && updatePossible(interval[0], i);\n      findClosestWhenOutside && updatePossible(interval[1], i);\n    }\n  }\n\n  if (findClosestWhenOutside) {\n    return value === Infinity ? pieceList.length - 1 : value === -Infinity ? 0 : possibleI;\n  }\n\n  function updatePossible(val, index) {\n    var newAbs = Math.abs(val - value);\n\n    if (newAbs < abs) {\n      abs = newAbs;\n      possibleI = index;\n    }\n  }\n};\n\nfunction littleThan(close, a, b) {\n  return close ? a <= b : a < b;\n}\n\nvar _default = VisualMapping;\nmodule.exports = _default;","// Pick color from palette for each data item.\n// Applicable for charts that require applying color palette\n// in data level (like pie, funnel, chord).\nfunction _default(seriesType, ecModel) {\n  // Pie and funnel may use diferrent scope\n  var paletteScope = {};\n  ecModel.eachRawSeriesByType(seriesType, function (seriesModel) {\n    var dataAll = seriesModel.getRawData();\n    var idxMap = {};\n\n    if (!ecModel.isSeriesFiltered(seriesModel)) {\n      var data = seriesModel.getData();\n      data.each(function (idx) {\n        var rawIdx = data.getRawIndex(idx);\n        idxMap[rawIdx] = idx;\n      });\n      dataAll.each(function (rawIdx) {\n        var filteredIdx = idxMap[rawIdx]; // If series.itemStyle.normal.color is a function. itemVisual may be encoded\n\n        var singleDataColor = filteredIdx != null && data.getItemVisual(filteredIdx, 'color', true);\n\n        if (!singleDataColor) {\n          // FIXME Performance\n          var itemModel = dataAll.getItemModel(rawIdx);\n          var color = itemModel.get('itemStyle.normal.color') || seriesModel.getColorFromPalette(dataAll.getName(rawIdx), paletteScope); // Legend may use the visual info in data before processed\n\n          dataAll.setItemVisual(rawIdx, 'color', color); // Data is not filtered\n\n          if (filteredIdx != null) {\n            data.setItemVisual(filteredIdx, 'color', color);\n          }\n        } else {\n          // Set data all color for legend\n          dataAll.setItemVisual(rawIdx, 'color', singleDataColor);\n        }\n      });\n    }\n  });\n}\n\nmodule.exports = _default;","var Gradient = require(\"zrender/lib/graphic/Gradient\");\n\nfunction _default(ecModel) {\n  function encodeColor(seriesModel) {\n    var colorAccessPath = (seriesModel.visualColorAccessPath || 'itemStyle.normal.color').split('.');\n    var data = seriesModel.getData();\n    var color = seriesModel.get(colorAccessPath) // Set in itemStyle\n    || seriesModel.getColorFromPalette(seriesModel.get('name')); // Default color\n    // FIXME Set color function or use the platte color\n\n    data.setVisual('color', color); // Only visible series has each data be visual encoded\n\n    if (!ecModel.isSeriesFiltered(seriesModel)) {\n      if (typeof color === 'function' && !(color instanceof Gradient)) {\n        data.each(function (idx) {\n          data.setItemVisual(idx, 'color', color(seriesModel.getDataParams(idx)));\n        });\n      } // itemStyle in each data item\n\n\n      data.each(function (idx) {\n        var itemModel = data.getItemModel(idx);\n        var color = itemModel.get(colorAccessPath, true);\n\n        if (color != null) {\n          data.setItemVisual(idx, 'color', color);\n        }\n      });\n    }\n  }\n\n  ecModel.eachRawSeries(encodeColor);\n}\n\nmodule.exports = _default;","function _default(seriesType, defaultSymbolType, legendSymbol, ecModel, api) {\n  // Encoding visual for all series include which is filtered for legend drawing\n  ecModel.eachRawSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var symbolType = seriesModel.get('symbol') || defaultSymbolType;\n    var symbolSize = seriesModel.get('symbolSize');\n    data.setVisual({\n      legendSymbol: legendSymbol || symbolType,\n      symbol: symbolType,\n      symbolSize: symbolSize\n    }); // Only visible series has each data be visual encoded\n\n    if (!ecModel.isSeriesFiltered(seriesModel)) {\n      if (typeof symbolSize === 'function') {\n        data.each(function (idx) {\n          var rawValue = seriesModel.getRawValue(idx); // FIXME\n\n          var params = seriesModel.getDataParams(idx);\n          data.setItemVisual(idx, 'symbolSize', symbolSize(rawValue, params));\n        });\n      }\n\n      data.each(function (idx) {\n        var itemModel = data.getItemModel(idx);\n        var itemSymbolType = itemModel.getShallow('symbol', true);\n        var itemSymbolSize = itemModel.getShallow('symbolSize', true); // If has item symbol\n\n        if (itemSymbolType != null) {\n          data.setItemVisual(idx, 'symbol', itemSymbolType);\n        }\n\n        if (itemSymbolSize != null) {\n          // PENDING Transform symbolSize ?\n          data.setItemVisual(idx, 'symbolSize', itemSymbolSize);\n        }\n      });\n    }\n  });\n}\n\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\n/**\n * @file Visual mapping.\n */\nvar visualDefault = {\n  /**\n   * @public\n   */\n  get: function (visualType, key, isCategory) {\n    var value = zrUtil.clone((defaultOption[visualType] || {})[key]);\n    return isCategory ? zrUtil.isArray(value) ? value[value.length - 1] : value : value;\n  }\n};\nvar defaultOption = {\n  color: {\n    active: ['#006edd', '#e0ffff'],\n    inactive: ['rgba(0,0,0,0)']\n  },\n  colorHue: {\n    active: [0, 360],\n    inactive: [0, 0]\n  },\n  colorSaturation: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  colorLightness: {\n    active: [0.9, 0.5],\n    inactive: [0, 0]\n  },\n  colorAlpha: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  opacity: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  symbol: {\n    active: ['circle', 'roundRect', 'diamond'],\n    inactive: ['none']\n  },\n  symbolSize: {\n    active: [10, 50],\n    inactive: [0, 0]\n  }\n};\nvar _default = visualDefault;\nmodule.exports = _default;","var zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapping = require(\"./VisualMapping\");\n\n/**\n * @file Visual solution, for consistent option specification.\n */\nvar each = zrUtil.each;\n\nfunction hasKeys(obj) {\n  if (obj) {\n    for (var name in obj) {\n      if (obj.hasOwnProperty(name)) {\n        return true;\n      }\n    }\n  }\n}\n/**\n * @param {Object} option\n * @param {Array.<string>} stateList\n * @param {Function} [supplementVisualOption]\n * @return {Object} visualMappings <state, <visualType, module:echarts/visual/VisualMapping>>\n */\n\n\nfunction createVisualMappings(option, stateList, supplementVisualOption) {\n  var visualMappings = {};\n  each(stateList, function (state) {\n    var mappings = visualMappings[state] = createMappings();\n    each(option[state], function (visualData, visualType) {\n      if (!VisualMapping.isValidType(visualType)) {\n        return;\n      }\n\n      var mappingOption = {\n        type: visualType,\n        visual: visualData\n      };\n      supplementVisualOption && supplementVisualOption(mappingOption, state);\n      mappings[visualType] = new VisualMapping(mappingOption); // Prepare a alpha for opacity, for some case that opacity\n      // is not supported, such as rendering using gradient color.\n\n      if (visualType === 'opacity') {\n        mappingOption = zrUtil.clone(mappingOption);\n        mappingOption.type = 'colorAlpha';\n        mappings.__hidden.__alphaForOpacity = new VisualMapping(mappingOption);\n      }\n    });\n  });\n  return visualMappings;\n\n  function createMappings() {\n    var Creater = function () {}; // Make sure hidden fields will not be visited by\n    // object iteration (with hasOwnProperty checking).\n\n\n    Creater.prototype.__hidden = Creater.prototype;\n    var obj = new Creater();\n    return obj;\n  }\n}\n/**\n * @param {Object} thisOption\n * @param {Object} newOption\n * @param {Array.<string>} keys\n */\n\n\nfunction replaceVisualOption(thisOption, newOption, keys) {\n  // Visual attributes merge is not supported, otherwise it\n  // brings overcomplicated merge logic. See #2853. So if\n  // newOption has anyone of these keys, all of these keys\n  // will be reset. Otherwise, all keys remain.\n  var has;\n  zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      has = true;\n    }\n  });\n  has && zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      thisOption[key] = zrUtil.clone(newOption[key]);\n    } else {\n      delete thisOption[key];\n    }\n  });\n}\n/**\n * @param {Array.<string>} stateList\n * @param {Object} visualMappings <state, Object.<visualType, module:echarts/visual/VisualMapping>>\n * @param {module:echarts/data/List} list\n * @param {Function} getValueState param: valueOrIndex, return: state.\n * @param {object} [scope] Scope for getValueState\n * @param {string} [dimension] Concrete dimension, if used.\n */\n\n\nfunction applyVisual(stateList, visualMappings, data, getValueState, scope, dimension) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n  var dataIndex;\n\n  function getVisual(key) {\n    return data.getItemVisual(dataIndex, key);\n  }\n\n  function setVisual(key, value) {\n    data.setItemVisual(dataIndex, key, value);\n  }\n\n  if (dimension == null) {\n    data.each(eachItem, true);\n  } else {\n    data.each([dimension], eachItem, true);\n  }\n\n  function eachItem(valueOrIndex, index) {\n    dataIndex = dimension == null ? valueOrIndex : index;\n    var rawDataItem = data.getRawDataItem(dataIndex); // Consider performance\n\n    if (rawDataItem && rawDataItem.visualMap === false) {\n      return;\n    }\n\n    var valueState = getValueState.call(scope, valueOrIndex);\n    var mappings = visualMappings[valueState];\n    var visualTypes = visualTypesMap[valueState];\n\n    for (var i = 0, len = visualTypes.length; i < len; i++) {\n      var type = visualTypes[i];\n      mappings[type] && mappings[type].applyVisual(valueOrIndex, getVisual, setVisual);\n    }\n  }\n}\n\nexports.createVisualMappings = createVisualMappings;\nexports.replaceVisualOption = replaceVisualOption;\nexports.applyVisual = applyVisual;","var guid = require(\"./core/guid\");\n\nvar Eventful = require(\"./mixin/Eventful\");\n\nvar Transformable = require(\"./mixin/Transformable\");\n\nvar Animatable = require(\"./mixin/Animatable\");\n\nvar zrUtil = require(\"./core/util\");\n\n/**\n * @alias module:zrender/Element\n * @constructor\n * @extends {module:zrender/mixin/Animatable}\n * @extends {module:zrender/mixin/Transformable}\n * @extends {module:zrender/mixin/Eventful}\n */\nvar Element = function (opts) {\n  // jshint ignore:line\n  Transformable.call(this, opts);\n  Eventful.call(this, opts);\n  Animatable.call(this, opts);\n  /**\n   * ID\n   * @type {string}\n   */\n\n  this.id = opts.id || guid();\n};\n\nElement.prototype = {\n  /**\n   * \n   * Element type\n   * @type {string}\n   */\n  type: 'element',\n\n  /**\n   * \n   * Element name\n   * @type {string}\n   */\n  name: '',\n\n  /**\n   * ZRender  element  zrender \n   * ZRender instance will be assigned when element is associated with zrender\n   * @name module:/zrender/Element#__zr\n   * @type {module:zrender/ZRender}\n   */\n  __zr: null,\n\n  /**\n   * true\n   * If ignore drawing and events of the element object\n   * @name module:/zrender/Element#ignore\n   * @type {boolean}\n   * @default false\n   */\n  ignore: false,\n\n  /**\n   * (shape) Group \n   * \n   * @type {module:zrender/graphic/Path}\n   * @see http://www.w3.org/TR/2dcontext/#clipping-region\n   * @readOnly\n   */\n  clipPath: null,\n\n  /**\n   * Drift element\n   * @param  {number} dx dx on the global space\n   * @param  {number} dy dy on the global space\n   */\n  drift: function (dx, dy) {\n    switch (this.draggable) {\n      case 'horizontal':\n        dy = 0;\n        break;\n\n      case 'vertical':\n        dx = 0;\n        break;\n    }\n\n    var m = this.transform;\n\n    if (!m) {\n      m = this.transform = [1, 0, 0, 1, 0, 0];\n    }\n\n    m[4] += dx;\n    m[5] += dy;\n    this.decomposeTransform();\n    this.dirty(false);\n  },\n\n  /**\n   * Hook before update\n   */\n  beforeUpdate: function () {},\n\n  /**\n   * Hook after update\n   */\n  afterUpdate: function () {},\n\n  /**\n   * Update each frame\n   */\n  update: function () {\n    this.updateTransform();\n  },\n\n  /**\n   * @param  {Function} cb\n   * @param  {}   context\n   */\n  traverse: function (cb, context) {},\n\n  /**\n   * @protected\n   */\n  attrKV: function (key, value) {\n    if (key === 'position' || key === 'scale' || key === 'origin') {\n      // Copy the array\n      if (value) {\n        var target = this[key];\n\n        if (!target) {\n          target = this[key] = [];\n        }\n\n        target[0] = value[0];\n        target[1] = value[1];\n      }\n    } else {\n      this[key] = value;\n    }\n  },\n\n  /**\n   * Hide the element\n   */\n  hide: function () {\n    this.ignore = true;\n    this.__zr && this.__zr.refresh();\n  },\n\n  /**\n   * Show the element\n   */\n  show: function () {\n    this.ignore = false;\n    this.__zr && this.__zr.refresh();\n  },\n\n  /**\n   * @param {string|Object} key\n   * @param {*} value\n   */\n  attr: function (key, value) {\n    if (typeof key === 'string') {\n      this.attrKV(key, value);\n    } else if (zrUtil.isObject(key)) {\n      for (var name in key) {\n        if (key.hasOwnProperty(name)) {\n          this.attrKV(name, key[name]);\n        }\n      }\n    }\n\n    this.dirty(false);\n    return this;\n  },\n\n  /**\n   * @param {module:zrender/graphic/Path} clipPath\n   */\n  setClipPath: function (clipPath) {\n    var zr = this.__zr;\n\n    if (zr) {\n      clipPath.addSelfToZr(zr);\n    } // Remove previous clip path\n\n\n    if (this.clipPath && this.clipPath !== clipPath) {\n      this.removeClipPath();\n    }\n\n    this.clipPath = clipPath;\n    clipPath.__zr = zr;\n    clipPath.__clipTarget = this;\n    this.dirty(false);\n  },\n\n  /**\n   */\n  removeClipPath: function () {\n    var clipPath = this.clipPath;\n\n    if (clipPath) {\n      if (clipPath.__zr) {\n        clipPath.removeSelfFromZr(clipPath.__zr);\n      }\n\n      clipPath.__zr = null;\n      clipPath.__clipTarget = null;\n      this.clipPath = null;\n      this.dirty(false);\n    }\n  },\n\n  /**\n   * Add self from zrender instance.\n   * Not recursively because it will be invoked when element added to storage.\n   * @param {module:zrender/ZRender} zr\n   */\n  addSelfToZr: function (zr) {\n    this.__zr = zr; // \n\n    var animators = this.animators;\n\n    if (animators) {\n      for (var i = 0; i < animators.length; i++) {\n        zr.animation.addAnimator(animators[i]);\n      }\n    }\n\n    if (this.clipPath) {\n      this.clipPath.addSelfToZr(zr);\n    }\n  },\n\n  /**\n   * Remove self from zrender instance.\n   * Not recursively because it will be invoked when element added to storage.\n   * @param {module:zrender/ZRender} zr\n   */\n  removeSelfFromZr: function (zr) {\n    this.__zr = null; // \n\n    var animators = this.animators;\n\n    if (animators) {\n      for (var i = 0; i < animators.length; i++) {\n        zr.animation.removeAnimator(animators[i]);\n      }\n    }\n\n    if (this.clipPath) {\n      this.clipPath.removeSelfFromZr(zr);\n    }\n  }\n};\nzrUtil.mixin(Element, Animatable);\nzrUtil.mixin(Element, Transformable);\nzrUtil.mixin(Element, Eventful);\nvar _default = Element;\nmodule.exports = _default;","var util = require(\"./core/util\");\n\nvar vec2 = require(\"./core/vector\");\n\nvar Draggable = require(\"./mixin/Draggable\");\n\nvar Eventful = require(\"./mixin/Eventful\");\n\n/**\n * Handler\n * @module zrender/Handler\n * @author Kener (@Kener-, kener.linfeng@gmail.com)\n *         errorrik (errorrik@gmail.com)\n *         pissang (shenyi.914@gmail.com)\n */\nvar SILENT = 'silent';\n\nfunction makeEventPacket(eveType, targetInfo, event) {\n  return {\n    type: eveType,\n    event: event,\n    // target can only be an element that is not silent.\n    target: targetInfo.target,\n    // topTarget can be a silent element.\n    topTarget: targetInfo.topTarget,\n    cancelBubble: false,\n    offsetX: event.zrX,\n    offsetY: event.zrY,\n    gestureEvent: event.gestureEvent,\n    pinchX: event.pinchX,\n    pinchY: event.pinchY,\n    pinchScale: event.pinchScale,\n    wheelDelta: event.zrDelta,\n    zrByTouch: event.zrByTouch,\n    which: event.which\n  };\n}\n\nfunction EmptyProxy() {}\n\nEmptyProxy.prototype.dispose = function () {};\n\nvar handlerNames = ['click', 'dblclick', 'mousewheel', 'mouseout', 'mouseup', 'mousedown', 'mousemove', 'contextmenu'];\n/**\n * @alias module:zrender/Handler\n * @constructor\n * @extends module:zrender/mixin/Eventful\n * @param {module:zrender/Storage} storage Storage instance.\n * @param {module:zrender/Painter} painter Painter instance.\n * @param {module:zrender/dom/HandlerProxy} proxy HandlerProxy instance.\n * @param {HTMLElement} painterRoot painter.root (not painter.getViewportRoot()).\n */\n\nvar Handler = function (storage, painter, proxy, painterRoot) {\n  Eventful.call(this);\n  this.storage = storage;\n  this.painter = painter;\n  this.painterRoot = painterRoot;\n  proxy = proxy || new EmptyProxy();\n  /**\n   * Proxy of event. can be Dom, WebGLSurface, etc.\n   */\n\n  this.proxy = proxy; // Attach handler\n\n  proxy.handler = this;\n  /**\n   * {target, topTarget, x, y}\n   * @private\n   * @type {Object}\n   */\n\n  this._hovered = {};\n  /**\n   * @private\n   * @type {Date}\n   */\n\n  this._lastTouchMoment;\n  /**\n   * @private\n   * @type {number}\n   */\n\n  this._lastX;\n  /**\n   * @private\n   * @type {number}\n   */\n\n  this._lastY;\n  Draggable.call(this);\n  util.each(handlerNames, function (name) {\n    proxy.on && proxy.on(name, this[name], this);\n  }, this);\n};\n\nHandler.prototype = {\n  constructor: Handler,\n  mousemove: function (event) {\n    var x = event.zrX;\n    var y = event.zrY;\n    var lastHovered = this._hovered;\n    var lastHoveredTarget = lastHovered.target; // If lastHoveredTarget is removed from zr (detected by '__zr') by some API call\n    // (like 'setOption' or 'dispatchAction') in event handlers, we should find\n    // lastHovered again here. Otherwise 'mouseout' can not be triggered normally.\n    // See #6198.\n\n    if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n      lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n      lastHoveredTarget = lastHovered.target;\n    }\n\n    var hovered = this._hovered = this.findHover(x, y);\n    var hoveredTarget = hovered.target;\n    var proxy = this.proxy;\n    proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default'); // Mouse out on previous hovered element\n\n    if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n      this.dispatchToElement(lastHovered, 'mouseout', event);\n    } // Mouse moving on one element\n\n\n    this.dispatchToElement(hovered, 'mousemove', event); // Mouse over on a new element\n\n    if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n      this.dispatchToElement(hovered, 'mouseover', event);\n    }\n  },\n  mouseout: function (event) {\n    this.dispatchToElement(this._hovered, 'mouseout', event); // There might be some doms created by upper layer application\n    // at the same level of painter.getViewportRoot() (e.g., tooltip\n    // dom created by echarts), where 'globalout' event should not\n    // be triggered when mouse enters these doms. (But 'mouseout'\n    // should be triggered at the original hovered element as usual).\n\n    var element = event.toElement || event.relatedTarget;\n    var innerDom;\n\n    do {\n      element = element && element.parentNode;\n    } while (element && element.nodeType != 9 && !(innerDom = element === this.painterRoot));\n\n    !innerDom && this.trigger('globalout', {\n      event: event\n    });\n  },\n\n  /**\n   * Resize\n   */\n  resize: function (event) {\n    this._hovered = {};\n  },\n\n  /**\n   * Dispatch event\n   * @param {string} eventName\n   * @param {event=} eventArgs\n   */\n  dispatch: function (eventName, eventArgs) {\n    var handler = this[eventName];\n    handler && handler.call(this, eventArgs);\n  },\n\n  /**\n   * Dispose\n   */\n  dispose: function () {\n    this.proxy.dispose();\n    this.storage = this.proxy = this.painter = null;\n  },\n\n  /**\n   * cursor style\n   * @param {string} [cursorStyle='default']  crosshair\n   */\n  setCursorStyle: function (cursorStyle) {\n    var proxy = this.proxy;\n    proxy.setCursor && proxy.setCursor(cursorStyle);\n  },\n\n  /**\n   * \n   *\n   * @private\n   * @param {Object} targetInfo {target, topTarget} \n   * @param {string} eventName \n   * @param {Object} event \n   */\n  dispatchToElement: function (targetInfo, eventName, event) {\n    targetInfo = targetInfo || {};\n    var el = targetInfo.target;\n\n    if (el && el.silent) {\n      return;\n    }\n\n    var eventHandler = 'on' + eventName;\n    var eventPacket = makeEventPacket(eventName, targetInfo, event);\n\n    while (el) {\n      el[eventHandler] && (eventPacket.cancelBubble = el[eventHandler].call(el, eventPacket));\n      el.trigger(eventName, eventPacket);\n      el = el.parent;\n\n      if (eventPacket.cancelBubble) {\n        break;\n      }\n    }\n\n    if (!eventPacket.cancelBubble) {\n      //  zrender \n      this.trigger(eventName, eventPacket); // \n      //  click  dispose painter \n\n      this.painter && this.painter.eachOtherLayer(function (layer) {\n        if (typeof layer[eventHandler] == 'function') {\n          layer[eventHandler].call(layer, eventPacket);\n        }\n\n        if (layer.trigger) {\n          layer.trigger(eventName, eventPacket);\n        }\n      });\n    }\n  },\n\n  /**\n   * @private\n   * @param {number} x\n   * @param {number} y\n   * @param {module:zrender/graphic/Displayable} exclude\n   * @return {model:zrender/Element}\n   * @method\n   */\n  findHover: function (x, y, exclude) {\n    var list = this.storage.getDisplayList();\n    var out = {\n      x: x,\n      y: y\n    };\n\n    for (var i = list.length - 1; i >= 0; i--) {\n      var hoverCheckResult;\n\n      if (list[i] !== exclude // getDisplayList may include ignored item in VML mode\n      && !list[i].ignore && (hoverCheckResult = isHover(list[i], x, y))) {\n        !out.topTarget && (out.topTarget = list[i]);\n\n        if (hoverCheckResult !== SILENT) {\n          out.target = list[i];\n          break;\n        }\n      }\n    }\n\n    return out;\n  }\n}; // Common handlers\n\nutil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n  Handler.prototype[name] = function (event) {\n    // Find hover again to avoid click event is dispatched manually. Or click is triggered without mouseover\n    var hovered = this.findHover(event.zrX, event.zrY);\n    var hoveredTarget = hovered.target;\n\n    if (name === 'mousedown') {\n      this._downEl = hoveredTarget;\n      this._downPoint = [event.zrX, event.zrY]; // In case click triggered before mouseup\n\n      this._upEl = hoveredTarget;\n    } else if (name === 'mosueup') {\n      this._upEl = hoveredTarget;\n    } else if (name === 'click') {\n      if (this._downEl !== this._upEl // Original click event is triggered on the whole canvas element,\n      // including the case that `mousedown` - `mousemove` - `mouseup`,\n      // which should be filtered, otherwise it will bring trouble to\n      // pan and zoom.\n      || !this._downPoint // Arbitrary value\n      || vec2.dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\n        return;\n      }\n\n      this._downPoint = null;\n    }\n\n    this.dispatchToElement(hovered, name, event);\n  };\n});\n\nfunction isHover(displayable, x, y) {\n  if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n    var el = displayable;\n    var isSilent;\n\n    while (el) {\n      // If clipped by ancestor.\n      // FIXME: If clipPath has neither stroke nor fill,\n      // el.clipPath.contain(x, y) will always return false.\n      if (el.clipPath && !el.clipPath.contain(x, y)) {\n        return false;\n      }\n\n      if (el.silent) {\n        isSilent = true;\n      }\n\n      el = el.parent;\n    }\n\n    return isSilent ? SILENT : true;\n  }\n\n  return false;\n}\n\nutil.mixin(Handler, Eventful);\nutil.mixin(Handler, Draggable);\nvar _default = Handler;\nmodule.exports = _default;","var util = require(\"./core/util\");\n\nvar _config = require(\"./config\");\n\nvar devicePixelRatio = _config.devicePixelRatio;\n\nvar Style = require(\"./graphic/Style\");\n\nvar Pattern = require(\"./graphic/Pattern\");\n\n/**\n * @module zrender/Layer\n * @author pissang(https://www.github.com/pissang)\n */\nfunction returnFalse() {\n  return false;\n}\n/**\n * dom\n *\n * @inner\n * @param {string} id dom id \n * @param {Painter} painter painter instance\n * @param {number} number\n */\n\n\nfunction createDom(id, painter, dpr) {\n  var newDom = util.createCanvas();\n  var width = painter.getWidth();\n  var height = painter.getHeight();\n  var newDomStyle = newDom.style; // append~\n\n  newDomStyle.position = 'absolute';\n  newDomStyle.left = 0;\n  newDomStyle.top = 0;\n  newDomStyle.width = width + 'px';\n  newDomStyle.height = height + 'px';\n  newDom.width = width * dpr;\n  newDom.height = height * dpr; // id\n\n  newDom.setAttribute('data-zr-dom-id', id);\n  return newDom;\n}\n/**\n * @alias module:zrender/Layer\n * @constructor\n * @extends module:zrender/mixin/Transformable\n * @param {string} id\n * @param {module:zrender/Painter} painter\n * @param {number} [dpr]\n */\n\n\nvar Layer = function (id, painter, dpr) {\n  var dom;\n  dpr = dpr || devicePixelRatio;\n\n  if (typeof id === 'string') {\n    dom = createDom(id, painter, dpr);\n  } // Not using isDom because in node it will return false\n  else if (util.isObject(id)) {\n      dom = id;\n      id = dom.id;\n    }\n\n  this.id = id;\n  this.dom = dom;\n  var domStyle = dom.style;\n\n  if (domStyle) {\n    // Not in node\n    dom.onselectstart = returnFalse; // \n\n    domStyle['-webkit-user-select'] = 'none';\n    domStyle['user-select'] = 'none';\n    domStyle['-webkit-touch-callout'] = 'none';\n    domStyle['-webkit-tap-highlight-color'] = 'rgba(0,0,0,0)';\n    domStyle['padding'] = 0;\n    domStyle['margin'] = 0;\n    domStyle['border-width'] = 0;\n  }\n\n  this.domBack = null;\n  this.ctxBack = null;\n  this.painter = painter;\n  this.config = null; // Configs\n\n  /**\n   * \n   * @type {string}\n   * @default 0\n   */\n\n  this.clearColor = 0;\n  /**\n   * \n   * @type {boolean}\n   * @default false\n   */\n\n  this.motionBlur = false;\n  /**\n   * alpha\n   * @type {number}\n   * @default 0.7\n   */\n\n  this.lastFrameAlpha = 0.7;\n  /**\n   * Layer dpr\n   * @type {number}\n   */\n\n  this.dpr = dpr;\n};\n\nLayer.prototype = {\n  constructor: Layer,\n  elCount: 0,\n  __dirty: true,\n  initContext: function () {\n    this.ctx = this.dom.getContext('2d');\n    this.ctx.__currentValues = {};\n    this.ctx.dpr = this.dpr;\n  },\n  createBackBuffer: function () {\n    var dpr = this.dpr;\n    this.domBack = createDom('back-' + this.id, this.painter, dpr);\n    this.ctxBack = this.domBack.getContext('2d');\n    this.ctxBack.__currentValues = {};\n\n    if (dpr != 1) {\n      this.ctxBack.scale(dpr, dpr);\n    }\n  },\n\n  /**\n   * @param  {number} width\n   * @param  {number} height\n   */\n  resize: function (width, height) {\n    var dpr = this.dpr;\n    var dom = this.dom;\n    var domStyle = dom.style;\n    var domBack = this.domBack;\n    domStyle.width = width + 'px';\n    domStyle.height = height + 'px';\n    dom.width = width * dpr;\n    dom.height = height * dpr;\n\n    if (domBack) {\n      domBack.width = width * dpr;\n      domBack.height = height * dpr;\n\n      if (dpr != 1) {\n        this.ctxBack.scale(dpr, dpr);\n      }\n    }\n  },\n\n  /**\n   * \n   * @param {boolean} clearAll Clear all with out motion blur\n   */\n  clear: function (clearAll) {\n    var dom = this.dom;\n    var ctx = this.ctx;\n    var width = dom.width;\n    var height = dom.height;\n    var clearColor = this.clearColor;\n    var haveMotionBLur = this.motionBlur && !clearAll;\n    var lastFrameAlpha = this.lastFrameAlpha;\n    var dpr = this.dpr;\n\n    if (haveMotionBLur) {\n      if (!this.domBack) {\n        this.createBackBuffer();\n      }\n\n      this.ctxBack.globalCompositeOperation = 'copy';\n      this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n    }\n\n    ctx.clearRect(0, 0, width, height);\n\n    if (clearColor) {\n      var clearColorGradientOrPattern; // Gradient\n\n      if (clearColor.colorStops) {\n        // Cache canvas gradient\n        clearColorGradientOrPattern = clearColor.__canvasGradient || Style.getGradient(ctx, clearColor, {\n          x: 0,\n          y: 0,\n          width: width,\n          height: height\n        });\n        clearColor.__canvasGradient = clearColorGradientOrPattern;\n      } // Pattern\n      else if (clearColor.image) {\n          clearColorGradientOrPattern = Pattern.prototype.getCanvasPattern.call(clearColor, ctx);\n        }\n\n      ctx.save();\n      ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n      ctx.fillRect(0, 0, width, height);\n      ctx.restore();\n    }\n\n    if (haveMotionBLur) {\n      var domBack = this.domBack;\n      ctx.save();\n      ctx.globalAlpha = lastFrameAlpha;\n      ctx.drawImage(domBack, 0, 0, width, height);\n      ctx.restore();\n    }\n  }\n};\nvar _default = Layer;\nmodule.exports = _default;","var _config = require(\"./config\");\n\nvar devicePixelRatio = _config.devicePixelRatio;\n\nvar util = require(\"./core/util\");\n\nvar log = require(\"./core/log\");\n\nvar BoundingRect = require(\"./core/BoundingRect\");\n\nvar timsort = require(\"./core/timsort\");\n\nvar Layer = require(\"./Layer\");\n\nvar requestAnimationFrame = require(\"./animation/requestAnimationFrame\");\n\nvar Image = require(\"./graphic/Image\");\n\n/**\n * Default canvas painter\n * @module zrender/Painter\n * @author Kener (@Kener-, kener.linfeng@gmail.com)\n *         errorrik (errorrik@gmail.com)\n *         pissang (https://www.github.com/pissang)\n */\n// PENDIGN\n// Layer exceeds MAX_PROGRESSIVE_LAYER_NUMBER may have some problem when flush directly second time.\n//\n// Maximum progressive layer. When exceeding this number. All elements will be drawed in the last layer.\nvar MAX_PROGRESSIVE_LAYER_NUMBER = 5;\n\nfunction parseInt10(val) {\n  return parseInt(val, 10);\n}\n\nfunction isLayerValid(layer) {\n  if (!layer) {\n    return false;\n  }\n\n  if (layer.__builtin__) {\n    return true;\n  }\n\n  if (typeof layer.resize !== 'function' || typeof layer.refresh !== 'function') {\n    return false;\n  }\n\n  return true;\n}\n\nfunction preProcessLayer(layer) {\n  layer.__unusedCount++;\n}\n\nfunction postProcessLayer(layer) {\n  if (layer.__unusedCount == 1) {\n    layer.clear();\n  }\n}\n\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar viewRect = new BoundingRect(0, 0, 0, 0);\n\nfunction isDisplayableCulled(el, width, height) {\n  tmpRect.copy(el.getBoundingRect());\n\n  if (el.transform) {\n    tmpRect.applyTransform(el.transform);\n  }\n\n  viewRect.width = width;\n  viewRect.height = height;\n  return !tmpRect.intersect(viewRect);\n}\n\nfunction isClipPathChanged(clipPaths, prevClipPaths) {\n  if (clipPaths == prevClipPaths) {\n    // Can both be null or undefined\n    return false;\n  }\n\n  if (!clipPaths || !prevClipPaths || clipPaths.length !== prevClipPaths.length) {\n    return true;\n  }\n\n  for (var i = 0; i < clipPaths.length; i++) {\n    if (clipPaths[i] !== prevClipPaths[i]) {\n      return true;\n    }\n  }\n}\n\nfunction doClip(clipPaths, ctx) {\n  for (var i = 0; i < clipPaths.length; i++) {\n    var clipPath = clipPaths[i];\n    clipPath.setTransform(ctx);\n    ctx.beginPath();\n    clipPath.buildPath(ctx, clipPath.shape);\n    ctx.clip(); // Transform back\n\n    clipPath.restoreTransform(ctx);\n  }\n}\n\nfunction createRoot(width, height) {\n  var domRoot = document.createElement('div'); // domRoot.onselectstart = returnFalse; // \n\n  domRoot.style.cssText = ['position:relative', 'overflow:hidden', 'width:' + width + 'px', 'height:' + height + 'px', 'padding:0', 'margin:0', 'border-width:0'].join(';') + ';';\n  return domRoot;\n}\n/**\n * @alias module:zrender/Painter\n * @constructor\n * @param {HTMLElement} root \n * @param {module:zrender/Storage} storage\n * @param {Object} opts\n */\n\n\nvar Painter = function (root, storage, opts) {\n  this.type = 'canvas'; // In node environment using node-canvas\n\n  var singleCanvas = !root.nodeName // In node ?\n  || root.nodeName.toUpperCase() === 'CANVAS';\n  this._opts = opts = util.extend({}, opts || {});\n  /**\n   * @type {number}\n   */\n\n  this.dpr = opts.devicePixelRatio || devicePixelRatio;\n  /**\n   * @type {boolean}\n   * @private\n   */\n\n  this._singleCanvas = singleCanvas;\n  /**\n   * \n   * @type {HTMLElement}\n   */\n\n  this.root = root;\n  var rootStyle = root.style;\n\n  if (rootStyle) {\n    rootStyle['-webkit-tap-highlight-color'] = 'transparent';\n    rootStyle['-webkit-user-select'] = rootStyle['user-select'] = rootStyle['-webkit-touch-callout'] = 'none';\n    root.innerHTML = '';\n  }\n  /**\n   * @type {module:zrender/Storage}\n   */\n\n\n  this.storage = storage;\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n\n  var zlevelList = this._zlevelList = [];\n  /**\n   * @type {Object.<string, module:zrender/Layer>}\n   * @private\n   */\n\n  var layers = this._layers = {};\n  /**\n   * @type {Object.<string, Object>}\n   * @type {private}\n   */\n\n  this._layerConfig = {};\n\n  if (!singleCanvas) {\n    this._width = this._getSize(0);\n    this._height = this._getSize(1);\n    var domRoot = this._domRoot = createRoot(this._width, this._height);\n    root.appendChild(domRoot);\n  } else {\n    if (opts.width != null) {\n      root.width = opts.width;\n    }\n\n    if (opts.height != null) {\n      root.height = opts.height;\n    } // Use canvas width and height directly\n\n\n    var width = root.width;\n    var height = root.height;\n    this._width = width;\n    this._height = height; // Create layer if only one given canvas\n    // Device pixel ratio is fixed to 1 because given canvas has its specified width and height\n\n    var mainLayer = new Layer(root, this, 1);\n    mainLayer.initContext(); // FIXME Use canvas width and height\n    // mainLayer.resize(width, height);\n\n    layers[0] = mainLayer;\n    zlevelList.push(0);\n    this._domRoot = root;\n  } // Layers for progressive rendering\n\n\n  this._progressiveLayers = [];\n  /**\n   * @type {module:zrender/Layer}\n   * @private\n   */\n\n  this._hoverlayer;\n  this._hoverElements = [];\n};\n\nPainter.prototype = {\n  constructor: Painter,\n  getType: function () {\n    return 'canvas';\n  },\n\n  /**\n   * If painter use a single canvas\n   * @return {boolean}\n   */\n  isSingleCanvas: function () {\n    return this._singleCanvas;\n  },\n\n  /**\n   * @return {HTMLDivElement}\n   */\n  getViewportRoot: function () {\n    return this._domRoot;\n  },\n  getViewportRootOffset: function () {\n    var viewportRoot = this.getViewportRoot();\n\n    if (viewportRoot) {\n      return {\n        offsetLeft: viewportRoot.offsetLeft || 0,\n        offsetTop: viewportRoot.offsetTop || 0\n      };\n    }\n  },\n\n  /**\n   * \n   * @param {boolean} [paintAll=false] displayable\n   */\n  refresh: function (paintAll) {\n    var list = this.storage.getDisplayList(true);\n    var zlevelList = this._zlevelList;\n\n    this._paintList(list, paintAll); // Paint custum layers\n\n\n    for (var i = 0; i < zlevelList.length; i++) {\n      var z = zlevelList[i];\n      var layer = this._layers[z];\n\n      if (!layer.__builtin__ && layer.refresh) {\n        layer.refresh();\n      }\n    }\n\n    this.refreshHover();\n\n    if (this._progressiveLayers.length) {\n      this._startProgessive();\n    }\n\n    return this;\n  },\n  addHover: function (el, hoverStyle) {\n    if (el.__hoverMir) {\n      return;\n    }\n\n    var elMirror = new el.constructor({\n      style: el.style,\n      shape: el.shape\n    });\n    elMirror.__from = el;\n    el.__hoverMir = elMirror;\n    elMirror.setStyle(hoverStyle);\n\n    this._hoverElements.push(elMirror);\n  },\n  removeHover: function (el) {\n    var elMirror = el.__hoverMir;\n    var hoverElements = this._hoverElements;\n    var idx = util.indexOf(hoverElements, elMirror);\n\n    if (idx >= 0) {\n      hoverElements.splice(idx, 1);\n    }\n\n    el.__hoverMir = null;\n  },\n  clearHover: function (el) {\n    var hoverElements = this._hoverElements;\n\n    for (var i = 0; i < hoverElements.length; i++) {\n      var from = hoverElements[i].__from;\n\n      if (from) {\n        from.__hoverMir = null;\n      }\n    }\n\n    hoverElements.length = 0;\n  },\n  refreshHover: function () {\n    var hoverElements = this._hoverElements;\n    var len = hoverElements.length;\n    var hoverLayer = this._hoverlayer;\n    hoverLayer && hoverLayer.clear();\n\n    if (!len) {\n      return;\n    }\n\n    timsort(hoverElements, this.storage.displayableSortFunc); // Use a extream large zlevel\n    // FIXME?\n\n    if (!hoverLayer) {\n      hoverLayer = this._hoverlayer = this.getLayer(1e5);\n    }\n\n    var scope = {};\n    hoverLayer.ctx.save();\n\n    for (var i = 0; i < len;) {\n      var el = hoverElements[i];\n      var originalEl = el.__from; // Original el is removed\n      // PENDING\n\n      if (!(originalEl && originalEl.__zr)) {\n        hoverElements.splice(i, 1);\n        originalEl.__hoverMir = null;\n        len--;\n        continue;\n      }\n\n      i++; // Use transform\n      // FIXME style and shape ?\n\n      if (!originalEl.invisible) {\n        el.transform = originalEl.transform;\n        el.invTransform = originalEl.invTransform;\n        el.__clipPaths = originalEl.__clipPaths; // el.\n\n        this._doPaintEl(el, hoverLayer, true, scope);\n      }\n    }\n\n    hoverLayer.ctx.restore();\n  },\n  _startProgessive: function () {\n    var self = this;\n\n    if (!self._furtherProgressive) {\n      return;\n    } // Use a token to stop progress steps triggered by\n    // previous zr.refresh calling.\n\n\n    var token = self._progressiveToken = +new Date();\n    self._progress++;\n    requestAnimationFrame(step);\n\n    function step() {\n      // In case refreshed or disposed\n      if (token === self._progressiveToken && self.storage) {\n        self._doPaintList(self.storage.getDisplayList());\n\n        if (self._furtherProgressive) {\n          self._progress++;\n          requestAnimationFrame(step);\n        } else {\n          self._progressiveToken = -1;\n        }\n      }\n    }\n  },\n  _clearProgressive: function () {\n    this._progressiveToken = -1;\n    this._progress = 0;\n    util.each(this._progressiveLayers, function (layer) {\n      layer.__dirty && layer.clear();\n    });\n  },\n  _paintList: function (list, paintAll) {\n    if (paintAll == null) {\n      paintAll = false;\n    }\n\n    this._updateLayerStatus(list);\n\n    this._clearProgressive();\n\n    this.eachBuiltinLayer(preProcessLayer);\n\n    this._doPaintList(list, paintAll);\n\n    this.eachBuiltinLayer(postProcessLayer);\n  },\n  _doPaintList: function (list, paintAll) {\n    var currentLayer;\n    var currentZLevel;\n    var ctx; // var invTransform = [];\n\n    var scope;\n    var progressiveLayerIdx = 0;\n    var currentProgressiveLayer;\n    var width = this._width;\n    var height = this._height;\n    var layerProgress;\n    var frame = this._progress;\n\n    function flushProgressiveLayer(layer) {\n      var dpr = ctx.dpr || 1;\n      ctx.save();\n      ctx.globalAlpha = 1;\n      ctx.shadowBlur = 0; // Avoid layer don't clear in next progressive frame\n\n      currentLayer.__dirty = true;\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.drawImage(layer.dom, 0, 0, width * dpr, height * dpr);\n      ctx.restore();\n    }\n\n    for (var i = 0, l = list.length; i < l; i++) {\n      var el = list[i];\n      var elZLevel = this._singleCanvas ? 0 : el.zlevel;\n      var elFrame = el.__frame; // Flush at current context\n      // PENDING\n\n      if (elFrame < 0 && currentProgressiveLayer) {\n        flushProgressiveLayer(currentProgressiveLayer);\n        currentProgressiveLayer = null;\n      } // Change draw layer\n\n\n      if (currentZLevel !== elZLevel) {\n        if (ctx) {\n          ctx.restore();\n        } // Reset scope\n\n\n        scope = {}; // Only 0 zlevel if only has one canvas\n\n        currentZLevel = elZLevel;\n        currentLayer = this.getLayer(currentZLevel);\n\n        if (!currentLayer.__builtin__) {\n          log('ZLevel ' + currentZLevel + ' has been used by unkown layer ' + currentLayer.id);\n        }\n\n        ctx = currentLayer.ctx;\n        ctx.save(); // Reset the count\n\n        currentLayer.__unusedCount = 0;\n\n        if (currentLayer.__dirty || paintAll) {\n          currentLayer.clear();\n        }\n      }\n\n      if (!(currentLayer.__dirty || paintAll)) {\n        continue;\n      }\n\n      if (elFrame >= 0) {\n        // Progressive layer changed\n        if (!currentProgressiveLayer) {\n          currentProgressiveLayer = this._progressiveLayers[Math.min(progressiveLayerIdx++, MAX_PROGRESSIVE_LAYER_NUMBER - 1)];\n          currentProgressiveLayer.ctx.save();\n          currentProgressiveLayer.renderScope = {};\n\n          if (currentProgressiveLayer && currentProgressiveLayer.__progress > currentProgressiveLayer.__maxProgress) {\n            // flushProgressiveLayer(currentProgressiveLayer);\n            // Quick jump all progressive elements\n            // All progressive element are not dirty, jump over and flush directly\n            i = currentProgressiveLayer.__nextIdxNotProg - 1; // currentProgressiveLayer = null;\n\n            continue;\n          }\n\n          layerProgress = currentProgressiveLayer.__progress;\n\n          if (!currentProgressiveLayer.__dirty) {\n            // Keep rendering\n            frame = layerProgress;\n          }\n\n          currentProgressiveLayer.__progress = frame + 1;\n        }\n\n        if (elFrame === frame) {\n          this._doPaintEl(el, currentProgressiveLayer, true, currentProgressiveLayer.renderScope);\n        }\n      } else {\n        this._doPaintEl(el, currentLayer, paintAll, scope);\n      }\n\n      el.__dirty = false;\n    }\n\n    if (currentProgressiveLayer) {\n      flushProgressiveLayer(currentProgressiveLayer);\n    } // Restore the lastLayer ctx\n\n\n    ctx && ctx.restore(); // If still has clipping state\n    // if (scope.prevElClipPaths) {\n    //     ctx.restore();\n    // }\n\n    this._furtherProgressive = false;\n    util.each(this._progressiveLayers, function (layer) {\n      if (layer.__maxProgress >= layer.__progress) {\n        this._furtherProgressive = true;\n      }\n    }, this);\n  },\n  _doPaintEl: function (el, currentLayer, forcePaint, scope) {\n    var ctx = currentLayer.ctx;\n    var m = el.transform;\n\n    if ((currentLayer.__dirty || forcePaint) && // Ignore invisible element\n    !el.invisible // Ignore transparent element\n    && el.style.opacity !== 0 // Ignore scale 0 element, in some environment like node-canvas\n    // Draw a scale 0 element can cause all following draw wrong\n    // And setTransform with scale 0 will cause set back transform failed.\n    && !(m && !m[0] && !m[3]) // Ignore culled element\n    && !(el.culling && isDisplayableCulled(el, this._width, this._height))) {\n      var clipPaths = el.__clipPaths; // Optimize when clipping on group with several elements\n\n      if (scope.prevClipLayer !== currentLayer || isClipPathChanged(clipPaths, scope.prevElClipPaths)) {\n        // If has previous clipping state, restore from it\n        if (scope.prevElClipPaths) {\n          scope.prevClipLayer.ctx.restore();\n          scope.prevClipLayer = scope.prevElClipPaths = null; // Reset prevEl since context has been restored\n\n          scope.prevEl = null;\n        } // New clipping state\n\n\n        if (clipPaths) {\n          ctx.save();\n          doClip(clipPaths, ctx);\n          scope.prevClipLayer = currentLayer;\n          scope.prevElClipPaths = clipPaths;\n        }\n      }\n\n      el.beforeBrush && el.beforeBrush(ctx);\n      el.brush(ctx, scope.prevEl || null);\n      scope.prevEl = el;\n      el.afterBrush && el.afterBrush(ctx);\n    }\n  },\n\n  /**\n   *  zlevel \n   * @param {number} zlevel\n   * @return {module:zrender/Layer}\n   */\n  getLayer: function (zlevel) {\n    if (this._singleCanvas) {\n      return this._layers[0];\n    }\n\n    var layer = this._layers[zlevel];\n\n    if (!layer) {\n      // Create a new layer\n      layer = new Layer('zr_' + zlevel, this, this.dpr);\n      layer.__builtin__ = true;\n\n      if (this._layerConfig[zlevel]) {\n        util.merge(layer, this._layerConfig[zlevel], true);\n      }\n\n      this.insertLayer(zlevel, layer); // Context is created after dom inserted to document\n      // Or excanvas will get 0px clientWidth and clientHeight\n\n      layer.initContext();\n    }\n\n    return layer;\n  },\n  insertLayer: function (zlevel, layer) {\n    var layersMap = this._layers;\n    var zlevelList = this._zlevelList;\n    var len = zlevelList.length;\n    var prevLayer = null;\n    var i = -1;\n    var domRoot = this._domRoot;\n\n    if (layersMap[zlevel]) {\n      log('ZLevel ' + zlevel + ' has been used already');\n      return;\n    } // Check if is a valid layer\n\n\n    if (!isLayerValid(layer)) {\n      log('Layer of zlevel ' + zlevel + ' is not valid');\n      return;\n    }\n\n    if (len > 0 && zlevel > zlevelList[0]) {\n      for (i = 0; i < len - 1; i++) {\n        if (zlevelList[i] < zlevel && zlevelList[i + 1] > zlevel) {\n          break;\n        }\n      }\n\n      prevLayer = layersMap[zlevelList[i]];\n    }\n\n    zlevelList.splice(i + 1, 0, zlevel);\n    layersMap[zlevel] = layer; // Vitual layer will not directly show on the screen.\n    // (It can be a WebGL layer and assigned to a ZImage element)\n    // But it still under management of zrender.\n\n    if (!layer.virtual) {\n      if (prevLayer) {\n        var prevDom = prevLayer.dom;\n\n        if (prevDom.nextSibling) {\n          domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n        } else {\n          domRoot.appendChild(layer.dom);\n        }\n      } else {\n        if (domRoot.firstChild) {\n          domRoot.insertBefore(layer.dom, domRoot.firstChild);\n        } else {\n          domRoot.appendChild(layer.dom);\n        }\n      }\n    }\n  },\n  // Iterate each layer\n  eachLayer: function (cb, context) {\n    var zlevelList = this._zlevelList;\n    var z;\n    var i;\n\n    for (i = 0; i < zlevelList.length; i++) {\n      z = zlevelList[i];\n      cb.call(context, this._layers[z], z);\n    }\n  },\n  // Iterate each buildin layer\n  eachBuiltinLayer: function (cb, context) {\n    var zlevelList = this._zlevelList;\n    var layer;\n    var z;\n    var i;\n\n    for (i = 0; i < zlevelList.length; i++) {\n      z = zlevelList[i];\n      layer = this._layers[z];\n\n      if (layer.__builtin__) {\n        cb.call(context, layer, z);\n      }\n    }\n  },\n  // Iterate each other layer except buildin layer\n  eachOtherLayer: function (cb, context) {\n    var zlevelList = this._zlevelList;\n    var layer;\n    var z;\n    var i;\n\n    for (i = 0; i < zlevelList.length; i++) {\n      z = zlevelList[i];\n      layer = this._layers[z];\n\n      if (!layer.__builtin__) {\n        cb.call(context, layer, z);\n      }\n    }\n  },\n\n  /**\n   * \n   * @param {Array.<module:zrender/Layer>} [prevLayer]\n   */\n  getLayers: function () {\n    return this._layers;\n  },\n  _updateLayerStatus: function (list) {\n    var layers = this._layers;\n    var progressiveLayers = this._progressiveLayers;\n    var elCountsLastFrame = {};\n    var progressiveElCountsLastFrame = {};\n    this.eachBuiltinLayer(function (layer, z) {\n      elCountsLastFrame[z] = layer.elCount;\n      layer.elCount = 0;\n      layer.__dirty = false;\n    });\n    util.each(progressiveLayers, function (layer, idx) {\n      progressiveElCountsLastFrame[idx] = layer.elCount;\n      layer.elCount = 0;\n      layer.__dirty = false;\n    });\n    var progressiveLayerCount = 0;\n    var currentProgressiveLayer;\n    var lastProgressiveKey;\n    var frameCount = 0;\n\n    for (var i = 0, l = list.length; i < l; i++) {\n      var el = list[i];\n      var zlevel = this._singleCanvas ? 0 : el.zlevel;\n      var layer = layers[zlevel];\n      var elProgress = el.progressive;\n\n      if (layer) {\n        layer.elCount++;\n        layer.__dirty = layer.__dirty || el.__dirty;\n      } /////// Update progressive\n\n\n      if (elProgress >= 0) {\n        // Fix wrong progressive sequence problem.\n        if (lastProgressiveKey !== elProgress) {\n          lastProgressiveKey = elProgress;\n          frameCount++;\n        }\n\n        var elFrame = el.__frame = frameCount - 1;\n\n        if (!currentProgressiveLayer) {\n          var idx = Math.min(progressiveLayerCount, MAX_PROGRESSIVE_LAYER_NUMBER - 1);\n          currentProgressiveLayer = progressiveLayers[idx];\n\n          if (!currentProgressiveLayer) {\n            currentProgressiveLayer = progressiveLayers[idx] = new Layer('progressive', this, this.dpr);\n            currentProgressiveLayer.initContext();\n          }\n\n          currentProgressiveLayer.__maxProgress = 0;\n        }\n\n        currentProgressiveLayer.__dirty = currentProgressiveLayer.__dirty || el.__dirty;\n        currentProgressiveLayer.elCount++;\n        currentProgressiveLayer.__maxProgress = Math.max(currentProgressiveLayer.__maxProgress, elFrame);\n\n        if (currentProgressiveLayer.__maxProgress >= currentProgressiveLayer.__progress) {\n          // Should keep rendering this  layer because progressive rendering is not finished yet\n          layer.__dirty = true;\n        }\n      } else {\n        el.__frame = -1;\n\n        if (currentProgressiveLayer) {\n          currentProgressiveLayer.__nextIdxNotProg = i;\n          progressiveLayerCount++;\n          currentProgressiveLayer = null;\n        }\n      }\n    }\n\n    if (currentProgressiveLayer) {\n      progressiveLayerCount++;\n      currentProgressiveLayer.__nextIdxNotProg = i;\n    } // \n\n\n    this.eachBuiltinLayer(function (layer, z) {\n      if (elCountsLastFrame[z] !== layer.elCount) {\n        layer.__dirty = true;\n      }\n    });\n    progressiveLayers.length = Math.min(progressiveLayerCount, MAX_PROGRESSIVE_LAYER_NUMBER);\n    util.each(progressiveLayers, function (layer, idx) {\n      if (progressiveElCountsLastFrame[idx] !== layer.elCount) {\n        el.__dirty = true;\n      }\n\n      if (layer.__dirty) {\n        layer.__progress = 0;\n      }\n    });\n  },\n\n  /**\n   * hover\n   */\n  clear: function () {\n    this.eachBuiltinLayer(this._clearLayer);\n    return this;\n  },\n  _clearLayer: function (layer) {\n    layer.clear();\n  },\n\n  /**\n   * zlevel\n   *\n   * @param {string} zlevel\n   * @param {Object} config \n   * @param {string} [config.clearColor=0] \n   * @param {string} [config.motionBlur=false] \n   * @param {number} [config.lastFrameAlpha=0.7]\n   *                 alpha\n   */\n  configLayer: function (zlevel, config) {\n    if (config) {\n      var layerConfig = this._layerConfig;\n\n      if (!layerConfig[zlevel]) {\n        layerConfig[zlevel] = config;\n      } else {\n        util.merge(layerConfig[zlevel], config, true);\n      }\n\n      var layer = this._layers[zlevel];\n\n      if (layer) {\n        util.merge(layer, layerConfig[zlevel], true);\n      }\n    }\n  },\n\n  /**\n   * \n   * @param {number} zlevel zlevel\n   */\n  delLayer: function (zlevel) {\n    var layers = this._layers;\n    var zlevelList = this._zlevelList;\n    var layer = layers[zlevel];\n\n    if (!layer) {\n      return;\n    }\n\n    layer.dom.parentNode.removeChild(layer.dom);\n    delete layers[zlevel];\n    zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n  },\n\n  /**\n   * \n   */\n  resize: function (width, height) {\n    var domRoot = this._domRoot; // FIXME Why ?\n\n    domRoot.style.display = 'none'; // Save input w/h\n\n    var opts = this._opts;\n    width != null && (opts.width = width);\n    height != null && (opts.height = height);\n    width = this._getSize(0);\n    height = this._getSize(1);\n    domRoot.style.display = ''; // resize\n\n    if (this._width != width || height != this._height) {\n      domRoot.style.width = width + 'px';\n      domRoot.style.height = height + 'px';\n\n      for (var id in this._layers) {\n        if (this._layers.hasOwnProperty(id)) {\n          this._layers[id].resize(width, height);\n        }\n      }\n\n      util.each(this._progressiveLayers, function (layer) {\n        layer.resize(width, height);\n      });\n      this.refresh(true);\n    }\n\n    this._width = width;\n    this._height = height;\n    return this;\n  },\n\n  /**\n   * \n   * @param {number} zlevel\n   */\n  clearLayer: function (zlevel) {\n    var layer = this._layers[zlevel];\n\n    if (layer) {\n      layer.clear();\n    }\n  },\n\n  /**\n   * \n   */\n  dispose: function () {\n    this.root.innerHTML = '';\n    this.root = this.storage = this._domRoot = this._layers = null;\n  },\n\n  /**\n   * Get canvas which has all thing rendered\n   * @param {Object} opts\n   * @param {string} [opts.backgroundColor]\n   * @param {number} [opts.pixelRatio]\n   */\n  getRenderedCanvas: function (opts) {\n    opts = opts || {};\n\n    if (this._singleCanvas) {\n      return this._layers[0].dom;\n    }\n\n    var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n    imageLayer.initContext();\n    imageLayer.clearColor = opts.backgroundColor;\n    imageLayer.clear();\n    var displayList = this.storage.getDisplayList(true);\n    var scope = {};\n    var zlevel;\n    var self = this;\n\n    function findAndDrawOtherLayer(smaller, larger) {\n      var zlevelList = self._zlevelList;\n\n      if (smaller == null) {\n        smaller = -Infinity;\n      }\n\n      var intermediateLayer;\n\n      for (var i = 0; i < zlevelList.length; i++) {\n        var z = zlevelList[i];\n        var layer = self._layers[z];\n\n        if (!layer.__builtin__ && z > smaller && z < larger) {\n          intermediateLayer = layer;\n          break;\n        }\n      }\n\n      if (intermediateLayer && intermediateLayer.renderToCanvas) {\n        imageLayer.ctx.save();\n        intermediateLayer.renderToCanvas(imageLayer.ctx);\n        imageLayer.ctx.restore();\n      }\n    }\n\n    for (var i = 0; i < displayList.length; i++) {\n      var el = displayList[i];\n\n      if (el.zlevel !== zlevel) {\n        findAndDrawOtherLayer(zlevel, el.zlevel);\n        zlevel = el.zlevel;\n      }\n\n      this._doPaintEl(el, imageLayer, true, scope);\n    }\n\n    findAndDrawOtherLayer(zlevel, Infinity);\n    return imageLayer.dom;\n  },\n\n  /**\n   * \n   */\n  getWidth: function () {\n    return this._width;\n  },\n\n  /**\n   * \n   */\n  getHeight: function () {\n    return this._height;\n  },\n  _getSize: function (whIdx) {\n    var opts = this._opts;\n    var wh = ['width', 'height'][whIdx];\n    var cwh = ['clientWidth', 'clientHeight'][whIdx];\n    var plt = ['paddingLeft', 'paddingTop'][whIdx];\n    var prb = ['paddingRight', 'paddingBottom'][whIdx];\n\n    if (opts[wh] != null && opts[wh] !== 'auto') {\n      return parseFloat(opts[wh]);\n    }\n\n    var root = this.root; // IE8 does not support getComputedStyle, but it use VML.\n\n    var stl = document.defaultView.getComputedStyle(root);\n    return (root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh])) - (parseInt10(stl[plt]) || 0) - (parseInt10(stl[prb]) || 0) | 0;\n  },\n  pathToImage: function (path, dpr) {\n    dpr = dpr || this.dpr;\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    var rect = path.getBoundingRect();\n    var style = path.style;\n    var shadowBlurSize = style.shadowBlur;\n    var shadowOffsetX = style.shadowOffsetX;\n    var shadowOffsetY = style.shadowOffsetY;\n    var lineWidth = style.hasStroke() ? style.lineWidth : 0;\n    var leftMargin = Math.max(lineWidth / 2, -shadowOffsetX + shadowBlurSize);\n    var rightMargin = Math.max(lineWidth / 2, shadowOffsetX + shadowBlurSize);\n    var topMargin = Math.max(lineWidth / 2, -shadowOffsetY + shadowBlurSize);\n    var bottomMargin = Math.max(lineWidth / 2, shadowOffsetY + shadowBlurSize);\n    var width = rect.width + leftMargin + rightMargin;\n    var height = rect.height + topMargin + bottomMargin;\n    canvas.width = width * dpr;\n    canvas.height = height * dpr;\n    ctx.scale(dpr, dpr);\n    ctx.clearRect(0, 0, width, height);\n    ctx.dpr = dpr;\n    var pathTransform = {\n      position: path.position,\n      rotation: path.rotation,\n      scale: path.scale\n    };\n    path.position = [leftMargin - rect.x, topMargin - rect.y];\n    path.rotation = 0;\n    path.scale = [1, 1];\n    path.updateTransform();\n\n    if (path) {\n      path.brush(ctx);\n    }\n\n    var ImageShape = Image;\n    var imgShape = new ImageShape({\n      style: {\n        x: 0,\n        y: 0,\n        image: canvas\n      }\n    });\n\n    if (pathTransform.position != null) {\n      imgShape.position = path.position = pathTransform.position;\n    }\n\n    if (pathTransform.rotation != null) {\n      imgShape.rotation = path.rotation = pathTransform.rotation;\n    }\n\n    if (pathTransform.scale != null) {\n      imgShape.scale = path.scale = pathTransform.scale;\n    }\n\n    return imgShape;\n  }\n};\nvar _default = Painter;\nmodule.exports = _default;","var util = require(\"./core/util\");\n\nvar env = require(\"./core/env\");\n\nvar Group = require(\"./container/Group\");\n\nvar timsort = require(\"./core/timsort\");\n\n/**\n * Storage\n * @module zrender/Storage\n * @author Kener (@Kener-, kener.linfeng@gmail.com)\n * @author errorrik (errorrik@gmail.com)\n * @author pissang (https://github.com/pissang/)\n */\n// Use timsort because in most case elements are partially sorted\n// https://jsfiddle.net/pissang/jr4x7mdm/8/\nfunction shapeCompareFunc(a, b) {\n  if (a.zlevel === b.zlevel) {\n    if (a.z === b.z) {\n      // if (a.z2 === b.z2) {\n      //     // FIXME Slow has renderidx compare\n      //     // http://stackoverflow.com/questions/20883421/sorting-in-javascript-should-every-compare-function-have-a-return-0-statement\n      //     // https://github.com/v8/v8/blob/47cce544a31ed5577ffe2963f67acb4144ee0232/src/js/array.js#L1012\n      //     return a.__renderidx - b.__renderidx;\n      // }\n      return a.z2 - b.z2;\n    }\n\n    return a.z - b.z;\n  }\n\n  return a.zlevel - b.zlevel;\n}\n/**\n *  (M)\n * @alias module:zrender/Storage\n * @constructor\n */\n\n\nvar Storage = function () {\n  // jshint ignore:line\n  this._roots = [];\n  this._displayList = [];\n  this._displayListLen = 0;\n};\n\nStorage.prototype = {\n  constructor: Storage,\n\n  /**\n   * @param  {Function} cb\n   *\n   */\n  traverse: function (cb, context) {\n    for (var i = 0; i < this._roots.length; i++) {\n      this._roots[i].traverse(cb, context);\n    }\n  },\n\n  /**\n   * \n   * @param {boolean} [update=false] \n   * @param {boolean} [includeIgnore=false]  ignore ,  update  true \n   *\n   * {@link module:zrender/graphic/Displayable.prototype.updateDisplayList}\n   * @return {Array.<module:zrender/graphic/Displayable>}\n   */\n  getDisplayList: function (update, includeIgnore) {\n    includeIgnore = includeIgnore || false;\n\n    if (update) {\n      this.updateDisplayList(includeIgnore);\n    }\n\n    return this._displayList;\n  },\n\n  /**\n   * \n   * GroupShapeShape\n   * zlevel > z > \n   * @param {boolean} [includeIgnore=false]  ignore \n   */\n  updateDisplayList: function (includeIgnore) {\n    this._displayListLen = 0;\n    var roots = this._roots;\n    var displayList = this._displayList;\n\n    for (var i = 0, len = roots.length; i < len; i++) {\n      this._updateAndAddDisplayable(roots[i], null, includeIgnore);\n    }\n\n    displayList.length = this._displayListLen; // for (var i = 0, len = displayList.length; i < len; i++) {\n    //     displayList[i].__renderidx = i;\n    // }\n    // displayList.sort(shapeCompareFunc);\n\n    env.canvasSupported && timsort(displayList, shapeCompareFunc);\n  },\n  _updateAndAddDisplayable: function (el, clipPaths, includeIgnore) {\n    if (el.ignore && !includeIgnore) {\n      return;\n    }\n\n    el.beforeUpdate();\n\n    if (el.__dirty) {\n      el.update();\n    }\n\n    el.afterUpdate();\n    var userSetClipPath = el.clipPath;\n\n    if (userSetClipPath) {\n      // FIXME \n      if (clipPaths) {\n        clipPaths = clipPaths.slice();\n      } else {\n        clipPaths = [];\n      }\n\n      var currentClipPath = userSetClipPath;\n      var parentClipPath = el; // Recursively add clip path\n\n      while (currentClipPath) {\n        // clipPath  clipPath \n        currentClipPath.parent = parentClipPath;\n        currentClipPath.updateTransform();\n        clipPaths.push(currentClipPath);\n        parentClipPath = currentClipPath;\n        currentClipPath = currentClipPath.clipPath;\n      }\n    }\n\n    if (el.isGroup) {\n      var children = el._children;\n\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i]; // Force to mark as dirty if group is dirty\n        // FIXME __dirtyPath ?\n\n        if (el.__dirty) {\n          child.__dirty = true;\n        }\n\n        this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\n      } // Mark group clean here\n\n\n      el.__dirty = false;\n    } else {\n      el.__clipPaths = clipPaths;\n      this._displayList[this._displayListLen++] = el;\n    }\n  },\n\n  /**\n   * (Shape)(Group)\n   * @param {module:zrender/Element} el\n   */\n  addRoot: function (el) {\n    if (el.__storage === this) {\n      return;\n    }\n\n    if (el instanceof Group) {\n      el.addChildrenToStorage(this);\n    }\n\n    this.addToStorage(el);\n\n    this._roots.push(el);\n  },\n\n  /**\n   * (Shape)(Group)\n   * @param {string|Array.<string>} [el] Storage\n   */\n  delRoot: function (el) {\n    if (el == null) {\n      // el\n      for (var i = 0; i < this._roots.length; i++) {\n        var root = this._roots[i];\n\n        if (root instanceof Group) {\n          root.delChildrenFromStorage(this);\n        }\n      }\n\n      this._roots = [];\n      this._displayList = [];\n      this._displayListLen = 0;\n      return;\n    }\n\n    if (el instanceof Array) {\n      for (var i = 0, l = el.length; i < l; i++) {\n        this.delRoot(el[i]);\n      }\n\n      return;\n    }\n\n    var idx = util.indexOf(this._roots, el);\n\n    if (idx >= 0) {\n      this.delFromStorage(el);\n\n      this._roots.splice(idx, 1);\n\n      if (el instanceof Group) {\n        el.delChildrenFromStorage(this);\n      }\n    }\n  },\n  addToStorage: function (el) {\n    el.__storage = this;\n    el.dirty(false);\n    return this;\n  },\n  delFromStorage: function (el) {\n    if (el) {\n      el.__storage = null;\n    }\n\n    return this;\n  },\n\n  /**\n   * Storage\n   */\n  dispose: function () {\n    this._renderList = this._roots = null;\n  },\n  displayableSortFunc: shapeCompareFunc\n};\nvar _default = Storage;\nmodule.exports = _default;","var util = require(\"../core/util\");\n\nvar _event = require(\"../core/event\");\n\nvar Dispatcher = _event.Dispatcher;\n\nvar requestAnimationFrame = require(\"./requestAnimationFrame\");\n\nvar Animator = require(\"./Animator\");\n\n/**\n * , \n *\n * @module zrender/animation/Animation\n * @author pissang(https://github.com/pissang)\n */\n// TODO Additive animation\n// http://iosoteric.com/additive-animations-animatewithduration-in-ios-8/\n// https://developer.apple.com/videos/wwdc2014/#236\n\n/**\n * @typedef {Object} IZRenderStage\n * @property {Function} update\n */\n\n/**\n * @alias module:zrender/animation/Animation\n * @constructor\n * @param {Object} [options]\n * @param {Function} [options.onframe]\n * @param {IZRenderStage} [options.stage]\n * @example\n *     var animation = new Animation();\n *     var obj = {\n *         x: 100,\n *         y: 100\n *     };\n *     animation.animate(node.position)\n *         .when(1000, {\n *             x: 500,\n *             y: 500\n *         })\n *         .when(2000, {\n *             x: 100,\n *             y: 100\n *         })\n *         .start('spline');\n */\nvar Animation = function (options) {\n  options = options || {};\n  this.stage = options.stage || {};\n\n  this.onframe = options.onframe || function () {}; // private properties\n\n\n  this._clips = [];\n  this._running = false;\n  this._time;\n  this._pausedTime;\n  this._pauseStart;\n  this._paused = false;\n  Dispatcher.call(this);\n};\n\nAnimation.prototype = {\n  constructor: Animation,\n\n  /**\n   *  clip\n   * @param {module:zrender/animation/Clip} clip\n   */\n  addClip: function (clip) {\n    this._clips.push(clip);\n  },\n\n  /**\n   *  animator\n   * @param {module:zrender/animation/Animator} animator\n   */\n  addAnimator: function (animator) {\n    animator.animation = this;\n    var clips = animator.getClips();\n\n    for (var i = 0; i < clips.length; i++) {\n      this.addClip(clips[i]);\n    }\n  },\n\n  /**\n   * \n   * @param {module:zrender/animation/Clip} clip\n   */\n  removeClip: function (clip) {\n    var idx = util.indexOf(this._clips, clip);\n\n    if (idx >= 0) {\n      this._clips.splice(idx, 1);\n    }\n  },\n\n  /**\n   * \n   * @param {module:zrender/animation/Animator} animator\n   */\n  removeAnimator: function (animator) {\n    var clips = animator.getClips();\n\n    for (var i = 0; i < clips.length; i++) {\n      this.removeClip(clips[i]);\n    }\n\n    animator.animation = null;\n  },\n  _update: function () {\n    var time = new Date().getTime() - this._pausedTime;\n\n    var delta = time - this._time;\n    var clips = this._clips;\n    var len = clips.length;\n    var deferredEvents = [];\n    var deferredClips = [];\n\n    for (var i = 0; i < len; i++) {\n      var clip = clips[i];\n      var e = clip.step(time, delta); // Throw out the events need to be called after\n      // stage.update, like destroy\n\n      if (e) {\n        deferredEvents.push(e);\n        deferredClips.push(clip);\n      }\n    } // Remove the finished clip\n\n\n    for (var i = 0; i < len;) {\n      if (clips[i]._needsRemove) {\n        clips[i] = clips[len - 1];\n        clips.pop();\n        len--;\n      } else {\n        i++;\n      }\n    }\n\n    len = deferredEvents.length;\n\n    for (var i = 0; i < len; i++) {\n      deferredClips[i].fire(deferredEvents[i]);\n    }\n\n    this._time = time;\n    this.onframe(delta);\n    this.trigger('frame', delta);\n\n    if (this.stage.update) {\n      this.stage.update();\n    }\n  },\n  _startLoop: function () {\n    var self = this;\n    this._running = true;\n\n    function step() {\n      if (self._running) {\n        requestAnimationFrame(step);\n        !self._paused && self._update();\n      }\n    }\n\n    requestAnimationFrame(step);\n  },\n\n  /**\n   * \n   */\n  start: function () {\n    this._time = new Date().getTime();\n    this._pausedTime = 0;\n\n    this._startLoop();\n  },\n\n  /**\n   * \n   */\n  stop: function () {\n    this._running = false;\n  },\n\n  /**\n   * Pause\n   */\n  pause: function () {\n    if (!this._paused) {\n      this._pauseStart = new Date().getTime();\n      this._paused = true;\n    }\n  },\n\n  /**\n   * Resume\n   */\n  resume: function () {\n    if (this._paused) {\n      this._pausedTime += new Date().getTime() - this._pauseStart;\n      this._paused = false;\n    }\n  },\n\n  /**\n   * \n   */\n  clear: function () {\n    this._clips = [];\n  },\n\n  /**\n   * animator\n   * @param  {Object} target\n   * @param  {Object} options\n   * @param  {boolean} [options.loop=false] \n   * @param  {Function} [options.getter=null]\n   *         gettergetter\n   * @param  {Function} [options.setter=null]\n   *         settersetter\n   * @return {module:zrender/animation/Animation~Animator}\n   */\n  // TODO Gap\n  animate: function (target, options) {\n    options = options || {};\n    var animator = new Animator(target, options.loop, options.getter, options.setter);\n    this.addAnimator(animator);\n    return animator;\n  }\n};\nutil.mixin(Animation, Dispatcher);\nvar _default = Animation;\nmodule.exports = _default;","var Clip = require(\"./Clip\");\n\nvar color = require(\"../tool/color\");\n\nvar _util = require(\"../core/util\");\n\nvar isArrayLike = _util.isArrayLike;\n\n/**\n * @module echarts/animation/Animator\n */\nvar arraySlice = Array.prototype.slice;\n\nfunction defaultGetter(target, key) {\n  return target[key];\n}\n\nfunction defaultSetter(target, key, value) {\n  target[key] = value;\n}\n/**\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} percent\n * @return {number}\n */\n\n\nfunction interpolateNumber(p0, p1, percent) {\n  return (p1 - p0) * percent + p0;\n}\n/**\n * @param  {string} p0\n * @param  {string} p1\n * @param  {number} percent\n * @return {string}\n */\n\n\nfunction interpolateString(p0, p1, percent) {\n  return percent > 0.5 ? p1 : p0;\n}\n/**\n * @param  {Array} p0\n * @param  {Array} p1\n * @param  {number} percent\n * @param  {Array} out\n * @param  {number} arrDim\n */\n\n\nfunction interpolateArray(p0, p1, percent, out, arrDim) {\n  var len = p0.length;\n\n  if (arrDim == 1) {\n    for (var i = 0; i < len; i++) {\n      out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n  } else {\n    var len2 = len && p0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n      }\n    }\n  }\n} // arr0 is source array, arr1 is target array.\n// Do some preprocess to avoid error happened when interpolating from arr0 to arr1\n\n\nfunction fillArr(arr0, arr1, arrDim) {\n  var arr0Len = arr0.length;\n  var arr1Len = arr1.length;\n\n  if (arr0Len !== arr1Len) {\n    // FIXME Not work for TypedArray\n    var isPreviousLarger = arr0Len > arr1Len;\n\n    if (isPreviousLarger) {\n      // Cut the previous\n      arr0.length = arr1Len;\n    } else {\n      // Fill the previous\n      for (var i = arr0Len; i < arr1Len; i++) {\n        arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n      }\n    }\n  } // Handling NaN value\n\n\n  var len2 = arr0[0] && arr0[0].length;\n\n  for (var i = 0; i < arr0.length; i++) {\n    if (arrDim === 1) {\n      if (isNaN(arr0[i])) {\n        arr0[i] = arr1[i];\n      }\n    } else {\n      for (var j = 0; j < len2; j++) {\n        if (isNaN(arr0[i][j])) {\n          arr0[i][j] = arr1[i][j];\n        }\n      }\n    }\n  }\n}\n/**\n * @param  {Array} arr0\n * @param  {Array} arr1\n * @param  {number} arrDim\n * @return {boolean}\n */\n\n\nfunction isArraySame(arr0, arr1, arrDim) {\n  if (arr0 === arr1) {\n    return true;\n  }\n\n  var len = arr0.length;\n\n  if (len !== arr1.length) {\n    return false;\n  }\n\n  if (arrDim === 1) {\n    for (var i = 0; i < len; i++) {\n      if (arr0[i] !== arr1[i]) {\n        return false;\n      }\n    }\n  } else {\n    var len2 = arr0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        if (arr0[i][j] !== arr1[i][j]) {\n          return false;\n        }\n      }\n    }\n  }\n\n  return true;\n}\n/**\n * Catmull Rom interpolate array\n * @param  {Array} p0\n * @param  {Array} p1\n * @param  {Array} p2\n * @param  {Array} p3\n * @param  {number} t\n * @param  {number} t2\n * @param  {number} t3\n * @param  {Array} out\n * @param  {number} arrDim\n */\n\n\nfunction catmullRomInterpolateArray(p0, p1, p2, p3, t, t2, t3, out, arrDim) {\n  var len = p0.length;\n\n  if (arrDim == 1) {\n    for (var i = 0; i < len; i++) {\n      out[i] = catmullRomInterpolate(p0[i], p1[i], p2[i], p3[i], t, t2, t3);\n    }\n  } else {\n    var len2 = p0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        out[i][j] = catmullRomInterpolate(p0[i][j], p1[i][j], p2[i][j], p3[i][j], t, t2, t3);\n      }\n    }\n  }\n}\n/**\n * Catmull Rom interpolate number\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} t\n * @param  {number} t2\n * @param  {number} t3\n * @return {number}\n */\n\n\nfunction catmullRomInterpolate(p0, p1, p2, p3, t, t2, t3) {\n  var v0 = (p2 - p0) * 0.5;\n  var v1 = (p3 - p1) * 0.5;\n  return (2 * (p1 - p2) + v0 + v1) * t3 + (-3 * (p1 - p2) - 2 * v0 - v1) * t2 + v0 * t + p1;\n}\n\nfunction cloneValue(value) {\n  if (isArrayLike(value)) {\n    var len = value.length;\n\n    if (isArrayLike(value[0])) {\n      var ret = [];\n\n      for (var i = 0; i < len; i++) {\n        ret.push(arraySlice.call(value[i]));\n      }\n\n      return ret;\n    }\n\n    return arraySlice.call(value);\n  }\n\n  return value;\n}\n\nfunction rgba2String(rgba) {\n  rgba[0] = Math.floor(rgba[0]);\n  rgba[1] = Math.floor(rgba[1]);\n  rgba[2] = Math.floor(rgba[2]);\n  return 'rgba(' + rgba.join(',') + ')';\n}\n\nfunction getArrayDim(keyframes) {\n  var lastValue = keyframes[keyframes.length - 1].value;\n  return isArrayLike(lastValue && lastValue[0]) ? 2 : 1;\n}\n\nfunction createTrackClip(animator, easing, oneTrackDone, keyframes, propName, forceAnimate) {\n  var getter = animator._getter;\n  var setter = animator._setter;\n  var useSpline = easing === 'spline';\n  var trackLen = keyframes.length;\n\n  if (!trackLen) {\n    return;\n  } // Guess data type\n\n\n  var firstVal = keyframes[0].value;\n  var isValueArray = isArrayLike(firstVal);\n  var isValueColor = false;\n  var isValueString = false; // For vertices morphing\n\n  var arrDim = isValueArray ? getArrayDim(keyframes) : 0;\n  var trackMaxTime; // Sort keyframe as ascending\n\n  keyframes.sort(function (a, b) {\n    return a.time - b.time;\n  });\n  trackMaxTime = keyframes[trackLen - 1].time; // Percents of each keyframe\n\n  var kfPercents = []; // Value of each keyframe\n\n  var kfValues = [];\n  var prevValue = keyframes[0].value;\n  var isAllValueEqual = true;\n\n  for (var i = 0; i < trackLen; i++) {\n    kfPercents.push(keyframes[i].time / trackMaxTime); // Assume value is a color when it is a string\n\n    var value = keyframes[i].value; // Check if value is equal, deep check if value is array\n\n    if (!(isValueArray && isArraySame(value, prevValue, arrDim) || !isValueArray && value === prevValue)) {\n      isAllValueEqual = false;\n    }\n\n    prevValue = value; // Try converting a string to a color array\n\n    if (typeof value == 'string') {\n      var colorArray = color.parse(value);\n\n      if (colorArray) {\n        value = colorArray;\n        isValueColor = true;\n      } else {\n        isValueString = true;\n      }\n    }\n\n    kfValues.push(value);\n  }\n\n  if (!forceAnimate && isAllValueEqual) {\n    return;\n  }\n\n  var lastValue = kfValues[trackLen - 1]; // Polyfill array and NaN value\n\n  for (var i = 0; i < trackLen - 1; i++) {\n    if (isValueArray) {\n      fillArr(kfValues[i], lastValue, arrDim);\n    } else {\n      if (isNaN(kfValues[i]) && !isNaN(lastValue) && !isValueString && !isValueColor) {\n        kfValues[i] = lastValue;\n      }\n    }\n  }\n\n  isValueArray && fillArr(getter(animator._target, propName), lastValue, arrDim); // Cache the key of last frame to speed up when\n  // animation playback is sequency\n\n  var lastFrame = 0;\n  var lastFramePercent = 0;\n  var start;\n  var w;\n  var p0;\n  var p1;\n  var p2;\n  var p3;\n\n  if (isValueColor) {\n    var rgba = [0, 0, 0, 0];\n  }\n\n  var onframe = function (target, percent) {\n    // Find the range keyframes\n    // kf1-----kf2---------current--------kf3\n    // find kf2 and kf3 and do interpolation\n    var frame; // In the easing function like elasticOut, percent may less than 0\n\n    if (percent < 0) {\n      frame = 0;\n    } else if (percent < lastFramePercent) {\n      // Start from next key\n      // PENDING start from lastFrame ?\n      start = Math.min(lastFrame + 1, trackLen - 1);\n\n      for (frame = start; frame >= 0; frame--) {\n        if (kfPercents[frame] <= percent) {\n          break;\n        }\n      } // PENDING really need to do this ?\n\n\n      frame = Math.min(frame, trackLen - 2);\n    } else {\n      for (frame = lastFrame; frame < trackLen; frame++) {\n        if (kfPercents[frame] > percent) {\n          break;\n        }\n      }\n\n      frame = Math.min(frame - 1, trackLen - 2);\n    }\n\n    lastFrame = frame;\n    lastFramePercent = percent;\n    var range = kfPercents[frame + 1] - kfPercents[frame];\n\n    if (range === 0) {\n      return;\n    } else {\n      w = (percent - kfPercents[frame]) / range;\n    }\n\n    if (useSpline) {\n      p1 = kfValues[frame];\n      p0 = kfValues[frame === 0 ? frame : frame - 1];\n      p2 = kfValues[frame > trackLen - 2 ? trackLen - 1 : frame + 1];\n      p3 = kfValues[frame > trackLen - 3 ? trackLen - 1 : frame + 2];\n\n      if (isValueArray) {\n        catmullRomInterpolateArray(p0, p1, p2, p3, w, w * w, w * w * w, getter(target, propName), arrDim);\n      } else {\n        var value;\n\n        if (isValueColor) {\n          value = catmullRomInterpolateArray(p0, p1, p2, p3, w, w * w, w * w * w, rgba, 1);\n          value = rgba2String(rgba);\n        } else if (isValueString) {\n          // String is step(0.5)\n          return interpolateString(p1, p2, w);\n        } else {\n          value = catmullRomInterpolate(p0, p1, p2, p3, w, w * w, w * w * w);\n        }\n\n        setter(target, propName, value);\n      }\n    } else {\n      if (isValueArray) {\n        interpolateArray(kfValues[frame], kfValues[frame + 1], w, getter(target, propName), arrDim);\n      } else {\n        var value;\n\n        if (isValueColor) {\n          interpolateArray(kfValues[frame], kfValues[frame + 1], w, rgba, 1);\n          value = rgba2String(rgba);\n        } else if (isValueString) {\n          // String is step(0.5)\n          return interpolateString(kfValues[frame], kfValues[frame + 1], w);\n        } else {\n          value = interpolateNumber(kfValues[frame], kfValues[frame + 1], w);\n        }\n\n        setter(target, propName, value);\n      }\n    }\n  };\n\n  var clip = new Clip({\n    target: animator._target,\n    life: trackMaxTime,\n    loop: animator._loop,\n    delay: animator._delay,\n    onframe: onframe,\n    ondestroy: oneTrackDone\n  });\n\n  if (easing && easing !== 'spline') {\n    clip.easing = easing;\n  }\n\n  return clip;\n}\n/**\n * @alias module:zrender/animation/Animator\n * @constructor\n * @param {Object} target\n * @param {boolean} loop\n * @param {Function} getter\n * @param {Function} setter\n */\n\n\nvar Animator = function (target, loop, getter, setter) {\n  this._tracks = {};\n  this._target = target;\n  this._loop = loop || false;\n  this._getter = getter || defaultGetter;\n  this._setter = setter || defaultSetter;\n  this._clipCount = 0;\n  this._delay = 0;\n  this._doneList = [];\n  this._onframeList = [];\n  this._clipList = [];\n};\n\nAnimator.prototype = {\n  /**\n   * \n   * @param  {number} time ms\n   * @param  {Object} props key-value\n   * @return {module:zrender/animation/Animator}\n   */\n  when: function (time\n  /* ms */\n  , props) {\n    var tracks = this._tracks;\n\n    for (var propName in props) {\n      if (!props.hasOwnProperty(propName)) {\n        continue;\n      }\n\n      if (!tracks[propName]) {\n        tracks[propName] = []; // Invalid value\n\n        var value = this._getter(this._target, propName);\n\n        if (value == null) {\n          // zrLog('Invalid property ' + propName);\n          continue;\n        } // If time is 0\n        //  Then props is given initialize value\n        // Else\n        //  Initialize value from current prop value\n\n\n        if (time !== 0) {\n          tracks[propName].push({\n            time: 0,\n            value: cloneValue(value)\n          });\n        }\n      }\n\n      tracks[propName].push({\n        time: time,\n        value: props[propName]\n      });\n    }\n\n    return this;\n  },\n\n  /**\n   * \n   * @param  {Function} callback\n   * @return {module:zrender/animation/Animator}\n   */\n  during: function (callback) {\n    this._onframeList.push(callback);\n\n    return this;\n  },\n  pause: function () {\n    for (var i = 0; i < this._clipList.length; i++) {\n      this._clipList[i].pause();\n    }\n\n    this._paused = true;\n  },\n  resume: function () {\n    for (var i = 0; i < this._clipList.length; i++) {\n      this._clipList[i].resume();\n    }\n\n    this._paused = false;\n  },\n  isPaused: function () {\n    return !!this._paused;\n  },\n  _doneCallback: function () {\n    // Clear all tracks\n    this._tracks = {}; // Clear all clips\n\n    this._clipList.length = 0;\n    var doneList = this._doneList;\n    var len = doneList.length;\n\n    for (var i = 0; i < len; i++) {\n      doneList[i].call(this);\n    }\n  },\n\n  /**\n   * \n   * @param  {string|Function} [easing]\n   *         {@link module:zrender/animation/easing}\n   * @param  {boolean} forceAnimate\n   * @return {module:zrender/animation/Animator}\n   */\n  start: function (easing, forceAnimate) {\n    var self = this;\n    var clipCount = 0;\n\n    var oneTrackDone = function () {\n      clipCount--;\n\n      if (!clipCount) {\n        self._doneCallback();\n      }\n    };\n\n    var lastClip;\n\n    for (var propName in this._tracks) {\n      if (!this._tracks.hasOwnProperty(propName)) {\n        continue;\n      }\n\n      var clip = createTrackClip(this, easing, oneTrackDone, this._tracks[propName], propName, forceAnimate);\n\n      if (clip) {\n        this._clipList.push(clip);\n\n        clipCount++; // If start after added to animation\n\n        if (this.animation) {\n          this.animation.addClip(clip);\n        }\n\n        lastClip = clip;\n      }\n    } // Add during callback on the last clip\n\n\n    if (lastClip) {\n      var oldOnFrame = lastClip.onframe;\n\n      lastClip.onframe = function (target, percent) {\n        oldOnFrame(target, percent);\n\n        for (var i = 0; i < self._onframeList.length; i++) {\n          self._onframeList[i](target, percent);\n        }\n      };\n    } // This optimization will help the case that in the upper application\n    // the view may be refreshed frequently, where animation will be\n    // called repeatly but nothing changed.\n\n\n    if (!clipCount) {\n      this._doneCallback();\n    }\n\n    return this;\n  },\n\n  /**\n   * \n   * @param {boolean} forwardToLast If move to last frame before stop\n   */\n  stop: function (forwardToLast) {\n    var clipList = this._clipList;\n    var animation = this.animation;\n\n    for (var i = 0; i < clipList.length; i++) {\n      var clip = clipList[i];\n\n      if (forwardToLast) {\n        // Move to last frame before stop\n        clip.onframe(this._target, 1);\n      }\n\n      animation && animation.removeClip(clip);\n    }\n\n    clipList.length = 0;\n  },\n\n  /**\n   * \n   * @param  {number} time ms\n   * @return {module:zrender/animation/Animator}\n   */\n  delay: function (time) {\n    this._delay = time;\n    return this;\n  },\n\n  /**\n   * \n   * @param  {Function} cb\n   * @return {module:zrender/animation/Animator}\n   */\n  done: function (cb) {\n    if (cb) {\n      this._doneList.push(cb);\n    }\n\n    return this;\n  },\n\n  /**\n   * @return {Array.<module:zrender/animation/Clip>}\n   */\n  getClips: function () {\n    return this._clipList;\n  }\n};\nvar _default = Animator;\nmodule.exports = _default;","var easingFuncs = require(\"./easing\");\n\n/**\n * \n * @config target onframe\n * @config life(1000) \n * @config delay(0) \n * @config loop(true)\n * @config gap(0) \n * @config onframe\n * @config easing(optional)\n * @config ondestroy(optional)\n * @config onrestart(optional)\n *\n * TODO pause\n */\nfunction Clip(options) {\n  this._target = options.target; // \n\n  this._life = options.life || 1000; // \n\n  this._delay = options.delay || 0; // \n  // this._startTime = new Date().getTime() + this._delay;// \n\n  this._initialized = false; // \n\n  this.loop = options.loop == null ? false : options.loop;\n  this.gap = options.gap || 0;\n  this.easing = options.easing || 'Linear';\n  this.onframe = options.onframe;\n  this.ondestroy = options.ondestroy;\n  this.onrestart = options.onrestart;\n  this._pausedTime = 0;\n  this._paused = false;\n}\n\nClip.prototype = {\n  constructor: Clip,\n  step: function (globalTime, deltaTime) {\n    // Set startTime on first step, or _startTime may has milleseconds different between clips\n    // PENDING\n    if (!this._initialized) {\n      this._startTime = globalTime + this._delay;\n      this._initialized = true;\n    }\n\n    if (this._paused) {\n      this._pausedTime += deltaTime;\n      return;\n    }\n\n    var percent = (globalTime - this._startTime - this._pausedTime) / this._life; // \n\n    if (percent < 0) {\n      return;\n    }\n\n    percent = Math.min(percent, 1);\n    var easing = this.easing;\n    var easingFunc = typeof easing == 'string' ? easingFuncs[easing] : easing;\n    var schedule = typeof easingFunc === 'function' ? easingFunc(percent) : percent;\n    this.fire('frame', schedule); // \n\n    if (percent == 1) {\n      if (this.loop) {\n        this.restart(globalTime); // \n        //  stage.update \n\n        return 'restart';\n      } // \n      // Animation.update\n\n\n      this._needsRemove = true;\n      return 'destroy';\n    }\n\n    return null;\n  },\n  restart: function (globalTime) {\n    var remainder = (globalTime - this._startTime - this._pausedTime) % this._life;\n    this._startTime = globalTime - remainder + this.gap;\n    this._pausedTime = 0;\n    this._needsRemove = false;\n  },\n  fire: function (eventType, arg) {\n    eventType = 'on' + eventType;\n\n    if (this[eventType]) {\n      this[eventType](this._target, arg);\n    }\n  },\n  pause: function () {\n    this._paused = true;\n  },\n  resume: function () {\n    this._paused = false;\n  }\n};\nvar _default = Clip;\nmodule.exports = _default;","/**\n *  https://github.com/sole/tween.js/blob/master/src/Tween.js\n * @see http://sole.github.io/tween.js/examples/03_graphs.html\n * @exports zrender/animation/easing\n */\nvar easing = {\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  linear: function (k) {\n    return k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quadraticIn: function (k) {\n    return k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quadraticOut: function (k) {\n    return k * (2 - k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quadraticInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k;\n    }\n\n    return -0.5 * (--k * (k - 2) - 1);\n  },\n  // t^3\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  cubicIn: function (k) {\n    return k * k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  cubicOut: function (k) {\n    return --k * k * k + 1;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  cubicInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k;\n    }\n\n    return 0.5 * ((k -= 2) * k * k + 2);\n  },\n  // t^4\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quarticIn: function (k) {\n    return k * k * k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quarticOut: function (k) {\n    return 1 - --k * k * k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quarticInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k * k;\n    }\n\n    return -0.5 * ((k -= 2) * k * k * k - 2);\n  },\n  // t^5\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quinticIn: function (k) {\n    return k * k * k * k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quinticOut: function (k) {\n    return --k * k * k * k * k + 1;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quinticInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k * k * k;\n    }\n\n    return 0.5 * ((k -= 2) * k * k * k * k + 2);\n  },\n  // sin(t)\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  sinusoidalIn: function (k) {\n    return 1 - Math.cos(k * Math.PI / 2);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  sinusoidalOut: function (k) {\n    return Math.sin(k * Math.PI / 2);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  sinusoidalInOut: function (k) {\n    return 0.5 * (1 - Math.cos(Math.PI * k));\n  },\n  // 2^t\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  exponentialIn: function (k) {\n    return k === 0 ? 0 : Math.pow(1024, k - 1);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  exponentialOut: function (k) {\n    return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  exponentialInOut: function (k) {\n    if (k === 0) {\n      return 0;\n    }\n\n    if (k === 1) {\n      return 1;\n    }\n\n    if ((k *= 2) < 1) {\n      return 0.5 * Math.pow(1024, k - 1);\n    }\n\n    return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n  },\n  // sqrt(1-t^2)\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  circularIn: function (k) {\n    return 1 - Math.sqrt(1 - k * k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  circularOut: function (k) {\n    return Math.sqrt(1 - --k * k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  circularInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return -0.5 * (Math.sqrt(1 - k * k) - 1);\n    }\n\n    return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n  },\n  // \n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  elasticIn: function (k) {\n    var s;\n    var a = 0.1;\n    var p = 0.4;\n\n    if (k === 0) {\n      return 0;\n    }\n\n    if (k === 1) {\n      return 1;\n    }\n\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = p * Math.asin(1 / a) / (2 * Math.PI);\n    }\n\n    return -(a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  elasticOut: function (k) {\n    var s;\n    var a = 0.1;\n    var p = 0.4;\n\n    if (k === 0) {\n      return 0;\n    }\n\n    if (k === 1) {\n      return 1;\n    }\n\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = p * Math.asin(1 / a) / (2 * Math.PI);\n    }\n\n    return a * Math.pow(2, -10 * k) * Math.sin((k - s) * (2 * Math.PI) / p) + 1;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  elasticInOut: function (k) {\n    var s;\n    var a = 0.1;\n    var p = 0.4;\n\n    if (k === 0) {\n      return 0;\n    }\n\n    if (k === 1) {\n      return 1;\n    }\n\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = p * Math.asin(1 / a) / (2 * Math.PI);\n    }\n\n    if ((k *= 2) < 1) {\n      return -0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n    }\n\n    return a * Math.pow(2, -10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n  },\n  // \n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  backIn: function (k) {\n    var s = 1.70158;\n    return k * k * ((s + 1) * k - s);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  backOut: function (k) {\n    var s = 1.70158;\n    return --k * k * ((s + 1) * k + s) + 1;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  backInOut: function (k) {\n    var s = 1.70158 * 1.525;\n\n    if ((k *= 2) < 1) {\n      return 0.5 * (k * k * ((s + 1) * k - s));\n    }\n\n    return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n  },\n  // \n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  bounceIn: function (k) {\n    return 1 - easing.bounceOut(1 - k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  bounceOut: function (k) {\n    if (k < 1 / 2.75) {\n      return 7.5625 * k * k;\n    } else if (k < 2 / 2.75) {\n      return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n    } else if (k < 2.5 / 2.75) {\n      return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n    } else {\n      return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n    }\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  bounceInOut: function (k) {\n    if (k < 0.5) {\n      return easing.bounceIn(k * 2) * 0.5;\n    }\n\n    return easing.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n  }\n};\nvar _default = easing;\nmodule.exports = _default;","var _default = typeof window !== 'undefined' && (window.requestAnimationFrame && window.requestAnimationFrame.bind(window) || // https://github.com/ecomfe/zrender/issues/189#issuecomment-224919809\nwindow.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window) || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame) || function (func) {\n  setTimeout(func, 16);\n};\n\nmodule.exports = _default;","var dpr = 1; // If in browser environment\n\nif (typeof window !== 'undefined') {\n  dpr = Math.max(window.devicePixelRatio || 1, 1);\n}\n/**\n * config\n * @exports zrender/config\n * @author Kener (@Kener-, kener.linfeng@gmail.com)\n */\n\n/**\n * debugcatchBrushExceptiontrue\n * 0 : debug\n * 1 : \n * 2 : \n */\n\n\nvar debugMode = 0; // retina \n\nvar devicePixelRatio = dpr;\nexports.debugMode = debugMode;\nexports.devicePixelRatio = devicePixelRatio;","var _util = require(\"./util\");\n\nvar normalizeRadian = _util.normalizeRadian;\nvar PI2 = Math.PI * 2;\n/**\n * \n * @param  {number}  cx\n * @param  {number}  cy\n * @param  {number}  r\n * @param  {number}  startAngle\n * @param  {number}  endAngle\n * @param  {boolean}  anticlockwise\n * @param  {number} lineWidth\n * @param  {number}  x\n * @param  {number}  y\n * @return {Boolean}\n */\n\nfunction containStroke(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {\n  if (lineWidth === 0) {\n    return false;\n  }\n\n  var _l = lineWidth;\n  x -= cx;\n  y -= cy;\n  var d = Math.sqrt(x * x + y * y);\n\n  if (d - _l > r || d + _l < r) {\n    return false;\n  }\n\n  if (Math.abs(startAngle - endAngle) % PI2 < 1e-4) {\n    // Is a circle\n    return true;\n  }\n\n  if (anticlockwise) {\n    var tmp = startAngle;\n    startAngle = normalizeRadian(endAngle);\n    endAngle = normalizeRadian(tmp);\n  } else {\n    startAngle = normalizeRadian(startAngle);\n    endAngle = normalizeRadian(endAngle);\n  }\n\n  if (startAngle > endAngle) {\n    endAngle += PI2;\n  }\n\n  var angle = Math.atan2(y, x);\n\n  if (angle < 0) {\n    angle += PI2;\n  }\n\n  return angle >= startAngle && angle <= endAngle || angle + PI2 >= startAngle && angle + PI2 <= endAngle;\n}\n\nexports.containStroke = containStroke;","var curve = require(\"../core/curve\");\n\n/**\n * \n * @param  {number}  x0\n * @param  {number}  y0\n * @param  {number}  x1\n * @param  {number}  y1\n * @param  {number}  x2\n * @param  {number}  y2\n * @param  {number}  x3\n * @param  {number}  y3\n * @param  {number}  lineWidth\n * @param  {number}  x\n * @param  {number}  y\n * @return {boolean}\n */\nfunction containStroke(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {\n  if (lineWidth === 0) {\n    return false;\n  }\n\n  var _l = lineWidth; // Quick reject\n\n  if (y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l || y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l || x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l || x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l) {\n    return false;\n  }\n\n  var d = curve.cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);\n  return d <= _l / 2;\n}\n\nexports.containStroke = containStroke;","/**\n * \n * @param  {number}  x0\n * @param  {number}  y0\n * @param  {number}  x1\n * @param  {number}  y1\n * @param  {number}  lineWidth\n * @param  {number}  x\n * @param  {number}  y\n * @return {boolean}\n */\nfunction containStroke(x0, y0, x1, y1, lineWidth, x, y) {\n  if (lineWidth === 0) {\n    return false;\n  }\n\n  var _l = lineWidth;\n  var _a = 0;\n  var _b = x0; // Quick reject\n\n  if (y > y0 + _l && y > y1 + _l || y < y0 - _l && y < y1 - _l || x > x0 + _l && x > x1 + _l || x < x0 - _l && x < x1 - _l) {\n    return false;\n  }\n\n  if (x0 !== x1) {\n    _a = (y0 - y1) / (x0 - x1);\n    _b = (x0 * y1 - x1 * y0) / (x0 - x1);\n  } else {\n    return Math.abs(x - x0) <= _l / 2;\n  }\n\n  var tmp = _a * x - y + _b;\n\n  var _s = tmp * tmp / (_a * _a + 1);\n\n  return _s <= _l / 2 * _l / 2;\n}\n\nexports.containStroke = containStroke;","var PathProxy = require(\"../core/PathProxy\");\n\nvar line = require(\"./line\");\n\nvar cubic = require(\"./cubic\");\n\nvar quadratic = require(\"./quadratic\");\n\nvar arc = require(\"./arc\");\n\nvar _util = require(\"./util\");\n\nvar normalizeRadian = _util.normalizeRadian;\n\nvar curve = require(\"../core/curve\");\n\nvar windingLine = require(\"./windingLine\");\n\nvar CMD = PathProxy.CMD;\nvar PI2 = Math.PI * 2;\nvar EPSILON = 1e-4;\n\nfunction isAroundEqual(a, b) {\n  return Math.abs(a - b) < EPSILON;\n} // \n\n\nvar roots = [-1, -1, -1];\nvar extrema = [-1, -1];\n\nfunction swapExtrema() {\n  var tmp = extrema[0];\n  extrema[0] = extrema[1];\n  extrema[1] = tmp;\n}\n\nfunction windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x, y) {\n  // Quick reject\n  if (y > y0 && y > y1 && y > y2 && y > y3 || y < y0 && y < y1 && y < y2 && y < y3) {\n    return 0;\n  }\n\n  var nRoots = curve.cubicRootAt(y0, y1, y2, y3, y, roots);\n\n  if (nRoots === 0) {\n    return 0;\n  } else {\n    var w = 0;\n    var nExtrema = -1;\n    var y0_, y1_;\n\n    for (var i = 0; i < nRoots; i++) {\n      var t = roots[i]; // Avoid winding error when intersection point is the connect point of two line of polygon\n\n      var unit = t === 0 || t === 1 ? 0.5 : 1;\n      var x_ = curve.cubicAt(x0, x1, x2, x3, t);\n\n      if (x_ < x) {\n        // Quick reject\n        continue;\n      }\n\n      if (nExtrema < 0) {\n        nExtrema = curve.cubicExtrema(y0, y1, y2, y3, extrema);\n\n        if (extrema[1] < extrema[0] && nExtrema > 1) {\n          swapExtrema();\n        }\n\n        y0_ = curve.cubicAt(y0, y1, y2, y3, extrema[0]);\n\n        if (nExtrema > 1) {\n          y1_ = curve.cubicAt(y0, y1, y2, y3, extrema[1]);\n        }\n      }\n\n      if (nExtrema == 2) {\n        // \n        if (t < extrema[0]) {\n          w += y0_ < y0 ? unit : -unit;\n        } else if (t < extrema[1]) {\n          w += y1_ < y0_ ? unit : -unit;\n        } else {\n          w += y3 < y1_ ? unit : -unit;\n        }\n      } else {\n        // \n        if (t < extrema[0]) {\n          w += y0_ < y0 ? unit : -unit;\n        } else {\n          w += y3 < y0_ ? unit : -unit;\n        }\n      }\n    }\n\n    return w;\n  }\n}\n\nfunction windingQuadratic(x0, y0, x1, y1, x2, y2, x, y) {\n  // Quick reject\n  if (y > y0 && y > y1 && y > y2 || y < y0 && y < y1 && y < y2) {\n    return 0;\n  }\n\n  var nRoots = curve.quadraticRootAt(y0, y1, y2, y, roots);\n\n  if (nRoots === 0) {\n    return 0;\n  } else {\n    var t = curve.quadraticExtremum(y0, y1, y2);\n\n    if (t >= 0 && t <= 1) {\n      var w = 0;\n      var y_ = curve.quadraticAt(y0, y1, y2, t);\n\n      for (var i = 0; i < nRoots; i++) {\n        // Remove one endpoint.\n        var unit = roots[i] === 0 || roots[i] === 1 ? 0.5 : 1;\n        var x_ = curve.quadraticAt(x0, x1, x2, roots[i]);\n\n        if (x_ < x) {\n          // Quick reject\n          continue;\n        }\n\n        if (roots[i] < t) {\n          w += y_ < y0 ? unit : -unit;\n        } else {\n          w += y2 < y_ ? unit : -unit;\n        }\n      }\n\n      return w;\n    } else {\n      // Remove one endpoint.\n      var unit = roots[0] === 0 || roots[0] === 1 ? 0.5 : 1;\n      var x_ = curve.quadraticAt(x0, x1, x2, roots[0]);\n\n      if (x_ < x) {\n        // Quick reject\n        return 0;\n      }\n\n      return y2 < y0 ? unit : -unit;\n    }\n  }\n} // TODO\n// Arc \n\n\nfunction windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y) {\n  y -= cy;\n\n  if (y > r || y < -r) {\n    return 0;\n  }\n\n  var tmp = Math.sqrt(r * r - y * y);\n  roots[0] = -tmp;\n  roots[1] = tmp;\n  var diff = Math.abs(startAngle - endAngle);\n\n  if (diff < 1e-4) {\n    return 0;\n  }\n\n  if (diff % PI2 < 1e-4) {\n    // Is a circle\n    startAngle = 0;\n    endAngle = PI2;\n    var dir = anticlockwise ? 1 : -1;\n\n    if (x >= roots[0] + cx && x <= roots[1] + cx) {\n      return dir;\n    } else {\n      return 0;\n    }\n  }\n\n  if (anticlockwise) {\n    var tmp = startAngle;\n    startAngle = normalizeRadian(endAngle);\n    endAngle = normalizeRadian(tmp);\n  } else {\n    startAngle = normalizeRadian(startAngle);\n    endAngle = normalizeRadian(endAngle);\n  }\n\n  if (startAngle > endAngle) {\n    endAngle += PI2;\n  }\n\n  var w = 0;\n\n  for (var i = 0; i < 2; i++) {\n    var x_ = roots[i];\n\n    if (x_ + cx > x) {\n      var angle = Math.atan2(y, x_);\n      var dir = anticlockwise ? 1 : -1;\n\n      if (angle < 0) {\n        angle = PI2 + angle;\n      }\n\n      if (angle >= startAngle && angle <= endAngle || angle + PI2 >= startAngle && angle + PI2 <= endAngle) {\n        if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {\n          dir = -dir;\n        }\n\n        w += dir;\n      }\n    }\n  }\n\n  return w;\n}\n\nfunction containPath(data, lineWidth, isStroke, x, y) {\n  var w = 0;\n  var xi = 0;\n  var yi = 0;\n  var x0 = 0;\n  var y0 = 0;\n\n  for (var i = 0; i < data.length;) {\n    var cmd = data[i++]; // Begin a new subpath\n\n    if (cmd === CMD.M && i > 1) {\n      // Close previous subpath\n      if (!isStroke) {\n        w += windingLine(xi, yi, x0, y0, x, y);\n      } //  subpath \n      // if (w !== 0) {\n      //     return true;\n      // }\n\n    }\n\n    if (i == 1) {\n      //  L, C, Q\n      //  previous point  point\n      //\n      //  Arc \n      xi = data[i];\n      yi = data[i + 1];\n      x0 = xi;\n      y0 = yi;\n    }\n\n    switch (cmd) {\n      case CMD.M:\n        // moveTo  subpath, \n        //  closePath \n        x0 = data[i++];\n        y0 = data[i++];\n        xi = x0;\n        yi = y0;\n        break;\n\n      case CMD.L:\n        if (isStroke) {\n          if (line.containStroke(xi, yi, data[i], data[i + 1], lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          // NOTE  L, C, Q  NaN\n          w += windingLine(xi, yi, data[i], data[i + 1], x, y) || 0;\n        }\n\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.C:\n        if (isStroke) {\n          if (cubic.containStroke(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          w += windingCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n        }\n\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.Q:\n        if (isStroke) {\n          if (quadratic.containStroke(xi, yi, data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          w += windingQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n        }\n\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.A:\n        // TODO Arc \n        var cx = data[i++];\n        var cy = data[i++];\n        var rx = data[i++];\n        var ry = data[i++];\n        var theta = data[i++];\n        var dTheta = data[i++]; // TODO Arc \n\n        var psi = data[i++];\n        var anticlockwise = 1 - data[i++];\n        var x1 = Math.cos(theta) * rx + cx;\n        var y1 = Math.sin(theta) * ry + cy; //  arc \n\n        if (i > 1) {\n          w += windingLine(xi, yi, x1, y1, x, y);\n        } else {\n          // \n          x0 = x1;\n          y0 = y1;\n        } // zr scale, x\n\n\n        var _x = (x - cx) * ry / rx + cx;\n\n        if (isStroke) {\n          if (arc.containStroke(cx, cy, ry, theta, theta + dTheta, anticlockwise, lineWidth, _x, y)) {\n            return true;\n          }\n        } else {\n          w += windingArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y);\n        }\n\n        xi = Math.cos(theta + dTheta) * rx + cx;\n        yi = Math.sin(theta + dTheta) * ry + cy;\n        break;\n\n      case CMD.R:\n        x0 = xi = data[i++];\n        y0 = yi = data[i++];\n        var width = data[i++];\n        var height = data[i++];\n        var x1 = x0 + width;\n        var y1 = y0 + height;\n\n        if (isStroke) {\n          if (line.containStroke(x0, y0, x1, y0, lineWidth, x, y) || line.containStroke(x1, y0, x1, y1, lineWidth, x, y) || line.containStroke(x1, y1, x0, y1, lineWidth, x, y) || line.containStroke(x0, y1, x0, y0, lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          // FIXME Clockwise ?\n          w += windingLine(x1, y0, x1, y1, x, y);\n          w += windingLine(x0, y1, x0, y0, x, y);\n        }\n\n        break;\n\n      case CMD.Z:\n        if (isStroke) {\n          if (line.containStroke(xi, yi, x0, y0, lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          // Close a subpath\n          w += windingLine(xi, yi, x0, y0, x, y); //  subpath \n          // FIXME subpaths may overlap\n          // if (w !== 0) {\n          //     return true;\n          // }\n        }\n\n        xi = x0;\n        yi = y0;\n        break;\n    }\n  }\n\n  if (!isStroke && !isAroundEqual(yi, y0)) {\n    w += windingLine(xi, yi, x0, y0, x, y) || 0;\n  }\n\n  return w !== 0;\n}\n\nfunction contain(pathData, x, y) {\n  return containPath(pathData, 0, false, x, y);\n}\n\nfunction containStroke(pathData, lineWidth, x, y) {\n  return containPath(pathData, lineWidth, true, x, y);\n}\n\nexports.contain = contain;\nexports.containStroke = containStroke;","var windingLine = require(\"./windingLine\");\n\nvar EPSILON = 1e-8;\n\nfunction isAroundEqual(a, b) {\n  return Math.abs(a - b) < EPSILON;\n}\n\nfunction contain(points, x, y) {\n  var w = 0;\n  var p = points[0];\n\n  if (!p) {\n    return false;\n  }\n\n  for (var i = 1; i < points.length; i++) {\n    var p2 = points[i];\n    w += windingLine(p[0], p[1], p2[0], p2[1], x, y);\n    p = p2;\n  } // Close polygon\n\n\n  var p0 = points[0];\n\n  if (!isAroundEqual(p[0], p0[0]) || !isAroundEqual(p[1], p0[1])) {\n    w += windingLine(p[0], p[1], p0[0], p0[1], x, y);\n  }\n\n  return w !== 0;\n}\n\nexports.contain = contain;","var _curve = require(\"../core/curve\");\n\nvar quadraticProjectPoint = _curve.quadraticProjectPoint;\n\n/**\n * \n * @param  {number}  x0\n * @param  {number}  y0\n * @param  {number}  x1\n * @param  {number}  y1\n * @param  {number}  x2\n * @param  {number}  y2\n * @param  {number}  lineWidth\n * @param  {number}  x\n * @param  {number}  y\n * @return {boolean}\n */\nfunction containStroke(x0, y0, x1, y1, x2, y2, lineWidth, x, y) {\n  if (lineWidth === 0) {\n    return false;\n  }\n\n  var _l = lineWidth; // Quick reject\n\n  if (y > y0 + _l && y > y1 + _l && y > y2 + _l || y < y0 - _l && y < y1 - _l && y < y2 - _l || x > x0 + _l && x > x1 + _l && x > x2 + _l || x < x0 - _l && x < x1 - _l && x < x2 - _l) {\n    return false;\n  }\n\n  var d = quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, null);\n  return d <= _l / 2;\n}\n\nexports.containStroke = containStroke;","var BoundingRect = require(\"../core/BoundingRect\");\n\nvar imageHelper = require(\"../graphic/helper/image\");\n\nvar _util = require(\"../core/util\");\n\nvar getContext = _util.getContext;\nvar extend = _util.extend;\nvar retrieve2 = _util.retrieve2;\nvar retrieve3 = _util.retrieve3;\nvar textWidthCache = {};\nvar textWidthCacheCounter = 0;\nvar TEXT_CACHE_MAX = 5000;\nvar STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\nvar DEFAULT_FONT = '12px sans-serif'; // Avoid assign to an exported variable, for transforming to cjs.\n\nvar methods = {};\n\nfunction $override(name, fn) {\n  methods[name] = fn;\n}\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @return {number} width\n */\n\n\nfunction getWidth(text, font) {\n  font = font || DEFAULT_FONT;\n  var key = text + ':' + font;\n\n  if (textWidthCache[key]) {\n    return textWidthCache[key];\n  }\n\n  var textLines = (text + '').split('\\n');\n  var width = 0;\n\n  for (var i = 0, l = textLines.length; i < l; i++) {\n    // textContain.measureText may be overrided in SVG or VML\n    width = Math.max(measureText(textLines[i], font).width, width);\n  }\n\n  if (textWidthCacheCounter > TEXT_CACHE_MAX) {\n    textWidthCacheCounter = 0;\n    textWidthCache = {};\n  }\n\n  textWidthCacheCounter++;\n  textWidthCache[key] = width;\n  return width;\n}\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @param {string} [textAlign='left']\n * @param {string} [textVerticalAlign='top']\n * @param {Array.<number>} [textPadding]\n * @param {Object} [rich]\n * @param {Object} [truncate]\n * @return {Object} {x, y, width, height, lineHeight}\n */\n\n\nfunction getBoundingRect(text, font, textAlign, textVerticalAlign, textPadding, rich, truncate) {\n  return rich ? getRichTextRect(text, font, textAlign, textVerticalAlign, textPadding, rich, truncate) : getPlainTextRect(text, font, textAlign, textVerticalAlign, textPadding, truncate);\n}\n\nfunction getPlainTextRect(text, font, textAlign, textVerticalAlign, textPadding, truncate) {\n  var contentBlock = parsePlainText(text, font, textPadding, truncate);\n  var outerWidth = getWidth(text, font);\n\n  if (textPadding) {\n    outerWidth += textPadding[1] + textPadding[3];\n  }\n\n  var outerHeight = contentBlock.outerHeight;\n  var x = adjustTextX(0, outerWidth, textAlign);\n  var y = adjustTextY(0, outerHeight, textVerticalAlign);\n  var rect = new BoundingRect(x, y, outerWidth, outerHeight);\n  rect.lineHeight = contentBlock.lineHeight;\n  return rect;\n}\n\nfunction getRichTextRect(text, font, textAlign, textVerticalAlign, textPadding, rich, truncate) {\n  var contentBlock = parseRichText(text, {\n    rich: rich,\n    truncate: truncate,\n    font: font,\n    textAlign: textAlign,\n    textPadding: textPadding\n  });\n  var outerWidth = contentBlock.outerWidth;\n  var outerHeight = contentBlock.outerHeight;\n  var x = adjustTextX(0, outerWidth, textAlign);\n  var y = adjustTextY(0, outerHeight, textVerticalAlign);\n  return new BoundingRect(x, y, outerWidth, outerHeight);\n}\n/**\n * @public\n * @param {number} x\n * @param {number} width\n * @param {string} [textAlign='left']\n * @return {number} Adjusted x.\n */\n\n\nfunction adjustTextX(x, width, textAlign) {\n  // FIXME Right to left language\n  if (textAlign === 'right') {\n    x -= width;\n  } else if (textAlign === 'center') {\n    x -= width / 2;\n  }\n\n  return x;\n}\n/**\n * @public\n * @param {number} y\n * @param {number} height\n * @param {string} [textVerticalAlign='top']\n * @return {number} Adjusted y.\n */\n\n\nfunction adjustTextY(y, height, textVerticalAlign) {\n  if (textVerticalAlign === 'middle') {\n    y -= height / 2;\n  } else if (textVerticalAlign === 'bottom') {\n    y -= height;\n  }\n\n  return y;\n}\n/**\n * @public\n * @param {stirng} textPosition\n * @param {Object} rect {x, y, width, height}\n * @param {number} distance\n * @return {Object} {x, y, textAlign, textVerticalAlign}\n */\n\n\nfunction adjustTextPositionOnRect(textPosition, rect, distance) {\n  var x = rect.x;\n  var y = rect.y;\n  var height = rect.height;\n  var width = rect.width;\n  var halfHeight = height / 2;\n  var textAlign = 'left';\n  var textVerticalAlign = 'top';\n\n  switch (textPosition) {\n    case 'left':\n      x -= distance;\n      y += halfHeight;\n      textAlign = 'right';\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'right':\n      x += distance + width;\n      y += halfHeight;\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'top':\n      x += width / 2;\n      y -= distance;\n      textAlign = 'center';\n      textVerticalAlign = 'bottom';\n      break;\n\n    case 'bottom':\n      x += width / 2;\n      y += height + distance;\n      textAlign = 'center';\n      break;\n\n    case 'inside':\n      x += width / 2;\n      y += halfHeight;\n      textAlign = 'center';\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'insideLeft':\n      x += distance;\n      y += halfHeight;\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'insideRight':\n      x += width - distance;\n      y += halfHeight;\n      textAlign = 'right';\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'insideTop':\n      x += width / 2;\n      y += distance;\n      textAlign = 'center';\n      break;\n\n    case 'insideBottom':\n      x += width / 2;\n      y += height - distance;\n      textAlign = 'center';\n      textVerticalAlign = 'bottom';\n      break;\n\n    case 'insideTopLeft':\n      x += distance;\n      y += distance;\n      break;\n\n    case 'insideTopRight':\n      x += width - distance;\n      y += distance;\n      textAlign = 'right';\n      break;\n\n    case 'insideBottomLeft':\n      x += distance;\n      y += height - distance;\n      textVerticalAlign = 'bottom';\n      break;\n\n    case 'insideBottomRight':\n      x += width - distance;\n      y += height - distance;\n      textAlign = 'right';\n      textVerticalAlign = 'bottom';\n      break;\n  }\n\n  return {\n    x: x,\n    y: y,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n/**\n * Show ellipsis if overflow.\n *\n * @public\n * @param  {string} text\n * @param  {string} containerWidth\n * @param  {string} font\n * @param  {number} [ellipsis='...']\n * @param  {Object} [options]\n * @param  {number} [options.maxIterations=3]\n * @param  {number} [options.minChar=0] If truncate result are less\n *                  then minChar, ellipsis will not show, which is\n *                  better for user hint in some cases.\n * @param  {number} [options.placeholder=''] When all truncated, use the placeholder.\n * @return {string}\n */\n\n\nfunction truncateText(text, containerWidth, font, ellipsis, options) {\n  if (!containerWidth) {\n    return '';\n  }\n\n  var textLines = (text + '').split('\\n');\n  options = prepareTruncateOptions(containerWidth, font, ellipsis, options); // FIXME\n  // It is not appropriate that every line has '...' when truncate multiple lines.\n\n  for (var i = 0, len = textLines.length; i < len; i++) {\n    textLines[i] = truncateSingleLine(textLines[i], options);\n  }\n\n  return textLines.join('\\n');\n}\n\nfunction prepareTruncateOptions(containerWidth, font, ellipsis, options) {\n  options = extend({}, options);\n  options.font = font;\n  var ellipsis = retrieve2(ellipsis, '...');\n  options.maxIterations = retrieve2(options.maxIterations, 2);\n  var minChar = options.minChar = retrieve2(options.minChar, 0); // FIXME\n  // Other languages?\n\n  options.cnCharWidth = getWidth('', font); // FIXME\n  // Consider proportional font?\n\n  var ascCharWidth = options.ascCharWidth = getWidth('a', font);\n  options.placeholder = retrieve2(options.placeholder, ''); // Example 1: minChar: 3, text: 'asdfzxcv', truncate result: 'asdf', but not: 'a...'.\n  // Example 2: minChar: 3, text: '', truncate result: '', but not: '...'.\n\n  var contentWidth = containerWidth = Math.max(0, containerWidth - 1); // Reserve some gap.\n\n  for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\n    contentWidth -= ascCharWidth;\n  }\n\n  var ellipsisWidth = getWidth(ellipsis);\n\n  if (ellipsisWidth > contentWidth) {\n    ellipsis = '';\n    ellipsisWidth = 0;\n  }\n\n  contentWidth = containerWidth - ellipsisWidth;\n  options.ellipsis = ellipsis;\n  options.ellipsisWidth = ellipsisWidth;\n  options.contentWidth = contentWidth;\n  options.containerWidth = containerWidth;\n  return options;\n}\n\nfunction truncateSingleLine(textLine, options) {\n  var containerWidth = options.containerWidth;\n  var font = options.font;\n  var contentWidth = options.contentWidth;\n\n  if (!containerWidth) {\n    return '';\n  }\n\n  var lineWidth = getWidth(textLine, font);\n\n  if (lineWidth <= containerWidth) {\n    return textLine;\n  }\n\n  for (var j = 0;; j++) {\n    if (lineWidth <= contentWidth || j >= options.maxIterations) {\n      textLine += options.ellipsis;\n      break;\n    }\n\n    var subLength = j === 0 ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth) : lineWidth > 0 ? Math.floor(textLine.length * contentWidth / lineWidth) : 0;\n    textLine = textLine.substr(0, subLength);\n    lineWidth = getWidth(textLine, font);\n  }\n\n  if (textLine === '') {\n    textLine = options.placeholder;\n  }\n\n  return textLine;\n}\n\nfunction estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {\n  var width = 0;\n  var i = 0;\n\n  for (var len = text.length; i < len && width < contentWidth; i++) {\n    var charCode = text.charCodeAt(i);\n    width += 0 <= charCode && charCode <= 127 ? ascCharWidth : cnCharWidth;\n  }\n\n  return i;\n}\n/**\n * @public\n * @param {string} font\n * @return {number} line height\n */\n\n\nfunction getLineHeight(font) {\n  // FIXME A rough approach.\n  return getWidth('', font);\n}\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @return {Object} width\n */\n\n\nfunction measureText(text, font) {\n  return methods.measureText(text, font);\n} // Avoid assign to an exported variable, for transforming to cjs.\n\n\nmethods.measureText = function (text, font) {\n  var ctx = getContext();\n  ctx.font = font || DEFAULT_FONT;\n  return ctx.measureText(text);\n};\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @param {Object} [truncate]\n * @return {Object} block: {lineHeight, lines, height, outerHeight}\n *  Notice: for performance, do not calculate outerWidth util needed.\n */\n\n\nfunction parsePlainText(text, font, padding, truncate) {\n  text != null && (text += '');\n  var lineHeight = getLineHeight(font);\n  var lines = text ? text.split('\\n') : [];\n  var height = lines.length * lineHeight;\n  var outerHeight = height;\n\n  if (padding) {\n    outerHeight += padding[0] + padding[2];\n  }\n\n  if (text && truncate) {\n    var truncOuterHeight = truncate.outerHeight;\n    var truncOuterWidth = truncate.outerWidth;\n\n    if (truncOuterHeight != null && outerHeight > truncOuterHeight) {\n      text = '';\n      lines = [];\n    } else if (truncOuterWidth != null) {\n      var options = prepareTruncateOptions(truncOuterWidth - (padding ? padding[1] + padding[3] : 0), font, truncate.ellipsis, {\n        minChar: truncate.minChar,\n        placeholder: truncate.placeholder\n      }); // FIXME\n      // It is not appropriate that every line has '...' when truncate multiple lines.\n\n      for (var i = 0, len = lines.length; i < len; i++) {\n        lines[i] = truncateSingleLine(lines[i], options);\n      }\n    }\n  }\n\n  return {\n    lines: lines,\n    height: height,\n    outerHeight: outerHeight,\n    lineHeight: lineHeight\n  };\n}\n/**\n * For example: 'some text {a|some text}other text{b|some text}xxx{c|}xxx'\n * Also consider 'bbbb{a|xxx\\nzzz}xxxx\\naaaa'.\n *\n * @public\n * @param {string} text\n * @param {Object} style\n * @return {Object} block\n * {\n *      width,\n *      height,\n *      lines: [{\n *          lineHeight,\n *          width,\n *          tokens: [[{\n *              styleName,\n *              text,\n *              width,      // include textPadding\n *              height,     // include textPadding\n *              textWidth, // pure text width\n *              textHeight, // pure text height\n *              lineHeihgt,\n *              font,\n *              textAlign,\n *              textVerticalAlign\n *          }], [...], ...]\n *      }, ...]\n * }\n * If styleName is undefined, it is plain text.\n */\n\n\nfunction parseRichText(text, style) {\n  var contentBlock = {\n    lines: [],\n    width: 0,\n    height: 0\n  };\n  text != null && (text += '');\n\n  if (!text) {\n    return contentBlock;\n  }\n\n  var lastIndex = STYLE_REG.lastIndex = 0;\n  var result;\n\n  while ((result = STYLE_REG.exec(text)) != null) {\n    var matchedIndex = result.index;\n\n    if (matchedIndex > lastIndex) {\n      pushTokens(contentBlock, text.substring(lastIndex, matchedIndex));\n    }\n\n    pushTokens(contentBlock, result[2], result[1]);\n    lastIndex = STYLE_REG.lastIndex;\n  }\n\n  if (lastIndex < text.length) {\n    pushTokens(contentBlock, text.substring(lastIndex, text.length));\n  }\n\n  var lines = contentBlock.lines;\n  var contentHeight = 0;\n  var contentWidth = 0; // For `textWidth: 100%`\n\n  var pendingList = [];\n  var stlPadding = style.textPadding;\n  var truncate = style.truncate;\n  var truncateWidth = truncate && truncate.outerWidth;\n  var truncateHeight = truncate && truncate.outerHeight;\n\n  if (stlPadding) {\n    truncateWidth != null && (truncateWidth -= stlPadding[1] + stlPadding[3]);\n    truncateHeight != null && (truncateHeight -= stlPadding[0] + stlPadding[2]);\n  } // Calculate layout info of tokens.\n\n\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i];\n    var lineHeight = 0;\n    var lineWidth = 0;\n\n    for (var j = 0; j < line.tokens.length; j++) {\n      var token = line.tokens[j];\n      var tokenStyle = token.styleName && style.rich[token.styleName] || {}; // textPadding should not inherit from style.\n\n      var textPadding = token.textPadding = tokenStyle.textPadding; // textFont has been asigned to font by `normalizeStyle`.\n\n      var font = token.font = tokenStyle.font || style.font; // textHeight can be used when textVerticalAlign is specified in token.\n\n      var tokenHeight = token.textHeight = retrieve2( // textHeight should not be inherited, consider it can be specified\n      // as box height of the block.\n      tokenStyle.textHeight, getLineHeight(font));\n      textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\n      token.height = tokenHeight;\n      token.lineHeight = retrieve3(tokenStyle.textLineHeight, style.textLineHeight, tokenHeight);\n      token.textAlign = tokenStyle && tokenStyle.textAlign || style.textAlign;\n      token.textVerticalAlign = tokenStyle && tokenStyle.textVerticalAlign || 'middle';\n\n      if (truncateHeight != null && contentHeight + token.lineHeight > truncateHeight) {\n        return {\n          lines: [],\n          width: 0,\n          height: 0\n        };\n      }\n\n      token.textWidth = getWidth(token.text, font);\n      var tokenWidth = tokenStyle.textWidth;\n      var tokenWidthNotSpecified = tokenWidth == null || tokenWidth === 'auto'; // Percent width, can be `100%`, can be used in drawing separate\n      // line when box width is needed to be auto.\n\n      if (typeof tokenWidth === 'string' && tokenWidth.charAt(tokenWidth.length - 1) === '%') {\n        token.percentWidth = tokenWidth;\n        pendingList.push(token);\n        tokenWidth = 0; // Do not truncate in this case, because there is no user case\n        // and it is too complicated.\n      } else {\n        if (tokenWidthNotSpecified) {\n          tokenWidth = token.textWidth; // FIXME: If image is not loaded and textWidth is not specified, calling\n          // `getBoundingRect()` will not get correct result.\n\n          var textBackgroundColor = tokenStyle.textBackgroundColor;\n          var bgImg = textBackgroundColor && textBackgroundColor.image; // Use cases:\n          // (1) If image is not loaded, it will be loaded at render phase and call\n          // `dirty()` and `textBackgroundColor.image` will be replaced with the loaded\n          // image, and then the right size will be calculated here at the next tick.\n          // See `graphic/helper/text.js`.\n          // (2) If image loaded, and `textBackgroundColor.image` is image src string,\n          // use `imageHelper.findExistImage` to find cached image.\n          // `imageHelper.findExistImage` will always be called here before\n          // `imageHelper.createOrUpdateImage` in `graphic/helper/text.js#renderRichText`\n          // which ensures that image will not be rendered before correct size calcualted.\n\n          if (bgImg) {\n            bgImg = imageHelper.findExistImage(bgImg);\n\n            if (imageHelper.isImageReady(bgImg)) {\n              tokenWidth = Math.max(tokenWidth, bgImg.width * tokenHeight / bgImg.height);\n            }\n          }\n        }\n\n        var paddingW = textPadding ? textPadding[1] + textPadding[3] : 0;\n        tokenWidth += paddingW;\n        var remianTruncWidth = truncateWidth != null ? truncateWidth - lineWidth : null;\n\n        if (remianTruncWidth != null && remianTruncWidth < tokenWidth) {\n          if (!tokenWidthNotSpecified || remianTruncWidth < paddingW) {\n            token.text = '';\n            token.textWidth = tokenWidth = 0;\n          } else {\n            token.text = truncateText(token.text, remianTruncWidth - paddingW, font, truncate.ellipsis, {\n              minChar: truncate.minChar\n            });\n            token.textWidth = getWidth(token.text, font);\n            tokenWidth = token.textWidth + paddingW;\n          }\n        }\n      }\n\n      lineWidth += token.width = tokenWidth;\n      tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\n    }\n\n    line.width = lineWidth;\n    line.lineHeight = lineHeight;\n    contentHeight += lineHeight;\n    contentWidth = Math.max(contentWidth, lineWidth);\n  }\n\n  contentBlock.outerWidth = contentBlock.width = retrieve2(style.textWidth, contentWidth);\n  contentBlock.outerHeight = contentBlock.height = retrieve2(style.textHeight, contentHeight);\n\n  if (stlPadding) {\n    contentBlock.outerWidth += stlPadding[1] + stlPadding[3];\n    contentBlock.outerHeight += stlPadding[0] + stlPadding[2];\n  }\n\n  for (var i = 0; i < pendingList.length; i++) {\n    var token = pendingList[i];\n    var percentWidth = token.percentWidth; // Should not base on outerWidth, because token can not be placed out of padding.\n\n    token.width = parseInt(percentWidth, 10) / 100 * contentWidth;\n  }\n\n  return contentBlock;\n}\n\nfunction pushTokens(block, str, styleName) {\n  var isEmptyStr = str === '';\n  var strs = str.split('\\n');\n  var lines = block.lines;\n\n  for (var i = 0; i < strs.length; i++) {\n    var text = strs[i];\n    var token = {\n      styleName: styleName,\n      text: text,\n      isLineHolder: !text && !isEmptyStr\n    }; // The first token should be appended to the last line.\n\n    if (!i) {\n      var tokens = (lines[lines.length - 1] || (lines[0] = {\n        tokens: []\n      })).tokens; // Consider cases:\n      // (1) ''.split('\\n') => ['', '\\n', ''], the '' at the first item\n      // (which is a placeholder) should be replaced by new token.\n      // (2) A image backage, where token likes {a|}.\n      // (3) A redundant '' will affect textAlign in line.\n      // (4) tokens with the same tplName should not be merged, because\n      // they should be displayed in different box (with border and padding).\n\n      var tokensLen = tokens.length;\n      tokensLen === 1 && tokens[0].isLineHolder ? tokens[0] = token : // Consider text is '', only insert when it is the \"lineHolder\" or\n      // \"emptyStr\". Otherwise a redundant '' will affect textAlign in line.\n      (text || !tokensLen || isEmptyStr) && tokens.push(token);\n    } // Other tokens always start a new line.\n    else {\n        // If there is '', insert it as a placeholder.\n        lines.push({\n          tokens: [token]\n        });\n      }\n  }\n}\n\nfunction makeFont(style) {\n  // FIXME in node-canvas fontWeight is before fontStyle\n  // Use `fontSize` `fontFamily` to check whether font properties are defined.\n  return (style.fontSize || style.fontFamily) && [style.fontStyle, style.fontWeight, (style.fontSize || 12) + 'px', // If font properties are defined, `fontFamily` should not be ignored.\n  style.fontFamily || 'sans-serif'].join(' ') || style.textFont || style.font;\n}\n\nexports.DEFAULT_FONT = DEFAULT_FONT;\nexports.$override = $override;\nexports.getWidth = getWidth;\nexports.getBoundingRect = getBoundingRect;\nexports.adjustTextX = adjustTextX;\nexports.adjustTextY = adjustTextY;\nexports.adjustTextPositionOnRect = adjustTextPositionOnRect;\nexports.truncateText = truncateText;\nexports.getLineHeight = getLineHeight;\nexports.measureText = measureText;\nexports.parsePlainText = parsePlainText;\nexports.parseRichText = parseRichText;\nexports.makeFont = makeFont;","var PI2 = Math.PI * 2;\n\nfunction normalizeRadian(angle) {\n  angle %= PI2;\n\n  if (angle < 0) {\n    angle += PI2;\n  }\n\n  return angle;\n}\n\nexports.normalizeRadian = normalizeRadian;","function windingLine(x0, y0, x1, y1, x, y) {\n  if (y > y0 && y > y1 || y < y0 && y < y1) {\n    return 0;\n  } // Ignore horizontal line\n\n\n  if (y1 === y0) {\n    return 0;\n  }\n\n  var dir = y1 < y0 ? 1 : -1;\n  var t = (y - y0) / (y1 - y0); // Avoid winding error when intersection point is the connect point of two line of polygon\n\n  if (t === 1 || t === 0) {\n    dir = y1 < y0 ? 0.5 : -0.5;\n  }\n\n  var x_ = t * (x1 - x0) + x0;\n  return x_ > x ? dir : 0;\n}\n\nmodule.exports = windingLine;","var zrUtil = require(\"../core/util\");\n\nvar Element = require(\"../Element\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\n/**\n * GroupGroup\n * @module zrender/graphic/Group\n * @example\n *     var Group = require('zrender/container/Group');\n *     var Circle = require('zrender/graphic/shape/Circle');\n *     var g = new Group();\n *     g.position[0] = 100;\n *     g.position[1] = 100;\n *     g.add(new Circle({\n *         style: {\n *             x: 100,\n *             y: 100,\n *             r: 20,\n *         }\n *     }));\n *     zr.add(g);\n */\n\n/**\n * @alias module:zrender/graphic/Group\n * @constructor\n * @extends module:zrender/mixin/Transformable\n * @extends module:zrender/mixin/Eventful\n */\nvar Group = function (opts) {\n  opts = opts || {};\n  Element.call(this, opts);\n\n  for (var key in opts) {\n    if (opts.hasOwnProperty(key)) {\n      this[key] = opts[key];\n    }\n  }\n\n  this._children = [];\n  this.__storage = null;\n  this.__dirty = true;\n};\n\nGroup.prototype = {\n  constructor: Group,\n  isGroup: true,\n\n  /**\n   * @type {string}\n   */\n  type: 'group',\n\n  /**\n   * \n   * @name module:/zrender/container/Group#silent\n   * @type {boolean}\n   * @default false\n   */\n  silent: false,\n\n  /**\n   * @return {Array.<module:zrender/Element>}\n   */\n  children: function () {\n    return this._children.slice();\n  },\n\n  /**\n   *  index \n   * @param  {number} idx\n   * @return {module:zrender/Element}\n   */\n  childAt: function (idx) {\n    return this._children[idx];\n  },\n\n  /**\n   * \n   * @param  {string} name\n   * @return {module:zrender/Element}\n   */\n  childOfName: function (name) {\n    var children = this._children;\n\n    for (var i = 0; i < children.length; i++) {\n      if (children[i].name === name) {\n        return children[i];\n      }\n    }\n  },\n\n  /**\n   * @return {number}\n   */\n  childCount: function () {\n    return this._children.length;\n  },\n\n  /**\n   * \n   * @param {module:zrender/Element} child\n   */\n  add: function (child) {\n    if (child && child !== this && child.parent !== this) {\n      this._children.push(child);\n\n      this._doAdd(child);\n    }\n\n    return this;\n  },\n\n  /**\n   *  nextSibling \n   * @param {module:zrender/Element} child\n   * @param {module:zrender/Element} nextSibling\n   */\n  addBefore: function (child, nextSibling) {\n    if (child && child !== this && child.parent !== this && nextSibling && nextSibling.parent === this) {\n      var children = this._children;\n      var idx = children.indexOf(nextSibling);\n\n      if (idx >= 0) {\n        children.splice(idx, 0, child);\n\n        this._doAdd(child);\n      }\n    }\n\n    return this;\n  },\n  _doAdd: function (child) {\n    if (child.parent) {\n      child.parent.remove(child);\n    }\n\n    child.parent = this;\n    var storage = this.__storage;\n    var zr = this.__zr;\n\n    if (storage && storage !== child.__storage) {\n      storage.addToStorage(child);\n\n      if (child instanceof Group) {\n        child.addChildrenToStorage(storage);\n      }\n    }\n\n    zr && zr.refresh();\n  },\n\n  /**\n   * \n   * @param {module:zrender/Element} child\n   */\n  remove: function (child) {\n    var zr = this.__zr;\n    var storage = this.__storage;\n    var children = this._children;\n    var idx = zrUtil.indexOf(children, child);\n\n    if (idx < 0) {\n      return this;\n    }\n\n    children.splice(idx, 1);\n    child.parent = null;\n\n    if (storage) {\n      storage.delFromStorage(child);\n\n      if (child instanceof Group) {\n        child.delChildrenFromStorage(storage);\n      }\n    }\n\n    zr && zr.refresh();\n    return this;\n  },\n\n  /**\n   * \n   */\n  removeAll: function () {\n    var children = this._children;\n    var storage = this.__storage;\n    var child;\n    var i;\n\n    for (i = 0; i < children.length; i++) {\n      child = children[i];\n\n      if (storage) {\n        storage.delFromStorage(child);\n\n        if (child instanceof Group) {\n          child.delChildrenFromStorage(storage);\n        }\n      }\n\n      child.parent = null;\n    }\n\n    children.length = 0;\n    return this;\n  },\n\n  /**\n   * \n   * @param  {Function} cb\n   * @param  {}   context\n   */\n  eachChild: function (cb, context) {\n    var children = this._children;\n\n    for (var i = 0; i < children.length; i++) {\n      var child = children[i];\n      cb.call(context, child, i);\n    }\n\n    return this;\n  },\n\n  /**\n   * \n   * @param  {Function} cb\n   * @param  {}   context\n   */\n  traverse: function (cb, context) {\n    for (var i = 0; i < this._children.length; i++) {\n      var child = this._children[i];\n      cb.call(context, child);\n\n      if (child.type === 'group') {\n        child.traverse(cb, context);\n      }\n    }\n\n    return this;\n  },\n  addChildrenToStorage: function (storage) {\n    for (var i = 0; i < this._children.length; i++) {\n      var child = this._children[i];\n      storage.addToStorage(child);\n\n      if (child instanceof Group) {\n        child.addChildrenToStorage(storage);\n      }\n    }\n  },\n  delChildrenFromStorage: function (storage) {\n    for (var i = 0; i < this._children.length; i++) {\n      var child = this._children[i];\n      storage.delFromStorage(child);\n\n      if (child instanceof Group) {\n        child.delChildrenFromStorage(storage);\n      }\n    }\n  },\n  dirty: function () {\n    this.__dirty = true;\n    this.__zr && this.__zr.refresh();\n    return this;\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getBoundingRect: function (includeChildren) {\n    // TODO Caching\n    var rect = null;\n    var tmpRect = new BoundingRect(0, 0, 0, 0);\n    var children = includeChildren || this._children;\n    var tmpMat = [];\n\n    for (var i = 0; i < children.length; i++) {\n      var child = children[i];\n\n      if (child.ignore || child.invisible) {\n        continue;\n      }\n\n      var childRect = child.getBoundingRect();\n      var transform = child.getLocalTransform(tmpMat); // TODO\n      // The boundingRect cacluated by transforming original\n      // rect may be bigger than the actual bundingRect when rotation\n      // is used. (Consider a circle rotated aginst its center, where\n      // the actual boundingRect should be the same as that not be\n      // rotated.) But we can not find better approach to calculate\n      // actual boundingRect yet, considering performance.\n\n      if (transform) {\n        tmpRect.copy(childRect);\n        tmpRect.applyTransform(transform);\n        rect = rect || tmpRect.clone();\n        rect.union(tmpRect);\n      } else {\n        rect = rect || childRect.clone();\n        rect.union(childRect);\n      }\n    }\n\n    return rect || tmpRect;\n  }\n};\nzrUtil.inherits(Group, Element);\nvar _default = Group;\nmodule.exports = _default;","var vec2 = require(\"./vector\");\n\nvar matrix = require(\"./matrix\");\n\n/**\n * @module echarts/core/BoundingRect\n */\nvar v2ApplyTransform = vec2.applyTransform;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\n/**\n * @alias module:echarts/core/BoundingRect\n */\n\nfunction BoundingRect(x, y, width, height) {\n  if (width < 0) {\n    x = x + width;\n    width = -width;\n  }\n\n  if (height < 0) {\n    y = y + height;\n    height = -height;\n  }\n  /**\n   * @type {number}\n   */\n\n\n  this.x = x;\n  /**\n   * @type {number}\n   */\n\n  this.y = y;\n  /**\n   * @type {number}\n   */\n\n  this.width = width;\n  /**\n   * @type {number}\n   */\n\n  this.height = height;\n}\n\nBoundingRect.prototype = {\n  constructor: BoundingRect,\n\n  /**\n   * @param {module:echarts/core/BoundingRect} other\n   */\n  union: function (other) {\n    var x = mathMin(other.x, this.x);\n    var y = mathMin(other.y, this.y);\n    this.width = mathMax(other.x + other.width, this.x + this.width) - x;\n    this.height = mathMax(other.y + other.height, this.y + this.height) - y;\n    this.x = x;\n    this.y = y;\n  },\n\n  /**\n   * @param {Array.<number>} m\n   * @methods\n   */\n  applyTransform: function () {\n    var lt = [];\n    var rb = [];\n    var lb = [];\n    var rt = [];\n    return function (m) {\n      // In case usage like this\n      // el.getBoundingRect().applyTransform(el.transform)\n      // And element has no transform\n      if (!m) {\n        return;\n      }\n\n      lt[0] = lb[0] = this.x;\n      lt[1] = rt[1] = this.y;\n      rb[0] = rt[0] = this.x + this.width;\n      rb[1] = lb[1] = this.y + this.height;\n      v2ApplyTransform(lt, lt, m);\n      v2ApplyTransform(rb, rb, m);\n      v2ApplyTransform(lb, lb, m);\n      v2ApplyTransform(rt, rt, m);\n      this.x = mathMin(lt[0], rb[0], lb[0], rt[0]);\n      this.y = mathMin(lt[1], rb[1], lb[1], rt[1]);\n      var maxX = mathMax(lt[0], rb[0], lb[0], rt[0]);\n      var maxY = mathMax(lt[1], rb[1], lb[1], rt[1]);\n      this.width = maxX - this.x;\n      this.height = maxY - this.y;\n    };\n  }(),\n\n  /**\n   * Calculate matrix of transforming from self to target rect\n   * @param  {module:zrender/core/BoundingRect} b\n   * @return {Array.<number>}\n   */\n  calculateTransform: function (b) {\n    var a = this;\n    var sx = b.width / a.width;\n    var sy = b.height / a.height;\n    var m = matrix.create(); // \n\n    matrix.translate(m, m, [-a.x, -a.y]);\n    matrix.scale(m, m, [sx, sy]);\n    matrix.translate(m, m, [b.x, b.y]);\n    return m;\n  },\n\n  /**\n   * @param {(module:echarts/core/BoundingRect|Object)} b\n   * @return {boolean}\n   */\n  intersect: function (b) {\n    if (!b) {\n      return false;\n    }\n\n    if (!(b instanceof BoundingRect)) {\n      // Normalize negative width/height.\n      b = BoundingRect.create(b);\n    }\n\n    var a = this;\n    var ax0 = a.x;\n    var ax1 = a.x + a.width;\n    var ay0 = a.y;\n    var ay1 = a.y + a.height;\n    var bx0 = b.x;\n    var bx1 = b.x + b.width;\n    var by0 = b.y;\n    var by1 = b.y + b.height;\n    return !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\n  },\n  contain: function (x, y) {\n    var rect = this;\n    return x >= rect.x && x <= rect.x + rect.width && y >= rect.y && y <= rect.y + rect.height;\n  },\n\n  /**\n   * @return {module:echarts/core/BoundingRect}\n   */\n  clone: function () {\n    return new BoundingRect(this.x, this.y, this.width, this.height);\n  },\n\n  /**\n   * Copy from another rect\n   */\n  copy: function (other) {\n    this.x = other.x;\n    this.y = other.y;\n    this.width = other.width;\n    this.height = other.height;\n  },\n  plain: function () {\n    return {\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height\n    };\n  }\n};\n/**\n * @param {Object|module:zrender/core/BoundingRect} rect\n * @param {number} rect.x\n * @param {number} rect.y\n * @param {number} rect.width\n * @param {number} rect.height\n * @return {module:zrender/core/BoundingRect}\n */\n\nBoundingRect.create = function (rect) {\n  return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\n};\n\nvar _default = BoundingRect;\nmodule.exports = _default;","var eventUtil = require(\"./event\");\n\n/**\n * Only implements needed gestures for mobile.\n */\nvar GestureMgr = function () {\n  /**\n   * @private\n   * @type {Array.<Object>}\n   */\n  this._track = [];\n};\n\nGestureMgr.prototype = {\n  constructor: GestureMgr,\n  recognize: function (event, target, root) {\n    this._doTrack(event, target, root);\n\n    return this._recognize(event);\n  },\n  clear: function () {\n    this._track.length = 0;\n    return this;\n  },\n  _doTrack: function (event, target, root) {\n    var touches = event.touches;\n\n    if (!touches) {\n      return;\n    }\n\n    var trackItem = {\n      points: [],\n      touches: [],\n      target: target,\n      event: event\n    };\n\n    for (var i = 0, len = touches.length; i < len; i++) {\n      var touch = touches[i];\n      var pos = eventUtil.clientToLocal(root, touch, {});\n      trackItem.points.push([pos.zrX, pos.zrY]);\n      trackItem.touches.push(touch);\n    }\n\n    this._track.push(trackItem);\n  },\n  _recognize: function (event) {\n    for (var eventName in recognizers) {\n      if (recognizers.hasOwnProperty(eventName)) {\n        var gestureInfo = recognizers[eventName](this._track, event);\n\n        if (gestureInfo) {\n          return gestureInfo;\n        }\n      }\n    }\n  }\n};\n\nfunction dist(pointPair) {\n  var dx = pointPair[1][0] - pointPair[0][0];\n  var dy = pointPair[1][1] - pointPair[0][1];\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nfunction center(pointPair) {\n  return [(pointPair[0][0] + pointPair[1][0]) / 2, (pointPair[0][1] + pointPair[1][1]) / 2];\n}\n\nvar recognizers = {\n  pinch: function (track, event) {\n    var trackLen = track.length;\n\n    if (!trackLen) {\n      return;\n    }\n\n    var pinchEnd = (track[trackLen - 1] || {}).points;\n    var pinchPre = (track[trackLen - 2] || {}).points || pinchEnd;\n\n    if (pinchPre && pinchPre.length > 1 && pinchEnd && pinchEnd.length > 1) {\n      var pinchScale = dist(pinchEnd) / dist(pinchPre);\n      !isFinite(pinchScale) && (pinchScale = 1);\n      event.pinchScale = pinchScale;\n      var pinchCenter = center(pinchEnd);\n      event.pinchX = pinchCenter[0];\n      event.pinchY = pinchCenter[1];\n      return {\n        type: 'pinch',\n        target: track[0].target,\n        event: event\n      };\n    }\n  } // Only pinch currently.\n\n};\nvar _default = GestureMgr;\nmodule.exports = _default;","// Simple LRU cache use doubly linked list\n// @module zrender/core/LRU\n\n/**\n * Simple double linked list. Compared with array, it has O(1) remove operation.\n * @constructor\n */\nvar LinkedList = function () {\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n  this.head = null;\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n\n  this.tail = null;\n  this._len = 0;\n};\n\nvar linkedListProto = LinkedList.prototype;\n/**\n * Insert a new value at the tail\n * @param  {} val\n * @return {module:zrender/core/LRU~Entry}\n */\n\nlinkedListProto.insert = function (val) {\n  var entry = new Entry(val);\n  this.insertEntry(entry);\n  return entry;\n};\n/**\n * Insert an entry at the tail\n * @param  {module:zrender/core/LRU~Entry} entry\n */\n\n\nlinkedListProto.insertEntry = function (entry) {\n  if (!this.head) {\n    this.head = this.tail = entry;\n  } else {\n    this.tail.next = entry;\n    entry.prev = this.tail;\n    entry.next = null;\n    this.tail = entry;\n  }\n\n  this._len++;\n};\n/**\n * Remove entry.\n * @param  {module:zrender/core/LRU~Entry} entry\n */\n\n\nlinkedListProto.remove = function (entry) {\n  var prev = entry.prev;\n  var next = entry.next;\n\n  if (prev) {\n    prev.next = next;\n  } else {\n    // Is head\n    this.head = next;\n  }\n\n  if (next) {\n    next.prev = prev;\n  } else {\n    // Is tail\n    this.tail = prev;\n  }\n\n  entry.next = entry.prev = null;\n  this._len--;\n};\n/**\n * @return {number}\n */\n\n\nlinkedListProto.len = function () {\n  return this._len;\n};\n/**\n * Clear list\n */\n\n\nlinkedListProto.clear = function () {\n  this.head = this.tail = null;\n  this._len = 0;\n};\n/**\n * @constructor\n * @param {} val\n */\n\n\nvar Entry = function (val) {\n  /**\n   * @type {}\n   */\n  this.value = val;\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n\n  this.next;\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n\n  this.prev;\n};\n/**\n * LRU Cache\n * @constructor\n * @alias module:zrender/core/LRU\n */\n\n\nvar LRU = function (maxSize) {\n  this._list = new LinkedList();\n  this._map = {};\n  this._maxSize = maxSize || 10;\n  this._lastRemovedEntry = null;\n};\n\nvar LRUProto = LRU.prototype;\n/**\n * @param  {string} key\n * @param  {} value\n * @return {} Removed value\n */\n\nLRUProto.put = function (key, value) {\n  var list = this._list;\n  var map = this._map;\n  var removed = null;\n\n  if (map[key] == null) {\n    var len = list.len(); // Reuse last removed entry\n\n    var entry = this._lastRemovedEntry;\n\n    if (len >= this._maxSize && len > 0) {\n      // Remove the least recently used\n      var leastUsedEntry = list.head;\n      list.remove(leastUsedEntry);\n      delete map[leastUsedEntry.key];\n      removed = leastUsedEntry.value;\n      this._lastRemovedEntry = leastUsedEntry;\n    }\n\n    if (entry) {\n      entry.value = value;\n    } else {\n      entry = new Entry(value);\n    }\n\n    entry.key = key;\n    list.insertEntry(entry);\n    map[key] = entry;\n  }\n\n  return removed;\n};\n/**\n * @param  {string} key\n * @return {}\n */\n\n\nLRUProto.get = function (key) {\n  var entry = this._map[key];\n  var list = this._list;\n\n  if (entry != null) {\n    // Put the latest used entry in the tail\n    if (entry !== list.tail) {\n      list.remove(entry);\n      list.insertEntry(entry);\n    }\n\n    return entry.value;\n  }\n};\n/**\n * Clear the cache\n */\n\n\nLRUProto.clear = function () {\n  this._list.clear();\n\n  this._map = {};\n};\n\nvar _default = LRU;\nmodule.exports = _default;","var curve = require(\"./curve\");\n\nvar vec2 = require(\"./vector\");\n\nvar bbox = require(\"./bbox\");\n\nvar BoundingRect = require(\"./BoundingRect\");\n\nvar _config = require(\"../config\");\n\nvar dpr = _config.devicePixelRatio;\n\n/**\n * Path `buildPath``ctx`, pathpathCommands\n *  isInsidePath boundingRect\n *\n * @module zrender/core/PathProxy\n * @author Yi Shen (http://www.github.com/pissang)\n */\n// TODO getTotalLength, getPointAtLength\nvar CMD = {\n  M: 1,\n  L: 2,\n  C: 3,\n  Q: 4,\n  A: 5,\n  Z: 6,\n  // Rect\n  R: 7\n}; // var CMD_MEM_SIZE = {\n//     M: 3,\n//     L: 3,\n//     C: 7,\n//     Q: 5,\n//     A: 9,\n//     R: 5,\n//     Z: 1\n// };\n\nvar min = [];\nvar max = [];\nvar min2 = [];\nvar max2 = [];\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathCos = Math.cos;\nvar mathSin = Math.sin;\nvar mathSqrt = Math.sqrt;\nvar mathAbs = Math.abs;\nvar hasTypedArray = typeof Float32Array != 'undefined';\n/**\n * @alias module:zrender/core/PathProxy\n * @constructor\n */\n\nvar PathProxy = function (notSaveData) {\n  this._saveData = !(notSaveData || false);\n\n  if (this._saveData) {\n    /**\n     * Path data. Stored as flat array\n     * @type {Array.<Object>}\n     */\n    this.data = [];\n  }\n\n  this._ctx = null;\n};\n/**\n * Path\n * @return {Object}\n */\n\n\nPathProxy.prototype = {\n  constructor: PathProxy,\n  _xi: 0,\n  _yi: 0,\n  _x0: 0,\n  _y0: 0,\n  // Unit x, Unit y. Provide for avoiding drawing that too short line segment\n  _ux: 0,\n  _uy: 0,\n  _len: 0,\n  _lineDash: null,\n  _dashOffset: 0,\n  _dashIdx: 0,\n  _dashSum: 0,\n\n  /**\n   * @readOnly\n   */\n  setScale: function (sx, sy) {\n    this._ux = mathAbs(1 / dpr / sx) || 0;\n    this._uy = mathAbs(1 / dpr / sy) || 0;\n  },\n  getContext: function () {\n    return this._ctx;\n  },\n\n  /**\n   * @param  {CanvasRenderingContext2D} ctx\n   * @return {module:zrender/core/PathProxy}\n   */\n  beginPath: function (ctx) {\n    this._ctx = ctx;\n    ctx && ctx.beginPath();\n    ctx && (this.dpr = ctx.dpr); // Reset\n\n    if (this._saveData) {\n      this._len = 0;\n    }\n\n    if (this._lineDash) {\n      this._lineDash = null;\n      this._dashOffset = 0;\n    }\n\n    return this;\n  },\n\n  /**\n   * @param  {number} x\n   * @param  {number} y\n   * @return {module:zrender/core/PathProxy}\n   */\n  moveTo: function (x, y) {\n    this.addData(CMD.M, x, y);\n    this._ctx && this._ctx.moveTo(x, y); // x0, y0, xi, yi  _dashedXXXXTo \n    // xi, yi , x0, y0  closePath \n    //  beginPath  lineTo x0, y0 \n    //  lineTo dashed line  IE10- \n\n    this._x0 = x;\n    this._y0 = y;\n    this._xi = x;\n    this._yi = y;\n    return this;\n  },\n\n  /**\n   * @param  {number} x\n   * @param  {number} y\n   * @return {module:zrender/core/PathProxy}\n   */\n  lineTo: function (x, y) {\n    var exceedUnit = mathAbs(x - this._xi) > this._ux || mathAbs(y - this._yi) > this._uy // Force draw the first segment\n    || this._len < 5;\n    this.addData(CMD.L, x, y);\n\n    if (this._ctx && exceedUnit) {\n      this._needsDash() ? this._dashedLineTo(x, y) : this._ctx.lineTo(x, y);\n    }\n\n    if (exceedUnit) {\n      this._xi = x;\n      this._yi = y;\n    }\n\n    return this;\n  },\n\n  /**\n   * @param  {number} x1\n   * @param  {number} y1\n   * @param  {number} x2\n   * @param  {number} y2\n   * @param  {number} x3\n   * @param  {number} y3\n   * @return {module:zrender/core/PathProxy}\n   */\n  bezierCurveTo: function (x1, y1, x2, y2, x3, y3) {\n    this.addData(CMD.C, x1, y1, x2, y2, x3, y3);\n\n    if (this._ctx) {\n      this._needsDash() ? this._dashedBezierTo(x1, y1, x2, y2, x3, y3) : this._ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n    }\n\n    this._xi = x3;\n    this._yi = y3;\n    return this;\n  },\n\n  /**\n   * @param  {number} x1\n   * @param  {number} y1\n   * @param  {number} x2\n   * @param  {number} y2\n   * @return {module:zrender/core/PathProxy}\n   */\n  quadraticCurveTo: function (x1, y1, x2, y2) {\n    this.addData(CMD.Q, x1, y1, x2, y2);\n\n    if (this._ctx) {\n      this._needsDash() ? this._dashedQuadraticTo(x1, y1, x2, y2) : this._ctx.quadraticCurveTo(x1, y1, x2, y2);\n    }\n\n    this._xi = x2;\n    this._yi = y2;\n    return this;\n  },\n\n  /**\n   * @param  {number} cx\n   * @param  {number} cy\n   * @param  {number} r\n   * @param  {number} startAngle\n   * @param  {number} endAngle\n   * @param  {boolean} anticlockwise\n   * @return {module:zrender/core/PathProxy}\n   */\n  arc: function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n    this.addData(CMD.A, cx, cy, r, r, startAngle, endAngle - startAngle, 0, anticlockwise ? 0 : 1);\n    this._ctx && this._ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n    this._xi = mathCos(endAngle) * r + cx;\n    this._yi = mathSin(endAngle) * r + cx;\n    return this;\n  },\n  // TODO\n  arcTo: function (x1, y1, x2, y2, radius) {\n    if (this._ctx) {\n      this._ctx.arcTo(x1, y1, x2, y2, radius);\n    }\n\n    return this;\n  },\n  // TODO\n  rect: function (x, y, w, h) {\n    this._ctx && this._ctx.rect(x, y, w, h);\n    this.addData(CMD.R, x, y, w, h);\n    return this;\n  },\n\n  /**\n   * @return {module:zrender/core/PathProxy}\n   */\n  closePath: function () {\n    this.addData(CMD.Z);\n    var ctx = this._ctx;\n    var x0 = this._x0;\n    var y0 = this._y0;\n\n    if (ctx) {\n      this._needsDash() && this._dashedLineTo(x0, y0);\n      ctx.closePath();\n    }\n\n    this._xi = x0;\n    this._yi = y0;\n    return this;\n  },\n\n  /**\n   * Context  rebuildPath  fill\n   * stroke \n   * @param {CanvasRenderingContext2D} ctx\n   * @return {module:zrender/core/PathProxy}\n   */\n  fill: function (ctx) {\n    ctx && ctx.fill();\n    this.toStatic();\n  },\n\n  /**\n   * @param {CanvasRenderingContext2D} ctx\n   * @return {module:zrender/core/PathProxy}\n   */\n  stroke: function (ctx) {\n    ctx && ctx.stroke();\n    this.toStatic();\n  },\n\n  /**\n   * \n   * Must be invoked before all other path drawing methods\n   * @return {module:zrender/core/PathProxy}\n   */\n  setLineDash: function (lineDash) {\n    if (lineDash instanceof Array) {\n      this._lineDash = lineDash;\n      this._dashIdx = 0;\n      var lineDashSum = 0;\n\n      for (var i = 0; i < lineDash.length; i++) {\n        lineDashSum += lineDash[i];\n      }\n\n      this._dashSum = lineDashSum;\n    }\n\n    return this;\n  },\n\n  /**\n   * \n   * Must be invoked before all other path drawing methods\n   * @return {module:zrender/core/PathProxy}\n   */\n  setLineDashOffset: function (offset) {\n    this._dashOffset = offset;\n    return this;\n  },\n\n  /**\n   *\n   * @return {boolean}\n   */\n  len: function () {\n    return this._len;\n  },\n\n  /**\n   *  Path \n   */\n  setData: function (data) {\n    var len = data.length;\n\n    if (!(this.data && this.data.length == len) && hasTypedArray) {\n      this.data = new Float32Array(len);\n    }\n\n    for (var i = 0; i < len; i++) {\n      this.data[i] = data[i];\n    }\n\n    this._len = len;\n  },\n\n  /**\n   * \n   * @param {module:zrender/core/PathProxy|Array.<module:zrender/core/PathProxy>} path\n   */\n  appendPath: function (path) {\n    if (!(path instanceof Array)) {\n      path = [path];\n    }\n\n    var len = path.length;\n    var appendSize = 0;\n    var offset = this._len;\n\n    for (var i = 0; i < len; i++) {\n      appendSize += path[i].len();\n    }\n\n    if (hasTypedArray && this.data instanceof Float32Array) {\n      this.data = new Float32Array(offset + appendSize);\n    }\n\n    for (var i = 0; i < len; i++) {\n      var appendPathData = path[i].data;\n\n      for (var k = 0; k < appendPathData.length; k++) {\n        this.data[offset++] = appendPathData[k];\n      }\n    }\n\n    this._len = offset;\n  },\n\n  /**\n   *  Path \n   * \n   */\n  addData: function (cmd) {\n    if (!this._saveData) {\n      return;\n    }\n\n    var data = this.data;\n\n    if (this._len + arguments.length > data.length) {\n      //  Float32Array\n      // \n      this._expandData();\n\n      data = this.data;\n    }\n\n    for (var i = 0; i < arguments.length; i++) {\n      data[this._len++] = arguments[i];\n    }\n\n    this._prevCmd = cmd;\n  },\n  _expandData: function () {\n    // Only if data is Float32Array\n    if (!(this.data instanceof Array)) {\n      var newData = [];\n\n      for (var i = 0; i < this._len; i++) {\n        newData[i] = this.data[i];\n      }\n\n      this.data = newData;\n    }\n  },\n\n  /**\n   * If needs js implemented dashed line\n   * @return {boolean}\n   * @private\n   */\n  _needsDash: function () {\n    return this._lineDash;\n  },\n  _dashedLineTo: function (x1, y1) {\n    var dashSum = this._dashSum;\n    var offset = this._dashOffset;\n    var lineDash = this._lineDash;\n    var ctx = this._ctx;\n    var x0 = this._xi;\n    var y0 = this._yi;\n    var dx = x1 - x0;\n    var dy = y1 - y0;\n    var dist = mathSqrt(dx * dx + dy * dy);\n    var x = x0;\n    var y = y0;\n    var dash;\n    var nDash = lineDash.length;\n    var idx;\n    dx /= dist;\n    dy /= dist;\n\n    if (offset < 0) {\n      // Convert to positive offset\n      offset = dashSum + offset;\n    }\n\n    offset %= dashSum;\n    x -= offset * dx;\n    y -= offset * dy;\n\n    while (dx > 0 && x <= x1 || dx < 0 && x >= x1 || dx == 0 && (dy > 0 && y <= y1 || dy < 0 && y >= y1)) {\n      idx = this._dashIdx;\n      dash = lineDash[idx];\n      x += dx * dash;\n      y += dy * dash;\n      this._dashIdx = (idx + 1) % nDash; // Skip positive offset\n\n      if (dx > 0 && x < x0 || dx < 0 && x > x0 || dy > 0 && y < y0 || dy < 0 && y > y0) {\n        continue;\n      }\n\n      ctx[idx % 2 ? 'moveTo' : 'lineTo'](dx >= 0 ? mathMin(x, x1) : mathMax(x, x1), dy >= 0 ? mathMin(y, y1) : mathMax(y, y1));\n    } // Offset for next lineTo\n\n\n    dx = x - x1;\n    dy = y - y1;\n    this._dashOffset = -mathSqrt(dx * dx + dy * dy);\n  },\n  // Not accurate dashed line to\n  _dashedBezierTo: function (x1, y1, x2, y2, x3, y3) {\n    var dashSum = this._dashSum;\n    var offset = this._dashOffset;\n    var lineDash = this._lineDash;\n    var ctx = this._ctx;\n    var x0 = this._xi;\n    var y0 = this._yi;\n    var t;\n    var dx;\n    var dy;\n    var cubicAt = curve.cubicAt;\n    var bezierLen = 0;\n    var idx = this._dashIdx;\n    var nDash = lineDash.length;\n    var x;\n    var y;\n    var tmpLen = 0;\n\n    if (offset < 0) {\n      // Convert to positive offset\n      offset = dashSum + offset;\n    }\n\n    offset %= dashSum; // Bezier approx length\n\n    for (t = 0; t < 1; t += 0.1) {\n      dx = cubicAt(x0, x1, x2, x3, t + 0.1) - cubicAt(x0, x1, x2, x3, t);\n      dy = cubicAt(y0, y1, y2, y3, t + 0.1) - cubicAt(y0, y1, y2, y3, t);\n      bezierLen += mathSqrt(dx * dx + dy * dy);\n    } // Find idx after add offset\n\n\n    for (; idx < nDash; idx++) {\n      tmpLen += lineDash[idx];\n\n      if (tmpLen > offset) {\n        break;\n      }\n    }\n\n    t = (tmpLen - offset) / bezierLen;\n\n    while (t <= 1) {\n      x = cubicAt(x0, x1, x2, x3, t);\n      y = cubicAt(y0, y1, y2, y3, t); // Use line to approximate dashed bezier\n      // Bad result if dash is long\n\n      idx % 2 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);\n      t += lineDash[idx] / bezierLen;\n      idx = (idx + 1) % nDash;\n    } // Finish the last segment and calculate the new offset\n\n\n    idx % 2 !== 0 && ctx.lineTo(x3, y3);\n    dx = x3 - x;\n    dy = y3 - y;\n    this._dashOffset = -mathSqrt(dx * dx + dy * dy);\n  },\n  _dashedQuadraticTo: function (x1, y1, x2, y2) {\n    // Convert quadratic to cubic using degree elevation\n    var x3 = x2;\n    var y3 = y2;\n    x2 = (x2 + 2 * x1) / 3;\n    y2 = (y2 + 2 * y1) / 3;\n    x1 = (this._xi + 2 * x1) / 3;\n    y1 = (this._yi + 2 * y1) / 3;\n\n    this._dashedBezierTo(x1, y1, x2, y2, x3, y3);\n  },\n\n  /**\n   *  Float32Array \n   * Convert dynamic array to static Float32Array\n   */\n  toStatic: function () {\n    var data = this.data;\n\n    if (data instanceof Array) {\n      data.length = this._len;\n\n      if (hasTypedArray) {\n        this.data = new Float32Array(data);\n      }\n    }\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getBoundingRect: function () {\n    min[0] = min[1] = min2[0] = min2[1] = Number.MAX_VALUE;\n    max[0] = max[1] = max2[0] = max2[1] = -Number.MAX_VALUE;\n    var data = this.data;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n\n    for (var i = 0; i < data.length;) {\n      var cmd = data[i++];\n\n      if (i == 1) {\n        //  L, C, Q\n        //  previous point  point\n        //\n        //  Arc \n        xi = data[i];\n        yi = data[i + 1];\n        x0 = xi;\n        y0 = yi;\n      }\n\n      switch (cmd) {\n        case CMD.M:\n          // moveTo  subpath, \n          //  closePath \n          x0 = data[i++];\n          y0 = data[i++];\n          xi = x0;\n          yi = y0;\n          min2[0] = x0;\n          min2[1] = y0;\n          max2[0] = x0;\n          max2[1] = y0;\n          break;\n\n        case CMD.L:\n          bbox.fromLine(xi, yi, data[i], data[i + 1], min2, max2);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD.C:\n          bbox.fromCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], min2, max2);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD.Q:\n          bbox.fromQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], min2, max2);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD.A:\n          // TODO Arc \n          var cx = data[i++];\n          var cy = data[i++];\n          var rx = data[i++];\n          var ry = data[i++];\n          var startAngle = data[i++];\n          var endAngle = data[i++] + startAngle; // TODO Arc \n\n          var psi = data[i++];\n          var anticlockwise = 1 - data[i++];\n\n          if (i == 1) {\n            //  arc \n            // \n            x0 = mathCos(startAngle) * rx + cx;\n            y0 = mathSin(startAngle) * ry + cy;\n          }\n\n          bbox.fromArc(cx, cy, rx, ry, startAngle, endAngle, anticlockwise, min2, max2);\n          xi = mathCos(endAngle) * rx + cx;\n          yi = mathSin(endAngle) * ry + cy;\n          break;\n\n        case CMD.R:\n          x0 = xi = data[i++];\n          y0 = yi = data[i++];\n          var width = data[i++];\n          var height = data[i++]; // Use fromLine\n\n          bbox.fromLine(x0, y0, x0 + width, y0 + height, min2, max2);\n          break;\n\n        case CMD.Z:\n          xi = x0;\n          yi = y0;\n          break;\n      } // Union\n\n\n      vec2.min(min, min, min2);\n      vec2.max(max, max, max2);\n    } // No data\n\n\n    if (i === 0) {\n      min[0] = min[1] = max[0] = max[1] = 0;\n    }\n\n    return new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n  },\n\n  /**\n   * Rebuild path from current data\n   * Rebuild path will not consider javascript implemented line dash.\n   * @param {CanvasRenderingContext2D} ctx\n   */\n  rebuildPath: function (ctx) {\n    var d = this.data;\n    var x0, y0;\n    var xi, yi;\n    var x, y;\n    var ux = this._ux;\n    var uy = this._uy;\n    var len = this._len;\n\n    for (var i = 0; i < len;) {\n      var cmd = d[i++];\n\n      if (i == 1) {\n        //  L, C, Q\n        //  previous point  point\n        //\n        //  Arc \n        xi = d[i];\n        yi = d[i + 1];\n        x0 = xi;\n        y0 = yi;\n      }\n\n      switch (cmd) {\n        case CMD.M:\n          x0 = xi = d[i++];\n          y0 = yi = d[i++];\n          ctx.moveTo(xi, yi);\n          break;\n\n        case CMD.L:\n          x = d[i++];\n          y = d[i++]; // Not draw too small seg between\n\n          if (mathAbs(x - xi) > ux || mathAbs(y - yi) > uy || i === len - 1) {\n            ctx.lineTo(x, y);\n            xi = x;\n            yi = y;\n          }\n\n          break;\n\n        case CMD.C:\n          ctx.bezierCurveTo(d[i++], d[i++], d[i++], d[i++], d[i++], d[i++]);\n          xi = d[i - 2];\n          yi = d[i - 1];\n          break;\n\n        case CMD.Q:\n          ctx.quadraticCurveTo(d[i++], d[i++], d[i++], d[i++]);\n          xi = d[i - 2];\n          yi = d[i - 1];\n          break;\n\n        case CMD.A:\n          var cx = d[i++];\n          var cy = d[i++];\n          var rx = d[i++];\n          var ry = d[i++];\n          var theta = d[i++];\n          var dTheta = d[i++];\n          var psi = d[i++];\n          var fs = d[i++];\n          var r = rx > ry ? rx : ry;\n          var scaleX = rx > ry ? 1 : rx / ry;\n          var scaleY = rx > ry ? ry / rx : 1;\n          var isEllipse = Math.abs(rx - ry) > 1e-3;\n          var endAngle = theta + dTheta;\n\n          if (isEllipse) {\n            ctx.translate(cx, cy);\n            ctx.rotate(psi);\n            ctx.scale(scaleX, scaleY);\n            ctx.arc(0, 0, r, theta, endAngle, 1 - fs);\n            ctx.scale(1 / scaleX, 1 / scaleY);\n            ctx.rotate(-psi);\n            ctx.translate(-cx, -cy);\n          } else {\n            ctx.arc(cx, cy, r, theta, endAngle, 1 - fs);\n          }\n\n          if (i == 1) {\n            //  arc \n            // \n            x0 = mathCos(theta) * rx + cx;\n            y0 = mathSin(theta) * ry + cy;\n          }\n\n          xi = mathCos(endAngle) * rx + cx;\n          yi = mathSin(endAngle) * ry + cy;\n          break;\n\n        case CMD.R:\n          x0 = xi = d[i];\n          y0 = yi = d[i + 1];\n          ctx.rect(d[i++], d[i++], d[i++], d[i++]);\n          break;\n\n        case CMD.Z:\n          ctx.closePath();\n          xi = x0;\n          yi = y0;\n      }\n    }\n  }\n};\nPathProxy.CMD = CMD;\nvar _default = PathProxy;\nmodule.exports = _default;","// Myers' Diff Algorithm\n// Modified from https://github.com/kpdecker/jsdiff/blob/master/src/diff/base.js\nfunction Diff() {}\n\nDiff.prototype = {\n  diff: function (oldArr, newArr, equals) {\n    if (!equals) {\n      equals = function (a, b) {\n        return a === b;\n      };\n    }\n\n    this.equals = equals;\n    var self = this;\n    oldArr = oldArr.slice();\n    newArr = newArr.slice(); // Allow subclasses to massage the input prior to running\n\n    var newLen = newArr.length;\n    var oldLen = oldArr.length;\n    var editLength = 1;\n    var maxEditLength = newLen + oldLen;\n    var bestPath = [{\n      newPos: -1,\n      components: []\n    }]; // Seed editLength = 0, i.e. the content starts with the same values\n\n    var oldPos = this.extractCommon(bestPath[0], newArr, oldArr, 0);\n\n    if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n      var indices = [];\n\n      for (var i = 0; i < newArr.length; i++) {\n        indices.push(i);\n      } // Identity per the equality and tokenizer\n\n\n      return [{\n        indices: indices,\n        count: newArr.length\n      }];\n    } // Main worker method. checks all permutations of a given edit length for acceptance.\n\n\n    function execEditLength() {\n      for (var diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n        var basePath;\n        var addPath = bestPath[diagonalPath - 1];\n        var removePath = bestPath[diagonalPath + 1];\n        var oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n\n        if (addPath) {\n          // No one else is going to attempt to use this value, clear it\n          bestPath[diagonalPath - 1] = undefined;\n        }\n\n        var canAdd = addPath && addPath.newPos + 1 < newLen;\n        var canRemove = removePath && 0 <= oldPos && oldPos < oldLen;\n\n        if (!canAdd && !canRemove) {\n          // If this path is a terminal then prune\n          bestPath[diagonalPath] = undefined;\n          continue;\n        } // Select the diagonal that we want to branch from. We select the prior\n        // path whose position in the new string is the farthest from the origin\n        // and does not pass the bounds of the diff graph\n\n\n        if (!canAdd || canRemove && addPath.newPos < removePath.newPos) {\n          basePath = clonePath(removePath);\n          self.pushComponent(basePath.components, undefined, true);\n        } else {\n          basePath = addPath; // No need to clone, we've pulled it from the list\n\n          basePath.newPos++;\n          self.pushComponent(basePath.components, true, undefined);\n        }\n\n        oldPos = self.extractCommon(basePath, newArr, oldArr, diagonalPath); // If we have hit the end of both strings, then we are done\n\n        if (basePath.newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n          return buildValues(self, basePath.components, newArr, oldArr);\n        } else {\n          // Otherwise track this path as a potential candidate and continue.\n          bestPath[diagonalPath] = basePath;\n        }\n      }\n\n      editLength++;\n    }\n\n    while (editLength <= maxEditLength) {\n      var ret = execEditLength();\n\n      if (ret) {\n        return ret;\n      }\n    }\n  },\n  pushComponent: function (components, added, removed) {\n    var last = components[components.length - 1];\n\n    if (last && last.added === added && last.removed === removed) {\n      // We need to clone here as the component clone operation is just\n      // as shallow array clone\n      components[components.length - 1] = {\n        count: last.count + 1,\n        added: added,\n        removed: removed\n      };\n    } else {\n      components.push({\n        count: 1,\n        added: added,\n        removed: removed\n      });\n    }\n  },\n  extractCommon: function (basePath, newArr, oldArr, diagonalPath) {\n    var newLen = newArr.length;\n    var oldLen = oldArr.length;\n    var newPos = basePath.newPos;\n    var oldPos = newPos - diagonalPath;\n    var commonCount = 0;\n\n    while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(newArr[newPos + 1], oldArr[oldPos + 1])) {\n      newPos++;\n      oldPos++;\n      commonCount++;\n    }\n\n    if (commonCount) {\n      basePath.components.push({\n        count: commonCount\n      });\n    }\n\n    basePath.newPos = newPos;\n    return oldPos;\n  },\n  tokenize: function (value) {\n    return value.slice();\n  },\n  join: function (value) {\n    return value.slice();\n  }\n};\n\nfunction buildValues(diff, components, newArr, oldArr) {\n  var componentPos = 0;\n  var componentLen = components.length;\n  var newPos = 0;\n  var oldPos = 0;\n\n  for (; componentPos < componentLen; componentPos++) {\n    var component = components[componentPos];\n\n    if (!component.removed) {\n      var indices = [];\n\n      for (var i = newPos; i < newPos + component.count; i++) {\n        indices.push(i);\n      }\n\n      component.indices = indices;\n      newPos += component.count; // Common case\n\n      if (!component.added) {\n        oldPos += component.count;\n      }\n    } else {\n      var indices = [];\n\n      for (var i = oldPos; i < oldPos + component.count; i++) {\n        indices.push(i);\n      }\n\n      component.indices = indices;\n      oldPos += component.count;\n    }\n  }\n\n  return components;\n}\n\nfunction clonePath(path) {\n  return {\n    newPos: path.newPos,\n    components: path.components.slice(0)\n  };\n}\n\nvar arrayDiff = new Diff();\n\nfunction _default(oldArr, newArr, callback) {\n  return arrayDiff.diff(oldArr, newArr, callback);\n}\n\nmodule.exports = _default;","var vec2 = require(\"./vector\");\n\nvar curve = require(\"./curve\");\n\n/**\n * @author Yi Shen(https://github.com/pissang)\n */\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI2 = Math.PI * 2;\nvar start = vec2.create();\nvar end = vec2.create();\nvar extremity = vec2.create();\n/**\n * `min``max`\n * @module zrender/core/bbox\n * @param {Array<Object>} points \n * @param {number} min\n * @param {number} max\n */\n\nfunction fromPoints(points, min, max) {\n  if (points.length === 0) {\n    return;\n  }\n\n  var p = points[0];\n  var left = p[0];\n  var right = p[0];\n  var top = p[1];\n  var bottom = p[1];\n  var i;\n\n  for (i = 1; i < points.length; i++) {\n    p = points[i];\n    left = mathMin(left, p[0]);\n    right = mathMax(right, p[0]);\n    top = mathMin(top, p[1]);\n    bottom = mathMax(bottom, p[1]);\n  }\n\n  min[0] = left;\n  min[1] = top;\n  max[0] = right;\n  max[1] = bottom;\n}\n/**\n * @memberOf module:zrender/core/bbox\n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {Array.<number>} min\n * @param {Array.<number>} max\n */\n\n\nfunction fromLine(x0, y0, x1, y1, min, max) {\n  min[0] = mathMin(x0, x1);\n  min[1] = mathMin(y0, y1);\n  max[0] = mathMax(x0, x1);\n  max[1] = mathMax(y0, y1);\n}\n\nvar xDim = [];\nvar yDim = [];\n/**\n * (p0, p1, p2, p3)`min``max`\n * @memberOf module:zrender/core/bbox\n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @param {number} x3\n * @param {number} y3\n * @param {Array.<number>} min\n * @param {Array.<number>} max\n */\n\nfunction fromCubic(x0, y0, x1, y1, x2, y2, x3, y3, min, max) {\n  var cubicExtrema = curve.cubicExtrema;\n  var cubicAt = curve.cubicAt;\n  var i;\n  var n = cubicExtrema(x0, x1, x2, x3, xDim);\n  min[0] = Infinity;\n  min[1] = Infinity;\n  max[0] = -Infinity;\n  max[1] = -Infinity;\n\n  for (i = 0; i < n; i++) {\n    var x = cubicAt(x0, x1, x2, x3, xDim[i]);\n    min[0] = mathMin(x, min[0]);\n    max[0] = mathMax(x, max[0]);\n  }\n\n  n = cubicExtrema(y0, y1, y2, y3, yDim);\n\n  for (i = 0; i < n; i++) {\n    var y = cubicAt(y0, y1, y2, y3, yDim[i]);\n    min[1] = mathMin(y, min[1]);\n    max[1] = mathMax(y, max[1]);\n  }\n\n  min[0] = mathMin(x0, min[0]);\n  max[0] = mathMax(x0, max[0]);\n  min[0] = mathMin(x3, min[0]);\n  max[0] = mathMax(x3, max[0]);\n  min[1] = mathMin(y0, min[1]);\n  max[1] = mathMax(y0, max[1]);\n  min[1] = mathMin(y3, min[1]);\n  max[1] = mathMax(y3, max[1]);\n}\n/**\n * (p0, p1, p2)`min``max`\n * @memberOf module:zrender/core/bbox\n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @param {Array.<number>} min\n * @param {Array.<number>} max\n */\n\n\nfunction fromQuadratic(x0, y0, x1, y1, x2, y2, min, max) {\n  var quadraticExtremum = curve.quadraticExtremum;\n  var quadraticAt = curve.quadraticAt; // Find extremities, where derivative in x dim or y dim is zero\n\n  var tx = mathMax(mathMin(quadraticExtremum(x0, x1, x2), 1), 0);\n  var ty = mathMax(mathMin(quadraticExtremum(y0, y1, y2), 1), 0);\n  var x = quadraticAt(x0, x1, x2, tx);\n  var y = quadraticAt(y0, y1, y2, ty);\n  min[0] = mathMin(x0, x2, x);\n  min[1] = mathMin(y0, y2, y);\n  max[0] = mathMax(x0, x2, x);\n  max[1] = mathMax(y0, y2, y);\n}\n/**\n * `min``max`\n * @method\n * @memberOf module:zrender/core/bbox\n * @param {number} x\n * @param {number} y\n * @param {number} rx\n * @param {number} ry\n * @param {number} startAngle\n * @param {number} endAngle\n * @param {number} anticlockwise\n * @param {Array.<number>} min\n * @param {Array.<number>} max\n */\n\n\nfunction fromArc(x, y, rx, ry, startAngle, endAngle, anticlockwise, min, max) {\n  var vec2Min = vec2.min;\n  var vec2Max = vec2.max;\n  var diff = Math.abs(startAngle - endAngle);\n\n  if (diff % PI2 < 1e-4 && diff > 1e-4) {\n    // Is a circle\n    min[0] = x - rx;\n    min[1] = y - ry;\n    max[0] = x + rx;\n    max[1] = y + ry;\n    return;\n  }\n\n  start[0] = mathCos(startAngle) * rx + x;\n  start[1] = mathSin(startAngle) * ry + y;\n  end[0] = mathCos(endAngle) * rx + x;\n  end[1] = mathSin(endAngle) * ry + y;\n  vec2Min(min, start, end);\n  vec2Max(max, start, end); // Thresh to [0, Math.PI * 2]\n\n  startAngle = startAngle % PI2;\n\n  if (startAngle < 0) {\n    startAngle = startAngle + PI2;\n  }\n\n  endAngle = endAngle % PI2;\n\n  if (endAngle < 0) {\n    endAngle = endAngle + PI2;\n  }\n\n  if (startAngle > endAngle && !anticlockwise) {\n    endAngle += PI2;\n  } else if (startAngle < endAngle && anticlockwise) {\n    startAngle += PI2;\n  }\n\n  if (anticlockwise) {\n    var tmp = endAngle;\n    endAngle = startAngle;\n    startAngle = tmp;\n  } // var number = 0;\n  // var step = (anticlockwise ? -Math.PI : Math.PI) / 2;\n\n\n  for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\n    if (angle > startAngle) {\n      extremity[0] = mathCos(angle) * rx + x;\n      extremity[1] = mathSin(angle) * ry + y;\n      vec2Min(min, extremity, min);\n      vec2Max(max, extremity, max);\n    }\n  }\n}\n\nexports.fromPoints = fromPoints;\nexports.fromLine = fromLine;\nexports.fromCubic = fromCubic;\nexports.fromQuadratic = fromQuadratic;\nexports.fromArc = fromArc;","var _vector = require(\"./vector\");\n\nvar v2Create = _vector.create;\nvar v2DistSquare = _vector.distSquare;\n\n/**\n * \n * @module zrender/core/curve\n * @author pissang(https://www.github.com/pissang)\n */\nvar mathPow = Math.pow;\nvar mathSqrt = Math.sqrt;\nvar EPSILON = 1e-8;\nvar EPSILON_NUMERIC = 1e-4;\nvar THREE_SQRT = mathSqrt(3);\nvar ONE_THIRD = 1 / 3; // \n\nvar _v0 = v2Create();\n\nvar _v1 = v2Create();\n\nvar _v2 = v2Create();\n\nfunction isAroundZero(val) {\n  return val > -EPSILON && val < EPSILON;\n}\n\nfunction isNotAroundZero(val) {\n  return val > EPSILON || val < -EPSILON;\n}\n/**\n * \n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} t\n * @return {number}\n */\n\n\nfunction cubicAt(p0, p1, p2, p3, t) {\n  var onet = 1 - t;\n  return onet * onet * (onet * p0 + 3 * t * p1) + t * t * (t * p3 + 3 * onet * p2);\n}\n/**\n * \n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} t\n * @return {number}\n */\n\n\nfunction cubicDerivativeAt(p0, p1, p2, p3, t) {\n  var onet = 1 - t;\n  return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet + (p3 - p2) * t * t);\n}\n/**\n * \n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} val\n * @param  {Array.<number>} roots\n * @return {number} \n */\n\n\nfunction cubicRootAt(p0, p1, p2, p3, val, roots) {\n  // Evaluate roots of cubic functions\n  var a = p3 + 3 * (p1 - p2) - p0;\n  var b = 3 * (p2 - p1 * 2 + p0);\n  var c = 3 * (p1 - p0);\n  var d = p0 - val;\n  var A = b * b - 3 * a * c;\n  var B = b * c - 9 * a * d;\n  var C = c * c - 3 * b * d;\n  var n = 0;\n\n  if (isAroundZero(A) && isAroundZero(B)) {\n    if (isAroundZero(b)) {\n      roots[0] = 0;\n    } else {\n      var t1 = -c / b; //t1, t2, t3, b is not zero\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n    }\n  } else {\n    var disc = B * B - 4 * A * C;\n\n    if (isAroundZero(disc)) {\n      var K = B / A;\n      var t1 = -b / a + K; // t1, a is not zero\n\n      var t2 = -K / 2; // t2, t3\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n\n      if (t2 >= 0 && t2 <= 1) {\n        roots[n++] = t2;\n      }\n    } else if (disc > 0) {\n      var discSqrt = mathSqrt(disc);\n      var Y1 = A * b + 1.5 * a * (-B + discSqrt);\n      var Y2 = A * b + 1.5 * a * (-B - discSqrt);\n\n      if (Y1 < 0) {\n        Y1 = -mathPow(-Y1, ONE_THIRD);\n      } else {\n        Y1 = mathPow(Y1, ONE_THIRD);\n      }\n\n      if (Y2 < 0) {\n        Y2 = -mathPow(-Y2, ONE_THIRD);\n      } else {\n        Y2 = mathPow(Y2, ONE_THIRD);\n      }\n\n      var t1 = (-b - (Y1 + Y2)) / (3 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n    } else {\n      var T = (2 * A * b - 3 * a * B) / (2 * mathSqrt(A * A * A));\n      var theta = Math.acos(T) / 3;\n      var ASqrt = mathSqrt(A);\n      var tmp = Math.cos(theta);\n      var t1 = (-b - 2 * ASqrt * tmp) / (3 * a);\n      var t2 = (-b + ASqrt * (tmp + THREE_SQRT * Math.sin(theta))) / (3 * a);\n      var t3 = (-b + ASqrt * (tmp - THREE_SQRT * Math.sin(theta))) / (3 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n\n      if (t2 >= 0 && t2 <= 1) {\n        roots[n++] = t2;\n      }\n\n      if (t3 >= 0 && t3 <= 1) {\n        roots[n++] = t3;\n      }\n    }\n  }\n\n  return n;\n}\n/**\n * \n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {Array.<number>} extrema\n * @return {number} \n */\n\n\nfunction cubicExtrema(p0, p1, p2, p3, extrema) {\n  var b = 6 * p2 - 12 * p1 + 6 * p0;\n  var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;\n  var c = 3 * p1 - 3 * p0;\n  var n = 0;\n\n  if (isAroundZero(a)) {\n    if (isNotAroundZero(b)) {\n      var t1 = -c / b;\n\n      if (t1 >= 0 && t1 <= 1) {\n        extrema[n++] = t1;\n      }\n    }\n  } else {\n    var disc = b * b - 4 * a * c;\n\n    if (isAroundZero(disc)) {\n      extrema[0] = -b / (2 * a);\n    } else if (disc > 0) {\n      var discSqrt = mathSqrt(disc);\n      var t1 = (-b + discSqrt) / (2 * a);\n      var t2 = (-b - discSqrt) / (2 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        extrema[n++] = t1;\n      }\n\n      if (t2 >= 0 && t2 <= 1) {\n        extrema[n++] = t2;\n      }\n    }\n  }\n\n  return n;\n}\n/**\n * \n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} t\n * @param  {Array.<number>} out\n */\n\n\nfunction cubicSubdivide(p0, p1, p2, p3, t, out) {\n  var p01 = (p1 - p0) * t + p0;\n  var p12 = (p2 - p1) * t + p1;\n  var p23 = (p3 - p2) * t + p2;\n  var p012 = (p12 - p01) * t + p01;\n  var p123 = (p23 - p12) * t + p12;\n  var p0123 = (p123 - p012) * t + p012; // Seg0\n\n  out[0] = p0;\n  out[1] = p01;\n  out[2] = p012;\n  out[3] = p0123; // Seg1\n\n  out[4] = p0123;\n  out[5] = p123;\n  out[6] = p23;\n  out[7] = p3;\n}\n/**\n * \n * \n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @param {number} x3\n * @param {number} y3\n * @param {number} x\n * @param {number} y\n * @param {Array.<number>} [out] \n * @return {number}\n */\n\n\nfunction cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, out) {\n  // http://pomax.github.io/bezierinfo/#projections\n  var t;\n  var interval = 0.005;\n  var d = Infinity;\n  var prev;\n  var next;\n  var d1;\n  var d2;\n  _v0[0] = x;\n  _v0[1] = y; //  t \n  // PENDING\n\n  for (var _t = 0; _t < 1; _t += 0.05) {\n    _v1[0] = cubicAt(x0, x1, x2, x3, _t);\n    _v1[1] = cubicAt(y0, y1, y2, y3, _t);\n    d1 = v2DistSquare(_v0, _v1);\n\n    if (d1 < d) {\n      t = _t;\n      d = d1;\n    }\n  }\n\n  d = Infinity; // At most 32 iteration\n\n  for (var i = 0; i < 32; i++) {\n    if (interval < EPSILON_NUMERIC) {\n      break;\n    }\n\n    prev = t - interval;\n    next = t + interval; // t - interval\n\n    _v1[0] = cubicAt(x0, x1, x2, x3, prev);\n    _v1[1] = cubicAt(y0, y1, y2, y3, prev);\n    d1 = v2DistSquare(_v1, _v0);\n\n    if (prev >= 0 && d1 < d) {\n      t = prev;\n      d = d1;\n    } else {\n      // t + interval\n      _v2[0] = cubicAt(x0, x1, x2, x3, next);\n      _v2[1] = cubicAt(y0, y1, y2, y3, next);\n      d2 = v2DistSquare(_v2, _v0);\n\n      if (next <= 1 && d2 < d) {\n        t = next;\n        d = d2;\n      } else {\n        interval *= 0.5;\n      }\n    }\n  } // t\n\n\n  if (out) {\n    out[0] = cubicAt(x0, x1, x2, x3, t);\n    out[1] = cubicAt(y0, y1, y2, y3, t);\n  } // console.log(interval, i);\n\n\n  return mathSqrt(d);\n}\n/**\n * \n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} t\n * @return {number}\n */\n\n\nfunction quadraticAt(p0, p1, p2, t) {\n  var onet = 1 - t;\n  return onet * (onet * p0 + 2 * t * p1) + t * t * p2;\n}\n/**\n * \n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} t\n * @return {number}\n */\n\n\nfunction quadraticDerivativeAt(p0, p1, p2, t) {\n  return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));\n}\n/**\n * \n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} t\n * @param  {Array.<number>} roots\n * @return {number} \n */\n\n\nfunction quadraticRootAt(p0, p1, p2, val, roots) {\n  var a = p0 - 2 * p1 + p2;\n  var b = 2 * (p1 - p0);\n  var c = p0 - val;\n  var n = 0;\n\n  if (isAroundZero(a)) {\n    if (isNotAroundZero(b)) {\n      var t1 = -c / b;\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n    }\n  } else {\n    var disc = b * b - 4 * a * c;\n\n    if (isAroundZero(disc)) {\n      var t1 = -b / (2 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n    } else if (disc > 0) {\n      var discSqrt = mathSqrt(disc);\n      var t1 = (-b + discSqrt) / (2 * a);\n      var t2 = (-b - discSqrt) / (2 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n\n      if (t2 >= 0 && t2 <= 1) {\n        roots[n++] = t2;\n      }\n    }\n  }\n\n  return n;\n}\n/**\n * \n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @return {number}\n */\n\n\nfunction quadraticExtremum(p0, p1, p2) {\n  var divider = p0 + p2 - 2 * p1;\n\n  if (divider === 0) {\n    // p1 is center of p0 and p2\n    return 0.5;\n  } else {\n    return (p0 - p1) / divider;\n  }\n}\n/**\n * \n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} t\n * @param  {Array.<number>} out\n */\n\n\nfunction quadraticSubdivide(p0, p1, p2, t, out) {\n  var p01 = (p1 - p0) * t + p0;\n  var p12 = (p2 - p1) * t + p1;\n  var p012 = (p12 - p01) * t + p01; // Seg0\n\n  out[0] = p0;\n  out[1] = p01;\n  out[2] = p012; // Seg1\n\n  out[3] = p012;\n  out[4] = p12;\n  out[5] = p2;\n}\n/**\n * \n * \n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @param {number} x\n * @param {number} y\n * @param {Array.<number>} out \n * @return {number}\n */\n\n\nfunction quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, out) {\n  // http://pomax.github.io/bezierinfo/#projections\n  var t;\n  var interval = 0.005;\n  var d = Infinity;\n  _v0[0] = x;\n  _v0[1] = y; //  t \n  // PENDING\n\n  for (var _t = 0; _t < 1; _t += 0.05) {\n    _v1[0] = quadraticAt(x0, x1, x2, _t);\n    _v1[1] = quadraticAt(y0, y1, y2, _t);\n    var d1 = v2DistSquare(_v0, _v1);\n\n    if (d1 < d) {\n      t = _t;\n      d = d1;\n    }\n  }\n\n  d = Infinity; // At most 32 iteration\n\n  for (var i = 0; i < 32; i++) {\n    if (interval < EPSILON_NUMERIC) {\n      break;\n    }\n\n    var prev = t - interval;\n    var next = t + interval; // t - interval\n\n    _v1[0] = quadraticAt(x0, x1, x2, prev);\n    _v1[1] = quadraticAt(y0, y1, y2, prev);\n    var d1 = v2DistSquare(_v1, _v0);\n\n    if (prev >= 0 && d1 < d) {\n      t = prev;\n      d = d1;\n    } else {\n      // t + interval\n      _v2[0] = quadraticAt(x0, x1, x2, next);\n      _v2[1] = quadraticAt(y0, y1, y2, next);\n      var d2 = v2DistSquare(_v2, _v0);\n\n      if (next <= 1 && d2 < d) {\n        t = next;\n        d = d2;\n      } else {\n        interval *= 0.5;\n      }\n    }\n  } // t\n\n\n  if (out) {\n    out[0] = quadraticAt(x0, x1, x2, t);\n    out[1] = quadraticAt(y0, y1, y2, t);\n  } // console.log(interval, i);\n\n\n  return mathSqrt(d);\n}\n\nexports.cubicAt = cubicAt;\nexports.cubicDerivativeAt = cubicDerivativeAt;\nexports.cubicRootAt = cubicRootAt;\nexports.cubicExtrema = cubicExtrema;\nexports.cubicSubdivide = cubicSubdivide;\nexports.cubicProjectPoint = cubicProjectPoint;\nexports.quadraticAt = quadraticAt;\nexports.quadraticDerivativeAt = quadraticDerivativeAt;\nexports.quadraticRootAt = quadraticRootAt;\nexports.quadraticExtremum = quadraticExtremum;\nexports.quadraticSubdivide = quadraticSubdivide;\nexports.quadraticProjectPoint = quadraticProjectPoint;","/**\n * echarts\n *\n * @desc echartsCanvasJavascript\n * @author firede[firede@firede.us]\n * @desc thanks zepto.\n */\nvar env = {};\n\nif (typeof navigator === 'undefined') {\n  // In node\n  env = {\n    browser: {},\n    os: {},\n    node: true,\n    // Assume canvas is supported\n    canvasSupported: true,\n    svgSupported: true\n  };\n} else {\n  env = detect(navigator.userAgent);\n}\n\nvar _default = env; // Zepto.js\n// (c) 2010-2013 Thomas Fuchs\n// Zepto.js may be freely distributed under the MIT license.\n\nfunction detect(ua) {\n  var os = {};\n  var browser = {}; // var webkit = ua.match(/Web[kK]it[\\/]{0,1}([\\d.]+)/);\n  // var android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n  // var ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n  // var ipod = ua.match(/(iPod)(.*OS\\s([\\d_]+))?/);\n  // var iphone = !ipad && ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n  // var webos = ua.match(/(webOS|hpwOS)[\\s\\/]([\\d.]+)/);\n  // var touchpad = webos && ua.match(/TouchPad/);\n  // var kindle = ua.match(/Kindle\\/([\\d.]+)/);\n  // var silk = ua.match(/Silk\\/([\\d._]+)/);\n  // var blackberry = ua.match(/(BlackBerry).*Version\\/([\\d.]+)/);\n  // var bb10 = ua.match(/(BB10).*Version\\/([\\d.]+)/);\n  // var rimtabletos = ua.match(/(RIM\\sTablet\\sOS)\\s([\\d.]+)/);\n  // var playbook = ua.match(/PlayBook/);\n  // var chrome = ua.match(/Chrome\\/([\\d.]+)/) || ua.match(/CriOS\\/([\\d.]+)/);\n\n  var firefox = ua.match(/Firefox\\/([\\d.]+)/); // var safari = webkit && ua.match(/Mobile\\//) && !chrome;\n  // var webview = ua.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/) && !chrome;\n\n  var ie = ua.match(/MSIE\\s([\\d.]+)/) // IE 11 Trident/7.0; rv:11.0\n  || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\n  var edge = ua.match(/Edge\\/([\\d.]+)/); // IE 12 and 12+\n\n  var weChat = /micromessenger/i.test(ua); // Todo: clean this up with a better OS/browser seperation:\n  // - discern (more) between multiple browsers on android\n  // - decide if kindle fire in silk mode is android or not\n  // - Firefox on Android doesn't specify the Android version\n  // - possibly devide in os, device and browser hashes\n  // if (browser.webkit = !!webkit) browser.version = webkit[1];\n  // if (android) os.android = true, os.version = android[2];\n  // if (iphone && !ipod) os.ios = os.iphone = true, os.version = iphone[2].replace(/_/g, '.');\n  // if (ipad) os.ios = os.ipad = true, os.version = ipad[2].replace(/_/g, '.');\n  // if (ipod) os.ios = os.ipod = true, os.version = ipod[3] ? ipod[3].replace(/_/g, '.') : null;\n  // if (webos) os.webos = true, os.version = webos[2];\n  // if (touchpad) os.touchpad = true;\n  // if (blackberry) os.blackberry = true, os.version = blackberry[2];\n  // if (bb10) os.bb10 = true, os.version = bb10[2];\n  // if (rimtabletos) os.rimtabletos = true, os.version = rimtabletos[2];\n  // if (playbook) browser.playbook = true;\n  // if (kindle) os.kindle = true, os.version = kindle[1];\n  // if (silk) browser.silk = true, browser.version = silk[1];\n  // if (!silk && os.android && ua.match(/Kindle Fire/)) browser.silk = true;\n  // if (chrome) browser.chrome = true, browser.version = chrome[1];\n\n  if (firefox) {\n    browser.firefox = true;\n    browser.version = firefox[1];\n  } // if (safari && (ua.match(/Safari/) || !!os.ios)) browser.safari = true;\n  // if (webview) browser.webview = true;\n\n\n  if (ie) {\n    browser.ie = true;\n    browser.version = ie[1];\n  }\n\n  if (edge) {\n    browser.edge = true;\n    browser.version = edge[1];\n  } // It is difficult to detect WeChat in Win Phone precisely, because ua can\n  // not be set on win phone. So we do not consider Win Phone.\n\n\n  if (weChat) {\n    browser.weChat = true;\n  } // os.tablet = !!(ipad || playbook || (android && !ua.match(/Mobile/)) ||\n  //     (firefox && ua.match(/Tablet/)) || (ie && !ua.match(/Phone/) && ua.match(/Touch/)));\n  // os.phone  = !!(!os.tablet && !os.ipod && (android || iphone || webos ||\n  //     (chrome && ua.match(/Android/)) || (chrome && ua.match(/CriOS\\/([\\d.]+)/)) ||\n  //     (firefox && ua.match(/Mobile/)) || (ie && ua.match(/Touch/))));\n\n\n  return {\n    browser: browser,\n    os: os,\n    node: false,\n    // canvas\n    // canvasSupported : !(browser.ie && parseFloat(browser.version) < 9)\n    canvasSupported: !!document.createElement('canvas').getContext,\n    svgSupported: typeof SVGRect !== 'undefined',\n    // @see <http://stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-device-using-javascript>\n    // works on most browsers\n    // IE10/11 does not support touch event, and MS Edge supports them but not by\n    // default, so we dont check navigator.maxTouchPoints for them here.\n    touchEventsSupported: 'ontouchstart' in window && !browser.ie && !browser.edge,\n    // <http://caniuse.com/#search=pointer%20event>.\n    pointerEventsSupported: 'onpointerdown' in window // Firefox supports pointer but not by default, only MS browsers are reliable on pointer\n    // events currently. So we dont use that on other browsers unless tested sufficiently.\n    // Although IE 10 supports pointer event, it use old style and is different from the\n    // standard. So we exclude that. (IE 10 is hardly used on touch device)\n    && (browser.edge || browser.ie && browser.version >= 11)\n  };\n}\n\nmodule.exports = _default;","var Eventful = require(\"../mixin/Eventful\");\n\nexports.Dispatcher = Eventful;\n\nvar env = require(\"./env\");\n\n/**\n * \n * @module zrender/core/event\n * @author Kener (@Kener-, kener.linfeng@gmail.com)\n */\nvar isDomLevel2 = typeof window !== 'undefined' && !!window.addEventListener;\nvar MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\n\nfunction getBoundingClientRect(el) {\n  // BlackBerry 5, iOS 3 (original iPhone) don't have getBoundingRect\n  return el.getBoundingClientRect ? el.getBoundingClientRect() : {\n    left: 0,\n    top: 0\n  };\n} // `calculate` is optional, default false\n\n\nfunction clientToLocal(el, e, out, calculate) {\n  out = out || {}; // According to the W3C Working Draft, offsetX and offsetY should be relative\n  // to the padding edge of the target element. The only browser using this convention\n  // is IE. Webkit uses the border edge, Opera uses the content edge, and FireFox does\n  // not support the properties.\n  // (see http://www.jacklmoore.com/notes/mouse-position/)\n  // In zr painter.dom, padding edge equals to border edge.\n  // FIXME\n  // When mousemove event triggered on ec tooltip, target is not zr painter.dom, and\n  // offsetX/Y is relative to e.target, where the calculation of zrX/Y via offsetX/Y\n  // is too complex. So css-transfrom dont support in this case temporarily.\n\n  if (calculate || !env.canvasSupported) {\n    defaultGetZrXY(el, e, out);\n  } // Caution: In FireFox, layerX/layerY Mouse position relative to the closest positioned\n  // ancestor element, so we should make sure el is positioned (e.g., not position:static).\n  // BTW1, Webkit don't return the same results as FF in non-simple cases (like add\n  // zoom-factor, overflow / opacity layers, transforms ...)\n  // BTW2, (ev.offsetY || ev.pageY - $(ev.target).offset().top) is not correct in preserve-3d.\n  // <https://bugs.jquery.com/ticket/8523#comment:14>\n  // BTW3, In ff, offsetX/offsetY is always 0.\n  else if (env.browser.firefox && e.layerX != null && e.layerX !== e.offsetX) {\n      out.zrX = e.layerX;\n      out.zrY = e.layerY;\n    } // For IE6+, chrome, safari, opera. (When will ff support offsetX?)\n    else if (e.offsetX != null) {\n        out.zrX = e.offsetX;\n        out.zrY = e.offsetY;\n      } // For some other device, e.g., IOS safari.\n      else {\n          defaultGetZrXY(el, e, out);\n        }\n\n  return out;\n}\n\nfunction defaultGetZrXY(el, e, out) {\n  // This well-known method below does not support css transform.\n  var box = getBoundingClientRect(el);\n  out.zrX = e.clientX - box.left;\n  out.zrY = e.clientY - box.top;\n}\n/**\n * domtouch.\n * `calculate` is optional, default false.\n */\n\n\nfunction normalizeEvent(el, e, calculate) {\n  e = e || window.event;\n\n  if (e.zrX != null) {\n    return e;\n  }\n\n  var eventType = e.type;\n  var isTouch = eventType && eventType.indexOf('touch') >= 0;\n\n  if (!isTouch) {\n    clientToLocal(el, e, e, calculate);\n    e.zrDelta = e.wheelDelta ? e.wheelDelta / 120 : -(e.detail || 0) / 3;\n  } else {\n    var touch = eventType != 'touchend' ? e.targetTouches[0] : e.changedTouches[0];\n    touch && clientToLocal(el, touch, e, calculate);\n  } // Add which for click: 1 === left; 2 === middle; 3 === right; otherwise: 0;\n  // See jQuery: https://github.com/jquery/jquery/blob/master/src/event.js\n  // If e.which has been defined, if may be readonly,\n  // see: https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/which\n\n\n  var button = e.button;\n\n  if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\n    e.which = button & 1 ? 1 : button & 2 ? 3 : button & 4 ? 2 : 0;\n  }\n\n  return e;\n}\n\nfunction addEventListener(el, name, handler) {\n  if (isDomLevel2) {\n    el.addEventListener(name, handler);\n  } else {\n    el.attachEvent('on' + name, handler);\n  }\n}\n\nfunction removeEventListener(el, name, handler) {\n  if (isDomLevel2) {\n    el.removeEventListener(name, handler);\n  } else {\n    el.detachEvent('on' + name, handler);\n  }\n}\n/**\n * preventDefault and stopPropagation.\n * Notice: do not do that in zrender. Upper application\n * do that if necessary.\n *\n * @memberOf module:zrender/core/event\n * @method\n * @param {Event} e : event\n */\n\n\nvar stop = isDomLevel2 ? function (e) {\n  e.preventDefault();\n  e.stopPropagation();\n  e.cancelBubble = true;\n} : function (e) {\n  e.returnValue = false;\n  e.cancelBubble = true;\n};\n\nfunction notLeftMouse(e) {\n  // If e.which is undefined, considered as left mouse event.\n  return e.which > 1;\n} // \n\n\nexports.clientToLocal = clientToLocal;\nexports.normalizeEvent = normalizeEvent;\nexports.addEventListener = addEventListener;\nexports.removeEventListener = removeEventListener;\nexports.stop = stop;\nexports.notLeftMouse = notLeftMouse;","/**\n * zrender: id\n *\n * @author errorrik (errorrik@gmail.com)\n */\nvar idStart = 0x0907;\n\nfunction _default() {\n  return idStart++;\n}\n\nmodule.exports = _default;","var _config = require(\"../config\");\n\nvar debugMode = _config.debugMode;\n\nvar log = function () {};\n\nif (debugMode === 1) {\n  log = function () {\n    for (var k in arguments) {\n      throw new Error(arguments[k]);\n    }\n  };\n} else if (debugMode > 1) {\n  log = function () {\n    for (var k in arguments) {\n      console.log(arguments[k]);\n    }\n  };\n}\n\nvar _default = log;\nmodule.exports = _default;","/**\n * 3x2\n * @exports zrender/tool/matrix\n */\nvar ArrayCtor = typeof Float32Array === 'undefined' ? Array : Float32Array;\n/**\n * \n * @return {Float32Array|Array.<number>}\n */\n\nfunction create() {\n  var out = new ArrayCtor(6);\n  identity(out);\n  return out;\n}\n/**\n * \n * @param {Float32Array|Array.<number>} out\n */\n\n\nfunction identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\n * \n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} m\n */\n\n\nfunction copy(out, m) {\n  out[0] = m[0];\n  out[1] = m[1];\n  out[2] = m[2];\n  out[3] = m[3];\n  out[4] = m[4];\n  out[5] = m[5];\n  return out;\n}\n/**\n * \n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} m1\n * @param {Float32Array|Array.<number>} m2\n */\n\n\nfunction mul(out, m1, m2) {\n  // Consider matrix.mul(m, m2, m);\n  // where out is the same as m2.\n  // So use temp variable to escape error.\n  var out0 = m1[0] * m2[0] + m1[2] * m2[1];\n  var out1 = m1[1] * m2[0] + m1[3] * m2[1];\n  var out2 = m1[0] * m2[2] + m1[2] * m2[3];\n  var out3 = m1[1] * m2[2] + m1[3] * m2[3];\n  var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n  var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = out3;\n  out[4] = out4;\n  out[5] = out5;\n  return out;\n}\n/**\n * \n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n * @param {Float32Array|Array.<number>} v\n */\n\n\nfunction translate(out, a, v) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4] + v[0];\n  out[5] = a[5] + v[1];\n  return out;\n}\n/**\n * \n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n * @param {number} rad\n */\n\n\nfunction rotate(out, a, rad) {\n  var aa = a[0];\n  var ac = a[2];\n  var atx = a[4];\n  var ab = a[1];\n  var ad = a[3];\n  var aty = a[5];\n  var st = Math.sin(rad);\n  var ct = Math.cos(rad);\n  out[0] = aa * ct + ab * st;\n  out[1] = -aa * st + ab * ct;\n  out[2] = ac * ct + ad * st;\n  out[3] = -ac * st + ct * ad;\n  out[4] = ct * atx + st * aty;\n  out[5] = ct * aty - st * atx;\n  return out;\n}\n/**\n * \n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n * @param {Float32Array|Array.<number>} v\n */\n\n\nfunction scale(out, a, v) {\n  var vx = v[0];\n  var vy = v[1];\n  out[0] = a[0] * vx;\n  out[1] = a[1] * vy;\n  out[2] = a[2] * vx;\n  out[3] = a[3] * vy;\n  out[4] = a[4] * vx;\n  out[5] = a[5] * vy;\n  return out;\n}\n/**\n * \n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n */\n\n\nfunction invert(out, a) {\n  var aa = a[0];\n  var ac = a[2];\n  var atx = a[4];\n  var ab = a[1];\n  var ad = a[3];\n  var aty = a[5];\n  var det = aa * ad - ab * ac;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = ad * det;\n  out[1] = -ab * det;\n  out[2] = -ac * det;\n  out[3] = aa * det;\n  out[4] = (ac * aty - ad * atx) * det;\n  out[5] = (ab * atx - aa * aty) * det;\n  return out;\n}\n\nexports.create = create;\nexports.identity = identity;\nexports.copy = copy;\nexports.mul = mul;\nexports.translate = translate;\nexports.rotate = rotate;\nexports.scale = scale;\nexports.invert = invert;","// https://github.com/mziccard/node-timsort\nvar DEFAULT_MIN_MERGE = 32;\nvar DEFAULT_MIN_GALLOPING = 7;\nvar DEFAULT_TMP_STORAGE_LENGTH = 256;\n\nfunction minRunLength(n) {\n  var r = 0;\n\n  while (n >= DEFAULT_MIN_MERGE) {\n    r |= n & 1;\n    n >>= 1;\n  }\n\n  return n + r;\n}\n\nfunction makeAscendingRun(array, lo, hi, compare) {\n  var runHi = lo + 1;\n\n  if (runHi === hi) {\n    return 1;\n  }\n\n  if (compare(array[runHi++], array[lo]) < 0) {\n    while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\n      runHi++;\n    }\n\n    reverseRun(array, lo, runHi);\n  } else {\n    while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\n      runHi++;\n    }\n  }\n\n  return runHi - lo;\n}\n\nfunction reverseRun(array, lo, hi) {\n  hi--;\n\n  while (lo < hi) {\n    var t = array[lo];\n    array[lo++] = array[hi];\n    array[hi--] = t;\n  }\n}\n\nfunction binaryInsertionSort(array, lo, hi, start, compare) {\n  if (start === lo) {\n    start++;\n  }\n\n  for (; start < hi; start++) {\n    var pivot = array[start];\n    var left = lo;\n    var right = start;\n    var mid;\n\n    while (left < right) {\n      mid = left + right >>> 1;\n\n      if (compare(pivot, array[mid]) < 0) {\n        right = mid;\n      } else {\n        left = mid + 1;\n      }\n    }\n\n    var n = start - left;\n\n    switch (n) {\n      case 3:\n        array[left + 3] = array[left + 2];\n\n      case 2:\n        array[left + 2] = array[left + 1];\n\n      case 1:\n        array[left + 1] = array[left];\n        break;\n\n      default:\n        while (n > 0) {\n          array[left + n] = array[left + n - 1];\n          n--;\n        }\n\n    }\n\n    array[left] = pivot;\n  }\n}\n\nfunction gallopLeft(value, array, start, length, hint, compare) {\n  var lastOffset = 0;\n  var maxOffset = 0;\n  var offset = 1;\n\n  if (compare(value, array[start + hint]) > 0) {\n    maxOffset = length - hint;\n\n    while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\n      lastOffset = offset;\n      offset = (offset << 1) + 1;\n\n      if (offset <= 0) {\n        offset = maxOffset;\n      }\n    }\n\n    if (offset > maxOffset) {\n      offset = maxOffset;\n    }\n\n    lastOffset += hint;\n    offset += hint;\n  } else {\n    maxOffset = hint + 1;\n\n    while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\n      lastOffset = offset;\n      offset = (offset << 1) + 1;\n\n      if (offset <= 0) {\n        offset = maxOffset;\n      }\n    }\n\n    if (offset > maxOffset) {\n      offset = maxOffset;\n    }\n\n    var tmp = lastOffset;\n    lastOffset = hint - offset;\n    offset = hint - tmp;\n  }\n\n  lastOffset++;\n\n  while (lastOffset < offset) {\n    var m = lastOffset + (offset - lastOffset >>> 1);\n\n    if (compare(value, array[start + m]) > 0) {\n      lastOffset = m + 1;\n    } else {\n      offset = m;\n    }\n  }\n\n  return offset;\n}\n\nfunction gallopRight(value, array, start, length, hint, compare) {\n  var lastOffset = 0;\n  var maxOffset = 0;\n  var offset = 1;\n\n  if (compare(value, array[start + hint]) < 0) {\n    maxOffset = hint + 1;\n\n    while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\n      lastOffset = offset;\n      offset = (offset << 1) + 1;\n\n      if (offset <= 0) {\n        offset = maxOffset;\n      }\n    }\n\n    if (offset > maxOffset) {\n      offset = maxOffset;\n    }\n\n    var tmp = lastOffset;\n    lastOffset = hint - offset;\n    offset = hint - tmp;\n  } else {\n    maxOffset = length - hint;\n\n    while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\n      lastOffset = offset;\n      offset = (offset << 1) + 1;\n\n      if (offset <= 0) {\n        offset = maxOffset;\n      }\n    }\n\n    if (offset > maxOffset) {\n      offset = maxOffset;\n    }\n\n    lastOffset += hint;\n    offset += hint;\n  }\n\n  lastOffset++;\n\n  while (lastOffset < offset) {\n    var m = lastOffset + (offset - lastOffset >>> 1);\n\n    if (compare(value, array[start + m]) < 0) {\n      offset = m;\n    } else {\n      lastOffset = m + 1;\n    }\n  }\n\n  return offset;\n}\n\nfunction TimSort(array, compare) {\n  var minGallop = DEFAULT_MIN_GALLOPING;\n  var length = 0;\n  var tmpStorageLength = DEFAULT_TMP_STORAGE_LENGTH;\n  var stackLength = 0;\n  var runStart;\n  var runLength;\n  var stackSize = 0;\n  length = array.length;\n\n  if (length < 2 * DEFAULT_TMP_STORAGE_LENGTH) {\n    tmpStorageLength = length >>> 1;\n  }\n\n  var tmp = [];\n  stackLength = length < 120 ? 5 : length < 1542 ? 10 : length < 119151 ? 19 : 40;\n  runStart = [];\n  runLength = [];\n\n  function pushRun(_runStart, _runLength) {\n    runStart[stackSize] = _runStart;\n    runLength[stackSize] = _runLength;\n    stackSize += 1;\n  }\n\n  function mergeRuns() {\n    while (stackSize > 1) {\n      var n = stackSize - 2;\n\n      if (n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1] || n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1]) {\n        if (runLength[n - 1] < runLength[n + 1]) {\n          n--;\n        }\n      } else if (runLength[n] > runLength[n + 1]) {\n        break;\n      }\n\n      mergeAt(n);\n    }\n  }\n\n  function forceMergeRuns() {\n    while (stackSize > 1) {\n      var n = stackSize - 2;\n\n      if (n > 0 && runLength[n - 1] < runLength[n + 1]) {\n        n--;\n      }\n\n      mergeAt(n);\n    }\n  }\n\n  function mergeAt(i) {\n    var start1 = runStart[i];\n    var length1 = runLength[i];\n    var start2 = runStart[i + 1];\n    var length2 = runLength[i + 1];\n    runLength[i] = length1 + length2;\n\n    if (i === stackSize - 3) {\n      runStart[i + 1] = runStart[i + 2];\n      runLength[i + 1] = runLength[i + 2];\n    }\n\n    stackSize--;\n    var k = gallopRight(array[start2], array, start1, length1, 0, compare);\n    start1 += k;\n    length1 -= k;\n\n    if (length1 === 0) {\n      return;\n    }\n\n    length2 = gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\n\n    if (length2 === 0) {\n      return;\n    }\n\n    if (length1 <= length2) {\n      mergeLow(start1, length1, start2, length2);\n    } else {\n      mergeHigh(start1, length1, start2, length2);\n    }\n  }\n\n  function mergeLow(start1, length1, start2, length2) {\n    var i = 0;\n\n    for (i = 0; i < length1; i++) {\n      tmp[i] = array[start1 + i];\n    }\n\n    var cursor1 = 0;\n    var cursor2 = start2;\n    var dest = start1;\n    array[dest++] = array[cursor2++];\n\n    if (--length2 === 0) {\n      for (i = 0; i < length1; i++) {\n        array[dest + i] = tmp[cursor1 + i];\n      }\n\n      return;\n    }\n\n    if (length1 === 1) {\n      for (i = 0; i < length2; i++) {\n        array[dest + i] = array[cursor2 + i];\n      }\n\n      array[dest + length2] = tmp[cursor1];\n      return;\n    }\n\n    var _minGallop = minGallop;\n    var count1, count2, exit;\n\n    while (1) {\n      count1 = 0;\n      count2 = 0;\n      exit = false;\n\n      do {\n        if (compare(array[cursor2], tmp[cursor1]) < 0) {\n          array[dest++] = array[cursor2++];\n          count2++;\n          count1 = 0;\n\n          if (--length2 === 0) {\n            exit = true;\n            break;\n          }\n        } else {\n          array[dest++] = tmp[cursor1++];\n          count1++;\n          count2 = 0;\n\n          if (--length1 === 1) {\n            exit = true;\n            break;\n          }\n        }\n      } while ((count1 | count2) < _minGallop);\n\n      if (exit) {\n        break;\n      }\n\n      do {\n        count1 = gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\n\n        if (count1 !== 0) {\n          for (i = 0; i < count1; i++) {\n            array[dest + i] = tmp[cursor1 + i];\n          }\n\n          dest += count1;\n          cursor1 += count1;\n          length1 -= count1;\n\n          if (length1 <= 1) {\n            exit = true;\n            break;\n          }\n        }\n\n        array[dest++] = array[cursor2++];\n\n        if (--length2 === 0) {\n          exit = true;\n          break;\n        }\n\n        count2 = gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\n\n        if (count2 !== 0) {\n          for (i = 0; i < count2; i++) {\n            array[dest + i] = array[cursor2 + i];\n          }\n\n          dest += count2;\n          cursor2 += count2;\n          length2 -= count2;\n\n          if (length2 === 0) {\n            exit = true;\n            break;\n          }\n        }\n\n        array[dest++] = tmp[cursor1++];\n\n        if (--length1 === 1) {\n          exit = true;\n          break;\n        }\n\n        _minGallop--;\n      } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n\n      if (exit) {\n        break;\n      }\n\n      if (_minGallop < 0) {\n        _minGallop = 0;\n      }\n\n      _minGallop += 2;\n    }\n\n    minGallop = _minGallop;\n    minGallop < 1 && (minGallop = 1);\n\n    if (length1 === 1) {\n      for (i = 0; i < length2; i++) {\n        array[dest + i] = array[cursor2 + i];\n      }\n\n      array[dest + length2] = tmp[cursor1];\n    } else if (length1 === 0) {\n      throw new Error(); // throw new Error('mergeLow preconditions were not respected');\n    } else {\n      for (i = 0; i < length1; i++) {\n        array[dest + i] = tmp[cursor1 + i];\n      }\n    }\n  }\n\n  function mergeHigh(start1, length1, start2, length2) {\n    var i = 0;\n\n    for (i = 0; i < length2; i++) {\n      tmp[i] = array[start2 + i];\n    }\n\n    var cursor1 = start1 + length1 - 1;\n    var cursor2 = length2 - 1;\n    var dest = start2 + length2 - 1;\n    var customCursor = 0;\n    var customDest = 0;\n    array[dest--] = array[cursor1--];\n\n    if (--length1 === 0) {\n      customCursor = dest - (length2 - 1);\n\n      for (i = 0; i < length2; i++) {\n        array[customCursor + i] = tmp[i];\n      }\n\n      return;\n    }\n\n    if (length2 === 1) {\n      dest -= length1;\n      cursor1 -= length1;\n      customDest = dest + 1;\n      customCursor = cursor1 + 1;\n\n      for (i = length1 - 1; i >= 0; i--) {\n        array[customDest + i] = array[customCursor + i];\n      }\n\n      array[dest] = tmp[cursor2];\n      return;\n    }\n\n    var _minGallop = minGallop;\n\n    while (true) {\n      var count1 = 0;\n      var count2 = 0;\n      var exit = false;\n\n      do {\n        if (compare(tmp[cursor2], array[cursor1]) < 0) {\n          array[dest--] = array[cursor1--];\n          count1++;\n          count2 = 0;\n\n          if (--length1 === 0) {\n            exit = true;\n            break;\n          }\n        } else {\n          array[dest--] = tmp[cursor2--];\n          count2++;\n          count1 = 0;\n\n          if (--length2 === 1) {\n            exit = true;\n            break;\n          }\n        }\n      } while ((count1 | count2) < _minGallop);\n\n      if (exit) {\n        break;\n      }\n\n      do {\n        count1 = length1 - gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\n\n        if (count1 !== 0) {\n          dest -= count1;\n          cursor1 -= count1;\n          length1 -= count1;\n          customDest = dest + 1;\n          customCursor = cursor1 + 1;\n\n          for (i = count1 - 1; i >= 0; i--) {\n            array[customDest + i] = array[customCursor + i];\n          }\n\n          if (length1 === 0) {\n            exit = true;\n            break;\n          }\n        }\n\n        array[dest--] = tmp[cursor2--];\n\n        if (--length2 === 1) {\n          exit = true;\n          break;\n        }\n\n        count2 = length2 - gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\n\n        if (count2 !== 0) {\n          dest -= count2;\n          cursor2 -= count2;\n          length2 -= count2;\n          customDest = dest + 1;\n          customCursor = cursor2 + 1;\n\n          for (i = 0; i < count2; i++) {\n            array[customDest + i] = tmp[customCursor + i];\n          }\n\n          if (length2 <= 1) {\n            exit = true;\n            break;\n          }\n        }\n\n        array[dest--] = array[cursor1--];\n\n        if (--length1 === 0) {\n          exit = true;\n          break;\n        }\n\n        _minGallop--;\n      } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n\n      if (exit) {\n        break;\n      }\n\n      if (_minGallop < 0) {\n        _minGallop = 0;\n      }\n\n      _minGallop += 2;\n    }\n\n    minGallop = _minGallop;\n\n    if (minGallop < 1) {\n      minGallop = 1;\n    }\n\n    if (length2 === 1) {\n      dest -= length1;\n      cursor1 -= length1;\n      customDest = dest + 1;\n      customCursor = cursor1 + 1;\n\n      for (i = length1 - 1; i >= 0; i--) {\n        array[customDest + i] = array[customCursor + i];\n      }\n\n      array[dest] = tmp[cursor2];\n    } else if (length2 === 0) {\n      throw new Error(); // throw new Error('mergeHigh preconditions were not respected');\n    } else {\n      customCursor = dest - (length2 - 1);\n\n      for (i = 0; i < length2; i++) {\n        array[customCursor + i] = tmp[i];\n      }\n    }\n  }\n\n  this.mergeRuns = mergeRuns;\n  this.forceMergeRuns = forceMergeRuns;\n  this.pushRun = pushRun;\n}\n\nfunction sort(array, compare, lo, hi) {\n  if (!lo) {\n    lo = 0;\n  }\n\n  if (!hi) {\n    hi = array.length;\n  }\n\n  var remaining = hi - lo;\n\n  if (remaining < 2) {\n    return;\n  }\n\n  var runLength = 0;\n\n  if (remaining < DEFAULT_MIN_MERGE) {\n    runLength = makeAscendingRun(array, lo, hi, compare);\n    binaryInsertionSort(array, lo, hi, lo + runLength, compare);\n    return;\n  }\n\n  var ts = new TimSort(array, compare);\n  var minRun = minRunLength(remaining);\n\n  do {\n    runLength = makeAscendingRun(array, lo, hi, compare);\n\n    if (runLength < minRun) {\n      var force = remaining;\n\n      if (force > minRun) {\n        force = minRun;\n      }\n\n      binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\n      runLength = force;\n    }\n\n    ts.pushRun(lo, runLength);\n    ts.mergeRuns();\n    remaining -= runLength;\n    lo += runLength;\n  } while (remaining !== 0);\n\n  ts.forceMergeRuns();\n}\n\nmodule.exports = sort;","/**\n * @module zrender/core/util\n */\n// mergeDate\nvar BUILTIN_OBJECT = {\n  '[object Function]': 1,\n  '[object RegExp]': 1,\n  '[object Date]': 1,\n  '[object Error]': 1,\n  '[object CanvasGradient]': 1,\n  '[object CanvasPattern]': 1,\n  // For node-canvas\n  '[object Image]': 1,\n  '[object Canvas]': 1\n};\nvar TYPED_ARRAY = {\n  '[object Int8Array]': 1,\n  '[object Uint8Array]': 1,\n  '[object Uint8ClampedArray]': 1,\n  '[object Int16Array]': 1,\n  '[object Uint16Array]': 1,\n  '[object Int32Array]': 1,\n  '[object Uint32Array]': 1,\n  '[object Float32Array]': 1,\n  '[object Float64Array]': 1\n};\nvar objToString = Object.prototype.toString;\nvar arrayProto = Array.prototype;\nvar nativeForEach = arrayProto.forEach;\nvar nativeFilter = arrayProto.filter;\nvar nativeSlice = arrayProto.slice;\nvar nativeMap = arrayProto.map;\nvar nativeReduce = arrayProto.reduce; // Avoid assign to an exported variable, for transforming to cjs.\n\nvar methods = {};\n\nfunction $override(name, fn) {\n  methods[name] = fn;\n}\n/**\n * Those data types can be cloned:\n *     Plain object, Array, TypedArray, number, string, null, undefined.\n * Those data types will be assgined using the orginal data:\n *     BUILTIN_OBJECT\n * Instance of user defined class will be cloned to a plain object, without\n * properties in prototype.\n * Other data types is not supported (not sure what will happen).\n *\n * Caution: do not support clone Date, for performance consideration.\n * (There might be a large number of date in `series.data`).\n * So date should not be modified in and out of echarts.\n *\n * @param {*} source\n * @return {*} new\n */\n\n\nfunction clone(source) {\n  if (source == null || typeof source != 'object') {\n    return source;\n  }\n\n  var result = source;\n  var typeStr = objToString.call(source);\n\n  if (typeStr === '[object Array]') {\n    result = [];\n\n    for (var i = 0, len = source.length; i < len; i++) {\n      result[i] = clone(source[i]);\n    }\n  } else if (TYPED_ARRAY[typeStr]) {\n    var Ctor = source.constructor;\n\n    if (source.constructor.from) {\n      result = Ctor.from(source);\n    } else {\n      result = new Ctor(source.length);\n\n      for (var i = 0, len = source.length; i < len; i++) {\n        result[i] = clone(source[i]);\n      }\n    }\n  } else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n    result = {};\n\n    for (var key in source) {\n      if (source.hasOwnProperty(key)) {\n        result[key] = clone(source[key]);\n      }\n    }\n  }\n\n  return result;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} target\n * @param {*} source\n * @param {boolean} [overwrite=false]\n */\n\n\nfunction merge(target, source, overwrite) {\n  // We should escapse that source is string\n  // and enter for ... in ...\n  if (!isObject(source) || !isObject(target)) {\n    return overwrite ? clone(source) : target;\n  }\n\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      var targetProp = target[key];\n      var sourceProp = source[key];\n\n      if (isObject(sourceProp) && isObject(targetProp) && !isArray(sourceProp) && !isArray(targetProp) && !isDom(sourceProp) && !isDom(targetProp) && !isBuiltInObject(sourceProp) && !isBuiltInObject(targetProp) && !isPrimitive(sourceProp) && !isPrimitive(targetProp)) {\n        // merge\n        merge(targetProp, sourceProp, overwrite);\n      } else if (overwrite || !(key in target)) {\n        // overwritetrue\n        // NOTE target[key] \n        target[key] = clone(source[key], true);\n      }\n    }\n  }\n\n  return target;\n}\n/**\n * @param {Array} targetAndSources The first item is target, and the rests are source.\n * @param {boolean} [overwrite=false]\n * @return {*} target\n */\n\n\nfunction mergeAll(targetAndSources, overwrite) {\n  var result = targetAndSources[0];\n\n  for (var i = 1, len = targetAndSources.length; i < len; i++) {\n    result = merge(result, targetAndSources[i], overwrite);\n  }\n\n  return result;\n}\n/**\n * @param {*} target\n * @param {*} source\n * @memberOf module:zrender/core/util\n */\n\n\nfunction extend(target, source) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n/**\n * @param {*} target\n * @param {*} source\n * @param {boolean} [overlay=false]\n * @memberOf module:zrender/core/util\n */\n\n\nfunction defaults(target, source, overlay) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key) && (overlay ? source[key] != null : target[key] == null)) {\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nvar createCanvas = function () {\n  return methods.createCanvas();\n};\n\nmethods.createCanvas = function () {\n  return document.createElement('canvas');\n}; // FIXME\n\n\nvar _ctx;\n\nfunction getContext() {\n  if (!_ctx) {\n    // Use util.createCanvas instead of createCanvas\n    // because createCanvas may be overwritten in different environment\n    _ctx = createCanvas().getContext('2d');\n  }\n\n  return _ctx;\n}\n/**\n * index\n * @memberOf module:zrender/core/util\n */\n\n\nfunction indexOf(array, value) {\n  if (array) {\n    if (array.indexOf) {\n      return array.indexOf(value);\n    }\n\n    for (var i = 0, len = array.length; i < len; i++) {\n      if (array[i] === value) {\n        return i;\n      }\n    }\n  }\n\n  return -1;\n}\n/**\n * \n *\n * @memberOf module:zrender/core/util\n * @param {Function} clazz \n * @param {Function} baseClazz \n */\n\n\nfunction inherits(clazz, baseClazz) {\n  var clazzPrototype = clazz.prototype;\n\n  function F() {}\n\n  F.prototype = baseClazz.prototype;\n  clazz.prototype = new F();\n\n  for (var prop in clazzPrototype) {\n    clazz.prototype[prop] = clazzPrototype[prop];\n  }\n\n  clazz.prototype.constructor = clazz;\n  clazz.superClass = baseClazz;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Object|Function} target\n * @param {Object|Function} sorce\n * @param {boolean} overlay\n */\n\n\nfunction mixin(target, source, overlay) {\n  target = 'prototype' in target ? target.prototype : target;\n  source = 'prototype' in source ? source.prototype : source;\n  defaults(target, source, overlay);\n}\n/**\n * Consider typed array.\n * @param {Array|TypedArray} data\n */\n\n\nfunction isArrayLike(data) {\n  if (!data) {\n    return;\n  }\n\n  if (typeof data == 'string') {\n    return false;\n  }\n\n  return typeof data.length == 'number';\n}\n/**\n * \n * @memberOf module:zrender/core/util\n * @param {Object|Array} obj\n * @param {Function} cb\n * @param {*} [context]\n */\n\n\nfunction each(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.forEach && obj.forEach === nativeForEach) {\n    obj.forEach(cb, context);\n  } else if (obj.length === +obj.length) {\n    for (var i = 0, len = obj.length; i < len; i++) {\n      cb.call(context, obj[i], i, obj);\n    }\n  } else {\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        cb.call(context, obj[key], key, obj);\n      }\n    }\n  }\n}\n/**\n * \n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {Array}\n */\n\n\nfunction map(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.map && obj.map === nativeMap) {\n    return obj.map(cb, context);\n  } else {\n    var result = [];\n\n    for (var i = 0, len = obj.length; i < len; i++) {\n      result.push(cb.call(context, obj[i], i, obj));\n    }\n\n    return result;\n  }\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {Object} [memo]\n * @param {*} [context]\n * @return {Array}\n */\n\n\nfunction reduce(obj, cb, memo, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.reduce && obj.reduce === nativeReduce) {\n    return obj.reduce(cb, memo, context);\n  } else {\n    for (var i = 0, len = obj.length; i < len; i++) {\n      memo = cb.call(context, memo, obj[i], i, obj);\n    }\n\n    return memo;\n  }\n}\n/**\n * \n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {Array}\n */\n\n\nfunction filter(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.filter && obj.filter === nativeFilter) {\n    return obj.filter(cb, context);\n  } else {\n    var result = [];\n\n    for (var i = 0, len = obj.length; i < len; i++) {\n      if (cb.call(context, obj[i], i, obj)) {\n        result.push(obj[i]);\n      }\n    }\n\n    return result;\n  }\n}\n/**\n * \n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {*}\n */\n\n\nfunction find(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  for (var i = 0, len = obj.length; i < len; i++) {\n    if (cb.call(context, obj[i], i, obj)) {\n      return obj[i];\n    }\n  }\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Function} func\n * @param {*} context\n * @return {Function}\n */\n\n\nfunction bind(func, context) {\n  var args = nativeSlice.call(arguments, 2);\n  return function () {\n    return func.apply(context, args.concat(nativeSlice.call(arguments)));\n  };\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Function} func\n * @return {Function}\n */\n\n\nfunction curry(func) {\n  var args = nativeSlice.call(arguments, 1);\n  return function () {\n    return func.apply(this, args.concat(nativeSlice.call(arguments)));\n  };\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isArray(value) {\n  return objToString.call(value) === '[object Array]';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isString(value) {\n  return objToString.call(value) === '[object String]';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return type === 'function' || !!value && type == 'object';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isBuiltInObject(value) {\n  return !!BUILTIN_OBJECT[objToString.call(value)];\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isDom(value) {\n  return typeof value === 'object' && typeof value.nodeType === 'number' && typeof value.ownerDocument === 'object';\n}\n/**\n * Whether is exactly NaN. Notice isNaN('a') returns true.\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction eqNaN(value) {\n  return value !== value;\n}\n/**\n * If value1 is not null, then return value1, otherwise judget rest of values.\n * Low performance.\n * @memberOf module:zrender/core/util\n * @return {*} Final value\n */\n\n\nfunction retrieve(values) {\n  for (var i = 0, len = arguments.length; i < len; i++) {\n    if (arguments[i] != null) {\n      return arguments[i];\n    }\n  }\n}\n\nfunction retrieve2(value0, value1) {\n  return value0 != null ? value0 : value1;\n}\n\nfunction retrieve3(value0, value1, value2) {\n  return value0 != null ? value0 : value1 != null ? value1 : value2;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Array} arr\n * @param {number} startIndex\n * @param {number} endIndex\n * @return {Array}\n */\n\n\nfunction slice() {\n  return Function.call.apply(nativeSlice, arguments);\n}\n/**\n * Normalize css liked array configuration\n * e.g.\n *  3 => [3, 3, 3, 3]\n *  [4, 2] => [4, 2, 4, 2]\n *  [4, 3, 2] => [4, 3, 2, 3]\n * @param {number|Array.<number>} val\n * @return {Array.<number>}\n */\n\n\nfunction normalizeCssArray(val) {\n  if (typeof val === 'number') {\n    return [val, val, val, val];\n  }\n\n  var len = val.length;\n\n  if (len === 2) {\n    // vertical | horizontal\n    return [val[0], val[1], val[0], val[1]];\n  } else if (len === 3) {\n    // top | horizontal | bottom\n    return [val[0], val[1], val[2], val[1]];\n  }\n\n  return val;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {boolean} condition\n * @param {string} message\n */\n\n\nfunction assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n\nvar primitiveKey = '__ec_primitive__';\n/**\n * Set an object as primitive to be ignored traversing children in clone or merge\n */\n\nfunction setAsPrimitive(obj) {\n  obj[primitiveKey] = true;\n}\n\nfunction isPrimitive(obj) {\n  return obj[primitiveKey];\n}\n/**\n * @constructor\n * @param {Object} obj Only apply `ownProperty`.\n */\n\n\nfunction HashMap(obj) {\n  obj && each(obj, function (value, key) {\n    this.set(key, value);\n  }, this);\n} // Add prefix to avoid conflict with Object.prototype.\n\n\nvar HASH_MAP_PREFIX = '_ec_';\nvar HASH_MAP_PREFIX_LENGTH = 4;\nHashMap.prototype = {\n  constructor: HashMap,\n  // Do not provide `has` method to avoid defining what is `has`.\n  // (We usually treat `null` and `undefined` as the same, different\n  // from ES6 Map).\n  get: function (key) {\n    return this[HASH_MAP_PREFIX + key];\n  },\n  set: function (key, value) {\n    this[HASH_MAP_PREFIX + key] = value; // Comparing with invocation chaining, `return value` is more commonly\n    // used in this case: `var someVal = map.set('a', genVal());`\n\n    return value;\n  },\n  // Although util.each can be performed on this hashMap directly, user\n  // should not use the exposed keys, who are prefixed.\n  each: function (cb, context) {\n    context !== void 0 && (cb = bind(cb, context));\n\n    for (var prefixedKey in this) {\n      this.hasOwnProperty(prefixedKey) && cb(this[prefixedKey], prefixedKey.slice(HASH_MAP_PREFIX_LENGTH));\n    }\n  },\n  // Do not use this method if performance sensitive.\n  removeKey: function (key) {\n    delete this[HASH_MAP_PREFIX + key];\n  }\n};\n\nfunction createHashMap(obj) {\n  return new HashMap(obj);\n}\n\nfunction noop() {}\n\nexports.$override = $override;\nexports.clone = clone;\nexports.merge = merge;\nexports.mergeAll = mergeAll;\nexports.extend = extend;\nexports.defaults = defaults;\nexports.createCanvas = createCanvas;\nexports.getContext = getContext;\nexports.indexOf = indexOf;\nexports.inherits = inherits;\nexports.mixin = mixin;\nexports.isArrayLike = isArrayLike;\nexports.each = each;\nexports.map = map;\nexports.reduce = reduce;\nexports.filter = filter;\nexports.find = find;\nexports.bind = bind;\nexports.curry = curry;\nexports.isArray = isArray;\nexports.isFunction = isFunction;\nexports.isString = isString;\nexports.isObject = isObject;\nexports.isBuiltInObject = isBuiltInObject;\nexports.isDom = isDom;\nexports.eqNaN = eqNaN;\nexports.retrieve = retrieve;\nexports.retrieve2 = retrieve2;\nexports.retrieve3 = retrieve3;\nexports.slice = slice;\nexports.normalizeCssArray = normalizeCssArray;\nexports.assert = assert;\nexports.setAsPrimitive = setAsPrimitive;\nexports.isPrimitive = isPrimitive;\nexports.createHashMap = createHashMap;\nexports.noop = noop;","var ArrayCtor = typeof Float32Array === 'undefined' ? Array : Float32Array;\n/**\n * \n * @param {number} [x=0]\n * @param {number} [y=0]\n * @return {Vector2}\n */\n\nfunction create(x, y) {\n  var out = new ArrayCtor(2);\n\n  if (x == null) {\n    x = 0;\n  }\n\n  if (y == null) {\n    y = 0;\n  }\n\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v\n * @return {Vector2}\n */\n\n\nfunction copy(out, v) {\n  out[0] = v[0];\n  out[1] = v[1];\n  return out;\n}\n/**\n * \n * @param {Vector2} v\n * @return {Vector2}\n */\n\n\nfunction clone(v) {\n  var out = new ArrayCtor(2);\n  out[0] = v[0];\n  out[1] = v[1];\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {number} a\n * @param {number} b\n * @return {Vector2} \n */\n\n\nfunction set(out, a, b) {\n  out[0] = a;\n  out[1] = b;\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\n\nfunction add(out, v1, v2) {\n  out[0] = v1[0] + v2[0];\n  out[1] = v1[1] + v2[1];\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @param {number} a\n */\n\n\nfunction scaleAndAdd(out, v1, v2, a) {\n  out[0] = v1[0] + v2[0] * a;\n  out[1] = v1[1] + v2[1] * a;\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\n\nfunction sub(out, v1, v2) {\n  out[0] = v1[0] - v2[0];\n  out[1] = v1[1] - v2[1];\n  return out;\n}\n/**\n * \n * @param {Vector2} v\n * @return {number}\n */\n\n\nfunction len(v) {\n  return Math.sqrt(lenSquare(v));\n}\n\nvar length = len; // jshint ignore:line\n\n/**\n * \n * @param {Vector2} v\n * @return {number}\n */\n\nfunction lenSquare(v) {\n  return v[0] * v[0] + v[1] * v[1];\n}\n\nvar lengthSquare = lenSquare;\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\nfunction mul(out, v1, v2) {\n  out[0] = v1[0] * v2[0];\n  out[1] = v1[1] * v2[1];\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\n\nfunction div(out, v1, v2) {\n  out[0] = v1[0] / v2[0];\n  out[1] = v1[1] / v2[1];\n  return out;\n}\n/**\n * \n * @param {Vector2} v1\n * @param {Vector2} v2\n * @return {number}\n */\n\n\nfunction dot(v1, v2) {\n  return v1[0] * v2[0] + v1[1] * v2[1];\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v\n * @param {number} s\n */\n\n\nfunction scale(out, v, s) {\n  out[0] = v[0] * s;\n  out[1] = v[1] * s;\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v\n */\n\n\nfunction normalize(out, v) {\n  var d = len(v);\n\n  if (d === 0) {\n    out[0] = 0;\n    out[1] = 0;\n  } else {\n    out[0] = v[0] / d;\n    out[1] = v[1] / d;\n  }\n\n  return out;\n}\n/**\n * \n * @param {Vector2} v1\n * @param {Vector2} v2\n * @return {number}\n */\n\n\nfunction distance(v1, v2) {\n  return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]));\n}\n\nvar dist = distance;\n/**\n * \n * @param {Vector2} v1\n * @param {Vector2} v2\n * @return {number}\n */\n\nfunction distanceSquare(v1, v2) {\n  return (v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n}\n\nvar distSquare = distanceSquare;\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v\n */\n\nfunction negate(out, v) {\n  out[0] = -v[0];\n  out[1] = -v[1];\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @param {number} t\n */\n\n\nfunction lerp(out, v1, v2, t) {\n  out[0] = v1[0] + t * (v2[0] - v1[0]);\n  out[1] = v1[1] + t * (v2[1] - v1[1]);\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v\n * @param {Vector2} m\n */\n\n\nfunction applyTransform(out, v, m) {\n  var x = v[0];\n  var y = v[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * \n * @param  {Vector2} out\n * @param  {Vector2} v1\n * @param  {Vector2} v2\n */\n\n\nfunction min(out, v1, v2) {\n  out[0] = Math.min(v1[0], v2[0]);\n  out[1] = Math.min(v1[1], v2[1]);\n  return out;\n}\n/**\n * \n * @param  {Vector2} out\n * @param  {Vector2} v1\n * @param  {Vector2} v2\n */\n\n\nfunction max(out, v1, v2) {\n  out[0] = Math.max(v1[0], v2[0]);\n  out[1] = Math.max(v1[1], v2[1]);\n  return out;\n}\n\nexports.create = create;\nexports.copy = copy;\nexports.clone = clone;\nexports.set = set;\nexports.add = add;\nexports.scaleAndAdd = scaleAndAdd;\nexports.sub = sub;\nexports.len = len;\nexports.length = length;\nexports.lenSquare = lenSquare;\nexports.lengthSquare = lengthSquare;\nexports.mul = mul;\nexports.div = div;\nexports.dot = dot;\nexports.scale = scale;\nexports.normalize = normalize;\nexports.distance = distance;\nexports.dist = dist;\nexports.distanceSquare = distanceSquare;\nexports.distSquare = distSquare;\nexports.negate = negate;\nexports.lerp = lerp;\nexports.applyTransform = applyTransform;\nexports.min = min;\nexports.max = max;","var _event = require(\"../core/event\");\n\nvar addEventListener = _event.addEventListener;\nvar removeEventListener = _event.removeEventListener;\nvar normalizeEvent = _event.normalizeEvent;\n\nvar zrUtil = require(\"../core/util\");\n\nvar Eventful = require(\"../mixin/Eventful\");\n\nvar env = require(\"../core/env\");\n\nvar GestureMgr = require(\"../core/GestureMgr\");\n\nvar TOUCH_CLICK_DELAY = 300;\nvar mouseHandlerNames = ['click', 'dblclick', 'mousewheel', 'mouseout', 'mouseup', 'mousedown', 'mousemove', 'contextmenu'];\nvar touchHandlerNames = ['touchstart', 'touchend', 'touchmove'];\nvar pointerEventNames = {\n  pointerdown: 1,\n  pointerup: 1,\n  pointermove: 1,\n  pointerout: 1\n};\nvar pointerHandlerNames = zrUtil.map(mouseHandlerNames, function (name) {\n  var nm = name.replace('mouse', 'pointer');\n  return pointerEventNames[nm] ? nm : name;\n});\n\nfunction eventNameFix(name) {\n  return name === 'mousewheel' && env.browser.firefox ? 'DOMMouseScroll' : name;\n}\n\nfunction processGesture(proxy, event, stage) {\n  var gestureMgr = proxy._gestureMgr;\n  stage === 'start' && gestureMgr.clear();\n  var gestureInfo = gestureMgr.recognize(event, proxy.handler.findHover(event.zrX, event.zrY, null).target, proxy.dom);\n  stage === 'end' && gestureMgr.clear(); // Do not do any preventDefault here. Upper application do that if necessary.\n\n  if (gestureInfo) {\n    var type = gestureInfo.type;\n    event.gestureEvent = type;\n    proxy.handler.dispatchToElement({\n      target: gestureInfo.target\n    }, type, gestureInfo.event);\n  }\n} // function onMSGestureChange(proxy, event) {\n//     if (event.translationX || event.translationY) {\n//         // mousemove is carried by MSGesture to reduce the sensitivity.\n//         proxy.handler.dispatchToElement(event.target, 'mousemove', event);\n//     }\n//     if (event.scale !== 1) {\n//         event.pinchX = event.offsetX;\n//         event.pinchY = event.offsetY;\n//         event.pinchScale = event.scale;\n//         proxy.handler.dispatchToElement(event.target, 'pinch', event);\n//     }\n// }\n\n/**\n * Prevent mouse event from being dispatched after Touch Events action\n * @see <https://github.com/deltakosh/handjs/blob/master/src/hand.base.js>\n * 1. Mobile browsers dispatch mouse events 300ms after touchend.\n * 2. Chrome for Android dispatch mousedown for long-touch about 650ms\n * Result: Blocking Mouse Events for 700ms.\n */\n\n\nfunction setTouchTimer(instance) {\n  instance._touching = true;\n  clearTimeout(instance._touchTimer);\n  instance._touchTimer = setTimeout(function () {\n    instance._touching = false;\n  }, 700);\n}\n\nvar domHandlers = {\n  /**\n   * Mouse move handler\n   * @inner\n   * @param {Event} event\n   */\n  mousemove: function (event) {\n    event = normalizeEvent(this.dom, event);\n    this.trigger('mousemove', event);\n  },\n\n  /**\n   * Mouse out handler\n   * @inner\n   * @param {Event} event\n   */\n  mouseout: function (event) {\n    event = normalizeEvent(this.dom, event);\n    var element = event.toElement || event.relatedTarget;\n\n    if (element != this.dom) {\n      while (element && element.nodeType != 9) {\n        // rootdommouseOut\n        if (element === this.dom) {\n          return;\n        }\n\n        element = element.parentNode;\n      }\n    }\n\n    this.trigger('mouseout', event);\n  },\n\n  /**\n   * Touch\n   * @inner\n   * @param {Event} event\n   */\n  touchstart: function (event) {\n    // Default mouse behaviour should not be disabled here.\n    // For example, page may needs to be slided.\n    event = normalizeEvent(this.dom, event); // Mark touch, which is useful in distinguish touch and\n    // mouse event in upper applicatoin.\n\n    event.zrByTouch = true;\n    this._lastTouchMoment = new Date();\n    processGesture(this, event, 'start'); // In touch device, trigger `mousemove`(`mouseover`) should\n    // be triggered, and must before `mousedown` triggered.\n\n    domHandlers.mousemove.call(this, event);\n    domHandlers.mousedown.call(this, event);\n    setTouchTimer(this);\n  },\n\n  /**\n   * Touch\n   * @inner\n   * @param {Event} event\n   */\n  touchmove: function (event) {\n    event = normalizeEvent(this.dom, event); // Mark touch, which is useful in distinguish touch and\n    // mouse event in upper applicatoin.\n\n    event.zrByTouch = true;\n    processGesture(this, event, 'change'); // Mouse move should always be triggered no matter whether\n    // there is gestrue event, because mouse move and pinch may\n    // be used at the same time.\n\n    domHandlers.mousemove.call(this, event);\n    setTouchTimer(this);\n  },\n\n  /**\n   * Touch\n   * @inner\n   * @param {Event} event\n   */\n  touchend: function (event) {\n    event = normalizeEvent(this.dom, event); // Mark touch, which is useful in distinguish touch and\n    // mouse event in upper applicatoin.\n\n    event.zrByTouch = true;\n    processGesture(this, event, 'end');\n    domHandlers.mouseup.call(this, event); // Do not trigger `mouseout` here, in spite of `mousemove`(`mouseover`) is\n    // triggered in `touchstart`. This seems to be illogical, but by this mechanism,\n    // we can conveniently implement \"hover style\" in both PC and touch device just\n    // by listening to `mouseover` to add \"hover style\" and listening to `mouseout`\n    // to remove \"hover style\" on an element, without any additional code for\n    // compatibility. (`mouseout` will not be triggered in `touchend`, so \"hover\n    // style\" will remain for user view)\n    // click event should always be triggered no matter whether\n    // there is gestrue event. System click can not be prevented.\n\n    if (+new Date() - this._lastTouchMoment < TOUCH_CLICK_DELAY) {\n      domHandlers.click.call(this, event);\n    }\n\n    setTouchTimer(this);\n  },\n  pointerdown: function (event) {\n    domHandlers.mousedown.call(this, event); // if (useMSGuesture(this, event)) {\n    //     this._msGesture.addPointer(event.pointerId);\n    // }\n  },\n  pointermove: function (event) {\n    // FIXME\n    // pointermove is so sensitive that it always triggered when\n    // tap(click) on touch screen, which affect some judgement in\n    // upper application. So, we dont support mousemove on MS touch\n    // device yet.\n    if (!isPointerFromTouch(event)) {\n      domHandlers.mousemove.call(this, event);\n    }\n  },\n  pointerup: function (event) {\n    domHandlers.mouseup.call(this, event);\n  },\n  pointerout: function (event) {\n    // pointerout will be triggered when tap on touch screen\n    // (IE11+/Edge on MS Surface) after click event triggered,\n    // which is inconsistent with the mousout behavior we defined\n    // in touchend. So we unify them.\n    // (check domHandlers.touchend for detailed explanation)\n    if (!isPointerFromTouch(event)) {\n      domHandlers.mouseout.call(this, event);\n    }\n  }\n};\n\nfunction isPointerFromTouch(event) {\n  var pointerType = event.pointerType;\n  return pointerType === 'pen' || pointerType === 'touch';\n} // function useMSGuesture(handlerProxy, event) {\n//     return isPointerFromTouch(event) && !!handlerProxy._msGesture;\n// }\n// Common handlers\n\n\nzrUtil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n  domHandlers[name] = function (event) {\n    event = normalizeEvent(this.dom, event);\n    this.trigger(name, event);\n  };\n});\n/**\n * dom \n *\n * @inner\n * @param {module:zrender/Handler} instance \n */\n\nfunction initDomHandler(instance) {\n  zrUtil.each(touchHandlerNames, function (name) {\n    instance._handlers[name] = zrUtil.bind(domHandlers[name], instance);\n  });\n  zrUtil.each(pointerHandlerNames, function (name) {\n    instance._handlers[name] = zrUtil.bind(domHandlers[name], instance);\n  });\n  zrUtil.each(mouseHandlerNames, function (name) {\n    instance._handlers[name] = makeMouseHandler(domHandlers[name], instance);\n  });\n\n  function makeMouseHandler(fn, instance) {\n    return function () {\n      if (instance._touching) {\n        return;\n      }\n\n      return fn.apply(instance, arguments);\n    };\n  }\n}\n\nfunction HandlerDomProxy(dom) {\n  Eventful.call(this);\n  this.dom = dom;\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  this._touching = false;\n  /**\n   * @private\n   * @type {number}\n   */\n\n  this._touchTimer;\n  /**\n   * @private\n   * @type {module:zrender/core/GestureMgr}\n   */\n\n  this._gestureMgr = new GestureMgr();\n  this._handlers = {};\n  initDomHandler(this);\n\n  if (env.pointerEventsSupported) {\n    // Only IE11+/Edge\n    // 1. On devices that both enable touch and mouse (e.g., MS Surface and lenovo X240),\n    // IE11+/Edge do not trigger touch event, but trigger pointer event and mouse event\n    // at the same time.\n    // 2. On MS Surface, it probablely only trigger mousedown but no mouseup when tap on\n    // screen, which do not occurs in pointer event.\n    // So we use pointer event to both detect touch gesture and mouse behavior.\n    mountHandlers(pointerHandlerNames, this); // FIXME\n    // Note: MS Gesture require CSS touch-action set. But touch-action is not reliable,\n    // which does not prevent defuault behavior occasionally (which may cause view port\n    // zoomed in but use can not zoom it back). And event.preventDefault() does not work.\n    // So we have to not to use MSGesture and not to support touchmove and pinch on MS\n    // touch screen. And we only support click behavior on MS touch screen now.\n    // MS Gesture Event is only supported on IE11+/Edge and on Windows 8+.\n    // We dont support touch on IE on win7.\n    // See <https://msdn.microsoft.com/en-us/library/dn433243(v=vs.85).aspx>\n    // if (typeof MSGesture === 'function') {\n    //     (this._msGesture = new MSGesture()).target = dom; // jshint ignore:line\n    //     dom.addEventListener('MSGestureChange', onMSGestureChange);\n    // }\n  } else {\n    if (env.touchEventsSupported) {\n      mountHandlers(touchHandlerNames, this); // Handler of 'mouseout' event is needed in touch mode, which will be mounted below.\n      // addEventListener(root, 'mouseout', this._mouseoutHandler);\n    } // 1. Considering some devices that both enable touch and mouse event (like on MS Surface\n    // and lenovo X240, @see #2350), we make mouse event be always listened, otherwise\n    // mouse event can not be handle in those devices.\n    // 2. On MS Surface, Chrome will trigger both touch event and mouse event. How to prevent\n    // mouseevent after touch event triggered, see `setTouchTimer`.\n\n\n    mountHandlers(mouseHandlerNames, this);\n  }\n\n  function mountHandlers(handlerNames, instance) {\n    zrUtil.each(handlerNames, function (name) {\n      addEventListener(dom, eventNameFix(name), instance._handlers[name]);\n    }, instance);\n  }\n}\n\nvar handlerDomProxyProto = HandlerDomProxy.prototype;\n\nhandlerDomProxyProto.dispose = function () {\n  var handlerNames = mouseHandlerNames.concat(touchHandlerNames);\n\n  for (var i = 0; i < handlerNames.length; i++) {\n    var name = handlerNames[i];\n    removeEventListener(this.dom, eventNameFix(name), this._handlers[name]);\n  }\n};\n\nhandlerDomProxyProto.setCursor = function (cursorStyle) {\n  this.dom.style.cursor = cursorStyle || 'default';\n};\n\nzrUtil.mixin(HandlerDomProxy, Eventful);\nvar _default = HandlerDomProxy;\nmodule.exports = _default;","var Path = require(\"./Path\");\n\n// CompoundPath to improve performance\nvar _default = Path.extend({\n  type: 'compound',\n  shape: {\n    paths: null\n  },\n  _updatePathDirty: function () {\n    var dirtyPath = this.__dirtyPath;\n    var paths = this.shape.paths;\n\n    for (var i = 0; i < paths.length; i++) {\n      // Mark as dirty if any subpath is dirty\n      dirtyPath = dirtyPath || paths[i].__dirtyPath;\n    }\n\n    this.__dirtyPath = dirtyPath;\n    this.__dirty = this.__dirty || dirtyPath;\n  },\n  beforeBrush: function () {\n    this._updatePathDirty();\n\n    var paths = this.shape.paths || [];\n    var scale = this.getGlobalScale(); // Update path scale\n\n    for (var i = 0; i < paths.length; i++) {\n      if (!paths[i].path) {\n        paths[i].createPathProxy();\n      }\n\n      paths[i].path.setScale(scale[0], scale[1]);\n    }\n  },\n  buildPath: function (ctx, shape) {\n    var paths = shape.paths || [];\n\n    for (var i = 0; i < paths.length; i++) {\n      paths[i].buildPath(ctx, paths[i].shape, true);\n    }\n  },\n  afterBrush: function () {\n    var paths = this.shape.paths || [];\n\n    for (var i = 0; i < paths.length; i++) {\n      paths[i].__dirtyPath = false;\n    }\n  },\n  getBoundingRect: function () {\n    this._updatePathDirty();\n\n    return Path.prototype.getBoundingRect.call(this);\n  }\n});\n\nmodule.exports = _default;","var zrUtil = require(\"../core/util\");\n\nvar Style = require(\"./Style\");\n\nvar Element = require(\"../Element\");\n\nvar RectText = require(\"./mixin/RectText\");\n\n/**\n * \n * Base class of all displayable graphic objects\n * @module zrender/graphic/Displayable\n */\n\n/**\n * @alias module:zrender/graphic/Displayable\n * @extends module:zrender/Element\n * @extends module:zrender/graphic/mixin/RectText\n */\nfunction Displayable(opts) {\n  opts = opts || {};\n  Element.call(this, opts); // Extend properties\n\n  for (var name in opts) {\n    if (opts.hasOwnProperty(name) && name !== 'style') {\n      this[name] = opts[name];\n    }\n  }\n  /**\n   * @type {module:zrender/graphic/Style}\n   */\n\n\n  this.style = new Style(opts.style, this);\n  this._rect = null; // Shapes for cascade clipping.\n\n  this.__clipPaths = []; // FIXME Stateful must be mixined after style is setted\n  // Stateful.call(this, opts);\n}\n\nDisplayable.prototype = {\n  constructor: Displayable,\n  type: 'displayable',\n\n  /**\n   * Displayable Painter \n   * Dirty flag. From which painter will determine if this displayable object needs brush\n   * @name module:zrender/graphic/Displayable#__dirty\n   * @type {boolean}\n   */\n  __dirty: true,\n\n  /**\n   * true\n   * If ignore drawing of the displayable object. Mouse event will still be triggered\n   * @name module:/zrender/graphic/Displayable#invisible\n   * @type {boolean}\n   * @default false\n   */\n  invisible: false,\n\n  /**\n   * @name module:/zrender/graphic/Displayable#z\n   * @type {number}\n   * @default 0\n   */\n  z: 0,\n\n  /**\n   * @name module:/zrender/graphic/Displayable#z\n   * @type {number}\n   * @default 0\n   */\n  z2: 0,\n\n  /**\n   * zlevelcanvas\n   * @name module:/zrender/graphic/Displayable#zlevel\n   * @type {number}\n   * @default 0\n   */\n  zlevel: 0,\n\n  /**\n   * \n   * @name module:/zrender/graphic/Displayable#draggable\n   * @type {boolean}\n   * @default false\n   */\n  draggable: false,\n\n  /**\n   * \n   * @name module:/zrender/graphic/Displayable#draggable\n   * @type {boolean}\n   * @default false\n   */\n  dragging: false,\n\n  /**\n   * \n   * @name module:/zrender/graphic/Displayable#silent\n   * @type {boolean}\n   * @default false\n   */\n  silent: false,\n\n  /**\n   * If enable culling\n   * @type {boolean}\n   * @default false\n   */\n  culling: false,\n\n  /**\n   * Mouse cursor when hovered\n   * @name module:/zrender/graphic/Displayable#cursor\n   * @type {string}\n   */\n  cursor: 'pointer',\n\n  /**\n   * If hover area is bounding rect\n   * @name module:/zrender/graphic/Displayable#rectHover\n   * @type {string}\n   */\n  rectHover: false,\n\n  /**\n   * Render the element progressively when the value >= 0,\n   * usefull for large data.\n   * @type {number}\n   */\n  progressive: -1,\n  beforeBrush: function (ctx) {},\n  afterBrush: function (ctx) {},\n\n  /**\n   * \n   * @param {CanvasRenderingContext2D} ctx\n   */\n  // Interface\n  brush: function (ctx, prevEl) {},\n\n  /**\n   * \n   * @return {module:zrender/core/BoundingRect}\n   */\n  // Interface\n  getBoundingRect: function () {},\n\n  /**\n   *  x, y \n   * If displayable element contain coord x, y\n   * @param  {number} x\n   * @param  {number} y\n   * @return {boolean}\n   */\n  contain: function (x, y) {\n    return this.rectContain(x, y);\n  },\n\n  /**\n   * @param  {Function} cb\n   * @param  {}   context\n   */\n  traverse: function (cb, context) {\n    cb.call(context, this);\n  },\n\n  /**\n   *  x, y \n   * If bounding rect of element contain coord x, y\n   * @param  {number} x\n   * @param  {number} y\n   * @return {boolean}\n   */\n  rectContain: function (x, y) {\n    var coord = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    return rect.contain(coord[0], coord[1]);\n  },\n\n  /**\n   * \n   * Mark displayable element dirty and refresh next frame\n   */\n  dirty: function () {\n    this.__dirty = true;\n    this._rect = null;\n    this.__zr && this.__zr.refresh();\n  },\n\n  /**\n   * \n   * If displayable object binded any event\n   * @return {boolean}\n   */\n  // TODO,  bind \n  // isSilent: function () {\n  //     return !(\n  //         this.hoverable || this.draggable\n  //         || this.onmousemove || this.onmouseover || this.onmouseout\n  //         || this.onmousedown || this.onmouseup || this.onclick\n  //         || this.ondragenter || this.ondragover || this.ondragleave\n  //         || this.ondrop\n  //     );\n  // },\n\n  /**\n   * Alias for animate('style')\n   * @param {boolean} loop\n   */\n  animateStyle: function (loop) {\n    return this.animate('style', loop);\n  },\n  attrKV: function (key, value) {\n    if (key !== 'style') {\n      Element.prototype.attrKV.call(this, key, value);\n    } else {\n      this.style.set(value);\n    }\n  },\n\n  /**\n   * @param {Object|string} key\n   * @param {*} value\n   */\n  setStyle: function (key, value) {\n    this.style.set(key, value);\n    this.dirty(false);\n    return this;\n  },\n\n  /**\n   * Use given style object\n   * @param  {Object} obj\n   */\n  useStyle: function (obj) {\n    this.style = new Style(obj, this);\n    this.dirty(false);\n    return this;\n  }\n};\nzrUtil.inherits(Displayable, Element);\nzrUtil.mixin(Displayable, RectText); // zrUtil.mixin(Displayable, Stateful);\n\nvar _default = Displayable;\nmodule.exports = _default;","/**\n * @param {Array.<Object>} colorStops\n */\nvar Gradient = function (colorStops) {\n  this.colorStops = colorStops || [];\n};\n\nGradient.prototype = {\n  constructor: Gradient,\n  addColorStop: function (offset, color) {\n    this.colorStops.push({\n      offset: offset,\n      color: color\n    });\n  }\n};\nvar _default = Gradient;\nmodule.exports = _default;","var Displayable = require(\"./Displayable\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\nvar zrUtil = require(\"../core/util\");\n\nvar imageHelper = require(\"./helper/image\");\n\n/**\n * @alias zrender/graphic/Image\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\nfunction ZImage(opts) {\n  Displayable.call(this, opts);\n}\n\nZImage.prototype = {\n  constructor: ZImage,\n  type: 'image',\n  brush: function (ctx, prevEl) {\n    var style = this.style;\n    var src = style.image; // Must bind each time\n\n    style.bind(ctx, this, prevEl);\n    var image = this._image = imageHelper.createOrUpdateImage(src, this._image, this, this.onload);\n\n    if (!image || !imageHelper.isImageReady(image)) {\n      return;\n    } // \n    // if (image.nodeName.toUpperCase() == 'IMG') {\n    //     if (!image.complete) {\n    //         return;\n    //     }\n    // }\n    // Else is canvas\n\n\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = style.width;\n    var height = style.height;\n    var aspect = image.width / image.height;\n\n    if (width == null && height != null) {\n      // Keep image/height ratio\n      width = height * aspect;\n    } else if (height == null && width != null) {\n      height = width / aspect;\n    } else if (width == null && height == null) {\n      width = image.width;\n      height = image.height;\n    } // transform\n\n\n    this.setTransform(ctx);\n\n    if (style.sWidth && style.sHeight) {\n      var sx = style.sx || 0;\n      var sy = style.sy || 0;\n      ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    } else if (style.sx && style.sy) {\n      var sx = style.sx;\n      var sy = style.sy;\n      var sWidth = width - sx;\n      var sHeight = height - sy;\n      ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    } else {\n      ctx.drawImage(image, x, y, width, height);\n    }\n\n    this.restoreTransform(ctx); // Draw rect text\n\n    if (style.text != null) {\n      this.drawRectText(ctx, this.getBoundingRect());\n    }\n  },\n  getBoundingRect: function () {\n    var style = this.style;\n\n    if (!this._rect) {\n      this._rect = new BoundingRect(style.x || 0, style.y || 0, style.width || 0, style.height || 0);\n    }\n\n    return this._rect;\n  }\n};\nzrUtil.inherits(ZImage, Displayable);\nvar _default = ZImage;\nmodule.exports = _default;","var zrUtil = require(\"../core/util\");\n\nvar Gradient = require(\"./Gradient\");\n\n/**\n * x, y, x2, y2 are all percent from 0 to 1\n * @param {number} [x=0]\n * @param {number} [y=0]\n * @param {number} [x2=1]\n * @param {number} [y2=0]\n * @param {Array.<Object>} colorStops\n * @param {boolean} [globalCoord=false]\n */\nvar LinearGradient = function (x, y, x2, y2, colorStops, globalCoord) {\n  // Should do nothing more in this constructor. Because gradient can be\n  // declard by `color: {type: 'linear', colorStops: ...}`, where\n  // this constructor will not be called.\n  this.x = x == null ? 0 : x;\n  this.y = y == null ? 0 : y;\n  this.x2 = x2 == null ? 1 : x2;\n  this.y2 = y2 == null ? 0 : y2; // Can be cloned\n\n  this.type = 'linear'; // If use global coord\n\n  this.global = globalCoord || false;\n  Gradient.call(this, colorStops);\n};\n\nLinearGradient.prototype = {\n  constructor: LinearGradient\n};\nzrUtil.inherits(LinearGradient, Gradient);\nvar _default = LinearGradient;\nmodule.exports = _default;","var Displayable = require(\"./Displayable\");\n\nvar zrUtil = require(\"../core/util\");\n\nvar PathProxy = require(\"../core/PathProxy\");\n\nvar pathContain = require(\"../contain/path\");\n\nvar Pattern = require(\"./Pattern\");\n\nvar getCanvasPattern = Pattern.prototype.getCanvasPattern;\nvar abs = Math.abs;\nvar pathProxyForDraw = new PathProxy(true);\n/**\n * @alias module:zrender/graphic/Path\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\n\nfunction Path(opts) {\n  Displayable.call(this, opts);\n  /**\n   * @type {module:zrender/core/PathProxy}\n   * @readOnly\n   */\n\n  this.path = null;\n}\n\nPath.prototype = {\n  constructor: Path,\n  type: 'path',\n  __dirtyPath: true,\n  strokeContainThreshold: 5,\n  brush: function (ctx, prevEl) {\n    var style = this.style;\n    var path = this.path || pathProxyForDraw;\n    var hasStroke = style.hasStroke();\n    var hasFill = style.hasFill();\n    var fill = style.fill;\n    var stroke = style.stroke;\n    var hasFillGradient = hasFill && !!fill.colorStops;\n    var hasStrokeGradient = hasStroke && !!stroke.colorStops;\n    var hasFillPattern = hasFill && !!fill.image;\n    var hasStrokePattern = hasStroke && !!stroke.image;\n    style.bind(ctx, this, prevEl);\n    this.setTransform(ctx);\n\n    if (this.__dirty) {\n      var rect; // Update gradient because bounding rect may changed\n\n      if (hasFillGradient) {\n        rect = rect || this.getBoundingRect();\n        this._fillGradient = style.getGradient(ctx, fill, rect);\n      }\n\n      if (hasStrokeGradient) {\n        rect = rect || this.getBoundingRect();\n        this._strokeGradient = style.getGradient(ctx, stroke, rect);\n      }\n    } // Use the gradient or pattern\n\n\n    if (hasFillGradient) {\n      // PENDING If may have affect the state\n      ctx.fillStyle = this._fillGradient;\n    } else if (hasFillPattern) {\n      ctx.fillStyle = getCanvasPattern.call(fill, ctx);\n    }\n\n    if (hasStrokeGradient) {\n      ctx.strokeStyle = this._strokeGradient;\n    } else if (hasStrokePattern) {\n      ctx.strokeStyle = getCanvasPattern.call(stroke, ctx);\n    }\n\n    var lineDash = style.lineDash;\n    var lineDashOffset = style.lineDashOffset;\n    var ctxLineDash = !!ctx.setLineDash; // Update path sx, sy\n\n    var scale = this.getGlobalScale();\n    path.setScale(scale[0], scale[1]); // Proxy context\n    // Rebuild path in following 2 cases\n    // 1. Path is dirty\n    // 2. Path needs javascript implemented lineDash stroking.\n    //    In this case, lineDash information will not be saved in PathProxy\n\n    if (this.__dirtyPath || lineDash && !ctxLineDash && hasStroke) {\n      path.beginPath(ctx); // Setting line dash before build path\n\n      if (lineDash && !ctxLineDash) {\n        path.setLineDash(lineDash);\n        path.setLineDashOffset(lineDashOffset);\n      }\n\n      this.buildPath(path, this.shape, false); // Clear path dirty flag\n\n      if (this.path) {\n        this.__dirtyPath = false;\n      }\n    } else {\n      // Replay path building\n      ctx.beginPath();\n      this.path.rebuildPath(ctx);\n    }\n\n    hasFill && path.fill(ctx);\n\n    if (lineDash && ctxLineDash) {\n      ctx.setLineDash(lineDash);\n      ctx.lineDashOffset = lineDashOffset;\n    }\n\n    hasStroke && path.stroke(ctx);\n\n    if (lineDash && ctxLineDash) {\n      // PENDING\n      // Remove lineDash\n      ctx.setLineDash([]);\n    }\n\n    this.restoreTransform(ctx); // Draw rect text\n\n    if (style.text != null) {\n      this.drawRectText(ctx, this.getBoundingRect());\n    }\n  },\n  // When bundling path, some shape may decide if use moveTo to begin a new subpath or closePath\n  // Like in circle\n  buildPath: function (ctx, shapeCfg, inBundle) {},\n  createPathProxy: function () {\n    this.path = new PathProxy();\n  },\n  getBoundingRect: function () {\n    var rect = this._rect;\n    var style = this.style;\n    var needsUpdateRect = !rect;\n\n    if (needsUpdateRect) {\n      var path = this.path;\n\n      if (!path) {\n        // Create path on demand.\n        path = this.path = new PathProxy();\n      }\n\n      if (this.__dirtyPath) {\n        path.beginPath();\n        this.buildPath(path, this.shape, false);\n      }\n\n      rect = path.getBoundingRect();\n    }\n\n    this._rect = rect;\n\n    if (style.hasStroke()) {\n      // Needs update rect with stroke lineWidth when\n      // 1. Element changes scale or lineWidth\n      // 2. Shape is changed\n      var rectWithStroke = this._rectWithStroke || (this._rectWithStroke = rect.clone());\n\n      if (this.__dirty || needsUpdateRect) {\n        rectWithStroke.copy(rect); // FIXME Must after updateTransform\n\n        var w = style.lineWidth; // PENDING, Min line width is needed when line is horizontal or vertical\n\n        var lineScale = style.strokeNoScale ? this.getLineScale() : 1; // Only add extra hover lineWidth when there are no fill\n\n        if (!style.hasFill()) {\n          w = Math.max(w, this.strokeContainThreshold || 4);\n        } // Consider line width\n        // Line scale can't be 0;\n\n\n        if (lineScale > 1e-10) {\n          rectWithStroke.width += w / lineScale;\n          rectWithStroke.height += w / lineScale;\n          rectWithStroke.x -= w / lineScale / 2;\n          rectWithStroke.y -= w / lineScale / 2;\n        }\n      } // Return rect with stroke\n\n\n      return rectWithStroke;\n    }\n\n    return rect;\n  },\n  contain: function (x, y) {\n    var localPos = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    var style = this.style;\n    x = localPos[0];\n    y = localPos[1];\n\n    if (rect.contain(x, y)) {\n      var pathData = this.path.data;\n\n      if (style.hasStroke()) {\n        var lineWidth = style.lineWidth;\n        var lineScale = style.strokeNoScale ? this.getLineScale() : 1; // Line scale can't be 0;\n\n        if (lineScale > 1e-10) {\n          // Only add extra hover lineWidth when there are no fill\n          if (!style.hasFill()) {\n            lineWidth = Math.max(lineWidth, this.strokeContainThreshold);\n          }\n\n          if (pathContain.containStroke(pathData, lineWidth / lineScale, x, y)) {\n            return true;\n          }\n        }\n      }\n\n      if (style.hasFill()) {\n        return pathContain.contain(pathData, x, y);\n      }\n    }\n\n    return false;\n  },\n\n  /**\n   * @param  {boolean} dirtyPath\n   */\n  dirty: function (dirtyPath) {\n    if (dirtyPath == null) {\n      dirtyPath = true;\n    } // Only mark dirty, not mark clean\n\n\n    if (dirtyPath) {\n      this.__dirtyPath = dirtyPath;\n      this._rect = null;\n    }\n\n    this.__dirty = true;\n    this.__zr && this.__zr.refresh(); // Used as a clipping path\n\n    if (this.__clipTarget) {\n      this.__clipTarget.dirty();\n    }\n  },\n\n  /**\n   * Alias for animate('shape')\n   * @param {boolean} loop\n   */\n  animateShape: function (loop) {\n    return this.animate('shape', loop);\n  },\n  // Overwrite attrKV\n  attrKV: function (key, value) {\n    // FIXME\n    if (key === 'shape') {\n      this.setShape(value);\n      this.__dirtyPath = true;\n      this._rect = null;\n    } else {\n      Displayable.prototype.attrKV.call(this, key, value);\n    }\n  },\n\n  /**\n   * @param {Object|string} key\n   * @param {*} value\n   */\n  setShape: function (key, value) {\n    var shape = this.shape; // Path from string may not have shape\n\n    if (shape) {\n      if (zrUtil.isObject(key)) {\n        for (var name in key) {\n          if (key.hasOwnProperty(name)) {\n            shape[name] = key[name];\n          }\n        }\n      } else {\n        shape[key] = value;\n      }\n\n      this.dirty(true);\n    }\n\n    return this;\n  },\n  getLineScale: function () {\n    var m = this.transform; // Get the line scale.\n    // Determinant of `m` means how much the area is enlarged by the\n    // transformation. So its square root can be used as a scale factor\n    // for width.\n\n    return m && abs(m[0] - 1) > 1e-10 && abs(m[3] - 1) > 1e-10 ? Math.sqrt(abs(m[0] * m[3] - m[2] * m[1])) : 1;\n  }\n};\n/**\n *  Path element, \n * Extend a path element\n * @param {Object} props\n * @param {string} props.type Path type\n * @param {Function} props.init Initialize\n * @param {Function} props.buildPath Overwrite buildPath method\n * @param {Object} [props.style] Extended default style config\n * @param {Object} [props.shape] Extended default shape config\n */\n\nPath.extend = function (defaults) {\n  var Sub = function (opts) {\n    Path.call(this, opts);\n\n    if (defaults.style) {\n      // Extend default style\n      this.style.extendFrom(defaults.style, false);\n    } // Extend default shape\n\n\n    var defaultShape = defaults.shape;\n\n    if (defaultShape) {\n      this.shape = this.shape || {};\n      var thisShape = this.shape;\n\n      for (var name in defaultShape) {\n        if (!thisShape.hasOwnProperty(name) && defaultShape.hasOwnProperty(name)) {\n          thisShape[name] = defaultShape[name];\n        }\n      }\n    }\n\n    defaults.init && defaults.init.call(this, opts);\n  };\n\n  zrUtil.inherits(Sub, Path); // FIXME  extend position, rotation \n\n  for (var name in defaults) {\n    // Extending prototype values and methods\n    if (name !== 'style' && name !== 'shape') {\n      Sub.prototype[name] = defaults[name];\n    }\n  }\n\n  return Sub;\n};\n\nzrUtil.inherits(Path, Displayable);\nvar _default = Path;\nmodule.exports = _default;","var Pattern = function (image, repeat) {\n  // Should do nothing more in this constructor. Because gradient can be\n  // declard by `color: {image: ...}`, where this constructor will not be called.\n  this.image = image;\n  this.repeat = repeat; // Can be cloned\n\n  this.type = 'pattern';\n};\n\nPattern.prototype.getCanvasPattern = function (ctx) {\n  return ctx.createPattern(this.image, this.repeat || 'repeat');\n};\n\nvar _default = Pattern;\nmodule.exports = _default;","var zrUtil = require(\"../core/util\");\n\nvar Gradient = require(\"./Gradient\");\n\n/**\n * x, y, r are all percent from 0 to 1\n * @param {number} [x=0.5]\n * @param {number} [y=0.5]\n * @param {number} [r=0.5]\n * @param {Array.<Object>} [colorStops]\n * @param {boolean} [globalCoord=false]\n */\nvar RadialGradient = function (x, y, r, colorStops, globalCoord) {\n  // Should do nothing more in this constructor. Because gradient can be\n  // declard by `color: {type: 'radial', colorStops: ...}`, where\n  // this constructor will not be called.\n  this.x = x == null ? 0.5 : x;\n  this.y = y == null ? 0.5 : y;\n  this.r = r == null ? 0.5 : r; // Can be cloned\n\n  this.type = 'radial'; // If use global coord\n\n  this.global = globalCoord || false;\n  Gradient.call(this, colorStops);\n};\n\nRadialGradient.prototype = {\n  constructor: RadialGradient\n};\nzrUtil.inherits(RadialGradient, Gradient);\nvar _default = RadialGradient;\nmodule.exports = _default;","var STYLE_COMMON_PROPS = [['shadowBlur', 0], ['shadowOffsetX', 0], ['shadowOffsetY', 0], ['shadowColor', '#000'], ['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]]; // var SHADOW_PROPS = STYLE_COMMON_PROPS.slice(0, 4);\n// var LINE_PROPS = STYLE_COMMON_PROPS.slice(4);\n\nvar Style = function (opts, host) {\n  this.extendFrom(opts, false);\n  this.host = host;\n};\n\nfunction createLinearGradient(ctx, obj, rect) {\n  var x = obj.x == null ? 0 : obj.x;\n  var x2 = obj.x2 == null ? 1 : obj.x2;\n  var y = obj.y == null ? 0 : obj.y;\n  var y2 = obj.y2 == null ? 0 : obj.y2;\n\n  if (!obj.global) {\n    x = x * rect.width + rect.x;\n    x2 = x2 * rect.width + rect.x;\n    y = y * rect.height + rect.y;\n    y2 = y2 * rect.height + rect.y;\n  }\n\n  var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\n  return canvasGradient;\n}\n\nfunction createRadialGradient(ctx, obj, rect) {\n  var width = rect.width;\n  var height = rect.height;\n  var min = Math.min(width, height);\n  var x = obj.x == null ? 0.5 : obj.x;\n  var y = obj.y == null ? 0.5 : obj.y;\n  var r = obj.r == null ? 0.5 : obj.r;\n\n  if (!obj.global) {\n    x = x * width + rect.x;\n    y = y * height + rect.y;\n    r = r * min;\n  }\n\n  var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\n  return canvasGradient;\n}\n\nStyle.prototype = {\n  constructor: Style,\n\n  /**\n   * @type {module:zrender/graphic/Displayable}\n   */\n  host: null,\n\n  /**\n   * @type {string}\n   */\n  fill: '#000',\n\n  /**\n   * @type {string}\n   */\n  stroke: null,\n\n  /**\n   * @type {number}\n   */\n  opacity: 1,\n\n  /**\n   * @type {Array.<number>}\n   */\n  lineDash: null,\n\n  /**\n   * @type {number}\n   */\n  lineDashOffset: 0,\n\n  /**\n   * @type {number}\n   */\n  shadowBlur: 0,\n\n  /**\n   * @type {number}\n   */\n  shadowOffsetX: 0,\n\n  /**\n   * @type {number}\n   */\n  shadowOffsetY: 0,\n\n  /**\n   * @type {number}\n   */\n  lineWidth: 1,\n\n  /**\n   * If stroke ignore scale\n   * @type {Boolean}\n   */\n  strokeNoScale: false,\n  // Bounding rect text configuration\n  // Not affected by element transform\n\n  /**\n   * @type {string}\n   */\n  text: null,\n\n  /**\n   * If `fontSize` or `fontFamily` exists, `font` will be reset by\n   * `fontSize`, `fontStyle`, `fontWeight`, `fontFamily`.\n   * So do not visit it directly in upper application (like echarts),\n   * but use `contain/text#makeFont` instead.\n   * @type {string}\n   */\n  font: null,\n\n  /**\n   * The same as font. Use font please.\n   * @deprecated\n   * @type {string}\n   */\n  textFont: null,\n\n  /**\n   * It helps merging respectively, rather than parsing an entire font string.\n   * @type {string}\n   */\n  fontStyle: null,\n\n  /**\n   * It helps merging respectively, rather than parsing an entire font string.\n   * @type {string}\n   */\n  fontWeight: null,\n\n  /**\n   * It helps merging respectively, rather than parsing an entire font string.\n   * Should be 12 but not '12px'.\n   * @type {number}\n   */\n  fontSize: null,\n\n  /**\n   * It helps merging respectively, rather than parsing an entire font string.\n   * @type {string}\n   */\n  fontFamily: null,\n\n  /**\n   * Reserved for special functinality, like 'hr'.\n   * @type {string}\n   */\n  textTag: null,\n\n  /**\n   * @type {string}\n   */\n  textFill: '#000',\n\n  /**\n   * @type {string}\n   */\n  textStroke: null,\n\n  /**\n   * @type {number}\n   */\n  textWidth: null,\n\n  /**\n   * Only for textBackground.\n   * @type {number}\n   */\n  textHeight: null,\n\n  /**\n   * textStroke may be set as some color as a default\n   * value in upper applicaion, where the default value\n   * of textStrokeWidth should be 0 to make sure that\n   * user can choose to do not use text stroke.\n   * @type {number}\n   */\n  textStrokeWidth: 0,\n\n  /**\n   * @type {number}\n   */\n  textLineHeight: null,\n\n  /**\n   * 'inside', 'left', 'right', 'top', 'bottom'\n   * [x, y]\n   * Based on x, y of rect.\n   * @type {string|Array.<number>}\n   * @default 'inside'\n   */\n  textPosition: 'inside',\n\n  /**\n   * If not specified, use the boundingRect of a `displayable`.\n   * @type {Object}\n   */\n  textRect: null,\n\n  /**\n   * [x, y]\n   * @type {Array.<number>}\n   */\n  textOffset: null,\n\n  /**\n   * @type {string}\n   */\n  textAlign: null,\n\n  /**\n   * @type {string}\n   */\n  textVerticalAlign: null,\n\n  /**\n   * @type {number}\n   */\n  textDistance: 5,\n\n  /**\n   * @type {string}\n   */\n  textShadowColor: 'transparent',\n\n  /**\n   * @type {number}\n   */\n  textShadowBlur: 0,\n\n  /**\n   * @type {number}\n   */\n  textShadowOffsetX: 0,\n\n  /**\n   * @type {number}\n   */\n  textShadowOffsetY: 0,\n\n  /**\n   * @type {string}\n   */\n  textBoxShadowColor: 'transparent',\n\n  /**\n   * @type {number}\n   */\n  textBoxShadowBlur: 0,\n\n  /**\n   * @type {number}\n   */\n  textBoxShadowOffsetX: 0,\n\n  /**\n   * @type {number}\n   */\n  textBoxShadowOffsetY: 0,\n\n  /**\n   * Whether transform text.\n   * Only useful in Path and Image element\n   * @type {boolean}\n   */\n  transformText: false,\n\n  /**\n   * Text rotate around position of Path or Image\n   * Only useful in Path and Image element and transformText is false.\n   */\n  textRotation: 0,\n\n  /**\n   * Text origin of text rotation, like [10, 40].\n   * Based on x, y of rect.\n   * Useful in label rotation of circular symbol.\n   * By default, this origin is textPosition.\n   * Can be 'center'.\n   * @type {string|Array.<number>}\n   */\n  textOrigin: null,\n\n  /**\n   * @type {string}\n   */\n  textBackgroundColor: null,\n\n  /**\n   * @type {string}\n   */\n  textBorderColor: null,\n\n  /**\n   * @type {number}\n   */\n  textBorderWidth: 0,\n\n  /**\n   * @type {number}\n   */\n  textBorderRadius: 0,\n\n  /**\n   * Can be `2` or `[2, 4]` or `[2, 3, 4, 5]`\n   * @type {number|Array.<number>}\n   */\n  textPadding: null,\n\n  /**\n   * Text styles for rich text.\n   * @type {Object}\n   */\n  rich: null,\n\n  /**\n   * {outerWidth, outerHeight, ellipsis, placeholder}\n   * @type {Object}\n   */\n  truncate: null,\n\n  /**\n   * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n   * @type {string}\n   */\n  blend: null,\n\n  /**\n   * @param {CanvasRenderingContext2D} ctx\n   */\n  bind: function (ctx, el, prevEl) {\n    var style = this;\n    var prevStyle = prevEl && prevEl.style;\n    var firstDraw = !prevStyle;\n\n    for (var i = 0; i < STYLE_COMMON_PROPS.length; i++) {\n      var prop = STYLE_COMMON_PROPS[i];\n      var styleName = prop[0];\n\n      if (firstDraw || style[styleName] !== prevStyle[styleName]) {\n        // FIXME Invalid property value will cause style leak from previous element.\n        ctx[styleName] = style[styleName] || prop[1];\n      }\n    }\n\n    if (firstDraw || style.fill !== prevStyle.fill) {\n      ctx.fillStyle = style.fill;\n    }\n\n    if (firstDraw || style.stroke !== prevStyle.stroke) {\n      ctx.strokeStyle = style.stroke;\n    }\n\n    if (firstDraw || style.opacity !== prevStyle.opacity) {\n      ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\n    }\n\n    if (firstDraw || style.blend !== prevStyle.blend) {\n      ctx.globalCompositeOperation = style.blend || 'source-over';\n    }\n\n    if (this.hasStroke()) {\n      var lineWidth = style.lineWidth;\n      ctx.lineWidth = lineWidth / (this.strokeNoScale && el && el.getLineScale ? el.getLineScale() : 1);\n    }\n  },\n  hasFill: function () {\n    var fill = this.fill;\n    return fill != null && fill !== 'none';\n  },\n  hasStroke: function () {\n    var stroke = this.stroke;\n    return stroke != null && stroke !== 'none' && this.lineWidth > 0;\n  },\n\n  /**\n   * Extend from other style\n   * @param {zrender/graphic/Style} otherStyle\n   * @param {boolean} overwrite true: overwrirte any way.\n   *                            false: overwrite only when !target.hasOwnProperty\n   *                            others: overwrite when property is not null/undefined.\n   */\n  extendFrom: function (otherStyle, overwrite) {\n    if (otherStyle) {\n      for (var name in otherStyle) {\n        if (otherStyle.hasOwnProperty(name) && (overwrite === true || (overwrite === false ? !this.hasOwnProperty(name) : otherStyle[name] != null))) {\n          this[name] = otherStyle[name];\n        }\n      }\n    }\n  },\n\n  /**\n   * Batch setting style with a given object\n   * @param {Object|string} obj\n   * @param {*} [obj]\n   */\n  set: function (obj, value) {\n    if (typeof obj === 'string') {\n      this[obj] = value;\n    } else {\n      this.extendFrom(obj, true);\n    }\n  },\n\n  /**\n   * Clone\n   * @return {zrender/graphic/Style} [description]\n   */\n  clone: function () {\n    var newStyle = new this.constructor();\n    newStyle.extendFrom(this, true);\n    return newStyle;\n  },\n  getGradient: function (ctx, obj, rect) {\n    var method = obj.type === 'radial' ? createRadialGradient : createLinearGradient;\n    var canvasGradient = method(ctx, obj, rect);\n    var colorStops = obj.colorStops;\n\n    for (var i = 0; i < colorStops.length; i++) {\n      canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\n    }\n\n    return canvasGradient;\n  }\n};\nvar styleProto = Style.prototype;\n\nfor (var i = 0; i < STYLE_COMMON_PROPS.length; i++) {\n  var prop = STYLE_COMMON_PROPS[i];\n\n  if (!(prop[0] in styleProto)) {\n    styleProto[prop[0]] = prop[1];\n  }\n} // Provide for others\n\n\nStyle.getGradient = styleProto.getGradient;\nvar _default = Style;\nmodule.exports = _default;","var Displayable = require(\"./Displayable\");\n\nvar zrUtil = require(\"../core/util\");\n\nvar textContain = require(\"../contain/text\");\n\nvar textHelper = require(\"./helper/text\");\n\n/**\n * @alias zrender/graphic/Text\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\nvar Text = function (opts) {\n  // jshint ignore:line\n  Displayable.call(this, opts);\n};\n\nText.prototype = {\n  constructor: Text,\n  type: 'text',\n  brush: function (ctx, prevEl) {\n    var style = this.style; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true); // Use props with prefix 'text'.\n\n    style.fill = style.stroke = style.shadowBlur = style.shadowColor = style.shadowOffsetX = style.shadowOffsetY = null;\n    var text = style.text; // Convert to string\n\n    text != null && (text += ''); // Always bind style\n\n    style.bind(ctx, this, prevEl);\n\n    if (!textHelper.needDrawText(text, style)) {\n      return;\n    }\n\n    this.setTransform(ctx);\n    textHelper.renderText(this, ctx, text, style);\n    this.restoreTransform(ctx);\n  },\n  getBoundingRect: function () {\n    var style = this.style; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true);\n\n    if (!this._rect) {\n      var text = style.text;\n      text != null ? text += '' : text = '';\n      var rect = textContain.getBoundingRect(style.text + '', style.font, style.textAlign, style.textVerticalAlign, style.textPadding, style.rich);\n      rect.x += style.x || 0;\n      rect.y += style.y || 0;\n\n      if (textHelper.getStroke(style.textStroke, style.textStrokeWidth)) {\n        var w = style.textStrokeWidth;\n        rect.x -= w / 2;\n        rect.y -= w / 2;\n        rect.width += w;\n        rect.height += w;\n      }\n\n      this._rect = rect;\n    }\n\n    return this._rect;\n  }\n};\nzrUtil.inherits(Text, Displayable);\nvar _default = Text;\nmodule.exports = _default;","var env = require(\"../../core/env\");\n\n// Fix weird bug in some version of IE11 (like 11.0.9600.178**),\n// where exception \"unexpected call to method or property access\"\n// might be thrown when calling ctx.fill or ctx.stroke after a path\n// whose area size is zero is drawn and ctx.clip() is called and\n// shadowBlur is set. See #4572, #3112, #5777.\n// (e.g.,\n//  ctx.moveTo(10, 10);\n//  ctx.lineTo(20, 10);\n//  ctx.closePath();\n//  ctx.clip();\n//  ctx.shadowBlur = 10;\n//  ...\n//  ctx.fill();\n// )\nvar shadowTemp = [['shadowBlur', 0], ['shadowColor', '#000'], ['shadowOffsetX', 0], ['shadowOffsetY', 0]];\n\nfunction _default(orignalBrush) {\n  // version string can be: '11.0'\n  return env.browser.ie && env.browser.version >= 11 ? function () {\n    var clipPaths = this.__clipPaths;\n    var style = this.style;\n    var modified;\n\n    if (clipPaths) {\n      for (var i = 0; i < clipPaths.length; i++) {\n        var clipPath = clipPaths[i];\n        var shape = clipPath && clipPath.shape;\n        var type = clipPath && clipPath.type;\n\n        if (shape && (type === 'sector' && shape.startAngle === shape.endAngle || type === 'rect' && (!shape.width || !shape.height))) {\n          for (var j = 0; j < shadowTemp.length; j++) {\n            // It is save to put shadowTemp static, because shadowTemp\n            // will be all modified each item brush called.\n            shadowTemp[j][2] = style[shadowTemp[j][0]];\n            style[shadowTemp[j][0]] = shadowTemp[j][1];\n          }\n\n          modified = true;\n          break;\n        }\n      }\n    }\n\n    orignalBrush.apply(this, arguments);\n\n    if (modified) {\n      for (var j = 0; j < shadowTemp.length; j++) {\n        style[shadowTemp[j][0]] = shadowTemp[j][2];\n      }\n    }\n  } : orignalBrush;\n}\n\nmodule.exports = _default;","var LRU = require(\"../../core/LRU\");\n\nvar globalImageCache = new LRU(50);\n/**\n * @param {string|HTMLImageElement|HTMLCanvasElement|Canvas} newImageOrSrc\n * @return {HTMLImageElement|HTMLCanvasElement|Canvas} image\n */\n\nfunction findExistImage(newImageOrSrc) {\n  if (typeof newImageOrSrc === 'string') {\n    var cachedImgObj = globalImageCache.get(newImageOrSrc);\n    return cachedImgObj && cachedImgObj.image;\n  } else {\n    return newImageOrSrc;\n  }\n}\n/**\n * Caution: User should cache loaded images, but not just count on LRU.\n * Consider if required images more than LRU size, will dead loop occur?\n *\n * @param {string|HTMLImageElement|HTMLCanvasElement|Canvas} newImageOrSrc\n * @param {HTMLImageElement|HTMLCanvasElement|Canvas} image Existent image.\n * @param {module:zrender/Element} [hostEl] For calling `dirty`.\n * @param {Function} [cb] params: (image, cbPayload)\n * @param {Object} [cbPayload] Payload on cb calling.\n * @return {HTMLImageElement|HTMLCanvasElement|Canvas} image\n */\n\n\nfunction createOrUpdateImage(newImageOrSrc, image, hostEl, cb, cbPayload) {\n  if (!newImageOrSrc) {\n    return image;\n  } else if (typeof newImageOrSrc === 'string') {\n    // Image should not be loaded repeatly.\n    if (image && image.__zrImageSrc === newImageOrSrc || !hostEl) {\n      return image;\n    } // Only when there is no existent image or existent image src\n    // is different, this method is responsible for load.\n\n\n    var cachedImgObj = globalImageCache.get(newImageOrSrc);\n    var pendingWrap = {\n      hostEl: hostEl,\n      cb: cb,\n      cbPayload: cbPayload\n    };\n\n    if (cachedImgObj) {\n      image = cachedImgObj.image;\n      !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n    } else {\n      !image && (image = new Image());\n      image.onload = imageOnLoad;\n      globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {\n        image: image,\n        pending: [pendingWrap]\n      });\n      image.src = image.__zrImageSrc = newImageOrSrc;\n    }\n\n    return image;\n  } // newImageOrSrc is an HTMLImageElement or HTMLCanvasElement or Canvas\n  else {\n      return newImageOrSrc;\n    }\n}\n\nfunction imageOnLoad() {\n  var cachedImgObj = this.__cachedImgObj;\n  this.onload = this.__cachedImgObj = null;\n\n  for (var i = 0; i < cachedImgObj.pending.length; i++) {\n    var pendingWrap = cachedImgObj.pending[i];\n    var cb = pendingWrap.cb;\n    cb && cb(this, pendingWrap.cbPayload);\n    pendingWrap.hostEl.dirty();\n  }\n\n  cachedImgObj.pending.length = 0;\n}\n\nfunction isImageReady(image) {\n  return image && image.width && image.height;\n}\n\nexports.findExistImage = findExistImage;\nexports.createOrUpdateImage = createOrUpdateImage;\nexports.isImageReady = isImageReady;","var smoothSpline = require(\"./smoothSpline\");\n\nvar smoothBezier = require(\"./smoothBezier\");\n\nfunction buildPath(ctx, shape, closePath) {\n  var points = shape.points;\n  var smooth = shape.smooth;\n\n  if (points && points.length >= 2) {\n    if (smooth && smooth !== 'spline') {\n      var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\n      ctx.moveTo(points[0][0], points[0][1]);\n      var len = points.length;\n\n      for (var i = 0; i < (closePath ? len : len - 1); i++) {\n        var cp1 = controlPoints[i * 2];\n        var cp2 = controlPoints[i * 2 + 1];\n        var p = points[(i + 1) % len];\n        ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\n      }\n    } else {\n      if (smooth === 'spline') {\n        points = smoothSpline(points, closePath);\n      }\n\n      ctx.moveTo(points[0][0], points[0][1]);\n\n      for (var i = 1, l = points.length; i < l; i++) {\n        ctx.lineTo(points[i][0], points[i][1]);\n      }\n    }\n\n    closePath && ctx.closePath();\n  }\n}\n\nexports.buildPath = buildPath;","function buildPath(ctx, shape) {\n  var x = shape.x;\n  var y = shape.y;\n  var width = shape.width;\n  var height = shape.height;\n  var r = shape.r;\n  var r1;\n  var r2;\n  var r3;\n  var r4; // Convert width and height to positive for better borderRadius\n\n  if (width < 0) {\n    x = x + width;\n    width = -width;\n  }\n\n  if (height < 0) {\n    y = y + height;\n    height = -height;\n  }\n\n  if (typeof r === 'number') {\n    r1 = r2 = r3 = r4 = r;\n  } else if (r instanceof Array) {\n    if (r.length === 1) {\n      r1 = r2 = r3 = r4 = r[0];\n    } else if (r.length === 2) {\n      r1 = r3 = r[0];\n      r2 = r4 = r[1];\n    } else if (r.length === 3) {\n      r1 = r[0];\n      r2 = r4 = r[1];\n      r3 = r[2];\n    } else {\n      r1 = r[0];\n      r2 = r[1];\n      r3 = r[2];\n      r4 = r[3];\n    }\n  } else {\n    r1 = r2 = r3 = r4 = 0;\n  }\n\n  var total;\n\n  if (r1 + r2 > width) {\n    total = r1 + r2;\n    r1 *= width / total;\n    r2 *= width / total;\n  }\n\n  if (r3 + r4 > width) {\n    total = r3 + r4;\n    r3 *= width / total;\n    r4 *= width / total;\n  }\n\n  if (r2 + r3 > height) {\n    total = r2 + r3;\n    r2 *= height / total;\n    r3 *= height / total;\n  }\n\n  if (r1 + r4 > height) {\n    total = r1 + r4;\n    r1 *= height / total;\n    r4 *= height / total;\n  }\n\n  ctx.moveTo(x + r1, y);\n  ctx.lineTo(x + width - r2, y);\n  r2 !== 0 && ctx.quadraticCurveTo(x + width, y, x + width, y + r2);\n  ctx.lineTo(x + width, y + height - r3);\n  r3 !== 0 && ctx.quadraticCurveTo(x + width, y + height, x + width - r3, y + height);\n  ctx.lineTo(x + r4, y + height);\n  r4 !== 0 && ctx.quadraticCurveTo(x, y + height, x, y + height - r4);\n  ctx.lineTo(x, y + r1);\n  r1 !== 0 && ctx.quadraticCurveTo(x, y, x + r1, y);\n}\n\nexports.buildPath = buildPath;","var _vector = require(\"../../core/vector\");\n\nvar v2Min = _vector.min;\nvar v2Max = _vector.max;\nvar v2Scale = _vector.scale;\nvar v2Distance = _vector.distance;\nvar v2Add = _vector.add;\nvar v2Clone = _vector.clone;\nvar v2Sub = _vector.sub;\n\n/**\n * \n * @module zrender/shape/util/smoothBezier\n * @author pissang (https://www.github.com/pissang)\n *         Kener (@Kener-, kener.linfeng@gmail.com)\n *         errorrik (errorrik@gmail.com)\n */\n\n/**\n * \n * @alias module:zrender/shape/util/smoothBezier\n * @param {Array} points \n * @param {number} smooth , 0-1\n * @param {boolean} isLoop\n * @param {Array} constraint \n *                            [[0, 0], [100, 100]], \n *                           \n * @param {Array} \n */\nfunction _default(points, smooth, isLoop, constraint) {\n  var cps = [];\n  var v = [];\n  var v1 = [];\n  var v2 = [];\n  var prevPoint;\n  var nextPoint;\n  var min, max;\n\n  if (constraint) {\n    min = [Infinity, Infinity];\n    max = [-Infinity, -Infinity];\n\n    for (var i = 0, len = points.length; i < len; i++) {\n      v2Min(min, min, points[i]);\n      v2Max(max, max, points[i]);\n    } // \n\n\n    v2Min(min, min, constraint[0]);\n    v2Max(max, max, constraint[1]);\n  }\n\n  for (var i = 0, len = points.length; i < len; i++) {\n    var point = points[i];\n\n    if (isLoop) {\n      prevPoint = points[i ? i - 1 : len - 1];\n      nextPoint = points[(i + 1) % len];\n    } else {\n      if (i === 0 || i === len - 1) {\n        cps.push(v2Clone(points[i]));\n        continue;\n      } else {\n        prevPoint = points[i - 1];\n        nextPoint = points[i + 1];\n      }\n    }\n\n    v2Sub(v, nextPoint, prevPoint); // use degree to scale the handle length\n\n    v2Scale(v, v, smooth);\n    var d0 = v2Distance(point, prevPoint);\n    var d1 = v2Distance(point, nextPoint);\n    var sum = d0 + d1;\n\n    if (sum !== 0) {\n      d0 /= sum;\n      d1 /= sum;\n    }\n\n    v2Scale(v1, v, -d0);\n    v2Scale(v2, v, d1);\n    var cp0 = v2Add([], point, v1);\n    var cp1 = v2Add([], point, v2);\n\n    if (constraint) {\n      v2Max(cp0, cp0, min);\n      v2Min(cp0, cp0, max);\n      v2Max(cp1, cp1, min);\n      v2Min(cp1, cp1, max);\n    }\n\n    cps.push(cp0);\n    cps.push(cp1);\n  }\n\n  if (isLoop) {\n    cps.push(cps.shift());\n  }\n\n  return cps;\n}\n\nmodule.exports = _default;","var _vector = require(\"../../core/vector\");\n\nvar v2Distance = _vector.distance;\n\n/**\n * Catmull-Rom spline \n * @module zrender/shape/util/smoothSpline\n * @author pissang (https://www.github.com/pissang)\n *         Kener (@Kener-, kener.linfeng@gmail.com)\n *         errorrik (errorrik@gmail.com)\n */\n\n/**\n * @inner\n */\nfunction interpolate(p0, p1, p2, p3, t, t2, t3) {\n  var v0 = (p2 - p0) * 0.5;\n  var v1 = (p3 - p1) * 0.5;\n  return (2 * (p1 - p2) + v0 + v1) * t3 + (-3 * (p1 - p2) - 2 * v0 - v1) * t2 + v0 * t + p1;\n}\n/**\n * @alias module:zrender/shape/util/smoothSpline\n * @param {Array} points \n * @param {boolean} isLoop\n * @return {Array}\n */\n\n\nfunction _default(points, isLoop) {\n  var len = points.length;\n  var ret = [];\n  var distance = 0;\n\n  for (var i = 1; i < len; i++) {\n    distance += v2Distance(points[i - 1], points[i]);\n  }\n\n  var segs = distance / 2;\n  segs = segs < len ? len : segs;\n\n  for (var i = 0; i < segs; i++) {\n    var pos = i / (segs - 1) * (isLoop ? len : len - 1);\n    var idx = Math.floor(pos);\n    var w = pos - idx;\n    var p0;\n    var p1 = points[idx % len];\n    var p2;\n    var p3;\n\n    if (!isLoop) {\n      p0 = points[idx === 0 ? idx : idx - 1];\n      p2 = points[idx > len - 2 ? len - 1 : idx + 1];\n      p3 = points[idx > len - 3 ? len - 1 : idx + 2];\n    } else {\n      p0 = points[(idx - 1 + len) % len];\n      p2 = points[(idx + 1) % len];\n      p3 = points[(idx + 2) % len];\n    }\n\n    var w2 = w * w;\n    var w3 = w * w2;\n    ret.push([interpolate(p0[0], p1[0], p2[0], p3[0], w, w2, w3), interpolate(p0[1], p1[1], p2[1], p3[1], w, w2, w3)]);\n  }\n\n  return ret;\n}\n\nmodule.exports = _default;","var _util = require(\"../../core/util\");\n\nvar retrieve2 = _util.retrieve2;\nvar retrieve3 = _util.retrieve3;\nvar each = _util.each;\nvar normalizeCssArray = _util.normalizeCssArray;\nvar isString = _util.isString;\nvar isObject = _util.isObject;\n\nvar textContain = require(\"../../contain/text\");\n\nvar roundRectHelper = require(\"./roundRect\");\n\nvar imageHelper = require(\"./image\");\n\n// TODO: Have not support 'start', 'end' yet.\nvar VALID_TEXT_ALIGN = {\n  left: 1,\n  right: 1,\n  center: 1\n};\nvar VALID_TEXT_VERTICAL_ALIGN = {\n  top: 1,\n  bottom: 1,\n  middle: 1\n};\n/**\n * @param {module:zrender/graphic/Style} style\n * @return {module:zrender/graphic/Style} The input style.\n */\n\nfunction normalizeTextStyle(style) {\n  normalizeStyle(style);\n  each(style.rich, normalizeStyle);\n  return style;\n}\n\nfunction normalizeStyle(style) {\n  if (style) {\n    style.font = textContain.makeFont(style);\n    var textAlign = style.textAlign;\n    textAlign === 'middle' && (textAlign = 'center');\n    style.textAlign = textAlign == null || VALID_TEXT_ALIGN[textAlign] ? textAlign : 'left'; // Compatible with textBaseline.\n\n    var textVerticalAlign = style.textVerticalAlign || style.textBaseline;\n    textVerticalAlign === 'center' && (textVerticalAlign = 'middle');\n    style.textVerticalAlign = textVerticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[textVerticalAlign] ? textVerticalAlign : 'top';\n    var textPadding = style.textPadding;\n\n    if (textPadding) {\n      style.textPadding = normalizeCssArray(style.textPadding);\n    }\n  }\n}\n/**\n * @param {CanvasRenderingContext2D} ctx\n * @param {string} text\n * @param {module:zrender/graphic/Style} style\n * @param {Object|boolean} [rect] {x, y, width, height}\n *                  If set false, rect text is not used.\n */\n\n\nfunction renderText(hostEl, ctx, text, style, rect) {\n  style.rich ? renderRichText(hostEl, ctx, text, style, rect) : renderPlainText(hostEl, ctx, text, style, rect);\n}\n\nfunction renderPlainText(hostEl, ctx, text, style, rect) {\n  var font = setCtx(ctx, 'font', style.font || textContain.DEFAULT_FONT);\n  var textPadding = style.textPadding;\n  var contentBlock = hostEl.__textCotentBlock;\n\n  if (!contentBlock || hostEl.__dirty) {\n    contentBlock = hostEl.__textCotentBlock = textContain.parsePlainText(text, font, textPadding, style.truncate);\n  }\n\n  var outerHeight = contentBlock.outerHeight;\n  var textLines = contentBlock.lines;\n  var lineHeight = contentBlock.lineHeight;\n  var boxPos = getBoxPosition(outerHeight, style, rect);\n  var baseX = boxPos.baseX;\n  var baseY = boxPos.baseY;\n  var textAlign = boxPos.textAlign;\n  var textVerticalAlign = boxPos.textVerticalAlign; // Origin of textRotation should be the base point of text drawing.\n\n  applyTextRotation(ctx, style, rect, baseX, baseY);\n  var boxY = textContain.adjustTextY(baseY, outerHeight, textVerticalAlign);\n  var textX = baseX;\n  var textY = boxY;\n  var needDrawBg = needDrawBackground(style);\n\n  if (needDrawBg || textPadding) {\n    // Consider performance, do not call getTextWidth util necessary.\n    var textWidth = textContain.getWidth(text, font);\n    var outerWidth = textWidth;\n    textPadding && (outerWidth += textPadding[1] + textPadding[3]);\n    var boxX = textContain.adjustTextX(baseX, outerWidth, textAlign);\n    needDrawBg && drawBackground(hostEl, ctx, style, boxX, boxY, outerWidth, outerHeight);\n\n    if (textPadding) {\n      textX = getTextXForPadding(baseX, textAlign, textPadding);\n      textY += textPadding[0];\n    }\n  }\n\n  setCtx(ctx, 'textAlign', textAlign || 'left'); // Force baseline to be \"middle\". Otherwise, if using \"top\", the\n  // text will offset downward a little bit in font \"Microsoft YaHei\".\n\n  setCtx(ctx, 'textBaseline', 'middle'); // Always set shadowBlur and shadowOffset to avoid leak from displayable.\n\n  setCtx(ctx, 'shadowBlur', style.textShadowBlur || 0);\n  setCtx(ctx, 'shadowColor', style.textShadowColor || 'transparent');\n  setCtx(ctx, 'shadowOffsetX', style.textShadowOffsetX || 0);\n  setCtx(ctx, 'shadowOffsetY', style.textShadowOffsetY || 0); // `textBaseline` is set as 'middle'.\n\n  textY += lineHeight / 2;\n  var textStrokeWidth = style.textStrokeWidth;\n  var textStroke = getStroke(style.textStroke, textStrokeWidth);\n  var textFill = getFill(style.textFill);\n\n  if (textStroke) {\n    setCtx(ctx, 'lineWidth', textStrokeWidth);\n    setCtx(ctx, 'strokeStyle', textStroke);\n  }\n\n  if (textFill) {\n    setCtx(ctx, 'fillStyle', textFill);\n  }\n\n  for (var i = 0; i < textLines.length; i++) {\n    // Fill after stroke so the outline will not cover the main part.\n    textStroke && ctx.strokeText(textLines[i], textX, textY);\n    textFill && ctx.fillText(textLines[i], textX, textY);\n    textY += lineHeight;\n  }\n}\n\nfunction renderRichText(hostEl, ctx, text, style, rect) {\n  var contentBlock = hostEl.__textCotentBlock;\n\n  if (!contentBlock || hostEl.__dirty) {\n    contentBlock = hostEl.__textCotentBlock = textContain.parseRichText(text, style);\n  }\n\n  drawRichText(hostEl, ctx, contentBlock, style, rect);\n}\n\nfunction drawRichText(hostEl, ctx, contentBlock, style, rect) {\n  var contentWidth = contentBlock.width;\n  var outerWidth = contentBlock.outerWidth;\n  var outerHeight = contentBlock.outerHeight;\n  var textPadding = style.textPadding;\n  var boxPos = getBoxPosition(outerHeight, style, rect);\n  var baseX = boxPos.baseX;\n  var baseY = boxPos.baseY;\n  var textAlign = boxPos.textAlign;\n  var textVerticalAlign = boxPos.textVerticalAlign; // Origin of textRotation should be the base point of text drawing.\n\n  applyTextRotation(ctx, style, rect, baseX, baseY);\n  var boxX = textContain.adjustTextX(baseX, outerWidth, textAlign);\n  var boxY = textContain.adjustTextY(baseY, outerHeight, textVerticalAlign);\n  var xLeft = boxX;\n  var lineTop = boxY;\n\n  if (textPadding) {\n    xLeft += textPadding[3];\n    lineTop += textPadding[0];\n  }\n\n  var xRight = xLeft + contentWidth;\n  needDrawBackground(style) && drawBackground(hostEl, ctx, style, boxX, boxY, outerWidth, outerHeight);\n\n  for (var i = 0; i < contentBlock.lines.length; i++) {\n    var line = contentBlock.lines[i];\n    var tokens = line.tokens;\n    var tokenCount = tokens.length;\n    var lineHeight = line.lineHeight;\n    var usedWidth = line.width;\n    var leftIndex = 0;\n    var lineXLeft = xLeft;\n    var lineXRight = xRight;\n    var rightIndex = tokenCount - 1;\n    var token;\n\n    while (leftIndex < tokenCount && (token = tokens[leftIndex], !token.textAlign || token.textAlign === 'left')) {\n      placeToken(hostEl, ctx, token, style, lineHeight, lineTop, lineXLeft, 'left');\n      usedWidth -= token.width;\n      lineXLeft += token.width;\n      leftIndex++;\n    }\n\n    while (rightIndex >= 0 && (token = tokens[rightIndex], token.textAlign === 'right')) {\n      placeToken(hostEl, ctx, token, style, lineHeight, lineTop, lineXRight, 'right');\n      usedWidth -= token.width;\n      lineXRight -= token.width;\n      rightIndex--;\n    } // The other tokens are placed as textAlign 'center' if there is enough space.\n\n\n    lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - usedWidth) / 2;\n\n    while (leftIndex <= rightIndex) {\n      token = tokens[leftIndex]; // Consider width specified by user, use 'center' rather than 'left'.\n\n      placeToken(hostEl, ctx, token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center');\n      lineXLeft += token.width;\n      leftIndex++;\n    }\n\n    lineTop += lineHeight;\n  }\n}\n\nfunction applyTextRotation(ctx, style, rect, x, y) {\n  // textRotation only apply in RectText.\n  if (rect && style.textRotation) {\n    var origin = style.textOrigin;\n\n    if (origin === 'center') {\n      x = rect.width / 2 + rect.x;\n      y = rect.height / 2 + rect.y;\n    } else if (origin) {\n      x = origin[0] + rect.x;\n      y = origin[1] + rect.y;\n    }\n\n    ctx.translate(x, y); // Positive: anticlockwise\n\n    ctx.rotate(-style.textRotation);\n    ctx.translate(-x, -y);\n  }\n}\n\nfunction placeToken(hostEl, ctx, token, style, lineHeight, lineTop, x, textAlign) {\n  var tokenStyle = style.rich[token.styleName] || {}; // 'ctx.textBaseline' is always set as 'middle', for sake of\n  // the bias of \"Microsoft YaHei\".\n\n  var textVerticalAlign = token.textVerticalAlign;\n  var y = lineTop + lineHeight / 2;\n\n  if (textVerticalAlign === 'top') {\n    y = lineTop + token.height / 2;\n  } else if (textVerticalAlign === 'bottom') {\n    y = lineTop + lineHeight - token.height / 2;\n  }\n\n  !token.isLineHolder && needDrawBackground(tokenStyle) && drawBackground(hostEl, ctx, tokenStyle, textAlign === 'right' ? x - token.width : textAlign === 'center' ? x - token.width / 2 : x, y - token.height / 2, token.width, token.height);\n  var textPadding = token.textPadding;\n\n  if (textPadding) {\n    x = getTextXForPadding(x, textAlign, textPadding);\n    y -= token.height / 2 - textPadding[2] - token.textHeight / 2;\n  }\n\n  setCtx(ctx, 'shadowBlur', retrieve3(tokenStyle.textShadowBlur, style.textShadowBlur, 0));\n  setCtx(ctx, 'shadowColor', tokenStyle.textShadowColor || style.textShadowColor || 'transparent');\n  setCtx(ctx, 'shadowOffsetX', retrieve3(tokenStyle.textShadowOffsetX, style.textShadowOffsetX, 0));\n  setCtx(ctx, 'shadowOffsetY', retrieve3(tokenStyle.textShadowOffsetY, style.textShadowOffsetY, 0));\n  setCtx(ctx, 'textAlign', textAlign); // Force baseline to be \"middle\". Otherwise, if using \"top\", the\n  // text will offset downward a little bit in font \"Microsoft YaHei\".\n\n  setCtx(ctx, 'textBaseline', 'middle');\n  setCtx(ctx, 'font', token.font || textContain.DEFAULT_FONT);\n  var textStroke = getStroke(tokenStyle.textStroke || style.textStroke, textStrokeWidth);\n  var textFill = getFill(tokenStyle.textFill || style.textFill);\n  var textStrokeWidth = retrieve2(tokenStyle.textStrokeWidth, style.textStrokeWidth); // Fill after stroke so the outline will not cover the main part.\n\n  if (textStroke) {\n    setCtx(ctx, 'lineWidth', textStrokeWidth);\n    setCtx(ctx, 'strokeStyle', textStroke);\n    ctx.strokeText(token.text, x, y);\n  }\n\n  if (textFill) {\n    setCtx(ctx, 'fillStyle', textFill);\n    ctx.fillText(token.text, x, y);\n  }\n}\n\nfunction needDrawBackground(style) {\n  return style.textBackgroundColor || style.textBorderWidth && style.textBorderColor;\n} // style: {textBackgroundColor, textBorderWidth, textBorderColor, textBorderRadius}\n// shape: {x, y, width, height}\n\n\nfunction drawBackground(hostEl, ctx, style, x, y, width, height) {\n  var textBackgroundColor = style.textBackgroundColor;\n  var textBorderWidth = style.textBorderWidth;\n  var textBorderColor = style.textBorderColor;\n  var isPlainBg = isString(textBackgroundColor);\n  setCtx(ctx, 'shadowBlur', style.textBoxShadowBlur || 0);\n  setCtx(ctx, 'shadowColor', style.textBoxShadowColor || 'transparent');\n  setCtx(ctx, 'shadowOffsetX', style.textBoxShadowOffsetX || 0);\n  setCtx(ctx, 'shadowOffsetY', style.textBoxShadowOffsetY || 0);\n\n  if (isPlainBg || textBorderWidth && textBorderColor) {\n    ctx.beginPath();\n    var textBorderRadius = style.textBorderRadius;\n\n    if (!textBorderRadius) {\n      ctx.rect(x, y, width, height);\n    } else {\n      roundRectHelper.buildPath(ctx, {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        r: textBorderRadius\n      });\n    }\n\n    ctx.closePath();\n  }\n\n  if (isPlainBg) {\n    setCtx(ctx, 'fillStyle', textBackgroundColor);\n    ctx.fill();\n  } else if (isObject(textBackgroundColor)) {\n    var image = textBackgroundColor.image;\n    image = imageHelper.createOrUpdateImage(image, null, hostEl, onBgImageLoaded, textBackgroundColor);\n\n    if (image && imageHelper.isImageReady(image)) {\n      ctx.drawImage(image, x, y, width, height);\n    }\n  }\n\n  if (textBorderWidth && textBorderColor) {\n    setCtx(ctx, 'lineWidth', textBorderWidth);\n    setCtx(ctx, 'strokeStyle', textBorderColor);\n    ctx.stroke();\n  }\n}\n\nfunction onBgImageLoaded(image, textBackgroundColor) {\n  // Replace image, so that `contain/text.js#parseRichText`\n  // will get correct result in next tick.\n  textBackgroundColor.image = image;\n}\n\nfunction getBoxPosition(blockHeiht, style, rect) {\n  var baseX = style.x || 0;\n  var baseY = style.y || 0;\n  var textAlign = style.textAlign;\n  var textVerticalAlign = style.textVerticalAlign; // Text position represented by coord\n\n  if (rect) {\n    var textPosition = style.textPosition;\n\n    if (textPosition instanceof Array) {\n      // Percent\n      baseX = rect.x + parsePercent(textPosition[0], rect.width);\n      baseY = rect.y + parsePercent(textPosition[1], rect.height);\n    } else {\n      var res = textContain.adjustTextPositionOnRect(textPosition, rect, style.textDistance);\n      baseX = res.x;\n      baseY = res.y; // Default align and baseline when has textPosition\n\n      textAlign = textAlign || res.textAlign;\n      textVerticalAlign = textVerticalAlign || res.textVerticalAlign;\n    } // textOffset is only support in RectText, otherwise\n    // we have to adjust boundingRect for textOffset.\n\n\n    var textOffset = style.textOffset;\n\n    if (textOffset) {\n      baseX += textOffset[0];\n      baseY += textOffset[1];\n    }\n  }\n\n  return {\n    baseX: baseX,\n    baseY: baseY,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nfunction setCtx(ctx, prop, value) {\n  // FIXME ??? performance try\n  // if (ctx.__currentValues[prop] !== value) {\n  // ctx[prop] = ctx.__currentValues[prop] = value;\n  ctx[prop] = value; // }\n\n  return ctx[prop];\n}\n/**\n * @param {string} [stroke] If specified, do not check style.textStroke.\n * @param {string} [lineWidth] If specified, do not check style.textStroke.\n * @param {number} style\n */\n\n\nfunction getStroke(stroke, lineWidth) {\n  return stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none' ? null // TODO pattern and gradient?\n  : stroke.image || stroke.colorStops ? '#000' : stroke;\n}\n\nfunction getFill(fill) {\n  return fill == null || fill === 'none' ? null // TODO pattern and gradient?\n  : fill.image || fill.colorStops ? '#000' : fill;\n}\n\nfunction parsePercent(value, maxValue) {\n  if (typeof value === 'string') {\n    if (value.lastIndexOf('%') >= 0) {\n      return parseFloat(value) / 100 * maxValue;\n    }\n\n    return parseFloat(value);\n  }\n\n  return value;\n}\n\nfunction getTextXForPadding(x, textAlign, textPadding) {\n  return textAlign === 'right' ? x - textPadding[1] : textAlign === 'center' ? x + textPadding[3] / 2 - textPadding[1] / 2 : x + textPadding[3];\n}\n/**\n * @param {string} text\n * @param {module:zrender/Style} style\n * @return {boolean}\n */\n\n\nfunction needDrawText(text, style) {\n  return text != null && (text || style.textBackgroundColor || style.textBorderWidth && style.textBorderColor || style.textPadding);\n}\n\nexports.normalizeTextStyle = normalizeTextStyle;\nexports.renderText = renderText;\nexports.getStroke = getStroke;\nexports.getFill = getFill;\nexports.needDrawText = needDrawText;","var textHelper = require(\"../helper/text\");\n\nvar BoundingRect = require(\"../../core/BoundingRect\");\n\n/**\n * Mixin for drawing text in a element bounding rect\n * @module zrender/mixin/RectText\n */\nvar tmpRect = new BoundingRect();\n\nvar RectText = function () {};\n\nRectText.prototype = {\n  constructor: RectText,\n\n  /**\n   * Draw text in a rect with specified position.\n   * @param  {CanvasRenderingContext2D} ctx\n   * @param  {Object} rect Displayable rect\n   */\n  drawRectText: function (ctx, rect) {\n    var style = this.style;\n    rect = style.textRect || rect; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true);\n    var text = style.text; // Convert to string\n\n    text != null && (text += '');\n\n    if (!textHelper.needDrawText(text, style)) {\n      return;\n    } // FIXME\n\n\n    ctx.save(); // Transform rect to view space\n\n    var transform = this.transform;\n\n    if (!style.transformText) {\n      if (transform) {\n        tmpRect.copy(rect);\n        tmpRect.applyTransform(transform);\n        rect = tmpRect;\n      }\n    } else {\n      this.setTransform(ctx);\n    } // transformText and textRotation can not be used at the same time.\n\n\n    textHelper.renderText(this, ctx, text, style, rect);\n    ctx.restore();\n  }\n};\nvar _default = RectText;\nmodule.exports = _default;","var Path = require(\"../Path\");\n\n/**\n * \n * @module zrender/graphic/shape/Arc\n */\nvar _default = Path.extend({\n  type: 'arc',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r: 0,\n    startAngle: 0,\n    endAngle: Math.PI * 2,\n    clockwise: true\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function (ctx, shape) {\n    var x = shape.cx;\n    var y = shape.cy;\n    var r = Math.max(shape.r, 0);\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var unitX = Math.cos(startAngle);\n    var unitY = Math.sin(startAngle);\n    ctx.moveTo(unitX * r + x, unitY * r + y);\n    ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\nvar vec2 = require(\"../../core/vector\");\n\nvar _curve = require(\"../../core/curve\");\n\nvar quadraticSubdivide = _curve.quadraticSubdivide;\nvar cubicSubdivide = _curve.cubicSubdivide;\nvar quadraticAt = _curve.quadraticAt;\nvar cubicAt = _curve.cubicAt;\nvar quadraticDerivativeAt = _curve.quadraticDerivativeAt;\nvar cubicDerivativeAt = _curve.cubicDerivativeAt;\n\n/**\n * \n * @module zrender/shape/BezierCurve\n */\nvar out = [];\n\nfunction someVectorAt(shape, t, isTangent) {\n  var cpx2 = shape.cpx2;\n  var cpy2 = shape.cpy2;\n\n  if (cpx2 === null || cpy2 === null) {\n    return [(isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t), (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)];\n  } else {\n    return [(isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t), (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)];\n  }\n}\n\nvar _default = Path.extend({\n  type: 'bezier-curve',\n  shape: {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    cpx1: 0,\n    cpy1: 0,\n    // cpx2: 0,\n    // cpy2: 0\n    // Curve show percent, for animating\n    percent: 1\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function (ctx, shape) {\n    var x1 = shape.x1;\n    var y1 = shape.y1;\n    var x2 = shape.x2;\n    var y2 = shape.y2;\n    var cpx1 = shape.cpx1;\n    var cpy1 = shape.cpy1;\n    var cpx2 = shape.cpx2;\n    var cpy2 = shape.cpy2;\n    var percent = shape.percent;\n\n    if (percent === 0) {\n      return;\n    }\n\n    ctx.moveTo(x1, y1);\n\n    if (cpx2 == null || cpy2 == null) {\n      if (percent < 1) {\n        quadraticSubdivide(x1, cpx1, x2, percent, out);\n        cpx1 = out[1];\n        x2 = out[2];\n        quadraticSubdivide(y1, cpy1, y2, percent, out);\n        cpy1 = out[1];\n        y2 = out[2];\n      }\n\n      ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\n    } else {\n      if (percent < 1) {\n        cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\n        cpx1 = out[1];\n        cpx2 = out[2];\n        x2 = out[3];\n        cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\n        cpy1 = out[1];\n        cpy2 = out[2];\n        y2 = out[3];\n      }\n\n      ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n    }\n  },\n\n  /**\n   * Get point at percent\n   * @param  {number} t\n   * @return {Array.<number>}\n   */\n  pointAt: function (t) {\n    return someVectorAt(this.shape, t, false);\n  },\n\n  /**\n   * Get tangent at percent\n   * @param  {number} t\n   * @return {Array.<number>}\n   */\n  tangentAt: function (t) {\n    var p = someVectorAt(this.shape, t, true);\n    return vec2.normalize(p, p);\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\n/**\n * \n * @module zrender/shape/Circle\n */\nvar _default = Path.extend({\n  type: 'circle',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r: 0\n  },\n  buildPath: function (ctx, shape, inBundle) {\n    // Better stroking in ShapeBundle\n    // Always do it may have performence issue ( fill may be 2x more cost)\n    if (inBundle) {\n      ctx.moveTo(shape.cx + shape.r, shape.cy);\n    } // else {\n    //     if (ctx.allocate && !ctx.data.length) {\n    //         ctx.allocate(ctx.CMD_MEM_SIZE.A);\n    //     }\n    // }\n    // Better stroking in ShapeBundle\n    // ctx.moveTo(shape.cx + shape.r, shape.cy);\n\n\n    ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2, true);\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\n/**\n * \n * @module zrender/graphic/shape/Line\n */\nvar _default = Path.extend({\n  type: 'line',\n  shape: {\n    // Start point\n    x1: 0,\n    y1: 0,\n    // End point\n    x2: 0,\n    y2: 0,\n    percent: 1\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function (ctx, shape) {\n    var x1 = shape.x1;\n    var y1 = shape.y1;\n    var x2 = shape.x2;\n    var y2 = shape.y2;\n    var percent = shape.percent;\n\n    if (percent === 0) {\n      return;\n    }\n\n    ctx.moveTo(x1, y1);\n\n    if (percent < 1) {\n      x2 = x1 * (1 - percent) + x2 * percent;\n      y2 = y1 * (1 - percent) + y2 * percent;\n    }\n\n    ctx.lineTo(x2, y2);\n  },\n\n  /**\n   * Get point at percent\n   * @param  {number} percent\n   * @return {Array.<number>}\n   */\n  pointAt: function (p) {\n    var shape = this.shape;\n    return [shape.x1 * (1 - p) + shape.x2 * p, shape.y1 * (1 - p) + shape.y2 * p];\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\nvar polyHelper = require(\"../helper/poly\");\n\n/**\n * \n * @module zrender/shape/Polygon\n */\nvar _default = Path.extend({\n  type: 'polygon',\n  shape: {\n    points: null,\n    smooth: false,\n    smoothConstraint: null\n  },\n  buildPath: function (ctx, shape) {\n    polyHelper.buildPath(ctx, shape, true);\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\nvar polyHelper = require(\"../helper/poly\");\n\n/**\n * @module zrender/graphic/shape/Polyline\n */\nvar _default = Path.extend({\n  type: 'polyline',\n  shape: {\n    points: null,\n    smooth: false,\n    smoothConstraint: null\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function (ctx, shape) {\n    polyHelper.buildPath(ctx, shape, false);\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\nvar roundRectHelper = require(\"../helper/roundRect\");\n\n/**\n * \n * @module zrender/graphic/shape/Rect\n */\nvar _default = Path.extend({\n  type: 'rect',\n  shape: {\n    // r1r2r3r4\n    // r1          [1, 1, 1, 1]\n    // r[1]        [1, 1, 1, 1]\n    // r[1, 2]     [1, 2, 1, 2]\n    // r[1, 2, 3]  [1, 2, 3, 2]\n    r: 0,\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (ctx, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var width = shape.width;\n    var height = shape.height;\n\n    if (!shape.r) {\n      ctx.rect(x, y, width, height);\n    } else {\n      roundRectHelper.buildPath(ctx, shape);\n    }\n\n    ctx.closePath();\n    return;\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\n/**\n * \n * @module zrender/graphic/shape/Ring\n */\nvar _default = Path.extend({\n  type: 'ring',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r: 0,\n    r0: 0\n  },\n  buildPath: function (ctx, shape) {\n    var x = shape.cx;\n    var y = shape.cy;\n    var PI2 = Math.PI * 2;\n    ctx.moveTo(x + shape.r, y);\n    ctx.arc(x, y, shape.r, 0, PI2, false);\n    ctx.moveTo(x + shape.r0, y);\n    ctx.arc(x, y, shape.r0, 0, PI2, true);\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\nvar fixClipWithShadow = require(\"../helper/fixClipWithShadow\");\n\n/**\n * \n * @module zrender/graphic/shape/Sector\n */\nvar _default = Path.extend({\n  type: 'sector',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r0: 0,\n    r: 0,\n    startAngle: 0,\n    endAngle: Math.PI * 2,\n    clockwise: true\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function (ctx, shape) {\n    var x = shape.cx;\n    var y = shape.cy;\n    var r0 = Math.max(shape.r0 || 0, 0);\n    var r = Math.max(shape.r, 0);\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var unitX = Math.cos(startAngle);\n    var unitY = Math.sin(startAngle);\n    ctx.moveTo(unitX * r0 + x, unitY * r0 + y);\n    ctx.lineTo(unitX * r + x, unitY * r + y);\n    ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    ctx.lineTo(Math.cos(endAngle) * r0 + x, Math.sin(endAngle) * r0 + y);\n\n    if (r0 !== 0) {\n      ctx.arc(x, y, r0, endAngle, startAngle, clockwise);\n    }\n\n    ctx.closePath();\n  }\n});\n\nmodule.exports = _default;","var Animator = require(\"../animation/Animator\");\n\nvar log = require(\"../core/log\");\n\nvar _util = require(\"../core/util\");\n\nvar isString = _util.isString;\nvar isFunction = _util.isFunction;\nvar isObject = _util.isObject;\nvar isArrayLike = _util.isArrayLike;\nvar indexOf = _util.indexOf;\n\n/**\n * @alias modue:zrender/mixin/Animatable\n * @constructor\n */\nvar Animatable = function () {\n  /**\n   * @type {Array.<module:zrender/animation/Animator>}\n   * @readOnly\n   */\n  this.animators = [];\n};\n\nAnimatable.prototype = {\n  constructor: Animatable,\n\n  /**\n   * \n   *\n   * @param {string} path The path to fetch value from object, like 'a.b.c'.\n   * @param {boolean} [loop] Whether to loop animation.\n   * @return {module:zrender/animation/Animator}\n   * @example:\n   *     el.animate('style', false)\n   *         .when(1000, {x: 10} )\n   *         .done(function(){ // Animation done })\n   *         .start()\n   */\n  animate: function (path, loop) {\n    var target;\n    var animatingShape = false;\n    var el = this;\n    var zr = this.__zr;\n\n    if (path) {\n      var pathSplitted = path.split('.');\n      var prop = el; // If animating shape\n\n      animatingShape = pathSplitted[0] === 'shape';\n\n      for (var i = 0, l = pathSplitted.length; i < l; i++) {\n        if (!prop) {\n          continue;\n        }\n\n        prop = prop[pathSplitted[i]];\n      }\n\n      if (prop) {\n        target = prop;\n      }\n    } else {\n      target = el;\n    }\n\n    if (!target) {\n      log('Property \"' + path + '\" is not existed in element ' + el.id);\n      return;\n    }\n\n    var animators = el.animators;\n    var animator = new Animator(target, loop);\n    animator.during(function (target) {\n      el.dirty(animatingShape);\n    }).done(function () {\n      // FIXME Animator will not be removed if use `Animator#stop` to stop animation\n      animators.splice(indexOf(animators, animator), 1);\n    });\n    animators.push(animator); // If animate after added to the zrender\n\n    if (zr) {\n      zr.animation.addAnimator(animator);\n    }\n\n    return animator;\n  },\n\n  /**\n   * \n   * @param {boolean} forwardToLast If move to last frame before stop\n   */\n  stopAnimation: function (forwardToLast) {\n    var animators = this.animators;\n    var len = animators.length;\n\n    for (var i = 0; i < len; i++) {\n      animators[i].stop(forwardToLast);\n    }\n\n    animators.length = 0;\n    return this;\n  },\n\n  /**\n   * Caution: this method will stop previous animation.\n   * So do not use this method to one element twice before\n   * animation starts, unless you know what you are doing.\n   * @param {Object} target\n   * @param {number} [time=500] Time in ms\n   * @param {string} [easing='linear']\n   * @param {number} [delay=0]\n   * @param {Function} [callback]\n   * @param {Function} [forceAnimate] Prevent stop animation and callback\n   *        immediently when target values are the same as current values.\n   *\n   * @example\n   *  // Animate position\n   *  el.animateTo({\n   *      position: [10, 10]\n   *  }, function () { // done })\n   *\n   *  // Animate shape, style and position in 100ms, delayed 100ms, with cubicOut easing\n   *  el.animateTo({\n   *      shape: {\n   *          width: 500\n   *      },\n   *      style: {\n   *          fill: 'red'\n   *      }\n   *      position: [10, 10]\n   *  }, 100, 100, 'cubicOut', function () { // done })\n   */\n  // TODO Return animation key\n  animateTo: function (target, time, delay, easing, callback, forceAnimate) {\n    // animateTo(target, time, easing, callback);\n    if (isString(delay)) {\n      callback = easing;\n      easing = delay;\n      delay = 0;\n    } // animateTo(target, time, delay, callback);\n    else if (isFunction(easing)) {\n        callback = easing;\n        easing = 'linear';\n        delay = 0;\n      } // animateTo(target, time, callback);\n      else if (isFunction(delay)) {\n          callback = delay;\n          delay = 0;\n        } // animateTo(target, callback)\n        else if (isFunction(time)) {\n            callback = time;\n            time = 500;\n          } // animateTo(target)\n          else if (!time) {\n              time = 500;\n            } // Stop all previous animations\n\n\n    this.stopAnimation();\n\n    this._animateToShallow('', this, target, time, delay); // Animators may be removed immediately after start\n    // if there is nothing to animate\n\n\n    var animators = this.animators.slice();\n    var count = animators.length;\n\n    function done() {\n      count--;\n\n      if (!count) {\n        callback && callback();\n      }\n    } // No animators. This should be checked before animators[i].start(),\n    // because 'done' may be executed immediately if no need to animate.\n\n\n    if (!count) {\n      callback && callback();\n    } // Start after all animators created\n    // Incase any animator is done immediately when all animation properties are not changed\n\n\n    for (var i = 0; i < animators.length; i++) {\n      animators[i].done(done).start(easing, forceAnimate);\n    }\n  },\n\n  /**\n   * @private\n   * @param {string} path=''\n   * @param {Object} source=this\n   * @param {Object} target\n   * @param {number} [time=500]\n   * @param {number} [delay=0]\n   *\n   * @example\n   *  // Animate position\n   *  el._animateToShallow({\n   *      position: [10, 10]\n   *  })\n   *\n   *  // Animate shape, style and position in 100ms, delayed 100ms\n   *  el._animateToShallow({\n   *      shape: {\n   *          width: 500\n   *      },\n   *      style: {\n   *          fill: 'red'\n   *      }\n   *      position: [10, 10]\n   *  }, 100, 100)\n   */\n  _animateToShallow: function (path, source, target, time, delay) {\n    var objShallow = {};\n    var propertyCount = 0;\n\n    for (var name in target) {\n      if (!target.hasOwnProperty(name)) {\n        continue;\n      }\n\n      if (source[name] != null) {\n        if (isObject(target[name]) && !isArrayLike(target[name])) {\n          this._animateToShallow(path ? path + '.' + name : name, source[name], target[name], time, delay);\n        } else {\n          objShallow[name] = target[name];\n          propertyCount++;\n        }\n      } else if (target[name] != null) {\n        // Attr directly if not has property\n        // FIXME, if some property not needed for element ?\n        if (!path) {\n          this.attr(name, target[name]);\n        } else {\n          // Shape or style\n          var props = {};\n          props[path] = {};\n          props[path][name] = target[name];\n          this.attr(props);\n        }\n      }\n    }\n\n    if (propertyCount > 0) {\n      this.animate(path, false).when(time == null ? 500 : time, objShallow).delay(delay || 0);\n    }\n\n    return this;\n  }\n};\nvar _default = Animatable;\nmodule.exports = _default;","// TODO Draggable for group\n// FIXME Draggable on element which has parent rotation or scale\nfunction Draggable() {\n  this.on('mousedown', this._dragStart, this);\n  this.on('mousemove', this._drag, this);\n  this.on('mouseup', this._dragEnd, this);\n  this.on('globalout', this._dragEnd, this); // this._dropTarget = null;\n  // this._draggingTarget = null;\n  // this._x = 0;\n  // this._y = 0;\n}\n\nDraggable.prototype = {\n  constructor: Draggable,\n  _dragStart: function (e) {\n    var draggingTarget = e.target;\n\n    if (draggingTarget && draggingTarget.draggable) {\n      this._draggingTarget = draggingTarget;\n      draggingTarget.dragging = true;\n      this._x = e.offsetX;\n      this._y = e.offsetY;\n      this.dispatchToElement(param(draggingTarget, e), 'dragstart', e.event);\n    }\n  },\n  _drag: function (e) {\n    var draggingTarget = this._draggingTarget;\n\n    if (draggingTarget) {\n      var x = e.offsetX;\n      var y = e.offsetY;\n      var dx = x - this._x;\n      var dy = y - this._y;\n      this._x = x;\n      this._y = y;\n      draggingTarget.drift(dx, dy, e);\n      this.dispatchToElement(param(draggingTarget, e), 'drag', e.event);\n      var dropTarget = this.findHover(x, y, draggingTarget).target;\n      var lastDropTarget = this._dropTarget;\n      this._dropTarget = dropTarget;\n\n      if (draggingTarget !== dropTarget) {\n        if (lastDropTarget && dropTarget !== lastDropTarget) {\n          this.dispatchToElement(param(lastDropTarget, e), 'dragleave', e.event);\n        }\n\n        if (dropTarget && dropTarget !== lastDropTarget) {\n          this.dispatchToElement(param(dropTarget, e), 'dragenter', e.event);\n        }\n      }\n    }\n  },\n  _dragEnd: function (e) {\n    var draggingTarget = this._draggingTarget;\n\n    if (draggingTarget) {\n      draggingTarget.dragging = false;\n    }\n\n    this.dispatchToElement(param(draggingTarget, e), 'dragend', e.event);\n\n    if (this._dropTarget) {\n      this.dispatchToElement(param(this._dropTarget, e), 'drop', e.event);\n    }\n\n    this._draggingTarget = null;\n    this._dropTarget = null;\n  }\n};\n\nfunction param(target, e) {\n  return {\n    target: target,\n    topTarget: e && e.topTarget\n  };\n}\n\nvar _default = Draggable;\nmodule.exports = _default;","/**\n * \n * @module zrender/mixin/Eventful\n * @author Kener (@Kener-, kener.linfeng@gmail.com)\n *         pissang (https://www.github.com/pissang)\n */\nvar arrySlice = Array.prototype.slice;\n/**\n * \n * @alias module:zrender/mixin/Eventful\n * @constructor\n */\n\nvar Eventful = function () {\n  this._$handlers = {};\n};\n\nEventful.prototype = {\n  constructor: Eventful,\n\n  /**\n   * trigger\n   *\n   * @param {string} event \n   * @param {Function} handler \n   * @param {Object} context\n   */\n  one: function (event, handler, context) {\n    var _h = this._$handlers;\n\n    if (!handler || !event) {\n      return this;\n    }\n\n    if (!_h[event]) {\n      _h[event] = [];\n    }\n\n    for (var i = 0; i < _h[event].length; i++) {\n      if (_h[event][i].h === handler) {\n        return this;\n      }\n    }\n\n    _h[event].push({\n      h: handler,\n      one: true,\n      ctx: context || this\n    });\n\n    return this;\n  },\n\n  /**\n   * \n   * @param {string} event \n   * @param {Function} handler \n   * @param {Object} [context]\n   */\n  on: function (event, handler, context) {\n    var _h = this._$handlers;\n\n    if (!handler || !event) {\n      return this;\n    }\n\n    if (!_h[event]) {\n      _h[event] = [];\n    }\n\n    for (var i = 0; i < _h[event].length; i++) {\n      if (_h[event][i].h === handler) {\n        return this;\n      }\n    }\n\n    _h[event].push({\n      h: handler,\n      one: false,\n      ctx: context || this\n    });\n\n    return this;\n  },\n\n  /**\n   * \n   * @param  {string}  event\n   * @return {boolean}\n   */\n  isSilent: function (event) {\n    var _h = this._$handlers;\n    return _h[event] && _h[event].length;\n  },\n\n  /**\n   * \n   * @param {string} event \n   * @param {Function} [handler] \n   */\n  off: function (event, handler) {\n    var _h = this._$handlers;\n\n    if (!event) {\n      this._$handlers = {};\n      return this;\n    }\n\n    if (handler) {\n      if (_h[event]) {\n        var newList = [];\n\n        for (var i = 0, l = _h[event].length; i < l; i++) {\n          if (_h[event][i]['h'] != handler) {\n            newList.push(_h[event][i]);\n          }\n        }\n\n        _h[event] = newList;\n      }\n\n      if (_h[event] && _h[event].length === 0) {\n        delete _h[event];\n      }\n    } else {\n      delete _h[event];\n    }\n\n    return this;\n  },\n\n  /**\n   * \n   *\n   * @param {string} type \n   */\n  trigger: function (type) {\n    if (this._$handlers[type]) {\n      var args = arguments;\n      var argLen = args.length;\n\n      if (argLen > 3) {\n        args = arrySlice.call(args, 1);\n      }\n\n      var _h = this._$handlers[type];\n      var len = _h.length;\n\n      for (var i = 0; i < len;) {\n        // Optimize advise from backbone\n        switch (argLen) {\n          case 1:\n            _h[i]['h'].call(_h[i]['ctx']);\n\n            break;\n\n          case 2:\n            _h[i]['h'].call(_h[i]['ctx'], args[1]);\n\n            break;\n\n          case 3:\n            _h[i]['h'].call(_h[i]['ctx'], args[1], args[2]);\n\n            break;\n\n          default:\n            // have more than 2 given arguments\n            _h[i]['h'].apply(_h[i]['ctx'], args);\n\n            break;\n        }\n\n        if (_h[i]['one']) {\n          _h.splice(i, 1);\n\n          len--;\n        } else {\n          i++;\n        }\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * context, context\n   * @param {string} type \n   */\n  triggerWithContext: function (type) {\n    if (this._$handlers[type]) {\n      var args = arguments;\n      var argLen = args.length;\n\n      if (argLen > 4) {\n        args = arrySlice.call(args, 1, args.length - 1);\n      }\n\n      var ctx = args[args.length - 1];\n      var _h = this._$handlers[type];\n      var len = _h.length;\n\n      for (var i = 0; i < len;) {\n        // Optimize advise from backbone\n        switch (argLen) {\n          case 1:\n            _h[i]['h'].call(ctx);\n\n            break;\n\n          case 2:\n            _h[i]['h'].call(ctx, args[1]);\n\n            break;\n\n          case 3:\n            _h[i]['h'].call(ctx, args[1], args[2]);\n\n            break;\n\n          default:\n            // have more than 2 given arguments\n            _h[i]['h'].apply(ctx, args);\n\n            break;\n        }\n\n        if (_h[i]['one']) {\n          _h.splice(i, 1);\n\n          len--;\n        } else {\n          i++;\n        }\n      }\n    }\n\n    return this;\n  }\n}; //  onxxxx \n\n/**\n * @event module:zrender/mixin/Eventful#onclick\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmouseover\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmouseout\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmousemove\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmousewheel\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmousedown\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmouseup\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondrag\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragstart\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragend\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragenter\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragleave\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragover\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondrop\n * @type {Function}\n * @default null\n */\n\nvar _default = Eventful;\nmodule.exports = _default;","var matrix = require(\"../core/matrix\");\n\nvar vector = require(\"../core/vector\");\n\n/**\n * \n * @module zrender/mixin/Transformable\n * @author pissang (https://www.github.com/pissang)\n */\nvar mIdentity = matrix.identity;\nvar EPSILON = 5e-5;\n\nfunction isNotAroundZero(val) {\n  return val > EPSILON || val < -EPSILON;\n}\n/**\n * @alias module:zrender/mixin/Transformable\n * @constructor\n */\n\n\nvar Transformable = function (opts) {\n  opts = opts || {}; // If there are no given position, rotation, scale\n\n  if (!opts.position) {\n    /**\n     * \n     * @type {Array.<number>}\n     * @default [0, 0]\n     */\n    this.position = [0, 0];\n  }\n\n  if (opts.rotation == null) {\n    /**\n     * \n     * @type {Array.<number>}\n     * @default 0\n     */\n    this.rotation = 0;\n  }\n\n  if (!opts.scale) {\n    /**\n     * \n     * @type {Array.<number>}\n     * @default [1, 1]\n     */\n    this.scale = [1, 1];\n  }\n  /**\n   * \n   * @type {Array.<number>}\n   * @default null\n   */\n\n\n  this.origin = this.origin || null;\n};\n\nvar transformableProto = Transformable.prototype;\ntransformableProto.transform = null;\n/**\n * \n * , position, rotation, scaletransformtransform\n */\n\ntransformableProto.needLocalTransform = function () {\n  return isNotAroundZero(this.rotation) || isNotAroundZero(this.position[0]) || isNotAroundZero(this.position[1]) || isNotAroundZero(this.scale[0] - 1) || isNotAroundZero(this.scale[1] - 1);\n};\n\ntransformableProto.updateTransform = function () {\n  var parent = this.parent;\n  var parentHasTransform = parent && parent.transform;\n  var needLocalTransform = this.needLocalTransform();\n  var m = this.transform;\n\n  if (!(needLocalTransform || parentHasTransform)) {\n    m && mIdentity(m);\n    return;\n  }\n\n  m = m || matrix.create();\n\n  if (needLocalTransform) {\n    this.getLocalTransform(m);\n  } else {\n    mIdentity(m);\n  } // \n\n\n  if (parentHasTransform) {\n    if (needLocalTransform) {\n      matrix.mul(m, parent.transform, m);\n    } else {\n      matrix.copy(m, parent.transform);\n    }\n  } // \n\n\n  this.transform = m;\n  this.invTransform = this.invTransform || matrix.create();\n  matrix.invert(this.invTransform, m);\n};\n\ntransformableProto.getLocalTransform = function (m) {\n  return Transformable.getLocalTransform(this, m);\n};\n/**\n * transformcontext\n * @param {CanvasRenderingContext2D} ctx\n */\n\n\ntransformableProto.setTransform = function (ctx) {\n  var m = this.transform;\n  var dpr = ctx.dpr || 1;\n\n  if (m) {\n    ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\n  } else {\n    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n  }\n};\n\ntransformableProto.restoreTransform = function (ctx) {\n  var dpr = ctx.dpr || 1;\n  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n};\n\nvar tmpTransform = [];\n/**\n * `transform``position`, `rotation`, `scale`\n */\n\ntransformableProto.decomposeTransform = function () {\n  if (!this.transform) {\n    return;\n  }\n\n  var parent = this.parent;\n  var m = this.transform;\n\n  if (parent && parent.transform) {\n    // Get local transform and decompose them to position, scale, rotation\n    matrix.mul(tmpTransform, parent.invTransform, m);\n    m = tmpTransform;\n  }\n\n  var sx = m[0] * m[0] + m[1] * m[1];\n  var sy = m[2] * m[2] + m[3] * m[3];\n  var position = this.position;\n  var scale = this.scale;\n\n  if (isNotAroundZero(sx - 1)) {\n    sx = Math.sqrt(sx);\n  }\n\n  if (isNotAroundZero(sy - 1)) {\n    sy = Math.sqrt(sy);\n  }\n\n  if (m[0] < 0) {\n    sx = -sx;\n  }\n\n  if (m[3] < 0) {\n    sy = -sy;\n  }\n\n  position[0] = m[4];\n  position[1] = m[5];\n  scale[0] = sx;\n  scale[1] = sy;\n  this.rotation = Math.atan2(-m[1] / sy, m[0] / sx);\n};\n/**\n * Get global scale\n * @return {Array.<number>}\n */\n\n\ntransformableProto.getGlobalScale = function () {\n  var m = this.transform;\n\n  if (!m) {\n    return [1, 1];\n  }\n\n  var sx = Math.sqrt(m[0] * m[0] + m[1] * m[1]);\n  var sy = Math.sqrt(m[2] * m[2] + m[3] * m[3]);\n\n  if (m[0] < 0) {\n    sx = -sx;\n  }\n\n  if (m[3] < 0) {\n    sy = -sy;\n  }\n\n  return [sx, sy];\n};\n/**\n *  shape \n * @method\n * @param {number} x\n * @param {number} y\n * @return {Array.<number>}\n */\n\n\ntransformableProto.transformCoordToLocal = function (x, y) {\n  var v2 = [x, y];\n  var invTransform = this.invTransform;\n\n  if (invTransform) {\n    vector.applyTransform(v2, v2, invTransform);\n  }\n\n  return v2;\n};\n/**\n * \n * @method\n * @param {number} x\n * @param {number} y\n * @return {Array.<number>}\n */\n\n\ntransformableProto.transformCoordToGlobal = function (x, y) {\n  var v2 = [x, y];\n  var transform = this.transform;\n\n  if (transform) {\n    vector.applyTransform(v2, v2, transform);\n  }\n\n  return v2;\n};\n/**\n * @static\n * @param {Object} target\n * @param {Array.<number>} target.origin\n * @param {number} target.rotation\n * @param {Array.<number>} target.position\n * @param {Array.<number>} [m]\n */\n\n\nTransformable.getLocalTransform = function (target, m) {\n  m = m || [];\n  mIdentity(m);\n  var origin = target.origin;\n  var scale = target.scale || [1, 1];\n  var rotation = target.rotation || 0;\n  var position = target.position || [0, 0];\n\n  if (origin) {\n    // Translate to origin\n    m[4] -= origin[0];\n    m[5] -= origin[1];\n  }\n\n  matrix.scale(m, m, scale);\n\n  if (rotation) {\n    matrix.rotate(m, m, rotation);\n  }\n\n  if (origin) {\n    // Translate back from origin\n    m[4] += origin[0];\n    m[5] += origin[1];\n  }\n\n  m[4] += position[0];\n  m[5] += position[1];\n  return m;\n};\n\nvar _default = Transformable;\nmodule.exports = _default;","var _core = require(\"./core\");\n\nvar createElement = _core.createElement;\n\nvar zrLog = require(\"../core/log\");\n\nvar Path = require(\"../graphic/Path\");\n\nvar ZImage = require(\"../graphic/Image\");\n\nvar ZText = require(\"../graphic/Text\");\n\nvar arrayDiff = require(\"../core/arrayDiff2\");\n\nvar GradientManager = require(\"./helper/GradientManager\");\n\nvar ClippathManager = require(\"./helper/ClippathManager\");\n\nvar _util = require(\"../core/util\");\n\nvar each = _util.each;\n\nvar _graphic = require(\"./graphic\");\n\nvar svgPath = _graphic.path;\nvar svgImage = _graphic.image;\nvar svgText = _graphic.text;\n\n/**\n * SVG Painter\n * @module zrender/svg/Painter\n */\nfunction parseInt10(val) {\n  return parseInt(val, 10);\n}\n\nfunction getSvgProxy(el) {\n  if (el instanceof Path) {\n    return svgPath;\n  } else if (el instanceof ZImage) {\n    return svgImage;\n  } else if (el instanceof ZText) {\n    return svgText;\n  } else {\n    return svgPath;\n  }\n}\n\nfunction checkParentAvailable(parent, child) {\n  return child && parent && child.parentNode !== parent;\n}\n\nfunction insertAfter(parent, child, prevSibling) {\n  if (checkParentAvailable(parent, child) && prevSibling) {\n    var nextSibling = prevSibling.nextSibling;\n    nextSibling ? parent.insertBefore(child, nextSibling) : parent.appendChild(child);\n  }\n}\n\nfunction prepend(parent, child) {\n  if (checkParentAvailable(parent, child)) {\n    var firstChild = parent.firstChild;\n    firstChild ? parent.insertBefore(child, firstChild) : parent.appendChild(child);\n  }\n}\n\nfunction append(parent, child) {\n  if (checkParentAvailable(parent, child)) {\n    parent.appendChild(child);\n  }\n}\n\nfunction remove(parent, child) {\n  if (child && parent && child.parentNode === parent) {\n    parent.removeChild(child);\n  }\n}\n\nfunction getTextSvgElement(displayable) {\n  return displayable.__textSvgEl;\n}\n\nfunction getSvgElement(displayable) {\n  return displayable.__svgEl;\n}\n/**\n * @alias module:zrender/svg/Painter\n */\n\n\nvar SVGPainter = function (root, storage) {\n  this.root = root;\n  this.storage = storage;\n  var svgRoot = createElement('svg');\n  svgRoot.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n  svgRoot.setAttribute('version', '1.1');\n  svgRoot.setAttribute('baseProfile', 'full');\n  svgRoot.style['user-select'] = 'none';\n  this.gradientManager = new GradientManager(svgRoot);\n  this.clipPathManager = new ClippathManager(svgRoot);\n  var viewport = document.createElement('div');\n  viewport.style.cssText = 'overflow: hidden;';\n  this._svgRoot = svgRoot;\n  this._viewport = viewport;\n  root.appendChild(viewport);\n  viewport.appendChild(svgRoot);\n  this.resize();\n  this._visibleList = [];\n};\n\nSVGPainter.prototype = {\n  constructor: SVGPainter,\n  getType: function () {\n    return 'svg';\n  },\n  getViewportRoot: function () {\n    return this._viewport;\n  },\n  getViewportRootOffset: function () {\n    var viewportRoot = this.getViewportRoot();\n\n    if (viewportRoot) {\n      return {\n        offsetLeft: viewportRoot.offsetLeft || 0,\n        offsetTop: viewportRoot.offsetTop || 0\n      };\n    }\n  },\n  refresh: function () {\n    var list = this.storage.getDisplayList(true);\n\n    this._paintList(list);\n  },\n  _paintList: function (list) {\n    this.gradientManager.markAllUnused();\n    this.clipPathManager.markAllUnused();\n    var svgRoot = this._svgRoot;\n    var visibleList = this._visibleList;\n    var listLen = list.length;\n    var newVisibleList = [];\n    var i;\n\n    for (i = 0; i < listLen; i++) {\n      var displayable = list[i];\n      var svgProxy = getSvgProxy(displayable);\n\n      if (!displayable.invisible) {\n        if (displayable.__dirty) {\n          svgProxy && svgProxy.brush(displayable); // Update clipPath\n\n          this.clipPathManager.update(displayable); // Update gradient\n\n          if (displayable.style) {\n            this.gradientManager.update(displayable.style.fill);\n            this.gradientManager.update(displayable.style.stroke);\n          }\n\n          displayable.__dirty = false;\n        }\n\n        newVisibleList.push(displayable);\n      }\n    }\n\n    var diff = arrayDiff(visibleList, newVisibleList);\n    var prevSvgElement; // First do remove, in case element moved to the head and do remove\n    // after add\n\n    for (i = 0; i < diff.length; i++) {\n      var item = diff[i];\n\n      if (item.removed) {\n        for (var k = 0; k < item.count; k++) {\n          var displayable = visibleList[item.indices[k]];\n          var svgElement = getSvgElement(displayable);\n          var textSvgElement = getTextSvgElement(displayable);\n          remove(svgRoot, svgElement);\n          remove(svgRoot, textSvgElement);\n        }\n      }\n    }\n\n    for (i = 0; i < diff.length; i++) {\n      var item = diff[i];\n\n      if (item.added) {\n        for (var k = 0; k < item.count; k++) {\n          var displayable = newVisibleList[item.indices[k]];\n          var svgElement = getSvgElement(displayable);\n          var textSvgElement = getTextSvgElement(displayable);\n          prevSvgElement ? insertAfter(svgRoot, svgElement, prevSvgElement) : prepend(svgRoot, svgElement);\n\n          if (svgElement) {\n            insertAfter(svgRoot, textSvgElement, svgElement);\n          } else if (prevSvgElement) {\n            insertAfter(svgRoot, textSvgElement, prevSvgElement);\n          } else {\n            prepend(svgRoot, textSvgElement);\n          } // Insert text\n\n\n          insertAfter(svgRoot, textSvgElement, svgElement);\n          prevSvgElement = textSvgElement || svgElement || prevSvgElement;\n          this.gradientManager.addWithoutUpdate(svgElement, displayable);\n          this.clipPathManager.markUsed(displayable);\n        }\n      } else if (!item.removed) {\n        for (var k = 0; k < item.count; k++) {\n          var displayable = newVisibleList[item.indices[k]];\n          prevSvgElement = svgElement = getTextSvgElement(displayable) || getSvgElement(displayable) || prevSvgElement;\n          this.gradientManager.markUsed(displayable);\n          this.gradientManager.addWithoutUpdate(svgElement, displayable);\n          this.clipPathManager.markUsed(displayable);\n        }\n      }\n    }\n\n    this.gradientManager.removeUnused();\n    this.clipPathManager.removeUnused();\n    this._visibleList = newVisibleList;\n  },\n  _getDefs: function (isForceCreating) {\n    var svgRoot = this._svgRoot;\n\n    var defs = this._svgRoot.getElementsByTagName('defs');\n\n    if (defs.length === 0) {\n      // Not exist\n      if (isForceCreating) {\n        var defs = svgRoot.insertBefore(createElement('defs'), // Create new tag\n        svgRoot.firstChild // Insert in the front of svg\n        );\n\n        if (!defs.contains) {\n          // IE doesn't support contains method\n          defs.contains = function (el) {\n            var children = defs.children;\n\n            if (!children) {\n              return false;\n            }\n\n            for (var i = children.length - 1; i >= 0; --i) {\n              if (children[i] === el) {\n                return true;\n              }\n            }\n\n            return false;\n          };\n        }\n\n        return defs;\n      } else {\n        return null;\n      }\n    } else {\n      return defs[0];\n    }\n  },\n  resize: function () {\n    var width = this._getWidth();\n\n    var height = this._getHeight();\n\n    if (this._width !== width && this._height !== height) {\n      this._width = width;\n      this._height = height;\n      var viewportStyle = this._viewport.style;\n      viewportStyle.width = width + 'px';\n      viewportStyle.height = height + 'px';\n      var svgRoot = this._svgRoot; // Set width by 'svgRoot.width = width' is invalid\n\n      svgRoot.setAttribute('width', width);\n      svgRoot.setAttribute('height', height);\n    }\n  },\n  getWidth: function () {\n    return this._getWidth();\n  },\n  getHeight: function () {\n    return this._getHeight();\n  },\n  _getWidth: function () {\n    var root = this.root;\n    var stl = document.defaultView.getComputedStyle(root);\n    return (root.clientWidth || parseInt10(stl.width)) - parseInt10(stl.paddingLeft) - parseInt10(stl.paddingRight) | 0;\n  },\n  _getHeight: function () {\n    var root = this.root;\n    var stl = document.defaultView.getComputedStyle(root);\n    return (root.clientHeight || parseInt10(stl.height)) - parseInt10(stl.paddingTop) - parseInt10(stl.paddingBottom) | 0;\n  },\n  dispose: function () {\n    this.root.innerHTML = '';\n    this._svgRoot = this._viewport = this.storage = null;\n  },\n  clear: function () {\n    if (this._viewport) {\n      this.root.removeChild(this._viewport);\n    }\n  },\n  pathToSvg: function () {\n    this.refresh();\n    var html = this._svgRoot.outerHTML;\n    return 'data:img/svg+xml;utf-8,' + unescape(html);\n  }\n}; // Not supported methods\n\nfunction createMethodNotSupport(method) {\n  return function () {\n    zrLog('In SVG mode painter not support method \"' + method + '\"');\n  };\n} // Unsuppoted methods\n\n\neach(['getLayer', 'insertLayer', 'eachLayer', 'eachBuiltinLayer', 'eachOtherLayer', 'getLayers', 'modLayer', 'delLayer', 'clearLayer', 'toDataURL', 'pathToImage'], function (name) {\n  SVGPainter.prototype[name] = createMethodNotSupport(name);\n});\nvar _default = SVGPainter;\nmodule.exports = _default;","var svgURI = 'http://www.w3.org/2000/svg';\n\nfunction createElement(name) {\n  return document.createElementNS(svgURI, name);\n}\n\nexports.createElement = createElement;","var _core = require(\"./core\");\n\nvar createElement = _core.createElement;\n\nvar PathProxy = require(\"../core/PathProxy\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\nvar textContain = require(\"../contain/text\");\n\nvar textHelper = require(\"../graphic/helper/text\");\n\nvar Text = require(\"../graphic/Text\");\n\n// TODO\n// 1. shadow\n// 2. Image: sx, sy, sw, sh\nvar CMD = PathProxy.CMD;\nvar arrayJoin = Array.prototype.join;\nvar NONE = 'none';\nvar mathRound = Math.round;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nvar PI2 = Math.PI * 2;\nvar degree = 180 / PI;\nvar EPSILON = 1e-4;\n\nfunction round4(val) {\n  return mathRound(val * 1e4) / 1e4;\n}\n\nfunction isAroundZero(val) {\n  return val < EPSILON && val > -EPSILON;\n}\n\nfunction pathHasFill(style, isText) {\n  var fill = isText ? style.textFill : style.fill;\n  return fill != null && fill !== NONE;\n}\n\nfunction pathHasStroke(style, isText) {\n  var stroke = isText ? style.textStroke : style.stroke;\n  return stroke != null && stroke !== NONE;\n}\n\nfunction setTransform(svgEl, m) {\n  if (m) {\n    attr(svgEl, 'transform', 'matrix(' + arrayJoin.call(m, ',') + ')');\n  }\n}\n\nfunction attr(el, key, val) {\n  if (!val || val.type !== 'linear' && val.type !== 'radial') {\n    // Don't set attribute for gradient, since it need new dom nodes\n    el.setAttribute(key, val);\n  }\n}\n\nfunction attrXLink(el, key, val) {\n  el.setAttributeNS('http://www.w3.org/1999/xlink', key, val);\n}\n\nfunction bindStyle(svgEl, style, isText) {\n  if (pathHasFill(style, isText)) {\n    var fill = isText ? style.textFill : style.fill;\n    fill = fill === 'transparent' ? NONE : fill;\n    /**\n     * FIXME:\n     * This is a temporary fix for Chrome's clipping bug\n     * that happens when a clip-path is referring another one.\n     * This fix should be used before Chrome's bug is fixed.\n     * For an element that has clip-path, and fill is none,\n     * set it to be \"rgba(0, 0, 0, 0.002)\" will hide the element.\n     * Otherwise, it will show black fill color.\n     * 0.002 is used because this won't work for alpha values smaller\n     * than 0.002.\n     *\n     * See\n     * https://bugs.chromium.org/p/chromium/issues/detail?id=659790\n     * for more information.\n     */\n\n    if (svgEl.getAttribute('clip-path') !== 'none' && fill === NONE) {\n      fill = 'rgba(0, 0, 0, 0.002)';\n    }\n\n    attr(svgEl, 'fill', fill);\n    attr(svgEl, 'fill-opacity', style.opacity);\n  } else {\n    attr(svgEl, 'fill', NONE);\n  }\n\n  if (pathHasStroke(style, isText)) {\n    var stroke = isText ? style.textStroke : style.stroke;\n    stroke = stroke === 'transparent' ? NONE : stroke;\n    attr(svgEl, 'stroke', stroke);\n    var strokeWidth = isText ? style.textStrokeWidth : style.lineWidth;\n    var strokeScale = style.strokeNoScale ? style.host.getLineScale() : 1;\n    attr(svgEl, 'stroke-width', strokeWidth / strokeScale);\n    attr(svgEl, 'paint-order', 'stroke');\n    attr(svgEl, 'stroke-opacity', style.opacity);\n    var lineDash = style.lineDash;\n\n    if (lineDash) {\n      attr(svgEl, 'stroke-dasharray', style.lineDash.join(','));\n      attr(svgEl, 'stroke-dashoffset', mathRound(style.lineDashOffset || 0));\n    } else {\n      attr(svgEl, 'stroke-dasharray', '');\n    } // PENDING\n\n\n    style.lineCap && attr(svgEl, 'stroke-linecap', style.lineCap);\n    style.lineJoin && attr(svgEl, 'stroke-linejoin', style.lineJoin);\n    style.miterLimit && attr(svgEl, 'stroke-miterlimit', style.miterLimit);\n  } else {\n    attr(svgEl, 'stroke', NONE);\n  }\n}\n/***************************************************\n * PATH\n **************************************************/\n\n\nfunction pathDataToString(path) {\n  var str = [];\n  var data = path.data;\n  var dataLength = path.len();\n\n  for (var i = 0; i < dataLength;) {\n    var cmd = data[i++];\n    var cmdStr = '';\n    var nData = 0;\n\n    switch (cmd) {\n      case CMD.M:\n        cmdStr = 'M';\n        nData = 2;\n        break;\n\n      case CMD.L:\n        cmdStr = 'L';\n        nData = 2;\n        break;\n\n      case CMD.Q:\n        cmdStr = 'Q';\n        nData = 4;\n        break;\n\n      case CMD.C:\n        cmdStr = 'C';\n        nData = 6;\n        break;\n\n      case CMD.A:\n        var cx = data[i++];\n        var cy = data[i++];\n        var rx = data[i++];\n        var ry = data[i++];\n        var theta = data[i++];\n        var dTheta = data[i++];\n        var psi = data[i++];\n        var clockwise = data[i++];\n        var dThetaPositive = Math.abs(dTheta);\n        var isCircle = isAroundZero(dThetaPositive % PI2) && !isAroundZero(dThetaPositive);\n        var large = false;\n\n        if (dThetaPositive >= PI2) {\n          large = true;\n        } else if (isAroundZero(dThetaPositive)) {\n          large = false;\n        } else {\n          large = (dTheta > -PI && dTheta < 0 || dTheta > PI) === !!clockwise;\n        }\n\n        var x0 = round4(cx + rx * mathCos(theta));\n        var y0 = round4(cy + ry * mathSin(theta)); // It will not draw if start point and end point are exactly the same\n        // We need to shift the end point with a small value\n        // FIXME A better way to draw circle ?\n\n        if (isCircle) {\n          if (clockwise) {\n            dTheta = PI2 - 1e-4;\n          } else {\n            dTheta = -PI2 + 1e-4;\n          }\n\n          large = true;\n\n          if (i === 9) {\n            // Move to (x0, y0) only when CMD.A comes at the\n            // first position of a shape.\n            // For instance, when drawing a ring, CMD.A comes\n            // after CMD.M, so it's unnecessary to move to\n            // (x0, y0).\n            str.push('M', x0, y0);\n          }\n        }\n\n        var x = round4(cx + rx * mathCos(theta + dTheta));\n        var y = round4(cy + ry * mathSin(theta + dTheta)); // FIXME Ellipse\n\n        str.push('A', round4(rx), round4(ry), mathRound(psi * degree), +large, +clockwise, x, y);\n        break;\n\n      case CMD.Z:\n        cmdStr = 'Z';\n        break;\n\n      case CMD.R:\n        var x = round4(data[i++]);\n        var y = round4(data[i++]);\n        var w = round4(data[i++]);\n        var h = round4(data[i++]);\n        str.push('M', x, y, 'L', x + w, y, 'L', x + w, y + h, 'L', x, y + h, 'L', x, y);\n        break;\n    }\n\n    cmdStr && str.push(cmdStr);\n\n    for (var j = 0; j < nData; j++) {\n      // PENDING With scale\n      str.push(round4(data[i++]));\n    }\n  }\n\n  return str.join(' ');\n}\n\nvar svgPath = {};\n\nsvgPath.brush = function (el) {\n  var style = el.style;\n  var svgEl = el.__svgEl;\n\n  if (!svgEl) {\n    svgEl = createElement('path');\n    el.__svgEl = svgEl;\n  }\n\n  if (!el.path) {\n    el.createPathProxy();\n  }\n\n  var path = el.path;\n\n  if (el.__dirtyPath) {\n    path.beginPath();\n    el.buildPath(path, el.shape);\n    el.__dirtyPath = false;\n    var pathStr = pathDataToString(path);\n\n    if (pathStr.indexOf('NaN') < 0) {\n      // Ignore illegal path, which may happen such in out-of-range\n      // data in Calendar series.\n      attr(svgEl, 'd', pathStr);\n    }\n  }\n\n  bindStyle(svgEl, style);\n  setTransform(svgEl, el.transform);\n\n  if (style.text != null) {\n    svgTextDrawRectText(el, el.getBoundingRect());\n  }\n};\n/***************************************************\n * IMAGE\n **************************************************/\n\n\nvar svgImage = {};\n\nsvgImage.brush = function (el) {\n  var style = el.style;\n  var image = style.image;\n\n  if (image instanceof HTMLImageElement) {\n    var src = image.src;\n    image = src;\n  }\n\n  if (!image) {\n    return;\n  }\n\n  var x = style.x || 0;\n  var y = style.y || 0;\n  var dw = style.width;\n  var dh = style.height;\n  var svgEl = el.__svgEl;\n\n  if (!svgEl) {\n    svgEl = createElement('image');\n    el.__svgEl = svgEl;\n  }\n\n  if (image !== el.__imageSrc) {\n    attrXLink(svgEl, 'href', image); // Caching image src\n\n    el.__imageSrc = image;\n  }\n\n  attr(svgEl, 'width', dw);\n  attr(svgEl, 'height', dh);\n  attr(svgEl, 'x', x);\n  attr(svgEl, 'y', y);\n  setTransform(svgEl, el.transform);\n\n  if (style.text != null) {\n    svgTextDrawRectText(el, el.getBoundingRect());\n  }\n};\n/***************************************************\n * TEXT\n **************************************************/\n\n\nvar svgText = {};\nvar tmpRect = new BoundingRect();\n\nvar svgTextDrawRectText = function (el, rect, textRect) {\n  var style = el.style;\n  el.__dirty && textHelper.normalizeTextStyle(style, true);\n  var text = style.text; // Convert to string\n\n  if (text == null) {\n    // Draw no text only when text is set to null, but not ''\n    return;\n  } else {\n    text += '';\n  }\n\n  var textSvgEl = el.__textSvgEl;\n\n  if (!textSvgEl) {\n    textSvgEl = createElement('text');\n    el.__textSvgEl = textSvgEl;\n  }\n\n  bindStyle(textSvgEl, style, true);\n\n  if (el instanceof Text || el.style.transformText) {\n    // Transform text with element\n    setTransform(textSvgEl, el.transform);\n  } else {\n    if (el.transform) {\n      tmpRect.copy(rect);\n      tmpRect.applyTransform(el.transform);\n      rect = tmpRect;\n    } else {\n      var pos = el.transformCoordToGlobal(rect.x, rect.y);\n      rect.x = pos[0];\n      rect.y = pos[1];\n    }\n  }\n\n  var x;\n  var y;\n  var textPosition = style.textPosition;\n  var distance = style.textDistance;\n  var align = style.textAlign || 'left';\n\n  if (typeof style.fontSize === 'number') {\n    style.fontSize += 'px';\n  }\n\n  var font = style.font || [style.fontStyle || '', style.fontWeight || '', style.fontSize || '', style.fontFamily || ''].join(' ') || textContain.DEFAULT_FONT;\n  var verticalAlign = getVerticalAlignForSvg(style.textVerticalAlign);\n  textRect = textContain.getBoundingRect(text, font, align, verticalAlign);\n  var lineHeight = textRect.lineHeight; // Text position represented by coord\n\n  if (textPosition instanceof Array) {\n    x = rect.x + textPosition[0];\n    y = rect.y + textPosition[1];\n  } else {\n    var newPos = textContain.adjustTextPositionOnRect(textPosition, rect, distance);\n    x = newPos.x;\n    y = newPos.y;\n    verticalAlign = getVerticalAlignForSvg(newPos.textVerticalAlign);\n    align = newPos.textAlign;\n  }\n\n  attr(textSvgEl, 'alignment-baseline', verticalAlign);\n\n  if (font) {\n    textSvgEl.style.font = font;\n  }\n\n  var textPadding = style.textPadding; // Make baseline top\n\n  attr(textSvgEl, 'x', x);\n  attr(textSvgEl, 'y', y);\n  var textLines = text.split('\\n');\n  var nTextLines = textLines.length;\n  var textAnchor = align; // PENDING\n\n  if (textAnchor === 'left') {\n    textAnchor = 'start';\n    textPadding && (x += textPadding[3]);\n  } else if (textAnchor === 'right') {\n    textAnchor = 'end';\n    textPadding && (x -= textPadding[1]);\n  } else if (textAnchor === 'center') {\n    textAnchor = 'middle';\n    textPadding && (x += (textPadding[3] - textPadding[1]) / 2);\n  }\n\n  var dy = 0;\n\n  if (verticalAlign === 'baseline') {\n    dy = -textRect.height + lineHeight;\n    textPadding && (dy -= textPadding[2]);\n  } else if (verticalAlign === 'middle') {\n    dy = (-textRect.height + lineHeight) / 2;\n    textPadding && (y += (textPadding[0] - textPadding[2]) / 2);\n  } else {\n    textPadding && (dy += textPadding[0]);\n  } // Font may affect position of each tspan elements\n\n\n  if (el.__text !== text || el.__textFont !== font) {\n    var tspanList = el.__tspanList || [];\n    el.__tspanList = tspanList;\n\n    for (var i = 0; i < nTextLines; i++) {\n      // Using cached tspan elements\n      var tspan = tspanList[i];\n\n      if (!tspan) {\n        tspan = tspanList[i] = createElement('tspan');\n        textSvgEl.appendChild(tspan);\n        attr(tspan, 'alignment-baseline', verticalAlign);\n        attr(tspan, 'text-anchor', textAnchor);\n      } else {\n        tspan.innerHTML = '';\n      }\n\n      attr(tspan, 'x', x);\n      attr(tspan, 'y', y + i * lineHeight + dy);\n      tspan.appendChild(document.createTextNode(textLines[i]));\n    } // Remove unsed tspan elements\n\n\n    for (; i < tspanList.length; i++) {\n      textSvgEl.removeChild(tspanList[i]);\n    }\n\n    tspanList.length = nTextLines;\n    el.__text = text;\n    el.__textFont = font;\n  } else if (el.__tspanList.length) {\n    // Update span x and y\n    var len = el.__tspanList.length;\n\n    for (var i = 0; i < len; ++i) {\n      var tspan = el.__tspanList[i];\n\n      if (tspan) {\n        attr(tspan, 'x', x);\n        attr(tspan, 'y', y + i * lineHeight + dy);\n      }\n    }\n  }\n};\n\nfunction getVerticalAlignForSvg(verticalAlign) {\n  if (verticalAlign === 'middle') {\n    return 'middle';\n  } else if (verticalAlign === 'bottom') {\n    return 'baseline';\n  } else {\n    return 'hanging';\n  }\n}\n\nsvgText.drawRectText = svgTextDrawRectText;\n\nsvgText.brush = function (el) {\n  var style = el.style;\n\n  if (style.text != null) {\n    //  textPosition\n    style.textPosition = [0, 0];\n    svgTextDrawRectText(el, {\n      x: style.x || 0,\n      y: style.y || 0,\n      width: 0,\n      height: 0\n    }, el.getBoundingRect());\n  }\n};\n\nexports.path = svgPath;\nexports.image = svgImage;\nexports.text = svgText;","var Definable = require(\"./Definable\");\n\nvar zrUtil = require(\"../../core/util\");\n\nvar matrix = require(\"../../core/matrix\");\n\n/**\n * @file Manages SVG clipPath elements.\n * @author Zhang Wenli\n */\n\n/**\n * Manages SVG clipPath elements.\n *\n * @class\n * @extends Definable\n * @param   {SVGElement} svgRoot root of SVG document\n */\nfunction ClippathManager(svgRoot) {\n  Definable.call(this, svgRoot, 'clipPath', '__clippath_in_use__');\n}\n\nzrUtil.inherits(ClippathManager, Definable);\n/**\n * Update clipPath.\n *\n * @param {Displayable} displayable displayable element\n */\n\nClippathManager.prototype.update = function (displayable) {\n  var svgEl = this.getSvgElement(displayable);\n\n  if (svgEl) {\n    this.updateDom(svgEl, displayable.__clipPaths, false);\n  }\n\n  var textEl = this.getTextSvgElement(displayable);\n\n  if (textEl) {\n    // Make another clipPath for text, since it's transform\n    // matrix is not the same with svgElement\n    this.updateDom(textEl, displayable.__clipPaths, true);\n  }\n\n  this.markUsed(displayable);\n};\n/**\n * Create an SVGElement of displayable and create a <clipPath> of its\n * clipPath\n *\n * @param {Displayable} parentEl  parent element\n * @param {ClipPath[]}  clipPaths clipPaths of parent element\n * @param {boolean}     isText    if parent element is Text\n */\n\n\nClippathManager.prototype.updateDom = function (parentEl, clipPaths, isText) {\n  if (clipPaths && clipPaths.length > 0) {\n    // Has clipPath, create <clipPath> with the first clipPath\n    var defs = this.getDefs(true);\n    var clipPath = clipPaths[0];\n    var clipPathEl;\n    var id;\n    var dom = isText ? '_textDom' : '_dom';\n\n    if (clipPath[dom]) {\n      // Use a dom that is already in <defs>\n      id = clipPath[dom].getAttribute('id');\n      clipPathEl = clipPath[dom]; // Use a dom that is already in <defs>\n\n      if (!defs.contains(clipPathEl)) {\n        // This happens when set old clipPath that has\n        // been previously removed\n        defs.appendChild(clipPathEl);\n      }\n    } else {\n      // New <clipPath>\n      id = 'zr-clip-' + this.nextId;\n      ++this.nextId;\n      clipPathEl = this.createElement('clipPath');\n      clipPathEl.setAttribute('id', id);\n      defs.appendChild(clipPathEl);\n      clipPath[dom] = clipPathEl;\n    } // Build path and add to <clipPath>\n\n\n    var svgProxy = this.getSvgProxy(clipPath);\n\n    if (clipPath.transform && clipPath.parent.invTransform && !isText) {\n      /**\n       * If a clipPath has a parent with transform, the transform\n       * of parent should not be considered when setting transform\n       * of clipPath. So we need to transform back from parent's\n       * transform, which is done by multiplying parent's inverse\n       * transform.\n       */\n      // Store old transform\n      var transform = Array.prototype.slice.call(clipPath.transform); // Transform back from parent, and brush path\n\n      matrix.mul(clipPath.transform, clipPath.parent.invTransform, clipPath.transform);\n      svgProxy.brush(clipPath); // Set back transform of clipPath\n\n      clipPath.transform = transform;\n    } else {\n      svgProxy.brush(clipPath);\n    }\n\n    var pathEl = this.getSvgElement(clipPath);\n    /**\n     * Use `cloneNode()` here to appendChild to multiple parents,\n     * which may happend when Text and other shapes are using the same\n     * clipPath. Since Text will create an extra clipPath DOM due to\n     * different transform rules.\n     */\n\n    clipPathEl.appendChild(pathEl.cloneNode());\n    parentEl.setAttribute('clip-path', 'url(#' + id + ')');\n\n    if (clipPaths.length > 1) {\n      // Make the other clipPaths recursively\n      this.updateDom(clipPathEl, clipPaths.slice(1), isText);\n    }\n  } else {\n    // No clipPath\n    if (parentEl) {\n      parentEl.setAttribute('clip-path', 'none');\n    }\n  }\n};\n/**\n * Mark a single clipPath to be used\n *\n * @param {Displayable} displayable displayable element\n */\n\n\nClippathManager.prototype.markUsed = function (displayable) {\n  var that = this;\n\n  if (displayable.__clipPaths && displayable.__clipPaths.length > 0) {\n    zrUtil.each(displayable.__clipPaths, function (clipPath) {\n      if (clipPath._dom) {\n        Definable.prototype.markUsed.call(that, clipPath._dom);\n      }\n\n      if (clipPath._textDom) {\n        Definable.prototype.markUsed.call(that, clipPath._textDom);\n      }\n    });\n  }\n};\n\nvar _default = ClippathManager;\nmodule.exports = _default;","var _core = require(\"../core\");\n\nvar createElement = _core.createElement;\n\nvar zrUtil = require(\"../../core/util\");\n\nvar Path = require(\"../../graphic/Path\");\n\nvar ZImage = require(\"../../graphic/Image\");\n\nvar ZText = require(\"../../graphic/Text\");\n\nvar _graphic = require(\"../graphic\");\n\nvar svgPath = _graphic.path;\nvar svgImage = _graphic.image;\nvar svgText = _graphic.text;\n\n/**\n * @file Manages elements that can be defined in <defs> in SVG,\n *       e.g., gradients, clip path, etc.\n * @author Zhang Wenli\n */\nvar MARK_UNUSED = '0';\nvar MARK_USED = '1';\n/**\n * Manages elements that can be defined in <defs> in SVG,\n * e.g., gradients, clip path, etc.\n *\n * @class\n * @param {SVGElement}      svgRoot   root of SVG document\n * @param {string|string[]} tagNames  possible tag names\n * @param {string}          markLabel label name to make if the element\n *                                    is used\n */\n\nfunction Definable(svgRoot, tagNames, markLabel) {\n  this._svgRoot = svgRoot;\n  this._tagNames = typeof tagNames === 'string' ? [tagNames] : tagNames;\n  this._markLabel = markLabel;\n  this.nextId = 0;\n}\n\nDefinable.prototype.createElement = createElement;\n/**\n * Get the <defs> tag for svgRoot; optionally creates one if not exists.\n *\n * @param {boolean} isForceCreating if need to create when not exists\n * @return {SVGDefsElement} SVG <defs> element, null if it doesn't\n * exist and isForceCreating is false\n */\n\nDefinable.prototype.getDefs = function (isForceCreating) {\n  var svgRoot = this._svgRoot;\n\n  var defs = this._svgRoot.getElementsByTagName('defs');\n\n  if (defs.length === 0) {\n    // Not exist\n    if (isForceCreating) {\n      defs = svgRoot.insertBefore(this.createElement('defs'), // Create new tag\n      svgRoot.firstChild // Insert in the front of svg\n      );\n\n      if (!defs.contains) {\n        // IE doesn't support contains method\n        defs.contains = function (el) {\n          var children = defs.children;\n\n          if (!children) {\n            return false;\n          }\n\n          for (var i = children.length - 1; i >= 0; --i) {\n            if (children[i] === el) {\n              return true;\n            }\n          }\n\n          return false;\n        };\n      }\n\n      return defs;\n    } else {\n      return null;\n    }\n  } else {\n    return defs[0];\n  }\n};\n/**\n * Update DOM element if necessary.\n *\n * @param {Object|string} element style element. e.g., for gradient,\n *                                it may be '#ccc' or {type: 'linear', ...}\n * @param {Function|undefined} onUpdate update callback\n */\n\n\nDefinable.prototype.update = function (element, onUpdate) {\n  if (!element) {\n    return;\n  }\n\n  var defs = this.getDefs(false);\n\n  if (element._dom && defs.contains(element._dom)) {\n    // Update DOM\n    if (typeof onUpdate === 'function') {\n      onUpdate();\n    }\n  } else {\n    // No previous dom, create new\n    var dom = this.add(element);\n\n    if (dom) {\n      element._dom = dom;\n    }\n  }\n};\n/**\n * Add gradient dom to defs\n *\n * @param {SVGElement} dom DOM to be added to <defs>\n */\n\n\nDefinable.prototype.addDom = function (dom) {\n  var defs = this.getDefs(true);\n  defs.appendChild(dom);\n};\n/**\n * Remove DOM of a given element.\n *\n * @param {SVGElement} element element to remove dom\n */\n\n\nDefinable.prototype.removeDom = function (element) {\n  var defs = this.getDefs(false);\n  defs.removeChild(element._dom);\n};\n/**\n * Get DOMs of this element.\n *\n * @return {HTMLDomElement} doms of this defineable elements in <defs>\n */\n\n\nDefinable.prototype.getDoms = function () {\n  var defs = this.getDefs(false);\n\n  if (!defs) {\n    // No dom when defs is not defined\n    return [];\n  }\n\n  var doms = [];\n  zrUtil.each(this._tagNames, function (tagName) {\n    var tags = defs.getElementsByTagName(tagName); // Note that tags is HTMLCollection, which is array-like\n    // rather than real array.\n    // So `doms.concat(tags)` add tags as one object.\n\n    doms = doms.concat([].slice.call(tags));\n  });\n  return doms;\n};\n/**\n * Mark DOMs to be unused before painting, and clear unused ones at the end\n * of the painting.\n */\n\n\nDefinable.prototype.markAllUnused = function () {\n  var doms = this.getDoms();\n  var that = this;\n  zrUtil.each(doms, function (dom) {\n    dom[that._markLabel] = MARK_UNUSED;\n  });\n};\n/**\n * Mark a single DOM to be used.\n *\n * @param {SVGElement} dom DOM to mark\n */\n\n\nDefinable.prototype.markUsed = function (dom) {\n  if (dom) {\n    dom[this._markLabel] = MARK_USED;\n  }\n};\n/**\n * Remove unused DOMs defined in <defs>\n */\n\n\nDefinable.prototype.removeUnused = function () {\n  var defs = this.getDefs(false);\n\n  if (!defs) {\n    // Nothing to remove\n    return;\n  }\n\n  var doms = this.getDoms();\n  var that = this;\n  zrUtil.each(doms, function (dom) {\n    if (dom[that._markLabel] !== MARK_USED) {\n      // Remove gradient\n      defs.removeChild(dom);\n    }\n  });\n};\n/**\n * Get SVG proxy.\n *\n * @param {Displayable} displayable displayable element\n * @return {Path|Image|Text} svg proxy of given element\n */\n\n\nDefinable.prototype.getSvgProxy = function (displayable) {\n  if (displayable instanceof Path) {\n    return svgPath;\n  } else if (displayable instanceof ZImage) {\n    return svgImage;\n  } else if (displayable instanceof ZText) {\n    return svgText;\n  } else {\n    return svgPath;\n  }\n};\n/**\n * Get text SVG element.\n *\n * @param {Displayable} displayable displayable element\n * @return {SVGElement} SVG element of text\n */\n\n\nDefinable.prototype.getTextSvgElement = function (displayable) {\n  return displayable.__textSvgEl;\n};\n/**\n * Get SVG element.\n *\n * @param {Displayable} displayable displayable element\n * @return {SVGElement} SVG element\n */\n\n\nDefinable.prototype.getSvgElement = function (displayable) {\n  return displayable.__svgEl;\n};\n\nvar _default = Definable;\nmodule.exports = _default;","var Definable = require(\"./Definable\");\n\nvar zrUtil = require(\"../../core/util\");\n\nvar zrLog = require(\"../../core/log\");\n\n/**\n * @file Manages SVG gradient elements.\n * @author Zhang Wenli\n */\n\n/**\n * Manages SVG gradient elements.\n *\n * @class\n * @extends Definable\n * @param   {SVGElement} svgRoot root of SVG document\n */\nfunction GradientManager(svgRoot) {\n  Definable.call(this, svgRoot, ['linearGradient', 'radialGradient'], '__gradient_in_use__');\n}\n\nzrUtil.inherits(GradientManager, Definable);\n/**\n * Create new gradient DOM for fill or stroke if not exist,\n * but will not update gradient if exists.\n *\n * @param {SvgElement}  svgElement   SVG element to paint\n * @param {Displayable} displayable  zrender displayable element\n */\n\nGradientManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\n  if (displayable && displayable.style) {\n    var that = this;\n    zrUtil.each(['fill', 'stroke'], function (fillOrStroke) {\n      if (displayable.style[fillOrStroke] && (displayable.style[fillOrStroke].type === 'linear' || displayable.style[fillOrStroke].type === 'radial')) {\n        var gradient = displayable.style[fillOrStroke];\n        var defs = that.getDefs(true); // Create dom in <defs> if not exists\n\n        var dom;\n\n        if (gradient._dom) {\n          // Gradient exists\n          dom = gradient._dom;\n\n          if (!defs.contains(gradient._dom)) {\n            // _dom is no longer in defs, recreate\n            that.addDom(dom);\n          }\n        } else {\n          // New dom\n          dom = that.add(gradient);\n        }\n\n        that.markUsed(displayable);\n        var id = dom.getAttribute('id');\n        svgElement.setAttribute(fillOrStroke, 'url(#' + id + ')');\n      }\n    });\n  }\n};\n/**\n * Add a new gradient tag in <defs>\n *\n * @param   {Gradient} gradient zr gradient instance\n * @return {SVGLinearGradientElement | SVGRadialGradientElement}\n *                            created DOM\n */\n\n\nGradientManager.prototype.add = function (gradient) {\n  var dom;\n\n  if (gradient.type === 'linear') {\n    dom = this.createElement('linearGradient');\n  } else if (gradient.type === 'radial') {\n    dom = this.createElement('radialGradient');\n  } else {\n    zrLog('Illegal gradient type.');\n    return null;\n  } // Set dom id with gradient id, since each gradient instance\n  // will have no more than one dom element.\n  // id may exists before for those dirty elements, in which case\n  // id should remain the same, and other attributes should be\n  // updated.\n\n\n  gradient.id = gradient.id || this.nextId++;\n  dom.setAttribute('id', 'zr-gradient-' + gradient.id);\n  this.updateDom(gradient, dom);\n  this.addDom(dom);\n  return dom;\n};\n/**\n * Update gradient.\n *\n * @param {Gradient} gradient zr gradient instance\n */\n\n\nGradientManager.prototype.update = function (gradient) {\n  var that = this;\n  Definable.prototype.update.call(this, gradient, function () {\n    var type = gradient.type;\n    var tagName = gradient._dom.tagName;\n\n    if (type === 'linear' && tagName === 'linearGradient' || type === 'radial' && tagName === 'radialGradient') {\n      // Gradient type is not changed, update gradient\n      that.updateDom(gradient, gradient._dom);\n    } else {\n      // Remove and re-create if type is changed\n      that.removeDom(gradient);\n      that.add(gradient);\n    }\n  });\n};\n/**\n * Update gradient dom\n *\n * @param {Gradient} gradient zr gradient instance\n * @param {SVGLinearGradientElement | SVGRadialGradientElement} dom\n *                            DOM to update\n */\n\n\nGradientManager.prototype.updateDom = function (gradient, dom) {\n  if (gradient.type === 'linear') {\n    dom.setAttribute('x1', gradient.x);\n    dom.setAttribute('y1', gradient.y);\n    dom.setAttribute('x2', gradient.x2);\n    dom.setAttribute('y2', gradient.y2);\n  } else if (gradient.type === 'radial') {\n    dom.setAttribute('cx', gradient.x);\n    dom.setAttribute('cy', gradient.y);\n    dom.setAttribute('r', gradient.r);\n  } else {\n    zrLog('Illegal gradient type.');\n    return;\n  }\n\n  if (gradient.global) {\n    // x1, x2, y1, y2 in range of 0 to canvas width or height\n    dom.setAttribute('gradientUnits', 'userSpaceOnUse');\n  } else {\n    // x1, x2, y1, y2 in range of 0 to 1\n    dom.setAttribute('gradientUnits', 'objectBoundingBox');\n  } // Remove color stops if exists\n\n\n  dom.innerHTML = ''; // Add color stops\n\n  var colors = gradient.colorStops;\n\n  for (var i = 0, len = colors.length; i < len; ++i) {\n    var stop = this.createElement('stop');\n    stop.setAttribute('offset', colors[i].offset * 100 + '%');\n    stop.setAttribute('stop-color', colors[i].color);\n    dom.appendChild(stop);\n  } // Store dom element in gradient, to avoid creating multiple\n  // dom instances for the same gradient element\n\n\n  gradient._dom = dom;\n};\n/**\n * Mark a single gradient to be used\n *\n * @param {Displayable} displayable displayable element\n */\n\n\nGradientManager.prototype.markUsed = function (displayable) {\n  if (displayable.style) {\n    var gradient = displayable.style.fill;\n\n    if (gradient && gradient._dom) {\n      Definable.prototype.markUsed.call(this, gradient._dom);\n    }\n\n    gradient = displayable.style.stroke;\n\n    if (gradient && gradient._dom) {\n      Definable.prototype.markUsed.call(this, gradient._dom);\n    }\n  }\n};\n\nvar _default = GradientManager;\nmodule.exports = _default;","require(\"./graphic\");\n\nvar _zrender = require(\"../zrender\");\n\nvar registerPainter = _zrender.registerPainter;\n\nvar Painter = require(\"./Painter\");\n\nregisterPainter('svg', Painter);","var LRU = require(\"../core/LRU\");\n\nvar kCSSColorTable = {\n  'transparent': [0, 0, 0, 0],\n  'aliceblue': [240, 248, 255, 1],\n  'antiquewhite': [250, 235, 215, 1],\n  'aqua': [0, 255, 255, 1],\n  'aquamarine': [127, 255, 212, 1],\n  'azure': [240, 255, 255, 1],\n  'beige': [245, 245, 220, 1],\n  'bisque': [255, 228, 196, 1],\n  'black': [0, 0, 0, 1],\n  'blanchedalmond': [255, 235, 205, 1],\n  'blue': [0, 0, 255, 1],\n  'blueviolet': [138, 43, 226, 1],\n  'brown': [165, 42, 42, 1],\n  'burlywood': [222, 184, 135, 1],\n  'cadetblue': [95, 158, 160, 1],\n  'chartreuse': [127, 255, 0, 1],\n  'chocolate': [210, 105, 30, 1],\n  'coral': [255, 127, 80, 1],\n  'cornflowerblue': [100, 149, 237, 1],\n  'cornsilk': [255, 248, 220, 1],\n  'crimson': [220, 20, 60, 1],\n  'cyan': [0, 255, 255, 1],\n  'darkblue': [0, 0, 139, 1],\n  'darkcyan': [0, 139, 139, 1],\n  'darkgoldenrod': [184, 134, 11, 1],\n  'darkgray': [169, 169, 169, 1],\n  'darkgreen': [0, 100, 0, 1],\n  'darkgrey': [169, 169, 169, 1],\n  'darkkhaki': [189, 183, 107, 1],\n  'darkmagenta': [139, 0, 139, 1],\n  'darkolivegreen': [85, 107, 47, 1],\n  'darkorange': [255, 140, 0, 1],\n  'darkorchid': [153, 50, 204, 1],\n  'darkred': [139, 0, 0, 1],\n  'darksalmon': [233, 150, 122, 1],\n  'darkseagreen': [143, 188, 143, 1],\n  'darkslateblue': [72, 61, 139, 1],\n  'darkslategray': [47, 79, 79, 1],\n  'darkslategrey': [47, 79, 79, 1],\n  'darkturquoise': [0, 206, 209, 1],\n  'darkviolet': [148, 0, 211, 1],\n  'deeppink': [255, 20, 147, 1],\n  'deepskyblue': [0, 191, 255, 1],\n  'dimgray': [105, 105, 105, 1],\n  'dimgrey': [105, 105, 105, 1],\n  'dodgerblue': [30, 144, 255, 1],\n  'firebrick': [178, 34, 34, 1],\n  'floralwhite': [255, 250, 240, 1],\n  'forestgreen': [34, 139, 34, 1],\n  'fuchsia': [255, 0, 255, 1],\n  'gainsboro': [220, 220, 220, 1],\n  'ghostwhite': [248, 248, 255, 1],\n  'gold': [255, 215, 0, 1],\n  'goldenrod': [218, 165, 32, 1],\n  'gray': [128, 128, 128, 1],\n  'green': [0, 128, 0, 1],\n  'greenyellow': [173, 255, 47, 1],\n  'grey': [128, 128, 128, 1],\n  'honeydew': [240, 255, 240, 1],\n  'hotpink': [255, 105, 180, 1],\n  'indianred': [205, 92, 92, 1],\n  'indigo': [75, 0, 130, 1],\n  'ivory': [255, 255, 240, 1],\n  'khaki': [240, 230, 140, 1],\n  'lavender': [230, 230, 250, 1],\n  'lavenderblush': [255, 240, 245, 1],\n  'lawngreen': [124, 252, 0, 1],\n  'lemonchiffon': [255, 250, 205, 1],\n  'lightblue': [173, 216, 230, 1],\n  'lightcoral': [240, 128, 128, 1],\n  'lightcyan': [224, 255, 255, 1],\n  'lightgoldenrodyellow': [250, 250, 210, 1],\n  'lightgray': [211, 211, 211, 1],\n  'lightgreen': [144, 238, 144, 1],\n  'lightgrey': [211, 211, 211, 1],\n  'lightpink': [255, 182, 193, 1],\n  'lightsalmon': [255, 160, 122, 1],\n  'lightseagreen': [32, 178, 170, 1],\n  'lightskyblue': [135, 206, 250, 1],\n  'lightslategray': [119, 136, 153, 1],\n  'lightslategrey': [119, 136, 153, 1],\n  'lightsteelblue': [176, 196, 222, 1],\n  'lightyellow': [255, 255, 224, 1],\n  'lime': [0, 255, 0, 1],\n  'limegreen': [50, 205, 50, 1],\n  'linen': [250, 240, 230, 1],\n  'magenta': [255, 0, 255, 1],\n  'maroon': [128, 0, 0, 1],\n  'mediumaquamarine': [102, 205, 170, 1],\n  'mediumblue': [0, 0, 205, 1],\n  'mediumorchid': [186, 85, 211, 1],\n  'mediumpurple': [147, 112, 219, 1],\n  'mediumseagreen': [60, 179, 113, 1],\n  'mediumslateblue': [123, 104, 238, 1],\n  'mediumspringgreen': [0, 250, 154, 1],\n  'mediumturquoise': [72, 209, 204, 1],\n  'mediumvioletred': [199, 21, 133, 1],\n  'midnightblue': [25, 25, 112, 1],\n  'mintcream': [245, 255, 250, 1],\n  'mistyrose': [255, 228, 225, 1],\n  'moccasin': [255, 228, 181, 1],\n  'navajowhite': [255, 222, 173, 1],\n  'navy': [0, 0, 128, 1],\n  'oldlace': [253, 245, 230, 1],\n  'olive': [128, 128, 0, 1],\n  'olivedrab': [107, 142, 35, 1],\n  'orange': [255, 165, 0, 1],\n  'orangered': [255, 69, 0, 1],\n  'orchid': [218, 112, 214, 1],\n  'palegoldenrod': [238, 232, 170, 1],\n  'palegreen': [152, 251, 152, 1],\n  'paleturquoise': [175, 238, 238, 1],\n  'palevioletred': [219, 112, 147, 1],\n  'papayawhip': [255, 239, 213, 1],\n  'peachpuff': [255, 218, 185, 1],\n  'peru': [205, 133, 63, 1],\n  'pink': [255, 192, 203, 1],\n  'plum': [221, 160, 221, 1],\n  'powderblue': [176, 224, 230, 1],\n  'purple': [128, 0, 128, 1],\n  'red': [255, 0, 0, 1],\n  'rosybrown': [188, 143, 143, 1],\n  'royalblue': [65, 105, 225, 1],\n  'saddlebrown': [139, 69, 19, 1],\n  'salmon': [250, 128, 114, 1],\n  'sandybrown': [244, 164, 96, 1],\n  'seagreen': [46, 139, 87, 1],\n  'seashell': [255, 245, 238, 1],\n  'sienna': [160, 82, 45, 1],\n  'silver': [192, 192, 192, 1],\n  'skyblue': [135, 206, 235, 1],\n  'slateblue': [106, 90, 205, 1],\n  'slategray': [112, 128, 144, 1],\n  'slategrey': [112, 128, 144, 1],\n  'snow': [255, 250, 250, 1],\n  'springgreen': [0, 255, 127, 1],\n  'steelblue': [70, 130, 180, 1],\n  'tan': [210, 180, 140, 1],\n  'teal': [0, 128, 128, 1],\n  'thistle': [216, 191, 216, 1],\n  'tomato': [255, 99, 71, 1],\n  'turquoise': [64, 224, 208, 1],\n  'violet': [238, 130, 238, 1],\n  'wheat': [245, 222, 179, 1],\n  'white': [255, 255, 255, 1],\n  'whitesmoke': [245, 245, 245, 1],\n  'yellow': [255, 255, 0, 1],\n  'yellowgreen': [154, 205, 50, 1]\n};\n\nfunction clampCssByte(i) {\n  // Clamp to integer 0 .. 255.\n  i = Math.round(i); // Seems to be what Chrome does (vs truncation).\n\n  return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clampCssAngle(i) {\n  // Clamp to integer 0 .. 360.\n  i = Math.round(i); // Seems to be what Chrome does (vs truncation).\n\n  return i < 0 ? 0 : i > 360 ? 360 : i;\n}\n\nfunction clampCssFloat(f) {\n  // Clamp to float 0.0 .. 1.0.\n  return f < 0 ? 0 : f > 1 ? 1 : f;\n}\n\nfunction parseCssInt(str) {\n  // int or percentage.\n  if (str.length && str.charAt(str.length - 1) === '%') {\n    return clampCssByte(parseFloat(str) / 100 * 255);\n  }\n\n  return clampCssByte(parseInt(str, 10));\n}\n\nfunction parseCssFloat(str) {\n  // float or percentage.\n  if (str.length && str.charAt(str.length - 1) === '%') {\n    return clampCssFloat(parseFloat(str) / 100);\n  }\n\n  return clampCssFloat(parseFloat(str));\n}\n\nfunction cssHueToRgb(m1, m2, h) {\n  if (h < 0) {\n    h += 1;\n  } else if (h > 1) {\n    h -= 1;\n  }\n\n  if (h * 6 < 1) {\n    return m1 + (m2 - m1) * h * 6;\n  }\n\n  if (h * 2 < 1) {\n    return m2;\n  }\n\n  if (h * 3 < 2) {\n    return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n  }\n\n  return m1;\n}\n\nfunction lerpNumber(a, b, p) {\n  return a + (b - a) * p;\n}\n\nfunction setRgba(out, r, g, b, a) {\n  out[0] = r;\n  out[1] = g;\n  out[2] = b;\n  out[3] = a;\n  return out;\n}\n\nfunction copyRgba(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\nvar colorCache = new LRU(20);\nvar lastRemovedArr = null;\n\nfunction putToCache(colorStr, rgbaArr) {\n  // Reuse removed array\n  if (lastRemovedArr) {\n    copyRgba(lastRemovedArr, rgbaArr);\n  }\n\n  lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || rgbaArr.slice());\n}\n/**\n * @param {string} colorStr\n * @param {Array.<number>} out\n * @return {Array.<number>}\n * @memberOf module:zrender/util/color\n */\n\n\nfunction parse(colorStr, rgbaArr) {\n  if (!colorStr) {\n    return;\n  }\n\n  rgbaArr = rgbaArr || [];\n  var cached = colorCache.get(colorStr);\n\n  if (cached) {\n    return copyRgba(rgbaArr, cached);\n  } // colorStr may be not string\n\n\n  colorStr = colorStr + ''; // Remove all whitespace, not compliant, but should just be more accepting.\n\n  var str = colorStr.replace(/ /g, '').toLowerCase(); // Color keywords (and transparent) lookup.\n\n  if (str in kCSSColorTable) {\n    copyRgba(rgbaArr, kCSSColorTable[str]);\n    putToCache(colorStr, rgbaArr);\n    return rgbaArr;\n  } // #abc and #abc123 syntax.\n\n\n  if (str.charAt(0) === '#') {\n    if (str.length === 4) {\n      var iv = parseInt(str.substr(1), 16); // TODO(deanm): Stricter parsing.\n\n      if (!(iv >= 0 && iv <= 0xfff)) {\n        setRgba(rgbaArr, 0, 0, 0, 1);\n        return; // Covers NaN.\n      }\n\n      setRgba(rgbaArr, (iv & 0xf00) >> 4 | (iv & 0xf00) >> 8, iv & 0xf0 | (iv & 0xf0) >> 4, iv & 0xf | (iv & 0xf) << 4, 1);\n      putToCache(colorStr, rgbaArr);\n      return rgbaArr;\n    } else if (str.length === 7) {\n      var iv = parseInt(str.substr(1), 16); // TODO(deanm): Stricter parsing.\n\n      if (!(iv >= 0 && iv <= 0xffffff)) {\n        setRgba(rgbaArr, 0, 0, 0, 1);\n        return; // Covers NaN.\n      }\n\n      setRgba(rgbaArr, (iv & 0xff0000) >> 16, (iv & 0xff00) >> 8, iv & 0xff, 1);\n      putToCache(colorStr, rgbaArr);\n      return rgbaArr;\n    }\n\n    return;\n  }\n\n  var op = str.indexOf('('),\n      ep = str.indexOf(')');\n\n  if (op !== -1 && ep + 1 === str.length) {\n    var fname = str.substr(0, op);\n    var params = str.substr(op + 1, ep - (op + 1)).split(',');\n    var alpha = 1; // To allow case fallthrough.\n\n    switch (fname) {\n      case 'rgba':\n        if (params.length !== 4) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        alpha = parseCssFloat(params.pop());\n      // jshint ignore:line\n      // Fall through.\n\n      case 'rgb':\n        if (params.length !== 3) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        setRgba(rgbaArr, parseCssInt(params[0]), parseCssInt(params[1]), parseCssInt(params[2]), alpha);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n\n      case 'hsla':\n        if (params.length !== 4) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        params[3] = parseCssFloat(params[3]);\n        hsla2rgba(params, rgbaArr);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n\n      case 'hsl':\n        if (params.length !== 3) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        hsla2rgba(params, rgbaArr);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n\n      default:\n        return;\n    }\n  }\n\n  setRgba(rgbaArr, 0, 0, 0, 1);\n  return;\n}\n/**\n * @param {Array.<number>} hsla\n * @param {Array.<number>} rgba\n * @return {Array.<number>} rgba\n */\n\n\nfunction hsla2rgba(hsla, rgba) {\n  var h = (parseFloat(hsla[0]) % 360 + 360) % 360 / 360; // 0 .. 1\n  // NOTE(deanm): According to the CSS spec s/l should only be\n  // percentages, but we don't bother and let float or percentage.\n\n  var s = parseCssFloat(hsla[1]);\n  var l = parseCssFloat(hsla[2]);\n  var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n  var m1 = l * 2 - m2;\n  rgba = rgba || [];\n  setRgba(rgba, clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255), clampCssByte(cssHueToRgb(m1, m2, h) * 255), clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255), 1);\n\n  if (hsla.length === 4) {\n    rgba[3] = hsla[3];\n  }\n\n  return rgba;\n}\n/**\n * @param {Array.<number>} rgba\n * @return {Array.<number>} hsla\n */\n\n\nfunction rgba2hsla(rgba) {\n  if (!rgba) {\n    return;\n  } // RGB from 0 to 255\n\n\n  var R = rgba[0] / 255;\n  var G = rgba[1] / 255;\n  var B = rgba[2] / 255;\n  var vMin = Math.min(R, G, B); // Min. value of RGB\n\n  var vMax = Math.max(R, G, B); // Max. value of RGB\n\n  var delta = vMax - vMin; // Delta RGB value\n\n  var L = (vMax + vMin) / 2;\n  var H;\n  var S; // HSL results from 0 to 1\n\n  if (delta === 0) {\n    H = 0;\n    S = 0;\n  } else {\n    if (L < 0.5) {\n      S = delta / (vMax + vMin);\n    } else {\n      S = delta / (2 - vMax - vMin);\n    }\n\n    var deltaR = ((vMax - R) / 6 + delta / 2) / delta;\n    var deltaG = ((vMax - G) / 6 + delta / 2) / delta;\n    var deltaB = ((vMax - B) / 6 + delta / 2) / delta;\n\n    if (R === vMax) {\n      H = deltaB - deltaG;\n    } else if (G === vMax) {\n      H = 1 / 3 + deltaR - deltaB;\n    } else if (B === vMax) {\n      H = 2 / 3 + deltaG - deltaR;\n    }\n\n    if (H < 0) {\n      H += 1;\n    }\n\n    if (H > 1) {\n      H -= 1;\n    }\n  }\n\n  var hsla = [H * 360, S, L];\n\n  if (rgba[3] != null) {\n    hsla.push(rgba[3]);\n  }\n\n  return hsla;\n}\n/**\n * @param {string} color\n * @param {number} level\n * @return {string}\n * @memberOf module:zrender/util/color\n */\n\n\nfunction lift(color, level) {\n  var colorArr = parse(color);\n\n  if (colorArr) {\n    for (var i = 0; i < 3; i++) {\n      if (level < 0) {\n        colorArr[i] = colorArr[i] * (1 - level) | 0;\n      } else {\n        colorArr[i] = (255 - colorArr[i]) * level + colorArr[i] | 0;\n      }\n    }\n\n    return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n  }\n}\n/**\n * @param {string} color\n * @return {string}\n * @memberOf module:zrender/util/color\n */\n\n\nfunction toHex(color) {\n  var colorArr = parse(color);\n\n  if (colorArr) {\n    return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + +colorArr[2]).toString(16).slice(1);\n  }\n}\n/**\n * Map value to color. Faster than lerp methods because color is represented by rgba array.\n * @param {number} normalizedValue A float between 0 and 1.\n * @param {Array.<Array.<number>>} colors List of rgba color array\n * @param {Array.<number>} [out] Mapped gba color array\n * @return {Array.<number>} will be null/undefined if input illegal.\n */\n\n\nfunction fastLerp(normalizedValue, colors, out) {\n  if (!(colors && colors.length) || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n    return;\n  }\n\n  out = out || [];\n  var value = normalizedValue * (colors.length - 1);\n  var leftIndex = Math.floor(value);\n  var rightIndex = Math.ceil(value);\n  var leftColor = colors[leftIndex];\n  var rightColor = colors[rightIndex];\n  var dv = value - leftIndex;\n  out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n  out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n  out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n  out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n  return out;\n}\n/**\n * @deprecated\n */\n\n\nvar fastMapToColor = fastLerp;\n/**\n * @param {number} normalizedValue A float between 0 and 1.\n * @param {Array.<string>} colors Color list.\n * @param {boolean=} fullOutput Default false.\n * @return {(string|Object)} Result color. If fullOutput,\n *                           return {color: ..., leftIndex: ..., rightIndex: ..., value: ...},\n * @memberOf module:zrender/util/color\n */\n\nfunction lerp(normalizedValue, colors, fullOutput) {\n  if (!(colors && colors.length) || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n    return;\n  }\n\n  var value = normalizedValue * (colors.length - 1);\n  var leftIndex = Math.floor(value);\n  var rightIndex = Math.ceil(value);\n  var leftColor = parse(colors[leftIndex]);\n  var rightColor = parse(colors[rightIndex]);\n  var dv = value - leftIndex;\n  var color = stringify([clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)), clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)), clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)), clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))], 'rgba');\n  return fullOutput ? {\n    color: color,\n    leftIndex: leftIndex,\n    rightIndex: rightIndex,\n    value: value\n  } : color;\n}\n/**\n * @deprecated\n */\n\n\nvar mapToColor = lerp;\n/**\n * @param {string} color\n * @param {number=} h 0 ~ 360, ignore when null.\n * @param {number=} s 0 ~ 1, ignore when null.\n * @param {number=} l 0 ~ 1, ignore when null.\n * @return {string} Color string in rgba format.\n * @memberOf module:zrender/util/color\n */\n\nfunction modifyHSL(color, h, s, l) {\n  color = parse(color);\n\n  if (color) {\n    color = rgba2hsla(color);\n    h != null && (color[0] = clampCssAngle(h));\n    s != null && (color[1] = parseCssFloat(s));\n    l != null && (color[2] = parseCssFloat(l));\n    return stringify(hsla2rgba(color), 'rgba');\n  }\n}\n/**\n * @param {string} color\n * @param {number=} alpha 0 ~ 1\n * @return {string} Color string in rgba format.\n * @memberOf module:zrender/util/color\n */\n\n\nfunction modifyAlpha(color, alpha) {\n  color = parse(color);\n\n  if (color && alpha != null) {\n    color[3] = clampCssFloat(alpha);\n    return stringify(color, 'rgba');\n  }\n}\n/**\n * @param {Array.<number>} arrColor like [12,33,44,0.4]\n * @param {string} type 'rgba', 'hsva', ...\n * @return {string} Result color. (If input illegal, return undefined).\n */\n\n\nfunction stringify(arrColor, type) {\n  if (!arrColor || !arrColor.length) {\n    return;\n  }\n\n  var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n\n  if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n    colorStr += ',' + arrColor[3];\n  }\n\n  return type + '(' + colorStr + ')';\n}\n\nexports.parse = parse;\nexports.lift = lift;\nexports.toHex = toHex;\nexports.fastLerp = fastLerp;\nexports.fastMapToColor = fastMapToColor;\nexports.lerp = lerp;\nexports.mapToColor = mapToColor;\nexports.modifyHSL = modifyHSL;\nexports.modifyAlpha = modifyAlpha;\nexports.stringify = stringify;","var Path = require(\"../graphic/Path\");\n\nvar PathProxy = require(\"../core/PathProxy\");\n\nvar transformPath = require(\"./transformPath\");\n\n// command chars\nvar cc = ['m', 'M', 'l', 'L', 'v', 'V', 'h', 'H', 'z', 'Z', 'c', 'C', 'q', 'Q', 't', 'T', 's', 'S', 'a', 'A'];\nvar mathSqrt = Math.sqrt;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\n\nvar vMag = function (v) {\n  return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n};\n\nvar vRatio = function (u, v) {\n  return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n};\n\nvar vAngle = function (u, v) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n};\n\nfunction processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {\n  var psi = psiDeg * (PI / 180.0);\n  var xp = mathCos(psi) * (x1 - x2) / 2.0 + mathSin(psi) * (y1 - y2) / 2.0;\n  var yp = -1 * mathSin(psi) * (x1 - x2) / 2.0 + mathCos(psi) * (y1 - y2) / 2.0;\n  var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n\n  if (lambda > 1) {\n    rx *= mathSqrt(lambda);\n    ry *= mathSqrt(lambda);\n  }\n\n  var f = (fa === fs ? -1 : 1) * mathSqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) / (rx * rx * (yp * yp) + ry * ry * (xp * xp))) || 0;\n  var cxp = f * rx * yp / ry;\n  var cyp = f * -ry * xp / rx;\n  var cx = (x1 + x2) / 2.0 + mathCos(psi) * cxp - mathSin(psi) * cyp;\n  var cy = (y1 + y2) / 2.0 + mathSin(psi) * cxp + mathCos(psi) * cyp;\n  var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n  var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n  var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n  var dTheta = vAngle(u, v);\n\n  if (vRatio(u, v) <= -1) {\n    dTheta = PI;\n  }\n\n  if (vRatio(u, v) >= 1) {\n    dTheta = 0;\n  }\n\n  if (fs === 0 && dTheta > 0) {\n    dTheta = dTheta - 2 * PI;\n  }\n\n  if (fs === 1 && dTheta < 0) {\n    dTheta = dTheta + 2 * PI;\n  }\n\n  path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);\n}\n\nfunction createPathProxyFromString(data) {\n  if (!data) {\n    return [];\n  } // command string\n\n\n  var cs = data.replace(/-/g, ' -').replace(/  /g, ' ').replace(/ /g, ',').replace(/,,/g, ',');\n  var n; // create pipes so that we can split the data\n\n  for (n = 0; n < cc.length; n++) {\n    cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n  } // create array\n\n\n  var arr = cs.split('|'); // init context point\n\n  var cpx = 0;\n  var cpy = 0;\n  var path = new PathProxy();\n  var CMD = PathProxy.CMD;\n  var prevCmd;\n\n  for (n = 1; n < arr.length; n++) {\n    var str = arr[n];\n    var c = str.charAt(0);\n    var off = 0;\n    var p = str.slice(1).replace(/e,-/g, 'e-').split(',');\n    var cmd;\n\n    if (p.length > 0 && p[0] === '') {\n      p.shift();\n    }\n\n    for (var i = 0; i < p.length; i++) {\n      p[i] = parseFloat(p[i]);\n    }\n\n    while (off < p.length && !isNaN(p[off])) {\n      if (isNaN(p[0])) {\n        break;\n      }\n\n      var ctlPtx;\n      var ctlPty;\n      var rx;\n      var ry;\n      var psi;\n      var fa;\n      var fs;\n      var x1 = cpx;\n      var y1 = cpy; // convert l, H, h, V, and v to L\n\n      switch (c) {\n        case 'l':\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'L':\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'm':\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.M;\n          path.addData(cmd, cpx, cpy);\n          c = 'l';\n          break;\n\n        case 'M':\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.M;\n          path.addData(cmd, cpx, cpy);\n          c = 'L';\n          break;\n\n        case 'h':\n          cpx += p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'H':\n          cpx = p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'v':\n          cpy += p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'V':\n          cpy = p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'C':\n          cmd = CMD.C;\n          path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);\n          cpx = p[off - 2];\n          cpy = p[off - 1];\n          break;\n\n        case 'c':\n          cmd = CMD.C;\n          path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);\n          cpx += p[off - 2];\n          cpy += p[off - 1];\n          break;\n\n        case 'S':\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          var len = path.len();\n          var pathData = path.data;\n\n          if (prevCmd === CMD.C) {\n            ctlPtx += cpx - pathData[len - 4];\n            ctlPty += cpy - pathData[len - 3];\n          }\n\n          cmd = CMD.C;\n          x1 = p[off++];\n          y1 = p[off++];\n          cpx = p[off++];\n          cpy = p[off++];\n          path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n          break;\n\n        case 's':\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          var len = path.len();\n          var pathData = path.data;\n\n          if (prevCmd === CMD.C) {\n            ctlPtx += cpx - pathData[len - 4];\n            ctlPty += cpy - pathData[len - 3];\n          }\n\n          cmd = CMD.C;\n          x1 = cpx + p[off++];\n          y1 = cpy + p[off++];\n          cpx += p[off++];\n          cpy += p[off++];\n          path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n          break;\n\n        case 'Q':\n          x1 = p[off++];\n          y1 = p[off++];\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.Q;\n          path.addData(cmd, x1, y1, cpx, cpy);\n          break;\n\n        case 'q':\n          x1 = p[off++] + cpx;\n          y1 = p[off++] + cpy;\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.Q;\n          path.addData(cmd, x1, y1, cpx, cpy);\n          break;\n\n        case 'T':\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          var len = path.len();\n          var pathData = path.data;\n\n          if (prevCmd === CMD.Q) {\n            ctlPtx += cpx - pathData[len - 4];\n            ctlPty += cpy - pathData[len - 3];\n          }\n\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.Q;\n          path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n          break;\n\n        case 't':\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          var len = path.len();\n          var pathData = path.data;\n\n          if (prevCmd === CMD.Q) {\n            ctlPtx += cpx - pathData[len - 4];\n            ctlPty += cpy - pathData[len - 3];\n          }\n\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.Q;\n          path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n          break;\n\n        case 'A':\n          rx = p[off++];\n          ry = p[off++];\n          psi = p[off++];\n          fa = p[off++];\n          fs = p[off++];\n          x1 = cpx, y1 = cpy;\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.A;\n          processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n          break;\n\n        case 'a':\n          rx = p[off++];\n          ry = p[off++];\n          psi = p[off++];\n          fa = p[off++];\n          fs = p[off++];\n          x1 = cpx, y1 = cpy;\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.A;\n          processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n          break;\n      }\n    }\n\n    if (c === 'z' || c === 'Z') {\n      cmd = CMD.Z;\n      path.addData(cmd);\n    }\n\n    prevCmd = cmd;\n  }\n\n  path.toStatic();\n  return path;\n} // TODO Optimize double memory cost problem\n\n\nfunction createPathOptions(str, opts) {\n  var pathProxy = createPathProxyFromString(str);\n  opts = opts || {};\n\n  opts.buildPath = function (path) {\n    if (path.setData) {\n      path.setData(pathProxy.data); // Svg and vml renderer don't have context\n\n      var ctx = path.getContext();\n\n      if (ctx) {\n        path.rebuildPath(ctx);\n      }\n    } else {\n      var ctx = path;\n      pathProxy.rebuildPath(ctx);\n    }\n  };\n\n  opts.applyTransform = function (m) {\n    transformPath(pathProxy, m);\n    this.dirty(true);\n  };\n\n  return opts;\n}\n/**\n * Create a Path object from path string data\n * http://www.w3.org/TR/SVG/paths.html#PathData\n * @param  {Object} opts Other options\n */\n\n\nfunction createFromString(str, opts) {\n  return new Path(createPathOptions(str, opts));\n}\n/**\n * Create a Path class from path string data\n * @param  {string} str\n * @param  {Object} opts Other options\n */\n\n\nfunction extendFromString(str, opts) {\n  return Path.extend(createPathOptions(str, opts));\n}\n/**\n * Merge multiple paths\n */\n// TODO Apply transform\n// TODO stroke dash\n// TODO Optimize double memory cost problem\n\n\nfunction mergePath(pathEls, opts) {\n  var pathList = [];\n  var len = pathEls.length;\n\n  for (var i = 0; i < len; i++) {\n    var pathEl = pathEls[i];\n\n    if (!pathEl.path) {\n      pathEl.createPathProxy();\n    }\n\n    if (pathEl.__dirtyPath) {\n      pathEl.buildPath(pathEl.path, pathEl.shape, true);\n    }\n\n    pathList.push(pathEl.path);\n  }\n\n  var pathBundle = new Path(opts); // Need path proxy.\n\n  pathBundle.createPathProxy();\n\n  pathBundle.buildPath = function (path) {\n    path.appendPath(pathList); // Svg and vml renderer don't have context\n\n    var ctx = path.getContext();\n\n    if (ctx) {\n      path.rebuildPath(ctx);\n    }\n  };\n\n  return pathBundle;\n}\n\nexports.createFromString = createFromString;\nexports.extendFromString = extendFromString;\nexports.mergePath = mergePath;","var PathProxy = require(\"../core/PathProxy\");\n\nvar _vector = require(\"../core/vector\");\n\nvar v2ApplyTransform = _vector.applyTransform;\nvar CMD = PathProxy.CMD;\nvar points = [[], [], []];\nvar mathSqrt = Math.sqrt;\nvar mathAtan2 = Math.atan2;\n\nfunction _default(path, m) {\n  var data = path.data;\n  var cmd;\n  var nPoint;\n  var i;\n  var j;\n  var k;\n  var p;\n  var M = CMD.M;\n  var C = CMD.C;\n  var L = CMD.L;\n  var R = CMD.R;\n  var A = CMD.A;\n  var Q = CMD.Q;\n\n  for (i = 0, j = 0; i < data.length;) {\n    cmd = data[i++];\n    j = i;\n    nPoint = 0;\n\n    switch (cmd) {\n      case M:\n        nPoint = 1;\n        break;\n\n      case L:\n        nPoint = 1;\n        break;\n\n      case C:\n        nPoint = 3;\n        break;\n\n      case Q:\n        nPoint = 2;\n        break;\n\n      case A:\n        var x = m[4];\n        var y = m[5];\n        var sx = mathSqrt(m[0] * m[0] + m[1] * m[1]);\n        var sy = mathSqrt(m[2] * m[2] + m[3] * m[3]);\n        var angle = mathAtan2(-m[1] / sy, m[0] / sx); // cx\n\n        data[i] *= sx;\n        data[i++] += x; // cy\n\n        data[i] *= sy;\n        data[i++] += y; // Scale rx and ry\n        // FIXME Assume psi is 0 here\n\n        data[i++] *= sx;\n        data[i++] *= sy; // Start angle\n\n        data[i++] += angle; // end angle\n\n        data[i++] += angle; // FIXME psi\n\n        i += 2;\n        j = i;\n        break;\n\n      case R:\n        // x0, y0\n        p[0] = data[i++];\n        p[1] = data[i++];\n        v2ApplyTransform(p, p, m);\n        data[j++] = p[0];\n        data[j++] = p[1]; // x1, y1\n\n        p[0] += data[i++];\n        p[1] += data[i++];\n        v2ApplyTransform(p, p, m);\n        data[j++] = p[0];\n        data[j++] = p[1];\n    }\n\n    for (k = 0; k < nPoint; k++) {\n      var p = points[k];\n      p[0] = data[i++];\n      p[1] = data[i++];\n      v2ApplyTransform(p, p, m); // Write back\n\n      data[j++] = p[0];\n      data[j++] = p[1];\n    }\n  }\n}\n\nmodule.exports = _default;","var zrLog = require(\"../core/log\");\n\nvar vmlCore = require(\"./core\");\n\nvar _util = require(\"../core/util\");\n\nvar each = _util.each;\n\n/**\n * VML Painter.\n *\n * @module zrender/vml/Painter\n */\nfunction parseInt10(val) {\n  return parseInt(val, 10);\n}\n/**\n * @alias module:zrender/vml/Painter\n */\n\n\nfunction VMLPainter(root, storage) {\n  vmlCore.initVML();\n  this.root = root;\n  this.storage = storage;\n  var vmlViewport = document.createElement('div');\n  var vmlRoot = document.createElement('div');\n  vmlViewport.style.cssText = 'display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;';\n  vmlRoot.style.cssText = 'position:absolute;left:0;top:0;';\n  root.appendChild(vmlViewport);\n  this._vmlRoot = vmlRoot;\n  this._vmlViewport = vmlViewport;\n  this.resize(); // Modify storage\n\n  var oldDelFromStorage = storage.delFromStorage;\n  var oldAddToStorage = storage.addToStorage;\n\n  storage.delFromStorage = function (el) {\n    oldDelFromStorage.call(storage, el);\n\n    if (el) {\n      el.onRemove && el.onRemove(vmlRoot);\n    }\n  };\n\n  storage.addToStorage = function (el) {\n    // Displayable already has a vml node\n    el.onAdd && el.onAdd(vmlRoot);\n    oldAddToStorage.call(storage, el);\n  };\n\n  this._firstPaint = true;\n}\n\nVMLPainter.prototype = {\n  constructor: VMLPainter,\n  getType: function () {\n    return 'vml';\n  },\n\n  /**\n   * @return {HTMLDivElement}\n   */\n  getViewportRoot: function () {\n    return this._vmlViewport;\n  },\n  getViewportRootOffset: function () {\n    var viewportRoot = this.getViewportRoot();\n\n    if (viewportRoot) {\n      return {\n        offsetLeft: viewportRoot.offsetLeft || 0,\n        offsetTop: viewportRoot.offsetTop || 0\n      };\n    }\n  },\n\n  /**\n   * \n   */\n  refresh: function () {\n    var list = this.storage.getDisplayList(true, true);\n\n    this._paintList(list);\n  },\n  _paintList: function (list) {\n    var vmlRoot = this._vmlRoot;\n\n    for (var i = 0; i < list.length; i++) {\n      var el = list[i];\n\n      if (el.invisible || el.ignore) {\n        if (!el.__alreadyNotVisible) {\n          el.onRemove(vmlRoot);\n        } // Set as already invisible\n\n\n        el.__alreadyNotVisible = true;\n      } else {\n        if (el.__alreadyNotVisible) {\n          el.onAdd(vmlRoot);\n        }\n\n        el.__alreadyNotVisible = false;\n\n        if (el.__dirty) {\n          el.beforeBrush && el.beforeBrush();\n          (el.brushVML || el.brush).call(el, vmlRoot);\n          el.afterBrush && el.afterBrush();\n        }\n      }\n\n      el.__dirty = false;\n    }\n\n    if (this._firstPaint) {\n      // Detached from document at first time\n      // to avoid page refreshing too many times\n      // FIXME  removeChild \n      this._vmlViewport.appendChild(vmlRoot);\n\n      this._firstPaint = false;\n    }\n  },\n  resize: function (width, height) {\n    var width = width == null ? this._getWidth() : width;\n    var height = height == null ? this._getHeight() : height;\n\n    if (this._width != width || this._height != height) {\n      this._width = width;\n      this._height = height;\n      var vmlViewportStyle = this._vmlViewport.style;\n      vmlViewportStyle.width = width + 'px';\n      vmlViewportStyle.height = height + 'px';\n    }\n  },\n  dispose: function () {\n    this.root.innerHTML = '';\n    this._vmlRoot = this._vmlViewport = this.storage = null;\n  },\n  getWidth: function () {\n    return this._width;\n  },\n  getHeight: function () {\n    return this._height;\n  },\n  clear: function () {\n    if (this._vmlViewport) {\n      this.root.removeChild(this._vmlViewport);\n    }\n  },\n  _getWidth: function () {\n    var root = this.root;\n    var stl = root.currentStyle;\n    return (root.clientWidth || parseInt10(stl.width)) - parseInt10(stl.paddingLeft) - parseInt10(stl.paddingRight) | 0;\n  },\n  _getHeight: function () {\n    var root = this.root;\n    var stl = root.currentStyle;\n    return (root.clientHeight || parseInt10(stl.height)) - parseInt10(stl.paddingTop) - parseInt10(stl.paddingBottom) | 0;\n  }\n}; // Not supported methods\n\nfunction createMethodNotSupport(method) {\n  return function () {\n    zrLog('In IE8.0 VML mode painter not support method \"' + method + '\"');\n  };\n} // Unsupported methods\n\n\neach(['getLayer', 'insertLayer', 'eachLayer', 'eachBuiltinLayer', 'eachOtherLayer', 'getLayers', 'modLayer', 'delLayer', 'clearLayer', 'toDataURL', 'pathToImage'], function (name) {\n  VMLPainter.prototype[name] = createMethodNotSupport(name);\n});\nvar _default = VMLPainter;\nmodule.exports = _default;","var env = require(\"../core/env\");\n\nvar urn = 'urn:schemas-microsoft-com:vml';\nvar win = typeof window === 'undefined' ? null : window;\nvar vmlInited = false;\nvar doc = win && win.document;\n\nfunction createNode(tagName) {\n  return doCreateNode(tagName);\n} // Avoid assign to an exported variable, for transforming to cjs.\n\n\nvar doCreateNode;\n\nif (doc && !env.canvasSupported) {\n  try {\n    !doc.namespaces.zrvml && doc.namespaces.add('zrvml', urn);\n\n    doCreateNode = function (tagName) {\n      return doc.createElement('<zrvml:' + tagName + ' class=\"zrvml\">');\n    };\n  } catch (e) {\n    doCreateNode = function (tagName) {\n      return doc.createElement('<' + tagName + ' xmlns=\"' + urn + '\" class=\"zrvml\">');\n    };\n  }\n} // From raphael\n\n\nfunction initVML() {\n  if (vmlInited || !doc) {\n    return;\n  }\n\n  vmlInited = true;\n  var styleSheets = doc.styleSheets;\n\n  if (styleSheets.length < 31) {\n    doc.createStyleSheet().addRule('.zrvml', 'behavior:url(#default#VML)');\n  } else {\n    // http://msdn.microsoft.com/en-us/library/ms531194%28VS.85%29.aspx\n    styleSheets[0].addRule('.zrvml', 'behavior:url(#default#VML)');\n  }\n}\n\nexports.doc = doc;\nexports.createNode = createNode;\nexports.initVML = initVML;","var env = require(\"../core/env\");\n\nvar _vector = require(\"../core/vector\");\n\nvar applyTransform = _vector.applyTransform;\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\nvar colorTool = require(\"../tool/color\");\n\nvar textContain = require(\"../contain/text\");\n\nvar textHelper = require(\"../graphic/helper/text\");\n\nvar RectText = require(\"../graphic/mixin/RectText\");\n\nvar Displayable = require(\"../graphic/Displayable\");\n\nvar ZImage = require(\"../graphic/Image\");\n\nvar Text = require(\"../graphic/Text\");\n\nvar Path = require(\"../graphic/Path\");\n\nvar PathProxy = require(\"../core/PathProxy\");\n\nvar Gradient = require(\"../graphic/Gradient\");\n\nvar vmlCore = require(\"./core\");\n\n// http://www.w3.org/TR/NOTE-VML\n// TODO Use proxy like svg instead of overwrite brush methods\nvar CMD = PathProxy.CMD;\nvar round = Math.round;\nvar sqrt = Math.sqrt;\nvar abs = Math.abs;\nvar cos = Math.cos;\nvar sin = Math.sin;\nvar mathMax = Math.max;\n\nif (!env.canvasSupported) {\n  var comma = ',';\n  var imageTransformPrefix = 'progid:DXImageTransform.Microsoft';\n  var Z = 21600;\n  var Z2 = Z / 2;\n  var ZLEVEL_BASE = 100000;\n  var Z_BASE = 1000;\n\n  var initRootElStyle = function (el) {\n    el.style.cssText = 'position:absolute;left:0;top:0;width:1px;height:1px;';\n    el.coordsize = Z + ',' + Z;\n    el.coordorigin = '0,0';\n  };\n\n  var encodeHtmlAttribute = function (s) {\n    return String(s).replace(/&/g, '&amp;').replace(/\"/g, '&quot;');\n  };\n\n  var rgb2Str = function (r, g, b) {\n    return 'rgb(' + [r, g, b].join(',') + ')';\n  };\n\n  var append = function (parent, child) {\n    if (child && parent && child.parentNode !== parent) {\n      parent.appendChild(child);\n    }\n  };\n\n  var remove = function (parent, child) {\n    if (child && parent && child.parentNode === parent) {\n      parent.removeChild(child);\n    }\n  };\n\n  var getZIndex = function (zlevel, z, z2) {\n    // z  [0, 1000]\n    return (parseFloat(zlevel) || 0) * ZLEVEL_BASE + (parseFloat(z) || 0) * Z_BASE + z2;\n  };\n\n  var parsePercent = function (value, maxValue) {\n    if (typeof value === 'string') {\n      if (value.lastIndexOf('%') >= 0) {\n        return parseFloat(value) / 100 * maxValue;\n      }\n\n      return parseFloat(value);\n    }\n\n    return value;\n  };\n  /***************************************************\n   * PATH\n   **************************************************/\n\n\n  var setColorAndOpacity = function (el, color, opacity) {\n    var colorArr = colorTool.parse(color);\n    opacity = +opacity;\n\n    if (isNaN(opacity)) {\n      opacity = 1;\n    }\n\n    if (colorArr) {\n      el.color = rgb2Str(colorArr[0], colorArr[1], colorArr[2]);\n      el.opacity = opacity * colorArr[3];\n    }\n  };\n\n  var getColorAndAlpha = function (color) {\n    var colorArr = colorTool.parse(color);\n    return [rgb2Str(colorArr[0], colorArr[1], colorArr[2]), colorArr[3]];\n  };\n\n  var updateFillNode = function (el, style, zrEl) {\n    // TODO pattern\n    var fill = style.fill;\n\n    if (fill != null) {\n      // Modified from excanvas\n      if (fill instanceof Gradient) {\n        var gradientType;\n        var angle = 0;\n        var focus = [0, 0]; // additional offset\n\n        var shift = 0; // scale factor for offset\n\n        var expansion = 1;\n        var rect = zrEl.getBoundingRect();\n        var rectWidth = rect.width;\n        var rectHeight = rect.height;\n\n        if (fill.type === 'linear') {\n          gradientType = 'gradient';\n          var transform = zrEl.transform;\n          var p0 = [fill.x * rectWidth, fill.y * rectHeight];\n          var p1 = [fill.x2 * rectWidth, fill.y2 * rectHeight];\n\n          if (transform) {\n            applyTransform(p0, p0, transform);\n            applyTransform(p1, p1, transform);\n          }\n\n          var dx = p1[0] - p0[0];\n          var dy = p1[1] - p0[1];\n          angle = Math.atan2(dx, dy) * 180 / Math.PI; // The angle should be a non-negative number.\n\n          if (angle < 0) {\n            angle += 360;\n          } // Very small angles produce an unexpected result because they are\n          // converted to a scientific notation string.\n\n\n          if (angle < 1e-6) {\n            angle = 0;\n          }\n        } else {\n          gradientType = 'gradientradial';\n          var p0 = [fill.x * rectWidth, fill.y * rectHeight];\n          var transform = zrEl.transform;\n          var scale = zrEl.scale;\n          var width = rectWidth;\n          var height = rectHeight;\n          focus = [// Percent in bounding rect\n          (p0[0] - rect.x) / width, (p0[1] - rect.y) / height];\n\n          if (transform) {\n            applyTransform(p0, p0, transform);\n          }\n\n          width /= scale[0] * Z;\n          height /= scale[1] * Z;\n          var dimension = mathMax(width, height);\n          shift = 2 * 0 / dimension;\n          expansion = 2 * fill.r / dimension - shift;\n        } // We need to sort the color stops in ascending order by offset,\n        // otherwise IE won't interpret it correctly.\n\n\n        var stops = fill.colorStops.slice();\n        stops.sort(function (cs1, cs2) {\n          return cs1.offset - cs2.offset;\n        });\n        var length = stops.length; // Color and alpha list of first and last stop\n\n        var colorAndAlphaList = [];\n        var colors = [];\n\n        for (var i = 0; i < length; i++) {\n          var stop = stops[i];\n          var colorAndAlpha = getColorAndAlpha(stop.color);\n          colors.push(stop.offset * expansion + shift + ' ' + colorAndAlpha[0]);\n\n          if (i === 0 || i === length - 1) {\n            colorAndAlphaList.push(colorAndAlpha);\n          }\n        }\n\n        if (length >= 2) {\n          var color1 = colorAndAlphaList[0][0];\n          var color2 = colorAndAlphaList[1][0];\n          var opacity1 = colorAndAlphaList[0][1] * style.opacity;\n          var opacity2 = colorAndAlphaList[1][1] * style.opacity;\n          el.type = gradientType;\n          el.method = 'none';\n          el.focus = '100%';\n          el.angle = angle;\n          el.color = color1;\n          el.color2 = color2;\n          el.colors = colors.join(','); // When colors attribute is used, the meanings of opacity and o:opacity2\n          // are reversed.\n\n          el.opacity = opacity2; // FIXME g_o_:opacity ?\n\n          el.opacity2 = opacity1;\n        }\n\n        if (gradientType === 'radial') {\n          el.focusposition = focus.join(',');\n        }\n      } else {\n        // FIXME Change from Gradient fill to color fill\n        setColorAndOpacity(el, fill, style.opacity);\n      }\n    }\n  };\n\n  var updateStrokeNode = function (el, style) {\n    // if (style.lineJoin != null) {\n    //     el.joinstyle = style.lineJoin;\n    // }\n    // if (style.miterLimit != null) {\n    //     el.miterlimit = style.miterLimit * Z;\n    // }\n    // if (style.lineCap != null) {\n    //     el.endcap = style.lineCap;\n    // }\n    if (style.lineDash != null) {\n      el.dashstyle = style.lineDash.join(' ');\n    }\n\n    if (style.stroke != null && !(style.stroke instanceof Gradient)) {\n      setColorAndOpacity(el, style.stroke, style.opacity);\n    }\n  };\n\n  var updateFillAndStroke = function (vmlEl, type, style, zrEl) {\n    var isFill = type == 'fill';\n    var el = vmlEl.getElementsByTagName(type)[0]; // Stroke must have lineWidth\n\n    if (style[type] != null && style[type] !== 'none' && (isFill || !isFill && style.lineWidth)) {\n      vmlEl[isFill ? 'filled' : 'stroked'] = 'true'; // FIXME Remove before updating, or set `colors` will throw error\n\n      if (style[type] instanceof Gradient) {\n        remove(vmlEl, el);\n      }\n\n      if (!el) {\n        el = vmlCore.createNode(type);\n      }\n\n      isFill ? updateFillNode(el, style, zrEl) : updateStrokeNode(el, style);\n      append(vmlEl, el);\n    } else {\n      vmlEl[isFill ? 'filled' : 'stroked'] = 'false';\n      remove(vmlEl, el);\n    }\n  };\n\n  var points = [[], [], []];\n\n  var pathDataToString = function (path, m) {\n    var M = CMD.M;\n    var C = CMD.C;\n    var L = CMD.L;\n    var A = CMD.A;\n    var Q = CMD.Q;\n    var str = [];\n    var nPoint;\n    var cmdStr;\n    var cmd;\n    var i;\n    var xi;\n    var yi;\n    var data = path.data;\n    var dataLength = path.len();\n\n    for (i = 0; i < dataLength;) {\n      cmd = data[i++];\n      cmdStr = '';\n      nPoint = 0;\n\n      switch (cmd) {\n        case M:\n          cmdStr = ' m ';\n          nPoint = 1;\n          xi = data[i++];\n          yi = data[i++];\n          points[0][0] = xi;\n          points[0][1] = yi;\n          break;\n\n        case L:\n          cmdStr = ' l ';\n          nPoint = 1;\n          xi = data[i++];\n          yi = data[i++];\n          points[0][0] = xi;\n          points[0][1] = yi;\n          break;\n\n        case Q:\n        case C:\n          cmdStr = ' c ';\n          nPoint = 3;\n          var x1 = data[i++];\n          var y1 = data[i++];\n          var x2 = data[i++];\n          var y2 = data[i++];\n          var x3;\n          var y3;\n\n          if (cmd === Q) {\n            // Convert quadratic to cubic using degree elevation\n            x3 = x2;\n            y3 = y2;\n            x2 = (x2 + 2 * x1) / 3;\n            y2 = (y2 + 2 * y1) / 3;\n            x1 = (xi + 2 * x1) / 3;\n            y1 = (yi + 2 * y1) / 3;\n          } else {\n            x3 = data[i++];\n            y3 = data[i++];\n          }\n\n          points[0][0] = x1;\n          points[0][1] = y1;\n          points[1][0] = x2;\n          points[1][1] = y2;\n          points[2][0] = x3;\n          points[2][1] = y3;\n          xi = x3;\n          yi = y3;\n          break;\n\n        case A:\n          var x = 0;\n          var y = 0;\n          var sx = 1;\n          var sy = 1;\n          var angle = 0;\n\n          if (m) {\n            // Extract SRT from matrix\n            x = m[4];\n            y = m[5];\n            sx = sqrt(m[0] * m[0] + m[1] * m[1]);\n            sy = sqrt(m[2] * m[2] + m[3] * m[3]);\n            angle = Math.atan2(-m[1] / sy, m[0] / sx);\n          }\n\n          var cx = data[i++];\n          var cy = data[i++];\n          var rx = data[i++];\n          var ry = data[i++];\n          var startAngle = data[i++] + angle;\n          var endAngle = data[i++] + startAngle + angle; // FIXME\n          // var psi = data[i++];\n\n          i++;\n          var clockwise = data[i++];\n          var x0 = cx + cos(startAngle) * rx;\n          var y0 = cy + sin(startAngle) * ry;\n          var x1 = cx + cos(endAngle) * rx;\n          var y1 = cy + sin(endAngle) * ry;\n          var type = clockwise ? ' wa ' : ' at ';\n\n          if (Math.abs(x0 - x1) < 1e-4) {\n            // IE won't render arches drawn counter clockwise if x0 == x1.\n            if (Math.abs(endAngle - startAngle) > 1e-2) {\n              // Offset x0 by 1/80 of a pixel. Use something\n              // that can be represented in binary\n              if (clockwise) {\n                x0 += 270 / Z;\n              }\n            } else {\n              // Avoid case draw full circle\n              if (Math.abs(y0 - cy) < 1e-4) {\n                if (clockwise && x0 < cx || !clockwise && x0 > cx) {\n                  y1 -= 270 / Z;\n                } else {\n                  y1 += 270 / Z;\n                }\n              } else if (clockwise && y0 < cy || !clockwise && y0 > cy) {\n                x1 += 270 / Z;\n              } else {\n                x1 -= 270 / Z;\n              }\n            }\n          }\n\n          str.push(type, round(((cx - rx) * sx + x) * Z - Z2), comma, round(((cy - ry) * sy + y) * Z - Z2), comma, round(((cx + rx) * sx + x) * Z - Z2), comma, round(((cy + ry) * sy + y) * Z - Z2), comma, round((x0 * sx + x) * Z - Z2), comma, round((y0 * sy + y) * Z - Z2), comma, round((x1 * sx + x) * Z - Z2), comma, round((y1 * sy + y) * Z - Z2));\n          xi = x1;\n          yi = y1;\n          break;\n\n        case CMD.R:\n          var p0 = points[0];\n          var p1 = points[1]; // x0, y0\n\n          p0[0] = data[i++];\n          p0[1] = data[i++]; // x1, y1\n\n          p1[0] = p0[0] + data[i++];\n          p1[1] = p0[1] + data[i++];\n\n          if (m) {\n            applyTransform(p0, p0, m);\n            applyTransform(p1, p1, m);\n          }\n\n          p0[0] = round(p0[0] * Z - Z2);\n          p1[0] = round(p1[0] * Z - Z2);\n          p0[1] = round(p0[1] * Z - Z2);\n          p1[1] = round(p1[1] * Z - Z2);\n          str.push( // x0, y0\n          ' m ', p0[0], comma, p0[1], // x1, y0\n          ' l ', p1[0], comma, p0[1], // x1, y1\n          ' l ', p1[0], comma, p1[1], // x0, y1\n          ' l ', p0[0], comma, p1[1]);\n          break;\n\n        case CMD.Z:\n          // FIXME Update xi, yi\n          str.push(' x ');\n      }\n\n      if (nPoint > 0) {\n        str.push(cmdStr);\n\n        for (var k = 0; k < nPoint; k++) {\n          var p = points[k];\n          m && applyTransform(p, p, m); //  round \n\n          str.push(round(p[0] * Z - Z2), comma, round(p[1] * Z - Z2), k < nPoint - 1 ? comma : '');\n        }\n      }\n    }\n\n    return str.join('');\n  }; // Rewrite the original path method\n\n\n  Path.prototype.brushVML = function (vmlRoot) {\n    var style = this.style;\n    var vmlEl = this._vmlEl;\n\n    if (!vmlEl) {\n      vmlEl = vmlCore.createNode('shape');\n      initRootElStyle(vmlEl);\n      this._vmlEl = vmlEl;\n    }\n\n    updateFillAndStroke(vmlEl, 'fill', style, this);\n    updateFillAndStroke(vmlEl, 'stroke', style, this);\n    var m = this.transform;\n    var needTransform = m != null;\n    var strokeEl = vmlEl.getElementsByTagName('stroke')[0];\n\n    if (strokeEl) {\n      var lineWidth = style.lineWidth; // Get the line scale.\n      // Determinant of this.m_ means how much the area is enlarged by the\n      // transformation. So its square root can be used as a scale factor\n      // for width.\n\n      if (needTransform && !style.strokeNoScale) {\n        var det = m[0] * m[3] - m[1] * m[2];\n        lineWidth *= sqrt(abs(det));\n      }\n\n      strokeEl.weight = lineWidth + 'px';\n    }\n\n    var path = this.path || (this.path = new PathProxy());\n\n    if (this.__dirtyPath) {\n      path.beginPath();\n      this.buildPath(path, this.shape);\n      path.toStatic();\n      this.__dirtyPath = false;\n    }\n\n    vmlEl.path = pathDataToString(path, this.transform);\n    vmlEl.style.zIndex = getZIndex(this.zlevel, this.z, this.z2); // Append to root\n\n    append(vmlRoot, vmlEl); // Text\n\n    if (style.text != null) {\n      this.drawRectText(vmlRoot, this.getBoundingRect());\n    } else {\n      this.removeRectText(vmlRoot);\n    }\n  };\n\n  Path.prototype.onRemove = function (vmlRoot) {\n    remove(vmlRoot, this._vmlEl);\n    this.removeRectText(vmlRoot);\n  };\n\n  Path.prototype.onAdd = function (vmlRoot) {\n    append(vmlRoot, this._vmlEl);\n    this.appendRectText(vmlRoot);\n  };\n  /***************************************************\n   * IMAGE\n   **************************************************/\n\n\n  var isImage = function (img) {\n    // FIXME img instanceof Image  img IE8 \n    return typeof img === 'object' && img.tagName && img.tagName.toUpperCase() === 'IMG'; // return img instanceof Image;\n  }; // Rewrite the original path method\n\n\n  ZImage.prototype.brushVML = function (vmlRoot) {\n    var style = this.style;\n    var image = style.image; // Image original width, height\n\n    var ow;\n    var oh;\n\n    if (isImage(image)) {\n      var src = image.src;\n\n      if (src === this._imageSrc) {\n        ow = this._imageWidth;\n        oh = this._imageHeight;\n      } else {\n        var imageRuntimeStyle = image.runtimeStyle;\n        var oldRuntimeWidth = imageRuntimeStyle.width;\n        var oldRuntimeHeight = imageRuntimeStyle.height;\n        imageRuntimeStyle.width = 'auto';\n        imageRuntimeStyle.height = 'auto'; // get the original size\n\n        ow = image.width;\n        oh = image.height; // and remove overides\n\n        imageRuntimeStyle.width = oldRuntimeWidth;\n        imageRuntimeStyle.height = oldRuntimeHeight; // Caching image original width, height and src\n\n        this._imageSrc = src;\n        this._imageWidth = ow;\n        this._imageHeight = oh;\n      }\n\n      image = src;\n    } else {\n      if (image === this._imageSrc) {\n        ow = this._imageWidth;\n        oh = this._imageHeight;\n      }\n    }\n\n    if (!image) {\n      return;\n    }\n\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var dw = style.width;\n    var dh = style.height;\n    var sw = style.sWidth;\n    var sh = style.sHeight;\n    var sx = style.sx || 0;\n    var sy = style.sy || 0;\n    var hasCrop = sw && sh;\n    var vmlEl = this._vmlEl;\n\n    if (!vmlEl) {\n      // FIXME  group  left, top  0 \n      // vmlEl = vmlCore.createNode('group');\n      vmlEl = vmlCore.doc.createElement('div');\n      initRootElStyle(vmlEl);\n      this._vmlEl = vmlEl;\n    }\n\n    var vmlElStyle = vmlEl.style;\n    var hasRotation = false;\n    var m;\n    var scaleX = 1;\n    var scaleY = 1;\n\n    if (this.transform) {\n      m = this.transform;\n      scaleX = sqrt(m[0] * m[0] + m[1] * m[1]);\n      scaleY = sqrt(m[2] * m[2] + m[3] * m[3]);\n      hasRotation = m[1] || m[2];\n    }\n\n    if (hasRotation) {\n      // If filters are necessary (rotation exists), create them\n      // filters are bog-slow, so only create them if abbsolutely necessary\n      // The following check doesn't account for skews (which don't exist\n      // in the canvas spec (yet) anyway.\n      // From excanvas\n      var p0 = [x, y];\n      var p1 = [x + dw, y];\n      var p2 = [x, y + dh];\n      var p3 = [x + dw, y + dh];\n      applyTransform(p0, p0, m);\n      applyTransform(p1, p1, m);\n      applyTransform(p2, p2, m);\n      applyTransform(p3, p3, m);\n      var maxX = mathMax(p0[0], p1[0], p2[0], p3[0]);\n      var maxY = mathMax(p0[1], p1[1], p2[1], p3[1]);\n      var transformFilter = [];\n      transformFilter.push('M11=', m[0] / scaleX, comma, 'M12=', m[2] / scaleY, comma, 'M21=', m[1] / scaleX, comma, 'M22=', m[3] / scaleY, comma, 'Dx=', round(x * scaleX + m[4]), comma, 'Dy=', round(y * scaleY + m[5]));\n      vmlElStyle.padding = '0 ' + round(maxX) + 'px ' + round(maxY) + 'px 0'; // FIXME DXImageTransform  IE11 \n\n      vmlElStyle.filter = imageTransformPrefix + '.Matrix(' + transformFilter.join('') + ', SizingMethod=clip)';\n    } else {\n      if (m) {\n        x = x * scaleX + m[4];\n        y = y * scaleY + m[5];\n      }\n\n      vmlElStyle.filter = '';\n      vmlElStyle.left = round(x) + 'px';\n      vmlElStyle.top = round(y) + 'px';\n    }\n\n    var imageEl = this._imageEl;\n    var cropEl = this._cropEl;\n\n    if (!imageEl) {\n      imageEl = vmlCore.doc.createElement('div');\n      this._imageEl = imageEl;\n    }\n\n    var imageELStyle = imageEl.style;\n\n    if (hasCrop) {\n      // Needs know image original width and height\n      if (!(ow && oh)) {\n        var tmpImage = new Image();\n        var self = this;\n\n        tmpImage.onload = function () {\n          tmpImage.onload = null;\n          ow = tmpImage.width;\n          oh = tmpImage.height; // Adjust image width and height to fit the ratio destinationSize / sourceSize\n\n          imageELStyle.width = round(scaleX * ow * dw / sw) + 'px';\n          imageELStyle.height = round(scaleY * oh * dh / sh) + 'px'; // Caching image original width, height and src\n\n          self._imageWidth = ow;\n          self._imageHeight = oh;\n          self._imageSrc = image;\n        };\n\n        tmpImage.src = image;\n      } else {\n        imageELStyle.width = round(scaleX * ow * dw / sw) + 'px';\n        imageELStyle.height = round(scaleY * oh * dh / sh) + 'px';\n      }\n\n      if (!cropEl) {\n        cropEl = vmlCore.doc.createElement('div');\n        cropEl.style.overflow = 'hidden';\n        this._cropEl = cropEl;\n      }\n\n      var cropElStyle = cropEl.style;\n      cropElStyle.width = round((dw + sx * dw / sw) * scaleX);\n      cropElStyle.height = round((dh + sy * dh / sh) * scaleY);\n      cropElStyle.filter = imageTransformPrefix + '.Matrix(Dx=' + -sx * dw / sw * scaleX + ',Dy=' + -sy * dh / sh * scaleY + ')';\n\n      if (!cropEl.parentNode) {\n        vmlEl.appendChild(cropEl);\n      }\n\n      if (imageEl.parentNode != cropEl) {\n        cropEl.appendChild(imageEl);\n      }\n    } else {\n      imageELStyle.width = round(scaleX * dw) + 'px';\n      imageELStyle.height = round(scaleY * dh) + 'px';\n      vmlEl.appendChild(imageEl);\n\n      if (cropEl && cropEl.parentNode) {\n        vmlEl.removeChild(cropEl);\n        this._cropEl = null;\n      }\n    }\n\n    var filterStr = '';\n    var alpha = style.opacity;\n\n    if (alpha < 1) {\n      filterStr += '.Alpha(opacity=' + round(alpha * 100) + ') ';\n    }\n\n    filterStr += imageTransformPrefix + '.AlphaImageLoader(src=' + image + ', SizingMethod=scale)';\n    imageELStyle.filter = filterStr;\n    vmlEl.style.zIndex = getZIndex(this.zlevel, this.z, this.z2); // Append to root\n\n    append(vmlRoot, vmlEl); // Text\n\n    if (style.text != null) {\n      this.drawRectText(vmlRoot, this.getBoundingRect());\n    }\n  };\n\n  ZImage.prototype.onRemove = function (vmlRoot) {\n    remove(vmlRoot, this._vmlEl);\n    this._vmlEl = null;\n    this._cropEl = null;\n    this._imageEl = null;\n    this.removeRectText(vmlRoot);\n  };\n\n  ZImage.prototype.onAdd = function (vmlRoot) {\n    append(vmlRoot, this._vmlEl);\n    this.appendRectText(vmlRoot);\n  };\n  /***************************************************\n   * TEXT\n   **************************************************/\n\n\n  var DEFAULT_STYLE_NORMAL = 'normal';\n  var fontStyleCache = {};\n  var fontStyleCacheCount = 0;\n  var MAX_FONT_CACHE_SIZE = 100;\n  var fontEl = document.createElement('div');\n\n  var getFontStyle = function (fontString) {\n    var fontStyle = fontStyleCache[fontString];\n\n    if (!fontStyle) {\n      // Clear cache\n      if (fontStyleCacheCount > MAX_FONT_CACHE_SIZE) {\n        fontStyleCacheCount = 0;\n        fontStyleCache = {};\n      }\n\n      var style = fontEl.style;\n      var fontFamily;\n\n      try {\n        style.font = fontString;\n        fontFamily = style.fontFamily.split(',')[0];\n      } catch (e) {}\n\n      fontStyle = {\n        style: style.fontStyle || DEFAULT_STYLE_NORMAL,\n        variant: style.fontVariant || DEFAULT_STYLE_NORMAL,\n        weight: style.fontWeight || DEFAULT_STYLE_NORMAL,\n        size: parseFloat(style.fontSize || 12) | 0,\n        family: fontFamily || 'Microsoft YaHei'\n      };\n      fontStyleCache[fontString] = fontStyle;\n      fontStyleCacheCount++;\n    }\n\n    return fontStyle;\n  };\n\n  var textMeasureEl; // Overwrite measure text method\n\n  textContain.$override('measureText', function (text, textFont) {\n    var doc = vmlCore.doc;\n\n    if (!textMeasureEl) {\n      textMeasureEl = doc.createElement('div');\n      textMeasureEl.style.cssText = 'position:absolute;top:-20000px;left:0;' + 'padding:0;margin:0;border:none;white-space:pre;';\n      vmlCore.doc.body.appendChild(textMeasureEl);\n    }\n\n    try {\n      textMeasureEl.style.font = textFont;\n    } catch (ex) {// Ignore failures to set to invalid font.\n    }\n\n    textMeasureEl.innerHTML = ''; // Don't use innerHTML or innerText because they allow markup/whitespace.\n\n    textMeasureEl.appendChild(doc.createTextNode(text));\n    return {\n      width: textMeasureEl.offsetWidth\n    };\n  });\n  var tmpRect = new BoundingRect();\n\n  var drawRectText = function (vmlRoot, rect, textRect, fromTextEl) {\n    var style = this.style; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true);\n    var text = style.text; // Convert to string\n\n    text != null && (text += '');\n\n    if (!text) {\n      return;\n    } // Convert rich text to plain text. Rich text is not supported in\n    // IE8-, but tags in rich text template will be removed.\n\n\n    if (style.rich) {\n      var contentBlock = textContain.parseRichText(text, style);\n      text = [];\n\n      for (var i = 0; i < contentBlock.lines.length; i++) {\n        var tokens = contentBlock.lines[i].tokens;\n        var textLine = [];\n\n        for (var j = 0; j < tokens.length; j++) {\n          textLine.push(tokens[j].text);\n        }\n\n        text.push(textLine.join(''));\n      }\n\n      text = text.join('\\n');\n    }\n\n    var x;\n    var y;\n    var align = style.textAlign;\n    var verticalAlign = style.textVerticalAlign;\n    var fontStyle = getFontStyle(style.font); // FIXME encodeHtmlAttribute ?\n\n    var font = fontStyle.style + ' ' + fontStyle.variant + ' ' + fontStyle.weight + ' ' + fontStyle.size + 'px \"' + fontStyle.family + '\"';\n    textRect = textRect || textContain.getBoundingRect(text, font, align, verticalAlign); // Transform rect to view space\n\n    var m = this.transform; // Ignore transform for text in other element\n\n    if (m && !fromTextEl) {\n      tmpRect.copy(rect);\n      tmpRect.applyTransform(m);\n      rect = tmpRect;\n    }\n\n    if (!fromTextEl) {\n      var textPosition = style.textPosition;\n      var distance = style.textDistance; // Text position represented by coord\n\n      if (textPosition instanceof Array) {\n        x = rect.x + parsePercent(textPosition[0], rect.width);\n        y = rect.y + parsePercent(textPosition[1], rect.height);\n        align = align || 'left';\n      } else {\n        var res = textContain.adjustTextPositionOnRect(textPosition, rect, distance);\n        x = res.x;\n        y = res.y; // Default align and baseline when has textPosition\n\n        align = align || res.textAlign;\n        verticalAlign = verticalAlign || res.textVerticalAlign;\n      }\n    } else {\n      x = rect.x;\n      y = rect.y;\n    }\n\n    x = textContain.adjustTextX(x, textRect.width, align);\n    y = textContain.adjustTextY(y, textRect.height, verticalAlign); // Force baseline 'middle'\n\n    y += textRect.height / 2; // var fontSize = fontStyle.size;\n    // 1.75 is an arbitrary number, as there is no info about the text baseline\n    // switch (baseline) {\n    // case 'hanging':\n    // case 'top':\n    //     y += fontSize / 1.75;\n    //     break;\n    //     case 'middle':\n    //         break;\n    //     default:\n    //     // case null:\n    //     // case 'alphabetic':\n    //     // case 'ideographic':\n    //     // case 'bottom':\n    //         y -= fontSize / 2.25;\n    //         break;\n    // }\n    // switch (align) {\n    //     case 'left':\n    //         break;\n    //     case 'center':\n    //         x -= textRect.width / 2;\n    //         break;\n    //     case 'right':\n    //         x -= textRect.width;\n    //         break;\n    // case 'end':\n    // align = elementStyle.direction == 'ltr' ? 'right' : 'left';\n    // break;\n    // case 'start':\n    // align = elementStyle.direction == 'rtl' ? 'right' : 'left';\n    // break;\n    // default:\n    //     align = 'left';\n    // }\n\n    var createNode = vmlCore.createNode;\n    var textVmlEl = this._textVmlEl;\n    var pathEl;\n    var textPathEl;\n    var skewEl;\n\n    if (!textVmlEl) {\n      textVmlEl = createNode('line');\n      pathEl = createNode('path');\n      textPathEl = createNode('textpath');\n      skewEl = createNode('skew'); // FIXME Why here is not cammel case\n      // Align 'center' seems wrong\n\n      textPathEl.style['v-text-align'] = 'left';\n      initRootElStyle(textVmlEl);\n      pathEl.textpathok = true;\n      textPathEl.on = true;\n      textVmlEl.from = '0 0';\n      textVmlEl.to = '1000 0.05';\n      append(textVmlEl, skewEl);\n      append(textVmlEl, pathEl);\n      append(textVmlEl, textPathEl);\n      this._textVmlEl = textVmlEl;\n    } else {\n      //  appendChild \n      skewEl = textVmlEl.firstChild;\n      pathEl = skewEl.nextSibling;\n      textPathEl = pathEl.nextSibling;\n    }\n\n    var coords = [x, y];\n    var textVmlElStyle = textVmlEl.style; // Ignore transform for text in other element\n\n    if (m && fromTextEl) {\n      applyTransform(coords, coords, m);\n      skewEl.on = true;\n      skewEl.matrix = m[0].toFixed(3) + comma + m[2].toFixed(3) + comma + m[1].toFixed(3) + comma + m[3].toFixed(3) + ',0,0'; // Text position\n\n      skewEl.offset = (round(coords[0]) || 0) + ',' + (round(coords[1]) || 0); // Left top point as origin\n\n      skewEl.origin = '0 0';\n      textVmlElStyle.left = '0px';\n      textVmlElStyle.top = '0px';\n    } else {\n      skewEl.on = false;\n      textVmlElStyle.left = round(x) + 'px';\n      textVmlElStyle.top = round(y) + 'px';\n    }\n\n    textPathEl.string = encodeHtmlAttribute(text); // TODO\n\n    try {\n      textPathEl.style.font = font;\n    } // Error font format\n    catch (e) {}\n\n    updateFillAndStroke(textVmlEl, 'fill', {\n      fill: style.textFill,\n      opacity: style.opacity\n    }, this);\n    updateFillAndStroke(textVmlEl, 'stroke', {\n      stroke: style.textStroke,\n      opacity: style.opacity,\n      lineDash: style.lineDash\n    }, this);\n    textVmlEl.style.zIndex = getZIndex(this.zlevel, this.z, this.z2); // Attached to root\n\n    append(vmlRoot, textVmlEl);\n  };\n\n  var removeRectText = function (vmlRoot) {\n    remove(vmlRoot, this._textVmlEl);\n    this._textVmlEl = null;\n  };\n\n  var appendRectText = function (vmlRoot) {\n    append(vmlRoot, this._textVmlEl);\n  };\n\n  var list = [RectText, Displayable, ZImage, Path, Text]; // In case Displayable has been mixed in RectText\n\n  for (var i = 0; i < list.length; i++) {\n    var proto = list[i].prototype;\n    proto.drawRectText = drawRectText;\n    proto.removeRectText = removeRectText;\n    proto.appendRectText = appendRectText;\n  }\n\n  Text.prototype.brushVML = function (vmlRoot) {\n    var style = this.style;\n\n    if (style.text != null) {\n      this.drawRectText(vmlRoot, {\n        x: style.x || 0,\n        y: style.y || 0,\n        width: 0,\n        height: 0\n      }, this.getBoundingRect(), true);\n    } else {\n      this.removeRectText(vmlRoot);\n    }\n  };\n\n  Text.prototype.onRemove = function (vmlRoot) {\n    this.removeRectText(vmlRoot);\n  };\n\n  Text.prototype.onAdd = function (vmlRoot) {\n    this.appendRectText(vmlRoot);\n  };\n}","require(\"./graphic\");\n\nvar _zrender = require(\"../zrender\");\n\nvar registerPainter = _zrender.registerPainter;\n\nvar Painter = require(\"./Painter\");\n\nregisterPainter('vml', Painter);","var guid = require(\"./core/guid\");\n\nvar env = require(\"./core/env\");\n\nvar zrUtil = require(\"./core/util\");\n\nvar Handler = require(\"./Handler\");\n\nvar Storage = require(\"./Storage\");\n\nvar Painter = require(\"./Painter\");\n\nvar Animation = require(\"./animation/Animation\");\n\nvar HandlerProxy = require(\"./dom/HandlerProxy\");\n\n/*!\n* ZRender, a high performance 2d drawing library.\n*\n* Copyright (c) 2013, Baidu Inc.\n* All rights reserved.\n*\n* LICENSE\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n*/\nvar useVML = !env.canvasSupported;\nvar painterCtors = {\n  canvas: Painter\n};\nvar instances = {}; // ZRendermap\n\n/**\n * @type {string}\n */\n\nvar version = '3.7.3';\n/**\n * Initializing a zrender instance\n * @param {HTMLElement} dom\n * @param {Object} opts\n * @param {string} [opts.renderer='canvas'] 'canvas' or 'svg'\n * @param {number} [opts.devicePixelRatio]\n * @param {number|string} [opts.width] Can be 'auto' (the same as null/undefined)\n * @param {number|string} [opts.height] Can be 'auto' (the same as null/undefined)\n * @return {module:zrender/ZRender}\n */\n\nfunction init(dom, opts) {\n  var zr = new ZRender(guid(), dom, opts);\n  instances[zr.id] = zr;\n  return zr;\n}\n/**\n * Dispose zrender instance\n * @param {module:zrender/ZRender} zr\n */\n\n\nfunction dispose(zr) {\n  if (zr) {\n    zr.dispose();\n  } else {\n    for (var key in instances) {\n      if (instances.hasOwnProperty(key)) {\n        instances[key].dispose();\n      }\n    }\n\n    instances = {};\n  }\n\n  return this;\n}\n/**\n * Get zrender instance by id\n * @param {string} id zrender instance id\n * @return {module:zrender/ZRender}\n */\n\n\nfunction getInstance(id) {\n  return instances[id];\n}\n\nfunction registerPainter(name, Ctor) {\n  painterCtors[name] = Ctor;\n}\n\nfunction delInstance(id) {\n  delete instances[id];\n}\n/**\n * @module zrender/ZRender\n */\n\n/**\n * @constructor\n * @alias module:zrender/ZRender\n * @param {string} id\n * @param {HTMLElement} dom\n * @param {Object} opts\n * @param {string} [opts.renderer='canvas'] 'canvas' or 'svg'\n * @param {number} [opts.devicePixelRatio]\n * @param {number} [opts.width] Can be 'auto' (the same as null/undefined)\n * @param {number} [opts.height] Can be 'auto' (the same as null/undefined)\n */\n\n\nvar ZRender = function (id, dom, opts) {\n  opts = opts || {};\n  /**\n   * @type {HTMLDomElement}\n   */\n\n  this.dom = dom;\n  /**\n   * @type {string}\n   */\n\n  this.id = id;\n  var self = this;\n  var storage = new Storage();\n  var rendererType = opts.renderer; // TODO WebGL\n\n  if (useVML) {\n    if (!painterCtors.vml) {\n      throw new Error('You need to require \\'zrender/vml/vml\\' to support IE8');\n    }\n\n    rendererType = 'vml';\n  } else if (!rendererType || !painterCtors[rendererType]) {\n    rendererType = 'canvas';\n  }\n\n  var painter = new painterCtors[rendererType](dom, storage, opts);\n  this.storage = storage;\n  this.painter = painter;\n  var handerProxy = !env.node ? new HandlerProxy(painter.getViewportRoot()) : null;\n  this.handler = new Handler(storage, painter, handerProxy, painter.root);\n  /**\n   * @type {module:zrender/animation/Animation}\n   */\n\n  this.animation = new Animation({\n    stage: {\n      update: zrUtil.bind(this.flush, this)\n    }\n  });\n  this.animation.start();\n  /**\n   * @type {boolean}\n   * @private\n   */\n\n  this._needsRefresh; //  storage.delFromStorage, \n  // FIXME ugly\n\n  var oldDelFromStorage = storage.delFromStorage;\n  var oldAddToStorage = storage.addToStorage;\n\n  storage.delFromStorage = function (el) {\n    oldDelFromStorage.call(storage, el);\n    el && el.removeSelfFromZr(self);\n  };\n\n  storage.addToStorage = function (el) {\n    oldAddToStorage.call(storage, el);\n    el.addSelfToZr(self);\n  };\n};\n\nZRender.prototype = {\n  constructor: ZRender,\n\n  /**\n   * \n   * @return {string}\n   */\n  getId: function () {\n    return this.id;\n  },\n\n  /**\n   * \n   * @param  {module:zrender/Element} el\n   */\n  add: function (el) {\n    this.storage.addRoot(el);\n    this._needsRefresh = true;\n  },\n\n  /**\n   * \n   * @param  {module:zrender/Element} el\n   */\n  remove: function (el) {\n    this.storage.delRoot(el);\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Change configuration of layer\n   * @param {string} zLevel\n   * @param {Object} config\n   * @param {string} [config.clearColor=0] Clear color\n   * @param {string} [config.motionBlur=false] If enable motion blur\n   * @param {number} [config.lastFrameAlpha=0.7] Motion blur factor. Larger value cause longer trailer\n  */\n  configLayer: function (zLevel, config) {\n    this.painter.configLayer(zLevel, config);\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Repaint the canvas immediately\n   */\n  refreshImmediately: function () {\n    // var start = new Date();\n    // Clear needsRefresh ahead to avoid something wrong happens in refresh\n    // Or it will cause zrender refreshes again and again.\n    this._needsRefresh = false;\n    this.painter.refresh();\n    /**\n     * Avoid trigger zr.refresh in Element#beforeUpdate hook\n     */\n\n    this._needsRefresh = false; // var end = new Date();\n    // var log = document.getElementById('log');\n    // if (log) {\n    //     log.innerHTML = log.innerHTML + '<br>' + (end - start);\n    // }\n  },\n\n  /**\n   * Mark and repaint the canvas in the next frame of browser\n   */\n  refresh: function () {\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Perform all refresh\n   */\n  flush: function () {\n    if (this._needsRefresh) {\n      this.refreshImmediately();\n    }\n\n    if (this._needsRefreshHover) {\n      this.refreshHoverImmediately();\n    }\n  },\n\n  /**\n   * Add element to hover layer\n   * @param  {module:zrender/Element} el\n   * @param {Object} style\n   */\n  addHover: function (el, style) {\n    if (this.painter.addHover) {\n      this.painter.addHover(el, style);\n      this.refreshHover();\n    }\n  },\n\n  /**\n   * Add element from hover layer\n   * @param  {module:zrender/Element} el\n   */\n  removeHover: function (el) {\n    if (this.painter.removeHover) {\n      this.painter.removeHover(el);\n      this.refreshHover();\n    }\n  },\n\n  /**\n   * Clear all hover elements in hover layer\n   * @param  {module:zrender/Element} el\n   */\n  clearHover: function () {\n    if (this.painter.clearHover) {\n      this.painter.clearHover();\n      this.refreshHover();\n    }\n  },\n\n  /**\n   * Refresh hover in next frame\n   */\n  refreshHover: function () {\n    this._needsRefreshHover = true;\n  },\n\n  /**\n   * Refresh hover immediately\n   */\n  refreshHoverImmediately: function () {\n    this._needsRefreshHover = false;\n    this.painter.refreshHover && this.painter.refreshHover();\n  },\n\n  /**\n   * Resize the canvas.\n   * Should be invoked when container size is changed\n   * @param {Object} [opts]\n   * @param {number|string} [opts.width] Can be 'auto' (the same as null/undefined)\n   * @param {number|string} [opts.height] Can be 'auto' (the same as null/undefined)\n   */\n  resize: function (opts) {\n    opts = opts || {};\n    this.painter.resize(opts.width, opts.height);\n    this.handler.resize();\n  },\n\n  /**\n   * Stop and clear all animation immediately\n   */\n  clearAnimation: function () {\n    this.animation.clear();\n  },\n\n  /**\n   * Get container width\n   */\n  getWidth: function () {\n    return this.painter.getWidth();\n  },\n\n  /**\n   * Get container height\n   */\n  getHeight: function () {\n    return this.painter.getHeight();\n  },\n\n  /**\n   * Export the canvas as Base64 URL\n   * @param {string} type\n   * @param {string} [backgroundColor='#fff']\n   * @return {string} Base64 URL\n   */\n  // toDataURL: function(type, backgroundColor) {\n  //     return this.painter.getRenderedCanvas({\n  //         backgroundColor: backgroundColor\n  //     }).toDataURL(type);\n  // },\n\n  /**\n   * Converting a path to image.\n   * It has much better performance of drawing image rather than drawing a vector path.\n   * @param {module:zrender/graphic/Path} e\n   * @param {number} width\n   * @param {number} height\n   */\n  pathToImage: function (e, dpr) {\n    return this.painter.pathToImage(e, dpr);\n  },\n\n  /**\n   * Set default cursor\n   * @param {string} [cursorStyle='default']  crosshair\n   */\n  setCursorStyle: function (cursorStyle) {\n    this.handler.setCursorStyle(cursorStyle);\n  },\n\n  /**\n   * Find hovered element\n   * @param {number} x\n   * @param {number} y\n   * @return {Object} {target, topTarget}\n   */\n  findHover: function (x, y) {\n    return this.handler.findHover(x, y);\n  },\n\n  /**\n   * Bind event\n   *\n   * @param {string} eventName Event name\n   * @param {Function} eventHandler Handler function\n   * @param {Object} [context] Context object\n   */\n  on: function (eventName, eventHandler, context) {\n    this.handler.on(eventName, eventHandler, context);\n  },\n\n  /**\n   * Unbind event\n   * @param {string} eventName Event name\n   * @param {Function} [eventHandler] Handler function\n   */\n  off: function (eventName, eventHandler) {\n    this.handler.off(eventName, eventHandler);\n  },\n\n  /**\n   * Trigger event manually\n   *\n   * @param {string} eventName Event name\n   * @param {event=} event Event object\n   */\n  trigger: function (eventName, event) {\n    this.handler.trigger(eventName, event);\n  },\n\n  /**\n   * Clear all objects and the canvas.\n   */\n  clear: function () {\n    this.storage.delRoot();\n    this.painter.clear();\n  },\n\n  /**\n   * Dispose self.\n   */\n  dispose: function () {\n    this.animation.stop();\n    this.clear();\n    this.storage.dispose();\n    this.painter.dispose();\n    this.handler.dispose();\n    this.animation = this.storage = this.painter = this.handler = null;\n    delInstance(this.id);\n  }\n};\nexports.version = version;\nexports.init = init;\nexports.dispose = dispose;\nexports.getInstance = getInstance;\nexports.registerPainter = registerPainter;"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","on","handleCommand1","slot","handleCommand","avatarSrc","staticRenderFns","data","methods","command","$router","push","$emit","handleCommand2","handleCommand3","handleCommand4","handleLogout","register","component","_echarts","require","_export","key","hasOwnProperty","exports","zrUtil","coordinateSystemCreators","CoordinateSystemManager","_coordinateSystems","prototype","constructor","create","ecModel","api","coordinateSystems","each","creater","type","list","concat","update","coordSys","getCoordinateSystems","slice","coordinateSystemCreator","get","_default","module","echartsAPIList","ExtensionAPI","chartInstance","name","bind","echarts","seriesType","actionInfos","actionInfo","registerAction","payload","selected","eachComponent","mainType","subType","query","seriesModel","method","dataIndex","getData","idx","getName","isSelected","_roamHelper","updateCenterAndZoom","event","componentType","componentModel","geo","coordinateSystem","res","setCenter","center","setZoom","zoom","seriesGroup","view","zoomLimit","previousZoom","getZoom","getCenter","point","dataToPoint","dx","dy","pointToData","zoomMin","min","zoomMax","max","Infinity","Math","scale","position","fixX","originX","fixY","originY","updateTransform","barLayoutGrid","registerLayout","curry","registerVisual","eachSeriesByType","setVisual","BaseBarSeries","extend","dependencies","brushSelector","_config","__DEV__","graphic","_helper","setLabel","Model","barItemStyle","BAR_BORDER_WIDTH_QUERY","extendChartView","coordinateSystemType","_render","group","dispose","noop","isHorizontalOrRadial","oldData","_data","coord","baseAxis","getBaseAxis","isHorizontal","dim","animationModel","isAnimationEnabled","diff","add","hasValue","itemModel","getItemModel","layout","getLayout","el","elementCreator","setItemGraphicEl","updateStyle","newIndex","oldIndex","getItemGraphicEl","updateProps","shape","remove","removeRect","removeSector","execute","eachItemGraphicEl","removeAll","cartesian2d","isUpdate","rect","Rect","rectShape","animateProperty","animateTarget","polar","isRadial","sector","Sector","sectorShape","startAngle","style","text","width","parent","r","r0","getItemLayout","fixedLineWidth","getLineWidth","signX","signY","height","x","y","cx","cy","endAngle","isPolar","color","getItemVisual","opacity","itemStyleModel","getModel","hoverStyle","getBarItemStyle","setShape","useStyle","defaults","fill","cursorStyle","getShallow","attr","labelPositionOutside","setHoverStyle","rawLayout","lineWidth","abs","SeriesModel","createListFromArray","getInitialData","option","getMarkerPosition","value","pt","offset","size","offsetIndex","NaN","defaultOption","zlevel","z","legendHoverLink","barMinHeight","barMinAngle","itemStyle","PictorialBarSeries","symbol","symbolSize","symbolRotate","symbolPosition","symbolOffset","symbolMargin","symbolRepeat","symbolRepeatDirection","symbolClip","symbolBoundingData","symbolPatternSize","barGap","progressive","hoverAnimation","stack","superApply","arguments","_symbol","createSymbol","_number","parsePercent","isNumeric","LAYOUT_ATTRS","xy","wh","index","posDesc","pathForLineWidth","Circle","BarView","cartesian","coordSysRect","grid","getRect","opt","ecSize","getWidth","getHeight","coordSysExtent","valueDim","categoryDim","symbolMeta","getSymbolMeta","bar","createBar","updateCommon","pictorialShapeStr","getShapeStr","__pictorialShapeStr","updateBar","__pictorialSymbolMeta","removeBar","rotation","PI","symbolType","z2","prepareBarLength","prepareSymbolSize","boundingLength","pxSign","prepareLineWidth","symbolScale","isArray","prepareLayoutInfo","valueLineWidth","repeatCutLength","output","valueAxis","getOtherAxis","zeroPx","toGlobalCoord","dataToCoord","pxSignIdx","symbolBoundingExtent","convertToCoordOnAxis","reverse","axis","parse","categorySize","getLineScale","unitLength","pathLen","absBoundingLength","retrieve","hasEndGap","lastIndexOf","length","uLenWithMargin","endFix","repeatSpecified","repeatTimes","toIntTimes","mDiff","sizeFix","pathPosition","bundlePosition","barRectShape","clipShape","createPath","path","culling","setStyle","strokeNoScale","createOrUpdateRepeatSymbols","bundle","__pictorialBundle","unit","eachPath","__pictorialAnimationIndex","__pictorialRepeatTimes","updateAttr","makeTarget","updateHoverAnimation","target","onMouseOver","onMouseOut","i","trigger","createOrUpdateSingleSymbol","mainPath","__pictorialMainPath","createOrUpdateBarRect","barRect","__pictorialBarRect","silent","stroke","createOrUpdateClip","clipPath","__pictorialClipPath","setClipPath","getAnimationDelayParams","count","parentModel","off","animateTo","Group","labelRect","pathes","join","cb","context","children","call","immediateAttrs","animationAttrs","normalStyle","getItemStyle","setColor","cursor","barRectHoverStyle","barPositionOutside","times","roundedTimes","round","ceil","makeStyleMapper","excludes","getBorderLineDash","lineDash","labelModel","hoverLabelModel","setLabelStyle","labelFetcher","labelDataIndex","defaultText","getRawValue","isRectText","autoColor","fixPosition","textPosition","boxplotVisual","boxplotLayout","_whiskerBoxCommon","seriesModelMixin","BoxplotSeries","defaultValueDimensions","dimensions","boxWidth","normal","borderWidth","emphasis","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","animationEasing","animationDuration","mixin","ChartView","viewMixin","BoxplotView","getStyleUpdater","normalStyleAccessPath","emphasisStyleAccessPath","itemGroup","normalItemStyleModel","borderColor","whiskerEl","childAt","whiskerIndex","set","dirty","bodyEl","bodyIndex","groupResult","groupSeriesByAxis","groupItem","seriesModels","calculateBase","layoutSingleSeries","boxOffsetList","boxWidthList","result","axisList","indexOf","extent","bandWidth","seriesCount","boundList","getBandWidth","maxDataCount","getExtent","boxWidthBound","availableWidth","boxGap","base","cDim","halfWidth","chartLayout","variableDim","constDim","coordDims","vDims","dimName","dimInfo","getDimensionInfo","coordDim","args","axisDimVal","median","getPoint","end1","end5","whiskerEnds","layEndLine","bodyEnds","val","p","isNaN","addBodyEnd","start","point1","point2","endCenter","line","setItemLayout","initBaseline","borderColorQuery","globalColors","eachRawSeriesByType","defaulColor","seriesIndex","legendSymbol","isSeriesFiltered","setItemVisual","preprocessor","candlestickVisual","candlestickLayout","registerPreprocessor","CandlestickSeries","color0","borderColor0","barMaxWidth","barMinWidth","barWidth","animationUpdate","getShadowDim","selectors","itemLayout","brushRect","CandlestickView","_graphic","subPixelOptimize","retrieve2","candleWidth","calculateCandleWidth","sign","openVal","closeVal","lowestVal","highestVal","ocLow","ocHigh","ocLowPoint","ocHighPoint","lowestPoint","highestPoint","subPixelOptimizePoint","makeBrushRect","pmin","pmax","positiveBorderColorQuery","negativeBorderColorQuery","positiveColorQuery","negativeColorQuery","series","seriesItem","isObject","graphicUtil","_labelHelper","findLabelValueDim","barGrid","DataDiffer","prepareCartesian2d","prepareGeo","prepareSingleAxis","preparePolar","prepareCalendar","ITEM_STYLE_NORMAL_PATH","ITEM_STYLE_EMPHASIS_PATH","LABEL_NORMAL","LABEL_EMPHASIS","GROUP_DIFF_PREFIX","prepareCustoms","singleAxis","calendar","createEl","elOption","graphicType","makePath","pathData","__customPathData","Image","__customImagePath","image","Text","__customText","Clz","charAt","toUpperCase","__customGraphicType","updateEl","animatableModel","isInit","targetProps","elOptionStyle","clone","origin","targetStyle","prop","prepareStyleTransition","textFill","textStroke","targetOpacity","initProps","styleEmphasis","oldElStyle","makeRenderItem","customSeries","renderItem","prepareResult","currDataIndexInside","currItemModel","currLabelNormalModel","currLabelEmphasisModel","currLabelValueDim","currVisualColor","userAPI","getZr","getDevicePixelRatio","visual","barLayout","currentSeriesIndices","font","userParams","seriesId","id","seriesName","dataInsideLength","encode","wrapEncodeDef","currDirty","dataIndexInside","getRawIndex","updateCache","getDimension","extra","setTextStyle","getFormattedLabel","retrieve3","visualType","getLayoutOnAxis","getCurrentSeriesIndices","getFont","encodeDef","dataDimIndex","isExtraCoord","dataDims","coordDimIndex","createOrUpdate","doCreateOrUpdate","elOptionType","oldChildren","newChildren","diffChildrenByName","diffGroupChildren","getKey","processAddUpdate","processRemove","item","childOption","child","extendSeriesModel","newIdx","oldIdx","visualSymbol","layoutPoints","effectType","showEffectOn","rippleEffect","period","brushType","SymbolDraw","EffectSymbol","init","_symbolDraw","effectSymbolDraw","updateData","updateLayout","dataColor","funnelLayout","dataFilter","registerProcessor","List","_model","defaultEmphasis","completeDimensions","FunnelSeries","legendDataProvider","getRawData","_defaultLabelLine","initData","labelLine","labelLineNormalOpt","labelLineEmphasisOpt","show","label","getDataParams","params","superCall","sum","getSum","percent","toFixed","$vars","left","top","right","bottom","minSize","maxSize","sort","gap","funnelAlign","lineStyle","FunnelPiece","polygon","Polygon","Polyline","onEmphasis","ignore","hoverIgnore","onNormal","normalIgnore","funnelPieceProto","opacityAccessPath","firstCreate","hostModel","points","visualColor","lineJoin","_updateLabel","labelText","labelLayout","linePoints","labelHoverModel","labelLineModel","labelLineHoverModel","useInsideStyle","inside","textAlign","textVerticalAlign","verticalAlign","getLineStyle","inherits","FunnelView","funnelPiece","piePiece","linearMap","getViewRect","getLayoutRect","getBoxLayoutParams","getSortedIndices","valueArr","mapArray","indices","isAscending","len","a","b","textX","textY","labelPosition","isLabelInside","x1","y1","x2","labelLineLen","y2","viewRect","sizeExtent","dataExtent","getDataExtent","itemHeight","getLinePoints","offY","x0","itemWidth","nextIdx","end","GaugeSeries","dataOpt","radius","clockwise","splitNumber","axisLine","splitLine","axisTick","axisLabel","distance","pointer","title","offsetCenter","fontSize","detail","backgroundColor","padding","PointerPath","parsePosition","formatLabel","labelFormatter","replace","PI2","GaugeView","colorList","posInfo","_renderMain","axisLineModel","lineStyleModel","angleRangeSpan","prevEndAngle","axisLineWidth","getColor","tmp","_renderTicks","_renderPointer","_renderTitle","_renderDetail","minVal","maxVal","splitLineModel","tickModel","subSplitNumber","splitLineLen","tickLen","angle","step","subStep","splitLineStyle","tickLineStyle","unitX","cos","unitY","sin","Line","j","tickLine","valueExtent","angleExtent","pointerModel","titleModel","forceRich","detailModel","textWidth","textHeight","Path","buildPath","ctx","mathCos","mathSin","moveTo","lineTo","categoryFilter","categoryVisual","edgeVisual","simpleLayout","circularLayout","forceLayout","createView","registerCoordinateSystem","_format","encodeHTML","createGraphFromNodeEdge","GraphSeries","_categoriesData","fillDataTextStyle","edges","links","_updateCategoriesData","mergeOption","mergeDefaultAndTheme","edgeLabel","nodes","self","beforeLink","nodeData","edgeData","wrapMethod","model","categoriesModels","_categoriesModels","categoryIdx","categoryModel","edgeLabelModel","fakeSeriesModel","edgeGetParent","parsePath","customizeGetParent","getGraph","graph","getEdgeData","getCategoriesData","formatTooltip","multipleSeries","dataType","edge","getEdgeByIndex","sourceName","node1","targetName","node2","html","categories","map","category","categoriesData","focusNodeAdjacency","circular","rotateLabel","force","initLayout","repulsion","gravity","edgeLength","layoutAnimation","edgeSymbol","edgeSymbolSize","draggable","roam","nodeScaleRatio","formatter","curveness","LineDraw","RoamController","roamHelper","_cursorHelper","onIrrelevantElement","adjustEdge","nodeOpacityPath","lineOpacityPath","getItemOpacity","opacityPath","getVisual","fadeOutItem","opacityRatio","getGraphicEl","downplay","traverse","fadeInItem","highlight","symbolDraw","lineDraw","_controller","_controllerHost","_lineDraw","_firstRender","_nodeScaleRatio","groupNewProp","_getNodeGlobalScale","_updateNodeAndLinkScale","_updateController","clearTimeout","_layoutTimeout","_startForceLayoutIteration","warmUp","_layouting","setFixed","setUnfixed","setDraggable","__focusNodeAdjacency","__unfocusNodeAdjacency","dispatchAction","eachEdge","edgeDataIndex","circularRotateLabel","symbolPath","getSymbolPath","pos","rad","atan2","isLeft","textRotation","textOrigin","node","getNodeByIndex","eachNode","adjacentEdge","unfocusNodeAdjacency","stopped","setTimeout","controller","controllerHost","setPointerChecker","e","getBoundingRect","applyTransform","transform","contain","enable","updateViewOnPan","mouseX","mouseY","updateViewOnZoom","disable","nodeScale","invScale","groupScale","groupZoom","roamZoom","curveTool","vec2","v1","v2","v3","quadraticAt","v2DistSquare","distSquare","mathAbs","intersectCurveCircle","curvePoints","t","p0","p1","p2","d","radiusSquare","interval","_t","next","nextDiff","tmp0","quadraticSubdivide","pts","pts2","v","getSymbolSize","Array","fromSymbol","toSymbol","__original","originalPoints","copy","sub","normalize","scaleAndAdd","legendModels","findComponents","graphSeries","categoryNames","filterSelf","paletteScope","categoryNameIdxMap","getColorFromPalette","_circularLayoutHelper","unitAngle","getValue","setLayout","cp1","x12","y12","View","_layout","bbox","aspect","viewList","coordSysType","positions","fromPoints","bbWidth","bbHeight","viewWidth","viewHeight","viewCoordSys","setBoundingRect","setViewRect","colorQuery","split","opacityQuery","opts","n","random","pp","friction","fixed","v12","nLen","n1","n2","w","repFact","rep","_forceHelper","_simpleLayoutHelper","preservedPoints","forceModel","getId","nodeDataExtent","edgeDataExtent","forceInstance","oldStep","l","simpleLayoutEdge","GRADIENT_LEVELS","Heatmap","canvas","createCanvas","blurSize","pointSize","maxOpacity","minOpacity","_gradientPixels","colorFunc","isInRange","brush","_getBrush","gradientInRange","_getGradient","gradientOutOfRange","getContext","alpha","globalAlpha","drawImage","imageData","getImageData","pixels","pixelLen","diffOpacity","gradientOffset","floor","gradient","putImageData","brushCanvas","_brushCanvas","clearRect","beginPath","arc","closePath","state","gradientPixels","pixelsSingleState","Uint8ClampedArray","geoIndex","HeatmapLayer","getIsInPiecewiseRange","pieceList","dataSpan","piece","lastIndex","getIsInContinuousRange","range","isGeoCoordSys","visualMapOfThisSeries","visualMap","eachTargetSeries","targetSeries","_renderOnCartesianAndCalendar","_renderOnGeo","xAxis","getAxis","yAxis","itemStyleQuery","hoverItemStyleQuery","labelQuery","hoverLabelQuery","hoverStl","coordDimToDataDim","dataToRect","contentShape","hasItemOption","rawValue","visualMapModel","inRangeVisuals","targetVisuals","inRange","outOfRangeVisuals","outOfRange","hmLayer","_hmLayer","roamTransform","getRoamTransform","lng","lat","getPieceList","getNormalizer","getColorMapper","img","curveUtil","EffectLine","lineData","seriesScope","createLine","_updateEffectSymbol","effectLineProto","effectModel","_symbolType","_updateEffectAnimation","loop","constantSpeed","delayExpr","isDelayFunc","updateAnimationPoints","getLineLength","_period","_loop","stopAnimation","delay","__t","animator","animate","when","during","updateSymbolPosition","done","dist","__p1","__cp1","__p2","quadraticDerivativeAt","tx","ty","EffectPolyline","_lastFrame","_lastFramePercent","effectPolylineProto","_points","accLenArr","_offsets","_length","offsets","lastFrame","frame","lerp","SymbolClz","EFFECT_RIPPLE_NUMBER","normalizeSymbolSize","updateRipplePath","rippleGroup","effectCfg","eachChild","ripplePath","beforeUpdate","getScale","effectSymbolProto","stopEffectAnimation","startEffectAnimation","effectOffset","rippleScale","animateStyle","updateEffectAnimation","oldEffectCfg","_effectCfg","DIFFICULT_PROPS","propName","fadeOut","lineContain","quadraticContain","LargeLineShape","extendShape","polyline","segs","isPolyline","seg","quadraticCurveTo","findDataIndex","containStroke","LargeLineDraw","_lineEl","largeLineProto","lineEl","offsetX","offsetY","LargeSymbolPath","sizes","symbolProxy","symbolProxyShape","y0","LargeSymbolDraw","_symbolEl","largeSymbolProto","symbolEl","vector","symbolUtil","LinePath","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","setLinePoints","targetShape","cpx1","cpy1","updateSymbolAndLabelBeforeLineUpdate","lineGroup","symbolFrom","childOfName","symbolTo","parentNode","__dirty","fromPos","pointAt","toPos","tangent","tangentAt","__position","halfPercent","cp","__verticalAlign","__textAlign","_createLine","lineProto","_updateCommonStl","hoverLineStyle","visualOpacity","defaultLabelColor","normalText","emphasisText","showLabel","hoverShowLabel","rawVal","isFinite","labelStyle","getTextColor","fontStyle","fontWeight","fontFamily","linePath","LineGroup","isPointNaN","lineNeedsDraw","ctor","_ctor","lineDrawProto","oldLineData","_lineData","LineCtor","straightLineProto","bezierCurveProto","BezierCurve","isLine","_createPolyline","polylineProto","symbolProto","driftSymbol","drift","_createSymbol","stopSymbolAnimation","toLastFrame","setZ","_updateCommon","fadeIn","_seriesModel","normalLabelAccessPath","emphasisLabelAccessPath","hoverItemStyle","elStyle","symbolInnerColor","useNameLabel","ratio","keepLabel","symbolCtor","_symbolCtor","symbolDrawProto","symbolNeedsDraw","isIgnore","SymbolCtor","enableAnimation","WhiskerPath","WhiskerBox","styleUpdater","_createContent","whiskerBoxProto","transInit","makeWhiskerEndsShape","ends","WhiskerBoxDraw","updateMethod","whiskerBoxDrawProto","Graph","linkList","CoordinateSystem","directed","addNode","linkNameList","validEdges","linkCount","link","source","addEdge","coordSysCtor","dimensionNames","mainData","struct","structAttr","datas","datasAttr","getDataItemValue","converDataValue","isDataItemOption","firstDataNotNull","ifNeedCompleteOrdinalData","sampleItem","coordSysName","creator","creators","registeredCoordSys","completeDimOpt","dimsDef","axesInfo","getDimensionsInfo","categoryIndex","nameList","createNameList","dimValueGetter","itemOpt","dimIndex","categoryAxesModels","getCategories","isStackable","axisType","getDimTypeByAxis","axesModels","queryComponents","xAxisModel","yAxisModel","xAxisType","yAxisType","stackable","isXAxisCateogry","isYAxisCategory","singleAxisModel","singleAxisType","isCategory","single","polarModel","angleAxisModel","findAxisModel","radiusAxisModel","radiusAxisType","angleAxisType","isAngleAxisCateogry","isRadiusAxisCateogry","categoryAxisModel","dataLen","otherDimToDataDim","labelDims","pop","_baseAxisDim","addOrdinal","getComponent","baseAxisDimIndex","baseAxisDim","otherAxisDim","unshift","otherDims","tooltip","dimCount","whiskerBoxDraw","_whiskerBoxDraw","dataSample","PRIORITY","PROCESSOR","STATISTIC","clipOverflow","smooth","smoothMonotone","showSymbol","showAllSymbol","connectNulls","sampling","hoverLayerThreshold","lineAnimationDiff","modelUtil","_poly","isPointsSame","points1","points2","getSmooth","getAxisExtentWithGap","getGlobalExtent","onBand","halfBandWidth","dir","getStackedOnPoints","valueStart","onZero","baseDataOffset","stackedOnSameSign","stackedOn","stackedData","createGridClipShape","hasAnimation","xExtent","yExtent","expandSize","createPolarClipShape","angleAxis","getAngleAxis","radiusAxis","getRadiusAxis","radiusExtent","RADIAN","inverse","createClipShape","turnPointsIntoStep","stepTurnAt","baseIndex","stepPoints","nextPt","stepPt","middle","stepPt2","getVisualGradient","visualMetaList","visualMeta","dimension","colorStops","stops","stop","stopLen","outerColors","tinyExtent","minCoord","maxCoord","coordSpan","LinearGradient","_lineGroup","areaStyleModel","isCoordSysPolar","prevCoordSys","_coordSys","_polyline","_polygon","isAreaChart","isEmpty","stackedOnPoints","isSymbolIgnore","_getSymbolIgnoreFunc","__temp","_step","_newPolygon","_stackedOnPoints","_updateAnimation","_newPolyline","stackedOnSmooth","getAreaStyle","stackedOnSeries","queryDataIndex","categoryAxis","getAxesByScale","isLabelIgnored","current","stackedOnCurrent","stackedOnNext","__points","updatedDataInfo","diffStatus","status","cmd","idx1","ptIdx","animators","getStackedOnPoint","diffData","newData","diffResult","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","dims","diffItem","pointAdded","currentPt","rawIndex","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","fixClipWithShadow","vec2Min","vec2Max","v2Copy","cp0","isPointNull","drawSegment","segLen","allLen","smoothMin","smoothMax","prevIdx","k","nextP","ratioNextSeg","prevP","lenPrevSeg","lenNextSeg","bezierCurveTo","getBoundingBox","smoothConstraint","ptMin","ptMax","stackedOnBBox","linesLayout","linesVisual","preprocessOption","seriesOpt","coords","fromName","toName","mergeAll","LinesSeries","visualColorAccessPath","dataItem","xAxisIndex","yAxisIndex","effect","trailLength","large","largeThreshold","hasEffect","isLarge","_hasEffet","_isPolyline","_isLarge","zr","isSvg","painter","getType","getLayer","clear","_lastZlevel","configLayer","motionBlur","lastFrameAlpha","mapSymbolLayout","mapVisual","mapDataStatistic","backwardCompat","createDataSelectAction","addCommas","dataSelectableMixin","geoCreator","MapSeries","layoutMode","needsDrawMap","_fillOption","getMapType","updateSelectedMap","newOption","getHostGeoModel","dependentModels","mapName","getFilledRegions","nameMap","getRegionModel","regionName","indexOfName","formattedValue","seriesNames","otherIndex","originalData","getTooltipPosition","region","getRegion","aspectScale","showLegendSymbol","dataRangeHoverLink","boundingCoords","scaleLimit","areaColor","MapDraw","mapModel","from","uid","mapDraw","_mapDraw","draw","_renderSymbols","circle","fullData","mainSeries","fullIndex","polygonGroups","extendFrom","__mapOriginalZ2","mapSeries","mapType","mapLocation","dataStatistics","statisticType","dataNameMap","mapKey","seriesGroups","hostGeoModel","seriesList","setData","cloneShallow","processedMapType","mapSymbolOffsets","subMapSeries","parallelVisual","parallelModel","parallelAxisIndices","parallelAxisIndex","rawData","modelDims","generateDataDims","dataDimsInfo","modelDimsIndex","axisModel","translateCategoryValue","guessOrdinal","animation","getRawIndicesByActiveState","activeState","eachActiveState","theActiveState","parallelIndex","inactiveOpacity","activeOpacity","axisData","numberDim","convertDimNameToNumber","maxDimNum","firstItem","SMOOTH","ParallelView","_dataGroup","_renderForNormal","dataGroup","updateElCommon","removeClipPath","newDataIndex","addEl","oldDataIndex","createLinePoints","rectEl","isEmptyValue","seriesStyleModel","opacityMap","active","inactive","itemOpacity","pieLayout","getPercentWithPrecision","PieSeries","valueList","minAngle","selectedOffset","hoverOffset","avoidLabelOverlap","percentPrecision","stillShowZeroSum","rotate","length2","animationType","updateDataSelected","toggleItemSelected","midAngle","PiePiece","piePieceProto","PieView","sectorGroup","_sectorGroup","isFirstRender","onSectorClick","selectedMode","_createClipPath","containPoint","sqrt","textContain","adjustSingleSide","shiftDown","delta","shiftUp","changeX","isDownList","lastDeltaX","Number","MAX_VALUE","deltaY","len2","deltaX","lastY","upList","downList","avoidOverlap","labelLayoutList","leftList","rightList","hasLabelRotate","labelLineLen2","x3","y3","labelRotate","textRect","validDataCount","unitRadian","roseType","restAngle","valueSumLargerThanMinAngle","currentAngle","radarLayout","RadarSeries","extraPrefix","extraFromZero","indicatorAxes","getIndicatorAxes","radarIndex","updateSymbols","oldPoints","newPoints","symbolGroup","__dimIdx","getInitialPoints","hoverAreaStyleModel","polygonIgnore","hoverPolygonIgnore","itemHoverStyle","labelDimIndex","polarOptArr","polarNotRadar","polarOpt","indicator","radar","polarIndex","pointsConverter","sankeyLayout","sankeyVisual","SankeySeries","layoutInfo","rawDataOpt","nodeWidth","nodeGap","layoutIterations","SankeyShape","cpx2","cpy2","halfExtent","curve","curvature","n1Layout","n2Layout","edgeLayout","sy","nest","computeNodeValues","filteredNodes","filter","iterations","layoutSankey","computeNodeBreadths","computeNodeDepths","computeEdgeDepths","value1","outEdges","getEdgeValue","value2","inEdges","remainNodes","nextNode","kx","lenj","moveSinksRight","scaleNodeBreadths","nodeX","nodesByBreadth","sortKeys","ascending","entries","values","initializeNodeDepth","resolveCollisions","relaxRightToLeft","relaxLeftToRight","kyArray","ky","ky0","nodeDy","edgeDy","ascendingDepth","nodeY","weightedTarget","weightedSource","ascendingTargetDepth","ascendingSourceDepth","array","f","VisualMapping","minValue","maxValue","mapping","mappingMethod","mapValueToColor","mapValueToVisual","customColor","_normalSymbolDraw","_largeSymbolDraw","largeSymbolDraw","normalSymbolDraw","themeRiverLayout","themeRiverVisual","DATA_NAME_INDEX","ThemeRiverSeries","fixData","rawDataLength","dataByName","layData","dataList","layerNum","largestLayer","timeValue","keyIndex","filterData","undefined","createHashMap","axisDim","getLayerSeries","lenCount","indexArr","layerSeries","comparer","index1","index2","getAxisTooltipData","nestestValue","minDist","nearestIdx","pointNum","theValue","dataIndices","htmlName","htmlValue","boundaryGap","singleAxisIndex","margin","_util","_layers","keyGetter","dataDiffer","_layersSeries","newLayersGroups","process","oldLayersGroups","points0","textLayout","layerGroup","hoverItemStyleModel","numberUtil","orient","baseY0","layerPoints","singleLayer","computeBaseline","baseLine","m","layerIndex","sums","temp","idxMap","orthogonalLayout","radialLayout","Tree","root","leaves","treeOption","tree","createTree","treeDepth","depth","expandAndCollapse","expandTreeDepth","initialTreeDepth","hostTree","getRawDataItem","isExpand","collapsed","realRoot","getNodeByDataIndex","animationDurationUpdate","_layoutHelper","radialCoordinate","_oldTree","_mainGroup","updateNode","removeNode","getTreeNodeStyle","virtualRoot","sourceSymbolEl","sourceLayout","sourceOldLayout","rawX","__radialOldRawX","rawY","__radialOldRawY","targetLayout","__radialRawX","__radialRawY","rootLayout","__edge","getEdgeShape","radialCoor1","radialCoor2","radialCoor3","radialCoor4","_traversalHelper","eachAfter","eachBefore","firstWalk","secondWalk","sep","separation","hierNode","modifier","prelim","coorX","coorY","finalCoor","defaultAncestor","ancestor","change","shift","thread","siblings","subtreeW","executeShifts","midPoint","apportion","defaultSeparation","radialCoor","subtreeV","nodeOutRight","nodeInRight","nodeOutLeft","nodeInLeft","sumOutRight","sumInRight","sumOutLeft","sumInLeft","nextRight","nextLeft","moveSubtree","nextAncestor","wl","wr","commonLayout","callback","treemapVisual","treemapLayout","wrapTreePathInfo","TEXT_PADDING","ITEM_GAP","ARRAY_LENGTH","Breadcrumb","containerGroup","makeItemPoints","head","tail","splice","packEventData","itemNode","eventData","componentSubType","componentIndex","selfType","treePathInfo","targetNode","onSelect","thisGroup","normalStyleModel","textStyleModel","layoutParam","box","emptyItemWidth","totalWidth","renderList","_prepare","_renderContent","positionElement","getTextRect","lastX","availableSize","getAvailableSize","textFont","onclick","_viewRoot","clipWindow","squareRatio","leafDepth","drillDownIcon","zoomToNodeRatio","nodeClick","breadcrumb","textStyle","ellipsis","upperLabel","colorAlpha","colorSaturation","gapWidth","borderColorSaturation","visualDimension","visualMin","visualMax","colorMappingBy","visibleMin","childrenVisibleMin","levels","completeTreeValue","setDefault","optionUpdated","resetViewRoot","apply","setLayoutInfo","mapIdToIndex","idIndexMap","_idIndexMap","_idIndexMapCount","getViewRoot","viewRoot","contains","dataNode","childValue","thisValue","globalColorList","hasColorDefine","levelDefine","modelColor","level0","helper","BoundingRect","matrix","animationUtil","DRAG_THRESHOLD","PATH_LABEL_NOAMAL","PATH_LABEL_EMPHASIS","PATH_UPPERLABEL_NORMAL","PATH_UPPERLABEL_EMPHASIS","Z_BASE","Z_BG","Z_CONTENT","getItemStyleEmphasis","getItemStyleNormal","o","_containerGroup","_storage","createStorage","_breadcrumb","_state","models","targetInfo","retrieveTargetInfo","payloadType","thisStorage","reRoot","rootNodeGroup","nodeGroup","direction","_giveContainerGroup","renderResult","_doRender","renderFinally","_doAnimation","_resetController","_renderBreadcrumb","_initEvents","thisTree","oldTree","lastsForAnimation","oldStorage","willInvisibleEls","doRenderNode","renderNode","dualTravel","willDeleteEls","clearStorage","thisViewChildren","oldViewChildren","parentGroup","sameTree","processNode","thisNode","oldNode","viewChildren","isRemoved","storage","store","storageName","delEls","__tmWillDelete","els","invisible","duration","easing","animationWrap","createWrap","__tmNodeWidth","__tmNodeHeight","targetX","targetY","last","old","fadein","_onPan","_onZoom","_clearController","rootRect","translate","findTarget","isLeafRoot","_rootToNode","_zoomToNode","linkTarget","window","open","aboveViewRoot","order","bgEl","background","transformCoordToLocal","content","thisLayout","isInView","thisWidth","thisHeight","thisInvisible","thisRawIndex","oldRawIndex","upperHeight","isParent","itemStyleNormalModel","itemStyleEmphasisModel","giveGraphic","isAboveViewRoot","bg","renderBackground","renderContent","useUpperLabel","visualBorderColor","emphasisBorderColor","emphasisStyle","upperLabelWidth","prepareText","contentWidth","contentHeight","element","__tmWillVisible","upperLabelRect","nodeModel","iconChar","normalLabelModel","emphasisLabelModel","isShow","truncate","outerWidth","outerHeight","minChar","Ctor","lasts","prepareAnimationWhenHasOld","calculateZ","__tmDepth","__tmStorageName","prepareAnimationWhenNoOld","lastCfg","parentOldX","parentOldY","parentOldBg","zInLevel","zb","targetNodeId","getNodeById","getPathToRoot","viewPath","nodeDataIndex","actionTypes","handleRootToNode","originViewRoot","MAX_SAFE_INTEGER","mathMax","mathMin","retrieveValue","PATH_BORDER_WIDTH","PATH_GAP_WIDTH","PATH_UPPER_LABEL_SHOW","PATH_UPPER_LABEL_HEIGHT","condition","ecWidth","ecHeight","seriesOption","containerWidth","containerHeight","viewAbovePath","rootSize","estimateRootSize","options","clearLayouts","viewRootLayout","area","squarify","treeRoot","calculateRootPosition","prunning","hideChildren","halfGapWidth","upperLabelHeight","getUpperLabelHeight","layoutOffset","layoutOffsetUpper","totalArea","initChildren","rowFixedLength","best","row","score","worst","orderBy","overLeafDepth","info","statistic","filterByThreshold","orderedChildren","deletePoint","areaMax","areaMin","squareArea","flush","idx0WhenH","idx1WhenH","rowOtherLength","rowLen","nodeLayout","wh1","remain","modWH","wh0","currNode","defaultSize","viewArea","currNodeValue","pow","defaultPosition","targetCenter","clipRect","nodeInViewAbovePath","intersect","childClipRect","zrColor","ITEM_STYLE_NORMAL","seriesItemStyleModel","levelItemStyles","levelModels","levelModel","travelTree","getAncestors","designatedVisual","viewRootAncestors","thisNodeColor","nodeItemStyleModel","levelItemStyle","visuals","buildVisuals","calculateColor","calculateBorderColor","buildVisualMapping","childVisual","visualName","getValueVisualDefine","modifyHSL","modifyAlpha","rangeVisual","getRangeVisual","__drColorMappingBy","childVisuals","mappingType","axisPointerModelHelper","axisTrigger","axisPointer","coordSysAxesInfo","collect","AxisPointerModel","extendComponentModel","triggerOn","snap","triggerTooltip","shadowStyle","precision","handle","icon","throttle","globalListener","AxisPointerView","extendComponentView","globalAxisPointerModel","globalTooltipModel","currTrigger","unregister","clazzUtil","eventTool","throttleUtil","makeGetter","BaseAxisPointer","moveAnimation","props","propsEqual","lastProp","lastProps","newProps","equals","updateLabelShowHide","labelEl","axisPointerModel","getHandleTransProps","trans","updateMandatoryProps","_group","_lastGraphicKey","_handle","_dragging","_lastValue","_lastStatus","_payloadInfo","animationThreshold","forceRender","_axisModel","_axisPointerModel","_api","hide","makeElOption","graphicKey","_moveAnimation","determineAnimation","doUpdateProps","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","_renderHandle","isCategoryAxis","useSnap","seriesDataCount","getAxisInfo","axisExtent","pointerOption","pointerEl","updateHandleTransform","handleModel","createIcon","onmousemove","onmousedown","_onHandleDragMove","ondragend","_onHandleDragEnd","includeStyles","handleSize","_moveHandleToValue","getHandleTransform","_doDispatchAxisPointer","payloadInfo","cursorPoint","tooltipOption","axisIndex","doClear","buildLabel","xDimIndex","enableClassExtend","viewHelper","cartesianAxisHelper","AxisView","CartesianAxisPointer","axisPointerType","otherExtent","getCartesian","pixelValue","buildElStyle","pointerShapeBuilder","buildCartesianSingleLabelElOption","labelInside","labelMargin","getTransformedPosition","labelDirection","currPosition","cursorOtherValue","tooltipOptions","align","makeLineShape","getAxisDimIndex","subPixelOptimizeLine","shadow","span","makeRectShape","registerAxisPointerClass","formatUtil","AxisBuilder","PolarAxisPointer","coordValue","otherAxis","capitalFirst","labelPos","getLabelPosition","buildLabelElOption","axisAngle","labelRotation","innerTextLayout","coordToPoint","radian","makeSectorShape","singleAxisHelper","XY","WH","SingleAxisPointer","getPointDimIndex","modelHelper","findPointFromSeries","finder","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputFinder","showValueMap","dataByCoordSys","updaters","showPointer","showTooltip","coordSysMap","coordSysKey","coordSysContainsPoint","axisInfo","inputAxisInfo","findInputAxisInfo","processOnAxis","linkTriggers","tarAxisInfo","tarKey","linkGroup","srcAxisInfo","srcKey","srcValItem","mapper","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","dontSnap","isBlank","containData","involveSeries","buildPayloadsBySeries","payloadBatch","snapToValue","minDiff","seriesNestestValue","dataDim","indicesOfNearest","coordSysModel","makeKey","coordSysItem","coordSysId","coordSysIndex","coordSysMainType","dataByAxis","axisId","valueLabelOpt","seriesDataIndices","outputAxesInfo","valItem","useHandle","escapeConnect","highDownKey","lastHighlights","newHighlights","batchItem","toHighlight","toDownplay","batch","axisName","getSeriesByIndex","getValues","env","handler","records","initGlobalListeners","record","useHandler","eventType","dis","makeDispatchAction","dispatchTooltipFinally","pendings","initialized","doEnter","onLeave","actuallyPayload","showLen","showTip","hideLen","hideTip","pendingList","seriesInvolved","collectAxesInfo","collectSeriesInfo","linksOption","linkGroups","axisPointerEnabled","axesInfoInCoordSys","baseTooltipModel","getAxes","saveTooltipAxisInfo","getTooltipAxes","triggerAxis","cross","tooltipAxes","baseAxes","otherAxes","fromTooltip","axisPointerShow","isHandleTrigger","makeAxisPointerModel","groupIndex","getLinkGroupIndex","tooltipAxisPointerModel","volatileOption","field","labelOption","crossStyle","eachSeries","seriesTooltipTrigger","seriesTooltipShow","linkOption","checkPropInLink","linkPropValue","axisPropValue","fixValue","getAxisPointerModel","axisHelper","styleModel","getValueLabel","paddings","normalizeCssArray","confineInContainer","bgColor","getLabel","getAxisRawValue","seriesData","idxItem","dataParams","isString","isFunction","labelOffset","elementList","getAxisLineShape","rExtent","getRadiusIdx","axisPointerClass","ticksAngles","getTicksCoords","_axisLine","_axisTick","lines","tickAngle","mergePath","_axisLabel","categoryData","labels","getFormattedLabels","labelsAngles","getLabelsCoords","labelTextAlign","labelTextVerticalAlign","textEl","_splitLine","lineColors","lineCount","splitLines","colorIndex","_splitArea","splitAreaModel","areaColors","splitAreas","prevAngle","r1","isRadianAroundZero","remRadian","matrixUtil","_vector","v2ApplyTransform","makeAxisEventDataBase","nameDirection","tickDirection","dumbGroup","_transform","_dumbGroup","hasBuilder","builders","getGroup","pt1","pt2","lineCap","anid","strokeContainThreshold","arrows","arrowSize","symbolWidth","symbolHeight","axisTickLabel","tickEls","buildAxisTick","labelEls","buildAxisLabel","fixMinMaxLabelShow","axisNameAvailableWidth","nameLocation","gapSignal","isNameLocationCenter","nameRotation","endTextLayout","truncateOpt","maxWidth","nameTruncateMaxWidth","truncatedText","truncateText","placeholder","tooltipOpt","formatterParams","__fullText","__truncatedText","isSilent","targetType","decomposeTransform","axisRotation","rotationDiff","textRotate","onLeft","showMinLabel","showMaxLabel","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","firstRect","nextRect","mRotationBack","identity","mul","getLocalTransform","ifIgnoreOnTick","ticksCnt","rawTick","getTicks","getInterval","labelInterval","axisBuilder","tickInterval","ticksCoords","ticks","tickCoord","tickEl","axisLabelShow","triggerEvent","tickVal","itemLabelModel","textColor","labelStr","_axisPointer","updateAxisPointer","disposeAxisPointer","axisView","Clazz","getAxisPointerClass","axisPointerClazz","clazz","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","_axisGroup","gridModel","getCoordSysModel","groupTransition","lineInterval","gridRect","prevX","prevY","areaInterval","areaStyle","BrushController","brushHelper","_brushController","_onBrush","fromAxisAreaSelect","areaSelectStyle","getAreaSelectStyle","areaWidth","axisLayout","getAxisLayout","builderOpt","_refreshBrushController","updateVisual","updateCovers","getCoverInfoList","extentLen","mount","enableGlobalPan","setPanels","panelId","makeRectPanelClipPath","isTargetByCursor","makeRectIsTargetByCursor","getLinearBrushOtherExtent","makeLinearBrushOtherExtent","enableBrush","brushStyle","removeOnClick","coverInfoList","intervals","coverInfo","coordToData","realtime","isEnd","parallelAxisId","activeIntervals","layoutAxis","prevRadius","selfBuilderAttr","SingleAxisView","getLineDash","rawAxisPosition","axisPosition","rectBound","axisOffset","posBound","onZeroAxisIndex","onZeroCoord","dirMap","getLabelInterval","parallelAxisModel","setActiveIntervals","setAxisExpand","positionMap","horizontal","vertical","directionMap","visualSolution","DEFAULT_OUT_OF_BRUSH_COLOR","BrushModel","toolbox","brushLink","brushMode","transformable","throttleType","throttleDelay","areas","brushOption","coordInfoList","thisOption","replaceVisualOption","inBrush","outOfBrush","setAreas","generateBrushOption","setBrushOption","merge","brushModel","updateController","updateView","modelId","brushTargetManager","setOutputRanges","brushId","$from","makePanelOpts","DEFAULT_TOOLBOX_BTNS","isNew","brushComponents","brushComponentSpecifiedBtns","brushOpt","tbs","feature","toolboxFeature","toolboxBrush","brushTypes","removeDuplicate","arr","flag","polygonContain","selector","lineX","getLineSelectors","lineY","boundingRect","lineIntersectPolygon","xyIndex","inLineRange","layoutRange","lx","ly","l2x","l2y","lineIntersect","a1x","a1y","a2x","a2y","b1x","b1y","b2x","b2y","determinant","nearZero","namenda","miu","v4","BrushTargetManager","STATE_LIST","DISPATCH_METHOD","DISPATCH_FLAG","PRIORITY_BRUSH","VISUAL","BRUSH","brushSelected","doDispatch","fn","isDisposed","checkInRange","selectorsByBrushType","rangeInfoList","getSelectorsByBrushType","sels","selectorsByElementType","bSelector","sel","brushModelNotControll","seriesIndices","bindSelector","selFn","elType","setInputRanges","brushIndex","thisBrushSelected","brushName","linkedSeriesMap","selectedDataIndexForLink","rangeInfoBySeries","hasBrushExists","boundingRectBuilders","visualMappings","createVisualMappings","mappingOption","linkOthers","brushed","stepAParallel","hasAxisBrushed","stepAOthers","controlSeries","seriesBrushSelected","getValueState","applyVisual","getBoundingRectFromMinMax","minMax","rg","MONTH_TEXT","EN","CN","WEEK_TEXT","_tlpoints","_blpoints","_firstDayOfMonth","_firstDayPoints","calendarModel","rangeData","getRangeInfo","getOrient","_renderDayRect","_renderLines","_renderYearText","_renderMonthText","_renderWeekText","itemRectStyleModel","sw","getCellWidth","sh","getCellHeight","time","getNextNDay","tl","firstDay","addPoints","formatedDate","getDateInfo","date","setMonth","getMonth","_getLinePointsOfOneWeek","_drawSplitline","_getEdgesPoints","rs","poyline","tmpD","day","_formatterLabel","formatTplSimple","_yearTextPositionControl","aligns","yearLabel","xc","yc","posPoints","yearText","_monthTextPositionControl","isCenter","vAlign","monthLabel","termPoints","firstDayPoints","yyyy","yy","MM","M","monthText","_weekTextPositionControl","cellSize","isStart","dayLabel","firstDayOfWeek","getFirstDayOfWeek","lweek","fweek","weekText","asc","AxisProxy","dataZoomModel","_dimName","_axisIndex","_valueWindow","_percentWindow","_dataExtent","_minMaxSpan","_dataZoomModel","calculateDataExtent","axisProxy","seriesExtent","fixExtentByAxis","getAxisModel","getMin","axisDataLen","getMax","setAxisModel","isRestore","percentWindow","valueWindow","getPixelPrecision","useOrigin","setRange","setMinMaxSpan","minMaxSpan","valueSpan","hostedBy","getDataValueWindow","getDataPercentWindow","getTargetSeriesModels","isCoordSupported","getOtherAxisModel","coordSysIndexName","foundOtherAxisModel","isCartesian","otherAxisModel","getMinMaxSpan","calculateDataWindow","rangePropMode","getRangePropMode","percentExtent","boundValue","boundPercent","reset","dataWindow","restore","filterMode","leftOut","rightOut","thisHasValue","thisLeftOut","thisRightOut","isInWindow","eachAxisDim","DataZoomModel","startValue","endValue","minSpan","maxSpan","minValueSpan","maxValueSpan","rangeMode","_dataIntervalByAxis","_dataInfo","_axisProxies","_autoThrottle","_rangePropMode","rawOption","retrieveRaw","doInit","canvasSupported","_setDefaultThrottle","updateRangeUse","names","_resetTarget","_giveAxisProxies","axisProxies","eachTargetAxis","dimNames","__dzAxisProxy","autoMode","_judgeAutoMode","axisIndexName","normalizeToArray","_autoSetAxisIndex","_autoSetOrient","hasIndexSpecified","autoAxisIndex","axisIndices","axisModels","_isSeriesHasAllAxesTypeOf","is","seriesAxisIndex","globalOption","getFirstTargetAxisModel","firstAxisModel","getAxisProxy","setRawRange","ignoreUpdateRangeUsg","getPercentRange","findRepresentativeAxisProxy","getValueRange","axisDimName","ret","rangeModeInOption","percentSpecified","valueSpecified","ComponentView","getTargetCoordInfo","coordSysLists","save","coordModel","coordIndex","disabled","zoomLock","zoomOnMouseWheel","moveOnMouseMove","preventDefaultMouseMove","DataZoomView","sliderMove","roams","InsideZoomView","_range","shouldRecordRange","allCoordIds","coordInfo","generateCoordId","dataZoomOption","coordId","containsPoint","dataZoomId","throttleRate","panGetRange","zoomGetRange","roamControllerOpt","oldX","oldY","newX","newY","directionInfo","getDirectionInfo","percentDelta","signal","pixel","pixelLength","percentPoint","pixelStart","oldPoint","newPoint","pointToCoord","SliderZoomModel","dataBackground","fillerColor","handleIcon","handleStyle","labelPrecision","showDetail","showDataShadow","DEFAULT_LOCATION_EDGE_GAP","DEFAULT_FRAME_BORDER_WIDTH","DEFAULT_FILLER_SIZE","HORIZONTAL","VERTICAL","LABEL_GAP","SHOW_DATA_SHADOW_SERIES_TYPE","SliderZoomView","_displayables","_orient","_handleEnds","_size","_handleWidth","_handleHeight","_location","_dataShadowInfo","_buildView","_updateView","_resetLocation","_resetInterval","barGroup","_renderBackground","_renderDataShadow","_positionGroup","coordRect","_findCoordRect","positionInfo","layoutParams","getLayoutParams","layoutRect","location","targetAxisModel","otherAxisInverse","_getViewExtent","_onClickPanelClick","_prepareDataShadowInfo","otherDim","otherDataExtent","otherOffset","lastIsEmpty","otherShadowExtent","thisShadowExtent","areaPoints","thisCoord","stride","otherCoord","thisAxis","getOtherDim","thisDim","displaybles","handles","handleLabels","filler","getCursor","_onDragMove","ondragstart","_showDataInfo","_onDragEnd","onmouseover","onmouseout","subPixelOptimizeRect","handleIndex","bRect","handleColor","viewExtent","_updateInterval","handleEnds","viewExtend","nonRealtime","handleInterval","handleHeight","_updateDataInfo","labelTexts","dataInterval","_formatLabel","orderedHandleEnds","barTransform","getTransform","transformDirection","textPoint","valueStr","showOrHide","vertex","_dispatchZoomAction","localPoint","linkedNodesFinder","createLinkedNodesFinder","effectedModels","resetSingleAxis","filterSingleAxis","percentRange","valueRange","AXIS_DIMS","COORDS","coordType","createNameEach","capitalNames","capitalAttrs","nameObj","capital","forEachNode","forEachEdgeType","edgeIdGetter","sourceNode","existsLink","edgeType","absorb","processSingleNode","isNodeAbsorded","isLinked","hasLink","edgeId","ATTR","newSnapshot","giveStore","snapshot","dataZoomInfo","theDataZoomId","theCoordId","dataZoomInfos","cleanStore","createController","controllerParams","mergeControllerParams","controlType","newRecord","onPan","onZoom","wrapAndDispatch","getRange","typePriority","oneType","Component","registerSubTypeDefaulter","makeAction","geoModel","regions","layoutUtil","graphicOption","elements","GraphicModel","parentId","_elOptionsToUpdate","newList","existList","flattenedList","_flatten","mappingResult","mappingToExists","makeIdAndName","elOptionsToUpdate","resultItem","newElOption","setKeyInfoToNewElOption","mergeNewElOptionToExist","setLayoutInfoToExist","$action","optionList","parentOption","useElOptionsToUpdate","targetElParent","elMap","__ecGraphicId","removeEl","existEl","existElParent","removeKey","getCleanedElOption","LOCATION_PARAMS","isSetLoc","obj","isSet","existElOption","exist","keyInfo","newElParentOption","newElOptCopy","mergeLayoutParam","ignoreSize","copyLayoutParams","existItem","hv","_elMap","_lastGraphicModel","graphicModel","_clear","_updateElements","_relocate","rootGroup","textBaseline","elOptionCleaned","__ecGraphicWidth","__ecGraphicHeight","elOptions","parentEl","containerInfo","boundingMode","bounding","Eventful","interactionMutex","mathPow","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","s","CURSOR_MAP","ne","nw","se","DEFAULT_BRUSH_OPT","baseUID","_zr","_brushType","_brushOption","_panels","_track","_covers","_creatingCover","_creatingPanel","_enableGlobalPan","_uid","_handlers","mouseHandlers","eventName","doEnableBrush","take","doDisableBrush","release","createCover","cover","coverRenderers","__brushOption","updateZ","endCreating","creatingCover","coverRenderer","getCoverRenderer","updateCoverShape","updateCoverAfterCreation","getPanelByPoint","localCursorPoint","panel","panels","pn","getPanelByCover","clearCovers","covers","originalLength","shouldShowCover","track","getTrackEnds","createBaseRectCover","doDrift","edgeNames","makeStyle","updateBaseRect","localRange","xa","ya","x2a","y2a","widtha","heighta","updateRectShape","mainEl","globalDir","getGlobalDirection","h","pointsToRect","clipByPanel","formatRectRange","localDirection","inverseMap","driftRect","toRectRange","fromRectRange","rectRange","localDelta","toLocalDelta","namePart","ind","driftPolygon","localD","localZero","xmin","ymin","xmax","ymax","resetCursor","currPanel","setCursorStyle","preventDefault","rawE","mainShapeContain","updateCoverByMouse","eventParams","thisBrushOption","determineBrushType","coverBrushOption","getCreatingRange","defaultBrushType","panelOpts","eachCover","brushOptionList","tmpIdPrefix","oldCovers","newCovers","oldGetKey","addOrUpdate","newBrushOption","unmount","mousedown","handleDragEnd","mousemove","mouseup","getLineRenderer","localTrack","COORD_CONVERTS","INCLUDE_FINDER_MAIN_TYPES","targetInfoList","_targetInfoList","foundCpts","parseFinder","targetInfoBuilders","builder","include","proto","formatMinMax","includeMainTypes","matchOutputRanges","coordRange","coordRanges","coordConvert","__rangeOffset","diffProcessor","xyMinMax","findTargetInfo","coordSyses","rangeOffset","getScales","getDefaultBrushType","getPanelRect","areaPanelId","targetInfoMatchers","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","cartesians","getCartesians","panelRectBuilder","xAxisDeclared","yAxisDeclared","geoModels","axisConvert","to","rangeOrCoordRange","xminymin","xmaxymax","axisNameIndex","toLocalCoord","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","getSize","sizeOrigin","getFixedItemStyle","updateMapSelectHandler","mapOrGeoModel","fromView","_mouseDownFlag","__regions","action","updateMapSelected","otherRegionEl","updateGroup","_updateGroup","isGeo","itemStyleAccessPath","hoverItemStyleAccessPath","labelAccessPath","hoverLabelAccessPath","regionGroup","compoundPath","CompoundPath","paths","dataIdx","regionModel","geometries","geometry","exterior","interiors","isDataNaN","groupRegions","hoverSilentOnTouch","makeActionBase","getViewRectAfterRoam","pointerChecker","_opt","mousedownHandler","mousemoveHandler","mouseupHandler","mousewheelHandler","mousewheel","pinchHandler","pinch","isDragging","isPinching","_pinching","notLeftMouse","_x","_y","checkKeyBinding","gestureEvent","isTaken","wheelDelta","zoomDelta","pinchScale","pinchX","pinchY","zoomX","zoomY","roamController","setting","normalizeRect","localPoints","clipPointsByRect","specifiedXYIndex","brushWidth","targetModel","IRRELEVANT_EXCLUDES","targetCoordSysModel","getComponentByElement","topTarget","resourceKey","userKey","getStore","uKey","layoutBox","boxLayoutParams","viewportSize","makeBackground","newZoom","zoomScale","targetList","_targetList","_selectTargetMap","reduce","targetMap","select","unSelect","toggleSelected","restrict","extentSpan","originalDistSign","getSpanSign","extentMinSpan","realExtent","currDistSign","legendFilter","LegendModel","_updateData","legendData","hasSelected","availableNames","getSeries","_availableNames","borderRadius","itemGap","inactiveColor","_listComponent","newlineDisabled","_contentGroup","_backgroundEl","getContentGroup","legendModel","resetInner","itemAlign","renderInner","mainRect","layoutInner","contentGroup","legendDrawnMap","selectMode","getSeriesByName","legendSymbolType","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","eachRawSeries","newline","itemIcon","tooltipModel","legendGlobalTooltipModel","hitRect","legendIndex","__legendDataIndex","contentRect","dataName","getDisplayList","useHoverLayer","ScrollableLegendModel","setScrollDataIndex","scrollDataIndex","pageButtonItemGap","pageButtonGap","pageButtonPosition","pageFormatter","pageIcons","pageIconColor","pageIconInactiveColor","pageIconSize","pageTextStyle","extraOpt","inputPositionParams","mergeAndNormalizeLayoutParams","raw","LegendView","ScrollableLegendView","_currentIndex","_controllerGroup","_showController","__rectSize","me","controllerGroup","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","_pageGo","orientIdx","hw","yx","controllerRect","showController","contentPos","containerPos","controllerPos","pageInfo","_getPageInfo","pageIndex","contentPosition","_updatePageInfoView","legendId","canJump","pageText","total","pageCount","pagePrevDataIndex","pageNextDataIndex","targetItemGroup","currDataIndex","containerRectSize","itemRect","itemLoc","startIdx","winRect","getItemRect","startItem","startRect","legendSelectActionHandler","methodName","selectedMap","isToggleSelect","isItemSelected","filterSeries","markArea","markLine","markPoint","MarkerModel","colorUtil","markerHelper","MarkerView","markAreaTransform","maModel","lt","dataTransform","rb","ltCoord","rbCoord","isInifinity","ifMarkLineHasOnlyDim","fromCoord","toCoord","otherDimIndex","markAreaFilter","getSingleMarkerEndPoint","xPx","yPx","dimPermutations","createList","coordDimsInfos","areaData","optData","markAreaModel","renderSeries","areaGroupMap","markerGroupMap","polygonGroup","__keep","__data","dataModel","markLineTransform","mlModel","mlType","valueDataDim","numCalculate","valueIndex","mlFrom","mlTo","markLineFilter","updateSingleMarkerEndLayout","isFrom","markLineModel","mlData","fromData","__from","toData","__to","lineDrawMap","updateDataVisualAndLayout","lineColor","updateMarkerLayout","mpData","markPointModel","mpModel","symbolDrawMap","fillLabel","createdBySelf","hostSeries","__hostSeries","newOpt","modelPropName","markerOpt","markerModel","dataFormatMixin","markerModelKey","hasXOrY","parseFloat","hasXAndY","getPrecision","valueAxisDim","markerTypeCalculatorWithExtent","otherDataDim","targetDataDim","otherCoordIndex","targetCoordIndex","coordArr","markerTypeCalculator","average","baseDataDim","dataDimToCoordDim","parallelPreprocessor","CLICK_THRESHOLD","handlers","_throttledDispatchExpand","_dispatchExpand","checkTrigger","_mouseDownPoint","mouseDownPoint","getSlidedAxisExpandWindow","behavior","axisExpandWindow","debounceNextCall","barPolar","radarModel","_buildAxes","_buildSplitLineAndArea","axisBuilders","indicatorAxis","showSplitLine","showSplitArea","splitLineColors","splitAreaColors","ticksRadius","getColorIndex","Ring","realSplitNumber","axesTicksPoints","prevPoints","areaOrLine","areaOrLineColorList","TimelineModel","SliderTimelineModel","checkpointStyle","controlStyle","showPlayBtn","showPrevBtn","showNextBtn","itemSize","playIcon","stopIcon","nextIcon","prevIcon","TimelineView","TimelineAxis","_axis","_viewRect","_timer","_currentPointer","_labelGroup","timelineModel","mainGroup","_createGroup","labelGroup","_createAxis","_renderAxisLabel","_position","_doPlayStop","_clearTimer","labelPosOpt","playPosition","prevBtnPosition","nextBtnPosition","labelAlignMap","labelBaselineMap","rotationMap","mainLength","controlModel","showControl","controlSize","controlGap","sizePlusGap","controlPosition","xLeft","xRight","labelAlign","labelBaseline","rotateOriginX","rotateOriginY","viewBound","getBound","mainBound","labelBound","mainPosition","labelsPosition","mainBoundIdx","toBound","setOrigin","targetGroup","dimIdx","boundIdx","createScaleByModel","setExtent","_customizeScale","niceTicks","getTicksLabels","newGroup","_renderAxisLine","_renderAxisTick","hoverStyleModel","symbolOpt","_changeTimeline","giveSymbol","tick","_renderControl","playState","getPlayState","makeBtn","iconPath","willRotate","rectHover","btn","makeIcon","_handlePlayClick","_renderCurrentPointer","currentIndex","getCurrentIndex","onCreate","_handlePointerDrag","_handlePointerDragend","pointerMoveTo","onUpdate","nextState","_pointerChangeTimeline","mousePos","_toAxisCoord","targetDataIndex","_findNearestTick","handleFrame","axisCoord","nextIndex","objPath","noAnimation","dragging","Axis","coordExtent","_autoLabelInterval","getAxisLabelInterval","ComponentModel","autoPlay","rewind","playInterval","_names","_initData","setCurrentIndex","isIndexMax","setPlayState","dataArr","idxArr","newItem","dimType","timelineOpt","timeline","compatibleEC2","ec2Types","transferItem","has","itemStyleEmphasis","labelNormal","excludeLabelAttr","resetOption","subtext","subtarget","subtextStyle","subtextStyleModel","disableBox","subText","subTextEl","sublink","groupRect","layoutOption","alignStyle","featureManager","ToolboxModel","featureOpt","featureName","Feature","showTitle","iconStyle","listComponentHelper","toolboxModel","featureOpts","features","_features","featureNames","_featureNames","processFeature","titleText","__title","makeFont","needPutOnTop","topOffset","oldName","featureModel","isUserFeatureName","unusable","createIconPaths","setIconStatus","iconName","iconPaths","iconStatus","iconStyleModel","icons","getIcons","titles","iconStr","lang","brushLang","Brush","_brushMode","keep","isBrushed","availableIcons","dataViewLang","dataView","BLOCK_SPLITER","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","other","assembleSeriesWithCategoryAxis","tables","headers","columns","items","assembleOtherSeries","vals","argLen","getContentFromModel","str","trim","isTSVFormat","block","firstLine","itemSplitRegex","RegExp","parseTSVContents","tsv","tsvLines","header","parseListContents","hasName","parseContents","blockMetaList","blocks","blockMeta","axisKey","DataView","_dom","tryMergeDataOption","newVal","original","readOnly","optionToContent","contentToOption","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","container","getDom","removeChild","document","createElement","cssText","innerHTML","viewMain","textarea","htmlOrDom","getOption","isDom","appendChild","buttonContainer","buttonStyle","closeButton","refreshButton","close","addEventListener","Error","keyCode","which","selectionStart","selectionEnd","substring","clientHeight","newSeriesOptList","history","dataZoomLang","dataZoom","DATA_ZOOM_ID_BASE","DataZoom","_isZoomActive","back","updateZoomBtnStatus","updateBackBtnStatus","nextActive","dataZoomSelectActive","retrieveAxisSetting","zoomActive","setBatch","findDataZoom","found","dzModel","dataZoomOpts","toolboxOpt","dataZoomOpt","addForAxis","axisIndicesName","givenAxisIndices","forEachComponent","axisOpt","$fromToolbox","magicTypeLang","magicType","MagicType","tiled","seriesOptGenreator","radioTypes","generateNewSeriesTypes","newSeriesOpt","radio","currentType","restoreLang","Restore","saveAsImageLang","saveAsImage","SaveAsImage","excludeComponents","pixelRatio","$a","download","url","getConnectedDataURL","href","MouseEvent","browser","ie","navigator","msSaveOrOpenBlob","bstr","atob","u8arr","Uint8Array","charCodeAt","blob","Blob","tab","write","evt","bubbles","cancelable","dispatchEvent","eventUtil","toCamelCase","vendors","gCssText","assembleTransition","transitionCurve","transitionText","vendorPrefix","assembleFont","assembleCssText","transitionDuration","toHex","borderName","camelCase","TooltipContent","_container","_show","_hideTimeout","onmouseenter","_enterable","_inContent","normalizeEvent","dispatch","onmouseleave","hideLater","_hideDelay","stl","currentStyle","defaultView","getComputedStyle","domStyle","display","setContent","setEnterable","enterable","clientWidth","viewportRootOffset","getViewportRootOffset","offsetLeft","offsetTop","showContent","alwaysShowContent","displayMode","confine","showDelay","hideDelay","extraCssText","animationEasingUpdate","axisPointerViewHelper","proxyRect","tooltipContent","_tooltipContent","_tooltipModel","_ecModel","_lastDataByCoordSys","_alwaysShowContent","_initGlobalListener","_keepShow","_tryShow","_hide","_lastX","_lastY","_refreshUpdateTimeout","manuallyShowTip","_ticket","_manuallyAxisShowTip","pointInfo","findHover","manuallyHideTip","buildTooltipModel","_showAxisTooltip","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","_showTimout","singleDefaultHTML","singleParamsList","singleTooltipModel","itemCoordSys","axisValue","seriesDefaultHTML","valueLabel","axisValueLabel","positionExpr","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","tooltipTrigger","defaultHtml","asyncTicket","subTooltipModel","formatTpl","cbTicket","contentSize","viewSize","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","newIdxItem","modelCascade","resultModel","gapH","gapV","getOuterSize","parseInt","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","domWidth","domHeight","rectWidth","rectHeight","VisualMapModel","DEFAULT_BAR_BOUND","ContinuousModel","calculable","hoverLink","hoverLinkDataSize","hoverLinkOnHandle","resetExtent","resetVisual","_resetRange","resetItemSize","auto","completeVisualOption","stateList","setSelected","getSelected","findTargetDataIndices","getDataDimension","getVisualMeta","getColorVisual","oVals","getColorStopValues","iVals","setStop","valueState","iIdx","oIdx","iLen","oLen","first","stopsLen","stopValues","VisualMapView","HOVER_LINK_SIZE","HOVER_LINK_OUT","ContinuousView","_shapes","_dataInterval","_useHandle","_hoverLinkDataIndices","_hovering","doRender","_renderBar","dataRangeText","_renderEndsText","_enableHoverLinkToSeries","_enableHoverLinkFromSeries","positionGroup","endsIndex","textGap","_applyTransform","shapes","getItemAlign","_createBarGroup","createPolygon","_dragHandle","textSize","handleThumbs","handleLabelPoints","_createHandle","_createIndicator","onDrift","onDragEnd","handleThumb","createHandlePoints","handleLabel","handleLabelPoint","indicatorLabel","indicatorLabelPoint","visualMapId","_clearHoverLinkToSeries","useHoverLinkOnHandle","_doHoverLinkToSeries","forSketch","outOfRangeHandleEnds","inRangeHandleEnds","visualInRange","_createBarVisual","visualOutOfRange","barColor","barPoints","_updateHandle","forceState","convertOpacityToAlpha","_makeColorGradient","symbolSizes","getControllerVisual","_createBarPoints","handlesColor","sampleNumber","currValue","formatValueText","_showIndicator","cursorValue","textValue","rangeSymbol","halfHoverLinkSize","createIndicatorPoints","_hoverLinkFromSeriesMouseOver","_hideIndicator","_clearHoverLinkFromSeries","cursorPos","hoverOnBar","getHalfHoverLinkSize","hoverRange","oldBatch","newBatch","resultBatches","compressBatches","_dispatchHighDown","convertDataIndex","isTargetSeries","global","isRange","extentMax","visualDefault","reformIntervals","PiecewiseModel","minOpen","maxOpen","itemSymbol","_pieceList","mode","_mode","_determineMode","resetMethods","_resetSelected","visualTypesInPieces","visualTypes","listVisualTypes","pieces","exists","getSelectedMapKey","hasSel","findPieceIndex","pieceIndex","pIdx","getRepresentValue","representValue","pieceInterval","curr","splitStep","cate","normalizeReverse","pieceListItem","closeList","infinityList","useMinMax","lg","retrieveVisuals","edgeSymbols","PiecewiseVisualMapView","_getItemAlign","viewData","_getViewData","endsText","_onItemClick","_enableHoverLink","indexInModelPieceList","_createItemSymbol","visualState","viewPieceList","onHoverLink","modelOption","shapeParam","newKey","eachVisual","DEFAULT_COLOR","replacableOptionKeys","dataBound","contentColor","controllerVisuals","supplementVisualOption","getTargetSeriesIndices","optionSeriesIndex","isMinMax","optDim","completeSingle","defa","completeInactive","stateExist","stateAbsent","optExist","optAbsent","visualData","isValidType","completeController","symbolExists","symbolSizeExists","autoPositionValues","targetValue","visualCluster","visualObj","defaultColor","getter","setter","mappings","prepareVisualTypes","visualMapping","__alphaForOpacity","dependsOn","realIndex","paramsSet","reals","fakeValue","layoutInput","rParam","splitList","processSingleVisualMap","prepareVisualMeta","resultVisual","COMPONENT","dev","fixExtentWithBands","nTick","normalizedExtent","_extent","_labelInterval","clamp","alignWithLabel","bands","getBands","getRotate","Transformable","TransformDummy","_roamTransform","_viewTransform","_center","_zoom","doConvert","_rect","transformTo","viewTransform","calculateTransform","_updateTransform","centerCoord","_updateCenterAndZoom","getDefaultCenter","rawRect","viewTransformMatrix","defaultCenter","invTransform","invert","convertToPixel","convertFromPixel","nameRotate","nameTruncate","nameTextStyle","nameGap","splitArea","axisDefault","timeAxis","logAxis","logBase","OrdinalScale","IntervalScale","Scale","getScaleExtent","scaleType","fixMin","fixMax","originalExtent","setBlank","eqNaN","getNeedCrossZero","niceScaleExtent","niceExtent","minInterval","maxInterval","setInterval","getClass","ifAxisCrossZero","tickCoords","axisRotate","textSpaceTakenRect","autoLabelInterval","accumulatedLabelInterval","union","tpl","rangeStart","rangeEnd","resetRange","AXIS_TYPES","BaseAxisModelClass","axisTypeDefaulter","extraDefaultOption","themeModel","getTheme","getDefaultOption","PROXIMATE_ONE_DAY","Calendar","_rangeInfo","_sw","_sh","_firstDayOfWeek","parseDate","getFullYear","getDate","getDay","getTime","Date","setDate","_lineWidth","_getRangeInfo","_initRangeOption","weeks","whNames","cellNumbers","cellSizeSpecified","whGlobal","calendarRect","dayInfo","week","nthWeek","pointToDate","tr","br","bl","nthX","nthY","_getDateByWeeksAndDay","test","reversed","allDay","startDateNum","endDateNum","rangeInfo","nthDay","calendarList","calendarSeries","sizeCalculable","CalendarModel","hvIdx","cellWidth","cellHeight","dayCount","Axis2D","axisModelCreator","axisModelCommonMixin","AxisModel","restoreData","gridIndex","gridId","getAxisType","extraOption","dimAxisMapper","_axes","Cartesian","_dimList","toLowerCase","addAxis","_dataCoordConvert","input","dimList","Cartesian2D","axisX","axisY","isAxisUsedInTheGrid","rotateTextRect","rotateRadians","boundingBox","plain","beforeWidth","beforeHeight","afterWidth","afterHeight","rotatedRect","getLabelUnionRect","axisLabelModel","labelCount","unrotatedSingleRect","singleRect","Grid","_coordsMap","_coordsList","_axesMap","_axesList","_initCartesian","gridProto","fixAxisOnZero","axesMap","axes","canNotOnZeroToAxis","updateAxisTransfrom","coordBase","axisExtentSum","_updateScale","resize","ignoreContainLabel","axesList","adjustAxes","labelUnionRect","axesMapOnDim","coordList","_findConvertTarget","getReferringComponents","coordsList","axisPositionUsed","axesCount","createAxisCreator","unionExtent","unionExtentFromData","isCartesian2D","findAxesModels","axesTypes","grids","containLabel","dataToCoordSize","dataSize","halfSize","parseGeoJson","fixNanhai","fixTextCoord","fixGeoCoord","fixDiaoyuIsland","geoFixFuncs","Geo","geoJson","specialAreas","_nameCoordMap","loadGeoJson","containCoord","message","regionsMap","addGeoCoord","specialArea","_regionsMap","fixFunc","getRegionByCoord","geoCoord","getGeoCoord","regionRect","selectableMixin","GeoModel","_optionModelMap","optionModelMap","regionOpt","Region","properties","MAX_NUMBER","min2","max2","loopGeo","geoCoordMap","coordsOffsetMap","coordFix","resizeGeo","leftTop","rightBottom","boxLayoutOption","useCenterAndSize","setGeoCoords","geoList","mapData","getMap","mapModelGroupBySeries","nameMapList","singleMapSeries","originRegionArr","regionsArr","decode","json","UTF8Encoding","encodeScale","UTF8Scale","coordinates","encodeOffsets","c","coordinate","decodePolygon","c2","featureObj","getActiveState","ParallelAxis","mathFloor","mathCeil","Parallel","_axesLayout","_init","layoutAxisWithoutExpand","layoutLength","axisCount","layoutAxisWithExpand","axisExpandWidth","axisCollapseWidth","winInnerIndices","axisExpandWindow0Pos","_updateAxesFromSeries","_makeLayoutInfo","axisBase","layoutBase","pixelDimIndex","pAxis","pLayout","axisLength","_layoutAxes","winSize","layoutExtent","axisExpandCount","axisExpandable","axisExpandCenter","positionTable","rotationTable","axisCoordToPoint","hasActiveSet","pointCoord","triggerArea","useJump","axisExpandRate","axisExpandDebounce","axisExpandSlideTriggerArea","axisExpandTriggerOn","parallelAxisDefault","_initDimensions","parallelAxis","coordSysList","createParallelIfNeeded","mergeAxisOptionFromParallel","parallel","hasParallelSeries","axisOption","parallelOption","AngleAxis","dataToAngle","angleToData","PolarAxisModel","polarId","polarAxisDefaultExtendedOption","RadiusAxis","Polar","_radiusAxis","_angleAxis","dataToRadius","radiusToData","maxAngle","foundAxisModel","_axisHelper","resizePolar","updatePolarScale","setAxis","polarCreator","polarList","IndicatorAxis","Radar","_indicatorAxes","getIndicatorModels","indicatorModel","indicatorIndex","closestAxis","minRadianDiff","closestAxisIdx","coodToData","radarSeries","increaseInterval","exp10","log","LN10","rawExtent","fixedMin","fixedMax","nicedSplitNumber","halfSplitNumber","radarList","valueAxisDefault","defaultsShow","RadarModel","showName","nameFormatter","indicatorModels","indicatorOpt","iNameTextStyle","indName","SingleAxis","Single","_adjustAxis","_updateAxisTransform","extentSum","singles","defaultKeyGetter","oldArr","newArr","oldKeyGetter","newKeyGetter","_old","_new","_oldKeyGetter","_newKeyGetter","initIndexMap","keyArr","keyGetterName","existence","func","_add","_update","_remove","oldDataIndexMap","newDataIndexMap","oldDataKeyArr","newDataKeyArr","generateNodeKey","_directed","_nodesMap","_edgesMap","graphProto","Node","hostGraph","Edge","isDirected","nodesMap","rawIdx","edgesMap","getEdge","breadthFirstTraverse","startNode","__visited","queue","currentNode","otherNode","degree","inDegree","outDegree","createGraphDataProxyMixin","hostName","ignoreParent","UNDEFINED","globalObj","dataCtors","Float64Array","Int32Array","TRANSFERABLE_PROPERTIES","transferProperties","__wrappedMethods","DefaultDataProvider","dataArray","_array","pure","getItem","dimensionInfos","dimensionName","dimensionInfo","_dimensionInfos","_nameList","_idList","_optionModels","_visual","_itemVisuals","_itemLayouts","_graphicEls","_rawData","listProto","normalizeDimensions","cloneListForMapAndSample","excludeDimensions","allDimensions","originalStorage","dimStore","isDataArray","nameDimIdx","dimensionInfoMap","idList","nameRepeatCount","itemName","DataCtor","dimStorage","stackedValue","dimData","dimExtent","indexOfRawIndex","rawDataIndex","mid","maxDistance","nearestIndices","dimSize","tmpRetValue","retValue","downSample","rate","sampleValue","sampleIndex","targetStorage","originalIndices","frameValues","frameIndices","frameSize","otherList","otherIdList","prefix","clearItemLayouts","itemVisual","clearAllVisual","setItemDataAndSeriesIndex","dimensionInfoList","injectFunction","originalMethod","TRANSFERABLE_METHODS","CHANGABLE_METHODS","TreeNode","levelOptions","leavesOption","_nodes","leavesModel","addChild","suppressVisitSub","updateDepthAndHeight","includeSelf","ancestors","getLevelModel","getLeavesModel","getNodeByName","dataRoot","treeOptions","listData","dimMax","buildHierarchy","OTHER_DIMS","sysDims","dataDimNameMap","coordDimNameMap","value0","sysDimItem","sysDimItemDimsDef","dimDefItem","userDimName","tooltipName","resultDimIdx","applyDim","availDimIdx","sysDimIndex","sysDimItemOtherDims","genName","fromZero","DATAS","MAIN_DATA","main","linkAll","transferInjection","cloneShallowInjection","changeInjection","assert","isMainData","linkSingle","getLinkedData","zrender","colorTool","timsort","GlobalModel","OptionManager","_throttle","seriesColor","loadingDefault","parseClassType","version","PRIORITY_PROCESSOR_FILTER","PRIORITY_PROCESSOR_STATISTIC","PRIORITY_VISUAL_LAYOUT","PRIORITY_VISUAL_GLOBAL","PRIORITY_VISUAL_CHART","PRIORITY_VISUAL_COMPONENT","PRIORITY_VISUAL_BRUSH","FILTER","LAYOUT","GLOBAL","CHART","IN_MAIN_PROCESS","HAS_GRADIENT_OR_PATTERN_BG","OPTION_UPDATED","ACTION_REG","createRegisterEventWithLowercaseName","MessageCenter","ECharts","dom","theme","themeStorage","defaultRenderer","renderer","devicePixelRatio","_throttledZrFlush","prioritySortFunc","prio","_theme","_chartsViews","_chartsMap","_componentsViews","_componentsMap","_coordSysMgr","createExtensionAPI","_messageCenter","_pendingActions","visualFuncs","dataProcessorFuncs","_onframe","setAsPrimitive","one","echartsProto","doConvertPixel","updateMethods","prepareAndUpdate","flushPendingActions","triggerUpdatedEvent","setOption","notMerge","lazyUpdate","optionManager","optionPreprocessorFuncs","setTheme","console","dpr","getRenderedCanvas","getSvgDataUrl","svgSupported","pathToSvg","getDataURL","excludesComponentViews","__viewId","toDataURL","groupId","connectedGroups","canvasList","instances","chart","getBoundingClientRect","targetCanvas","refreshImmediately","containPixel","defaultMainType","getViewOfComponentModel","getViewOfSeriesModel","coordSysMgr","processData","stackSeriesData","doVisualEncoding","isSingleCanvas","clearColor","colorArr","stringify","postUpdateFuncs","invokeUpdateMethod","doLayout","prepareView","updateDirectly","ecIns","callView","__alive","__model","doDispatchAction","actionWrap","actions","cptType","payloads","batched","eventObj","eventObjBatch","isHighDown","pendingActions","updateProgressiveAndBlend","updateHoverLayerStatus","isComponent","viewMap","viewId","classType","__id","__ecComponentInfo","stackedDataMap","previousStack","isLayout","excludesLayout","clearColorPalette","componentView","chartView","optionChanged","_loadingFX","showLoading","cfg","hideLoading","loadingEffects","makeActionFromEvent","eventActionMap","weChat","MOUSE_EVENT_NAMES","elCount","isGroup","frameDrawNum","needProgressive","blendMode","ecInstance","modelInfo","eveName","actionType","_disposed","idBase","groupIdBase","DOM_ATTRIBUTE_KEY","mapDataStores","enableConnect","STATUS_PENDING","STATUS_UPDATING","STATUS_UPDATED","STATUS_KEY","updateConnectedChartsStatus","charts","otherChart","otherCharts","existInstance","getInstanceByDom","setAttribute","connect","disConnect","disconnect","getAttribute","getInstanceById","registerTheme","preprocessorFunc","priority","processorFunc","registerPostUpdate","postUpdateFunc","getCoordinateSystemDimensions","coordSysCreator","layoutFunc","visualFunc","registerLoading","loadingFx","setCanvasCreator","$override","registerMap","JSON","Function","dataTool","___ec_export","number","format","ecHelper","_List","_Model","_Axis","_env","_parseGeoJson","ecUtil","util","_completeDimensions","createScale","mixinAxisModelCommonMethods","STACK_PREFIX","getSeriesStackId","getAxisKey","stackId","widthAndOffsets","doCalBarWidthAndOffset","calBarWidthAndOffset","barSeries","seriesInfoList","barCategoryGap","columnsMap","seriesInfo","columnsOnAxis","remainedWidth","autoWidthCount","categoryGap","stacks","barGapPercent","autoWidth","column","lastColumn","widthSum","barWidthAndOffset","getSeriesByType","lastStackCoords","lastStackCoordsOrigin","columnLayoutInfo","columnOffset","columnWidth","valueAxisStart","lastCoord","lastCoordOrigin","barLayoutPolar","calRadialBar","valueMax","valueMin","stackCoord","maskColor","mask","Arc","textDistance","animateShape","componentUtil","boxLayoutMixin","arrayPush","$constructor","getUID","newCptOption","hasOwn","optList","Class","superClass","getDependencies","deps","getClassesByMainType","enableClassManagement","registerWhenExtend","enableSubTypeDefaulter","enableTopologicalTravel","globalDefault","colorPaletteMinin","OPTION_INNER_KEY","_optionManager","baseOption","mountOption","initBase","timelineOption","getTimelineOption","mediaOptions","getMediaOption","mediaOption","componentsMap","newCptTypes","visitComponent","newCptOptionList","mapResult","determineSubType","getComponentsByTypes","ComponentModelClass","_seriesIndices","createSeriesIndices","componentOption","hasClass","topologicalTravel","getAllClassMainTypes","isIdInner","cpts","isIdArray","cpt","isNameArray","filterBySubType","queryCond","getQueryCond","doFilter","q","indexAttr","idAttr","nameAttr","components","queryResult","oneSeries","assertSeriesInitialized","rawSeriesIndex","filteredSeries","componentTypes","mergeTheme","themeItem","types","existComponent","lineStyleMixin","areaStyleMixin","textStyleMixin","itemStyleMixin","doGet","pathArr","getParent","getParentMethod","thisParentModel","setReadOnly","QUERY_REG","_timelineOptions","_mediaList","_mediaDefault","_currentMediaIndices","_optionBackup","_newBaseOption","parseRawOption","mediaDefault","timelineOptions","mediaList","media","singleMedia","preProcess","applyMediaQuery","realMap","aspectratio","applicatable","matched","match","operator","realAttr","compare","real","expect","indicesEquals","indices1","indices2","oldOption","newCptOpt","oldCptOpt","oldOptionBackup","newParsedOption","isRecreate","optionBackup","formatTime","getTooltipMarker","_clazz","colorPaletteMixin","themeSubType","newSeriesOption","formatArrayValue","vertially","dimItem","tooltipDims","setEachItem","valStr","colorEl","animationEnabled","scope","platform","progressiveThreshold","useUTC","includes","colorIdx","colorNameMap","colorPalette","lineType","dotSize","dashSize","PATH_COLOR","isEmphasis","compatStyle","overwrite","compatLayoutProperties","LAYOUT_PROPERTIES","COMPATITABLE_COMPONENTS","COMPATITABLE_SERIES","isTheme","clockWise","pointerColor","dataRange","componentName","POSSIBLE_STYLES","compatItemStyle","itemStyleOpt","styleName","normalItemStyleOpt","emphasisItemStyleOpt","compatTextStyle","labelOptSingle","TEXT_STYLE_OPTIONS","compatLabelTextStyle","labelOpt","processSeries","toArr","toObj","parallelOpt","calendarOpt","radarOpt","geoOpt","regionObj","samplers","nearest","indexSampler","sampler","roundNumber","_interval","_intervalPrecision","thisExtent","_niceExtent","getIntervalPrecision","intervalScaleGetTicks","getPrecisionSafe","intervalScaleNiceTicks","intervalPrecision","niceTickExtent","scaleProto","intervalScaleProto","roundingErrorFix","mathLog","LogScale","_originalScale","originalScale","powVal","__fixMin","fixRoundingError","__fixMax","approxTickNum","quantity","err","originalVal","rank","_setting","getSetting","_isBlank","scaleHelper","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","bisect","lo","hi","TimeScale","stepLvl","_stepLvl","approxInterval","scaleLevelsLen","scaleLevels","level","yearSpan","yearStep","nice","timezoneOffset","getTimezoneOffset","fixExtent","safeLimit","doneCallback","elExistsMap","keysFunction","sortKeysFunction","keyFunction","mapObject","valuesByKey","keyValue","entriesMap","sortKeyFunction","TYPE_DELIMITER","IS_CONTAINER","MEMBER_PRIFIX","host","checkClassType","RootClass","mandatoryMethods","ExtendedClass","entity","makeContainer","registerClass","componentMainType","throwWhenNotFound","hasSubTypes","originalExtend","DELIMITER","subTypeDefaulters","defaulter","componentTypeMain","dependencyGetter","makeDepndencyGraph","fullNameList","noEntryList","createDependencyGraphItem","originalDeps","availableDeps","getAvailableDependencies","entryCount","dependentName","predecessor","thatItem","successor","dep","targetNameList","targetNameSet","currComponentType","currVertex","isInTargetNameSet","removeEdgeAndAdd","removeEdge","succComponentType","upperCaseFirst","group1","String","TPL_VAR_ALIAS","wrapVar","varName","seriesIdx","paramsList","seriesLen","alias","param","s2d","isUTC","utc","substr","pathTool","RadialGradient","EMPTY_OBJ","extendPath","extendFromString","createFromString","centerGraphic","resizePath","makeImage","imageUrl","onload","pathRect","originWidth","originHeight","positiveOrNegative","doubledPosition","hasFillOrStroke","fillOrStroke","liftColor","lift","cacheElementStl","__hoverStlDirty","__hoverStl","__normalStl","doSingleEnterHover","__isHover","__zr","addHover","insideRollbackOpt","rollbackInsideStyle","applyInsideStyle","insideOriginalTextPosition","doSingleLeaveHover","normalStl","removeHover","doEnterHover","doLeaveHover","setElementHoverStl","onElementMouseOver","__hoverSilentOnTouch","zrByTouch","__isEmphasis","onElementMouseOut","enterEmphasis","leaveEmphasis","normalModel","emphasisModel","normalSpecified","emphasisSpecified","showNormal","showEmphasis","baseText","normalStyleText","emphasisStyleText","specifiedTextStyle","setTextStyleCommon","setText","textOffset","richResult","globalTextStyle","richItemNames","getRichItemNames","richTextStyle","setTokenTextStyle","rich","richItemNameMap","isBlock","getAutoColor","textBorderColor","textStrokeWidth","textBorderWidth","originalTextPosition","insideRollback","textLineHeight","textTag","textBackgroundColor","textPadding","textBorderRadius","textBoxShadowColor","textBoxShadowBlur","textBoxShadowOffsetX","textBoxShadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","gTextStyleModel","animateOrSetProps","postfix","animationDelay","mat","isArrayLike","hBase","vBase","g1","g2","elMap1","getElMap","oldEl","newProp","getAnimatableProps","g","clipRectByRect","targetRect","HV_NAMES","boxLayout","maxHeight","currentLineMaxSize","nextX","nextY","nextChild","nextChildRect","moveX","moveY","vbox","hbox","containerRect","verticalMargin","horizontalMargin","needLocalTransform","elPos","targetOption","hResult","vResult","newParams","newValueCount","merged","mergedValueCount","enoughParamNumber","hasProp","nubmerUtil","subOpts","emphasisOpt","normalOpt","subOptName","createDataFormatModel","marker","labelProp","newCptOptions","cptOption","idMap","existCpt","idNum","batchA","batchB","mapA","mapB","makeMap","mapToArray","sourceBatch","otherMap","otherDataIndices","isData","hostObj","parsedKey","queryType","queryParam","RADIAN_EPSILON","_trim","domain","subDomain","subRange","all","returnStr","toString","eIndex","dotIndex","pixelExtent","dataQuantity","sizeQuantity","acc","digits","votesPerQuota","targetSeats","seats","votes","currentSum","remainder","NEGATIVE_INFINITY","maxId","pi2","TIME_REG","exec","hour","UTC","quantityExponent","nf","exponent","littleThan","currClose","Triangle","Diamond","Pin","asin","tanX","tanY","cpLen","cpLen2","Arrow","symbolCtors","roundRect","square","diamond","pin","arrow","triangle","symbolShapeMakers","symbolBuildProxies","beforeBrush","inBundle","proxySymbol","symbolPathSetColor","innerColor","symbolStyle","symbolShape","__isEmptyBrush","keepAspect","ORIGIN_METHOD","RATE","THROTTLE_TYPE","debounce","currCall","lastCall","lastExec","timer","thisDelay","thisDebounce","debounceDelay","fnAttr","originFn","lastThrottleType","lastRate","Chart","toggleHighlight","chartProto","elSetState","childCount","componentProto","CATEGORY_DEFAULT_VISUAL_INDEX","_normalizeData","normalizers","visualHandler","visualHandlers","_doMap","normalizeVisualRange","preprocessForPiecewise","preprocessForSpecifiedCategory","normalized","makeApplyVisual","isNormalized","doMapCategory","out","returnRGBArray","fastLerp","parsedVisual","linear","piecewise","getSpecifiedVisual","doMapFixed","colorHue","makePartialColorVisualHandler","colorLightness","makeDoMap","symbolCfg","doMapToArray","hasSpecialVisual","originIndex","categoryMap","visualArr","setVisualToOption","doNotNeedPair","applyValue","sourceExtent","addVisualHandler","isPrimary","newVisual","hasVisual","type1","type2","visualType1","visualType2","findClosestWhenOutside","possibleI","pieceValue","updatePossible","newAbs","dataAll","filteredIdx","singleDataColor","Gradient","encodeColor","colorAccessPath","defaultSymbolType","itemSymbolType","itemSymbolSize","hasKeys","createMappings","__hidden","Creater","keys","visualTypesMap","eachItem","valueOrIndex","rawDataItem","guid","Animatable","Element","afterUpdate","attrKV","refresh","addSelfToZr","__clipTarget","removeSelfFromZr","addAnimator","removeAnimator","Draggable","SILENT","makeEventPacket","eveType","cancelBubble","zrX","zrY","zrDelta","EmptyProxy","handlerNames","Handler","proxy","painterRoot","_hovered","_lastTouchMoment","isHover","displayable","lastHovered","lastHoveredTarget","hovered","hoveredTarget","setCursor","dispatchToElement","mouseout","innerDom","toElement","relatedTarget","nodeType","eventArgs","eventHandler","eventPacket","eachOtherLayer","layer","exclude","hoverCheckResult","_downEl","_downPoint","_upEl","Style","Pattern","returnFalse","createDom","newDom","newDomStyle","Layer","onselectstart","domBack","ctxBack","config","initContext","__currentValues","createBackBuffer","clearAll","clearColorGradientOrPattern","haveMotionBLur","globalCompositeOperation","__canvasGradient","getGradient","getCanvasPattern","fillStyle","fillRect","requestAnimationFrame","MAX_PROGRESSIVE_LAYER_NUMBER","parseInt10","isLayerValid","__builtin__","preProcessLayer","__unusedCount","postProcessLayer","tmpRect","isDisplayableCulled","isClipPathChanged","clipPaths","prevClipPaths","doClip","setTransform","clip","restoreTransform","createRoot","domRoot","Painter","singleCanvas","nodeName","_opts","_singleCanvas","rootStyle","zlevelList","_zlevelList","layers","_layerConfig","_width","_height","mainLayer","_domRoot","_getSize","_progressiveLayers","_hoverlayer","_hoverElements","getViewportRoot","viewportRoot","paintAll","_paintList","refreshHover","_startProgessive","__hoverMir","elMirror","hoverElements","clearHover","hoverLayer","displayableSortFunc","originalEl","__clipPaths","_doPaintEl","_furtherProgressive","token","_progressiveToken","_progress","_doPaintList","_clearProgressive","_updateLayerStatus","eachBuiltinLayer","currentLayer","currentZLevel","currentProgressiveLayer","layerProgress","progressiveLayerIdx","flushProgressiveLayer","elZLevel","elFrame","__frame","renderScope","__progress","__maxProgress","__nextIdxNotProg","forcePaint","prevClipLayer","prevElClipPaths","prevEl","afterBrush","insertLayer","layersMap","prevLayer","virtual","prevDom","nextSibling","insertBefore","firstChild","eachLayer","getLayers","progressiveLayers","elCountsLastFrame","progressiveElCountsLastFrame","lastProgressiveKey","progressiveLayerCount","frameCount","elProgress","_clearLayer","layerConfig","delLayer","clearLayer","imageLayer","displayList","findAndDrawOtherLayer","smaller","larger","intermediateLayer","renderToCanvas","whIdx","cwh","plt","prb","pathToImage","shadowBlurSize","hasStroke","leftMargin","rightMargin","topMargin","bottomMargin","pathTransform","ImageShape","imgShape","shapeCompareFunc","Storage","_roots","_displayList","_displayListLen","includeIgnore","updateDisplayList","roots","_updateAndAddDisplayable","userSetClipPath","currentClipPath","parentClipPath","_children","addRoot","__storage","addChildrenToStorage","addToStorage","delRoot","delChildrenFromStorage","delFromStorage","_renderList","_event","Dispatcher","Animator","Animation","stage","onframe","_clips","_running","_time","_pausedTime","_pauseStart","_paused","addClip","clips","getClips","removeClip","deferredEvents","deferredClips","_needsRemove","fire","_startLoop","pause","resume","Clip","arraySlice","defaultGetter","defaultSetter","interpolateNumber","interpolateString","interpolateArray","arrDim","fillArr","arr0","arr1","arr0Len","arr1Len","isPreviousLarger","isArraySame","catmullRomInterpolateArray","p3","t2","t3","catmullRomInterpolate","v0","cloneValue","rgba2String","rgba","getArrayDim","keyframes","lastValue","createTrackClip","oneTrackDone","forceAnimate","_getter","_setter","useSpline","trackLen","trackMaxTime","firstVal","isValueArray","isValueColor","isValueString","kfPercents","kfValues","prevValue","isAllValueEqual","colorArray","_target","lastFramePercent","life","_delay","ondestroy","_tracks","_clipCount","_doneList","_onframeList","_clipList","tracks","isPaused","_doneCallback","doneList","lastClip","clipCount","oldOnFrame","forwardToLast","clipList","easingFuncs","_life","_initialized","onrestart","globalTime","deltaTime","_startTime","easingFunc","schedule","restart","arg","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","sinusoidalOut","sinusoidalInOut","exponentialIn","exponentialOut","exponentialInOut","circularIn","circularOut","circularInOut","elasticIn","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","debugMode","normalizeRadian","anticlockwise","_l","cubicProjectPoint","_a","_b","_s","PathProxy","cubic","quadratic","windingLine","CMD","EPSILON","isAroundEqual","extrema","swapExtrema","windingCubic","nRoots","cubicRootAt","y0_","y1_","nExtrema","x_","cubicAt","cubicExtrema","windingQuadratic","quadraticRootAt","quadraticExtremum","y_","windingArc","containPath","isStroke","xi","yi","L","C","Q","A","rx","ry","theta","dTheta","R","Z","_curve","quadraticProjectPoint","imageHelper","textWidthCache","textWidthCacheCounter","TEXT_CACHE_MAX","STYLE_REG","DEFAULT_FONT","textLines","measureText","getRichTextRect","getPlainTextRect","contentBlock","parsePlainText","adjustTextX","adjustTextY","lineHeight","parseRichText","adjustTextPositionOnRect","halfHeight","prepareTruncateOptions","truncateSingleLine","maxIterations","cnCharWidth","ascCharWidth","ellipsisWidth","textLine","subLength","estimateLength","charCode","getLineHeight","truncOuterHeight","truncOuterWidth","matchedIndex","pushTokens","stlPadding","truncateWidth","truncateHeight","tokens","tokenStyle","tokenHeight","tokenWidth","tokenWidthNotSpecified","percentWidth","bgImg","findExistImage","isImageReady","paddingW","remianTruncWidth","isEmptyStr","strs","isLineHolder","tokensLen","_doAdd","addBefore","includeChildren","tmpMat","childRect","lb","rt","maxX","maxY","sx","ax0","ax1","ay0","ay1","bx0","bx1","by0","by1","GestureMgr","pointPair","recognize","_doTrack","_recognize","touches","trackItem","touch","clientToLocal","recognizers","gestureInfo","pinchEnd","pinchPre","pinchCenter","LinkedList","_len","linkedListProto","insert","entry","Entry","insertEntry","prev","LRU","_list","_map","_maxSize","_lastRemovedEntry","LRUProto","put","removed","leastUsedEntry","mathSqrt","hasTypedArray","Float32Array","notSaveData","_saveData","_ctx","_xi","_yi","_x0","_y0","_ux","_uy","_lineDash","_dashOffset","_dashIdx","_dashSum","setScale","addData","exceedUnit","_needsDash","_dashedLineTo","_dashedBezierTo","_dashedQuadraticTo","arcTo","toStatic","setLineDash","lineDashSum","setLineDashOffset","appendPath","appendSize","appendPathData","_expandData","_prevCmd","dash","dashSum","nDash","bezierLen","tmpLen","fromLine","fromCubic","fromQuadratic","fromArc","rebuildPath","ux","uy","psi","fs","scaleX","scaleY","isEllipse","Diff","buildValues","componentPos","componentLen","newPos","oldPos","added","clonePath","newLen","oldLen","editLength","maxEditLength","bestPath","extractCommon","execEditLength","diagonalPath","basePath","addPath","removePath","canAdd","canRemove","pushComponent","commonCount","tokenize","arrayDiff","extremity","xDim","yDim","v2Create","EPSILON_NUMERIC","THREE_SQRT","ONE_THIRD","_v0","_v1","_v2","isAroundZero","isNotAroundZero","onet","cubicDerivativeAt","B","t1","disc","K","discSqrt","Y1","Y2","T","acos","ASqrt","cubicSubdivide","p01","p12","p23","p012","p123","p0123","d1","d2","divider","os","detect","userAgent","ua","firefox","SVGRect","touchEventsSupported","pointerEventsSupported","isDomLevel2","MOUSE_EVENT_REG","calculate","defaultGetZrXY","layerX","layerY","clientX","clientY","isTouch","targetTouches","changedTouches","button","attachEvent","removeEventListener","detachEvent","stopPropagation","returnValue","idStart","ArrayCtor","m1","m2","out0","out1","out2","out3","out4","out5","aa","ac","atx","ab","ad","aty","st","ct","vx","vy","det","DEFAULT_MIN_MERGE","DEFAULT_MIN_GALLOPING","minRunLength","makeAscendingRun","runHi","reverseRun","binaryInsertionSort","pivot","gallopLeft","hint","lastOffset","maxOffset","gallopRight","TimSort","runStart","runLength","minGallop","stackSize","pushRun","_runStart","_runLength","mergeRuns","mergeAt","forceMergeRuns","start1","length1","start2","mergeLow","mergeHigh","cursor1","cursor2","dest","count1","count2","exit","_minGallop","customCursor","customDest","remaining","ts","minRun","BUILTIN_OBJECT","TYPED_ARRAY","objToString","Object","arrayProto","nativeForEach","forEach","nativeFilter","nativeSlice","nativeMap","nativeReduce","typeStr","isPrimitive","targetProp","sourceProp","isBuiltInObject","targetAndSources","overlay","baseClazz","clazzPrototype","F","memo","find","ownerDocument","primitiveKey","HashMap","HASH_MAP_PREFIX","HASH_MAP_PREFIX_LENGTH","prefixedKey","lenSquare","lengthSquare","div","dot","distanceSquare","negate","TOUCH_CLICK_DELAY","mouseHandlerNames","touchHandlerNames","pointerEventNames","pointerdown","pointerup","pointermove","pointerout","pointerHandlerNames","nm","eventNameFix","processGesture","gestureMgr","_gestureMgr","setTouchTimer","instance","_touching","_touchTimer","domHandlers","touchstart","touchmove","touchend","click","isPointerFromTouch","pointerType","initDomHandler","makeMouseHandler","HandlerDomProxy","mountHandlers","handlerDomProxyProto","_updatePathDirty","dirtyPath","__dirtyPath","getGlobalScale","createPathProxy","RectText","Displayable","rectContain","addColorStop","ZImage","src","_image","createOrUpdateImage","sWidth","sHeight","drawRectText","globalCoord","pathContain","pathProxyForDraw","hasFill","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","_fillGradient","_strokeGradient","strokeStyle","lineDashOffset","ctxLineDash","shapeCfg","needsUpdateRect","rectWithStroke","_rectWithStroke","lineScale","localPos","Sub","defaultShape","thisShape","repeat","createPattern","STYLE_COMMON_PROPS","createLinearGradient","canvasGradient","createRadialGradient","transformText","blend","prevStyle","firstDraw","otherStyle","newStyle","styleProto","textHelper","normalizeTextStyle","needDrawText","renderText","getStroke","shadowTemp","orignalBrush","modified","globalImageCache","newImageOrSrc","cachedImgObj","hostEl","cbPayload","__zrImageSrc","pendingWrap","pending","imageOnLoad","__cachedImgObj","smoothSpline","smoothBezier","controlPoints","cp2","r2","r3","r4","v2Min","v2Max","v2Scale","v2Distance","v2Add","v2Clone","v2Sub","isLoop","constraint","prevPoint","nextPoint","cps","d0","interpolate","w2","w3","roundRectHelper","VALID_TEXT_ALIGN","VALID_TEXT_VERTICAL_ALIGN","normalizeStyle","renderRichText","renderPlainText","setCtx","__textCotentBlock","boxPos","getBoxPosition","baseX","baseY","applyTextRotation","boxY","needDrawBg","needDrawBackground","boxX","drawBackground","getTextXForPadding","getFill","strokeText","fillText","drawRichText","lineTop","tokenCount","usedWidth","leftIndex","lineXLeft","lineXRight","rightIndex","placeToken","isPlainBg","onBgImageLoaded","blockHeiht","someVectorAt","isTangent","polyHelper","animatingShape","pathSplitted","_animateToShallow","objShallow","propertyCount","_dragStart","_drag","_dragEnd","draggingTarget","_draggingTarget","dropTarget","lastDropTarget","_dropTarget","arrySlice","_$handlers","_h","triggerWithContext","mIdentity","transformableProto","parentHasTransform","tmpTransform","transformCoordToGlobal","_core","zrLog","ZText","GradientManager","ClippathManager","svgPath","svgImage","svgText","getSvgProxy","checkParentAvailable","insertAfter","prevSibling","prepend","getTextSvgElement","__textSvgEl","getSvgElement","__svgEl","SVGPainter","svgRoot","gradientManager","clipPathManager","viewport","_svgRoot","_viewport","_visibleList","createMethodNotSupport","markAllUnused","visibleList","listLen","newVisibleList","svgProxy","prevSvgElement","svgElement","textSvgElement","addWithoutUpdate","markUsed","removeUnused","_getDefs","isForceCreating","defs","getElementsByTagName","_getWidth","_getHeight","viewportStyle","outerHTML","unescape","svgURI","createElementNS","arrayJoin","NONE","mathRound","round4","pathHasFill","isText","pathHasStroke","svgEl","attrXLink","setAttributeNS","bindStyle","strokeWidth","strokeScale","miterLimit","pathDataToString","dataLength","cmdStr","nData","dThetaPositive","isCircle","pathStr","svgTextDrawRectText","HTMLImageElement","dw","dh","__imageSrc","textSvgEl","getVerticalAlignForSvg","nTextLines","textAnchor","__text","__textFont","tspanList","__tspanList","tspan","createTextNode","Definable","updateDom","clipPathEl","getDefs","nextId","pathEl","cloneNode","that","_textDom","MARK_UNUSED","MARK_USED","tagNames","markLabel","_tagNames","_markLabel","addDom","removeDom","getDoms","doms","tagName","tags","colors","_zrender","registerPainter","kCSSColorTable","clampCssByte","clampCssAngle","clampCssFloat","parseCssInt","parseCssFloat","cssHueToRgb","lerpNumber","setRgba","copyRgba","colorCache","lastRemovedArr","putToCache","colorStr","rgbaArr","cached","op","ep","fname","hsla2rgba","iv","hsla","rgba2hsla","H","S","G","vMin","vMax","deltaR","deltaG","deltaB","normalizedValue","leftColor","rightColor","dv","fastMapToColor","fullOutput","mapToColor","arrColor","transformPath","cc","vMag","vRatio","u","vAngle","processArc","fa","psiDeg","xp","yp","lambda","cxp","cyp","createPathProxyFromString","cs","prevCmd","cpx","cpy","ctlPtx","ctlPty","createPathOptions","pathProxy","pathEls","pathList","pathBundle","mathAtan2","nPoint","vmlCore","VMLPainter","initVML","vmlViewport","vmlRoot","_vmlRoot","_vmlViewport","oldDelFromStorage","oldAddToStorage","onRemove","onAdd","_firstPaint","__alreadyNotVisible","brushVML","vmlViewportStyle","doCreateNode","urn","win","vmlInited","doc","createNode","namespaces","zrvml","styleSheets","createStyleSheet","addRule","comma","imageTransformPrefix","Z2","ZLEVEL_BASE","initRootElStyle","coordsize","coordorigin","encodeHtmlAttribute","rgb2Str","append","getZIndex","setColorAndOpacity","getColorAndAlpha","updateFillNode","zrEl","gradientType","focus","expansion","cs1","cs2","colorAndAlphaList","colorAndAlpha","color1","color2","opacity1","opacity2","focusposition","updateStrokeNode","dashstyle","updateFillAndStroke","vmlEl","isFill","_vmlEl","needTransform","strokeEl","weight","zIndex","removeRectText","appendRectText","isImage","ow","oh","_imageSrc","_imageWidth","_imageHeight","imageRuntimeStyle","runtimeStyle","oldRuntimeWidth","oldRuntimeHeight","hasCrop","vmlElStyle","hasRotation","transformFilter","imageEl","_imageEl","cropEl","_cropEl","imageELStyle","tmpImage","overflow","cropElStyle","filterStr","textMeasureEl","DEFAULT_STYLE_NORMAL","fontStyleCache","fontStyleCacheCount","MAX_FONT_CACHE_SIZE","fontEl","getFontStyle","fontString","variant","fontVariant","family","body","ex","offsetWidth","fromTextEl","textPathEl","skewEl","textVmlEl","_textVmlEl","textpathok","textVmlElStyle","string","HandlerProxy","useVML","painterCtors","ZRender","getInstance","delInstance","rendererType","vml","handerProxy","_needsRefresh","zLevel","_needsRefreshHover","refreshHoverImmediately","clearAnimation"],"sourceRoot":""}